var P5e=Object.defineProperty;var D5e=(e,t,n)=>t in e?P5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O5e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var sl=(e,t,n)=>(D5e(e,typeof t!="symbol"?t+"":t,n),n);var msn=O5e((Ton,xre)=>{function $5e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function M5e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var h0e={exports:{}},yM={},p0e={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yI=Symbol.for("react.element"),L5e=Symbol.for("react.portal"),F5e=Symbol.for("react.fragment"),j5e=Symbol.for("react.strict_mode"),B5e=Symbol.for("react.profiler"),U5e=Symbol.for("react.provider"),z5e=Symbol.for("react.context"),V5e=Symbol.for("react.forward_ref"),H5e=Symbol.for("react.suspense"),q5e=Symbol.for("react.memo"),W5e=Symbol.for("react.lazy"),zre=Symbol.iterator;function G5e(e){return e===null||typeof e!="object"?null:(e=zre&&e[zre]||e["@@iterator"],typeof e=="function"?e:null)}var m0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g0e=Object.assign,y0e={};function px(e,t,n){this.props=e,this.context=t,this.refs=y0e,this.updater=n||m0e}px.prototype.isReactComponent={};px.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};px.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function v0e(){}v0e.prototype=px.prototype;function GH(e,t,n){this.props=e,this.context=t,this.refs=y0e,this.updater=n||m0e}var YH=GH.prototype=new v0e;YH.constructor=GH;g0e(YH,px.prototype);YH.isPureReactComponent=!0;var Vre=Array.isArray,b0e=Object.prototype.hasOwnProperty,KH={current:null},_0e={key:!0,ref:!0,__self:!0,__source:!0};function w0e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)b0e.call(t,r)&&!_0e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:yI,type:e,key:s,ref:o,props:i,_owner:KH.current}}function Y5e(e,t){return{$$typeof:yI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function XH(e){return typeof e=="object"&&e!==null&&e.$$typeof===yI}function K5e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hre=/\/+/g;function d5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?K5e(""+e.key):t.toString(36)}function mP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yI:case L5e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+d5(o,0):r,Vre(i)?(n="",e!=null&&(n=e.replace(Hre,"$&/")+"/"),mP(i,t,n,"",function(l){return l})):i!=null&&(XH(i)&&(i=Y5e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Hre,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Vre(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+d5(s,a);o+=mP(s,t,n,u,i)}else if(u=G5e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+d5(s,a++),o+=mP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function AR(e,t,n){if(e==null)return e;var r=[],i=0;return mP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function X5e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var eu={current:null},gP={transition:null},Q5e={ReactCurrentDispatcher:eu,ReactCurrentBatchConfig:gP,ReactCurrentOwner:KH};function E0e(){throw Error("act(...) is not supported in production builds of React.")}$n.Children={map:AR,forEach:function(e,t,n){AR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return AR(e,function(){t++}),t},toArray:function(e){return AR(e,function(t){return t})||[]},only:function(e){if(!XH(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$n.Component=px;$n.Fragment=F5e;$n.Profiler=B5e;$n.PureComponent=GH;$n.StrictMode=j5e;$n.Suspense=H5e;$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q5e;$n.act=E0e;$n.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g0e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=KH.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)b0e.call(t,u)&&!_0e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:yI,type:e.type,key:i,ref:s,props:r,_owner:o}};$n.createContext=function(e){return e={$$typeof:z5e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:U5e,_context:e},e.Consumer=e};$n.createElement=w0e;$n.createFactory=function(e){var t=w0e.bind(null,e);return t.type=e,t};$n.createRef=function(){return{current:null}};$n.forwardRef=function(e){return{$$typeof:V5e,render:e}};$n.isValidElement=XH;$n.lazy=function(e){return{$$typeof:W5e,_payload:{_status:-1,_result:e},_init:X5e}};$n.memo=function(e,t){return{$$typeof:q5e,type:e,compare:t===void 0?null:t}};$n.startTransition=function(e){var t=gP.transition;gP.transition={};try{e()}finally{gP.transition=t}};$n.unstable_act=E0e;$n.useCallback=function(e,t){return eu.current.useCallback(e,t)};$n.useContext=function(e){return eu.current.useContext(e)};$n.useDebugValue=function(){};$n.useDeferredValue=function(e){return eu.current.useDeferredValue(e)};$n.useEffect=function(e,t){return eu.current.useEffect(e,t)};$n.useId=function(){return eu.current.useId()};$n.useImperativeHandle=function(e,t,n){return eu.current.useImperativeHandle(e,t,n)};$n.useInsertionEffect=function(e,t){return eu.current.useInsertionEffect(e,t)};$n.useLayoutEffect=function(e,t){return eu.current.useLayoutEffect(e,t)};$n.useMemo=function(e,t){return eu.current.useMemo(e,t)};$n.useReducer=function(e,t,n){return eu.current.useReducer(e,t,n)};$n.useRef=function(e){return eu.current.useRef(e)};$n.useState=function(e){return eu.current.useState(e)};$n.useSyncExternalStore=function(e,t,n){return eu.current.useSyncExternalStore(e,t,n)};$n.useTransition=function(){return eu.current.useTransition()};$n.version="18.3.1";p0e.exports=$n;var N=p0e.exports;const Un=Ul(N),OD=$5e({__proto__:null,default:Un},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J5e=N,Z5e=Symbol.for("react.element"),e8e=Symbol.for("react.fragment"),t8e=Object.prototype.hasOwnProperty,n8e=J5e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r8e={key:!0,ref:!0,__self:!0,__source:!0};function x0e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)t8e.call(t,r)&&!r8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Z5e,type:e,key:s,ref:o,props:i,_owner:n8e.current}}yM.Fragment=e8e;yM.jsx=x0e;yM.jsxs=x0e;h0e.exports=yM;var _=h0e.exports,a9={},S0e={exports:{}},zl={},T0e={exports:{}},A0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var D=U.length;U.push(H);e:for(;0<D;){var z=D-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[D]=W,D=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],D=U.pop();if(D!==H){U[0]=D;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,D))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=D,z=ne):(U[z]=G,U[q]=D,z=q);else if(ne<W&&0>i(ce,D))U[z]=ce,U[ne]=D,z=ne;else break e}}return H}function i(U,H){var D=U.sortIndex-H.sortIndex;return D!==0?D:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,L(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var D=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=D,h=!1}}var S=!1,T=null,A=-1,C=5,I=-1;function R(){return!(e.unstable_now()-I<C)}function M(){if(T!==null){var U=e.unstable_now();I=U;var H=!0;try{H=T(!0,U)}finally{H?P():(S=!1,T=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=M,P=function(){F.postMessage(null)}}else P=function(){g(M,0)};function L(U){T=U,S||(S=!0,P())}function B(U,H){A=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var D=d;d=H;try{return U()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=d;d=U;try{return H()}finally{d=D}},e.unstable_scheduleCallback=function(U,H,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,U={id:c++,callback:H,priorityLevel:U,startTime:D,expirationTime:W,sortIndex:-1},D>z?(U.sortIndex=D,t(l,U),n(u)===null&&U===n(l)&&(m?(y(A),A=-1):m=!0,B(w,D-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,L(E))),U},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(U){var H=d;return function(){var D=d;d=H;try{return U.apply(this,arguments)}finally{d=D}}}})(A0e);T0e.exports=A0e;var i8e=T0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s8e=N,Cl=i8e;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C0e=new Set,kC={};function mb(e,t){Xw(e,t),Xw(e+"Capture",t)}function Xw(e,t){for(kC[e]=t,e=0;e<t.length;e++)C0e.add(t[e])}var im=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u9=Object.prototype.hasOwnProperty,o8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qre={},Wre={};function a8e(e){return u9.call(Wre,e)?!0:u9.call(qre,e)?!1:o8e.test(e)?Wre[e]=!0:(qre[e]=!0,!1)}function u8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function l8e(e,t,n,r){if(t===null||typeof t>"u"||u8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Po={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Po[e]=new tu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Po[t]=new tu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Po[e]=new tu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Po[e]=new tu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Po[e]=new tu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Po[e]=new tu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Po[e]=new tu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Po[e]=new tu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Po[e]=new tu(e,5,!1,e.toLowerCase(),null,!1,!1)});var QH=/[\-:]([a-z])/g;function JH(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(QH,JH);Po[t]=new tu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(QH,JH);Po[t]=new tu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(QH,JH);Po[t]=new tu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Po[e]=new tu(e,1,!1,e.toLowerCase(),null,!1,!1)});Po.xlinkHref=new tu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Po[e]=new tu(e,1,!1,e.toLowerCase(),null,!0,!0)});function ZH(e,t,n,r){var i=Po.hasOwnProperty(t)?Po[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(l8e(t,n,i,r)&&(n=null),r||i===null?a8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $m=s8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,CR=Symbol.for("react.element"),L_=Symbol.for("react.portal"),F_=Symbol.for("react.fragment"),eq=Symbol.for("react.strict_mode"),l9=Symbol.for("react.profiler"),I0e=Symbol.for("react.provider"),k0e=Symbol.for("react.context"),tq=Symbol.for("react.forward_ref"),c9=Symbol.for("react.suspense"),f9=Symbol.for("react.suspense_list"),nq=Symbol.for("react.memo"),xg=Symbol.for("react.lazy"),R0e=Symbol.for("react.offscreen"),Gre=Symbol.iterator;function FS(e){return e===null||typeof e!="object"?null:(e=Gre&&e[Gre]||e["@@iterator"],typeof e=="function"?e:null)}var Di=Object.assign,h5;function jT(e){if(h5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);h5=t&&t[1]||""}return`
`+h5+e}var p5=!1;function m5(e,t){if(!e||p5)return"";p5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{p5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jT(e):""}function c8e(e){switch(e.tag){case 5:return jT(e.type);case 16:return jT("Lazy");case 13:return jT("Suspense");case 19:return jT("SuspenseList");case 0:case 2:case 15:return e=m5(e.type,!1),e;case 11:return e=m5(e.type.render,!1),e;case 1:return e=m5(e.type,!0),e;default:return""}}function d9(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F_:return"Fragment";case L_:return"Portal";case l9:return"Profiler";case eq:return"StrictMode";case c9:return"Suspense";case f9:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case k0e:return(e.displayName||"Context")+".Consumer";case I0e:return(e._context.displayName||"Context")+".Provider";case tq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case nq:return t=e.displayName||null,t!==null?t:d9(e.type)||"Memo";case xg:t=e._payload,e=e._init;try{return d9(e(t))}catch{}}return null}function f8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return d9(t);case 8:return t===eq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function I0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function N0e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function d8e(e){var t=N0e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function IR(e){e._valueTracker||(e._valueTracker=d8e(e))}function P0e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=N0e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $D(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function h9(e,t){var n=t.checked;return Di({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yre(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=I0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function D0e(e,t){t=t.checked,t!=null&&ZH(e,"checked",t,!1)}function p9(e,t){D0e(e,t);var n=I0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?m9(e,t.type,n):t.hasOwnProperty("defaultValue")&&m9(e,t.type,I0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kre(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function m9(e,t,n){(t!=="number"||$D(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var BT=Array.isArray;function lw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+I0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function g9(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Di({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xre(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(BT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:I0(n)}}function O0e(e,t){var n=I0(t.value),r=I0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Qre(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $0e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function y9(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$0e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kR,M0e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kR=kR||document.createElement("div"),kR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function RC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var RA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},h8e=["Webkit","ms","Moz","O"];Object.keys(RA).forEach(function(e){h8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),RA[t]=RA[e]})});function L0e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||RA.hasOwnProperty(e)&&RA[e]?(""+t).trim():t+"px"}function F0e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=L0e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var p8e=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v9(e,t){if(t){if(p8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function b9(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _9=null;function rq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var w9=null,cw=null,fw=null;function Jre(e){if(e=_I(e)){if(typeof w9!="function")throw Error(et(280));var t=e.stateNode;t&&(t=EM(t),w9(e.stateNode,e.type,t))}}function j0e(e){cw?fw?fw.push(e):fw=[e]:cw=e}function B0e(){if(cw){var e=cw,t=fw;if(fw=cw=null,Jre(e),t)for(e=0;e<t.length;e++)Jre(t[e])}}function U0e(e,t){return e(t)}function z0e(){}var g5=!1;function V0e(e,t,n){if(g5)return e(t,n);g5=!0;try{return U0e(e,t,n)}finally{g5=!1,(cw!==null||fw!==null)&&(z0e(),B0e())}}function NC(e,t){var n=e.stateNode;if(n===null)return null;var r=EM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var E9=!1;if(im)try{var jS={};Object.defineProperty(jS,"passive",{get:function(){E9=!0}}),window.addEventListener("test",jS,jS),window.removeEventListener("test",jS,jS)}catch{E9=!1}function m8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var NA=!1,MD=null,LD=!1,x9=null,g8e={onError:function(e){NA=!0,MD=e}};function y8e(e,t,n,r,i,s,o,a,u){NA=!1,MD=null,m8e.apply(g8e,arguments)}function v8e(e,t,n,r,i,s,o,a,u){if(y8e.apply(this,arguments),NA){if(NA){var l=MD;NA=!1,MD=null}else throw Error(et(198));LD||(LD=!0,x9=l)}}function gb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function H0e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zre(e){if(gb(e)!==e)throw Error(et(188))}function b8e(e){var t=e.alternate;if(!t){if(t=gb(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zre(i),e;if(s===r)return Zre(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function q0e(e){return e=b8e(e),e!==null?W0e(e):null}function W0e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=W0e(e);if(t!==null)return t;e=e.sibling}return null}var G0e=Cl.unstable_scheduleCallback,eie=Cl.unstable_cancelCallback,_8e=Cl.unstable_shouldYield,w8e=Cl.unstable_requestPaint,rs=Cl.unstable_now,E8e=Cl.unstable_getCurrentPriorityLevel,iq=Cl.unstable_ImmediatePriority,Y0e=Cl.unstable_UserBlockingPriority,FD=Cl.unstable_NormalPriority,x8e=Cl.unstable_LowPriority,K0e=Cl.unstable_IdlePriority,vM=null,Kd=null;function S8e(e){if(Kd&&typeof Kd.onCommitFiberRoot=="function")try{Kd.onCommitFiberRoot(vM,e,void 0,(e.current.flags&128)===128)}catch{}}var Af=Math.clz32?Math.clz32:C8e,T8e=Math.log,A8e=Math.LN2;function C8e(e){return e>>>=0,e===0?32:31-(T8e(e)/A8e|0)|0}var RR=64,NR=4194304;function UT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=UT(a):(s&=o,s!==0&&(r=UT(s)))}else o=n&~i,o!==0?r=UT(o):s!==0&&(r=UT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Af(t),i=1<<n,r|=e[n],t&=~i;return r}function I8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Af(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=I8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function S9(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function X0e(){var e=RR;return RR<<=1,!(RR&4194240)&&(RR=64),e}function y5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Af(t),e[t]=n}function R8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Af(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function sq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Af(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dr=0;function Q0e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var J0e,oq,Z0e,eye,tye,T9=!1,PR=[],r0=null,i0=null,s0=null,PC=new Map,DC=new Map,Pg=[],N8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tie(e,t){switch(e){case"focusin":case"focusout":r0=null;break;case"dragenter":case"dragleave":i0=null;break;case"mouseover":case"mouseout":s0=null;break;case"pointerover":case"pointerout":PC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":DC.delete(t.pointerId)}}function BS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=_I(t),t!==null&&oq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function P8e(e,t,n,r,i){switch(t){case"focusin":return r0=BS(r0,e,t,n,r,i),!0;case"dragenter":return i0=BS(i0,e,t,n,r,i),!0;case"mouseover":return s0=BS(s0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return PC.set(s,BS(PC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,DC.set(s,BS(DC.get(s)||null,e,t,n,r,i)),!0}return!1}function nye(e){var t=B1(e.target);if(t!==null){var n=gb(t);if(n!==null){if(t=n.tag,t===13){if(t=H0e(n),t!==null){e.blockedOn=t,tye(e.priority,function(){Z0e(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=A9(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);_9=r,n.target.dispatchEvent(r),_9=null}else return t=_I(n),t!==null&&oq(t),e.blockedOn=n,!1;t.shift()}return!0}function nie(e,t,n){yP(e)&&n.delete(t)}function D8e(){T9=!1,r0!==null&&yP(r0)&&(r0=null),i0!==null&&yP(i0)&&(i0=null),s0!==null&&yP(s0)&&(s0=null),PC.forEach(nie),DC.forEach(nie)}function US(e,t){e.blockedOn===t&&(e.blockedOn=null,T9||(T9=!0,Cl.unstable_scheduleCallback(Cl.unstable_NormalPriority,D8e)))}function OC(e){function t(i){return US(i,e)}if(0<PR.length){US(PR[0],e);for(var n=1;n<PR.length;n++){var r=PR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(r0!==null&&US(r0,e),i0!==null&&US(i0,e),s0!==null&&US(s0,e),PC.forEach(t),DC.forEach(t),n=0;n<Pg.length;n++)r=Pg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pg.length&&(n=Pg[0],n.blockedOn===null);)nye(n),n.blockedOn===null&&Pg.shift()}var dw=$m.ReactCurrentBatchConfig,BD=!0;function O8e(e,t,n,r){var i=Dr,s=dw.transition;dw.transition=null;try{Dr=1,aq(e,t,n,r)}finally{Dr=i,dw.transition=s}}function $8e(e,t,n,r){var i=Dr,s=dw.transition;dw.transition=null;try{Dr=4,aq(e,t,n,r)}finally{Dr=i,dw.transition=s}}function aq(e,t,n,r){if(BD){var i=A9(e,t,n,r);if(i===null)C5(e,t,r,UD,n),tie(e,r);else if(P8e(i,e,t,n,r))r.stopPropagation();else if(tie(e,r),t&4&&-1<N8e.indexOf(e)){for(;i!==null;){var s=_I(i);if(s!==null&&J0e(s),s=A9(e,t,n,r),s===null&&C5(e,t,r,UD,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else C5(e,t,r,null,n)}}var UD=null;function A9(e,t,n,r){if(UD=null,e=rq(r),e=B1(e),e!==null)if(t=gb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=H0e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return UD=e,null}function rye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E8e()){case iq:return 1;case Y0e:return 4;case FD:case x8e:return 16;case K0e:return 536870912;default:return 16}default:return 16}}var zg=null,uq=null,vP=null;function iye(){if(vP)return vP;var e,t=uq,n=t.length,r,i="value"in zg?zg.value:zg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return vP=i.slice(e,1<r?1-r:void 0)}function bP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function DR(){return!0}function rie(){return!1}function Vl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?DR:rie,this.isPropagationStopped=rie,this}return Di(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=DR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=DR)},persist:function(){},isPersistent:DR}),t}var mx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lq=Vl(mx),bI=Di({},mx,{view:0,detail:0}),M8e=Vl(bI),v5,b5,zS,bM=Di({},bI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zS&&(zS&&e.type==="mousemove"?(v5=e.screenX-zS.screenX,b5=e.screenY-zS.screenY):b5=v5=0,zS=e),v5)},movementY:function(e){return"movementY"in e?e.movementY:b5}}),iie=Vl(bM),L8e=Di({},bM,{dataTransfer:0}),F8e=Vl(L8e),j8e=Di({},bI,{relatedTarget:0}),_5=Vl(j8e),B8e=Di({},mx,{animationName:0,elapsedTime:0,pseudoElement:0}),U8e=Vl(B8e),z8e=Di({},mx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),V8e=Vl(z8e),H8e=Di({},mx,{data:0}),sie=Vl(H8e),q8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y8e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G8e[e])?!!t[e]:!1}function cq(){return Y8e}var K8e=Di({},bI,{key:function(e){if(e.key){var t=q8e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?W8e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cq,charCode:function(e){return e.type==="keypress"?bP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),X8e=Vl(K8e),Q8e=Di({},bM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oie=Vl(Q8e),J8e=Di({},bI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cq}),Z8e=Vl(J8e),eje=Di({},mx,{propertyName:0,elapsedTime:0,pseudoElement:0}),tje=Vl(eje),nje=Di({},bM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rje=Vl(nje),ije=[9,13,27,32],fq=im&&"CompositionEvent"in window,PA=null;im&&"documentMode"in document&&(PA=document.documentMode);var sje=im&&"TextEvent"in window&&!PA,sye=im&&(!fq||PA&&8<PA&&11>=PA),aie=" ",uie=!1;function oye(e,t){switch(e){case"keyup":return ije.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var j_=!1;function oje(e,t){switch(e){case"compositionend":return aye(t);case"keypress":return t.which!==32?null:(uie=!0,aie);case"textInput":return e=t.data,e===aie&&uie?null:e;default:return null}}function aje(e,t){if(j_)return e==="compositionend"||!fq&&oye(e,t)?(e=iye(),vP=uq=zg=null,j_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sye&&t.locale!=="ko"?null:t.data;default:return null}}var uje={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uje[e.type]:t==="textarea"}function uye(e,t,n,r){j0e(r),t=zD(t,"onChange"),0<t.length&&(n=new lq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var DA=null,$C=null;function lje(e){bye(e,0)}function _M(e){var t=z_(e);if(P0e(t))return e}function cje(e,t){if(e==="change")return t}var lye=!1;if(im){var w5;if(im){var E5="oninput"in document;if(!E5){var cie=document.createElement("div");cie.setAttribute("oninput","return;"),E5=typeof cie.oninput=="function"}w5=E5}else w5=!1;lye=w5&&(!document.documentMode||9<document.documentMode)}function fie(){DA&&(DA.detachEvent("onpropertychange",cye),$C=DA=null)}function cye(e){if(e.propertyName==="value"&&_M($C)){var t=[];uye(t,$C,e,rq(e)),V0e(lje,t)}}function fje(e,t,n){e==="focusin"?(fie(),DA=t,$C=n,DA.attachEvent("onpropertychange",cye)):e==="focusout"&&fie()}function dje(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _M($C)}function hje(e,t){if(e==="click")return _M(t)}function pje(e,t){if(e==="input"||e==="change")return _M(t)}function mje(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mf=typeof Object.is=="function"?Object.is:mje;function MC(e,t){if(Mf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u9.call(t,i)||!Mf(e[i],t[i]))return!1}return!0}function die(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hie(e,t){var n=die(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=die(n)}}function fye(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fye(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function dye(){for(var e=window,t=$D();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$D(e.document)}return t}function dq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gje(e){var t=dye(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fye(n.ownerDocument.documentElement,n)){if(r!==null&&dq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=hie(n,s);var o=hie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yje=im&&"documentMode"in document&&11>=document.documentMode,B_=null,C9=null,OA=null,I9=!1;function pie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;I9||B_==null||B_!==$D(r)||(r=B_,"selectionStart"in r&&dq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),OA&&MC(OA,r)||(OA=r,r=zD(C9,"onSelect"),0<r.length&&(t=new lq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=B_)))}function OR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var U_={animationend:OR("Animation","AnimationEnd"),animationiteration:OR("Animation","AnimationIteration"),animationstart:OR("Animation","AnimationStart"),transitionend:OR("Transition","TransitionEnd")},x5={},hye={};im&&(hye=document.createElement("div").style,"AnimationEvent"in window||(delete U_.animationend.animation,delete U_.animationiteration.animation,delete U_.animationstart.animation),"TransitionEvent"in window||delete U_.transitionend.transition);function wM(e){if(x5[e])return x5[e];if(!U_[e])return e;var t=U_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hye)return x5[e]=t[n];return e}var pye=wM("animationend"),mye=wM("animationiteration"),gye=wM("animationstart"),yye=wM("transitionend"),vye=new Map,mie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function my(e,t){vye.set(e,t),mb(t,[e])}for(var S5=0;S5<mie.length;S5++){var T5=mie[S5],vje=T5.toLowerCase(),bje=T5[0].toUpperCase()+T5.slice(1);my(vje,"on"+bje)}my(pye,"onAnimationEnd");my(mye,"onAnimationIteration");my(gye,"onAnimationStart");my("dblclick","onDoubleClick");my("focusin","onFocus");my("focusout","onBlur");my(yye,"onTransitionEnd");Xw("onMouseEnter",["mouseout","mouseover"]);Xw("onMouseLeave",["mouseout","mouseover"]);Xw("onPointerEnter",["pointerout","pointerover"]);Xw("onPointerLeave",["pointerout","pointerover"]);mb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mb("onBeforeInput",["compositionend","keypress","textInput","paste"]);mb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_je=new Set("cancel close invalid load scroll toggle".split(" ").concat(zT));function gie(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,v8e(r,t,void 0,e),e.currentTarget=null}function bye(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;gie(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;gie(i,a,l),s=u}}}if(LD)throw e=x9,LD=!1,x9=null,e}function si(e,t){var n=t[D9];n===void 0&&(n=t[D9]=new Set);var r=e+"__bubble";n.has(r)||(_ye(t,e,2,!1),n.add(r))}function A5(e,t,n){var r=0;t&&(r|=4),_ye(n,e,r,t)}var $R="_reactListening"+Math.random().toString(36).slice(2);function LC(e){if(!e[$R]){e[$R]=!0,C0e.forEach(function(n){n!=="selectionchange"&&(_je.has(n)||A5(n,!1,e),A5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$R]||(t[$R]=!0,A5("selectionchange",!1,t))}}function _ye(e,t,n,r){switch(rye(t)){case 1:var i=O8e;break;case 4:i=$8e;break;default:i=aq}n=i.bind(null,t,n,e),i=void 0,!E9||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function C5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=B1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}V0e(function(){var l=s,c=rq(n),f=[];e:{var d=vye.get(e);if(d!==void 0){var h=lq,p=e;switch(e){case"keypress":if(bP(n)===0)break e;case"keydown":case"keyup":h=X8e;break;case"focusin":p="focus",h=_5;break;case"focusout":p="blur",h=_5;break;case"beforeblur":case"afterblur":h=_5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=iie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=F8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Z8e;break;case pye:case mye:case gye:h=U8e;break;case yye:h=tje;break;case"scroll":h=M8e;break;case"wheel":h=rje;break;case"copy":case"cut":case"paste":h=V8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=oie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=NC(v,y),w!=null&&m.push(FC(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==_9&&(p=n.relatedTarget||n.fromElement)&&(B1(p)||p[sm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?B1(p):null,p!==null&&(g=gb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=iie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=oie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:z_(h),b=p==null?d:z_(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,B1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Zb(b))v++;for(b=0,w=y;w;w=Zb(w))b++;for(;0<v-b;)m=Zb(m),v--;for(;0<b-v;)y=Zb(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Zb(m),y=Zb(y)}m=null}else m=null;h!==null&&yie(f,d,h,m,!1),p!==null&&g!==null&&yie(f,g,p,m,!0)}}e:{if(d=l?z_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=cje;else if(lie(d))if(lye)E=pje;else{E=dje;var S=fje}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=hje);if(E&&(E=E(e,l))){uye(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&m9(d,"number",d.value)}switch(S=l?z_(l):window,e){case"focusin":(lie(S)||S.contentEditable==="true")&&(B_=S,C9=l,OA=null);break;case"focusout":OA=C9=B_=null;break;case"mousedown":I9=!0;break;case"contextmenu":case"mouseup":case"dragend":I9=!1,pie(f,n,c);break;case"selectionchange":if(yje)break;case"keydown":case"keyup":pie(f,n,c)}var T;if(fq)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else j_?oye(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(sye&&n.locale!=="ko"&&(j_||A!=="onCompositionStart"?A==="onCompositionEnd"&&j_&&(T=iye()):(zg=c,uq="value"in zg?zg.value:zg.textContent,j_=!0)),S=zD(l,A),0<S.length&&(A=new sie(A,e,null,n,c),f.push({event:A,listeners:S}),T?A.data=T:(T=aye(n),T!==null&&(A.data=T)))),(T=sje?oje(e,n):aje(e,n))&&(l=zD(l,"onBeforeInput"),0<l.length&&(c=new sie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}bye(f,t)})}function FC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function zD(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=NC(e,n),s!=null&&r.unshift(FC(e,s,i)),s=NC(e,t),s!=null&&r.push(FC(e,s,i))),e=e.return}return r}function Zb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=NC(n,s),u!=null&&o.unshift(FC(n,u,a))):i||(u=NC(n,s),u!=null&&o.push(FC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var wje=/\r\n?/g,Eje=/\u0000|\uFFFD/g;function vie(e){return(typeof e=="string"?e:""+e).replace(wje,`
`).replace(Eje,"")}function MR(e,t,n){if(t=vie(t),vie(e)!==t&&n)throw Error(et(425))}function VD(){}var k9=null,R9=null;function N9(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var P9=typeof setTimeout=="function"?setTimeout:void 0,xje=typeof clearTimeout=="function"?clearTimeout:void 0,bie=typeof Promise=="function"?Promise:void 0,Sje=typeof queueMicrotask=="function"?queueMicrotask:typeof bie<"u"?function(e){return bie.resolve(null).then(e).catch(Tje)}:P9;function Tje(e){setTimeout(function(){throw e})}function I5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),OC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);OC(t)}function o0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _ie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gx=Math.random().toString(36).slice(2),Id="__reactFiber$"+gx,jC="__reactProps$"+gx,sm="__reactContainer$"+gx,D9="__reactEvents$"+gx,Aje="__reactListeners$"+gx,Cje="__reactHandles$"+gx;function B1(e){var t=e[Id];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sm]||n[Id]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_ie(e);e!==null;){if(n=e[Id])return n;e=_ie(e)}return t}e=n,n=e.parentNode}return null}function _I(e){return e=e[Id]||e[sm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function z_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function EM(e){return e[jC]||null}var O9=[],V_=-1;function gy(e){return{current:e}}function ci(e){0>V_||(e.current=O9[V_],O9[V_]=null,V_--)}function Zr(e,t){V_++,O9[V_]=e.current,e.current=t}var k0={},ma=gy(k0),Pu=gy(!1),xv=k0;function Qw(e,t){var n=e.type.contextTypes;if(!n)return k0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Du(e){return e=e.childContextTypes,e!=null}function HD(){ci(Pu),ci(ma)}function wie(e,t,n){if(ma.current!==k0)throw Error(et(168));Zr(ma,t),Zr(Pu,n)}function wye(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,f8e(e)||"Unknown",i));return Di({},n,r)}function qD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||k0,xv=ma.current,Zr(ma,e),Zr(Pu,Pu.current),!0}function Eie(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=wye(e,t,xv),r.__reactInternalMemoizedMergedChildContext=e,ci(Pu),ci(ma),Zr(ma,e)):ci(Pu),Zr(Pu,n)}var wp=null,xM=!1,k5=!1;function Eye(e){wp===null?wp=[e]:wp.push(e)}function Ije(e){xM=!0,Eye(e)}function yy(){if(!k5&&wp!==null){k5=!0;var e=0,t=Dr;try{var n=wp;for(Dr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wp=null,xM=!1}catch(i){throw wp!==null&&(wp=wp.slice(e+1)),G0e(iq,yy),i}finally{Dr=t,k5=!1}}return null}var H_=[],q_=0,WD=null,GD=0,rc=[],ic=0,Sv=null,Dp=1,Op="";function d1(e,t){H_[q_++]=GD,H_[q_++]=WD,WD=e,GD=t}function xye(e,t,n){rc[ic++]=Dp,rc[ic++]=Op,rc[ic++]=Sv,Sv=e;var r=Dp;e=Op;var i=32-Af(r)-1;r&=~(1<<i),n+=1;var s=32-Af(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Dp=1<<32-Af(t)+i|n<<i|r,Op=s+e}else Dp=1<<s|n<<i|r,Op=e}function hq(e){e.return!==null&&(d1(e,1),xye(e,1,0))}function pq(e){for(;e===WD;)WD=H_[--q_],H_[q_]=null,GD=H_[--q_],H_[q_]=null;for(;e===Sv;)Sv=rc[--ic],rc[ic]=null,Op=rc[--ic],rc[ic]=null,Dp=rc[--ic],rc[ic]=null}var xl=null,gl=null,_i=!1,lf=null;function Sye(e,t){var n=fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xl=e,gl=o0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xl=e,gl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sv!==null?{id:Dp,overflow:Op}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xl=e,gl=null,!0):!1;default:return!1}}function $9(e){return(e.mode&1)!==0&&(e.flags&128)===0}function M9(e){if(_i){var t=gl;if(t){var n=t;if(!xie(e,t)){if($9(e))throw Error(et(418));t=o0(n.nextSibling);var r=xl;t&&xie(e,t)?Sye(r,n):(e.flags=e.flags&-4097|2,_i=!1,xl=e)}}else{if($9(e))throw Error(et(418));e.flags=e.flags&-4097|2,_i=!1,xl=e}}}function Sie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xl=e}function LR(e){if(e!==xl)return!1;if(!_i)return Sie(e),_i=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!N9(e.type,e.memoizedProps)),t&&(t=gl)){if($9(e))throw Tye(),Error(et(418));for(;t;)Sye(e,t),t=o0(t.nextSibling)}if(Sie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gl=o0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gl=null}}else gl=xl?o0(e.stateNode.nextSibling):null;return!0}function Tye(){for(var e=gl;e;)e=o0(e.nextSibling)}function Jw(){gl=xl=null,_i=!1}function mq(e){lf===null?lf=[e]:lf.push(e)}var kje=$m.ReactCurrentBatchConfig;function VS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function FR(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tie(e){var t=e._init;return t(e._payload)}function Aye(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=c0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=M5(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===F_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xg&&Tie(E)===v.type)?(w=i(v,b.props),w.ref=VS(y,v,b),w.return=y,w):(w=AP(b.type,b.key,b.props,null,y.mode,w),w.ref=VS(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=L5(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=av(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=M5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case CR:return b=AP(v.type,v.key,v.props,null,y.mode,b),b.ref=VS(y,null,v),b.return=y,b;case L_:return v=L5(v,y.mode,b),v.return=y,v;case xg:var w=v._init;return f(y,w(v._payload),b)}if(BT(v)||FS(v))return v=av(v,y.mode,b,null),v.return=y,v;FR(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case CR:return b.key===E?u(y,v,b,w):null;case L_:return b.key===E?l(y,v,b,w):null;case xg:return E=b._init,d(y,v,E(b._payload),w)}if(BT(b)||FS(b))return E!==null?null:c(y,v,b,w,null);FR(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case CR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case L_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case xg:var S=w._init;return h(y,v,b,S(w._payload),E)}if(BT(w)||FS(w))return y=y.get(b)||null,c(v,y,w,E,null);FR(v,w)}return null}function p(y,v,b,w){for(var E=null,S=null,T=v,A=v=0,C=null;T!==null&&A<b.length;A++){T.index>A?(C=T,T=null):C=T.sibling;var I=d(y,T,b[A],w);if(I===null){T===null&&(T=C);break}e&&T&&I.alternate===null&&t(y,T),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I,T=C}if(A===b.length)return n(y,T),_i&&d1(y,A),E;if(T===null){for(;A<b.length;A++)T=f(y,b[A],w),T!==null&&(v=s(T,v,A),S===null?E=T:S.sibling=T,S=T);return _i&&d1(y,A),E}for(T=r(y,T);A<b.length;A++)C=h(T,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?A:C.key),v=s(C,v,A),S===null?E=C:S.sibling=C,S=C);return e&&T.forEach(function(R){return t(y,R)}),_i&&d1(y,A),E}function m(y,v,b,w){var E=FS(b);if(typeof E!="function")throw Error(et(150));if(b=E.call(b),b==null)throw Error(et(151));for(var S=E=null,T=v,A=v=0,C=null,I=b.next();T!==null&&!I.done;A++,I=b.next()){T.index>A?(C=T,T=null):C=T.sibling;var R=d(y,T,I.value,w);if(R===null){T===null&&(T=C);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,A),S===null?E=R:S.sibling=R,S=R,T=C}if(I.done)return n(y,T),_i&&d1(y,A),E;if(T===null){for(;!I.done;A++,I=b.next())I=f(y,I.value,w),I!==null&&(v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return _i&&d1(y,A),E}for(T=r(y,T);!I.done;A++,I=b.next())I=h(T,y,A,I.value,w),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?A:I.key),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return e&&T.forEach(function(M){return t(y,M)}),_i&&d1(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===F_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case CR:e:{for(var E=b.key,S=v;S!==null;){if(S.key===E){if(E=b.type,E===F_){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xg&&Tie(E)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=VS(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===F_?(v=av(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=AP(b.type,b.key,b.props,null,y.mode,w),w.ref=VS(y,v,b),w.return=y,y=w)}return o(y);case L_:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=L5(b,y.mode,w),v.return=y,y=v}return o(y);case xg:return S=b._init,g(y,v,S(b._payload),w)}if(BT(b))return p(y,v,b,w);if(FS(b))return m(y,v,b,w);FR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=M5(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var Zw=Aye(!0),Cye=Aye(!1),YD=gy(null),KD=null,W_=null,gq=null;function yq(){gq=W_=KD=null}function vq(e){var t=YD.current;ci(YD),e._currentValue=t}function L9(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hw(e,t){KD=e,gq=W_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Au=!0),e.firstContext=null)}function bc(e){var t=e._currentValue;if(gq!==e)if(e={context:e,memoizedValue:t,next:null},W_===null){if(KD===null)throw Error(et(308));W_=e,KD.dependencies={lanes:0,firstContext:e}}else W_=W_.next=e;return t}var U1=null;function bq(e){U1===null?U1=[e]:U1.push(e)}function Iye(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,bq(t)):(n.next=i.next,i.next=n),t.interleaved=n,om(e,r)}function om(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sg=!1;function _q(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kye(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function a0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,om(e,n)}return i=r.interleaved,i===null?(t.next=t,bq(r)):(t.next=i.next,i.next=t),r.interleaved=t,om(e,n)}function _P(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sq(e,n)}}function Aie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function XD(e,t,n,r){var i=e.updateQueue;Sg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Di({},f,d);break e;case 2:Sg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Av|=o,e.lanes=o,e.memoizedState=f}}function Cie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var wI={},Xd=gy(wI),BC=gy(wI),UC=gy(wI);function z1(e){if(e===wI)throw Error(et(174));return e}function wq(e,t){switch(Zr(UC,t),Zr(BC,e),Zr(Xd,wI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:y9(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=y9(t,e)}ci(Xd),Zr(Xd,t)}function eE(){ci(Xd),ci(BC),ci(UC)}function Rye(e){z1(UC.current);var t=z1(Xd.current),n=y9(t,e.type);t!==n&&(Zr(BC,e),Zr(Xd,n))}function Eq(e){BC.current===e&&(ci(Xd),ci(BC))}var Ii=gy(0);function QD(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var R5=[];function xq(){for(var e=0;e<R5.length;e++)R5[e]._workInProgressVersionPrimary=null;R5.length=0}var wP=$m.ReactCurrentDispatcher,N5=$m.ReactCurrentBatchConfig,Tv=0,Ri=null,ws=null,Gs=null,JD=!1,$A=!1,zC=0,Rje=0;function Ho(){throw Error(et(321))}function Sq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mf(e[n],t[n]))return!1;return!0}function Tq(e,t,n,r,i,s){if(Tv=s,Ri=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wP.current=e===null||e.memoizedState===null?Oje:$je,e=n(r,i),$A){s=0;do{if($A=!1,zC=0,25<=s)throw Error(et(301));s+=1,Gs=ws=null,t.updateQueue=null,wP.current=Mje,e=n(r,i)}while($A)}if(wP.current=ZD,t=ws!==null&&ws.next!==null,Tv=0,Gs=ws=Ri=null,JD=!1,t)throw Error(et(300));return e}function Aq(){var e=zC!==0;return zC=0,e}function vd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gs===null?Ri.memoizedState=Gs=e:Gs=Gs.next=e,Gs}function _c(){if(ws===null){var e=Ri.alternate;e=e!==null?e.memoizedState:null}else e=ws.next;var t=Gs===null?Ri.memoizedState:Gs.next;if(t!==null)Gs=t,ws=e;else{if(e===null)throw Error(et(310));ws=e,e={memoizedState:ws.memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},Gs===null?Ri.memoizedState=Gs=e:Gs=Gs.next=e}return Gs}function VC(e,t){return typeof t=="function"?t(e):t}function P5(e){var t=_c(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=ws,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Tv&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ri.lanes|=c,Av|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Mf(r,t.memoizedState)||(Au=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ri.lanes|=s,Av|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function D5(e){var t=_c(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Mf(s,t.memoizedState)||(Au=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Nye(){}function Pye(e,t){var n=Ri,r=_c(),i=t(),s=!Mf(r.memoizedState,i);if(s&&(r.memoizedState=i,Au=!0),r=r.queue,Cq($ye.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Gs!==null&&Gs.memoizedState.tag&1){if(n.flags|=2048,HC(9,Oye.bind(null,n,r,i,t),void 0,null),so===null)throw Error(et(349));Tv&30||Dye(n,t,i)}return i}function Dye(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Oye(e,t,n,r){t.value=n,t.getSnapshot=r,Mye(t)&&Lye(e)}function $ye(e,t,n){return n(function(){Mye(t)&&Lye(e)})}function Mye(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mf(e,n)}catch{return!0}}function Lye(e){var t=om(e,1);t!==null&&Cf(t,e,1,-1)}function Iie(e){var t=vd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:VC,lastRenderedState:e},t.queue=e,e=e.dispatch=Dje.bind(null,Ri,e),[t.memoizedState,e]}function HC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Fye(){return _c().memoizedState}function EP(e,t,n,r){var i=vd();Ri.flags|=e,i.memoizedState=HC(1|t,n,void 0,r===void 0?null:r)}function SM(e,t,n,r){var i=_c();r=r===void 0?null:r;var s=void 0;if(ws!==null){var o=ws.memoizedState;if(s=o.destroy,r!==null&&Sq(r,o.deps)){i.memoizedState=HC(t,n,s,r);return}}Ri.flags|=e,i.memoizedState=HC(1|t,n,s,r)}function kie(e,t){return EP(8390656,8,e,t)}function Cq(e,t){return SM(2048,8,e,t)}function jye(e,t){return SM(4,2,e,t)}function Bye(e,t){return SM(4,4,e,t)}function Uye(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zye(e,t,n){return n=n!=null?n.concat([e]):null,SM(4,4,Uye.bind(null,t,e),n)}function Iq(){}function Vye(e,t){var n=_c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sq(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hye(e,t){var n=_c();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Sq(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qye(e,t,n){return Tv&21?(Mf(n,t)||(n=X0e(),Ri.lanes|=n,Av|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Au=!0),e.memoizedState=n)}function Nje(e,t){var n=Dr;Dr=n!==0&&4>n?n:4,e(!0);var r=N5.transition;N5.transition={};try{e(!1),t()}finally{Dr=n,N5.transition=r}}function Wye(){return _c().memoizedState}function Pje(e,t,n){var r=l0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gye(e))Yye(t,n);else if(n=Iye(e,t,n,r),n!==null){var i=Va();Cf(n,e,r,i),Kye(n,t,r)}}function Dje(e,t,n){var r=l0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gye(e))Yye(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Mf(a,o)){var u=t.interleaved;u===null?(i.next=i,bq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=Iye(e,t,i,r),n!==null&&(i=Va(),Cf(n,e,r,i),Kye(n,t,r))}}function Gye(e){var t=e.alternate;return e===Ri||t!==null&&t===Ri}function Yye(e,t){$A=JD=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Kye(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sq(e,n)}}var ZD={readContext:bc,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useInsertionEffect:Ho,useLayoutEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useDeferredValue:Ho,useTransition:Ho,useMutableSource:Ho,useSyncExternalStore:Ho,useId:Ho,unstable_isNewReconciler:!1},Oje={readContext:bc,useCallback:function(e,t){return vd().memoizedState=[e,t===void 0?null:t],e},useContext:bc,useEffect:kie,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,EP(4194308,4,Uye.bind(null,t,e),n)},useLayoutEffect:function(e,t){return EP(4194308,4,e,t)},useInsertionEffect:function(e,t){return EP(4,2,e,t)},useMemo:function(e,t){var n=vd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Pje.bind(null,Ri,e),[r.memoizedState,e]},useRef:function(e){var t=vd();return e={current:e},t.memoizedState=e},useState:Iie,useDebugValue:Iq,useDeferredValue:function(e){return vd().memoizedState=e},useTransition:function(){var e=Iie(!1),t=e[0];return e=Nje.bind(null,e[1]),vd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ri,i=vd();if(_i){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),so===null)throw Error(et(349));Tv&30||Dye(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,kie($ye.bind(null,r,s,e),[e]),r.flags|=2048,HC(9,Oye.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vd(),t=so.identifierPrefix;if(_i){var n=Op,r=Dp;n=(r&~(1<<32-Af(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Rje++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$je={readContext:bc,useCallback:Vye,useContext:bc,useEffect:Cq,useImperativeHandle:zye,useInsertionEffect:jye,useLayoutEffect:Bye,useMemo:Hye,useReducer:P5,useRef:Fye,useState:function(){return P5(VC)},useDebugValue:Iq,useDeferredValue:function(e){var t=_c();return qye(t,ws.memoizedState,e)},useTransition:function(){var e=P5(VC)[0],t=_c().memoizedState;return[e,t]},useMutableSource:Nye,useSyncExternalStore:Pye,useId:Wye,unstable_isNewReconciler:!1},Mje={readContext:bc,useCallback:Vye,useContext:bc,useEffect:Cq,useImperativeHandle:zye,useInsertionEffect:jye,useLayoutEffect:Bye,useMemo:Hye,useReducer:D5,useRef:Fye,useState:function(){return D5(VC)},useDebugValue:Iq,useDeferredValue:function(e){var t=_c();return ws===null?t.memoizedState=e:qye(t,ws.memoizedState,e)},useTransition:function(){var e=D5(VC)[0],t=_c().memoizedState;return[e,t]},useMutableSource:Nye,useSyncExternalStore:Pye,useId:Wye,unstable_isNewReconciler:!1};function nf(e,t){if(e&&e.defaultProps){t=Di({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function F9(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Di({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var TM={isMounted:function(e){return(e=e._reactInternals)?gb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Va(),i=l0(e),s=Wp(r,i);s.payload=t,n!=null&&(s.callback=n),t=a0(e,s,i),t!==null&&(Cf(t,e,i,r),_P(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Va(),i=l0(e),s=Wp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=a0(e,s,i),t!==null&&(Cf(t,e,i,r),_P(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Va(),r=l0(e),i=Wp(n,r);i.tag=2,t!=null&&(i.callback=t),t=a0(e,i,r),t!==null&&(Cf(t,e,r,n),_P(t,e,r))}};function Rie(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!MC(n,r)||!MC(i,s):!0}function Xye(e,t,n){var r=!1,i=k0,s=t.contextType;return typeof s=="object"&&s!==null?s=bc(s):(i=Du(t)?xv:ma.current,r=t.contextTypes,s=(r=r!=null)?Qw(e,i):k0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=TM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Nie(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&TM.enqueueReplaceState(t,t.state,null)}function j9(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},_q(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=bc(s):(s=Du(t)?xv:ma.current,i.context=Qw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(F9(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&TM.enqueueReplaceState(i,i.state,null),XD(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tE(e,t){try{var n="",r=t;do n+=c8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function O5(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function B9(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lje=typeof WeakMap=="function"?WeakMap:Map;function Qye(e,t,n){n=Wp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){tO||(tO=!0,X9=r),B9(e,t)},n}function Jye(e,t,n){n=Wp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){B9(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){B9(e,t),typeof r!="function"&&(u0===null?u0=new Set([this]):u0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Pie(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lje;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Qje.bind(null,e,t,n),t.then(e,e))}function Die(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Oie(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wp(-1,1),t.tag=2,a0(n,t,1))),n.lanes|=1),e)}var Fje=$m.ReactCurrentOwner,Au=!1;function Pa(e,t,n,r){t.child=e===null?Cye(t,null,n,r):Zw(t,e.child,n,r)}function $ie(e,t,n,r,i){n=n.render;var s=t.ref;return hw(t,i),r=Tq(e,t,n,r,s,i),n=Aq(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(_i&&n&&hq(t),t.flags|=1,Pa(e,t,r,i),t.child)}function Mie(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Mq(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Zye(e,t,s,r,i)):(e=AP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:MC,n(o,r)&&e.ref===t.ref)return am(e,t,i)}return t.flags|=1,e=c0(s,r),e.ref=t.ref,e.return=t,t.child=e}function Zye(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(MC(s,r)&&e.ref===t.ref)if(Au=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Au=!0);else return t.lanes=e.lanes,am(e,t,i)}return U9(e,t,n,r,i)}function e1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(Y_,ll),ll|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(Y_,ll),ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Zr(Y_,ll),ll|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Zr(Y_,ll),ll|=r;return Pa(e,t,i,n),t.child}function t1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function U9(e,t,n,r,i){var s=Du(n)?xv:ma.current;return s=Qw(t,s),hw(t,i),n=Tq(e,t,n,r,s,i),r=Aq(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(_i&&r&&hq(t),t.flags|=1,Pa(e,t,n,i),t.child)}function Lie(e,t,n,r,i){if(Du(n)){var s=!0;qD(t)}else s=!1;if(hw(t,i),t.stateNode===null)xP(e,t),Xye(t,n,r),j9(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=bc(l):(l=Du(n)?xv:ma.current,l=Qw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Nie(t,o,r,l),Sg=!1;var d=t.memoizedState;o.state=d,XD(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Pu.current||Sg?(typeof c=="function"&&(F9(t,n,c,r),u=t.memoizedState),(a=Sg||Rie(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,kye(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:nf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bc(u):(u=Du(n)?xv:ma.current,u=Qw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Nie(t,o,r,u),Sg=!1,d=t.memoizedState,o.state=d,XD(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Pu.current||Sg?(typeof h=="function"&&(F9(t,n,h,r),p=t.memoizedState),(l=Sg||Rie(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return z9(e,t,n,r,s,i)}function z9(e,t,n,r,i,s){t1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Eie(t,n,!1),am(e,t,s);r=t.stateNode,Fje.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Zw(t,e.child,null,s),t.child=Zw(t,null,a,s)):Pa(e,t,a,s),t.memoizedState=r.state,i&&Eie(t,n,!0),t.child}function n1e(e){var t=e.stateNode;t.pendingContext?wie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wie(e,t.context,!1),wq(e,t.containerInfo)}function Fie(e,t,n,r,i){return Jw(),mq(i),t.flags|=256,Pa(e,t,n,r),t.child}var V9={dehydrated:null,treeContext:null,retryLane:0};function H9(e){return{baseLanes:e,cachePool:null,transitions:null}}function r1e(e,t,n){var r=t.pendingProps,i=Ii.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Zr(Ii,i&1),e===null)return M9(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=IM(o,r,0,null),e=av(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=H9(n),t.memoizedState=V9,e):kq(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return jje(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=c0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=c0(a,s):(s=av(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?H9(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=V9,r}return s=e.child,e=s.sibling,r=c0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function kq(e,t){return t=IM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jR(e,t,n,r){return r!==null&&mq(r),Zw(t,e.child,null,n),e=kq(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jje(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=O5(Error(et(422))),jR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=IM({mode:"visible",children:r.children},i,0,null),s=av(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Zw(t,e.child,null,o),t.child.memoizedState=H9(o),t.memoizedState=V9,s);if(!(t.mode&1))return jR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=O5(s,r,void 0),jR(e,t,o,r)}if(a=(o&e.childLanes)!==0,Au||a){if(r=so,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,om(e,i),Cf(r,e,i,-1))}return $q(),r=O5(Error(et(421))),jR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Jje.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,gl=o0(i.nextSibling),xl=t,_i=!0,lf=null,e!==null&&(rc[ic++]=Dp,rc[ic++]=Op,rc[ic++]=Sv,Dp=e.id,Op=e.overflow,Sv=t),t=kq(t,r.children),t.flags|=4096,t)}function jie(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),L9(e.return,t,n)}function $5(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function i1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Pa(e,t,r.children,n),r=Ii.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jie(e,n,t);else if(e.tag===19)jie(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Zr(Ii,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&QD(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$5(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&QD(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$5(t,!0,n,null,s);break;case"together":$5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function am(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Av|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=c0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=c0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Bje(e,t,n){switch(t.tag){case 3:n1e(t),Jw();break;case 5:Rye(t);break;case 1:Du(t.type)&&qD(t);break;case 4:wq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Zr(YD,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Zr(Ii,Ii.current&1),t.flags|=128,null):n&t.child.childLanes?r1e(e,t,n):(Zr(Ii,Ii.current&1),e=am(e,t,n),e!==null?e.sibling:null);Zr(Ii,Ii.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return i1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zr(Ii,Ii.current),r)break;return null;case 22:case 23:return t.lanes=0,e1e(e,t,n)}return am(e,t,n)}var s1e,q9,o1e,a1e;s1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};q9=function(){};o1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,z1(Xd.current);var s=null;switch(n){case"input":i=h9(e,i),r=h9(e,r),s=[];break;case"select":i=Di({},i,{value:void 0}),r=Di({},r,{value:void 0}),s=[];break;case"textarea":i=g9(e,i),r=g9(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=VD)}v9(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(kC.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(kC.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&si("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};a1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function HS(e,t){if(!_i)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Uje(e,t,n){var r=t.pendingProps;switch(pq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:return Du(t.type)&&HD(),qo(t),null;case 3:return r=t.stateNode,eE(),ci(Pu),ci(ma),xq(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(LR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,lf!==null&&(Z9(lf),lf=null))),q9(e,t),qo(t),null;case 5:Eq(t);var i=z1(UC.current);if(n=t.type,e!==null&&t.stateNode!=null)o1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return qo(t),null}if(e=z1(Xd.current),LR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Id]=t,r[jC]=s,e=(t.mode&1)!==0,n){case"dialog":si("cancel",r),si("close",r);break;case"iframe":case"object":case"embed":si("load",r);break;case"video":case"audio":for(i=0;i<zT.length;i++)si(zT[i],r);break;case"source":si("error",r);break;case"img":case"image":case"link":si("error",r),si("load",r);break;case"details":si("toggle",r);break;case"input":Yre(r,s),si("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},si("invalid",r);break;case"textarea":Xre(r,s),si("invalid",r)}v9(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&MR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&MR(r.textContent,a,e),i=["children",""+a]):kC.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&si("scroll",r)}switch(n){case"input":IR(r),Kre(r,s,!0);break;case"textarea":IR(r),Qre(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=VD)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$0e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Id]=t,e[jC]=r,s1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=b9(n,r),n){case"dialog":si("cancel",e),si("close",e),i=r;break;case"iframe":case"object":case"embed":si("load",e),i=r;break;case"video":case"audio":for(i=0;i<zT.length;i++)si(zT[i],e);i=r;break;case"source":si("error",e),i=r;break;case"img":case"image":case"link":si("error",e),si("load",e),i=r;break;case"details":si("toggle",e),i=r;break;case"input":Yre(e,r),i=h9(e,r),si("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Di({},r,{value:void 0}),si("invalid",e);break;case"textarea":Xre(e,r),i=g9(e,r),si("invalid",e);break;default:i=r}v9(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?F0e(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&M0e(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&RC(e,u):typeof u=="number"&&RC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(kC.hasOwnProperty(s)?u!=null&&s==="onScroll"&&si("scroll",e):u!=null&&ZH(e,s,u,o))}switch(n){case"input":IR(e),Kre(e,r,!1);break;case"textarea":IR(e),Qre(e);break;case"option":r.value!=null&&e.setAttribute("value",""+I0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?lw(e,!!r.multiple,s,!1):r.defaultValue!=null&&lw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=VD)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&t.stateNode!=null)a1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=z1(UC.current),z1(Xd.current),LR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Id]=t,(s=r.nodeValue!==n)&&(e=xl,e!==null))switch(e.tag){case 3:MR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&MR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Id]=t,t.stateNode=r}return qo(t),null;case 13:if(ci(Ii),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_i&&gl!==null&&t.mode&1&&!(t.flags&128))Tye(),Jw(),t.flags|=98560,s=!1;else if(s=LR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Id]=t}else Jw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qo(t),s=!1}else lf!==null&&(Z9(lf),lf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ii.current&1?Cs===0&&(Cs=3):$q())),t.updateQueue!==null&&(t.flags|=4),qo(t),null);case 4:return eE(),q9(e,t),e===null&&LC(t.stateNode.containerInfo),qo(t),null;case 10:return vq(t.type._context),qo(t),null;case 17:return Du(t.type)&&HD(),qo(t),null;case 19:if(ci(Ii),s=t.memoizedState,s===null)return qo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)HS(s,!1);else{if(Cs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=QD(e),o!==null){for(t.flags|=128,HS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Zr(Ii,Ii.current&1|2),t.child}e=e.sibling}s.tail!==null&&rs()>nE&&(t.flags|=128,r=!0,HS(s,!1),t.lanes=4194304)}else{if(!r)if(e=QD(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),HS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_i)return qo(t),null}else 2*rs()-s.renderingStartTime>nE&&n!==1073741824&&(t.flags|=128,r=!0,HS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rs(),t.sibling=null,n=Ii.current,Zr(Ii,r?n&1|2:n&1),t):(qo(t),null);case 22:case 23:return Oq(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ll&1073741824&&(qo(t),t.subtreeFlags&6&&(t.flags|=8192)):qo(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function zje(e,t){switch(pq(t),t.tag){case 1:return Du(t.type)&&HD(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return eE(),ci(Pu),ci(ma),xq(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Eq(t),null;case 13:if(ci(Ii),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));Jw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ci(Ii),null;case 4:return eE(),null;case 10:return vq(t.type._context),null;case 22:case 23:return Oq(),null;case 24:return null;default:return null}}var BR=!1,ra=!1,Vje=typeof WeakSet=="function"?WeakSet:Set,xt=null;function G_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function W9(e,t,n){try{n()}catch(r){zi(e,t,r)}}var Bie=!1;function Hje(e,t){if(k9=BD,e=dye(),dq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(R9={focusedElem:e,selectionRange:n},BD=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:nf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){zi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Bie,Bie=!1,p}function MA(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&W9(t,n,s)}i=i.next}while(i!==r)}}function AM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function G9(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function u1e(e){var t=e.alternate;t!==null&&(e.alternate=null,u1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Id],delete t[jC],delete t[D9],delete t[Aje],delete t[Cje])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function l1e(e){return e.tag===5||e.tag===3||e.tag===4}function Uie(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||l1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Y9(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=VD));else if(r!==4&&(e=e.child,e!==null))for(Y9(e,t,n),e=e.sibling;e!==null;)Y9(e,t,n),e=e.sibling}function K9(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(K9(e,t,n),e=e.sibling;e!==null;)K9(e,t,n),e=e.sibling}var bo=null,sf=!1;function cg(e,t,n){for(n=n.child;n!==null;)c1e(e,t,n),n=n.sibling}function c1e(e,t,n){if(Kd&&typeof Kd.onCommitFiberUnmount=="function")try{Kd.onCommitFiberUnmount(vM,n)}catch{}switch(n.tag){case 5:ra||G_(n,t);case 6:var r=bo,i=sf;bo=null,cg(e,t,n),bo=r,sf=i,bo!==null&&(sf?(e=bo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):bo.removeChild(n.stateNode));break;case 18:bo!==null&&(sf?(e=bo,n=n.stateNode,e.nodeType===8?I5(e.parentNode,n):e.nodeType===1&&I5(e,n),OC(e)):I5(bo,n.stateNode));break;case 4:r=bo,i=sf,bo=n.stateNode.containerInfo,sf=!0,cg(e,t,n),bo=r,sf=i;break;case 0:case 11:case 14:case 15:if(!ra&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&W9(n,t,o),i=i.next}while(i!==r)}cg(e,t,n);break;case 1:if(!ra&&(G_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zi(n,t,a)}cg(e,t,n);break;case 21:cg(e,t,n);break;case 22:n.mode&1?(ra=(r=ra)||n.memoizedState!==null,cg(e,t,n),ra=r):cg(e,t,n);break;default:cg(e,t,n)}}function zie(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Vje),t.forEach(function(r){var i=Zje.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:bo=a.stateNode,sf=!1;break e;case 3:bo=a.stateNode.containerInfo,sf=!0;break e;case 4:bo=a.stateNode.containerInfo,sf=!0;break e}a=a.return}if(bo===null)throw Error(et(160));c1e(s,o,i),bo=null,sf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)f1e(t,e),t=t.sibling}function f1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hc(t,e),cd(e),r&4){try{MA(3,e,e.return),AM(3,e)}catch(m){zi(e,e.return,m)}try{MA(5,e,e.return)}catch(m){zi(e,e.return,m)}}break;case 1:Hc(t,e),cd(e),r&512&&n!==null&&G_(n,n.return);break;case 5:if(Hc(t,e),cd(e),r&512&&n!==null&&G_(n,n.return),e.flags&32){var i=e.stateNode;try{RC(i,"")}catch(m){zi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&D0e(i,s),b9(a,o);var l=b9(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?F0e(i,f):c==="dangerouslySetInnerHTML"?M0e(i,f):c==="children"?RC(i,f):ZH(i,c,f,l)}switch(a){case"input":p9(i,s);break;case"textarea":O0e(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?lw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?lw(i,!!s.multiple,s.defaultValue,!0):lw(i,!!s.multiple,s.multiple?[]:"",!1))}i[jC]=s}catch(m){zi(e,e.return,m)}}break;case 6:if(Hc(t,e),cd(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zi(e,e.return,m)}}break;case 3:if(Hc(t,e),cd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{OC(t.containerInfo)}catch(m){zi(e,e.return,m)}break;case 4:Hc(t,e),cd(e);break;case 13:Hc(t,e),cd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pq=rs())),r&4&&zie(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ra=(l=ra)||c,Hc(t,e),ra=l):Hc(t,e),cd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:MA(4,d,d.return);break;case 1:G_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zi(r,n,m)}}break;case 5:G_(d,d.return);break;case 22:if(d.memoizedState!==null){Hie(f);continue}}h!==null?(h.return=d,xt=h):Hie(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=L0e("display",o))}catch(m){zi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Hc(t,e),cd(e),r&4&&zie(e);break;case 21:break;default:Hc(t,e),cd(e)}}function cd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(l1e(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(RC(i,""),r.flags&=-33);var s=Uie(e);K9(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Uie(e);Y9(e,a,o);break;default:throw Error(et(161))}}catch(u){zi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qje(e,t,n){xt=e,d1e(e)}function d1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||BR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ra;a=BR;var l=ra;if(BR=o,(ra=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?qie(i):u!==null?(u.return=o,xt=u):qie(i);for(;s!==null;)xt=s,d1e(s),s=s.sibling;xt=i,BR=a,ra=l}Vie(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Vie(e)}}function Vie(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ra||AM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ra)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:nf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Cie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Cie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&OC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}ra||t.flags&512&&G9(t)}catch(d){zi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Hie(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function qie(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{AM(4,t)}catch(u){zi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zi(t,i,u)}}var s=t.return;try{G9(t)}catch(u){zi(t,s,u)}break;case 5:var o=t.return;try{G9(t)}catch(u){zi(t,o,u)}}}catch(u){zi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var Wje=Math.ceil,eO=$m.ReactCurrentDispatcher,Rq=$m.ReactCurrentOwner,gc=$m.ReactCurrentBatchConfig,ur=0,so=null,gs=null,Co=0,ll=0,Y_=gy(0),Cs=0,qC=null,Av=0,CM=0,Nq=0,LA=null,vu=null,Pq=0,nE=1/0,gp=null,tO=!1,X9=null,u0=null,UR=!1,Vg=null,nO=0,FA=0,Q9=null,SP=-1,TP=0;function Va(){return ur&6?rs():SP!==-1?SP:SP=rs()}function l0(e){return e.mode&1?ur&2&&Co!==0?Co&-Co:kje.transition!==null?(TP===0&&(TP=X0e()),TP):(e=Dr,e!==0||(e=window.event,e=e===void 0?16:rye(e.type)),e):1}function Cf(e,t,n,r){if(50<FA)throw FA=0,Q9=null,Error(et(185));vI(e,n,r),(!(ur&2)||e!==so)&&(e===so&&(!(ur&2)&&(CM|=n),Cs===4&&Dg(e,Co)),Ou(e,r),n===1&&ur===0&&!(t.mode&1)&&(nE=rs()+500,xM&&yy()))}function Ou(e,t){var n=e.callbackNode;k8e(e,t);var r=jD(e,e===so?Co:0);if(r===0)n!==null&&eie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&eie(n),t===1)e.tag===0?Ije(Wie.bind(null,e)):Eye(Wie.bind(null,e)),Sje(function(){!(ur&6)&&yy()}),n=null;else{switch(Q0e(r)){case 1:n=iq;break;case 4:n=Y0e;break;case 16:n=FD;break;case 536870912:n=K0e;break;default:n=FD}n=_1e(n,h1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function h1e(e,t){if(SP=-1,TP=0,ur&6)throw Error(et(327));var n=e.callbackNode;if(pw()&&e.callbackNode!==n)return null;var r=jD(e,e===so?Co:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=rO(e,r);else{t=r;var i=ur;ur|=2;var s=m1e();(so!==e||Co!==t)&&(gp=null,nE=rs()+500,ov(e,t));do try{Kje();break}catch(a){p1e(e,a)}while(!0);yq(),eO.current=s,ur=i,gs!==null?t=0:(so=null,Co=0,t=Cs)}if(t!==0){if(t===2&&(i=S9(e),i!==0&&(r=i,t=J9(e,i))),t===1)throw n=qC,ov(e,0),Dg(e,r),Ou(e,rs()),n;if(t===6)Dg(e,r);else{if(i=e.current.alternate,!(r&30)&&!Gje(i)&&(t=rO(e,r),t===2&&(s=S9(e),s!==0&&(r=s,t=J9(e,s))),t===1))throw n=qC,ov(e,0),Dg(e,r),Ou(e,rs()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:h1(e,vu,gp);break;case 3:if(Dg(e,r),(r&130023424)===r&&(t=Pq+500-rs(),10<t)){if(jD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Va(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=P9(h1.bind(null,e,vu,gp),t);break}h1(e,vu,gp);break;case 4:if(Dg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Af(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=rs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wje(r/1960))-r,10<r){e.timeoutHandle=P9(h1.bind(null,e,vu,gp),r);break}h1(e,vu,gp);break;case 5:h1(e,vu,gp);break;default:throw Error(et(329))}}}return Ou(e,rs()),e.callbackNode===n?h1e.bind(null,e):null}function J9(e,t){var n=LA;return e.current.memoizedState.isDehydrated&&(ov(e,t).flags|=256),e=rO(e,t),e!==2&&(t=vu,vu=n,t!==null&&Z9(t)),e}function Z9(e){vu===null?vu=e:vu.push.apply(vu,e)}function Gje(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Mf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dg(e,t){for(t&=~Nq,t&=~CM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Af(t),r=1<<n;e[n]=-1,t&=~r}}function Wie(e){if(ur&6)throw Error(et(327));pw();var t=jD(e,0);if(!(t&1))return Ou(e,rs()),null;var n=rO(e,t);if(e.tag!==0&&n===2){var r=S9(e);r!==0&&(t=r,n=J9(e,r))}if(n===1)throw n=qC,ov(e,0),Dg(e,t),Ou(e,rs()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,h1(e,vu,gp),Ou(e,rs()),null}function Dq(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(nE=rs()+500,xM&&yy())}}function Cv(e){Vg!==null&&Vg.tag===0&&!(ur&6)&&pw();var t=ur;ur|=1;var n=gc.transition,r=Dr;try{if(gc.transition=null,Dr=1,e)return e()}finally{Dr=r,gc.transition=n,ur=t,!(ur&6)&&yy()}}function Oq(){ll=Y_.current,ci(Y_)}function ov(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xje(n)),gs!==null)for(n=gs.return;n!==null;){var r=n;switch(pq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&HD();break;case 3:eE(),ci(Pu),ci(ma),xq();break;case 5:Eq(r);break;case 4:eE();break;case 13:ci(Ii);break;case 19:ci(Ii);break;case 10:vq(r.type._context);break;case 22:case 23:Oq()}n=n.return}if(so=e,gs=e=c0(e.current,null),Co=ll=t,Cs=0,qC=null,Nq=CM=Av=0,vu=LA=null,U1!==null){for(t=0;t<U1.length;t++)if(n=U1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}U1=null}return e}function p1e(e,t){do{var n=gs;try{if(yq(),wP.current=ZD,JD){for(var r=Ri.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}JD=!1}if(Tv=0,Gs=ws=Ri=null,$A=!1,zC=0,Rq.current=null,n===null||n.return===null){Cs=1,qC=t,gs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Co,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Die(o);if(h!==null){h.flags&=-257,Oie(h,o,a,s,t),h.mode&1&&Pie(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Pie(s,l,t),$q();break e}u=Error(et(426))}}else if(_i&&a.mode&1){var g=Die(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Oie(g,o,a,s,t),mq(tE(u,a));break e}}s=u=tE(u,a),Cs!==4&&(Cs=2),LA===null?LA=[s]:LA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Qye(s,u,t);Aie(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(u0===null||!u0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Jye(s,a,t);Aie(s,w);break e}}s=s.return}while(s!==null)}y1e(n)}catch(E){t=E,gs===n&&n!==null&&(gs=n=n.return);continue}break}while(!0)}function m1e(){var e=eO.current;return eO.current=ZD,e===null?ZD:e}function $q(){(Cs===0||Cs===3||Cs===2)&&(Cs=4),so===null||!(Av&268435455)&&!(CM&268435455)||Dg(so,Co)}function rO(e,t){var n=ur;ur|=2;var r=m1e();(so!==e||Co!==t)&&(gp=null,ov(e,t));do try{Yje();break}catch(i){p1e(e,i)}while(!0);if(yq(),ur=n,eO.current=r,gs!==null)throw Error(et(261));return so=null,Co=0,Cs}function Yje(){for(;gs!==null;)g1e(gs)}function Kje(){for(;gs!==null&&!_8e();)g1e(gs)}function g1e(e){var t=b1e(e.alternate,e,ll);e.memoizedProps=e.pendingProps,t===null?y1e(e):gs=t,Rq.current=null}function y1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=zje(n,t),n!==null){n.flags&=32767,gs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Cs=6,gs=null;return}}else if(n=Uje(n,t,ll),n!==null){gs=n;return}if(t=t.sibling,t!==null){gs=t;return}gs=t=e}while(t!==null);Cs===0&&(Cs=5)}function h1(e,t,n){var r=Dr,i=gc.transition;try{gc.transition=null,Dr=1,Xje(e,t,n,r)}finally{gc.transition=i,Dr=r}return null}function Xje(e,t,n,r){do pw();while(Vg!==null);if(ur&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(R8e(e,s),e===so&&(gs=so=null,Co=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||UR||(UR=!0,_1e(FD,function(){return pw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gc.transition,gc.transition=null;var o=Dr;Dr=1;var a=ur;ur|=4,Rq.current=null,Hje(e,n),f1e(n,e),gje(R9),BD=!!k9,R9=k9=null,e.current=n,qje(n),w8e(),ur=a,Dr=o,gc.transition=s}else e.current=n;if(UR&&(UR=!1,Vg=e,nO=i),s=e.pendingLanes,s===0&&(u0=null),S8e(n.stateNode),Ou(e,rs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tO)throw tO=!1,e=X9,X9=null,e;return nO&1&&e.tag!==0&&pw(),s=e.pendingLanes,s&1?e===Q9?FA++:(FA=0,Q9=e):FA=0,yy(),null}function pw(){if(Vg!==null){var e=Q0e(nO),t=gc.transition,n=Dr;try{if(gc.transition=null,Dr=16>e?16:e,Vg===null)var r=!1;else{if(e=Vg,Vg=null,nO=0,ur&6)throw Error(et(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:MA(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(u1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:MA(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:AM(9,a)}}catch(E){zi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,yy(),Kd&&typeof Kd.onPostCommitFiberRoot=="function")try{Kd.onPostCommitFiberRoot(vM,e)}catch{}r=!0}return r}finally{Dr=n,gc.transition=t}}return!1}function Gie(e,t,n){t=tE(n,t),t=Qye(e,t,1),e=a0(e,t,1),t=Va(),e!==null&&(vI(e,1,t),Ou(e,t))}function zi(e,t,n){if(e.tag===3)Gie(e,e,n);else for(;t!==null;){if(t.tag===3){Gie(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(u0===null||!u0.has(r))){e=tE(n,e),e=Jye(t,e,1),t=a0(t,e,1),e=Va(),t!==null&&(vI(t,1,e),Ou(t,e));break}}t=t.return}}function Qje(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Va(),e.pingedLanes|=e.suspendedLanes&n,so===e&&(Co&n)===n&&(Cs===4||Cs===3&&(Co&130023424)===Co&&500>rs()-Pq?ov(e,0):Nq|=n),Ou(e,t)}function v1e(e,t){t===0&&(e.mode&1?(t=NR,NR<<=1,!(NR&130023424)&&(NR=4194304)):t=1);var n=Va();e=om(e,t),e!==null&&(vI(e,t,n),Ou(e,n))}function Jje(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),v1e(e,n)}function Zje(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),v1e(e,n)}var b1e;b1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pu.current)Au=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Au=!1,Bje(e,t,n);Au=!!(e.flags&131072)}else Au=!1,_i&&t.flags&1048576&&xye(t,GD,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xP(e,t),e=t.pendingProps;var i=Qw(t,ma.current);hw(t,n),i=Tq(null,t,r,e,i,n);var s=Aq();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Du(r)?(s=!0,qD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,_q(t),i.updater=TM,t.stateNode=i,i._reactInternals=t,j9(t,r,e,n),t=z9(null,t,r,!0,s,n)):(t.tag=0,_i&&s&&hq(t),Pa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=tBe(r),e=nf(r,e),i){case 0:t=U9(null,t,r,e,n);break e;case 1:t=Lie(null,t,r,e,n);break e;case 11:t=$ie(null,t,r,e,n);break e;case 14:t=Mie(null,t,r,nf(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),U9(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),Lie(e,t,r,i,n);case 3:e:{if(n1e(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,kye(e,t),XD(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=tE(Error(et(423)),t),t=Fie(e,t,r,n,i);break e}else if(r!==i){i=tE(Error(et(424)),t),t=Fie(e,t,r,n,i);break e}else for(gl=o0(t.stateNode.containerInfo.firstChild),xl=t,_i=!0,lf=null,n=Cye(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jw(),r===i){t=am(e,t,n);break e}Pa(e,t,r,n)}t=t.child}return t;case 5:return Rye(t),e===null&&M9(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,N9(r,i)?o=null:s!==null&&N9(r,s)&&(t.flags|=32),t1e(e,t),Pa(e,t,o,n),t.child;case 6:return e===null&&M9(t),null;case 13:return r1e(e,t,n);case 4:return wq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zw(t,null,r,n):Pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),$ie(e,t,r,i,n);case 7:return Pa(e,t,t.pendingProps,n),t.child;case 8:return Pa(e,t,t.pendingProps.children,n),t.child;case 12:return Pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Zr(YD,r._currentValue),r._currentValue=o,s!==null)if(Mf(s.value,o)){if(s.children===i.children&&!Pu.current){t=am(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Wp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),L9(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),L9(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,hw(t,n),i=bc(i),r=r(i),t.flags|=1,Pa(e,t,r,n),t.child;case 14:return r=t.type,i=nf(r,t.pendingProps),i=nf(r.type,i),Mie(e,t,r,i,n);case 15:return Zye(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:nf(r,i),xP(e,t),t.tag=1,Du(r)?(e=!0,qD(t)):e=!1,hw(t,n),Xye(t,r,i),j9(t,r,i,n),z9(null,t,r,!0,e,n);case 19:return i1e(e,t,n);case 22:return e1e(e,t,n)}throw Error(et(156,t.tag))};function _1e(e,t){return G0e(e,t)}function eBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fc(e,t,n,r){return new eBe(e,t,n,r)}function Mq(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tBe(e){if(typeof e=="function")return Mq(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tq)return 11;if(e===nq)return 14}return 2}function c0(e,t){var n=e.alternate;return n===null?(n=fc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function AP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Mq(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case F_:return av(n.children,i,s,t);case eq:o=8,i|=8;break;case l9:return e=fc(12,n,t,i|2),e.elementType=l9,e.lanes=s,e;case c9:return e=fc(13,n,t,i),e.elementType=c9,e.lanes=s,e;case f9:return e=fc(19,n,t,i),e.elementType=f9,e.lanes=s,e;case R0e:return IM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I0e:o=10;break e;case k0e:o=9;break e;case tq:o=11;break e;case nq:o=14;break e;case xg:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=fc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function av(e,t,n,r){return e=fc(7,e,r,t),e.lanes=n,e}function IM(e,t,n,r){return e=fc(22,e,r,t),e.elementType=R0e,e.lanes=n,e.stateNode={isHidden:!1},e}function M5(e,t,n){return e=fc(6,e,null,t),e.lanes=n,e}function L5(e,t,n){return t=fc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=y5(0),this.expirationTimes=y5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=y5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lq(e,t,n,r,i,s,o,a,u){return e=new nBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_q(s),e}function rBe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function w1e(e){if(!e)return k0;e=e._reactInternals;e:{if(gb(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Du(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(Du(n))return wye(e,n,t)}return t}function E1e(e,t,n,r,i,s,o,a,u){return e=Lq(n,r,!0,e,i,s,o,a,u),e.context=w1e(null),n=e.current,r=Va(),i=l0(n),s=Wp(r,i),s.callback=t??null,a0(n,s,i),e.current.lanes=i,vI(e,i,r),Ou(e,r),e}function kM(e,t,n,r){var i=t.current,s=Va(),o=l0(i);return n=w1e(n),t.context===null?t.context=n:t.pendingContext=n,t=Wp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=a0(i,t,o),e!==null&&(Cf(e,i,o,s),_P(e,i,o)),o}function iO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yie(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Fq(e,t){Yie(e,t),(e=e.alternate)&&Yie(e,t)}function iBe(){return null}var x1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function jq(e){this._internalRoot=e}RM.prototype.render=jq.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));kM(e,t,null,null)};RM.prototype.unmount=jq.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cv(function(){kM(null,e,null,null)}),t[sm]=null}};function RM(e){this._internalRoot=e}RM.prototype.unstable_scheduleHydration=function(e){if(e){var t=eye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pg.length&&t!==0&&t<Pg[n].priority;n++);Pg.splice(n,0,e),n===0&&nye(e)}};function Bq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function NM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Kie(){}function sBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=iO(o);s.call(l)}}var o=E1e(t,r,e,0,null,!1,!1,"",Kie);return e._reactRootContainer=o,e[sm]=o.current,LC(e.nodeType===8?e.parentNode:e),Cv(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=iO(u);a.call(l)}}var u=Lq(e,0,!1,null,null,!1,!1,"",Kie);return e._reactRootContainer=u,e[sm]=u.current,LC(e.nodeType===8?e.parentNode:e),Cv(function(){kM(t,u,n,r)}),u}function PM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=iO(o);a.call(u)}}kM(t,o,e,i)}else o=sBe(n,t,e,i,r);return iO(o)}J0e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=UT(t.pendingLanes);n!==0&&(sq(t,n|1),Ou(t,rs()),!(ur&6)&&(nE=rs()+500,yy()))}break;case 13:Cv(function(){var r=om(e,1);if(r!==null){var i=Va();Cf(r,e,1,i)}}),Fq(e,1)}};oq=function(e){if(e.tag===13){var t=om(e,134217728);if(t!==null){var n=Va();Cf(t,e,134217728,n)}Fq(e,134217728)}};Z0e=function(e){if(e.tag===13){var t=l0(e),n=om(e,t);if(n!==null){var r=Va();Cf(n,e,t,r)}Fq(e,t)}};eye=function(){return Dr};tye=function(e,t){var n=Dr;try{return Dr=e,t()}finally{Dr=n}};w9=function(e,t,n){switch(t){case"input":if(p9(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=EM(r);if(!i)throw Error(et(90));P0e(r),p9(r,i)}}}break;case"textarea":O0e(e,n);break;case"select":t=n.value,t!=null&&lw(e,!!n.multiple,t,!1)}};U0e=Dq;z0e=Cv;var oBe={usingClientEntryPoint:!1,Events:[_I,z_,EM,j0e,B0e,Dq]},qS={findFiberByHostInstance:B1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aBe={bundleType:qS.bundleType,version:qS.version,rendererPackageName:qS.rendererPackageName,rendererConfig:qS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$m.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=q0e(e),e===null?null:e.stateNode},findFiberByHostInstance:qS.findFiberByHostInstance||iBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zR.isDisabled&&zR.supportsFiber)try{vM=zR.inject(aBe),Kd=zR}catch{}}zl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oBe;zl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bq(t))throw Error(et(200));return rBe(e,t,null,n)};zl.createRoot=function(e,t){if(!Bq(e))throw Error(et(299));var n=!1,r="",i=x1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Lq(e,1,!1,null,null,n,!1,r,i),e[sm]=t.current,LC(e.nodeType===8?e.parentNode:e),new jq(t)};zl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=q0e(t),e=e===null?null:e.stateNode,e};zl.flushSync=function(e){return Cv(e)};zl.hydrate=function(e,t,n){if(!NM(t))throw Error(et(200));return PM(null,e,t,!0,n)};zl.hydrateRoot=function(e,t,n){if(!Bq(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=x1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=E1e(t,null,e,1,n??null,i,!1,s,o),e[sm]=t.current,LC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new RM(t)};zl.render=function(e,t,n){if(!NM(t))throw Error(et(200));return PM(null,e,t,!1,n)};zl.unmountComponentAtNode=function(e){if(!NM(e))throw Error(et(40));return e._reactRootContainer?(Cv(function(){PM(null,null,e,!1,function(){e._reactRootContainer=null,e[sm]=null})}),!0):!1};zl.unstable_batchedUpdates=Dq;zl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!NM(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return PM(e,t,n,!1,r)};zl.version="18.3.1-next-f1338f8080-20240426";function S1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S1e)}catch(e){console.error(e)}}S1e(),S0e.exports=zl;var EI=S0e.exports;const uBe=Ul(EI);var Xie=EI;a9.createRoot=Xie.createRoot,a9.hydrateRoot=Xie.hydrateRoot;var kd=function(){return kd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},kd.apply(this,arguments)};function xI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Ap(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Qie(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function V1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function F5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function jA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Qie=="function"?Qie(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var CP="right-scroll-bar-position",IP="width-before-scroll-bar",cBe="with-scroll-bars-hidden",fBe="--removed-body-scroll-bar-size";function j5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function dBe(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var hBe=typeof window<"u"?N.useLayoutEffect:N.useEffect,Jie=new WeakMap;function pBe(e,t){var n=dBe(null,function(r){return e.forEach(function(i){return j5(i,r)})});return hBe(function(){var r=Jie.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||j5(a,null)}),s.forEach(function(a){i.has(a)||j5(a,o)})}Jie.set(n,e)},[e]),n}function mBe(e){return e}function gBe(e,t){t===void 0&&(t=mBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function yBe(e){e===void 0&&(e={});var t=gBe(null);return t.options=kd({async:!0,ssr:!1},e),t}var T1e=function(e){var t=e.sideCar,n=xI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,kd({},n))};T1e.isSideCarExport=!0;function vBe(e,t){return e.useMedium(t),T1e}var A1e=yBe(),B5=function(){},DM=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:B5,onWheelCapture:B5,onTouchMoveCapture:B5}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=xI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=pBe([n,t]),S=kd(kd({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(w,{sideCar:A1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),kd(kd({},S),{ref:E})):N.createElement(y,kd({},S,{className:u,ref:E}),a))});DM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};DM.classNames={fullWidth:IP,zeroRight:CP};var bBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _Be(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=bBe();return t&&e.setAttribute("nonce",t),e}function wBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function EBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xBe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=_Be())&&(wBe(t,n),EBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},SBe=function(){var e=xBe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},C1e=function(){var e=SBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},TBe={left:0,top:0,right:0,gap:0},U5=function(e){return parseInt(e||"",10)||0},ABe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[U5(n),U5(r),U5(i)]},CBe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return TBe;var t=ABe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},IBe=C1e(),mw="data-scroll-locked",kBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(cBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(mw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(CP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(IP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(CP," .").concat(CP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(IP," .").concat(IP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mw,`] {
    `).concat(fBe,": ").concat(a,`px;
  }
`)},Zie=function(){var e=parseInt(document.body.getAttribute(mw)||"0",10);return isFinite(e)?e:0},RBe=function(){N.useEffect(function(){return document.body.setAttribute(mw,(Zie()+1).toString()),function(){var e=Zie()-1;e<=0?document.body.removeAttribute(mw):document.body.setAttribute(mw,e.toString())}},[])},NBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;RBe();var s=N.useMemo(function(){return CBe(i)},[i]);return N.createElement(IBe,{styles:kBe(s,!t,i,n?"":"!important")})},eU=!1;if(typeof window<"u")try{var VR=Object.defineProperty({},"passive",{get:function(){return eU=!0,!0}});window.addEventListener("test",VR,VR),window.removeEventListener("test",VR,VR)}catch{eU=!1}var e_=eU?{passive:!1}:!1,PBe=function(e){return e.tagName==="TEXTAREA"},I1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!PBe(e)&&n[t]==="visible")},DBe=function(e){return I1e(e,"overflowY")},OBe=function(e){return I1e(e,"overflowX")},ese=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=k1e(e,r);if(i){var s=R1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$Be=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},MBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},k1e=function(e,t){return e==="v"?DBe(t):OBe(t)},R1e=function(e,t){return e==="v"?$Be(t):MBe(t)},LBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},FBe=function(e,t,n,r,i){var s=LBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=R1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&k1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},HR=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tse=function(e){return[e.deltaX,e.deltaY]},nse=function(e){return e&&"current"in e?e.current:e},jBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},BBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},UBe=0,t_=[];function zBe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(UBe++)[0],s=N.useState(C1e)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=lBe([e.lockRef.current],(e.shards||[]).map(nse),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=HR(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var A=ese(T,S);if(!A)return!0;if(A?E=T:(E=T==="v"?"h":"v",A=ese(T,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return FBe(C,g,m,C==="h"?b:w,!0)},[]),u=N.useCallback(function(m){var g=m;if(!(!t_.length||t_[t_.length-1]!==s)){var y="deltaY"in g?tse(g):HR(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&jBe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(nse).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:VBe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=N.useCallback(function(m){n.current=HR(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,tse(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,HR(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return t_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,e_),document.addEventListener("touchmove",u,e_),document.addEventListener("touchstart",c,e_),function(){t_=t_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,e_),document.removeEventListener("touchmove",u,e_),document.removeEventListener("touchstart",c,e_)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:BBe(i)}):null,h?N.createElement(NBe,{gapMode:e.gapMode}):null)}function VBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const HBe=vBe(A1e,zBe);var OM=N.forwardRef(function(e,t){return N.createElement(DM,kd({},e,{ref:t,sideCar:HBe}))});OM.classNames=DM.classNames;function Ni(e){return Object.keys(e)}function z5(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Uq(e,t){const n={...e},r=t;return z5(e)&&z5(t)&&Object.keys(t).forEach(i=>{z5(r[i])&&i in e?n[i]=Uq(n[i],r[i]):n[i]=r[i]}),n}function qBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function WBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function tU(e){const t=WBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function V5(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function N1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?V5(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?V5(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?V5(s):s}}return r}return n}const Te=N1e("rem",{shouldScale:!0}),sO=N1e("em");function yx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function P1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function vy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function _a(e){const t=N.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function vx(e=null){const t=N.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function rse(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function oO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function GBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function YBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function KBe(e,t,n){return oO(e,n)===oO(t,n)}function D1e({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=oO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>KBe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=YBe(l,u,r),f=GBe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const XBe={app:100,modal:200,popover:300,overlay:400,max:9999};function Nc(e){return XBe[e]}const QBe=()=>{};function JBe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||QBe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function yn(e,t="size",n=!0){if(e!==void 0)return P1e(e)?n?Te(e):e:`var(--${t}-${e})`}function Il(e){return yn(e,"mantine-spacing")}function hi(e){return e===void 0?"var(--mantine-radius-default)":yn(e,"mantine-radius")}function oo(e){return yn(e,"mantine-font-size")}function O1e(e){return yn(e,"mantine-line-height",!1)}function zq(e){if(e)return yn(e,"mantine-shadow",!1)}function $p(e,t){return n=>{e==null||e(n),t==null||t(n)}}function Vq(e,t){return e in t.breakpoints?tU(t.breakpoints[e]):tU(e)}function aO(e,t){const n=e.map(r=>({value:r,px:Vq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function VT(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function ZBe(e,t,n){var r;return n?Array.from(((r=oO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function e9e(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function zd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function BA(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function A1(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function $M(e,t){const n=A1(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const ise=["mousedown","touchstart"];function t9e(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||ise).forEach(s=>document.addEventListener(s,i)),()=>{(t||ise).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function n9e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function r9e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function i9e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:r9e(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),n9e(s.current,o=>i(o.matches))},[e]),r}const yb=typeof document<"u"?N.useLayoutEffect:N.useEffect;function um(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function $1e({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return um(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function s9e(e,t="body > :not(script)"){const n=BA(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const o9e=/input|select|textarea|button|object/,M1e="a, input, select, textarea, button, object, [tabindex]";function a9e(e){return e.style.display==="none"}function u9e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(a9e(n))return!1;n=n.parentNode}return!0}function L1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function nU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(L1e(e));return(o9e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&u9e(e)}function F1e(e){const t=L1e(e);return(Number.isNaN(t)||t>=0)&&nU(e)}function l9e(e){return Array.from(e.querySelectorAll(M1e)).filter(F1e)}function c9e(e,t){const n=l9e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function f9e(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(M1e));o=a.find(F1e)||a.find(nU)||null,!o&&nU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=s9e(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&c9e(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const d9e=Un.useId||(()=>{});function h9e(){const e=d9e();return e?`mantine-${e.replace(/:/g,"")}`:""}function Zu(e){const t=h9e(),[n,r]=N.useState(t);return yb(()=>{r(BA())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function j1e(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function Hq(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function B1e(...e){return t=>{e.forEach(n=>Hq(n,t))}}function ls(...e){return N.useCallback(B1e(...e),e)}function U1e(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=zd((w-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:zd((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Do({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function qq(e,t){return i9e("(prefers-reduced-motion: reduce)",e,t)}const p9e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function gw(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(p9e),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function m9e(e){const[t,{width:n,height:r}]=gw(e);return{ref:t,width:n,height:r}}function g9e(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function y9e(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function v9e(e){return t=>y9e(g9e(e),t)}function b9e(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{v9e(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function yw(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function _9e(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function w9e(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function E9e(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function x9e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function S9e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});yb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>x9e(`${e}:${String(r)}`,i[0])}return[t,n]}var T9e={};function z1e(){return typeof process<"u"&&T9e?"production":"development"}function V1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=V1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ki(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=V1e(e))&&(r&&(r+=" "),r+=t);return r}const A9e={};function C9e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ki(t[r],i):t[r]=i})}),t}function MM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||A9e);return C9e(s)}function uO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const H1e=N.createContext(null);function by(){const e=N.useContext(H1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function I9e(){return by().cssVariablesResolver}function k9e(){return by().classNamesPrefix}function Wq(){return by().getStyleNonce}function R9e(){return by().withStaticClasses}function N9e(){return by().headless}function P9e(){var e;return(e=by().stylesTransform)==null?void 0:e.sx}function D9e(){var e;return(e=by().stylesTransform)==null?void 0:e.styles}function O9e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function $9e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function M9e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function L9e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function Gq(e){return O9e(e)?$9e(e):e.startsWith("rgb")?M9e(e):e.startsWith("hsl")?L9e(e):{r:0,g:0,b:0,a:1}}function qR(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=Gq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function WC(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function H5(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function F9e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function j9e(e){if(e.startsWith("oklch("))return(F9e(e)||0)/100;const{r:t,g:n,b:r}=Gq(e),i=t/255,s=n/255,o=r/255,a=H5(i),u=H5(s),l=H5(o);return .2126*a+.7152*u+.0722*l}function WS(e,t=.179){return e.startsWith("var(")?!1:j9e(e)>t}function Nh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:WS(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:WS(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:WS(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][WC(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:WS(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:WS(e,t.luminanceThreshold),shade:s,variable:void 0}}function ti(e,t){const n=Nh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function rU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=ti(n.from,t),i=ti(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function bd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=Gq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const n_=bd,B9e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Nh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:qR(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:bd(a,.1),hover:bd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:bd(e,.1),hover:bd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:bd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:bd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:bd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:bd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:qR(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:qR(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:qR(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:rU(r,t),hover:rU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},U9e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},sse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Yq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:U9e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:B9e,autoContrast:!1,luminanceThreshold:.3,fontFamily:sse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:sse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function ose(e){return e==="auto"||e==="dark"||e==="light"}function z9e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ose(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ose(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const V9e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",ase="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function q5(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function use(e){if(!(e.primaryColor in e.colors))throw new Error(V9e);if(typeof e.primaryShade=="object"&&(!q5(e.primaryShade.dark)||!q5(e.primaryShade.light)))throw new Error(ase);if(typeof e.primaryShade=="number"&&!q5(e.primaryShade))throw new Error(ase)}function H9e(e,t){var r;if(!t)return use(e),e;const n=Uq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),use(n),n}const Kq=N.createContext(null),q9e=()=>N.useContext(Kq)||Yq;function Ms(){const e=N.useContext(Kq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function q1e({theme:e,children:t,inherit:n=!0}){const r=q9e(),i=N.useMemo(()=>H9e(n?r:Yq,e),[e,r,n]);return _.jsx(Kq.Provider,{value:i,children:t})}q1e.displayName="@mantine/core/MantineThemeProvider";function W9e(){const e=Ms(),t=Wq(),n=Ni(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=tU(e.breakpoints[i]),a=s?`${o-.1}px`:sO(o-.1),u=s?`${o}px`:sO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function W5(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function G5(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function G9e(e,t){const n=W5(e.variables),r=n?G5(t,n):"",i=W5(e.dark),s=i?G5(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=W5(e.light),a=o?G5(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function _y({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Nh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function lse(e,t){return _y({color:e.colors[e.primaryColor][WC(e,t)],theme:e,autoContrast:null})}function WR({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=WC(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=WC(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Y9e(e){return Array.isArray(e)?e:Array(10).fill(e)}function K9e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function r_(e,t,n){Ni(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const W1e=e=>{const t=WC(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":lse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":lse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};r_(r.variables,e.breakpoints,"breakpoint"),r_(r.variables,e.spacing,"spacing"),r_(r.variables,e.fontSizes,"font-size"),r_(r.variables,e.lineHeights,"line-height"),r_(r.variables,e.shadows,"shadow"),r_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Ni(e.colors).forEach(s=>{const o=e.colors[s];if(K9e(o)){Object.assign(r.light,WR({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,WR({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,WR({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,WR({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ni(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function X9e({theme:e,generator:t}){const n=W1e(e),r=t==null?void 0:t(e);return r?Uq(n,r):n}const Y5=W1e(Yq);function Q9e(e){const t={variables:{},light:{},dark:{}};return Ni(e.variables).forEach(n=>{Y5.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ni(e.light).forEach(n=>{Y5.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ni(e.dark).forEach(n=>{Y5.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function J9e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function G1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ms(),r=Wq(),i=I9e(),s=X9e({theme:n,generator:i}),o=e===":root"&&t,a=o?Q9e(s):s,u=G9e(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":J9e(e)}`}}):null}G1e.displayName="@mantine/CssVariables";function Z9e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function i_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function eUe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(i_(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),i_(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),yb(()=>{i_(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return i_(r,n),()=>{};r===void 0&&i_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&i_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function tUe({respectReducedMotion:e,getRootElement:t}){yb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Z9e();function Y1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=z9e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=eUe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return tUe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(H1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(q1e,{theme:e,children:[o&&_.jsx(G1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(W9e,{}),t]})})}Y1e.displayName="@mantine/core/MantineProvider";function Mm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ms();return{resolvedClassNames:MM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:uO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const nUe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function rUe({theme:e,options:t,unstyled:n}){return Ki((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||nUe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function iUe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return MM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function cse({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return MM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function sUe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function oUe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function aUe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function uUe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=MM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function lUe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function cUe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ki(rUe({theme:e,options:t,unstyled:a||h}),uUe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),lUe({options:t,classes:o,selector:r,unstyled:a}),cse({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),cse({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),iUe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),sUe({rootSelector:l,selector:r,className:u}),oUe({selector:r,classes:o,unstyled:a||h}),d&&!h&&aUe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function fUe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return uO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function iU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...iU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function dUe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...yx(n[r])}}),t),{})}function hUe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=dUe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function pUe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&fUe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&uO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&uO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...hUe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?iU({style:u,theme:e}):null,...iU({style:r==null?void 0:r.style,theme:e})}}function mUe({props:e,stylesCtx:t,themeName:n}){var o;const r=Ms(),i=(o=D9e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function vt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ms(),h=k9e(),p=R9e(),m=N9e(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=mUe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:cUe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:pUe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function bx(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ae(e,t,n){var o;const r=Ms(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...yx(n)}}function K5(e){return Ni(e).reduce((t,n)=>e[n]!==void 0?`${t}${qBe(n)}:${e[n]};`:t,"").trim()}function gUe({selector:e,styles:t,media:n,container:r}){const i=t?K5(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${K5(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${K5(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function SI(e){const t=Wq();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:gUe(e)}})}function _x(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:M,fs:P,tt:O,td:F,w:L,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:rt,darkHidden:be,sx:ke,...ze}=e;return{styleProps:yx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:M,fs:P,tt:O,td:F,w:L,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:rt,darkHidden:be,sx:ke}),rest:ze}}const yUe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Xq(e,t){const n=Nh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function vUe(e,t){const n=Nh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Xq(e,t)}function bUe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),Y9e.length>0&&(s+=` ${Xq(i.join(" "),t)}`),s.trim()}return e}const fse={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function _Ue(e){return typeof e=="string"&&e in fse?fse[e]:e}const wUe=["h1","h2","h3","h4","h5","h6"];function EUe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&wUe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function xUe(e){return e}const SUe=["h1","h2","h3","h4","h5","h6"];function TUe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&SUe.includes(e)?`var(--mantine-${e}-line-height)`:e}function AUe(e){return typeof e=="number"?Te(e):e}function CUe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const X5={color:Xq,textColor:vUe,fontSize:EUe,spacing:CUe,identity:xUe,size:AUe,lineHeight:TUe,fontFamily:_Ue,border:bUe};function dse(e){return e.replace("(min-width: ","").replace("em)","")}function IUe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(dse(i))-Number(dse(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function kUe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function RUe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function NUe(e){return typeof e=="object"&&e!==null?Ni(e).filter(t=>t!=="base"):[]}function PUe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function K1e({styleProps:e,data:t,theme:n}){return IUe(Ni(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=RUe(e[i]);if(!kUe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=X5[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=NUe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=X5[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:X5[s.type](PUe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function LM(){return`__m__-${N.useId().replace(/:/g,"")}`}function Qq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Qq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function X1e(e){return e.startsWith("data-")?e:`data-${e}`}function DUe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[X1e(n)]=e[n]),t},{})}function Q1e(e){return e?typeof e=="string"?{[X1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Q1e(n)}),{}):DUe(e):null}function sU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...sU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function OUe({theme:e,style:t,vars:n,styleProps:r}){const i=sU(t,e),s=sU(n,e);return{...i,...s,...r}}const J1e=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=Ms(),g=e||"div",{styleProps:y,rest:v}=_x(h),b=P9e(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=LM(),S=K1e({styleProps:y,theme:m,data:yUe}),T={ref:p,style:OUe({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Ki(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":P1e(o)?void 0:o||void 0,size:d,...Q1e(s),...v};return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(SI,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):_.jsx(g,{...T})]})});J1e.displayName="@mantine/core/Box";const Ee=J1e;function Z1e(e){return e}function je(e){const t=N.forwardRef(e);return t.extend=Z1e,t}function Ls(e){const t=N.forwardRef(e);return t.extend=Z1e,t}const $Ue=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Ph(){return N.useContext($Ue)}function MUe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Q5(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const GS=typeof window<"u"&&window.requestAnimationFrame;function LUe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{EI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||MUe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}um(()=>{typeof GS=="function"&&GS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),GS(()=>{const p=Q5(i);c({...f(p),height:p})})}:()=>{const p=Q5(i);c({...f(p),willChange:"height",height:p}),GS(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Q5(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:B1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const FUe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},eve=je((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ae("Collapse",FUe,e),c=Ms(),f=qq(),h=(c.respectReducedMotion?f:!1)?0:i,p=LUe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(Ee,{...l,children:n}):null:_.jsx(Ee,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...Qq(o,c)},ref:t,...l}),children:n})});eve.displayName="@mantine/core/Collapse";const[jUe,Pc]=_a("ScrollArea.Root component was not found in tree");function rE(e,t){const n=A1(t);yb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const BUe=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Pc(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return rE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),UUe=N.forwardRef((e,t)=>{const n=Pc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(BUe,{...e,ref:t}):null}),zUe={scrollHideDelay:1e3,type:"hover"},tve=N.forwardRef((e,t)=>{const n=Ae("ScrollAreaRoot",zUe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,w]=N.useState(0),[E,S]=N.useState(!1),[T,A]=N.useState(!1),C=ls(t,I=>u(I));return _.jsx(jUe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(Ee,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});tve.displayName="@mantine/core/ScrollAreaRoot";function nve(e,t){const n=e/t;return Number.isNaN(n)?0:n}function FM(e){const t=nve(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function rve(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function VUe(e,[t,n]){return Math.min(n,Math.max(t,e))}function hse(e,t,n="ltr"){const r=FM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=VUe(e,u);return rve([0,o],[0,a])(l)}function HUe(e,t,n,r="ltr"){const i=FM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return rve([u,l],f)(e)}function ive(e,t){return e>0&&e<t}function lO(e){return e?parseInt(e,10):0}function uv(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[qUe,sve]=_a("ScrollAreaScrollbar was not found in tree"),ove=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Pc(),[h,p]=N.useState(null),m=ls(t,A=>p(A)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=A1(l),E=A1(a),S=$M(c,10),T=A=>{if(g.current){const C=A.clientX-g.current.left,I=A.clientY-g.current.top;u({x:C,y:I})}};return N.useEffect(()=>{const A=C=>{const I=C.target;(h==null?void 0:h.contains(I))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),N.useEffect(E,[n,E]),rE(h,S),rE(d.content,S),_.jsx(qUe,{value:{scrollbar:h,hasThumb:r,onThumbChange:A1(i),onThumbPointerUp:A1(s),onThumbPositionChange:E,onThumbPointerDown:A1(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:uv(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:uv(e.onPointerMove,T),onPointerUp:uv(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),WUe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Pc(),[a,u]=N.useState(),l=N.useRef(null),c=ls(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(ove,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${FM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),ive(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:lO(a.paddingLeft),paddingEnd:lO(a.paddingRight)}})}})}),GUe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Pc(),[a,u]=N.useState(),l=N.useRef(null),c=ls(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(ove,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${FM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),ive(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:lO(a.paddingTop),paddingEnd:lO(a.paddingBottom)}})}})}),Jq=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Ph(),s=Pc(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=nve(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>HUe(h,a.current,u,p);return n==="horizontal"?_.jsx(WUe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=hse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(GUe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=hse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),ave=N.forwardRef((e,t)=>{const n=Pc(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=$M(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return rE(n.viewport,u),rE(n.content,u),r||s?_.jsx(Jq,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),YUe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Pc(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(ave,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),KUe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Pc(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=$M(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(Jq,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:uv(e.onPointerEnter,()=>a("interacting")),onPointerLeave:uv(e.onPointerLeave,()=>a("idle"))}):null}),pse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Pc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(YUe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(KUe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(ave,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(Jq,{...r,ref:t}):null});function XUe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const QUe=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Pc(),s=sve(),{onThumbPositionChange:o}=s,a=ls(t,c=>s.onThumbChange(c)),u=N.useRef(),l=$M(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=XUe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:uv(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:uv(e.onPointerUp,s.onThumbPointerUp)})}),mse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=sve();return n||i.hasThumb?_.jsx(QUe,{ref:t,...r}):null}),uve=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Pc(),s=ls(r,i.onViewportChange);return _.jsx(Ee,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});uve.displayName="@mantine/core/ScrollAreaViewport";var Zq={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const lve={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},JUe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),Lm=je((e,t)=>{const n=Ae("ScrollArea",lve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=N.useState(!1),E=vt({name:"ScrollArea",props:n,classes:Zq,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:JUe});return _.jsxs(tve,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(uve,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(pse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(mse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(pse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(mse,{...E("thumb")})}),_.jsx(UUe,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Lm.displayName="@mantine/core/ScrollArea";const eW=je((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Ae("ScrollAreaAutosize",lve,e);return _.jsx(Ee,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(Ee,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(Lm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Lm.classes=Zq;eW.displayName="@mantine/core/ScrollAreaAutosize";eW.classes=Zq;Lm.Autosize=eW;var cve={root:"m_87cf2631"};const ZUe={__staticSelector:"UnstyledButton"},Rs=Ls((e,t)=>{const n=Ae("UnstyledButton",ZUe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=vt({name:s,props:n,classes:cve,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(Ee,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Rs.classes=cve;Rs.displayName="@mantine/core/UnstyledButton";var fve={root:"m_515a97f8"};const e7e={},tW=je((e,t)=>{const n=Ae("VisuallyHidden",e7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=vt({name:"VisuallyHidden",classes:fve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(Ee,{component:"span",ref:t,...c("root"),...l})});tW.classes=fve;tW.displayName="@mantine/core/VisuallyHidden";var dve={root:"m_1b7284a3"};const t7e={},n7e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:hi(t),"--paper-shadow":zq(n)}}),jM=Ls((e,t)=>{const n=Ae("Paper",t7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=vt({name:"Paper",props:n,classes:dve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:n7e});return _.jsx(Ee,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});jM.classes=dve;jM.displayName="@mantine/core/Paper";function wx(e){return hve(e)?(e.nodeName||"").toLowerCase():"#document"}function $u(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fm(e){var t;return(t=(hve(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function hve(e){return e instanceof Node||e instanceof $u(e).Node}function wi(e){return e instanceof Element||e instanceof $u(e).Element}function kl(e){return e instanceof HTMLElement||e instanceof $u(e).HTMLElement}function oU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $u(e).ShadowRoot}function TI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=wc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function r7e(e){return["table","td","th"].includes(wx(e))}function nW(e){const t=rW(),n=wc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function i7e(e){let t=lm(e);for(;kl(t)&&!R0(t);){if(nW(t))return t;t=lm(t)}return null}function rW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function R0(e){return["html","body","#document"].includes(wx(e))}function wc(e){return $u(e).getComputedStyle(e)}function BM(e){return wi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function lm(e){if(wx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||oU(e)&&e.host||Fm(e);return oU(t)?t.host:t}function pve(e){const t=lm(e);return R0(t)?e.ownerDocument?e.ownerDocument.body:e.body:kl(t)&&TI(t)?t:pve(t)}function Gp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=pve(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=$u(i);return s?t.concat(o,o.visualViewport||[],TI(i)?i:[],o.frameElement&&n?Gp(o.frameElement):[]):t.concat(i,Gp(i,[],n))}function gse(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function GC(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&oU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function mve(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function gve(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function s7e(e){return u7e()?!1:!yse()&&e.width===0&&e.height===0||yse()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function o7e(){return/apple/i.test(navigator.vendor)}function yse(){const e=/android/i;return e.test(mve())||e.test(gve())}function a7e(){return mve().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function u7e(){return gve().includes("jsdom/")}function aU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function l7e(e){return"nativeEvent"in e}function c7e(e){return e.matches("html,body")}function H1(e){return(e==null?void 0:e.ownerDocument)||document}function J5(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function T_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const f7e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function d7e(e){return kl(e)&&e.matches(f7e)}const yl=Math.min,ia=Math.max,cO=Math.round,GR=Math.floor,N0=e=>({x:e,y:e}),h7e={left:"right",right:"left",bottom:"top",top:"bottom"},p7e={start:"end",end:"start"};function uU(e,t,n){return ia(e,yl(t,n))}function cm(e,t){return typeof e=="function"?e(t):e}function Lf(e){return e.split("-")[0]}function Ex(e){return e.split("-")[1]}function iW(e){return e==="x"?"y":"x"}function sW(e){return e==="y"?"height":"width"}function vb(e){return["top","bottom"].includes(Lf(e))?"y":"x"}function oW(e){return iW(vb(e))}function m7e(e,t,n){n===void 0&&(n=!1);const r=Ex(e),i=oW(e),s=sW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=fO(o)),[o,fO(o)]}function g7e(e){const t=fO(e);return[lU(e),t,lU(t)]}function lU(e){return e.replace(/start|end/g,t=>p7e[t])}function y7e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function v7e(e,t,n,r){const i=Ex(e);let s=y7e(Lf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(lU)))),s}function fO(e){return e.replace(/left|right|bottom|top/g,t=>h7e[t])}function b7e(e){return{top:0,right:0,bottom:0,left:0,...e}}function aW(e){return typeof e!="number"?b7e(e):{top:e,right:e,bottom:e,left:e}}function iE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function vse(e,t,n){let{reference:r,floating:i}=e;const s=vb(t),o=oW(t),a=sW(o),u=Lf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Ex(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const _7e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=vse(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=vse(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function uW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=cm(t,e),p=aW(h),g=a[d?f==="floating"?"reference":"floating":f],y=iE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=iE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const w7e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=cm(e,t)||{};if(l==null)return{};const f=aW(c),d={x:n,y:r},h=oW(i),p=sW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=T/2-m[p]/2-1,I=yl(f[y],C),R=yl(f[v],C),M=I,P=T-m[p]-R,O=T/2-m[p]/2+A,F=uU(M,O,P),L=!u.arrow&&Ex(i)!=null&&O!==F&&s.reference[p]/2-(O<M?I:R)-m[p]/2<0,B=L?O<M?O-M:O-P:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:O-F-B,...L&&{alignmentOffset:B}},reset:L}}}),E7e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=cm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Lf(i),v=Lf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[fO(a)]:g7e(a));!d&&p!=="none"&&w.push(...v7e(a,m,p,b));const E=[a,...w],S=await uW(t,g),T=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const M=m7e(i,o,b);T.push(S[M[0]],S[M[1]])}if(A=[...A,{placement:i,overflows:T}],!T.every(M=>M<=0)){var C,I;const M=(((C=s.flip)==null?void 0:C.index)||0)+1,P=E[M];if(P)return{data:{index:M,overflows:A},reset:{placement:P}};let O=(I=A.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:I.placement;if(!O)switch(h){case"bestFit":{var R;const F=(R=A.map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:R[0];F&&(O=F);break}case"initialPlacement":O=a;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function yve(e){const t=yl(...e.map(s=>s.left)),n=yl(...e.map(s=>s.top)),r=ia(...e.map(s=>s.right)),i=ia(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function x7e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>iE(yve(i)))}const S7e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=cm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=x7e(c),d=iE(yve(c)),h=aW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(vb(n)==="y"){const I=f[0],R=f[f.length-1],M=Lf(n)==="top",P=I.top,O=R.bottom,F=M?I.left:R.left,L=M?I.right:R.right,B=L-F,U=O-P;return{top:P,bottom:O,left:F,right:L,width:B,height:U,x:F,y:P}}const g=Lf(n)==="left",y=ia(...f.map(I=>I.right)),v=yl(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),w=b[0].top,E=b[b.length-1].bottom,S=v,T=y,A=T-S,C=E-w;return{top:w,bottom:E,left:S,right:T,width:A,height:C,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function T7e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Lf(n),a=Ex(n),u=vb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=cm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const A7e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await T7e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},C7e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=cm(e,t),l={x:n,y:r},c=await uW(t,u),f=vb(Lf(i)),d=iW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=uU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=uU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},I7e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=cm(e,t),c={x:n,y:r},f=vb(i),d=iW(f);let h=c[d],p=c[f];const m=cm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Lf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},k7e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=cm(e,t),u=await uW(t,a),l=Lf(n),c=Ex(n),f=vb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=yl(h-u[p],g),b=yl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=b;if(f?S=c||w?yl(b,y):y:E=c||w?yl(v,g):g,w&&!c){const A=ia(u.left,0),C=ia(u.right,0),I=ia(u.top,0),R=ia(u.bottom,0);f?S=d-2*(A!==0||C!==0?A+C:ia(u.left,u.right)):E=h-2*(I!==0||R!==0?I+R:ia(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function vve(e){const t=wc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=kl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=cO(n)!==s||cO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function lW(e){return wi(e)?e:e.contextElement}function vw(e){const t=lW(e);if(!kl(t))return N0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=vve(t);let o=(s?cO(n.width):n.width)/r,a=(s?cO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const R7e=N0(0);function bve(e){const t=$u(e);return!rW()||!t.visualViewport?R7e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function N7e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$u(e)?!1:t}function Iv(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=lW(e);let o=N0(1);t&&(r?wi(r)&&(o=vw(r)):o=vw(e));const a=N7e(s,n,r)?bve(s):N0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=$u(s),h=r&&wi(r)?$u(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=vw(m),y=m.getBoundingClientRect(),v=wc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=$u(m),m=p.frameElement}}return iE({width:c,height:f,x:u,y:l})}const P7e=[":popover-open",":modal"];function cW(e){return P7e.some(t=>{try{return e.matches(t)}catch{return!1}})}function D7e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Fm(r),a=t?cW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=N0(1);const c=N0(0),f=kl(r);if((f||!f&&!s)&&((wx(r)!=="body"||TI(o))&&(u=BM(r)),kl(r))){const d=Iv(r);l=vw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function O7e(e){return Array.from(e.getClientRects())}function _ve(e){return Iv(Fm(e)).left+BM(e).scrollLeft}function $7e(e){const t=Fm(e),n=BM(e),r=e.ownerDocument.body,i=ia(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ia(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+_ve(e);const a=-n.scrollTop;return wc(r).direction==="rtl"&&(o+=ia(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function M7e(e,t){const n=$u(e),r=Fm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=rW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function L7e(e,t){const n=Iv(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=kl(e)?vw(e):N0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function bse(e,t,n){let r;if(t==="viewport")r=M7e(e,n);else if(t==="document")r=$7e(Fm(e));else if(wi(t))r=L7e(t,n);else{const i=bve(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return iE(r)}function wve(e,t){const n=lm(e);return n===t||!wi(n)||R0(n)?!1:wc(n).position==="fixed"||wve(n,t)}function F7e(e,t){const n=t.get(e);if(n)return n;let r=Gp(e,[],!1).filter(a=>wi(a)&&wx(a)!=="body"),i=null;const s=wc(e).position==="fixed";let o=s?lm(e):e;for(;wi(o)&&!R0(o);){const a=wc(o),u=nW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||TI(o)&&!u&&wve(e,o))?r=r.filter(c=>c!==o):i=a,o=lm(o)}return t.set(e,r),r}function j7e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?cW(t)?[]:F7e(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=bse(t,c,i);return l.top=ia(f.top,l.top),l.right=yl(f.right,l.right),l.bottom=yl(f.bottom,l.bottom),l.left=ia(f.left,l.left),l},bse(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function B7e(e){const{width:t,height:n}=vve(e);return{width:t,height:n}}function U7e(e,t,n){const r=kl(t),i=Fm(t),s=n==="fixed",o=Iv(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=N0(0);if(r||!r&&!s)if((wx(t)!=="body"||TI(i))&&(a=BM(t)),r){const f=Iv(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=_ve(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Z5(e){return wc(e).position==="static"}function _se(e,t){return!kl(e)||wc(e).position==="fixed"?null:t?t(e):e.offsetParent}function Eve(e,t){const n=$u(e);if(cW(e))return n;if(!kl(e)){let i=lm(e);for(;i&&!R0(i);){if(wi(i)&&!Z5(i))return i;i=lm(i)}return n}let r=_se(e,t);for(;r&&r7e(r)&&Z5(r);)r=_se(r,t);return r&&R0(r)&&Z5(r)&&!nW(r)?n:r||i7e(e)||n}const z7e=async function(e){const t=this.getOffsetParent||Eve,n=this.getDimensions,r=await n(e.floating);return{reference:U7e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function V7e(e){return wc(e).direction==="rtl"}const H7e={convertOffsetParentRelativeRectToViewportRelativeRect:D7e,getDocumentElement:Fm,getClippingRect:j7e,getOffsetParent:Eve,getElementRects:z7e,getClientRects:O7e,getDimensions:B7e,getScale:vw,isElement:wi,isRTL:V7e};function q7e(e,t){let n=null,r;const i=Fm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=GR(c),p=GR(i.clientWidth-(l+f)),m=GR(i.clientHeight-(c+d)),g=GR(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ia(0,yl(1,u))||1};let b=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function W7e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=lW(e),c=i||s?[...l?Gp(l):[],...Gp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?q7e(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Iv(e):null;u&&g();function g(){const y=Iv(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const G7e=A7e,Y7e=C7e,K7e=E7e,X7e=k7e,wse=w7e,Q7e=S7e,J7e=I7e,Z7e=(e,t,n)=>{const r=new Map,i={platform:H7e,...n},s={...i.platform,_c:r};return _7e(e,t,{...i,platform:s})};var kP=typeof document<"u"?N.useLayoutEffect:N.useEffect;function dO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!dO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!dO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function xve(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ese(e,t){const n=xve(e);return Math.round(t*n)/n}function xse(e){const t=N.useRef(e);return kP(()=>{t.current=e}),t}function eze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);dO(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),b=N.useCallback(B=>{B!==T.current&&(T.current=B,y(B))},[]),w=s||p,E=o||g,S=N.useRef(null),T=N.useRef(null),A=N.useRef(c),C=u!=null,I=xse(u),R=xse(i),M=N.useCallback(()=>{if(!S.current||!T.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),Z7e(S.current,T.current,B).then(U=>{const H={...U,isPositioned:!0};P.current&&!dO(A.current,H)&&(A.current=H,EI.flushSync(()=>{f(H)}))})},[d,t,n,R]);kP(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=N.useRef(!1);kP(()=>(P.current=!0,()=>{P.current=!1}),[]),kP(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if(I.current)return I.current(w,E,M);M()}},[w,E,M,I,C]);const O=N.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),F=N.useMemo(()=>({reference:w,floating:E}),[w,E]),L=N.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=Ese(F.floating,c.x),H=Ese(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...xve(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:M,refs:O,elements:F,floatingStyles:L}),[c,M,O,F,L])}const tze=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?wse({element:r.current,padding:i}).fn(n):{}:r?wse({element:r,padding:i}).fn(n):{}}}},Sve=(e,t)=>({...G7e(e),options:[e,t]}),fW=(e,t)=>({...Y7e(e),options:[e,t]}),Sse=(e,t)=>({...J7e(e),options:[e,t]}),cU=(e,t)=>({...K7e(e),options:[e,t]}),nze=(e,t)=>({...X7e(e),options:[e,t]}),fU=(e,t)=>({...Q7e(e),options:[e,t]}),Tve=(e,t)=>({...tze(e),options:[e,t]}),Ave={...OD},rze=Ave.useInsertionEffect,ize=rze||(e=>e());function Og(e){const t=N.useRef(()=>{});return ize(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Qd=typeof document<"u"?N.useLayoutEffect:N.useEffect;let Tse=!1,sze=0;const Ase=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+sze++;function oze(){const[e,t]=N.useState(()=>Tse?Ase():void 0);return Qd(()=>{e==null&&t(Ase())},[]),N.useEffect(()=>{Tse=!0},[]),e}const aze=Ave.useId,Cve=aze||oze;function uze(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const lze=N.createContext(null),cze=N.createContext(null),dW=()=>{var e;return((e=N.useContext(lze))==null?void 0:e.id)||null},hW=()=>N.useContext(cze);function pW(e){return"data-floating-ui-"+e}function Cse(e){const t=N.useRef(e);return Qd(()=>{t.current=e}),t}const Ise=pW("safe-polygon");function RP(e,t,n){return n&&!aU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function fze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=hW(),m=dW(),g=Cse(c),y=Cse(l),v=N.useRef(),b=N.useRef(-1),w=N.useRef(),E=N.useRef(-1),S=N.useRef(!0),T=N.useRef(!1),A=N.useRef(()=>{}),C=N.useCallback(()=>{var P;const O=(P=i.current.openEvent)==null?void 0:P.type;return(O==null?void 0:O.includes("mouse"))&&O!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function P(O){let{open:F}=O;F||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function P(F){C()&&r(!1,F,"hover")}const O=H1(a).documentElement;return O.addEventListener("mouseleave",P),()=>{O.removeEventListener("mouseleave",P)}},[a,n,r,u,g,C]);const I=N.useCallback(function(P,O,F){O===void 0&&(O=!0),F===void 0&&(F="hover");const L=RP(y.current,"close",v.current);L&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,F),L)):O&&(clearTimeout(b.current),r(!1,P,F))},[y,r]),R=Og(()=>{A.current(),w.current=void 0}),M=Og(()=>{if(T.current){const P=H1(a).body;P.style.pointerEvents="",P.removeAttribute(Ise),T.current=!1}});return N.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function O(B){if(clearTimeout(b.current),S.current=!1,f&&!aU(v.current)||d>0&&!RP(y.current,"open"))return;const U=RP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(P())return;A.current();const U=H1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){M(),R(),I(B,!0,"safe-polygon")}});const D=w.current;U.addEventListener("mousemove",D),A.current=()=>{U.removeEventListener("mousemove",D)};return}(v.current==="touch"?!GC(a,B.relatedTarget):!0)&&I(B)}function L(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){M(),R(),I(B)}})(B))}if(wi(o)){const B=o;return n&&B.addEventListener("mouseleave",L),a==null||a.addEventListener("mouseleave",L),h&&B.addEventListener("mousemove",O,{once:!0}),B.addEventListener("mouseenter",O),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",L),a==null||a.removeEventListener("mouseleave",L),h&&B.removeEventListener("mousemove",O),B.removeEventListener("mouseenter",O),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,I,R,M,r,n,p,y,g,i]),Qd(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&C()){const F=H1(a).body;if(F.setAttribute(Ise,""),F.style.pointerEvents="none",T.current=!0,wi(o)&&a){var O;const L=o,B=p==null||(O=p.nodesRef.current.find(U=>U.id===m))==null||(O=O.context)==null?void 0:O.elements.floating;return B&&(B.style.pointerEvents=""),L.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{L.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),Qd(()=>{n||(v.current=void 0,R(),M())},[n,R,M]),N.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(E.current),M()},[u,o,R,M]),N.useMemo(()=>{if(!u)return{};function P(O){v.current=O.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(O){function F(){S.current||r(!0,O.nativeEvent,"hover")}f&&!aU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(O){I(O.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const dU=()=>{},Ive=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:dU,setState:dU,isInstantPhase:!1}),kve=()=>N.useContext(Ive);function dze(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Qd(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(Ive.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function hze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=kve(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Qd(()=>{u&&(f({delay:{open:1,close:RP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Qd(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Qd(()=>{l===dU||!n||l(o)},[n,l,o]),a}function e8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const pze={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},mze={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},kse=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function gze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=hW(),v=Og(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=N.useRef(!1),E=N.useRef(!1),{escapeKey:S,outsidePress:T}=kse(m),{escapeKey:A,outsidePress:C}=kse(g),I=Og(O=>{var F;if(!n||!u||!l||O.key!=="Escape")return;const L=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?e8(y.nodesRef.current,L):[];if(!S&&(O.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var D;if((D=H.context)!=null&&D.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,l7e(O)?O.nativeEvent:O,"escape-key")}),R=Og(O=>{var F;const L=()=>{var B;I(O),(B=T_(O))==null||B.removeEventListener("keydown",L)};(F=T_(O))==null||F.addEventListener("keydown",L)}),M=Og(O=>{var F;const L=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||L||typeof b=="function"&&!b(O))return;const U=T_(O),H="["+pW("inert")+"]",D=H1(o).querySelectorAll(H);let z=wi(U)?U:null;for(;z&&!R0(z);){const G=lm(z);if(R0(G)||!wi(G))break;z=G}if(D.length&&wi(U)&&!c7e(U)&&!GC(U,o)&&Array.from(D).every(G=>!GC(z,G)))return;if(kl(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&O.offsetX>U.clientWidth;if(ne&&wc(U).direction==="rtl"&&(ce=O.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&O.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&e8(y.nodesRef.current,W).some(G=>{var ne;return J5(O,(ne=G.context)==null?void 0:ne.elements.floating)});if(J5(O,o)||J5(O,s)||j)return;const q=y?e8(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,O,"outside-press")}),P=Og(O=>{var F;const L=()=>{var B;M(O),(B=T_(O))==null||B.removeEventListener(f,L)};(F=T_(O))==null||F.addEventListener(f,L)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function O(B){r(!1,B,"ancestor-scroll")}const F=H1(o);l&&F.addEventListener("keydown",A?R:I,A),b&&F.addEventListener(f,C?P:M,C);let L=[];return p&&(wi(s)&&(L=Gp(s)),wi(o)&&(L=L.concat(Gp(o))),!wi(i)&&i&&i.contextElement&&(L=L.concat(Gp(i.contextElement)))),L=L.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",O,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?R:I,A),b&&F.removeEventListener(f,C?P:M,C),L.forEach(B=>{B.removeEventListener("scroll",O)})}},[a,o,s,i,l,b,f,n,r,p,u,S,T,I,A,R,M,C,P]),N.useEffect(()=>{w.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:I,[pze[h]]:O=>{d&&r(!1,O.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[mze[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,I])}function yze(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Cve(),s=N.useRef({}),[o]=N.useState(()=>uze()),a=dW()!=null,[u,l]=N.useState(r.reference),c=Og((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function mW(e){e===void 0&&(e={});const{nodeId:t}=e,n=yze({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=hW();Qd(()=>{c&&(f.current=c)},[c]);const h=eze({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const w=wi(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=N.useCallback(b=>{(wi(b)||b===null)&&(f.current=b,o(b)),(wi(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!wi(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Qd(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function vze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=$u(o);function h(){!n&&kl(o)&&o===gse(H1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){s7e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=T_(d.nativeEvent);if(u&&wi(h))try{if(o7e()&&a7e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!d7e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=wi(h)&&h.hasAttribute(pW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=gse(o?o.ownerDocument:document);!h&&g===o||GC((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||GC(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Rse="active",Nse="selected";function t8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Rse]:o,[Nse]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Rse,Nse].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function bze(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>t8(s,e,"reference"),t),r=N.useCallback(s=>t8(s,e,"floating"),t),i=N.useCallback(s=>t8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const _ze=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function wze(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=_ze.get(o))!=null?n:o,u=Cve(),c=dW()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Rve(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Pse(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Dse(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Eze={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function xze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[Eze[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...Pse(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Pse(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Dse(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Dse(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const gW=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Ph();return s?_.jsx("div",{...l,ref:c,style:{...u,...xze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});gW.displayName="@mantine/core/FloatingArrow";const[Sze,Nve]=_a("Popover component was not found in the tree");function UM({children:e,active:t=!0,refProp:n="ref"}){const r=f9e(t),i=ls(r,e==null?void 0:e.ref);return vy(e)?N.cloneElement(e,{[n]:i}):e}function Pve(e){return _.jsx(tW,{tabIndex:-1,"data-autofocus":!0,...e})}UM.displayName="@mantine/core/FocusTrap";Pve.displayName="@mantine/core/FocusTrapInitialFocus";UM.InitialFocus=Pve;function Tze(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Aze={},Dve=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ae("Portal",Aze,e),[s,o]=N.useState(!1),a=N.useRef(null);return yb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Tze(i),Hq(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:EI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});Dve.displayName="@mantine/core/Portal";function AI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(Dve,{...n,children:t}):_.jsx(_.Fragment,{children:t})}AI.displayName="@mantine/core/OptionalPortal";const YS=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),YR={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...YS("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...YS("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...YS("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...YS("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...YS("top"),common:{transformOrigin:"top right"}}},Ose={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Cze({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in YR?{transitionProperty:YR[e].transitionProperty,...i,...YR[e].common,...YR[e][Ose[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Ose[t]]}}function Ize({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Ms(),l=qq(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{uBe.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return um(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function jm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=Ize({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(Cze({transition:t,duration:f,state:d,timingFunction:h}))})}jm.displayName="@mantine/core/Transition";var Ove={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const kze={},yW=je((e,t)=>{var g,y,v,b;const n=Ae("PopoverDropdown",kze,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Nve(),h=$1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ls(t,d.floating);return d.disabled?null:_.jsx(AI,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(jm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(UM,{active:d.trapFocus,children:_.jsxs(Ee,{...p,...f,variant:u,ref:m,onKeyDownCapture:JBe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(gW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});yW.classes=Ove;yW.displayName="@mantine/core/PopoverDropdown";const Rze={refProp:"ref",popupType:"dialog"},$ve=je((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ae("PopoverTarget",Rze,e);if(!vy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Nve(),u=ls(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Ki(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});$ve.displayName="@mantine/core/PopoverTarget";function Mve({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return W7e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),um(()=>{t.update()},r),um(()=>{s(o=>o+1)},[e])}function Nze(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Pze(e,t){const n=Nze(e.middlewares),r=[Sve(e.offset)];return n.shift&&r.push(fW(typeof n.shift=="boolean"?{limiter:Sse(),padding:5}:{limiter:Sse(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?cU():cU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?fU():fU(n.inline)),r.push(Tve({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(nze({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function Dze(e){const[t,n]=Do({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=mW({strategy:e.strategy,placement:e.position,middleware:Pze(e,()=>s)});return Mve({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),um(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),um(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const Oze={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Nc("popover"),__staticSelector:"Popover",width:"max-content"},$ze=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:hi(t),"--popover-shadow":zq(n)}});function Jr(e){var be,ke,ze,ct,Dt,We;const t=Ae("Popover",Oze,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:T,trapFocus:A,onClose:C,onOpen:I,onChange:R,zIndex:M,radius:P,shadow:O,id:F,defaultOpened:L,__staticSelector:B,withRoles:U,disabled:H,returnFocus:D,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=vt({name:B,props:t,classes:Ove,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:$ze}),ce=N.useRef(null),[de,he]=N.useState(null),[ye,Ie]=N.useState(null),{dir:ve}=Ph(),Ke=Zu(F),Ue=Dze({middlewares:c,width:l,position:Rve(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:R,onOpen:I,onClose:C,strategy:q});t9e(()=>b&&Ue.onClose(),T,[de,ye]);const gt=N.useCallback(me=>{he(me),Ue.floating.refs.setReference(me)},[Ue.floating.refs.setReference]),rt=N.useCallback(me=>{Ie(me),Ue.floating.refs.setFloating(me)},[Ue.floating.refs.setFloating]);return _.jsx(Sze,{value:{returnFocus:D,disabled:H,controlled:Ue.controlled,reference:gt,floating:rt,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(be=Ue.floating)==null?void 0:be.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Dt=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Dt.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:M,radius:P,shadow:O,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}Jr.Target=$ve;Jr.Dropdown=yW;Jr.displayName="@mantine/core/Popover";Jr.extend=e=>e;var bf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Mze=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Ki(bf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:bf.bar}),_.jsx("span",{className:bf.bar}),_.jsx("span",{className:bf.bar})]})),Lze=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Ki(bf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:bf.dot}),_.jsx("span",{className:bf.dot}),_.jsx("span",{className:bf.dot})]})),Fze=N.forwardRef(({className:e,...t},n)=>_.jsx(Ee,{component:"span",className:Ki(bf.ovalLoader,e),...t,ref:n})),Lve={bars:Mze,oval:Fze,dots:Lze},jze={loaders:Lve,type:"oval"},Bze=(e,{size:t,color:n})=>({root:{"--loader-size":yn(t,"loader-size"),"--loader-color":n?ti(n,e):void 0}}),Bm=je((e,t)=>{const n=Ae("Loader",jze,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=vt({name:"Loader",props:n,classes:bf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:Bze});return p?_.jsx(Ee,{...g("root"),ref:t,...m,children:p}):_.jsx(Ee,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Bm.defaultLoaders=Lve;Bm.classes=bf;Bm.displayName="@mantine/core/Loader";var zM={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const $se={orientation:"horizontal"},Uze=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),vW=je((e,t)=>{const n=Ae("ActionIconGroup",$se,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ActionIconGroup",$se,e),p=vt({name:"ActionIconGroup",props:n,classes:zM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Uze,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});vW.classes=zM;vW.displayName="@mantine/core/ActionIconGroup";const zze={},Vze=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":yn(t,"ai-size"),"--ai-radius":n===void 0?void 0:hi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},P0=Ls((e,t)=>{const n=Ae("ActionIcon",zze,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...S}=n,T=vt({name:["ActionIcon",p],props:n,className:r,style:u,classes:zM,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:Vze});return _.jsxs(Rs,{...T("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(jm,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(Ee,{component:"span",...T("loader",{style:A}),"aria-hidden":!0,children:_.jsx(Bm,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(Ee,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});P0.classes=zM;P0.displayName="@mantine/core/ActionIcon";P0.Group=vW;const Fve=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Fve.displayName="@mantine/core/CloseIcon";var jve={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Hze={variant:"subtle"},qze=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":yn(t,"cb-size"),"--cb-radius":n===void 0?void 0:hi(n),"--cb-icon-size":Te(r)}}),wy=Ls((e,t)=>{const n=Ae("CloseButton",Hze,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=vt({name:"CloseButton",props:n,className:a,style:l,classes:jve,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:qze});return _.jsxs(Rs,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(Fve,{}),i]})});wy.classes=jve;wy.displayName="@mantine/core/CloseButton";function Wze(e){return N.Children.toArray(e).filter(Boolean)}var Bve={root:"m_4081bf90"};const Gze={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Yze=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Il(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Os=je((e,t)=>{const n=Ae("Group",Gze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=Wze(u),E=w.length,S=Il(l??"md"),A={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},C=vt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:Bve,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Yze});return _.jsx(Ee,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Os.classes=Bve;Os.displayName="@mantine/core/Group";var Uve={root:"m_9814e45f"};const Kze={zIndex:Nc("modal")},Xze=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&bd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:hi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),YC=Ls((e,t)=>{const n=Ae("Overlay",Kze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=vt({name:"Overlay",props:n,classes:Uve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xze});return _.jsx(Ee,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});YC.classes=Uve;YC.displayName="@mantine/core/Overlay";const[Qze,Um]=_a("ModalBase component was not found in tree");function Jze({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=qq()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Zze({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Zu(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Jze({opened:n,transitionDuration:d});return j1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),$1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const zve=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:S,bodyMounted:T,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:I}=Zze({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(AI,{...c,withinPortal:l,children:_.jsx(Qze,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:C,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(OM,{enabled:A&&f,...v,children:_.jsx(Ee,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Nc("modal")).toString(),"--mb-shadow":zq(p),"--mb-padding":Il(m)},children:d})})})})});function eVe(){const e=Um();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var sE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const bW=N.forwardRef(({className:e,...t},n)=>{const r=eVe(),i=Um();return _.jsx(Ee,{ref:n,...t,id:r,className:Ki({[sE.body]:!i.unstyled},e)})});bW.displayName="@mantine/core/ModalBaseBody";const _W=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Um();return _.jsx(wy,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ki({[sE.close]:!i.unstyled},e),unstyled:i.unstyled})});_W.displayName="@mantine/core/ModalBaseCloseButton";const Vve=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Um();return _.jsx(jm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Ki({[sE.inner]:!a.unstyled},n.className),children:_.jsx(UM,{active:a.opened&&a.trapFocus,children:_.jsx(jM,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ki({[sE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),wW=N.forwardRef(({className:e,...t},n)=>{const r=Um();return _.jsx(Ee,{component:"header",ref:n,className:Ki({[sE.header]:!r.unstyled},e),...t})});wW.displayName="@mantine/core/ModalBaseHeader";const tVe={duration:200,timingFunction:"ease",transition:"fade"};function nVe(e){const t=Um();return{...tVe,...t.transitionProps,...e}}const EW=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Um(),o=nVe(t);return _.jsx(jm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(YC,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});EW.displayName="@mantine/core/ModalBaseOverlay";function rVe(){const e=Um();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const xW=N.forwardRef(({className:e,...t},n)=>{const r=rVe(),i=Um();return _.jsx(Ee,{component:"h2",ref:n,className:Ki({[sE.title]:!i.unstyled},e),...t,id:r})});xW.displayName="@mantine/core/ModalBaseTitle";function Hve({children:e}){return _.jsx(_.Fragment,{children:e})}const[iVe,xx]=vx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Dc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Mse={},sVe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`}}),VM=je((e,t)=>{const n=Ae("InputDescription",Mse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ae("InputDescription",Mse,n),p=xx(),m=vt({name:["InputWrapper",c],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:sVe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});VM.classes=Dc;VM.displayName="@mantine/core/InputDescription";const oVe={},aVe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`}}),HM=je((e,t)=>{const n=Ae("InputError",oVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=vt({name:["InputWrapper",c],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:aVe}),m=xx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});HM.classes=Dc;HM.displayName="@mantine/core/InputError";const Lse={labelElement:"label"},uVe=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0}}),qM=je((e,t)=>{const n=Ae("InputLabel",Lse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Ae("InputLabel",Lse,n),b=vt({name:["InputWrapper",m],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:uVe}),w=xx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(Ee,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});qM.classes=Dc;qM.displayName="@mantine/core/InputLabel";const Fse={},SW=je((e,t)=>{const n=Ae("InputPlaceholder",Fse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ae("InputPlaceholder",Fse,n),p=vt({name:["InputPlaceholder",l],props:n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(Ee,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});SW.classes=Dc;SW.displayName="@mantine/core/InputPlaceholder";function lVe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const cVe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},fVe=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`}}),TW=je((e,t)=>{const n=Ae("InputWrapper",cVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:S,id:T,required:A,__stylesApiProps:C,mod:I,...R}=n,M=vt({name:["InputWrapper",f],props:C||n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fVe}),P={size:l,variant:c,__staticSelector:f},O=Zu(T),F=typeof S=="boolean"?S:A,L=(b==null?void 0:b.id)||`${O}-error`,B=(v==null?void 0:v.id)||`${O}-description`,U=O,H=!!m&&typeof m!="boolean",D=!!g,z=`${H?L:""} ${D?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${O}-label`,q=p&&_.jsx(qM,{labelElement:w,id:j,htmlFor:U,required:F,...P,...y,children:p},"label"),G=D&&_.jsx(VM,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(N.Fragment,{children:d(E)},"input"),ce=H&&N.createElement(HM,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||L},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(iVe,{value:{getStyles:M,describedBy:W,inputId:U,labelId:j,...lVe(h,{hasDescription:D,hasError:H})},children:_.jsx(Ee,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...M("root"),...R,children:de})})});TW.classes=Dc;TW.displayName="@mantine/core/InputWrapper";const dVe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},hVe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":yn(t.size,"input-height"),"--input-fz":oo(t.size),"--input-radius":t.radius===void 0?void 0:hi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?yn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Pi=Ls((e,t)=>{const n=Ae("Input",dVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:A,pointer:C,multiline:I,radius:R,id:M,withAria:P,withErrorStyles:O,mod:F,inputSize:L,...B}=n,{styleProps:U,rest:H}=_x(B),D=xx(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=vt({name:["Input",l],props:c||n,classes:Dc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:A,varsResolver:hVe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||M}:{};return _.jsxs(Ee,{...W("wrapper"),...U,...d,mod:[{error:!!h&&O,pointer:C,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:T,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(Ee,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&O},variant:T,__size:L,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Pi.classes=Dc;Pi.Wrapper=TW;Pi.Label=qM;Pi.Error=HM;Pi.Description=VM;Pi.Placeholder=SW;Pi.displayName="@mantine/core/Input";function qve(e,t,n){const r=Ae(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,vars:C,mod:I,...R}=r,{styleProps:M,rest:P}=_x(R),O={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,id:v,mod:I,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...O,...M},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const pVe={__staticSelector:"InputBase",withAria:!0},Oc=Ls((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=qve("InputBase",pVe,e);return _.jsx(Pi.Wrapper,{...r,children:_.jsx(Pi,{...n,...i,ref:t})})});Oc.classes={...Pi.classes,...Pi.Wrapper.classes};Oc.displayName="@mantine/core/InputBase";const mVe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Wve={root:"m_8bffd616"};const gVe={},Jt=Ls((e,t)=>{const n=Ae("Flex",gVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=vt({name:"Flex",classes:Wve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Ms(),b=LM(),w=K1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:mVe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(SI,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(Ee,{ref:t,...y("root",{className:b,style:yx(w.inlineStyles)}),...g})]})});Jt.classes=Wve;Jt.displayName="@mantine/core/Flex";function yVe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function vVe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{yVe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),_9e(()=>{z1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),w9e(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Gve={root:"m_96b553a6"};const bVe={},_Ve=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),AW=je((e,t)=>{const n=Ae("FloatingIndicator",bVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=vt({name:"FloatingIndicator",classes:Gve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ve}),g=N.useRef(null),{initialized:y,hidden:v}=vVe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ls(t,g);return!l||!c?null:_.jsx(Ee,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});AW.displayName="@mantine/core/FloatingIndicator";AW.classes=Gve;function hO({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}hO.displayName="@mantine/core/AccordionChevron";var Yve={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const wVe={},EVe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:hi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},CW=je((e,t)=>{const n=Ae("Alert",wVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=vt({name:"Alert",classes:Yve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EVe}),S=Zu(h),T=f&&`${S}-title`||void 0,A=`${S}-body`;return _.jsx(Ee,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":T,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:T,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(wy,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});CW.classes=Yve;CW.displayName="@mantine/core/Alert";var Kve={root:"m_b6d8b162"};function xVe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const SVe={inherit:!1},TVe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":oo(i),"--text-lh":O1e(i),"--text-gradient":t==="gradient"?rU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?ti(s,e):void 0}}),st=Ls((e,t)=>{const n=Ae("Text",SVe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=vt({name:["Text",l],props:n,classes:Kve,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:TVe});return _.jsx(Ee,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":xVe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});st.classes=Kve;st.displayName="@mantine/core/Text";var Xve={root:"m_849cf0da"};const AVe={underline:"hover"},Sx=Ls((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ae("Anchor",AVe,e);return _.jsx(st,{component:"a",ref:t,className:Ki({[Xve.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Sx.classes=Xve;Sx.displayName="@mantine/core/Anchor";const[CVe,Tx]=_a("AppShell was not found in tree");var Ey={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const IVe={},IW=je((e,t)=>{const n=Ae("AppShellAside",IVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});IW.classes=Ey;IW.displayName="@mantine/core/AppShellAside";const kVe={},kW=je((e,t)=>{var p;const n=Ae("AppShellFooter",kVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ki({[OM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});kW.classes=Ey;kW.displayName="@mantine/core/AppShellFooter";const RVe={},RW=je((e,t)=>{var p;const n=Ae("AppShellHeader",RVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ki({[OM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});RW.classes=Ey;RW.displayName="@mantine/core/AppShellHeader";const NVe={},NW=je((e,t)=>{const n=Ae("AppShellMain",NVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Tx();return _.jsx(Ee,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});NW.classes=Ey;NW.displayName="@mantine/core/AppShellMain";function CI(e){return typeof e=="object"?e.base:e}function II(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function kI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function PVe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),II(s)){const f=Te(CI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(kI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Vq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function DVe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(II(r)){const o=Te(CI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}kI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function OVe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(II(r)){const o=Te(CI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}kI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function $Ve({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),II(s)){const f=Te(CI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(kI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Vq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function n8(e){return Number(e)===0?"0px":Il(e)}function MVe({padding:e,baseStyles:t,minMediaStyles:n}){II(e)&&(t["--app-shell-padding"]=n8(CI(e))),kI(e)&&(e.base&&(t["--app-shell-padding"]=n8(e.base)),Ni(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=n8(e[r]))}))}function LVe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};$Ve({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),PVe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),OVe({baseStyles:u,minMediaStyles:o,header:t}),DVe({baseStyles:u,minMediaStyles:o,footer:n}),MVe({baseStyles:u,minMediaStyles:o,padding:i});const l=aO(Ni(o),s).map(d=>({query:`(min-width: ${sO(d.px)})`,styles:o[d.value]})),c=aO(Ni(a),s).map(d=>({query:`(max-width: ${sO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function FVe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ms(),o=by(),{media:a,baseStyles:u}=LVe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(SI,{media:a,styles:u,selector:o.cssVariablesSelector})}const jVe={},PW=je((e,t)=>{const n=Ae("AppShellNavbar",jVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});PW.classes=Ey;PW.displayName="@mantine/core/AppShellNavbar";const BVe={},DW=Ls((e,t)=>{const n=Ae("AppShellSection",BVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Tx();return _.jsx(Ee,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});DW.classes=Ey;DW.displayName="@mantine/core/AppShellSection";function UVe({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return j1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),yb(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const zVe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Nc("app")},VVe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),fi=je((e,t)=>{const n=Ae("AppShell",zVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...S}=n,T=vt({name:"AppShell",classes:Ey,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VVe}),A=UVe({disabled:y,transitionDuration:d});return _.jsxs(CVe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(FVe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(Ee,{ref:t,...T("root"),mod:[{resizing:A,layout:g,disabled:y},E],...S})]})});fi.classes=Ey;fi.displayName="@mantine/core/AppShell";fi.Navbar=PW;fi.Header=RW;fi.Main=NW;fi.Aside=IW;fi.Footer=kW;fi.Section=DW;function Qve(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Qve(t))}:e}function Jve(e){return e?e.map(t=>Qve(t)):[]}function OW(e){return e.reduce((t,n)=>"group"in n?{...t,...OW(n.items)}:(t[n.value]=n,t),{})}var zu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const HVe={error:null},qVe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":yn(t,"combobox-chevron-size")}}),$W=je((e,t)=>{const n=Ae("ComboboxChevron",HVe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=vt({name:"ComboboxChevron",classes:zu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:qVe,rootSelector:"chevron"});return _.jsx(Ee,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});$W.classes=zu;$W.displayName="@mantine/core/ComboboxChevron";const[WVe,$c]=_a("Combobox component was not found in tree"),Zve=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(wy,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Zve.displayName="@mantine/core/ComboboxClearButton";const GVe={},MW=je((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ae("ComboboxDropdown",GVe,e),u=$c();return _.jsx(Jr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});MW.classes=zu;MW.displayName="@mantine/core/ComboboxDropdown";const YVe={refProp:"ref"},ebe=je((e,t)=>{const{children:n,refProp:r}=Ae("ComboboxDropdownTarget",YVe,e);if($c(),!vy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Jr.Target,{ref:t,refProp:r,children:n})});ebe.displayName="@mantine/core/ComboboxDropdownTarget";const KVe={},LW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxEmpty",KVe,e),u=$c();return _.jsx(Ee,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});LW.classes=zu;LW.displayName="@mantine/core/ComboboxEmpty";function FW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=$c(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const XVe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},tbe=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxEventsTarget",XVe,e);if(!vy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=$c(),f=FW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:ls(t,c.store.targetRef,n==null?void 0:n.ref)})});tbe.displayName="@mantine/core/ComboboxEventsTarget";const QVe={},jW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxFooter",QVe,e),u=$c();return _.jsx(Ee,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});jW.classes=zu;jW.displayName="@mantine/core/ComboboxFooter";const JVe={},BW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ae("ComboboxGroup",JVe,e),c=$c();return _.jsxs(Ee,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});BW.classes=zu;BW.displayName="@mantine/core/ComboboxGroup";const ZVe={},UW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxHeader",ZVe,e),u=$c();return _.jsx(Ee,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});UW.classes=zu;UW.displayName="@mantine/core/ComboboxHeader";function nbe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}nbe.displayName="@mantine/core/ComboboxHiddenInput";const eHe={},zW=je((e,t)=>{const n=Ae("ComboboxOption",eHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=$c(),v=N.useId(),b=l||v;return _.jsx(Ee,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});zW.classes=zu;zW.displayName="@mantine/core/ComboboxOption";const tHe={},VW=je((e,t)=>{const n=Ae("ComboboxOptions",tHe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=$c(),d=Zu(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(Ee,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});VW.classes=zu;VW.displayName="@mantine/core/ComboboxOptions";const nHe={withAriaAttributes:!0,withKeyboardNavigation:!0},HW=je((e,t)=>{const n=Ae("ComboboxSearch",nHe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=$c(),h=d.getStyles("search"),p=FW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(Pi,{ref:ls(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});HW.classes=zu;HW.displayName="@mantine/core/ComboboxSearch";const rHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},rbe=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxTarget",rHe,e);if(!vy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=$c(),f=FW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return _.jsx(Jr.Target,{ref:ls(t,c.store.targetRef),children:d})});rbe.displayName="@mantine/core/ComboboxTarget";function iHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function sHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function oHe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function qW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Do({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=N.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=N.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),b=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=N.useCallback(L=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=L>=U.length?0:L<0?U.length-1:L;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),E=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===L);return w(U)}return w(0)},[w]),S=N.useCallback(()=>w(sHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),T=N.useCallback(()=>w(iHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=N.useCallback(()=>w(oHe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=N.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var D;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${L}`));c.current=H,B!=null&&B.scrollIntoView&&((D=U[H])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=N.useCallback(()=>{c.current=-1,b()},[b]),R=N.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),M=N.useCallback(L=>{l.current=L},[]),P=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),O=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:C,listId:l.current,setListId:M,clickSelectedOption:R,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:O}}const aHe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},uHe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":oo(t),"--combobox-option-padding":yn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":oo(t),"--combobox-option-padding":yn(t,"combobox-option-padding")}});function Kn(e){const t=Ae("Combobox",aHe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=qW(),y=o||g,v=vt({name:h||"Combobox",classes:zu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:uHe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(WVe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Jr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const lHe=e=>e;Kn.extend=lHe;Kn.classes=zu;Kn.displayName="@mantine/core/Combobox";Kn.Target=rbe;Kn.Dropdown=MW;Kn.Options=VW;Kn.Option=zW;Kn.Search=HW;Kn.Empty=LW;Kn.Chevron=$W;Kn.Footer=jW;Kn.Header=UW;Kn.EventsTarget=tbe;Kn.DropdownTarget=ebe;Kn.Group=BW;Kn.ClearButton=Zve;Kn.HiddenInput=nbe;var ibe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const cHe=ibe,WW=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const S=vt({name:e,props:t,className:n,style:y,classes:ibe,classNames:r,styles:i,unstyled:s});return _.jsx(Ee,{...S("root"),ref:E,__vars:{"--label-fz":oo(d),"--label-lh":yn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(Ee,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,_.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(Ee,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(Pi.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(Pi.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});WW.displayName="@mantine/core/InlineInput";const sbe=N.createContext(null),fHe=sbe.Provider,obe=()=>N.useContext(sbe),[dHe,hHe]=vx();var abe={card:"m_26775b0a"};const pHe={withBorder:!0},mHe=(e,{radius:t})=>({card:{"--card-radius":hi(t)}}),GW=je((e,t)=>{const n=Ae("CheckboxCard",pHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=vt({name:"CheckboxCard",classes:abe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mHe,rootSelector:"card"}),g=obe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(dHe,{value:{checked:y},children:_.jsx(Rs,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});GW.displayName="@mantine/core/CheckboxCard";GW.classes=abe;function ube({children:e,role:t}){const n=xx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const gHe={},YW=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ae("CheckboxGroup",gHe,e),[c,f]=Do({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(fHe,{value:{value:c,onChange:d,size:s},children:_.jsx(Pi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(ube,{role:"group",children:a})})})});YW.classes=Pi.Wrapper.classes;YW.displayName="@mantine/core/CheckboxGroup";function lbe({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function cbe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(lbe,{...t})}var fbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const yHe={icon:cbe},vHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":yn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:hi(t),"--checkbox-color":s==="outline"?u:ti(n,e),"--checkbox-icon-color":i?ti(i,e):bx(o,e)?_y({color:n,theme:e,autoContrast:o}):void 0}}},KW=je((e,t)=>{const n=Ae("CheckboxIndicator",yHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=vt({name:"CheckboxIndicator",classes:fbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vHe,rootSelector:"indicator"}),S=hHe(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return _.jsx(Ee,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});KW.displayName="@mantine/core/CheckboxIndicator";KW.classes=fbe;var dbe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const bHe={labelPosition:"right",icon:cbe},_He=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":yn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:hi(t),"--checkbox-color":s==="outline"?u:ti(n,e),"--checkbox-icon-color":i?ti(i,e):bx(o,e)?_y({color:n,theme:e,autoContrast:o}):void 0}}},fm=je((e,t)=>{const n=Ae("Checkbox",bHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:S,icon:T,rootRef:A,iconColor:C,onChange:I,autoContrast:R,mod:M,...P}=n,O=obe(),F=d||(O==null?void 0:O.size),L=T,B=vt({name:"Checkbox",props:n,classes:dbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_He}),{styleProps:U,rest:H}=_x(P),D=Zu(f),z=O?{checked:O.value.includes(H.value),onChange:W=>{O.onChange(W),I==null||I(W)}}:{};return _.jsx(WW,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:A,mod:M,...U,...p,children:_.jsxs(Ee,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(Ee,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:I,...H,...z,type:"checkbox"}),_.jsx(L,{indeterminate:S,...B("icon")})]})})});fm.classes={...dbe,...cHe};fm.displayName="@mantine/core/Checkbox";fm.Group=YW;fm.Indicator=KW;fm.Card=GW;function oE(e){return"group"in e}function hbe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;oE(o)&&i.push({group:o.group,items:hbe({options:o.items,search:t,limit:n-i.length})}),oE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function wHe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function pbe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(oE(n))pbe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function EHe(e,t){return Array.isArray(e)?e.includes(t):e===t}function mbe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!oE(e)){const a=EHe(n,e.value),u=t&&a&&_.jsx(lbe,{className:zu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Ki({[zu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(mbe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Kn.Group,{label:e.group,children:o})}function gbe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){pbe(e);const b=typeof i=="string"?(r||hbe)({options:e,search:u?i:"",limit:s??1/0}):e,w=wHe(b),E=b.map(S=>_.jsx(mbe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},oE(S)?S.group:S.value));return _.jsx(Kn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(Lm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Kn.Empty,{children:d})]})})}var ybe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const xHe={},SHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":yn(s,"badge-height"),"--badge-padding-x":yn(s,"badge-padding-x"),"--badge-fz":yn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:hi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?ti(n,e):void 0}}},Jd=Ls((e,t)=>{const n=Ae("Badge",xHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=vt({name:"Badge",props:n,classes:ybe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SHe});return _.jsxs(Ee,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});Jd.classes=ybe;Jd.displayName="@mantine/core/Badge";var vbe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const THe={},AHe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?ti(t,e):void 0,"--burger-size":yn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),XW=je((e,t)=>{const n=Ae("Burger",THe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=vt({name:"Burger",classes:vbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AHe});return _.jsxs(Rs,{...p("root"),ref:t,...h,children:[_.jsx(Ee,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});XW.classes=vbe;XW.displayName="@mantine/core/Burger";var WM={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const jse={orientation:"horizontal"},CHe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),QW=je((e,t)=>{const n=Ae("ButtonGroup",jse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ButtonGroup",jse,e),p=vt({name:"ButtonGroup",props:n,classes:WM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:CHe,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});QW.classes=WM;QW.displayName="@mantine/core/ButtonGroup";const IHe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},kHe={},RHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":yn(s,"button-height"),"--button-padding-x":yn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?oo(s.replace("compact-","")):oo(s),"--button-radius":t===void 0?void 0:hi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Rn=Ls((e,t)=>{const n=Ae("Button",kHe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:S,...T}=n,A=vt({name:"Button",props:n,classes:WM,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:RHe}),C=!!l,I=!!c;return _.jsxs(Rs,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":I},S],...T,children:[_.jsx(jm,{mounted:!!p,transition:IHe,duration:150,children:R=>_.jsx(Ee,{component:"span",...A("loader",{style:R}),"aria-hidden":!0,children:_.jsx(Bm,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(Ee,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(Ee,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(Ee,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});Rn.classes=WM;Rn.displayName="@mantine/core/Button";Rn.Group=QW;const[NHe,PHe]=_a("Card component was not found in tree");var JW={root:"m_e615b15f",section:"m_599a2148"};const DHe={},GM=Ls((e,t)=>{const n=Ae("CardSection",DHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=PHe();return _.jsx(Ee,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});GM.classes=JW;GM.displayName="@mantine/core/CardSection";const OHe={},$He=(e,{padding:t})=>({root:{"--card-padding":Il(t)}}),xy=Ls((e,t)=>{const n=Ae("Card",OHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=vt({name:"Card",props:n,classes:JW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$He}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===GM?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(NHe,{value:{getStyles:d},children:_.jsx(jM,{ref:t,unstyled:a,...d("root"),...f,children:p})})});xy.classes=JW;xy.displayName="@mantine/core/Card";xy.Section=GM;var bbe={root:"m_4451eb3a"};const MHe={},dm=Ls((e,t)=>{const n=Ae("Center",MHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=vt({name:"Center",props:n,classes:bbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(Ee,{ref:t,mod:[{inline:l},c],...d("root"),...f})});dm.classes=bbe;dm.displayName="@mantine/core/Center";var _be={root:"m_7485cace"};const LHe={},FHe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:yn(t,"container-size")}}),Dh=je((e,t)=>{const n=Ae("Container",LHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=vt({name:"Container",classes:_be,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FHe});return _.jsx(Ee,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Dh.classes=_be;Dh.displayName="@mantine/core/Container";var wbe={root:"m_3eebeb36",label:"m_9e365f20"};const jHe={orientation:"horizontal"},BHe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?ti(t,e):void 0,"--divider-border-style":n,"--divider-size":yn(r,"divider-size")}}),ZW=je((e,t)=>{const n=Ae("Divider",jHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=vt({name:"Divider",classes:wbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BHe});return _.jsx(Ee,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(Ee,{component:"span",mod:{position:d},...m("label"),children:f})})});ZW.classes=wbe;ZW.displayName="@mantine/core/Divider";const[UHe,Ax]=_a("Drawer component was not found in tree");var zm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const zHe={},YM=je((e,t)=>{const n=Ae("DrawerBody",zHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(bW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});YM.classes=zm;YM.displayName="@mantine/core/DrawerBody";const VHe={},KM=je((e,t)=>{const n=Ae("DrawerCloseButton",VHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(_W,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});KM.classes=zm;KM.displayName="@mantine/core/DrawerCloseButton";const HHe={},XM=je((e,t)=>{const n=Ae("DrawerContent",HHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Ax(),d=f.scrollAreaComponent||Hve;return _.jsx(Vve,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});XM.classes=zm;XM.displayName="@mantine/core/DrawerContent";const qHe={},QM=je((e,t)=>{const n=Ae("DrawerHeader",qHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(wW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});QM.classes=zm;QM.displayName="@mantine/core/DrawerHeader";const WHe={},JM=je((e,t)=>{const n=Ae("DrawerOverlay",WHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(EW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});JM.classes=zm;JM.displayName="@mantine/core/DrawerOverlay";function GHe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function YHe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const KHe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},XHe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},QHe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),position:"left"},JHe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":yn(n,"drawer-size"),"--drawer-flex":YHe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":GHe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),ZM=je((e,t)=>{const n=Ae("DrawerRoot",QHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Ph(),m=vt({name:"Drawer",classes:zm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JHe}),g=(p==="rtl"?XHe:KHe)[c];return _.jsx(UHe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(zve,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});ZM.classes=zm;ZM.displayName="@mantine/core/DrawerRoot";const ZHe={},eL=je((e,t)=>{const n=Ae("DrawerTitle",ZHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(xW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});eL.classes=zm;eL.displayName="@mantine/core/DrawerTitle";const eqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),withOverlay:!0,withCloseButton:!0},Oh=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ae("Drawer",eqe,e),l=!!n||s;return _.jsxs(ZM,{ref:t,...u,children:[r&&_.jsx(JM,{...i}),_.jsxs(XM,{children:[l&&_.jsxs(QM,{children:[n&&_.jsx(eL,{children:n}),s&&_.jsx(KM,{...o})]}),_.jsx(YM,{children:a})]})]})});Oh.classes=zm;Oh.displayName="@mantine/core/Drawer";Oh.Root=ZM;Oh.Overlay=JM;Oh.Content=XM;Oh.Body=YM;Oh.Header=QM;Oh.Title=eL;Oh.CloseButton=KM;function tqe({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[nqe,Ebe]=_a("Grid component was not found in tree"),hU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Bse=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":hU(e,t),Use=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},zse=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function rqe({span:e,order:t,offset:n,selector:r}){var d;const i=Ms(),s=Ebe(),a=VT(e)===void 0?12:VT(e),u=yx({"--col-order":(d=VT(t))==null?void 0:d.toString(),"--col-flex-grow":Use(a,s.grow),"--col-flex-basis":hU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Bse(a,s.columns,s.grow),"--col-offset":zse(VT(n),s.columns)}),l=Ni(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Use(e[p],s.grow),h[p]["--col-flex-basis"]=hU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Bse(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=zse(n[p],s.columns)),h},{}),f=aO(Ni(l),i).filter(h=>Ni(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(SI,{styles:u,media:f,selector:r})}var eG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const iqe={span:12},tG=je((e,t)=>{const n=Ae("GridCol",iqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=Ebe(),h=LM();return _.jsxs(_.Fragment,{children:[_.jsx(rqe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(Ee,{ref:t,...d.getStyles("col",{className:Ki(i,h),style:s,classNames:r,styles:o}),...f})]})});tG.classes=eG;tG.displayName="@mantine/core/GridCol";function sqe({gutter:e,selector:t}){const n=Ms(),r=yx({"--grid-gutter":Il(VT(e))}),i=Ni(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Il(e[u])),a),{}),o=aO(Ni(i),n).filter(a=>Ni(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(SI,{styles:r,media:o,selector:t})}const oqe={gutter:"md",grow:!1,columns:12},aqe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Zs=je((e,t)=>{const n=Ae("Grid",oqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=vt({name:"Grid",classes:eG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aqe}),y=LM();return _.jsxs(nqe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(sqe,{selector:`.${y}`,...n}),_.jsx(Ee,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Zs.classes=eG;Zs.displayName="@mantine/core/Grid";Zs.Col=tG;var xbe={root:"m_9e117634"};const uqe={},lqe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:hi(t),"--image-object-fit":n}}),Sy=Ls((e,t)=>{const n=Ae("Image",uqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=vt({name:"Image",classes:xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lqe});return g&&h?_.jsx(Ee,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(Ee,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Sy.classes=xbe;Sy.displayName="@mantine/core/Image";function pU(){return pU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pU.apply(null,arguments)}function cqe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var fqe=N.useLayoutEffect,dqe=function(t){var n=N.useRef(t);return fqe(function(){n.current=t}),n},Vse=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},hqe=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&Vse(r.current,null),r.current=n,n&&Vse(n,i)},[n])},Hse={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},pqe=function(t){Object.keys(Hse).forEach(function(n){t.style.setProperty(n,Hse[n],"important")})},qse=pqe,Ca=null,Wse=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function mqe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ca||(Ca=document.createElement("textarea"),Ca.setAttribute("tabindex","-1"),Ca.setAttribute("aria-hidden","true"),qse(Ca)),Ca.parentNode===null&&document.body.appendChild(Ca);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Ca.style[h]=o[h]}),qse(Ca),Ca.value=t;var u=Wse(Ca,e);Ca.value=t,u=Wse(Ca,e),Ca.value="x";var l=Ca.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Gse=function(){},gqe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},yqe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],vqe=!!document.documentElement.currentStyle,bqe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=gqe(yqe,n),i=r.boxSizing;if(i==="")return null;vqe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},_qe=bqe;function Sbe(e,t,n){var r=dqe(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var wqe=function(t){Sbe(window,"resize",t)},Eqe=function(t){Sbe(document.fonts,"loadingdone",t)},xqe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Sqe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Gse:o,u=t.onHeightChange,l=u===void 0?Gse:u,c=cqe(t,xqe),f=c.value!==void 0,d=N.useRef(null),h=hqe(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:_qe(b);if(w){m.current=w;var E=mqe(w,b.value||b.placeholder||"x",s,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),wqe(g),Eqe(g),N.createElement("textarea",pU({},c,{onChange:y,ref:h}))},Tqe=N.forwardRef(Sqe);const Aqe={},nG=je((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ae("Textarea",Aqe,e),u=n&&z1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Oc,{component:u?Tqe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});nG.classes=Oc.classes;nG.displayName="@mantine/core/Textarea";const[Cqe,Iqe]=_a("List component was not found in tree");var rG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const kqe={},iG=je((e,t)=>{const n=Ae("ListItem",kqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Iqe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(Ee,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});iG.classes=rG;iG.displayName="@mantine/core/ListItem";const Rqe={type:"unordered"},Nqe=(e,{size:t,spacing:n})=>({root:{"--list-fz":oo(t),"--list-lh":O1e(t),"--list-spacing":Il(n)}}),If=je((e,t)=>{const n=Ae("List",Rqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=vt({name:"List",classes:rG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nqe});return _.jsx(Cqe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(Ee,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});If.classes=rG;If.displayName="@mantine/core/List";If.Item=iG;var Tbe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Yse={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Nc("overlay")},Pqe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Ec=je((e,t)=>{const n=Ae("LoadingOverlay",Yse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ms(),g=vt({name:"LoadingOverlay",classes:Tbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Pqe}),y={...Yse.overlayProps,...f};return _.jsx(jm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(Ee,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Bm,{...g("loader"),unstyled:a,...c}),_.jsx(YC,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(YC,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Ec.classes=Tbe;Ec.displayName="@mantine/core/LoadingOverlay";const[Dqe,RI]=_a("Menu component was not found in the tree");var Cx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Oqe={},sG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuDivider",Oqe,e),u=RI();return _.jsx(Ee,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});sG.classes=Cx;sG.displayName="@mantine/core/MenuDivider";const $qe={},oG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ae("MenuDropdown",$qe,e),f=N.useRef(null),d=RI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=$p(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=$p(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Jr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ls(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});oG.classes=Cx;oG.displayName="@mantine/core/MenuDropdown";const Mqe={},aG=Ls((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ae("MenuItem",Mqe,e),p=RI(),m=Ms(),{dir:g}=Ph(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,w=$p(b.onMouseLeave,()=>p.setHovered(-1)),E=$p(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=$p(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=$p(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?Nh({color:a,theme:m}):null;return _.jsxs(Rs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ls(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:D1e({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});aG.classes=Cx;aG.displayName="@mantine/core/MenuItem";const Lqe={},uG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuLabel",Lqe,e),u=RI();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});uG.classes=Cx;uG.displayName="@mantine/core/MenuLabel";const Fqe={refProp:"ref"},Abe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ae("MenuTarget",Fqe,e);if(!vy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=RI(),o=$p(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=$p(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=$p(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Jr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});Abe.displayName="@mantine/core/MenuTarget";const jqe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function bu(e){const t=Ae("Menu",jqe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...S}=t,T=vt({name:"Menu",classes:Cx,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:I}]=e9e(),[R,M]=Do({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,O]=N.useState(!1),F=()=>{M(!1),O(!1),R&&(i==null||i())},L=()=>{M(!0),!R&&(r==null||r())},B=()=>{R?F():L()},{openDropdown:U,closeDropdown:H}=tqe({open:L,close:F,closeDelay:p,openDelay:h}),D=j=>ZBe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Mm({classNames:m,styles:g,props:t});return um(()=>{I()},[R]),_.jsx(Dqe,{value:{getStyles:T,opened:R,toggleDropdown:B,getItemIndex:D,hovered:A,setHovered:C,openedViaClick:P,setOpenedViaClick:O,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?L:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Jr,{...S,opened:R,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}bu.extend=e=>e;bu.classes=Cx;bu.displayName="@mantine/core/Menu";bu.Item=aG;bu.Label=uG;bu.Dropdown=oG;bu.Target=Abe;bu.Divider=sG;const[Bqe,Ix]=_a("Modal component was not found in tree");var Vm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Uqe={},tL=je((e,t)=>{const n=Ae("ModalBody",Uqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(bW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});tL.classes=Vm;tL.displayName="@mantine/core/ModalBody";const zqe={},nL=je((e,t)=>{const n=Ae("ModalCloseButton",zqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(_W,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});nL.classes=Vm;nL.displayName="@mantine/core/ModalCloseButton";const Vqe={},rL=je((e,t)=>{const n=Ae("ModalContent",Vqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Ix(),f=c.scrollAreaComponent||Hve;return _.jsx(Vve,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});rL.classes=Vm;rL.displayName="@mantine/core/ModalContent";const Hqe={},iL=je((e,t)=>{const n=Ae("ModalHeader",Hqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(wW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});iL.classes=Vm;iL.displayName="@mantine/core/ModalHeader";const qqe={},sL=je((e,t)=>{const n=Ae("ModalOverlay",qqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(EW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});sL.classes=Vm;sL.displayName="@mantine/core/ModalOverlay";const Wqe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Gqe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:hi(t),"--modal-size":yn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),oL=je((e,t)=>{const n=Ae("ModalRoot",Wqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=vt({name:m,classes:Vm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Gqe});return _.jsx(Bqe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(zve,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});oL.classes=Vm;oL.displayName="@mantine/core/ModalRoot";const Yqe={},aL=je((e,t)=>{const n=Ae("ModalTitle",Yqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(xW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});aL.classes=Vm;aL.displayName="@mantine/core/ModalTitle";const Kqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Nc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},vs=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ae("Modal",Kqe,e),c=!!n||s;return _.jsxs(oL,{ref:t,radius:u,...l,children:[r&&_.jsx(sL,{...i}),_.jsxs(rL,{radius:u,children:[c&&_.jsxs(iL,{children:[n&&_.jsx(aL,{children:n}),s&&_.jsx(nL,{...o})]}),_.jsx(tL,{children:a})]})]})});vs.classes=Vm;vs.displayName="@mantine/core/Modal";vs.Root=oL;vs.Overlay=sL;vs.Content=rL;vs.Body=tL;vs.Header=iL;vs.Title=aL;vs.CloseButton=nL;const[Xqe,lG]=vx(),[Qqe,Jqe]=vx();var uL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Zqe={},eWe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?yn(t):yn(n,"pg-gap")}}),cG=je((e,t)=>{const n=Ae("PillGroup",Zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=lG(),h=(d==null?void 0:d.size)||l||void 0,p=vt({name:"PillGroup",classes:uL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eWe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(Qqe,{value:{size:h,disabled:c},children:_.jsx(Ee,{ref:t,size:h,...p("group"),...f})})});cG.classes=uL;cG.displayName="@mantine/core/PillGroup";const tWe={variant:"default"},nWe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":yn(n,"pill-fz"),"--pill-height":yn(n,"pill-height"),"--pill-radius":t===void 0?void 0:hi(t)}}),KC=je((e,t)=>{const n=Ae("Pill",tWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=Jqe(),w=lG(),E=m||(b==null?void 0:b.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=vt({name:"Pill",classes:uL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nWe,stylesCtx:{size:E}});return _.jsxs(Ee,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...T("label"),children:c}),f&&_.jsx(wy,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});KC.classes=uL;KC.displayName="@mantine/core/Pill";KC.Group=cG;var Cbe={field:"m_45c4369d"};const rWe={type:"visible"},fG=je((e,t)=>{const n=Ae("PillsInputField",rWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=lG(),g=xx(),y=vt({name:"PillsInputField",classes:Cbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(Ee,{component:"input",ref:ls(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});fG.classes=Cbe;fG.displayName="@mantine/core/PillsInputField";const iWe={},pO=je((e,t)=>{const n=Ae("PillsInput",iWe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return _.jsx(Xqe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Oc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});pO.displayName="@mantine/core/PillsInput";pO.Field=fG;function sWe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(oE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const oWe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},dG=je((e,t)=>{const n=Ae("MultiSelect",oWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,searchValue:R,defaultSearchValue:M,onSearchChange:P,readOnly:O,disabled:F,onFocus:L,onBlur:B,onPaste:U,radius:H,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:rt,error:be,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Dt,checkIconPosition:We,hidePickedOptions:me,withErrorStyles:dt,name:yt,form:pe,id:Ce,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Mn,hiddenInputValuesDivider:Tr,required:Ln,mod:cr,renderOption:hn,onRemove:Sn,onClear:nr,scrollAreaProps:rr,...Fo}=n,$i=Zu(Ce),Tn=Jve(m),Mi=OW(Tn),Ar=qW({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Ar.resetSelectedOption()}}),{styleProps:fs,rest:{type:np,autoComplete:rl,...ad}}=_x(Fo),[Er,Ti]=Do({value:c,defaultValue:f,finalValue:[],onChange:d}),[Yr,ou]=Do({value:R,defaultValue:M,finalValue:"",onChange:P}),Sa=vt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ta,resolvedStyles:oe}=Mm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Ar.toggleDropdown()),ot.key==="Backspace"&&Yr.length===0&&Er.length>0&&(Sn==null||Sn(Er[Er.length-1]),Ti(Er.slice(0,Er.length-1)))},ae=Er.map((ot,St)=>{var Vt,Dn;return _.jsx(KC,{withRemoveButton:!O&&!((Vt=Mi[ot])!=null&&Vt.disabled),onRemove:()=>{Ti(Er.filter(Fn=>ot!==Fn)),Sn==null||Sn(ot)},unstyled:a,disabled:F,...Sa("pill"),children:((Dn=Mi[ot])==null?void 0:Dn.label)||ot},`${ot}-${St}`)});N.useEffect(()=>{w&&Ar.selectFirstOption()},[w,Er]);const Se=He&&Er.length>0&&!F&&!O&&_.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ti([]),ou("")}}),xe=sWe({data:Tn,value:Er});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:Ar,classNames:Ta,styles:oe,unstyled:a,size:l,readOnly:O,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),ou(""),Ar.updateSelectedOptionIndex("selected"),Er.includes(Mi[ot].value)?(Ti(Er.filter(St=>St!==Mi[ot].value)),Sn==null||Sn(Mi[ot].value)):Er.length<ke&&Ti([...Er,Mi[ot].value])},...S,children:[_.jsx(Kn.DropdownTarget,{children:_.jsx(pO,{...fs,__staticSelector:"MultiSelect",classNames:Ta,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:D||Se||_.jsx(Kn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Se?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:rt,error:be,multiline:!0,withErrorStyles:dt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Se?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Ar.openDropdown():Ar.toggleDropdown(),"data-expanded":Ar.dropdownOpened||void 0,id:$i,required:Ln,mod:cr,children:_.jsxs(KC.Group,{disabled:F,unstyled:a,...Sa("pillsList"),children:[ae,_.jsx(Kn.EventsTarget,{autoComplete:rl,children:_.jsx(pO.Field,{...ad,ref:t,id:$i,placeholder:Mn,type:!ze&&!Mn?"hidden":"visible",...Sa("inputField"),unstyled:a,onFocus:ot=>{L==null||L(ot),ze&&Ar.openDropdown()},onBlur:ot=>{B==null||B(ot),Ar.closeDropdown(),ou("")},onKeyDown:ee,value:Yr,onChange:ot=>{ou(ot.currentTarget.value),ze&&Ar.openDropdown(),w&&Ar.selectFirstOption()},disabled:F,readOnly:O||!ze,pointer:!ze})})]})})}),_.jsx(gbe,{data:me?xe:Tn,hidden:O||F,filter:T,search:Yr,limit:A,hiddenWhenEmpty:!ze||!ct||me&&xe.length===0&&Yr.trim().length===0,withScrollArea:C,maxDropdownHeight:I,filterOptions:ze,value:Er,checkIconPosition:We,withCheckIcon:Dt,nothingFoundMessage:ct,unstyled:a,labelId:rt?`${$i}-label`:void 0,"aria-label":rt?void 0:Fo["aria-label"],renderOption:hn,scrollAreaProps:rr})]}),_.jsx(Kn.HiddenInput,{name:yt,valuesDivider:Tr,value:Er,form:pe,disabled:F,..._t})]})});dG.classes={...Oc.classes,...Kn.classes};dG.displayName="@mantine/core/MultiSelect";var Ibe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const aWe={},uWe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Il(r)}}},lL=Ls((e,t)=>{const n=Ae("NavLink",aWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:A,mod:C,...I}=n,R=vt({name:"NavLink",props:n,classes:Ibe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uWe}),[M,P]=Do({value:l,defaultValue:c,finalValue:!1,onChange:f}),O=!!d,F=L=>{h==null||h(L),O&&(L.preventDefault(),P(!M))};return _.jsxs(_.Fragment,{children:[_.jsxs(Rs,{...R("root"),component:"a",ref:t,onClick:F,onKeyDown:L=>{T==null||T(L),L.nativeEvent.code==="Space"&&O&&(L.preventDefault(),P(!M))},unstyled:a,mod:[{disabled:m,active:p,expanded:M},C],...I,children:[g&&_.jsx(Ee,{component:"span",...R("section"),mod:{position:"left"},children:g}),_.jsxs(Ee,{...R("body"),mod:{"no-wrap":E},children:[_.jsx(Ee,{component:"span",...R("label"),children:v}),_.jsx(Ee,{component:"span",mod:{active:p},...R("description"),children:b})]}),(O||y)&&_.jsx(Ee,{...R("section"),component:"span",mod:{rotate:M&&!w,position:"right"},children:O?y||_.jsx(hO,{...R("chevron")}):y})]}),_.jsx(eve,{in:M,...R("collapse"),children:_.jsx("div",{...R("children"),children:d})})]})});lL.classes=Ibe;lL.displayName="@mantine/core/NavLink";function kbe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var XC;(function(e){e.event="event",e.props="prop"})(XC||(XC={}));function $g(){}function lWe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function QC(e){return!!(e||"").match(/\d/)}function bw(e){return e==null}function cWe(e){return typeof e=="number"&&isNaN(e)}function Rbe(e){return bw(e)||cWe(e)||typeof e=="number"&&!isFinite(e)}function Nbe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function fWe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function dWe(e,t,n){var r=fWe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function hWe(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function hG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function pWe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Pbe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Kse(e,t){return Array(t+1).join(e)}function Dbe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Kse("0",Math.abs(o))+i:o>=a?i=i+Kse("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Xse(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=hG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Pbe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function C1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Obe=lWe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),mWe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function gWe(e,t,n){return Math.min(Math.max(e,t),n)}function r8(e){return Math.max(e.selectionStart,e.selectionEnd)}function yWe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function vWe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function bWe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function _We(e,t,n,r,i,s,o){o===void 0&&(o=bWe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Qse(e,t,n,r){var i=e.length;if(t=gWe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function wWe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(QC(e[n])||QC(e[n-1]));return t}function $be(e,t,n,r,i,s){s===void 0&&(s=$g);var o=hWe(function(p,m){var g,y;return Rbe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Dbe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(bw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;bw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function EWe(e){return e.replace(/[^0-9]/g,"")}function xWe(e){return e}function SWe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=xWe);var a=e.removeFormatting;a===void 0&&(a=EWe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=$g);var h=e.onKeyDown;h===void 0&&(h=$g);var p=e.onMouseUp;p===void 0&&(p=$g);var m=e.onFocus;m===void 0&&(m=$g);var g=e.onBlur;g===void 0&&(g=$g);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=wWe);var b=e.isValidInputCharacter;b===void 0&&(b=QC);var w=e.isCharacterSame,E=kbe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=$be(y,u,!!l,o,a,c),T=S[0],A=T.formattedValue,C=T.numAsString,I=S[1],R=N.useRef(),M=N.useRef({formattedValue:A,numAsString:C}),P=function(be,ke){M.current={formattedValue:be.formattedValue,numAsString:be.value},I(be,ke)},O=N.useState(!1),F=O[0],L=O[1],B=N.useRef(null),U=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return L(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,D=function(be,ke){var ze=parseFloat(ke);return{formattedValue:be,value:ke,floatValue:isNaN(ze)?void 0:ze}},z=function(be,ke,ze){be.selectionStart===0&&be.selectionEnd===be.value.length||(C1(be,ke),U.current.setCaretTimeout=setTimeout(function(){be.value===ze&&be.selectionStart!==ke&&C1(be,ke)},0))},W=function(be,ke,ze){return Qse(be,ke,v(be),ze)},j=function(be,ke,ze){var ct=v(ke),Dt=_We(ke,A,be,ze,ct,b,w);return Dt=Qse(ke,Dt,ct),Dt},q=function(be){var ke=be.formattedValue;ke===void 0&&(ke="");var ze=be.input,ct=be.source,Dt=be.event,We=be.numAsString,me;if(ze){var dt=be.inputValue||ze.value,yt=r8(ze);ze.value=ke,me=j(dt,ke,yt),me!==void 0&&z(ze,me,ke)}ke!==A&&P(D(ke,We),{event:Dt,source:ct})};N.useEffect(function(){var be=M.current,ke=be.formattedValue,ze=be.numAsString;(A!==ke||C!==ze)&&P(D(A,C),{event:void 0,source:XC.props})},[A,C]);var G=B.current?r8(B.current):void 0,ne=typeof window<"u"?N.useLayoutEffect:N.useEffect;ne(function(){var be=B.current;if(A!==M.current.formattedValue&&be){var ke=j(M.current.formattedValue,A,G);be.value=A,z(be,ke,A)}},[A]);var ce=function(be,ke,ze){var ct=ke.target,Dt=R.current?mWe(R.current,ct.selectionEnd):Obe(A,be),We=Object.assign(Object.assign({},Dt),{lastValue:A}),me=a(be,We),dt=H(me);if(me=a(dt,void 0),f&&!f(D(dt,me))){var yt=ke.target,pe=r8(yt),Ce=j(be,A,pe);return yt.value=A,z(yt,Ce,A),!1}return q({formattedValue:dt,numAsString:me,inputValue:be,event:ke,source:ze,input:ke.target}),!0},de=function(be,ke){ke===void 0&&(ke=0);var ze=be.selectionStart,ct=be.selectionEnd;R.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(be){var ke=be.target,ze=ke.value,ct=ce(ze,be,XC.event);ct&&d(be),R.current=void 0},ye=function(be){var ke=be.target,ze=be.key,ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me;ze==="ArrowLeft"||ze==="Backspace"?me=Math.max(ct-1,0):ze==="ArrowRight"?me=Math.min(ct+1,We.length):ze==="Delete"&&(me=ct);var dt=0;ze==="Delete"&&ct===Dt&&(dt=1);var yt=ze==="ArrowLeft"||ze==="ArrowRight";if(me===void 0||ct!==Dt&&!yt){h(be),de(ke,dt);return}var pe=me;if(yt){var Ce=ze==="ArrowLeft"?"left":"right";pe=W(We,me,Ce),pe!==me&&be.preventDefault()}else ze==="Delete"&&!b(We[me])?pe=W(We,me,"right"):ze==="Backspace"&&!b(We[me])&&(pe=W(We,me,"left"));pe!==me&&z(ke,pe,We),h(be),de(ke,dt)},Ie=function(be){var ke=be.target,ze=function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Dt){var me=W(We,ct);me!==ct&&z(ke,me,We)}};ze(),requestAnimationFrame(function(){ze()}),p(be),de(ke)},ve=function(be){be.persist&&be.persist();var ke=be.target,ze=be.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me=W(We,ct);me!==ct&&!(ct===0&&Dt===We.length)&&z(ke,me,We),m(Object.assign(Object.assign({},be),{currentTarget:ze}))},0)},Ke=function(be){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(be)},Ue=F&&yWe()?"numeric":void 0,gt=Object.assign({inputMode:Ue},E,{type:t,value:A,onChange:he,onKeyDown:ye,onMouseUp:Ie,onFocus:ve,onBlur:Ke});if(n==="text")return i?Un.createElement(Un.Fragment,null,i(A,E)||null):Un.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var rt=r;return Un.createElement(rt,Object.assign({},gt,{ref:s}))}return Un.createElement("input",Object.assign({},gt,{ref:s}))}function Jse(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=cL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=hG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Pbe(p,n,!!r)),l&&(h=dWe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function cL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function TWe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function AWe(e,t){return new RegExp("(^-)|[0-9]|"+Nbe(e),"g")}function CWe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function IWe(e,t,n){var r;t===void 0&&(t=vWe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=cL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(QC(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var D=!1,z=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,T=w.value,A=e.substring(c,f);e.length&&T.length&&(E>T.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=T);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=TWe(b?"-"+e:e,i),e=(e.match(AWe(p))||[]).join("");var M=e.indexOf(p);e=e.replace(new RegExp(Nbe(p),"g"),function(B,U){return U===M?".":""});var P=hG(e,i),O=P.beforeDecimal,F=P.afterDecimal,L=P.addNegation;return l.end-l.start<u.end-u.start&&O===""&&m&&!parseFloat(F)&&(e=L?"-":""),e}function kWe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function RWe(e){var t=cL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function NWe(e){e=RWe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=$g);var s=e.onBlur;s===void 0&&(s=$g);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=kbe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=cL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return Jse(L,e)},b=function(L,B){return IWe(L,B,e)},w=bw(f)?c:f,E=d??CWe(w,l,t);bw(f)?bw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(L){return Rbe(L)?L:(typeof L=="number"&&(L=Dbe(L)),E&&typeof a=="number"?Xse(L,a,!!u):L)},T=$be(S(f),S(c),!!E,v,b,h),A=T[0],C=A.numAsString,I=A.formattedValue,R=T[1],M=function(L){var B=L.target,U=L.key,H=B.selectionStart,D=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&D<l.length){L.preventDefault();return}if(H!==D){i(L);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&C1(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(C1(B,H-1),L.preventDefault()):U==="Delete"&&z[H]===g&&L.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&C1(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&C1(B,H-1),U==="Delete"&&z[H]===W&&C1(B,H+1),i(L)},P=function(L){var B=C;if(B.match(/\d/g)||(B=""),r||(B=pWe(B)),u&&a&&(B=Xse(B,a,u)),B!==C){var U=Jse(B,e);R({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:L,source:XC.event})}s(L)},O=function(L){return L===g?!0:QC(L)},F=function(L){var B=L.currentValue,U=L.lastValue,H=L.formattedValue,D=L.currentValueIndex,z=L.formattedValueIndex,W=B[D],j=H[z],q=Obe(U,B),G=q.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:O,isCharacterSame:F,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(L){return kWe(L,e)},onKeyDown:M,onBlur:P})}function PWe(e){var t=NWe(e);return Un.createElement(SWe,Object.assign({},t))}function Zse({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var mU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const DWe=/^(0\.0*|-0(\.0*)?)$/,OWe=/^-?0\d+(\.\d+)?\.?$/;function $We(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function eoe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const MWe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},LWe=(e,{size:t})=>({controls:{"--ni-chevron-size":yn(t,"ni-chevron-size")}}),pG=je((e,t)=>{const n=Ae("NumberInput",MWe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:A,startValue:C,disabled:I,rightSectionPointerEvents:R,allowNegative:M,readOnly:P,size:O,rightSectionWidth:F,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:D,...z}=n,W=vt({name:"NumberInput",classes:mU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:LWe}),{resolvedClassNames:j,resolvedStyles:q}=Mm({classNames:i,styles:s,props:n}),[G,ne]=Do({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&L!==void 0,de=N.useRef(null),he=N.useRef(null),ye=N.useRef(0),Ie=(me,dt)=>{dt.source==="event"&&ne($We(me.floatValue)&&!DWe.test(me.value)&&!(U&&OWe.test(me.value))?me.floatValue:me.value),l==null||l(me,dt)},ve=me=>{const dt=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return dt?Math.max(0,(dt[1]?dt[1].length:0)-(dt[2]?+dt[2]:0)):0},Ke=me=>{de.current&&typeof me<"u"&&de.current.setSelectionRange(me,me)},Ue=N.useRef();Ue.current=()=>{let me;const dt=ve(G),yt=ve(p),pe=Math.max(dt,yt),Ce=10**pe;if(typeof G!="number"||Number.isNaN(G))me=zd(C,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;me=ut<=d?ut:d}else me=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const He=me.toFixed(pe);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const gt=N.useRef();gt.current=()=>{let me;const dt=h!==void 0?h:M?Number.MIN_SAFE_INTEGER:0,yt=ve(G),pe=ve(p),Ce=Math.max(yt,pe),He=10**Ce;if(typeof G!="number"||Number.isNaN(G))me=zd(C,dt,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;me=dt!==void 0&&_t<dt?dt:_t}const ut=me.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const rt=me=>{S==null||S(me),!(P||!H)&&(me.key==="ArrowUp"&&(me.preventDefault(),Ue.current()),me.key==="ArrowDown"&&(me.preventDefault(),gt.current()))},be=me=>{if(T==null||T(me),me.key==="Backspace"){const dt=de.current;dt.selectionStart===0&&dt.selectionStart===dt.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>Ke(0),0))}};Hq(A,{increment:Ue.current,decrement:gt.current});const ke=me=>{me?Ue.current():gt.current(),ye.current+=1},ze=me=>{if(ke(me),ce){const dt=typeof L=="number"?L:L(ye.current);he.current=window.setTimeout(()=>ze(me),dt)}},ct=(me,dt)=>{var yt;me.preventDefault(),(yt=de.current)==null||yt.focus(),ke(dt),ce&&(he.current=window.setTimeout(()=>ze(dt),B))},Dt=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ye.current=0},We=_.jsxs("div",{...W("controls"),children:[_.jsx(Rs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(Zse,{direction:"up"})}),_.jsx(Rs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(Zse,{direction:"down"})})]});return _.jsx(Oc,{component:PWe,allowNegative:M,className:Ki(mU.root,r),size:O,...z,readOnly:P,disabled:I,value:G,getInputRef:ls(t,de),onValueChange:Ie,rightSection:m||P?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:rt,onKeyDownCapture:be,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${O||"sm"})`,allowLeadingZeros:U,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&zd(G,h,d)!==G&&ne(zd(G,h,d)),D&&typeof G=="string"){const dt=G.replace(/^0+/,""),yt=parseFloat(dt);ne(Number.isNaN(yt)?dt:yt)}},isAllowed:me=>v==="strict"?y?y(me)&&eoe(me.floatValue,h,d):eoe(me.floatValue,h,d):y?y(me):!0})});pG.classes={...Oc.classes,...mU};pG.displayName="@mantine/core/NumberInput";const[FWe,Mbe]=_a("Progress.Root component was not found in tree");var NI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const jWe={},mG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ProgressLabel",jWe,e),u=Mbe();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});mG.classes=NI;mG.displayName="@mantine/core/ProgressLabel";const BWe={},UWe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":yn(t,"progress-size"),"--progress-radius":n===void 0?void 0:hi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),fL=je((e,t)=>{const n=Ae("ProgressRoot",BWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=vt({name:"Progress",classes:NI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UWe});return _.jsx(FWe,{value:{getStyles:d,autoContrast:l},children:_.jsx(Ee,{ref:t,...d("root"),...f})})});fL.classes=NI;fL.displayName="@mantine/core/ProgressRoot";const zWe={withAria:!0},dL=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ae("ProgressSection",zWe,e),p=Mbe(),m=Ms(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(Ee,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":ti(l,m),"--progress-label-color":bx(p.autoContrast,m)?_y({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});dL.classes=NI;dL.displayName="@mantine/core/ProgressSection";const VWe={},kx=je((e,t)=>{const n=Ae("Progress",VWe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Mm({classNames:i,styles:s,props:n});return _.jsx(fL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(dL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});kx.classes=NI;kx.displayName="@mantine/core/Progress";kx.Section=dL;kx.Root=fL;kx.Label=mG;const[HWe,Lbe]=vx(),[qWe,WWe]=vx();var Fbe={card:"m_9dc8ae12"};const GWe={withBorder:!0},YWe=(e,{radius:t})=>({card:{"--card-radius":hi(t)}}),gG=je((e,t)=>{const n=Ae("RadioCard",GWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=vt({name:"RadioCard",classes:Fbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YWe,rootSelector:"card"}),{dir:v}=Ph(),b=Lbe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(M=>M===T.target),I=C+1>=A.length?0:C+1,R=C-1<0?A.length-1:C-1;T.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),T.nativeEvent.code==="ArrowUp"&&(A[R].focus(),A[R].click()),T.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?R:I].focus(),A[v==="ltr"?R:I].click()),T.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:R].focus(),A[v==="ltr"?I:R].click())}};return _.jsx(qWe,{value:{checked:w},children:_.jsx(Rs,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:S})})});gG.displayName="@mantine/core/RadioCard";gG.classes=Fbe;const KWe={},yG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ae("RadioGroup",KWe,e),f=Zu(u),[d,h]=Do({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(HWe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(Pi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(ube,{role:"radiogroup",children:a})})})});yG.classes=Pi.Wrapper.classes;yG.displayName="@mantine/core/RadioGroup";function jbe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Bbe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const XWe={icon:jbe},QWe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":yn(r,"radio-size"),"--radio-radius":t===void 0?void 0:hi(t),"--radio-color":s==="outline"?u:ti(n,e),"--radio-icon-size":yn(r,"radio-icon-size"),"--radio-icon-color":i?ti(i,e):bx(o,e)?_y({color:n,theme:e,autoContrast:o}):void 0}}},vG=je((e,t)=>{const n=Ae("RadioIndicator",XWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=vt({name:"RadioIndicator",classes:Bbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QWe,rootSelector:"indicator"}),E=WWe(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(Ee,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});vG.displayName="@mantine/core/RadioIndicator";vG.classes=Bbe;var Ube={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const JWe={labelPosition:"right"},ZWe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":yn(t,"radio-size"),"--radio-radius":n===void 0?void 0:hi(n),"--radio-color":s==="outline"?u:ti(r,e),"--radio-icon-color":i?ti(i,e):bx(o,e)?_y({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":yn(t,"radio-icon-size")}}},kv=je((e,t)=>{const n=Ae("Radio",JWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=jbe,rootRef:E,iconColor:S,onChange:T,mod:A,...C}=n,I=vt({name:"Radio",classes:Ube,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZWe}),R=Lbe(),M=(R==null?void 0:R.size)??c,P=n.size?c:M,{styleProps:O,rest:F}=_x(C),L=Zu(l),B=R?{checked:R.value===F.value,name:F.name??R.name,onChange:U=>{R.onChange(U),T==null||T(U)}}:{};return _.jsx(WW,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...O,...b,children:_.jsxs(Ee,{...I("inner"),mod:{"label-position":d},children:[_.jsx(Ee,{...I("radio",{focusable:!0,variant:y}),onChange:T,...F,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),_.jsx(w,{...I("icon"),"aria-hidden":!0})]})})});kv.classes=Ube;kv.displayName="@mantine/core/Radio";kv.Group=yG;kv.Card=gG;kv.Indicator=vG;const eGe={duration:100,transition:"fade"};function tGe(e,t){return{...eGe,...t,...e}}function nGe({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=mW({placement:t,middleware:[fW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Gp(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var hL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const rGe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Nc("popover")},iGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:hi(t),"--tooltip-bg":n?ti(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),bG=je((e,t)=>{const n=Ae("TooltipFloating",rGe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...S}=n,T=Ms(),A=vt({name:"TooltipFloating",props:n,classes:hL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:iGe}),{handleMouseMove:C,x:I,y:R,opened:M,boundaryRef:P,floating:O,setOpened:F}=nGe({offset:p,position:m});if(!vy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=ls(P,r.ref,t),B=H=>{var D,z;(z=(D=r.props).onMouseEnter)==null||z.call(D,H),C(H),F(!0)},U=H=>{var D,z;(z=(D=r.props).onMouseLeave)==null||z.call(D,H),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(AI,{...E,withinPortal:s,children:_.jsx(Ee,{...S,...A("tooltip",{style:{...Qq(o,T),zIndex:y,display:!v&&M?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:O,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:L,onMouseEnter:B,onMouseLeave:U})]})});bG.classes=hL;bG.displayName="@mantine/core/TooltipFloating";const zbe=N.createContext(!1),sGe=zbe.Provider,oGe=()=>N.useContext(zbe),aGe={openDelay:0,closeDelay:0};function Vbe(e){const{openDelay:t,closeDelay:n,children:r}=Ae("TooltipGroup",aGe,e);return _.jsx(sGe,{value:!0,children:_.jsx(dze,{delay:{open:t,close:n},children:r})})}Vbe.displayName="@mantine/core/TooltipGroup";function uGe(e){var S,T,A;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=oGe(),o=Zu(),{delay:a,currentId:u,setCurrentId:l}=kve(),c=N.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=mW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Sve(e.offset),fW({padding:8}),cU(),Tve({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[fU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=bze([fze(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),vze(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),wze(h,{role:"tooltip"}),gze(h,{enabled:typeof e.opened>"u"}),hze(h,{id:o})]);Mve({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),um(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const toe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Nc("popover"),positionDependencies:[]},lGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:hi(t),"--tooltip-bg":n?ti(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Fa=je((e,t)=>{const n=Ae("Tooltip",toe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,offset:A,transitionProps:C,multiline:I,events:R,zIndex:M,disabled:P,positionDependencies:O,onClick:F,onMouseEnter:L,onMouseLeave:B,inline:U,variant:H,keepMounted:D,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=Ae("Tooltip",toe,n),{dir:ne}=Ph(),ce=N.useRef(null),de=uGe({position:Rve(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:ce,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...O,r],inline:U,strategy:q}),he=vt({name:"Tooltip",props:n,classes:hL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:lGe});if(!vy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=ls(de.reference,r.ref,t),Ie=tGe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(AI,{...W,withinPortal:f,children:_.jsx(jm,{...Ie,keepMounted:D,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:ve=>_.jsxs(Ee,{...G,variant:H,mod:[{multiline:I},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...ve,zIndex:M,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(gW,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,...he("arrow")})]})})}),N.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:L,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Ki(v,r.props.className),...r.props}))]})});Fa.classes=hL;Fa.displayName="@mantine/core/Tooltip";Fa.Floating=bG;Fa.Group=Vbe;var Hbe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const cGe={withItemsBorders:!0},fGe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:hi(t),"--sc-color":n?ti(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":yn(i,"sc-padding"),"--sc-font-size":oo(i)}}),_G=je((e,t)=>{var ne,ce;const n=Ae("SegmentedControl",cGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:S,variant:T,autoContrast:A,withItemsBorders:C,mod:I,...R}=n,M=vt({name:"SegmentedControl",props:n,classes:Hbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fGe}),P=Ms(),O=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=E9e(),[L,B]=N.useState(null),[U,H]=N.useState({}),D=(de,he)=>{U[he]=de,H(U)},[z,W]=Do({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=O.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Zu(p),q=O.map(de=>N.createElement(Ee,{...M("control"),mod:{active:z===de.value,orientation:v},key:de.value},N.createElement("input",{...M("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),N.createElement(Ee,{component:"label",...M("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>D(he,de.value),__vars:{"--sc-label-color":w!==void 0?_y({color:w,theme:P,autoContrast:A}):void 0},key:`${de.value}-label`},_.jsx("span",{...M("innerLabel"),children:de.label})))),G=ls(t,de=>B(de));return l.length===0?null:_.jsxs(Ee,{...M("root"),variant:T,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},I],...R,role:"radiogroup",children:[typeof z=="string"&&_.jsx(AW,{target:U[z],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...M("indicator")}),q]})});_G.classes=Hbe;_G.displayName="@mantine/core/SegmentedControl";const dGe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},PI=je((e,t)=>{const n=Ae("Select",dGe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,size:R,searchable:M,rightSection:P,checkIconPosition:O,withCheckIcon:F,nothingFoundMessage:L,name:B,form:U,searchValue:H,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ye,autoComplete:Ie,scrollAreaProps:ve,...Ke}=n,Ue=N.useMemo(()=>Jve(m),[m]),gt=N.useMemo(()=>OW(Ue),[Ue]),rt=Zu(G),[be,ke,ze]=Do({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof be=="string"?gt[be]:void 0,[Dt,We]=Do({value:H,defaultValue:D,finalValue:ct?ct.label:"",onChange:z}),me=qW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:dt,resolvedStyles:yt}=Mm({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&me.selectFirstOption()},[v,be]),N.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const pe=ne&&!!be&&!S&&!E&&_.jsx(Kn.ClearButton,{size:R,...ce,onClear:()=>{ke(null,null),We(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:me,__staticSelector:"Select",classNames:dt,styles:yt,unstyled:s,readOnly:E,onOptionSubmit:Ce=>{b==null||b(Ce);const He=W&&gt[Ce].value===be?null:gt[Ce],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),me.closeDropdown()},size:R,...w,children:[_.jsx(Kn.Target,{targetType:M?"input":"button",autoComplete:Ie,children:_.jsx(Oc,{id:rt,ref:t,rightSection:P||pe||_.jsx(Kn.Chevron,{size:R,error:j,unstyled:s}),rightSectionPointerEvents:q||(pe?"all":"none"),...Ke,size:R,__staticSelector:"Select",disabled:S,readOnly:E||!M,value:Dt,onChange:Ce=>{We(Ce.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:Ce=>{M&&me.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var He;M&&me.closeDropdown(),We(be!=null&&((He=gt[be])==null?void 0:He.label)||""),d==null||d(Ce)},onClick:Ce=>{M?me.openDropdown():me.toggleDropdown(),h==null||h(Ce)},classNames:dt,styles:yt,unstyled:s,pointer:!M,error:j})}),_.jsx(gbe,{data:Ue,hidden:E||S,filter:T,search:Dt,limit:A,hiddenWhenEmpty:!M||!L,withScrollArea:C,maxDropdownHeight:I,filterOptions:M&&(ct==null?void 0:ct.label)!==Dt,value:be,checkIconPosition:O,withCheckIcon:F,nothingFoundMessage:L,unstyled:s,labelId:Ke.label?`${rt}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:ve})]}),_.jsx(Kn.HiddenInput,{value:be,name:B,form:U,disabled:S,...de})]})});PI.classes={...Oc.classes,...Kn.classes};PI.displayName="@mantine/core/Select";const[qbe,pL]=_a("SliderProvider was not found in tree"),wG=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=pL();return _.jsx(Ee,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});wG.displayName="@mantine/core/SliderRoot";const mO=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=pL(),[b,w]=N.useState(!1),E=l||s||b||h&&p;return _.jsxs(Ee,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,_.jsx(jm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>_.jsx("div",{...v("label",{style:S}),children:i})})]})});mO.displayName="@mantine/core/SliderThumb";function gO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function hGe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Wbe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=pL();if(!e)return null;const u=e.map((l,c)=>N.createElement(Ee,{...a("markWrapper"),__vars:{"--mark-offset":`${gO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(Ee,{...a("mark"),mod:{filled:hGe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}Wbe.displayName="@mantine/core/SliderMarks";function EG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=pL();return _.jsx(_.Fragment,{children:_.jsx(Ee,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(Ee,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(Ee,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(Wbe,{...a,offset:i,disabled:r,inverted:s})]})})})}EG.displayName="@mantine/core/SliderTrack";function gU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function tc(e,t){return parseFloat(e.toFixed(t))}function Gbe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var mL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const pGe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},mGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":yn(t,"slider-size"),"--slider-color":n?ti(n,e):void 0,"--slider-radius":i===void 0?void 0:hi(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),gL=je((e,t)=>{const n=Ae("Slider",pGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:T,scale:A,inverted:C,className:I,style:R,vars:M,hiddenInputProps:P,...O}=n,F=vt({name:"Slider",props:n,classes:mL,classNames:r,className:I,styles:i,style:R,vars:M,varsResolver:mGe,unstyled:T}),{dir:L}=Ph(),[B,U]=N.useState(!1),[H,D]=Do({value:typeof s=="number"?zd(s,l,c):s,defaultValue:typeof h=="number"?zd(h,l,c):h,finalValue:zd(0,l,c),onChange:o}),z=N.useRef(H),W=N.useRef(),j=N.useRef(),q=gO({value:H,min:l,max:c}),G=A(H),ne=typeof g=="function"?g(G):g,ce=d??Gbe(f),de=N.useCallback(({x:ve})=>{if(!S){const Ke=gU({value:ve,min:l,max:c,step:f,precision:ce});D(Ke),z.current=Ke}},[S,l,c,f,ce,D]),{ref:he,active:ye}=U1e(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},L),Ie=ve=>{var Ke,Ue,gt,rt,be,ke;if(!S)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=tc(Math.min(Math.max(H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowRight":{ve.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=tc(Math.min(Math.max(L==="rtl"?H-f:H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowDown":{ve.preventDefault(),(gt=j.current)==null||gt.focus();const ze=tc(Math.min(Math.max(H-f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowLeft":{ve.preventDefault(),(rt=j.current)==null||rt.focus();const ze=tc(Math.min(Math.max(L==="rtl"?H+f:H-f,l),c),ce);D(ze),a==null||a(ze);break}case"Home":{ve.preventDefault(),(be=j.current)==null||be.focus(),D(l),a==null||a(l);break}case"End":{ve.preventDefault(),(ke=j.current)==null||ke.focus(),D(c),a==null||a(c);break}}};return _.jsx(qbe,{value:{getStyles:F},children:_.jsxs(wG,{...O,ref:ls(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:S,children:[_.jsx(EG,{inverted:C,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(mO,{max:c,min:l,value:G,position:q,dragging:ye,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});gL.classes=mL;gL.displayName="@mantine/core/Slider";function gGe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const yGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":yn(t,"slider-size"),"--slider-color":n?ti(n,e):void 0,"--slider-radius":i===void 0?void 0:hi(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),vGe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},yO=je((e,t)=>{const n=Ae("RangeSlider",vGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:A,disabled:C,unstyled:I,scale:R,inverted:M,className:P,style:O,vars:F,hiddenInputProps:L,...B}=n,U=vt({name:"Slider",props:n,classes:mL,classNames:r,className:P,styles:i,style:O,vars:F,varsResolver:yGe,unstyled:I}),{dir:H}=Ph(),[D,z]=N.useState(-1),[W,j]=N.useState(!1),[q,G]=Do({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=N.useRef(q),ce=N.useRef([]),de=N.useRef(void 0),he=[gO({value:q[0],min:l,max:c}),gO({value:q[1],min:l,max:c})],ye=p??Gbe(h),Ie=We=>{G(We),ne.current=We};N.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ve=(We,me,dt)=>{const yt=[...ne.current];yt[me]=We,me===0&&(We>yt[1]-(f-1e-9)&&(yt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(yt[me]=ne.current[me]),yt[1]-We>d&&(yt[1]=We+d)),me===1&&(We<yt[0]+f&&(yt[0]=Math.max(We-f,l)),We<yt[0]+f&&(yt[me]=ne.current[me]),We-yt[0]>d&&(yt[0]=We-d)),yt[0]=tc(yt[0],ye),yt[1]=tc(yt[1],ye),Ie(yt),dt&&(a==null||a(ne.current))},Ke=We=>{if(!C){const me=gU({value:We,min:l,max:c,step:h,precision:ye});ve(me,de.current,!1)}},{ref:Ue,active:gt}=U1e(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function rt(We){de.current=We}const be=We=>{Ue.current.focus();const me=Ue.current.getBoundingClientRect(),dt=gGe(We.nativeEvent),yt=gU({value:dt-me.left,max:c,min:l,step:h,containerWidth:me.width}),pe=Math.abs(q[0]-yt)>Math.abs(q[1]-yt)?1:0,Ce=H==="ltr"?pe:pe===1?0:1;de.current=Ce},ke=()=>D!==1&&D!==0?(z(0),0):D,ze=We=>{if(!C)switch(We.key){case"ArrowUp":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(H==="rtl"?ne.current[me]-h:ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(ne.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(H==="rtl"?ne.current[me]+h:ne.current[me]-h,l),c),ye),me,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Dt=Array.isArray(A);return _.jsx(qbe,{value:{getStyles:U},children:_.jsxs(wG,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(EG,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:M,min:l,max:c,value:q[1],disabled:C,containerProps:{ref:Ue,onMouseEnter:T?()=>j(!0):void 0,onMouseLeave:T?()=>j(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[_.jsx(mO,{...ct,value:R(q[0]),position:he[0],dragging:gt,label:typeof v=="function"?v(tc(R(q[0]),ye)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>rt(0),onFocus:()=>z(0),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[0]:A}),_.jsx(mO,{...ct,thumbLabel:S,value:R(q[1]),position:he[1],dragging:gt,label:typeof v=="function"?v(tc(R(q[1]),ye)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>rt(1),onFocus:()=>z(1),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...L}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...L})]})})});yO.classes=mL;yO.displayName="@mantine/core/RangeSlider";const bGe={},kf=je((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ae("Space",bGe,e);return _.jsx(Ee,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});kf.displayName="@mantine/core/Space";var Ybe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const _Ge={maxHeight:100,initialState:!1},wGe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),xG=je((e,t)=>{const n=Ae("Spoiler",_Ge,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=vt({name:"Spoiler",classes:Ybe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wGe}),b=Zu(g),w=`${b}-region`,[E,S]=N.useState(l),{ref:T,height:A}=m9e(),C=E?f:d,I=C!==null&&c<A;return _.jsxs(Ee,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&_.jsx(Sx,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Te(A):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:T,children:h})})]})});xG.classes=Ybe;xG.displayName="@mantine/core/Spoiler";var Kbe={root:"m_6d731127"};const EGe={gap:"md",align:"stretch",justify:"flex-start"},xGe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Il(t),"--stack-align":n,"--stack-justify":r}}),Mp=je((e,t)=>{const n=Ae("Stack",EGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=vt({name:"Stack",props:n,classes:Kbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xGe});return _.jsx(Ee,{ref:t,...p("root"),variant:d,...h})});Mp.classes=Kbe;Mp.displayName="@mantine/core/Stack";const[SGe,TGe]=_a("Table component was not found in the tree");var DI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function AGe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function bb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=je((i,s)=>{const o=Ae(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=TGe();return _.jsx(Ee,{component:e,ref:s,...AGe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=DI,r}const yU=bb("th",{columnBorder:!0}),Xbe=bb("td",{columnBorder:!0}),NP=bb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Qbe=bb("thead",{stickyHeader:!0}),Jbe=bb("tbody"),Zbe=bb("tfoot"),e_e=bb("caption",{captionSide:!0});function SG({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(e_e,{children:e.caption}),e.head&&_.jsx(Qbe,{children:_.jsx(NP,{children:e.head.map((t,n)=>_.jsx(yU,{children:t},n))})}),e.body&&_.jsx(Jbe,{children:e.body.map((t,n)=>_.jsx(NP,{children:t.map((r,i)=>_.jsx(Xbe,{children:r},i))},n))}),e.foot&&_.jsx(Zbe,{children:_.jsx(NP,{children:e.foot.map((t,n)=>_.jsx(yU,{children:t},n))})})]})}SG.displayName="@mantine/core/TableDataRenderer";const CGe={type:"scrollarea"},IGe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),TG=je((e,t)=>{const n=Ae("TableScrollContainer",CGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=vt({name:"TableScrollContainer",classes:DI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IGe,rootSelector:"scrollContainer"});return _.jsx(Ee,{component:f==="scrollarea"?Lm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});TG.classes=DI;TG.displayName="@mantine/core/TableScrollContainer";const kGe={withRowBorders:!0,verticalSpacing:7},RGe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Il(r),"--table-vertical-spacing":Il(i),"--table-border-color":s?ti(s,e):void 0,"--table-striped-color":u&&o?ti(o,e):void 0,"--table-highlight-on-hover-color":l&&a?ti(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),An=je((e,t)=>{const n=Ae("Table",kGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:S,children:T,stickyHeader:A,stickyHeaderOffset:C,mod:I,...R}=n,M=vt({name:"Table",props:n,className:i,style:s,classes:DI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:RGe});return _.jsx(SGe,{value:{getStyles:M,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(Ee,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},I],...M("table"),...R,children:T||!!S&&_.jsx(SG,{data:S})})})});An.classes=DI;An.displayName="@mantine/core/Table";An.Td=Xbe;An.Th=yU;An.Tr=NP;An.Thead=Qbe;An.Tbody=Jbe;An.Tfoot=Zbe;An.Caption=e_e;An.ScrollContainer=TG;An.DataRenderer=SG;const[NGe,AG]=_a("Tabs component was not found in the tree");var OI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const PGe={},CG=je((e,t)=>{const n=Ae("TabsList",PGe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=AG();return _.jsx(Ee,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});CG.classes=OI;CG.displayName="@mantine/core/TabsList";const DGe={},IG=je((e,t)=>{const n=Ae("TabsPanel",DGe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=AG(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(Ee,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});IG.classes=OI;IG.displayName="@mantine/core/TabsPanel";const OGe={},kG=je((e,t)=>{const n=Ae("TabsTab",OGe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Ms(),{dir:b}=Ph(),w=AG(),E=a===w.value,S=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},T={classNames:h,styles:p,props:n};return _.jsxs(Rs,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?ti(f,v):void 0},onKeyDown:D1e({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",T),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:s})]})});kG.classes=OI;kG.displayName="@mantine/core/TabsTab";const noe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",$Ge={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},MGe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":hi(t),"--tabs-color":ti(n,e),"--tabs-text-color":bx(r,e)?_y({color:n,theme:e,autoContrast:r}):void 0}}),ts=je((e,t)=>{const n=Ae("Tabs",$Ge,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:S,vars:T,autoContrast:A,mod:C,...I}=n,R=Zu(l),[M,P]=Do({value:i,defaultValue:r,finalValue:null,onChange:s}),O=vt({name:"Tabs",props:n,classes:OI,className:E,style:S,classNames:v,styles:b,unstyled:w,vars:T,varsResolver:MGe});return _.jsx(NGe,{value:{placement:g,value:M,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:rse(`${R}-tab`,noe),getPanelId:rse(`${R}-panel`,noe),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:O},children:_.jsx(Ee,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...O("root"),...I,children:a})})});ts.classes=OI;ts.displayName="@mantine/core/Tabs";ts.Tab=kG;ts.Panel=IG;ts.List=CG;const LGe={},lv=je((e,t)=>{const n=Ae("TextInput",LGe,e);return _.jsx(Oc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});lv.classes=Oc.classes;lv.displayName="@mantine/core/TextInput";const FGe=["h1","h2","h3","h4","h5","h6"];function jGe(e,t){const n=t!==void 0?t:`h${e}`;return FGe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var t_e={root:"m_8a5d1357"};const BGe={order:1},UGe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=jGe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ki=je((e,t)=>{const n=Ae("Title",BGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=vt({name:"Title",props:n,classes:t_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:UGe});return[1,2,3,4,5,6].includes(u)?_.jsx(Ee,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ki.classes=t_e;ki.displayName="@mantine/core/Title";const n_e=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),wa=()=>N.useContext(n_e);function zGe({children:e}){const[t,n]=Un.useState(void 0),r=Un.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(n_e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function JC(){return JC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JC.apply(this,arguments)}var Hg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Hg||(Hg={}));const roe="popstate";function VGe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return vU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:i_e(i)}return qGe(t,n,null,e)}function ss(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function r_e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function HGe(){return Math.random().toString(36).substr(2,8)}function ioe(e,t){return{usr:e.state,key:e.key,idx:t}}function vU(e,t,n,r){return n===void 0&&(n=null),JC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rx(t):t,{state:n,key:t&&t.key||r||HGe()})}function i_e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qGe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Hg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(JC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Hg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Hg.Push;let v=vU(m.location,g,y);l=c()+1;let b=ioe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Hg.Replace;let v=vU(m.location,g,y);l=c();let b=ioe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:i_e(g);return v=v.replace(/ $/,"%20"),ss(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(roe,f),u=g,()=>{i.removeEventListener(roe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var soe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(soe||(soe={}));function WGe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Rx(t):t,i=a_e(r.pathname||"/",n);if(i==null)return null;let s=s_e(e);GGe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=sYe(i);o=nYe(s[a],u)}return o}function s_e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ss(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=f0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ss(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),s_e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:eYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of o_e(s.path))i(s,o,u)}),t}function o_e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=o_e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function GGe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tYe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YGe=/^:[\w-]+$/,KGe=3,XGe=2,QGe=1,JGe=10,ZGe=-2,ooe=e=>e==="*";function eYe(e,t){let n=e.split("/"),r=n.length;return n.some(ooe)&&(r+=ZGe),t&&(r+=XGe),n.filter(i=>!ooe(i)).reduce((i,s)=>i+(YGe.test(s)?KGe:s===""?QGe:JGe),r)}function tYe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function nYe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=rYe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:f0([i,c.pathname]),pathnameBase:lYe(f0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=f0([i,c.pathnameBase]))}return s}function rYe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=iYe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function iYe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),r_e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function sYe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return r_e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function a_e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function oYe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Rx(e):e;return{pathname:n?n.startsWith("/")?n:aYe(n,t):t,search:cYe(r),hash:fYe(i)}}function aYe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function i8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uYe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function RG(e,t){let n=uYe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Rx(e):(i=JC({},e),ss(!i.pathname||!i.pathname.includes("?"),i8("?","pathname","search",i)),ss(!i.pathname||!i.pathname.includes("#"),i8("#","pathname","hash",i)),ss(!i.search||!i.search.includes("#"),i8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=oYe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const f0=e=>e.join("/").replace(/\/\/+/g,"/"),lYe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cYe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fYe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dYe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const u_e=["post","put","patch","delete"];new Set(u_e);const hYe=["get",...u_e];new Set(hYe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZC.apply(this,arguments)}const PG=N.createContext(null),pYe=N.createContext(null),_b=N.createContext(null),yL=N.createContext(null),$h=N.createContext({outlet:null,matches:[],isDataRoute:!1}),l_e=N.createContext(null);function c_e(e,t){let{relative:n}={};Nx()||ss(!1);let{basename:r,navigator:i}=N.useContext(_b),{hash:s,pathname:o,search:a}=vYe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:f0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Nx(){return N.useContext(yL)!=null}function wb(){return Nx()||ss(!1),N.useContext(yL).location}function f_e(e){N.useContext(_b).static||N.useLayoutEffect(e)}function Hm(){let{isDataRoute:e}=N.useContext($h);return e?kYe():mYe()}function mYe(){Nx()||ss(!1);let e=N.useContext(PG),{basename:t,future:n,navigator:r}=N.useContext(_b),{matches:i}=N.useContext($h),{pathname:s}=wb(),o=JSON.stringify(RG(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return f_e(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=NG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:f0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const gYe=N.createContext(null);function yYe(e){let t=N.useContext($h).outlet;return t&&N.createElement(gYe.Provider,{value:e},t)}function aE(){let{matches:e}=N.useContext($h),t=e[e.length-1];return t?t.params:{}}function vYe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(_b),{matches:i}=N.useContext($h),{pathname:s}=wb(),o=JSON.stringify(RG(i,r.v7_relativeSplatPath));return N.useMemo(()=>NG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function d_e(e,t){return bYe(e,t)}function bYe(e,t,n,r){Nx()||ss(!1);let{navigator:i}=N.useContext(_b),{matches:s}=N.useContext($h),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=wb(),c;if(t){var f;let g=typeof t=="string"?Rx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||ss(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=WGe(e,{pathname:h}),m=SYe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:f0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:f0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(yL.Provider,{value:{location:ZC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Hg.Pop}},m):m}function _Ye(){let e=IYe(),t=dYe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const wYe=N.createElement(_Ye,null);class EYe extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement($h.Provider,{value:this.props.routeContext},N.createElement(l_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xYe(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(PG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement($h.Provider,{value:t},r)}function SYe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ss(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||wYe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(xYe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(EYe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var h_e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(h_e||{}),vO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vO||{});function TYe(e){let t=N.useContext(PG);return t||ss(!1),t}function AYe(e){let t=N.useContext(pYe);return t||ss(!1),t}function CYe(e){let t=N.useContext($h);return t||ss(!1),t}function p_e(e){let t=CYe(),n=t.matches[t.matches.length-1];return n.route.id||ss(!1),n.route.id}function IYe(){var e;let t=N.useContext(l_e),n=AYe(vO.UseRouteError),r=p_e(vO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function kYe(){let{router:e}=TYe(h_e.UseNavigateStable),t=p_e(vO.UseNavigateStable),n=N.useRef(!1);return f_e(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ZC({fromRouteId:t},s)))},[e,t])}function DG(e){let{to:t,replace:n,state:r,relative:i}=e;Nx()||ss(!1);let{future:s,static:o}=N.useContext(_b),{matches:a}=N.useContext($h),{pathname:u}=wb(),l=Hm(),c=NG(t,RG(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function RYe(e){return yYe(e.context)}function pp(e){ss(!1)}function NYe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Hg.Pop,navigator:s,static:o=!1,future:a}=e;Nx()&&ss(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:ZC({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Rx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=a_e(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(_b.Provider,{value:l},N.createElement(yL.Provider,{children:n,value:m}))}function PYe(e){let{children:t,location:n}=e;return d_e(bU(t),n)}new Promise(()=>{});function bU(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,bU(r.props.children,s));return}r.type!==pp&&ss(!1),!r.props.index||!r.props.children||ss(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _U(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function DYe(e,t){let n=_U(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const OYe="6";try{window.__reactRouterVersion=OYe}catch{}const $Ye="startTransition",aoe=OD[$Ye];function MYe(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=VGe({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&aoe?aoe(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(NYe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var uoe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(uoe||(uoe={}));var loe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(loe||(loe={}));function OG(e){let t=N.useRef(_U(e)),n=N.useRef(!1),r=wb(),i=N.useMemo(()=>DYe(r.search,n.current?null:t.current),[r.search]),s=Hm(),o=N.useCallback((a,u)=>{const l=_U(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const $G=N.createContext(null);$G.displayName="@mantine/modals/ModalsContext";function LYe(){const e=N.useContext($G);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function FYe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=LYe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(Ee,{mb:"md",children:l}),_.jsxs(Os,{justify:"flex-end",...o,children:[_.jsx(Rn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Rn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[jYe,vL]=S9e("mantine-modals");vL("openModal");vL("closeModal");vL("closeAllModals");const wU=vL("openConfirmModal");function coe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function BYe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;coe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{coe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function UYe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function zYe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(BYe,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||BA();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||BA();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||BA();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);jYe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=UYe(g.props);return{modalProps:y,content:_.jsx(FYe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs($G.Provider,{value:d,children:[_.jsx(vs,{zIndex:Nc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VYe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...VYe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HYe=jr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var foe=jr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qYe=jr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WYe=jr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GYe=jr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YYe=jr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KYe=jr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XYe=jr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QYe=jr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var doe=jr("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JYe=jr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZYe=jr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eKe=jr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tKe=jr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nKe=jr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rKe=jr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iKe=jr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sKe=jr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oKe=jr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aKe=jr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uKe=jr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m_e=jr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g_e=jr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lKe=jr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y_e=jr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MG=jr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v_e=jr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cKe=jr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function b_e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Mh="/SumSifter/";function hoe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function __e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const fKe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,hKe={};function poe(e,t){return(hKe.jsx?dKe:fKe).test(e)}const pKe=/[ \t\n\f\r]/g;function mKe(e){return typeof e=="object"?e.type==="text"?moe(e.value):!1:moe(e)}function moe(e){return e.replace(pKe,"")===""}let $I=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};$I.prototype.property={};$I.prototype.normal={};$I.prototype.space=null;function w_e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new $I(n,r,t)}function e2(e){return e.toLowerCase()}let Mc=class{constructor(t,n){this.property=t,this.attribute=n}};Mc.prototype.space=null;Mc.prototype.boolean=!1;Mc.prototype.booleanish=!1;Mc.prototype.overloadedBoolean=!1;Mc.prototype.number=!1;Mc.prototype.commaSeparated=!1;Mc.prototype.spaceSeparated=!1;Mc.prototype.commaOrSpaceSeparated=!1;Mc.prototype.mustUseProperty=!1;Mc.prototype.defined=!1;let gKe=0;const pn=Eb(),hs=Eb(),E_e=Eb(),tt=Eb(),Qr=Eb(),_w=Eb(),ol=Eb();function Eb(){return 2**++gKe}const EU=Object.freeze(Object.defineProperty({__proto__:null,boolean:pn,booleanish:hs,commaOrSpaceSeparated:ol,commaSeparated:_w,number:tt,overloadedBoolean:E_e,spaceSeparated:Qr},Symbol.toStringTag,{value:"Module"})),s8=Object.keys(EU);class LG extends Mc{constructor(t,n,r,i){let s=-1;if(super(t,n),goe(this,"space",i),typeof r=="number")for(;++s<s8.length;){const o=s8[s];goe(this,s8[s],(r&EU[o])===EU[o])}}}LG.prototype.defined=!0;function goe(e,t,n){n&&(e[t]=n)}const yKe={}.hasOwnProperty;function Px(e){const t={},n={};let r;for(r in e.properties)if(yKe.call(e.properties,r)){const i=e.properties[r],s=new LG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[e2(r)]=r,n[e2(s.attribute)]=r}return new $I(t,n,e.space)}const x_e=Px({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),S_e=Px({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function T_e(e,t){return t in e?e[t]:t}function A_e(e,t){return T_e(e,t.toLowerCase())}const C_e=Px({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:A_e,properties:{xmlns:null,xmlnsXLink:null}}),I_e=Px({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:hs,ariaAutoComplete:null,ariaBusy:hs,ariaChecked:hs,ariaColCount:tt,ariaColIndex:tt,ariaColSpan:tt,ariaControls:Qr,ariaCurrent:null,ariaDescribedBy:Qr,ariaDetails:null,ariaDisabled:hs,ariaDropEffect:Qr,ariaErrorMessage:null,ariaExpanded:hs,ariaFlowTo:Qr,ariaGrabbed:hs,ariaHasPopup:null,ariaHidden:hs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Qr,ariaLevel:tt,ariaLive:null,ariaModal:hs,ariaMultiLine:hs,ariaMultiSelectable:hs,ariaOrientation:null,ariaOwns:Qr,ariaPlaceholder:null,ariaPosInSet:tt,ariaPressed:hs,ariaReadOnly:hs,ariaRelevant:null,ariaRequired:hs,ariaRoleDescription:Qr,ariaRowCount:tt,ariaRowIndex:tt,ariaRowSpan:tt,ariaSelected:hs,ariaSetSize:tt,ariaSort:null,ariaValueMax:tt,ariaValueMin:tt,ariaValueNow:tt,ariaValueText:null,role:null}}),vKe=Px({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:A_e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:_w,acceptCharset:Qr,accessKey:Qr,action:null,allow:null,allowFullScreen:pn,allowPaymentRequest:pn,allowUserMedia:pn,alt:null,as:null,async:pn,autoCapitalize:null,autoComplete:Qr,autoFocus:pn,autoPlay:pn,blocking:Qr,capture:null,charSet:null,checked:pn,cite:null,className:Qr,cols:tt,colSpan:null,content:null,contentEditable:hs,controls:pn,controlsList:Qr,coords:tt|_w,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pn,defer:pn,dir:null,dirName:null,disabled:pn,download:E_e,draggable:hs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pn,formTarget:null,headers:Qr,height:tt,hidden:pn,high:tt,href:null,hrefLang:null,htmlFor:Qr,httpEquiv:Qr,id:null,imageSizes:null,imageSrcSet:null,inert:pn,inputMode:null,integrity:null,is:null,isMap:pn,itemId:null,itemProp:Qr,itemRef:Qr,itemScope:pn,itemType:Qr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pn,low:tt,manifest:null,max:null,maxLength:tt,media:null,method:null,min:null,minLength:tt,multiple:pn,muted:pn,name:null,nonce:null,noModule:pn,noValidate:pn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pn,optimum:tt,pattern:null,ping:Qr,placeholder:null,playsInline:pn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pn,referrerPolicy:null,rel:Qr,required:pn,reversed:pn,rows:tt,rowSpan:tt,sandbox:Qr,scope:null,scoped:pn,seamless:pn,selected:pn,shadowRootClonable:pn,shadowRootDelegatesFocus:pn,shadowRootMode:null,shape:null,size:tt,sizes:null,slot:null,span:tt,spellCheck:hs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tt,step:null,style:null,tabIndex:tt,target:null,title:null,translate:null,type:null,typeMustMatch:pn,useMap:null,value:hs,width:tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Qr,axis:null,background:null,bgColor:null,border:tt,borderColor:null,bottomMargin:tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pn,declare:pn,event:null,face:null,frame:null,frameBorder:null,hSpace:tt,leftMargin:tt,link:null,longDesc:null,lowSrc:null,marginHeight:tt,marginWidth:tt,noResize:pn,noHref:pn,noShade:pn,noWrap:pn,object:null,profile:null,prompt:null,rev:null,rightMargin:tt,rules:null,scheme:null,scrolling:hs,standby:null,summary:null,text:null,topMargin:tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pn,disableRemotePlayback:pn,prefix:null,property:null,results:tt,security:null,unselectable:null}}),bKe=Px({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:T_e,properties:{about:ol,accentHeight:tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tt,amplitude:tt,arabicForm:null,ascent:tt,attributeName:null,attributeType:null,azimuth:tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tt,by:null,calcMode:null,capHeight:tt,className:Qr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tt,diffuseConstant:tt,direction:null,display:null,dur:null,divisor:tt,dominantBaseline:null,download:pn,dx:null,dy:null,edgeMode:null,editable:null,elevation:tt,enableBackground:null,end:null,event:null,exponent:tt,externalResourcesRequired:null,fill:null,fillOpacity:tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:_w,g2:_w,glyphName:_w,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tt,horizOriginX:tt,horizOriginY:tt,id:null,ideographic:tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tt,k:tt,k1:tt,k2:tt,k3:tt,k4:tt,kernelMatrix:ol,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tt,overlineThickness:tt,paintOrder:null,panose1:null,path:null,pathLength:tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Qr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tt,pointsAtY:tt,pointsAtZ:tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ol,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ol,rev:ol,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ol,requiredFeatures:ol,requiredFonts:ol,requiredFormats:ol,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tt,specularExponent:tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tt,strikethroughThickness:tt,string:null,stroke:null,strokeDashArray:ol,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tt,strokeOpacity:tt,strokeWidth:null,style:null,surfaceScale:tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ol,tabIndex:tt,tableValues:null,target:null,targetX:tt,targetY:tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ol,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tt,underlineThickness:tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tt,values:null,vAlphabetic:tt,vMathematical:tt,vectorEffect:null,vHanging:tt,vIdeographic:tt,version:null,vertAdvY:tt,vertOriginX:tt,vertOriginY:tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),_Ke=/^data[-\w.:]+$/i,yoe=/-[a-z]/g,wKe=/[A-Z]/g;function bL(e,t){const n=e2(t);let r=t,i=Mc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&_Ke.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(yoe,xKe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!yoe.test(s)){let o=s.replace(wKe,EKe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=LG}return new i(r,t)}function EKe(e){return"-"+e.toLowerCase()}function xKe(e){return e.charAt(1).toUpperCase()}const SKe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},MI=w_e([S_e,x_e,C_e,I_e,vKe],"html"),Ty=w_e([S_e,x_e,C_e,I_e,bKe],"svg");function voe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function k_e(e){return e.join(" ").trim()}var R_e={},boe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,TKe=/\n/g,AKe=/^\s*/,CKe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,IKe=/^:\s*/,kKe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,RKe=/^[;\s]*/,NKe=/^\s+|\s+$/g,PKe=`
`,_oe="/",woe="*",I1="",DKe="comment",OKe="declaration",$Ke=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(TKe);m&&(n+=m.length);var g=p.lastIndexOf(PKe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(AKe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(_oe!=e.charAt(0)||woe!=e.charAt(1))){for(var m=2;I1!=e.charAt(m)&&(woe!=e.charAt(m)||_oe!=e.charAt(m+1));)++m;if(m+=2,I1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:DKe,comment:g})}}function d(){var p=s(),m=u(CKe);if(m){if(f(),!u(IKe))return a("property missing ':'");var g=u(kKe),y=p({type:OKe,property:Eoe(m[0].replace(boe,I1)),value:g?Eoe(g[0].replace(boe,I1)):I1});return u(RKe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Eoe(e){return e?e.replace(NKe,I1):I1}var MKe=Js&&Js.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R_e,"__esModule",{value:!0});var LKe=MKe($Ke);function FKe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,LKe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var xoe=R_e.default=FKe;const jKe=xoe.default||xoe,_L=N_e("end"),Lh=N_e("start");function N_e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function BKe(e){const t=Lh(e),n=_L(e);if(t&&n)return{start:t,end:n}}function UA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Soe(e.position):"start"in e||"end"in e?Soe(e):"line"in e||"column"in e?xU(e):""}function xU(e){return Toe(e&&e.line)+":"+Toe(e&&e.column)}function Soe(e){return xU(e&&e.start)+"-"+xU(e&&e.end)}function Toe(e){return e&&typeof e=="number"?e:1}class Ea extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=UA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ea.prototype.file="";Ea.prototype.name="";Ea.prototype.reason="";Ea.prototype.message="";Ea.prototype.stack="";Ea.prototype.column=void 0;Ea.prototype.line=void 0;Ea.prototype.ancestors=void 0;Ea.prototype.cause=void 0;Ea.prototype.fatal=void 0;Ea.prototype.place=void 0;Ea.prototype.ruleId=void 0;Ea.prototype.source=void 0;const FG={}.hasOwnProperty,UKe=new Map,zKe=/[A-Z]/g,VKe=/-([a-z])/g,HKe=new Set(["table","tbody","thead","tfoot","tr"]),qKe=new Set(["td","th"]),P_e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function WKe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=eXe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=ZKe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ty:MI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=D_e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function D_e(e,t,n){if(t.type==="element")return GKe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return YKe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return XKe(e,t,n);if(t.type==="mdxjsEsm")return KKe(e,t);if(t.type==="root")return QKe(e,t,n);if(t.type==="text")return JKe(e,t)}function GKe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Ty,e.schema=i),e.ancestors.push(t);const s=$_e(e,t.tagName,!1),o=tXe(e,t);let a=BG(e,t);return HKe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!mKe(u):!0})),O_e(e,o,s,t),jG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function YKe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}t2(e,t.position)}function KKe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);t2(e,t.position)}function XKe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Ty,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:$_e(e,t.name,!0),o=nXe(e,t),a=BG(e,t);return O_e(e,o,s,t),jG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function QKe(e,t,n){const r={};return jG(r,BG(e,t)),e.create(t,e.Fragment,r,n)}function JKe(e,t){return t.value}function O_e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function jG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function ZKe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function eXe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Lh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function tXe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&FG.call(t.properties,i)){const s=rXe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&qKe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function nXe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else t2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else t2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function BG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:UKe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=D_e(e,s,o);a!==void 0&&n.push(a)}return n}function rXe(e,t,n){const r=bL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?__e(n):k_e(n)),r.property==="style"){let i=typeof n=="object"?n:iXe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=sXe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?SKe[r.property]||r.property:r.attribute,n]}}function iXe(e,t){const n={};try{jKe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ea("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=P_e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(VKe,aXe)),n[o]=s}}function $_e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=poe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=poe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return FG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);t2(e)}function t2(e,t){const n=new Ea("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=P_e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function sXe(e){const t={};let n;for(n in e)FG.call(e,n)&&(t[oXe(n)]=e[n]);return t}function oXe(e){let t=e.replace(zKe,uXe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function aXe(e,t){return t.toUpperCase()}function uXe(e){return"-"+e.toLowerCase()}const o8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},lXe={};function cXe(e,t){const n=lXe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return M_e(e,r,i)}function M_e(e,t,n){if(fXe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Aoe(e.children,t,n)}return Array.isArray(e)?Aoe(e,t,n):""}function Aoe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=M_e(e[i],t,n);return r.join("")}function fXe(e){return!!(e&&typeof e=="object")}const Coe=document.createElement("i");function UG(e){const t="&"+e+";";Coe.innerHTML=t;const n=Coe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function hm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function sc(e,t){return e.length>0?(hm(e,e.length,0,t),e):t}const Ioe={}.hasOwnProperty;function dXe(e){const t={};let n=-1;for(;++n<e.length;)hXe(t,e[n]);return t}function hXe(e,t){let n;for(n in t){const i=(Ioe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Ioe.call(i,o)||(i[o]=[]);const a=s[o];pXe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function pXe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);hm(e,0,0,r)}function L_e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ww(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Rd=Ay(/[A-Za-z]/),vl=Ay(/[\dA-Za-z]/),mXe=Ay(/[#-'*+\--9=?A-Z^-~]/);function SU(e){return e!==null&&(e<32||e===127)}const TU=Ay(/\d/),gXe=Ay(/[\dA-Fa-f]/),yXe=Ay(/[!-/:-@[-`{-~]/);function Zt(e){return e!==null&&e<-2}function Mu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const vXe=Ay(new RegExp("\\p{P}|\\p{S}","u")),bXe=Ay(/\s/);function Ay(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Dx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&vl(e.charCodeAt(n+1))&&vl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ei(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const _Xe={tokenize:wXe};function wXe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ei(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Zt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const EXe={tokenize:xXe},koe={tokenize:SXe};function xXe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return hm(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(koe,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(koe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Zt(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let A=T,C,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){I=t.events[A][1].end;break}C=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;hm(t.events,A+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function SXe(e,t,n){return ei(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Roe(e){if(e===null||Mu(e)||bXe(e))return 1;if(vXe(e))return 2}function zG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const AU={name:"attention",tokenize:AXe,resolveAll:TXe};function TXe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Noe(f,-u),Noe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=sc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=sc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=sc(l,zG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=sc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=sc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,hm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function AXe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Roe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Roe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Noe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const CXe={name:"autolink",tokenize:IXe};function IXe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Rd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||vl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||vl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||SU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):mXe(h)?(e.consume(h),l):n(h)}function c(h){return vl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||vl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const wL={tokenize:kXe,partial:!0};function kXe(e,t,n){return r;function r(s){return br(s)?ei(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Zt(s)?t(s):n(s)}}const F_e={name:"blockQuote",tokenize:RXe,continuation:{tokenize:NXe},exit:PXe};function RXe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function NXe(e,t,n){const r=this;return i;function i(o){return br(o)?ei(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(F_e,t,n)(o)}}function PXe(e){e.exit("blockQuote")}const j_e={name:"characterEscape",tokenize:DXe};function DXe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return yXe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const B_e={name:"characterReference",tokenize:OXe};function OXe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=vl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=gXe,c):(e.enter("characterReferenceValue"),s=7,o=TU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===vl&&!UG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Poe={tokenize:MXe,partial:!0},Doe={name:"codeFenced",tokenize:$Xe,concrete:!0};function $Xe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),br(S)?ei(e,f,"whitespace")(S):f(S))}function f(S){return S===null||Zt(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Poe,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||Zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):br(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ei(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||Zt(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&br(S)?ei(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||Zt(S)?e.check(Poe,m,w)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||Zt(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,T,A){let C=0;return I;function I(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),R}function R(F){return S.enter("codeFencedFence"),br(F)?ei(S,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):M(F)}function M(F){return F===a?(S.enter("codeFencedFenceSequence"),P(F)):A(F)}function P(F){return F===a?(C++,S.consume(F),P):C>=o?(S.exit("codeFencedFenceSequence"),br(F)?ei(S,O,"whitespace")(F):O(F)):A(F)}function O(F){return F===null||Zt(F)?(S.exit("codeFencedFence"),T(F)):A(F)}}}function MXe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const a8={name:"codeIndented",tokenize:FXe},LXe={tokenize:jXe,partial:!0};function FXe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ei(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Zt(l)?e.attempt(LXe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Zt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function jXe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ei(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Zt(o)?i(o):n(o)}}const BXe={name:"codeText",tokenize:VXe,resolve:UXe,previous:zXe};function UXe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function zXe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function VXe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class HXe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&KS(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),KS(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),KS(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);KS(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);KS(this.left,n.reverse())}}}function KS(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function U_e(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new HXe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,qXe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return hm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function qXe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const WXe={tokenize:KXe,resolve:YXe},GXe={tokenize:XXe,partial:!0};function YXe(e){return U_e(e),e}function KXe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Zt(a)?e.check(GXe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function XXe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ei(e,s,"linePrefix")}function s(o){if(o===null||Zt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function z_e(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||SU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Mu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||SU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function V_e(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function H_e(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ei(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function zA(e,t){let n;return r;function r(i){return Zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?ei(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const QXe={name:"definition",tokenize:ZXe},JXe={tokenize:eQe,partial:!0};function ZXe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return V_e.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=ww(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Mu(h)?zA(e,l)(h):l(h)}function l(h){return z_e(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(JXe,f,f)(h)}function f(h){return br(h)?ei(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Zt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function eQe(e,t,n){return r;function r(a){return Mu(a)?zA(e,i)(a):n(a)}function i(a){return H_e(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?ei(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Zt(a)?t(a):n(a)}}const tQe={name:"hardBreakEscape",tokenize:nQe};function nQe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Zt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const rQe={name:"headingAtx",tokenize:sQe,resolve:iQe};function iQe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},hm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function sQe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Mu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Zt(c)?(e.exit("atxHeading"),t(c)):br(c)?ei(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Mu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const oQe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Ooe=["pre","script","style","textarea"],aQe={name:"htmlFlow",tokenize:fQe,resolveTo:cQe,concrete:!0},uQe={tokenize:hQe,partial:!0},lQe={tokenize:dQe,partial:!0};function cQe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function fQe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):Rd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Rd(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:M:p):n(j)}function m(j){return Rd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Mu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&Ooe.includes(G)?(i=1,r.interrupt?t(j):M(j)):oQe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):M(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||vl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:M):n(j)}function v(j){return br(j)?(e.consume(j),v):I(j)}function b(j){return j===47?(e.consume(j),I):j===58||j===95||Rd(j)?(e.consume(j),w):br(j)?(e.consume(j),b):I(j)}function w(j){return j===45||j===46||j===58||j===95||vl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):br(j)?(e.consume(j),E):b(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,T):br(j)?(e.consume(j),S):A(j)}function T(j){return j===u?(e.consume(j),u=null,C):j===null||Zt(j)?n(j):(e.consume(j),T)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Mu(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||br(j)?b(j):n(j)}function I(j){return j===62?(e.consume(j),R):n(j)}function R(j){return j===null||Zt(j)?M(j):br(j)?(e.consume(j),R):n(j)}function M(j){return j===45&&i===2?(e.consume(j),L):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),H):Zt(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(uQe,W,P)(j)):j===null||Zt(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),M)}function P(j){return e.check(lQe,O,W)(j)}function O(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||Zt(j)?P(j):(e.enter("htmlFlowData"),M(j))}function L(j){return j===45?(e.consume(j),D):M(j)}function B(j){return j===47?(e.consume(j),o="",U):M(j)}function U(j){if(j===62){const q=o.toLowerCase();return Ooe.includes(q)?(e.consume(j),z):M(j)}return Rd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):M(j)}function H(j){return j===93?(e.consume(j),D):M(j)}function D(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),D):M(j)}function z(j){return j===null||Zt(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function dQe(e,t,n){const r=this;return i;function i(o){return Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function hQe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(wL,t,n)}}const pQe={name:"htmlText",tokenize:mQe};function mQe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):Rd(D)?(e.consume(D),A):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):Rd(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):Zt(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?L(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):Zt(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?L(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?L(D):Zt(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):Zt(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?L(D):b(D)}function E(D){return Rd(D)?(e.consume(D),S):n(D)}function S(D){return D===45||vl(D)?(e.consume(D),S):T(D)}function T(D){return Zt(D)?(o=T,B(D)):br(D)?(e.consume(D),T):L(D)}function A(D){return D===45||vl(D)?(e.consume(D),A):D===47||D===62||Mu(D)?C(D):n(D)}function C(D){return D===47?(e.consume(D),L):D===58||D===95||Rd(D)?(e.consume(D),I):Zt(D)?(o=C,B(D)):br(D)?(e.consume(D),C):L(D)}function I(D){return D===45||D===46||D===58||D===95||vl(D)?(e.consume(D),I):R(D)}function R(D){return D===61?(e.consume(D),M):Zt(D)?(o=R,B(D)):br(D)?(e.consume(D),R):C(D)}function M(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):Zt(D)?(o=M,B(D)):br(D)?(e.consume(D),M):(e.consume(D),O)}function P(D){return D===i?(e.consume(D),i=void 0,F):D===null?n(D):Zt(D)?(o=P,B(D)):(e.consume(D),P)}function O(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Mu(D)?C(D):(e.consume(D),O)}function F(D){return D===47||D===62||Mu(D)?C(D):n(D)}function L(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return br(D)?ei(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):H(D)}function H(D){return e.enter("htmlTextData"),o(D)}}const VG={name:"labelEnd",tokenize:wQe,resolveTo:_Qe,resolveAll:bQe},gQe={tokenize:EQe},yQe={tokenize:xQe},vQe={tokenize:SQe};function bQe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function _Qe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=sc(a,e.slice(s+1,s+r+3)),a=sc(a,[["enter",c,t]]),a=sc(a,zG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=sc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=sc(a,e.slice(o+1)),a=sc(a,[["exit",u,t]]),hm(e,s,e.length,a),e}function wQe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(ww(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(gQe,c,o?c:f)(d):d===91?e.attempt(yQe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(vQe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function EQe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Mu(f)?zA(e,s)(f):s(f)}function s(f){return f===41?c(f):z_e(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Mu(f)?zA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?H_e(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Mu(f)?zA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function xQe(e,t,n){const r=this;return i;function i(a){return V_e.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ww(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function SQe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const TQe={name:"labelStartImage",tokenize:AQe,resolveAll:VG.resolveAll};function AQe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const CQe={name:"labelStartLink",tokenize:IQe,resolveAll:VG.resolveAll};function IQe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const u8={name:"lineEnding",tokenize:kQe};function kQe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ei(e,t,"linePrefix")}}const PP={name:"thematicBreak",tokenize:RQe};function RQe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Zt(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?ei(e,a,"whitespace")(l):a(l))}}const fu={name:"list",tokenize:DQe,continuation:{tokenize:OQe},exit:MQe},NQe={tokenize:LQe,partial:!0},PQe={tokenize:$Qe,partial:!0};function DQe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:TU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(PP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return TU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(wL,r.interrupt?n:c,e.attempt(NQe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function OQe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(wL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ei(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(PQe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ei(e,e.attempt(fu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function $Qe(e,t,n){const r=this;return ei(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function MQe(e){e.exit(this.containerState.type)}function LQe(e,t,n){const r=this;return ei(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const $oe={name:"setextUnderline",tokenize:jQe,resolveTo:FQe};function FQe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function jQe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?ei(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Zt(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const BQe={tokenize:UQe};function UQe(e){const t=this,n=e.attempt(wL,r,e.attempt(this.parser.constructs.flowInitial,i,ei(e,e.attempt(this.parser.constructs.flow,i,e.attempt(WXe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const zQe={resolveAll:W_e()},VQe=q_e("string"),HQe=q_e("text");function q_e(e){return{tokenize:t,resolveAll:W_e(e==="text"?qQe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function W_e(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function qQe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function WQe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:T(E),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=sc(o,R),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=zG(s,l.events,l),l.events)}function d(R,M){return YQe(h(R),M)}function h(R){return GQe(o,R)}function p(){const{line:R,column:M,offset:P,_index:O,_bufferIndex:F}=r;return{line:R,column:M,offset:P,_index:O,_bufferIndex:F}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const M=o[r._index];if(typeof M=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<M.length;)y(M.charCodeAt(r._bufferIndex));else y(M)}}function y(R){c=c(R)}function v(R){Zt(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,M){const P=M||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(R){const M=a.pop();return M.end=p(),l.events.push(["exit",M,l]),M}function E(R,M){A(R,M.from)}function S(R,M){M.restore()}function T(R,M){return P;function P(O,F,L){let B,U,H,D;return Array.isArray(O)?W(O):"tokenize"in O?W([O]):z(O);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ye=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?L:j(ne[U])}function j(ne){return ce;function ce(de){return D=C(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(M?Object.assign(Object.create(l),M):l,u,q,G)(de)}}function q(ne){return R(H,D),F}function G(ne){return D.restore(),++U<B.length?j(B[U]):L}}}function A(R,M){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&hm(l.events,M,l.events.length-M,R.resolve(l.events.slice(M),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function C(){const R=p(),M=l.previous,P=l.currentConstruct,O=l.events.length,F=Array.from(a);return{restore:L,from:O};function L(){r=R,l.previous=M,l.currentConstruct=P,l.events.length=O,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function GQe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function YQe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const KQe={42:fu,43:fu,45:fu,48:fu,49:fu,50:fu,51:fu,52:fu,53:fu,54:fu,55:fu,56:fu,57:fu,62:F_e},XQe={91:QXe},QQe={[-2]:a8,[-1]:a8,32:a8},JQe={35:rQe,42:PP,45:[$oe,PP],60:aQe,61:$oe,95:PP,96:Doe,126:Doe},ZQe={38:B_e,92:j_e},eJe={[-5]:u8,[-4]:u8,[-3]:u8,33:TQe,38:B_e,42:AU,60:[CXe,pQe],91:CQe,92:[tQe,j_e],93:VG,95:AU,96:BXe},tJe={null:[AU,zQe]},nJe={null:[42,95]},rJe={null:[]},iJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:nJe,contentInitial:XQe,disable:rJe,document:KQe,flow:JQe,flowInitial:QQe,insideSpan:tJe,string:ZQe,text:eJe},Symbol.toStringTag,{value:"Module"}));function sJe(e){const n=dXe([iJe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(_Xe),document:i(EXe),flow:i(BQe),string:i(VQe),text:i(HQe)};return r;function i(s){return o;function o(a){return WQe(r,s,a)}}}function oJe(e){for(;!U_e(e););return e}const Moe=/[\0\t\n\r]/g;function aJe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Moe.lastIndex=f,l=Moe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const uJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function lJe(e){return e.replace(uJe,cJe)}function cJe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return L_e(n.slice(s?2:1),s?16:10)}return UG(n)||e}const G_e={}.hasOwnProperty;function fJe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),dJe(n)(oJe(sJe(n).document().write(aJe()(e,t,!0))))}function dJe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(gt),blockQuote:s(ye),characterEscape:C,characterReference:C,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(ve,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(rt),hardBreakTrailing:s(rt),htmlFlow:s(be,o),htmlFlowData:C,htmlText:s(be,o),htmlTextData:C,image:s(ke),label:o,link:s(ze),listItem:s(Dt),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(gt),strong:s(me),thematicBreak:s(yt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(F),codeTextData:I,data:I,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u(P),htmlFlowData:I,htmlText:u(O),htmlTextData:I,image:u(B),label:H,labelText:U,lineEnding:R,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:D,resourceTitleString:z,resource:W,setextHeading:u(A),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};Y_e(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ce={type:"root",children:[]};const He={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Mn=ut.pop();_t=i(pe,Mn,_t)}for(_t=-1;++_t<pe.length;){const Mn=t[pe[_t][0]];G_e.call(Mn,pe[_t][1].type)&&Mn[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},He),pe[_t][1])}if(He.tokenStack.length>0){const Mn=He.tokenStack[He.tokenStack.length-1];(Mn[1]||Loe).call(He,void 0,Mn[0])}for(Ce.position={start:fg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:fg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(pe,Ce,He){let ut=Ce-1,_t=-1,Mn=!1,Tr,Ln,cr,hn;for(;++ut<=He;){const Sn=pe[ut];switch(Sn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Sn[0]==="enter"?_t++:_t--,hn=void 0;break}case"lineEndingBlank":{Sn[0]==="enter"&&(Tr&&!hn&&!_t&&!cr&&(cr=ut),hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:hn=void 0}if(!_t&&Sn[0]==="enter"&&Sn[1].type==="listItemPrefix"||_t===-1&&Sn[0]==="exit"&&(Sn[1].type==="listUnordered"||Sn[1].type==="listOrdered")){if(Tr){let nr=ut;for(Ln=void 0;nr--;){const rr=pe[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Ln&&(pe[Ln][1].type="lineEndingBlank",Mn=!0),rr[1].type="lineEnding",Ln=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Ln||cr<Ln)&&(Tr._spread=!0),Tr.end=Object.assign({},Ln?pe[Ln][1].start:Sn[1].end),pe.splice(Ln||ut,0,["exit",Tr,Sn[2]]),ut++,He++}if(Sn[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},Sn[1].start),end:void 0};Tr=nr,pe.splice(ut,0,["enter",nr,Sn[2]]),ut++,He++,cr=void 0,hn=!0}}}return pe[Ce][1]._spread=Mn,He}function s(pe,Ce){return He;function He(ut){a.call(this,pe(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ce,He){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ce,He]),pe.position={start:fg(Ce.start),end:void 0}}function u(pe){return Ce;function Ce(He){pe&&pe.call(this,He),l.call(this,He)}}function l(pe,Ce){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ce?Ce.call(this,pe,ut[0]):(ut[1]||Loe).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+UA({start:pe.start,end:pe.end})+"): its not open");He.position.end=fg(pe.end)}function c(){return cXe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=pe}function p(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=ww(this.sliceSerialize(pe)).toLowerCase()}function b(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function w(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function E(pe){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const He=this.sliceSerialize(pe).length;Ce.depth=He}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(pe){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(pe){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=dt(),ut.position={start:fg(pe.start),end:void 0},He.push(ut)),this.stack.push(ut)}function I(pe){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(pe),Ce.position.end=fg(pe.end)}function R(pe){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ce.children[Ce.children.length-1];He.position.end=fg(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(C.call(this,pe),I.call(this,pe))}function M(){this.data.atHardBreak=!0}function P(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function O(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function F(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function L(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function U(pe){const Ce=this.sliceSerialize(pe),He=this.stack[this.stack.length-2];He.label=lJe(Ce),He.identifier=ww(Ce).toLowerCase()}function H(){const pe=this.stack[this.stack.length-1],Ce=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=pe.children;He.children=ut}else He.alt=Ce}function D(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function z(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=ww(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ce=this.sliceSerialize(pe),He=this.data.characterReferenceType;let ut;He?(ut=L_e(Ce,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=UG(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ce=this.stack.pop();Ce.position.end=fg(pe.end)}function de(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(pe)}function he(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(pe)}function ye(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function gt(){return{type:"heading",depth:0,children:[]}}function rt(){return{type:"break"}}function be(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Dt(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function me(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function yt(){return{type:"thematicBreak"}}}function fg(e){return{line:e.line,column:e.column,offset:e.offset}}function Y_e(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Y_e(e,r):hJe(e,r)}}function hJe(e,t){let n;for(n in t)if(G_e.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Loe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+UA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+UA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+UA({start:t.start,end:t.end})+") is still open")}function pJe(e){const t=this;t.parser=n;function n(r){return fJe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function mJe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function gJe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function yJe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function vJe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bJe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function _Je(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Dx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function wJe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function EJe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function K_e(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function xJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return K_e(e,t);const i={src:Dx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function SJe(e,t){const n={src:Dx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function TJe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function AJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return K_e(e,t);const i={href:Dx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function CJe(e,t){const n={href:Dx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function IJe(e,t,n){const r=e.all(t),i=n?kJe(n):X_e(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function kJe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=X_e(n[r])}return t}function X_e(e){const t=e.spread;return t??e.children.length>1}function RJe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function NJe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function PJe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function DJe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function OJe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Lh(t.children[1]),u=_L(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function $Je(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function MJe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Foe=9,joe=32;function LJe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Boe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Boe(t.slice(i),i>0,!1)),s.join("")}function Boe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Foe||s===joe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Foe||s===joe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function FJe(e,t){const n={type:"text",value:LJe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function jJe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const BJe={blockquote:mJe,break:gJe,code:yJe,delete:vJe,emphasis:bJe,footnoteReference:_Je,heading:wJe,html:EJe,imageReference:xJe,image:SJe,inlineCode:TJe,linkReference:AJe,link:CJe,listItem:IJe,list:RJe,paragraph:NJe,root:PJe,strong:DJe,table:OJe,tableCell:MJe,tableRow:$Je,text:FJe,thematicBreak:jJe,toml:KR,yaml:KR,definition:KR,footnoteDefinition:KR};function KR(){}const Q_e=-1,EL=0,bO=1,_O=2,HG=3,qG=4,WG=5,GG=6,J_e=7,Z_e=8,Uoe=typeof self=="object"?self:globalThis,UJe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case EL:case Q_e:return n(o,i);case bO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case _O:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case HG:return n(new Date(o),i);case qG:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case WG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case GG:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case J_e:{const{name:a,message:u}=o;return n(new Uoe[a](u),i)}case Z_e:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Uoe[s](o),i)};return r},zoe=e=>UJe(new Map,e)(0),s_="",{toString:zJe}={},{keys:VJe}=Object,XS=e=>{const t=typeof e;if(t!=="object"||!e)return[EL,t];const n=zJe.call(e).slice(8,-1);switch(n){case"Array":return[bO,s_];case"Object":return[_O,s_];case"Date":return[HG,s_];case"RegExp":return[qG,s_];case"Map":return[WG,s_];case"Set":return[GG,s_]}return n.includes("Array")?[bO,n]:n.includes("Error")?[J_e,n]:[_O,n]},XR=([e,t])=>e===EL&&(t==="function"||t==="symbol"),HJe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=XS(o);switch(a){case EL:{let c=o;switch(u){case"bigint":a=Z_e,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Q_e],o)}return i([a,c],o)}case bO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case _O:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of VJe(o))(e||!XR(XS(o[d])))&&c.push([s(d),s(o[d])]);return f}case HG:return i([a,o.toISOString()],o);case qG:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case WG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(XR(XS(d))||XR(XS(h))))&&c.push([s(d),s(h)]);return f}case GG:{const c=[],f=i([a,c],o);for(const d of o)(e||!XR(XS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Voe=(e,{json:t,lossy:n}={})=>{const r=[];return HJe(!(t||n),!!t,new Map,r)(e),r},uE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?zoe(Voe(e,t)):structuredClone(e):(e,t)=>zoe(Voe(e,t));function qJe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function WJe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function GJe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||qJe,r=e.options.footnoteBackLabel||WJe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=Dx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const ewe=function(e){if(e==null)return QJe;if(typeof e=="function")return xL(e);if(typeof e=="object")return Array.isArray(e)?YJe(e):KJe(e);if(typeof e=="string")return XJe(e);throw new Error("Expected function, string, or object as test")};function YJe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ewe(e[n]);return xL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function KJe(e){const t=e;return xL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function XJe(e){return xL(t);function t(n){return n&&n.type===e}}function xL(e){return t;function t(n,r,i){return!!(JJe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function QJe(){return!0}function JJe(e){return e!==null&&typeof e=="object"&&"type"in e}const twe=[],ZJe=!0,Hoe=!1,eZe="skip";function tZe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ewe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=twe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=nZe(n(u,c)),h[0]===Hoe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==eZe)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Hoe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function nZe(e){return Array.isArray(e)?e:typeof e=="number"?[ZJe,e]:e==null?twe:[e]}function YG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),tZe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const CU={}.hasOwnProperty,rZe={};function iZe(e,t){const n=t||rZe,r=new Map,i=new Map,s=new Map,o={...BJe,...n.handlers},a={all:l,applyData:oZe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:sZe,wrap:uZe};return YG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(CU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=uE(g);return y.children=a.all(c),y}return uE(c)}return(a.options.unknownHandler||aZe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=qoe(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=qoe(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function sZe(e,t){e.position&&(t.position=BKe(e))}function oZe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function aZe(e,t){const n=t.data||{},r="value"in t&&!(CU.call(n,"hProperties")||CU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function uZe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function qoe(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Woe(e,t){const n=iZe(e,t),r=n.one(e,void 0),i=GJe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function lZe(e,t){return e&&"run"in e?async function(n,r){const i=Woe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Woe(n,{file:r,...t||e})}}function Goe(e){if(e)throw e}var DP=Object.prototype.hasOwnProperty,nwe=Object.prototype.toString,Yoe=Object.defineProperty,Koe=Object.getOwnPropertyDescriptor,Xoe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):nwe.call(t)==="[object Array]"},Qoe=function(t){if(!t||nwe.call(t)!=="[object Object]")return!1;var n=DP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&DP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||DP.call(t,i)},Joe=function(t,n){Yoe&&n.name==="__proto__"?Yoe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Zoe=function(t,n){if(n==="__proto__")if(DP.call(t,n)){if(Koe)return Koe(t,n).value}else return;return t[n]},cZe=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Zoe(a,n),i=Zoe(t,n),a!==i&&(c&&i&&(Qoe(i)||(s=Xoe(i)))?(s?(s=!1,o=r&&Xoe(r)?r:[]):o=r&&Qoe(r)?r:{},Joe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Joe(a,{name:n,newValue:i}));return a};const l8=Ul(cZe);function IU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function fZe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?dZe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function dZe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const _d={basename:hZe,dirname:pZe,extname:mZe,join:gZe,sep:"/"};function hZe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');LI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function pZe(e){if(LI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function mZe(e){LI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function gZe(...e){let t=-1,n;for(;++t<e.length;)LI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":yZe(n)}function yZe(e){LI(e);const t=e.codePointAt(0)===47;let n=vZe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function vZe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function LI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const bZe={cwd:_Ze};function _Ze(){return"/"}function kU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function wZe(e){if(typeof e=="string")e=new URL(e);else if(!kU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return EZe(e)}function EZe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const c8=["history","path","basename","stem","extname","dirname"];class rwe{constructor(t){let n;t?kU(t)?n={path:t}:typeof t=="string"||xZe(t)?n={value:t}:n=t:n={},this.cwd=bZe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<c8.length;){const s=c8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)c8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?_d.basename(this.path):void 0}set basename(t){d8(t,"basename"),f8(t,"basename"),this.path=_d.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?_d.dirname(this.path):void 0}set dirname(t){eae(this.basename,"dirname"),this.path=_d.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?_d.extname(this.path):void 0}set extname(t){if(f8(t,"extname"),eae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_d.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){kU(t)&&(t=wZe(t)),d8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?_d.basename(this.path,this.extname):void 0}set stem(t){d8(t,"stem"),f8(t,"stem"),this.path=_d.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ea(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function f8(e,t){if(e&&e.includes(_d.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+_d.sep+"`")}function d8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function eae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function xZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const SZe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},TZe={}.hasOwnProperty;class KG extends SZe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=fZe()}copy(){const t=new KG;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(l8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(m8("data",this.frozen),this.namespace[t]=n,this):TZe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(m8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=QR(t),r=this.parser||this.Parser;return h8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),h8("process",this.parser||this.Parser),p8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=QR(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);IZe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),h8("processSync",this.parser||this.Parser),p8("processSync",this.compiler||this.Compiler),this.process(t,i),nae("processSync","process",n),r;function i(s,o){n=!0,Goe(s),r=o}}run(t,n,r){tae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=QR(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),nae("runSync","run",r),i;function s(o,a){Goe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=QR(n),i=this.compiler||this.Compiler;return p8("stringify",i),tae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(m8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=l8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];IU(m)&&IU(h)&&(h=l8(!0,m,h)),r[d]=[l,h,...p]}}}}const AZe=new KG().freeze();function h8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function p8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function m8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tae(e){if(!IU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function nae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function QR(e){return CZe(e)?e:new rwe(e)}function CZe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function IZe(e){return typeof e=="string"||kZe(e)}function kZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const RZe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",rae=[],iae={allowDangerousHtml:!0},NZe=/^(https?|ircs?|mailto|xmpp)$/i,PZe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function DZe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||rae,u=e.remarkPlugins||rae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...iae}:iae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||OZe,h=AZe().use(pJe).use(u).use(lZe,l).use(a),p=new rwe;typeof r=="string"&&(p.value=r);for(const v of PZe)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+RZe+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),YG(g,y),WKe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in o8)if(Object.hasOwn(o8,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],T=o8[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function OZe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||NZe.test(e.slice(0,t))?e:""}const sae=/[#.]/g;function $Ze(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){sae.lastIndex=i;const a=sae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const MZe=new Set(["button","menu","reset","submit"]),RU={}.hasOwnProperty;function iwe(e,t,n){const r=n&&BZe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=$Ze(s,t),l.tagName=l.tagName.toLowerCase(),r&&RU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),LZe(o,l.tagName)){let c;for(c in o)RU.call(o,c)&&FZe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)NU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function LZe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?MZe.has(e.type.toLowerCase()):!("value"in e)}function FZe(e,t,n,r){const i=bL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=voe(r):i.commaSeparated?o=hoe(r):i.commaOrSpaceSeparated?o=voe(hoe(r).join(" ")):o=oae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?jZe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=oae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function NU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)NU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?NU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function oae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||e2(n)===e2(t)))return!0}return n}function jZe(e){const t=[];let n;for(n in e)RU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function BZe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const UZe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],zZe=iwe(MI,"div"),VZe=iwe(Ty,"g",UZe),g8=/\r?\n|\r/g;function HZe(e){const t=String(e),n=[];for(g8.lastIndex=0;g8.test(t);)n.push(g8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const q1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},swe={}.hasOwnProperty,qZe=Object.prototype;function WZe(e,t){const n=t||{};return XG({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ty:MI,verbose:n.verbose||!1},e)}function XG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},OP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:owe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=HZe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},OP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},OP(e,r,n),n}default:return n=GZe(e,t),n}}function owe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=XG(e,t[n]);r.push(i)}return r}function GZe(e,t){const n=e.schema;e.schema=t.namespaceURI===q1.svg?Ty:MI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;swe.call(qZe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?VZe:zZe)(t.tagName,i,owe(e,t.childNodes));if(OP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&K_(u.startTag),c=u&&u.endTag&&K_(u.endTag),f=XG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function OP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=YZe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function YZe(e,t,n){const r=K_(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)swe.call(n.attrs,o)&&(s[bL(e.schema,o).property]=K_(n.attrs[o]));n.startTag;const a=K_(n.startTag),u=n.endTag?K_(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function K_(e){const t=aae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=aae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function aae(e){return e.line&&e.column?e:void 0}const uae={}.hasOwnProperty;function awe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&uae.call(i,e)){const u=String(i[e]);o=uae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const KZe={},XZe={}.hasOwnProperty,uwe=awe("type",{handlers:{root:JZe,element:ret,text:tet,comment:net,doctype:eet}});function QZe(e,t){const r=(t||KZe).space;return uwe(e,r==="svg"?Ty:MI)}function JZe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=QG(e.children,n,t),Ox(e,n),n}function ZZe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=QG(e.children,n,t),Ox(e,n),n}function eet(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ox(e,t),t}function tet(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Ox(e,t),t}function net(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Ox(e,t),t}function ret(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Ty);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&XZe.call(e.properties,s)){const u=iet(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:q1[o],childNodes:[],parentNode:null};return a.childNodes=QG(e.children,a,r),Ox(e,a),e.tagName==="template"&&e.content&&(a.content=ZZe(e.content,r)),a}function iet(e,t,n){const r=bL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?__e(n):k_e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=q1[r.space]}return i}function QG(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=uwe(e[r],n);s.parentNode=t,i.push(s)}return i}function Ox(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const set=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],oet=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),mi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const lu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function lwe(e){return e>=55296&&e<=57343}function aet(e){return e>=56320&&e<=57343}function uet(e,t){return(e-55296)*1024+9216+t}function cwe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function fwe(e){return e>=64976&&e<=65007||oet.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const cet=65536;class fet{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=cet,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(aet(n))return this.pos++,this._addGap(),uet(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,lwe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){cwe(t)?this._err(Ne.controlCharacterInInputStream):fwe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function dwe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const yg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),det=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var y8;const het=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),pet=(y8=String.fromCodePoint)!==null&&y8!==void 0?y8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function met(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=het.get(e))!==null&&t!==void 0?t:e}var Xs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Xs||(Xs={}));const get=32;var Vd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Vd||(Vd={}));function PU(e){return e>=Xs.ZERO&&e<=Xs.NINE}function yet(e){return e>=Xs.UPPER_A&&e<=Xs.UPPER_F||e>=Xs.LOWER_A&&e<=Xs.LOWER_F}function vet(e){return e>=Xs.UPPER_A&&e<=Xs.UPPER_Z||e>=Xs.LOWER_A&&e<=Xs.LOWER_Z||PU(e)}function bet(e){return e===Xs.EQUALS||vet(e)}var Vs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Vs||(Vs={}));var k1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(k1||(k1={}));class _et{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Vs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=k1.Strict}startEntity(t){this.decodeMode=t,this.state=Vs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Vs.EntityStart:return t.charCodeAt(n)===Xs.NUM?(this.state=Vs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Vs.NamedEntity,this.stateNamedEntity(t,n));case Vs.NumericStart:return this.stateNumericStart(t,n);case Vs.NumericDecimal:return this.stateNumericDecimal(t,n);case Vs.NumericHex:return this.stateNumericHex(t,n);case Vs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|get)===Xs.LOWER_X?(this.state=Vs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Vs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PU(i)||yet(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(PU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Xs.SEMI)this.consumed+=1;else if(this.decodeMode===k1.Strict)return 0;return this.emitCodePoint(met(this.result),this.consumed),this.errors&&(t!==Xs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Vd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=pwe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===k1.Attribute&&(s===0||bet(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Vd.VALUE_LENGTH)>>14,s!==0){if(o===Xs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==k1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Vd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Vd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Vs.NamedEntity:return this.result!==0&&(this.decodeMode!==k1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Vs.NumericDecimal:return this.emitNumericEntity(0,2);case Vs.NumericHex:return this.emitNumericEntity(0,3);case Vs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Vs.EntityStart:return 0}}}function hwe(e){let t="";const n=new _et(e,r=>t+=pet(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function pwe(e,t,n,r){const i=(t&Vd.BRANCH_LENGTH)>>7,s=t&Vd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}hwe(yg);hwe(det);var Le;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Le=Le||(Le={}));var d0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(d0=d0||(d0={}));var fl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(fl=fl||(fl={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var k;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(k=k||(k={}));const wet=new Map([[we.A,k.A],[we.ADDRESS,k.ADDRESS],[we.ANNOTATION_XML,k.ANNOTATION_XML],[we.APPLET,k.APPLET],[we.AREA,k.AREA],[we.ARTICLE,k.ARTICLE],[we.ASIDE,k.ASIDE],[we.B,k.B],[we.BASE,k.BASE],[we.BASEFONT,k.BASEFONT],[we.BGSOUND,k.BGSOUND],[we.BIG,k.BIG],[we.BLOCKQUOTE,k.BLOCKQUOTE],[we.BODY,k.BODY],[we.BR,k.BR],[we.BUTTON,k.BUTTON],[we.CAPTION,k.CAPTION],[we.CENTER,k.CENTER],[we.CODE,k.CODE],[we.COL,k.COL],[we.COLGROUP,k.COLGROUP],[we.DD,k.DD],[we.DESC,k.DESC],[we.DETAILS,k.DETAILS],[we.DIALOG,k.DIALOG],[we.DIR,k.DIR],[we.DIV,k.DIV],[we.DL,k.DL],[we.DT,k.DT],[we.EM,k.EM],[we.EMBED,k.EMBED],[we.FIELDSET,k.FIELDSET],[we.FIGCAPTION,k.FIGCAPTION],[we.FIGURE,k.FIGURE],[we.FONT,k.FONT],[we.FOOTER,k.FOOTER],[we.FOREIGN_OBJECT,k.FOREIGN_OBJECT],[we.FORM,k.FORM],[we.FRAME,k.FRAME],[we.FRAMESET,k.FRAMESET],[we.H1,k.H1],[we.H2,k.H2],[we.H3,k.H3],[we.H4,k.H4],[we.H5,k.H5],[we.H6,k.H6],[we.HEAD,k.HEAD],[we.HEADER,k.HEADER],[we.HGROUP,k.HGROUP],[we.HR,k.HR],[we.HTML,k.HTML],[we.I,k.I],[we.IMG,k.IMG],[we.IMAGE,k.IMAGE],[we.INPUT,k.INPUT],[we.IFRAME,k.IFRAME],[we.KEYGEN,k.KEYGEN],[we.LABEL,k.LABEL],[we.LI,k.LI],[we.LINK,k.LINK],[we.LISTING,k.LISTING],[we.MAIN,k.MAIN],[we.MALIGNMARK,k.MALIGNMARK],[we.MARQUEE,k.MARQUEE],[we.MATH,k.MATH],[we.MENU,k.MENU],[we.META,k.META],[we.MGLYPH,k.MGLYPH],[we.MI,k.MI],[we.MO,k.MO],[we.MN,k.MN],[we.MS,k.MS],[we.MTEXT,k.MTEXT],[we.NAV,k.NAV],[we.NOBR,k.NOBR],[we.NOFRAMES,k.NOFRAMES],[we.NOEMBED,k.NOEMBED],[we.NOSCRIPT,k.NOSCRIPT],[we.OBJECT,k.OBJECT],[we.OL,k.OL],[we.OPTGROUP,k.OPTGROUP],[we.OPTION,k.OPTION],[we.P,k.P],[we.PARAM,k.PARAM],[we.PLAINTEXT,k.PLAINTEXT],[we.PRE,k.PRE],[we.RB,k.RB],[we.RP,k.RP],[we.RT,k.RT],[we.RTC,k.RTC],[we.RUBY,k.RUBY],[we.S,k.S],[we.SCRIPT,k.SCRIPT],[we.SECTION,k.SECTION],[we.SELECT,k.SELECT],[we.SOURCE,k.SOURCE],[we.SMALL,k.SMALL],[we.SPAN,k.SPAN],[we.STRIKE,k.STRIKE],[we.STRONG,k.STRONG],[we.STYLE,k.STYLE],[we.SUB,k.SUB],[we.SUMMARY,k.SUMMARY],[we.SUP,k.SUP],[we.TABLE,k.TABLE],[we.TBODY,k.TBODY],[we.TEMPLATE,k.TEMPLATE],[we.TEXTAREA,k.TEXTAREA],[we.TFOOT,k.TFOOT],[we.TD,k.TD],[we.TH,k.TH],[we.THEAD,k.THEAD],[we.TITLE,k.TITLE],[we.TR,k.TR],[we.TRACK,k.TRACK],[we.TT,k.TT],[we.U,k.U],[we.UL,k.UL],[we.SVG,k.SVG],[we.VAR,k.VAR],[we.WBR,k.WBR],[we.XMP,k.XMP]]);function $x(e){var t;return(t=wet.get(e))!==null&&t!==void 0?t:k.UNKNOWN}const Qe=k,Eet={[Le.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Le.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Le.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Le.XLINK]:new Set,[Le.XML]:new Set,[Le.XMLNS]:new Set};function mwe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const xet=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const is={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function VA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function HT(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Tet(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function vg(e){return Tet(e)||HT(e)}function DU(e){return vg(e)||VA(e)}function gwe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function ywe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function Aet(e){return VA(e)||gwe(e)||ywe(e)}function JR(e){return e+32}function vwe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Cet(e){return e===X.EQUALS_SIGN||DU(e)}function lae(e){return vwe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Iet{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new fet(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(dwe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=$x(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=vwe(t)?Cn.WHITESPACE_CHARACTER:t===X.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=yg[0];s>=0&&(s=pwe(yg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=yg[s];const a=o&Vd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Cet(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[yg[s]&~Vd.VALUE_LENGTH]:u===1?[yg[++s]]:[yg[++s],yg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(vg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(vg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=mi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(HT(t)?JR(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){vg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){vg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){vg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:vg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){vg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&lae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&lae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=mi;break}default:this.currentAttr.name+=String.fromCodePoint(HT(t)?JR(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=mi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=mi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=mi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=mi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(lu.DASH_DASH,!0)?(this._createCommentToken(lu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(lu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(lu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(lu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(lu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=mi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(HT(t))this._createDoctypeToken(String.fromCharCode(JR(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(mi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=mi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(HT(t)?JR(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(lu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(lu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:DU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){DU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:VA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Aet(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){gwe(t)?this.charRefCode=this.charRefCode*16+t-55:ywe(t)?this.charRefCode=this.charRefCode*16+t-87:VA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){VA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(lwe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(fwe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(cwe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=xet.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const bwe=new Set([k.DD,k.DT,k.LI,k.OPTGROUP,k.OPTION,k.P,k.RB,k.RP,k.RT,k.RTC]),cae=new Set([...bwe,k.CAPTION,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]),ZR=new Map([[k.APPLET,Le.HTML],[k.CAPTION,Le.HTML],[k.HTML,Le.HTML],[k.MARQUEE,Le.HTML],[k.OBJECT,Le.HTML],[k.TABLE,Le.HTML],[k.TD,Le.HTML],[k.TEMPLATE,Le.HTML],[k.TH,Le.HTML],[k.ANNOTATION_XML,Le.MATHML],[k.MI,Le.MATHML],[k.MN,Le.MATHML],[k.MO,Le.MATHML],[k.MS,Le.MATHML],[k.MTEXT,Le.MATHML],[k.DESC,Le.SVG],[k.FOREIGN_OBJECT,Le.SVG],[k.TITLE,Le.SVG]]),ket=[k.H1,k.H2,k.H3,k.H4,k.H5,k.H6],Ret=[k.TR,k.TEMPLATE,k.HTML],Net=[k.TBODY,k.TFOOT,k.THEAD,k.TEMPLATE,k.HTML],Pet=[k.TABLE,k.TEMPLATE,k.HTML],Det=[k.TD,k.TH];class Oet{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=k.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===k.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Le.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(ket,Le.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Det,Le.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Pet,Le.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Net,Le.HTML)}clearBackToTableRowContext(){this.clearBackTo(Ret,Le.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===k.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===k.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(ZR.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(mwe(n)&&r===Le.HTML)return!0;if(ZR.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if((r===k.UL||r===k.OL)&&i===Le.HTML||ZR.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(r===k.BUTTON&&i===Le.HTML||ZR.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r===k.TABLE||r===k.TEMPLATE||r===k.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Le.HTML){if(n===k.TBODY||n===k.THEAD||n===k.TFOOT)return!0;if(n===k.TABLE||n===k.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r!==k.OPTION&&r!==k.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;bwe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;cae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&cae.has(this.currentTagId);)this.pop()}}const v8=3;var cf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(cf=cf||(cf={}));const fae={type:cf.Marker};class $et{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===cf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<v8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<v8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=v8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(fae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:cf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:cf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(fae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===cf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===cf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===cf.Element&&n.element===t)}}function dae(e){return{nodeName:"#text",value:e,parentNode:null}}const A_={createDocument(){return{nodeName:"#document",mode:fl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};A_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(A_.isTextNode(n)){n.value+=t;return}}A_.appendChild(e,dae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&A_.isTextNode(r)?r.value+=t:A_.insertBefore(e,dae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},_we="html",Met="about:legacy-compat",Let="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",wwe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Fet=[...wwe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],jet=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Ewe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Bet=[...Ewe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hae(e,t){return t.some(n=>e.startsWith(n))}function Uet(e){return e.name===_we&&e.publicId===null&&(e.systemId===null||e.systemId===Met)}function zet(e){if(e.name!==_we)return fl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Let)return fl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),jet.has(n))return fl.QUIRKS;let r=t===null?Fet:wwe;if(hae(n,r))return fl.QUIRKS;if(r=t===null?Ewe:Bet,hae(n,r))return fl.LIMITED_QUIRKS}return fl.NO_QUIRKS}const pae={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Vet="definitionurl",Het="definitionURL",qet=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Wet=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Le.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Le.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Le.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Le.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Le.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Le.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Le.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Le.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Le.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Le.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Le.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Le.XMLNS}]]),Get=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Yet=new Set([k.B,k.BIG,k.BLOCKQUOTE,k.BODY,k.BR,k.CENTER,k.CODE,k.DD,k.DIV,k.DL,k.DT,k.EM,k.EMBED,k.H1,k.H2,k.H3,k.H4,k.H5,k.H6,k.HEAD,k.HR,k.I,k.IMG,k.LI,k.LISTING,k.MENU,k.META,k.NOBR,k.OL,k.P,k.PRE,k.RUBY,k.S,k.SMALL,k.SPAN,k.STRONG,k.STRIKE,k.SUB,k.SUP,k.TABLE,k.TT,k.U,k.UL,k.VAR]);function Ket(e){const t=e.tagID;return t===k.FONT&&e.attrs.some(({name:r})=>r===d0.COLOR||r===d0.SIZE||r===d0.FACE)||Yet.has(t)}function xwe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Vet){e.attrs[t].name=Het;break}}function Swe(e){for(let t=0;t<e.attrs.length;t++){const n=qet.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function JG(e){for(let t=0;t<e.attrs.length;t++){const n=Wet.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Xet(e){const t=Get.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=$x(e.tagName))}function Qet(e,t){return t===Le.MATHML&&(e===k.MI||e===k.MO||e===k.MN||e===k.MS||e===k.MTEXT)}function Jet(e,t,n){if(t===Le.MATHML&&e===k.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===d0.ENCODING){const i=n[r].value.toLowerCase();return i===pae.TEXT_HTML||i===pae.APPLICATION_XML}}return t===Le.SVG&&(e===k.FOREIGN_OBJECT||e===k.DESC||e===k.TITLE)}function Zet(e,t,n,r){return(!r||r===Le.HTML)&&Jet(e,t,n)||(!r||r===Le.MATHML)&&Qet(e,t)}const ett="hidden",ttt=8,ntt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const rtt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Twe=new Set([k.TABLE,k.TBODY,k.TFOOT,k.THEAD,k.TR]),mae={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:A_,onParseError:null};let gae=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...mae,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Iet(this.options,this),this.activeFormattingElements=new $et(this.treeAdapter),this.fragmentContextID=r?$x(this.treeAdapter.getTagName(r)):k.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Oet(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...mae,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Le.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Le.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===k.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:rtt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Le.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Le.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=is.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Le.HTML))switch(this.fragmentContextID){case k.TITLE:case k.TEXTAREA:{this.tokenizer.state=is.RCDATA;break}case k.STYLE:case k.XMP:case k.IFRAME:case k.NOEMBED:case k.NOFRAMES:case k.NOSCRIPT:{this.tokenizer.state=is.RAWTEXT;break}case k.SCRIPT:{this.tokenizer.state=is.SCRIPT_DATA;break}case k.PLAINTEXT:{this.tokenizer.state=is.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Le.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Le.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Le.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,k.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===k.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Le.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===k.MGLYPH||t.tagID===k.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Le.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Zet(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===cf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(k.P),this.openElements.popUntilTagNamePopped(k.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case k.TR:{this.insertionMode=ie.IN_ROW;return}case k.TBODY:case k.THEAD:case k.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case k.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case k.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case k.TABLE:{this.insertionMode=ie.IN_TABLE;return}case k.BODY:{this.insertionMode=ie.IN_BODY;return}case k.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case k.SELECT:{this._resetInsertionModeForSelect(t);return}case k.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case k.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case k.TD:case k.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case k.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===k.TEMPLATE)break;if(r===k.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return Twe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case k.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Le.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case k.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Eet[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Dnt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{HA(this,t);break}case ie.BEFORE_HEAD:{qA(this,t);break}case ie.IN_HEAD:{WA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{GA(this,t);break}case ie.AFTER_HEAD:{YA(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{Cwe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{b8(this,t);break}case ie.IN_TABLE_TEXT:{Dwe(this,t);break}case ie.IN_COLUMN_GROUP:{wO(this,t);break}case ie.AFTER_BODY:{EO(this,t);break}case ie.AFTER_AFTER_BODY:{$P(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Pnt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{HA(this,t);break}case ie.BEFORE_HEAD:{qA(this,t);break}case ie.IN_HEAD:{WA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{GA(this,t);break}case ie.AFTER_HEAD:{YA(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{b8(this,t);break}case ie.IN_COLUMN_GROUP:{wO(this,t);break}case ie.AFTER_BODY:{EO(this,t);break}case ie.AFTER_AFTER_BODY:{$P(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){OU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{OU(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.AFTER_BODY:{ctt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{ftt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{dtt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Ont(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{htt(this,t);break}case ie.BEFORE_HEAD:{mtt(this,t);break}case ie.IN_HEAD:{Yf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{vtt(this,t);break}case ie.AFTER_HEAD:{_tt(this,t);break}case ie.IN_BODY:{xa(this,t);break}case ie.IN_TABLE:{lE(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.IN_CAPTION:{gnt(this,t);break}case ie.IN_COLUMN_GROUP:{tY(this,t);break}case ie.IN_TABLE_BODY:{AL(this,t);break}case ie.IN_ROW:{CL(this,t);break}case ie.IN_CELL:{bnt(this,t);break}case ie.IN_SELECT:{Mwe(this,t);break}case ie.IN_SELECT_IN_TABLE:{wnt(this,t);break}case ie.IN_TEMPLATE:{xnt(this,t);break}case ie.AFTER_BODY:{Tnt(this,t);break}case ie.IN_FRAMESET:{Ant(this,t);break}case ie.AFTER_FRAMESET:{Int(this,t);break}case ie.AFTER_AFTER_BODY:{Rnt(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Nnt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?$nt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{ptt(this,t);break}case ie.BEFORE_HEAD:{gtt(this,t);break}case ie.IN_HEAD:{ytt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{btt(this,t);break}case ie.AFTER_HEAD:{wtt(this,t);break}case ie.IN_BODY:{TL(this,t);break}case ie.TEXT:{ont(this,t);break}case ie.IN_TABLE:{n2(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.IN_CAPTION:{ynt(this,t);break}case ie.IN_COLUMN_GROUP:{vnt(this,t);break}case ie.IN_TABLE_BODY:{$U(this,t);break}case ie.IN_ROW:{$we(this,t);break}case ie.IN_CELL:{_nt(this,t);break}case ie.IN_SELECT:{Lwe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Ent(this,t);break}case ie.IN_TEMPLATE:{Snt(this,t);break}case ie.AFTER_BODY:{jwe(this,t);break}case ie.IN_FRAMESET:{Cnt(this,t);break}case ie.AFTER_FRAMESET:{knt(this,t);break}case ie.AFTER_AFTER_BODY:{$P(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{QS(this,t);break}case ie.BEFORE_HTML:{HA(this,t);break}case ie.BEFORE_HEAD:{qA(this,t);break}case ie.IN_HEAD:{WA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{GA(this,t);break}case ie.AFTER_HEAD:{YA(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{Nwe(this,t);break}case ie.TEXT:{ant(this,t);break}case ie.IN_TABLE_TEXT:{JS(this,t);break}case ie.IN_TEMPLATE:{Fwe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{eY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Awe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{b8(this,t);break}case ie.IN_TABLE_TEXT:{Pwe(this,t);break}}}};function itt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Rwe(e,t),n}function stt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function ott(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=ntt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=att(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function att(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function utt(e,t,n){const r=e.treeAdapter.getTagName(t),i=$x(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===k.TEMPLATE&&s===Le.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function ltt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function ZG(e,t){for(let n=0;n<ttt;n++){const r=itt(e,t);if(!r)break;const i=stt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=ott(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&utt(e,o,s),ltt(e,i,r)}}function OU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ctt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function ftt(e,t){e._appendCommentNode(t,e.document)}function eY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function dtt(e,t){e._setDocumentType(t);const n=t.forceQuirks?fl.QUIRKS:zet(t);Uet(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function QS(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,fl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function htt(e,t){t.tagID===k.HTML?(e._insertElement(t,Le.HTML),e.insertionMode=ie.BEFORE_HEAD):HA(e,t)}function ptt(e,t){const n=t.tagID;(n===k.HTML||n===k.HEAD||n===k.BODY||n===k.BR)&&HA(e,t)}function HA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function mtt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.HEAD:{e._insertElement(t,Le.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:qA(e,t)}}function gtt(e,t){const n=t.tagID;n===k.HEAD||n===k.BODY||n===k.HTML||n===k.BR?qA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function qA(e,t){e._insertFakeElement(we.HEAD,k.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Yf(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.TITLE:{e._switchToTextParsing(t,is.RCDATA);break}case k.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,is.RAWTEXT):(e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case k.NOFRAMES:case k.STYLE:{e._switchToTextParsing(t,is.RAWTEXT);break}case k.SCRIPT:{e._switchToTextParsing(t,is.SCRIPT_DATA);break}case k.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:WA(e,t)}}function ytt(e,t){switch(t.tagID){case k.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case k.BODY:case k.BR:case k.HTML:{WA(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function xb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==k.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function WA(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function vtt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BASEFONT:case k.BGSOUND:case k.HEAD:case k.LINK:case k.META:case k.NOFRAMES:case k.STYLE:{Yf(e,t);break}case k.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:GA(e,t)}}function btt(e,t){switch(t.tagID){case k.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case k.BR:{GA(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function GA(e,t){const n=t.type===Cn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function _tt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BODY:{e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case k.FRAMESET:{e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET;break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,k.HEAD),Yf(e,t),e.openElements.remove(e.headElement);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:YA(e,t)}}function wtt(e,t){switch(t.tagID){case k.BODY:case k.HTML:case k.BR:{YA(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function YA(e,t){e._insertFakeElement(we.BODY,k.BODY),e.insertionMode=ie.IN_BODY,SL(e,t)}function SL(e,t){switch(t.type){case Cn.CHARACTER:{Cwe(e,t);break}case Cn.WHITESPACE_CHARACTER:{Awe(e,t);break}case Cn.COMMENT:{OU(e,t);break}case Cn.START_TAG:{xa(e,t);break}case Cn.END_TAG:{TL(e,t);break}case Cn.EOF:{Nwe(e,t);break}}}function Awe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Cwe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Ett(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function xtt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Stt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET)}function Ttt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Att(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),mwe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Le.HTML)}function Ctt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Itt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),n||(e.formElement=e.openElements.current))}function ktt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===k.LI&&i===k.LI||(n===k.DD||n===k.DT)&&(i===k.DD||i===k.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==k.ADDRESS&&i!==k.DIV&&i!==k.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Rtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.tokenizer.state=is.PLAINTEXT}function Ntt(e,t){e.openElements.hasInScope(k.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1}function Ptt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(ZG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Dtt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ott(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(k.NOBR)&&(ZG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function $tt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Mtt(e,t){e.treeAdapter.getDocumentMode(e.document)!==fl.QUIRKS&&e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function Iwe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function kwe(e){const t=dwe(e,d0.TYPE);return t!=null&&t.toLowerCase()===ett}function Ltt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),kwe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Ftt(e,t){e._appendElement(t,Le.HTML),t.ackSelfClosing=!0}function jtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Btt(e,t){t.tagName=we.IMG,t.tagID=k.IMG,Iwe(e,t)}function Utt(e,t){e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.tokenizer.state=is.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function ztt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function Vtt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function yae(e,t){e._switchToTextParsing(t,is.RAWTEXT)}function Htt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function qtt(e,t){e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function Wtt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Le.HTML)}function Gtt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(k.RTC),e._insertElement(t,Le.HTML)}function Ytt(e,t){e._reconstructActiveFormattingElements(),xwe(t),JG(t),t.selfClosing?e._appendElement(t,Le.MATHML):e._insertElement(t,Le.MATHML),t.ackSelfClosing=!0}function Ktt(e,t){e._reconstructActiveFormattingElements(),Swe(t),JG(t),t.selfClosing?e._appendElement(t,Le.SVG):e._insertElement(t,Le.SVG),t.ackSelfClosing=!0}function vae(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function xa(e,t){switch(t.tagID){case k.I:case k.S:case k.B:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.SMALL:case k.STRIKE:case k.STRONG:{Dtt(e,t);break}case k.A:{Ptt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Att(e,t);break}case k.P:case k.DL:case k.OL:case k.UL:case k.DIV:case k.DIR:case k.NAV:case k.MAIN:case k.MENU:case k.ASIDE:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.DETAILS:case k.ADDRESS:case k.ARTICLE:case k.SECTION:case k.SUMMARY:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Ttt(e,t);break}case k.LI:case k.DD:case k.DT:{ktt(e,t);break}case k.BR:case k.IMG:case k.WBR:case k.AREA:case k.EMBED:case k.KEYGEN:{Iwe(e,t);break}case k.HR:{jtt(e,t);break}case k.RB:case k.RTC:{Wtt(e,t);break}case k.RT:case k.RP:{Gtt(e,t);break}case k.PRE:case k.LISTING:{Ctt(e,t);break}case k.XMP:{ztt(e,t);break}case k.SVG:{Ktt(e,t);break}case k.HTML:{Ett(e,t);break}case k.BASE:case k.LINK:case k.META:case k.STYLE:case k.TITLE:case k.SCRIPT:case k.BGSOUND:case k.BASEFONT:case k.TEMPLATE:{Yf(e,t);break}case k.BODY:{xtt(e,t);break}case k.FORM:{Itt(e,t);break}case k.NOBR:{Ott(e,t);break}case k.MATH:{Ytt(e,t);break}case k.TABLE:{Mtt(e,t);break}case k.INPUT:{Ltt(e,t);break}case k.PARAM:case k.TRACK:case k.SOURCE:{Ftt(e,t);break}case k.IMAGE:{Btt(e,t);break}case k.BUTTON:{Ntt(e,t);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{$tt(e,t);break}case k.IFRAME:{Vtt(e,t);break}case k.SELECT:{Htt(e,t);break}case k.OPTION:case k.OPTGROUP:{qtt(e,t);break}case k.NOEMBED:{yae(e,t);break}case k.FRAMESET:{Stt(e,t);break}case k.TEXTAREA:{Utt(e,t);break}case k.NOSCRIPT:{e.options.scriptingEnabled?yae(e,t):vae(e,t);break}case k.PLAINTEXT:{Rtt(e,t);break}case k.COL:case k.TH:case k.TD:case k.TR:case k.HEAD:case k.FRAME:case k.TBODY:case k.TFOOT:case k.THEAD:case k.CAPTION:case k.COLGROUP:break;default:vae(e,t)}}function Xtt(e,t){if(e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Qtt(e,t){e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,jwe(e,t))}function Jtt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Ztt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(k.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(k.FORM):n&&e.openElements.remove(n))}function ent(e){e.openElements.hasInButtonScope(k.P)||e._insertFakeElement(we.P,k.P),e._closePElement()}function tnt(e){e.openElements.hasInListItemScope(k.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(k.LI),e.openElements.popUntilTagNamePopped(k.LI))}function nnt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function rnt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function int(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function snt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,k.BR),e.openElements.pop(),e.framesetOk=!1}function Rwe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==k.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function TL(e,t){switch(t.tagID){case k.A:case k.B:case k.I:case k.S:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.NOBR:case k.SMALL:case k.STRIKE:case k.STRONG:{ZG(e,t);break}case k.P:{ent(e);break}case k.DL:case k.UL:case k.OL:case k.DIR:case k.DIV:case k.NAV:case k.PRE:case k.MAIN:case k.MENU:case k.ASIDE:case k.BUTTON:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.ADDRESS:case k.ARTICLE:case k.DETAILS:case k.SECTION:case k.SUMMARY:case k.LISTING:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Jtt(e,t);break}case k.LI:{tnt(e);break}case k.DD:case k.DT:{nnt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{rnt(e);break}case k.BR:{snt(e);break}case k.BODY:{Xtt(e,t);break}case k.HTML:{Qtt(e,t);break}case k.FORM:{Ztt(e);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{int(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:Rwe(e,t)}}function Nwe(e,t){e.tmplInsertionModeStack.length>0?Fwe(e,t):eY(e,t)}function ont(e,t){var n;t.tagID===k.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function ant(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function b8(e,t){if(Twe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{Dwe(e,t);break}case Cn.WHITESPACE_CHARACTER:{Pwe(e,t);break}}else FI(e,t)}function unt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CAPTION}function lnt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function cnt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,k.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,tY(e,t)}function fnt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_TABLE_BODY}function dnt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,k.TBODY),e.insertionMode=ie.IN_TABLE_BODY,AL(e,t)}function hnt(e,t){e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function pnt(e,t){kwe(t)?e._appendElement(t,Le.HTML):FI(e,t),t.ackSelfClosing=!0}function mnt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Le.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function lE(e,t){switch(t.tagID){case k.TD:case k.TH:case k.TR:{dnt(e,t);break}case k.STYLE:case k.SCRIPT:case k.TEMPLATE:{Yf(e,t);break}case k.COL:{cnt(e,t);break}case k.FORM:{mnt(e,t);break}case k.TABLE:{hnt(e,t);break}case k.TBODY:case k.TFOOT:case k.THEAD:{fnt(e,t);break}case k.INPUT:{pnt(e,t);break}case k.CAPTION:{unt(e,t);break}case k.COLGROUP:{lnt(e,t);break}default:FI(e,t)}}function n2(e,t){switch(t.tagID){case k.TABLE:{e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode());break}case k.TEMPLATE:{xb(e,t);break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:FI(e,t)}}function FI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,SL(e,t),e.fosterParentingEnabled=n}function Pwe(e,t){e.pendingCharacterTokens.push(t)}function Dwe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function JS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)FI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Owe=new Set([k.CAPTION,k.COL,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]);function gnt(e,t){const n=t.tagID;Owe.has(n)?e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,lE(e,t)):xa(e,t)}function ynt(e,t){const n=t.tagID;switch(n){case k.CAPTION:case k.TABLE:{e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===k.TABLE&&n2(e,t));break}case k.BODY:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:TL(e,t)}}function tY(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.COL:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.TEMPLATE:{Yf(e,t);break}default:wO(e,t)}}function vnt(e,t){switch(t.tagID){case k.COLGROUP:{e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TEMPLATE:{xb(e,t);break}case k.COL:break;default:wO(e,t)}}function wO(e,t){e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function AL(e,t){switch(t.tagID){case k.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_ROW;break}case k.TH:case k.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,k.TR),e.insertionMode=ie.IN_ROW,CL(e,t);break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,lE(e,t));break}default:lE(e,t)}}function $U(e,t){const n=t.tagID;switch(t.tagID){case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,n2(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:case k.TR:break;default:n2(e,t)}}function CL(e,t){switch(t.tagID){case k.TH:case k.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,AL(e,t));break}default:lE(e,t)}}function $we(e,t){switch(t.tagID){case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case k.TABLE:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,$U(e,t));break}case k.TBODY:case k.TFOOT:case k.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(k.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,$U(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:break;default:n2(e,t)}}function bnt(e,t){const n=t.tagID;Owe.has(n)?(e.openElements.hasInTableScope(k.TD)||e.openElements.hasInTableScope(k.TH))&&(e._closeTableCell(),CL(e,t)):xa(e,t)}function _nt(e,t){const n=t.tagID;switch(n){case k.TD:case k.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case k.TABLE:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),$we(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:break;default:TL(e,t)}}function Mwe(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case k.OPTGROUP:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case k.INPUT:case k.KEYGEN:case k.TEXTAREA:case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),t.tagID!==k.SELECT&&e._processStartTag(t));break}case k.SCRIPT:case k.TEMPLATE:{Yf(e,t);break}}}function Lwe(e,t){switch(t.tagID){case k.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===k.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===k.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop();break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop();break}case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode());break}case k.TEMPLATE:{xb(e,t);break}}}function wnt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Mwe(e,t)}function Ent(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Lwe(e,t)}function xnt(e,t){switch(t.tagID){case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{Yf(e,t);break}case k.CAPTION:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,lE(e,t);break}case k.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,tY(e,t);break}case k.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,AL(e,t);break}case k.TD:case k.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,CL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,xa(e,t)}}function Snt(e,t){t.tagID===k.TEMPLATE&&xb(e,t)}function Fwe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):eY(e,t)}function Tnt(e,t){t.tagID===k.HTML?xa(e,t):EO(e,t)}function jwe(e,t){var n;if(t.tagID===k.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===k.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else EO(e,t)}function EO(e,t){e.insertionMode=ie.IN_BODY,SL(e,t)}function Ant(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.FRAMESET:{e._insertElement(t,Le.HTML);break}case k.FRAME:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.NOFRAMES:{Yf(e,t);break}}}function Cnt(e,t){t.tagID===k.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==k.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Int(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.NOFRAMES:{Yf(e,t);break}}}function knt(e,t){t.tagID===k.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Rnt(e,t){t.tagID===k.HTML?xa(e,t):$P(e,t)}function $P(e,t){e.insertionMode=ie.IN_BODY,SL(e,t)}function Nnt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.NOFRAMES:{Yf(e,t);break}}}function Pnt(e,t){t.chars=mi,e._insertCharacters(t)}function Dnt(e,t){e._insertCharacters(t),e.framesetOk=!1}function Bwe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Le.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Ont(e,t){if(Ket(t))Bwe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Le.MATHML?xwe(t):r===Le.SVG&&(Xet(t),Swe(t)),JG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function $nt(e,t){if(t.tagID===k.P||t.tagID===k.BR){Bwe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Le.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const Mnt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),bae={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Uwe(e,t){const n=Wnt(e),r=awe("type",{handlers:{root:Lnt,element:Fnt,text:jnt,comment:Vwe,doctype:Bnt,raw:znt},unknown:Vnt}),i={parser:n?new gae(bae):gae.getFragmentParser(void 0,bae),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Mx(i,Lh());const s=n?i.parser.document:i.parser.getFragment(),o=WZe(s,{file:i.options.file});return i.stitches&&YG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function zwe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Lnt(e,t){zwe(e.children,t)}function Fnt(e,t){Hnt(e,t),zwe(e.children,t),qnt(e,t)}function jnt(e,t){const n={type:Cn.CHARACTER,chars:e.value,location:jI(e)};Mx(t,Lh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Bnt(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:jI(e)};Mx(t,Lh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Unt(e,t){t.stitches=!0;const n=Gnt(e);if("children"in e&&"children"in n){const r=Uwe({type:"root",children:e.children},t.options);n.children=r.children}Vwe({type:"comment",value:{stitch:n}},t)}function Vwe(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:jI(e)};Mx(t,Lh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function znt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Hwe(t,Lh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Vnt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Unt(n,t);else{let r="";throw Mnt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Mx(e,t){Hwe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=is.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Hwe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Hnt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===is.PLAINTEXT)return;Mx(t,Lh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:q1.html;i===q1.html&&n==="svg"&&(i=q1.svg);const s=QZe({...e,children:[]},{space:i===q1.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:$x(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:jI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function qnt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&set.includes(n)||t.parser.tokenizer.state===is.PLAINTEXT)return;Mx(t,_L(e));const r={type:Cn.END_TAG,tagName:n,tagID:$x(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:jI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===is.RCDATA||t.parser.tokenizer.state===is.RAWTEXT||t.parser.tokenizer.state===is.SCRIPT_DATA)&&(t.parser.tokenizer.state=is.DATA)}function Wnt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function jI(e){const t=Lh(e)||{line:void 0,column:void 0,offset:void 0},n=_L(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Gnt(e){return"children"in e?uE({...e,children:[]}):uE(e)}function Ynt(e){return function(t,n){return Uwe(t,{...e,file:n})}}function Ga({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Sy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(st,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(ki,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(ki,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(ki,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(ki,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(ki,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(ki,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Sx,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(If,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(If,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(DZe,{components:n,rehypePlugins:[Ynt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function MU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ga,{text:n})}const Knt="https://github.com/revisit-studies/study/tree/main/public/";function Xnt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Hm();return _.jsx(fi.Main,{children:_.jsxs(Dh,{size:"xs",px:"xs",children:[_.jsx(Sy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Mh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(st,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=b_e(i);return _.jsx(Rs,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(xy,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(st,{fw:"bold",children:i}),_.jsxs(Jt,{align:"center",direction:"row",children:[_.jsx(foe,{color:"red"}),_.jsx(st,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(MU,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(st,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(st,{c:"dimmed",children:[_.jsx(st,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(st,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(st,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Sx,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Knt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Jt,{align:"center",direction:"row",children:[_.jsx(foe,{color:"orange"}),_.jsx(st,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(MU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var qwe={exports:{}},Wwe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BI=N;function Qnt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jnt=typeof Object.is=="function"?Object.is:Qnt,Znt=BI.useSyncExternalStore,ert=BI.useRef,trt=BI.useEffect,nrt=BI.useMemo,rrt=BI.useDebugValue;Wwe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=ert(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=nrt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Jnt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Znt(e,s[0],s[1]);return trt(function(){o.hasValue=!0,o.value=a},[a]),rrt(a),a};qwe.exports=Wwe;var irt=qwe.exports,bl="default"in OD?Un:OD,_ae=Symbol.for("react-redux-context"),wae=typeof globalThis<"u"?globalThis:{};function srt(){if(!bl.createContext)return{};const e=wae[_ae]??(wae[_ae]=new Map);let t=e.get(bl.createContext);return t||(t=bl.createContext(null),e.set(bl.createContext,t)),t}var D0=srt(),ort=()=>{throw new Error("uSES not initialized!")};function nY(e=D0){return function(){return bl.useContext(e)}}var Gwe=nY(),Ywe=ort,art=e=>{Ywe=e},urt=(e,t)=>e===t;function lrt(e=D0){const t=e===D0?Gwe:nY(e),n=(r,i={})=>{const{equalityFn:s=urt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();bl.useRef(!0);const d=bl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=Ywe(u.addNestedSub,a.getState,l||a.getState,d,s);return bl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var crt=lrt();function frt(e){e()}function drt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){frt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Eae={notify(){},get:()=>[]};function hrt(e,t){let n,r=Eae,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=drt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Eae)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var prt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mrt=typeof navigator<"u"&&navigator.product==="ReactNative",grt=prt||mrt?bl.useLayoutEffect:bl.useEffect;function yrt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=bl.useMemo(()=>{const l=hrt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=bl.useMemo(()=>e.getState(),[e]);grt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||D0;return bl.createElement(u.Provider,{value:o},n)}var vrt=yrt;function Kwe(e=D0){const t=e===D0?Gwe:nY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var brt=Kwe();function _rt(e=D0){const t=e===D0?brt:Kwe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Xwe=_rt();art(irt.useSyncExternalStoreWithSelector);function vo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wrt=typeof Symbol=="function"&&Symbol.observable||"@@observable",xae=wrt,_8=()=>Math.random().toString(36).substring(7).split("").join("."),Ert={INIT:`@@redux/INIT${_8()}`,REPLACE:`@@redux/REPLACE${_8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_8()}`},xO=Ert;function rY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Qwe(e,t,n){if(typeof e!="function")throw new Error(vo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(vo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(vo(1));return n(Qwe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(vo(3));return i}function f(g){if(typeof g!="function")throw new Error(vo(4));if(u)throw new Error(vo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(vo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!rY(g))throw new Error(vo(7));if(typeof g.type>"u")throw new Error(vo(8));if(typeof g.type!="string")throw new Error(vo(17));if(u)throw new Error(vo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(vo(10));r=g,d({type:xO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(vo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[xae](){return this}}}return d({type:xO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[xae]:p}}function xrt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:xO.INIT})>"u")throw new Error(vo(12));if(typeof n(void 0,{type:xO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vo(13))})}function Srt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{xrt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(vo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function SO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Trt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(vo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=SO(...a)(i.dispatch),{...i,dispatch:s}}}function Art(e){return rY(e)&&"type"in e&&typeof e.type=="string"}var Jwe=Symbol.for("immer-nothing"),Sae=Symbol.for("immer-draftable"),Rl=Symbol.for("immer-state");function hf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cE=Object.getPrototypeOf;function O0(e){return!!e&&!!e[Rl]}function pm(e){var t;return e?Zwe(e)||Array.isArray(e)||!!e[Sae]||!!((t=e.constructor)!=null&&t[Sae])||kL(e)||RL(e):!1}var Crt=Object.prototype.constructor.toString();function Zwe(e){if(!e||typeof e!="object")return!1;const t=cE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Crt}function TO(e,t){IL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function IL(e){const t=e[Rl];return t?t.type_:Array.isArray(e)?1:kL(e)?2:RL(e)?3:0}function LU(e,t){return IL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function eEe(e,t,n){const r=IL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Irt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function kL(e){return e instanceof Map}function RL(e){return e instanceof Set}function p1(e){return e.copy_||e.base_}function FU(e,t){if(kL(e))return new Map(e);if(RL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Zwe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Rl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(cE(e),r)}else{const r=cE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function iY(e,t=!1){return NL(e)||O0(e)||!pm(e)||(IL(e)>1&&(e.set=e.add=e.clear=e.delete=krt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>iY(r,!0))),e}function krt(){hf(2)}function NL(e){return Object.isFrozen(e)}var Rrt={};function Rv(e){const t=Rrt[e];return t||hf(0,e),t}var r2;function tEe(){return r2}function Nrt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Tae(e,t){t&&(Rv("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function jU(e){BU(e),e.drafts_.forEach(Prt),e.drafts_=null}function BU(e){e===r2&&(r2=e.parent_)}function Aae(e){return r2=Nrt(r2,e)}function Prt(e){const t=e[Rl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Cae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Rl].modified_&&(jU(t),hf(4)),pm(e)&&(e=AO(t,e),t.parent_||CO(t,e)),t.patches_&&Rv("Patches").generateReplacementPatches_(n[Rl].base_,e,t.patches_,t.inversePatches_)):e=AO(t,n,[]),jU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Jwe?e:void 0}function AO(e,t,n){if(NL(t))return t;const r=t[Rl];if(!r)return TO(t,(i,s)=>Iae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return CO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),TO(s,(a,u)=>Iae(e,r,i,a,u,n,o)),CO(e,i,!1),n&&e.patches_&&Rv("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Iae(e,t,n,r,i,s,o){if(O0(i)){const a=s&&t&&t.type_!==3&&!LU(t.assigned_,r)?s.concat(r):void 0,u=AO(e,i,a);if(eEe(n,r,u),O0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(pm(i)&&!NL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;AO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&CO(e,i)}}function CO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&iY(t,n)}function Drt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:tEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=sY;n&&(i=[r],s=i2);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var sY={get(e,t){if(t===Rl)return e;const n=p1(e);if(!LU(n,t))return Ort(e,n,t);const r=n[t];return e.finalized_||!pm(r)?r:r===w8(e.base_,t)?(E8(e),e.copy_[t]=zU(r,e)):r},has(e,t){return t in p1(e)},ownKeys(e){return Reflect.ownKeys(p1(e))},set(e,t,n){const r=nEe(p1(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=w8(p1(e),t),s=i==null?void 0:i[Rl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Irt(n,i)&&(n!==void 0||LU(e.base_,t)))return!0;E8(e),UU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return w8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,E8(e),UU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=p1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){hf(11)},getPrototypeOf(e){return cE(e.base_)},setPrototypeOf(){hf(12)}},i2={};TO(sY,(e,t)=>{i2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});i2.deleteProperty=function(e,t){return i2.set.call(this,e,t,void 0)};i2.set=function(e,t,n){return sY.set.call(this,e[0],t,n,e[0])};function w8(e,t){const n=e[Rl];return(n?p1(n):e)[t]}function Ort(e,t,n){var i;const r=nEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function nEe(e,t){if(!(t in e))return;let n=cE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=cE(n)}}function UU(e){e.modified_||(e.modified_=!0,e.parent_&&UU(e.parent_))}function E8(e){e.copy_||(e.copy_=FU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $rt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&hf(6),r!==void 0&&typeof r!="function"&&hf(7);let i;if(pm(t)){const s=Aae(this),o=zU(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?jU(s):BU(s)}return Tae(s,r),Cae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Jwe&&(i=void 0),this.autoFreeze_&&iY(i,!0),r){const s=[],o=[];Rv("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else hf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){pm(e)||hf(8),O0(e)&&(e=rEe(e));const t=Aae(this),n=zU(e,void 0);return n[Rl].isManual_=!0,BU(t),n}finishDraft(e,t){const n=e&&e[Rl];(!n||!n.isManual_)&&hf(9);const{scope_:r}=n;return Tae(r,t),Cae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Rv("Patches").applyPatches_;return O0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function zU(e,t){const n=kL(e)?Rv("MapSet").proxyMap_(e,t):RL(e)?Rv("MapSet").proxySet_(e,t):Drt(e,t);return(t?t.scope_:tEe()).drafts_.push(n),n}function rEe(e){return O0(e)||hf(10,e),iEe(e)}function iEe(e){if(!pm(e)||NL(e))return e;const t=e[Rl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=FU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=FU(e,!0);return TO(n,(r,i)=>{eEe(n,r,iEe(i))}),t&&(t.finalized_=!1),n}var Nl=new $rt,sEe=Nl.produce;Nl.produceWithPatches.bind(Nl);Nl.setAutoFreeze.bind(Nl);Nl.setUseStrictShallowCopy.bind(Nl);Nl.applyPatches.bind(Nl);Nl.createDraft.bind(Nl);Nl.finishDraft.bind(Nl);function Mrt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Lrt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Frt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var kae=e=>Array.isArray(e)?e:[e];function jrt(e){const t=Array.isArray(e[0])?e[0]:e;return Frt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Brt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Urt=class{constructor(e){this.value=e}deref(){return this.value}},zrt=typeof WeakRef<"u"?WeakRef:Urt,Vrt=0,Rae=1;function eN(){return{s:Vrt,v:void 0,o:null,p:null}}function oY(e,t={}){let n=eN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=eN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=eN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Rae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new zrt(c):c}return l.s=Rae,l.v=c,c}return o.clearCache=()=>{n=eN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function oEe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Mrt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=oY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=kae(d),y=kae(p),v=jrt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=Brt(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Hrt=oEe(oY),qrt=Object.assign((e,t=Hrt)=>{Lrt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>qrt});function aEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Wrt=aEe(),Grt=aEe,Yrt=(...e)=>{const t=oEe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(O0(o)?rEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Yrt(oY);var Krt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?SO:SO.apply(null,arguments)};function fE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Lu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Art(r)&&r.type===e,n}var uEe=class qT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,qT.prototype)}static get[Symbol.species](){return qT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new qT(...t[0].concat(this)):new qT(...t.concat(this))}};function Nae(e){return pm(e)?sEe(e,()=>{}):e}function Pae(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Lu(10));const r=n.insert(t,e);return e.set(t,r),r}function Xrt(e){return typeof e=="boolean"}var Qrt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new uEe;return n&&(Xrt(n)?o.push(Wrt):o.push(Grt(n.extraArgument))),o},Jrt="RTK_autoBatch",lEe=e=>t=>{setTimeout(t,e)},Zrt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:lEe(10),eit=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Zrt:e.type==="callback"?e.queueNotification:lEe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Jrt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},tit=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new uEe(e);return r&&i.push(eit(typeof r=="object"?r:void 0)),i},nit=!0;function rit(e){const t=Qrt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(rY(n))a=Srt(n);else throw new Error(Lu(1));let u;typeof r=="function"?u=r(t):u=t();let l=SO;i&&(l=Krt({trace:!nit,...typeof i=="object"&&i}));const c=Trt(...u),f=tit(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Qwe(a,s,h)}function cEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Lu(28));if(a in t)throw new Error(Lu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function iit(e){return typeof e=="function"}function sit(e,t){let[n,r,i]=cEe(t),s;if(iit(e))s=()=>Nae(e());else{const a=Nae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(O0(c)){const h=f(c,u);return h===void 0?c:h}else{if(pm(c))return sEe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Lu(9))}return d}}return c},a)}return o.getInitialState=s,o}var oit="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ait=(e=21)=>{let t="",n=e;for(;n--;)t+=oit[Math.random()*64|0];return t},uit=Symbol.for("rtk-slice-createasyncthunk");function lit(e,t){return`${e}/${t}`}function cit({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[uit];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Lu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(hit()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Lu(12));if(E in l.sliceCaseReducersByType)throw new Error(Lu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:lit(s,b),createNotation:typeof i.reducers=="function"};mit(w)?yit(E,w,c,t):pit(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?cEe(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return sit(i.initialState,T=>{for(let A in S)T.addCase(A,S[A]);for(let A of l.sliceMatchers)T.addMatcher(A.matcher,A.reducer);for(let A of w)T.addMatcher(A.matcher,A.reducer);E&&T.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(T){let A=T[b];return typeof A>"u"&&w&&(A=g()),A}function S(T=d){const A=Pae(h,w,{insert:()=>new WeakMap});return Pae(A,T,{insert:()=>{const C={};for(const[I,R]of Object.entries(i.selectors??{}))C[I]=fit(R,T,g,w);return C}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function fit(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var dit=cit();function hit(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function pit({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!git(r))throw new Error(Lu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?fE(e,o):fE(e))}function mit(e){return e._reducerDefinitionType==="asyncThunk"}function git(e){return e._reducerDefinitionType==="reducerWithPrepare"}function yit({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Lu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||tN,pending:a||tN,rejected:u||tN,settled:l||tN})}function tN(){}var vit=(e,t)=>{if(typeof e!="function")throw new Error(Lu(32))},aY="listenerMiddleware",bit=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=fE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Lu(21));return vit(s),{predicate:i,type:t,effect:s}},_it=Object.assign(e=>{const{type:t,predicate:n,effect:r}=bit(e);return{id:ait(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Lu(22))}}},{withTypes:()=>_it}),wit=Object.assign(fE(`${aY}/add`),{withTypes:()=>wit});fE(`${aY}/removeAll`);var Eit=Object.assign(fE(`${aY}/remove`),{withTypes:()=>Eit});function Lu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function mm(e){return e.components.flatMap(t=>typeof t=="string"?t:mm(t))}function fEe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:fEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function dEe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+mm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+mm(e).length-1}];r+=1}else{const o=dEe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function hEe(e,t){const n=dEe(e,t,0);return typeof n=="number"?null:n}function pEe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=pEe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function xit(e,t){const n=pEe(e,t,0);return n.found?n.distance:-1}function mEe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...mEe(i,`${t}-${s}`))}),n}async function Sit(e,t,n,r,i,s){const o=mm(n),a=Object.fromEntries(o.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:Object.keys(i).length>0?i:a,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=dit({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}}}});return{store:rit({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const gEe=N.createContext(null);function Fh(){return N.useContext(gEe).actions}const jh=Xwe,Lc=crt;function Tit(e){return Lc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function uY(){return Lc(e=>mm(e.sequence))}function UI(){const{studyId:e}=aE();return`${e}`}function qm(){const{index:e}=aE(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Wm(){const e=qm(),t=uY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var IO={exports:{}};IO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",F="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[R]=j[M]=j[P]=j[O]=j[F]=j[L]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[C]=j[c]=j[I]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[A]=!1;var q=typeof Js=="object"&&Js&&Js.Object===Object&&Js,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ye=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,Ct=Array(te);++Re<te;)Ct[Re]=ue(Re);return Ct}function gt(te){return function(ue){return te(ue)}}function rt(te,ue){return te==null?void 0:te[ue]}function be(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Dt=ne["__core-js_shared__"],We=ze.toString,me=ct.hasOwnProperty,dt=function(){var te=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),yt=ct.toString,pe=We.call(Object),Ce=RegExp("^"+We.call(me).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Mn=be(Object.getPrototypeOf,Object),Tr=Object.create,Ln=ct.propertyIsEnumerable,cr=ke.splice,hn=ut?ut.toStringTag:void 0,Sn=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,Fo=Date.now,$i=qe(ne,"Map"),Tn=qe(Object,"create"),Mi=function(){function te(){}return function(ue){if(!op(ue))return{};if(Tr)return Tr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Ar(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function fs(){this.__data__=Tn?Tn(null):{},this.size=0}function np(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function rl(te){var ue=this.__data__;if(Tn){var Re=ue[te];return Re===r?void 0:Re}return me.call(ue,te)?ue[te]:void 0}function ad(te){var ue=this.__data__;return Tn?ue[te]!==void 0:me.call(ue,te)}function Er(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=Tn&&ue===void 0?r:ue,this}Ar.prototype.clear=fs,Ar.prototype.delete=np,Ar.prototype.get=rl,Ar.prototype.has=ad,Ar.prototype.set=Er;function Ti(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function Yr(){this.__data__=[],this.size=0}function ou(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var Ct=ue.length-1;return Re==Ct?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Sa(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function Ta(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,Ct=Jn(Re,te);return Ct<0?(++this.size,Re.push([te,ue])):Re[Ct][1]=ue,this}Ti.prototype.clear=Yr,Ti.prototype.delete=ou,Ti.prototype.get=Sa,Ti.prototype.has=Ta,Ti.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ae(){this.size=0,this.__data__={hash:new Ar,map:new($i||Ti),string:new Ar}}function Se(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function xe(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),Ct=Re.size;return Re.set(te,ue),this.size+=Re.size==Ct?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Se,ee.prototype.get=xe,ee.prototype.has=ot,ee.prototype.set=St;function Vt(te){var ue=this.__data__=new Ti(te);this.size=ue.size}function Dn(){this.__data__=new Ti,this.size=0}function Fn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function fn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function Cr(te,ue){var Re=this.__data__;if(Re instanceof Ti){var Ct=Re.__data__;if(!$i||Ct.length<n-1)return Ct.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(Ct)}return Re.set(te,ue),this.size=Re.size,this}Vt.prototype.clear=Dn,Vt.prototype.delete=Fn,Vt.prototype.get=fn,Vt.prototype.has=ir,Vt.prototype.set=Cr;function zt(te,ue){var Re=ip(te),Ct=!Re&&au(te),On=!Re&&!Ct&&sp(te),xr=!Re&&!Ct&&!On&&vR(te),Vr=Re||Ct||On||xr,Bn=Vr?Ue(te.length,String):[],Hr=Bn.length;for(var Ji in te)Vr&&(Ji=="length"||On&&(Ji=="offset"||Ji=="parent")||xr&&(Ji=="buffer"||Ji=="byteLength"||Ji=="byteOffset")||Et(Ji,Hr))||Bn.push(Ji);return Bn}function sr(te,ue,Re){(Re!==void 0&&!Gl(te[ue],Re)||Re===void 0&&!(ue in te))&&Ai(te,ue,Re)}function zr(te,ue,Re){var Ct=te[ue];(!(me.call(te,ue)&&Gl(Ct,Re))||Re===void 0&&!(ue in te))&&Ai(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(Gl(te[Re][0],ue))return Re;return-1}function Ai(te,ue,Re){ue=="__proto__"&&Sn?Sn(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Bs=Oe();function Kr(te){return te==null?te===void 0?T:y:hn&&hn in Object(te)?Ge(te):Bo(te)}function fo(te){return uu(te)&&Kr(te)==a}function Li(te){if(!op(te)||jn(te))return!1;var ue=MS(te)?Ce:z;return ue.test(mR(te))}function Fi(te){return uu(te)&&yR(te.length)&&!!j[Kr(te)]}function jo(te){if(!op(te))return kr(te);var ue=Ir(te),Re=[];for(var Ct in te)Ct=="constructor"&&(ue||!me.call(te,Ct))||Re.push(Ct);return Re}function Aa(te,ue,Re,Ct,On){te!==ue&&Bs(ue,function(xr,Vr){if(On||(On=new Vt),op(xr))Us(te,ue,Vr,Re,Aa,Ct,On);else{var Bn=Ct?Ct(rp(te,Vr),xr,Vr+"",te,ue,On):void 0;Bn===void 0&&(Bn=xr),sr(te,Vr,Bn)}},Xy)}function Us(te,ue,Re,Ct,On,xr,Vr){var Bn=rp(te,Re),Hr=rp(ue,Re),Ji=Vr.get(Hr);if(Ji){sr(te,Re,Ji);return}var Uo=xr?xr(Bn,Hr,Re+"",te,ue,Vr):void 0,Jy=Uo===void 0;if(Jy){var ap=ip(Hr),Kb=!ap&&sp(Hr),Xb=!ap&&!Kb&&vR(Hr);Uo=Hr,ap||Kb||Xb?ip(Bn)?Uo=Bn:gR(Bn)?Uo=fe(Bn):Kb?(Jy=!1,Uo=Y(Hr)):Xb?(Jy=!1,Uo=Z(Hr)):Uo=[]:u5(Hr)||au(Hr)?(Uo=Bn,au(Bn)?Uo=Ky(Bn):(!op(Bn)||MS(Bn))&&(Uo=it(Hr))):Jy=!1}Jy&&(Vr.set(Hr,Uo),On(Uo,Hr,Ct,xr,Vr),Vr.delete(Hr)),sr(te,Re,Uo)}function Wl(te,ue){return $S(ld(te,ue,lg),te+"")}var ud=Sn?function(te,ue){return Sn(te,"toString",{configurable:!0,enumerable:!1,value:Qy(ue),writable:!0})}:lg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,Ct=te.length;for(ue||(ue=Array(Ct));++Re<Ct;)ue[Re]=te[Re];return ue}function ge(te,ue,Re,Ct){var On=!Re;Re||(Re={});for(var xr=-1,Vr=ue.length;++xr<Vr;){var Bn=ue[xr],Hr=void 0;Hr===void 0&&(Hr=te[Bn]),On?Ai(Re,Bn,Hr):zr(Re,Bn,Hr)}return Re}function le(te){return Wl(function(ue,Re){var Ct=-1,On=Re.length,xr=On>1?Re[On-1]:void 0,Vr=On>2?Re[2]:void 0;for(xr=te.length>3&&typeof xr=="function"?(On--,xr):void 0,Vr&&dn(Re[0],Re[1],Vr)&&(xr=On<3?void 0:xr,On=1),ue=Object(ue);++Ct<On;){var Bn=Re[Ct];Bn&&te(ue,Bn,Ct,xr)}return ue})}function Oe(te){return function(ue,Re,Ct){for(var On=-1,xr=Object(ue),Vr=Ct(ue),Bn=Vr.length;Bn--;){var Hr=Vr[++On];if(Re(xr[Hr],Hr,xr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Nt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=rt(te,ue);return Li(Re)?Re:void 0}function Ge(te){var ue=me.call(te,hn),Re=te[hn];try{te[hn]=void 0;var Ct=!0}catch{}var On=yt.call(te);return Ct&&(ue?te[hn]=Re:delete te[hn]),On}function it(te){return typeof te.constructor=="function"&&!Ir(te)?Mi(Mn(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function dn(te,ue,Re){if(!op(Re))return!1;var Ct=typeof ue;return(Ct=="number"?Yb(Re)&&Et(ue,Re.length):Ct=="string"&&ue in Re)?Gl(Re[ue],te):!1}function Nt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function jn(te){return!!dt&&dt in te}function Ir(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function kr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Bo(te){return yt.call(te)}function ld(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var Ct=arguments,On=-1,xr=rr(Ct.length-ue,0),Vr=Array(xr);++On<xr;)Vr[On]=Ct[ue+On];On=-1;for(var Bn=Array(ue+1);++On<ue;)Bn[On]=Ct[On];return Bn[ue]=Re(Vr),Ke(te,this,Bn)}}function rp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var $S=Yy(ud);function Yy(te){var ue=0,Re=0;return function(){var Ct=Fo(),On=s-(Ct-Re);if(Re=Ct,On>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function mR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function Gl(te,ue){return te===ue||te!==te&&ue!==ue}var au=fo(function(){return arguments}())?fo:function(te){return uu(te)&&me.call(te,"callee")&&!Ln.call(te,"callee")},ip=Array.isArray;function Yb(te){return te!=null&&yR(te.length)&&!MS(te)}function gR(te){return uu(te)&&Yb(te)}var sp=nr||_R;function MS(te){if(!op(te))return!1;var ue=Kr(te);return ue==h||ue==p||ue==l||ue==b}function yR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function op(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function uu(te){return te!=null&&typeof te=="object"}function u5(te){if(!uu(te)||Kr(te)!=v)return!1;var ue=Mn(te);if(ue===null)return!0;var Re=me.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==pe}var vR=ve?gt(ve):Fi;function Ky(te){return ge(te,Xy(te))}function Xy(te){return Yb(te)?zt(te):jo(te)}var bR=le(function(te,ue,Re){Aa(te,ue,Re)});function Qy(te){return function(){return te}}function lg(te){return te}function _R(){return!1}e.exports=bR})(IO,IO.exports);var Ait=IO.exports;const lY=Ul(Ait);function cv(e){return structuredClone(e)}function cY(){const{answers:e}=Lc(i=>i),t=qm(),r=`${Wm()}_${t}`;return e[r]}const yEe=N.createContext(null);function Cit(){const e=N.useContext(yEe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function gm(){return Lc(e=>e.config)}function Dae(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function vEe(){const e=qm(),t=uY(),r=`${Wm()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Lc(w=>w),a=jh(),{saveTrialAnswer:u,setIframeAnswers:l}=Fh(),{storageEngine:c}=wa(),f=Tit(r),d=typeof e!="number"||!f,h=cY(),p=Hm(),m=gm(),g=UI(),y=N.useMemo(()=>Date.now(),[]),v=Cit(),b=N.useCallback(()=>{if(typeof e!="number")return;const w=cv(i[r]),E=Object.values(w).reduce((P,O)=>Object.hasOwn(O,"values")?{...P,...O.values}:P,{}),{provenanceGraph:S}=w,T=Date.now(),A=v&&"current"in v&&v.current?v.current.splice(0,v.current.length):[];h.endTime||(a(u({identifier:r,answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A})),c&&c.saveAnswers({...o,[r]:{answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A}}),a(l({})));let C=e+1;const I=hEe(s,e),R=I!==null&&I.some(P=>Object.hasOwn(P.currentBlock,"skip")&&P.currentBlock.skip!==void 0),M={...o,[r]:{answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A}};R&&[...I.flatMap(O=>O.currentBlock.skip?O.currentBlock.skip.map(F=>({...F,firstIndex:O.firstIndex,lastIndex:O.lastIndex})):[])].some(O=>{let F=!1;const L=Object.fromEntries(Object.entries(M).filter(([U])=>{const H=parseInt(U.slice(U.lastIndexOf("_")+1),10);return H>=O.firstIndex&&H<=e})),B=O.check!=="block"?Object.entries(L).filter(([U])=>U.slice(0,U.lastIndexOf("_"))===O.name):Object.entries(L);if(B.length===0)return!1;if(B.some(([U,H])=>!H))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(O,null,2)}`);if(O.check==="response"||O.check==="responses"){const[U,H]=B[0];O.check==="response"?F=O.value!==H.answer[O.responseId]:F=!Dae(H.answer,U,m.components[U.slice(0,U.lastIndexOf("_"))],m)}else if(O.check==="block"||O.check==="repeatedComponent"){if(B.length<O.value)return!1;const U=B.map(([z,W])=>Dae(W.answer,z,m.components[z.slice(0,z.lastIndexOf("_"))],m)),H=U.filter(z=>z).length,D=U.length-H;F=O.condition==="numCorrect"&&H===O.value||O.condition==="numIncorrect"&&D===O.value}if(F){const U=t.indexOf(O.to),H=U===-1?xit(s,O.to):-1;return C=U===-1?H:U,!0}return!1}),p(`/${g}/${C}${window.location.search}`)},[i,r,v,h,e,s,o,y,p,g,a,u,c,l,m,t]);return{isNextDisabled:d,goToNextStep:b}}function Iit({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=vEe(),o=N.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(Rn,{type:"submit",disabled:t||i,onClick:o,children:e})}function kit(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Rit=typeof window<"u"?N.useLayoutEffect:N.useEffect;function po(e,t){Rit(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Nit(e,t){e&&kit(e),po(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),po(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),po(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),po(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),po(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),po(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),po(`mantine-form:${e}:clear-errors`,t.clearErrors),po(`mantine-form:${e}:reset`,t.reset),po(`mantine-form:${e}:validate`,t.validate),po(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),po(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),po(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),po(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),po(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),po(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),po(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),po(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Pit(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function VU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Dit(e){const[t,n]=N.useState(VU(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=VU(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function bEe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Oae(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function $ae(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=bEe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Oae(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Oae(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Oit(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Mae(e,t,n){typeof n.value=="object"&&(n.value=X_(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function X_(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(X_(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(X_(a),X_(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(X_(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Mae(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Mae(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function _Ee(e){return typeof e!="string"?[]:e.split(".")}function Cu(e,t){const n=_Ee(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function PL(e,t,n){const r=_Ee(e);if(r.length===0)return n;const i=X_(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function $it(e,{from:t,to:n},r){const i=Cu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),PL(e,s,r)}function Mit(e,t,n,r){const i=Cu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),PL(e,s,r)}function Lit(e,t,n){const r=Cu(e,n);return Array.isArray(r)?PL(e,r.filter((i,s)=>s!==t),n):n}function Fit({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Oit(o,a,u)),e.setValues({values:$it(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>$ae(o,a,u,-1)),e.setValues({values:Lit(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>$ae(o,u,l,1)),e.setValues({values:Mit(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var fY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const MP=Ul(fY);function nN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function jit({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=N.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=N.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=N.useCallback((E,S)=>{c(T=>nN(T,E)===S?T:{...T,[E]:S})},[]),m=N.useCallback((E,S)=>{f(T=>nN(T,E)===S?T:{...T,[E]:S})},[]),g=N.useCallback(E=>nN(u.current,E),[]),y=N.useCallback(E=>f(S=>{if(typeof E!="string")return S;const T=bEe(E,S);return delete T[E],MP(T,S)?S:T}),[]),v=N.useCallback(E=>{if(E){const T=Cu(E,l.current);if(typeof T=="boolean")return T;const A=Cu(E,r.refValues.current),C=Cu(E,r.valuesSnapshot.current);return!MP(A,C)}return Object.keys(l.current).length>0?nN(l.current):!MP(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),w=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Bit({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Cu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=PL(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Uit({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Cu(i,o.previousValues),value:Cu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Lae(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Fae(e){const t=VU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function HU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Cu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>HU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||HU(o,t,a,i)),i},r)}function qU(e,t){return Fae(typeof e=="function"?e(t):HU(e,t))}function rN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=qU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const zit="__MANTINE_FORM_INDEX__";function jae(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${zit}`)):!1:!1}function wEe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Dit(r),p=Bit({initialValues:n,onValuesChange:l,mode:t}),m=jit({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Fit({$values:p,$errors:h,$status:m}),y=Uit({$status:m}),[v,b]=N.useState(0),[w,E]=N.useState({}),S=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),T=N.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),A=N.useCallback((D,z,W)=>{const j=jae(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?q=>{const G=rN(D,d,q.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[D]:(q[D]||0)+1})):null]})},[l,d]),C=N.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Cu(W,p.refValues.current),q=Cu(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),I=N.useCallback(()=>{const D=qU(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),R=N.useCallback(D=>{const z=rN(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),M=(D,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:Pit(ce=>A(D,ce,{forceUpdate:!1})),"data-path":Lae(e,D)};return W&&(ne.error=h.errorsState[D]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Cu(D,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Cu(D,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(D,!0),ne.onBlur=()=>{if(jae(D,u)){const ce=rN(D,d,p.refValues.current);ce.hasError?h.setFieldError(D,ce.error):h.clearFieldError(D)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:D,options:{type:z,withError:W,withFocus:j,...q},form:H}))},P=(D,z)=>W=>{W==null||W.preventDefault();const j=I();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},O=D=>c(D||p.refValues.current),F=N.useCallback(D=>{D.preventDefault(),S()},[]),L=N.useCallback(D=>D?!rN(D,d,p.refValues.current).hasError:!qU(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,U=N.useCallback(D=>document.querySelector(`[data-path="${Lae(e,D)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:I,validateField:R,getInputProps:M,onSubmit:P,onReset:F,isValid:L,getTransformedValues:O,key:B,getInputNode:U};return Nit(e,H),H}function Vit(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Hit(e){return Vit(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const qit=new URLSearchParams(window.location.search),Wit=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?qit.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Git=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Yit(e,t,n){const[r,i]=N.useState(null),s=wEe({initialValues:Wit(e,n),validate:Git(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Sb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Kit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(fm.Group,{label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:u,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Os,{mt:"xs",children:a.map(l=>_.jsx(fm,{disabled:t,value:l.value,label:l.label},l.value))})})}function Xit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(PI,{disabled:t,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Sb(e,n,u)})}function Qit({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(Pi.Wrapper,{label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(If,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(If.Item,{children:a},a)):_.jsx(If.Item,{children:t.value})})})}function EEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(kv.Group,{name:`radioInput${e.id}`,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:c,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Os,{mt:"xs",children:[u?_.jsx(st,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(kv,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(st,{children:l})]})},e.id)}function Jit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(EEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Zit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(pG,{disabled:t,placeholder:l,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Sb(e,n)})}function est({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Sb(e,n);return _.jsx(Pi.Wrapper,{label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(gL,{disabled:t,marks:a,...n,h:40})})}function tst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(lv,{disabled:t,placeholder:s,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function nst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(nG,{disabled:t,placeholder:s,label:_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function rst({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=OG(),u=gm().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(Ee,{mb:"md",children:[e.type==="numerical"&&_.jsx(Zit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(tst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(nst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Jit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Xit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(est,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(EEe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Kit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Qit,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function kO({config:e,location:t,status:n,style:r}){var w;const i=qm(),s=Wm(),o=n==null?void 0:n.answer,a=e,u=N.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=jh(),{updateResponseBlockValidation:c}=Fh(),f=Yit(u,i,o||{}),[d,h]=N.useState(void 0),[p,m]=N.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Lc(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return N.useEffect(()=>{const E=u.find(S=>S.type==="iframe");if(g&&E){const S=E.id;f.setValues({...f.values,[S]:g[S]})}},[g]),N.useEffect(()=>{y&&h(y)},[y]),N.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:cv(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,S)=>{var T,A;return _.jsx(Un.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(rst,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:S+1}),v&&p&&_.jsx(st,{children:`The correct answer is: ${(A=(T=a.correctAnswer)==null?void 0:T.find(C=>C.id===E.id))==null?void 0:A.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(Os,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(Rn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(Iit,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const ZS="@REVISIT_COMMS",ist={minHeight:"500px",width:"100%",border:0};function sst({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Fh(),r=jh(),i=Xwe(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Wm(),u=Hm(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${ZS}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${ZS}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${ZS}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${ZS}/ANSWERS`:r(t(d.message));break;case`${ZS}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Mh}${e.path}?trialid=${a}&id=${o}`,style:ist})}async function dY(e){const n=await(await fetch(`${Mh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Nv({email:e,path:t}){const n=wb();return _.jsxs(Dh,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(ki,{order:2,children:_.jsx(st,{span:!0,c:"orange",children:"404"})}),_.jsxs(st,{children:[_.jsx(st,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(kf,{h:"lg"}),_.jsxs(If,{children:[_.jsx(If.Item,{children:_.jsx(st,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(If.Item,{children:_.jsxs(st,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Sx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const ost={maxWidth:"100%"};function ast({currentConfig:e}){const t={...ost,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await dY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Sy,{mx:"auto",src:`${Mh}${e.path}`,style:t}):_.jsx(Nv,{path:e.path})}function Yp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ust(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lx(e){let t,n,r;e.length!==2?(t=Yp,n=(a,u)=>Yp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Yp||e===ust?e:lst,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function lst(){return 0}function xEe(e){return e===null?NaN:+e}function*cst(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const SEe=Lx(Yp),$0=SEe.right,fst=SEe.left;Lx(xEe).center;function dst(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function hst(e,t){const n=dst(e,t);return n&&Math.sqrt(n)}function Bae(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ha{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Uae extends Map{constructor(t,n=CEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(WU(this,t))}has(t){return super.has(WU(this,t))}set(t,n){return super.set(TEe(this,t),n)}delete(t){return super.delete(AEe(this,t))}}class RO extends Set{constructor(t,n=CEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(WU(this,t))}add(t){return super.add(TEe(this,t))}delete(t){return super.delete(AEe(this,t))}}function WU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function TEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function AEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function CEe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function pst(e,t){return Array.from(t,n=>e[n])}function mst(e=Yp){if(e===Yp)return IEe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function IEe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const gst=Math.sqrt(50),yst=Math.sqrt(10),vst=Math.sqrt(2);function NO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=gst?10:s>=yst?5:s>=vst?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?NO(e,t,n*2):[a,u,l]}function GU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?NO(t,e,n):NO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function YU(e,t,n){return t=+t,e=+e,n=+n,NO(e,t,n)[2]}function M0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?YU(t,e,n):YU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function h0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function KU(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function kEe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?IEe:mst(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));kEe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(eT(e,n,t),i(e[r],s)>0&&eT(e,n,r);o<a;){for(eT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?eT(e,n,a):(++a,eT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function eT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function XU(e,t,n){if(e=Float64Array.from(cst(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return KU(e);if(t>=1)return h0(e);var r,i=(r-1)*t,s=Math.floor(i),o=h0(kEe(e,s).subarray(0,s+1)),a=KU(e.subarray(s+1));return o+(a-o)*(i-s)}}function REe(e,t,n=xEe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function bst(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function NEe(e,t){return XU(e,.5,t)}function*_st(e){for(const t of e)yield*t}function PEe(e){return Array.from(_st(e))}function Iu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function DEe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function wst(e,...t){e=new RO(e),t=t.map(Est);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Est(e){return e instanceof RO?e:new RO(e)}function xst(...e){const t=new RO;for(const n of e)for(const r of n)t.add(r);return t}var Sst={value:()=>{}};function DL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new LP(n)}function LP(e){this._=e}function Tst(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}LP.prototype=DL.prototype={constructor:LP,on:function(e,t){var n=this._,r=Tst(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Ast(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=zae(n[i],e.name,t);else if(t==null)for(i in n)n[i]=zae(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new LP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Ast(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function zae(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Sst,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var QU="http://www.w3.org/1999/xhtml";const Vae={svg:"http://www.w3.org/2000/svg",xhtml:QU,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function OL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Vae.hasOwnProperty(t)?{space:Vae[t],local:e}:e}function Cst(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===QU&&t.documentElement.namespaceURI===QU?t.createElement(e):t.createElementNS(n,e)}}function Ist(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function OEe(e){var t=OL(e);return(t.local?Ist:Cst)(t)}function kst(){}function hY(e){return e==null?kst:function(){return this.querySelector(e)}}function Rst(e){typeof e!="function"&&(e=hY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ya(r,this._parents)}function $Ee(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Nst(){return[]}function MEe(e){return e==null?Nst:function(){return this.querySelectorAll(e)}}function Pst(e){return function(){return $Ee(e.apply(this,arguments))}}function Dst(e){typeof e=="function"?e=Pst(e):e=MEe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ya(r,i)}function LEe(e){return function(){return this.matches(e)}}function FEe(e){return function(t){return t.matches(e)}}var Ost=Array.prototype.find;function $st(e){return function(){return Ost.call(this.children,e)}}function Mst(){return this.firstElementChild}function Lst(e){return this.select(e==null?Mst:$st(typeof e=="function"?e:FEe(e)))}var Fst=Array.prototype.filter;function jst(){return Array.from(this.children)}function Bst(e){return function(){return Fst.call(this.children,e)}}function Ust(e){return this.selectAll(e==null?jst:Bst(typeof e=="function"?e:FEe(e)))}function zst(e){typeof e!="function"&&(e=LEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ya(r,this._parents)}function jEe(e){return new Array(e.length)}function Vst(){return new Ya(this._enter||this._groups.map(jEe),this._parents)}function PO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}PO.prototype={constructor:PO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Hst(e){return function(){return e}}function qst(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new PO(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Wst(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new PO(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Gst(e){return e.__data__}function Yst(e,t){if(!arguments.length)return Array.from(this,Gst);var n=t?Wst:qst,r=this._parents,i=this._groups;typeof e!="function"&&(e=Hst(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Kst(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Ya(o,r),o._enter=a,o._exit=u,o}function Kst(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xst(){return new Ya(this._exit||this._groups.map(jEe),this._parents)}function Qst(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Jst(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ya(a,this._parents)}function Zst(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function eot(e){e||(e=tot);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ya(i,this._parents).order()}function tot(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function not(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function rot(){return Array.from(this)}function iot(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function sot(){let e=0;for(const t of this)++e;return e}function oot(){return!this.node()}function aot(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function uot(e){return function(){this.removeAttribute(e)}}function lot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cot(e,t){return function(){this.setAttribute(e,t)}}function fot(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function dot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function hot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function pot(e,t){var n=OL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?lot:uot:typeof t=="function"?n.local?hot:dot:n.local?fot:cot)(n,t))}function BEe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mot(e){return function(){this.style.removeProperty(e)}}function got(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yot(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function vot(e,t,n){return arguments.length>1?this.each((t==null?mot:typeof t=="function"?yot:got)(e,t,n??"")):dE(this.node(),e)}function dE(e,t){return e.style.getPropertyValue(t)||BEe(e).getComputedStyle(e,null).getPropertyValue(t)}function bot(e){return function(){delete this[e]}}function _ot(e,t){return function(){this[e]=t}}function wot(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Eot(e,t){return arguments.length>1?this.each((t==null?bot:typeof t=="function"?wot:_ot)(e,t)):this.node()[e]}function UEe(e){return e.trim().split(/^|\s+/)}function pY(e){return e.classList||new zEe(e)}function zEe(e){this._node=e,this._names=UEe(e.getAttribute("class")||"")}zEe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function VEe(e,t){for(var n=pY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function HEe(e,t){for(var n=pY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function xot(e){return function(){VEe(this,e)}}function Sot(e){return function(){HEe(this,e)}}function Tot(e,t){return function(){(t.apply(this,arguments)?VEe:HEe)(this,e)}}function Aot(e,t){var n=UEe(e+"");if(arguments.length<2){for(var r=pY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Tot:t?xot:Sot)(n,t))}function Cot(){this.textContent=""}function Iot(e){return function(){this.textContent=e}}function kot(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Rot(e){return arguments.length?this.each(e==null?Cot:(typeof e=="function"?kot:Iot)(e)):this.node().textContent}function Not(){this.innerHTML=""}function Pot(e){return function(){this.innerHTML=e}}function Dot(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Oot(e){return arguments.length?this.each(e==null?Not:(typeof e=="function"?Dot:Pot)(e)):this.node().innerHTML}function $ot(){this.nextSibling&&this.parentNode.appendChild(this)}function Mot(){return this.each($ot)}function Lot(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fot(){return this.each(Lot)}function jot(e){var t=typeof e=="function"?e:OEe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Bot(){return null}function Uot(e,t){var n=typeof e=="function"?e:OEe(e),r=t==null?Bot:typeof t=="function"?t:hY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zot(){var e=this.parentNode;e&&e.removeChild(this)}function Vot(){return this.each(zot)}function Hot(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qot(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wot(e){return this.select(e?qot:Hot)}function Got(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Yot(e){return function(t){e.call(this,t,this.__data__)}}function Kot(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Xot(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Qot(e,t,n){return function(){var r=this.__on,i,s=Yot(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Jot(e,t,n){var r=Kot(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Qot:Xot,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function qEe(e,t,n){var r=BEe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Zot(e,t){return function(){return qEe(this,e,t)}}function eat(e,t){return function(){return qEe(this,e,t.apply(this,arguments))}}function tat(e,t){return this.each((typeof t=="function"?eat:Zot)(e,t))}function*nat(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var mY=[null];function Ya(e,t){this._groups=e,this._parents=t}function zI(){return new Ya([[document.documentElement]],mY)}function rat(){return this}Ya.prototype=zI.prototype={constructor:Ya,select:Rst,selectAll:Dst,selectChild:Lst,selectChildren:Ust,filter:zst,data:Yst,enter:Vst,exit:Xst,join:Qst,merge:Jst,selection:rat,order:Zst,sort:eot,call:not,nodes:rot,node:iot,size:sot,empty:oot,each:aot,attr:pot,style:vot,property:Eot,classed:Aot,text:Rot,html:Oot,raise:Mot,lower:Fot,append:jot,insert:Uot,remove:Vot,clone:Wot,datum:Got,on:Jot,dispatch:tat,[Symbol.iterator]:nat};function ps(e){return typeof e=="string"?new Ya([[document.querySelector(e)]],[document.documentElement]):new Ya([[e]],mY)}function iat(e){let t;for(;t=e.sourceEvent;)e=t;return e}function JU(e,t){if(e=iat(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function sat(e){return typeof e=="string"?new Ya([document.querySelectorAll(e)],[document.documentElement]):new Ya([$Ee(e)],mY)}const ZU={capture:!0,passive:!1};function e7(e){e.preventDefault(),e.stopImmediatePropagation()}function oat(e){var t=e.document.documentElement,n=ps(e).on("dragstart.drag",e7,ZU);"onselectstart"in t?n.on("selectstart.drag",e7,ZU):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function aat(e,t){var n=e.document.documentElement,r=ps(e).on("dragstart.drag",null);t&&(r.on("click.drag",e7,ZU),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Fx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function VI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cy(){}var Pv=.7,hE=1/Pv,Ew="\\s*([+-]?\\d+)\\s*",s2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uat=/^#([0-9a-f]{3,8})$/,lat=new RegExp(`^rgb\\(${Ew},${Ew},${Ew}\\)$`),cat=new RegExp(`^rgb\\(${Zd},${Zd},${Zd}\\)$`),fat=new RegExp(`^rgba\\(${Ew},${Ew},${Ew},${s2}\\)$`),dat=new RegExp(`^rgba\\(${Zd},${Zd},${Zd},${s2}\\)$`),hat=new RegExp(`^hsl\\(${s2},${Zd},${Zd}\\)$`),pat=new RegExp(`^hsla\\(${s2},${Zd},${Zd},${s2}\\)$`),Hae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fx(Cy,Dv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:qae,formatHex:qae,formatHex8:mat,formatHsl:gat,formatRgb:Wae,toString:Wae});function qae(){return this.rgb().formatHex()}function mat(){return this.rgb().formatHex8()}function gat(){return WEe(this).formatHsl()}function Wae(){return this.rgb().formatRgb()}function Dv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uat.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Gae(t):n===3?new eo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?iN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?iN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lat.exec(e))?new eo(t[1],t[2],t[3],1):(t=cat.exec(e))?new eo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fat.exec(e))?iN(t[1],t[2],t[3],t[4]):(t=dat.exec(e))?iN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=hat.exec(e))?Xae(t[1],t[2]/100,t[3]/100,1):(t=pat.exec(e))?Xae(t[1],t[2]/100,t[3]/100,t[4]):Hae.hasOwnProperty(e)?Gae(Hae[e]):e==="transparent"?new eo(NaN,NaN,NaN,0):null}function Gae(e){return new eo(e>>16&255,e>>8&255,e&255,1)}function iN(e,t,n,r){return r<=0&&(e=t=n=NaN),new eo(e,t,n,r)}function gY(e){return e instanceof Cy||(e=Dv(e)),e?(e=e.rgb(),new eo(e.r,e.g,e.b,e.opacity)):new eo}function L0(e,t,n,r){return arguments.length===1?gY(e):new eo(e,t,n,r??1)}function eo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Fx(eo,L0,VI(Cy,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pv:Math.pow(Pv,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new eo(fv(this.r),fv(this.g),fv(this.b),DO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yae,formatHex:Yae,formatHex8:yat,formatRgb:Kae,toString:Kae}));function Yae(){return`#${W1(this.r)}${W1(this.g)}${W1(this.b)}`}function yat(){return`#${W1(this.r)}${W1(this.g)}${W1(this.b)}${W1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kae(){const e=DO(this.opacity);return`${e===1?"rgb(":"rgba("}${fv(this.r)}, ${fv(this.g)}, ${fv(this.b)}${e===1?")":`, ${e})`}`}function DO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function W1(e){return e=fv(e),(e<16?"0":"")+e.toString(16)}function Xae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pf(e,t,n,r)}function WEe(e){if(e instanceof pf)return new pf(e.h,e.s,e.l,e.opacity);if(e instanceof Cy||(e=Dv(e)),!e)return new pf;if(e instanceof pf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new pf(o,a,u,e.opacity)}function OO(e,t,n,r){return arguments.length===1?WEe(e):new pf(e,t,n,r??1)}function pf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fx(pf,OO,VI(Cy,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new pf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pv:Math.pow(Pv,e),new pf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new eo(x8(e>=240?e-240:e+120,i,r),x8(e,i,r),x8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new pf(Qae(this.h),sN(this.s),sN(this.l),DO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=DO(this.opacity);return`${e===1?"hsl(":"hsla("}${Qae(this.h)}, ${sN(this.s)*100}%, ${sN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Qae(e){return e=(e||0)%360,e<0?e+360:e}function sN(e){return Math.max(0,Math.min(1,e||0))}function x8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const GEe=Math.PI/180,YEe=180/Math.PI,$O=18,KEe=.96422,XEe=1,QEe=.82521,JEe=4/29,xw=6/29,ZEe=3*xw*xw,vat=xw*xw*xw;function exe(e){if(e instanceof eh)return new eh(e.l,e.a,e.b,e.opacity);if(e instanceof Lp)return txe(e);e instanceof eo||(e=gY(e));var t=C8(e.r),n=C8(e.g),r=C8(e.b),i=S8((.2225045*t+.7168786*n+.0606169*r)/XEe),s,o;return t===n&&n===r?s=o=i:(s=S8((.4360747*t+.3850649*n+.1430804*r)/KEe),o=S8((.0139322*t+.0971045*n+.7141733*r)/QEe)),new eh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function MO(e,t,n,r){return arguments.length===1?exe(e):new eh(e,t,n,r??1)}function eh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Fx(eh,MO,VI(Cy,{brighter(e){return new eh(this.l+$O*(e??1),this.a,this.b,this.opacity)},darker(e){return new eh(this.l-$O*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=KEe*T8(t),e=XEe*T8(e),n=QEe*T8(n),new eo(A8(3.1338561*t-1.6168667*e-.4906146*n),A8(-.9787684*t+1.9161415*e+.033454*n),A8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function S8(e){return e>vat?Math.pow(e,1/3):e/ZEe+JEe}function T8(e){return e>xw?e*e*e:ZEe*(e-JEe)}function A8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function C8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function bat(e){if(e instanceof Lp)return new Lp(e.h,e.c,e.l,e.opacity);if(e instanceof eh||(e=exe(e)),e.a===0&&e.b===0)return new Lp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*YEe;return new Lp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function LO(e,t,n,r){return arguments.length===1?bat(e):new Lp(e,t,n,r??1)}function Lp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function txe(e){if(isNaN(e.h))return new eh(e.l,0,0,e.opacity);var t=e.h*GEe;return new eh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fx(Lp,LO,VI(Cy,{brighter(e){return new Lp(this.h,this.c,this.l+$O*(e??1),this.opacity)},darker(e){return new Lp(this.h,this.c,this.l-$O*(e??1),this.opacity)},rgb(){return txe(this).rgb()}}));var nxe=-.14861,yY=1.78277,vY=-.29227,$L=-.90649,o2=1.97294,Jae=o2*$L,Zae=o2*yY,eue=yY*vY-$L*nxe;function _at(e){if(e instanceof dv)return new dv(e.h,e.s,e.l,e.opacity);e instanceof eo||(e=gY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(eue*r+Jae*t-Zae*n)/(eue+Jae-Zae),s=r-i,o=(o2*(n-i)-vY*s)/$L,a=Math.sqrt(o*o+s*s)/(o2*i*(1-i)),u=a?Math.atan2(o,s)*YEe-120:NaN;return new dv(u<0?u+360:u,a,i,e.opacity)}function t7(e,t,n,r){return arguments.length===1?_at(e):new dv(e,t,n,r??1)}function dv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fx(dv,t7,VI(Cy,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new dv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pv:Math.pow(Pv,e),new dv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*GEe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new eo(255*(t+n*(nxe*r+yY*i)),255*(t+n*(vY*r+$L*i)),255*(t+n*(o2*r)),this.opacity)}}));function rxe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function ixe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return rxe((n-r/t)*t,o,i,s,a)}}function sxe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return rxe((n-r/t)*t,i,s,o,a)}}const ML=e=>()=>e;function oxe(e,t){return function(n){return e+n*t}}function wat(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function LL(e,t){var n=t-e;return n?oxe(e,n>180||n<-180?n-360*Math.round(n/360):n):ML(isNaN(e)?t:e)}function Eat(e){return(e=+e)==1?to:function(t,n){return n-t?wat(t,n,e):ML(isNaN(t)?n:t)}}function to(e,t){var n=t-e;return n?oxe(e,n):ML(isNaN(e)?t:e)}const a2=function e(t){var n=Eat(t);function r(i,s){var o=n((i=L0(i)).r,(s=L0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=to(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function axe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=L0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var xat=axe(ixe),Sat=axe(sxe);function bY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function uxe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tat(e,t){return(uxe(t)?bY:lxe)(e,t)}function lxe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Gm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function cxe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function fxe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Gm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var n7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I8=new RegExp(n7.source,"g");function Aat(e){return function(){return e}}function Cat(e){return function(t){return e(t)+""}}function _Y(e,t){var n=n7.lastIndex=I8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=n7.exec(e))&&(i=I8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:oc(r,i)})),n=I8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Cat(u[0].x):Aat(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Gm(e,t){var n=typeof t,r;return t==null||n==="boolean"?ML(t):(n==="number"?oc:n==="string"?(r=Dv(t))?(t=r,a2):_Y:t instanceof Dv?a2:t instanceof Date?cxe:uxe(t)?bY:Array.isArray(t)?lxe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?fxe:oc)(e,t)}function Iat(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function kat(e,t){var n=LL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function HI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var tue=180/Math.PI,r7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dxe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*tue,skewX:Math.atan(u)*tue,scaleX:o,scaleY:a}}var oN;function Rat(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?r7:dxe(t.a,t.b,t.c,t.d,t.e,t.f)}function Nat(e){return e==null||(oN||(oN=document.createElementNS("http://www.w3.org/2000/svg","g")),oN.setAttribute("transform",e),!(e=oN.transform.baseVal.consolidate()))?r7:(e=e.matrix,dxe(e.a,e.b,e.c,e.d,e.e,e.f))}function hxe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:oc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:oc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var pxe=hxe(Rat,"px, ","px)","deg)"),mxe=hxe(Nat,", ",")",")"),Pat=1e-12;function nue(e){return((e=Math.exp(e))+1/e)/2}function Dat(e){return((e=Math.exp(e))-1/e)/2}function Oat(e){return((e=Math.exp(2*e))-1)/(e+1)}const $at=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Pat)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(T){var A=T*y,C=nue(E),I=l/(n*v)*(C*Oat(t*A+E)-Dat(E));return[a+I*h,u+I*p,l*C/nue(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function gxe(e){return function(t,n){var r=e((t=OO(t)).h,(n=OO(n)).h),i=to(t.s,n.s),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Mat=gxe(LL);var Lat=gxe(to);function Fat(e,t){var n=to((e=MO(e)).l,(t=MO(t)).l),r=to(e.a,t.a),i=to(e.b,t.b),s=to(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function yxe(e){return function(t,n){var r=e((t=LO(t)).h,(n=LO(n)).h),i=to(t.c,n.c),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const jat=yxe(LL);var Bat=yxe(to);function vxe(e){return function t(n){n=+n;function r(i,s){var o=e((i=t7(i)).h,(s=t7(s)).h),a=to(i.s,s.s),u=to(i.l,s.l),l=to(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Uat=vxe(LL);var zat=vxe(to);function wY(e,t){t===void 0&&(t=e,e=Gm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Vat(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Hat=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Gm,interpolateArray:Tat,interpolateBasis:ixe,interpolateBasisClosed:sxe,interpolateCubehelix:Uat,interpolateCubehelixLong:zat,interpolateDate:cxe,interpolateDiscrete:Iat,interpolateHcl:jat,interpolateHclLong:Bat,interpolateHsl:Mat,interpolateHslLong:Lat,interpolateHue:kat,interpolateLab:Fat,interpolateNumber:oc,interpolateNumberArray:bY,interpolateObject:fxe,interpolateRgb:a2,interpolateRgbBasis:xat,interpolateRgbBasisClosed:Sat,interpolateRound:HI,interpolateString:_Y,interpolateTransformCss:pxe,interpolateTransformSvg:mxe,interpolateZoom:$at,piecewise:wY,quantize:Vat},Symbol.toStringTag,{value:"Module"}));var pE=0,WT=0,tT=0,bxe=1e3,FO,GT,jO=0,Ov=0,FL=0,u2=typeof performance=="object"&&performance.now?performance:Date,_xe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jL(){return Ov||(_xe(qat),Ov=u2.now()+FL)}function qat(){Ov=0}function l2(){this._call=this._time=this._next=null}l2.prototype=EY.prototype={constructor:l2,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jL():+n)+(t==null?0:+t),!this._next&&GT!==this&&(GT?GT._next=this:FO=this,GT=this),this._call=e,this._time=n,i7()},stop:function(){this._call&&(this._call=null,this._time=1/0,i7())}};function EY(e,t,n){var r=new l2;return r.restart(e,t,n),r}function Wat(){jL(),++pE;for(var e=FO,t;e;)(t=Ov-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pE}function rue(){Ov=(jO=u2.now())+FL,pE=WT=0;try{Wat()}finally{pE=0,Yat(),Ov=0}}function Gat(){var e=u2.now(),t=e-jO;t>bxe&&(FL-=t,jO=e)}function Yat(){for(var e,t=FO,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:FO=n);GT=e,i7(r)}function i7(e){if(!pE){WT&&(WT=clearTimeout(WT));var t=e-Ov;t>24?(e<1/0&&(WT=setTimeout(rue,e-u2.now()-FL)),tT&&(tT=clearInterval(tT))):(tT||(jO=u2.now(),tT=setInterval(Gat,bxe)),pE=1,_xe(rue))}}function iue(e,t,n){var r=new l2;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Kat(e,t,n){var r=new l2,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?jL():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Xat=DL("start","end","cancel","interrupt"),Qat=[],wxe=0,sue=1,s7=2,FP=3,oue=4,o7=5,jP=6;function BL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Jat(e,n,{name:t,index:r,group:i,on:Xat,tween:Qat,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:wxe})}function xY(e,t){var n=Kf(e,t);if(n.state>wxe)throw new Error("too late; already scheduled");return n}function Bh(e,t){var n=Kf(e,t);if(n.state>FP)throw new Error("too late; already running");return n}function Kf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Jat(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=EY(s,0,n.time);function s(l){n.state=sue,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==sue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===FP)return iue(o);h.state===oue?(h.state=jP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=jP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(iue(function(){n.state===FP&&(n.state=oue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=s7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===s7){for(n.state=FP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=o7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===o7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=jP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function a7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>s7&&r.state<o7,r.state=jP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Zat(e){return this.each(function(){a7(this,e)})}function eut(e,t){var n,r;return function(){var i=Bh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function tut(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Bh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function nut(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Kf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?eut:tut)(n,e,t))}function SY(e,t,n){var r=e._id;return e.each(function(){var i=Bh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Kf(i,r).value[t]}}function Exe(e,t){var n;return(typeof t=="number"?oc:t instanceof Dv?a2:(n=Dv(t))?(t=n,a2):_Y)(e,t)}function rut(e){return function(){this.removeAttribute(e)}}function iut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function out(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function aut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function uut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function lut(e,t){var n=OL(e),r=n==="transform"?mxe:Exe;return this.attrTween(e,typeof t=="function"?(n.local?uut:aut)(n,r,SY(this,"attr."+e,t)):t==null?(n.local?iut:rut)(n):(n.local?out:sut)(n,r,t))}function cut(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function fut(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function dut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&fut(e,s)),n}return i._value=t,i}function hut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&cut(e,s)),n}return i._value=t,i}function put(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=OL(e);return this.tween(n,(r.local?dut:hut)(r,t))}function mut(e,t){return function(){xY(this,e).delay=+t.apply(this,arguments)}}function gut(e,t){return t=+t,function(){xY(this,e).delay=t}}function yut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mut:gut)(t,e)):Kf(this.node(),t).delay}function vut(e,t){return function(){Bh(this,e).duration=+t.apply(this,arguments)}}function but(e,t){return t=+t,function(){Bh(this,e).duration=t}}function _ut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vut:but)(t,e)):Kf(this.node(),t).duration}function wut(e,t){if(typeof t!="function")throw new Error;return function(){Bh(this,e).ease=t}}function Eut(e){var t=this._id;return arguments.length?this.each(wut(t,e)):Kf(this.node(),t).ease}function xut(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Bh(this,e).ease=n}}function Sut(e){if(typeof e!="function")throw new Error;return this.each(xut(this._id,e))}function Tut(e){typeof e!="function"&&(e=LEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new ym(r,this._parents,this._name,this._id)}function Aut(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new ym(o,this._parents,this._name,this._id)}function Cut(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Iut(e,t,n){var r,i,s=Cut(t)?xY:Bh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function kut(e,t){var n=this._id;return arguments.length<2?Kf(this.node(),n).on.on(e):this.each(Iut(n,e,t))}function Rut(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Nut(){return this.on("end.remove",Rut(this._id))}function Put(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,BL(l[d],t,n,d,l,Kf(c,n)));return new ym(s,this._parents,t,n)}function Dut(e){var t=this._name,n=this._id;typeof e!="function"&&(e=MEe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Kf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&BL(h,t,n,m,d,p);s.push(d),o.push(c)}return new ym(s,o,t,n)}var Out=zI.prototype.constructor;function $ut(){return new Out(this._groups,this._parents)}function Mut(e,t){var n,r,i;return function(){var s=dE(this,e),o=(this.style.removeProperty(e),dE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function xxe(e){return function(){this.style.removeProperty(e)}}function Lut(e,t,n){var r,i=n+"",s;return function(){var o=dE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Fut(e,t,n){var r,i,s;return function(){var o=dE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),dE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function jut(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Bh(this,e),l=u.on,c=u.value[s]==null?a||(a=xxe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function But(e,t,n){var r=(e+="")=="transform"?pxe:Exe;return t==null?this.styleTween(e,Mut(e,r)).on("end.style."+e,xxe(e)):typeof t=="function"?this.styleTween(e,Fut(e,r,SY(this,"style."+e,t))).each(jut(this._id,e)):this.styleTween(e,Lut(e,r,t),n).on("end.style."+e,null)}function Uut(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function zut(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Uut(e,o,n)),r}return s._value=t,s}function Vut(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,zut(e,t,n??""))}function Hut(e){return function(){this.textContent=e}}function qut(e){return function(){var t=e(this);this.textContent=t??""}}function Wut(e){return this.tween("text",typeof e=="function"?qut(SY(this,"text",e)):Hut(e==null?"":e+""))}function Gut(e){return function(t){this.textContent=e.call(this,t)}}function Yut(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Gut(i)),t}return r._value=e,r}function Kut(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Yut(e))}function Xut(){for(var e=this._name,t=this._id,n=Sxe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Kf(u,t);BL(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ym(r,this._parents,e,n)}function Qut(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Bh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Jut=0;function ym(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Sxe(){return++Jut}var up=zI.prototype;ym.prototype={constructor:ym,select:Put,selectAll:Dut,selectChild:up.selectChild,selectChildren:up.selectChildren,filter:Tut,merge:Aut,selection:$ut,transition:Xut,call:up.call,nodes:up.nodes,node:up.node,size:up.size,empty:up.empty,each:up.each,on:kut,attr:lut,attrTween:put,style:But,styleTween:Vut,text:Wut,textTween:Kut,remove:Nut,tween:nut,delay:yut,duration:_ut,ease:Eut,easeVarying:Sut,end:Qut,[Symbol.iterator]:up[Symbol.iterator]};const Zut=e=>+e;function elt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var tlt={time:null,delay:0,duration:250,ease:elt};function nlt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function rlt(e){var t,n;e instanceof ym?(t=e._id,e=e._name):(t=Sxe(),(n=tlt).time=jL(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&BL(u,e,t,l,o,n||nlt(u,t));return new ym(r,this._parents,e,t)}zI.prototype.interrupt=Zat;zI.prototype.transition=rlt;const k8=e=>()=>e;function ilt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function slt(e){e.stopImmediatePropagation()}function R8(e){e.preventDefault(),e.stopImmediatePropagation()}var aue={name:"drag"},N8={name:"space"},o_={name:"handle"},a_={name:"center"};const{abs:uue,max:Wo,min:Go}=Math;function lue(e){return[+e[0],+e[1]]}function u7(e){return[lue(e[0]),lue(e[1])]}var BP={name:"x",handles:["w","e"].map(c2),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},UP={name:"y",handles:["n","s"].map(c2),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},olt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(c2),input:function(e){return e==null?null:u7(e)},output:function(e){return e}},lp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},cue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},fue={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},alt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ult={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function c2(e){return{type:e}}function llt(e){return!e.ctrlKey&&!e.button}function clt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function flt(){return navigator.maxTouchPoints||"ontouchstart"in this}function P8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function dlt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function hlt(){return TY(BP)}function plt(){return TY(UP)}function mlt(){return TY(olt)}function TY(e){var t=clt,n=llt,r=flt,i=!0,s=DL("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([c2("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",lp.overlay).merge(y).each(function(){var b=P8(this).extent;ps(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([c2("selection")]).enter().append("rect").attr("class","selection").attr("cursor",lp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return lp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),S=w.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=Gm(S,T);function C(I){w.selection=I===1&&T===null?null:A(I),l.call(b),E.brush()}return S!==null&&T!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,S=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),T=c(b,w).beforestart();a7(b),E.selection=S===null?null:S,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=ps(this),y=P8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=ps(this.that).datum();s.call(g,this.that,new ilt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?aue:i&&g.altKey?a_:o_,w=e===UP?null:alt[v],E=e===BP?null:ult[v],S=P8(y),T=S.extent,A=S.selection,C=T[0][0],I,R,M=T[0][1],P,O,F=T[1][0],L,B,U=T[1][1],H,D,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],be=>{const ke=be.identifier;return be=JU(be,y),be.point0=be.slice(),be.identifier=ke,be});a7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const be=[ce[0],ce[1]||ce[0]];S.selection=A=[[I=e===UP?C:Go(be[0][0],be[1][0]),P=e===BP?M:Go(be[0][1],be[1][1])],[L=e===UP?F:Wo(be[0][0],be[1][0]),H=e===BP?U:Wo(be[0][1],be[1][1])]],ce.length>1&&Ke(g)}else I=A[0][0],P=A[0][1],L=A[1][0],H=A[1][1];R=I,O=P,B=L,D=H;var he=ps(y).attr("pointer-events","none"),ye=he.selectAll(".overlay").attr("cursor",lp[v]);if(g.touches)de.moved=ve,de.ended=Ue;else{var Ie=ps(g.view).on("mousemove.brush",ve,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",gt,!0).on("keyup.brush",rt,!0),oat(g.view)}l.call(y),de.start(g,b.name);function ve(be){for(const ke of be.changedTouches||[be])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=JU(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];uue(ke.cur[0]-ke[0])>uue(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,R8(be),Ke(be)}function Ke(be){const ke=ce[0],ze=ke.point0;var ct;switch(z=ke[0]-ze[0],W=ke[1]-ze[1],b){case N8:case aue:{w&&(z=Wo(C-I,Go(F-L,z)),R=I+z,B=L+z),E&&(W=Wo(M-P,Go(U-H,W)),O=P+W,D=H+W);break}case o_:{ce[1]?(w&&(R=Wo(C,Go(F,ce[0][0])),B=Wo(C,Go(F,ce[1][0])),w=1),E&&(O=Wo(M,Go(U,ce[0][1])),D=Wo(M,Go(U,ce[1][1])),E=1)):(w<0?(z=Wo(C-I,Go(F-I,z)),R=I+z,B=L):w>0&&(z=Wo(C-L,Go(F-L,z)),R=I,B=L+z),E<0?(W=Wo(M-P,Go(U-P,W)),O=P+W,D=H):E>0&&(W=Wo(M-H,Go(U-H,W)),O=P,D=H+W));break}case a_:{w&&(R=Wo(C,Go(F,I-z*w)),B=Wo(C,Go(F,L+z*w))),E&&(O=Wo(M,Go(U,P-W*E)),D=Wo(M,Go(U,H+W*E)));break}}B<R&&(w*=-1,ct=I,I=L,L=ct,ct=R,R=B,B=ct,v in cue&&ye.attr("cursor",lp[v=cue[v]])),D<O&&(E*=-1,ct=P,P=H,H=ct,ct=O,O=D,D=ct,v in fue&&ye.attr("cursor",lp[v=fue[v]])),S.selection&&(A=S.selection),G&&(R=A[0][0],B=A[1][0]),ne&&(O=A[0][1],D=A[1][1]),(A[0][0]!==R||A[0][1]!==O||A[1][0]!==B||A[1][1]!==D)&&(S.selection=[[R,O],[B,D]],l.call(y),de.brush(be,b.name))}function Ue(be){if(slt(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else aat(be.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ye.attr("cursor",lp.overlay),S.selection&&(A=S.selection),dlt(A)&&(S.selection=null,l.call(y)),de.end(be,b.name)}function gt(be){switch(be.keyCode){case 16:{q=w&&E;break}case 18:{b===o_&&(w&&(L=B-z*w,I=R+z*w),E&&(H=D-W*E,P=O+W*E),b=a_,Ke(be));break}case 32:{(b===o_||b===a_)&&(w<0?L=B-z:w>0&&(I=R-z),E<0?H=D-W:E>0&&(P=O-W),b=N8,ye.attr("cursor",lp.selection),Ke(be));break}default:return}R8(be)}function rt(be){switch(be.keyCode){case 16:{q&&(G=ne=q=!1,Ke(be));break}case 18:{b===a_&&(w<0?L=B:w>0&&(I=R),E<0?H=D:E>0&&(P=O),b=o_,Ke(be));break}case 32:{b===N8&&(be.altKey?(w&&(L=B-z*w,I=R+z*w),E&&(H=D-W*E,P=O+W*E),b=a_):(w<0?L=B:w>0&&(I=R),E<0?H=D:E>0&&(P=O),b=o_),ye.attr("cursor",lp[v]),Ke(be));break}default:return}R8(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=u7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:k8(u7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:k8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:k8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const l7=Math.PI,c7=2*l7,m1=1e-6,glt=c7-m1;function Txe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ylt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Txe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let AY=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Txe:ylt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>m1)if(!(Math.abs(f*u-l*c)>m1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((l7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>m1&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>m1||Math.abs(this._y1-c)>m1)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%c7+c7),d>glt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>m1&&this._append`A${r},${r},0,${+(d>=l7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function UL(){return new AY}UL.prototype=AY.prototype;const Kp=11102230246251565e-32,Yo=134217729,vlt=(3+8*Kp)*Kp;function D8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function blt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function qI(e){return new Float64Array(e)}const _lt=(3+16*Kp)*Kp,wlt=(2+12*Kp)*Kp,Elt=(9+64*Kp)*Kp*Kp,u_=qI(4),due=qI(8),hue=qI(12),pue=qI(16),Ia=qI(4);function xlt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,S,T,A;const C=e-i,I=n-i,R=t-s,M=r-s;w=C*M,d=Yo*C,h=d-(d-C),p=C-h,d=Yo*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),S=R*I,d=Yo*R,h=d-(d-R),p=R-h,d=Yo*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,u_[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,u_[1]=b-(y+f)+(f-S),A=v+y,f=A-v,u_[2]=v-(A-f)+(y-f),u_[3]=A;let P=blt(4,u_),O=wlt*o;if(P>=O||-P>=O||(f=e-C,a=e-(C+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-M,c=r-(M+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(O=Elt*o+vlt*Math.abs(P),P+=C*c+M*a-(R*l+I*u),P>=O||-P>=O))return P;w=a*M,d=Yo*a,h=d-(d-a),p=a-h,d=Yo*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),S=u*I,d=Yo*u,h=d-(d-u),p=u-h,d=Yo*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const F=D8(4,u_,4,Ia,due);w=C*c,d=Yo*C,h=d-(d-C),p=C-h,d=Yo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=R*l,d=Yo*R,h=d-(d-R),p=R-h,d=Yo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const L=D8(F,due,4,Ia,hue);w=a*c,d=Yo*a,h=d-(d-a),p=a-h,d=Yo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Yo*u,h=d-(d-u),p=u-h,d=Yo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const B=D8(L,hue,4,Ia,pue);return pue[B-1]}function aN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=_lt*l?u:-xlt(e,t,n,r,i,s,l)}const mue=Math.pow(2,-52),uN=new Uint32Array(512);class BO{static from(t,n=Ilt,r=klt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new BO(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const I=t[2*C],R=t[2*C+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,I=1/0;C<o;C++){const R=O8(f,d,t[2*C],t[2*C+1]);R<I&&(h=C,I=R)}const g=t[2*h],y=t[2*h+1];for(let C=0,I=1/0;C<o;C++){if(C===h)continue;const R=O8(g,y,t[2*C],t[2*C+1]);R<I&&R>0&&(p=C,I=R)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const I=Alt(g,y,v,b,t[2*C],t[2*C+1]);I<w&&(m=C,w=I)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Q_(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let I=0;for(let R=0,M=-1/0;R<o;R++){const P=this._ids[R],O=this._dists[P];O>M&&(C[I++]=P,M=O)}this.hull=C.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(aN(g,y,v,b,E,S)<0){const C=p,I=v,R=b;p=m,v=E,b=S,m=C,E=I,S=R}const T=Clt(g,y,v,b,E,S);this._cx=T.x,this._cy=T.y;for(let C=0;C<o;C++)this._dists[C]=O8(t[2*C],t[2*C+1],T.x,T.y);Q_(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,I,R;C<this._ids.length;C++){const M=this._ids[C],P=t[2*M],O=t[2*M+1];if(C>0&&Math.abs(P-I)<=mue&&Math.abs(O-R)<=mue||(I=P,R=O,M===h||M===p||M===m))continue;let F=0;for(let D=0,z=this._hashKey(P,O);D<this._hashSize&&(F=s[(z+D)%this._hashSize],!(F!==-1&&F!==r[F]));D++);F=n[F];let L=F,B;for(;B=r[L],aN(P,O,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===F){L=-1;break}if(L===-1)continue;let U=this._addTriangle(L,M,r[L],-1,-1,i[L]);i[M]=this._legalize(U+2),i[L]=U,A++;let H=r[L];for(;B=r[H],aN(P,O,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,M,B,i[M],-1,i[H]),i[M]=this._legalize(U+2),r[H]=H,A--,H=B;if(L===F)for(;B=n[L],aN(P,O,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)U=this._addTriangle(B,M,L,-1,i[L],i[B]),this._legalize(U+2),i[B]=U,r[L]=L,A--,L=B;this._hullStart=n[M]=L,r[L]=n[H]=M,r[M]=H,s[this._hashKey(P,O)]=M,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(A);for(let C=0,I=this._hullStart;C<A;C++)this.hull[C]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Slt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=uN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Tlt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<uN.length&&(uN[s++]=v)}else{if(s===0)break;t=uN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Slt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function O8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Tlt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Alt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Clt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Q_(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;nT(e,i,s),t[e[n]]>t[e[r]]&&nT(e,n,r),t[e[s]]>t[e[r]]&&nT(e,s,r),t[e[n]]>t[e[s]]&&nT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;nT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Q_(e,t,s,r),Q_(e,t,n,o-1)):(Q_(e,t,n,o-1),Q_(e,t,s,r))}}function nT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ilt(e){return e[0]}function klt(e){return e[1]}const gue=1e-6;class G1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>gue||Math.abs(this._y1-s)>gue)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class f7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Rlt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[w],A=t[w+1],C=t[E],I=t[E+1],R=t[S],M=t[S+1],P=C-T,O=I-A,F=R-T,L=M-A,B=(P*L-O*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-T)*L-(o-A)*F);v=(T+R)/2-U*L,b=(A+M)/2+U*F}else{const U=1/B,H=P*P+O*O,D=F*F+L*L;v=T+(L*H-O*D)*U,b=A+(P*D-F*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new G1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new G1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new G1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new f7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Nlt=2*Math.PI,l_=Math.pow;function Plt(e){return e[0]}function Dlt(e){return e[1]}function Olt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function $lt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class CY{static from(t,n=Plt,r=Dlt,i){return new CY("length"in t?Mlt(t,n,r,i):Float64Array.from(Llt(t,n,r,i)))}constructor(t){this._delaunator=new BO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Olt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=$lt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new BO(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Rlt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=l_(n-l[t*2],2)+l_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=l_(n-l[p*2],2)+l_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&l_(n-l[h*2],2)+l_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new G1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new G1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Nlt)}return r&&r.value()}renderHull(t){const n=t==null?t=new G1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new f7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new G1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new f7;return this.renderTriangle(t,n),n.value()}}function Mlt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Llt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var yue={},$8={},M8=34,rT=10,L8=13;function Axe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Flt(e,t){var n=Axe(e);return function(r,i){return t(n(r),i,e)}}function vue(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function du(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function jlt(e){return e<0?"-"+du(-e,6):e>9999?"+"+du(e,6):du(e,4)}function Blt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":jlt(e.getUTCFullYear())+"-"+du(e.getUTCMonth()+1,2)+"-"+du(e.getUTCDate(),2)+(i?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"."+du(i,3)+"Z":r?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"Z":n||t?"T"+du(t,2)+":"+du(n,2)+"Z":"")}function Cxe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Flt(g,d):Axe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===rT&&--p,f.charCodeAt(p-1)===L8&&--p;function w(){if(v)return $8;if(b)return b=!1,yue;var S,T=m,A;if(f.charCodeAt(T)===M8){for(;m++<p&&f.charCodeAt(m)!==M8||f.charCodeAt(++m)===M8;);return(S=m)>=p?v=!0:(A=f.charCodeAt(m++))===rT?b=!0:A===L8&&(b=!0,f.charCodeAt(m)===rT&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(S=m++))===rT)b=!0;else if(A===L8)b=!0,f.charCodeAt(m)===rT&&++m;else if(A!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=w())!==$8;){for(var E=[];y!==yue&&y!==$8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=vue(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=vue(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Blt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Ult=Cxe(","),zlt=Ult.parse;function Vlt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Hlt(e,t){return fetch(e,t).then(Vlt)}function qlt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Hlt(t,n).then(function(i){return e(i,r)})}}var d7=qlt(zlt);function Wlt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Glt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Ixe(this.cover(t,n),t,n,e)}function Ixe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Ylt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)Ixe(this,o[n],a[n],e[n]);return this}function Klt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Xlt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Qlt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ja(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Jlt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new ja(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new ja(h[3],g,y,u,l),new ja(h[2],o,y,g,l),new ja(h[1],g,a,u,y),new ja(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Zlt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function ect(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tct(){return this._root}function nct(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function rct(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new ja(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new ja(i,l,c,a,u)),(i=r[2])&&t.push(new ja(i,s,c,l,u)),(i=r[1])&&t.push(new ja(i,l,o,a,c)),(i=r[0])&&t.push(new ja(i,s,o,l,c))}return this}function ict(e){var t=[],n=[],r;for(this._root&&t.push(new ja(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new ja(s,o,a,c,f)),(s=i[1])&&t.push(new ja(s,c,a,u,f)),(s=i[2])&&t.push(new ja(s,o,f,c,l)),(s=i[3])&&t.push(new ja(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function sct(e){return e[0]}function oct(e){return arguments.length?(this._x=e,this):this._x}function act(e){return e[1]}function uct(e){return arguments.length?(this._y=e,this):this._y}function IY(e,t,n){var r=new kY(t??sct,n??act,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function kY(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function bue(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var nu=IY.prototype=kY.prototype;nu.copy=function(){var e=new kY(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=bue(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=bue(r));return e};nu.add=Glt;nu.addAll=Ylt;nu.cover=Klt;nu.data=Xlt;nu.extent=Qlt;nu.find=Jlt;nu.remove=Zlt;nu.removeAll=ect;nu.root=tct;nu.size=nct;nu.visit=rct;nu.visitAfter=ict;nu.x=oct;nu.y=uct;function Ua(e){return function(){return e}}function qg(e){return(e()-.5)*1e-6}function lct(e){return e.x+e.vx}function cct(e){return e.y+e.vy}function fct(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ua(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=IY(t,lct,cct).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,S,T){var A=b.data,C=b.r,I=m+C;if(A){if(A.index>d.index){var R=h-A.x-A.vx,M=p-A.y-A.vy,P=R*R+M*M;P<I*I&&(R===0&&(R=qg(r),P+=R*R),M===0&&(M=qg(r),P+=M*M),P=(I-(P=Math.sqrt(P)))/P*i,d.vx+=(R*=P)*(I=(C*=C)/(g+C)),d.vy+=(M*=P)*I,A.vx-=R*(I=1-I),A.vy-=M*I)}return}return w>h+I||S<h-I||E>p+I||T<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ua(+l),u(),o):e},o}function dct(e){return e.index}function _ue(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function hct(e){var t=dct,n=f,r,i=Ua(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,S,T,A,C,I;b<v;++b)w=e[b],E=w.source,S=w.target,T=S.x+S.vx-E.x-E.vx||qg(l),A=S.y+S.vy-E.y-E.vy||qg(l),C=Math.sqrt(T*T+A*A),C=(C-s[b])/C*g*r[b],T*=C,A*=C,S.vx-=T*(I=u[b]),S.vy-=A*I,E.vx+=T*(I=1-I),E.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=_ue(b,w.source)),typeof w.target!="object"&&(w.target=_ue(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ua(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ua(+g),m(),d):i},d}const pct=1664525,mct=1013904223,wue=4294967296;function gct(){let e=1;return()=>(e=(pct*e+mct)%wue)/wue}function yct(e){return e.x}function vct(e){return e.y}var bct=10,_ct=Math.PI*(3-Math.sqrt(5));function wct(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=EY(f),l=DL("tick","end"),c=gct();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=bct*Math.sqrt(.5+m),b=m*_ct;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,S,T,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],w=m-T.x,E=g-T.y,S=w*w+E*E,S<y&&(A=T,y=S);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Ect(){var e,t,n,r,i=Ua(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=IY(e,yct,vct).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=qg(n),w+=y*y),v===0&&(v=qg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=qg(n),w+=y*y),v===0&&(v=qg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ua(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function xct(e){var t=Ua(.1),n,r,i;typeof e!="function"&&(e=Ua(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ua(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ua(+a),o(),s):e},s}function Sct(e){var t=Ua(.1),n,r,i;typeof e!="function"&&(e=Ua(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ua(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ua(+a),o(),s):e},s}function Tct(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function UO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mE(e){return e=UO(Math.abs(e)),e?e[1]:NaN}function Act(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Cct(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ict=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $v(e){if(!(t=Ict.exec(e)))throw new Error("invalid format: "+e);var t;return new RY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$v.prototype=RY.prototype;function RY(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}RY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kct(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var kxe;function Rct(e,t){var n=UO(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(kxe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+UO(e,Math.max(0,t+s-1))[0]}function Eue(e,t){var n=UO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const xue={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Tct,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Eue(e*100,t),r:Eue,s:Rct,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sue(e){return e}var Tue=Array.prototype.map,Aue=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Rxe(e){var t=e.grouping===void 0||e.thousands===void 0?Sue:Act(Tue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Sue:Cct(Tue.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=$v(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):xue[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",A=xue[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var M=S,P=T,O,F,L;if(E==="c")P=A(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:A(Math.abs(R),b),w&&(R=kct(R)),B&&+R==0&&p!=="+"&&(B=!1),M=(B?p==="("?p:a:p==="-"||p==="("?"":p)+M,P=(E==="s"?Aue[8+kxe/3]:"")+P+(B&&p==="("?")":""),C){for(O=-1,F=R.length;++O<F;)if(L=R.charCodeAt(O),48>L||L>57){P=(L===46?i+R.slice(O+1):R.slice(O))+P,R=R.slice(0,O);break}}}v&&!g&&(R=t(R,1/0));var U=M.length+R.length+P.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(R=t(H+R,H.length?y-P.length:1/0),H=""),h){case"<":R=M+R+P+H;break;case"=":R=M+H+R+P;break;case"^":R=H.slice(0,U=H.length>>1)+M+R+P+H.slice(U);break;default:R=H+M+R+P;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=$v(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mE(d)/3)))*3,m=Math.pow(10,-p),g=Aue[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var lN,jx,NY;Nct({thousands:",",grouping:[3],currency:["$",""]});function Nct(e){return lN=Rxe(e),jx=lN.format,NY=lN.formatPrefix,lN}function Nxe(e){return Math.max(0,-mE(Math.abs(e)))}function Pxe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mE(t)/3)))*3-mE(Math.abs(e)))}function Dxe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mE(t)-mE(e))+1}var jt=1e-6,zO=1e-12,Nn=Math.PI,Gi=Nn/2,VO=Nn/4,Ka=Nn*2,ns=180/Nn,In=Nn/180,Xn=Math.abs,Bx=Math.atan,xc=Math.atan2,Ut=Math.cos,cN=Math.ceil,Oxe=Math.exp,h7=Math.hypot,HO=Math.log,F8=Math.pow,Lt=Math.sin,dc=Math.sign||function(e){return e>0?1:e<0?-1:0},Xa=Math.sqrt,PY=Math.tan;function $xe(e){return e>1?0:e<-1?Nn:Math.acos(e)}function Vu(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function To(){}function qO(e,t){e&&Iue.hasOwnProperty(e.type)&&Iue[e.type](e,t)}var Cue={Feature:function(e,t){qO(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)qO(n[r].geometry,t)}},Iue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){p7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)p7(n[r],t,0)},Polygon:function(e,t){kue(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)kue(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)qO(n[r],t)}};function p7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function kue(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)p7(e[n],t,1);t.polygonEnd()}function Cp(e,t){e&&Cue.hasOwnProperty(e.type)?Cue[e.type](e,t):qO(e,t)}var WO=new Ha,GO=new Ha,Mxe,Lxe,m7,g7,y7,hh={point:To,lineStart:To,lineEnd:To,polygonStart:function(){WO=new Ha,hh.lineStart=Pct,hh.lineEnd=Dct},polygonEnd:function(){var e=+WO;GO.add(e<0?Ka+e:e),this.lineStart=this.lineEnd=this.point=To},sphere:function(){GO.add(Ka)}};function Pct(){hh.point=Oct}function Dct(){Fxe(Mxe,Lxe)}function Oct(e,t){hh.point=Fxe,Mxe=e,Lxe=t,e*=In,t*=In,m7=e,g7=Ut(t=t/2+VO),y7=Lt(t)}function Fxe(e,t){e*=In,t*=In,t=t/2+VO;var n=e-m7,r=n>=0?1:-1,i=r*n,s=Ut(t),o=Lt(t),a=y7*o,u=g7*s+a*Ut(i),l=a*r*Lt(i);WO.add(xc(l,u)),m7=e,g7=s,y7=o}function $ct(e){return GO=new Ha,Cp(e,hh),GO*2}function YO(e){return[xc(e[1],e[0]),Vu(e[2])]}function Mv(e){var t=e[0],n=e[1],r=Ut(n);return[r*Ut(t),r*Lt(t),Lt(n)]}function fN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function j8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function dN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function KO(e){var t=Xa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ci,_u,ji,dl,g1,jxe,Bxe,Sw,KA,Tg,vm,Ep={point:v7,lineStart:Rue,lineEnd:Nue,polygonStart:function(){Ep.point=zxe,Ep.lineStart=Mct,Ep.lineEnd=Lct,KA=new Ha,hh.polygonStart()},polygonEnd:function(){hh.polygonEnd(),Ep.point=v7,Ep.lineStart=Rue,Ep.lineEnd=Nue,WO<0?(Ci=-(ji=180),_u=-(dl=90)):KA>jt?dl=90:KA<-jt&&(_u=-90),vm[0]=Ci,vm[1]=ji},sphere:function(){Ci=-(ji=180),_u=-(dl=90)}};function v7(e,t){Tg.push(vm=[Ci=e,ji=e]),t<_u&&(_u=t),t>dl&&(dl=t)}function Uxe(e,t){var n=Mv([e*In,t*In]);if(Sw){var r=gE(Sw,n),i=[r[1],-r[0],0],s=gE(i,r);KO(s),s=YO(s);var o=e-g1,a=o>0?1:-1,u=s[0]*ns*a,l,c=Xn(o)>180;c^(a*g1<u&&u<a*e)?(l=s[1]*ns,l>dl&&(dl=l)):(u=(u+360)%360-180,c^(a*g1<u&&u<a*e)?(l=-s[1]*ns,l<_u&&(_u=l)):(t<_u&&(_u=t),t>dl&&(dl=t))),c?e<g1?cl(Ci,e)>cl(Ci,ji)&&(ji=e):cl(e,ji)>cl(Ci,ji)&&(Ci=e):ji>=Ci?(e<Ci&&(Ci=e),e>ji&&(ji=e)):e>g1?cl(Ci,e)>cl(Ci,ji)&&(ji=e):cl(e,ji)>cl(Ci,ji)&&(Ci=e)}else Tg.push(vm=[Ci=e,ji=e]);t<_u&&(_u=t),t>dl&&(dl=t),Sw=n,g1=e}function Rue(){Ep.point=Uxe}function Nue(){vm[0]=Ci,vm[1]=ji,Ep.point=v7,Sw=null}function zxe(e,t){if(Sw){var n=e-g1;KA.add(Xn(n)>180?n+(n>0?360:-360):n)}else jxe=e,Bxe=t;hh.point(e,t),Uxe(e,t)}function Mct(){hh.lineStart()}function Lct(){zxe(jxe,Bxe),hh.lineEnd(),Xn(KA)>jt&&(Ci=-(ji=180)),vm[0]=Ci,vm[1]=ji,Sw=null}function cl(e,t){return(t-=e)<0?t+360:t}function Fct(e,t){return e[0]-t[0]}function Pue(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function jct(e){var t,n,r,i,s,o,a;if(dl=ji=-(Ci=_u=1/0),Tg=[],Cp(e,Ep),n=Tg.length){for(Tg.sort(Fct),t=1,r=Tg[0],s=[r];t<n;++t)i=Tg[t],Pue(r,i[0])||Pue(r,i[1])?(cl(r[0],i[1])>cl(r[0],r[1])&&(r[1]=i[1]),cl(i[0],r[1])>cl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=cl(r[1],i[0]))>o&&(o=a,Ci=i[0],ji=r[1])}return Tg=vm=null,Ci===1/0||_u===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ci,_u],[ji,dl]]}var YT,XO,QO,JO,ZO,e3,t3,n3,b7,_7,w7,Vxe,Hxe,$a,Ma,La,_f={sphere:To,point:DY,lineStart:Due,lineEnd:Oue,polygonStart:function(){_f.lineStart=zct,_f.lineEnd=Vct},polygonEnd:function(){_f.lineStart=Due,_f.lineEnd=Oue}};function DY(e,t){e*=In,t*=In;var n=Ut(t);WI(n*Ut(e),n*Lt(e),Lt(t))}function WI(e,t,n){++YT,QO+=(e-QO)/YT,JO+=(t-JO)/YT,ZO+=(n-ZO)/YT}function Due(){_f.point=Bct}function Bct(e,t){e*=In,t*=In;var n=Ut(t);$a=n*Ut(e),Ma=n*Lt(e),La=Lt(t),_f.point=Uct,WI($a,Ma,La)}function Uct(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=xc(Xa((o=Ma*s-La*i)*o+(o=La*r-$a*s)*o+(o=$a*i-Ma*r)*o),$a*r+Ma*i+La*s);XO+=o,e3+=o*($a+($a=r)),t3+=o*(Ma+(Ma=i)),n3+=o*(La+(La=s)),WI($a,Ma,La)}function Oue(){_f.point=DY}function zct(){_f.point=Hct}function Vct(){qxe(Vxe,Hxe),_f.point=DY}function Hct(e,t){Vxe=e,Hxe=t,e*=In,t*=In,_f.point=qxe;var n=Ut(t);$a=n*Ut(e),Ma=n*Lt(e),La=Lt(t),WI($a,Ma,La)}function qxe(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=Ma*s-La*i,a=La*r-$a*s,u=$a*i-Ma*r,l=h7(o,a,u),c=Vu(l),f=l&&-c/l;b7.add(f*o),_7.add(f*a),w7.add(f*u),XO+=c,e3+=c*($a+($a=r)),t3+=c*(Ma+(Ma=i)),n3+=c*(La+(La=s)),WI($a,Ma,La)}function qct(e){YT=XO=QO=JO=ZO=e3=t3=n3=0,b7=new Ha,_7=new Ha,w7=new Ha,Cp(e,_f);var t=+b7,n=+_7,r=+w7,i=h7(t,n,r);return i<zO&&(t=e3,n=t3,r=n3,XO<jt&&(t=QO,n=JO,r=ZO),i=h7(t,n,r),i<zO)?[NaN,NaN]:[xc(n,t)*ns,Vu(r/i)*ns]}function E7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function x7(e,t){return Xn(e)>Nn&&(e-=Math.round(e/Ka)*Ka),[e,t]}x7.invert=x7;function Wxe(e,t,n){return(e%=Ka)?t||n?E7(Mue(e),Lue(t,n)):Mue(e):t||n?Lue(t,n):x7}function $ue(e){return function(t,n){return t+=e,Xn(t)>Nn&&(t-=Math.round(t/Ka)*Ka),[t,n]}}function Mue(e){var t=$ue(e);return t.invert=$ue(-e),t}function Lue(e,t){var n=Ut(e),r=Lt(e),i=Ut(t),s=Lt(t);function o(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[xc(f*i-h*s,c*n-d*r),Vu(h*i+f*s)]}return o.invert=function(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[xc(f*i+d*s,c*n+h*r),Vu(h*n-c*r)]},o}function Wct(e){e=Wxe(e[0]*In,e[1]*In,e.length>2?e[2]*In:0);function t(n){return n=e(n[0]*In,n[1]*In),n[0]*=ns,n[1]*=ns,n}return t.invert=function(n){return n=e.invert(n[0]*In,n[1]*In),n[0]*=ns,n[1]*=ns,n},t}function Gct(e,t,n,r,i,s){if(n){var o=Ut(t),a=Lt(t),u=r*n;i==null?(i=t+r*Ka,s=t-u/2):(i=Fue(o,i),s=Fue(o,s),(r>0?i<s:i>s)&&(i+=r*Ka));for(var l,c=i;r>0?c>s:c<s;c-=u)l=YO([o,-a*Ut(c),-a*Lt(c)]),e.point(l[0],l[1])}}function Fue(e,t){t=Mv(t),t[0]-=e,KO(t);var n=$xe(-t[1]);return((-t[2]<0?-n:n)+Ka-jt)%Ka}function Gxe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:To,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function zP(e,t){return Xn(e[0]-t[0])<jt&&Xn(e[1]-t[1])<jt}function hN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Yxe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(zP(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new hN(g,p,null,!0)),o.push(v.o=new hN(g,null,v,!1)),s.push(v=new hN(y,p,null,!1)),o.push(v.o=new hN(y,null,v,!0))}}),!!s.length){for(o.sort(t),jue(s),jue(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function jue(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function B8(e){return Xn(e[0])<=Nn?e[0]:dc(e[0])*((Xn(e[0])+Nn)%Ka-Nn)}function Yct(e,t){var n=B8(t),r=t[1],i=Lt(r),s=[Lt(n),-Ut(n),0],o=0,a=0,u=new Ha;i===1?r=Gi+jt:i===-1&&(r=-Gi-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=B8(h),m=h[1]/2+VO,g=Lt(m),y=Ut(m),v=0;v<d;++v,p=w,g=S,y=T,h=b){var b=f[v],w=B8(b),E=b[1]/2+VO,S=Lt(E),T=Ut(E),A=w-p,C=A>=0?1:-1,I=C*A,R=I>Nn,M=g*S;if(u.add(xc(M*C*Lt(I),y*T+M*Ut(I))),o+=R?A+C*Ka:A,R^p>=n^w>=n){var P=gE(Mv(h),Mv(b));KO(P);var O=gE(s,P);KO(O);var F=(R^A>=0?-1:1)*Vu(O[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=R^A>=0?1:-1)}}return(o<-jt||o<jt&&u<-zO)^a&1}function Kxe(e,t,n,r){return function(i){var s=t(i),o=Gxe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=PEe(c);var w=Yct(l,r);c.length?(u||(i.polygonStart(),u=!0),Yxe(c,Xct,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,T=E.length,A,C,I;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<A;++S)i.point((I=C[S])[0],I[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Kct))}}return d}}function Kct(e){return e.length>1}function Xct(e,t){return((e=e.x)[0]<0?e[1]-Gi-jt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-jt:Gi-t[1])}const Bue=Kxe(function(){return!0},Qct,Zct,[-Nn,-Gi]);function Qct(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Nn:-Nn,u=Xn(s-t);Xn(u-Nn)<jt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Nn&&(Xn(t-r)<jt&&(t-=r*jt),Xn(s-a)<jt&&(s-=a*jt),n=Jct(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Jct(e,t,n,r){var i,s,o=Lt(e-n);return Xn(o)>jt?Bx((Lt(t)*(s=Ut(r))*Lt(n)-Lt(r)*(i=Ut(t))*Lt(e))/(i*s*o)):(t+r)/2}function Zct(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Nn,i),r.point(0,i),r.point(Nn,i),r.point(Nn,0),r.point(Nn,-i),r.point(0,-i),r.point(-Nn,-i),r.point(-Nn,0),r.point(-Nn,i);else if(Xn(e[0]-t[0])>jt){var s=e[0]<t[0]?Nn:-Nn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function eft(e){var t=Ut(e),n=2*In,r=t>0,i=Xn(t)>jt;function s(c,f,d,h){Gct(h,e,n,d,c,f)}function o(c,f){return Ut(c)*Ut(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Nn:-Nn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||zP(f,b)||zP(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!zP(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Mv(c),p=Mv(f),m=[1,0,0],g=gE(h,p),y=fN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,S=gE(m,g),T=dN(m,w),A=dN(g,E);j8(T,A);var C=S,I=fN(T,C),R=fN(C,C),M=I*I-R*(fN(T,T)-1);if(!(M<0)){var P=Xa(M),O=dN(C,(-I-P)/R);if(j8(O,T),O=YO(O),!d)return O;var F=c[0],L=f[0],B=c[1],U=f[1],H;L<F&&(H=F,F=L,L=H);var D=L-F,z=Xn(D-Nn)<jt,W=z||D<jt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^O[1]<(Xn(O[0]-F)<jt?B:U):B<=O[1]&&O[1]<=U:D>Nn^(F<=O[0]&&O[0]<=L)){var j=dN(C,(-I+P)/R);return j8(j,T),[O,YO(j)]}}}function l(c,f){var d=r?e:Nn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Kxe(o,a,s,r?[0,-e]:[-Nn,e-Nn])}function tft(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var KT=1e9,pN=-KT;function Xxe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<jt?c>0?0:3:Xn(l[0]-n)<jt?c>0?2:1:Xn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Gxe(),d,h,p,m,g,y,v,b,w,E,S,T={point:A,lineStart:M,lineEnd:P,polygonStart:I,polygonEnd:R};function A(F,L){i(F,L)&&c.point(F,L)}function C(){for(var F=0,L=0,B=h.length;L<B;++L)for(var U=h[L],H=1,D=U.length,z=U[0],W,j,q=z[0],G=z[1];H<D;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function I(){c=f,d=[],h=[],S=!0}function R(){var F=C(),L=S&&F,B=(d=PEe(d)).length;(L||B)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&Yxe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function M(){T.point=O,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&(O(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=A,w&&c.lineEnd()}function O(F,L){var B=i(F,L);if(h&&p.push([F,L]),E)m=F,g=L,y=B,E=!1,B&&(c.lineStart(),c.point(F,L));else if(B&&w)c.point(F,L);else{var U=[v=Math.max(pN,Math.min(KT,v)),b=Math.max(pN,Math.min(KT,b))],H=[F=Math.max(pN,Math.min(KT,F)),L=Math.max(pN,Math.min(KT,L))];tft(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(F,L),S=!1)}v=F,b=L,w=B}return T}}function Uue(e,t,n){var r=Iu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function zue(e,t,n){var r=Iu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function nft(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Iu(cN(r/c)*c,n,c).map(p).concat(Iu(cN(a/f)*f,o,f).map(m)).concat(Iu(cN(t/u)*u,e,u).filter(function(b){return Xn(b%c)>jt}).map(d)).concat(Iu(cN(s/l)*l,i,l).filter(function(b){return Xn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Uue(s,i,90),h=zue(t,e,g),p=Uue(a,o,90),m=zue(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const f2=e=>e;var U8=new Ha,S7=new Ha,Qxe,Jxe,T7,A7,Ip={point:To,lineStart:To,lineEnd:To,polygonStart:function(){Ip.lineStart=rft,Ip.lineEnd=sft},polygonEnd:function(){Ip.lineStart=Ip.lineEnd=Ip.point=To,U8.add(Xn(S7)),S7=new Ha},result:function(){var e=U8/2;return U8=new Ha,e}};function rft(){Ip.point=ift}function ift(e,t){Ip.point=Zxe,Qxe=T7=e,Jxe=A7=t}function Zxe(e,t){S7.add(A7*e-T7*t),T7=e,A7=t}function sft(){Zxe(Qxe,Jxe)}var yE=1/0,r3=yE,d2=-yE,i3=d2,s3={point:oft,lineStart:To,lineEnd:To,polygonStart:To,polygonEnd:To,result:function(){var e=[[yE,r3],[d2,i3]];return d2=i3=-(r3=yE=1/0),e}};function oft(e,t){e<yE&&(yE=e),e>d2&&(d2=e),t<r3&&(r3=t),t>i3&&(i3=t)}var C7=0,I7=0,XT=0,o3=0,a3=0,J_=0,k7=0,R7=0,QT=0,eSe,tSe,Nd,Pd,lc={point:Lv,lineStart:Vue,lineEnd:Hue,polygonStart:function(){lc.lineStart=lft,lc.lineEnd=cft},polygonEnd:function(){lc.point=Lv,lc.lineStart=Vue,lc.lineEnd=Hue},result:function(){var e=QT?[k7/QT,R7/QT]:J_?[o3/J_,a3/J_]:XT?[C7/XT,I7/XT]:[NaN,NaN];return C7=I7=XT=o3=a3=J_=k7=R7=QT=0,e}};function Lv(e,t){C7+=e,I7+=t,++XT}function Vue(){lc.point=aft}function aft(e,t){lc.point=uft,Lv(Nd=e,Pd=t)}function uft(e,t){var n=e-Nd,r=t-Pd,i=Xa(n*n+r*r);o3+=i*(Nd+e)/2,a3+=i*(Pd+t)/2,J_+=i,Lv(Nd=e,Pd=t)}function Hue(){lc.point=Lv}function lft(){lc.point=fft}function cft(){nSe(eSe,tSe)}function fft(e,t){lc.point=nSe,Lv(eSe=Nd=e,tSe=Pd=t)}function nSe(e,t){var n=e-Nd,r=t-Pd,i=Xa(n*n+r*r);o3+=i*(Nd+e)/2,a3+=i*(Pd+t)/2,J_+=i,i=Pd*e-Nd*t,k7+=i*(Nd+e),R7+=i*(Pd+t),QT+=i*3,Lv(Nd=e,Pd=t)}function rSe(e){this._context=e}rSe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ka);break}}},result:To};var N7=new Ha,z8,iSe,sSe,JT,ZT,h2={point:To,lineStart:function(){h2.point=dft},lineEnd:function(){z8&&oSe(iSe,sSe),h2.point=To},polygonStart:function(){z8=!0},polygonEnd:function(){z8=null},result:function(){var e=+N7;return N7=new Ha,e}};function dft(e,t){h2.point=oSe,iSe=JT=e,sSe=ZT=t}function oSe(e,t){JT-=e,ZT-=t,N7.add(Xa(JT*JT+ZT*ZT)),JT=e,ZT=t}let que,u3,Wue,Gue;class Yue{constructor(t){this._append=t==null?aSe:hft(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Wue||this._append!==u3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Wue=r,u3=this._append,Gue=this._,this._=i}this._+=Gue;break}}}result(){const t=this._;return this._="",t.length?t:null}}function aSe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hft(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return aSe;if(t!==que){const n=10**t;que=t,u3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return u3}function uSe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Cp(a,i(s))),s.result()}return o.area=function(a){return Cp(a,i(Ip)),Ip.result()},o.measure=function(a){return Cp(a,i(h2)),h2.result()},o.bounds=function(a){return Cp(a,i(s3)),s3.result()},o.centroid=function(a){return Cp(a,i(lc)),lc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,f2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Yue(n)):new rSe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Yue(n)),o},o.projection(e).digits(n).context(t)}function zL(e){return function(t){var n=new P7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function P7(){}P7.prototype={constructor:P7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function OY(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Cp(n,e.stream(s3)),t(s3.result()),r!=null&&e.clipExtent(r),e}function VL(e,t,n){return OY(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function $Y(e,t,n){return VL(e,[[0,0],t],n)}function MY(e,t,n){return OY(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function LY(e,t,n){return OY(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Kue=16,pft=Ut(30*In);function Xue(e,t){return+t?gft(e,t):mft(e)}function mft(e){return zL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function gft(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,S=u+p,T=Xa(w*w+E*E+S*S),A=Vu(S/=T),C=Xn(Xn(S)-1)<jt||Xn(s-f)<jt?(s+f)/2:xc(E,w),I=e(C,A),R=I[0],M=I[1],P=R-r,O=M-i,F=v*P-y*O;(F*F/b>t||Xn((y*P+v*O)/b-.5)>.3||o*d+a*h+u*p<pft)&&(n(r,i,s,o,a,u,R,M,C,w/=T,E/=T,S,m,g),g.point(R,M),n(R,M,C,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var I=Mv([A,C]),R=e(A,C);n(f,d,c,h,p,m,f=R[0],d=R[1],c=A,h=I[0],p=I[1],m=I[2],Kue,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,Kue,r),g.lineEnd=w,w()}return g}}var yft=zL({point:function(e,t){this.stream.point(e*In,t*In)}});function vft(e){return zL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function bft(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Que(e,t,n,r,i,s){if(!s)return bft(e,t,n,r,i);var o=Ut(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Uh(e){return lSe(function(){return e})()}function lSe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Bue,g=null,y,v,b,w=f2,E=.5,S,T,A,C,I;function R(F){return A(F[0]*In,F[1]*In)}function M(F){return F=A.invert(F[0],F[1]),F&&[F[0]*ns,F[1]*ns]}R.stream=function(F){return C&&I===F?C:C=yft(vft(c)(m(S(w(I=F)))))},R.preclip=function(F){return arguments.length?(m=F,p=void 0,O()):m},R.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,O()):w},R.clipAngle=function(F){return arguments.length?(m=+F?eft(p=F*In):(p=null,Bue),O()):p*ns},R.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,f2):Xxe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),O()):g==null?null:[[g,y],[v,b]]},R.scale=function(F){return arguments.length?(n=+F,P()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},R.center=function(F){return arguments.length?(s=F[0]%360*In,o=F[1]%360*In,P()):[s*ns,o*ns]},R.rotate=function(F){return arguments.length?(a=F[0]%360*In,u=F[1]%360*In,l=F.length>2?F[2]%360*In:0,P()):[a*ns,u*ns,l*ns]},R.angle=function(F){return arguments.length?(f=F%360*In,P()):f*ns},R.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},R.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},R.precision=function(F){return arguments.length?(S=Xue(T,E=F*F),O()):Xa(E)},R.fitExtent=function(F,L){return VL(R,F,L)},R.fitSize=function(F,L){return $Y(R,F,L)},R.fitWidth=function(F,L){return MY(R,F,L)},R.fitHeight=function(F,L){return LY(R,F,L)};function P(){var F=Que(n,0,0,d,h,f).apply(null,t(s,o)),L=Que(n,r-F[0],i-F[1],d,h,f);return c=Wxe(a,u,l),T=E7(t,L),A=E7(c,T),S=Xue(T,E),O()}function O(){return C=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&M,P()}}function FY(e){var t=0,n=Nn/3,r=lSe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*In,n=s[1]*In):[t*ns,n*ns]},i}function _ft(e){var t=Ut(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Vu(i*t)]},n}function wft(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Xn(r)<jt)return _ft(e);var i=1+n*(2*r-n),s=Xa(i)/r;function o(a,u){var l=Xa(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*Ut(a)]}return o.invert=function(a,u){var l=s-u,c=xc(a,Xn(l))*dc(l);return l*r<0&&(c-=Nn*dc(a)*dc(l)),[c/r,Vu((i-(a*a+l*l)*r*r)/(2*r))]},o}function l3(){return FY(wft).scale(155.424).center([0,33.6442])}function cSe(){return l3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Eft(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function xft(){var e,t,n=cSe(),r,i=l3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=l3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Eft([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return VL(c,d,h)},c.fitSize=function(d,h){return $Y(c,d,h)},c.fitWidth=function(d,h){return MY(c,d,h)},c.fitHeight=function(d,h){return LY(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function fSe(e){return function(t,n){var r=Ut(t),i=Ut(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function GI(e){return function(t,n){var r=Xa(t*t+n*n),i=e(r),s=Lt(i),o=Ut(i);return[xc(t*s,r*o),Vu(r&&n*s/r)]}}var dSe=fSe(function(e){return Xa(2/(1+e))});dSe.invert=GI(function(e){return 2*Vu(e/2)});function Sft(){return Uh(dSe).scale(124.75).clipAngle(180-.001)}var hSe=fSe(function(e){return(e=$xe(e))&&e/Lt(e)});hSe.invert=GI(function(e){return e});function Tft(){return Uh(hSe).scale(79.4188).clipAngle(180-.001)}function HL(e,t){return[e,HO(PY((Gi+t)/2))]}HL.invert=function(e,t){return[e,2*Bx(Oxe(t))-Gi]};function Aft(){return pSe(HL).scale(961/Ka)}function pSe(e){var t=Uh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Nn*r(),d=t(Wct(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===HL?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function mN(e){return PY((Gi+e)/2)}function Cft(e,t){var n=Ut(e),r=e===t?Lt(e):HO(n/Ut(t))/HO(mN(t)/mN(e)),i=n*F8(mN(e),r)/r;if(!r)return HL;function s(o,a){i>0?a<-Gi+jt&&(a=-Gi+jt):a>Gi-jt&&(a=Gi-jt);var u=i/F8(mN(a),r);return[u*Lt(r*o),i-u*Ut(r*o)]}return s.invert=function(o,a){var u=i-a,l=dc(r)*Xa(o*o+u*u),c=xc(o,Xn(u))*dc(u);return u*r<0&&(c-=Nn*dc(o)*dc(u)),[c/r,2*Bx(F8(i/l,1/r))-Gi]},s}function Ift(){return FY(Cft).scale(109.5).parallels([30,30])}function c3(e,t){return[e,t]}c3.invert=c3;function kft(){return Uh(c3).scale(152.63)}function Rft(e,t){var n=Ut(e),r=e===t?Lt(e):(n-Ut(t))/(t-e),i=n/r+e;if(Xn(r)<jt)return c3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*Ut(l)]}return s.invert=function(o,a){var u=i-a,l=xc(o,Xn(u))*dc(u);return u*r<0&&(l-=Nn*dc(o)*dc(u)),[l/r,i-dc(r)*Xa(o*o+u*u)]},s}function Nft(){return FY(Rft).scale(131.154).center([0,13.9389])}var XA=1.340264,QA=-.081106,JA=893e-6,ZA=.003796,f3=Xa(3)/2,Pft=12;function mSe(e,t){var n=Vu(f3*Lt(t)),r=n*n,i=r*r*r;return[e*Ut(n)/(f3*(XA+3*QA*r+i*(7*JA+9*ZA*r))),n*(XA+QA*r+i*(JA+ZA*r))]}mSe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Pft&&(a=n*(XA+QA*r+i*(JA+ZA*r))-t,u=XA+3*QA*r+i*(7*JA+9*ZA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<zO));++s);return[f3*e*(XA+3*QA*r+i*(7*JA+9*ZA*r))/Ut(n),Vu(Lt(n)/f3)]};function Dft(){return Uh(mSe).scale(177.158)}function gSe(e,t){var n=Ut(t),r=Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}gSe.invert=GI(Bx);function Oft(){return Uh(gSe).scale(144.049).clipAngle(60)}function $ft(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=zL({point:function(w,E){var S=b([w,E]);this.stream.point(S[0],S[1])}}),m=f2,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,S=w[1]*h;if(s){var T=S*o-E*a;E=E*o+S*a,S=T}return[E+t,S+n]}return b.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var T=S*o+E*a;E=E*o-S*a,S=T}return[E/d,S/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,f2):Xxe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*In,a=Lt(s),o=Ut(s),v()):s*ns},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return VL(b,w,E)},b.fitSize=function(w,E){return $Y(b,w,E)},b.fitWidth=function(w,E){return MY(b,w,E)},b.fitHeight=function(w,E){return LY(b,w,E)},b}function ySe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}ySe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Mft(){return Uh(ySe).scale(175.295)}function vSe(e,t){return[Ut(t)*Lt(e),Lt(t)]}vSe.invert=GI(Vu);function Lft(){return Uh(vSe).scale(249.5).clipAngle(90+jt)}function bSe(e,t){var n=Ut(t),r=1+Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}bSe.invert=GI(function(e){return 2*Bx(e)});function Fft(){return Uh(bSe).scale(250).clipAngle(142)}function _Se(e,t){return[HO(PY((Gi+t)/2)),-e]}_Se.invert=function(e,t){return[-t,2*Bx(Oxe(e))-Gi]};function jft(){var e=pSe(_Se),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Bft(e,t){return e.parent===t.parent?1:2}function Uft(e){return e.reduce(zft,0)/e.length}function zft(e,t){return e+t.x}function Vft(e){return 1+e.reduce(Hft,0)}function Hft(e,t){return Math.max(e,t.y)}function qft(e){for(var t;t=e.children;)e=t[0];return e}function Wft(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Gft(){var e=Bft,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Uft(h),d.y=Vft(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=qft(s),l=Wft(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Yft(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Kft(){return this.eachAfter(Yft)}function Xft(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Qft(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Jft(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Zft(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function edt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function tdt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function ndt(e){for(var t=this,n=rdt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function rdt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function idt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function sdt(){return Array.from(this)}function odt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function adt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*udt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function qL(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=fdt)):t===void 0&&(t=cdt);for(var n=new vE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new vE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(wSe)}function ldt(){return qL(this).eachBefore(ddt)}function cdt(e){return e.children}function fdt(e){return Array.isArray(e)?e[1]:null}function ddt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function wSe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vE(e){this.data=e,this.depth=this.height=0,this.parent=null}vE.prototype=qL.prototype={constructor:vE,count:Kft,each:Xft,eachAfter:Jft,eachBefore:Qft,find:Zft,sum:edt,sort:tdt,path:ndt,ancestors:idt,descendants:sdt,leaves:odt,links:adt,copy:ldt,[Symbol.iterator]:udt};function VP(e){return e==null?null:ESe(e)}function ESe(e){if(typeof e!="function")throw new Error;return e}function R1(){return 0}function C_(e){return function(){return e}}const hdt=1664525,pdt=1013904223,Jue=4294967296;function mdt(){let e=1;return()=>(e=(hdt*e+pdt)%Jue)/Jue}function gdt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ydt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function vdt(e,t){for(var n=0,r=(e=ydt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&xSe(o,s)?++n:(o=_dt(i=bdt(i,s)),n=0);return o}function bdt(e,t){var n,r;if(V8(t,e))return[t];for(n=0;n<e.length;++n)if(gN(t,e[n])&&V8(eA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(gN(eA(e[n],e[r]),t)&&gN(eA(e[n],t),e[r])&&gN(eA(e[r],t),e[n])&&V8(SSe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function gN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function xSe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function V8(e,t){for(var n=0;n<t.length;++n)if(!xSe(e,t[n]))return!1;return!0}function _dt(e){switch(e.length){case 1:return wdt(e[0]);case 2:return eA(e[0],e[1]);case 3:return SSe(e[0],e[1],e[2])}}function wdt(e){return{x:e.x,y:e.y,r:e.r}}function eA(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function SSe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*b)/(E*2)-r,T=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,I=T*T+C*C-1,R=2*(s+S*T+A*C),M=S*S+A*A-s*s,P=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*M))/(2*I):M/R);return{x:r+S+T*P,y:i+A+C*P,r:P}}function Zue(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ele(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function tle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function yN(e){this._=e,this.next=null,this.previous=null}function Edt(e,t){if(!(s=(e=gdt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Zue(r,n,i=e[2]),n=new yN(n),r=new yN(r),i=new yN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Zue(n._,r._,i=e[u]),i=new yN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(ele(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(ele(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=tle(n);(i=i.next)!==r;)(a=tle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=vdt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function xdt(e){return Math.sqrt(e.value)}function TSe(){var e=null,t=1,n=1,r=R1;function i(s){const o=mdt();return s.x=t/2,s.y=n/2,e?s.eachBefore(nle(e)).eachAfter(H8(r,.5,o)).eachBefore(rle(1)):s.eachBefore(nle(xdt)).eachAfter(H8(R1,1,o)).eachAfter(H8(r,s.r/Math.min(t,n),o)).eachBefore(rle(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=VP(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:C_(+s),i):r},i}function nle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function H8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Edt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function rle(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function ASe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function YI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Sdt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(ASe),o}function s(o,a){return function(u){u.children&&YI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Tdt={depth:-1},ile={},q8={};function Adt(e){return e.id}function Cdt(e){return e.parentId}function sle(){var e=Adt,t=Cdt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>Idt(n(w,E,i))),v=y.map(ole),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(ole(w)),s.push(q8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new vE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?ile:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===ile)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===q8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===q8);--y)h.data=null}if(f.parent=Tdt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(wSe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=VP(i),r):e},r.parentId=function(i){return arguments.length?(t=VP(i),r):t},r.path=function(i){return arguments.length?(n=VP(i),r):n},r}function Idt(e){e=`${e}`;let t=e.length;return D7(e,t-1)&&!D7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ole(e){let t=e.length;if(t<2)return"";for(;--t>1&&!D7(e,t););return e.slice(0,t)}function D7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function kdt(e,t){return e.parent===t.parent?1:2}function W8(e){var t=e.children;return t?t[0]:e.t}function G8(e){var t=e.children;return t?t[t.length-1]:e.t}function Rdt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ndt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Pdt(e,t,n){return e.a.parent===t.parent?e.a:n}function HP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}HP.prototype=Object.create(vE.prototype);function Ddt(e){for(var t=new HP(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new HP(s[o],o)),i.parent=n;return(t.parent=new HP(null,0)).children=[t],t}function Odt(){var e=kdt,t=1,n=1,r=null;function i(l){var c=Ddt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Ndt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=G8(p),d=W8(d),p&&d;)m=W8(m),h=G8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(Rdt(Pdt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!G8(h)&&(h.t=p,h.m+=v-y),d&&!W8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function WL(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var CSe=(1+Math.sqrt(5))/2;function ISe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,b=Math.max(v/S,S/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?YI(u,n,r,i,m?r+=p*g/m:s):WL(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const kSe=function e(t){function n(r,i,s,o,a){ISe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CSe);function $dt(){var e=kSe,t=!1,n=1,r=1,i=[0],s=R1,o=R1,a=R1,u=R1,l=R1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(ASe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=ESe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:C_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:C_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:C_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:C_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:C_(+d),c):l},c}function Mdt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,S=d-1;E<S;){var T=E+S>>>1;l[T]<w?E=T+1:S=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var I=h?(p*C+g*A)/h:g;c(f,E,A,p,m,I,y),c(E,d,C,I,m,g,y)}else{var R=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,R),c(E,d,C,p,R,g,y)}}}function Ldt(e,t,n,r,i){(e.depth&1?WL:YI)(e,t,n,r,i)}const Fdt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?YI(l,i,s,o,m?s+=(a-s)*l.value/m:a):WL(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=ISe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CSe);function Xf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Iy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const O7=Symbol("implicit");function Ux(){var e=new Uae,t=[],n=[],r=O7;function i(s){let o=e.get(s);if(o===void 0){if(r!==O7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Uae;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Ux(t,n).unknown(r)},Xf.apply(i,arguments),i}function KI(){var e=Ux().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Iu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return KI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Xf.apply(f(),arguments)}function jdt(e){return function(){return e}}function $7(e){return+e}var ale=[0,1];function ku(e){return e}function M7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jdt(isNaN(t)?NaN:.5)}function Bdt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Udt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=M7(i,r),s=n(o,s)):(r=M7(r,i),s=n(s,o)),function(a){return s(r(a))}}function zdt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=M7(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=$0(e,a,1,r)-1;return s[u](i[u](a))}}function XI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function GL(){var e=ale,t=ale,n=Gm,r,i,s,o=ku,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==ku&&(o=Bdt(e[0],e[d-1])),a=d>2?zdt:Udt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),oc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,$7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=HI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:ku,c()):o!==ku},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function RSe(){return GL()(ku,ku)}function NSe(e,t,n,r){var i=M0(e,t,n),s;switch(r=$v(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Pxe(i,o))&&(r.precision=s),NY(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Dxe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Nxe(i))&&(r.precision=s-(r.type==="%")*2);break}}return jx(r)}function Tb(e){var t=e.domain;return e.ticks=function(n){var r=t();return GU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return NSe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=YU(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function bm(){var e=RSe();return e.copy=function(){return XI(e,bm())},Xf.apply(e,arguments),Tb(e)}function PSe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,$7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return PSe(e).unknown(t)},e=arguments.length?Array.from(e,$7):[0,1],Tb(n)}function DSe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function ule(e){return Math.log(e)}function lle(e){return Math.exp(e)}function Vdt(e){return-Math.log(-e)}function Hdt(e){return-Math.exp(-e)}function qdt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Wdt(e){return e===10?qdt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Gdt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function cle(e){return(t,n)=>-e(-t,n)}function jY(e){const t=e(ule,lle),n=t.domain;let r=10,i,s;function o(){return i=Gdt(r),s=Wdt(r),n()[0]<0?(i=cle(i),s=cle(s),e(Vdt,Hdt)):e(ule,lle),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=GU(l,c,g))}else y=GU(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=$v(u)).precision==null&&(u.trim=!0),u=jx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(DSe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function OSe(){const e=jY(GL()).domain([1,10]);return e.copy=()=>XI(e,OSe()).base(e.base()),Xf.apply(e,arguments),e}function fle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function dle(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function BY(e){var t=1,n=e(fle(t),dle(t));return n.constant=function(r){return arguments.length?e(fle(t=+r),dle(t)):t},Tb(n)}function $Se(){var e=BY(GL());return e.copy=function(){return XI(e,$Se()).constant(e.constant())},Xf.apply(e,arguments)}function hle(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Ydt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Kdt(e){return e<0?-e*e:e*e}function UY(e){var t=e(ku,ku),n=1;function r(){return n===1?e(ku,ku):n===.5?e(Ydt,Kdt):e(hle(n),hle(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Tb(t)}function zY(){var e=UY(GL());return e.copy=function(){return XI(e,zY()).exponent(e.exponent())},Xf.apply(e,arguments),e}function Xdt(){return zY.apply(null,arguments).exponent(.5)}function MSe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=REe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[$0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Yp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return MSe().domain(e).range(t).unknown(r)},Xf.apply(s,arguments)}function LSe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[$0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return LSe().domain([e,t]).range(i).unknown(s)},Xf.apply(Tb(o),arguments)}function FSe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[$0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return FSe().domain(e).range(t).unknown(n)},Xf.apply(i,arguments)}const Y8=new Date,K8=new Date;function Fs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Fs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(Y8.setTime(+s),K8.setTime(+o),e(Y8),e(K8),Math.floor(n(Y8,K8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const bE=Fs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bE);bE.range;const Fp=1e3,hc=Fp*60,jp=hc*60,_m=jp*24,VY=_m*7,ple=_m*30,X8=_m*365,Bp=Fs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fp)},(e,t)=>(t-e)/Fp,e=>e.getUTCSeconds());Bp.range;const YL=Fs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fp)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getMinutes());YL.range;const KL=Fs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getUTCMinutes());KL.range;const XL=Fs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fp-e.getMinutes()*hc)},(e,t)=>{e.setTime(+e+t*jp)},(e,t)=>(t-e)/jp,e=>e.getHours());XL.range;const QL=Fs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jp)},(e,t)=>(t-e)/jp,e=>e.getUTCHours());QL.range;const Xp=Fs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hc)/_m,e=>e.getDate()-1);Xp.range;const p0=Fs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_m,e=>e.getUTCDate()-1);p0.range;const jSe=Fs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_m,e=>Math.floor(e/_m));jSe.range;function Ab(e){return Fs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hc)/VY)}const zx=Ab(0),d3=Ab(1),Qdt=Ab(2),Jdt=Ab(3),_E=Ab(4),Zdt=Ab(5),eht=Ab(6);zx.range;d3.range;Qdt.range;Jdt.range;_E.range;Zdt.range;eht.range;function Cb(e){return Fs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/VY)}const Vx=Cb(0),h3=Cb(1),tht=Cb(2),nht=Cb(3),wE=Cb(4),rht=Cb(5),iht=Cb(6);Vx.range;h3.range;tht.range;nht.range;wE.range;rht.range;iht.range;const p2=Fs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());p2.range;const m2=Fs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());m2.range;const ph=Fs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ph.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ph.range;const mh=Fs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());mh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});mh.range;function BSe(e,t,n,r,i,s){const o=[[Bp,1,Fp],[Bp,5,5*Fp],[Bp,15,15*Fp],[Bp,30,30*Fp],[s,1,hc],[s,5,5*hc],[s,15,15*hc],[s,30,30*hc],[i,1,jp],[i,3,3*jp],[i,6,6*jp],[i,12,12*jp],[r,1,_m],[r,2,2*_m],[n,1,VY],[t,1,ple],[t,3,3*ple],[e,1,X8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Lx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(M0(l/X8,c/X8,f));if(h===0)return bE.every(Math.max(M0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[sht,oht]=BSe(mh,m2,Vx,jSe,QL,KL),[aht,uht]=BSe(ph,p2,zx,Xp,XL,YL);function Q8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function J8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function iT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function USe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=sT(i),c=oT(i),f=sT(s),d=oT(s),h=sT(o),p=oT(o),m=sT(a),g=oT(a),y=sT(u),v=oT(u),b={a:B,A:U,b:H,B:D,c:null,d:_le,e:_le,f:Nht,g:Uht,G:Vht,H:Iht,I:kht,j:Rht,L:zSe,m:Pht,M:Dht,p:z,q:W,Q:xle,s:Sle,S:Oht,u:$ht,U:Mht,V:Lht,w:Fht,W:jht,x:null,X:null,y:Bht,Y:zht,Z:Hht,"%":Ele},w={a:j,A:q,b:G,B:ne,c:null,d:wle,e:wle,f:Yht,g:ipt,G:opt,H:qht,I:Wht,j:Ght,L:HSe,m:Kht,M:Xht,p:ce,q:de,Q:xle,s:Sle,S:Qht,u:Jht,U:Zht,V:ept,w:tpt,W:npt,x:null,X:null,y:rpt,Y:spt,Z:apt,"%":Ele},E={a:I,A:R,b:M,B:P,c:O,d:vle,e:vle,f:Sht,g:yle,G:gle,H:ble,I:ble,j:_ht,L:xht,m:bht,M:wht,p:C,q:vht,Q:Aht,s:Cht,S:Eht,u:hht,U:pht,V:mht,w:dht,W:ght,x:F,X:L,y:yle,Y:gle,Z:yht,"%":Tht};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(he,ye){return function(Ie){var ve=[],Ke=-1,Ue=0,gt=he.length,rt,be,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<gt;)he.charCodeAt(Ke)===37&&(ve.push(he.slice(Ue,Ke)),(be=mle[rt=he.charAt(++Ke)])!=null?rt=he.charAt(++Ke):be=rt==="e"?" ":"0",(ke=ye[rt])&&(rt=ke(Ie,be)),ve.push(rt),Ue=Ke+1);return ve.push(he.slice(Ue,Ke)),ve.join("")}}function T(he,ye){return function(Ie){var ve=iT(1900,void 0,1),Ke=A(ve,he,Ie+="",0),Ue,gt;if(Ke!=Ie.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ue=J8(iT(ve.y,0,1)),gt=Ue.getUTCDay(),Ue=gt>4||gt===0?h3.ceil(Ue):h3(Ue),Ue=p0.offset(Ue,(ve.V-1)*7),ve.y=Ue.getUTCFullYear(),ve.m=Ue.getUTCMonth(),ve.d=Ue.getUTCDate()+(ve.w+6)%7):(Ue=Q8(iT(ve.y,0,1)),gt=Ue.getDay(),Ue=gt>4||gt===0?d3.ceil(Ue):d3(Ue),Ue=Xp.offset(Ue,(ve.V-1)*7),ve.y=Ue.getFullYear(),ve.m=Ue.getMonth(),ve.d=Ue.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),gt="Z"in ve?J8(iT(ve.y,0,1)).getUTCDay():Q8(iT(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(gt+5)%7:ve.w+ve.U*7-(gt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,J8(ve)):Q8(ve)}}function A(he,ye,Ie,ve){for(var Ke=0,Ue=ye.length,gt=Ie.length,rt,be;Ke<Ue;){if(ve>=gt)return-1;if(rt=ye.charCodeAt(Ke++),rt===37){if(rt=ye.charAt(Ke++),be=E[rt in mle?ye.charAt(Ke++):rt],!be||(ve=be(he,Ie,ve))<0)return-1}else if(rt!=Ie.charCodeAt(ve++))return-1}return ve}function C(he,ye,Ie){var ve=l.exec(ye.slice(Ie));return ve?(he.p=c.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function I(he,ye,Ie){var ve=h.exec(ye.slice(Ie));return ve?(he.w=p.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function R(he,ye,Ie){var ve=f.exec(ye.slice(Ie));return ve?(he.w=d.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function M(he,ye,Ie){var ve=y.exec(ye.slice(Ie));return ve?(he.m=v.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function P(he,ye,Ie){var ve=m.exec(ye.slice(Ie));return ve?(he.m=g.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function O(he,ye,Ie){return A(he,t,ye,Ie)}function F(he,ye,Ie){return A(he,n,ye,Ie)}function L(he,ye,Ie){return A(he,r,ye,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function D(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ye=S(he+="",b);return ye.toString=function(){return he},ye},parse:function(he){var ye=T(he+="",!1);return ye.toString=function(){return he},ye},utcFormat:function(he){var ye=S(he+="",w);return ye.toString=function(){return he},ye},utcParse:function(he){var ye=T(he+="",!0);return ye.toString=function(){return he},ye}}}var mle={"-":"",_:" ",0:"0"},lo=/^\s*\d+/,lht=/^%/,cht=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function fht(e){return e.replace(cht,"\\$&")}function sT(e){return new RegExp("^(?:"+e.map(fht).join("|")+")","i")}function oT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dht(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hht(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function pht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function mht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function ght(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function gle(e,t,n){var r=lo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function yle(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yht(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function vht(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function vle(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function _ht(e,t,n){var r=lo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ble(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Eht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function xht(e,t,n){var r=lo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Sht(e,t,n){var r=lo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Tht(e,t,n){var r=lht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Aht(e,t,n){var r=lo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Cht(e,t,n){var r=lo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function _le(e,t){return mr(e.getDate(),t,2)}function Iht(e,t){return mr(e.getHours(),t,2)}function kht(e,t){return mr(e.getHours()%12||12,t,2)}function Rht(e,t){return mr(1+Xp.count(ph(e),e),t,3)}function zSe(e,t){return mr(e.getMilliseconds(),t,3)}function Nht(e,t){return zSe(e,t)+"000"}function Pht(e,t){return mr(e.getMonth()+1,t,2)}function Dht(e,t){return mr(e.getMinutes(),t,2)}function Oht(e,t){return mr(e.getSeconds(),t,2)}function $ht(e){var t=e.getDay();return t===0?7:t}function Mht(e,t){return mr(zx.count(ph(e)-1,e),t,2)}function VSe(e){var t=e.getDay();return t>=4||t===0?_E(e):_E.ceil(e)}function Lht(e,t){return e=VSe(e),mr(_E.count(ph(e),e)+(ph(e).getDay()===4),t,2)}function Fht(e){return e.getDay()}function jht(e,t){return mr(d3.count(ph(e)-1,e),t,2)}function Bht(e,t){return mr(e.getFullYear()%100,t,2)}function Uht(e,t){return e=VSe(e),mr(e.getFullYear()%100,t,2)}function zht(e,t){return mr(e.getFullYear()%1e4,t,4)}function Vht(e,t){var n=e.getDay();return e=n>=4||n===0?_E(e):_E.ceil(e),mr(e.getFullYear()%1e4,t,4)}function Hht(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function wle(e,t){return mr(e.getUTCDate(),t,2)}function qht(e,t){return mr(e.getUTCHours(),t,2)}function Wht(e,t){return mr(e.getUTCHours()%12||12,t,2)}function Ght(e,t){return mr(1+p0.count(mh(e),e),t,3)}function HSe(e,t){return mr(e.getUTCMilliseconds(),t,3)}function Yht(e,t){return HSe(e,t)+"000"}function Kht(e,t){return mr(e.getUTCMonth()+1,t,2)}function Xht(e,t){return mr(e.getUTCMinutes(),t,2)}function Qht(e,t){return mr(e.getUTCSeconds(),t,2)}function Jht(e){var t=e.getUTCDay();return t===0?7:t}function Zht(e,t){return mr(Vx.count(mh(e)-1,e),t,2)}function qSe(e){var t=e.getUTCDay();return t>=4||t===0?wE(e):wE.ceil(e)}function ept(e,t){return e=qSe(e),mr(wE.count(mh(e),e)+(mh(e).getUTCDay()===4),t,2)}function tpt(e){return e.getUTCDay()}function npt(e,t){return mr(h3.count(mh(e)-1,e),t,2)}function rpt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function ipt(e,t){return e=qSe(e),mr(e.getUTCFullYear()%100,t,2)}function spt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function opt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wE(e):wE.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function apt(){return"+0000"}function Ele(){return"%"}function xle(e){return+e}function Sle(e){return Math.floor(+e/1e3)}var c_,HY,WSe,JL,GSe;upt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function upt(e){return c_=USe(e),HY=c_.format,WSe=c_.parse,JL=c_.utcFormat,GSe=c_.utcParse,c_}function lpt(e){return new Date(e)}function cpt(e){return e instanceof Date?+e:+new Date(+e)}function qY(e,t,n,r,i,s,o,a,u,l){var c=RSe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,cpt)):d().map(lpt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(DSe(T,S)):c},c.copy=function(){return XI(c,qY(e,t,n,r,i,s,o,a,u,l))},c}function YSe(){return Xf.apply(qY(aht,uht,ph,p2,zx,Xp,XL,YL,Bp,HY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fpt(){return Xf.apply(qY(sht,oht,mh,m2,Vx,p0,QL,KL,Bp,JL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ZL(){var e=0,t=1,n,r,i,s,o=ku,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Gm),l.rangeRound=c(HI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function ky(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function WY(){var e=Tb(ZL()(ku));return e.copy=function(){return ky(e,WY())},Iy.apply(e,arguments)}function KSe(){var e=jY(ZL()).domain([1,10]);return e.copy=function(){return ky(e,KSe()).base(e.base())},Iy.apply(e,arguments)}function XSe(){var e=BY(ZL());return e.copy=function(){return ky(e,XSe()).constant(e.constant())},Iy.apply(e,arguments)}function GY(){var e=UY(ZL());return e.copy=function(){return ky(e,GY()).exponent(e.exponent())},Iy.apply(e,arguments)}function dpt(){return GY.apply(null,arguments).exponent(.5)}function e6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=ku,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=wY(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Gm),h.rangeRound=p(HI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function QSe(){var e=Tb(e6()(ku));return e.copy=function(){return ky(e,QSe())},Iy.apply(e,arguments)}function JSe(){var e=jY(e6()).domain([.1,1,10]);return e.copy=function(){return ky(e,JSe()).base(e.base())},Iy.apply(e,arguments)}function ZSe(){var e=BY(e6());return e.copy=function(){return ky(e,ZSe()).constant(e.constant())},Iy.apply(e,arguments)}function YY(){var e=UY(e6());return e.copy=function(){return ky(e,YY()).exponent(e.exponent())},Iy.apply(e,arguments)}function hpt(){return YY.apply(null,arguments).exponent(.5)}function Qf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const ppt=Qf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),mpt=Qf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),gpt=Qf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ypt=Qf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),vpt=Qf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),bpt=Qf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),_pt=Qf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wpt=Qf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ept=Qf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),xpt=Qf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),eTe=Qf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function _n(e){return function(){return e}}const Tle=Math.abs,Ko=Math.atan2,e1=Math.cos,Spt=Math.max,Z8=Math.min,fd=Math.sin,Y1=Math.sqrt,Jo=1e-12,EE=Math.PI,p3=EE/2,eC=2*EE;function Tpt(e){return e>1?0:e<-1?EE:Math.acos(e)}function Ale(e){return e>=1?p3:e<=-1?-p3:Math.asin(e)}function t6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new AY(t)}function Apt(e){return e.innerRadius}function Cpt(e){return e.outerRadius}function Ipt(e){return e.startAngle}function kpt(e){return e.endAngle}function Rpt(e){return e&&e.padAngle}function Npt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Jo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function vN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Y1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,S=d*m-p*h,T=(b<0?-1:1)*Y1(Spt(0,E*E*w-S*S)),A=(S*b-v*T)/w,C=(-S*v-b*T)/w,I=(S*b+v*T)/w,R=(-S*v+b*T)/w,M=A-g,P=C-y,O=I-g,F=R-y;return M*M+P*P>O*O+F*F&&(A=I,C=R),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function L7(){var e=Apt,t=Cpt,n=_n(0),r=null,i=Ipt,s=kpt,o=Rpt,a=null,u=t6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-p3,m=s.apply(this,arguments)-p3,g=Tle(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Jo))a.moveTo(0,0);else if(g>eC-Jo)a.moveTo(h*e1(p),h*fd(p)),a.arc(0,0,h,p,m,!y),d>Jo&&(a.moveTo(d*e1(m),d*fd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,S=g,T=g,A=o.apply(this,arguments)/2,C=A>Jo&&(r?+r.apply(this,arguments):Y1(d*d+h*h)),I=Z8(Tle(h-d)/2,+n.apply(this,arguments)),R=I,M=I,P,O;if(C>Jo){var F=Ale(C/d*fd(A)),L=Ale(C/h*fd(A));(S-=F*2)>Jo?(F*=y?1:-1,w+=F,E-=F):(S=0,w=E=(p+m)/2),(T-=L*2)>Jo?(L*=y?1:-1,v+=L,b-=L):(T=0,v=b=(p+m)/2)}var B=h*e1(v),U=h*fd(v),H=d*e1(E),D=d*fd(E);if(I>Jo){var z=h*e1(b),W=h*fd(b),j=d*e1(w),q=d*fd(w),G;if(g<EE)if(G=Npt(B,U,j,q,z,W,H,D)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ye=1/fd(Tpt((ne*de+ce*he)/(Y1(ne*ne+ce*ce)*Y1(de*de+he*he)))/2),Ie=Y1(G[0]*G[0]+G[1]*G[1]);R=Z8(I,(d-Ie)/(ye-1)),M=Z8(I,(h-Ie)/(ye+1))}else R=M=0}T>Jo?M>Jo?(P=vN(j,q,B,U,h,M,y),O=vN(z,W,H,D,h,M,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),M<I?a.arc(P.cx,P.cy,M,Ko(P.y01,P.x01),Ko(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,M,Ko(P.y01,P.x01),Ko(P.y11,P.x11),!y),a.arc(0,0,h,Ko(P.cy+P.y11,P.cx+P.x11),Ko(O.cy+O.y11,O.cx+O.x11),!y),a.arc(O.cx,O.cy,M,Ko(O.y11,O.x11),Ko(O.y01,O.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>Jo)||!(S>Jo)?a.lineTo(H,D):R>Jo?(P=vN(H,D,z,W,d,-R,y),O=vN(B,U,j,q,d,-R,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<I?a.arc(P.cx,P.cy,R,Ko(P.y01,P.x01),Ko(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,R,Ko(P.y01,P.x01),Ko(P.y11,P.x11),!y),a.arc(0,0,d,Ko(P.cy+P.y11,P.cx+P.x11),Ko(O.cy+O.y11,O.cx+O.x11),y),a.arc(O.cx,O.cy,R,Ko(O.y11,O.x11),Ko(O.y01,O.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-EE/2;return[e1(f)*c,fd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:_n(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:_n(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:_n(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_n(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:_n(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:_n(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:_n(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function n6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tTe(e){this._context=e}tTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function KY(e){return new tTe(e)}function nTe(e){return e[0]}function rTe(e){return e[1]}function iTe(e,t){var n=_n(!0),r=null,i=KY,s=null,o=t6(a);e=typeof e=="function"?e:e===void 0?nTe:_n(e),t=typeof t=="function"?t:t===void 0?rTe:_n(t);function a(u){var l,c=(u=n6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:_n(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:_n(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:_n(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function sTe(e,t,n){var r=null,i=_n(!0),s=null,o=KY,a=null,u=t6(l);e=typeof e=="function"?e:e===void 0?nTe:_n(+e),t=typeof t=="function"?t:_n(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?rTe:_n(+n);function l(f){var d,h,p,m=(f=n6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return iTe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_n(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_n(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:_n(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Ppt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Dpt(e){return e}function Opt(){var e=Dpt,t=Ppt,n=null,r=_n(0),i=_n(eC),s=_n(0);function o(a){var u,l=(a=n6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(eC,Math.max(-eC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,S){return t(p[E],p[S])}):n!=null&&h.sort(function(E,S){return n(a[E],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:_n(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:_n(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:_n(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:_n(+a),o):s},o}const $pt={draw(e,t){const n=Y1(t/EE);e.moveTo(n,0),e.arc(0,0,n,0,eC)}};function Mpt(e,t){let n=null,r=t6(i);e=typeof e=="function"?e:_n(e||$pt),t=typeof t=="function"?t:_n(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:_n(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:_n(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function F0(){}function m3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function r6(e){this._context=e}r6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:m3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:m3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lpt(e){return new r6(e)}function oTe(e){this._context=e}oTe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:m3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fpt(e){return new oTe(e)}function aTe(e){this._context=e}aTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:m3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jpt(e){return new aTe(e)}function uTe(e,t){this._basis=new r6(e),this._beta=t}uTe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Bpt=function e(t){function n(r){return t===1?new r6(r):new uTe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function g3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function XY(e,t){this._context=e,this._k=(1-t)/6}XY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:g3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:g3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Upt=function e(t){function n(r){return new XY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function QY(e,t){this._context=e,this._k=(1-t)/6}QY.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:g3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zpt=function e(t){function n(r){return new QY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function JY(e,t){this._context=e,this._k=(1-t)/6}JY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:g3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vpt=function e(t){function n(r){return new JY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ZY(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Jo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Jo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function lTe(e,t){this._context=e,this._alpha=t}lTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:ZY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hpt=function e(t){function n(r){return t?new lTe(r,t):new XY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function cTe(e,t){this._context=e,this._alpha=t}cTe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ZY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qpt=function e(t){function n(r){return t?new cTe(r,t):new QY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function fTe(e,t){this._context=e,this._alpha=t}fTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ZY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wpt=function e(t){function n(r){return t?new fTe(r,t):new JY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function dTe(e){this._context=e}dTe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Gpt(e){return new dTe(e)}function Cle(e){return e<0?-1:1}function Ile(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Cle(s)+Cle(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function kle(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ej(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function y3(e){this._context=e}y3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ej(this,this._t0,kle(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ej(this,kle(this,n=Ile(this,e,t)),n);break;default:ej(this,this._t0,n=Ile(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function hTe(e){this._context=new pTe(e)}(hTe.prototype=Object.create(y3.prototype)).point=function(e,t){y3.prototype.point.call(this,t,e)};function pTe(e){this._context=e}pTe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Ypt(e){return new y3(e)}function Kpt(e){return new hTe(e)}function mTe(e){this._context=e}mTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Rle(e),i=Rle(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Rle(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Xpt(e){return new mTe(e)}function i6(e,t){this._context=e,this._t=t}i6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Qpt(e){return new i6(e,.5)}function Jpt(e){return new i6(e,0)}function Zpt(e){return new i6(e,1)}function Nle(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ple(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function emt(e,t){return e[t]}function tmt(e){const t=[];return t.key=e,t}function nmt(){var e=_n([]),t=Ple,n=Nle,r=emt;function i(s){var o=Array.from(e.apply(this,arguments),tmt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=n6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:_n(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:_n(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Ple:typeof s=="function"?s:_n(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Nle,i):n},i}function tA(e,t,n){this.k=e,this.x=t,this.y=n}tA.prototype={constructor:tA,scale:function(e){return e===1?this:new tA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new tA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};tA.prototype;function eK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?JL("%B"):jx(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(dm,{children:_.jsx(Os,{gap:3,children:_.jsx(st,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(dm,{children:_.jsx(Fa,{withinPortal:!0,label:c,children:_.jsx(st,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const rmt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:eK},Symbol.toStringTag,{value:"Module"}));function gTe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(dm,{children:_.jsx(Os,{gap:3,children:_.jsx(st,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Os,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(st,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const imt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:gTe},Symbol.toStringTag,{value:"Module"})),Yl={top:15,left:100,right:50,bottom:50};function F7({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=gw(),o=N.useMemo(()=>s-Yl.left-Yl.right,[s]),a=N.useMemo(()=>i-Yl.top-Yl.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ux(eTe).domain(d)},[n,t.category]),l=N.useMemo(()=>e?bm([Yl.left,o+Yl.left]).domain([0,h0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?KI([Yl.top,a+Yl.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Yl.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Yl.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(eK,{xScale:l,yRange:c.range(),vertPosition:a+Yl.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(gTe,{yScale:c,horizontalPosition:Yl.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Bm,{})}const smt=Object.freeze(Object.defineProperty({__proto__:null,Bar:F7,default:F7},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Hu(e){return e!=null?dr(e)?e:[e]:[]}function omt(e=0,t=1/0){return`${Dle(e)} < row_number() && row_number() <= ${Dle(t)}`}function Dle(e){return e<0?`count() + ${e}`:e}class yTe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(omt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Hu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function wn(e){throw Error(e)}function Qa(e){return typeof e=="number"}function di(e){return typeof e=="function"}function s6(e,t){const n=Array(e);if(di(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let amt=class extends yTe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){wn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){wn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){wn("Not implemented")}getter(t){wn("Not implemented")}objects(t){wn("Not implemented")}object(t){wn("Not implemented")}[Symbol.iterator](){wn("Not implemented")}print(t={}){Qa(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=s6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},umt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},lmt=function(e){return e&&di(e.get)?e:new umt(e)};function wm(e){return e instanceof Date}function ga(e){return e===Object(e)}function v3(e){return e instanceof RegExp}function Mo(e){return typeof e=="string"}function cmt(e,t){const n=r=>wn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Ole(e.entries(),t):wm(e)?n("Date"):v3(e)?n("RegExp"):Mo(e)?n():dr(e)?fmt(e,t):di(e[Symbol.iterator])?dmt(e,t):ga(e)?Ole(Object.entries(e),t):n()}function Ole(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function fmt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function dmt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:hmt}=Object.prototype;function Ff(e,t){return hmt.call(e,t)}function Hl(e){return e?new $le({...e.data()},e.columnNames()):new $le}class $le{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Ff(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,pmt=Object.getPrototypeOf(Int8Array);function QI(e){return e instanceof pmt}function K1(e){return dr(e)||QI(e)}function wf(e){return e!=null&&e===e}const aT=e=>K1(e)||Mo(e),mmt={compact:e=>K1(e)?e.filter(t=>wf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>aT(e)?e.includes(t,n):!1,indexof:(e,t)=>aT(e)?e.indexOf(t):-1,join:(e,t)=>K1(e)?e.join(t):ar,lastindexof:(e,t)=>aT(e)?e.lastIndexOf(t):-1,length:e=>aT(e)?e.length:0,pluck:(e,t)=>K1(e)?e.map(n=>wf(n)?n[t]:ar):ar,reverse:e=>K1(e)?e.slice().reverse():Mo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>aT(e)?e.slice(t,n):ar};function gmt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function qP(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const dd=e=>(e<10?"0":"")+e,ymt=e=>e<0?"-"+qP(-e,6):e>9999?"+"+qP(e,6):qP(e,4);function vTe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return ymt(e)+"-"+dd(t+1)+"-"+dd(n)+(!u||o?"T"+dd(r)+":"+dd(i)+":"+dd(s)+"."+qP(o,3)+l:s?"T"+dd(r)+":"+dd(i)+":"+dd(s)+l:i||r||!a?"T"+dd(r)+":"+dd(i)+l:"")}function bTe(e,t){return isNaN(e)?"Invalid Date":vTe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function o6(e,t){return isNaN(e)?"Invalid Date":vTe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const vmt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function bmt(e){return e.match(vmt)&&!isNaN(Date.parse(e))}function _mt(e,t=Date.parse){return bmt(e)?t(e):e}const _Te=6e4,wTe=864e5,ETe=6048e5,Vi=new Date,Hi=new Date,Zi=e=>(Vi.setTime(typeof e=="string"?_mt(e):e),Vi);function wmt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function Emt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function xmt(e){Hi.setTime(+e),Hi.setHours(0,0,0,0),Vi.setTime(+Hi),Vi.setMonth(0),Vi.setDate(1);const t=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*_Te;return Math.floor(1+(Hi-Vi-t)/wTe)}function Smt(e){Hi.setTime(+e),Hi.setUTCHours(0,0,0,0);const t=Date.UTC(Hi.getUTCFullYear(),0,1);return Math.floor(1+(Hi-t)/wTe)}function Tmt(e,t){const n=t||0;Hi.setTime(+e),Hi.setDate(Hi.getDate()-(Hi.getDay()+7-n)%7),Hi.setHours(0,0,0,0),Vi.setTime(+e),Vi.setMonth(0),Vi.setDate(1),Vi.setDate(1-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0);const r=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*_Te;return Math.floor((1+(Hi-Vi)-r)/ETe)}function Amt(e,t){const n=t||0;return Hi.setTime(+e),Hi.setUTCDate(Hi.getUTCDate()-(Hi.getUTCDay()+7-n)%7),Hi.setUTCHours(0,0,0,0),Vi.setTime(+e),Vi.setUTCMonth(0),Vi.setUTCDate(1),Vi.setUTCDate(1-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),Math.floor((1+(Hi-Vi))/ETe)}const Cmt={format_date:(e,t)=>bTe(Zi(e),!t),format_utcdate:(e,t)=>o6(Zi(e),!t),timestamp:e=>+Zi(e),year:e=>Zi(e).getFullYear(),quarter:e=>Math.floor(Zi(e).getMonth()/3),month:e=>Zi(e).getMonth(),date:e=>Zi(e).getDate(),dayofweek:e=>Zi(e).getDay(),hours:e=>Zi(e).getHours(),minutes:e=>Zi(e).getMinutes(),seconds:e=>Zi(e).getSeconds(),milliseconds:e=>Zi(e).getMilliseconds(),utcyear:e=>Zi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Zi(e).getUTCMonth()/3),utcmonth:e=>Zi(e).getUTCMonth(),utcdate:e=>Zi(e).getUTCDate(),utcdayofweek:e=>Zi(e).getUTCDay(),utchours:e=>Zi(e).getUTCHours(),utcminutes:e=>Zi(e).getUTCMinutes(),utcseconds:e=>Zi(e).getUTCSeconds(),utcmilliseconds:e=>Zi(e).getUTCMilliseconds(),datetime:wmt,dayofyear:xmt,week:Tmt,utcdatetime:Emt,utcdayofyear:Smt,utcweek:Amt,now:Date.now};function tK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:wm(e)||wm(t)?+e==+t:v3(e)&&v3(t)?e+""==t+"":ga(e)&&ga(t)?Imt(e,t):!1}function Imt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Mle(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Mle(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!tK(e[o],t[o]))return!1}return!0}function Mle(e,t,n=tK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const kmt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Rmt=Math.random;function Hx(){return Rmt()}const Nmt={random:Hx,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function nK(e){return e instanceof Map}function Pmt(e){return e instanceof Set}function WP(e){return nK(e)||Pmt(e)}function tj(e){return Array.from(e)}const Dmt={has:(e,t)=>WP(e)?e.has(t):e!=null?Ff(e,t):!1,keys:e=>nK(e)?tj(e.keys()):e!=null?Object.keys(e):[],values:e=>WP(e)?tj(e.values()):e!=null?Object.values(e):[],entries:e=>WP(e)?tj(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function Omt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Ff(t,e))return t[e];return n!==void 0?n:e}function $mt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Mmt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Z_={bin:gmt,equal:tK,recode:Omt,sequence:$mt,...mmt,...Cmt,...kmt,...Nmt,...Dmt,...Mmt};function g2(e){return typeof e=="bigint"}function gh(e){return e===void 0?e+"":g2(e)?e+"n":JSON.stringify(e)}function mn(e,t=[],n=[]){return new Lmt(e,Hu(t),Hu(n))}let Lmt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${gh(n)}]`),...this.params.map(gh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const xTe=e=>mn("any",e),STe=()=>mn("count"),TTe=e=>mn("array_agg",e),ATe=e=>mn("array_agg_distinct",e),CTe=(e,t)=>mn("map_agg",[e,t]),ITe=(e,t)=>mn("object_agg",[e,t]),kTe=(e,t)=>mn("entries_agg",[e,t]);({...Z_});function Fmt(e,t){e=WP(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function jmt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Bmt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Umt(e,t,n,r){const i=r==="map"||r===!0?CTe:r==="entries"?kTe:r==="object"?ITe:wn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Fmt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:TTe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const zmt="ArrayPattern",Vmt="ArrowFunctionExpression",Hmt="FunctionExpression",m0="Identifier",qx="Literal",RTe="MemberExpression",qmt="ObjectExpression",NTe="ObjectPattern",PTe="Property",JI="Column",Wmt="Constant",Gmt="Dictionary",Ymt="Function",Kmt="Parameter",DTe="Op",Xr=(e,t)=>{const n=Xmt[e.type];return n?n(e,t):wn(`Unsupported expression construct: ${e.type}`)},nj=(e,t)=>"("+Xr(e.left,t)+" "+e.operator+" "+Xr(e.right,t)+")",rj=(e,t)=>"("+wd(e.params,t)+")=>"+Xr(e.body,t),Lle=(e,t)=>Xr(e.callee,t)+"("+wd(e.arguments,t)+")",wd=(e,t,n=",")=>e.map(r=>Xr(r,t)).join(n),OTe=e=>e.computed?`[${gh(e.name)}]`:`.${e.name}`,Fle=(e,t,n)=>{const r=e.table||"";return`data${r}${OTe(e)}.${n}(${t.index}${r})`},Xmt={Constant:e=>e.raw,Column:(e,t)=>Fle(e,t,"get"),Dictionary:(e,t)=>Fle(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${OTe(e)}`,Op:(e,t)=>`op(${gh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Xr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Xr(e.object,t),i=Xr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Lle,NewExpression:(e,t)=>"new "+Lle(e,t),ArrayExpression:(e,t)=>"["+wd(e.elements,t)+"]",AssignmentExpression:nj,BinaryExpression:nj,LogicalExpression:nj,UnaryExpression:(e,t)=>"("+e.operator+Xr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Xr(e.test,t)+"?"+Xr(e.consequent,t)+":"+Xr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+wd(e.properties,t)+"})",Property:(e,t)=>{const n=Xr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Xr(e.value,t)},ArrowFunctionExpression:rj,FunctionExpression:rj,FunctionDeclaration:rj,ArrayPattern:(e,t)=>"["+wd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+wd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+wd(e.declarations,t,","),VariableDeclarator:(e,t)=>Xr(e.id,t)+"="+Xr(e.init,t),SpreadElement:(e,t)=>"..."+Xr(e.argument,t),BlockStatement:(e,t)=>"{"+wd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Xr(e.expression,t),IfStatement:(e,t)=>"if ("+Xr(e.test,t)+")"+Xr(e.consequent,t)+(e.alternate?" else "+Xr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Xr(e.discriminant,t)+") {"+wd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Xr(e.test,t):"default")+": "+wd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Xr(e.argument,t),Program:(e,t)=>Xr(e.body[0],t)};function b3(e,t={index:"row"}){return Xr(e,t)}function Qmt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function xE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:wm(e)?+e:dr(e)||QI(e)?`[${e.map(xE)}]`:v3(e)?e+"":Jmt(e)}function Jmt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${xE(e[r])}`;return t+="}",t}function _3(e,t){const n=e.length;return n===1?(r,i)=>xE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=xE(a)}return s}}function Zmt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=xE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=xE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function xp(){}function egt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function _s(e){return e.init=e.init||xp,e.add=e.add||xp,e.rem=e.rem||xp,e}function jle(e,t){return e.product_v=!1,e.product=t}const $Te={count:{create:()=>_s({value:e=>e.count}),param:[]},array_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>_s({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>_s({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>_s({value:e=>e.valid}),param:[1]},invalid:{create:()=>_s({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Zmt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>_s({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>_s({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>g2(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>jle(e,1),value:e=>e.valid?e.product_v?jle(e,egt(e.list.values())):e.product:void 0,add:(e,t)=>g2(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>_s({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>_s({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>_s({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>_s({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>_s({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>_s({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>_s({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>_s({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>_s({value:i=>Qmt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Ble={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Ule={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},MTe={row_number:{create(){return{init:xp,value:e=>e.index+1}},param:[]},rank:Ble,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Ble.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Ule,ntile:{create(e){e=+e,e>0||wn("ntile num must be greater than zero.");const{init:t,value:n}=Ule.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:xp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:xp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:xp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:xp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||wn("nth_value nth must be greater than zero."),{init:xp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return wf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=tgt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function tgt(e,t,n){for(const r=e.size;n<r;++n)if(wf(e.value(n,t)))return n;return-1}function rK(e){return Ff($Te,e)}function iK(e){return Ff(MTe,e)}function LTe(e){return Ff(Z_,e)||e==="row_object"}function FTe(e){return rK(e)&&$Te[e]}function jTe(e){return iK(e)&&MTe[e]}function uT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const sK={escape:(e,t,n)=>uT(e,t,n),expr:(e,t)=>uT(`(row,data,op)=>${e}`,Z_,t),expr2:(e,t)=>uT(`(row0,data0,row,data)=>${e}`,Z_,t),join:(e,t)=>uT(`(row1,data1,row2,data2)=>${e}`,Z_,t),param:(e,t)=>uT(e,Z_,t)},ngt={"==":1,"!=":1,"===":1,"!==":1};function BTe(e,t,n=0,r,i){if(e.type=JI,e.name=t,e.table=n,i&&r&&di(r.keyFor)){const s=ngt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===qx&&rgt(i,e,s,r.keyFor(s.value))}return e}function rgt(e,t,n,r){return r<0?(e.type=qx,e.value=!1,e.raw="false"):(t.type=Gmt,n.value=r,n.raw=r+""),!0}function a6(e){return dr(e)?e:nK(e)?e.entries():e?Object.entries(e):[]}const UTe="row_object";function zTe(e,t){e.type=qmt;const n=e.properties=[];for(const r of a6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:PTe,key:{type:qx,raw:gh(s)},value:BTe({computed:!0},i)})}return e}function VTe(e){return b3(zTe({},e))}function HTe(e){return sK.expr(VTe(e))}const igt=new TextDecoder("utf-8"),j7=e=>igt.decode(e),sgt=new TextEncoder,oK=e=>sgt.encode(e),ogt=e=>typeof e=="boolean",mu=e=>typeof e=="function",Ry=e=>e!=null&&Object(e)===e,u6=e=>Ry(e)&&mu(e.then),aK=e=>Ry(e)&&mu(e[Symbol.iterator]),l6=e=>Ry(e)&&mu(e[Symbol.asyncIterator]),agt=e=>Ry(e)&&"done"in e&&"value"in e,qTe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,ugt=e=>Ry(e)&&mu(e.abort)&&mu(e.getWriter)&&!qTe(e),lgt=e=>Ry(e)&&mu(e.end)&&mu(e.write)&&ogt(e.writable)&&!qTe(e),cgt=e=>Ry(e)&&mu(e.clear)&&mu(e.bytes)&&mu(e.position)&&mu(e.setPosition)&&mu(e.capacity)&&mu(e.getBufferIdentifier)&&mu(e.createLong),uK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function fgt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function w3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function yh(e,t){const n=fgt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?w3(o,s,a):o=s;break}w3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function qs(e,t){let n=agt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=oK(n)),n instanceof ArrayBuffer?new e(n):n instanceof uK?new e(n):cgt(n)?qs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const lT=e=>qs(Int32Array,e),Nr=e=>qs(Uint8Array,e),B7=e=>(e.next(),e);function*dgt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof uK?n(t):aK(t)?t:n(t);return yield*B7(function*(i){let s=null;do s=i.next(yield qs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const hgt=e=>dgt(Uint8Array,e);function WTe(e,t){return V1(this,arguments,function*(){if(u6(t))return yield Yn(yield Yn(yield*F5(jA(WTe(e,yield Yn(t))))));const r=function(o){return V1(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return V1(this,arguments,function*(){yield Yn(yield*F5(jA(B7(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof uK?r(t):aK(t)?i(t):l6(t)?t:r(t);return yield Yn(yield*F5(jA(B7(function(o){return V1(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(qs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const pgt=e=>WTe(Uint8Array,e);function GTe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function mgt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const zle={fromIterable(e){return bN(ggt(e))},fromAsyncIterable(e){return bN(ygt(e))},fromDOMStream(e){return bN(vgt(e))},fromNodeStream(e){return bN(_gt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},bN=e=>(e.next(),e);function*ggt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?yh(r,o)[0]:([i,r,a]=yh(r,o),i)}({cmd:s,size:o}=yield null);const l=hgt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function ygt(e){return V1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?yh(i,a)[0]:([s,i,u]=yh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=pgt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function vgt(e){return V1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?yh(i,a)[0]:([s,i,u]=yh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new bgt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Nr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class bgt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Ap(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Ap(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Nr(n)),n})}}const ij=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function _gt(e){return V1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?yh(l,a)[0]:([c,l,u]=yh(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=ij(e,"end"),n[1]=ij(e,"error");do{if(n[2]=ij(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Nr(e.read(a-u)),c.byteLength<a-u&&(c=Nr(e.read()))):c=Nr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ba;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ba||(Ba={}));var qu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(qu||(qu={}));var Io;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Io||(Io={}));var vh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(vh||(vh={}));var Ht;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Ht||(Ht={}));var bh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(bh||(bh={}));var Ys;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ys||(Ys={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var yp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(yp||(yp={}));const wgt=void 0;function Fv(e){if(e===null)return"null";if(e===wgt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Fv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Egt=Symbol.for("isArrowBigNum");function Jf(e,...t){return t.length===0?Object.setPrototypeOf(qs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Jf.prototype[Egt]=!0;Jf.prototype.toJSON=function(){return`"${v2(this)}"`};Jf.prototype.valueOf=function(){return YTe(this)};Jf.prototype.toString=function(){return v2(this)};Jf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return YTe(this);case"string":return v2(this);case"default":return xgt(this)}return v2(this)};function Tw(...e){return Jf.apply(this,e)}function Aw(...e){return Jf.apply(this,e)}function y2(...e){return Jf.apply(this,e)}Object.setPrototypeOf(Tw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Aw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(y2.prototype,Object.create(Uint32Array.prototype));Object.assign(Tw.prototype,Jf.prototype,{constructor:Tw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Aw.prototype,Jf.prototype,{constructor:Aw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(y2.prototype,Jf.prototype,{constructor:y2,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function YTe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const v2=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return sj(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return sj(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${sj(t)}`},xgt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:v2(e);function sj(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class lK{static new(t,n){switch(n){case!0:return new Tw(t);case!1:return new Aw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Tw(t)}return t.byteLength===16?new y2(t):new Aw(t)}static signed(t){return new Tw(t)}static unsigned(t){return new Aw(t)}static decimal(t){return new y2(t)}constructor(t,n){return lK.new(t,n)}}function jf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var KTe,XTe,QTe,JTe,ZTe,eAe,tAe,nAe,rAe,iAe,sAe,oAe,aAe,uAe,lAe,cAe,fAe,dAe,hAe,pAe;let En=class U7{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return U7.isUnion(t)&&t.mode===qu.Dense}static isSparseUnion(t){return U7.isUnion(t)&&t.mode===qu.Sparse}get typeId(){return re.NONE}};KTe=Symbol.toStringTag;En[KTe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(En.prototype);let Em=class extends En{toString(){return"Null"}get typeId(){return re.Null}};XTe=Symbol.toStringTag;Em[XTe]=(e=>e[Symbol.toStringTag]="Null")(Em.prototype);class Ja extends En{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}QTe=Symbol.toStringTag;Ja[QTe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ja.prototype);class cK extends Ja{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class fK extends Ja{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class j0 extends Ja{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class dK extends Ja{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class hK extends Ja{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class pK extends Ja{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class mK extends Ja{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class gK extends Ja{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(cK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(fK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(j0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(dK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(hK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(pK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(mK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(gK.prototype,"ArrayType",{value:BigUint64Array});class B0 extends En{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Io.HALF:return Uint16Array;case Io.SINGLE:return Float32Array;case Io.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}JTe=Symbol.toStringTag;B0[JTe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(B0.prototype);class mAe extends B0{constructor(){super(Io.HALF)}}class yK extends B0{constructor(){super(Io.SINGLE)}}class vK extends B0{constructor(){super(Io.DOUBLE)}}Object.defineProperty(mAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(yK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(vK.prototype,"ArrayType",{value:Float64Array});let b2=class extends En{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};ZTe=Symbol.toStringTag;b2[ZTe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(b2.prototype);let SE=class extends En{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};eAe=Symbol.toStringTag;SE[eAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(SE.prototype);let _2=class extends En{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};tAe=Symbol.toStringTag;_2[tAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(_2.prototype);let E3=class extends En{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};nAe=Symbol.toStringTag;E3[nAe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(E3.prototype);class TE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${vh[this.unit]}>`}}rAe=Symbol.toStringTag;TE[rAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(TE.prototype);class Sgt extends TE{constructor(){super(vh.DAY)}}class Tgt extends TE{constructor(){super(vh.MILLISECOND)}}class xm extends En{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Ht[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}iAe=Symbol.toStringTag;xm[iAe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(xm.prototype);class Agt extends xm{constructor(){super(Ht.SECOND,32)}}class Cgt extends xm{constructor(){super(Ht.MILLISECOND,32)}}class Igt extends xm{constructor(){super(Ht.MICROSECOND,64)}}class kgt extends xm{constructor(){super(Ht.NANOSECOND,64)}}class x3 extends En{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Ht[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}sAe=Symbol.toStringTag;x3[sAe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(x3.prototype);class AE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${bh[this.unit]}>`}}oAe=Symbol.toStringTag;AE[oAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(AE.prototype);class Rgt extends AE{constructor(){super(bh.DAY_TIME)}}class Ngt extends AE{constructor(){super(bh.YEAR_MONTH)}}let S3=class extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Ht[this.unit]}>`}};aAe=Symbol.toStringTag;S3[aAe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(S3.prototype);let CE=class extends En{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};uAe=Symbol.toStringTag;CE[uAe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(CE.prototype);class oa extends En{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}lAe=Symbol.toStringTag;oa[lAe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(oa.prototype);class w2 extends En{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}cAe=Symbol.toStringTag;w2[cAe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(w2.prototype);let T3=class extends En{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};fAe=Symbol.toStringTag;T3[fAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(T3.prototype);let IE=class extends En{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};dAe=Symbol.toStringTag;IE[dAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(IE.prototype);class E2 extends En{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}hAe=Symbol.toStringTag;E2[hAe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(E2.prototype);const Pgt=(e=>()=>++e)(-1);class U0 extends En{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Pgt():jf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}pAe=Symbol.toStringTag;U0[pAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(U0.prototype);function Sd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class xn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Dgt(this,t,n)}getVisitFnByTypeId(t,n=!0){return I_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Dgt(e,t,n=!0){return typeof t=="number"?I_(e,t,n):typeof t=="string"&&t in re?I_(e,re[t],n):t&&t instanceof En?I_(e,Vle(t),n):t!=null&&t.type&&t.type instanceof En?I_(e,Vle(t.type),n):I_(e,re.NONE,n)}function I_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Vle(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Io.HALF:return re.Float16;case Io.SINGLE:return re.Float32;case Io.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Ht.SECOND:return re.TimeSecond;case Ht.MILLISECOND:return re.TimeMillisecond;case Ht.MICROSECOND:return re.TimeMicrosecond;case Ht.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Ht.SECOND:return re.TimestampSecond;case Ht.MILLISECOND:return re.TimestampMillisecond;case Ht.MICROSECOND:return re.TimestampMicrosecond;case Ht.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case vh.DAY:return re.DateDay;case vh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case bh.DAY_TIME:return re.IntervalDayTime;case bh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Ht.SECOND:return re.DurationSecond;case Ht.MILLISECOND:return re.DurationMillisecond;case Ht.MICROSECOND:return re.DurationMicrosecond;case Ht.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case qu.Dense:return re.DenseUnion;case qu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}xn.prototype.visitInt8=null;xn.prototype.visitInt16=null;xn.prototype.visitInt32=null;xn.prototype.visitInt64=null;xn.prototype.visitUint8=null;xn.prototype.visitUint16=null;xn.prototype.visitUint32=null;xn.prototype.visitUint64=null;xn.prototype.visitFloat16=null;xn.prototype.visitFloat32=null;xn.prototype.visitFloat64=null;xn.prototype.visitDateDay=null;xn.prototype.visitDateMillisecond=null;xn.prototype.visitTimestampSecond=null;xn.prototype.visitTimestampMillisecond=null;xn.prototype.visitTimestampMicrosecond=null;xn.prototype.visitTimestampNanosecond=null;xn.prototype.visitTimeSecond=null;xn.prototype.visitTimeMillisecond=null;xn.prototype.visitTimeMicrosecond=null;xn.prototype.visitTimeNanosecond=null;xn.prototype.visitDenseUnion=null;xn.prototype.visitSparseUnion=null;xn.prototype.visitIntervalDayTime=null;xn.prototype.visitIntervalYearMonth=null;xn.prototype.visitDuration=null;xn.prototype.visitDurationSecond=null;xn.prototype.visitDurationMillisecond=null;xn.prototype.visitDurationMicrosecond=null;xn.prototype.visitDurationNanosecond=null;const gAe=new Float64Array(1),f_=new Uint32Array(gAe.buffer);function yAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function vAe(e){if(e!==e)return 32256;gAe[0]=e;const t=(f_[1]&2147483648)>>16&65535;let n=f_[1]&2146435072,r=0;return n>=1089470464?f_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(f_[1]&1048575)>>10):n<=1056964608?(r=1048576+(f_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(f_[1]&1048575)+512>>10),t|n|r&65535}class Kt extends xn{}function tn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const Ogt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},bK=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},$gt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Mgt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},bAe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},Lgt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Ym=({values:e},t,n)=>{e[t]=n},_K=({values:e},t,n)=>{e[t]=n},_Ae=({values:e},t,n)=>{e[t]=vAe(n)},Fgt=(e,t,n)=>{switch(e.type.precision){case Io.HALF:return _Ae(e,t,n);case Io.SINGLE:case Io.DOUBLE:return _K(e,t,n)}},wK=({values:e},t,n)=>{Ogt(e,t,n.valueOf())},EK=({values:e},t,n)=>{bK(e,t*2,n.valueOf())},wAe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},jgt=({values:e,valueOffsets:t},n,r)=>bAe(e,t,n,r),Bgt=({values:e,valueOffsets:t},n,r)=>{bAe(e,t,n,oK(r))},EAe=(e,t,n)=>{e.type.unit===vh.DAY?wK(e,t,n):EK(e,t,n)},xK=({values:e},t,n)=>bK(e,t*2,n/1e3),SK=({values:e},t,n)=>bK(e,t*2,n),TK=({values:e},t,n)=>$gt(e,t*2,n),AK=({values:e},t,n)=>Mgt(e,t*2,n),xAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return xK(e,t,n);case Ht.MILLISECOND:return SK(e,t,n);case Ht.MICROSECOND:return TK(e,t,n);case Ht.NANOSECOND:return AK(e,t,n)}},CK=({values:e},t,n)=>{e[t]=n},IK=({values:e},t,n)=>{e[t]=n},kK=({values:e},t,n)=>{e[t]=n},RK=({values:e},t,n)=>{e[t]=n},SAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return CK(e,t,n);case Ht.MILLISECOND:return IK(e,t,n);case Ht.MICROSECOND:return kK(e,t,n);case Ht.NANOSECOND:return RK(e,t,n)}},TAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Ugt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Sc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},zgt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Sc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Vgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Hgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),qgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Wgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Ggt=(e,t,n)=>{const r=e.type.children.map(s=>Sc.getVisitFn(s.type)),i=n instanceof Map?qgt(t,n):n instanceof hr?Hgt(t,n):Array.isArray(n)?Vgt(t,n):Wgt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Ygt=(e,t,n)=>{e.type.mode===qu.Dense?AAe(e,t,n):CAe(e,t,n)},AAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Sc.visit(i,e.valueOffsets[t],n)},CAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Sc.visit(i,t,n)},Kgt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},IAe=(e,t,n)=>{e.type.unit===bh.DAY_TIME?NK(e,t,n):PK(e,t,n)},NK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},PK=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},DK=({values:e},t,n)=>{e[t]=n},OK=({values:e},t,n)=>{e[t]=n},$K=({values:e},t,n)=>{e[t]=n},MK=({values:e},t,n)=>{e[t]=n},kAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return DK(e,t,n);case Ht.MILLISECOND:return OK(e,t,n);case Ht.MICROSECOND:return $K(e,t,n);case Ht.NANOSECOND:return MK(e,t,n)}},Xgt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Sc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Kt.prototype.visitBool=tn(Lgt);Kt.prototype.visitInt=tn(Ym);Kt.prototype.visitInt8=tn(Ym);Kt.prototype.visitInt16=tn(Ym);Kt.prototype.visitInt32=tn(Ym);Kt.prototype.visitInt64=tn(Ym);Kt.prototype.visitUint8=tn(Ym);Kt.prototype.visitUint16=tn(Ym);Kt.prototype.visitUint32=tn(Ym);Kt.prototype.visitUint64=tn(Ym);Kt.prototype.visitFloat=tn(Fgt);Kt.prototype.visitFloat16=tn(_Ae);Kt.prototype.visitFloat32=tn(_K);Kt.prototype.visitFloat64=tn(_K);Kt.prototype.visitUtf8=tn(Bgt);Kt.prototype.visitBinary=tn(jgt);Kt.prototype.visitFixedSizeBinary=tn(wAe);Kt.prototype.visitDate=tn(EAe);Kt.prototype.visitDateDay=tn(wK);Kt.prototype.visitDateMillisecond=tn(EK);Kt.prototype.visitTimestamp=tn(xAe);Kt.prototype.visitTimestampSecond=tn(xK);Kt.prototype.visitTimestampMillisecond=tn(SK);Kt.prototype.visitTimestampMicrosecond=tn(TK);Kt.prototype.visitTimestampNanosecond=tn(AK);Kt.prototype.visitTime=tn(SAe);Kt.prototype.visitTimeSecond=tn(CK);Kt.prototype.visitTimeMillisecond=tn(IK);Kt.prototype.visitTimeMicrosecond=tn(kK);Kt.prototype.visitTimeNanosecond=tn(RK);Kt.prototype.visitDecimal=tn(TAe);Kt.prototype.visitList=tn(Ugt);Kt.prototype.visitStruct=tn(Ggt);Kt.prototype.visitUnion=tn(Ygt);Kt.prototype.visitDenseUnion=tn(AAe);Kt.prototype.visitSparseUnion=tn(CAe);Kt.prototype.visitDictionary=tn(Kgt);Kt.prototype.visitInterval=tn(IAe);Kt.prototype.visitIntervalDayTime=tn(NK);Kt.prototype.visitIntervalYearMonth=tn(PK);Kt.prototype.visitDuration=tn(kAe);Kt.prototype.visitDurationSecond=tn(DK);Kt.prototype.visitDurationMillisecond=tn(OK);Kt.prototype.visitDurationMicrosecond=tn($K);Kt.prototype.visitDurationNanosecond=tn(MK);Kt.prototype.visitFixedSizeList=tn(Xgt);Kt.prototype.visitMap=tn(zgt);const Sc=new Kt,of=Symbol.for("parent"),Cw=Symbol.for("rowIndex");class LK{constructor(t,n){return this[of]=t,this[Cw]=n,new Proxy(this,new Jgt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Cw],n=this[of],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Wu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Fv(t)}: ${Fv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Qgt(this[of],this[Cw])}}class Qgt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Wu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(LK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[of]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Cw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Jgt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[of].type.children.map(n=>n.name)}has(t,n){return t[of].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[of].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[of].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Wu.visit(t[of].children[r],t[Cw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[of].type.children.findIndex(s=>s.name===n);return i!==-1?(Sc.visit(t[of].children[i],t[Cw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class qt extends xn{}function Xt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Zgt=(e,t)=>864e5*e[t],FK=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),e0t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,t0t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,RAe=e=>new Date(e),n0t=(e,t)=>RAe(Zgt(e,t)),r0t=(e,t)=>RAe(FK(e,t)),i0t=(e,t)=>null,NAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},s0t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},PAe=({values:e},t)=>n0t(e,t),DAe=({values:e},t)=>r0t(e,t*2),Ny=({stride:e,values:t},n)=>t[e*n],o0t=({stride:e,values:t},n)=>yAe(t[e*n]),OAe=({values:e},t)=>e[t],a0t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),u0t=({values:e,valueOffsets:t},n)=>NAe(e,t,n),l0t=({values:e,valueOffsets:t},n)=>{const r=NAe(e,t,n);return r!==null?j7(r):null},c0t=({values:e},t)=>e[t],f0t=({type:e,values:t},n)=>e.precision!==Io.HALF?t[n]:yAe(t[n]),d0t=(e,t)=>e.type.unit===vh.DAY?PAe(e,t):DAe(e,t),$Ae=({values:e},t)=>1e3*FK(e,t*2),MAe=({values:e},t)=>FK(e,t*2),LAe=({values:e},t)=>e0t(e,t*2),FAe=({values:e},t)=>t0t(e,t*2),h0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return $Ae(e,t);case Ht.MILLISECOND:return MAe(e,t);case Ht.MICROSECOND:return LAe(e,t);case Ht.NANOSECOND:return FAe(e,t)}},jAe=({values:e},t)=>e[t],BAe=({values:e},t)=>e[t],UAe=({values:e},t)=>e[t],zAe=({values:e},t)=>e[t],p0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return jAe(e,t);case Ht.MILLISECOND:return BAe(e,t);case Ht.MICROSECOND:return UAe(e,t);case Ht.NANOSECOND:return zAe(e,t)}},m0t=({values:e,stride:t},n)=>lK.decimal(e.subarray(t*n,t*(n+1))),g0t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},y0t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new c6(o.slice(i,s-i))},v0t=(e,t)=>new LK(e,t),b0t=(e,t)=>e.type.mode===qu.Dense?VAe(e,t):HAe(e,t),VAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Wu.visit(r,e.valueOffsets[t])},HAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Wu.visit(r,t)},_0t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},w0t=(e,t)=>e.type.unit===bh.DAY_TIME?qAe(e,t):WAe(e,t),qAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),WAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},GAe=({values:e},t)=>e[t],YAe=({values:e},t)=>e[t],KAe=({values:e},t)=>e[t],XAe=({values:e},t)=>e[t],E0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return GAe(e,t);case Ht.MILLISECOND:return YAe(e,t);case Ht.MICROSECOND:return KAe(e,t);case Ht.NANOSECOND:return XAe(e,t)}},x0t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};qt.prototype.visitNull=Xt(i0t);qt.prototype.visitBool=Xt(s0t);qt.prototype.visitInt=Xt(c0t);qt.prototype.visitInt8=Xt(Ny);qt.prototype.visitInt16=Xt(Ny);qt.prototype.visitInt32=Xt(Ny);qt.prototype.visitInt64=Xt(OAe);qt.prototype.visitUint8=Xt(Ny);qt.prototype.visitUint16=Xt(Ny);qt.prototype.visitUint32=Xt(Ny);qt.prototype.visitUint64=Xt(OAe);qt.prototype.visitFloat=Xt(f0t);qt.prototype.visitFloat16=Xt(o0t);qt.prototype.visitFloat32=Xt(Ny);qt.prototype.visitFloat64=Xt(Ny);qt.prototype.visitUtf8=Xt(l0t);qt.prototype.visitBinary=Xt(u0t);qt.prototype.visitFixedSizeBinary=Xt(a0t);qt.prototype.visitDate=Xt(d0t);qt.prototype.visitDateDay=Xt(PAe);qt.prototype.visitDateMillisecond=Xt(DAe);qt.prototype.visitTimestamp=Xt(h0t);qt.prototype.visitTimestampSecond=Xt($Ae);qt.prototype.visitTimestampMillisecond=Xt(MAe);qt.prototype.visitTimestampMicrosecond=Xt(LAe);qt.prototype.visitTimestampNanosecond=Xt(FAe);qt.prototype.visitTime=Xt(p0t);qt.prototype.visitTimeSecond=Xt(jAe);qt.prototype.visitTimeMillisecond=Xt(BAe);qt.prototype.visitTimeMicrosecond=Xt(UAe);qt.prototype.visitTimeNanosecond=Xt(zAe);qt.prototype.visitDecimal=Xt(m0t);qt.prototype.visitList=Xt(g0t);qt.prototype.visitStruct=Xt(v0t);qt.prototype.visitUnion=Xt(b0t);qt.prototype.visitDenseUnion=Xt(VAe);qt.prototype.visitSparseUnion=Xt(HAe);qt.prototype.visitDictionary=Xt(_0t);qt.prototype.visitInterval=Xt(w0t);qt.prototype.visitIntervalDayTime=Xt(qAe);qt.prototype.visitIntervalYearMonth=Xt(WAe);qt.prototype.visitDuration=Xt(E0t);qt.prototype.visitDurationSecond=Xt(GAe);qt.prototype.visitDurationMillisecond=Xt(YAe);qt.prototype.visitDurationMicrosecond=Xt(KAe);qt.prototype.visitDurationNanosecond=Xt(XAe);qt.prototype.visitFixedSizeList=Xt(x0t);qt.prototype.visitMap=Xt(y0t);const Wu=new qt,mf=Symbol.for("keys"),Iw=Symbol.for("vals");class c6{constructor(t){return this[mf]=new hr([t.children[0]]).memoize(),this[Iw]=t.children[1],new Proxy(this,new T0t)}[Symbol.iterator](){return new S0t(this[mf],this[Iw])}get size(){return this[mf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[mf],n=this[Iw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Wu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Fv(t)}: ${Fv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class S0t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Wu.visit(this.vals,t)]})}}class T0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[mf].toArray().map(String)}has(t,n){return t[mf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[mf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[mf].indexOf(n);if(r!==-1){const i=Wu.visit(Reflect.get(t,Iw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[mf].indexOf(n);return i!==-1?(Sc.visit(Reflect.get(t,Iw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(c6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[mf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Iw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Hle;function QAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Hle=s,s=o,o=Hle),o>i&&(o=i),r?r(e,s,o):[s,o]}const qle=e=>e!==e;function Wx(e){if(typeof e!=="object"||e===null)return qle(e)?qle:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?mgt(e,n):!1:e instanceof Map?C0t(e):Array.isArray(e)?A0t(e):e instanceof hr?I0t(e):k0t(e,!0)}function A0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Wx(e[n]);return f6(t)}function C0t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Wx(r);return f6(n)}function I0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Wx(e.get(n));return f6(t)}function k0t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Wx(e[n[i]]);return f6(r,n)}function f6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return R0t(e,n);case Map:return Wle(e,n,n.keys());case c6:case LK:case Object:case void 0:return Wle(e,n,t||Object.keys(n))}return n instanceof hr?N0t(e,n):!1}}function R0t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function N0t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Wle(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function JAe(e,t,n,r){return(n&1<<r)!==0}function P0t(e,t,n,r){return(n&1<<r)>>r}function A3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):ZAe(new jK(n,e,t,null,JAe)).subarray(0,r)),i}return n}function ZAe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class jK{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function z7(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new jK(e,t,n-t,e,P0t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return z7(e,t,i)+z7(e,r,n)+D0t(e,i>>3,r-i>>3)}function D0t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=oj(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=oj(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=oj(s.getUint8(i)),i+=1;return r}function oj(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const O0t=-1;class Rr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return En.isSparseUnion(t)?this.children.some(n=>n.nullable):En.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(En.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=O0t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-z7(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Rr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Sd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(En.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===qu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(En.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===qu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(A3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Rr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(A3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[yp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[yp.TYPE])&&(o[yp.TYPE]=s.subarray(t,t+n)),(s=o[yp.OFFSET])&&(o[yp.OFFSET]=s.subarray(t,t+n+1))||(s=o[yp.DATA])&&(o[yp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Rr.prototype.children=Object.freeze([]);class tC extends xn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Rr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/Sd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/Sd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/Sd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/Sd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/Sd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Nr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Nr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=qs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(En.isSparseUnion(n))return new Rr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=lT(t.valueOffsets);return new Rr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new tC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length/Sd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=qs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new tC().visit({type:n.valueType})}=t,s=Nr(t.nullBitmap),{["length"]:o=i.length/Sd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new tC().visit({type:n.childType})}=t,s=Nr(t.nullBitmap),o=lT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,void 0,s],[i])}}const $0t=new tC;function na(e){return $0t.visit(e)}class Gle{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function eCe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function tCe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function nCe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function BK(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function UK(e,t){return e.getValid(t)}function kw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return BK(r,this._offsets,n,t)}}function rCe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=BK(s,this._offsets,r,n);return t=void 0,o}}function iCe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):BK(s,this._offsets,i,n);return t=void 0,o}}class Wt extends xn{}function M0t(e,t){return t===null&&e.length>0?0:-1}function L0t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new jK(n,e.offset+(t||0),e.length,n,JAe)){if(!i)return r;++r}return-1}function un(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return L0t(e,n)}const r=Wu.getVisitFn(e),i=Wx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function sCe(e,t,n){const r=Wu.getVisitFn(e),i=Wx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Wt.prototype.visitNull=M0t;Wt.prototype.visitBool=un;Wt.prototype.visitInt=un;Wt.prototype.visitInt8=un;Wt.prototype.visitInt16=un;Wt.prototype.visitInt32=un;Wt.prototype.visitInt64=un;Wt.prototype.visitUint8=un;Wt.prototype.visitUint16=un;Wt.prototype.visitUint32=un;Wt.prototype.visitUint64=un;Wt.prototype.visitFloat=un;Wt.prototype.visitFloat16=un;Wt.prototype.visitFloat32=un;Wt.prototype.visitFloat64=un;Wt.prototype.visitUtf8=un;Wt.prototype.visitBinary=un;Wt.prototype.visitFixedSizeBinary=un;Wt.prototype.visitDate=un;Wt.prototype.visitDateDay=un;Wt.prototype.visitDateMillisecond=un;Wt.prototype.visitTimestamp=un;Wt.prototype.visitTimestampSecond=un;Wt.prototype.visitTimestampMillisecond=un;Wt.prototype.visitTimestampMicrosecond=un;Wt.prototype.visitTimestampNanosecond=un;Wt.prototype.visitTime=un;Wt.prototype.visitTimeSecond=un;Wt.prototype.visitTimeMillisecond=un;Wt.prototype.visitTimeMicrosecond=un;Wt.prototype.visitTimeNanosecond=un;Wt.prototype.visitDecimal=un;Wt.prototype.visitList=un;Wt.prototype.visitStruct=un;Wt.prototype.visitUnion=un;Wt.prototype.visitDenseUnion=sCe;Wt.prototype.visitSparseUnion=sCe;Wt.prototype.visitDictionary=un;Wt.prototype.visitInterval=un;Wt.prototype.visitIntervalDayTime=un;Wt.prototype.visitIntervalYearMonth=un;Wt.prototype.visitDuration=un;Wt.prototype.visitDurationSecond=un;Wt.prototype.visitDurationMillisecond=un;Wt.prototype.visitDurationMicrosecond=un;Wt.prototype.visitDurationNanosecond=un;Wt.prototype.visitFixedSizeList=un;Wt.prototype.visitMap=un;const C3=new Wt;class Gt extends xn{}function Qt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Ja&&t.bitWidth!==64||t instanceof xm&&t.bitWidth!==64||t instanceof B0&&t.precision!==Io.HALF))return new Gle(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Gle(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new F0t(o)})}class F0t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Gt.prototype.visitNull=Qt;Gt.prototype.visitBool=Qt;Gt.prototype.visitInt=Qt;Gt.prototype.visitInt8=Qt;Gt.prototype.visitInt16=Qt;Gt.prototype.visitInt32=Qt;Gt.prototype.visitInt64=Qt;Gt.prototype.visitUint8=Qt;Gt.prototype.visitUint16=Qt;Gt.prototype.visitUint32=Qt;Gt.prototype.visitUint64=Qt;Gt.prototype.visitFloat=Qt;Gt.prototype.visitFloat16=Qt;Gt.prototype.visitFloat32=Qt;Gt.prototype.visitFloat64=Qt;Gt.prototype.visitUtf8=Qt;Gt.prototype.visitBinary=Qt;Gt.prototype.visitFixedSizeBinary=Qt;Gt.prototype.visitDate=Qt;Gt.prototype.visitDateDay=Qt;Gt.prototype.visitDateMillisecond=Qt;Gt.prototype.visitTimestamp=Qt;Gt.prototype.visitTimestampSecond=Qt;Gt.prototype.visitTimestampMillisecond=Qt;Gt.prototype.visitTimestampMicrosecond=Qt;Gt.prototype.visitTimestampNanosecond=Qt;Gt.prototype.visitTime=Qt;Gt.prototype.visitTimeSecond=Qt;Gt.prototype.visitTimeMillisecond=Qt;Gt.prototype.visitTimeMicrosecond=Qt;Gt.prototype.visitTimeNanosecond=Qt;Gt.prototype.visitDecimal=Qt;Gt.prototype.visitList=Qt;Gt.prototype.visitStruct=Qt;Gt.prototype.visitUnion=Qt;Gt.prototype.visitDenseUnion=Qt;Gt.prototype.visitSparseUnion=Qt;Gt.prototype.visitDictionary=Qt;Gt.prototype.visitInterval=Qt;Gt.prototype.visitIntervalDayTime=Qt;Gt.prototype.visitIntervalYearMonth=Qt;Gt.prototype.visitDuration=Qt;Gt.prototype.visitDurationSecond=Qt;Gt.prototype.visitDurationMillisecond=Qt;Gt.prototype.visitDurationMicrosecond=Qt;Gt.prototype.visitDurationNanosecond=Qt;Gt.prototype.visitFixedSizeList=Qt;Gt.prototype.visitMap=Qt;const zK=new Gt,j0t=(e,t)=>e+t;class Py extends xn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Ht.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+_h.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+_h.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const B0t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),U0t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),z0t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=_h.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},V0t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=_h.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},H0t=(e,t)=>e.type.mode===qu.Dense?oCe(e,t):aCe(e,t),oCe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+_h.visit(t[s],r[i])},aCe=({children:e},t)=>4+_h.visitMany(e,e.map(()=>t)).reduce(j0t,0);Py.prototype.visitUtf8=B0t;Py.prototype.visitBinary=U0t;Py.prototype.visitList=z0t;Py.prototype.visitFixedSizeList=V0t;Py.prototype.visitUnion=H0t;Py.prototype.visitDenseUnion=oCe;Py.prototype.visitSparseUnion=aCe;const _h=new Py;var uCe;const lCe={},cCe={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Rr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=lCe[o.typeId],f=s[0];this.isValid=d=>UK(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,cCe[o.typeId]),this._offsets=tCe(s);break}this.data=s,this.type=o,this.stride=Sd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return eCe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return zK.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(QAe(this,t,n,({data:r,_offsets:i},s,o)=>nCe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return En.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(En.isDictionary(this.type)){const t=new I3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new I3(this)}unmemoize(){if(En.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}uCe=Symbol.toStringTag;hr[uCe]=(e=>{e.type=En.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Wu.getVisitFnByTypeId(n),i=Sc.getVisitFnByTypeId(n),s=C3.getVisitFnByTypeId(n),o=_h.getVisitFnByTypeId(n);lCe[n]={get:r,set:i,indexOf:s,byteLength:o},cCe[n]=Object.create(e,{isValid:{value:kw(UK)},get:{value:kw(Wu.getVisitFnByTypeId(n))},set:{value:rCe(Sc.getVisitFnByTypeId(n))},indexOf:{value:iCe(C3.getVisitFnByTypeId(n))},getByteLength:{value:kw(_h.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class I3 extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new I3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function q0t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${W0t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function W0t(e){return typeof e!="bigint"?Fv(e):`${Fv(e)}n`}const aj=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,G0t=(e,t=0)=>e.length>=t?e.subarray(0,t):w3(new e.constructor(t),e,0);class d6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?aj(r*1,this.BYTES_PER_ELEMENT):aj(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=aj(t*this.stride,this.BYTES_PER_ELEMENT);const n=G0t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=w3(new this.ArrayType(t),this.buffer)}}d6.prototype.offset=0;class ZI extends d6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class fCe extends ZI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class dCe extends ZI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let el=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Sd(t),this._nulls=new fCe,n&&n.length>0&&(this._isValid=q0t(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),na({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};el.prototype.length=1;el.prototype.stride=1;el.prototype.children=null;el.prototype.finished=!1;el.prototype.nullValues=null;el.prototype._isValid=()=>!0;class Km extends el{constructor(t){super(t),this._values=new ZI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class h6 extends el{constructor(t){super(t),this._pendingLength=0,this._offsets=new dCe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof c6?n[mf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class V7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const uj=2,Dd=4,kp=4,Br=4,Ag=new Int32Array(2),Yle=new Float32Array(Ag.buffer),Kle=new Float64Array(Ag.buffer),_N=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var H7;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(H7||(H7={}));let k3=class hCe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new hCe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ag[0]=this.readInt32(t),Yle[0]}readFloat64(t){return Ag[_N?0:1]=this.readInt32(t),Ag[_N?1:0]=this.readInt32(t+4),Kle[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Yle[0]=n,this.writeInt32(t,Ag[0])}writeFloat64(t,n){Kle[0]=n,this.writeInt32(t,Ag[_N?0:1]),this.writeInt32(t+4,Ag[_N?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Dd+kp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<kp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Dd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Dd;const i=this.bytes_.subarray(t,t+r);return n===H7.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Dd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=kp)throw new Error("FlatBuffers: file identifier must be length "+kp);for(let n=0;n<kp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Dd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},pCe=class mCe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=k3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=mCe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=k3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Dd,0),this.writeInt32(this.offset()-t+Dd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*uj;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=uj;l<s;l+=uj)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Br:0;if(n){const s=n;if(this.prep(this.minalign,Dd+kp+i),s.length!=kp)throw new TypeError("FlatBuffers: file identifier must be length "+kp);for(let o=kp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Dd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Dd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class xs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Br),(n||new xs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return xs.startKeyValue(t),xs.addKey(t,n),xs.addValue(t,r),xs.endKeyValue(t)}}var kE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(kE||(kE={}));var RE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(RE||(RE={}));var R3;(function(e){e[e.DenseArray=0]="DenseArray"})(R3||(R3={}));class hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Br),(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return hl.startInt(t),hl.addBitWidth(t,n),hl.addIsSigned(t,r),hl.endInt(t)}}class Rp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Br),(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new hl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):R3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,R3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class X1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new X1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Br),(n||new X1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return X1.startBinary(t),X1.endBinary(t)}}class Q1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Q1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Br),(n||new Q1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Q1.startBool(t),Q1.endBool(t)}}var N3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(N3||(N3={}));let GP=class k_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Br),(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):N3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,N3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return k_.startDate(t),k_.addUnit(t,n),k_.endDate(t)}};class gu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Br),(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return gu.startDecimal(t),gu.addPrecision(t,n),gu.addScale(t,r),gu.addBitWidth(t,i),gu.endDecimal(t)}}var z0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(z0||(z0={}));class Od{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Br),(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,z0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Od.startDuration(t),Od.addUnit(t,n),Od.endDuration(t)}}class $d{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new $d).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Br),(n||new $d).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return $d.startFixedSizeBinary(t),$d.addByteWidth(t,n),$d.endFixedSizeBinary(t)}}class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Br),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Md.startFixedSizeList(t),Md.addListSize(t,n),Md.endFixedSizeList(t)}}var P3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(P3||(P3={}));class Ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Br),(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):P3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,P3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Ld.startFloatingPoint(t),Ld.addPrecision(t,n),Ld.endFloatingPoint(t)}}var D3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(D3||(D3={}));class Fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Br),(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):D3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,D3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Fd.startInterval(t),Fd.addUnit(t,n),Fd.endInterval(t)}}class J1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new J1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Br),(n||new J1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return J1.startList(t),J1.endList(t)}}let YP=class R_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new R_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Br),(n||new R_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return R_.startMap(t),R_.addKeysSorted(t,n),R_.endMap(t)}};class Z1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Z1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Br),(n||new Z1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Z1.startNull(t),Z1.endNull(t)}}class ev{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new ev).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Br),(n||new ev).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ev.startStruct_(t),ev.endStruct_(t)}}let nA=class y1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new y1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Br),(n||new y1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,z0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return y1.startTime(t),y1.addUnit(t,n),y1.addBitWidth(t,r),y1.endTime(t)}},rA=class v1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new v1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Br),(n||new v1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,z0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return v1.startTimestamp(t),v1.addUnit(t,n),v1.addTimezone(t,r),v1.endTimestamp(t)}};var O3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(O3||(O3={}));let b1=class _1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new _1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Br),(n||new _1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):O3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,O3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return _1.startUnion(t),_1.addMode(t,n),_1.addTypeIds(t,r),_1.endUnion(t)}};class tv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Br),(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return tv.startUtf8(t),tv.endUtf8(t)}}var gi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(gi||(gi={}));let Zl=class KP{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new KP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Br),(n||new KP).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):gi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Rp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new KP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,gi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Ed=class mp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new mp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Br),(n||new mp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):RE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Zl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,RE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return mp.startSchema(t),mp.addEndianness(t,n),mp.addFields(t,r),mp.addCustomMetadata(t,i),mp.addFeatures(t,s),mp.endSchema(t)}};class ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Br),(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ed).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new V7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new V7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Sr{constructor(t=[],n,r,i=Ba.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=W7(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Sr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Sr(n,this.metadata)}assign(...t){const n=t[0]instanceof Sr?t[0]:Array.isArray(t[0])?new Sr(t[0]):new Sr(t),r=[...this.fields],i=wN(wN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:wN(wN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=W7(s,new Map);return new Sr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Sr.prototype.fields=null;Sr.prototype.metadata=null;Sr.prototype.dictionaries=null;let Mr=class q7{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new q7(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],q7.new(n,r,i,s)}};Mr.prototype.type=null;Mr.prototype.name=null;Mr.prototype.nullable=null;Mr.prototype.metadata=null;function wN(e,t){return new Map([...e||new Map,...t||new Map])}function W7(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(En.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&W7(s.children,t)}return t}var Y0t=pCe,K0t=k3;class G7{static decode(t){t=new K0t(Nr(t));const n=ul.getRootAsFooter(t),r=Sr.decode(n.schema(),new Map,n.version());return new X0t(r,n)}static encode(t){const n=new Y0t,r=Sr.encode(n,t.schema);ul.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())V0.encode(n,o);const i=n.endVector();ul.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())V0.encode(n,o);const s=n.endVector();return ul.startFooter(n),ul.addSchema(n,r),ul.addVersion(n,Ba.V5),ul.addRecordBatches(n,i),ul.addDictionaries(n,s),ul.finishFooterBuffer(n,ul.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ba.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class X0t extends G7{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return V0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return V0.decode(n)}return null}}class V0{static decode(t){return new V0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return V7.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=jf(r),this.bodyLength=jf(n)}}const EN=Object.freeze({done:!0,value:void 0});class gCe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Q0t extends gCe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Ap(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(EN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return zle.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return zle.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Ap(this,void 0,void 0,function*(){return yield this.abort(t),EN})}return(t){return Ap(this,void 0,void 0,function*(){return yield this.close(),EN})}read(t){return Ap(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Ap(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(EN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class lj extends Q0t{write(t){if((t=Nr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?j7(this.toUint8Array(!0)):this.toUint8Array(!1).then(j7)}toUint8Array(t=!1){return t?yh(this._values)[0]:Ap(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=jA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return yh(o,a)[0]})}}class yCe extends h6{constructor(t){super(t),this._values=new d6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Nr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class J0t extends el{constructor(t){super(t),this._values=new fCe}setValue(t,n){this._values.set(t,+n)}}class p6 extends Km{}p6.prototype._setValue=EAe;class vCe extends p6{}vCe.prototype._setValue=wK;class bCe extends p6{}bCe.prototype._setValue=EK;class _Ce extends Km{}_Ce.prototype._setValue=TAe;class Z0t extends el{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new U0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=$3({type:this.type.indices,nullValues:n}),this.dictionary=$3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class wCe extends Km{}wCe.prototype._setValue=wAe;class eyt extends el{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new IE(this.type.listSize,new Mr(n,t.type,!0)),r}}class m6 extends Km{setValue(t,n){this._values.set(t,n)}}class tyt extends m6{setValue(t,n){super.setValue(t,vAe(n))}}class nyt extends m6{}class ryt extends m6{}class g6 extends Km{}g6.prototype._setValue=IAe;class ECe extends g6{}ECe.prototype._setValue=NK;class xCe extends g6{}xCe.prototype._setValue=PK;class Gx extends Km{}Gx.prototype._setValue=kAe;class SCe extends Gx{}SCe.prototype._setValue=DK;class TCe extends Gx{}TCe.prototype._setValue=OK;class ACe extends Gx{}ACe.prototype._setValue=$K;class CCe extends Gx{}CCe.prototype._setValue=MK;class Xm extends Km{setValue(t,n){this._values.set(t,n)}}class iyt extends Xm{}class syt extends Xm{}class oyt extends Xm{}class ayt extends Xm{}class uyt extends Xm{}class lyt extends Xm{}class cyt extends Xm{}class fyt extends Xm{}class dyt extends h6{constructor(t){super(t),this._offsets=new dCe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new CE(new Mr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class hyt extends h6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new E2(new Mr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class pyt extends el{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class myt extends el{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new oa([...this.type.children,new Mr(n,t.type,!0)]),r}}class Yx extends Km{}Yx.prototype._setValue=xAe;class ICe extends Yx{}ICe.prototype._setValue=xK;class kCe extends Yx{}kCe.prototype._setValue=SK;class RCe extends Yx{}RCe.prototype._setValue=TK;class NCe extends Yx{}NCe.prototype._setValue=AK;class Kx extends Km{}Kx.prototype._setValue=SAe;class PCe extends Kx{}PCe.prototype._setValue=CK;class DCe extends Kx{}DCe.prototype._setValue=IK;class OCe extends Kx{}OCe.prototype._setValue=kK;class $Ce extends Kx{}$Ce.prototype._setValue=RK;class VK extends el{constructor(t){super(t),this._typeIds=new ZI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Mr(n,t.type)];return this.type=new w2(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class gyt extends VK{}class yyt extends VK{constructor(t){super(t),this._offsets=new ZI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class MCe extends h6{constructor(t){super(t),this._values=new d6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,oK(n))}_flushPending(t,n){}}MCe.prototype._flushPending=yCe.prototype._flushPending;class vyt extends xn{visitNull(){return pyt}visitBool(){return J0t}visitInt(){return Xm}visitInt8(){return iyt}visitInt16(){return syt}visitInt32(){return oyt}visitInt64(){return ayt}visitUint8(){return uyt}visitUint16(){return lyt}visitUint32(){return cyt}visitUint64(){return fyt}visitFloat(){return m6}visitFloat16(){return tyt}visitFloat32(){return nyt}visitFloat64(){return ryt}visitUtf8(){return MCe}visitBinary(){return yCe}visitFixedSizeBinary(){return wCe}visitDate(){return p6}visitDateDay(){return vCe}visitDateMillisecond(){return bCe}visitTimestamp(){return Yx}visitTimestampSecond(){return ICe}visitTimestampMillisecond(){return kCe}visitTimestampMicrosecond(){return RCe}visitTimestampNanosecond(){return NCe}visitTime(){return Kx}visitTimeSecond(){return PCe}visitTimeMillisecond(){return DCe}visitTimeMicrosecond(){return OCe}visitTimeNanosecond(){return $Ce}visitDecimal(){return _Ce}visitList(){return dyt}visitStruct(){return myt}visitUnion(){return VK}visitDenseUnion(){return yyt}visitSparseUnion(){return gyt}visitDictionary(){return Z0t}visitInterval(){return g6}visitIntervalDayTime(){return ECe}visitIntervalYearMonth(){return xCe}visitDuration(){return Gx}visitDurationSecond(){return SCe}visitDurationMillisecond(){return TCe}visitDurationMicrosecond(){return ACe}visistDurationNanosecond(){return CCe}visitFixedSizeList(){return eyt}visitMap(){return hyt}}const byt=new vyt;class Yt extends xn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ru(e,t){return t instanceof e.constructor}function ek(e,t){return e===t||ru(e,t)}function Qm(e,t){return e===t||ru(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function y6(e,t){return e===t||ru(e,t)&&e.precision===t.precision}function _yt(e,t){return e===t||ru(e,t)&&e.byteWidth===t.byteWidth}function HK(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function tk(e,t){return e===t||ru(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function nk(e,t){return e===t||ru(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function wyt(e,t){return e===t||ru(e,t)&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function Eyt(e,t){return e===t||ru(e,t)&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function qK(e,t){return e===t||ru(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&H0.compareManyFields(e.children,t.children)}function xyt(e,t){return e===t||ru(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&H0.visit(e.indices,t.indices)&&H0.visit(e.dictionary,t.dictionary)}function WK(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function rk(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function Syt(e,t){return e===t||ru(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function Tyt(e,t){return e===t||ru(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}Yt.prototype.visitNull=ek;Yt.prototype.visitBool=ek;Yt.prototype.visitInt=Qm;Yt.prototype.visitInt8=Qm;Yt.prototype.visitInt16=Qm;Yt.prototype.visitInt32=Qm;Yt.prototype.visitInt64=Qm;Yt.prototype.visitUint8=Qm;Yt.prototype.visitUint16=Qm;Yt.prototype.visitUint32=Qm;Yt.prototype.visitUint64=Qm;Yt.prototype.visitFloat=y6;Yt.prototype.visitFloat16=y6;Yt.prototype.visitFloat32=y6;Yt.prototype.visitFloat64=y6;Yt.prototype.visitUtf8=ek;Yt.prototype.visitBinary=ek;Yt.prototype.visitFixedSizeBinary=_yt;Yt.prototype.visitDate=HK;Yt.prototype.visitDateDay=HK;Yt.prototype.visitDateMillisecond=HK;Yt.prototype.visitTimestamp=tk;Yt.prototype.visitTimestampSecond=tk;Yt.prototype.visitTimestampMillisecond=tk;Yt.prototype.visitTimestampMicrosecond=tk;Yt.prototype.visitTimestampNanosecond=tk;Yt.prototype.visitTime=nk;Yt.prototype.visitTimeSecond=nk;Yt.prototype.visitTimeMillisecond=nk;Yt.prototype.visitTimeMicrosecond=nk;Yt.prototype.visitTimeNanosecond=nk;Yt.prototype.visitDecimal=ek;Yt.prototype.visitList=wyt;Yt.prototype.visitStruct=Eyt;Yt.prototype.visitUnion=qK;Yt.prototype.visitDenseUnion=qK;Yt.prototype.visitSparseUnion=qK;Yt.prototype.visitDictionary=xyt;Yt.prototype.visitInterval=WK;Yt.prototype.visitIntervalDayTime=WK;Yt.prototype.visitIntervalYearMonth=WK;Yt.prototype.visitDuration=rk;Yt.prototype.visitDurationSecond=rk;Yt.prototype.visitDurationMillisecond=rk;Yt.prototype.visitDurationMicrosecond=rk;Yt.prototype.visitDurationNanosecond=rk;Yt.prototype.visitFixedSizeList=Syt;Yt.prototype.visitMap=Tyt;const H0=new Yt;function Y7(e,t){return H0.compareSchemas(e,t)}function $3(e){const t=e.type,n=new(byt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push($3(Object.assign(Object.assign({},l),{type:u})))}}return n}function cj(e,t){return Ayt(e,t.map(n=>n.data.concat()))}function Ayt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Cyt(n,o,c,t,i),o>0&&(r[s++]=na({type:new oa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new pl(e,f))]}function Cyt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:na({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var LCe;class wu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Sr([]),this._offsets=[0],this;let i,s;t[0]instanceof Sr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof pl)return[u];if(u instanceof wu)return u.batches;if(u instanceof Rr){if(u.type instanceof oa)return[new pl(new Sr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=new Sr(l.map((h,p)=>new Mr(String(h),c[p].type))),[,d]=cj(f,c);return d.length===0?[new pl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Sr([]),!(i instanceof Sr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof pl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Y7(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??tCe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=eCe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?zK.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new wu(n,r.map(i=>new pl(n,i)))}slice(t,n){const r=this.schema;[t,n]=QAe({length:this.numRows},t,n);const i=nCe(this.data,this._offsets,t,n);return new wu(r,i.map(s=>new pl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=na({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([na({type:new Em,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=cj(r,a)}return new wu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new wu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new wu(...cj(s,o))}}LCe=Symbol.toStringTag;wu[LCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=kw(UK),e.get=kw(Wu.getVisitFn(re.Struct)),e.set=rCe(Sc.getVisitFn(re.Struct)),e.indexOf=iCe(C3.getVisitFn(re.Struct)),e.getByteLength=kw(_h.getVisitFn(re.Struct)),"Table"))(wu.prototype);var FCe;let pl=class iA{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Sr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=na({nullCount:0,type:new oa(this.schema.fields),children:this.schema.fields.map(n=>na({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Rr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Xle(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Mr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Sr(r),a=na({type:new oa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Xle(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=jCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Wu.visit(this.data,t)}set(t,n){return Sc.visit(this.data,t,n)}indexOf(t,n){return C3.visit(this.data,t,n)}getByteLength(t){return _h.visit(this.data,t)}[Symbol.iterator](){return zK.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new wu(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new iA(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([na({type:new Em,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Sr(s,new Map(this.schema.metadata)),i=na({type:new oa(s),children:o})}return new iA(r,i)}select(t){const n=this.schema.select(t),r=new oa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new iA(n,na({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=na({type:new oa(n.fields),length:this.numRows,children:r});return new iA(n,i)}};FCe=Symbol.toStringTag;pl[FCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(pl.prototype);function Xle(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:na({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),na({type:new oa(i),length:n,children:s})]}function jCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])jCe(a.children,l==null?void 0:l.children,n);if(En.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Iyt extends pl{constructor(t){const n=t.fields.map(i=>na({type:i.type})),r=na({type:new oa(t.fields),nullCount:0,children:n});super(t,r)}}var M3;(function(e){e[e.BUFFER=0]="BUFFER"})(M3||(M3={}));var L3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(L3||(L3={}));class Cg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Br),(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):L3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):M3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,L3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,M3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Cg.startBodyCompression(t),Cg.addCodec(t,n),Cg.addMethod(t,r),Cg.endBodyCompression(t)}}let BCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},UCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},vp=class K7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new K7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Br),(n||new K7).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new UCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new BCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Cg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},N_=class X7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new X7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Br),(n||new X7).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var F3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(F3||(F3={}));let dg=class pd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new pd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Br),(n||new pd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):F3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new xs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,F3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return pd.startMessage(t),pd.addVersion(t,n),pd.addHeaderType(t,r),pd.addHeader(t,i),pd.addBodyLength(t,s),pd.addCustomMetadata(t,o),pd.endMessage(t)}};class kyt extends xn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Z1.startNull(n),Z1.endNull(n)}visitInt(t,n){return hl.startInt(n),hl.addBitWidth(n,t.bitWidth),hl.addIsSigned(n,t.isSigned),hl.endInt(n)}visitFloat(t,n){return Ld.startFloatingPoint(n),Ld.addPrecision(n,t.precision),Ld.endFloatingPoint(n)}visitBinary(t,n){return X1.startBinary(n),X1.endBinary(n)}visitBool(t,n){return Q1.startBool(n),Q1.endBool(n)}visitUtf8(t,n){return tv.startUtf8(n),tv.endUtf8(n)}visitDecimal(t,n){return gu.startDecimal(n),gu.addScale(n,t.scale),gu.addPrecision(n,t.precision),gu.addBitWidth(n,t.bitWidth),gu.endDecimal(n)}visitDate(t,n){return GP.startDate(n),GP.addUnit(n,t.unit),GP.endDate(n)}visitTime(t,n){return nA.startTime(n),nA.addUnit(n,t.unit),nA.addBitWidth(n,t.bitWidth),nA.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return rA.startTimestamp(n),rA.addUnit(n,t.unit),r!==void 0&&rA.addTimezone(n,r),rA.endTimestamp(n)}visitInterval(t,n){return Fd.startInterval(n),Fd.addUnit(n,t.unit),Fd.endInterval(n)}visitDuration(t,n){return Od.startDuration(n),Od.addUnit(n,t.unit),Od.endDuration(n)}visitList(t,n){return J1.startList(n),J1.endList(n)}visitStruct(t,n){return ev.startStruct_(n),ev.endStruct_(n)}visitUnion(t,n){b1.startTypeIdsVector(n,t.typeIds.length);const r=b1.createTypeIdsVector(n,t.typeIds);return b1.startUnion(n),b1.addMode(n,t.mode),b1.addTypeIds(n,r),b1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Rp.startDictionaryEncoding(n),Rp.addId(n,BigInt(t.id)),Rp.addIsOrdered(n,t.isOrdered),r!==void 0&&Rp.addIndexType(n,r),Rp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return $d.startFixedSizeBinary(n),$d.addByteWidth(n,t.byteWidth),$d.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Md.startFixedSizeList(n),Md.addListSize(n,t.listSize),Md.endFixedSizeList(n)}visitMap(t,n){return YP.startMap(n),YP.addKeysSorted(n,t.keysSorted),YP.endMap(n)}}const fj=new kyt;function Ryt(e,t=new Map){return new Sr(Pyt(e,t),XP(e.metadata),t)}function zCe(e){return new Pl(e.count,VCe(e.columns),HCe(e.columns))}function Nyt(e){return new wh(zCe(e.data),e.id,e.isDelta)}function Pyt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function Qle(e,t){return(e.children||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function VCe(e){return(e||[]).reduce((t,n)=>[...t,new q0(n.count,Dyt(n.VALIDITY)),...VCe(n.children)],[])}function HCe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Hd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Hd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Hd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Hd(t.length,i.DATA.length)),t=HCe(i.children,t)}return t}function Dyt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Oyt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Zle(e,Qle(e,t)),i=new Mr(e.name,o,e.nullable,XP(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Jle(r):new j0,a=new U0(t.get(n),r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,XP(e.metadata))):(r=(r=s.indexType)?Jle(r):new j0,t.set(n,o=Zle(e,Qle(e,t))),a=new U0(o,r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,XP(e.metadata))),i||null}function XP(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Jle(e){return new Ja(e.isSigned,e.bitWidth)}function Zle(e,t){const n=e.type.name;switch(n){case"NONE":return new Em;case"null":return new Em;case"binary":return new b2;case"utf8":return new SE;case"bool":return new _2;case"list":return new CE((t||[])[0]);case"struct":return new oa(t||[]);case"struct_":return new oa(t||[])}switch(n){case"int":{const r=e.type;return new Ja(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new B0(Io[r.precision])}case"decimal":{const r=e.type;return new E3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new TE(vh[r.unit])}case"time":{const r=e.type;return new xm(Ht[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new x3(Ht[r.unit],r.timezone)}case"interval":{const r=e.type;return new AE(bh[r.unit])}case"duration":{const r=e.type;return new S3(Ht[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new w2(qu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new T3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new IE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new E2((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var $yt=pCe,Myt=k3;class jd{static fromJSON(t,n){const r=new jd(0,Ba.V5,n);return r._createHeader=Lyt(t,n),r}static decode(t){t=new Myt(Nr(t));const n=dg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new jd(r,i,s);return o._createHeader=Fyt(n,s),o}static encode(t){const n=new $yt;let r=-1;return t.isSchema()?r=Sr.encode(n,t.header()):t.isRecordBatch()?r=Pl.encode(n,t.header()):t.isDictionaryBatch()&&(r=wh.encode(n,t.header())),dg.startMessage(n),dg.addVersion(n,Ba.V5),dg.addHeader(n,r),dg.addHeaderType(n,t.headerType),dg.addBodyLength(n,BigInt(t.bodyLength)),dg.finishMessageBuffer(n,dg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Sr)return new jd(0,Ba.V5,Ys.Schema,t);if(t instanceof Pl)return new jd(n,Ba.V5,Ys.RecordBatch,t);if(t instanceof wh)return new jd(n,Ba.V5,Ys.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ys.Schema}isRecordBatch(){return this.headerType===Ys.RecordBatch}isDictionaryBatch(){return this.headerType===Ys.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=jf(t)}}class Pl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=jf(t)}}class wh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=jf(n)}}class Hd{constructor(t,n){this.offset=jf(t),this.length=jf(n)}}class q0{constructor(t,n){this.length=jf(t),this.nullCount=jf(n)}}function Lyt(e,t){return()=>{switch(t){case Ys.Schema:return Sr.fromJSON(e);case Ys.RecordBatch:return Pl.fromJSON(e);case Ys.DictionaryBatch:return wh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ys[t]}, type: ${t} }`)}}function Fyt(e,t){return()=>{switch(t){case Ys.Schema:return Sr.decode(e.header(new Ed),new Map,e.version());case Ys.RecordBatch:return Pl.decode(e.header(new vp),e.version());case Ys.DictionaryBatch:return wh.decode(e.header(new N_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ys[t]}, type: ${t} }`)}}Mr.encode=Kyt;Mr.decode=Gyt;Mr.fromJSON=Oyt;Sr.encode=Yyt;Sr.decode=jyt;Sr.fromJSON=Ryt;Pl.encode=Xyt;Pl.decode=Byt;Pl.fromJSON=zCe;wh.encode=Qyt;wh.decode=Uyt;wh.fromJSON=Nyt;q0.encode=Jyt;q0.decode=Vyt;Hd.encode=Zyt;Hd.decode=zyt;function jyt(e,t=new Map,n=Ba.V5){const r=Wyt(e,t);return new Sr(r,QP(e),t,n)}function Byt(e,t=Ba.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Pl(e.length(),Hyt(e),qyt(e,t))}function Uyt(e,t=Ba.V5){return new wh(Pl.decode(e.data(),t),e.id(),e.isDelta())}function zyt(e){return new Hd(e.offset(),e.length())}function Vyt(e){return new q0(e.length(),e.nullCount())}function Hyt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=q0.decode(n));return t}function qyt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ba.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Hd.decode(r));return n}function Wyt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Mr.decode(r,t));return n}function ece(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Mr.decode(r,t));return n}function Gyt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=nce(e,ece(e,t)),r=new Mr(e.name(),i,e.nullable(),QP(e))):t.has(n=jf(a.id()))?(s=(s=a.indexType())?tce(s):new j0,o=new U0(t.get(n),s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),QP(e))):(s=(s=a.indexType())?tce(s):new j0,t.set(n,i=nce(e,ece(e,t))),o=new U0(i,s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),QP(e))),r||null}function QP(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function tce(e){return new Ja(e.isSigned(),e.bitWidth())}function nce(e,t){const n=e.typeType();switch(n){case gi.NONE:return new Em;case gi.Null:return new Em;case gi.Binary:return new b2;case gi.Utf8:return new SE;case gi.Bool:return new _2;case gi.List:return new CE((t||[])[0]);case gi.Struct_:return new oa(t||[])}switch(n){case gi.Int:{const r=e.type(new hl);return new Ja(r.isSigned(),r.bitWidth())}case gi.FloatingPoint:{const r=e.type(new Ld);return new B0(r.precision())}case gi.Decimal:{const r=e.type(new gu);return new E3(r.scale(),r.precision(),r.bitWidth())}case gi.Date:{const r=e.type(new GP);return new TE(r.unit())}case gi.Time:{const r=e.type(new nA);return new xm(r.unit(),r.bitWidth())}case gi.Timestamp:{const r=e.type(new rA);return new x3(r.unit(),r.timezone())}case gi.Interval:{const r=e.type(new Fd);return new AE(r.unit())}case gi.Duration:{const r=e.type(new Od);return new S3(r.unit())}case gi.Union:{const r=e.type(new b1);return new w2(r.mode(),r.typeIdsArray()||[],t||[])}case gi.FixedSizeBinary:{const r=e.type(new $d);return new T3(r.byteWidth())}case gi.FixedSizeList:{const r=e.type(new Md);return new IE(r.listSize(),(t||[])[0])}case gi.Map:{const r=e.type(new YP);return new E2((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${gi[n]}" (${n})`)}function Yyt(e,t){const n=t.fields.map(s=>Mr.encode(e,s));Ed.startFieldsVector(e,n.length);const r=Ed.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Ed.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return xs.startKeyValue(e),xs.addKey(e,a),xs.addValue(e,u),xs.endKeyValue(e)})):-1;return Ed.startSchema(e),Ed.addFields(e,r),Ed.addEndianness(e,e1t?RE.Little:RE.Big),i!==-1&&Ed.addCustomMetadata(e,i),Ed.endSchema(e)}function Kyt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;En.isDictionary(s)?(o=s.dictionary.typeId,i=fj.visit(s,e),r=fj.visit(s.dictionary,e)):r=fj.visit(s,e);const a=(s.children||[]).map(c=>Mr.encode(e,c)),u=Zl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Zl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return xs.startKeyValue(e),xs.addKey(e,d),xs.addValue(e,h),xs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Zl.startField(e),Zl.addType(e,r),Zl.addTypeType(e,o),Zl.addChildren(e,u),Zl.addNullable(e,!!t.nullable),n!==-1&&Zl.addName(e,n),i!==-1&&Zl.addDictionary(e,i),l!==-1&&Zl.addCustomMetadata(e,l),Zl.endField(e)}function Xyt(e,t){const n=t.nodes||[],r=t.buffers||[];vp.startNodesVector(e,n.length);for(const o of n.slice().reverse())q0.encode(e,o);const i=e.endVector();vp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Hd.encode(e,o);const s=e.endVector();return vp.startRecordBatch(e),vp.addLength(e,BigInt(t.length)),vp.addNodes(e,i),vp.addBuffers(e,s),vp.endRecordBatch(e)}function Qyt(e,t){const n=Pl.encode(e,t.data);return N_.startDictionaryBatch(e),N_.addId(e,BigInt(t.id)),N_.addIsDelta(e,t.isDelta),N_.addData(e,n),N_.endDictionaryBatch(e)}function Jyt(e,t){return UCe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Zyt(e,t){return BCe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const e1t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Q7="ARROW1",GK=new Uint8Array(Q7.length);for(let e=0;e<Q7.length;e+=1)GK[e]=Q7.codePointAt(e);GK.length;class os extends xn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof pl?s.data.children:s.data),r=new os;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!En.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(En.isUnion(n))this.nodes.push(new q0(r,0));else{const{nullCount:i}=t;En.isNull(n)||Rf.call(this,i<=0?new Uint8Array(0):A3(t.offset,r,t.nullBitmap)),this.nodes.push(new q0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Rf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Hd(this._byteLength,t)),this._byteLength+=t,this}function t1t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Rf.call(this,i),n.mode===qu.Sparse)return J7.call(this,e);if(n.mode===qu.Dense){if(e.offset<=0)return Rf.call(this,s),J7.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Rf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function n1t(e){let t;return e.nullCount>=e.length?Rf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Rf.call(this,A3(e.offset,e.length,t)):Rf.call(this,ZAe(e.values))}function Jm(e){return Rf.call(this,e.values.subarray(0,e.length*e.stride))}function qCe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Rf.call(this,GTe(-i,t+1,r)),Rf.call(this,n.subarray(i,i+o)),this}function YK(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Rf.call(this,GTe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function J7(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}os.prototype.visitBool=n1t;os.prototype.visitInt=Jm;os.prototype.visitFloat=Jm;os.prototype.visitUtf8=qCe;os.prototype.visitBinary=qCe;os.prototype.visitFixedSizeBinary=Jm;os.prototype.visitDate=Jm;os.prototype.visitTimestamp=Jm;os.prototype.visitTime=Jm;os.prototype.visitDecimal=Jm;os.prototype.visitList=YK;os.prototype.visitStruct=J7;os.prototype.visitUnion=t1t;os.prototype.visitInterval=Jm;os.prototype.visitDuration=Jm;os.prototype.visitFixedSizeList=YK;os.prototype.visitMap=YK;class WCe extends gCe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new lj,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ry(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return u6(t)?t.then(n=>this.writeAll(n)):l6(t)?JK(this,t):QK(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof lj?this._sink=t:(this._sink=new lj,t&&ugt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&lgt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Y7(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof wu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof pl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Y7(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof pl?t instanceof Iyt||this._writeRecordBatch(t):t instanceof wu?this.writeAll(t.batches):aK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=jd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ys.RecordBatch?this._recordBatchBlocks.push(new V0(a,t.bodyLength,this._position)):t.headerType===Ys.DictionaryBatch&&this._dictionaryBlocks.push(new V0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Nr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(jd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(GK)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=os.assemble(t),o=new Pl(t.numRows,r,i),a=jd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=os.assemble(new hr([t])),u=new Pl(t.length,s,o),l=new wh(u,n,r),c=jd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class KK extends WCe{static writeAll(t,n){const r=new KK(n);return u6(t)?t.then(i=>r.writeAll(i)):l6(t)?JK(r,t):QK(r,t)}}class XK extends WCe{static writeAll(t){const n=new XK;return u6(t)?t.then(r=>n.writeAll(r)):l6(t)?JK(n,t):QK(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=G7.encode(new G7(t,Ba.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function QK(e,t){let n=t;t instanceof wu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function JK(e,t){var n,r,i,s,o,a,u;return Ap(this,void 0,void 0,function*(){try{for(n=!0,r=jA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function r1t(e,t="stream"){return(t==="stream"?KK:XK).writeAll(e).toUint8Array(!0)}function ZK(e,t=1){return(e*t+63&-64||64)/t}function W0(e,t,n=e.BYTES_PER_ELEMENT){return new e(ZK(t,n))}function eX(e){return e instanceof Rr?e:new Rr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function i1t(e){return new hr([eX(e)])}const tX=new TextEncoder;function s1t(e,t,n){const r=tX.encode(n);return e.set(r,t),r.length}function o1t(e,t,n){return tX.encodeInto(n,e.subarray(t)).written}const a1t=tX.encodeInto?o1t:s1t;function rce(e,t){const n=W0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function u1t(e,t){const n=W0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function l1t(e,t){const n=W0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function c1t(e,t){const n=W0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function f1t(e){const t=$3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function d1t(e,t,n){const r=W0(Int32Array,t+1),i=W0(Uint8Array,3*n);let s=0;return{set(o,a){s+=a1t(i,s,o),r[a+1]=s},data:()=>{const o=ZK(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function h1t(e,t){const n=[],r=W0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:p1t(e.dictionary,n,o)})}}function p1t(e,t,n){const r=d1t(e,t.length,n);return t.forEach(r.set),i1t(r.data())}function m1t(e,t){const n=W0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function g1t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?rce:null;break;case re.Float:r=e.precision>0?rce:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?h1t:null;break;case re.Bool:r=u1t;break;case re.Date:r=e.unit?c1t:l1t;break}return r==null?f1t(e):n?m1t(r(e,t),t):r(e,t)}function y1t(e,t){const n=e.length,r=ZK(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),eX({type:t,length:n,buffers:[null,i]})}function GCe(e,t,n,r,i=!0){const s=g1t(r,e,i);return t(n,s.set),eX(s.data())}function nX(e){if(e instanceof En||e==null)return e;switch(e){case re.Binary:return new b2;case re.Bool:return new _2;case re.DateDay:return new Sgt;case re.DateMillisecond:case re.Date:return new Tgt;case re.Dictionary:return new U0(new SE,new j0);case re.Float16:return new mAe;case re.Float32:return new yK;case re.Float64:case re.Float:return new vK;case re.Int8:return new cK;case re.Int16:return new fK;case re.Int32:case re.Int:return new j0;case re.Int64:return new dK;case re.IntervalDayTime:return new Rgt;case re.Interval:case re.IntervalYearMonth:return new Ngt;case re.Null:return new Em;case re.TimeMicrosecond:return new Igt;case re.TimeMillisecond:case re.Time:return new Cgt;case re.TimeNanosecond:return new kgt;case re.TimeSecond:return new Agt;case re.Uint8:return new hK;case re.Uint16:return new pK;case re.Uint32:return new mK;case re.Uint64:return new gK;case re.Utf8:return new SE;default:wn(`Unsupported type code: ${gh(e)}. Use a data type constructor instead?`)}}function v1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function YCe(e,t){const n=Z7();return e(t,n.add),n}function Z7(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(wm(t))++e.dates,v1t(t)&&++e.utcdays;else if(K1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Z7());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Z7())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return nX(b1t(e))}};return e}function b1t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:wn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:wn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Mr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new IE(e.minlen,n):new CE(n)}else if(e.structs===t){const n=e.struct_prof;return new oa(Object.keys(n).map(r=>Mr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;wn("Type inference failure")}}}}function _1t(e,t,n,r,i,s=!0){if(i=nX(i),!i){const o=YCe(r,t);s=o.nulls>0,i=o.type()}return GCe(n,r,t,i,s)}function w1t(e,t,n,r,i,s=!0){i=nX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=E1t(o);if(u&&a&&ice(u.type,i))return u;const l=o.data;if(QI(l)){const c=x1t(l);if(a&&c&&ice(c,i))return y1t(l,c);i=i||c,s=!1}if(!i){const c=YCe(r,o);s=c.nulls>0,i=c.type()}return GCe(n,r,o,i,s)}function E1t(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function x1t(e){const n={Float32Array:yK,Float64Array:vK,Int8Array:cK,Int16Array:fK,Int32Array:j0,Uint8Array:hK,Uint16Array:pK,Uint32Array:mK,BigInt64Array:dK,BigUint64Array:gK}[e.constructor.name];return n?new n:null}function ice(e,t){return!e||!t?!0:e.compareTo(t)}function S1t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function T1t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&K1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const A1t=()=>wn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function C1t(){try{return wu}catch{A1t()}}function KCe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=I1t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&wn("Column length mismatch"),a[l]=c});const u=C1t();return new u(a)}function I1t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=di(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:_1t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:S1t(e,r,i)};if(k1t(e))return{dataFrom:w1t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:T1t(e,r,i)};wn("Unsupported input data type")}function k1t(e){return e&&di(e.reify)}function R1t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return r1t(KCe(e,r),n)}function N1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function P1t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&wm(u))++i,N1t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function v6(e,t){return di(t)?t(e):t||e.columnNames()}function XCe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=P1t(D1t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function D1t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function rX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function O1t(e,t={}){const n=v6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":wm(l)?o6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return rX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function QCe(e,t={}){if(di(t))return t(e)+"";const n=typeof e;if(n==="object"){if(wm(e))return t.utc?o6(e):bTe(e);{const r=JSON.stringify(e,(s,o)=>QI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function b6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function $1t(e,t={}){const n=v6(e,t.columns),{align:r,format:i}=XCe(e,n,t),s=M1t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(QCe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return rX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function M1t(e){return b6(e.style,t=>di(t)?t:()=>t)}function L1t(e,t=!0,n=!1){return e===void 0||e?t:n}const F1t=e=>wm(e)?o6(e,!0):e;function j1t(e,t={}){const n=L1t(t.schema),r=t.format||{},i=v6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||F1t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function B1t(e,t={}){const n=v6(e,t.columns),{align:r,format:i}=XCe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return rX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(QCe(u,i[l]))+"|"}}),a+`
`}function JCe(e,t){for(const[n,r]of a6(t))e.set(n,r);return e}function U1t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Sm(e,t,n=new Map){return t=Qa(t)?e.columnName(t):t,Mo(t)?n.set(t,t):dr(t)?t.forEach(r=>Sm(e,r,n)):di(t)?Sm(e,t(e),n):ga(t)?JCe(n,t):wn(`Invalid column selection: ${gh(t)}`),n}function _6(e,t){return e.toObject=t,e}function ZCe(e){return dr(e)?e.map(ZCe):e&&e.toObject?e.toObject():e}function NE(){return _6(e=>e.columnNames(),()=>({all:[]}))}function e2e(...e){return e=e.flat(),_6(t=>{const n=Sm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:ZCe(e)}))}function z1t(e,t){return _6(n=>{let r=Qa(e)?e:n.columnIndex(e),i=Qa(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function V1t(e){return Mo(e)&&(e=RegExp(U1t(e))),_6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function H1t(e){return QI(e.data)?e.data.constructor:Array}class Np extends amt{static from(t,n){return new Np(cmt(t,n),n)}static new(t,n){if(t instanceof Np)return t;const r={},i=[];for(const[s,o]of a6(t))r[s]=o,i.push(s);return new Np(r,n||i)}constructor(t,n,r,i,s,o){b6(t,lmt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Np(t||this._data,n||(t?null:this._names),o,i!==void 0?i:jmt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Hl(r).groupby(r.groups());return t.forEach(s=>{s=Np.new(s),s.numRows()!==n&&wn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):wn(`Unrecognized column: ${t}`)}object(t=0){return sce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Sm(this,t.columns||NE()),o=HTe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Umt(this,u,a,n)}return a}*[Symbol.iterator](){const t=sce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(H1t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Bmt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return KCe(this,t)}toArrowBuffer(t){return R1t(this,t)}toCSV(t){return O1t(this,t)}toHTML(t){return $1t(this,t)}toJSON(t){return j1t(this,t)}toMarkdown(t){return B1t(this,t)}}function sce(e){let t=e._builder;if(!t){const n=HTe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class q1t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=W1t[e.type];s&&s(e,t,n)}const xN=(e,t,n)=>{er(e.argument,t,n,e)},dj=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},oce=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},hj=(e,t,n)=>{xd(e.params,t,n,e),er(e.body,t,n,e)},ace=(e,t,n)=>{er(e.callee,t,n,e),xd(e.arguments,t,n,e)},xd=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},W1t={TemplateLiteral:(e,t,n)=>{xd(e.expressions,t,n,e),xd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:ace,NewExpression:ace,ArrayExpression:(e,t,n)=>{xd(e.elements,t,n,e)},AssignmentExpression:dj,AwaitExpression:xN,BinaryExpression:dj,LogicalExpression:dj,UnaryExpression:xN,UpdateExpression:xN,ConditionalExpression:oce,ObjectExpression:(e,t,n)=>{xd(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:hj,FunctionExpression:hj,FunctionDeclaration:hj,VariableDeclaration:(e,t,n)=>{xd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{xd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:oce,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),xd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),xd(e.consequent,t,n,e)},ReturnStatement:xN,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function t2e(e){delete e.start,delete e.end,delete e.optional}function uce(e){t2e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function G1t(e){return er(e,null,{Column:uce,Constant:uce,Default:t2e}),e}function Ts(e,t){return t&&t.type===e}function Y1t(e){return Ts(Hmt,e)||Ts(Vmt,e)}function K1t(e){return di(e)?e:()=>e}const X1t="Escaped functions are not valid as rollup or pivot values.";function Q1t(e,t,n){e.aggronly&&wn(X1t);const r="(row,data)=>fn("+VTe(e.table.columnNames())+",$)";return{escape:sK.escape(r,K1t(t.expr),n)}}var J1t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],n2e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Z1t="-----------------------------------------------------------------------------------------------------------------------------------------------------",r2e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",pj={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},mj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",evt={5:mj,"5module":mj+" export import",6:mj+" const class extends export import super"},tvt=/^in(stanceof)?$/,nvt=new RegExp("["+r2e+"]"),rvt=new RegExp("["+r2e+Z1t+"]");function ez(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Tm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&nvt.test(String.fromCharCode(e)):t===!1?!1:ez(e,n2e)}function PE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&rvt.test(String.fromCharCode(e)):t===!1?!1:ez(e,n2e)||ez(e,J1t)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Kl(e,t){return new or(e,{beforeExpr:!0,binop:t})}var Xl={beforeExpr:!0},cu={startsExpr:!0},iX={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,iX[e]=new or(e,t)}var K={num:new or("num",cu),regexp:new or("regexp",cu),string:new or("string",cu),name:new or("name",cu),privateId:new or("privateId",cu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",Xl),semi:new or(";",Xl),colon:new or(":",Xl),dot:new or("."),question:new or("?",Xl),questionDot:new or("?."),arrow:new or("=>",Xl),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",Xl),backQuote:new or("`",cu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Kl("||",1),logicalAND:Kl("&&",2),bitwiseOR:Kl("|",3),bitwiseXOR:Kl("^",4),bitwiseAND:Kl("&",5),equality:Kl("==/!=/===/!==",6),relational:Kl("</>/<=/>=",7),bitShift:Kl("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Kl("%",10),star:Kl("*",10),slash:Kl("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:Kl("??",1),_break:Wn("break"),_case:Wn("case",Xl),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",Xl),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",Xl),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",cu),_if:Wn("if"),_return:Wn("return",Xl),_switch:Wn("switch"),_throw:Wn("throw",Xl),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",cu),_super:Wn("super",cu),_class:Wn("class",cu),_extends:Wn("extends",Xl),_export:Wn("export"),_import:Wn("import",cu),_null:Wn("null",cu),_true:Wn("true",cu),_false:Wn("false",cu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Fc=/\r\n?|\n|\u2028|\u2029/,ivt=new RegExp(Fc.source,"g");function Xx(e){return e===10||e===13||e===8232||e===8233}function i2e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(Xx(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var s2e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ac=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,o2e=Object.prototype,svt=o2e.hasOwnProperty,ovt=o2e.toString,ik=Object.hasOwn||function(e,t){return svt.call(e,t)},lce=Array.isArray||function(e){return ovt.call(e)==="[object Array]"},cce=Object.create(null);function Wg(e){return cce[e]||(cce[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function G0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var avt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,x2=function(t,n){this.line=t,this.column=n};x2.prototype.offset=function(t){return new x2(this.line,this.column+t)};var w6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function a2e(e,t){for(var n=1,r=0;;){var i=i2e(e,r,t);if(i<0)return new x2(n,t-r);++n,r=i}}var tz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},fce=!1;function uvt(e){var t={};for(var n in tz)t[n]=e&&ik(e,n)?e[n]:tz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!fce&&typeof console=="object"&&console.warn&&(fce=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),lce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return lce(t.onComment)&&(t.onComment=lvt(t,t.onComment)),t}function lvt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new w6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var S2=1,Qx=2,sX=4,u2e=8,l2e=16,c2e=32,oX=64,f2e=128,sk=256,aX=S2|Qx|sk;function uX(e,t){return Qx|(e?sX:0)|(t?u2e:0)}var j3=0,lX=1,Zm=2,d2e=3,h2e=4,p2e=5,$s=function(t,n,r){this.options=t=uvt(t),this.sourceFile=t.sourceFile,this.keywords=Wg(evt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=pj[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Wg(i);var s=(i?i+" ":"")+pj.strict;this.reservedWordsStrict=Wg(s),this.reservedWordsStrictBind=Wg(s+" "+pj.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Fc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(S2),this.regexpState=null,this.privateNameStack=[]},zh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};$s.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};zh.inFunction.get=function(){return(this.currentVarScope().flags&Qx)>0};zh.inGenerator.get=function(){return(this.currentVarScope().flags&u2e)>0&&!this.currentVarScope().inClassFieldInit};zh.inAsync.get=function(){return(this.currentVarScope().flags&sX)>0&&!this.currentVarScope().inClassFieldInit};zh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&sk)return!1;if(t.flags&Qx)return(t.flags&sX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};zh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&oX)>0||n||this.options.allowSuperOutsideMethod};zh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&f2e)>0};zh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};zh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Qx|sk))>0||n};zh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&sk)>0};$s.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};$s.parse=function(t,n){return new this(n,t).parse()};$s.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};$s.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties($s.prototype,zh);var iu=$s.prototype,cvt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;iu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){ac.lastIndex=e,e+=ac.exec(this.input)[0].length;var t=cvt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){ac.lastIndex=e+t[0].length;var n=ac.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Fc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,ac.lastIndex=e,e+=ac.exec(this.input)[0].length,this.input[e]===";"&&e++}};iu.eat=function(e){return this.type===e?(this.next(),!0):!1};iu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};iu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};iu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};iu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Fc.test(this.input.slice(this.lastTokEnd,this.start))};iu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};iu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};iu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};iu.expect=function(e){this.eat(e)||this.unexpected()};iu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var E6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};iu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};iu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};iu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};iu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=$s.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var cX={kind:"loop"},fvt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ac.lastIndex=this.pos;var t=ac.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Tm(r,!0)){for(var i=n+1;PE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!tvt.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ac.lastIndex=this.pos;var e=ac.exec(this.input),t=this.pos+e[0].length,n;return!Fc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(PE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){ac.lastIndex=this.pos;var o=ac.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(cX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(cX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new E6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,nC|(n?0:nz),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(fvt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),Fc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var dvt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?c2e:0),this.checkLValPattern(e,t?h2e:Zm),this.expect(K.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(cX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?lX:Zm,!1)};var nC=1,nz=2,m2e=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&nz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&nC&&(e.id=t&m2e&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&nz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?lX:Zm:d2e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(uX(e.async,e.generator)),t&nC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&nC?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&hvt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&B3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&B3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(B3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&B3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(sk|oX);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Zm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];ik(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function hvt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function B3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,nC|m2e,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),ik(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=dvt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Zm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Zm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Zm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return avt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var jc=$s.prototype;jc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};jc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};jc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};jc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};jc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};jc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};jc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};jc.parseBindingListItem=function(e){return e};jc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};jc.checkLValSimple=function(e,t,n){t===void 0&&(t=j3);var r=t!==j3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Zm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(ik(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==p2e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};jc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=j3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};jc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=j3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Xc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ei={b_stat:new Xc("{",!1),b_expr:new Xc("{",!0),b_tmpl:new Xc("${",!1),p_stat:new Xc("(",!1),p_expr:new Xc("(",!0),q_tmpl:new Xc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Xc("function",!1),f_expr:new Xc("function",!0),f_expr_gen:new Xc("function",!0,!1,null,!0),f_gen:new Xc("function",!1,!1,null,!0)},Jx=$s.prototype;Jx.initialContext=function(){return[Ei.b_stat]};Jx.curContext=function(){return this.context[this.context.length-1]};Jx.braceIsBlock=function(e){var t=this.curContext();return t===Ei.f_expr||t===Ei.f_stat?!0:e===K.colon&&(t===Ei.b_stat||t===Ei.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Fc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ei.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};Jx.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Jx.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Jx.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ei.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ei.b_stat:Ei.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ei.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ei.p_stat:Ei.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ei.p_stat)&&!(e===K._return&&Fc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ei.b_stat)?this.context.push(Ei.f_expr):this.context.push(Ei.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ei.q_tmpl?this.context.pop():this.context.push(Ei.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ei.f_expr?this.context[t]=Ei.f_expr_gen:this.context[t]=Ei.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var on=$s.prototype;on.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};on.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};on.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new E6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};on.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};on.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};on.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};on.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};on.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&g2e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function g2e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&g2e(e.expression)}on.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};on.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};on.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};on.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};on.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new E6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};on.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ei.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ei.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};on.parseExprAtomDefault=function(){this.unexpected()};on.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};on.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};on.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};on.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};on.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};on.shouldParseArrow=function(e){return!this.canInsertSemicolon()};on.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new E6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};on.parseParenItem=function(e){return e};on.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var pvt=[];on.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=pvt,this.finishNode(e,"NewExpression")};on.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};on.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};on.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Fc.test(this.input.slice(this.lastTokEnd,this.start))};on.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};on.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};on.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};on.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};on.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};on.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};on.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(uX(t,r.generator)|oX|(n?f2e:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};on.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(uX(n,!1)|l2e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};on.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,p2e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};on.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};on.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,lX,t?null:n)}};on.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};on.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};on.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};on.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};on.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};on.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};on.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var U3=$s.prototype;U3.raise=function(e,t){var n=a2e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};U3.raiseRecoverable=U3.raise;U3.curPosition=function(){if(this.options.locations)return new x2(this.curLine,this.pos-this.lineStart)};var Dy=$s.prototype,mvt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Dy.enterScope=function(e){this.scopeStack.push(new mvt(e))};Dy.exitScope=function(){this.scopeStack.pop()};Dy.treatFunctionsAsVarInScope=function(e){return e.flags&Qx||!this.inModule&&e.flags&S2};Dy.declareName=function(e,t,n){var r=!1;if(t===Zm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&S2&&delete this.undefinedExports[e]}else if(t===h2e){var s=this.currentScope();s.lexical.push(e)}else if(t===d2e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&c2e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&S2&&delete this.undefinedExports[e],u.flags&aX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Dy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Dy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Dy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&aX)return t}};Dy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&aX&&!(t.flags&l2e))return t}};var x6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new w6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},ok=$s.prototype;ok.startNode=function(){return new x6(this,this.start,this.startLoc)};ok.startNodeAt=function(e,t){return new x6(this,e,t)};function y2e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}ok.finishNode=function(e,t){return y2e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};ok.finishNodeAt=function(e,t,n,r){return y2e.call(this,e,t,n,r)};ok.copyNode=function(e){var t=new x6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var v2e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",b2e=v2e+" Extended_Pictographic",_2e=b2e,w2e=_2e+" EBase EComp EMod EPres ExtPict",E2e=w2e,gvt=E2e,yvt={9:v2e,10:b2e,11:_2e,12:w2e,13:E2e,14:gvt},vvt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",bvt={9:"",10:"",11:"",12:"",13:"",14:vvt},dce="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",x2e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",S2e=x2e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",T2e=S2e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",A2e=T2e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",C2e=A2e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",_vt=C2e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",wvt={9:x2e,10:S2e,11:T2e,12:A2e,13:C2e,14:_vt},I2e={};function Evt(e){var t=I2e[e]={binary:Wg(yvt[e]+" "+dce),binaryOfStrings:Wg(bvt[e]),nonBinary:{General_Category:Wg(dce),Script:Wg(wvt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var gj=0,hce=[9,10,11,12,13,14];gj<hce.length;gj+=1){var xvt=hce[gj];Evt(xvt)}var At=$s.prototype,Vh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=I2e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Vh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Vh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Vh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Vh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Vh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Vh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Vh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Vh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Vh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return k2e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function k2e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!k2e(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=G0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=G0(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Svt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Svt(e){return Tm(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Tvt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Tvt(e){return PE(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!S6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return R2e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function R2e(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&Avt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function Avt(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var N2e=0,Am=1,cc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Cvt(t))return e.lastIntValue=-1,e.advance(),Am;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===cc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return N2e};function Cvt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Am}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return N2e};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){ik(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Am;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return cc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";P2e(t=e.current());)e.lastStringValue+=G0(t),e.advance();return e.lastStringValue!==""};function P2e(e){return R2e(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Ivt(t=e.current());)e.lastStringValue+=G0(t),e.advance();return e.lastStringValue!==""};function Ivt(e){return P2e(e)||S6(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===cc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Am:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Am)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||$2e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Am,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===cc&&(t=cc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==cc&&(t=Am);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===cc&&(t=cc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Am:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===cc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===cc&&(t=cc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Am:cc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&kvt(n)||Rvt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function kvt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function Rvt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return Nvt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Nvt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return S6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;S6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function S6(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;D2e(n=e.current());)e.lastIntValue=16*e.lastIntValue+O2e(n),e.advance();return e.pos!==t};function D2e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function O2e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return $2e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function $2e(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!D2e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+O2e(i),e.advance()}return!0};var fX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new w6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=$s.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new fX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new fX(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return Tm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=i2e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Xx(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&s2e.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Fc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Tm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+G0(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+G0(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Fc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Vh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function Pvt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function M2e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=M2e(this.input.slice(t,this.pos)),++this.pos):Tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=M2e(this.input.slice(t,this.pos));return++this.pos,Tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=Pvt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Xx(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var L2e={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===L2e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw L2e;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Xx(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return G0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Xx(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(PE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Tm:PE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=G0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=iX[e]),this.finishToken(t,e)};var Dvt="8.11.3";$s.acorn={Parser:$s,version:Dvt,defaultOptions:tz,Position:x2,SourceLocation:w6,getLineInfo:a2e,Node:x6,TokenType:or,tokTypes:K,keywordTypes:iX,TokContext:Xc,tokContexts:Ei,isIdentifierChar:PE,isIdentifierStart:Tm,Token:fX,isNewLine:Xx,lineBreak:Fc,lineBreakG:ivt,nonASCIIwhitespace:s2e};function Ovt(e,t){return $s.parse(e,t)}const dX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},$vt={ecmaVersion:11},pce="$",Mvt="d",Lvt="d1",Fvt="d2",_o=e=>(t,n)=>n.error(t,e+" not allowed"),jvt=_o("Aggregate function"),Bvt=_o("Window function"),Uvt="Invalid argument",hX="Invalid column reference",zvt=hX+" (must be input to an aggregate function)",F2e="Invalid function call",Vvt="Invalid member expression",Hvt="Invalid operator parameter",qvt="Invalid param reference",Wvt="Invalid variable reference",Gvt="Variable not accessible in operator call",Yvt="Unsupported variable declaration",Kvt="Unsupported destructuring pattern",j2e="Table expressions do not support closures",B2e="Use aq.escape(fn) to use a function as-is (including closures)",Xvt="use table.params({ name: value }) to define dynamic parameters",Qvt="use aq.addFunction(name, fn) to add new op functions",Jvt=`
Note: ${j2e}. ${B2e}, or ${Xvt}.`,U2e=`
Note: ${j2e}. ${B2e}, or ${Qvt}.`,Zvt=`The ${UTe} method is not valid in multi-table expressions.`;function ebt(e,t){const n=tbt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Y1t(r)?(rbt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Lvt),e.scope.add(e.tuple2=Fvt),e.scope.add(e.$param=pce)):(e.scope.add(e.tuple=Mvt),e.scope.add(e.$param=pce)),er(r,e,pX),e.root}function tbt(e){try{const t=e.field?nbt(e):dr(e)?gh(e):e;return Ovt(`expr=(${t})`,$vt).body[0].expression.right}catch{wn(`Expression parse error: ${e+""}`)}}function nbt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const pX={FunctionDeclaration:_o("Function definitions"),ForStatement:_o("For loops"),ForOfStatement:_o("For-of loops"),ForInStatement:_o("For-in loops"),WhileStatement:_o("While loops"),DoWhileStatement:_o("Do-while loops"),AwaitExpression:_o("Await expressions"),ArrowFunctionExpression:_o("Function definitions"),AssignmentExpression:_o("Assignments"),FunctionExpression:_o("Function definitions"),NewExpression:_o('Use of "new"'),UpdateExpression:_o("Update expressions"),VariableDeclarator(e,t){sz(e.id,t)},Identifier(e,t,n){H2e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Wvt,Jvt)},CallExpression(e,t){const n=z2e(e.callee),r=FTe(n)||jTe(n);if(r){if((t.join||t.aggregate===!1)&&rK(n)&&jvt(e,t),(t.join||t.window===!1)&&iK(n)&&Bvt(e,t),t.$op=1,t.ast)iz(e,n,t),e.arguments.forEach(i=>er(i,t,rz));else{const i=t.op(ibt(t,r,n,e.arguments));Object.assign(e,{type:DTe,name:i.id})}return t.$op=0,!1}else LTe(n)?iz(e,n,t):t.error(e,F2e,U2e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ts(m0,r))return;const{name:s}=r;if(V2e(e)&&Ts(m0,i)&&Ff(dX,i.name)){G2e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return mce(e,o,t,q2e,n);if(s===t.$param)return mce(e,o,t,obt);t.paramsRef.has(s)?T2(e,t.paramsRef.get(s)):t.columnRef.has(s)?W2e(r,s,t,e):Ff(t.params,s)&&T2(r,s)}};function mce(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ts(qx,s))a=s.value;else try{er(s,n,pX,e),a=n.param(s)}catch{n.error(e,Vvt)}return r(e,a,t,n,i),!1}const rz={...pX,VariableDeclarator:_o("Variable declaration in operator call"),Identifier(e,t,n){H2e(e,t,n)&&t.error(e,Gvt)},CallExpression(e,t){const n=z2e(e.callee);LTe(n)?iz(e,n,t):t.error(e,F2e,U2e)}};function rbt(e,t){e.generator&&_o("Generator functions")(e,t),e.async&&_o("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(cT(t,n[0],"tuple1",i(1)),r>1&&cT(t,n[1],"tuple2",i(2)),r>2&&cT(t,n[2],"$param",s)):(cT(t,n[0],"tuple",i(0)),r>1&&cT(t,n[1],"$param",s))),t.root=e.body}function cT(e,t,n,r){Ts(m0,t)?(e.scope.add(t.name),e[n]=t.name):Ts(NTe,t)&&t.properties.forEach(i=>{const s=Ts(m0,i.key)?i.key.name:Ts(qx,i.key)?i.key.value:e.error(i,Uvt);Ts(m0,i.value)||e.error(i.value,Kvt),r(i.value.name,s)})}function ibt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,rz),i.push(e.field(u))):l<a?(er(u,e,rz),s.push(e.param(u))):e.error(u,Hvt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function z2e(e){return Ts(m0,e)?e.name:Ts(RTe,e)?V2e(e)?sbt(e.property.name):e.property.name:null}function V2e(e){return Ts(m0,e.object)&&e.object.name==="Math"}function sbt(e){return e==="max"?"greatest":e==="min"?"least":e}function H2e(e,t,n){const{name:r}=e;if(!(Ts(RTe,n)&&n.property===e)){if(!(Ts(PTe,n)&&n.key===e))if(t.paramsRef.has(r))T2(e,t.paramsRef.get(r));else if(t.columnRef.has(r))W2e(e,r,t,n);else if(Ff(t.params,r))T2(e,r);else if(Ff(dX,r))G2e(e,r);else return!0}}function q2e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,hX),r.aggronly&&!r.$op&&r.error(e,zvt),BTe(e,t,n,o,i)}function W2e(e,t,n,r){const[i,s]=n.columnRef.get(t);q2e(e,i,s,n,r)}function obt(e,t,n,r){r.params&&!Ff(r.params,t)&&r.error(e,qvt),T2(e,t)}function T2(e,t){e.type=Kmt,e.name=t}function G2e(e,t){e.type=Wmt,e.name=t,e.raw=dX[t]}function iz(e,t,n){if(t===UTe){const r=n.table;r||n.error(e,Zvt),zTe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Qa(s)?r.columnName(s):s;return r.column(o)||n.error(i,hX),o}):r.columnNames())}else e.callee={type:Ymt,name:t}}function sz(e,t){Ts(m0,e)?t.scope.add(e.name):Ts(zmt,e)?e.elements.forEach(n=>sz(n,t)):Ts(NTe,e)?e.properties.forEach(n=>sz(n.value,t)):t.error(e.id,Yvt)}const abt={[JI]:1,[DTe]:1};function Gu(e,t={}){const n=t.generate||b3,r=t.compiler||sK,i=lbt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=ubt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ts(qx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?G1t(g):f(n(g),i));u.push(y),abt[g.type]&&y!==g&&ga(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);wn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of a6(e))d.value(m+"",g.escape?Q1t(d,g,i):ebt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function ubt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function lbt(e){return(e.table?yj(e.table):e.join?{...yj(e.join[1]),...yj(e.join[0])}:{})||{}}function yj(e){return e&&di(e.params)?e.params():{}}const Y2e="Expr",Qc="ExprList",K2e="ExprNumber",sA="ExprObject",ew="JoinKeys",z3="JoinValues",ec="Options",mX="OrderKeys",bg="SelectionList",N1="TableRef",tw="TableRefList",cbt="Descending",fbt="Query",dbt="Selection",hbt="Verb",pbt="Window";function T6(e,t){return e&&e.expr?new gce({...e,...t}):new gce(t,e)}class gce{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...di(this.expr)?{func:!0}:{}}}}function mbt(e){return T6(e,{desc:!0})}function jv(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return T6(e,t?{expr:t,...r}:r)}function gbt(e,t,n){return T6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function ybt(e){const t=n=>n;return t.toString=()=>e,t}function yce(e,t){return t=t&&di(t.query)?t.query():t,t&&di(t.evaluate)?t.evaluate(null,e):e(t)}function X2e(e){return ga(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function A2(e){return e&&di(e.toObject)?e.toObject():di(e)?{expr:String(e),func:!0}:dr(e)?e.map(A2):ga(e)?b6(e,t=>A2(t)):e}function gX(e){return dr(e)?e.map(gX):ga(e)?dr(e.verbs)?vX.from(e):dr(e.all)?NE():dr(e.range)?z1t(...e.range):dr(e.match)?V1t(RegExp(...e.match)):dr(e.not)?e2e(e.not.map(A2)):vbt(e):e}function vbt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=jv(n):e.func===!0&&(t=n=ybt(n)),ga(e.window)){const{frame:r,peers:i}=e.window;t=n=gbt(n,r,i)}e.desc===!0&&(t=mbt(n))}return e===t?b6(e,r=>gX(r)):t}function bbt(e){return dr(e)?e.map(_bt):e}function _bt(e){const t=[];return Hu(e).forEach(n=>{Qa(n)?t.push(n):Mo(n)?t.push(jv(n,null)):ga(n)&&n.expr||di(n)?t.push(n):wn(`Invalid key value: ${n+""}`)}),t}function wbt(e){return dr(e)?e.map(Ebt):e}function Ebt(e,t){return t<2?Hu(e):e}function xbt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ga(r)&&!di(r))for(const i in r)t.push(r[i]);else n=Qa(r)?r:Mo(r)?jv(n):di(r)?n:wn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const Sbt={[Y2e]:eIe,[Qc]:DE,[K2e]:Rbt,[sA]:Y0,[ew]:Nbt,[z3]:Pbt,[mX]:DE,[bg]:Ibt};function Tbt(e,t,n){return t===N1?vce(e):t===tw?e.map(vce):Q2e(A2(e),t,n)}function Q2e(e,t,n){return t===ec?e&&Abt(e,n):Sbt[t](e)}function Abt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?Q2e(i,t[r]):i}return n}function Cbt(e,t){return Gu({expr:e},{...t,ast:!0}).exprs[0]}function yX(e){return{type:JI,name:e}}function J2e(e){return{type:JI,index:e}}function Y0(e,t){if(Mo(e))return Cbt(e,t);if(e.expr){let n;if(e.field===!0?n=yX(e.expr):e.func===!0&&(n=Y0(e.expr,t)),n)return e.desc&&(n={type:cbt,expr:n}),e.window&&(n={type:pbt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Y0(e[n],t),as:n}))}function Z2e(e){const t=dbt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:DE(e.not)}:e.range?{type:t,operator:"range",arguments:DE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:wn("Invalid input")}function Ibt(e){return Hu(e).map(kbt).flat()}function kbt(e){return X2e(e)?Z2e(e):Qa(e)?J2e(e):Mo(e)?yX(e):ga(e)?Object.keys(e).map(t=>({type:JI,name:t,as:e[t]})):wn("Invalid input")}function eIe(e){return X2e(e)?Z2e(e):Qa(e)?J2e(e):Mo(e)?yX(e):ga(e)?Y0(e):wn("Invalid input")}function DE(e){return Hu(e).map(eIe).flat()}function Rbt(e){return Qa(e)?e:Y0(e)}function Nbt(e){return dr(e)?e.map(DE):Y0(e,{join:!0})}function Pbt(e){return dr(e)?e.map((t,n)=>n<2?DE(t):Y0(t,{join:!0})):Y0(e,{join:!0})}function vce(e){return e&&di(e.toAST)?e.toAST():e}class tIe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===ew?bbt(a):o===z3?wbt(a):o===mX?xbt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=oz[t.verb],r=(n.schema||[]).map(({name:i})=>gX(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===N1?yce(n,o):s===tw?o.map(a=>yce(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=A2(this[n])}),t}toAST(){const t={type:hbt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Tbt(this[n],r,i)}),t}}function $r(e,t){return Object.assign((...n)=>new tIe(e,t,n),{schema:t})}const oz={count:$r("count",[{name:"options",type:ec}]),derive:$r("derive",[{name:"values",type:sA},{name:"options",type:ec,props:{before:bg,after:bg}}]),filter:$r("filter",[{name:"criteria",type:sA}]),groupby:$r("groupby",[{name:"keys",type:Qc}]),orderby:$r("orderby",[{name:"keys",type:mX}]),relocate:$r("relocate",[{name:"columns",type:bg},{name:"options",type:ec,props:{before:bg,after:bg}}]),rename:$r("rename",[{name:"columns",type:bg}]),rollup:$r("rollup",[{name:"values",type:sA}]),sample:$r("sample",[{name:"size",type:K2e},{name:"options",type:ec,props:{weight:Y2e}}]),select:$r("select",[{name:"columns",type:bg}]),ungroup:$r("ungroup"),unorder:$r("unorder"),reify:$r("reify"),dedupe:$r("dedupe",[{name:"keys",type:Qc,default:[]}]),impute:$r("impute",[{name:"values",type:sA},{name:"options",type:ec,props:{expand:Qc}}]),fold:$r("fold",[{name:"values",type:Qc},{name:"options",type:ec}]),pivot:$r("pivot",[{name:"keys",type:Qc},{name:"values",type:Qc},{name:"options",type:ec}]),spread:$r("spread",[{name:"values",type:Qc},{name:"options",type:ec}]),unroll:$r("unroll",[{name:"values",type:Qc},{name:"options",type:ec,props:{drop:Qc}}]),lookup:$r("lookup",[{name:"table",type:N1},{name:"on",type:ew},{name:"values",type:Qc}]),join:$r("join",[{name:"table",type:N1},{name:"on",type:ew},{name:"values",type:z3},{name:"options",type:ec}]),cross:$r("cross",[{name:"table",type:N1},{name:"values",type:z3},{name:"options",type:ec}]),semijoin:$r("semijoin",[{name:"table",type:N1},{name:"on",type:ew}]),antijoin:$r("antijoin",[{name:"table",type:N1},{name:"on",type:ew}]),concat:$r("concat",[{name:"tables",type:tw}]),union:$r("union",[{name:"tables",type:tw}]),intersect:$r("intersect",[{name:"tables",type:tw}]),except:$r("except",[{name:"tables",type:tw}])};let vX=class nIe extends yTe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new nIe(t.map(tIe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return bce(this,"toObject")}toJSON(){return this.toObject()}toAST(){return bce(this,"toAST",{type:fbt})}};function bce(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function Dbt(e,t){return new vX(e._verbs.concat(t),e._params,e._table)}for(const e in oz){const t=oz[e];vX.prototype["__"+e]=function(n,...r){return Dbt(n,t(...r))}}function Zx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function Obt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function bX(e,t){const n=Hl();return t.forEach((r,i)=>{const s=Mo(r)?r:i;if(s){const o=e.column(i)||wn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function rIe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||wn("relocate requires a before or after option."),i&&s&&wn("relocate accepts only one of the before or after options."),t=Sm(e,t);const o=[...Sm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),bX(e,u)}function ak(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function _X(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $bt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function Mbt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function SN(e){return g2(e)?e:+e}function Lbt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return SN(e[0]);if(t>=1)return SN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=SN(e[i]);return g2(s)?s:s+(SN(e[i+1])-s)*(r-i)}class Fbt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:$bt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Mbt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(_X)),Lbt(this._sorted,t)}}const V3=(e,t,n)=>Zx(t,"{"+ak(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function jbt(e,t){const{ops:n,output:r}=Bbt(e,t),i=e[0].fields,s=i.length,o=s===0?wX:s===1?Ubt:s===2?zbt:wn("Unsupported field count: "+s);return new o(i,n,r,t)}function Bbt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=FTe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class wX extends q1t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Fbt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Ubt extends wX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=V3(n,s,"add"),this._rem=V3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,wf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,wf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class zbt extends wX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=V3(n,s,"add"),this._rem=V3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,wf(i)&&wf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,wf(i)&&wf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Ib(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=eS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function eS(e,t,n){if(!t.length)return n;const r=iIe(t),i=e.groups(),s=i?i.size:1;return n=n||s6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=oIe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=sIe(e,o);o.write(a,n,0)}),n}function iIe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(jbt(r[i],t));return n}function sIe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function oIe(e,t,n){const{keys:r,size:i}=n,s=s6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function aIe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function uIe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const _ce=uIe(_X);function Vbt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?Zx(["w","r","k"],"{"+ak(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=_ce.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=_ce.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],T=a[E];for(let A=b;A<p.i0;++A)S.rem(T,s[A],e);for(let A=w;A<p.i1;++A)S.add(T,s[A],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const Hbt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),qbt=e=>!!e.peers;function Wbt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=jTe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function Gbt(e,t,n,r={},i){const s=e.data(),o=Ybt(i,s),a=o.length,u=Zx(["r","d","op"],"{"+ak(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Kbt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function Ybt(e,t){const n={};return e.forEach(r=>{const i=Hbt(r),s=qbt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});rK(r.name)?a.push(r):u.push(Wbt(r))}),Object.values(n).map(r=>Vbt(t,r.frame,r.peers,r.winOps,iIe(r.aggOps,r.frame[0]!=null?-1:1)))}function Kbt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function Xbt(e){return iK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function EX(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Hl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=Qbt(r),c=e.isGrouped()?e.groups().size:1,f=eS(e,u,s6(r.length,()=>Array(c)));return l.length?Gbt(e,a,n,f,l):Jbt(e,a,n,f),e.create(o)}function Qbt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(Xbt(s)?n:t).push(s)}return[t,n]}function Jbt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function Zbt(e,t,n={}){const r=EX(e,Gu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:rIe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function e_t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const TN=2147483648,t_t=4294967295;class lIe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&TN>>>t}set(t){this._bits[t>>5]|=TN>>>t}clear(t){this._bits[t>>5]&=~(TN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&t_t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=TN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function n_t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new lIe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function r_t(e,t){const n=Gu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=EX(e,n,{drop:!0}).column("p");r=s=>i[s]}return n_t(e,r)}function cIe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Ib(e,r,n),l=Hl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},b=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,T)=>{const A=Hu(w(S,T)),C=Math.min(A.length,s);v(S,C);for(let I=0;I<C;++I)E[m+I]=A[I];b(m,C),m+=C})}else e.scan((w,E)=>{let S=0;const T=u.map(A=>{const C=Hu(A(w,E));return S=Math.min(Math.max(S,C.length),s),C});v(w,S);for(let A=0;A<y;++A){const C=h[A],I=T[A];for(let R=0;R<S;++R)C[m+R]=I[R]}b(m,S),m+=S});return e.create(l.new())}function i_t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Ib(e,r,n);return cIe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Bf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Qa(o)?t.columnName(o):o,Mo(o)?i.set(o,jv(o)):di(o)?Sm(t,o).forEach(s):ga(o)?JCe(i,o):wn(`Invalid ${e} value: ${o+""}`)};return Hu(n).forEach(s),r.preparse&&r.preparse(i),Gu(i,{table:t,...r})}function s_t(e,t,n){return i_t(e,Bf("fold",e,t),n)}function wce(e,t,n,r){const i=n&&n.length;return o_t(i?a_t(e,n,r):e,t,i)}function o_t(e,{names:t,exprs:n,ops:r},i){const s=Ib(e,r,n),o=i?null:Hl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=wf(p)?p:d(h)})}),i?e:e.create(o)}function a_t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=_3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Hl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=_3(o.map((p,m)=>g=>g[m])),h=Zx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Ece(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Ece(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Ece(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function xX(e,{names:t,exprs:n,ops:r}){const i=Hl(),s=e.groups();return s&&aIe(i,s),u_t(t,n,s,eS(e,r),i),e.create(i.new())}function u_t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function l_t(e,t,n={}){if(t=Gu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:wn(`Invalid impute column ${gh(r)}`)),n.expand){const r={preparse:c_t,aggronly:!0},i=Bf("impute",e,n.expand,r),s=xX(e.ungroup(),i);return wce(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return wce(e,t)}function c_t(e){e.forEach((t,n)=>t.field?e.set(n,ATe(t+"")):0)}function f_t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function fIe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function d_t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function h_t(e,t){const n=["i","a","j","b"];return Zx(n,"{"+ak(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function p_t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Hl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=h_t(g,y);if((dr(n)?g_t:m_t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function m_t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function g_t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,T,A,C)=>e(A,C,S,T));const w=d_t(v,m,g),E=p.length;for(let S=0;S<E;++S){const T=p[S],A=w.get(d(T,f));if(A){const C=A.length;for(let I=0;I<C;++I){const R=A[I];b(T,f,v[R],m),y[R]=1}h[S]=1}}}function H3(e,t,n){const r=new Map;Hu(n).forEach((s,o)=>{s=Qa(s)?t.columnName(s):s,Mo(s)?r.set(o,jv(s)):di(s)||ga(s)&&s.expr?r.set(o,s):wn(`Invalid ${e} key value: ${s+""}`)});const i=Gu(r,{table:t,aggregate:!1,window:!1});return _3(i.exprs,!0)}function y_t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function SX(e,t,n){if(n)Mo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=y_t(e.columnNames(),t.columnNames());r.length||wn("Natural join requires shared column names."),n=[r,r]}return n}function dIe(e,t,n,r){return n.length!==r.length&&wn("Mismatched number of join keys"),[H3("join",e,n),H3("join",t,r)]}const v_t={aggregate:!1,window:!1},b_t={...v_t,index:1};function xce(e,t,n,r,i={}){n=SX(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Hu);o=dIe(e,t,a,u),r||(r=__t(e,a,u,i))}else o=Gu({on:n},s).exprs[0],r||(r=[NE(),NE()]);return p_t(e,t,o,w_t(e,t,r,s,i&&i.suffix),i)}function __t(e,t,n,r){const i=[];t.forEach((o,a)=>Mo(o)&&o===n[a]?i.push(o):0);const s=e2e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${gh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,NE()]:[NE(),s]}function w_t(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Bf("join",e,n[0],r)),u--&&(o=Bf("join",t,n[1],b_t)),u--&&(a=Gu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Sce(s.names,l,i[0]||"_1"),i[1]!==""&&Sce(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Gu(n,r)}function Sce(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function E_t(e,t,n,r={}){const i=new lIe(e.totalRows());return(dr(n)?x_t:S_t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function x_t(e,t,n,[r,i]){const s=fIe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function S_t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Tce(e,t,n,r){n=SX(e,t,n);const i=dr(n)?dIe(e,t,...n.map(Hu)):Gu({on:n},{join:[e,t]}).exprs[0];return E_t(e,t,i,r)}function T_t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Hl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=fIe(t,r),c=Zx(["lr","rr","data"],"{"+ak(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Ib(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function A_t(e,t,n,r){return n=SX(e,t,n),T_t(e,t,[H3("lookup",e,n[0]),H3("lookup",t,n[1])],Bf("lookup",t,r))}const az=(e,t)=>e??t;function C_t(e,t,n,r={}){const{keys:i,keyColumn:s}=I_t(e,t,r),o=az(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>eS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(k_t(n,a,e.groups(),u))}function I_t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=az(n.sort,!0),s=az(n.keySeparator,"_"),o=Ib(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=eS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function k_t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Hl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&aIe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function R_t(e,t,n,r){return C_t(e,Bf("fold",e,t),Bf("fold",e,n,{preparse:N_t,aggronly:!0}),r)}function N_t(e){e.forEach((t,n)=>t.field?e.set(n,xTe(t+"")):0)}function P_t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),bX(e,Sm(e,t,n))}function Ace(e,t){return xX(e,Gu(t,{table:e,aggronly:!0,window:!1}))}function D_t(e,t,n,r){return(t?r?$_t:O_t:r?L_t:M_t)(e.length,e,n,r)}function O_t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Hx()|0];return t}function $_t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=uIe(_X).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Hx())];return t}function M_t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Hx();s<e&&(t[s|0]=n[i])}return t}function L_t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Hx())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function F_t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Hx()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function j_t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):D_t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&F_t(u),e.reify(u)}function B_t(e,t,n={}){return j_t(e,U_t(e,t),z_t(e,n.weight),n)}const hIe=e=>t=>e.get(t)||0;function U_t(e,t){return Qa(t)?()=>t:hIe(xX(e,Gu({size:t},{table:e,window:!1})).column("size"))}function z_t(e,t){return t==null?null:(t=Qa(t)?e.columnName(t):t,hIe(Mo(t)?e.column(t):EX(e,Gu({w:t},{table:e}),{drop:!0}).column("w")))}function V_t(e,t){return bX(e,Sm(e,t))}function H_t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Ib(e,r,n),l=Hl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=q_t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function q_t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Hu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function W_t(e,t,n){return H_t(e,Bf("spread",e,t),n)}function G_t(e,t){return e.concat(t).dedupe()}function Y_t(e,t,n){return cIe(e,Bf("unroll",e,t),n&&n.drop?{...n,drop:Bf("unroll",e,n.drop).names}:n)}function K_t(e,t){return e.create({groups:X_t(e,t)})}function X_t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Ib(e,r,n);const o=_3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Q_t(e,t){return K_t(e,Bf("groupby",e,t))}function J_t(e,t){return e.create({order:t})}const Z_t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function ewt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Gu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([b3(p,{index:"a",op:o}),b3(p,{index:"b",op:a})])},window:!1}),l=eS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Z_t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function twt(e,t){return J_t(e,nwt(e,t))}function nwt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ga(o)&&!di(o))for(const a in o)i(o[a]);else i(Qa(o)?jv(s,e.columnName(o)):Mo(o)?jv(s):di(o)?s:wn(`Invalid orderby field: ${s+""}`))}),ewt(e,r)}function rwt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Hl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function iwt(e,t){const n=Hl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?oIe(e,t,r):[sIe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function swt(e){return e.isGrouped()?e.create({groups:null}):e}function owt(e){return e.isOrdered()?e.create({order:null}):e}const awt={__antijoin:(e,t,n)=>Tce(e,t,n,{anti:!0}),__count:(e,t={})=>Ace(e,{[t.as||"count"]:STe()}),__cross:(e,t,n,r)=>xce(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:rwt,__dedupe:Obt,__derive:Zbt,__except:e_t,__filter:r_t,__fold:s_t,__impute:l_t,__intersect:f_t,__join:xce,__lookup:A_t,__pivot:R_t,__relocate:rIe,__rename:P_t,__rollup:Ace,__sample:B_t,__select:V_t,__semijoin:Tce,__spread:W_t,__union:G_t,__unroll:Y_t,__groupby:Q_t,__orderby:twt,__ungroup:swt,__unorder:owt,__reduce:iwt};Object.assign(Np.prototype,awt);function uwt(e,t){return Np.from(e,t)}function vj(e){return T6(e,{escape:!0,toString(){wn("Escaped values can not be serialized.")}})}Np.prototype;function gf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function K0(e){return!!e&&!!e[vi]}function Cm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ywt}(e)||Array.isArray(e)||!!e[Dce]||!!(!((t=e.constructor)===null||t===void 0)&&t[Dce])||TX(e)||AX(e))}function Bv(e,t,n){n===void 0&&(n=!1),tS(e)===0?(n?Object.keys:Nw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function tS(e){var t=e[vi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:TX(e)?2:AX(e)?3:0}function Rw(e,t){return tS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function lwt(e,t){return tS(e)===2?e.get(t):e[t]}function pIe(e,t,n){var r=tS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function mIe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function TX(e){return mwt&&e instanceof Map}function AX(e){return gwt&&e instanceof Set}function w1(e){return e.o||e.t}function CX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=yIe(e);delete t[vi];for(var n=Nw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function IX(e,t){return t===void 0&&(t=!1),kX(e)||K0(e)||!Cm(e)||(tS(e)>1&&(e.set=e.add=e.clear=e.delete=cwt),Object.freeze(e),t&&Bv(e,function(n,r){return IX(r,!0)},!0)),e}function cwt(){gf(2)}function kX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function th(e){var t=fz[e];return t||gf(18,e),t}function fwt(e,t){fz[e]||(fz[e]=t)}function uz(){return C2}function bj(e,t){t&&(th("Patches"),e.u=[],e.s=[],e.v=t)}function q3(e){lz(e),e.p.forEach(dwt),e.p=null}function lz(e){e===C2&&(C2=e.l)}function Cce(e){return C2={p:[],l:C2,h:e,m:!0,_:0}}function dwt(e){var t=e[vi];t.i===0||t.i===1?t.j():t.g=!0}function _j(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||th("ES5").S(t,e,r),r?(n[vi].P&&(q3(t),gf(4)),Cm(e)&&(e=W3(t,e),t.l||G3(t,e)),t.u&&th("Patches").M(n[vi].t,e,t.u,t.s)):e=W3(t,n,[]),q3(t),t.u&&t.v(t.u,t.s),e!==gIe?e:void 0}function W3(e,t,n){if(kX(t))return t;var r=t[vi];if(!r)return Bv(t,function(a,u){return Ice(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return G3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=CX(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Bv(s,function(a,u){return Ice(e,r,i,a,u,n,o)}),G3(e,i,!1),n&&e.u&&th("Patches").N(r,n,e.u,e.s)}return r.o}function Ice(e,t,n,r,i,s,o){if(K0(i)){var a=W3(e,i,s&&t&&t.i!==3&&!Rw(t.R,r)?s.concat(r):void 0);if(pIe(n,r,a),!K0(a))return;e.m=!1}else o&&n.add(i);if(Cm(i)&&!kX(i)){if(!e.h.D&&e._<1)return;W3(e,i),t&&t.A.l||G3(e,i)}}function G3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&IX(t,n)}function wj(e,t){var n=e[vi];return(n?w1(n):e)[t]}function kce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Mg(e){e.P||(e.P=!0,e.l&&Mg(e.l))}function Ej(e){e.o||(e.o=CX(e.t))}function cz(e,t,n){var r=TX(t)?th("MapSet").F(t,n):AX(t)?th("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:uz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=I2;o&&(u=[a],l=oA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):th("ES5").J(t,n);return(n?n.A:uz()).p.push(r),r}function hwt(e){return K0(e)||gf(22,e),function t(n){if(!Cm(n))return n;var r,i=n[vi],s=tS(n);if(i){if(!i.P&&(i.i<4||!th("ES5").K(i)))return i.t;i.I=!0,r=Rce(n,s),i.I=!1}else r=Rce(n,s);return Bv(r,function(o,a){i&&lwt(i.t,o)===a||pIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Rce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return CX(e)}function pwt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[vi];return I2.get(u,s)},set:function(u){var l=this[vi];I2.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][vi];if(!a.P)switch(a.i){case 5:r(a)&&Mg(a);break;case 4:n(a)&&Mg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Nw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==vi){var f=o[c];if(f===void 0&&!Rw(o,c))return!0;var d=a[c],h=d&&d[vi];if(h?h.t!==f:!mIe(d,f))return!0}}var p=!!o[vi];return u.length!==Nw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};fwt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=yIe(f);delete p[vi];for(var m=Nw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:uz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,vi,{value:l,writable:!0}),u},S:function(s,o,a){a?K0(o)&&o[vi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[vi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Bv(d,function(b){b!==vi&&(f[b]!==void 0||Rw(f,b)?h[b]||u(d[b]):(h[b]=!0,Mg(c)))}),Bv(f,function(b){d[b]!==void 0||Rw(d,b)||(h[b]=!1,Mg(c))});else if(p===5){if(r(c)&&(Mg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Nce,C2,RX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",mwt=typeof Map<"u",gwt=typeof Set<"u",Pce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",gIe=RX?Symbol.for("immer-nothing"):((Nce={})["immer-nothing"]=!0,Nce),Dce=RX?Symbol.for("immer-draftable"):"__$immer_draftable",vi=RX?Symbol.for("immer-state"):"__$immer_state",ywt=""+Object.prototype.constructor,Nw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,yIe=Object.getOwnPropertyDescriptors||function(e){var t={};return Nw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},fz={},I2={get:function(e,t){if(t===vi)return e;var n=w1(e);if(!Rw(n,t))return function(i,s,o){var a,u=kce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Cm(r)?r:r===wj(e.t,t)?(Ej(e),e.o[t]=cz(e.A.h,r,e)):r},has:function(e,t){return t in w1(e)},ownKeys:function(e){return Reflect.ownKeys(w1(e))},set:function(e,t,n){var r=kce(w1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=wj(w1(e),t),s=i==null?void 0:i[vi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(mIe(n,i)&&(n!==void 0||Rw(e.t,t)))return!0;Ej(e),Mg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return wj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Ej(e),Mg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=w1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){gf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){gf(12)}},oA={};Bv(I2,function(e,t){oA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),oA.deleteProperty=function(e,t){return oA.set.call(this,e,t,void 0)},oA.set=function(e,t,n){return I2.set.call(this,e[0],t,n,e[0])};var vwt=function(){function e(n){var r=this;this.O=Pce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&gf(6),o!==void 0&&typeof o!="function"&&gf(7),Cm(i)){var c=Cce(r),f=cz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?q3(c):lz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return bj(c,o),_j(m,c)},function(m){throw q3(c),m}):(bj(c,o),_j(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===gIe&&(l=void 0),r.D&&IX(l,!0),o){var h=[],p=[];th("Patches").M(i,l,h,p),o(h,p)}return l}gf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Cm(n)||gf(8),K0(n)&&(n=hwt(n));var r=Cce(this),i=cz(this,n,void 0);return i[vi].C=!0,lz(r),i},t.finishDraft=function(n,r){var i=n&&n[vi],s=i.A;return bj(s,r),_j(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Pce&&gf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=th("Patches").$;return K0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Dl=new vwt,bwt=Dl.produce;Dl.produceWithPatches.bind(Dl);Dl.setAutoFreeze.bind(Dl);Dl.setUseProxies.bind(Dl);Dl.applyPatches.bind(Dl);Dl.createDraft.bind(Dl);Dl.finishDraft.bind(Dl);const vIe=bwt;function k2(e){"@babel/helpers - typeof";return k2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k2(e)}function _wt(e,t){if(k2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(k2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wwt(e){var t=_wt(e,"string");return k2(t)=="symbol"?t:t+""}function Ewt(e,t,n){return(t=wwt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Oce(Object(n),!0).forEach(function(r){Ewt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ea(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Mce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),xj=function(){return Math.random().toString(36).substring(7).split("").join(".")},Y3={INIT:"@@redux/INIT"+xj(),REPLACE:"@@redux/REPLACE"+xj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xj()}};function xwt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function bIe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ea(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ea(1));return n(bIe)(e,t)}if(typeof e!="function")throw new Error(ea(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ea(3));return s}function f(m){if(typeof m!="function")throw new Error(ea(4));if(u)throw new Error(ea(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ea(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!xwt(m))throw new Error(ea(7));if(typeof m.type>"u")throw new Error(ea(8));if(u)throw new Error(ea(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ea(10));i=m,d({type:Y3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ea(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Mce]=function(){return this},m}return d({type:Y3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Mce]=p,r}function Swt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:Y3.INIT});if(typeof r>"u")throw new Error(ea(12));if(typeof n(void 0,{type:Y3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ea(13))})}function Twt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Swt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ea(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function K3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Awt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ea(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=K3.apply(void 0,a)(i.dispatch),$ce($ce({},i),{},{dispatch:s})}}}function _Ie(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var dz=_Ie();dz.withExtraArgument=_Ie;var wIe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Uv=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Cwt=Object.defineProperty,Iwt=Object.defineProperties,kwt=Object.getOwnPropertyDescriptors,Lce=Object.getOwnPropertySymbols,Rwt=Object.prototype.hasOwnProperty,Nwt=Object.prototype.propertyIsEnumerable,Fce=function(e,t,n){return t in e?Cwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g0=function(e,t){for(var n in t||(t={}))Rwt.call(t,n)&&Fce(e,n,t[n]);if(Lce)for(var r=0,i=Lce(t);r<i.length;r++){var n=i[r];Nwt.call(t,n)&&Fce(e,n,t[n])}return e},Sj=function(e,t){return Iwt(e,kwt(t))},lk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},Pwt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?K3:K3.apply(null,arguments)};function EIe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Dwt=function(e){return e&&typeof e.match=="function"};function nh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return g0(g0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Owt(e){return EIe(e)&&"type"in e}var $wt=function(e){wIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Uv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Uv([void 0],n.concat(this))))},t}(Array),Mwt=function(e){wIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Uv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Uv([void 0],n.concat(this))))},t}(Array);function hz(e){return Cm(e)?vIe(e,function(){}):e}function Lwt(e){return typeof e=="boolean"}function Fwt(){return function(t){return jwt(t)}}function jwt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new $wt;return n&&(Lwt(n)?r.push(dz):r.push(dz.withExtraArgument(n.extraArgument))),r}var Bwt=!0;function Uwt(e){var t=Fwt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(EIe(i))h=Twt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Awt.apply(void 0,p),g=K3;u&&(g=Pwt(g0({trace:!Bwt},typeof u=="object"&&u)));var y=new Mwt(m),v=y;Array.isArray(d)?v=Uv([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return bIe(h,c,b)}function xIe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function zwt(e){return typeof e=="function"}function Vwt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?xIe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(zwt(e))u=function(){return hz(e())};else{var l=hz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Uv([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(K0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Cm(p))return vIe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function Hwt(e,t){return e+"/"+t}function qwt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:hz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Hwt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?nh(d,p):nh(d)});function u(){var c=typeof e.extraReducers=="function"?xIe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=g0(g0({},d),o);return Vwt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Wwt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SIe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Wwt[Math.random()*64|0];return t},Gwt=["name","message","stack","code"],Tj=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),jce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Ywt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Gwt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=nh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Sj(g0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=nh(t+"/pending",function(l,c,f){return{payload:void 0,meta:Sj(g0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=nh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Ywt)(l||"Rejected"),meta:Sj(g0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):SIe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return lk(this,null,function(){var v,b,w,E,S,T,A;return uk(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Xwt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new Tj(I,R)},fulfillWithValue:function(I,R){return new jce(I,R)}})).then(function(I){if(I instanceof Tj)throw I;return I instanceof jce?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return T=C.sent(),w=T instanceof Tj?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(Kwt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Kwt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Xwt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Qwt=function(e,t){return Dwt(e)?e.match(t):e(t)};function Bce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Qwt(r,n)})}}var NX=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},pz=function(){},TIe=function(e,t){return t===void 0&&(t=pz),e.catch(t),e},AIe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Pw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Jwt="task",CIe="listener",IIe="completed",PX="cancelled",Zwt="task-"+PX,eEt="task-"+IIe,kIe=CIe+"-"+PX,tEt=CIe+"-"+IIe,A6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Jwt+" "+PX+" (reason: "+t+")"}return e}(),Dw=function(e){if(e.aborted)throw new A6(e.reason)};function RIe(e,t){var n=pz;return new Promise(function(r,i){var s=function(){return i(new A6(e.reason))};if(e.aborted){s();return}n=AIe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=pz})}var nEt=function(e,t){return lk(void 0,null,function(){var n,r;return uk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof A6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},X3=function(e){return function(t){return TIe(RIe(e,t).then(function(n){return Dw(e),n}))}},NIe=function(e){var t=X3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},rEt=Object.assign,Uce={},ck="listenerMiddleware",iEt=function(e,t){var n=function(r){return AIe(e,function(){return Pw(r,e.reason)})};return function(r,i){NX(r,"taskExecutor");var s=new AbortController;n(s);var o=nEt(function(){return lk(void 0,null,function(){var a;return uk(this,function(u){switch(u.label){case 0:return Dw(e),Dw(s.signal),[4,r({pause:X3(s.signal),delay:NIe(s.signal),signal:s.signal})];case 1:return a=u.sent(),Dw(s.signal),[2,a]}})})},function(){return Pw(s,eEt)});return i!=null&&i.autoJoin&&t.push(o),{result:X3(e)(o),cancel:function(){Pw(s,Zwt)}}}},sEt=function(e,t){var n=function(r,i){return lk(void 0,null,function(){var s,o,a,u;return uk(this,function(l){switch(l.label){case 0:Dw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,RIe(t,Promise.race(a))];case 2:return u=l.sent(),Dw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return TIe(n(r,i))}},PIe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=nh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return NX(s,"options.listener"),{predicate:i,type:t,effect:s}},oEt=function(e){var t=PIe(e),n=t.type,r=t.predicate,i=t.effect,s=SIe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},mz=function(e){e.pending.forEach(function(t){Pw(t,kIe)})},aEt=function(e){return function(){e.forEach(mz),e.clear()}},zce=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},uEt=nh(ck+"/add"),lEt=nh(ck+"/removeAll"),cEt=nh(ck+"/remove"),fEt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Uv([ck+"/error"],e))};function dEt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?fEt:i;NX(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&mz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=oEt(h)),o(p)},l=function(h){var p=PIe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&mz(v)),!!v},c=function(h,p,m,g){return lk(t,null,function(){var y,v,b,w;return uk(this,function(E){switch(E.label){case 0:y=new AbortController,v=sEt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,rEt({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:NIe(y.signal),pause:X3(y.signal),extra:r,signal:y.signal,fork:iEt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,A){S!==y&&(Pw(S,kIe),A.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof A6||zce(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),Pw(y,tEt),h.pending.delete(y),[7];case 6:return[2]}})})},f=aEt(n),d=function(h){return function(p){return function(m){if(!Owt(m))return p(m);if(uEt.match(m))return u(m.payload);if(lEt.match(m)){f();return}if(cEt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Uce)throw new Error(ck+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var T=S[E],A=!1;try{A=T.predicate(m,b,g)}catch(C){A=!1,zce(s,C,{raisedBy:"predicate"})}A&&c(T,m,h,y)}}finally{g=Uce}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Vce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);pwt();function hEt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let AN;const pEt=new Uint8Array(16);function mEt(){if(!AN&&(AN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!AN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return AN(pEt)}const mo=[];for(let e=0;e<256;++e)mo.push((e+256).toString(16).slice(1));function gEt(e,t=0){return(mo[e[t+0]]+mo[e[t+1]]+mo[e[t+2]]+mo[e[t+3]]+"-"+mo[e[t+4]]+mo[e[t+5]]+"-"+mo[e[t+6]]+mo[e[t+7]]+"-"+mo[e[t+8]]+mo[e[t+9]]+"-"+mo[e[t+10]]+mo[e[t+11]]+mo[e[t+12]]+mo[e[t+13]]+mo[e[t+14]]+mo[e[t+15]]).toLowerCase()}const yEt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Hce={randomUUID:yEt};function qce(e,t,n){if(Hce.randomUUID&&!t&&!e)return Hce.randomUUID();e=e||{};const r=e.random||(e.rng||mEt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,gEt(r)}class rh{static get(){let t=qce();for(;this.ids.has(t);)t=qce();return this.ids.set(t,!0),t}}rh.ids=new Map;function ih(e){return"parent"in e}function vEt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:rh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:rh.get(),createdOn:Date.now(),val:r}]:[];return{id:rh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function bEt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:rh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:rh.get(),createdOn:Date.now(),val:s}]:[];return{id:rh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function qi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=IEt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function zv(e){return!!e&&!!e[Ol]}function X0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===kEt}(e)||Array.isArray(e)||!!e[rC]||!!(!((t=e.constructor)===null||t===void 0)&&t[rC])||C6(e)||I6(e))}function OE(e,t,n){n===void 0&&(n=!1),Q0(e)===0?(n?Object.keys:FX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Q0(e){var t=e[Ol];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:C6(e)?2:I6(e)?3:0}function R2(e,t){return Q0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function JP(e,t){return Q0(e)===2?e.get(t):e[t]}function DIe(e,t,n){var r=Q0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function _Et(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function C6(e){return AEt&&e instanceof Map}function I6(e){return CEt&&e instanceof Set}function E1(e){return e.o||e.t}function DX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=REt(e);delete t[Ol];for(var n=FX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function OX(e,t){return t===void 0&&(t=!1),$X(e)||zv(e)||!X0(e)||(Q0(e)>1&&(e.set=e.add=e.clear=e.delete=wEt),Object.freeze(e),t&&OE(e,function(n,r){return OX(r,!0)},!0)),e}function wEt(){qi(2)}function $X(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function sh(e){var t=bz[e];return t||qi(18,e),t}function EEt(e,t){bz[e]||(bz[e]=t)}function Wce(){return{}.NODE_ENV==="production"||$E||qi(0),$E}function Aj(e,t){t&&(sh("Patches"),e.u=[],e.s=[],e.v=t)}function Q3(e){gz(e),e.p.forEach(xEt),e.p=null}function gz(e){e===$E&&($E=e.l)}function Gce(e){return $E={p:[],l:$E,h:e,m:!0,_:0}}function xEt(e){var t=e[Ol];t.i===0||t.i===1?t.j():t.O=!0}function Cj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||sh("ES5").S(t,e,r),r?(n[Ol].P&&(Q3(t),qi(4)),X0(e)&&(e=J3(t,e),t.l||Z3(t,e)),t.u&&sh("Patches").M(n[Ol].t,e,t.u,t.s)):e=J3(t,n,[]),Q3(t),t.u&&t.v(t.u,t.s),e!==LX?e:void 0}function J3(e,t,n){if($X(t))return t;var r=t[Ol];if(!r)return OE(t,function(s,o){return Yce(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Z3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=DX(r.k):r.o;OE(r.i===3?new Set(i):i,function(s,o){return Yce(e,r,i,s,o,n)}),Z3(e,i,!1),n&&e.u&&sh("Patches").R(r,n,e.u,e.s)}return r.o}function Yce(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&qi(5),zv(i)){var o=J3(e,i,s&&t&&t.i!==3&&!R2(t.D,r)?s.concat(r):void 0);if(DIe(n,r,o),!zv(o))return;e.m=!1}if(X0(i)&&!$X(i)){if(!e.h.F&&e._<1)return;J3(e,i),t&&t.A.l||Z3(e,i)}}function Z3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&OX(t,n)}function Ij(e,t){var n=e[Ol];return(n?E1(n):e)[t]}function Kce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function yz(e){e.P||(e.P=!0,e.l&&yz(e.l))}function kj(e){e.o||(e.o=DX(e.t))}function vz(e,t,n){var r=C6(t)?sh("MapSet").N(t,n):I6(t)?sh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Wce(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=_z;o&&(u=[a],l=aA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):sh("ES5").J(t,n);return(n?n.A:Wce()).p.push(r),r}function SEt(e){return zv(e)||qi(22,e),function t(n){if(!X0(n))return n;var r,i=n[Ol],s=Q0(n);if(i){if(!i.P&&(i.i<4||!sh("ES5").K(i)))return i.t;i.I=!0,r=Xce(n,s),i.I=!1}else r=Xce(n,s);return OE(r,function(o,a){i&&JP(i.t,o)===a||DIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Xce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return DX(e)}function TEt(){function e(r){if(!X0(r))return r;if(Array.isArray(r))return r.map(e);if(C6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(I6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return R2(r,rC)&&(i[rC]=r[rC]),i}function t(r){return zv(r)?e(r):r}var n="add";EEt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Q0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||qi(24),typeof u=="function"&&f==="prototype"&&qi(24),typeof(u=JP(u,f))!="object"&&qi(15,o.join("/"))}var d=Q0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:qi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:qi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;OE(a.D,function(h,p){var m=JP(f,h),g=JP(d,h),y=p?R2(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===LX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Qce,$E,MX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",AEt=typeof Map<"u",CEt=typeof Set<"u",Jce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",LX=MX?Symbol.for("immer-nothing"):((Qce={})["immer-nothing"]=!0,Qce),rC=MX?Symbol.for("immer-draftable"):"__$immer_draftable",Ol=MX?Symbol.for("immer-state"):"__$immer_state",IEt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},kEt=""+Object.prototype.constructor,FX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,REt=Object.getOwnPropertyDescriptors||function(e){var t={};return FX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},bz={},_z={get:function(e,t){if(t===Ol)return e;var n=E1(e);if(!R2(n,t))return function(i,s,o){var a,u=Kce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!X0(r)?r:r===Ij(e.t,t)?(kj(e),e.o[t]=vz(e.A.h,r,e)):r},has:function(e,t){return t in E1(e)},ownKeys:function(e){return Reflect.ownKeys(E1(e))},set:function(e,t,n){var r=Kce(E1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Ij(E1(e),t),s=i==null?void 0:i[Ol];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(_Et(n,i)&&(n!==void 0||R2(e.t,t)))return!0;kj(e),yz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Ij(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,kj(e),yz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=E1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){qi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){qi(12)}},aA={};OE(_z,function(e,t){aA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),aA.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&qi(13),aA.set.call(this,e,t,void 0)},aA.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&qi(14),_z.set.call(this,e[0],t,n,e[0])};var NEt=function(){function e(n){var r=this;this.g=Jce,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&qi(6),o!==void 0&&typeof o!="function"&&qi(7),X0(i)){var c=Gce(r),f=vz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?Q3(c):gz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Aj(c,o),Cj(m,c)},function(m){throw Q3(c),m}):(Aj(c,o),Cj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===LX&&(l=void 0),r.F&&OX(l,!0),o){var h=[],p=[];sh("Patches").M(i,l,h,p),o(h,p)}return l}qi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){X0(n)||qi(8),zv(n)&&(n=SEt(n));var r=Gce(this),i=vz(this,n,void 0);return i[Ol].C=!0,gz(r),i},t.finishDraft=function(n,r){var i=n&&n[Ol];({}).NODE_ENV!=="production"&&(i&&i.C||qi(9),i.I&&qi(10));var s=i.A;return Aj(s,r),Cj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Jce&&qi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=sh("Patches").$;return zv(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),$l=new NEt,PEt=$l.produce;$l.produceWithPatches.bind($l);$l.setAutoFreeze.bind($l);$l.setUseProxies.bind($l);$l.applyPatches.bind($l);$l.createDraft.bind($l);$l.finishDraft.bind($l);function DEt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=vEt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return qwt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:rh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:rh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function OEt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=DEt(e),s=dEt();s.startListening({matcher:Bce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Bce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Uwt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:rh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var $Et=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MEt=Object.prototype.hasOwnProperty;function wz(e,t){return MEt.call(e,t)}function Ez(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)wz(e,i)&&r.push(i);return r}function Ru(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function xz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function x1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function OIe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Sz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Sz(e[t]))return!0}else if(typeof e=="object"){for(var r=Ez(e),i=r.length,s=0;s<i;s++)if(Sz(e[r[s]]))return!0}}return!1}function Zce(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var $Ie=function(e){$Et(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Zce(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Zce(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=$Ie,LEt=Ru,nw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=e$(n,this.path);r&&(r=Ru(r));var i=hv(n,{op:"remove",path:this.from}).removed;return hv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=e$(n,this.from);return hv(n,{op:"add",path:this.path,value:Ru(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:N2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},FEt={add:function(e,t,n){return xz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:nw.move,copy:nw.copy,test:nw.test,_get:nw._get};function e$(e,t){if(t=="")return e;var n={op:"_get",path:t};return hv(e,n),n.value}function hv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):t$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=e$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=N2(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ru(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=t$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=OIe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!xz(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);xz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=FEt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=nw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function k6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ru(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=hv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function jEt(e,t,n){var r=hv(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function t$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(nw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Sz(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=MIe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function MIe(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)k6(Ru(t),Ru(e),n||!0);else{n=n||t$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function N2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!N2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!N2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const BEt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:N2,applyOperation:hv,applyPatch:k6,applyReducer:jEt,deepClone:LEt,getValueByPointer:e$,validate:MIe,validator:t$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var jX=new WeakMap,UEt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),zEt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function VEt(e){return jX.get(e)}function HEt(e,t){return e.observers.get(t)}function qEt(e,t){e.observers.delete(t.callback)}function WEt(e,t){t.unobserve()}function GEt(e,t){var n=[],r,i=VEt(e);if(!i)i=new UEt(e),jX.set(e,i);else{var s=HEt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ru(e),t){r.callback=t,r.next=null;var o=function(){Tz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Tz(r),clearTimeout(r.next),qEt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new zEt(t,r)),r}function Tz(e,t){t===void 0&&(t=!1);var n=jX.get(e.object);BX(n.value,e.object,e.patches,"",t),e.patches.length&&k6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function BX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Ez(t),o=Ez(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(wz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?BX(c,f,n,r+"/"+x1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+x1(l),value:Ru(c)}),n.push({op:"replace",path:r+"/"+x1(l),value:Ru(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+x1(l),value:Ru(c)}),n.push({op:"remove",path:r+"/"+x1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!wz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+x1(l),value:Ru(t[l])})}}}function LIe(e,t,n){n===void 0&&(n=!1);var r=[];return BX(e,t,r,"",n),r}const YEt=Object.freeze(Object.defineProperty({__proto__:null,compare:LIe,generate:Tz,observe:GEt,unobserve:WEt},Symbol.toStringTag,{value:"Module"}));Object.assign({},BEt,YEt,{JsonPatchError:$Ie,deepClone:Ru,escapePathComponent:x1,unescapePathComponent:OIe});var uA=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(uA||{});function ZP(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=FIe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=ZP(i,t);return k6(a,Ru(o),!0,!1).newDocument}function KEt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function UX({registry:e,initialState:t}){let n=!1;const r=hEt(),i=OEt(t);function s(c){return i.backend.nodes[c]}r.listen(uA.TRAVERSAL_START,()=>{n=!0}),r.listen(uA.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return ZP(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=ZP(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=LIe(y,f);if(KEt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=bEt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=ZP(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(uA.TRAVERSAL_START);const f=FIe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);QEt(p,m)?ih(p)&&d.push(...p.sideEffects.undo):ih(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(uA.TRAVERSAL_END)},undo(){const{current:c}=i;return ih(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return jIe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function XEt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;ih(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)ih(r)&&(r=n[r.parent]),ih(i)&&(i=n[i.parent]);return r.id}function FIe(e,t,n){const r=XEt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),ih(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),ih(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function QEt(e,t){if(ih(e)&&e.parent===t.id)return!0;if(ih(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function jIe(e,t){return{...e,children:e.children.map(n=>jIe(t[n],t)),name:`${e.label}`}}TEt();function JEt(e){return e.length===2?PEt(e):e}class fk{static create(){return new fk}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:JEt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),nh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var ZEt="Expected a function",efe=NaN,ext="[object Symbol]",txt=/^\s+|\s+$/g,nxt=/^[-+]0x[0-9a-f]+$/i,rxt=/^0b[01]+$/i,ixt=/^0o[0-7]+$/i,sxt=parseInt,oxt=typeof Js=="object"&&Js&&Js.Object===Object&&Js,axt=typeof self=="object"&&self&&self.Object===Object&&self,uxt=oxt||axt||Function("return this")(),lxt=Object.prototype,cxt=lxt.toString,fxt=Math.max,dxt=Math.min,Rj=function(){return uxt.Date.now()};function hxt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(ZEt);t=tfe(t)||0,Az(n)&&(c=!!n.leading,f="maxWait"in n,s=f?fxt(tfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,A=i;return r=i=void 0,l=S,o=e.apply(A,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,A=S-l,C=t-T;return f?dxt(C,s-A):C}function g(S){var T=S-u,A=S-l;return u===void 0||T>=t||T<0||f&&A>=s}function y(){var S=Rj();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Rj())}function E(){var S=Rj(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function Az(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function pxt(e){return!!e&&typeof e=="object"}function mxt(e){return typeof e=="symbol"||pxt(e)&&cxt.call(e)==ext}function tfe(e){if(typeof e=="number")return e;if(mxt(e))return efe;if(Az(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Az(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(txt,"");var n=rxt.test(e);return n||ixt.test(e)?sxt(e.slice(2),n?2:8):nxt.test(e)?efe:+e}var gxt=hxt;const md=Ul(gxt);function BIe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>jx(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(dm,{children:_.jsx(Os,{gap:3,children:_.jsx(st,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const yxt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:BIe},Symbol.toStringTag,{value:"Module"})),Nj=15;function UIe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=ps("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<Nj&&Math.abs(t(g[r.y])-p[1])<Nj);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:Nj,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const vxt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:UIe},Symbol.toStringTag,{value:"Module"})),pi={top:15,left:100,right:15,bottom:70};function Cz({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=gw(),[c]=gw(),[f]=gw(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-pi.left-pi.right,[l]),m=N.useMemo(()=>u-pi.top-pi.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Ux(eTe).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=N.useMemo(()=>{const I=s.map(L=>+L[i.x]).filter(L=>L!==null),[R,M]=Bae(I),P=s.map(L=>+L[i.y]).filter(L=>L!==null),[O,F]=Bae(P);return{xMin:R,xMax:M,yMin:O,yMax:F}},[s,i.x,i.y]),E=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?YSe([pi.left,p+pi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):bm([pi.left,p+pi.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=w-v;return m<=0?null:bm([m+pi.top,pi.top]).domain([v-I/10,w+I/10]).nice()},[m,w,v]),T=N.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const I=hlt().extent([[pi.left,pi.top+m-5],[pi.left+p,pi.top+m+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],E,S,M.mode)}),R=plt().extent([[pi.left-5,pi.top],[pi.left+5,pi.top+m]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],E,S,M.mode)});return c.current&&f.current&&(ps(f.current).call(R),ps(c.current).call(I),t.hasBrush||(ps(f.current).call(R.move,[S(w),S(v)]),ps(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{ps(f.current).call(R.move,[S(w),S(v)]),ps(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const I=mlt().extent([[pi.left,pi.top],[pi.left+p,pi.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],E,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(ps(a.current).call(I.move,null),e(null))});return ps(a.current).call(I),()=>{ps(a.current).call(I.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(w)],[E(b),S(v)]],E,S,null),()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),C=N.useMemo(()=>!E||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const M=i.dataType==="date"?E(new Date(I[i.x])):E(I[i.x]);return _.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:M,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return N.useEffect(()=>{r==="Axis Selection"&&sat(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Mp,{children:[_.jsxs(Os,{children:[_.jsx(Rn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(_G,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Os,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?_.jsxs("g",{children:[_.jsx(BIe,{yScale:S,label:i.y,horizontalPosition:pi.left,xRange:E.range()}),_.jsx(eK,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+pi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:E(I)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&S&&r==="Paintbrush Selection"?_.jsx(UIe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?_.jsxs(Mp,{style:{flexGrow:1},gap:50,children:[_.jsxs(Mp,{gap:0,children:[_.jsx(st,{children:i.x}),_.jsx(yO,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[E(I[0]),t.y1],[E(I[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(I=>({value:I,label:I})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Mp,{gap:0,children:[_.jsx(st,{children:i.y}),_.jsx(yO,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const bxt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Cz,default:Cz},Symbol.toStringTag,{value:"Module"}));function nfe({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{d7(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?uwt(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=fk.create(),y=g.register("brush",(S,T)=>(S.all={brush:T},S)),v=g.register("brushMove",(S,T)=>(S.all={brush:T},S)),b=g.register("brushResize",(S,T)=>(S.all={brush:T},S)),w=g.register("brushClear",(S,T)=>(S.all={brush:T},S)),E=UX({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>md(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const R=new Set(w);C=u.filter(vj(M=>R.has(M[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(vj(R=>new Date(R[e.x])>=new Date(E)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=T&&R[e.y]<=A)):C=u.filter(vj(R=>R[e.x]>=E&&R[e.x]<=S&&R[e.y]>=T&&R[e.y]<=A));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?_.jsxs(Mp,{gap:"xs",children:[_.jsx(Cz,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(F7,{data:o,parameters:e,barsTable:p})]}):_.jsx(Bm,{})}const _xt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:nfe,default:nfe},Symbol.toStringTag,{value:"Module"})),wxt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),rfe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},nS=e=>{const t=N.useRef(null),n=rfe(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=rfe({...n,width:n.width||r,height:n.height||s});return[t,a]},Ext=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:nS},Symbol.toStringTag,{value:"Module"}));function zIe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const xxt=Object.freeze(Object.defineProperty({__proto__:null,Bars:zIe},Symbol.toStringTag,{value:"Module"}));function zX({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=bm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const Sxt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:zX},Symbol.toStringTag,{value:"Module"}));function VIe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=KI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const Txt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:VIe},Symbol.toStringTag,{value:"Module"})),Axt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function Cxt({parameters:e}){const[n,r]=nS(Axt),i=KI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=bm().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(VIe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(zX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(zIe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const Ixt=Object.freeze(Object.defineProperty({__proto__:null,default:Cxt},Symbol.toStringTag,{value:"Module"}));function HIe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const kxt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:HIe},Symbol.toStringTag,{value:"Module"}));function VX({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const Rxt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:VX},Symbol.toStringTag,{value:"Module"})),Nxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},Pxt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=TSe().size([t-10,n-10]).padding(1.5),o=qL(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},Dxt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function Oxt({parameters:e}){const[t,n]=nS(Nxt),r=Pxt(e,n.width,n.height),i=Dxt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(HIe,{data:r}),_.jsx(VX,{positions:i})]})})})}const $xt=Object.freeze(Object.defineProperty({__proto__:null,default:Oxt},Symbol.toStringTag,{value:"Module"}));function qIe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const Mxt=Object.freeze(Object.defineProperty({__proto__:null,Slices:qIe},Symbol.toStringTag,{value:"Module"}));function WIe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const Lxt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:WIe},Symbol.toStringTag,{value:"Module"})),Fxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},jxt=Opt().value(e=>e.value),fT=150;function Bxt({parameters:e}){const[t,n]=nS(Fxt),r=jxt(e.data),i=r.map(o=>L7().innerRadius(0).outerRadius(fT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>L7().outerRadius(fT+10).innerRadius(fT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+fT,n.marginTop+fT].join(",")})`,children:[_.jsx(qIe,{arcs:i}),_.jsx(WIe,{positions:s})]})})})}const Uxt=Object.freeze(Object.defineProperty({__proto__:null,default:Bxt},Symbol.toStringTag,{value:"Module"}));function GIe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=bm().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const zxt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:GIe},Symbol.toStringTag,{value:"Module"}));function YIe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const Vxt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:YIe},Symbol.toStringTag,{value:"Module"})),Hxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function qxt({parameters:e}){const[n,r]=nS(Hxt),i=KI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=bm().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return nmt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(GIe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(zX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(YIe,{data:c,barWidth:f,yScale:s}),_.jsx(VX,{positions:d})]})]})})})}const Wxt=Object.freeze(Object.defineProperty({__proto__:null,default:qxt},Symbol.toStringTag,{value:"Module"})),Gxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function Yxt({parameters:e,setAnswer:t}){const[n,r]=nS(Gxt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(300),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=fk.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=UX({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=ps("#movingCircle"),g=ps("#clickAccuracySvg"),y=JU(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;ps(n.current).select("circle").transition().duration(y).ease(Zut).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(Ee,{children:["Adjust speed (px/s):",_.jsx(gL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const Kxt=Object.freeze(Object.defineProperty({__proto__:null,default:Yxt},Symbol.toStringTag,{value:"Module"}));function ife({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function Xxt({parameters:e,setAnswer:t}){const n=Wm(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=vEe(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=b9e([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(Zs,{children:[_.jsxs(Zs.Col,{span:2,children:[_.jsx(ife,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(Rn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(doe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(Zs.Col,{span:2,children:[_.jsx(ife,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(Rn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(doe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const Qxt=Object.freeze(Object.defineProperty({__proto__:null,default:Xxt},Symbol.toStringTag,{value:"Module"})),Jxt="_badge_1xjx6_1",Zxt="_sourceItem_1xjx6_10",eSt="_sourceItemBadge_1xjx6_14",HX={badge:Jxt,sourceItem:Zxt,sourceItemBadge:eSt};function tSt({source:e,isActive:t,onActiveRefChange:n}){const r=Un.useRef(null);return N.useEffect(()=>{var i;t&&((i=r.current)==null||i.scrollIntoView({behavior:"smooth",block:"center"}),n(r.current))},[e.id,t,n]),_.jsx(st,{className:HX.sourceItem,ref:r,component:"span",px:5,children:_.jsx(st,{component:"span",bg:t?"blue.3":"transparent",dangerouslySetInnerHTML:{__html:e.text}})})}const nSt=Un.memo(tSt);function KIe({sourceList:e,activeSourceId:t,onSourceBadgePositionChange:n}){var c;const r=Un.useRef(null),i=Un.useRef(null),[s,o]=Un.useState(0),[a,u]=Un.useState(0);N.useEffect(()=>{if(r.current){const f=r.current,d=()=>{var h,p;u((f==null?void 0:f.getBoundingClientRect().left)||0),o(((h=i.current)==null?void 0:h.getBoundingClientRect().top)||0),n((f==null?void 0:f.getBoundingClientRect().left)||0,((p=i.current)==null?void 0:p.getBoundingClientRect().top)||0)};return r.current.addEventListener("scroll",d),()=>{f.removeEventListener("scroll",d)}}return()=>{}},[r,n]);const l=N.useCallback(f=>{i.current=f},[]);return _.jsxs(Lm,{style:{height:"calc(100vh - 110px)"},viewportRef:r,children:[_.jsx(ki,{order:2,children:"Source Document"}),e.map((f,d)=>_.jsx(nSt,{source:f,isActive:f.id===t,onActiveRefChange:l},d)),t&&_.jsxs(_.Fragment,{children:[_.jsx(Jd,{className:HX.sourceItemBadge,color:"blue.5",style:{position:"fixed",left:a-10,top:s,transform:"translate(-100%, 0)"},children:t},t),_.jsx("div",{style:{position:"fixed",left:a-10,top:s+16,backgroundColor:"var(--mantine-color-blue-5)",height:2,width:((c=r.current)==null?void 0:c.clientWidth)||0}})]})]})}const rSt=Object.freeze(Object.defineProperty({__proto__:null,default:KIe},Symbol.toStringTag,{value:"Module"}));function iSt({sentence:e,src:t,idx:n,onSourceClick:r,activeSourceId:i}){const s=Un.useRef(null);return _.jsxs(Un.Fragment,{children:[_.jsx(Jd,{ref:s,className:HX.badge,onClick:()=>{r(s.current,e.id,t)},style:{cursor:"pointer"},color:i===t?"blue.5":"gray.5",children:t}),n<e.sources.length-1&&", "]},n)}function XIe({sentences:e,onSourceClick:t,activeSourceId:n,onSummaryBadgePositionChange:r}){const i=Un.useRef(null),s=Un.useRef(null),[o,a]=Un.useState(0),[u,l]=Un.useState(0),[c,f]=Un.useState(0);N.useEffect(()=>{if(i.current){const h=i.current,p=()=>{var m,g,y,v;a(((m=s.current)==null?void 0:m.getBoundingClientRect().top)||0),f(((g=s.current)==null?void 0:g.getBoundingClientRect().left)||0),l(((y=i.current)==null?void 0:y.getBoundingClientRect().right)||0),r(((v=s.current)==null?void 0:v.getBoundingClientRect().top)||0)};return i.current.addEventListener("scroll",p),()=>{h.removeEventListener("scroll",p)}}return()=>{}},[i,r]);const d=e.map((h,p)=>{const m=/^(.*?)([.?!])?$/,g=h.text.match(m),y=g?g[1]:h.text,v=g?g[2]:"",b=(w,E,S)=>{var T;t(E,S),r((w==null?void 0:w.getBoundingClientRect().top)||0),s.current=w,a((w==null?void 0:w.getBoundingClientRect().top)||0),f((w==null?void 0:w.getBoundingClientRect().left)||0),l(((T=i.current)==null?void 0:T.getBoundingClientRect().right)||0)};return _.jsxs(Un.Fragment,{children:[y," ",h.sources.length>0&&_.jsxs("span",{children:["[",h.sources.map((w,E)=>_.jsx(iSt,{sentence:h,src:w,idx:E,onSourceClick:b,activeSourceId:n},E)),"]"]}),v," "]},p)});return _.jsxs(Lm,{style:{height:"calc(100vh - 110px)"},viewportRef:i,children:[_.jsx(ki,{order:2,mb:16,children:"LLM-Generated Summary"}),_.jsx(st,{children:d}),_.jsx("div",{style:{position:"fixed",top:o+18,left:c+5,backgroundColor:"var(--mantine-color-blue-5)",height:2,width:u-c+35}})]})}const sSt=Object.freeze(Object.defineProperty({__proto__:null,default:XIe},Symbol.toStringTag,{value:"Module"}));function oSt({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState([]),[o,a]=N.useState([]),[u,l]=N.useState(0),[c,f]=N.useState(0),[d,h]=N.useState(0),{actions:p,trrack:m}=N.useMemo(()=>{const b=fk.create(),w=b.register("mouseHover",(S,T)=>(S.activeSummaryId=T.summaryId,S.activeSourceId=T.sourceId,S)),E=UX({registry:b,initialState:{activeSummaryId:null,activeSourceId:null}});return{actions:{mouseHoverAction:w},trrack:E}},[]);N.useEffect(()=>{d7(`./data/${e.datasetSummary}.csv`).then(b=>{const w=b.map(E=>({id:String(E.id),text:E.text??"",sources:(E.sources??"").split(",").map(S=>S.trim())}));s(w)})},[e]),N.useEffect(()=>{d7(`./data/${e.datasetSource}.csv`).then(b=>{const w=b.map(E=>({id:String(E.id),text:E.text??"",sources:(E.sources??"").split(",").map(S=>S.trim())}));a(w)})},[e]),N.useEffect(()=>{},[]);const g=(b,w)=>{m.apply("Clicked",p.mouseHoverAction({summaryId:b,sourceId:w})),t({status:!0,provenanceGraph:m.graph.backend,answers:{}}),r(w)},y=b=>{l(b)},v=(b,w)=>{f(w),h(b)};return _.jsxs(_.Fragment,{children:[_.jsxs(Zs,{gutter:50,children:[_.jsx(Zs.Col,{span:6,children:_.jsx(XIe,{sentences:i,onSummaryBadgePositionChange:y,onSourceClick:g,activeSourceId:n})}),_.jsx(Zs.Col,{span:6,children:_.jsx(KIe,{sourceList:o,onSourceBadgePositionChange:v,activeSourceId:n})})]}),n&&_.jsx("div",{style:{position:"fixed",top:(u>c?c:u)+18,left:d-10,width:2,height:Math.abs(u-c)-(u>c?-2:2),backgroundColor:"var(--mantine-color-blue-5)"}})]})}const aSt=Object.freeze(Object.defineProperty({__proto__:null,default:oSt},Symbol.toStringTag,{value:"Module"})),uSt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),sfe=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":smt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":_xt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":vxt,"../public/demo-brush-interactions/assets/Scatter.tsx":bxt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":rmt,"../public/demo-brush-interactions/assets/YAxis.tsx":yxt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":imt,"../public/demo-brush-interactions/assets/types.ts":wxt,"../public/demo-cleveland/assets/BarChart.tsx":Ixt,"../public/demo-cleveland/assets/BubbleChart.tsx":$xt,"../public/demo-cleveland/assets/PieChart.tsx":Uxt,"../public/demo-cleveland/assets/StackedBarChart.tsx":Wxt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":xxt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":kxt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":Rxt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":zxt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":Sxt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":Txt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":Mxt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":Lxt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":Vxt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":Ext,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":Kxt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":Qxt,"../public/sumsifter/Source.tsx":rSt,"../public/sumsifter/Summary.tsx":sSt,"../public/sumsifter/SummaryApp.tsx":aSt,"../public/sumsifter/types.ts":uSt});function lSt({currentConfig:e}){const t=qm(),n=Wm(),r=`../public/${e.path}`,i=r in sfe?sfe[r].default:null,s=jh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Fh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(Nv,{path:e.path})})}function cSt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await dY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ga,{text:t}):_.jsx(Nv,{path:e.path})}const fSt={},dSt=Object.freeze(Object.defineProperty({__proto__:null,default:fSt},Symbol.toStringTag,{value:"Module"})),hSt=M5e(dSt);var pSt=hSt;function mSt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function gSt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function ySt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function vSt(e){return e.__COMMENTS__}function bSt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var R6={EOL:pSt.EOL||`
`,tryParseNumber:mSt,createComment:gSt,removeComment:ySt,getComment:vSt,forceComment:bSt},_St="3.2.1";function wSt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return ofe}else if(e.length===0)return ofe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return xSt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),ESt.bind(null,n)}function ESt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function ofe(){}function xSt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function QIe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}QIe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function JIe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}JIe.description="parse hexadecimal numbers prefixed with 0x";function ZIe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}ZIe.description="support ISO dates";var qX={loadDsf:wSt,std:{math:QIe,hex:JIe,date:ZIe}},SSt=function(e,t){var n=R6,r=qX,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(O){return O==="{"||O==="}"||O==="["||O==="]"||O===","||O===":"}function d(O){var F,L=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,L++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error(O+" at line "+B+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(O){return i.charAt(s+O)}function m(O){for(var F="",L=o;h();){if(o===L)return h(),O&&L==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),D;o>="0"&&o<="9"?D=H-48:o>="a"&&o<="f"?D=H-97+10:o>="A"&&o<="F"?D=H-65+10:d("Bad \\u char "+o),B=B*16+D}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var O="",F=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function U(){for(var H=L;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return O.slice(-1)===`
`&&(O=O.slice(0,-1)),O;continue}else for(;F>0;)O+="'",F--;o===`
`?(O+=`
`,h(),U()):(o!=="\r"&&(O+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var O="",F=s,L=-1;;){if(o===":")return O?L>=0&&L!==O.length&&(s=F+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),O;o<=" "?o?L<0&&(L=O.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):O+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var O=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=O[0];switch(L){case"f":if(O.trim()==="false")return!1;break;case"n":if(O.trim()==="null")return null;break;case"t":if(O.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber(O);if(B!==void 0)return B}}if(F){O=O.trim();var U=l(O);return U!==void 0?U:O}}O+=o}}function w(O,F){var L;for(O--,L=s-2;L>O&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr(O,L-O+1);for(L=0;L<B.length;L++)if(B[L]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E(O){function F(B,U){var H,D,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=F(B[D],U)||W)}return W}function L(B){var U=F(O,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function S(){var O=[],F,L,B;try{if(u&&(F=n.createComment(O,{a:[]})),h(),L=s,v(),F&&(B=w(L,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),O;for(;o;){if(O.push(A()),L=s,v(),o===","&&(h(),L=s,v()),F){var U=w(L);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),O;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E(O),H}}function T(O){var F="",L={},B,U,H;try{if(u&&(B=n.createComment(L,{c:{},o:[]})),O?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!O)return B&&(B.e=[H]),h(),L;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[F]=A(),U=s,v(),o===","&&(h(),U=s,v()),B){var D=w(U);B.c[F]=[H||"",D[0]||""],H=D[1],B.o.push(F)}if(o==="}"&&!O)return h(),B&&(B.c[F][1]+=H||""),L;v()}if(O)return L;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(L),z}}function A(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function C(O,F){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(L).join(`
`);if(U||B){var H=n.createComment(O,n.getComment(O));H.r=[B,U]}}return O}function I(){v();var O=u?w(1):null;switch(o){case"{":return C(T(),O);case"[":return C(S(),O);default:return C(A(),O)}}function R(){v();var O=u?w(1):null;switch(o){case"{":return C(T(),O);case"[":return C(S(),O)}try{return C(T(!0),O)}catch(F){c();try{return C(A(),O)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var M=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,M=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(M,"parse"),i=e,c(),P?R():I()},TSt=function(e,t){var n=R6,r=qX,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,M="",P=0;function O(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(S,function(j){var q=I[j];return typeof q=="string"?O(g.esc,q):O(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function L(W,j,q,G){return W?(T.lastIndex=0,C.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(S.lastIndex=0,A.lastIndex=0,S.test(W)?!A.test(W)&&!G&&d?B(W,j):O(g.qstr,F(W)):O(g.qstr,W)):O(g.str,W)):O(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return O(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||R.test(W)?(S.lastIndex=0,O(g.qkey,S.test(W)?F(W):W)):O(g.key,W):'""'}function H(W,j,q,G){function ne(hn){return hn&&hn[hn[0]==="\r"?1:0]===`
`}function ce(hn){return hn&&!ne(hn)}function de(hn,Sn,nr){if(!hn)return"";hn=n.forceComment(hn);var rr,Fo=hn.length;for(rr=0;rr<Fo&&hn[rr]<=" ";rr++);return nr&&rr>0&&(hn=hn.substr(rr)),rr<Fo?Sn+O(g.rem,hn):hn}var he=w(W);if(he!==void 0)return O(g.dsf,he);switch(typeof W){case"string":return L(W,M,j,G);case"number":return isFinite(W)?O(g.num,String(W)):O(g.lit,"null");case"boolean":return O(g.lit,String(W));case"object":if(!W)return O(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",ve=M;M+=o;var Ke=s+ve,Ue=s+M,gt=q||u?"":Ke,rt=[],be,ke=f?[]:null,ze=c,ct=d,Dt=h?"":g.com[0],We=0,me,dt,yt,pe,Ce,He,ut,_t,Mn;if(Ie){for(me=0,dt=W.length;me<dt;me++){if(be=me<dt-1,ye?(He=ye.a[me]||[],ut=ce(He[1]),rt.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):rt.push(Ue),P=0,pe=W[me],rt.push(H(pe,ye?ut:!1,!0)+(be?h:"")),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,ke.push(H(pe,!1,!0)+(be?g.com[0]:"")),c=ze,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(rt[rt.length-1]+(be?Dt:""));break}be&&(P+=g.com[0].length-g.com[2]),We+=P}ye&&He[1]&&rt.push(de(He[1],ut?" ":`
`,ut))}dt===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ke):rt.push(Ke),rt.length===0?_t=O(g.arr,""):(_t=gt+O(g.arr,rt.join("")),ke&&(Mn=ke.join(" "),Mn.length-We<=f&&(_t=O(g.arr,Mn))))}else{var Tr=ye?ye.o.slice():[],Ln=[];for(yt in W)Object.prototype.hasOwnProperty.call(W,yt)&&Tr.indexOf(yt)<0&&Ln.push(yt);m&&Ln.sort();var cr=Tr.concat(Ln);for(me=0,dt=cr.length;me<dt;me++)if(be=me<dt-1,yt=cr[me],ye?(He=ye.c[yt]||[],ut=ce(He[1]),rt.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):rt.push(Ue),P=0,pe=W[yt],Ce=H(pe,ye&&ut),rt.push(U(yt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(be?h:"")),ye&&He[1]&&rt.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,Ce=H(pe,!1),c=ze,d=ct,ke.push(U(yt)+g.col[0]+" "+Ce+(be?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(rt[rt.length-1]+(be?Dt:""));break}P+=g.col[0].length-g.col[2],be&&(P+=g.com[0].length-g.com[2]),We+=P}dt===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ke):rt.push(Ke),rt.length===0?_t=O(g.obj,""):(_t=gt+O(g.obj,rt.join("")),ke&&(Mn=ke.join(" "),Mn.length-We<=f&&(_t=O(g.obj,Mn))))}return M=ve,_t}}w=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=H(e,null,!0,!0),z&&(D+=z[1]||""),D},Ow=R6;function iC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function Iz(e,t){if(!(e===null||typeof e!="object")){var n=Ow.getComment(e);n&&Ow.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)afe(o.a,r,n.a[r],Iz(e[r]))&&(s=!0);!s&&n.e&&(o.e=iC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];afe(o.s,l,n.c[l],Iz(e[l]))&&(s=!0)}!s&&n.e&&(o.e=iC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=iC(n.r[0],n.r[1])),s?o:void 0}}function ASt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function CSt(e,t){var n=[];if(kz(e,t,n,[]),n.length>0){var r=n$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+ASt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),n$(t,r,1)}}function afe(e,t,n,r){var i=iC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function sC(e,t){var n=iC(t.b,t.a);return n.path=e,n}function oC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(sC(s,o)),oC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(sC(u,l)),oC(l.x,t,u))});e.e&&t.push(sC(n,e.e))}}function kz(e,t,n,r){if(e){if(t===null||typeof t!="object"){oC(e,n,r);return}var i,s=Ow.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],kz(u.x,t[i],n,l)):(n.push(sC(l,u)),oC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],kz(d.x,t[c],n,f))):d&&(n.push(sC(f,d)),oC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function n$(e,t,n){var r=Ow.createComment(e,Ow.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Ow.forceComment(t)),r.r[n]||""}var ISt={extract:function(e){return Iz(e,!0)},merge:CSt,header:function(e,t){return n$(e,t,0)},footer:function(e,t){return n$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var ufe=R6,kSt=_St,lfe=SSt,cfe=TSt,RSt=ISt,NSt=qX,WX={parse:lfe,stringify:cfe,endOfLine:function(){return ufe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(ufe.EOL=e)},version:kSt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,lfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,cfe(e,t)}},comments:RSt,dsf:NSt.std},Rz={exports:{}},eke={},Nf={},ME={},dk={},Pn={},P2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(P2);var Nz={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=P2;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Nz);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=P2,n=Nz;var r=P2;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Nz;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=O(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=O(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>M(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=O(this.condition,q,G),this}get names(){const q=super.names;return P(q,this.condition),this.else&&M(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=O(this.iteration,q,G),this}get names(){return M(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=P(super.names,this.from);return P(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=O(this.iterable,q,G),this}get names(){return M(super.names,this.iterable.names)}}class S extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class A extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&M(q,this.catch.names),this.finally&&M(q,this.finally.names),q}}class C extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}C.kind="catch";class I extends p{render(q){return"finally"+super.render(q)}}I.kind="finally";class R{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ye=>{this.var(de,(0,t._)`${he}[${ye}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new T;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new A;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new C(de),G(de)}return ne&&(this._currNode=ce.finally=new I,this.code(ne)),this._endBlockNode(C,I)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new S(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=R;function M(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function P(j,q){return q instanceof t._CodeOrName?M(j,q.names):j}function O(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function L(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=L;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function D(...j){return j.reduce(H)}e.or=D;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Pn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Wr=Pn,PSt=P2;function DSt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=DSt;function OSt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(tke(e,t),!nke(t,e.self.RULES.all))}wt.alwaysValidSchema=OSt;function tke(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||ske(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=tke;function nke(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=nke;function $St(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=$St;function MSt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Wr._)`${n}`}return(0,Wr._)`${e}${t}${(0,Wr.getProperty)(r)}`}wt.schemaRefOrVal=MSt;function LSt(e){return rke(decodeURIComponent(e))}wt.unescapeFragment=LSt;function FSt(e){return encodeURIComponent(GX(e))}wt.escapeFragment=FSt;function GX(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=GX;function rke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=rke;function jSt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=jSt;function ffe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Wr.Name?(s instanceof Wr.Name?e(i,s,o):t(i,s,o),o):s instanceof Wr.Name?(t(i,o,s),s):n(s,o);return a===Wr.Name&&!(u instanceof Wr.Name)?r(i,u):u}}wt.mergeEvaluated={props:ffe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Wr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Wr._)`${n} || {}`).code((0,Wr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Wr._)`${n} || {}`),YX(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:ike}),items:ffe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Wr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Wr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function ike(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Wr._)`{}`);return t!==void 0&&YX(e,n,t),n}wt.evaluatedPropsToName=ike;function YX(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Wr._)`${t}${(0,Wr.getProperty)(r)}`,!0))}wt.setEvaluated=YX;const dfe={};function BSt(e,t){return e.scopeValue("func",{ref:t,code:dfe[t.code]||(dfe[t.code]=new PSt._Code(t.code))})}wt.useFunc=BSt;var Pz;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Pz||(wt.Type=Pz={}));function USt(e,t,n){if(e instanceof Wr.Name){const r=t===Pz.Num;return n?r?(0,Wr._)`"[" + ${e} + "]"`:(0,Wr._)`"['" + ${e} + "']"`:r?(0,Wr._)`"/" + ${e}`:(0,Wr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Wr.getProperty)(e).toString():"/"+GX(e)}wt.getErrorPath=USt;function ske(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=ske;var Hh={};Object.defineProperty(Hh,"__esModule",{value:!0});const Xo=Pn,zSt={data:new Xo.Name("data"),valCxt:new Xo.Name("valCxt"),instancePath:new Xo.Name("instancePath"),parentData:new Xo.Name("parentData"),parentDataProperty:new Xo.Name("parentDataProperty"),rootData:new Xo.Name("rootData"),dynamicAnchors:new Xo.Name("dynamicAnchors"),vErrors:new Xo.Name("vErrors"),errors:new Xo.Name("errors"),this:new Xo.Name("this"),self:new Xo.Name("self"),scope:new Xo.Name("scope"),json:new Xo.Name("json"),jsonPos:new Xo.Name("jsonPos"),jsonLen:new Xo.Name("jsonLen"),jsonPart:new Xo.Name("jsonPart")};Hh.default=zSt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pn,n=wt,r=Hh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,A=f(g,y,v);b??(S||T)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:S}=b,T=f(g,y,v);u(w,T),E||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:S,it:T}=g,{opts:A,propertyName:C,topSchemaRef:I,schemaPath:R}=T;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(dk);Object.defineProperty(ME,"__esModule",{value:!0});ME.boolOrEmptySchema=ME.topBoolOrEmptySchema=void 0;const VSt=dk,HSt=Pn,qSt=Hh,WSt={message:"boolean schema is false"};function GSt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?oke(e,!1):typeof n=="object"&&n.$async===!0?t.return(qSt.default.data):(t.assign((0,HSt._)`${r}.errors`,null),t.return(!0))}ME.topBoolOrEmptySchema=GSt;function YSt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),oke(e)):n.var(t,!0)}ME.boolOrEmptySchema=YSt;function oke(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,VSt.reportError)(i,WSt,void 0,t)}var Es={},Vv={};Object.defineProperty(Vv,"__esModule",{value:!0});Vv.getRules=Vv.isJSONType=void 0;const KSt=["string","number","integer","boolean","null","object","array"],XSt=new Set(KSt);function QSt(e){return typeof e=="string"&&XSt.has(e)}Vv.isJSONType=QSt;function JSt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Vv.getRules=JSt;var Qp={};Object.defineProperty(Qp,"__esModule",{value:!0});Qp.shouldUseRule=Qp.shouldUseGroup=Qp.schemaHasRulesForType=void 0;function ZSt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&ake(e,r)}Qp.schemaHasRulesForType=ZSt;function ake(e,t){return t.rules.some(n=>uke(e,n))}Qp.shouldUseGroup=ake;function uke(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Qp.shouldUseRule=uke;Object.defineProperty(Es,"__esModule",{value:!0});Es.reportTypeError=Es.checkDataTypes=Es.checkDataType=Es.coerceAndCheckDataType=Es.getJSONTypes=Es.getSchemaTypes=Es.DataType=void 0;const eTt=Vv,tTt=Qp,nTt=dk,bn=Pn,lke=wt;var $w;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})($w||(Es.DataType=$w={}));function rTt(e){const t=cke(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Es.getSchemaTypes=rTt;function cke(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(eTt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Es.getJSONTypes=cke;function iTt(e,t){const{gen:n,data:r,opts:i}=e,s=sTt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,tTt.schemaHasRulesForType)(e,t[0]));if(o){const a=KX(t,r,i.strictNumbers,$w.Wrong);n.if(a,()=>{s.length?oTt(e,t,s):XX(e)})}return o}Es.coerceAndCheckDataType=iTt;const fke=new Set(["string","number","integer","boolean","null"]);function sTt(e,t){return t?e.filter(n=>fke.has(n)||t==="array"&&n==="array"):[]}function oTt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,bn._)`typeof ${i}`),a=r.let("coerced",(0,bn._)`undefined`);s.coerceTypes==="array"&&r.if((0,bn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,bn._)`${i}[0]`).assign(o,(0,bn._)`typeof ${i}`).if(KX(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,bn._)`${a} !== undefined`);for(const l of n)(fke.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),XX(e),r.endIf(),r.if((0,bn._)`${a} !== undefined`,()=>{r.assign(i,a),aTt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,bn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,bn._)`"" + ${i}`).elseIf((0,bn._)`${i} === null`).assign(a,(0,bn._)`""`);return;case"number":r.elseIf((0,bn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,bn._)`+${i}`);return;case"integer":r.elseIf((0,bn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,bn._)`+${i}`);return;case"boolean":r.elseIf((0,bn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,bn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,bn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,bn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,bn._)`[${i}]`)}}}function aTt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,bn._)`${t} !== undefined`,()=>e.assign((0,bn._)`${t}[${n}]`,r))}function Dz(e,t,n,r=$w.Correct){const i=r===$w.Correct?bn.operators.EQ:bn.operators.NEQ;let s;switch(e){case"null":return(0,bn._)`${t} ${i} null`;case"array":s=(0,bn._)`Array.isArray(${t})`;break;case"object":s=(0,bn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,bn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,bn._)`typeof ${t} ${i} ${e}`}return r===$w.Correct?s:(0,bn.not)(s);function o(a=bn.nil){return(0,bn.and)((0,bn._)`typeof ${t} == "number"`,a,n?(0,bn._)`isFinite(${t})`:bn.nil)}}Es.checkDataType=Dz;function KX(e,t,n,r){if(e.length===1)return Dz(e[0],t,n,r);let i;const s=(0,lke.toHash)(e);if(s.array&&s.object){const o=(0,bn._)`typeof ${t} != "object"`;i=s.null?o:(0,bn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=bn.nil;s.number&&delete s.integer;for(const o in s)i=(0,bn.and)(i,Dz(o,t,n,r));return i}Es.checkDataTypes=KX;const uTt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,bn._)`{type: ${e}}`:(0,bn._)`{type: ${t}}`};function XX(e){const t=lTt(e);(0,nTt.reportError)(t,uTt)}Es.reportTypeError=XX;function lTt(e){const{gen:t,data:n,schema:r}=e,i=(0,lke.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var N6={};Object.defineProperty(N6,"__esModule",{value:!0});N6.assignDefaults=void 0;const d_=Pn,cTt=wt;function fTt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)hfe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>hfe(e,s,i.default))}N6.assignDefaults=fTt;function hfe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,d_._)`${s}${(0,d_.getProperty)(t)}`;if(i){(0,cTt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,d_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,d_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,d_._)`${a} = ${(0,d_.stringify)(n)}`)}var qd={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;const oi=Pn,QX=wt,hg=Hh,dTt=wt;function hTt(e,t){const{gen:n,data:r,it:i}=e;n.if(ZX(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,oi._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=hTt;function pTt({gen:e,data:t,it:{opts:n}},r,i){return(0,oi.or)(...r.map(s=>(0,oi.and)(ZX(e,t,s,n.ownProperties),(0,oi._)`${i} = ${s}`)))}kn.checkMissingProp=pTt;function mTt(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=mTt;function dke(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,oi._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=dke;function JX(e,t,n){return(0,oi._)`${dke(e)}.call(${t}, ${n})`}kn.isOwnProperty=JX;function gTt(e,t,n,r){const i=(0,oi._)`${t}${(0,oi.getProperty)(n)} !== undefined`;return r?(0,oi._)`${i} && ${JX(e,t,n)}`:i}kn.propertyInData=gTt;function ZX(e,t,n,r){const i=(0,oi._)`${t}${(0,oi.getProperty)(n)} === undefined`;return r?(0,oi.or)(i,(0,oi.not)(JX(e,t,n))):i}kn.noPropertyInData=ZX;function hke(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=hke;function yTt(e,t){return hke(t).filter(n=>!(0,QX.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=yTt;function vTt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,oi._)`${e}, ${t}, ${r}${i}`:t,f=[[hg.default.instancePath,(0,oi.strConcat)(hg.default.instancePath,s)],[hg.default.parentData,o.parentData],[hg.default.parentDataProperty,o.parentDataProperty],[hg.default.rootData,hg.default.rootData]];o.opts.dynamicRef&&f.push([hg.default.dynamicAnchors,hg.default.dynamicAnchors]);const d=(0,oi._)`${c}, ${n.object(...f)}`;return u!==oi.nil?(0,oi._)`${a}.call(${u}, ${d})`:(0,oi._)`${a}(${d})`}kn.callValidateCode=vTt;const bTt=(0,oi._)`new RegExp`;function _Tt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,oi._)`${i.code==="new RegExp"?bTt:(0,dTt.useFunc)(e,i)}(${n}, ${r})`})}kn.usePattern=_Tt;function wTt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,oi._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:QX.Type.Num},s),t.if((0,oi.not)(s),a)})}}kn.validateArray=wTt;function ETt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,QX.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,oi._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,oi.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=ETt;Object.defineProperty(qd,"__esModule",{value:!0});qd.validateKeywordUsage=qd.validSchemaType=qd.funcKeywordCode=qd.macroKeywordCode=void 0;const Da=Pn,P1=Hh,xTt=kn,STt=dk;function TTt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=pke(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Da.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}qd.macroKeywordCode=TTt;function ATt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;ITt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=pke(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&pfe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&pfe(e),g(()=>CTt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Da._)`await `),v=>r.assign(f,!1).if((0,Da._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Da._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Da._)`${c}.errors`;return r.assign(y,null),m(Da.nil),y}function m(y=t.async?(0,Da._)`await `:Da.nil){const v=u.opts.passContext?P1.default.this:P1.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Da._)`${y}${(0,xTt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Da.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}qd.funcKeywordCode=ATt;function pfe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Da._)`${r.parentData}[${r.parentDataProperty}]`))}function CTt(e,t){const{gen:n}=e;n.if((0,Da._)`Array.isArray(${t})`,()=>{n.assign(P1.default.vErrors,(0,Da._)`${P1.default.vErrors} === null ? ${t} : ${P1.default.vErrors}.concat(${t})`).assign(P1.default.errors,(0,Da._)`${P1.default.vErrors}.length`),(0,STt.extendErrors)(e)},()=>e.error())}function ITt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function pke(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Da.stringify)(n)})}function kTt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}qd.validSchemaType=kTt;function RTt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}qd.validateKeywordUsage=RTt;var y0={};Object.defineProperty(y0,"__esModule",{value:!0});y0.extendSubschemaMode=y0.extendSubschemaData=y0.getSubschema=void 0;const Bd=Pn,mke=wt;function NTt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Bd._)`${e.schemaPath}${(0,Bd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Bd._)`${e.schemaPath}${(0,Bd.getProperty)(t)}${(0,Bd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,mke.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}y0.getSubschema=NTt;function PTt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Bd._)`${t.data}${(0,Bd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Bd.str)`${l}${(0,mke.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Bd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Bd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}y0.extendSubschemaData=PTt;function DTt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}y0.extendSubschemaMode=DTt;var xo={},gke={exports:{}},Gg=gke.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};eD(t,r,i,e,"",e)};Gg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Gg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Gg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Gg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function eD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Gg.arrayKeywords)for(var d=0;d<f.length;d++)eD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Gg.propsKeywords){if(f&&typeof f=="object")for(var h in f)eD(e,t,n,f[h],i+"/"+c+"/"+OTt(h),s,i,c,r,h)}else(c in Gg.keywords||e.allKeys&&!(c in Gg.skipKeywords))&&eD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function OTt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var $Tt=gke.exports;Object.defineProperty(xo,"__esModule",{value:!0});xo.getSchemaRefs=xo.resolveUrl=xo.normalizeId=xo._getFullPath=xo.getFullPath=xo.inlineRef=void 0;const MTt=wt,LTt=fY,FTt=$Tt,jTt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function BTt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Oz(e):t?yke(e)<=t:!1}xo.inlineRef=BTt;const UTt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Oz(e){for(const t in e){if(UTt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(Oz)||typeof n=="object"&&Oz(n))return!0}return!1}function yke(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!jTt.has(n)&&(typeof e[n]=="object"&&(0,MTt.eachItem)(e[n],r=>t+=yke(r)),t===1/0))return 1/0}return t}function vke(e,t="",n){n!==!1&&(t=Mw(t));const r=e.parse(t);return bke(e,r)}xo.getFullPath=vke;function bke(e,t){return e.serialize(t).split("#")[0]+"#"}xo._getFullPath=bke;const zTt=/#\/?$/;function Mw(e){return e?e.replace(zTt,""):""}xo.normalizeId=Mw;function VTt(e,t,n){return n=Mw(n),e.resolve(t,n)}xo.resolveUrl=VTt;const HTt=/^[a-z_][-a-z0-9._]*$/i;function qTt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Mw(e[n]||t),s={"":i},o=vke(r,i,!1),a={},u=new Set;return FTt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Mw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Mw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!HTt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!LTt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}xo.getSchemaRefs=qTt;Object.defineProperty(Nf,"__esModule",{value:!0});Nf.getData=Nf.KeywordCxt=Nf.validateFunctionCode=void 0;const _ke=ME,mfe=Es,eQ=Qp,r$=Es,WTt=N6,aC=qd,Pj=y0,Pt=Pn,nn=Hh,GTt=xo,Jp=wt,dT=dk;function YTt(e){if(xke(e)&&(Ske(e),Eke(e))){QTt(e);return}wke(e,()=>(0,_ke.topBoolOrEmptySchema)(e))}Nf.validateFunctionCode=YTt;function wke({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Pt._)`${nn.default.data}, ${nn.default.valCxt}`,r.$async,()=>{e.code((0,Pt._)`"use strict"; ${gfe(n,i)}`),XTt(e,i),e.code(s)}):e.func(t,(0,Pt._)`${nn.default.data}, ${KTt(i)}`,r.$async,()=>e.code(gfe(n,i)).code(s))}function KTt(e){return(0,Pt._)`{${nn.default.instancePath}="", ${nn.default.parentData}, ${nn.default.parentDataProperty}, ${nn.default.rootData}=${nn.default.data}${e.dynamicRef?(0,Pt._)`, ${nn.default.dynamicAnchors}={}`:Pt.nil}}={}`}function XTt(e,t){e.if(nn.default.valCxt,()=>{e.var(nn.default.instancePath,(0,Pt._)`${nn.default.valCxt}.${nn.default.instancePath}`),e.var(nn.default.parentData,(0,Pt._)`${nn.default.valCxt}.${nn.default.parentData}`),e.var(nn.default.parentDataProperty,(0,Pt._)`${nn.default.valCxt}.${nn.default.parentDataProperty}`),e.var(nn.default.rootData,(0,Pt._)`${nn.default.valCxt}.${nn.default.rootData}`),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,Pt._)`${nn.default.valCxt}.${nn.default.dynamicAnchors}`)},()=>{e.var(nn.default.instancePath,(0,Pt._)`""`),e.var(nn.default.parentData,(0,Pt._)`undefined`),e.var(nn.default.parentDataProperty,(0,Pt._)`undefined`),e.var(nn.default.rootData,nn.default.data),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,Pt._)`{}`)})}function QTt(e){const{schema:t,opts:n,gen:r}=e;wke(e,()=>{n.$comment&&t.$comment&&Ake(e),nAt(e),r.let(nn.default.vErrors,null),r.let(nn.default.errors,0),n.unevaluated&&JTt(e),Tke(e),sAt(e)})}function JTt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Pt._)`${n}.evaluated`),t.if((0,Pt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Pt._)`${e.evaluated}.props`,(0,Pt._)`undefined`)),t.if((0,Pt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Pt._)`${e.evaluated}.items`,(0,Pt._)`undefined`))}function gfe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Pt._)`/*# sourceURL=${n} */`:Pt.nil}function ZTt(e,t){if(xke(e)&&(Ske(e),Eke(e))){eAt(e,t);return}(0,_ke.boolOrEmptySchema)(e,t)}function Eke({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function xke(e){return typeof e.schema!="boolean"}function eAt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&Ake(e),rAt(e),iAt(e);const s=r.const("_errs",nn.default.errors);Tke(e,s),r.var(t,(0,Pt._)`${s} === ${nn.default.errors}`)}function Ske(e){(0,Jp.checkUnknownRules)(e),tAt(e)}function Tke(e,t){if(e.opts.jtd)return yfe(e,[],!1,t);const n=(0,mfe.getSchemaTypes)(e.schema),r=(0,mfe.coerceAndCheckDataType)(e,n);yfe(e,n,!r,t)}function tAt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Jp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function nAt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Jp.checkStrictMode)(e,"default is ignored in the schema root")}function rAt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,GTt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function iAt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ake({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Pt._)`${nn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Pt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Pt._)`${nn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function sAt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Pt._)`${nn.default.errors} === 0`,()=>t.return(nn.default.data),()=>t.throw((0,Pt._)`new ${i}(${nn.default.vErrors})`)):(t.assign((0,Pt._)`${r}.errors`,nn.default.vErrors),s.unevaluated&&oAt(e),t.return((0,Pt._)`${nn.default.errors} === 0`))}function oAt({gen:e,evaluated:t,props:n,items:r}){n instanceof Pt.Name&&e.assign((0,Pt._)`${t}.props`,n),r instanceof Pt.Name&&e.assign((0,Pt._)`${t}.items`,r)}function yfe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Jp.schemaHasRulesButRef)(s,c))){i.block(()=>kke(e,"$ref",c.all.$ref.definition));return}u.jtd||aAt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,eQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,r$.checkDataType)(d.type,o,u.strictNumbers)),vfe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,r$.reportTypeError)(e)),i.endIf()):vfe(e,d),a||i.if((0,Pt._)`${nn.default.errors} === ${r||0}`))}}function vfe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,WTt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,eQ.shouldUseRule)(r,s)&&kke(e,s.keyword,s.definition,t.type)})}function aAt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(uAt(e,t),e.opts.allowUnionTypes||lAt(e,t),cAt(e,e.dataTypes))}function uAt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Cke(e.dataTypes,n)||tQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),dAt(e,t)}}function lAt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&tQ(e,"use allowUnionTypes to allow union type keyword")}function cAt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,eQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>fAt(t,o))&&tQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function fAt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Cke(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function dAt(e,t){const n=[];for(const r of e.dataTypes)Cke(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function tQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Jp.checkStrictMode)(e,t,e.opts.strictTypes)}class Ike{constructor(t,n,r){if((0,aC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Jp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",Rke(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,aC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",nn.default.errors))}result(t,n,r){this.failResult((0,Pt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Pt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Pt._)`${n} !== undefined && (${(0,Pt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?dT.reportExtraError:dT.reportError)(this,this.def.error,n)}$dataError(){(0,dT.reportError)(this,this.def.$dataError||dT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,dT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Pt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Pt.nil,n=Pt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Pt.or)((0,Pt._)`${i} === undefined`,n)),t!==Pt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Pt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Pt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Pt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Pt._)`${(0,r$.checkDataTypes)(u,n,s.opts.strictNumbers,r$.DataType.Wrong)}`}return Pt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Pt._)`!${u}(${n})`}return Pt.nil}}subschema(t,n){const r=(0,Pj.getSubschema)(this.it,t);(0,Pj.extendSubschemaData)(r,this.it,t),(0,Pj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return ZTt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Jp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Jp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Pt.Name)),!0}}Nf.KeywordCxt=Ike;function kke(e,t,n,r){const i=new Ike(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,aC.funcKeywordCode)(i,n):"macro"in n?(0,aC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,aC.funcKeywordCode)(i,n)}const hAt=/^\/(?:[^~]|~0|~1)*$/,pAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Rke(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return nn.default.rootData;if(e[0]==="/"){if(!hAt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=nn.default.rootData}else{const l=pAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Pt._)`${s}${(0,Pt.getProperty)((0,Jp.unescapeJsonPointer)(l))}`,o=(0,Pt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Nf.getData=Rke;var hk={};Object.defineProperty(hk,"__esModule",{value:!0});class mAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}hk.default=mAt;var rS={};Object.defineProperty(rS,"__esModule",{value:!0});const Dj=xo;class gAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,Dj.resolveUrl)(t,n,r),this.missingSchema=(0,Dj.normalizeId)((0,Dj.getFullPath)(t,this.missingRef))}}rS.default=gAt;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.resolveSchema=xu.getCompilingSchema=xu.resolveRef=xu.compileSchema=xu.SchemaEnv=void 0;const qc=Pn,yAt=hk,t1=Hh,yf=xo,bfe=wt,vAt=Nf;class P6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,yf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}xu.SchemaEnv=P6;function nQ(e){const t=Nke.call(this,e);if(t)return t;const n=(0,yf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new qc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:yAt.default,code:(0,qc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:t1.default.data,parentData:t1.default.parentData,parentDataProperty:t1.default.parentDataProperty,dataNames:[t1.default.data],dataPathArr:[qc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,qc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:qc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,qc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,vAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(t1.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${t1.default.self}`,`${t1.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof qc.Name?void 0:p,items:m instanceof qc.Name?void 0:m,dynamicProps:p instanceof qc.Name,dynamicItems:m instanceof qc.Name},h.source&&(h.source.evaluated=(0,qc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}xu.compileSchema=nQ;function bAt(e,t,n){var r;n=(0,yf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=EAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new P6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=_At.call(this,s)}xu.resolveRef=bAt;function _At(e){return(0,yf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:nQ.call(this,e)}function Nke(e){for(const t of this._compilations)if(wAt(t,e))return t}xu.getCompilingSchema=Nke;function wAt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function EAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||D6.call(this,e,t)}function D6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,yf._getFullPath)(this.opts.uriResolver,n);let i=(0,yf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Oj.call(this,n,e);const s=(0,yf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=D6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Oj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||nQ.call(this,o),s===(0,yf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,yf.resolveUrl)(this.opts.uriResolver,i,l)),new P6({schema:a,schemaId:u,root:e,baseId:i})}return Oj.call(this,n,o)}}xu.resolveSchema=D6;const xAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Oj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,bfe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!xAt.has(a)&&l&&(t=(0,yf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,bfe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,yf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=D6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new P6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const SAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",TAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",AAt="object",CAt=["$data"],IAt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},kAt=!1,RAt={$id:SAt,description:TAt,type:AAt,required:CAt,properties:IAt,additionalProperties:kAt};var rQ={},$z={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Js,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Se=ee.length-1,xe=1;xe<Se;++xe)ee[xe]=ee[xe].slice(1,-1);return ee[Se]=ee[Se].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Se in ee)ae[Se]=ee[Se];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Se=r(ae,"[A-Fa-f]"),xe=i(i("%[EFef]"+Se+"%"+Se+Se+"%"+Se+Se)+"|"+i("%[89A-Fa-f]"+Se+"%"+Se+Se)+"|"+i("%"+Se+Se)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Vt=r(ot,St),Dn=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Fn=oe?"[\\uE000-\\uF8FF]":"[]",fn=r(ee,ae,"[\\-\\.\\_\\~]",Dn);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(xe+"|"+r(fn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Cr=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),zt=i(Se+"{1,4}"),sr=i(i(zt+"\\:"+zt)+"|"+Cr),zr=i(i(zt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(zt+"\\:")+"{5}"+sr),Ai=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+sr),Bs=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+sr),Kr=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+sr),fo=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+sr),Li=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+sr),Fi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),jo=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),Aa=i([zr,Jn,Ai,Bs,Kr,fo,Li,Fi,jo].join("|")),Us=i(i(fn+"|"+xe)+"+");i("[vV]"+Se+"+\\."+r(fn,St,"[\\:]")+"+"),i(i(xe+"|"+r(fn,St))+"*");var Wl=i(xe+"|"+r(fn,St,"[\\:\\@]"));return i(i(xe+"|"+r(fn,St,"[\\@]"))+"+"),i(i(Wl+"|"+r("[\\/\\?]",Fn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",fn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",fn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",fn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",fn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",fn,St,"[\\:\\@\\/\\?]",Fn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",fn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",fn,St),"g"),UNRESERVED:new RegExp(fn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",fn,Vt),"g"),PCT_ENCODED:new RegExp(xe,"g"),IPV4ADDRESS:new RegExp("^("+Cr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Aa+")"+i(i("\\%25|\\%(?!"+Se+"{2})")+"("+Us+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Se=[],xe=!0,ot=!1,St=void 0;try{for(var Vt=ee[Symbol.iterator](),Dn;!(xe=(Dn=Vt.next()).done)&&(Se.push(Dn.value),!(ae&&Se.length===ae));xe=!0);}catch(Fn){ot=!0,St=Fn}finally{try{!xe&&Vt.return&&Vt.return()}finally{if(ot)throw St}}return Se}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,S="-",T=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,M=Math.floor,P=String.fromCharCode;function O(oe){throw new RangeError(I[oe])}function F(oe,ee){for(var ae=[],Se=oe.length;Se--;)ae[Se]=ee(oe[Se]);return ae}function L(oe,ee){var ae=oe.split("@"),Se="";ae.length>1&&(Se=ae[0]+"@",oe=ae[1]),oe=oe.replace(C,".");var xe=oe.split("."),ot=F(xe,ee).join(".");return Se+ot}function B(oe){for(var ee=[],ae=0,Se=oe.length;ae<Se;){var xe=oe.charCodeAt(ae++);if(xe>=55296&&xe<=56319&&ae<Se){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((xe&1023)<<10)+(ot&1023)+65536):(ee.push(xe),ae--)}else ee.push(xe)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Se){var xe=0;for(ee=Se?M(ee/b):ee>>1,ee+=M(ee/ae);ee>R*y>>1;xe+=m)ee=M(ee/R);return M(xe+(R+1)*ee/(ee+v))},W=function(ee){var ae=[],Se=ee.length,xe=0,ot=E,St=w,Vt=ee.lastIndexOf(S);Vt<0&&(Vt=0);for(var Dn=0;Dn<Vt;++Dn)ee.charCodeAt(Dn)>=128&&O("not-basic"),ae.push(ee.charCodeAt(Dn));for(var Fn=Vt>0?Vt+1:0;Fn<Se;){for(var fn=xe,ir=1,Cr=m;;Cr+=m){Fn>=Se&&O("invalid-input");var zt=H(ee.charCodeAt(Fn++));(zt>=m||zt>M((p-xe)/ir))&&O("overflow"),xe+=zt*ir;var sr=Cr<=St?g:Cr>=St+y?y:Cr-St;if(zt<sr)break;var zr=m-sr;ir>M(p/zr)&&O("overflow"),ir*=zr}var Jn=ae.length+1;St=z(xe-fn,Jn,fn==0),M(xe/Jn)>p-ot&&O("overflow"),ot+=M(xe/Jn),xe%=Jn,ae.splice(xe++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Se=ee.length,xe=E,ot=0,St=w,Vt=!0,Dn=!1,Fn=void 0;try{for(var fn=ee[Symbol.iterator](),ir;!(Vt=(ir=fn.next()).done);Vt=!0){var Cr=ir.value;Cr<128&&ae.push(P(Cr))}}catch(Oe){Dn=!0,Fn=Oe}finally{try{!Vt&&fn.return&&fn.return()}finally{if(Dn)throw Fn}}var zt=ae.length,sr=zt;for(zt&&ae.push(S);sr<Se;){var zr=p,Jn=!0,Ai=!1,Bs=void 0;try{for(var Kr=ee[Symbol.iterator](),fo;!(Jn=(fo=Kr.next()).done);Jn=!0){var Li=fo.value;Li>=xe&&Li<zr&&(zr=Li)}}catch(Oe){Ai=!0,Bs=Oe}finally{try{!Jn&&Kr.return&&Kr.return()}finally{if(Ai)throw Bs}}var Fi=sr+1;zr-xe>M((p-ot)/Fi)&&O("overflow"),ot+=(zr-xe)*Fi,xe=zr;var jo=!0,Aa=!1,Us=void 0;try{for(var Wl=ee[Symbol.iterator](),ud;!(jo=(ud=Wl.next()).done);jo=!0){var Y=ud.value;if(Y<xe&&++ot>p&&O("overflow"),Y==xe){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ge=se-fe,le=m-fe;ae.push(P(D(fe+ge%le,0))),se=M(ge/le)}ae.push(P(D(se,0))),St=z(ot,Fi,sr==zt),ot=0,++sr}}}catch(Oe){Aa=!0,Us=Oe}finally{try{!jo&&Wl.return&&Wl.return()}finally{if(Aa)throw Us}}++ot,++xe}return ae.join("")},q=function(ee){return L(ee,function(ae){return T.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return L(ee,function(ae){return A.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Se=oe.length;ae<Se;){var xe=parseInt(oe.substr(ae+1,2),16);if(xe<128)ee+=String.fromCharCode(xe),ae+=3;else if(xe>=194&&xe<224){if(Se-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((xe&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(xe>=224){if(Se-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Vt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((xe&15)<<12|(St&63)<<6|Vt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ye(oe,ee){function ae(Se){var xe=he(Se);return xe.match(ee.UNRESERVED)?xe:Se}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ve(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Se=d(ae,2),xe=Se[1];return xe?xe.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Se=d(ae,3),xe=Se[1],ot=Se[2];if(xe){for(var St=xe.toLowerCase().split("::").reverse(),Vt=d(St,2),Dn=Vt[0],Fn=Vt[1],fn=Fn?Fn.split(":").map(Ie):[],ir=Dn.split(":").map(Ie),Cr=ee.IPV4ADDRESS.test(ir[ir.length-1]),zt=Cr?7:8,sr=ir.length-zt,zr=Array(zt),Jn=0;Jn<zt;++Jn)zr[Jn]=fn[Jn]||ir[sr+Jn]||"";Cr&&(zr[zt-1]=ve(zr[zt-1],ee));var Ai=zr.reduce(function(Fi,jo,Aa){if(!jo||jo==="0"){var Us=Fi[Fi.length-1];Us&&Us.index+Us.length===Aa?Us.length++:Fi.push({index:Aa,length:1})}return Fi},[]),Bs=Ai.sort(function(Fi,jo){return jo.length-Fi.length})[0],Kr=void 0;if(Bs&&Bs.length>1){var fo=zr.slice(0,Bs.index),Li=zr.slice(Bs.index+Bs.length);Kr=fo.join(":")+"::"+Li.join(":")}else Kr=zr.join(":");return ot&&(Kr+="%"+ot),Kr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,gt="".match(/(){0}/)[1]===void 0;function rt(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Se=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var xe=oe.match(Ue);if(xe){gt?(ae.scheme=xe[1],ae.userinfo=xe[3],ae.host=xe[4],ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=xe[7],ae.fragment=xe[8],isNaN(ae.port)&&(ae.port=xe[5])):(ae.scheme=xe[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?xe[3]:void 0,ae.host=oe.indexOf("//")!==-1?xe[4]:void 0,ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=oe.indexOf("?")!==-1?xe[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?xe[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?xe[4]:void 0)),ae.host&&(ae.host=Ke(ve(ae.host,Se),Se)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Se.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Se);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,ee){var ae=ee.iri!==!1?f:c,Se=[];return oe.userinfo!==void 0&&(Se.push(oe.userinfo),Se.push("@")),oe.host!==void 0&&Se.push(Ke(ve(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(xe,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Se.push(":"),Se.push(String(oe.port))),Se.length?Se.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Dt=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Dt);if(ae){var Se=ae[0];oe=oe.slice(Se.length),ee.push(Se)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function me(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Se=[],xe=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(xe&&xe.serialize&&xe.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||xe&&xe.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Vt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Vt}}ye(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Se.push(oe.scheme),Se.push(":"));var ot=be(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Se.push("//"),Se.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Se.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!xe||!xe.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Se.push(St)}return oe.query!==void 0&&(Se.push("?"),Se.push(oe.query)),oe.fragment!==void 0&&(Se.push("#"),Se.push(oe.fragment)),Se.join("")}function dt(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=arguments[3],xe={};return Se||(oe=rt(me(oe,ae),ae),ee=rt(me(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(xe.scheme=ee.scheme,xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=We(ee.path||""),xe.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=We(ee.path||""),xe.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?xe.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?xe.path="/"+ee.path:oe.path?xe.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:xe.path=ee.path,xe.path=We(xe.path)),xe.query=ee.query):(xe.path=oe.path,ee.query!==void 0?xe.query=ee.query:xe.query=oe.query),xe.userinfo=oe.userinfo,xe.host=oe.host,xe.port=oe.port),xe.scheme=oe.scheme),xe.fragment=ee.fragment,xe}function yt(oe,ee,ae){var Se=u({scheme:"null"},ae);return me(dt(rt(oe,Se),rt(ee,Se),Se,!0),Se)}function pe(oe,ee){return typeof oe=="string"?oe=me(rt(oe,ee),ee):s(oe)==="object"&&(oe=rt(me(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=me(rt(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof ee=="string"?ee=me(rt(ee,ae),ae):s(ee)==="object"&&(ee=me(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Se=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Se?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Mn={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Tr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Ln={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Se=ee;return Se.secure=Tr(Se),Se.resourceName=(Se.path||"/")+(Se.query?"?"+Se.query:""),Se.path=void 0,Se.query=void 0,Se},serialize:function(ee,ae){if((ee.port===(Tr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Se=ee.resourceName.split("?"),xe=d(Se,2),ot=xe[0],St=xe[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Ln.domainHost,parse:Ln.parse,serialize:Ln.serialize},hn={},Sn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),Fo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Tn=r($i,'[\\"\\\\]'),Mi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ar=new RegExp(Sn,"g"),fs=new RegExp(rr,"g"),np=new RegExp(r("[^]",Fo,"[\\.]",'[\\"]',Tn),"g"),rl=new RegExp(r("[^]",Sn,Mi),"g"),ad=rl;function Er(oe){var ee=he(oe);return ee.match(Ar)?ee:oe}var Ti={scheme:"mailto",parse:function(ee,ae){var Se=ee,xe=Se.to=Se.path?Se.path.split(","):[];if(Se.path=void 0,Se.query){for(var ot=!1,St={},Vt=Se.query.split("&"),Dn=0,Fn=Vt.length;Dn<Fn;++Dn){var fn=Vt[Dn].split("=");switch(fn[0]){case"to":for(var ir=fn[1].split(","),Cr=0,zt=ir.length;Cr<zt;++Cr)xe.push(ir[Cr]);break;case"subject":Se.subject=ut(fn[1],ae);break;case"body":Se.body=ut(fn[1],ae);break;default:ot=!0,St[ut(fn[0],ae)]=ut(fn[1],ae);break}}ot&&(Se.headers=St)}Se.query=void 0;for(var sr=0,zr=xe.length;sr<zr;++sr){var Jn=xe[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(Ai){Se.error=Se.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ai}xe[sr]=Jn.join("@")}return Se},serialize:function(ee,ae){var Se=ee,xe=a(ee.to);if(xe){for(var ot=0,St=xe.length;ot<St;++ot){var Vt=String(xe[ot]),Dn=Vt.lastIndexOf("@"),Fn=Vt.slice(0,Dn).replace(fs,Er).replace(fs,o).replace(np,de),fn=Vt.slice(Dn+1);try{fn=ae.iri?ne.toUnicode(fn):ne.toASCII(ut(fn,ae).toLowerCase())}catch(sr){Se.error=Se.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}xe[ot]=Fn+"@"+fn}Se.path=xe.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var Cr=[];for(var zt in ir)ir[zt]!==hn[zt]&&Cr.push(zt.replace(fs,Er).replace(fs,o).replace(rl,de)+"="+ir[zt].replace(fs,Er).replace(fs,o).replace(ad,de));return Cr.length&&(Se.query=Cr.join("&")),Se}},Yr=/^([^\:]+)\:(.*)/,ou={scheme:"urn",parse:function(ee,ae){var Se=ee.path&&ee.path.match(Yr),xe=ee;if(Se){var ot=ae.scheme||xe.scheme||"urn",St=Se[1].toLowerCase(),Vt=Se[2],Dn=ot+":"+(ae.nid||St),Fn=ce[Dn];xe.nid=St,xe.nss=Vt,xe.path=void 0,Fn&&(xe=Fn.parse(xe,ae))}else xe.error=xe.error||"URN can not be parsed.";return xe},serialize:function(ee,ae){var Se=ae.scheme||ee.scheme||"urn",xe=ee.nid,ot=Se+":"+(ae.nid||xe),St=ce[ot];St&&(ee=St.serialize(ee,ae));var Vt=ee,Dn=ee.nss;return Vt.path=(xe||ae.nid)+":"+Dn,Vt}},Sa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ta={scheme:"urn:uuid",parse:function(ee,ae){var Se=ee;return Se.uuid=Se.nss,Se.nss=void 0,!ae.tolerant&&(!Se.uuid||!Se.uuid.match(Sa))&&(Se.error=Se.error||"UUID is not valid."),Se},serialize:function(ee,ae){var Se=ee;return Se.nss=(ee.uuid||"").toLowerCase(),Se}};ce[_t.scheme]=_t,ce[Mn.scheme]=Mn,ce[Ln.scheme]=Ln,ce[cr.scheme]=cr,ce[Ti.scheme]=Ti,ce[ou.scheme]=ou,ce[Ta.scheme]=Ta,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=rt,n.removeDotSegments=We,n.serialize=me,n.resolveComponents=dt,n.resolve=yt,n.normalize=pe,n.equal=Ce,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})($z,$z.exports);var NAt=$z.exports;Object.defineProperty(rQ,"__esModule",{value:!0});const Pke=NAt;Pke.code='require("ajv/dist/runtime/uri").default';rQ.default=Pke;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Nf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=hk,i=rS,s=Vv,o=xu,a=Pn,u=xo,l=Es,c=wt,f=RAt,d=rQ,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,j,q,G,ne,ce,de,he,ye,Ie,ve,Ke,Ue,gt,rt,be,ke,ze,ct,Dt,We,me,dt,yt;const pe=D.strict,Ce=(z=D.code)===null||z===void 0?void 0:z.optimize,He=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=D.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=D.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=D.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ye=(he=D.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ie=D.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&ve!==void 0?ve:"log",strictRequired:(Ue=(Ke=D.strictRequired)!==null&&Ke!==void 0?Ke:pe)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(gt=D.loopRequired)!==null&&gt!==void 0?gt:v,loopEnum:(rt=D.loopEnum)!==null&&rt!==void 0?rt:v,meta:(be=D.meta)!==null&&be!==void 0?be:!0,messages:(ke=D.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=D.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=D.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Dt=D.addUsedSchema)!==null&&Dt!==void 0?Dt:!0,validateSchema:(We=D.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(me=D.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(dt=D.unicodeRegExp)!==null&&dt!==void 0?dt:!0,int32range:(yt=D.int32range)!==null&&yt!==void 0?yt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=M(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=I.call(this),z.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&C.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),T.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ye,Ie){await G.call(this,ye.$schema);const ve=this._addSchema(ye,Ie);return ve.validate||ne.call(this,ve)}async function G(ye){ye&&!this.getSchema(ye)&&await q.call(this,{$ref:ye},!0)}async function ne(ye){try{return this._compileSchemaEnv(ye)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ye)}}function ce({missingSchema:ye,missingRef:Ie}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ie} cannot be resolved`)}async function de(ye){const Ie=await he.call(this,ye);this.refs[ye]||await G.call(this,Ie.$schema),this.refs[ye]||this.addSchema(Ie,ye,W)}async function he(ye){const Ie=this._loading[ye];if(Ie)return Ie;try{return await(this._loading[ye]=j(ye))}finally{delete this._loading[ye]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(O.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ye=ne[ce];he&&ye&&(ne[ce]=H(ye))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,z,W,j="error"){for(const q in D){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${D[G]}`)}}function S(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function T(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function A(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function C(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function I(){const D={...this.opts};for(const z of p)delete D[z];return D}const R={log(){},warn(){},error(){}};function M(D){if(D===!1)return R;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function O(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(D,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[D]=!0,!z)return;const ce={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?L.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[D]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function L(D,z,W){const j=D.rules.findIndex(q=>q.keyword===W);j>=0?D.rules.splice(j,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=H(z)),D.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(D){return{anyOf:[D,U]}}})(eke);var iQ={},sQ={},oQ={};Object.defineProperty(oQ,"__esModule",{value:!0});const PAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};oQ.default=PAt;var Hv={};Object.defineProperty(Hv,"__esModule",{value:!0});Hv.callRef=Hv.getValidate=void 0;const DAt=rS,_fe=kn,hu=Pn,h_=Hh,wfe=xu,CN=wt,OAt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=wfe.resolveRef.call(u,l,i,n);if(c===void 0)throw new DAt.default(r.opts.uriResolver,i,n);if(c instanceof wfe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return tD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return tD(e,(0,hu._)`${p}.validate`,l,l.$async)}function d(p){const m=Dke(e,p);tD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,hu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:hu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function Dke(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,hu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Hv.getValidate=Dke;function tD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?h_.default.this:hu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,hu._)`await ${(0,_fe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,hu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,_fe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,hu._)`${p}.errors`;i.assign(h_.default.vErrors,(0,hu._)`${h_.default.vErrors} === null ? ${m} : ${h_.default.vErrors}.concat(${m})`),i.assign(h_.default.errors,(0,hu._)`${h_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=CN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,hu._)`${p}.evaluated.props`);s.props=CN.mergeEvaluated.props(i,y,s.props,hu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=CN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,hu._)`${p}.evaluated.items`);s.items=CN.mergeEvaluated.items(i,y,s.items,hu.Name)}}}Hv.callRef=tD;Hv.default=OAt;Object.defineProperty(sQ,"__esModule",{value:!0});const $At=oQ,MAt=Hv,LAt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",$At.default,MAt.default];sQ.default=LAt;var aQ={},uQ={};Object.defineProperty(uQ,"__esModule",{value:!0});const i$=Pn,pg=i$.operators,s$={maximum:{okStr:"<=",ok:pg.LTE,fail:pg.GT},minimum:{okStr:">=",ok:pg.GTE,fail:pg.LT},exclusiveMaximum:{okStr:"<",ok:pg.LT,fail:pg.GTE},exclusiveMinimum:{okStr:">",ok:pg.GT,fail:pg.LTE}},FAt={message:({keyword:e,schemaCode:t})=>(0,i$.str)`must be ${s$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,i$._)`{comparison: ${s$[e].okStr}, limit: ${t}}`},jAt={keyword:Object.keys(s$),type:"number",schemaType:"number",$data:!0,error:FAt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,i$._)`${n} ${s$[t].fail} ${r} || isNaN(${n})`)}};uQ.default=jAt;var lQ={};Object.defineProperty(lQ,"__esModule",{value:!0});const uC=Pn,BAt={message:({schemaCode:e})=>(0,uC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,uC._)`{multipleOf: ${e}}`},UAt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:BAt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,uC._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,uC._)`${o} !== parseInt(${o})`;e.fail$data((0,uC._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};lQ.default=UAt;var cQ={},fQ={};Object.defineProperty(fQ,"__esModule",{value:!0});function Oke(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}fQ.default=Oke;Oke.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(cQ,"__esModule",{value:!0});const D1=Pn,zAt=wt,VAt=fQ,HAt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,D1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,D1._)`{limit: ${e}}`},qAt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:HAt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?D1.operators.GT:D1.operators.LT,o=i.opts.unicode===!1?(0,D1._)`${n}.length`:(0,D1._)`${(0,zAt.useFunc)(e.gen,VAt.default)}(${n})`;e.fail$data((0,D1._)`${o} ${s} ${r}`)}};cQ.default=qAt;var dQ={};Object.defineProperty(dQ,"__esModule",{value:!0});const WAt=kn,o$=Pn,GAt={message:({schemaCode:e})=>(0,o$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,o$._)`{pattern: ${e}}`},YAt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:GAt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,o$._)`(new RegExp(${i}, ${o}))`:(0,WAt.usePattern)(e,r);e.fail$data((0,o$._)`!${a}.test(${t})`)}};dQ.default=YAt;var hQ={};Object.defineProperty(hQ,"__esModule",{value:!0});const lC=Pn,KAt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,lC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,lC._)`{limit: ${e}}`},XAt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:KAt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?lC.operators.GT:lC.operators.LT;e.fail$data((0,lC._)`Object.keys(${n}).length ${i} ${r}`)}};hQ.default=XAt;var pQ={};Object.defineProperty(pQ,"__esModule",{value:!0});const hT=kn,cC=Pn,QAt=wt,JAt={message:({params:{missingProperty:e}})=>(0,cC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,cC._)`{missingProperty: ${e}}`},ZAt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:JAt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,QAt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(cC.nil,f);else for(const h of n)(0,hT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,hT.checkMissingProp)(e,n,h)),(0,hT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,hT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,hT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,cC.not)(p),()=>{e.error(),t.break()})},cC.nil)}}};pQ.default=ZAt;var mQ={};Object.defineProperty(mQ,"__esModule",{value:!0});const fC=Pn,eCt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,fC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,fC._)`{limit: ${e}}`},tCt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:eCt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?fC.operators.GT:fC.operators.LT;e.fail$data((0,fC._)`${n}.length ${i} ${r}`)}};mQ.default=tCt;var gQ={},pk={};Object.defineProperty(pk,"__esModule",{value:!0});const $ke=fY;$ke.code='require("ajv/dist/runtime/equal").default';pk.default=$ke;Object.defineProperty(gQ,"__esModule",{value:!0});const $j=Es,yo=Pn,nCt=wt,rCt=pk,iCt={message:({params:{i:e,j:t}})=>(0,yo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,yo._)`{i: ${e}, j: ${t}}`},sCt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:iCt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,$j.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,yo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,yo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,yo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,$j.checkDataTypes)(l,g,a.opts.strictNumbers,$j.DataType.Wrong),v=t.const("indices",(0,yo._)`{}`);t.for((0,yo._)`;${p}--;`,()=>{t.let(g,(0,yo._)`${n}[${p}]`),t.if(y,(0,yo._)`continue`),l.length>1&&t.if((0,yo._)`typeof ${g} == "string"`,(0,yo._)`${g} += "_"`),t.if((0,yo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,yo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,yo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,nCt.useFunc)(t,rCt.default),y=t.name("outer");t.label(y).for((0,yo._)`;${p}--;`,()=>t.for((0,yo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,yo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};gQ.default=sCt;var yQ={};Object.defineProperty(yQ,"__esModule",{value:!0});const Mz=Pn,oCt=wt,aCt=pk,uCt={message:"must be equal to constant",params:({schemaCode:e})=>(0,Mz._)`{allowedValue: ${e}}`},lCt={keyword:"const",$data:!0,error:uCt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,Mz._)`!${(0,oCt.useFunc)(t,aCt.default)}(${n}, ${i})`):e.fail((0,Mz._)`${s} !== ${n}`)}};yQ.default=lCt;var vQ={};Object.defineProperty(vQ,"__esModule",{value:!0});const lA=Pn,cCt=wt,fCt=pk,dCt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,lA._)`{allowedValues: ${e}}`},hCt={keyword:"enum",schemaType:"array",$data:!0,error:dCt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,cCt.useFunc)(t,fCt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,lA.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,lA._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,lA._)`${l()}(${n}, ${h}[${p}])`:(0,lA._)`${n} === ${m}`}}};vQ.default=hCt;Object.defineProperty(aQ,"__esModule",{value:!0});const pCt=uQ,mCt=lQ,gCt=cQ,yCt=dQ,vCt=hQ,bCt=pQ,_Ct=mQ,wCt=gQ,ECt=yQ,xCt=vQ,SCt=[pCt.default,mCt.default,gCt.default,yCt.default,vCt.default,bCt.default,_Ct.default,wCt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},ECt.default,xCt.default];aQ.default=SCt;var bQ={},iS={};Object.defineProperty(iS,"__esModule",{value:!0});iS.validateAdditionalItems=void 0;const O1=Pn,Lz=wt,TCt={message:({params:{len:e}})=>(0,O1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,O1._)`{limit: ${e}}`},ACt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:TCt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,Lz.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}Mke(e,r)}};function Mke(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,O1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,O1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,Lz.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,O1._)`${a} <= ${t.length}`);n.if((0,O1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:Lz.Type.Num},l),o.allErrors||n.if((0,O1.not)(l),()=>n.break())})}}iS.validateAdditionalItems=Mke;iS.default=ACt;var _Q={},sS={};Object.defineProperty(sS,"__esModule",{value:!0});sS.validateTuple=void 0;const Efe=Pn,nD=wt,CCt=kn,ICt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Lke(e,"additionalItems",t);n.items=!0,!(0,nD.alwaysValidSchema)(n,t)&&e.ok((0,CCt.validateArray)(e))}};function Lke(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=nD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Efe._)`${s}.length`);n.forEach((f,d)=>{(0,nD.alwaysValidSchema)(a,f)||(r.if((0,Efe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,nD.checkStrictMode)(a,g,d.strictTuples)}}}sS.validateTuple=Lke;sS.default=ICt;Object.defineProperty(_Q,"__esModule",{value:!0});const kCt=sS,RCt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,kCt.validateTuple)(e,"items")};_Q.default=RCt;var wQ={};Object.defineProperty(wQ,"__esModule",{value:!0});const xfe=Pn,NCt=wt,PCt=kn,DCt=iS,OCt={message:({params:{len:e}})=>(0,xfe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,xfe._)`{limit: ${e}}`},$Ct={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:OCt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,NCt.alwaysValidSchema)(r,t)&&(i?(0,DCt.validateAdditionalItems)(e,i):e.ok((0,PCt.validateArray)(e)))}};wQ.default=$Ct;var EQ={};Object.defineProperty(EQ,"__esModule",{value:!0});const nc=Pn,IN=wt,MCt={message:({params:{min:e,max:t}})=>t===void 0?(0,nc.str)`must contain at least ${e} valid item(s)`:(0,nc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,nc._)`{minContains: ${e}}`:(0,nc._)`{minContains: ${e}, maxContains: ${t}}`},LCt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:MCt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,nc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,IN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,IN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,IN.alwaysValidSchema)(s,n)){let m=(0,nc._)`${c} >= ${o}`;a!==void 0&&(m=(0,nc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,nc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:IN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,nc._)`${m}++`),a===void 0?t.if((0,nc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,nc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,nc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};EQ.default=LCt;var Fke={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pn,n=wt,r=kn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(Fke);var xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const jke=Pn,FCt=wt,jCt={message:"property name must be valid",params:({params:e})=>(0,jke._)`{propertyName: ${e.propertyName}}`},BCt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:jCt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,FCt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,jke.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};xQ.default=BCt;var O6={};Object.defineProperty(O6,"__esModule",{value:!0});const kN=kn,Jc=Pn,UCt=Hh,RN=wt,zCt={message:"must NOT have additional properties",params:({params:e})=>(0,Jc._)`{additionalProperty: ${e.additionalProperty}}`},VCt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:zCt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,RN.alwaysValidSchema)(o,n))return;const l=(0,kN.allSchemaProperties)(r.properties),c=(0,kN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Jc._)`${s} === ${UCt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,RN.schemaRefOrVal)(o,r.properties,"properties");y=(0,kN.isOwnProperty)(t,v,g)}else l.length?y=(0,Jc.or)(...l.map(v=>(0,Jc._)`${g} === ${v}`)):y=Jc.nil;return c.length&&(y=(0,Jc.or)(y,...c.map(v=>(0,Jc._)`${(0,kN.usePattern)(e,v)}.test(${g})`))),(0,Jc.not)(y)}function h(g){t.code((0,Jc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,RN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Jc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Jc.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:RN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};O6.default=VCt;var SQ={};Object.defineProperty(SQ,"__esModule",{value:!0});const HCt=Nf,Sfe=kn,Mj=wt,Tfe=O6,qCt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Tfe.default.code(new HCt.KeywordCxt(s,Tfe.default,"additionalProperties"));const o=(0,Sfe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Mj.mergeEvaluated.props(t,(0,Mj.toHash)(o),s.props));const a=o.filter(f=>!(0,Mj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Sfe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};SQ.default=qCt;var TQ={};Object.defineProperty(TQ,"__esModule",{value:!0});const Afe=kn,NN=Pn,Cfe=wt,Ife=wt,WCt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Afe.allSchemaProperties)(n),u=a.filter(m=>(0,Cfe.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof NN.Name)&&(s.props=(0,Ife.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Cfe.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,NN._)`${(0,Afe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Ife.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,NN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,NN.not)(c),()=>t.break())})})}}};TQ.default=WCt;var AQ={};Object.defineProperty(AQ,"__esModule",{value:!0});const GCt=wt,YCt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,GCt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};AQ.default=YCt;var CQ={};Object.defineProperty(CQ,"__esModule",{value:!0});const KCt=kn,XCt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:KCt.validateUnion,error:{message:"must match a schema in anyOf"}};CQ.default=XCt;var IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});const rD=Pn,QCt=wt,JCt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,rD._)`{passingSchemas: ${e.passing}}`},ZCt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:JCt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,QCt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,rD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,rD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,rD.Name)})})}}};IQ.default=ZCt;var kQ={};Object.defineProperty(kQ,"__esModule",{value:!0});const e2t=wt,t2t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,e2t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};kQ.default=t2t;var RQ={};Object.defineProperty(RQ,"__esModule",{value:!0});const a$=Pn,Bke=wt,n2t={message:({params:e})=>(0,a$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,a$._)`{failingKeyword: ${e.ifClause}}`},r2t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:n2t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Bke.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=kfe(r,"then"),s=kfe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,a$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,a$._)`${c}`):e.setParams({ifClause:c})}}}};function kfe(e,t){const n=e.schema[t];return n!==void 0&&!(0,Bke.alwaysValidSchema)(e,n)}RQ.default=r2t;var NQ={};Object.defineProperty(NQ,"__esModule",{value:!0});const i2t=wt,s2t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,i2t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};NQ.default=s2t;Object.defineProperty(bQ,"__esModule",{value:!0});const o2t=iS,a2t=_Q,u2t=sS,l2t=wQ,c2t=EQ,f2t=Fke,d2t=xQ,h2t=O6,p2t=SQ,m2t=TQ,g2t=AQ,y2t=CQ,v2t=IQ,b2t=kQ,_2t=RQ,w2t=NQ;function E2t(e=!1){const t=[g2t.default,y2t.default,v2t.default,b2t.default,_2t.default,w2t.default,d2t.default,h2t.default,f2t.default,p2t.default,m2t.default];return e?t.push(a2t.default,l2t.default):t.push(o2t.default,u2t.default),t.push(c2t.default),t}bQ.default=E2t;var PQ={},DQ={};Object.defineProperty(DQ,"__esModule",{value:!0});const es=Pn,x2t={message:({schemaCode:e})=>(0,es.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,es._)`{format: ${e}}`},S2t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:x2t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,es._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,es._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,es._)`${m}.type || "string"`).assign(y,(0,es._)`${m}.validate`),()=>n.assign(g,(0,es._)`"string"`).assign(y,m)),e.fail$data((0,es.or)(v(),b()));function v(){return u.strictSchema===!1?es.nil:(0,es._)`${o} && !${y}`}function b(){const w=c.$async?(0,es._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,es._)`${y}(${r})`,E=(0,es._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,es._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const S=E instanceof RegExp?(0,es.regexpCode)(E):u.code.formats?(0,es._)`${u.code.formats}${(0,es.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,es._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,es._)`await ${y}(${r})`}return typeof g=="function"?(0,es._)`${y}(${r})`:(0,es._)`${y}.test(${r})`}}}};DQ.default=S2t;Object.defineProperty(PQ,"__esModule",{value:!0});const T2t=DQ,A2t=[T2t.default];PQ.default=A2t;var LE={};Object.defineProperty(LE,"__esModule",{value:!0});LE.contentVocabulary=LE.metadataVocabulary=void 0;LE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];LE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(iQ,"__esModule",{value:!0});const C2t=sQ,I2t=aQ,k2t=bQ,R2t=PQ,Rfe=LE,N2t=[C2t.default,I2t.default,(0,k2t.default)(),R2t.default,Rfe.metadataVocabulary,Rfe.contentVocabulary];iQ.default=N2t;var OQ={},$6={};Object.defineProperty($6,"__esModule",{value:!0});$6.DiscrError=void 0;var Nfe;(function(e){e.Tag="tag",e.Mapping="mapping"})(Nfe||($6.DiscrError=Nfe={}));Object.defineProperty(OQ,"__esModule",{value:!0});const P_=Pn,Fz=$6,Pfe=xu,P2t=rS,D2t=wt,O2t={message:({params:{discrError:e,tagName:t}})=>e===Fz.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,P_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},$2t={keyword:"discriminator",type:"object",schemaType:"object",error:O2t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,P_._)`${n}${(0,P_.getProperty)(a)}`);t.if((0,P_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:Fz.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,P_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:Fz.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,P_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,D2t.schemaHasRulesButRef)(E,s.self.RULES)){const T=E.$ref;if(E=Pfe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),E instanceof Pfe.SchemaEnv&&(E=E.schema),E===void 0)throw new P2t.default(s.opts.uriResolver,s.baseId,T)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const S of w.enum)b(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};OQ.default=$2t;const M2t="http://json-schema.org/draft-07/schema#",L2t="http://json-schema.org/draft-07/schema#",F2t="Core schema meta-schema",j2t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},B2t=["object","boolean"],U2t={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},z2t={$schema:M2t,$id:L2t,title:F2t,definitions:j2t,type:B2t,properties:U2t,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=eke,r=iQ,i=OQ,s=z2t,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Nf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=hk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=rS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Rz,Rz.exports);var V2t=Rz.exports;const Uke=Ul(V2t),H2t="#/definitions/StudyConfig",q2t="http://json-schema.org/draft-07/schema#",W2t={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": {     "instructionLocation": "sidebar",     "nextButtonLocation": "sidebar",     "path": "<study-name>/assets/my-image.jpg",     "response": [         {             "id": "my-image-id",             "options": [                 {                     "label": "Europe",                     "value": "Europe"                 },                 {                     "label": "Japan",                     "value": "Japan"                 },                 {                     "label": "USA",                     "value": "USA"                 }             ],             "prompt": "Your Selected Answer:",             "type": "dropdown"         }     ],     "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {     "baseComponent": "my-image-component",     "description": "Choosing section with largest GDP",     "instruction": "Which region has the largest GDP?" }, "q2": {     "baseComponent": "my-image-component",     "description": "Choosing section with lowest GDP",     "instruction": "Which region has the lowest GDP?" }, "q3": {     "baseComponent": "my-image-component",     "description": "Choosing section with highest exports of Wheat",     "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js {  "id": "q7",  "prompt": "Checkbox example (not required)",  "required": false,  "location": "aboveStimulus",  "type": "checkbox",  "options": [      {          "label": "Option 1",          "value": "opt-1"      },      {          "label": "Option 2",          "value": "opt-2"      },      {          "label": "Option 3",          "value": "opt-3"      }  ] }',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js {  "id": "q-color",  "prompt": "What is your favorite color?",  "required": true,  "location": "aboveStimulus",  "type": "dropdown",  "placeholder": "Please choose your favorite color",  "options": [      {          "label": "Red",          "value": "red"      },      {          "label": "Blue",          "value": "blue"      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likerts Scale:

\`\`\`js {    "id": "q-satisfaction",    "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).",    "required": true,    "location": "aboveStimulus",    "type": "likert",    "leftLabel": "Not Enjoyable",    "rightLabel": "Very Enjoyable",    "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js {  "id": "q-name",  "prompt": "What is your first name?",  "required": true,  "location": "aboveStimulus",  "type": "longText",  "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js {  "id": "q-numerical",  "prompt": "Numerical example",  "required": true,  "location": "aboveStimulus",  "type": "numerical",  "placeholder": "Enter your age, range from 0 - 120",  "max": 120,  "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js {  "id": "q-short-text",  "prompt": "Short text example",  "required": true,  "location": "aboveStimulus",  "type": "shortText",  "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js {  "id": "q-slider",  "prompt": "How are you feeling?",  "location": "aboveStimulus",  "required": true,  "type": "slider",  "options": [      {          "label": "Bad",          "value": 0      },      {          "label": "OK",          "value": 50      },      {          "label": "Good",          "value": 100      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta13/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "contact@revisit.dev",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},G2t={$ref:H2t,$schema:q2t,definitions:W2t},Y2t="#/definitions/GlobalConfig",K2t="http://json-schema.org/draft-07/schema#",X2t={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},Q2t={$ref:Y2t,$schema:K2t,definitions:X2t},zke=new Uke;zke.addSchema(Q2t);const Dfe=zke.getSchema("#/definitions/GlobalConfig"),Vke=new Uke;Vke.addSchema(G2t);const Lj=Vke.getSchema("#/definitions/StudyConfig");function J2t(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function M6(e){return e.baseComponent!==void 0}function Z2t(e){const t=WX.parse(e),n=Dfe(t),r=J2t(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Dfe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Hke(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):Hke(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function eIt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;M6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=fEe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return Hke(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function tIt(e){let t=!1,n;try{n=WX.parse(e),t=Lj(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=eIt(n);r=[...Lj.errors||[],...s],i=o}else r=Lj.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function qke(){const e=qm(),{setAlertModal:t}=Fh(),n=jh();N.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}const Ofe=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],$fe=["participantId","trialId","trialOrder","responseId"];function $Q(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function nIt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(mm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=M6(u)&&u.baseComponent&&t.baseComponents?lY({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function rIt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=N.useState([...Ofe].filter(c=>c!=="meta")),a=N.useMemo(()=>{const c=[...$fe,...s],f=c,d=i.map(h=>nIt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=N.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);$Q(c,n)},[n,a.header,a.rows]),l=N.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return _.jsxs(vs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(dG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Ofe],value:s,onChange:c=>o(c),label:"Included optional columns:",leftSection:_.jsx(nKe,{}),variant:"filled"}),_.jsx(kf,{h:"md"}),_.jsx(Ee,{mih:300,style:{width:"100%",overflow:"scroll"},children:_.jsxs(An,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:a.header.map(c=>_.jsx(An.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:_.jsxs(Jt,{direction:"row",justify:"space-between",align:"center",children:[c,!$fe.includes(c)&&_.jsx(P0,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(v_e,{size:16})})]})},c))})}),_.jsx(An.Tbody,{children:a.rows.slice(0,5).map((c,f)=>_.jsx(An.Tr,{children:a.header.map(d=>_.jsx(An.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),_.jsx(kf,{h:"sm"}),_.jsx(Jt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(st,{children:l})}),_.jsx(kf,{h:"md"}),_.jsxs(Os,{justify:"right",children:[_.jsx(Rn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Rn,{leftSection:_.jsx(g_e,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function iIt(){const e=gm(),{storageEngine:t}=wa(),{answers:n}=Lc(m=>m),[r,i]=N.useState(!1);N.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),qke();const[s,o]=N.useState(),[a,u]=N.useState(""),l=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=N.useCallback(async()=>{$Q(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=N.useState(Math.floor(d/1e3));return N.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),_.jsx(dm,{style:{height:"100%"},children:_.jsx(Jt,{direction:"column",children:r?_.jsx(st,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ga,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(st,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(kf,{h:"lg"}),_.jsx(dm,{children:_.jsx(Bm,{color:"blue"})})]})})})}function sIt(){var d;const e=gm(),t=qm(),n=Wm()||"Notfound",r=e.components[n],i=cY();qke();const{storageEngine:s}=wa(),o=jh(),{setAlertModal:a}=Fh();if(N.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(iIt,{});if(n==="Notfound")return _.jsx(Nv,{email:e.uiConfig.contactEmail});const u=M6(r)&&e.baseComponents?lY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Ga,{text:l}),_.jsx(kO,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(cSt,{currentConfig:u}),u.type==="website"&&_.jsx(sst,{currentConfig:u}),u.type==="image"&&_.jsx(ast,{currentConfig:u}),u.type==="react-component"&&_.jsx(lSt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Ga,{text:l}),_.jsx(kO,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function jz(e){const[t]=OG();return _.jsx(DG,{...e,to:{pathname:e.to,search:t.toString()}})}function Wke(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=Wke(o,t,n,r),r.includes(o.orderPath))break}return i}function Gke(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=Gke(s,r)}}),n}function oIt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function aIt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=UI(),u=Hm(),l=qm(),c=gm(),[f,{close:d,open:h}]=yw(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?Wke(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return _.jsxs(Jr,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[_.jsx(Jr.Target,{children:_.jsx(Ee,{onMouseEnter:h,onMouseLeave:d,children:_.jsx(lL,{active:g,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(Ee,{children:[i&&_.jsx(GYe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?_.jsx(st,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(st,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(Jr.Dropdown,{onMouseLeave:d,children:_.jsx(st,{size:"sm",children:_.jsxs(Ee,{children:[p.description&&_.jsxs(Ee,{children:[_.jsx(st,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(st,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(st,{children:[_.jsx(st,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(st,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function Bz({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=cv(e.components);return n&&r&&(i=oIt(cv(e.components),cv(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx(_.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return _.jsx(aIt,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?mm(u).length-Gke(o,u):0,c=mm(o);return _.jsx(lL,{label:_.jsxs(Ee,{style:{opacity:l>0?1:.5},children:[_.jsx(st,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(qYe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(Jd,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(Jd,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(Ee,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(Bz,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function Yke(e,t,n,r){e==null||e.nextParticipant(t,n).then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Kke(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Kke(n,`${t}-${r}`))}}function Mfe({text:e}){return _.jsx(Fa,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(tKe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function uIt(){const{showStudyBrowser:e,sequence:t,metadata:n}=Lc(h=>h),{toggleStudyBrowser:r}=Fh(),i=Wm(),s=gm(),o=jh(),a=UI(),u=c_e(`/${a}`),{storageEngine:l}=wa(),c=N.useMemo(()=>{let h=cv(s.sequence);return h=Kke(h,"root"),h.components.push("end"),h},[s.sequence]),[f,d]=N.useState("participant");return e||i==="end"&&s.uiConfig.autoDownloadStudy?_.jsxs(fi.Aside,{p:"0",children:[_.jsx(fi.Section,{children:_.jsxs(Jt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(st,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Rn,{variant:"light",leftSection:_.jsx(MG,{size:14}),onClick:()=>Yke(l,s,n,u),size:"xs",disabled:f==="allTrials",children:"Next Participant"}),_.jsx(wy,{onClick:()=>o(r()),mt:1})]})}),_.jsx(fi.Section,{grow:!0,component:Lm,p:"xs",pt:0,children:_.jsxs(ts,{value:f,onChange:d,children:[_.jsx(Ee,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(ts.List,{grow:!0,children:[_.jsxs(ts.Tab,{value:"participant",children:["Participant View",_.jsx(Mfe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(ts.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Mfe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(ts.Panel,{value:"participant",children:_.jsx(Bz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!0})}),_.jsx(ts.Panel,{value:"allTrials",children:_.jsx(Bz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!1})})]})})]}):null}var Lfe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xke=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},lIt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},MQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xke(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lIt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new cIt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class cIt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fIt=function(e){const t=Xke(e);return MQ.encodeByteArray(t,!0)},u$=function(e){return fIt(e).replace(/\./g,"")},Qke=function(e){try{return MQ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dIt=()=>Jke().__FIREBASE_DEFAULTS__,hIt=()=>{if(typeof process>"u"||typeof Lfe>"u")return;const e=Lfe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},pIt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Qke(e[1]);return t&&JSON.parse(t)},L6=()=>{try{return dIt()||hIt()||pIt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Zke=e=>{var t,n;return(n=(t=L6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},mIt=e=>{const t=Zke(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},eRe=()=>{var e;return(e=L6())===null||e===void 0?void 0:e.config},tRe=e=>{var t;return(t=L6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gIt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u$(JSON.stringify(n)),u$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yIt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oo())}function vIt(){var e;const t=(e=L6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bIt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _It(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wIt(){const e=Oo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function EIt(){return!vIt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LQ(){try{return typeof indexedDB=="object"}catch{return!1}}function xIt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SIt="FirebaseError";class qh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=SIt,Object.setPrototypeOf(this,qh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oS.prototype.create)}}class oS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?TIt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qh(i,a,r)}}function TIt(e,t){return e.replace(AIt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const AIt=/\{\$([^}]+)}/g;function CIt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O2(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Ffe(s)&&Ffe(o)){if(!O2(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ffe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function IIt(e,t){const n=new kIt(e,t);return n.subscribe.bind(n)}class kIt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RIt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Fj),i.error===void 0&&(i.error=Fj),i.complete===void 0&&(i.complete=Fj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RIt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Fj(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NIt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PIt=1e3,DIt=2,OIt=4*60*60*1e3,$It=.5;function MIt(e,t=PIt,n=DIt){const r=t*Math.pow(n,e),i=Math.round($It*r*(Math.random()-.5)*2);return Math.min(OIt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(e){return e&&e._delegate?e._delegate:e}class Eh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LIt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new D2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jIt(t))try{this.getOrInitializeService({instanceIdentifier:S1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=S1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=S1){return this.instances.has(t)}getOptions(t=S1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FIt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=S1){return this.component?this.component.multipleInstances?t:S1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FIt(e){return e===S1?void 0:e}function jIt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BIt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new LIt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const UIt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},zIt=Gn.INFO,VIt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},HIt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=VIt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class F6{constructor(t){this.name=t,this._logLevel=zIt,this._logHandler=HIt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?UIt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const qIt=(e,t)=>t.some(n=>e instanceof n);let jfe,Bfe;function WIt(){return jfe||(jfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GIt(){return Bfe||(Bfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nRe=new WeakMap,Uz=new WeakMap,rRe=new WeakMap,jj=new WeakMap,FQ=new WeakMap;function YIt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(v0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&nRe.set(n,e)}).catch(()=>{}),FQ.set(t,e),t}function KIt(e){if(Uz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Uz.set(e,t)}let zz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Uz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||rRe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function XIt(e){zz=e(zz)}function QIt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Bj(this),t,...n);return rRe.set(r,t.sort?t.sort():[t]),v0(r)}:GIt().includes(e)?function(...t){return e.apply(Bj(this),t),v0(nRe.get(this))}:function(...t){return v0(e.apply(Bj(this),t))}}function JIt(e){return typeof e=="function"?QIt(e):(e instanceof IDBTransaction&&KIt(e),qIt(e,WIt())?new Proxy(e,zz):e)}function v0(e){if(e instanceof IDBRequest)return YIt(e);if(jj.has(e))return jj.get(e);const t=JIt(e);return t!==e&&(jj.set(e,t),FQ.set(t,e)),t}const Bj=e=>FQ.get(e);function ZIt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=v0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(v0(o.result),u.oldVersion,u.newVersion,v0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const ekt=["get","getKey","getAll","getAllKeys","count"],tkt=["put","add","delete","clear"],Uj=new Map;function Ufe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Uj.get(t))return Uj.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=tkt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ekt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Uj.set(t,s),s}XIt(e=>({...e,get:(t,n,r)=>Ufe(t,n)||e.get(t,n,r),has:(t,n)=>!!Ufe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nkt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rkt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rkt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Vz="@firebase/app",zfe="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new F6("@firebase/app"),ikt="@firebase/app-compat",skt="@firebase/analytics-compat",okt="@firebase/analytics",akt="@firebase/app-check-compat",ukt="@firebase/app-check",lkt="@firebase/auth",ckt="@firebase/auth-compat",fkt="@firebase/database",dkt="@firebase/database-compat",hkt="@firebase/functions",pkt="@firebase/functions-compat",mkt="@firebase/installations",gkt="@firebase/installations-compat",ykt="@firebase/messaging",vkt="@firebase/messaging-compat",bkt="@firebase/performance",_kt="@firebase/performance-compat",wkt="@firebase/remote-config",Ekt="@firebase/remote-config-compat",xkt="@firebase/storage",Skt="@firebase/storage-compat",Tkt="@firebase/firestore",Akt="@firebase/vertexai-preview",Ckt="@firebase/firestore-compat",Ikt="firebase",kkt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz="[DEFAULT]",Rkt={[Vz]:"fire-core",[ikt]:"fire-core-compat",[okt]:"fire-analytics",[skt]:"fire-analytics-compat",[ukt]:"fire-app-check",[akt]:"fire-app-check-compat",[lkt]:"fire-auth",[ckt]:"fire-auth-compat",[fkt]:"fire-rtdb",[dkt]:"fire-rtdb-compat",[hkt]:"fire-fn",[pkt]:"fire-fn-compat",[mkt]:"fire-iid",[gkt]:"fire-iid-compat",[ykt]:"fire-fcm",[vkt]:"fire-fcm-compat",[bkt]:"fire-perf",[_kt]:"fire-perf-compat",[wkt]:"fire-rc",[Ekt]:"fire-rc-compat",[xkt]:"fire-gcs",[Skt]:"fire-gcs-compat",[Tkt]:"fire-fst",[Ckt]:"fire-fst-compat",[Akt]:"fire-vertex","fire-js":"fire-js",[Ikt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l$=new Map,Nkt=new Map,qz=new Map;function Vfe(e,t){try{e.container.addComponent(t)}catch(n){qv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Im(e){const t=e.name;if(qz.has(t))return qv.debug(`There were multiple attempts to register component ${t}.`),!1;qz.set(t,e);for(const n of l$.values())Vfe(n,e);for(const n of Nkt.values())Vfe(n,e);return!0}function aS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pkt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},b0=new oS("app","Firebase",Pkt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dkt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Eh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw b0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=kkt;function iRe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Hz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw b0.create("bad-app-name",{appName:String(i)});if(n||(n=eRe()),!n)throw b0.create("no-options");const s=l$.get(i);if(s){if(O2(n,s.options)&&O2(r,s.config))return s;throw b0.create("duplicate-app",{appName:i})}const o=new BIt(i);for(const u of qz.values())o.addComponent(u);const a=new Dkt(n,r,o);return l$.set(i,a),a}function jQ(e=Hz){const t=l$.get(e);if(!t&&e===Hz&&eRe())return iRe();if(!t)throw b0.create("no-app",{appName:e});return t}function Pf(e,t,n){var r;let i=(r=Rkt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),qv.warn(a.join(" "));return}Im(new Eh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Okt="firebase-heartbeat-database",$kt=1,$2="firebase-heartbeat-store";let zj=null;function sRe(){return zj||(zj=ZIt(Okt,$kt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($2)}catch(n){console.warn(n)}}}}).catch(e=>{throw b0.create("idb-open",{originalErrorMessage:e.message})})),zj}async function Mkt(e){try{const n=(await sRe()).transaction($2),r=await n.objectStore($2).get(oRe(e));return await n.done,r}catch(t){if(t instanceof qh)qv.warn(t.message);else{const n=b0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});qv.warn(n.message)}}}async function Hfe(e,t){try{const r=(await sRe()).transaction($2,"readwrite");await r.objectStore($2).put(t,oRe(e)),await r.done}catch(n){if(n instanceof qh)qv.warn(n.message);else{const r=b0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qv.warn(r.message)}}}function oRe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lkt=1024,Fkt=30*24*60*60*1e3;class jkt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ukt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qfe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Fkt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qfe(),{heartbeatsToSend:r,unsentEntries:i}=Bkt(this._heartbeatsCache.heartbeats),s=u$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qfe(){return new Date().toISOString().substring(0,10)}function Bkt(e,t=Lkt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wfe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wfe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ukt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LQ()?xIt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Mkt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hfe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hfe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Wfe(e){return u$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zkt(e){Im(new Eh("platform-logger",t=>new nkt(t),"PRIVATE")),Im(new Eh("heartbeat",t=>new jkt(t),"PRIVATE")),Pf(Vz,zfe,e),Pf(Vz,zfe,"esm2017"),Pf("fire-js","")}zkt("");function aRe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vkt=aRe,uRe=new oS("auth","Firebase",aRe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=new F6("@firebase/auth");function Hkt(e,...t){c$.logLevel<=Gn.WARN&&c$.warn(`Auth (${kb}): ${e}`,...t)}function iD(e,...t){c$.logLevel<=Gn.ERROR&&c$.error(`Auth (${kb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(e,...t){throw UQ(e,...t)}function Df(e,...t){return UQ(e,...t)}function BQ(e,t,n){const r=Object.assign(Object.assign({},Vkt()),{[t]:n});return new oS("auth","Firebase",r).create(t,{appName:e.name})}function _0(e){return BQ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qkt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&xh(e,"argument-error"),BQ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function UQ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return uRe.create(e,...t)}function rn(e,t,...n){if(!e)throw UQ(t,...n)}function Up(e){const t="INTERNAL ASSERTION FAILED: "+e;throw iD(t),new Error(t)}function km(e,t){e||Up(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Wkt(){return Gfe()==="http:"||Gfe()==="https:"}function Gfe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gkt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wkt()||bIt()||"connection"in navigator)?navigator.onLine:!0}function Ykt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(t,n){this.shortDelay=t,this.longDelay=n,km(n>t,"Short delay should be less than long delay!"),this.isMobile=yIt()||_It()}get(){return Gkt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(e,t){km(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lRe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Up("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Up("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Up("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kkt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xkt=new gk(3e4,6e4);function j6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function uS(e,t,n,r,i={}){return cRe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=mk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),lRe.fetch()(dRe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function cRe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Kkt),t);try{const i=new Qkt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw PN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw PN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw PN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw PN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw BQ(e,c,l);xh(e,c)}}catch(i){if(i instanceof qh)throw i;xh(e,"network-request-failed",{message:String(i)})}}async function fRe(e,t,n,r,i={}){const s=await uS(e,t,n,r,i);return"mfaPendingCredential"in s&&xh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function dRe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?zQ(e.config,i):`${e.config.apiScheme}://${i}`}class Qkt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Df(this.auth,"network-request-failed")),Xkt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function PN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Df(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jkt(e,t){return uS(e,"POST","/v1/accounts:delete",t)}async function hRe(e,t){return uS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Zkt(e,t=!1){const n=ri(e),r=await n.getIdToken(t),i=VQ(r);rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:dC(Vj(i.auth_time)),issuedAtTime:dC(Vj(i.iat)),expirationTime:dC(Vj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vj(e){return Number(e)*1e3}function VQ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return iD("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qke(n);return i?JSON.parse(i):(iD("Failed to decode base64 JWT payload"),null)}catch(i){return iD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Yfe(e){const t=VQ(e);return rn(t,"internal-error"),rn(typeof t.exp<"u","internal-error"),rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof qh&&eRt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function eRt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tRt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=dC(this.lastLoginAt),this.creationTime=dC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await M2(e,hRe(n,{idToken:r}));rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?pRe(s.providerUserInfo):[],a=rRt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gz(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function nRt(e){const t=ri(e);await f$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function rRt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function pRe(e){return e.map(t=>{var{providerId:n}=t,r=xI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iRt(e,t){const n=await cRe(e,{},async()=>{const r=mk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=dRe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",lRe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sRt(e,t){return uS(e,"POST","/v2/accounts:revokeToken",j6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){rn(t.idToken,"internal-error"),rn(typeof t.idToken<"u","internal-error"),rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Yfe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){rn(t.length!==0,"internal-error");const n=Yfe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iRt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Lw;return r&&(rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Lw,this.toJSON())}_performRefresh(){return Up("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(e,t){rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class zp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=xI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tRt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Gz(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await M2(this,this.stsTokenManager.getToken(this.auth,t));return rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Zkt(this,t)}reload(){return nRt(this)}_assign(t){this!==t&&(rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await f$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wd(this.auth.app))return Promise.reject(_0(this.auth));const t=await this.getIdToken();return await M2(this,Jkt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:T}=n;rn(b&&T,t,"internal-error");const A=Lw.fromJSON(this.name,T);rn(typeof b=="string",t,"internal-error"),mg(f,t.name),mg(d,t.name),rn(typeof w=="boolean",t,"internal-error"),rn(typeof E=="boolean",t,"internal-error"),mg(h,t.name),mg(p,t.name),mg(m,t.name),mg(g,t.name),mg(y,t.name),mg(v,t.name);const C=new zp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(C.providerData=S.map(I=>Object.assign({},I))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new Lw;i.updateFromServerResponse(n);const s=new zp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await f$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?pRe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Lw;a.updateFromIdToken(r);const u=new zp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Gz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kfe=new Map;function Vp(e){km(e instanceof Function,"Expected a class definition");let t=Kfe.get(e);return t?(km(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kfe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mRe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}mRe.type="NONE";const Xfe=mRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(e,t,n){return`firebase:${e}:${t}:${n}`}class Fw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=sD(this.userKey,i.apiKey,s),this.fullPersistenceKey=sD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?zp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Fw(Vp(Xfe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Vp(Xfe);const o=sD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=zp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Fw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Fw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qfe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vRe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gRe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_Re(t))return"Blackberry";if(wRe(t))return"Webos";if(HQ(t))return"Safari";if((t.includes("chrome/")||yRe(t))&&!t.includes("edge/"))return"Chrome";if(bRe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gRe(e=Oo()){return/firefox\//i.test(e)}function HQ(e=Oo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function yRe(e=Oo()){return/crios\//i.test(e)}function vRe(e=Oo()){return/iemobile/i.test(e)}function bRe(e=Oo()){return/android/i.test(e)}function _Re(e=Oo()){return/blackberry/i.test(e)}function wRe(e=Oo()){return/webos/i.test(e)}function B6(e=Oo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oRt(e=Oo()){var t;return B6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function aRt(){return wIt()&&document.documentMode===10}function ERe(e=Oo()){return B6(e)||bRe(e)||wRe(e)||_Re(e)||/windows phone/i.test(e)||vRe(e)}function uRt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xRe(e,t=[]){let n;switch(e){case"Browser":n=Qfe(Oo());break;case"Worker":n=`${Qfe(Oo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lRt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cRt(e,t={}){return uS(e,"GET","/v2/passwordPolicy",j6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fRt=6;class dRt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fRt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hRt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jfe(this),this.idTokenSubscription=new Jfe(this),this.beforeStateQueue=new lRt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uRe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Vp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await hRe(this,{idToken:t}),r=await zp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Wd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await f$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Ykt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Wd(this.app))return Promise.reject(_0(this));const n=t?ri(t):null;return n&&rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Wd(this.app)?Promise.reject(_0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Wd(this.app)?Promise.reject(_0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await cRt(this),n=new dRt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new oS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sRt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Vp(t)||this._popupRedirectResolver;rn(n,this,"argument-error"),this.redirectPersistenceManager=await Fw.create(this,[Vp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xRe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Hkt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yk(e){return ri(e)}class Jfe{constructor(t){this.auth=t,this.observer=null,this.addObserver=IIt(n=>this.observer=n)}get next(){return rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qQ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pRt(e){qQ=e}function mRt(e){return qQ.loadJS(e)}function gRt(){return qQ.gapiScript}function yRt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vRt(e,t){const n=aS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(O2(s,t??{}))return i;xh(i,"already-initialized")}return n.initialize({options:t})}function bRt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function _Rt(e,t,n){const r=yk(e);rn(r._canInitEmulator,r,"emulator-config-failed"),rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=SRe(t),{host:o,port:a}=wRt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ERt()}function SRe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wRt(e){const t=SRe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Zfe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Zfe(o)}}}function Zfe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ERt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TRe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Up("not implemented")}_getIdTokenResponse(t){return Up("not implemented")}_linkToIdToken(t,n){return Up("not implemented")}_getReauthenticationResolver(t){return Up("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(e,t){return fRe(e,"POST","/v1/accounts:signInWithIdp",j6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xRt="http://localhost";class Wv extends TRe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Wv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):xh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=xI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Wv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return jw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,jw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,jw(t,n)}buildRequest(){const t={requestUri:xRt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=mk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk extends WQ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends vk{constructor(){super("facebook.com")}static credential(t){return Wv._fromParams({providerId:Lg.PROVIDER_ID,signInMethod:Lg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lg.credentialFromTaggedObject(t)}static credentialFromError(t){return Lg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lg.credential(t.oauthAccessToken)}catch{return null}}}Lg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends vk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Wv._fromParams({providerId:Pp.PROVIDER_ID,signInMethod:Pp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pp.credentialFromTaggedObject(t)}static credentialFromError(t){return Pp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Pp.credential(n,r)}catch{return null}}}Pp.GOOGLE_SIGN_IN_METHOD="google.com";Pp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends vk{constructor(){super("github.com")}static credential(t){return Wv._fromParams({providerId:Fg.PROVIDER_ID,signInMethod:Fg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fg.credentialFromTaggedObject(t)}static credentialFromError(t){return Fg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fg.credential(t.oauthAccessToken)}catch{return null}}}Fg.GITHUB_SIGN_IN_METHOD="github.com";Fg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends vk{constructor(){super("twitter.com")}static credential(t,n){return Wv._fromParams({providerId:jg.PROVIDER_ID,signInMethod:jg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return jg.credentialFromTaggedObject(t)}static credentialFromError(t){return jg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jg.credential(n,r)}catch{return null}}}jg.TWITTER_SIGN_IN_METHOD="twitter.com";jg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SRt(e,t){return fRe(e,"POST","/v1/accounts:signUp",j6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await zp._fromIdTokenResponse(t,r,i),o=ede(r);return new J0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=ede(r);return new J0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function ede(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TRt(e){var t;if(Wd(e.app))return Promise.reject(_0(e));const n=yk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new J0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await SRt(n,{returnSecureToken:!0}),i=await J0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d$ extends qh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,d$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new d$(t,n,r,i)}}function ARe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?d$._fromErrorAndOperation(e,s,t,r):s})}async function ARt(e,t,n=!1){const r=await M2(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return J0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CRt(e,t,n=!1){const{auth:r}=e;if(Wd(r.app))return Promise.reject(_0(r));const i="reauthenticate";try{const s=await M2(e,ARe(r,i,t,e),n);rn(s.idToken,r,"internal-error");const o=VQ(s.idToken);rn(o,r,"internal-error");const{sub:a}=o;return rn(e.uid===a,r,"user-mismatch"),J0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&xh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IRt(e,t,n=!1){if(Wd(e.app))return Promise.reject(_0(e));const r="signIn",i=await ARe(e,r,t),s=await J0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function kRt(e,t,n,r){return ri(e).onIdTokenChanged(t,n,r)}function RRt(e,t,n){return ri(e).beforeAuthStateChanged(t,n)}function NRt(e,t,n,r){return ri(e).onAuthStateChanged(t,n,r)}function PRt(e){return ri(e).signOut()}const h$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CRe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(h$,"1"),this.storage.removeItem(h$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DRt(){const e=Oo();return HQ(e)||B6(e)}const ORt=1e3,$Rt=10;class IRe extends CRe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=DRt()&&uRt(),this.fallbackToPolling=ERe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);aRt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,$Rt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},ORt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}IRe.type="LOCAL";const MRt=IRe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kRe extends CRe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}kRe.type="SESSION";const RRe=kRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LRt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new U6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await LRt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}U6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GQ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FRt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=GQ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(){return window}function jRt(e){oh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NRe(){return typeof oh().WorkerGlobalScope<"u"&&typeof oh().importScripts=="function"}async function BRt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function URt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function zRt(){return NRe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PRe="firebaseLocalStorageDb",VRt=1,p$="firebaseLocalStorage",DRe="fbase_key";class bk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function z6(e,t){return e.transaction([p$],t?"readwrite":"readonly").objectStore(p$)}function HRt(){const e=indexedDB.deleteDatabase(PRe);return new bk(e).toPromise()}function Yz(){const e=indexedDB.open(PRe,VRt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(p$,{keyPath:DRe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(p$)?t(r):(r.close(),await HRt(),t(await Yz()))})})}async function tde(e,t,n){const r=z6(e,!0).put({[DRe]:t,value:n});return new bk(r).toPromise()}async function qRt(e,t){const n=z6(e,!1).get(t),r=await new bk(n).toPromise();return r===void 0?null:r.value}function nde(e,t){const n=z6(e,!0).delete(t);return new bk(n).toPromise()}const WRt=800,GRt=3;class ORe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>GRt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NRe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=U6._getInstance(zRt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await BRt(),!this.activeServiceWorker)return;this.sender=new FRt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||URt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Yz();return await tde(t,h$,"1"),await nde(t,h$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>qRt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>nde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=z6(i,!1).getAll();return new bk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WRt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ORe.type="LOCAL";const YRt=ORe;new gk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Re(e,t){return t?Vp(t):(rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YQ extends TRe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return jw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return jw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function KRt(e){return IRt(e.auth,new YQ(e),e.bypassAuthState)}function XRt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),CRt(n,new YQ(e),e.bypassAuthState)}async function QRt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),ARt(n,new YQ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MRe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return KRt;case"linkViaPopup":case"linkViaRedirect":return QRt;case"reauthViaPopup":case"reauthViaRedirect":return XRt;default:xh(this.auth,"internal-error")}}resolve(t){km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JRt=new gk(2e3,1e4);async function ZRt(e,t,n){if(Wd(e.app))return Promise.reject(Df(e,"operation-not-supported-in-this-environment"));const r=yk(e);qkt(e,t,WQ);const i=$Re(r,n);return new nv(r,"signInViaPopup",t,i).executeNotNull()}class nv extends MRe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,nv.currentPopupAction&&nv.currentPopupAction.cancel(),nv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return rn(t,this.auth,"internal-error"),t}async onExecution(){km(this.filter.length===1,"Popup operations only handle one event");const t=GQ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Df(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Df(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Df(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,JRt.get())};t()}}nv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eNt="pendingRedirect",oD=new Map;class tNt extends MRe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=oD.get(this.auth._key());if(!t){try{const r=await nNt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}oD.set(this.auth._key(),t)}return this.bypassAuthState||oD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nNt(e,t){const n=sNt(t),r=iNt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rNt(e,t){oD.set(e._key(),t)}function iNt(e){return Vp(e._redirectPersistence)}function sNt(e){return sD(eNt,e.config.apiKey,e.name)}async function oNt(e,t,n=!1){if(Wd(e.app))return Promise.reject(_0(e));const r=yk(e),i=$Re(r,t),o=await new tNt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aNt=10*60*1e3;class uNt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lNt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!LRe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Df(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=aNt&&this.cachedEventUids.clear(),this.cachedEventUids.has(rde(t))}saveEventToCache(t){this.cachedEventUids.add(rde(t)),this.lastProcessedEventTime=Date.now()}}function rde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function LRe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function lNt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LRe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cNt(e,t={}){return uS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fNt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dNt=/^https?/;async function hNt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await cNt(e);for(const n of t)try{if(pNt(n))return}catch{}xh(e,"unauthorized-domain")}function pNt(e){const t=Wz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dNt.test(n))return!1;if(fNt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mNt=new gk(3e4,6e4);function ide(){const e=oh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function gNt(e){return new Promise((t,n)=>{var r,i,s;function o(){ide(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ide(),n(Df(e,"network-request-failed"))},timeout:mNt.get()})}if(!((i=(r=oh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=oh().gapi)===null||s===void 0)&&s.load)o();else{const a=yRt("iframefcb");return oh()[a]=()=>{gapi.load?o():n(Df(e,"network-request-failed"))},mRt(`${gRt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw aD=null,t})}let aD=null;function yNt(e){return aD=aD||gNt(e),aD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vNt=new gk(5e3,15e3),bNt="__/auth/iframe",_Nt="emulator/auth/iframe",wNt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ENt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xNt(e){const t=e.config;rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?zQ(t,_Nt):`https://${e.config.authDomain}/${bNt}`,r={apiKey:t.apiKey,appName:e.name,v:kb},i=ENt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mk(r).slice(1)}`}async function SNt(e){const t=await yNt(e),n=oh().gapi;return rn(n,e,"internal-error"),t.open({where:document.body,url:xNt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wNt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Df(e,"network-request-failed"),a=oh().setTimeout(()=>{s(o)},vNt.get());function u(){oh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TNt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ANt=500,CNt=600,INt="_blank",kNt="http://localhost";class sde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RNt(e,t,n,r=ANt,i=CNt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},TNt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Oo().toLowerCase();n&&(a=yRe(l)?INt:n),gRe(l)&&(t=t||kNt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(oRt(l)&&a!=="_self")return NNt(t||"",a),new sde(null);const f=window.open(t||"",a,c);rn(f,e,"popup-blocked");try{f.focus()}catch{}return new sde(f)}function NNt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PNt="__/auth/handler",DNt="emulator/auth/handler",ONt=encodeURIComponent("fac");async function ode(e,t,n,r,i,s){rn(e.config.authDomain,e,"auth-domain-config-required"),rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kb,eventId:i};if(t instanceof WQ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",CIt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof vk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${ONt}=${encodeURIComponent(u)}`:"";return`${$Nt(e)}?${mk(a).slice(1)}${l}`}function $Nt({config:e}){return e.emulator?zQ(e,DNt):`https://${e.authDomain}/${PNt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj="webStorageSupport";class MNt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RRe,this._completeRedirectFn=oNt,this._overrideRedirectResult=rNt}async _openPopup(t,n,r,i){var s;km((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ode(t,n,r,Wz(),i);return RNt(t,o,GQ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await ode(t,n,r,Wz(),i);return jRt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(km(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await SNt(t),r=new uNt(t);return n.register("authEvent",i=>(rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Hj,{type:Hj},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hj];o!==void 0&&n(!!o),xh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hNt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return ERe()||HQ()||B6()}}const FRe=MNt;var ade="@firebase/auth",ude="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LNt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FNt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jNt(e){Im(new Eh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xRe(e)},l=new hRt(r,i,s,u);return bRt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Im(new Eh("auth-internal",t=>{const n=yk(t.getProvider("auth").getImmediate());return(r=>new LNt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pf(ade,ude,FNt(e)),Pf(ade,ude,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BNt=5*60,UNt=tRe("authIdTokenMaxAge")||BNt;let lde=null;const zNt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UNt)return;const i=n==null?void 0:n.token;lde!==i&&(lde=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function m$(e=jQ()){const t=aS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=vRt(e,{popupRedirectResolver:FRe,persistence:[YRt,MRt,RRe]}),r=tRe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zNt(s.toString());RRt(n,o,()=>o(n.currentUser)),kRt(n,a=>o(a))}}const i=Zke("auth");return i&&_Rt(n,`http://${i}`),n}function VNt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}pRt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Df("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",VNt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jNt("Browser");var HNt="firebase",qNt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pf(HNt,qNt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jRe="firebasestorage.googleapis.com",BRe="storageBucket",WNt=2*60*1e3,GNt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends qh{constructor(t,n,r=0){super(qj(t),`Firebase Storage: ${n} (${qj(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return qj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xi||(Xi={}));function qj(e){return"storage/"+e}function KQ(){const e="An unknown error occurred, please check the error payload for server response.";return new Qi(Xi.UNKNOWN,e)}function YNt(e){return new Qi(Xi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function KNt(e){return new Qi(Xi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XNt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qi(Xi.UNAUTHENTICATED,e)}function QNt(){return new Qi(Xi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function JNt(e){return new Qi(Xi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function ZNt(){return new Qi(Xi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ePt(){return new Qi(Xi.CANCELED,"User canceled the upload/download.")}function tPt(e){return new Qi(Xi.INVALID_URL,"Invalid URL '"+e+"'.")}function nPt(e){return new Qi(Xi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function rPt(){return new Qi(Xi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BRe+"' property when initializing the app?")}function iPt(){return new Qi(Xi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function sPt(){return new Qi(Xi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oPt(e){return new Qi(Xi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kz(e){return new Qi(Xi.INVALID_ARGUMENT,e)}function URe(){return new Qi(Xi.APP_DELETED,"The Firebase app was deleted.")}function aPt(e){return new Qi(Xi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hC(e,t){return new Qi(Xi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function pT(e){throw new Qi(Xi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=za.makeFromUrl(t,n)}catch{return new za(t,"")}if(r.path==="")return r;throw nPt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===jRe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let A=S[E.indices.path];A||(A=""),r=new za(T,A),E.postModify(r);break}}if(r==null)throw tPt(t);return r}}class uPt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lPt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function cPt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fPt(e){return e!==void 0}function dPt(e){return typeof e=="object"&&!Array.isArray(e)}function XQ(e){return typeof e=="string"||e instanceof String}function cde(e){return QQ()&&e instanceof Blob}function QQ(){return typeof Blob<"u"}function Xz(e,t,n,r){if(r<t)throw Kz(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Kz(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function zRe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pv;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(pv||(pv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hPt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pPt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new DN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===pv.NO_ERROR,u=s.getStatus();if(!a||hPt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===pv.ABORT;r(!1,new DN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new DN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());fPt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=KQ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?URe():ePt();o(u)}else{const u=ZNt();o(u)}};this.canceled_?n(!1,new DN(!1,null,!0)):this.backoffId_=lPt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&cPt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class DN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function mPt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function gPt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function yPt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function vPt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function bPt(e,t,n,r,i,s,o=!0){const a=zRe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return yPt(l,t),mPt(l,n),gPt(l,s),vPt(l,r),new pPt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Pt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wPt(...e){const t=_Pt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(QQ())return new Blob(e);throw new Qi(Xi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function EPt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xPt(e){if(typeof atob>"u")throw oPt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wj{constructor(t,n){this.data=t,this.contentType=n||null}}function SPt(e,t){switch(e){case Gd.RAW:return new Wj(VRe(t));case Gd.BASE64:case Gd.BASE64URL:return new Wj(HRe(e,t));case Gd.DATA_URL:return new Wj(APt(t),CPt(t))}throw KQ()}function VRe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function TPt(e){let t;try{t=decodeURIComponent(e)}catch{throw hC(Gd.DATA_URL,"Malformed data URL.")}return VRe(t)}function HRe(e,t){switch(e){case Gd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw hC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw hC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xPt(t)}catch(i){throw i.message.includes("polyfill")?i:hC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qRe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw hC(Gd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=IPt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function APt(e){const t=new qRe(e);return t.base64?HRe(Gd.BASE64,t.rest):TPt(t.rest)}function CPt(e){return new qRe(e).contentType}function IPt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,n){let r=0,i="";cde(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(cde(this.data_)){const r=this.data_,i=EPt(r,t,n);return i===null?null:new Bg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Bg(r,!0)}}static getBlob(...t){if(QQ()){const n=t.map(r=>r instanceof Bg?r.data_:r);return new Bg(wPt.apply(null,n))}else{const n=t.map(o=>XQ(o)?SPt(Gd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Bg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JQ(e){let t;try{t=JSON.parse(e)}catch{return null}return dPt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kPt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function RPt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function WRe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NPt(e,t){return t}class ka{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||NPt}}let ON=null;function PPt(e){return!XQ(e)||e.length<2?e:WRe(e)}function GRe(){if(ON)return ON;const e=[];e.push(new ka("bucket")),e.push(new ka("generation")),e.push(new ka("metageneration")),e.push(new ka("name","fullPath",!0));function t(s,o){return PPt(o)}const n=new ka("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ka("size");return i.xform=r,e.push(i),e.push(new ka("timeCreated")),e.push(new ka("updated")),e.push(new ka("md5Hash",null,!0)),e.push(new ka("cacheControl",null,!0)),e.push(new ka("contentDisposition",null,!0)),e.push(new ka("contentEncoding",null,!0)),e.push(new ka("contentLanguage",null,!0)),e.push(new ka("contentType",null,!0)),e.push(new ka("metadata","customMetadata",!0)),ON=e,ON}function DPt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new za(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function OPt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return DPt(r,e),r}function YRe(e,t,n){const r=JQ(t);return r===null?null:OPt(e,r,n)}function $Pt(e,t,n,r){const i=JQ(t);if(i===null||!XQ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=_k(d,n,r),p=zRe({alt:"media",token:l});return h+p})[0]}function MPt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fde="prefixes",dde="items";function LPt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[fde])for(const i of n[fde]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new za(t,s));r.prefixes.push(o)}if(n[dde])for(const i of n[dde]){const s=e._makeStorageReference(new za(t,i.name));r.items.push(s)}return r}function FPt(e,t,n){const r=JQ(n);return r===null?null:LPt(e,t,r)}class V6{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZQ(e){if(!e)throw KQ()}function jPt(e,t){function n(r,i){const s=YRe(e,i,t);return ZQ(s!==null),s}return n}function BPt(e,t){function n(r,i){const s=FPt(e,t,i);return ZQ(s!==null),s}return n}function UPt(e,t){function n(r,i){const s=YRe(e,i,t);return ZQ(s!==null),$Pt(s,i,e.host,e._protocol)}return n}function eJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=QNt():i=XNt():n.getStatus()===402?i=KNt(e.bucket):n.getStatus()===403?i=JNt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function KRe(e){const t=eJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=YNt(e.path)),s.serverResponse=i.serverResponse,s}return n}function zPt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=_k(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new V6(a,u,BPt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=eJ(t),c}function VPt(e,t,n){const r=t.fullServerUrl(),i=_k(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new V6(i,s,UPt(e,n),o);return a.errorHandler=KRe(t),a}function HPt(e,t){const n=t.fullServerUrl(),r=_k(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new V6(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=KRe(t),a}function qPt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function WPt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=qPt(null,t)),r}function GPt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=WPt(t,r,i),c=MPt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Bg.getBlob(f,r,d);if(h===null)throw iPt();const p={name:l.fullPath},m=_k(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new V6(m,g,jPt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=eJ(t),v}class YPt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pv.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pv.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pv.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw pT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw pT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class KPt extends YPt{initXhr(){this.xhr_.responseType="text"}}function H6(){return new KPt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(t,n){this._service=t,n instanceof za?this._location=n:this._location=za.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Gv(t,n)}get root(){const t=new za(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return WRe(this._location.path)}get storage(){return this._service}get parent(){const t=kPt(this._location.path);if(t===null)return null;const n=new za(this._location.bucket,t);return new Gv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw aPt(t)}}function XPt(e,t,n){e._throwIfRoot("uploadBytes");const r=GPt(e.storage,e._location,GRe(),new Bg(t,!0),n);return e.storage.makeRequestWithTokens(r,H6).then(i=>({metadata:i,ref:e}))}function QPt(e){const t={prefixes:[],items:[]};return XRe(e,t).then(()=>t)}async function XRe(e,t,n){const i=await JPt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await XRe(e,t,i.nextPageToken)}function JPt(e,t){t!=null&&typeof t.maxResults=="number"&&Xz("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=zPt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,H6)}function ZPt(e){e._throwIfRoot("getDownloadURL");const t=VPt(e.storage,e._location,GRe());return e.storage.makeRequestWithTokens(t,H6).then(n=>{if(n===null)throw sPt();return n})}function eDt(e){e._throwIfRoot("deleteObject");const t=HPt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,H6)}function tDt(e,t){const n=RPt(e._location.path,t),r=new za(e._location.bucket,n);return new Gv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nDt(e){return/^[A-Za-z]+:\/\//.test(e)}function rDt(e,t){return new Gv(e,t)}function QRe(e,t){if(e instanceof tJ){const n=e;if(n._bucket==null)throw rPt();const r=new Gv(n,n._bucket);return t!=null?QRe(r,t):r}else return t!==void 0?tDt(e,t):e}function iDt(e,t){if(t&&nDt(t)){if(e instanceof tJ)return rDt(e,t);throw Kz("To use ref(service, url), the first argument must be a Storage instance.")}else return QRe(e,t)}function hde(e,t){const n=t==null?void 0:t[BRe];return n==null?null:za.makeFromBucketSpec(n,e)}function sDt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:gIt(i,e.app.options.projectId))}class tJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=jRe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WNt,this._maxUploadRetryTime=GNt,this._requests=new Set,i!=null?this._bucket=za.makeFromBucketSpec(i,this._host):this._bucket=hde(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=za.makeFromBucketSpec(this._url,t):this._bucket=hde(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Xz("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Xz("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Gv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new uPt(URe());{const o=bPt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const pde="@firebase/storage",mde="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JRe="storage";function Gj(e,t,n){return e=ri(e),XPt(e,t,n)}function mT(e){return e=ri(e),QPt(e)}function Yj(e){return e=ri(e),ZPt(e)}function gde(e){return e=ri(e),eDt(e)}function Wc(e,t){return e=ri(e),iDt(e,t)}function oDt(e=jQ(),t){e=ri(e);const r=aS(e,JRe).getImmediate({identifier:t}),i=mIt("storage");return i&&aDt(r,...i),r}function aDt(e,t,n,r={}){sDt(e,t,n,r)}function uDt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new tJ(n,r,i,t,kb)}function lDt(){Im(new Eh(JRe,uDt,"PUBLIC").setMultipleInstances(!0)),Pf(pde,mde,""),Pf(pde,mde,"esm2017")}lDt();var yde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mv,ZRe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,A){function C(){}C.prototype=A.prototype,T.D=A.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(I,R,M){for(var P=Array(arguments.length-2),O=2;O<arguments.length;O++)P[O-2]=arguments[O];return A.prototype[R].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,A,C){C||(C=0);var I=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)I[R]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(R=0;16>R;++R)I[R]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=T.g[0],C=T.g[1],R=T.g[2];var M=T.g[3],P=A+(M^C&(R^M))+I[0]+3614090360&4294967295;A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[1]+3905402710&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[2]+606105819&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[3]+3250441966&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[4]+4118548399&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[5]+1200080426&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[6]+2821735955&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[7]+4249261313&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[8]+1770035416&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[9]+2336552879&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[10]+4294925233&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[11]+2304563134&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[12]+1804603682&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[13]+4254626195&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[14]+2792965006&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[15]+1236535329&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(R^M&(C^R))+I[1]+4129170786&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[6]+3225465664&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[11]+643717713&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[0]+3921069994&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[5]+3593408605&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[10]+38016083&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[15]+3634488961&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[4]+3889429448&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[9]+568446438&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[14]+3275163606&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[3]+4107603335&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[8]+1163531501&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[13]+2850285829&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[2]+4243563512&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[7]+1735328473&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[12]+2368359562&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(C^R^M)+I[5]+4294588738&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[8]+2272392833&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[11]+1839030562&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[14]+4259657740&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[1]+2763975236&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[4]+1272893353&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[7]+4139469664&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[10]+3200236656&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[13]+681279174&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[0]+3936430074&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[3]+3572445317&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[6]+76029189&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[9]+3654602809&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[12]+3873151461&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[15]+530742520&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[2]+3299628645&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(R^(C|~M))+I[0]+4096336452&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[7]+1126891415&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[14]+2878612391&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[5]+4237533241&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[12]+1700485571&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[3]+2399980690&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[10]+4293915773&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[1]+2240044497&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[8]+1873313359&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[15]+4264355552&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[6]+2734768916&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[13]+1309151649&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[4]+4149444226&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[11]+3174756917&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[2]+718787259&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var C=A-this.blockSize,I=this.B,R=this.h,M=0;M<A;){if(R==0)for(;M<=C;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<A;)if(I[R++]=T.charCodeAt(M++),R==this.blockSize){i(this,I),R=0;break}}else for(;M<A;)if(I[R++]=T[M++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var C=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=C&255,C/=256;for(this.u(T),T=Array(16),A=C=0;4>A;++A)for(var I=0;32>I;I+=8)T[C++]=this.g[A]>>>I&255;return T};function s(T,A){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=A(T)}function o(T,A){this.h=A;for(var C=[],I=!0,R=T.length-1;0<=R;R--){var M=T[R]|0;I&&M==A||(C[R]=M,I=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?s(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var A=[],C=1,I=0;T>=C;I++)A[I]=T/C|0,C*=4294967296;return new o(A,0)}function c(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return g(c(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),I=f,R=0;R<T.length;R+=8){var M=Math.min(8,T.length-R),P=parseInt(T.substring(R,R+M),A);8>M?(M=l(Math.pow(A,M)),I=I.j(M).add(l(P))):(I=I.j(C),I=I.add(l(P)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,A=1,C=0;C<this.g.length;C++){var I=this.i(C);T+=(0<=I?I:4294967296+I)*A,A*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var A=l(Math.pow(T,6)),C=this,I="";;){var R=w(C,A).g;C=y(C,R.j(A));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=R,p(C))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var A=T.g.length,C=[],I=0;I<A;I++)C[I]=~T.g[I];return new o(C,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0,R=0;R<=A;R++){var M=I+(this.i(R)&65535)+(T.i(R)&65535),P=(M>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=P>>>16,M&=65535,P&=65535,C[R]=P<<16|M}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(T,A){return T.add(g(A))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var A=this.g.length+T.g.length,C=[],I=0;I<2*A;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<T.g.length;R++){var M=this.i(I)>>>16,P=this.i(I)&65535,O=T.i(R)>>>16,F=T.i(R)&65535;C[2*I+2*R]+=P*F,v(C,2*I+2*R),C[2*I+2*R+1]+=M*F,v(C,2*I+2*R+1),C[2*I+2*R+1]+=P*O,v(C,2*I+2*R+1),C[2*I+2*R+2]+=M*O,v(C,2*I+2*R+2)}for(I=0;I<A;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=A;I<2*A;I++)C[I]=0;return new o(C,0)};function v(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function b(T,A){this.g=T,this.h=A}function w(T,A){if(p(A))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return A=w(g(T),A),new b(g(A.g),g(A.h));if(m(A))return A=w(T,g(A)),new b(g(A.g),A.h);if(30<T.g.length){if(m(T)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,I=A;0>=I.l(T);)C=E(C),I=E(I);var R=S(C,1),M=S(I,1);for(I=S(I,2),C=S(C,2);!p(I);){var P=M.add(I);0>=P.l(T)&&(R=R.add(C),M=P),I=S(I,1),C=S(C,1)}return A=y(T,R.j(A)),new b(R,A)}for(R=f;0<=T.l(A);){for(C=Math.max(1,Math.floor(T.m()/A.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=l(C),P=M.j(A);m(P)||0<P.l(T);)C-=I,M=l(C),P=M.j(A);p(M)&&(M=d),R=R.add(M),T=y(T,P)}return new b(R,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)&T.i(I);return new o(C,this.h&T.h)},e.or=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)|T.i(I);return new o(C,this.h|T.h)},e.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)^T.i(I);return new o(C,this.h^T.h)};function E(T){for(var A=T.g.length+1,C=[],I=0;I<A;I++)C[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(C,T.h)}function S(T,A){var C=A>>5;A%=32;for(var I=T.g.length-C,R=[],M=0;M<I;M++)R[M]=0<A?T.i(M+C)>>>A|T.i(M+C+1)<<32-A:T.i(M+C);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZRe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,mv=o}).apply(typeof yde<"u"?yde:typeof self<"u"?self:typeof window<"u"?window:{});var $N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eNe,tNe,cA,nNe,uD,Qz,rNe,iNe,sNe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,$,V){return x==Array.prototype||x==Object.prototype||(x[$]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof $N=="object"&&$N];for(var $=0;$<x.length;++$){var V=x[$];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,$){if($)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var _e=x[Q];if(!(_e in V))break e;V=V[_e]}x=x[x.length-1],Q=V[x],$=$(Q),$!=Q&&$!=null&&t(V,x,{configurable:!0,writable:!0,value:$})}}function s(x,$){x instanceof String&&(x+="");var V=0,Q=!1,_e={next:function(){if(!Q&&V<x.length){var De=V++;return{value:$(De,x[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(x){return x||function(){return s(this,function($,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var $=typeof x;return $=$!="object"?$:x?Array.isArray(x)?"array":$:"null",$=="array"||$=="object"&&typeof x.length=="number"}function l(x){var $=typeof x;return $=="object"&&x!=null||$=="function"}function c(x,$,V){return x.call.apply(x.bind,arguments)}function f(x,$,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),x.apply($,_e)}}return function(){return x.apply($,arguments)}}function d(x,$,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,$){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,$){function V(){}V.prototype=$.prototype,x.aa=$.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,_e,De){for(var ft=Array(arguments.length-2),qr=2;qr<arguments.length;qr++)ft[qr-2]=arguments[qr];return $.prototype[_e].apply(Q,ft)}}function m(x){const $=x.length;if(0<$){const V=Array($);for(let Q=0;Q<$;Q++)V[Q]=x[Q];return V}return[]}function g(x,$){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const _e=x.length||0,De=Q.length||0;x.length=_e+De;for(let ft=0;ft<De;ft++)x[_e+ft]=Q[ft]}else x.push(Q)}}class y{constructor($,V){this.i=$,this.j=V,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(x,$,V){for(const Q in x)$.call(V,x[Q],Q,x)}function T(x,$){for(const V in x)$.call(void 0,x[V],V,x)}function A(x){const $={};for(const V in x)$[V]=x[V];return $}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(x,$){let V,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(V in Q)x[V]=Q[V];for(let De=0;De<C.length;De++)V=C[De],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function R(x){var $=1;x=x.split(":");const V=[];for(;0<$&&x.length;)V.push(x.shift()),$--;return x.length&&V.push(x.join(":")),V}function M(x){a.setTimeout(()=>{throw x},0)}function P(){var x=H;let $=null;return x.g&&($=x.g,x.g=x.g.next,x.g||(x.h=null),$.next=null),$}class O{constructor(){this.h=this.g=null}add($,V){const Q=F.get();Q.set($,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new L,x=>x.reset());class L{constructor(){this.next=this.g=this.h=null}set($,V){this.h=$,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new O,D=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(V){M(V)}var $=F;$.j(x),100>$.h&&($.h++,x.next=$.g,$.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,$){this.type=x,this.g=this.target=$,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,$=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,$),a.removeEventListener("test",V,$)}catch{}return x}();function G(x,$){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=$,$=x.relatedTarget){if(E){e:{try{w($.nodeName);var _e=!0;break e}catch{}_e=!1}_e||($=null)}}else V=="mouseover"?$=x.fromElement:V=="mouseout"&&($=x.toElement);this.relatedTarget=$,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,$,V,Q,_e){this.listener=x,this.proxy=null,this.src=$,this.type=V,this.capture=!!Q,this.ha=_e,this.key=++de,this.da=this.fa=!1}function ye(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,$,V,Q,_e){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var ft=Ke(x,$,Q,_e);return-1<ft?($=x[ft],V||($.fa=!1)):($=new he($,this.src,De,!!Q,_e),$.fa=V,x.push($)),$};function ve(x,$){var V=$.type;if(V in x.g){var Q=x.g[V],_e=Array.prototype.indexOf.call(Q,$,void 0),De;(De=0<=_e)&&Array.prototype.splice.call(Q,_e,1),De&&(ye($),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,$,V,Q){for(var _e=0;_e<x.length;++_e){var De=x[_e];if(!De.da&&De.listener==$&&De.capture==!!V&&De.ha==Q)return _e}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),gt={};function rt(x,$,V,Q,_e){if(Array.isArray($)){for(var De=0;De<$.length;De++)rt(x,$[De],V,Q,_e);return null}return V=yt(V),x&&x[ce]?x.K($,V,l(Q)?!!Q.capture:!!Q,_e):be(x,$,V,!1,Q,_e)}function be(x,$,V,Q,_e,De){if(!$)throw Error("Invalid event type");var ft=l(_e)?!!_e.capture:!!_e,qr=me(x);if(qr||(x[Ue]=qr=new Ie(x)),V=qr.add($,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)q||(_e=ft),_e===void 0&&(_e=!1),x.addEventListener($.toString(),Q,_e);else if(x.attachEvent)x.attachEvent(Dt($.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return $.call(x.src,x.listener,V)}const $=We;return x}function ze(x,$,V,Q,_e){if(Array.isArray($))for(var De=0;De<$.length;De++)ze(x,$[De],V,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,V=yt(V),x&&x[ce]?(x=x.i,$=String($).toString(),$ in x.g&&(De=x.g[$],V=Ke(De,V,Q,_e),-1<V&&(ye(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[$],x.h--)))):x&&(x=me(x))&&($=x.g[$.toString()],x=-1,$&&(x=Ke($,V,Q,_e)),(V=-1<x?$[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var $=x.src;if($&&$[ce])ve($.i,x);else{var V=x.type,Q=x.proxy;$.removeEventListener?$.removeEventListener(V,Q,x.capture):$.detachEvent?$.detachEvent(Dt(V),Q):$.addListener&&$.removeListener&&$.removeListener(Q),(V=me($))?(ve(V,x),V.h==0&&(V.src=null,$[Ue]=null)):ye(x)}}}function Dt(x){return x in gt?gt[x]:gt[x]="on"+x}function We(x,$){if(x.da)x=!0;else{$=new G($,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,$)}return x}function me(x){return x=x[Ue],x instanceof Ie?x:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(x){return typeof x=="function"?x:(x[dt]||(x[dt]=function($){return x.handleEvent($)}),x[dt])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(x,$,V,Q){ze(this,x,$,V,Q)};function Ce(x,$){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=$.type||$,typeof $=="string")$=new j($,x);else if($ instanceof j)$.target=$.target||x;else{var _e=$;$=new j(Q,x),I($,_e)}if(_e=!0,V)for(var De=V.length-1;0<=De;De--){var ft=$.g=V[De];_e=He(ft,Q,!0,$)&&_e}if(ft=$.g=x,_e=He(ft,Q,!0,$)&&_e,_e=He(ft,Q,!1,$)&&_e,V)for(De=0;De<V.length;De++)ft=$.g=V[De],_e=He(ft,Q,!1,$)&&_e}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,$;for($ in x.g){for(var V=x.g[$],Q=0;Q<V.length;Q++)ye(V[Q]);delete x.g[$],x.h--}}this.F=null},pe.prototype.K=function(x,$,V,Q){return this.i.add(String(x),$,!1,V,Q)},pe.prototype.L=function(x,$,V,Q){return this.i.add(String(x),$,!0,V,Q)};function He(x,$,V,Q){if($=x.i.g[String($)],!$)return!0;$=$.concat();for(var _e=!0,De=0;De<$.length;++De){var ft=$[De];if(ft&&!ft.da&&ft.capture==V){var qr=ft.listener,ho=ft.ha||ft.src;ft.fa&&ve(x.i,ft),_e=qr.call(ho,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function ut(x,$,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number($)?-1:a.setTimeout(x,$||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const $=x.h;x.h=null,x.m.apply(null,$)}class Mn extends W{constructor($,V){super(),this.m=$,this.l=V,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(x){W.call(this),this.h=x,this.g={}}p(Tr,W);var Ln=[];function cr(x){S(x.g,function($,V){this.g.hasOwnProperty(V)&&ct($)},x),x.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),cr(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hn=a.JSON.stringify,Sn=a.JSON.parse,nr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function rr(){}rr.prototype.h=null;function Fo(x){return x.h||(x.h=x.i())}function $i(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){j.call(this,"d")}p(Mi,j);function Ar(){j.call(this,"c")}p(Ar,j);var fs={},np=null;function rl(){return np=np||new pe}fs.La="serverreachability";function ad(x){j.call(this,fs.La,x)}p(ad,j);function Er(x){const $=rl();Ce($,new ad($))}fs.STAT_EVENT="statevent";function Ti(x,$){j.call(this,fs.STAT_EVENT,x),this.stat=$}p(Ti,j);function Yr(x){const $=rl();Ce($,new Ti($,x))}fs.Ma="timingevent";function ou(x,$){j.call(this,fs.Ma,x),this.size=$}p(ou,j);function Sa(x,$){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},$)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function oe(x,$,V,Q,_e,De){x.info(function(){if(x.g)if(De)for(var ft="",qr=De.split("&"),ho=0;ho<qr.length;ho++){var fr=qr[ho].split("=");if(1<fr.length){var zo=fr[0];fr=fr[1];var Vo=zo.split("_");ft=2<=Vo.length&&Vo[1]=="type"?ft+(zo+"="+fr+"&"):ft+(zo+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+$+`
`+V+`
`+ft})}function ee(x,$,V,Q,_e,De,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+$+`
`+V+`
`+De+" "+ft})}function ae(x,$,V,Q){x.info(function(){return"XMLHTTP TEXT ("+$+"): "+xe(x,V)+(Q?" "+Q:"")})}function Se(x,$){x.info(function(){return"TIMEOUT: "+$})}Ta.prototype.info=function(){};function xe(x,$){if(!x.g)return $;if(!$)return null;try{var V=JSON.parse($);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var De=_e[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<_e.length;ft++)_e[ft]=""}}}}return hn(V)}catch{return $}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function Dn(){}p(Dn,rr),Dn.prototype.g=function(){return new XMLHttpRequest},Dn.prototype.i=function(){return{}},Vt=new Dn;function Fn(x,$,V,Q){this.j=x,this.i=$,this.l=V,this.R=Q||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fn}function fn(){this.i=null,this.g="",this.h=!1}var ir={},Cr={};function zt(x,$,V){x.L=1,x.v=jn(Ge($)),x.m=V,x.P=!0,sr(x,null)}function sr(x,$){x.F=Date.now(),Ai(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),gR(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new fn,x.g=Fre(x.j,V?$:null,!x.m),0<x.O&&(x.M=new Mn(d(x.Y,x,x.g),x.O)),$=x.U,V=x.g,Q=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Ln[0]=_e.toString()),_e=Ln);for(var De=0;De<_e.length;De++){var ft=rt(V,_e[De],Q||$.handleEvent,!1,$.h||$);if(!ft)break;$.g[ft.key]=ft}$=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,$)):(x.u="GET",x.g.ea(x.A,x.u,null,$)),Er(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}Fn.prototype.ca=function(x){x=x.target;const $=this.M;$&&Ji(x)==3?$.j():this.Y(x)},Fn.prototype.Y=function(x){try{if(x==this.g)e:{const Vo=Ji(this.g);var $=this.g.Ba();const Jb=this.g.Z();if(!(3>Vo)&&(Vo!=3||this.g&&(this.h.h||this.g.oa()||Uo(this.g)))){this.J||Vo!=4||$==7||($==8||0>=Jb?Er(3):Er(2)),Kr(this);var V=this.g.Z();this.X=V;t:if(zr(this)){var Q=Uo(this.g);x="";var _e=Q.length,De=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),fo(this);var ft="";break t}this.h.i=new a.TextDecoder}for($=0;$<_e;$++)this.h.h=!0,x+=this.h.i.decode(Q[$],{stream:!(De&&$==_e-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Vo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var qr,ho=this.g;if((qr=ho.g?ho.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(qr)){var fr=qr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,V);else{this.o=!1,this.s=3,Yr(12),Li(this),fo(this);break e}}if(this.P){V=!0;let Vc;for(;!this.J&&this.C<ft.length;)if(Vc=Jn(this,ft),Vc==Cr){Vo==4&&(this.s=4,Yr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Vc==ir){this.s=4,Yr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,Vc,null),Fi(this,Vc);if(zr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vo!=4||ft.length!=0||this.h.h||(this.s=1,Yr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Li(this),fo(this);else if(0<ft.length&&!this.W){this.W=!0;var zo=this.j;zo.g==this&&zo.ba&&!zo.M&&(zo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),c5(zo),zo.M=!0,Yr(11))}}else ae(this.i,this.l,ft,null),Fi(this,ft);Vo==4&&Li(this),this.o&&!this.J&&(Vo==4?Ore(this.j,this):(this.o=!1,Ai(this)))}else Jy(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Yr(12)):(this.s=0,Yr(13)),Li(this),fo(this)}}}catch{}finally{}};function zr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Jn(x,$){var V=x.C,Q=$.indexOf(`
`,V);return Q==-1?Cr:(V=Number($.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>$.length?Cr:($=$.slice(Q,Q+V),x.C=Q+V,$)))}Fn.prototype.cancel=function(){this.J=!0,Li(this)};function Ai(x){x.S=Date.now()+x.I,Bs(x,x.I)}function Bs(x,$){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Sa(d(x.ba,x),$)}function Kr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}Fn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Se(this.i,this.A),this.L!=2&&(Er(),Yr(17)),Li(this),this.s=2,fo(this)):Bs(this,this.S-x)};function fo(x){x.j.G==0||x.J||Ore(x.j,x)}function Li(x){Kr(x);var $=x.M;$&&typeof $.ma=="function"&&$.ma(),x.M=null,cr(x.U),x.g&&($=x.g,x.g=null,$.abort(),$.ma())}function Fi(x,$){try{var V=x.j;if(V.G!=0&&(V.g==x||ud(V.h,x))){if(!x.K&&ud(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse($)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)xR(V),wR(V);else break e;l5(V),Yr(18)}}else V.za=_e[1],0<V.za-V.T&&37500>_e[2]&&V.F&&V.v==0&&!V.C&&(V.C=Sa(d(V.Za,V),6e3));if(1>=Wl(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Zy(V,11)}else if((x.K||V.g==x)&&xR(V),!v($))for(_e=V.Da.g.parse($),$=0;$<_e.length;$++){let fr=_e[$];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const zo=fr[3];zo!=null&&(V.la=zo,V.j.info("VER="+V.la));const Vo=fr[4];Vo!=null&&(V.Aa=Vo,V.j.info("SVER="+V.Aa));const Jb=fr[5];Jb!=null&&typeof Jb=="number"&&0<Jb&&(Q=1.5*Jb,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const Vc=x.g;if(Vc){const TR=Vc.g?Vc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(TR){var De=Q.h;De.g||TR.indexOf("spdy")==-1&&TR.indexOf("quic")==-1&&TR.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const f5=Vc.g?Vc.g.getResponseHeader("X-HTTP-Session-Id"):null;f5&&(Q.ya=f5,Nt(Q.I,Q.D,f5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Lre(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var qr=ft,ho=Q.L;ho&&(qr.I=ho),qr.B&&(Kr(qr),Ai(qr)),Q.g=ft}else Pre(Q);0<V.i.length&&ER(V)}else fr[0]!="stop"&&fr[0]!="close"||Zy(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?Zy(V,7):Xb(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}Er(4)}catch{}}var jo=class{constructor(x,$){this.g=x,this.map=$}};function Aa(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Us(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Wl(x){return x.h?1:x.g?x.g.size:0}function ud(x,$){return x.h?x.h==$:x.g?x.g.has($):!1}function Y(x,$){x.g?x.g.add($):x.h=$}function se(x,$){x.h&&x.h==$?x.h=null:x.g&&x.g.has($)&&x.g.delete($)}Aa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let $=x.i;for(const V of x.g.values())$=$.concat(V.D);return $}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var $=[],V=x.length,Q=0;Q<V;Q++)$.push(x[Q]);return $}$=[],V=0;for(Q in x)$[V++]=x[Q];return $}function ge(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var $=[];x=x.length;for(var V=0;V<x;V++)$.push(V);return $}$=[],V=0;for(const Q in x)$[V++]=Q;return $}}}function le(x,$){if(x.forEach&&typeof x.forEach=="function")x.forEach($,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,$,void 0);else for(var V=ge(x),Q=fe(x),_e=Q.length,De=0;De<_e;De++)$.call(void 0,Q[De],V&&V[De],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,$){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),_e=null;if(0<=Q){var De=x[V].substring(0,Q);_e=x[V].substring(Q+1)}else De=x[V];$(De,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,it(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var $=x.i,V=new Gl;V.i=$.i,$.g&&(V.g=new Map($.g),V.h=$.h),dn(this,V),this.m=x.m}else x&&($=String(x).match(Oe))?(this.h=!1,it(this,$[1]||"",!0),this.o=Ir($[2]||""),this.g=Ir($[3]||"",!0),Et(this,$[4]),this.l=Ir($[5]||"",!0),dn(this,$[6]||"",!0),this.m=Ir($[7]||"")):(this.h=!1,this.i=new Gl(null,this.h))}qe.prototype.toString=function(){var x=[],$=this.j;$&&x.push(kr($,ld,!0),":");var V=this.g;return(V||$=="file")&&(x.push("//"),($=this.o)&&x.push(kr($,ld,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(kr(V,V.charAt(0)=="/"?$S:rp,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",kr(V,mR)),x.join("")};function Ge(x){return new qe(x)}function it(x,$,V){x.j=V?Ir($,!0):$,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,$){if($){if($=Number($),isNaN($)||0>$)throw Error("Bad port number "+$);x.s=$}else x.s=null}function dn(x,$,V){$ instanceof Gl?(x.i=$,MS(x.i,x.h)):(V||($=kr($,Yy)),x.i=new Gl($,x.h))}function Nt(x,$,V){x.i.set($,V)}function jn(x){return Nt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Ir(x,$){return x?$?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function kr(x,$,V){return typeof x=="string"?(x=encodeURI(x).replace($,Bo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Bo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var ld=/[#\/\?@]/g,rp=/[#\?:]/g,$S=/[#\?]/g,Yy=/[#\?@]/g,mR=/#/g;function Gl(x,$){this.h=this.g=null,this.i=x||null,this.j=!!$}function au(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function($,V){x.add(decodeURIComponent($.replace(/\+/g," ")),V)}))}e=Gl.prototype,e.add=function(x,$){au(this),this.i=null,x=sp(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push($),this.h+=1,this};function ip(x,$){au(x),$=sp(x,$),x.g.has($)&&(x.i=null,x.h-=x.g.get($).length,x.g.delete($))}function Yb(x,$){return au(x),$=sp(x,$),x.g.has($)}e.forEach=function(x,$){au(this),this.g.forEach(function(V,Q){V.forEach(function(_e){x.call($,_e,Q,this)},this)},this)},e.na=function(){au(this);const x=Array.from(this.g.values()),$=Array.from(this.g.keys()),V=[];for(let Q=0;Q<$.length;Q++){const _e=x[Q];for(let De=0;De<_e.length;De++)V.push($[Q])}return V},e.V=function(x){au(this);let $=[];if(typeof x=="string")Yb(this,x)&&($=$.concat(this.g.get(sp(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)$=$.concat(x[V])}return $},e.set=function(x,$){return au(this),this.i=null,x=sp(this,x),Yb(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[$]),this.h+=1,this},e.get=function(x,$){return x?(x=this.V(x),0<x.length?String(x[0]):$):$};function gR(x,$,V){ip(x,$),0<V.length&&(x.i=null,x.g.set(sp(x,$),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],$=Array.from(this.g.keys());for(var V=0;V<$.length;V++){var Q=$[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var _e=De;ft[Q]!==""&&(_e+="="+encodeURIComponent(String(ft[Q]))),x.push(_e)}}return this.i=x.join("&")};function sp(x,$){return $=String($),x.j&&($=$.toLowerCase()),$}function MS(x,$){$&&!x.j&&(au(x),x.i=null,x.g.forEach(function(V,Q){var _e=Q.toLowerCase();Q!=_e&&(ip(this,Q),gR(this,_e,V))},x)),x.j=$}function yR(x,$){const V=new Ta;if(a.Image){const Q=new Image;Q.onload=h(uu,V,"TestLoadImage: loaded",!0,$,Q),Q.onerror=h(uu,V,"TestLoadImage: error",!1,$,Q),Q.onabort=h(uu,V,"TestLoadImage: abort",!1,$,Q),Q.ontimeout=h(uu,V,"TestLoadImage: timeout",!1,$,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else $(!1)}function op(x,$){const V=new Ta,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),uu(V,"TestPingServer: timeout",!1,$)},1e4);fetch(x,{signal:Q.signal}).then(De=>{clearTimeout(_e),De.ok?uu(V,"TestPingServer: ok",!0,$):uu(V,"TestPingServer: server error",!1,$)}).catch(()=>{clearTimeout(_e),uu(V,"TestPingServer: error",!1,$)})}function uu(x,$,V,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(V)}catch{}}function u5(){this.g=new nr}function vR(x,$,V){const Q=V||"";try{le(x,function(_e,De){let ft=_e;l(_e)&&(ft=hn(_e)),$.push(Q+De+"="+encodeURIComponent(ft))})}catch(_e){throw $.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function Ky(x){this.l=x.Ub||null,this.j=x.eb||!1}p(Ky,rr),Ky.prototype.g=function(){return new Xy(this.l,this.j)},Ky.prototype.i=function(x){return function(){return x}}({});function Xy(x,$){pe.call(this),this.D=x,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Xy,pe),e=Xy.prototype,e.open=function(x,$){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=$,this.readyState=1,lg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const $={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&($.body=x),(this.D||a).fetch(new Request(this.A,$)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qy(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,lg(this)),this.g&&(this.readyState=3,lg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function bR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var $=x.value?x.value:new Uint8Array(0);($=this.v.decode($,{stream:!x.done}))&&(this.response=this.responseText+=$)}x.done?Qy(this):lg(this),this.readyState==3&&bR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,Qy(this))},e.Qa=function(x){this.g&&(this.response=x,Qy(this))},e.ga=function(){this.g&&Qy(this)};function Qy(x){x.readyState=4,x.l=null,x.j=null,x.v=null,lg(x)}e.setRequestHeader=function(x,$){this.u.append(x,$)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],$=this.h.entries();for(var V=$.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=$.next();return x.join(`\r
`)};function lg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Xy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function _R(x){let $="";return S(x,function(V,Q){$+=Q,$+=":",$+=V,$+=`\r
`}),$}function te(x,$,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=_R(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Nt(x,$,V))}function ue(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,Ct=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,$,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);$=$?$.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?Fo(this.o):Fo(Vt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open($,String(x),!0),this.B=!1}catch(De){On(this,De);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)V.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),_e=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ct,$,void 0))||Q||_e||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hr(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){On(this,De)}};function On(x,$){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=$,x.m=5,xr(x),Bn(x)}function xr(x){x.A||(x.A=!0,Ce(x,"complete"),Ce(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ce(this,"complete"),Ce(this,"abort"),Bn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vr(this):this.bb())},e.bb=function(){Vr(this)};function Vr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Ji(x)!=4||x.Z()!=2)){if(x.u&&Ji(x)==4)ut(x.Ea,0,x);else if(Ce(x,"readystatechange"),Ji(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var V;if(!(V=$)){var Q;if(Q=ft===0){var _e=String(x.D).match(Oe)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!Re.test(_e?_e.toLowerCase():"")}V=Q}if(V)Ce(x,"complete"),Ce(x,"success");else{x.m=6;try{var De=2<Ji(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",xr(x)}}finally{Bn(x)}}}}function Bn(x,$){if(x.g){Hr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,$||Ce(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Hr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Ji(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var $=this.g.responseText;return x&&$.indexOf(x)==0&&($=$.substring(x.length)),Sn($)}};function Uo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Jy(x){const $={};x=(x.g&&2<=Ji(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=R(x[Q]);const _e=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=$[_e]||[];$[_e]=De,De.push(V)}T($,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ap(x,$,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||$}function Kb(x){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ap("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ap("baseRetryDelayMs",5e3,x),this.cb=ap("retryDelaySeedMs",1e4,x),this.Wa=ap("forwardChannelMaxRetries",2,x),this.wa=ap("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Aa(x&&x.concurrentRequestLimit),this.Da=new u5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Kb.prototype,e.la=8,e.G=1,e.connect=function(x,$,V,Q){Yr(0),this.W=x,this.H=$||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Lre(this,null,this.W),ER(this)};function Xb(x){if(kre(x),x.G==3){var $=x.U++,V=Ge(x.I);if(Nt(V,"SID",x.K),Nt(V,"RID",$),Nt(V,"TYPE","terminate"),LS(x,V),$=new Fn(x,x.j,$),$.L=2,$.v=jn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon($.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=$.v,V=!0),V||($.g=Fre($.j,null),$.g.ea($.v)),$.F=Date.now(),Ai($)}Mre(x)}function wR(x){x.g&&(c5(x),x.g.cancel(),x.g=null)}function kre(x){wR(x),x.u&&(a.clearTimeout(x.u),x.u=null),xR(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function ER(x){if(!Us(x.h)&&!x.s){x.s=!0;var $=x.Ga;B||D(),U||(B(),U=!0),H.add($,x),x.B=0}}function N5e(x,$){return Wl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=$.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Sa(d(x.Ga,x,$),$re(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new Fn(this,this.j,x);let De=this.o;if(this.S&&(De?(De=A(De),I(De,this.S)):De=this.S),this.m!==null||this.O||(_e.H=De,De=null),this.P)e:{for(var $=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if($+=Q,4096<$){$=V;break e}if($===4096||V===this.i.length-1){$=V+1;break e}}$=1e3}else $=1e3;$=Nre(this,_e,$),V=Ge(this.I),Nt(V,"RID",x),Nt(V,"CVER",22),this.D&&Nt(V,"X-HTTP-Session-Id",this.D),LS(this,V),De&&(this.O?$="headers="+encodeURIComponent(String(_R(De)))+"&"+$:this.m&&te(V,this.m,De)),Y(this.h,_e),this.Ua&&Nt(V,"TYPE","init"),this.P?(Nt(V,"$req",$),Nt(V,"SID","null"),_e.T=!0,zt(_e,V,null)):zt(_e,V,$),this.G=2}}else this.G==3&&(x?Rre(this,x):this.i.length==0||Us(this.h)||Rre(this))};function Rre(x,$){var V;$?V=$.l:V=x.U++;const Q=Ge(x.I);Nt(Q,"SID",x.K),Nt(Q,"RID",V),Nt(Q,"AID",x.T),LS(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new Fn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),$&&(x.i=$.D.concat(x.i)),$=Nre(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),zt(V,Q,$)}function LS(x,$){x.H&&S(x.H,function(V,Q){Nt($,Q,V)}),x.l&&le({},function(V,Q){Nt($,Q,V)})}function Nre(x,$,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var _e=x.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=_e[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let qr=!0;for(let ho=0;ho<V;ho++){let fr=_e[ho].g;const zo=_e[ho].map;if(fr-=De,0>fr)De=Math.max(0,_e[ho].g-100),qr=!1;else try{vR(zo,ft,"req"+fr+"_")}catch{Q&&Q(zo)}}if(qr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),$.D=x,Q}function Pre(x){if(!x.g&&!x.u){x.Y=1;var $=x.Fa;B||D(),U||(B(),U=!0),H.add($,x),x.v=0}}function l5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Sa(d(x.Fa,x),$re(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Dre(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Sa(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yr(10),wR(this),Dre(this))};function c5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Dre(x){x.g=new Fn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var $=Ge(x.qa);Nt($,"RID","rpc"),Nt($,"SID",x.K),Nt($,"AID",x.T),Nt($,"CI",x.F?"0":"1"),!x.F&&x.ja&&Nt($,"TO",x.ja),Nt($,"TYPE","xmlhttp"),LS(x,$),x.m&&x.o&&te($,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=jn(Ge($)),V.m=null,V.P=!0,sr(V,x)}e.Za=function(){this.C!=null&&(this.C=null,wR(this),l5(this),Yr(19))};function xR(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function Ore(x,$){var V=null;if(x.g==$){xR(x),c5(x),x.g=null;var Q=2}else if(ud(x.h,$))V=$.D,se(x.h,$),Q=1;else return;if(x.G!=0){if($.o)if(Q==1){V=$.m?$.m.length:0,$=Date.now()-$.F;var _e=x.B;Q=rl(),Ce(Q,new ou(Q,V)),ER(x)}else Pre(x);else if(_e=$.s,_e==3||_e==0&&0<$.X||!(Q==1&&N5e(x,$)||Q==2&&l5(x)))switch(V&&0<V.length&&($=x.h,$.i=$.i.concat(V)),_e){case 1:Zy(x,5);break;case 4:Zy(x,10);break;case 3:Zy(x,6);break;default:Zy(x,2)}}}function $re(x,$){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*$}function Zy(x,$){if(x.j.info("Error code "+$),$==2){var V=d(x.fb,x),Q=x.Xa;const _e=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||it(Q,"https"),jn(Q),_e?yR(Q.toString(),V):op(Q.toString(),V)}else Yr(2);x.G=0,x.l&&x.l.sa($),Mre(x),kre(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Yr(2)):(this.j.info("Failed to ping google.com"),Yr(1))};function Mre(x){if(x.G=0,x.ka=[],x.l){const $=Z(x.h);($.length!=0||x.i.length!=0)&&(g(x.ka,$),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Lre(x,$,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")$&&(Q.g=$+"."+Q.g),Et(Q,Q.s);else{var _e=a.location;Q=_e.protocol,$=$?$+"."+_e.hostname:_e.hostname,_e=+_e.port;var De=new qe(null);Q&&it(De,Q),$&&(De.g=$),_e&&Et(De,_e),V&&(De.l=V),Q=De}return V=x.D,$=x.ya,V&&$&&Nt(Q,V,$),Nt(Q,"VER",x.la),LS(x,Q),Q}function Fre(x,$,V){if($&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return $=x.Ca&&!x.pa?new ue(new Ky({eb:V})):new ue(x.pa),$.Ha(x.J),$}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function jre(){}e=jre.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function SR(){}SR.prototype.g=function(x,$){return new il(x,$)};function il(x,$){pe.call(this),this.g=new Kb($),this.l=x,this.h=$&&$.messageUrlParams||null,x=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(x?x["X-WebChannel-Content-Type"]=$.messageContentType:x={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.va&&(x?x["X-WebChannel-Client-Profile"]=$.va:x={"X-WebChannel-Client-Profile":$.va}),this.g.S=x,(x=$&&$.Sb)&&!v(x)&&(this.g.m=x),this.v=$&&$.supportsCrossDomainXhr||!1,this.u=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!v($)&&(this.g.D=$,x=this.h,x!==null&&$ in x&&(x=this.h,$ in x&&delete x[$])),this.j=new Qb(this)}p(il,pe),il.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},il.prototype.close=function(){Xb(this.g)},il.prototype.o=function(x){var $=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=hn(x),x=V);$.i.push(new jo($.Ya++,x)),$.G==3&&ER($)},il.prototype.N=function(){this.g.l=null,delete this.j,Xb(this.g),delete this.g,il.aa.N.call(this)};function Bre(x){Mi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var $=x.__sm__;if($){e:{for(const V in $){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,$=$!==null&&x in $?$[x]:void 0),this.data=$}else this.data=x}p(Bre,Mi);function Ure(){Ar.call(this),this.status=1}p(Ure,Ar);function Qb(x){this.g=x}p(Qb,jre),Qb.prototype.ua=function(){Ce(this.g,"a")},Qb.prototype.ta=function(x){Ce(this.g,new Bre(x))},Qb.prototype.sa=function(x){Ce(this.g,new Ure)},Qb.prototype.ra=function(){Ce(this.g,"b")},SR.prototype.createWebChannel=SR.prototype.g,il.prototype.send=il.prototype.o,il.prototype.open=il.prototype.m,il.prototype.close=il.prototype.close,sNe=function(){return new SR},iNe=function(){return rl()},rNe=fs,Qz={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,uD=ot,St.COMPLETE="complete",nNe=St,$i.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",pe.prototype.listen=pe.prototype.K,cA=$i,tNe=Ky,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,eNe=ue}).apply(typeof $N<"u"?$N:typeof self<"u"?self:typeof window<"u"?window:{});const vde="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pu.UNAUTHENTICATED=new pu(null),pu.GOOGLE_CREDENTIALS=new pu("google-credentials-uid"),pu.FIRST_PARTY=new pu("first-party-uid"),pu.MOCK_USER=new pu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new F6("@firebase/firestore");function gT(){return Yv.logLevel}function It(e,...t){if(Yv.logLevel<=Gn.DEBUG){const n=t.map(nJ);Yv.debug(`Firestore (${lS}): ${e}`,...n)}}function Rm(e,...t){if(Yv.logLevel<=Gn.ERROR){const n=t.map(nJ);Yv.error(`Firestore (${lS}): ${e}`,...n)}}function L2(e,...t){if(Yv.logLevel<=Gn.WARN){const n=t.map(nJ);Yv.warn(`Firestore (${lS}): ${e}`,...n)}}function nJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e="Unexpected state"){const t=`FIRESTORE (${lS}) INTERNAL ASSERTION FAILED: `+e;throw Rm(t),new Error(t)}function ni(e,t){e||sn()}function cn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends qh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cDt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fDt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pu.UNAUTHENTICATED))}shutdown(){}}class dDt{constructor(t){this.t=t,this.currentUser=pu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Zp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ni(typeof r.accessToken=="string"),new cDt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ni(t===null||typeof t=="string"),new pu(t)}}class hDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=pu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new hDt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(pu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mDt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gDt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ni(typeof n.token=="string"),this.R=n.token,new mDt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yDt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oNe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=yDt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function FE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ns.fromMillis(Date.now())}static fromDate(t){return Ns.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ns(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ln(t)}static min(){return new ln(new Ns(0,0))}static max(){return new ln(new Ns(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t,n,r){n===void 0?n=0:n>t.length&&sn(),r===void 0?r=t.length-n:r>t.length-n&&sn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return F2.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof F2?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ai extends F2{construct(t,n,r){return new ai(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ai(n)}static emptyPath(){return new ai([])}}const vDt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class So extends F2{construct(t,n,r){return new So(t,n,r)}static isValidIdentifier(t){return vDt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),So.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new So(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new So(n)}static emptyPath(){return new So([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(ai.fromString(t))}static fromName(t){return new Bt(ai.fromString(t).popFirst(5))}static empty(){return new Bt(ai.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ai.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ai.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new ai(t.slice()))}}function bDt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ln.fromTimestamp(r===1e9?new Ns(n+1,0):new Ns(n,r));return new Z0(i,Bt.empty(),t)}function _Dt(e){return new Z0(e.readTime,e.key,-1)}class Z0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Z0(ln.min(),Bt.empty(),-1)}static max(){return new Z0(ln.max(),Bt.empty(),-1)}}function wDt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EDt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xDt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==EDt)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function SDt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ek(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}rJ.oe=-1;function q6(e){return e==null}function g$(e){return e===0&&1/e==-1/0}function TDt(e){return typeof e=="number"&&Number.isInteger(e)&&!g$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bde(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function aNe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||wo.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wo.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new MN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new MN(this.root,t,this.comparator,!1)}getReverseIterator(){return new MN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new MN(this.root,t,this.comparator,!0)}}class MN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??wo.RED,this.left=i??wo.EMPTY,this.right=s??wo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new wo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return wo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const t=this.left.check();if(t!==this.right.check())throw sn();return t+(this.isRed()?0:1)}}wo.EMPTY=null,wo.RED=!0,wo.BLACK=!1;wo.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new wo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _de(this.data.getIterator())}getIteratorFrom(t){return new _de(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof ko)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ko(this.comparator);return n.data=t,n}}class _de{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t){this.fields=t,t.sort(So.comparator)}static empty(){return new _l([])}unionWith(t){let n=new ko(So.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new _l(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return FE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uNe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uNe("Invalid base64 string: "+s):s}}(t);return new ya(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ya(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ya.EMPTY_BYTE_STRING=new ya("");const ADt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ey(e){if(ni(!!e),typeof e=="string"){let t=0;const n=ADt.exec(e);if(ni(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ms(e.seconds),nanos:ms(e.nanos)}}function ms(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Kv(e){return typeof e=="string"?ya.fromBase64String(e):ya.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sJ(e){const t=e.mapValue.fields.__previous_value__;return iJ(t)?sJ(t):t}function j2(e){const t=ey(e.mapValue.fields.__local_write_time__.timestampValue);return new Ns(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CDt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class B2{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new B2("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof B2&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?iJ(e)?4:IDt(e)?9007199254740991:10:sn()}function Sh(e,t){if(e===t)return!0;const n=Xv(e);if(n!==Xv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return j2(e).isEqual(j2(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ey(i.timestampValue),a=ey(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Kv(i.bytesValue).isEqual(Kv(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ms(i.geoPointValue.latitude)===ms(s.geoPointValue.latitude)&&ms(i.geoPointValue.longitude)===ms(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ms(i.integerValue)===ms(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ms(i.doubleValue),a=ms(s.doubleValue);return o===a?g$(o)===g$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return FE(e.arrayValue.values||[],t.arrayValue.values||[],Sh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bde(o)!==bde(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Sh(o[u],a[u])))return!1;return!0}(e,t);default:return sn()}}function U2(e,t){return(e.values||[]).find(n=>Sh(n,t))!==void 0}function jE(e,t){if(e===t)return 0;const n=Xv(e),r=Xv(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ms(s.integerValue||s.doubleValue),u=ms(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return wde(e.timestampValue,t.timestampValue);case 4:return wde(j2(e),j2(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Kv(s),u=Kv(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(ms(s.latitude),ms(o.latitude));return a!==0?a:vr(ms(s.longitude),ms(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=jE(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===LN.mapValue&&o===LN.mapValue)return 0;if(s===LN.mapValue)return 1;if(o===LN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=jE(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw sn()}}function wde(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=ey(e),r=ey(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function BE(e){return Jz(e)}function Jz(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ey(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Kv(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Jz(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Jz(n.fields[o])}`;return i+"}"}(e.mapValue):sn()}function Ede(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Zz(e){return!!e&&"integerValue"in e}function oJ(e){return!!e&&"arrayValue"in e}function xde(e){return!!e&&"nullValue"in e}function Sde(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function lD(e){return!!e&&"mapValue"in e}function pC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Rb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=pC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=pC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function IDt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t){this.value=t}static empty(){return new Su({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!lD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=pC(n)}setAll(t){let n=So.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=pC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());lD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Sh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];lD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Rb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Su(pC(this.value))}}function lNe(e){const t=[];return Rb(e.fields,(n,r)=>{const i=new So([n]);if(lD(r)){const s=lNe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new _l(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new sa(t,0,ln.min(),ln.min(),ln.min(),Su.empty(),0)}static newFoundDocument(t,n,r,i){return new sa(t,1,n,ln.min(),r,i,0)}static newNoDocument(t,n){return new sa(t,2,n,ln.min(),ln.min(),Su.empty(),0)}static newUnknownDocument(t,n){return new sa(t,3,n,ln.min(),ln.min(),Su.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ln.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Su.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Su.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Tde(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=jE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ade(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(t,n="asc"){this.field=t,this.dir=n}}function kDt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cNe=class{};class ys extends cNe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new NDt(t,n,r):n==="array-contains"?new ODt(t,r):n==="in"?new $Dt(t,r):n==="not-in"?new MDt(t,r):n==="array-contains-any"?new LDt(t,r):new ys(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new PDt(t,r):new DDt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(jE(n,this.value)):n!==null&&Xv(this.value)===Xv(n)&&this.matchesComparison(jE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Uf extends cNe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Uf(t,n)}matches(t){return fNe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fNe(e){return e.op==="and"}function dNe(e){return RDt(e)&&fNe(e)}function RDt(e){for(const t of e.filters)if(t instanceof Uf)return!1;return!0}function eV(e){if(e instanceof ys)return e.field.canonicalString()+e.op.toString()+BE(e.value);if(dNe(e))return e.filters.map(t=>eV(t)).join(",");{const t=e.filters.map(n=>eV(n)).join(",");return`${e.op}(${t})`}}function hNe(e,t){return e instanceof ys?function(r,i){return i instanceof ys&&r.op===i.op&&r.field.isEqual(i.field)&&Sh(r.value,i.value)}(e,t):e instanceof Uf?function(r,i){return i instanceof Uf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&hNe(o,i.filters[a]),!0):!1}(e,t):void sn()}function pNe(e){return e instanceof ys?function(n){return`${n.field.canonicalString()} ${n.op} ${BE(n.value)}`}(e):e instanceof Uf?function(n){return n.op.toString()+" {"+n.getFilters().map(pNe).join(" ,")+"}"}(e):"Filter"}class NDt extends ys{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class PDt extends ys{constructor(t,n){super(t,"in",n),this.keys=mNe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class DDt extends ys{constructor(t,n){super(t,"not-in",n),this.keys=mNe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function mNe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class ODt extends ys{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return oJ(n)&&U2(n.arrayValue,this.value)}}class $Dt extends ys{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&U2(this.value.arrayValue,n)}}class MDt extends ys{constructor(t,n){super(t,"not-in",n)}matches(t){if(U2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!U2(this.value.arrayValue,n)}}class LDt extends ys{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!oJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>U2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FDt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Cde(e,t=null,n=[],r=[],i=null,s=null,o=null){return new FDt(e,t,n,r,i,s,o)}function aJ(e){const t=cn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>eV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),q6(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>BE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>BE(r)).join(",")),t.ue=n}return t.ue}function uJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!kDt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!hNe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ade(e.startAt,t.startAt)&&Ade(e.endAt,t.endAt)}function tV(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jDt(e,t,n,r,i,s,o,a){return new cS(e,t,n,r,i,s,o,a)}function lJ(e){return new cS(e)}function Ide(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function gNe(e){return e.collectionGroup!==null}function mC(e){const t=cn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ko(So.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new z2(s,r))}),n.has(So.keyField().canonicalString())||t.ce.push(new z2(So.keyField(),r))}return t.ce}function ah(e){const t=cn(e);return t.le||(t.le=BDt(t,mC(e))),t.le}function BDt(e,t){if(e.limitType==="F")return Cde(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new z2(i.field,s)});const n=e.endAt?new y$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new y$(e.startAt.position,e.startAt.inclusive):null;return Cde(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function nV(e,t){const n=e.filters.concat([t]);return new cS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rV(e,t,n){return new cS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function W6(e,t){return uJ(ah(e),ah(t))&&e.limitType===t.limitType}function yNe(e){return`${aJ(ah(e))}|lt:${e.limitType}`}function D_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pNe(i)).join(", ")}]`),q6(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>BE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>BE(i)).join(",")),`Target(${r})`}(ah(e))}; limitType=${e.limitType})`}function G6(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of mC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Tde(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,mC(r),i)||r.endAt&&!function(o,a,u){const l=Tde(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,mC(r),i))}(e,t)}function UDt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vNe(e){return(t,n)=>{let r=!1;for(const i of mC(e)){const s=zDt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zDt(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?jE(u,l):sn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Rb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return aNe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VDt=new Oi(Bt.comparator);function Nm(){return VDt}const bNe=new Oi(Bt.comparator);function fA(...e){let t=bNe;for(const n of e)t=t.insert(n.key,n);return t}function _Ne(e){let t=bNe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function rv(){return gC()}function wNe(){return gC()}function gC(){return new fS(e=>e.toString(),(e,t)=>e.isEqual(t))}const HDt=new Oi(Bt.comparator),qDt=new ko(Bt.comparator);function zn(...e){let t=qDt;for(const n of e)t=t.add(n);return t}const WDt=new ko(vr);function GDt(){return WDt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ENe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:g$(t)?"-0":t}}function xNe(e){return{integerValue:""+e}}function YDt(e,t){return TDt(t)?xNe(t):ENe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this._=void 0}}function KDt(e,t,n){return e instanceof V2?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&iJ(s)&&(s=sJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof H2?TNe(e,t):e instanceof q2?ANe(e,t):function(i,s){const o=SNe(i,s),a=kde(o)+kde(i.Pe);return Zz(o)&&Zz(i.Pe)?xNe(a):ENe(i.serializer,a)}(e,t)}function XDt(e,t,n){return e instanceof H2?TNe(e,t):e instanceof q2?ANe(e,t):n}function SNe(e,t){return e instanceof v$?function(r){return Zz(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class V2 extends Y6{}class H2 extends Y6{constructor(t){super(),this.elements=t}}function TNe(e,t){const n=CNe(t);for(const r of e.elements)n.some(i=>Sh(i,r))||n.push(r);return{arrayValue:{values:n}}}class q2 extends Y6{constructor(t){super(),this.elements=t}}function ANe(e,t){let n=CNe(t);for(const r of e.elements)n=n.filter(i=>!Sh(i,r));return{arrayValue:{values:n}}}class v$ extends Y6{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function kde(e){return ms(e.integerValue||e.doubleValue)}function CNe(e){return oJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QDt{constructor(t,n){this.field=t,this.transform=n}}function JDt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof H2&&i instanceof H2||r instanceof q2&&i instanceof q2?FE(r.elements,i.elements,Sh):r instanceof v$&&i instanceof v$?Sh(r.Pe,i.Pe):r instanceof V2&&i instanceof V2}(e.transform,t.transform)}class ZDt{constructor(t,n){this.version=t,this.transformResults=n}}class Fu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Fu}static exists(t){return new Fu(void 0,t)}static updateTime(t){return new Fu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function cD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class K6{}function INe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new X6(e.key,Fu.none()):new xk(e.key,e.data,Fu.none());{const n=e.data,r=Su.empty();let i=new ko(So.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Oy(e.key,r,new _l(i.toArray()),Fu.none())}}function eOt(e,t,n){e instanceof xk?function(i,s,o){const a=i.value.clone(),u=Nde(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Oy?function(i,s,o){if(!cD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Nde(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(kNe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function yC(e,t,n,r){return e instanceof xk?function(s,o,a,u){if(!cD(s.precondition,o))return a;const l=s.value.clone(),c=Pde(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Oy?function(s,o,a,u){if(!cD(s.precondition,o))return a;const l=Pde(s.fieldTransforms,u,o),c=o.data;return c.setAll(kNe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return cD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function tOt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=SNe(r.transform,i||null);s!=null&&(n===null&&(n=Su.empty()),n.set(r.field,s))}return n||null}function Rde(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&FE(r,i,(s,o)=>JDt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xk extends K6{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oy extends K6{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kNe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Nde(e,t,n){const r=new Map;ni(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,XDt(o,a,n[i]))}return r}function Pde(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,KDt(s,o,t))}return r}class X6 extends K6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nOt extends K6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rOt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&eOt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=yC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=yC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=wNe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=INe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ln.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&FE(this.mutations,t.mutations,(n,r)=>Rde(n,r))&&FE(this.baseMutations,t.baseMutations,(n,r)=>Rde(n,r))}}class cJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ni(t.mutations.length===r.length);let i=function(){return HDt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new cJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iOt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sOt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds,Zn;function oOt(e){switch(e){default:return sn();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function RNe(e){if(e===void 0)return Rm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case ds.OK:return Be.OK;case ds.CANCELLED:return Be.CANCELLED;case ds.UNKNOWN:return Be.UNKNOWN;case ds.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case ds.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case ds.INTERNAL:return Be.INTERNAL;case ds.UNAVAILABLE:return Be.UNAVAILABLE;case ds.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case ds.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case ds.NOT_FOUND:return Be.NOT_FOUND;case ds.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case ds.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case ds.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case ds.ABORTED:return Be.ABORTED;case ds.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case ds.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case ds.DATA_LOSS:return Be.DATA_LOSS;default:return sn()}}(Zn=ds||(ds={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aOt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uOt=new mv([4294967295,4294967295],0);function Dde(e){const t=aOt().encode(e),n=new ZRe;return n.update(t),new Uint8Array(n.digest())}function Ode(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new mv([n,r],0),new mv([i,s],0)]}class fJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dA(`Invalid padding: ${n}`);if(r<0)throw new dA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new dA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new dA(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=mv.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(mv.fromNumber(r)));return i.compare(uOt)===1&&(i=new mv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Dde(t),[r,i]=Ode(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new fJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Dde(t),[r,i]=Ode(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class dA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Sk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Q6(ln.min(),i,new Oi(vr),Nm(),zn())}}class Sk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Sk(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class NNe{constructor(t,n){this.targetId=t,this.me=n}}class PNe{constructor(t,n,r=ya.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $de{constructor(){this.fe=0,this.ge=Lde(),this.pe=ya.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:sn()}}),new Sk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Lde()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ni(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lOt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Nm(),this.qe=Mde(),this.Qe=new Oi(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:sn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(tV(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,sa.newNoDocument(o,ln.min()))}else ni(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Kv(r).toUint8Array()}catch(u){if(u instanceof uNe)return L2("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new fJ(o,i,s)}catch(u){return L2(u instanceof dA?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&tV(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,sa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Q6(t,n,this.Qe,this.ke,r);return this.ke=Nm(),this.qe=Mde(),this.Qe=new Oi(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new $de,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new ko(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new $de),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Mde(){return new Oi(Bt.comparator)}function Lde(){return new Oi(Bt.comparator)}const cOt={asc:"ASCENDING",desc:"DESCENDING"},fOt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dOt={and:"AND",or:"OR"};class hOt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function iV(e,t){return e.useProto3Json||q6(t)?t:{value:t}}function b$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DNe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function pOt(e,t){return b$(e,t.toTimestamp())}function uh(e){return ni(!!e),ln.fromTimestamp(function(n){const r=ey(n);return new Ns(r.seconds,r.nanos)}(e))}function dJ(e,t){return sV(e,t).canonicalString()}function sV(e,t){const n=function(i){return new ai(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function ONe(e){const t=ai.fromString(e);return ni(jNe(t)),t}function oV(e,t){return dJ(e.databaseId,t.path)}function Kj(e,t){const n=ONe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(MNe(n))}function $Ne(e,t){return dJ(e.databaseId,t)}function mOt(e){const t=ONe(e);return t.length===4?ai.emptyPath():MNe(t)}function aV(e){return new ai(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function MNe(e){return ni(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Fde(e,t,n){return{name:oV(e,t),fields:n.value.mapValue.fields}}function gOt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:sn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ni(c===void 0||typeof c=="string"),ya.fromBase64String(c||"")):(ni(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ya.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:RNe(l.code);return new bt(c,l.message||"")}(o);n=new PNe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Kj(e,r.document.name),s=uh(r.document.updateTime),o=r.document.createTime?uh(r.document.createTime):ln.min(),a=new Su({mapValue:{fields:r.document.fields}}),u=sa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new fD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Kj(e,r.document),s=r.readTime?uh(r.readTime):ln.min(),o=sa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Kj(e,r.document),s=r.removedTargetIds||[];n=new fD([],s,i,null)}else{if(!("filter"in t))return sn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new sOt(i,s),a=r.targetId;n=new NNe(a,o)}}return n}function yOt(e,t){let n;if(t instanceof xk)n={update:Fde(e,t.key,t.value)};else if(t instanceof X6)n={delete:oV(e,t.key)};else if(t instanceof Oy)n={update:Fde(e,t.key,t.data),updateMask:AOt(t.fieldMask)};else{if(!(t instanceof nOt))return sn();n={verify:oV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof V2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof H2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof q2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof v$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw sn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pOt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:sn()}(e,t.precondition)),n}function vOt(e,t){return e&&e.length>0?(ni(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?uh(i.updateTime):uh(s);return o.isEqual(ln.min())&&(o=uh(s)),new ZDt(o,i.transformResults||[])}(n,t))):[]}function bOt(e,t){return{documents:[$Ne(e,t.path)]}}function _Ot(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$Ne(e,i);const s=function(l){if(l.length!==0)return FNe(Uf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:O_(d.field),direction:xOt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=iV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function wOt(e){let t=mOt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ni(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=LNe(f);return d instanceof Uf&&dNe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new z2($_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,q6(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new y$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new y$(h,d)}(n.endAt)),jDt(t,i,o,s,a,"F",u,l)}function EOt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function LNe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$_(n.unaryFilter.field);return ys.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$_(n.unaryFilter.field);return ys.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$_(n.unaryFilter.field);return ys.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$_(n.unaryFilter.field);return ys.create(o,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(e):e.fieldFilter!==void 0?function(n){return ys.create($_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Uf.create(n.compositeFilter.filters.map(r=>LNe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return sn()}}(n.compositeFilter.op))}(e):sn()}function xOt(e){return cOt[e]}function SOt(e){return fOt[e]}function TOt(e){return dOt[e]}function O_(e){return{fieldPath:e.canonicalString()}}function $_(e){return So.fromServerFormat(e.fieldPath)}function FNe(e){return e instanceof ys?function(n){if(n.op==="=="){if(Sde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NAN"}};if(xde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NOT_NAN"}};if(xde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O_(n.field),op:SOt(n.op),value:n.value}}}(e):e instanceof Uf?function(n){const r=n.getFilters().map(i=>FNe(i));return r.length===1?r[0]:{compositeFilter:{op:TOt(n.op),filters:r}}}(e):sn()}function AOt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function jNe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,n,r,i,s=ln.min(),o=ln.min(),a=ya.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Yg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class COt{constructor(t){this.ct=t}}function IOt(e){const t=wOt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?rV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kOt{constructor(){this._n=new ROt}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(Z0.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(Z0.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class ROt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new ko(ai.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new ko(ai.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new UE(0)}static Ln(){return new UE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NOt{constructor(){this.changes=new fS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,sa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class POt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&yC(r.mutation,i,_l.empty(),Ns.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=rv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=fA();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=rv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Nm();const o=gC(),a=function(){return gC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Oy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),yC(c.mutation,l,c.mutation.getFieldMask(),Ns.now())):o.set(l.key,_l.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new POt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=gC();let i=new Oi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||_l.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=wNe();c.forEach(d=>{if(!s.has(d)){const h=INe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):gNe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(rv());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:_Ne(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=fA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=fA();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new cS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,sa.newInvalidDocument(c)))});let a=fA();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&yC(c.mutation,l,_l.empty(),Ns.now()),G6(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OOt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:uh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:IOt(i.bundledQuery),readTime:uh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ot{constructor(){this.overlays=new Oi(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=rv();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=rv(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Oi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=rv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=rv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iOt(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hJ{constructor(){this.Pr=new ko(Ws.Ir),this.Tr=new ko(Ws.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ws(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ws(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new ai([])),r=new Ws(n,t),i=new Ws(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new ai([])),r=new Ws(n,t),i=new Ws(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ws(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ws{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MOt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ko(Ws.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rOt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ws(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ws(n,0),i=new Ws(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ko(vr);return n.forEach(i=>{const s=new Ws(i,0),o=new Ws(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Ws(new Bt(s),0);let a=new ko(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ni(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Ws(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ws(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LOt{constructor(t){this.vr=t,this.docs=function(){return new Oi(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():sa.newInvalidDocument(n))}getEntries(t,n){let r=Nm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sa.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Nm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||wDt(_Dt(c),r)<=0||(i.has(c.key)||G6(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){sn()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new FOt(this)}getSize(t){return Xe.resolve(this.size)}}class FOt extends NOt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jOt{constructor(t){this.persistence=t,this.Mr=new fS(n=>aJ(n),uJ),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hJ,this.targetCount=0,this.Lr=UE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new UE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BOt{constructor(t,n){this.Br={},this.overlays={},this.kr=new rJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new jOt(this),this.indexManager=new kOt,this.remoteDocumentCache=function(i){return new LOt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new COt(n),this.$r=new OOt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $Ot,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new MOt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new UOt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class UOt extends xDt{constructor(t){super(),this.currentSequenceNumber=t}}class pJ{constructor(t){this.persistence=t,this.zr=new hJ,this.jr=null}static Hr(t){return new pJ(t)}get Jr(){if(this.jr)return this.jr;throw sn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,ln.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zOt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VOt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return EIt()?8:SDt(Oo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zOt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(gT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",D_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(gT()<=Gn.DEBUG&&It("QueryEngine","Query:",D_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(gT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",D_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ah(n))):Xe.resolve())}ji(t,n){if(Ide(n))return Xe.resolve(null);let r=ah(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rV(n,null,"F"),r=ah(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,rV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Ide(n)||i.isEqual(ln.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(gT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),D_(n)),this.es(t,o,n,bDt(i,-1)).next(a=>a))})}Zi(t,n){let r=new ko(vNe(t));return n.forEach((i,s)=>{G6(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return gT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",D_(n)),this.zi.getDocumentsMatchingQuery(t,n,Z0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HOt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Oi(vr),this.rs=new fS(s=>aJ(s),uJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new DOt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function qOt(e,t,n,r){return new HOt(e,t,n,r)}async function BNe(e,t){const n=cn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function WOt(e,t){const n=cn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ni(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function UNe(e){const t=cn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function GOt(e,t){const n=cn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ya.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Nm(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(YOt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(ln.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function YOt(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Nm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ln.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function KOt(e,t){const n=cn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function XOt(e,t){const n=cn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Yg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function uV(e,t,n){const r=cn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ek(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function jde(e,t,n){const r=cn(e);let i=ln.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=cn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,ah(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:ln.min(),n?s:zn())).next(a=>(QOt(r,UDt(t),a),{documents:a,hs:s})))}function QOt(e,t,n){let r=e.ss.get(t)||ln.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Bde{constructor(){this.activeTargetIds=GDt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class JOt{constructor(){this.no=new Bde,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Bde,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZOt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ude{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FN=null;function Xj(){return FN===null?FN=function(){return 268435456+Math.round(2147483648*Math.random())}():FN++,"0x"+FN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3t{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="WebChannelConnection";class n3t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Xj(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw L2("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=e3t[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=Xj();return new Promise((o,a)=>{const u=new eNe;u.setWithCredentials(!0),u.listenOnce(nNe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case uD.NO_ERROR:const c=u.getResponseJson();It(Qo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case uD.TIMEOUT:It(Qo,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case uD.HTTP_ERROR:const f=u.getStatus();if(It(Qo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{It(Qo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(Qo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=Xj(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=sNe(),a=iNe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new tNe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(Qo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new t3t({lo:g=>{h?It(Qo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(Qo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(Qo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,cA.EventType.OPEN,()=>{h||(It(Qo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,cA.EventType.CLOSE,()=>{h||(h=!0,It(Qo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,cA.EventType.ERROR,g=>{h||(h=!0,L2(Qo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,cA.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ni(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(Qo,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(C){const I=ds[C];if(I!==void 0)return RNe(I)}(E),T=w.message;S===void 0&&(S=Be.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(S,T)),f.close()}else It(Qo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,rNe.STAT_EVENT,g=>{g.stat===Qz.PROXY?It(Qo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Qz.NOPROXY&&It(Qo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Qj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(e){return new hOt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zNe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VNe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new zNe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Rm(n.toString()),Rm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r3t extends VNe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=gOt(this.serializer,t),r=function(s){if(!("targetChange"in s))return ln.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ln.min():o.readTime?uh(o.readTime):ln.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=aV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=tV(u)?{documents:bOt(s,u)}:{query:_Ot(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DNe(s,o.resumeToken);const l=iV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ln.min())>0){a.readTime=b$(s,o.snapshotVersion.toTimestamp());const l=iV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=EOt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=aV(this.serializer),n.removeTarget=t,this.i_(n)}}class i3t extends VNe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ni(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=vOt(t.writeResults,t.commitTime),r=uh(t.commitTime);return this.listener.A_(r,n)}return ni(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=aV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>yOt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,sV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,sV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class o3t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Rm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Nb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=cn(u);l.M_.add(4),await Ak(l),l.N_.set("Unknown"),l.M_.delete(4),await Tk(l)}(this))})}),this.N_=new o3t(r,i)}}async function Tk(e){if(Nb(e))for(const t of e.x_)await t(!0)}async function Ak(e){for(const t of e.x_)await t(!1)}function HNe(e,t){const n=cn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),bJ(n)?vJ(n):dS(n).Xo()&&yJ(n,t))}function gJ(e,t){const n=cn(e),r=dS(n);n.F_.delete(t),r.Xo()&&qNe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Nb(n)&&n.N_.set("Unknown"))}function yJ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ln.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dS(e).P_(t)}function qNe(e,t){e.L_.xe(t),dS(e).I_(t)}function vJ(e){e.L_=new lOt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),dS(e).start(),e.N_.w_()}function bJ(e){return Nb(e)&&!dS(e).Zo()&&e.F_.size>0}function Nb(e){return cn(e).M_.size===0}function WNe(e){e.L_=void 0}async function u3t(e){e.N_.set("Online")}async function l3t(e){e.F_.forEach((t,n)=>{yJ(e,t)})}async function c3t(e,t){WNe(e),bJ(e)?(e.N_.D_(t),vJ(e)):e.N_.set("Unknown")}async function f3t(e,t,n){if(e.N_.set("Online"),t instanceof PNe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await _$(e,r)}else if(t instanceof fD?e.L_.Ke(t):t instanceof NNe?e.L_.He(t):e.L_.We(t),!n.isEqual(ln.min()))try{const r=await UNe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ya.EMPTY_BYTE_STRING,c.snapshotVersion)),qNe(s,u);const f=new Yg(c.target,u,l,c.sequenceNumber);yJ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await _$(e,r)}}async function _$(e,t,n){if(!Ek(t))throw t;e.M_.add(1),await Ak(e),e.N_.set("Offline"),n||(n=()=>UNe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Tk(e)})}function GNe(e,t){return t().catch(n=>_$(e,n,t))}async function Z6(e){const t=cn(e),n=ty(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;d3t(t);)try{const i=await KOt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,h3t(t,i)}catch(i){await _$(t,i)}YNe(t)&&KNe(t)}function d3t(e){return Nb(e)&&e.v_.length<10}function h3t(e,t){e.v_.push(t);const n=ty(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function YNe(e){return Nb(e)&&!ty(e).Zo()&&e.v_.length>0}function KNe(e){ty(e).start()}async function p3t(e){ty(e).V_()}async function m3t(e){const t=ty(e);for(const n of e.v_)t.d_(n.mutations)}async function g3t(e,t,n){const r=e.v_.shift(),i=cJ.from(r,t,n);await GNe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Z6(e)}async function y3t(e,t){t&&ty(e).E_&&await async function(r,i){if(function(o){return oOt(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();ty(r).t_(),await GNe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Z6(r)}}(e,t),YNe(e)&&KNe(e)}async function zde(e,t){const n=cn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Nb(n);n.M_.add(3),await Ak(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Tk(n)}async function v3t(e,t){const n=cn(e);t?(n.M_.delete(2),await Tk(n)):t||(n.M_.add(2),await Ak(n),n.N_.set("Unknown"))}function dS(e){return e.B_||(e.B_=function(n,r,i){const s=cn(n);return s.f_(),new r3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:u3t.bind(null,e),To:l3t.bind(null,e),Ao:c3t.bind(null,e),h_:f3t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),bJ(e)?vJ(e):e.N_.set("Unknown")):(await e.B_.stop(),WNe(e))})),e.B_}function ty(e){return e.k_||(e.k_=function(n,r,i){const s=cn(n);return s.f_(),new i3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:p3t.bind(null,e),Ao:y3t.bind(null,e),R_:m3t.bind(null,e),A_:g3t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await Z6(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _J{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new _J(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wJ(e,t){if(Rm("AsyncQueue",`${t}: ${e}`),Ek(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=fA(),this.sortedSet=new Oi(this.comparator)}static emptySet(t){return new Bw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Bw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Bw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vde{constructor(){this.q_=new Oi(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):sn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class zE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zE(t,n,Bw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&W6(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class _3t{constructor(){this.queries=new fS(t=>yNe(t),W6),this.onlineState="Unknown",this.z_=new Set}}async function XNe(e,t){const n=cn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new b3t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wJ(o,`Initialization of query '${D_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&EJ(n)}async function QNe(e,t){const n=cn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function w3t(e,t){const n=cn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&EJ(n)}function E3t(e,t,n){const r=cn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function EJ(e){e.z_.forEach(t=>{t.next()})}var lV,Hde;(Hde=lV||(lV={})).J_="default",Hde.Cache="cache";class JNe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new zE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=zE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==lV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZNe{constructor(t){this.key=t}}class ePe{constructor(t){this.key=t}}class x3t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=vNe(t),this.Ta=new Bw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Vde,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=G6(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new zE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Vde,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new ePe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new ZNe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return zE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class S3t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class T3t{constructor(t){this.key=t,this.wa=!1}}class A3t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new fS(a=>yNe(a),W6),this.Da=new Map,this.Ca=new Set,this.va=new Oi(Bt.comparator),this.Fa=new Map,this.Ma=new hJ,this.xa={},this.Oa=new Map,this.Na=UE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function C3t(e,t,n=!0){const r=oPe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await tPe(r,t,n,!0),i}async function I3t(e,t){const n=oPe(e);await tPe(n,t,!0,!1)}async function tPe(e,t,n,r){const i=await XOt(e.localStore,ah(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await k3t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&HNe(e.remoteStore,i),a}async function k3t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await jde(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,w,E);return Wde(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await jde(e.localStore,t,!0),o=new x3t(t,s.hs),a=o.da(s.documents),u=Sk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Wde(e,n,l.fa);const c=new S3t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function R3t(e,t,n){const r=cn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!W6(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gJ(r.remoteStore,i.targetId),cV(r,i.targetId)}).catch(wk)):(cV(r,i.targetId),await uV(r.localStore,i.targetId,!0))}async function N3t(e,t){const n=cn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gJ(n.remoteStore,r.targetId))}async function P3t(e,t,n){const r=j3t(e);try{const i=await function(o,a){const u=cn(o),l=Ns.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Nm(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=tOt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Oy(v.key,b,lNe(b.value.mapValue),Fu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:_Ne(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Oi(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Ck(r,i.changes),await Z6(r.remoteStore)}catch(i){const s=wJ(i,"Failed to persist write");n.reject(s)}}async function nPe(e,t){const n=cn(e);try{const r=await GOt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ni(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ni(o.wa):i.removedDocuments.size>0&&(ni(o.wa),o.wa=!1))}),await Ck(n,r,t)}catch(r){await wk(r)}}function qde(e,t,n){const r=cn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=cn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&EJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function D3t(e,t,n){const r=cn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Oi(Bt.comparator);o=o.insert(s,sa.newNoDocument(s,ln.min()));const a=zn().add(s),u=new Q6(ln.min(),new Map,new Oi(vr),o,a);await nPe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),xJ(r)}else await uV(r.localStore,t,!1).then(()=>cV(r,t,n)).catch(wk)}async function O3t(e,t){const n=cn(e),r=t.batch.batchId;try{const i=await WOt(n.localStore,t);iPe(n,r,null),rPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ck(n,i)}catch(i){await wk(i)}}async function $3t(e,t,n){const r=cn(e);try{const i=await function(o,a){const u=cn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ni(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);iPe(r,t,n),rPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ck(r,i)}catch(i){await wk(i)}}function rPe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function iPe(e,t,n){const r=cn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function cV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||sPe(e,r)})}function sPe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(gJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),xJ(e))}function Wde(e,t,n){for(const r of n)r instanceof ZNe?(e.Ma.addReference(r.key,t),M3t(e,r)):r instanceof ePe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||sPe(e,r.key)):sn()}function M3t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),xJ(e))}function xJ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(ai.fromString(t)),r=e.Na.next();e.Fa.set(r,new T3t(n)),e.va=e.va.insert(n,r),HNe(e.remoteStore,new Yg(ah(lJ(n.path)),r,"TargetPurposeLimboResolution",rJ.oe))}}async function Ck(e,t,n){const r=cn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=mJ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=cn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Ek(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function L3t(e,t){const n=cn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await BNe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ck(n,r.us)}}function F3t(e,t){const n=cn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function oPe(e){const t=cn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=nPe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=F3t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=D3t.bind(null,t),t.Sa.h_=w3t.bind(null,t.eventManager),t.Sa.ka=E3t.bind(null,t.eventManager),t}function j3t(e){const t=cn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=O3t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$3t.bind(null,t),t}class Gde{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=J6(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return qOt(this.persistence,new VOt,t.initialUser,this.serializer)}createPersistence(t){return new BOt(pJ.Hr,this.serializer)}createSharedClientState(t){return new JOt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class B3t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qde(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=L3t.bind(null,this.syncEngine),await v3t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new _3t}()}createDatastore(t){const n=J6(t.databaseInfo.databaseId),r=function(s){return new n3t(s)}(t.databaseInfo);return function(s,o,a,u){return new s3t(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new a3t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>qde(this.syncEngine,n,0),function(){return Ude.D()?new Ude:new ZOt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new A3t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=cn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Ak(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Rm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pu.UNAUTHENTICATED,this.clientId=oNe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=wJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Jj(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await BNe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Yde(e,t){e.asyncQueue.verifyOperationInProgress();const n=await uPe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>zde(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>zde(t.remoteStore,i)),e._onlineComponents=t}function z3t(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function uPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jj(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!z3t(n))throw n;L2("Error using user provided cache. Falling back to memory cache: "+n),await Jj(e,new Gde)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await Jj(e,new Gde);return e._offlineComponents}async function SJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Yde(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Yde(e,new B3t))),e._onlineComponents}function V3t(e){return uPe(e).then(t=>t.persistence)}function H3t(e){return SJ(e).then(t=>t.remoteStore)}function q3t(e){return SJ(e).then(t=>t.syncEngine)}async function lPe(e){const t=await SJ(e),n=t.eventManager;return n.onListen=C3t.bind(null,t.syncEngine),n.onUnlisten=R3t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=I3t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=N3t.bind(null,t.syncEngine),n}function W3t(e){return e.asyncQueue.enqueue(async()=>{const t=await V3t(e),n=await H3t(e);return t.setNetworkEnabled(!0),function(i){const s=cn(i);return s.M_.delete(0),Tk(s)}(n)})}function G3t(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new aPe({next:d=>{o.enqueueAndForget(()=>QNe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new JNe(lJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return XNe(s,f)}(await lPe(e),e.asyncQueue,t,n,r)),r.promise}function Y3t(e,t,n={}){const r=new Zp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new aPe({next:d=>{o.enqueueAndForget(()=>QNe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new JNe(a,c,{includeMetadataChanges:!0,ra:!0});return XNe(s,f)}(await lPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cPe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kde=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fPe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function K3t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Xde(e){if(!Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Qde(e){if(Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function eF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":sn()}function zf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eF(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jde{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}K3t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cPe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class TJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jde({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jde(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fDt;switch(r.type){case"firstParty":return new pDt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kde.get(n);r&&(It("ComponentProvider","Removing Datastore"),Kde.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Pb(this.firestore,t,this._query)}}class qa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new w0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qa(this.firestore,t,this._key)}}class w0 extends Pb{constructor(t,n,r){super(t,n,lJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qa(this.firestore,null,new Bt(t))}withConverter(t){return new w0(this.firestore,t,this._path)}}function Gc(e,t,...n){if(e=ri(e),fPe("collection","path",t),e instanceof TJ){const r=ai.fromString(t,...n);return Qde(r),new w0(e,null,r)}{if(!(e instanceof qa||e instanceof w0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ai.fromString(t,...n));return Qde(r),new w0(e.firestore,null,r)}}function zs(e,t,...n){if(e=ri(e),arguments.length===1&&(t=oNe.newId()),fPe("doc","path",t),e instanceof TJ){const r=ai.fromString(t,...n);return Xde(r),new qa(e,null,new Bt(r))}{if(!(e instanceof qa||e instanceof w0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ai.fromString(t,...n));return Xde(r),new qa(e.firestore,e instanceof w0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new zNe(this,"async_queue_retry"),this.hu=()=>{const n=Qj();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Qj();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Qj();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Zp;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Ek(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Rm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=_J.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&sn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class $y extends TJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new X3t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||dPe(this),this._firestoreClient.terminate()}}function Q3t(e,t,n){n||(n="(default)");const r=aS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(O2(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Ik(e){return e._firestoreClient||dPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function dPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new CDt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,cPe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new U3t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function J3t(e){return W3t(Ik(e=zf(e,$y)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new VE(ya.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new VE(ya.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new So(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3t=/^__.*__$/;class e$t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Oy(t,this.data,this.fieldMask,n,this.fieldTransforms):new xk(t,this.data,n,this.fieldTransforms)}}class hPe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Oy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function pPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class CJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new CJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return w$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(pPe(this.fu)&&Z3t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class t$t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||J6(t)}Fu(t,n,r,i=!1){return new CJ({fu:t,methodName:n,vu:r,path:So.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nF(e){const t=e._freezeSettings(),n=J6(e._databaseId);return new t$t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mPe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);kJ("Data must be an object, but it was:",o,r);const a=vPe(r,o);let u,l;if(s.merge)u=new _l(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=fV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);_Pe(c,d)||c.push(d)}u=new _l(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new e$t(new Su(a),u,l)}class rF extends tF{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof rF}}class IJ extends tF{_toFieldTransform(t){return new QDt(t.path,new V2)}isEqual(t){return t instanceof IJ}}function gPe(e,t,n,r){const i=e.Fu(1,t,n);kJ("Data must be an object, but it was:",i,r);const s=[],o=Su.empty();Rb(r,(u,l)=>{const c=RJ(t,u,n);l=ri(l);const f=i.Su(c);if(l instanceof rF)s.push(c);else{const d=Rk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new _l(s);return new hPe(o,a,i.fieldTransforms)}function yPe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[fV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(fV(t,s[d])),u.push(s[d+1]);const l=[],c=Su.empty();for(let d=a.length-1;d>=0;--d)if(!_Pe(l,a[d])){const h=a[d];let p=u[d];p=ri(p);const m=o.Su(h);if(p instanceof rF)l.push(h);else{const g=Rk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new _l(l);return new hPe(c,f,o.fieldTransforms)}function n$t(e,t,n,r=!1){return Rk(n,e.Fu(r?4:3,t))}function Rk(e,t){if(bPe(e=ri(e)))return kJ("Unsupported field value:",t,e),vPe(e,t);if(e instanceof tF)return function(r,i){if(!pPe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Rk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ri(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YDt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ns.fromDate(r);return{timestampValue:b$(i.serializer,s)}}if(r instanceof Ns){const s=new Ns(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:b$(i.serializer,s)}}if(r instanceof AJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof VE)return{bytesValue:DNe(i.serializer,r._byteString)};if(r instanceof qa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${eF(r)}`)}(e,t)}function vPe(e,t){const n={};return aNe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rb(e,(r,i)=>{const s=Rk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function bPe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ns||e instanceof AJ||e instanceof VE||e instanceof qa||e instanceof tF)}function kJ(e,t,n){if(!bPe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=eF(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function fV(e,t,n){if((t=ri(t))instanceof kk)return t._internalPath;if(typeof t=="string")return RJ(e,t);throw w$("Field path arguments must be of type string or ",e,!1,void 0,n)}const r$t=new RegExp("[~\\*/\\[\\]]");function RJ(e,t,n){if(t.search(r$t)>=0)throw w$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new kk(...t.split("."))._internalPath}catch{throw w$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function w$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function _Pe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new i$t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(iF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i$t extends wPe{data(){return super.data()}}function iF(e,t){return typeof t=="string"?RJ(e,t):t instanceof kk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NJ{}class EPe extends NJ{}function Zde(e,t,...n){let r=[];t instanceof NJ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof PJ).length,a=s.filter(u=>u instanceof sF).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class sF extends EPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new sF(t,n,r)}_apply(t){const n=this._parse(t);return xPe(t._query,n),new Pb(t.firestore,t.converter,nV(t._query,n))}_parse(t){const n=nF(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){the(f,c);const h=[];for(const p of f)h.push(ehe(u,s,p));d={arrayValue:{values:h}}}else d=ehe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||the(f,c),d=n$t(a,o,f,c==="in"||c==="not-in");return ys.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function o$t(e,t,n){const r=t,i=iF("where",e);return sF._create(i,r,n)}class PJ extends NJ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new PJ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Uf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)xPe(o,u),o=nV(o,u)}(t._query,n),new Pb(t.firestore,t.converter,nV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class DJ extends EPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new DJ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new z2(s,o)}(t._query,this._field,this._direction);return new Pb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new cS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function a$t(e,t="asc"){const n=t,r=iF("orderBy",e);return DJ._create(r,n)}function ehe(e,t,n){if(typeof(n=ri(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gNe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ai.fromString(n));if(!Bt.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ede(e,new Bt(r))}if(n instanceof qa)return Ede(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eF(n)}.`)}function the(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function xPe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class u$t{convertValue(t,n="none"){switch(Xv(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ms(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Kv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw sn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Rb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new AJ(ms(t.latitude),ms(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=sJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(j2(t));default:return null}}convertTimestamp(t){const n=ey(t);return new Ns(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ai.fromString(t);ni(jNe(r));const i=new B2(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||Rm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SPe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class TPe extends wPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new dD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(iF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class dD extends TPe{data(t={}){return super.data(t)}}class l$t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new hA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new dD(this._firestore,this._userDataWriter,r.key,r,new hA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new dD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new dD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:c$t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function c$t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(e){e=zf(e,qa);const t=zf(e.firestore,$y);return G3t(Ik(t),e._key).then(n=>h$t(t,e,n))}class APe extends u$t{constructor(t){super(),this.firestore=t}convertBytes(t){return new VE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qa(this.firestore,null,n)}}function yT(e){e=zf(e,Pb);const t=zf(e.firestore,$y),n=Ik(t),r=new APe(t);return s$t(e._query),Y3t(n,e._query).then(i=>new l$t(t,r,e,i))}function Yc(e,t,n){e=zf(e,qa);const r=zf(e.firestore,$y),i=SPe(e.converter,t,n);return oF(r,[mPe(nF(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Fu.none())])}function f$t(e,t,n,...r){e=zf(e,qa);const i=zf(e.firestore,$y),s=nF(i);let o;return o=typeof(t=ri(t))=="string"||t instanceof kk?yPe(s,"updateDoc",e._key,t,n,r):gPe(s,"updateDoc",e._key,t),oF(i,[o.toMutation(e._key,Fu.exists(!0))])}function d$t(e){return oF(zf(e.firestore,$y),[new X6(e._key,Fu.none())])}function oF(e,t){return function(r,i){const s=new Zp;return r.asyncQueue.enqueueAndForget(async()=>P3t(await q3t(r),i,s)),s.promise}(Ik(e),t)}function h$t(e,t,n){const r=n.docs.get(t._key),i=new APe(e);return new TPe(e,i,t._key,r,new hA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p$t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nF(t)}set(t,n,r){this._verifyNotCommitted();const i=eB(t,this._firestore),s=SPe(i.converter,n,r),o=mPe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Fu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=eB(t,this._firestore);let o;return o=typeof(n=ri(n))=="string"||n instanceof kk?yPe(this._dataReader,"WriteBatch.update",s._key,n,r,i):gPe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Fu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=eB(t,this._firestore);return this._mutations=this._mutations.concat(new X6(n._key,Fu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function eB(e,t){if((e=ri(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function m$t(){return new IJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nhe(e){return Ik(e=zf(e,$y)),new p$t(e,t=>oF(e,t))}(function(t,n=!0){(function(i){lS=i})(kb),Im(new Eh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $y(new dDt(r.getProvider("auth-internal")),new gDt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new B2(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Pf(vde,"4.6.3",t),Pf(vde,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new Map,CPe={activated:!1,tokenObservers:[]},g$t={initialized:!1,enabled:!1};function Ps(e){return dV.get(e)||Object.assign({},CPe)}function y$t(e,t){return dV.set(e,t),dV.get(e)}function aF(){return g$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IPe="https://content-firebaseappcheck.googleapis.com/v1",v$t="exchangeRecaptchaV3Token",b$t="exchangeDebugToken",rhe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},_$t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w$t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new D2,this.pending.promise.catch(n=>{}),await E$t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new D2,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function E$t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Nu=new oS("appCheck","AppCheck",x$t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ihe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function OJ(e){if(!Ps(e).activated)throw Nu.create("use-before-activation",{appName:e.name})}function kPe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=jN(n)+"d:"),r&&(o+=jN(r)+"h:"),o+=jN(i)+"m:"+jN(s)+"s",o}function jN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $J({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Nu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Nu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Nu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Nu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function S$t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${IPe}/projects/${n}/apps/${r}:${v$t}?key=${i}`,body:{recaptcha_v3_token:t}}}function RPe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${IPe}/projects/${n}/apps/${r}:${b$t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$t="firebase-app-check-database",A$t=1,W2="firebase-app-check-store",NPe="debug-token";let BN=null;function PPe(){return BN||(BN=new Promise((e,t)=>{try{const n=indexedDB.open(T$t,A$t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Nu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(W2,{keyPath:"compositeKey"})}}}catch(n){t(Nu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),BN)}function C$t(e){return OPe($Pe(e))}function I$t(e,t){return DPe($Pe(e),t)}function k$t(e){return DPe(NPe,e)}function R$t(){return OPe(NPe)}async function DPe(e,t){const r=(await PPe()).transaction(W2,"readwrite"),s=r.objectStore(W2).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Nu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function OPe(e){const n=(await PPe()).transaction(W2,"readonly"),i=n.objectStore(W2).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Nu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function $Pe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new F6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N$t(e){if(LQ()){let t;try{t=await C$t(e)}catch(n){G2.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function tB(e,t){return LQ()?I$t(e,t).catch(n=>{G2.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function P$t(){let e;try{e=await R$t()}catch{}if(e)return e;{const t=NIt();return k$t(t).catch(n=>G2.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(){return aF().enabled}async function LJ(){const e=aF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function D$t(){const e=Jke(),t=aF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new D2;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(P$t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$t={error:"UNKNOWN_ERROR"};function $$t(e){return MQ.encodeString(JSON.stringify(e),!1)}async function hV(e,t=!1){const n=e.app;OJ(n);const r=Ps(n);let i=r.token,s;if(i&&!rw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(rw(u)?i=u:await tB(n,void 0))}if(!t&&i&&rw(i))return{token:i.token};let o=!1;if(MJ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$J(RPe(n,await LJ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await tB(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ps(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?G2.warn(u.message):G2.error(u),s=u}let a;return i?s?rw(i)?a={token:i.token,internalError:s}:a=ohe(s):(a={token:i.token},r.token=i,await tB(n,i)):a=ohe(s),o&&FPe(n,a),a}async function M$t(e){const t=e.app;OJ(t);const{provider:n}=Ps(t);if(MJ()){const r=await LJ(),{token:i}=await $J(RPe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function MPe(e,t,n,r){const{app:i}=e,s=Ps(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&rw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),she(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>she(e))}function LPe(e,t){const n=Ps(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function she(e){const{app:t}=e,n=Ps(t);let r=n.tokenRefresher;r||(r=L$t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function L$t(e){const{app:t}=e;return new w$t(async()=>{const n=Ps(t);let r;if(n.token?r=await hV(e,!0):r=await hV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ps(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rhe.RETRIAL_MIN_WAIT,rhe.RETRIAL_MAX_WAIT)}function FPe(e,t){const n=Ps(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function rw(e){return e.expireTimeMillis-Date.now()>0}function ohe(e){return{token:$$t(O$t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F$t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ps(this.app);for(const n of t)LPe(this.app,n.next);return Promise.resolve()}}function j$t(e,t){return new F$t(e,t)}function B$t(e){return{getToken:t=>hV(e,t),getLimitedUseToken:()=>M$t(e),addTokenListener:t=>MPe(e,"INTERNAL",t),removeTokenListener:t=>LPe(e.app,t)}}const U$t="@firebase/app-check",z$t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$t="https://www.google.com/recaptcha/api.js";function H$t(e,t){const n=new D2,r=Ps(e);r.reCAPTCHAState={initialized:n};const i=q$t(e),s=ihe(!1);return s?ahe(e,t,s,i,n):Y$t(()=>{const o=ihe(!1);if(!o)throw new Error("no recaptcha");ahe(e,t,o,i,n)}),n.promise}function ahe(e,t,n,r,i){n.ready(()=>{G$t(e,t,n,r),i.resolve(n)})}function q$t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function W$t(e){OJ(e);const n=await Ps(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ps(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function G$t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ps(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ps(e).reCAPTCHAState.succeeded=!1}}),s=Ps(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function Y$t(e){const t=document.createElement("script");t.src=V$t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;X$t(this._throttleData);const i=await W$t(this._app).catch(o=>{throw Nu.create("recaptcha-error")});if(!(!((t=Ps(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Nu.create("recaptcha-error");let s;try{s=await $J(S$t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=K$t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Nu.create("throttled",{time:kPe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=aS(t,"heartbeat"),H$t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof FJ?this._siteKey===t._siteKey:!1}}function K$t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+_$t,httpStatus:e};{const n=t?t.backoffCount:0,r=MIt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function X$t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Nu.create("throttled",{time:kPe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$t(e=jQ(),t){e=ri(e);const n=aS(e,"app-check");if(aF().initialized||D$t(),MJ()&&LJ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Nu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return J$t(e,t.provider,t.isTokenAutoRefreshEnabled),Ps(e).isTokenAutoRefreshEnabled&&MPe(r,"INTERNAL",()=>{}),r}function J$t(e,t,n){const r=y$t(e,Object.assign({},CPe));r.activated=!0,r.provider=t,r.cachedTokenPromise=N$t(e).then(i=>(i&&rw(i)&&(r.token=i,FPe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const Z$t="app-check",uhe="app-check-internal";function eMt(){Im(new Eh(Z$t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return j$t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(uhe).initialize()})),Im(new Eh(uhe,e=>{const t=e.getProvider("app-check").getImmediate();return B$t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Pf(U$t,z$t)}eMt();function UN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jPe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof UN=="function"&&UN;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof UN=="function"&&UN,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:S;h(T,A,this.outcome)}else this.queue.push(new d(T,E,S));return T};function d(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){s(function(){var A;try{A=S(T)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var A=T.value;if(A)m(E,A);else{E.state=l,E.outcome=S;for(var C=-1,I=E.queue.length;++C<I;)E.queue[C].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var T=-1,A=E.queue.length;++T<A;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function A(M){T||(T=!0,a.reject(E,M))}function C(M){T||(T=!0,a.resolve(E,M))}function I(){S(C,A)}var R=g(I);R.status==="error"&&A(R.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(A){T.status="error",T.value=A}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=new Array(T),I=0,R=-1,M=new this(o);++R<T;)P(E[R],R);return M;function P(O,F){S.resolve(O).then(L,function(B){A||(A=!0,a.reject(M,B))});function L(B){C[F]=B,++I===T&&!A&&(A=!0,a.resolve(M,C))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=-1,I=new this(o);++C<T;)R(E[C]);return I;function R(M){S.resolve(M).then(function(P){A||(A=!0,a.resolve(I,P))},function(P){A||(A=!0,a.reject(I,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ge=0;ge<Y.length;ge+=1)fe.append(Y[ge]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ge=0;ge<se;ge++)fe[ge]=Y.charCodeAt(ge);return Z}function T(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(se){return y=se,y})}function C(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ge){Z.resolve=fe,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function I(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function M(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)C(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var le=u.open.apply(u,ge);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),I(Y)}})}function P(Y){return M(Y,!1)}function O(Y){return M(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function L(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ge){var le=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function D(Y){C(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ge=Z[fe];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,P(Y).then(function(le){return Y.db=le,F(Y)?O(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw R(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),O(Y)}).then(function(){return D(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ge.forages.length;Ve++){var qe=ge.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ge.forages.slice(0);return f.all(le).then(function(){return Z.db=ge.db,P(Z)}).then(function(it){return Z.db=it,F(Z,se._defaultConfig.version)?O(Z):it}).then(function(it){Z.db=ge.db=it,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var dn=Ge[Et];dn!==se&&(dn._dbInfo.db=Z.db,dn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var it=Ge.result;it===void 0&&(it=null),U(it)&&(it=B(it)),ge(it)},Ge.onerror=function(){le(Ge.error)}}catch(it){le(it)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),it=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var dn=Et.value;U(dn)&&(dn=B(dn));var Nt=Y(dn,Et.key,it++);Nt!==void 0?ge(Nt):Et.continue()}else ge()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ge=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,b.call(se)==="[object Blob]"?A(Ve.db).then(function(qe){return qe?se:L(se)}):se}).then(function(qe){z(fe._dbInfo,E,function(Ge,it){if(Ge)return Oe(Ge);try{var Et=it.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var dn=Et.put(qe,Y);it.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},it.onabort=it.onerror=function(){var Nt=dn.error?dn.error:dn.transaction.error;Oe(Nt)}}catch(Nt){Oe(Nt)}})}).catch(Oe)});return d(ge,Z),ge}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ge()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var it=Ge.error?Ge.error:Ge.transaction.error;le(it)}}catch(it){le(it)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,E,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ge(Ge)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ge(qe.error)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,fe=new f(function(ge,le){if(Y<0){ge(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,it=qe.openKeyCursor();it.onsuccess=function(){var Et=it.result;if(!Et){ge(null);return}Y===0||Ge?ge(Et.key):(Ge=!0,Et.advance(Y))},it.onerror=function(){le(it.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var it=qe.result;if(!it){fe(Ge);return}Ge.push(it.key),it.continue()},qe.onerror=function(){ge(qe.error)}}catch(it){ge(it)}})}).catch(ge)});return d(Z,Y),Z}function ve(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):P(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var it=0;it<Ge.length;it++)Ge[it]._dbInfo.db=Ve;return Ve});Y.storeName?ge=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;C(Y);var Ge=v[Y.name],it=Ge.forages;Ve.close();for(var Et=0;Et<it.length;Et++){var dn=it[Et];dn._dbInfo.db=null,dn._dbInfo.version=qe}var Nt=new f(function(jn,Ir){var kr=u.open(Y.name,qe);kr.onerror=function(Bo){var ld=kr.result;ld.close(),Ir(Bo)},kr.onupgradeneeded=function(){var Bo=kr.result;Bo.deleteObjectStore(Y.storeName)},kr.onsuccess=function(){var Bo=kr.result;Bo.close(),jn(Bo)}});return Nt.then(function(jn){Ge.db=jn;for(var Ir=0;Ir<it.length;Ir++){var kr=it[Ir];kr._dbInfo.db=jn,I(kr._dbInfo)}}).catch(function(jn){throw(R(Y,jn)||f.resolve()).catch(function(){}),jn})}}):ge=Oe.then(function(Ve){C(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var it=0;it<Ge.length;it++){var Et=Ge[it];Et._dbInfo.db=null}var dn=new f(function(Nt,jn){var Ir=u.deleteDatabase(Y.name);Ir.onerror=function(){var kr=Ir.result;kr&&kr.close(),jn(Ir.error)},Ir.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Ir.onsuccess=function(){var kr=Ir.result;kr&&kr.close(),Nt(kr)}});return dn.then(function(Nt){qe.db=Nt;for(var jn=0;jn<Ge.length;jn++){var Ir=Ge[jn];I(Ir._dbInfo)}}).catch(function(Nt){throw(R(Y,Nt)||f.resolve()).catch(function(){}),Nt})})}return d(ge,se),ge}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ye,keys:Ie,dropInstance:ve};function Ue(){return typeof openDatabase=="function"}var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Dt="blob",We="si08",me="ui08",dt="uic8",yt="si16",pe="si32",Ce="ur16",He="ui32",ut="fl32",_t="fl64",Mn=ze+ct.length,Tr=Object.prototype.toString;function Ln(Y){var se=Y.length*.75,Z=Y.length,fe,ge=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),it=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=gt.indexOf(Y[fe]),Oe=gt.indexOf(Y[fe+1]),Ve=gt.indexOf(Y[fe+2]),qe=gt.indexOf(Y[fe+3]),it[ge++]=le<<2|Oe>>4,it[ge++]=(Oe&15)<<4|Ve>>2,it[ge++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=gt[se[fe]>>2],Z+=gt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=gt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=gt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function hn(Y,se){var Z="";if(Y&&(Z=Tr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Tr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ge=ke;Y instanceof ArrayBuffer?(fe=Y,ge+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ge+=We:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=dt:Z==="[object Int16Array]"?ge+=yt:Z==="[object Uint16Array]"?ge+=Ce:Z==="[object Int32Array]"?ge+=pe:Z==="[object Uint32Array]"?ge+=He:Z==="[object Float32Array]"?ge+=ut:Z==="[object Float64Array]"?ge+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ge+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=rt+Y.type+"~"+cr(this.result);se(ke+Dt+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Sn(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Mn),Z=Y.substring(ze,Mn),fe;if(Z===Dt&&be.test(se)){var ge=se.match(be);fe=ge[1],se=se.substring(ge[0].length)}var le=Ln(se);switch(Z){case ct:return le;case Dt:return c([le],{type:fe});case We:return new Int8Array(le);case me:return new Uint8Array(le);case dt:return new Uint8ClampedArray(le);case yt:return new Int16Array(le);case Ce:return new Uint16Array(le);case pe:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:hn,deserialize:Sn,stringToBuffer:Ln,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Fo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ge=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ge}function $i(Y,se,Z,fe,ge,le){Y.executeSql(Z,fe,ge,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ge,le)},le)},le):le(Oe,Ve)},le)}function Tn(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var it=Ge.rows.length?Ge.rows.item(0).value:null;it&&(it=Oe.serializer.deserialize(it)),ge(it)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Mi(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var it=Ge.rows,Et=it.length,dn=0;dn<Et;dn++){var Nt=it.item(dn),jn=Nt.value;if(jn&&(jn=Oe.serializer.deserialize(jn)),jn=Y(jn,Nt.key,dn+1),jn!==void 0){ge(jn);return}}ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ar(Y,se,Z,fe){var ge=this;Y=p(Y);var le=new f(function(Oe,Ve){ge.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ge._dbInfo;Ge.serializer.serialize(se,function(it,Et){Et?Ve(Et):Ge.db.transaction(function(dn){$i(dn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,it],function(){Oe(qe)},function(Nt,jn){Ve(jn)})},function(dn){if(dn.code===dn.QUOTA_ERR){if(fe>0){Oe(Ar.apply(ge,[Y,qe,Z,fe-1]));return}Ve(dn)}})})}).catch(Ve)});return d(le,Z),le}function fs(Y,se,Z){return Ar.apply(this,[Y,se,Z,1])}function np(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function rl(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function ad(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Er(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var it=Ge.rows.length?Ge.rows.item(0).key:null;ge(it)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ti(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],it=0;it<qe.rows.length;it++)Ge.push(qe.rows.item(it).key);fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Yr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ge,le){Z(le)})},function(fe){Z(fe)})})}function ou(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;return Y.name?ge=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Yr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Nt){return new f(function(jn,Ir){qe.executeSql("DROP TABLE IF EXISTS "+Nt,[],function(){jn()},function(kr,Bo){Ir(Bo)})})}for(var it=[],Et=0,dn=le.storeNames.length;Et<dn;Et++)it.push(Ge(le.storeNames[Et]));f.all(it).then(function(){Oe()}).catch(function(Nt){Ve(Nt)})},function(qe){Ve(qe)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Sa={_driver:"webSQLStorage",_initStorage:Fo,_support:Ue(),iterate:Mi,getItem:Tn,setItem:fs,removeItem:np,clear:rl,length:ad,key:Er,keys:Ti,dropInstance:ou};function Ta(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Se(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function xe(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var le=localStorage.key(ge);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo,le=localStorage.getItem(ge.keyPrefix+Y);return le&&(le=ge.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ge=Z._dbInfo,le=ge.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var it=localStorage.key(Ge);if(it.indexOf(le)===0){var Et=localStorage.getItem(it);if(Et&&(Et=ge.serializer.deserialize(Et)),Et=Y(Et,it.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Vt(Y,se){var Z=this,fe=Z.ready().then(function(){var ge=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ge.keyPrefix.length)),le});return d(fe,se),fe}function Dn(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ge=localStorage.length,le=[],Oe=0;Oe<ge;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function Fn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function fn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ge=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,it){if(it)Ve(it);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ge,Z),ge}function Cr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ge;return Y.name?ge=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var zt={_driver:"localStorageWrapper",_initStorage:Se,_support:Ta(),iterate:St,getItem:ot,setItem:ir,removeItem:fn,clear:xe,length:Fn,key:Vt,keys:Dn,dropInstance:Cr},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},zr=function(se,Z){for(var fe=se.length,ge=0;ge<fe;){if(sr(se[ge],Z))return!0;ge++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ai={},Bs={},Kr={INDEXEDDB:Ke,WEBSQL:Sa,LOCALSTORAGE:zt},fo=[Kr.INDEXEDDB._driver,Kr.WEBSQL._driver,Kr.LOCALSTORAGE._driver],Li=["dropInstance"],Fi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Li),jo={description:"",driver:fo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Aa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Us(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Wl=function(){function Y(se){o(this,Y);for(var Z in Kr)if(Kr.hasOwnProperty(Z)){var fe=Kr[Z],ge=fe._driver;this[Z]=ge,Ai[ge]||this.defineDriver(fe)}this._defaultConfig=Us({},jo),this._config=Us({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ge){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var it=Fi.concat("_initStorage"),Et=0,dn=it.length;Et<dn;Et++){var Nt=it[Et],jn=!zr(Li,Nt);if((jn||Z[Nt])&&typeof Z[Nt]!="function"){Ve(Ge);return}}var Ir=function(){for(var ld=function(Gl){return function(){var au=new Error("Method "+Gl+" is not implemented by the current driver"),ip=f.reject(au);return d(ip,arguments[arguments.length-1]),ip}},rp=0,$S=Li.length;rp<$S;rp++){var Yy=Li[rp];Z[Yy]||(Z[Yy]=ld(Yy))}};Ir();var kr=function(ld){Ai[qe]&&console.info("Redefining LocalForage driver: "+qe),Ai[qe]=Z,Bs[qe]=ld,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(kr,Ve):kr(!!Z._support):kr(!0)}catch(Bo){Ve(Bo)}});return h(le,fe,ge),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ge){var le=Ai[Z]?f.resolve(Ai[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ge),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ge=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,fe,ge){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var dn=0;function Nt(){for(;dn<Et.length;){var jn=Et[dn];return dn++,le._dbInfo=null,le._ready=null,le.getDriver(jn).then(qe).catch(Nt)}Ve();var Ir=new Error("No available storage method found.");return le._driverSet=f.reject(Ir),le._driverSet}return Nt()}}var it=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=it.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(dn){le._driver=dn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ge),this._driverSet},Y.prototype.supports=function(Z){return!!Bs[Z]},Y.prototype._extend=function(Z){Us(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ge=0,le=Z.length;ge<le;ge++){var Oe=Z[ge];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Fi.length;Z<fe;Z++)Aa(this,Fi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),ud=new Wl;r.exports=ud},{3:3}]},{},[4])(4)})})(jPe);var tMt=jPe.exports;const pV=Ul(tMt);var go=[];for(var nB=0;nB<256;++nB)go.push((nB+256).toString(16).slice(1));function nMt(e,t=0){return(go[e[t+0]]+go[e[t+1]]+go[e[t+2]]+go[e[t+3]]+"-"+go[e[t+4]]+go[e[t+5]]+"-"+go[e[t+6]]+go[e[t+7]]+"-"+go[e[t+8]]+go[e[t+9]]+"-"+go[e[t+10]]+go[e[t+11]]+go[e[t+12]]+go[e[t+13]]+go[e[t+14]]+go[e[t+15]]).toLowerCase()}var zN,rMt=new Uint8Array(16);function iMt(){if(!zN&&(zN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zN(rMt)}var sMt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const lhe={randomUUID:sMt};function E$(e,t,n){if(lhe.randomUUID&&!t&&!e)return lhe.randomUUID();e=e||{};var r=e.random||(e.rng||iMt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,nMt(r)}class BPe{constructor(t){sl(this,"engine");sl(this,"connected",!1);sl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Uw(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function vT(e){return e.participantId!==void 0}class ff extends BPe{constructor(){super("firebase");sl(this,"RECAPTCHAV3TOKEN","6LfZFvgpAAAAAASYVKyTVe7V0at6zdqBt8L1kI3I");sl(this,"firestore");sl(this,"collectionPrefix","prod-");sl(this,"studyCollection");sl(this,"storage");sl(this,"studyId","");sl(this,"localForage",pV.createInstance({name:"currentParticipantId"}));sl(this,"participantData",null);const n=WX.parse(`
{
  apiKey: "AIzaSyAt0JPT7QXK5N4Oc-n6gnEJEDtfUYQqpeU",
  authDomain: "sumsifterdemo.firebaseapp.com",
  projectId: "sumsifterdemo",
  storageBucket: "sumsifterdemo.appspot.com",
  messagingSenderId: "529083000336",
  appId: "1:529083000336:web:3af6cc2f15933822af0c95"
}
`),r=iRe(n);this.firestore=Q3t(r,{}),this.storage=oDt();try{Q$t(r,{provider:new FJ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await J3t(this.firestore);const n=await zs(this.firestore,".info/connected");await Zj(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=m$();if(!i.currentUser&&(await TRt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Uw(JSON.stringify(r));if(this.studyCollection=Gc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");if(vT(o))return this.participantData=o,o;const a=await Uw(JSON.stringify(r));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=E$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=zs(this.studyCollection,"sequenceAssignment");await Yc(r,{});const i=Gc(r,"sequenceAssignment"),s=zs(i,this.currentParticipantId),o=Zde(i,o$t("participantId","==","")),a=await yT(o);if(a.docs.length>0){const h=a.docs[0],p=h.data().timestamp;await d$t(h.ref),await Yc(s,{participantId:this.currentParticipantId,timestamp:p})}else await Yc(s,{participantId:this.currentParticipantId,timestamp:m$t()});const u=Zde(i,a$t("timestamp","asc")),f=(await yT(u)).docs.map(h=>h.data()).findIndex(h=>h.participantId===this.currentParticipantId),d=n[f%n.length];if(!d)throw new Error("Latin square is empty");return d}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await mT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");vT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return vT(n)?n:null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=E$();await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;const s=await Uw(JSON.stringify(n)),o={participantId:i,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};return await this._pushToFirebaseStorage(`participants/${i}`,"participantData",o),o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");return this.participantData.completed=!0,await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Gc(this.firestore,"user-management"),i=await yT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Yc(zs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Yc(zs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Wc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await mT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");vT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Gc(this.firestore,`${this.collectionPrefix}${n}`),s=Wc(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!vT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=zs(i,"sequenceAssignment"),u=Gc(a,"sequenceAssignment"),l=zs(u,r);await f$t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=zs(this.firestore,"metadata","collections"),i=await Zj(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=zs(this.firestore,"metadata","collections");await Yc(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=zs(this.firestore,"metadata","collections"),i=await Zj(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Yc(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Wc(this.storage,n),s=(await mT(r)).items.map(o=>gde(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Wc(this.storage,n),o=(await mT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Wc(this.storage,n),s=Wc(this.storage,r),o=await Yj(i),u=await(await fetch(o)).blob();await Gj(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Gc(this.firestore,n),s=zs(i,"sequenceAssignment"),o=Gc(s,"sequenceAssignment"),a=Gc(this.firestore,r),u=zs(a,"sequenceAssignment");await Yc(u,{});const l=Gc(u,"sequenceAssignment"),c=await yT(o),f=nhe(this.firestore);c.docs.forEach(d=>{const h=zs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Gc(this.firestore,n),i=zs(r,"sequenceAssignment"),s=Gc(i,"sequenceAssignment"),o=await yT(s),a=nhe(this.firestore);o.forEach(u=>{const l=zs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Wc(this.storage,n);return(await mT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Yj(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Yj(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await Gj(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Gj(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Wc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await gde(i)}}const UPe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),hS=()=>N.useContext(UPe);function oMt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=wa(),l=async()=>{const h=m$();try{await PRt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;N.useEffect(()=>{s(t);let h;if(u instanceof ff)try{h=m$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof ff){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=NRt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(UPe.Provider,{value:d,children:i.determiningStatus?_.jsx(Ec,{visible:!0}):e})}function aMt(){const{config:e,metadata:t}=Lc(w=>w),n=uY(),r=jh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=Fh(),{storageEngine:o}=wa(),a=qm(),u=hS(),l=n.length-1,c=typeof a=="number"?a/l*100:0,[f,d]=N.useState(!1),h=e==null?void 0:e.uiConfig.logoPath,p=e==null?void 0:e.uiConfig.withProgressBar,m=UI(),g=c_e(`/${m}`),y=N.useRef(null),[v,b]=N.useState(!1);return N.useEffect(()=>{const w=y.current;w&&b(w.scrollWidth>w.offsetWidth)},[e]),_.jsx(fi.Header,{p:"md",children:_.jsxs(Zs,{mt:-7,align:"center",children:[_.jsx(Zs.Col,{span:4,children:_.jsxs(Jt,{align:"center",children:[_.jsx(Sy,{w:40,src:`${Mh}${h}`,alt:"Study Logo"}),_.jsx(kf,{w:"md"}),_.jsx(ki,{ref:y,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:v?e==null?void 0:e.studyMetadata.title:void 0,children:e==null?void 0:e.studyMetadata.title})]})}),_.jsx(Zs.Col,{span:4,children:p&&_.jsx(kx,{radius:"md",size:"lg",value:c})}),_.jsx(Zs.Col,{span:4,children:_.jsxs(Os,{wrap:"nowrap",justify:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&_.jsx(Rn,{variant:"outline",onClick:()=>r(i()),children:"Help"}),u.user.isAdmin&&_.jsxs(bu,{shadow:"md",width:200,withinPortal:!0,opened:f,onChange:d,children:[_.jsx(bu.Target,{children:_.jsx(P0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(ZYe,{})})}),_.jsxs(bu.Dropdown,{children:[_.jsx(bu.Item,{leftSection:_.jsx(aKe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),_.jsx(bu.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(rKe,{size:14}),children:"Contact"}),_.jsx(bu.Item,{leftSection:_.jsx(MG,{size:14}),onClick:()=>Yke(o,e,t,g),children:"Next Participant"})]})]})]})})]})})}function uMt(){var u;const e=(u=gm())==null?void 0:u.uiConfig.sidebar,t=gm(),n=Wm(),r=t.components[n],i=N.useMemo(()=>{var l;return r?M6(r)&&t.baseComponents?lY({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=cY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(fi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(fi.Section,{bg:"gray.3",p:"md",children:_.jsxs(st,{c:"gray.9",children:[_.jsx(st,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ga,{text:o})]})}),_.jsx(fi.Section,{p:"md",children:_.jsx(kO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(fi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(kO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function lMt(){const{showHelpText:e,config:t}=Lc(u=>u),n=jh(),{toggleShowHelpText:r}=Fh(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){const l=await dY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(vs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ga,{text:i}):_.jsx(Nv,{path:t.uiConfig.helpTextPath})})}function cMt(){const{alertModal:e}=Lc(o=>o),{setAlertModal:t}=Fh(),n=jh(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),_.jsx(vs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(CW,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(HYe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(st,{my:"md",children:e.message}),_.jsx(Os,{w:"100%",justify:"end",children:_.jsx(Rn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function fMt(){const e=N.useRef([]),t=gm(),n=t.uiConfig.windowEventDebounceTime??100,r=Lc(s=>s.showStudyBrowser);N.useEffect(()=>{const s=md(p=>{e.current.push([Date.now(),"focus",p.target instanceof HTMLElement?p.target.tagName:""])},n,{maxWait:n}),o=md(p=>{e.current.push([Date.now(),"input",p.data??""])},n,{maxWait:n}),a=md(p=>{e.current.push([Date.now(),"keypress",p.key])},n,{maxWait:n}),u=md(p=>{e.current.push([Date.now(),"mousedown",[p.clientX,p.clientY]])},n,{maxWait:n}),l=md(p=>{e.current.push([Date.now(),"mouseup",[p.clientX,p.clientY]])},n,{maxWait:n}),c=md(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),f=md(p=>{e.current.push([Date.now(),"mousemove",[p.clientX,p.clientY]])},n,{maxWait:n}),d=md(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),h=md(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",s,!0),window.addEventListener("input",o),window.addEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.addEventListener("resize",c),window.addEventListener("mousemove",f),window.addEventListener("scroll",d),document.addEventListener("visibilitychange",h),()=>{window.removeEventListener("focus",s,!0),window.removeEventListener("input",o),window.removeEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.removeEventListener("resize",c),window.removeEventListener("mousemove",f),window.removeEventListener("scroll",d),document.removeEventListener("visibilitychange",h)}},[]);const i=t.uiConfig.sidebarWidth??300;return _.jsx(yEe.Provider,{value:e,children:_.jsxs(fi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!r,mobile:!r}},children:[_.jsx(uMt,{}),_.jsx(uIt,{}),_.jsx(aMt,{}),_.jsx(lMt,{}),_.jsx(cMt,{}),_.jsx(fi.Main,{children:_.jsx(RYe,{})})]})})}function dMt(e,t=!1){return typeof e=="number"?che(e,t):che(e.length,t).map(r=>r.map(i=>e[i]))}function che(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function zPe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=zPe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function hMt(e,t){const n=cv(e);return zPe(n,t,"root")}function VPe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&VPe(s,t,i,o)})}function pMt(e){const t=[];return VPe(e,t,"",0),t}function fhe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return dMt(i.sort(()=>.5-Math.random()),!0)}function mMt(e){const n=pMt(e.sequence).map(s=>({[s]:fhe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=hMt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=fhe(e,o))})}),i}var gMt={VITE_BASE_PATH:"/SumSifter/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAt0JPT7QXK5N4Oc-n6gnEJEDtfUYQqpeU",
  authDomain: "sumsifterdemo.firebaseapp.com",
  projectId: "sumsifterdemo",
  storageBucket: "sumsifterdemo.appspot.com",
  messagingSenderId: "529083000336",
  appId: "1:529083000336:web:3af6cc2f15933822af0c95"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZFvgpAAAAAASYVKyTVe7V0at6zdqBt8L1kI3I",VITE_REVISIT_MODE:"private",BASE_URL:"/SumSifter/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function yMt(e){const t=await(await fetch(`${Mh}${e}`)).text();return tIt(t)}async function uF(e,t){const n=t.configsList.find(r=>b_e(r)===e);if(n){const r=t.configs[n];return await yMt(`${r.path}`)}return null}async function vMt(e){const t={},n=e.configsList.filter(i=>gMt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>uF(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function bMt({globalConfig:e}){const t=UI(),[n,r]=N.useState(null),i=e.configsList.includes(t),s=hS();N.useEffect(()=>{uF(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=N.useState([]),[u,l]=N.useState(null),{storageEngine:c}=wa(),[f]=OG();N.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await mMt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(T=>""),b=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},E=await c.initializeParticipantSession(y,n,w,g),S=await Sit(t,n,E.sequence,w,E.answers,s.user.isAdmin);l(S),a([{element:_.jsx(fMt,{}),children:[{path:"/",element:_.jsx(jz,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ki,{order:2,mb:8,children:"Error loading config"}),_.jsx(MU,{issues:n.errors,type:"error"})]}):_.jsx(sIt,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=d_e(o);let h=null;return i?o.length===0?h=_.jsx(Ec,{visible:!0}):h=d&&u?_.jsx(gEe.Provider,{value:u,children:_.jsx(vrt,{store:u.store,children:d})}):_.jsx(Nv,{}):h=_.jsx(Nv,{}),h}function vC({studyIds:e}){const t=Hm(),{studyId:n}=aE(),r=wb(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=wa(),{user:o,logout:a}=hS(),[u,l]=N.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(eKe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(YYe,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:_.jsx(m_e,{}),href:"/settings",needAdmin:!0}];return _.jsx(fi.Header,{p:"md",children:_.jsxs(Zs,{mt:-7,align:"center",children:[_.jsx(Zs.Col,{span:6,children:_.jsxs(Jt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Sy,{w:40,src:`${Mh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(kf,{w:"md"}),_.jsx(ki,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Zs.Col,{span:6,children:_.jsxs(Jt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(PI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(XW,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Oh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Jt,{direction:"column",mt:20,children:[_.jsx(st,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(Ee,{ml:10,children:[_.jsx(ZW,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(st,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):_.jsx(st,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function HPe({allParticipants:e,studyId:t,config:n}){const[r,{close:i,open:s}]=yw(!1),[o,{close:a,open:u}]=yw(!1),[l,{open:c,close:f}]=yw(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(Os,{children:[_.jsxs(Jr,{opened:r,children:[_.jsx(Jr.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:()=>{$Q(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:s,onMouseLeave:i,px:4,children:_.jsx(JYe,{})})}),_.jsx(Jr.Dropdown,{children:_.jsx(st,{children:"Download all participants data as JSON"})})]}),_.jsxs(Jr,{opened:o,children:[_.jsx(Jr.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:c,onMouseEnter:u,onMouseLeave:a,px:4,children:_.jsx(g_e,{})})}),_.jsx(Jr.Dropdown,{children:_.jsx(st,{children:"Download all participants data as a tidy CSV"})})]})]}),l&&_.jsx(rIt,{opened:l,close:f,filename:`${t}_all_tidy.csv`,studyConfig:n,data:e})]})}function _Mt({cellData:e}){return _.jsx(An.Td,{children:_.jsx(Mp,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(Ee,{children:[_.jsxs(st,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(st,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function dhe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(An.Td,{children:[t.toFixed(1)," ","s"]})}function wMt(e){const{metaData:t}=e;return _.jsx(An.Td,{children:_.jsx(xG,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Mp,{gap:"xs",children:[_.jsxs(Ee,{children:["IP:"," ",t.ip]}),_.jsxs(Ee,{children:["Language:"," ",t.language]}),_.jsxs(Ee,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(Ee,{children:["User Agent:"," ",t.userAgent]})]})})})}function EMt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=wa(),{studyId:s}=aE(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),await r())},[a,u]=N.useState([]),[l,c]=N.useState(!1),f=()=>wU({title:"Confirm rejecting participants",children:_.jsxs(st,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(st,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),await r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=mEe(n.sequence),p=[_.jsx(An.Th,{children:_.jsx(Jt,{justify:"center",children:_.jsx(fm,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),_.jsx(An.Th,{children:"ID"},"ID"),_.jsx(An.Th,{children:"Status"},"status"),_.jsx(An.Th,{children:"Meta"},"meta"),...h.flatMap(g=>[_.jsx(An.Th,{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),_.jsxs(An.Th,{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),_.jsx(An.Th,{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>_.jsxs(An.Tr,{children:[_.jsx(An.Td,{children:_.jsx(Jt,{justify:"center",children:_.jsx(fm,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),_.jsx(An.Td,{style:{whiteSpace:"nowrap"},children:g.participantId}),_.jsx(An.Td,{children:_.jsxs(Jt,{direction:"row",align:"center",children:[g.rejected?_.jsx(Fa,{label:"Rejected",children:_.jsx(v_e,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?_.jsx(Fa,{label:"Completed",children:_.jsx(QYe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(Fa,{label:"In Progress",children:_.jsx(sKe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&_.jsxs(st,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(mm(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?_.jsx(wMt,{metaData:g.metadata}):_.jsx(An.Td,{children:"N/A"}),h.map(y=>{const v=hEe(g.sequence,y.orderPath),b=v&&Object.entries(g.answers).sort((w,E)=>{const S=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),T=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10);return S-T}).filter(([w])=>{const E=w.slice(0,w.lastIndexOf("_")),S=parseInt(w.slice(w.lastIndexOf("_")+1),10);return E===y.componentName&&S<=v[0].lastIndex&&S>=v[0].firstIndex});return b!==null&&b.length>=y.timesSeenInBlock+1?_.jsxs(Un.Fragment,{children:[_.jsx(_Mt,{cellData:b[y.timesSeenInBlock][1]}),_.jsx(dhe,{cellData:b[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):_.jsxs(Un.Fragment,{children:[_.jsx(An.Td,{children:"N/A"}),_.jsx(An.Td,{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),_.jsx(dhe,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx(Ec,{visible:l,overlayProps:{blur:2}}),_.jsxs(Jt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Os,{children:_.jsx(PI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,value:null,leftSection:_.jsx(uKe,{size:14}),onChange:g=>g&&d(g)})}),_.jsxs(Os,{children:[_.jsx(HPe,{allParticipants:[...e,...t],studyId:s||"",config:n}),_.jsx(Rn,{disabled:a.length===0,onClick:f,color:"red",children:"Reject Participants"})]})]}),_.jsxs(An,{striped:!0,withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:p})}),_.jsx(An.Tbody,{children:m})]})]}):_.jsx(Jt,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(st,{children:"No data available"})})}function xMt({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(""),[c,f]=N.useState([]),[d,h]=N.useState(""),[p,m]=N.useState(!1),[g,y]=N.useState(!1),{storageEngine:v}=wa(),b=v,w=N.useCallback(async()=>{y(!0);const M=await b.getSnapshots(e);f(M),y(!1)},[b,e]);N.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},T=async M=>{m(!0),await b.restoreSnapshot(e,M),w(),m(!1),await t()},A=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},C=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},I=()=>wU({title:"Create a Snapshot",children:_.jsx(st,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),R=M=>wU({title:"Restore Snapshot",children:_.jsx(st,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>T(M)});return _.jsxs(_.Fragment,{children:[_.jsx(Ec,{visible:p}),_.jsx(Dh,{children:_.jsxs(xy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ki,{mb:"lg",order:4,children:"Data Management"}),_.jsxs(Jt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Create a Snapshot"}),_.jsxs(st,{children:["This will create a snapshot of the live"," ",_.jsx(st,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(st,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Fa,{label:"Create a snapshot",children:_.jsx(Rn,{onClick:I,children:"Snapshot"})})]}),_.jsx(kf,{h:"lg"}),_.jsxs(Jt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Archive Data"}),_.jsxs(st,{children:["This will create a snapshot of the live"," ",_.jsx(st,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Fa,{label:"Snapshot and Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(kf,{h:"lg"}),_.jsxs(Jt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Delete Data"}),_.jsxs(st,{children:["This will delete the live"," ",_.jsx(st,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(Fa,{label:"Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(kf,{h:"xl"}),_.jsxs(Jt,{direction:"column",children:[_.jsx(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(ki,{order:5,children:"Snapshots"})}),_.jsxs(Ee,{style:{position:"relative"},children:[_.jsx(Ec,{visible:g}),c.length>0?c.map(M=>_.jsxs(Jt,{justify:"space-between",mb:"xs",children:[_.jsx(st,{children:M}),_.jsxs(Jt,{direction:"row",gap:"xs",children:[_.jsx(Fa,{label:"Restore Snapshot",children:_.jsx(P0,{color:"blue",variant:"subtle",onClick:()=>{R(M)},children:_.jsx(oKe,{})})}),_.jsx(Fa,{label:"Delete Snapshot",children:_.jsx(P0,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(M)},children:_.jsx(y_e,{})})})]})]},M)):_.jsx(st,{children:"No snapshots."})]})]})]})}),_.jsxs(vs,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(st,{children:"Archive Data"}),children:[_.jsx(st,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(lv,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Jt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:S,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(vs,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(st,{children:"Delete Snapshot"}),children:[_.jsxs(st,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(st,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(lv,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Jt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(vs,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(st,{children:"Delete Live Data"}),children:[_.jsxs(st,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(st,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(st,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(lv,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Jt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]})]})}function SMt(e){const{globalConfig:t}=e,{studyId:n}=aE(),[r,i]=N.useState([]),[s,o]=N.useState(void 0),[a,u]=N.useState(!1),{storageEngine:l}=wa(),c=Hm(),{tab:f}=aE(),d=N.useCallback(async()=>{if(u(!0),n){const g=await uF(n,t);if(!g||!l)return;await l.initializeStudyDb(n,g);const y=await l.getAllParticipantsData();i(y),o(g),u(!1)}},[t,l,n]);N.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=N.useMemo(()=>{const g=r.filter(v=>v.completed),y=r.filter(v=>!v.completed);return[g,y]},[r]),m=l instanceof ff;return _.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.globalConfig.configsList}),_.jsx(fi.Main,{children:_.jsxs(Dh,{fluid:!0,style:{height:"100%"},children:[_.jsx(Ec,{visible:a}),_.jsxs(ts,{variant:"outline",value:f,onChange:g=>c(`./../${g}`),style:{height:"100%"},children:[_.jsxs(ts.List,{children:[_.jsx(ts.Tab,{value:"table",leftSection:_.jsx(lKe,{size:16}),children:"Table View"}),_.jsx(ts.Tab,{value:"stats",leftSection:_.jsx(KYe,{size:16}),children:"Trial Stats"}),_.jsx(ts.Tab,{value:"replay",leftSection:_.jsx(iKe,{size:16}),children:"Individual Replay"}),_.jsx(ts.Tab,{value:"manage",leftSection:_.jsx(m_e,{size:16}),disabled:!m,children:"Manage"})]}),_.jsx(ts.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&_.jsx(EMt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),_.jsx(ts.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(ts.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(ts.Panel,{value:"manage",pt:"xs",children:n&&m&&_.jsx(xMt,{studyId:n,refresh:d})})]})]})})]})}function rB({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=hS(),{storageEngine:i}=wa();return N.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?_.jsx(Ec,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?_.jsx(DG,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function qPe(e,t,n){if(e instanceof ff){t(!0);const r=new Pp,i=m$();try{await ZRt(i,r,FRe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function TMt(){const{user:e}=hS(),[t,n]=N.useState(null),[r,i]=N.useState(!1),{storageEngine:s}=wa();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(DG,{to:"/"}):_.jsx(Dh,{children:_.jsx(xy,{padding:"lg",children:_.jsxs(Jt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Sy,{maw:200,mt:50,mb:100,src:`${Mh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(st,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Rn,{onClick:()=>qPe(s,i,n),leftSection:_.jsx(cKe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(Jd,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(Ec,{visible:r})]})})})}var WPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Js,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var F=["th","st","nd","rd"],L=O%100;return"["+O+(F[(L-20)%10]||F[L]||F[0])+"]"}},b=function(O,F,L){var B=String(O);return!B||B.length>=F?O:""+Array(F+1-B.length).join(L)+O},w={s:b,z:function(O){var F=-O.utcOffset(),L=Math.abs(F),B=Math.floor(L/60),U=L%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function O(F,L){if(F.date()<L.date())return-O(L,F);var B=12*(L.year()-F.year())+(L.month()-F.month()),U=F.clone().add(B,f),H=L-U<0,D=F.clone().add(B+(H?-1:1),f);return+(-(B+(L-U)/(H?U-D:D-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",A=function(O){return O instanceof M||!(!O||!O[T])},C=function O(F,L,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();S[H]&&(U=H),L&&(S[H]=L,U=H);var D=F.split("-");if(!U&&D.length>1)return O(D[0])}else{var z=F.name;S[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},I=function(O,F){if(A(O))return O.clone();var L=typeof F=="object"?F:{};return L.date=O,L.args=arguments,new M(L)},R=w;R.l=C,R.i=A,R.w=function(O,F){return I(O,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var M=function(){function O(L){this.$L=C(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[T]=!0}var F=O.prototype;return F.parse=function(L){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(R.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var D=U.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return H?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(U)}(L),this.init()},F.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},F.$utils=function(){return R},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(L,B){var U=I(L);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(L,B){return I(L)<this.startOf(B)},F.isBefore=function(L,B){return this.endOf(B)<I(L)},F.$g=function(L,B,U){return R.u(L)?this[B]:this.set(U,L)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(L,B){var U=this,H=!!R.u(B)||B,D=R.p(L),z=function(he,ye){var Ie=R.w(U.$u?Date.UTC(U.$y,ye,he):new Date(U.$y,ye,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ye){return R.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(L){return this.startOf(L,!1)},F.$set=function(L,B){var U,H=R.p(L),D="set"+(this.$u?"UTC":""),z=(U={},U[l]=D+"Date",U[p]=D+"Date",U[f]=D+"Month",U[h]=D+"FullYear",U[u]=D+"Hours",U[a]=D+"Minutes",U[o]=D+"Seconds",U[s]=D+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(L,B){return this.clone().$set(L,B)},F.get=function(L){return this[R.p(L)]()},F.add=function(L,B){var U,H=this;L=Number(L);var D=R.p(B),z=function(q){var G=I(H);return R.w(G.date(G.date()+Math.round(q*L)),H)};if(D===f)return this.set(f,this.$M+L);if(D===h)return this.set(h,this.$y+L);if(D===l)return z(1);if(D===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[D]||1,j=this.$d.getTime()+L*W;return R.w(j,this)},F.subtract=function(L,B){return this.add(-1*L,B)},F.format=function(L){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=L||"YYYY-MM-DDTHH:mm:ssZ",D=R.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ye,Ie,ve,Ke){return ye&&(ye[Ie]||ye(B,H))||ve[Ie].slice(0,Ke)},de=function(ye){return R.s(z%12||12,ye,"0")},he=ne||function(ye,Ie,ve){var Ke=ye<12?"AM":"PM";return ve?Ke.toLowerCase():Ke};return H.replace(y,function(ye,Ie){return Ie||function(ve){switch(ve){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return j+1;case"MM":return R.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return R.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return D}return null}(ye)||D.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(L,B,U){var H,D=this,z=R.p(B),W=I(L),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return R.m(D,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:R.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(L,B){if(!L)return this.$L;var U=this.clone(),H=C(L,B,!0);return H&&(U.$L=H),U},F.clone=function(){return R.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},O}(),P=M.prototype;return I.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(O){P[O[1]]=function(F){return this.$g(F,O[0],O[1])}}),I.extend=function(O,F){return O.$i||(O(F,M,I),O.$i=!0),I},I.locale=C,I.isDayjs=A,I.unix=function(O){return I(1e3*O)},I.en=S[E],I.Ls=S,I.p={},I})})(WPe);var AMt=WPe.exports;const Tt=Ul(AMt);function CMt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function IMt({formatter:e,...t}){return(e||CMt)(t)}function kMt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function GPe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=kMt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?GPe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function RMt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function NMt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function jJ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=RMt(i.key);if(s){i.preventDefault();const o=NMt(e);GPe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var YPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Js,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(T).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,T,A){var C=S-60*T*1e3,I=l(C,A);if(T===I)return[C,T];var R=l(C-=60*(I-T)*1e3,A);return I===R?[C,I]:[S-60*Math.min(I,R)*1e3,Math.max(I,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(YPe);var PMt=YPe.exports;const DMt=Ul(PMt);var KPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Js,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],A=T[0],C=60*+T[1]+ +T[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(KPe);var OMt=KPe.exports;const $Mt=Ul(OMt);Tt.extend($Mt);Tt.extend(DMt);function MMt(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const hhe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=MMt(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function E0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>hhe(i,n,e)):hhe(t,n,e)}function LMt({minDate:e,maxDate:t,timezone:n}){const r=E0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const FMt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},jMt=N.createContext(FMt);function ql(){const e=N.useContext(jMt),t=N.useCallback(o=>o||e.locale,[e.locale]),n=N.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=N.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=N.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=N.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function BMt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function XPe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:BMt(e,t),name:n,form:r})}XPe.displayName="@mantine/dates/HiddenDatesInput";var QPe={day:"m_396ce5cb"};const UMt={},zMt=(e,{size:t})=>({day:{"--day-size":yn(t,"day-size")}}),BJ=je((e,t)=>{const n=Ae("Day",UMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,S=vt({name:f||"Day",classes:QPe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zMt,rootSelector:"day"}),T=ql();return _.jsx(Rs,{...S("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(E0("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});BJ.classes=QPe;BJ.displayName="@mantine/dates/Day";function VMt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var JPe={weekday:"m_18a3eca"};const HMt={},qMt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":oo(t),"--wr-spacing":Il(t)}}),UJ=je((e,t)=>{const n=Ae("WeekdaysRow",HMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=vt({name:h||"WeekdaysRow",classes:JPe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qMt,rootSelector:"weekdaysRow"}),g=ql(),y=VMt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(Ee,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});UJ.classes=JPe;UJ.displayName="@mantine/dates/WeekdaysRow";function WMt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function GMt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function YMt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=WMt(s,t),a=GMt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function ZPe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function eDe(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function tDe(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function KMt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return tDe(c,n)&&eDe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||ZPe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var nDe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const XMt={withCellSpacing:!0},lF=je((e,t)=>{const n=Ae("Month",XMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:A,__onDayKeyDown:C,__onDayClick:I,__onDayMouseEnter:R,__preventFocus:M,__stopPropagation:P,withCellSpacing:O,size:F,...L}=n,B=vt({name:l||"Month",classes:nDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=ql(),H=YMt({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),D=KMt(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Mm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!ZPe(ce,h),ye=(S==null?void 0:S(ce))||Tt(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),ve=Tt(ce).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":O||void 0,children:_.jsx(BJ,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ye,static:T,disabled:(g==null?void 0:g(ce))||!tDe(ce,v)||!eDe(ce,y),ref:Ke=>A==null?void 0:A(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),C==null||C(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),R==null||R(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),I==null||I(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),M&&Ke.preventDefault()},tabIndex:M||!ve?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(Ee,{component:"table",...B("month"),size:F,ref:t,...L,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(UJ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});lF.classes=nDe;lF.displayName="@mantine/dates/Month";var rDe={pickerControl:"m_dc6a3c71"};const QMt={},JMt=(e,{size:t})=>({pickerControl:{"--dpc-fz":oo(t),"--dpc-size":yn(t,"dpc-size")}}),cF=je((e,t)=>{const n=Ae("PickerControl",QMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=vt({name:d||"PickerControl",classes:rDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JMt,rootSelector:"pickerControl"});return _.jsx(Rs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});cF.classes=rDe;cF.displayName="@mantine/dates/PickerControl";function iDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function ZMt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!iDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function sDe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var oDe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const eLt={yearsListFormat:"YYYY",withCellSpacing:!0},fF=je((e,t)=>{const n=Ae("YearsList",eLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=vt({name:m||"YearsList",classes:oDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),I=ql(),R=sDe(l),M=ZMt(R,d,h,p),P=R.map((O,F)=>{const L=O.map((B,U)=>{const H=p==null?void 0:p(B),D=Tt(B).isSame(M,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":S||void 0,children:_.jsx(cF,{...C("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:iDe(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...C("yearsListRow"),children:L},F)});return _.jsx(Ee,{component:"table",ref:t,size:T,...C("yearsList"),...A,children:_.jsx("tbody",{children:P})})});fF.classes=oDe;fF.displayName="@mantine/dates/YearsList";function aDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function tLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!aDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function nLt(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var uDe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const rLt={monthsListFormat:"MMM",withCellSpacing:!0},dF=je((e,t)=>{const n=Ae("MonthsList",rLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=vt({name:l||"MonthsList",classes:uDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),I=ql(),R=nLt(c),M=tLt(R,h,p,m),P=R.map((O,F)=>{const L=O.map((B,U)=>{const H=m==null?void 0:m(B),D=Tt(B).isSame(M,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":S||void 0,children:_.jsx(cF,{...C("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:aDe(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...C("monthsListRow"),children:L},F)});return _.jsx(Ee,{component:"table",ref:t,size:T,...C("monthsList"),...A,children:_.jsx("tbody",{children:P})})});dF.classes=uDe;dF.displayName="@mantine/dates/MonthsList";var lDe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const iLt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},sLt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":yn(t,"dch-control-size"),"--dch-fz":oo(t)}}),My=je((e,t)=>{const n=Ae("CalendarHeader",iLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:A,__stopPropagation:C,...I}=n,R=vt({name:T||"CalendarHeader",classes:lDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sLt,rootSelector:"calendarHeader"}),M=A?P=>P.preventDefault():void 0;return _.jsxs(Ee,{...R("calendarHeader"),ref:t,...I,children:[S&&_.jsx(Rs,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:M,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(hO,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Rs,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?M:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(Rs,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:M,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(hO,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});My.classes=lDe;My.displayName="@mantine/dates/CalendarHeader";function oLt(e){const t=sDe(e);return[t[0][0],t[3][0]]}const aLt={decadeLabelFormat:"YYYY"},hF=je((e,t)=>{const n=Ae("DecadeLevel",aLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:A,withPrevious:C,decadeLabelFormat:I,classNames:R,styles:M,unstyled:P,__staticSelector:O,__stopPropagation:F,size:L,...B}=n,U=ql(),[H,D]=oLt(r),z={__staticSelector:O||"DecadeLevel",classNames:R,styles:M,unstyled:P,size:L},W=typeof E=="boolean"?E:o?!Tt(D).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return _.jsxs(Ee,{"data-decade-level":!0,size:L,ref:t,...B,children:[_.jsx(My,{label:typeof I=="function"?I(H,D):`${q(H,I)}  ${q(D,I)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:T,withNext:A,withPrevious:C,...z}),_.jsx(fF,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});hF.classes={...fF.classes,...My.classes};hF.displayName="@mantine/dates/DecadeLevel";const uLt={yearLabelFormat:"YYYY"},pF=je((e,t)=>{const n=Ae("YearLevel",uLt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,yearLabelFormat:M,__staticSelector:P,__stopPropagation:O,size:F,classNames:L,styles:B,unstyled:U,...H}=n,D=ql(),z={__staticSelector:P||"YearLevel",classNames:L,styles:B,unstyled:U,size:F},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(Ee,{"data-year-level":!0,size:F,ref:t,...H,children:[_.jsx(My,{label:typeof M=="function"?M(r):Tt(r).locale(i||D.locale).format(M),__preventFocus:p,__stopPropagation:O,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,...z}),_.jsx(dF,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:O,withCellSpacing:h,...z})]})});pF.classes={...My.classes,...dF.classes};pF.displayName="@mantine/dates/YearLevel";const lLt={monthLabelFormat:"MMMM YYYY"},mF=je((e,t)=>{const n=Ae("MonthLevel",lLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:M,onLevelClick:P,nextDisabled:O,previousDisabled:F,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:D,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=ql(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ye=typeof O=="boolean"?O:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(Ee,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx(My,{label:typeof D=="function"?D(r):Tt(r).locale(i||de.locale).format(D),__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:M,onLevelClick:P,nextDisabled:ye,previousDisabled:Ie,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),_.jsx(lF,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:S,static:ne,withCellSpacing:w,...he})]})});mF.classes={...lF.classes,...My.classes};mF.displayName="@mantine/dates/MonthLevel";var cDe={levelsGroup:"m_30b26e33"};const cLt={},Ly=je((e,t)=>{const n=Ae("LevelsGroup",cLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=vt({name:l||"LevelsGroup",classes:cDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(Ee,{ref:t,...f("levelsGroup"),...c})});Ly.classes=cDe;Ly.displayName="@mantine/dates/LevelsGroup";const fLt={numberOfColumns:1},gF=je((e,t)=>{const n=Ae("DecadeLevelGroup",fLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:S,unstyled:T,__staticSelector:A,__stopPropagation:C,numberOfColumns:I,levelControlAriaLabel:R,decadeLabelFormat:M,size:P,vars:O,...F}=n,L=N.useRef([]),B=Array(I).fill(0).map((U,H)=>{const D=Tt(r).add(H*10,"years").toDate();return _.jsx(hF,{size:P,yearsListFormat:a,decade:D,withNext:H===I-1,withPrevious:H===0,decadeLabelFormat:M,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>jJ({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:L}),__getControlRef:(z,W,j)=>{Array.isArray(L.current[H])||(L.current[H]=[]),Array.isArray(L.current[H][z])||(L.current[H][z]=[]),L.current[H][z][W]=j},levelControlAriaLabel:typeof R=="function"?R(D):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:f},H)});return _.jsx(Ly,{classNames:E,styles:S,__staticSelector:A||"DecadeLevelGroup",ref:t,size:P,unstyled:T,...F,children:B})});gF.classes={...Ly.classes,...hF.classes};gF.displayName="@mantine/dates/DecadeLevelGroup";const dLt={numberOfColumns:1},yF=je((e,t)=>{const n=Ae("YearLevelGroup",dLt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:T,styles:A,unstyled:C,__staticSelector:I,__stopPropagation:R,numberOfColumns:M,levelControlAriaLabel:P,yearLabelFormat:O,size:F,vars:L,...B}=n,U=N.useRef([]),H=Array(M).fill(0).map((D,z)=>{const W=Tt(r).add(z,"years").toDate();return _.jsx(pF,{size:F,monthsListFormat:a,year:W,withNext:z===M-1,withPrevious:z===0,yearLabelFormat:O,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>jJ({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:T,styles:A,unstyled:C,__staticSelector:I||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(Ly,{classNames:T,styles:A,__staticSelector:I||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:H})});yF.classes={...pF.classes,...Ly.classes};yF.displayName="@mantine/dates/YearLevelGroup";const hLt={numberOfColumns:1},vF=je((e,t)=>{const n=Ae("MonthLevelGroup",hLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:M,hasNextLevel:P,classNames:O,styles:F,unstyled:L,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:D,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=N.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ye=Tt(r).add(he,"months").toDate();return _.jsx(mF,{month:ye,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,ve)=>jJ({levelIndex:he,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,ve,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][ve]=Ke},levelControlAriaLabel:typeof U=="function"?U(ye):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:M,hasNextLevel:P,classNames:O,styles:F,unstyled:L,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(Ly,{classNames:O,styles:F,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});vF.classes={...Ly.classes,...mF.classes};vF.displayName="@mantine/dates/MonthLevelGroup";var fDe={input:"m_6fa5e2aa"};const pLt={},bF=je((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:S,value:T,name:A,form:C,type:I,...R}=qve("PickerInputBase",pLt,e),M=b||(g&&w&&!E&&!S?_.jsx(wy,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{I==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(vs,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(Pi.Wrapper,{...r,children:_.jsxs(Jr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var O;(O=u==null?void 0:u.onClose)==null||O.call(u),P()},children:[_.jsx(Jr.Target,{children:_.jsx(Pi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:O=>{m==null||m(O),h.toggle()},rightSection:M,...n,ref:t,classNames:{...s,input:Ki(fDe.input,s==null?void 0:s.input)},...R,children:d||_.jsx(Pi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Jr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(XPe,{value:T,name:A,form:C,type:I})]})});bF.classes=fDe;bF.displayName="@mantine/dates/PickerInputBase";const phe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function zJ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=N.useRef(e),o=ql(),[a,u,l]=Do({value:E0("add",t,o.getTimezone(),!i),defaultValue:E0("add",n,o.getTimezone(),!i),finalValue:phe(e),onChange:f=>{r==null||r(E0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:phe(e),u(c))),[c,u,l]}function iB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function mLt(e){return e===0?"month":e===1?"year":"decade"}function bT(e,t,n){return mLt(zd(iB(e,0),iB(t,0),iB(n,2)))}const gLt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},_F=je((e,t)=>{const n=Ae("Calendar",gLt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:M,getDayAriaLabel:P,monthLabelFormat:O,nextIcon:F,previousIcon:L,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:D,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ye,locale:Ie,__staticSelector:ve,size:Ke,__preventFocus:Ue,__stopPropagation:gt,onNextDecade:rt,onPreviousDecade:be,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Dt,static:We,__timezoneApplied:me,...dt}=n,{resolvedClassNames:yt,resolvedStyles:pe}=Mm({classNames:ne,styles:ce,props:n}),[Ce,He]=Do({value:a?bT(a,s,i):void 0,defaultValue:o?bT(o,s,i):void 0,finalValue:bT(void 0,s,i),onChange:u}),[ut,_t]=zJ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),Mn={__staticSelector:ve||"Calendar",styles:pe,classNames:yt,unstyled:de,size:Ke},Tr=ql(),Ln=h||d||1,cr=ut||E0("add",new Date,Tr.getTimezone()),hn=()=>{const Tn=Tt(cr).add(Ln,"month").toDate();ct==null||ct(Tn),_t(Tn)},Sn=()=>{const Tn=Tt(cr).subtract(Ln,"month").toDate();Dt==null||Dt(Tn),_t(Tn)},nr=()=>{const Tn=Tt(cr).add(Ln,"year").toDate();ke==null||ke(Tn),_t(Tn)},rr=()=>{const Tn=Tt(cr).subtract(Ln,"year").toDate();ze==null||ze(Tn),_t(Tn)},Fo=()=>{const Tn=Tt(cr).add(10*Ln,"year").toDate();rt==null||rt(Tn),_t(Tn)},$i=()=>{const Tn=Tt(cr).subtract(10*Ln,"year").toDate();be==null||be(Tn),_t(Tn)};return _.jsxs(Ee,{ref:t,size:Ke,"data-calendar":!0,...dt,children:[Ce==="month"&&_.jsx(vF,{month:cr,minDate:he,maxDate:ye,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:M,getDayAriaLabel:P,onNext:hn,onPrevious:Sn,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:O,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:gt,static:We,withCellSpacing:H,...Mn}),Ce==="year"&&_.jsx(yF,{year:cr,numberOfColumns:d,minDate:he,maxDate:ye,monthsListFormat:D,getMonthControlProps:z,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(Tn,Mi)=>{w&&_t(Mi),He(bT("month",s,i)),g==null||g(Mi)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:H,...Mn}),Ce==="decade"&&_.jsx(gF,{decade:cr,minDate:he,maxDate:ye,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:Fo,onPrevious:$i,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(Tn,Mi)=>{b&&_t(Mi),He(bT("year",s,i)),m==null||m(Mi)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:H,...Mn})]})});_F.classes={...gF.classes,...yF.classes,...vF.classes};_F.displayName="@mantine/dates/Calendar";function yLt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:M,weekendDays:P,getDayProps:O,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:M,weekendDays:P,getDayProps:O,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie},others:ve}}function mhe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function vLt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=zJ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=N.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=N.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const T=[S,f];T.sort((A,C)=>A.getTime()-C.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(T=>Tt(T).isSame(S,t))?c(l.filter(T=>!Tt(T).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?mhe(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?mhe(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:b(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const T=Tt(l).isSame(S,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return N.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const bLt={type:"default",defaultLevel:"month",numberOfColumns:1},wF=je((e,t)=>{const n=Ae("DatePicker",bLt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:T,getControlProps:A}=vLt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:I}=Mm({classNames:r,styles:i,props:n}),R=ql();return _.jsx(_F,{ref:t,minLevel:"month",classNames:C,styles:I,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(M,P)=>{T(P),y==null||y(M,P)},__onDayClick:(M,P)=>{E(P),v==null||v(M,P)},getDayProps:M=>({...A(M),...f==null?void 0:f(M)}),...w,date:E0("add",w.date,R.getTimezone(),b),__timezoneApplied:!0})});wF.classes=_F.classes;wF.displayName="@mantine/dates/DatePicker";function _Lt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=ql(),[f,d]=yw(!1),[h,p]=zJ({type:e,value:t,defaultValue:n,onChange:r}),m=IMt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const wLt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},VJ=je((e,t)=>{const n=Ae("DatePickerInput",wLt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:S,...T}=n,{resolvedClassNames:A,resolvedStyles:C}=Mm({classNames:c,styles:f,props:n}),{calendarProps:I,others:R}=yLt(T),{_value:M,setValue:P,formattedValue:O,dropdownHandlers:F,dropdownOpened:L,onClear:B,shouldClear:U}=_Lt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),H=Array.isArray(M)?M[0]||E:M||E,D=ql();return _.jsx(bF,{formattedValue:O,dropdownOpened:L,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:U,value:M,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:_.jsx(wF,{...I,size:p,variant:m,type:r,value:M,defaultDate:H||LMt({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:E0("add",I.date,D.getTimezone()),__timezoneApplied:!0})})});VJ.classes={...bF.classes,...wF.classes};VJ.displayName="@mantine/dates/DatePickerInput";var dDe={exports:{}},ELt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xLt=ELt,SLt=xLt;function hDe(){}function pDe(){}pDe.resetWarningCache=hDe;var TLt=function(){function e(r,i,s,o,a,u){if(u!==SLt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pDe,resetWarningCache:hDe};return n.PropTypes=n,n};dDe.exports=TLt();var ALt=dDe.exports;const ghe=Ul(ALt),yhe={};function mV(e,t){e===void 0&&(e=yhe),t===void 0&&(t=yhe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var CLt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ILt=Object.prototype.hasOwnProperty;function gV(e,t){return ILt.call(e,t)}function yV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)gV(e,i)&&r.push(i);return r}function wl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function vV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function T1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function mDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function bV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(bV(e[t]))return!0}else if(typeof e=="object"){for(var r=yV(e),i=r.length,s=0;s<i;s++)if(bV(e[r[s]]))return!0}}return!1}function vhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var gDe=function(e){CLt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,vhe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=vhe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ui=gDe,kLt=wl,iw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=x$(n,this.path);r&&(r=wl(r));var i=gv(n,{op:"remove",path:this.from}).removed;return gv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=x$(n,this.from);return gv(n,{op:"add",path:this.path,value:wl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Y2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},RLt={add:function(e,t,n){return vV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:iw.move,copy:iw.copy,test:iw.test,_get:iw._get};function x$(e,t){if(t=="")return e;var n={op:"_get",path:t};return gv(e,n),n.value}function gv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):S$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=x$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Y2(e,t.value),o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=wl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=S$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=mDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!vV(h))throw new Ui("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);vV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ui("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=RLt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=iw[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ui("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function EF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=wl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=gv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function NLt(e,t,n){var r=gv(e,t);if(r.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function S$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ui("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(iw[e.op]){if(typeof e.path!="string")throw new Ui("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ui('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ui("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&bV(e.value))throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ui("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ui("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=yDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ui("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function yDe(e,t,n){try{if(!Array.isArray(e))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)EF(wl(t),wl(e),n||!0);else{n=n||S$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ui)return i;throw i}}function Y2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!Y2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!Y2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const PLt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ui,_areEquals:Y2,applyOperation:gv,applyPatch:EF,applyReducer:NLt,deepClone:kLt,getValueByPointer:x$,validate:yDe,validator:S$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var HJ=new WeakMap,DLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),OLt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function $Lt(e){return HJ.get(e)}function MLt(e,t){return e.observers.get(t)}function LLt(e,t){e.observers.delete(t.callback)}function FLt(e,t){t.unobserve()}function jLt(e,t){var n=[],r,i=$Lt(e);if(!i)i=new DLt(e),HJ.set(e,i);else{var s=MLt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=wl(e),t){r.callback=t,r.next=null;var o=function(){_V(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){_V(r),clearTimeout(r.next),LLt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new OLt(t,r)),r}function _V(e,t){t===void 0&&(t=!1);var n=HJ.get(e.object);qJ(n.value,e.object,e.patches,"",t),e.patches.length&&EF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function qJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=yV(t),o=yV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(gV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?qJ(c,f,n,r+"/"+T1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+T1(l),value:wl(c)}),n.push({op:"replace",path:r+"/"+T1(l),value:wl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+T1(l),value:wl(c)}),n.push({op:"remove",path:r+"/"+T1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!gV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+T1(l),value:wl(t[l])})}}}function BLt(e,t,n){n===void 0&&(n=!1);var r=[];return qJ(e,t,r,"",n),r}const ULt=Object.freeze(Object.defineProperty({__proto__:null,compare:BLt,generate:_V,observe:jLt,unobserve:FLt},Symbol.toStringTag,{value:"Module"}));Object.assign({},PLt,ULt,{JsonPatchError:gDe,deepClone:wl,escapePathComponent:T1,unescapePathComponent:mDe});var zLt=/("(?:[^\\"]|\\.)*")|[:,]/g,VLt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(zLt,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const sB=Ul(VLt);function tl(e,t,n){return e.fields=t||[],e.fname=n,e}function Yi(e){return e==null?null:e.fname}function fa(e){return e==null?null:e.fields}function vDe(e){return e.length===1?HLt(e[0]):qLt(e)}const HLt=e=>function(t){return t[e]},qLt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function Wh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Tc(e,t,n){const r=Wh(e);return e=r.length===1?r[0]:e,tl((n&&n.get||vDe)(r),[e],t||e)}const Nk=Tc("id"),va=tl(e=>e,[],"identity"),Ug=tl(()=>0,[],"zero"),pS=tl(()=>1,[],"one"),Ac=tl(()=>!0,[],"true"),_g=tl(()=>!1,[],"false");function WLt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const bDe=0,WJ=1,GJ=2,_De=3,wDe=4;function YJ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:WLt,r=e||bDe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=WJ&&n(t||"error","ERROR",arguments),this},warn(){return r>=GJ&&n(t||"warn","WARN",arguments),this},info(){return r>=_De&&n(t||"log","INFO",arguments),this},debug(){return r>=wDe&&n(t||"log","DEBUG",arguments),this}}}var Fe=Array.isArray;function mt(e){return e===Object(e)}const bhe=e=>e!=="__proto__";function mS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=GLt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;gS(r,s,i[s],o)}return r},{})}function gS(e,t,n,r){if(!bhe(t))return;let i,s;if(mt(n)&&!Fe(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?gS(s,i,n[i]):bhe(i)&&(s[i]=n[i])}else e[t]=n}function GLt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ua(e){return e==null||e===""?null:+e}const EDe=e=>t=>e*Math.exp(t),xDe=e=>t=>Math.log(e*t),SDe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),TDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,T$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function xF(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function ADe(e,t){return xF(e,t,ua,va)}function CDe(e,t){var n=Math.sign(e[0]);return xF(e,t,xDe(n),EDe(n))}function IDe(e,t,n){return xF(e,t,T$(n),T$(1/n))}function kDe(e,t,n){return xF(e,t,SDe(n),TDe(n))}function SF(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function KJ(e,t,n){return SF(e,t,n,ua,va)}function XJ(e,t,n){const r=Math.sign(e[0]);return SF(e,t,n,xDe(r),EDe(r))}function A$(e,t,n,r){return SF(e,t,n,T$(r),T$(1/r))}function QJ(e,t,n,r){return SF(e,t,n,SDe(r),TDe(r))}function RDe(e){return 1+~~(new Date(e).getMonth()/3)}function NDe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ht(e){return e!=null?Fe(e)?e:[e]:[]}function PDe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function vn(e){return typeof e=="function"}const YLt="descending";function JJ(e,t,n){n=n||{},t=ht(t)||[];const r=[],i=[],s={},o=n.comparator||KLt;return ht(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===YLt?-1:1),i.push(a=vn(a)?a:Tc(a,null,n)),(fa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:tl(o(i,r),Object.keys(s))}const TF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),KLt=(e,t)=>e.length===1?XLt(e[0],t[0]):QLt(e,t,e.length),XLt=(e,t)=>function(n,r){return TF(e(n),e(r))*t},QLt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=TF(s(r),s(i));return o*t[a]});function ba(e){return vn(e)?e:()=>e}function ZJ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Th(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function DDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const JLt=Object.prototype.hasOwnProperty;function Ft(e,t){return JLt.call(e,t)}const VN={};function yS(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==VN}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===VN&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=VN),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==VN&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function ODe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),gn(r,n)}function sw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Fy(e){return typeof e=="boolean"}function x0(e){return Object.prototype.toString.call(e)==="[object Date]"}function $De(e){return e&&vn(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function MDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function pt(e){return typeof e=="string"}function eZ(e,t,n){e&&(e=t?ht(e).map(a=>a.replace(/\\(.)/g,"$1")):ht(e));const r=e&&e.length,i=n&&n.get||vDe,s=a=>i(t?[a]:Wh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return tl(o,e,"key")}function LDe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const ZLt=1e4;function FDe(e){e=+e||ZLt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function jDe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function pA(e,t){let n="";for(;--t>=0;)n+=e;return n}function BDe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?pA(i,o)+s:r==="center"?pA(i,~~(o/2))+s+pA(i,Math.ceil(o/2)):s+pA(i,o)}function Pk(e){return e&&Qn(e)-e[0]||0}function nt(e){return Fe(e)?"["+e.map(nt)+"]":mt(e)||pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function tZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const e6t=e=>lr(e)||x0(e)?e:Date.parse(e);function nZ(e,t){return t=t||e6t,e==null||e===""?null:t(e)}function rZ(e){return e==null||e===""?null:e+""}function Vf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function UDe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Ig(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function t6t(e){return e}function n6t(e){if(e==null)return t6t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function r6t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function i6t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return _he(e,n)})}:_he(e,t)}function _he(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=zDe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function zDe(e,t){var n=n6t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&r6t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function s6t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function o6t(e){return zDe(e,a6t.apply(this,arguments))}function a6t(e,t,n){var r,i,s;if(arguments.length>1)r=u6t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:s6t(e,r)}}function u6t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Ro="year",Yu="quarter",da="month",Is="week",Ku="date",aa="day",Ah="dayofyear",Ml="hours",Ll="minutes",Cc="seconds",Hf="milliseconds",iZ=[Ro,Yu,da,Is,Ku,aa,Ah,Ml,Ll,Cc,Hf],oB=iZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function sZ(e){const t=ht(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{Ft(oB,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[Is]||n[aa]?1:0)+(n[Yu]||n[da]||n[Ku]?1:0)+(n[Ah]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>oB[i]-oB[s]),t}const l6t={[Ro]:"%Y ",[Yu]:"Q%q ",[da]:"%b ",[Ku]:"%d ",[Is]:"W%U ",[aa]:"%a ",[Ah]:"%j ",[Ml]:"%H:00",[Ll]:"00:%M",[Cc]:":%S",[Hf]:".%L",[`${Ro}-${da}`]:"%Y-%m ",[`${Ro}-${da}-${Ku}`]:"%Y-%m-%d ",[`${Ml}-${Ll}`]:"%H:%M"};function VDe(e,t){const n=gn({},l6t,t),r=sZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const $1=new Date;function oZ(e){return $1.setFullYear(e),$1.setMonth(0),$1.setDate(1),$1.setHours(0,0,0,0),$1}function HDe(e){return WDe(new Date(e))}function qDe(e){return wV(new Date(e))}function WDe(e){return Xp.count(oZ(e.getFullYear())-1,e)}function wV(e){return zx.count(oZ(e.getFullYear())-1,e)}function EV(e){return oZ(e).getDay()}function c6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function GDe(e){return KDe(new Date(e))}function YDe(e){return xV(new Date(e))}function KDe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return p0.count(t-1,e)}function xV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Vx.count(t-1,e)}function SV(e){return $1.setTime(Date.UTC(e,0,1)),$1.getUTCDay()}function f6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function XDe(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,b)=>(b=b||y,d6t(n[b],r[b],y===o&&s,v)),u=new Date,l=Vf(e),c=l[Ro]?a(Ro):ba(2012),f=l[da]?a(da):l[Yu]?a(Yu):Ug,d=l[Is]&&l[aa]?a(aa,1,Is+aa):l[Is]?a(Is,1):l[aa]?a(aa,1):l[Ku]?a(Ku,1):l[Ah]?a(Ah,1):pS,h=l[Ml]?a(Ml):Ug,p=l[Ll]?a(Ll):Ug,m=l[Cc]?a(Cc):Ug,g=l[Hf]?a(Hf):Ug;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function d6t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function HE(e,t,n){return t+e*7-(n+6)%7}const h6t={[Ro]:e=>e.getFullYear(),[Yu]:e=>Math.floor(e.getMonth()/3),[da]:e=>e.getMonth(),[Ku]:e=>e.getDate(),[Ml]:e=>e.getHours(),[Ll]:e=>e.getMinutes(),[Cc]:e=>e.getSeconds(),[Hf]:e=>e.getMilliseconds(),[Ah]:e=>WDe(e),[Is]:e=>wV(e),[Is+aa]:(e,t)=>HE(wV(e),e.getDay(),EV(t)),[aa]:(e,t)=>HE(1,e.getDay(),EV(t))},p6t={[Yu]:e=>3*e,[Is]:(e,t)=>HE(e,0,EV(t))};function QDe(e,t){return XDe(e,t||1,h6t,p6t,c6t)}const m6t={[Ro]:e=>e.getUTCFullYear(),[Yu]:e=>Math.floor(e.getUTCMonth()/3),[da]:e=>e.getUTCMonth(),[Ku]:e=>e.getUTCDate(),[Ml]:e=>e.getUTCHours(),[Ll]:e=>e.getUTCMinutes(),[Cc]:e=>e.getUTCSeconds(),[Hf]:e=>e.getUTCMilliseconds(),[Ah]:e=>KDe(e),[Is]:e=>xV(e),[aa]:(e,t)=>HE(1,e.getUTCDay(),SV(t)),[Is+aa]:(e,t)=>HE(xV(e),e.getUTCDay(),SV(t))},g6t={[Yu]:e=>3*e,[Is]:(e,t)=>HE(e,0,SV(t))};function JDe(e,t){return XDe(e,t||1,m6t,g6t,f6t)}const y6t={[Ro]:ph,[Yu]:p2.every(3),[da]:p2,[Is]:zx,[Ku]:Xp,[aa]:Xp,[Ah]:Xp,[Ml]:XL,[Ll]:YL,[Cc]:Bp,[Hf]:bE},v6t={[Ro]:mh,[Yu]:m2.every(3),[da]:m2,[Is]:Vx,[Ku]:p0,[aa]:p0,[Ah]:p0,[Ml]:QL,[Ll]:KL,[Cc]:Bp,[Hf]:bE};function vS(e){return y6t[e]}function bS(e){return v6t[e]}function ZDe(e,t,n){return e?e.offset(t,n):void 0}function eOe(e,t,n){return ZDe(vS(e),t,n)}function tOe(e,t,n){return ZDe(bS(e),t,n)}function nOe(e,t,n,r){return e?e.range(t,n,r):void 0}function rOe(e,t,n,r){return nOe(vS(e),t,n,r)}function iOe(e,t,n,r){return nOe(bS(e),t,n,r)}const mA=1e3,gA=mA*60,yA=gA*60,AF=yA*24,b6t=AF*7,whe=AF*30,TV=AF*365,sOe=[Ro,da,Ku,Ml,Ll,Cc,Hf],vA=sOe.slice(0,-1),bA=vA.slice(0,-1),_A=bA.slice(0,-1),_6t=_A.slice(0,-1),w6t=[Ro,Is],Ehe=[Ro,da],oOe=[Ro],_T=[[vA,1,mA],[vA,5,5*mA],[vA,15,15*mA],[vA,30,30*mA],[bA,1,gA],[bA,5,5*gA],[bA,15,15*gA],[bA,30,30*gA],[_A,1,yA],[_A,3,3*yA],[_A,6,6*yA],[_A,12,12*yA],[_6t,1,AF],[w6t,1,b6t],[Ehe,1,whe],[Ehe,3,3*whe],[oOe,1,TV]];function aOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Pk(t))/n;let i=Lx(a=>a[2]).right(_T,r),s,o;return i===_T.length?(s=oOe,o=M0(t[0]/TV,t[1]/TV,n)):i?(i=_T[r/_T[i-1][2]<_T[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=sOe,o=Math.max(M0(t[0],t[1],n),1)),{units:s,step:o}}function wA(e){const t={};return n=>t[n]||(t[n]=e(n))}function E6t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=x6t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function x6t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function uOe(e){const t=wA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=$v(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return E6t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=$v(o??",f");const a=M0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Pxe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Dxe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Nxe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let AV;lOe();function lOe(){return AV=uOe({format:jx,formatPrefix:NY})}function cOe(e){return uOe(Rxe(e))}function C$(e){return arguments.length?AV=cOe(e):AV}function xhe(e,t,n){n=n||{},mt(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(Cc),i=t(Ll),s=t(Ml),o=t(Ku),a=t(Is),u=t(da),l=t(Yu),c=t(Ro),f=e(n[Hf]||".%L"),d=e(n[Cc]||":%S"),h=e(n[Ll]||"%I:%M"),p=e(n[Ml]||"%I %p"),m=e(n[Ku]||n[aa]||"%a %d"),g=e(n[Is]||"%b %d"),y=e(n[da]||"%B"),v=e(n[Yu]||"%B"),b=e(n[Ro]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function fOe(e){const t=wA(e.format),n=wA(e.utcFormat);return{timeFormat:r=>pt(r)?t(r):xhe(t,vS,r),utcFormat:r=>pt(r)?n(r):xhe(n,bS,r),timeParse:wA(e.parse),utcParse:wA(e.utcParse)}}let CV;dOe();function dOe(){return CV=fOe({format:HY,parse:WSe,utcFormat:JL,utcParse:GSe})}function hOe(e){return fOe(USe(e))}function K2(e){return arguments.length?CV=hOe(e):CV}const IV=(e,t)=>gn({},e,t);function pOe(e,t){const n=e?cOe(e):C$(),r=t?hOe(t):K2();return IV(n,r)}function aZ(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?IV(C$(e),K2(t)):IV(C$(),K2())}function S6t(){return lOe(),dOe(),aZ()}const T6t=/^(data:|([A-Za-z]+:)?\/\/)/,A6t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,C6t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,She="file://";function I6t(e,t){return n=>({options:n||{},sanitize:R6t,load:k6t,fileAccess:!!t,file:N6t(t),http:D6t(e)})}async function k6t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function R6t(e,t){t=gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=A6t.test(e.replace(C6t,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+nt(e));const u=T6t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(She))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(She.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function N6t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):P6t}async function P6t(){Me("No file system access.")}function D6t(e){return e?async function(t,n){const r=gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?vn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:O6t}async function O6t(){Me("No HTTP fetch method available.")}const $6t=e=>e!=null&&e===e,M6t=e=>e==="true"||e==="false"||e===!0||e===!1,L6t=e=>!Number.isNaN(Date.parse(e)),mOe=e=>!Number.isNaN(+e)&&!(e instanceof Date),F6t=e=>mOe(e)&&Number.isInteger(+e),kV={boolean:tZ,integer:ua,number:ua,date:nZ,string:rZ,unknown:va},HN=[M6t,F6t,mOe,L6t],j6t=["boolean","integer","number","date"];function gOe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=HN.length,i=HN.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&$6t(u)&&!HN[a](u)&&(i[a]=0,++o,o===HN.length))return"string";return j6t[i.reduce((s,o)=>s===0?o:s,0)-1]}function yOe(e,t){return t.reduce((n,r)=>(n[r]=gOe(e,r),n),{})}function The(e){const t=function(n,r){const i={delimiter:e};return uZ(n,r?gn(r,i):i)};return t.responseType="text",t}function uZ(e,t){return t.header&&(e=t.header.map(nt).join(t.delimiter)+`
`+e),Cxe(t.delimiter).parse(e+"")}uZ.responseType="text";function B6t(e){return typeof Buffer=="function"&&vn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function lZ(e,t){const n=t&&t.property?Tc(t.property):va;return mt(e)&&!B6t(e)?U6t(n(e),t):n(JSON.parse(e))}lZ.responseType="json";function U6t(e,t){return!Fe(e)&&$De(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const z6t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function vOe(e,t){let n,r,i,s;return e=lZ(e,t),t&&t.feature?(n=i6t,i=t.feature):t&&t.mesh?(n=o6t,i=t.mesh,s=z6t[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}vOe.responseType="json";const hD={dsv:uZ,csv:The(","),tsv:The("	"),json:lZ,topojson:vOe};function cZ(e,t){return arguments.length>1?(hD[e]=t,this):Ft(hD,e)?hD[e]:null}function bOe(e){const t=cZ(e);return t&&t.responseType||"text"}function _Oe(e,t,n,r){t=t||{};const i=cZ(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&V6t(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function V6t(e,t,n,r){if(!e.length)return;const i=K2();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=yOe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!kV[p])throw Error("Illegal format pattern: "+h+":"+p);return kV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const CF=I6t(typeof fetch<"u"&&fetch,null);function IF(e){const t=e||va,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function pD(e,t){try{await t(e)}catch(n){e.error(n)}}const wOe=Symbol("vega_id");let H6t=1;function kF(e){return!!(e&&Mt(e))}function Mt(e){return e[wOe]}function EOe(e,t){return e[wOe]=t,e}function wr(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:EOe(t,H6t++)}function fZ(e){return RF(e,wr({}))}function RF(e,t){for(const n in e)t[n]=e[n];return t}function xOe(e,t){return EOe(t,Mt(e))}function Db(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function SOe(e){return e&&e.constructor===Ob}function Ob(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Ob,insert(a){const u=ht(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=vn(a)?r:t,l=ht(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ba(l)};return vn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return vn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(wr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const mD="_:mod:_";function NF(){Object.defineProperty(this,mD,{writable:!0,value:{}})}NF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[mD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Fe(n)?1+n.length:-1),i},modified(e,t){const n=this[mD];if(arguments.length){if(Fe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[mD]={},this}};let q6t=0;const W6t="pulse",G6t=new NF,Y6t=1,K6t=2;function Gr(e,t,n,r){this.id=++q6t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ahe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Gr.prototype={targets(){return this._targets||(this._targets=IF(Nk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ahe(Y6t),modified:Ahe(K6t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new NF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Gr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===W6t)ht(a).forEach(f=>{f instanceof Gr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(Fe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||G6t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function X6t(e,t,n,r){let i=1,s;return e instanceof Gr?s=e:e&&e.prototype instanceof Gr?s=new e:vn(e)?s=new Gr(null,e):(i=0,s=new Gr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Q6t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let J6t=0;function PF(e,t,n){this.id=++J6t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function wg(e,t,n){return new PF(e,t,n)}PF.prototype={_filter:Ac,_apply:va,targets(){return this._targets||(this._targets=IF(Nk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=wg(e);return this.targets().add(t),t},apply(e){const t=wg(null,e);return this.targets().add(t),t},merge(){const e=wg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=wg();return this.targets().add(wg(null,null,ZJ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(wg(null,null,()=>n=!0)),t.targets().add(wg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ac,this._targets=null}};function Z6t(e,t,n,r){const i=this,s=wg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ht(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function eFt(e,t){const n=this.locale();return _Oe(e,t,n.timeParse,n.utcParse)}function tFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function nFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:bOe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function rFt(e,t,n){const r=this,i=r._pending||iFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Ac).insert(s.data||[])),i.done(),s}function iFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const sFt={skip:!0};function oFt(e,t,n,r,i){return(e instanceof Gr?uFt:aFt)(this,e,t,n,r,i),this}function aFt(e,t,n,r,i,s){const o=gn({},s,sFt);let a,u;vn(n)||(n=ba(n)),r===void 0?a=l=>e.touch(n(l)):vn(r)?(u=new Gr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;SOe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function uFt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Gr(null,lFt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function lFt(e,t){return t=vn(t)?t:ba(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function cFt(e){e.rank=++this._rank}function fFt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const I$={},Td=1,kg=2,bp=4,dFt=Td|kg,Che=Td|bp,p_=Td|kg|bp,Ihe=8,wT=16,khe=32,Rhe=64;function S0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function aB(e,t){const n=[];return Ig(e,t,r=>n.push(r)),n}function Nhe(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function qN(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}S0.prototype={StopPropagation:I$,ADD:Td,REM:kg,MOD:bp,ADD_REM:dFt,ADD_MOD:Che,ALL:p_,REFLOW:Ihe,SOURCE:wT,NO_SOURCE:khe,NO_FIELDS:Rhe,fork(e){return new S0(this.dataflow).init(this,e)},clone(){const e=this.fork(p_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(p_|wT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new S0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Rhe)&&(n.fields=e.fields),t&Td?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&kg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&bp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&khe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||p_;return t&Td&&this.add.length||t&kg&&this.rem.length||t&bp&&this.mod.length},reflow(e){if(e)return this.fork(p_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(bp,Nhe(this,Td))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Fe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Td&&(n.addF=qN(n.addF,t)),e&kg&&(n.remF=qN(n.remF,t)),e&bp&&(n.modF=qN(n.modF,t)),e&wT&&(n.srcF=qN(n.srcF,t)),n},materialize(e){e=e||p_;const t=this;return e&Td&&t.addF&&(t.add=aB(t.add,t.addF),t.addF=null),e&kg&&t.remF&&(t.rem=aB(t.rem,t.remF),t.remF=null),e&bp&&t.modF&&(t.mod=aB(t.mod,t.modF),t.modF=null),e&wT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&wT)return Ig(n.source,n.srcF,r),n;e&Td&&Ig(n.add,n.addF,r),e&kg&&Ig(n.rem,n.remF,r),e&bp&&Ig(n.mod,n.modF,r);const i=n.source;if(e&Ihe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Ig(i,Nhe(n,Che),r):Ig(i,n.srcF,r))}return n}};function dZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(dZ,S0,{fork(e){const t=new S0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Fe(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function hFt(e,t,n){const r=this,i=[];if(r._pulse)return TOe(r);if(r._pending&&await r._pending,t&&await pD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new S0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=IF(Nk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=I$),u!==I$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await pD(r,c[f].callback)}return n&&await pD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function pFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function mFt(e,t,n){return this._pulse?TOe(this):(this.evaluate(e,t,n),this)}function gFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function TOe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function yFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function vFt(e,t){const n=e.source,r=this._clock;return n&&Fe(n)?new dZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||bFt(this._pulse,n&&n.pulse)}function bFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==I$&&(e.source=t.source),e)}const hZ={skip:!1,force:!1};function _Ft(e,t){const n=t||hZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function wFt(e,t,n){const r=n||hZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function EFt(e,t,n){this.touch(e,n||hZ);const r=new S0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function xFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),AOe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,SFt(t,0,e)):r=n,r}}}function AOe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function SFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,AOe(e,r,t,n)}function zw(){this.logger(YJ()),this.logLevel(WJ),this._clock=0,this._rank=0,this._locale=aZ();try{this._loader=CF()}catch{}this._touched=IF(Nk),this._input={},this._pulse=null,this._heap=xFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function ET(e){return function(){return this._log[e].apply(this,arguments)}}zw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:ET("error"),warn:ET("warn"),info:ET("info"),debug:ET("debug"),logLevel:ET("level"),cleanThreshold:1e4,add:X6t,connect:Q6t,rank:cFt,rerank:fFt,pulse:EFt,touch:_Ft,update:wFt,changeset:Ob,ingest:tFt,parse:eFt,preload:rFt,request:nFt,events:Z6t,on:oFt,evaluate:hFt,run:mFt,runAsync:pFt,runAfter:gFt,_enqueue:yFt,_getPulse:vFt};function Pe(e,t){Gr.call(this,e,null,t)}lt(Pe,Gr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const qE={};function COe(e){const t=IOe(e);return t&&t.Definition||null}function IOe(e){return e=e&&e.toLowerCase(),Ft(qE,e)?qE[e]:null}function*kOe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function pZ(e,t,n){const r=Float64Array.from(kOe(e,n));return r.sort(Yp),t.map(i=>REe(r,i))}function mZ(e,t){return pZ(e,[.25,.5,.75],t)}function gZ(e,t){const n=e.length,r=hst(e,t),i=mZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function ROe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Ic=Math.random;function TFt(e){Ic=e}function NOe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(kOe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Ic()*s)];c[l]=a/s}return c.sort(Yp),[XU(c,n/2),XU(c,1-n/2)]}function POe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?AFt(s,t+t/4):s}function AFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function CFt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function IFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Ic())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const DOe=Math.sqrt(2*Math.PI),kFt=Math.SQRT2;let xT=NaN;function DF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(xT===xT)n=xT,xT=NaN;else{do n=Ic()*2-1,r=Ic()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,xT=r*s}return e+n*t}function yZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*DOe)}function OF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function $F(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*kFt*RFt(2*e-1)}function RFt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function vZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>DF(n,r),pdf:s=>yZ(s,n,r),cdf:s=>OF(s,n,r),icdf:s=>$F(s,n,r)};return i.mean(e).stdev(t)}function bZ(e,t){const n=vZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=gZ(e)),i):t},sample(){return e[~~(Ic()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function _Z(e,t){return e=e||0,t=t??1,Math.exp(e+DF()*t)}function wZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*DOe*e)}function EZ(e,t,n){return OF(Math.log(e),t,n)}function xZ(e,t,n){return Math.exp($F(e,t,n))}function OOe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>_Z(n,r),pdf:s=>wZ(s,n,r),cdf:s=>EZ(s,n,r),icdf:s=>xZ(s,n,r)};return i.mean(e).stdev(t)}function $Oe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Ic();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function SZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ic()}function TZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function AZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function CZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function MOe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>SZ(n,r),pdf:s=>TZ(s,n,r),cdf:s=>AZ(s,n,r),icdf:s=>CZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function IZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Dk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function MF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Ok(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function _S(e,t,n,r,i){let s=0,o=0;return Ok(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function kZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;Ok(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Dk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:_S(e,t,n,i,l)}}function LOe(e,t,n){let r=0,i=0,s=0,o=0,a=0;Ok(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Dk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:_S(e,t,n,i,l)}}function FOe(e,t,n){const[r,i,s,o]=MF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Ok(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Dk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:_S(e,t,n,o,y)}}function jOe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Ok(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Dk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:_S(e,t,n,a,c)}}function RZ(e,t,n){const[r,i,s,o]=MF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,S=T=>(T=T-s,b*T*T+w*T+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:S,rSquared:_S(e,t,n,o,S)}}function BOe(e,t,n,r){if(r===0)return IZ(e,t,n);if(r===1)return kZ(e,t,n);if(r===2)return RZ(e,t,n);const[i,s,o,a]=MF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=PFt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:NFt(f,y,-o,a),predict:v,rSquared:_S(e,t,n,a,v)}}function NFt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function PFt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Phe=2,Dhe=1e-12;function UOe(e,t,n,r){const[i,s,o,a]=MF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Phe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,S=0,T=0,A=0,C=0;const I=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const O=i[P],F=s[P],L=DFt(Math.abs(y-O)*I)*d[P],B=O*L;E+=L,S+=B,T+=F*L,A+=F*B,C+=O*B}const[R,M]=Dk(S/E,T/E,A/E,C/E);c[g]=R+M*y,f[g]=Math.abs(s[g]-c[g]),OFt(i,g+1,p)}if(h===Phe)break;const m=NEe(f);if(Math.abs(m)<Dhe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Dhe:(v=1-y*y)*v}return $Ft(i,c,o,a)}function DFt(e){return(e=1-e*e*e)*e*e}function OFt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function $Ft(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const MFt=.5*Math.PI/180;function LF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=LFt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&FFt(f,m,d,h,p)>MFt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function LFt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function FFt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function jFt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function RV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:jFt(e)}function zOe(e,t,n){return n||e+(t?"_"+t:"")}const uB=()=>{},BFt={init:uB,add:uB,rem:uB,idx:0},X2={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},$k=Object.keys(X2).filter(e=>e!=="__count__");function UFt(e,t){return(n,r)=>gn({name:e,aggregate_param:r,out:n||e},BFt,t)}[...$k,"__count__"].forEach(e=>{X2[e]=UFt(e,X2[e])});function VOe(e,t,n){return X2[e](n,t)}function HOe(e,t){return e.idx-t.idx}function zFt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=X2[i]())})};return e.forEach(n),Object.values(t).sort(HOe)}function VFt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function HFt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function qFt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function WFt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function qOe(e,t){const n=t||va,r=zFt(e),i=e.slice().sort(HOe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=VFt,s.prototype.add=HFt,s.prototype.rem=qFt,s.prototype.set=WFt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function NZ(e){this._key=e?Tc(e):Mt,this.reset()}const Lo=NZ.prototype;Lo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Lo.add=function(e){this._add.push(e)};Lo.rem=function(e){this._rem.push(e)};Lo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Lo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Lo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=DDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Lo.argmin=function(e){return this.extent(e)[0]||{}};Lo.argmax=function(e){return this.extent(e)[1]||{}};Lo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Lo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Lo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=mZ(this.values(),e),this._get=e),this._q};Lo.q1=function(e){return this.quartile(e)[0]};Lo.q2=function(e){return this.quartile(e)[1]};Lo.q3=function(e){return this.quartile(e)[2]};Lo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=NOe(this.values(),1e3,.05,e),this._get=e),this._ci};Lo.ci0=function(e){return this.ci(e)[0]};Lo.ci1=function(e){return this.ci(e)[1]};function ny(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ny.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:$k},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(ny,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ht(fa(v)),w=b.length;let E=0,S;for(;E<w;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=ht(e.groupby),this._dnames=this._dims.map(v=>{const b=Yi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:RV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=Yi(f),g=zOe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(VOe(d,h,g))}return this._measures=this._measures.map(v=>qOe(v,v.field)),Object.create(null)},cellkey:RV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new NZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?xOe(t.tuple,s):wr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const GFt=1e-14;function PZ(e){Pe.call(this,null,e)}PZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(PZ,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(fa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=ROe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ua(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(GFt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=tl(u,fa(t),e.name||"bin_"+Yi(t))}});function WOe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?jDe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function DZ(e){Pe.call(this,[],e)}DZ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(DZ,Pe,{transform(e,t){const n=t.fork(t.ALL),r=WOe(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Db(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function GOe(e){Gr.call(this,null,YFt,e)}lt(GOe,Gr);function YFt(e){return this.value&&!e.modified()?this.value:JJ(e.fields,e.orders)}function OZ(e){Pe.call(this,null,e)}OZ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function KFt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(OZ,Pe,{transform(e,t){const n=f=>d=>{for(var h=KFt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=wr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function $Z(e){Pe.call(this,null,e)}$Z.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt($Z,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=XFt(a,i,s,e.filter||Ac)):n.mod=a,n.source=this.value,n.modifies(r)}});function XFt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(wr(s)),s={},s[t]=l);return i}const Ohe={kde:bZ,mixture:$Oe,normal:vZ,lognormal:OOe,uniform:MOe},QFt="distributions",$he="function",JFt="field";function YOe(e,t){const n=e[$he];Ft(Ohe,n)||Me("Unknown distribution function: "+n);const r=Ohe[n]();for(const i in e)i===JFt?r.data((e.from||t()).map(e[i])):i===QFt?r[i](e[i].map(s=>YOe(s,t))):typeof r[i]===$he&&r[i](e[i]);return r}function MZ(e){Pe.call(this,null,e)}const KOe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ZFt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:KOe},{name:"weights",type:"number",array:!0}]};MZ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:KOe.concat(ZFt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(MZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=YOe(e.distribution,e4t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Th(r.data()),l=LF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],wr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function e4t(e){return()=>e.materialize(e.SOURCE).source}function XOe(e,t){return e?e.map((n,r)=>t[r]||Yi(n)):null}function LZ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const QOe="bin";function FZ(e){Pe.call(this,null,e)}FZ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:QOe}]};const t4t=(e,t)=>Pk(Th(e,t))/30;lt(FZ,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=LZ(t.source,e.groupby,va),i=e.smooth||!1,s=e.field,o=e.step||t4t(n,s),a=Db((p,m)=>s(p)-s(m)),u=e.as||QOe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of POe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function JOe(e){Gr.call(this,null,n4t,e),this.modified(!0)}lt(JOe,Gr);function n4t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:tl(n=>t(n,e),fa(t),Yi(t))}function jZ(e){Pe.call(this,[void 0,void 0],e)}jZ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(jZ,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ua(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Yi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function BZ(e,t){Gr.call(this,e),this.parent=t,this.count=0}lt(BZ,Gr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function FF(e){Pe.call(this,{},e),this._keys=yS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(FF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new BZ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function ZOe(e){Gr.call(this,null,r4t,e)}lt(ZOe,Gr);function r4t(e){return this.value&&!e.modified()?this.value:Fe(e.name)?ht(e.name).map(t=>Tc(t)):Tc(e.name,e.as)}function UZ(e){Pe.call(this,yS(),e)}UZ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(UZ,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function zZ(e){Pe.call(this,[],e)}zZ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(zZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=XOe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=fZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function VZ(e){Pe.call(this,[],e)}VZ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(VZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Yi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=fZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function HZ(e){Pe.call(this,null,e)}HZ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(HZ,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function e3e(e){Pe.call(this,[],e)}lt(e3e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=wr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const WN={value:"value",median:NEe,mean:bst,min:KU,max:h0},i4t=[];function qZ(e){Pe.call(this,[],e)}qZ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function s4t(e){var t=e.method||WN.value,n;if(WN[t]==null)Me("Unrecognized imputation method: "+t);else return t===WN.value?(n=e.value!==void 0?e.value:0,()=>n):WN[t]}function o4t(e){const t=e.field;return n=>n?t(n):NaN}lt(qZ,Pe,{transform(e,t){var n=t.fork(t.ALL),r=s4t(e),i=o4t(e),s=Yi(e.field),o=Yi(e.key),a=(e.groupby||[]).map(Yi),u=a4t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(wr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function a4t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):i4t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function WZ(e){ny.call(this,e)}WZ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:$k},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(WZ,ny,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function GZ(e){Pe.call(this,null,e)}GZ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(GZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=LZ(r,e.groupby,e.field),s=(e.groupby||[]).map(Yi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Th(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=bZ(h,o)[a],m=e.counts?h.length:1,g=c||Th(h);LF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(wr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function t3e(e){Gr.call(this,null,u4t,e)}lt(t3e,Gr);function u4t(e){return this.value&&!e.modified()?this.value:eZ(e.fields,e.flat)}function n3e(e){Pe.call(this,[],e),this._pending=null}lt(n3e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?lB(this,t,this._pending):l4t(e)?t.StopPropagation:e.values?lB(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ht(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>lB(this,t,ht(r.data)))}});function l4t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function lB(e,t,n){n.forEach(wr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function YZ(e){Pe.call(this,{},e)}YZ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(YZ,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(Yi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function r3e(e){Gr.call(this,null,c4t,e)}lt(r3e,Gr);function c4t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function i3e(e){Gr.call(this,null,f4t,e)}lt(i3e,Gr);function f4t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function s3e(e){Pe.call(this,null,e)}lt(s3e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function KZ(e){ny.call(this,e)}KZ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:$k,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(KZ,ny,{_transform:ny.prototype.transform,transform(e,t){return this._transform(d4t(e,t),t)}});function d4t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=fa(n).concat(fa(r)),o=p4t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>h4t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function h4t(e,t,n,r){return tl(i=>t(i)===e?n(i):NaN,r,e+"")}function p4t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(TF),t?i.slice(0,t):i}function o3e(e){FF.call(this,e)}lt(o3e,FF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(fa(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(wr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function XZ(e){Pe.call(this,null,e)}XZ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(XZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=XOe(e.fields,e.as||[]),s=r?(a,u)=>m4t(a,u,r,i):RF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,wr({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function m4t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function a3e(e){Pe.call(this,null,e)}lt(a3e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function QZ(e){Pe.call(this,null,e)}QZ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const g4t=1e-14;lt(QZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=LZ(i,e.groupby,e.field),o=(e.groupby||[]).map(Yi),a=[],u=e.step||.01,l=e.probs||Iu(u/2,1-g4t,u),c=l.length;return s.forEach(f=>{const d=pZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(wr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function u3e(e){Pe.call(this,null,e)}lt(u3e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=fZ(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function JZ(e){Pe.call(this,[],e),this.count=0}JZ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(JZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Ic()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function ZZ(e){Pe.call(this,null,e)}ZZ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(ZZ,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Iu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,wr(s)}),n.add=t.add.concat(this.value),n}});function l3e(e){Pe.call(this,null,e),this.modified(!0)}lt(l3e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function eee(e){Pe.call(this,null,e)}const c3e=["unit0","unit1"];eee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:iZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:c3e}]};lt(eee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?bS:vS)(s.unit).offset,a=e.as||c3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(fa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:aOe({extent:e.extent||Th(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=sZ(r),o=this.value||{},a=(n?JDe:QDe)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function f3e(e){Pe.call(this,yS(),e)}lt(f3e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function d3e(e){Pe.call(this,null,e)}lt(d3e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Db(e.sort)):t.source).map(e.field))}});function y4t(e,t,n,r){const i=Q2[e](t,n);return{init:i.init||Ug,update:function(s,o){o[r]=i.next(s)}}}const Q2={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Q2.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=Q2.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=v4t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function v4t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const b4t=Object.keys(Q2);function h3e(e){const t=ht(e.ops),n=ht(e.fields),r=ht(e.params),i=ht(e.aggregate_params),s=ht(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ht(fa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Yi(g),w=zOe(p,b,s[m]);if(h(g),o.push(w),Ft(Q2,p))a.push(y4t(p,g,y,w));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(VOe(p,v,w))}}),(c.length||f.length)&&(this.cell=_4t(f,c,d)),this.inputs=Object.keys(u)}const p3e=h3e.prototype;p3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};p3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function _4t(e,t,n){e=e.map(u=>qOe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new NZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function tee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}tee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:b4t.concat($k)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(tee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Db(e.sort),i=RV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new h3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)w4t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=WOe(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function w4t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Lx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ba(-1)};t.init();for(let f=0;f<u;++f)E4t(c,o,f,u),s&&x4t(c,l),t.update(c,a[f])}function E4t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function x4t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const S4t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ny,bin:PZ,collect:DZ,compare:GOe,countpattern:OZ,cross:$Z,density:MZ,dotbin:FZ,expression:JOe,extent:jZ,facet:FF,field:ZOe,filter:UZ,flatten:zZ,fold:VZ,formula:HZ,generate:e3e,impute:qZ,joinaggregate:WZ,kde:GZ,key:t3e,load:n3e,lookup:YZ,multiextent:r3e,multivalues:i3e,params:s3e,pivot:KZ,prefacet:o3e,project:XZ,proxy:a3e,quantile:QZ,relay:u3e,sample:JZ,sequence:ZZ,sieve:l3e,subflow:BZ,timeunit:eee,tupleindex:f3e,values:d3e,window:tee},Symbol.toStringTag,{value:"Module"}));function T0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const T4t=()=>typeof Image<"u"?Image:null;function nee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const A4t="identity",WE="linear",Pm="log",Mk="pow",Lk="sqrt",jF="symlog",Qv="time",Jv="utc",lh="sequential",wS="diverging",GE="quantile",BF="quantize",UF="threshold",ree="ordinal",NV="point",m3e="band",iee="bin-ordinal",js="continuous",Fk="discrete",jk="discretizing",Bc="interpolating",see="temporal";function C4t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function I4t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function oee(){const e=Ux().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=nee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Iu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,$0(h,m)-1),v=m===g?y:$0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return oee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function g3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return g3e(t())},e}function k4t(){return g3e(oee().paddingInner(1))}var R4t=Array.prototype.map;function N4t(e){return R4t.call(e,ua)}const P4t=Array.prototype.slice;function y3e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[($0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=N4t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=P4t.call(r),n):t.slice()},n.tickFormat=function(r,i){return NSe(e[0],Qn(e),r??10,i)},n.copy=function(){return y3e().domain(n.domain()).range(n.range())},n}const k$=new Map,v3e=Symbol("vega_scale");function b3e(e){return e[v3e]=!0,e}function D4t(e){return e&&e[v3e]===!0}function O4t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?C4t(s):s.invertExtent?I4t(s):void 0),s.type=e,b3e(s)};return r.metadata=Vf(ht(n)),r}function gr(e,t,n){return arguments.length>1?(k$.set(e,O4t(e,t,n)),this):_3e(e)?k$.get(e):void 0}gr(A4t,PSe);gr(WE,bm,js);gr(Pm,OSe,[js,Pm]);gr(Mk,zY,js);gr(Lk,Xdt,js);gr(jF,$Se,js);gr(Qv,YSe,[js,see]);gr(Jv,fpt,[js,see]);gr(lh,WY,[js,Bc]);gr(`${lh}-${WE}`,WY,[js,Bc]);gr(`${lh}-${Pm}`,KSe,[js,Bc,Pm]);gr(`${lh}-${Mk}`,GY,[js,Bc]);gr(`${lh}-${Lk}`,dpt,[js,Bc]);gr(`${lh}-${jF}`,XSe,[js,Bc]);gr(`${wS}-${WE}`,QSe,[js,Bc]);gr(`${wS}-${Pm}`,JSe,[js,Bc,Pm]);gr(`${wS}-${Mk}`,YY,[js,Bc]);gr(`${wS}-${Lk}`,hpt,[js,Bc]);gr(`${wS}-${jF}`,ZSe,[js,Bc]);gr(GE,MSe,[jk,GE]);gr(BF,LSe,jk);gr(UF,FSe,jk);gr(iee,y3e,[Fk,jk]);gr(ree,Ux,Fk);gr(m3e,oee,Fk);gr(NV,k4t,Fk);function _3e(e){return k$.has(e)}function $b(e,t){const n=k$.get(e);return n&&n.metadata[t]}function aee(e){return $b(e,js)}function YE(e){return $b(e,Fk)}function PV(e){return $b(e,jk)}function w3e(e){return $b(e,Pm)}function $4t(e){return $b(e,see)}function E3e(e){return $b(e,Bc)}function x3e(e){return $b(e,GE)}const M4t=["clamp","base","constant","exponent"];function S3e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function zF(e,t,n){return wY(uee(t||"rgb",n),e)}function T3e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function A3e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ba(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),M4t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function uee(e,t){const n=Hat[L4t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function L4t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const F4t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},j4t={accent:mpt,category10:ppt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:gpt,observable10:ypt,paired:vpt,pastel1:bpt,pastel2:_pt,set1:wpt,set2:Ept,set3:xpt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function C3e(e){if(Fe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function I3e(e,t){for(const n in e)lee(n,t(e[n]))}const Mhe={};I3e(j4t,C3e);I3e(F4t,e=>zF(C3e(e)));function lee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Mhe[e]=t,this):Mhe[e]}const gD="symbol",B4t="discrete",U4t="gradient",z4t=e=>Fe(e)?e.map(t=>String(t)):String(e),V4t=(e,t)=>e[1]-t[1],H4t=(e,t)=>t[1]-e[1];function cee(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Pk(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),pt(t)&&(t=e.type===Qv?vS(t):e.type==Jv?bS(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function k3e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=V4t;if(i>s&&(r=s,s=i,i=r,o=H4t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function fee(e,t){return e.bins?k3e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function R3e(e,t,n,r,i,s){const o=t.type;let a=z4t;if(o===Qv||i===Qv)a=e.timeFormat(r);else if(o===Jv||i===Jv)a=e.utcFormat(r);else if(w3e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=N3e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function N3e(e,t,n){const r=fee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const DV={[GE]:"quantiles",[BF]:"thresholds",[UF]:"domain"},P3e={[GE]:"quantiles",[BF]:"domain"};function D3e(e,t){return e.bins?G4t(e.bins):e.type===Pm?N3e(e,t,!0):DV[e.type]?W4t(e[DV[e.type]]()):fee(e,t)}function q4t(e,t,n){const r=t[P3e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function W4t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function G4t(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const Y4t=e=>DV[e.type]||e.bins;function O3e(e,t,n,r,i,s,o){const a=P3e[t.type]&&s!==Qv&&s!==Jv?q4t(e,t,i):R3e(e,t,n,i,s,o);return r===gD&&Y4t(t)?K4t(a):r===B4t?X4t(a):Q4t(a)}const K4t=e=>(t,n,r)=>{const i=Lhe(r[n+1],Lhe(r.max,1/0)),s=Fhe(t,e),o=Fhe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Lhe=(e,t)=>e??t,X4t=e=>(t,n)=>n?e(t):null,Q4t=e=>t=>e(t),Fhe=(e,t)=>Number.isFinite(e)?t(e):null;function J4t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===UF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Z4t(e,t,n,r){const i=r||t.type;return pt(n)&&$4t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Qv?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Jv?e.utcFormat("%A, %d %B %Y, %X UTC"):O3e(e,t,5,null,n,r,!0)}function $3e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Z4t(e,t,n.format,n.formatType);if(PV(t.type)){const s=D3e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(YE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let M3e=0;function e5t(){M3e=0}const R$="p_";function dee(e){return e&&e.gradient}function L3e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?R$:"";return i||(i=e.id="gradient_"+M3e++,r==="radial"?(e.x1=hd(e.x1,.5),e.y1=hd(e.y1,.5),e.r1=hd(e.r1,0),e.x2=hd(e.x2,.5),e.y2=hd(e.y2,.5),e.r2=hd(e.r2,.5),s=R$):(e.x1=hd(e.x1,0),e.y1=hd(e.y1,0),e.x2=hd(e.x2,1),e.y2=hd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function hd(e,t){return e??t}function F3e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const jhe={basis:{curve:Lpt},"basis-closed":{curve:Fpt},"basis-open":{curve:jpt},bundle:{curve:Bpt,tension:"beta",value:.85},cardinal:{curve:Upt,tension:"tension",value:0},"cardinal-open":{curve:Vpt,tension:"tension",value:0},"cardinal-closed":{curve:zpt,tension:"tension",value:0},"catmull-rom":{curve:Hpt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:qpt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Wpt,tension:"alpha",value:.5},linear:{curve:KY},"linear-closed":{curve:Gpt},monotone:{horizontal:Kpt,vertical:Ypt},natural:{curve:Xpt},step:{curve:Qpt},"step-after":{curve:Zpt},"step-before":{curve:Jpt}};function hee(e,t,n){var r=Ft(jhe,e)&&jhe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const t5t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},n5t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,r5t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,i5t=/^((\s+,?\s*)|(,\s*))/,s5t=/^[01]/;function KE(e){const t=[];return(e.match(n5t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=t5t[s],a=o5t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function o5t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?s5t:r5t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(i5t);u!==null&&(i+=u[0].length)}return r}const ry=Math.PI/180,a5t=1e-14,M1=Math.PI/2,Ud=Math.PI*2,m_=Math.sqrt(3)/2;var cB={},fB={},j3e=[].join;function u5t(e,t,n,r,i,s,o,a,u){const l=j3e.call(arguments);if(cB[l])return cB[l];const c=o*ry,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,S=g*e+y*t,T=v*e+b*t;let C=1/((S-w)*(S-w)+(T-E)*(T-E))-.25;C<0&&(C=0);let I=Math.sqrt(C);s==i&&(I=-I);const R=.5*(w+S)-I*(T-E),M=.5*(E+T)+I*(S-w),P=Math.atan2(E-M,w-R);let F=Math.atan2(T-M,S-R)-P;F<0&&s===1?F+=Ud:F>0&&s===0&&(F-=Ud);const L=Math.ceil(Math.abs(F/(M1+.001))),B=[];for(let U=0;U<L;++U){const H=P+U*F/L,D=P+(U+1)*F/L;B[U]=[R,M,H,D,n,r,f,d]}return cB[l]=B}function l5t(e){const t=j3e.call(e);if(fB[t])return fB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,S=r+m+w*p,T=n+g,A=r+y,C=T+w*y,I=A-w*g;return fB[t]=[c*E+f*S,d*E+h*S,c*C+f*I,d*C+h*I,c*T+f*A,d*T+h*A]}const Ql=["l",0,0,0,0,0,0,0];function c5t(e,t,n){const r=Ql[0]=e[0];if(r==="a"||r==="A")Ql[1]=t*e[1],Ql[2]=n*e[2],Ql[3]=e[3],Ql[4]=e[4],Ql[5]=e[5],Ql[6]=t*e[6],Ql[7]=n*e[7];else if(r==="h"||r==="H")Ql[1]=t*e[1];else if(r==="v"||r==="V")Ql[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Ql[i]=(i%2==1?t:n)*e[i];return Ql}function J2(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=c5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Bhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Bhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Bhe(e,t,n,r){const i=u5t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=l5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Uhe=.5773502691896257,zhe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ud)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*Uhe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*Uhe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function B3e(e){return Ft(zhe,e)?zhe[e]:f5t(e)}var dB={};function f5t(e){if(!Ft(dB,e)){const t=KE(e);dB[e]={draw:function(n,r){J2(n,t,0,0,Math.sqrt(r)/2)}}}return dB[e]}const gg=.448084975506;function d5t(e){return e.x}function h5t(e){return e.y}function p5t(e){return e.width}function m5t(e){return e.height}function cp(e){return typeof e=="function"?e:()=>+e}function GN(e,t,n){return Math.max(t,Math.min(e,n))}function U3e(){var e=d5t,t=h5t,n=p5t,r=m5t,i=cp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=GN(+i.call(this,c),0,v),w=GN(+s.call(this,c),0,v),E=GN(+o.call(this,c),0,v),S=GN(+a.call(this,c),0,v);if(u||(u=h=UL()),b<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(T-w,m),u.bezierCurveTo(T-gg*w,m,T,m+gg*w,T,m+w),u.lineTo(T,A-S),u.bezierCurveTo(T,A-gg*S,T-gg*S,A,T-S,A),u.lineTo(p+E,A),u.bezierCurveTo(p+gg*E,A,p,A-gg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+gg*b,p+gg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=cp(c),l):e},l.y=function(c){return arguments.length?(t=cp(c),l):t},l.width=function(c){return arguments.length?(n=cp(c),l):n},l.height=function(c){return arguments.length?(r=cp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=cp(c),s=f!=null?cp(f):i,a=d!=null?cp(d):i,o=h!=null?cp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function z3e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Ud);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=UL()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Bk(e,t){return e??t}const Uk=e=>e.x||0,zk=e=>e.y||0,g5t=e=>e.width||0,y5t=e=>e.height||0,v5t=e=>(e.x||0)+(e.width||0),b5t=e=>(e.y||0)+(e.height||0),_5t=e=>e.startAngle||0,w5t=e=>e.endAngle||0,E5t=e=>e.padAngle||0,x5t=e=>e.innerRadius||0,S5t=e=>e.outerRadius||0,T5t=e=>e.cornerRadius||0,A5t=e=>Bk(e.cornerRadiusTopLeft,e.cornerRadius)||0,C5t=e=>Bk(e.cornerRadiusTopRight,e.cornerRadius)||0,I5t=e=>Bk(e.cornerRadiusBottomRight,e.cornerRadius)||0,k5t=e=>Bk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,R5t=e=>Bk(e.size,64),N5t=e=>e.size||1,VF=e=>e.defined!==!1,P5t=e=>B3e(e.shape||"circle"),D5t=L7().startAngle(_5t).endAngle(w5t).padAngle(E5t).innerRadius(x5t).outerRadius(S5t).cornerRadius(T5t),O5t=sTe().x(Uk).y1(zk).y0(b5t).defined(VF),$5t=sTe().y(zk).x1(Uk).x0(v5t).defined(VF),M5t=iTe().x(Uk).y(zk).defined(VF),L5t=U3e().x(Uk).y(zk).width(g5t).height(y5t).cornerRadius(A5t,C5t,I5t,k5t),F5t=Mpt().type(P5t).size(R5t),j5t=z3e().x(Uk).y(zk).defined(VF).size(N5t);function pee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function B5t(e,t){return D5t.context(e)(t)}function U5t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?$5t:O5t).curve(hee(r,n.orient,n.tension)).context(e)(t)}function z5t(e,t){const n=t[0],r=n.interpolate||"linear";return M5t.curve(hee(r,n.orient,n.tension)).context(e)(t)}function ES(e,t,n,r){return L5t.context(e)(t,n,r)}function V5t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function H5t(e,t){return F5t.context(e)(t)}function q5t(e,t){return j5t.context(e)(t)}var V3e=1;function H3e(){V3e=1}function mee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+V3e++),o=i.clipping[s]||(i.clipping[s]={id:s});return vn(r)?o.path=r(null):pee(n)?o.path=ES(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function bs(e){this.clear(),e&&this.union(e)}bs.prototype={clone(){return new bs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function HF(e){this.mark=e,this.bounds=this.bounds||new bs}function qF(e){HF.call(this,e),this.items=this.items||[]}lt(qF,HF);class q3e{constructor(t){this._pending=0,this._loader=t||CF()}pending(){return this._pending}sanitizeURL(t){const n=this;return Vhe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(ST(n),r)).catch(()=>(ST(n),null))}loadImage(t){const n=this,r=T4t();return Vhe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>ST(n),o.onerror=()=>ST(n),o.src=s,o}).catch(i=>(ST(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Vhe(e){e._pending+=1}function ST(e){e._pending-=1}function eg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?W5t(t,r):0))}return e}function W5t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const G5t=Ud-1e-8;let WF,yD,vD,iv,OV,bD,$V,MV;const Kg=(e,t)=>WF.add(e,t),_D=(e,t)=>Kg(yD=e,vD=t),Hhe=e=>Kg(e,WF.y1),qhe=e=>Kg(WF.x1,e),L1=(e,t)=>OV*e+$V*t,F1=(e,t)=>bD*e+MV*t,hB=(e,t)=>Kg(L1(e,t),F1(e,t)),pB=(e,t)=>_D(L1(e,t),F1(e,t));function Vk(e,t){return WF=e,t?(iv=t*ry,OV=MV=Math.cos(iv),bD=Math.sin(iv),$V=-bD):(OV=MV=1,iv=bD=$V=0),Y5t}const Y5t={beginPath(){},closePath(){},moveTo:pB,lineTo:pB,rect(e,t,n,r){iv?(hB(e+n,t),hB(e+n,t+r),hB(e,t+r),pB(e,t)):(Kg(e+n,t+r),_D(e,t))},quadraticCurveTo(e,t,n,r){const i=L1(e,t),s=F1(e,t),o=L1(n,r),a=F1(n,r);Whe(yD,i,o,Hhe),Whe(vD,s,a,qhe),_D(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=L1(e,t),a=F1(e,t),u=L1(n,r),l=F1(n,r),c=L1(i,s),f=F1(i,s);Ghe(yD,o,u,c,Hhe),Ghe(vD,a,l,f,qhe),_D(c,f)},arc(e,t,n,r,i,s){if(r+=iv,i+=iv,yD=n*Math.cos(i)+e,vD=n*Math.sin(i)+t,Math.abs(i-r)>G5t)Kg(e-n,t-n),Kg(e+n,t+n);else{const o=l=>Kg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Ud,r<0&&(r+=Ud),i=i%Ud,i<0&&(i+=Ud),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Ud,a=r-r%M1,u=0;u<4&&a>i;++u,a-=M1)o(a);else for(a=r-r%M1+M1,u=0;u<4&&a<i;++u,a=a+M1)o(a)}}};function Whe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Ghe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>a5t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Yhe(u,e,t,n,r)),0<l&&l<1&&i(Yhe(l,e,t,n,r))}function Yhe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var A0=(A0=T0(1,1))?A0.getContext("2d"):null;const LV=new bs;function gee(e){return function(t,n){if(!A0)return!0;e(A0,t),LV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=LV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(A0.isPointInPath(u,a))return!0;return!1}}function yee(e,t){return t.contains(e.x||0,e.y||0)}function W3e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(LV.set(n,r,n+i,r+s))}function G3e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ow(t,n,r,i,s)}function ow(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function XE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Zc(e,t){return e??t}function Khe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function K5t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Zc(t.x1,.5)*r,n.y1+Zc(t.y1,.5)*i,Math.max(r,i)*Zc(t.r1,0),n.x1+Zc(t.x2,.5)*r,n.y1+Zc(t.y2,.5)*i,Math.max(r,i)*Zc(t.r2,.5));else{const o=Zc(t.x1,0),a=Zc(t.y1,0),u=Zc(t.x2,1),l=Zc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=T0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Khe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Khe(s,t.stops)}function Y3e(e,t,n){return dee(n)?K5t(e,n,t.bounds):n}function N$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Y3e(e,t,t.fill),!0):!1}var X5t=[];function QE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Y3e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||X5t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Q5t(e,t){return e.zindex-t.zindex||e.index-t.index}function vee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Q5t)}function qf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=vee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function P$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=vee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function bee(e){return function(t,n,r){qf(n,i=>{(!r||r.intersects(i.bounds))&&K3e(e,t,i,i)})}}function J5t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&K3e(e,t,n.items[0],n.items)}}function K3e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(XE(t,n),n.fill&&N$(t,n,i)&&t.fill(),n.stroke&&QE(t,n,i)&&t.stroke()))}function GF(e){return e=e||Ac,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,P$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function Hk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function _ee(e){return GF(Hk(e))}function yv(e,t){return"translate("+e+","+t+")"}function wee(e){return"rotate("+e+")"}function Z5t(e,t){return"scale("+e+","+t+")"}function X3e(e){return yv(e.x||0,e.y||0)}function e8t(e){return yv(e.x||0,e.y||0)+(e.angle?" "+wee(e.angle):"")}function t8t(e){return yv(e.x||0,e.y||0)+(e.angle?" "+wee(e.angle):"")+(e.scaleX||e.scaleY?" "+Z5t(e.scaleX||1,e.scaleY||1):"")}function Eee(e,t,n){function r(o,a){o("transform",e8t(a)),o("d",t(null,a))}function i(o,a){return t(Vk(o,a.angle),a),eg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=ry),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:bee(s),pick:_ee(s),isect:n||gee(s)}}var n8t=Eee("arc",B5t);function r8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function i8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function s8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function xee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Vk(u),c),eg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=Hk(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:J5t(s),pick:a,isect:yee,tip:n}}var o8t=xee("area",U5t,r8t);function a8t(e,t){var n=t.clip;e.save(),vn(n)?(e.beginPath(),n(e),e.clip()):Q3e(e,t.group)}function Q3e(e,t){e.beginPath(),pee(t)?ES(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function J3e(e){const t=Zc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function u8t(e,t){e("transform",X3e(t))}function Z3e(e,t){const n=J3e(t);e("d",ES(null,t,n,n))}function l8t(e,t){e("class","background"),e("aria-hidden",!0),Z3e(e,t)}function c8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Z3e(e,t):e("d","")}function f8t(e,t,n){const r=t.clip?mee(n,t,t):null;e("clip-path",r)}function d8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),eg(e,t),e.translate(t.x||0,t.y||0)}function Z2(e,t,n,r){const i=J3e(t);e.beginPath(),ES(e,t,(n||0)+i,(r||0)+i)}const h8t=Hk(Z2),p8t=Hk(Z2,!1),m8t=Hk(Z2,!0);function g8t(e,t,n,r){qf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(Z2(e,i,s,o),XE(e,i),i.fill&&N$(e,i,u)&&e.fill(),i.stroke&&!a&&QE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&Q3e(e,i),n&&n.translate(-s,-o),qf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(Z2(e,i,s,o),XE(e,i),QE(e,i,u)&&e.stroke())})}function y8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return P$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&pee(u)&&!m8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&p8t(e,u,o,a)?(e.restore(),u):(l=P$(u,v=>v8t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&h8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function v8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var b8t={type:"group",tag:"g",nested:!1,attr:u8t,bound:d8t,draw:g8t,pick:y8t,isect:W3e,content:f8t,background:l8t,foreground:c8t},eI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function See(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Tee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Aee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function YF(e,t){return e==="center"?t/2:e==="right"?t:0}function KF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function _8t(e,t,n){const r=See(t,n),i=Tee(t,r),s=Aee(t,r),o=(t.x||0)-YF(t.align,i),a=(t.y||0)-KF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,eI["xmlns:xlink"],"xlink:href"),e("transform",yv(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function w8t(e,t){const n=t.image,r=Tee(t,n),i=Aee(t,n),s=(t.x||0)-YF(t.align,r),o=(t.y||0)-KF(t.baseline,i);return e.set(s,o,s+r,o+i)}function E8t(e,t,n){qf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=See(r,this);let s=Tee(r,i),o=Aee(r,i);if(s===0||o===0)return;let a=(r.x||0)-YF(r.align,s),u=(r.y||0)-KF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(XE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var x8t={type:"image",tag:"image",nested:!1,attr:_8t,bound:w8t,draw:E8t,pick:GF(),isect:Ac,get:See,xOffset:YF,yOffset:KF},S8t=xee("line",z5t,i8t);function T8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",t8t(t)),e("d",t.path)}function wD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*ry,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=KE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),J2(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):J2(e,u,r,i,s,o)}function A8t(e,t){return wD(Vk(e,t.angle),t)?e.set(0,0,0,0):eg(e,t,!0)}var C8t={type:"path",tag:"path",nested:!1,attr:T8t,bound:A8t,draw:bee(wD),pick:_ee(wD),isect:gee(wD)};function I8t(e,t){e("d",ES(null,t))}function k8t(e,t){var n,r;return eg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Xhe(e,t){e.beginPath(),ES(e,t)}var R8t={type:"rect",tag:"path",nested:!1,attr:I8t,bound:k8t,draw:bee(Xhe),pick:_ee(Xhe),isect:W3e};function N8t(e,t){e("transform",X3e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function P8t(e,t){var n,r;return eg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function e$e(e,t,n){var r,i,s,o;return t.stroke&&QE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function D8t(e,t,n){qf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&e$e(e,r,i)&&(XE(e,r),e.stroke())}})}function O8t(e,t,n,r){return e.isPointInStroke?e$e(e,t,1)&&e.isPointInStroke(n,r):!1}var $8t={type:"rule",tag:"line",nested:!1,attr:N8t,bound:P8t,draw:D8t,pick:GF(O8t),isect:G3e},M8t=Eee("shape",V5t),L8t=Eee("symbol",H5t,yee);const Qhe=FDe();var Sl={height:Gh,measureWidth:Cee,estimateWidth:D$,width:D$,canvas:t$e};t$e(!0);function t$e(e){Sl.width=e&&A0?Cee:D$}function D$(e,t){return n$e(sy(e,t),Gh(e))}function n$e(e,t){return~~(.8*e.length*t)}function Cee(e,t){return Gh(e)<=0||!(t=sy(e,t))?0:r$e(t,XF(e))}function r$e(e,t){const n=`(${t}) ${e}`;let r=Qhe.get(n);return r===void 0&&(A0.font=t,r=A0.measureText(e).width,Qhe.set(n,r)),r}function Gh(e){return e.fontSize!=null?+e.fontSize||0:11}function iy(e){return e.lineHeight!=null?e.lineHeight:Gh(e)+2}function F8t(e){return Fe(e)?e.length>1?e:e[0]:e}function qk(e){return F8t(e.lineBreak&&e.text&&!Fe(e.text)?e.text.split(e.lineBreak):e.text)}function Iee(e){const t=qk(e);return(Fe(t)?t.length-1:0)*iy(e)}function sy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?B8t(e,n):n}function j8t(e){if(Sl.width===Cee){const t=XF(e);return n=>r$e(n,t)}else if(Sl.width===D$){const t=Gh(e);return n=>n$e(n,t)}else return t=>Sl.width(e,t)}function B8t(e,t){var n=+e.limit,r=j8t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function Wk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function XF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Gh(e)+"px "+Wk(e,t)}function kee(e){var t=e.baseline,n=Gh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*iy(e):t==="line-bottom"?.29*n-.5*iy(e):0)}const U8t={left:"start",center:"middle",right:"end"},bC=new bs;function QF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-M1,t+=r*Math.cos(i),n+=r*Math.sin(i)),bC.x1=t,bC.y1=n,bC}function z8t(e,t){var n=t.dx||0,r=(t.dy||0)+kee(t),i=QF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",U8t[t.align]||"start"),a?(u=yv(s,o)+" "+wee(a),(n||r)&&(u+=" "+yv(n,r))):u=yv(s+n,o+r),e("transform",u)}function Ree(e,t,n){var r=Sl.height(t),i=t.align,s=QF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+kee(t)-Math.round(.8*r),c=qk(t),f;if(Fe(c)?(r+=iy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Sl.width(t,h)),0)):f=Sl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*ry,o,a);else if(n===2)return e.rotatedPoints(t.angle*ry,o,a);return e}function V8t(e,t,n){qf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=XF(r),e.textAlign=r.align||"left",s=QF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*ry),o=a=0),o+=r.dx||0,a+=(r.dy||0)+kee(r),c=qk(r),XE(e,r),Fe(c))for(l=iy(r),u=0;u<c.length;++u)f=sy(r,c[u]),r.fill&&N$(e,r,i)&&e.fillText(f,o,a),r.stroke&&QE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=sy(r,c),r.fill&&N$(e,r,i)&&e.fillText(f,o,a),r.stroke&&QE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function H8t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=QF(t),a=o.x1,u=o.y1,l=Ree(bC,t,1),c=-t.angle*ry,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function q8t(e,t){const n=Ree(bC,e,2);return ow(t,n[0],n[1],n[2],n[3])||ow(t,n[0],n[1],n[4],n[5])||ow(t,n[4],n[5],n[6],n[7])||ow(t,n[2],n[3],n[6],n[7])}var W8t={type:"text",tag:"text",nested:!1,attr:z8t,bound:Ree,draw:V8t,pick:GF(H8t),isect:q8t},G8t=xee("trail",q5t,s8t),Fl={arc:n8t,area:o8t,group:b8t,image:x8t,line:S8t,path:C8t,rect:R8t,rule:$8t,shape:M8t,symbol:L8t,text:W8t,trail:G8t};function FV(e,t,n){var r=Fl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new bs),e,n)}var Jhe={mark:null};function i$e(e,t,n){var r=Fl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Jhe.mark=e,l=Jhe),c=FV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new bs,o)for(a=0,u=s.length;a<u;++a)t.union(FV(s[a],i,n));return e.bounds=t}const Y8t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function s$e(e,t){return JSON.stringify(e,Y8t,t)}function o$e(e){const t=typeof e=="string"?JSON.parse(e):e;return a$e(t)}function a$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&a$e(n[i]);return t&&i$e(e),e}class u$e{constructor(t){arguments.length?this.root=o$e(t):(this.root=Zhe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new qF(this.root)])}toJSON(t){return s$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Zhe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Zhe(e,t){const n={bounds:new bs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Xg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Nee(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function As(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Xg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function uc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function l$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function JF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function K8t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Fl[i.marktype]).tip){for(o=JF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Pee=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||CF(),this._tooltip=n||X8t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Xg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=K8t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function X8t(e,t,n,r){e.element().setAttribute("title",r||"")}class Gk{constructor(t){this._el=null,this._bgcolor=null,this._loader=new q3e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Q8t="keydown",J8t="keypress",Z8t="keyup",c$e="dragenter",ED="dragleave",f$e="dragover",jV="pointerdown",ejt="pointerup",O$="pointermove",xD="pointerout",d$e="pointerover",BV="mousedown",tjt="mouseup",h$e="mousemove",$$="mouseout",p$e="mouseover",M$="click",njt="dblclick",rjt="wheel",m$e="mousewheel",L$="touchstart",F$="touchmove",j$="touchend",ijt=[Q8t,J8t,Z8t,c$e,ED,f$e,jV,ejt,O$,xD,d$e,BV,tjt,h$e,$$,p$e,M$,njt,rjt,m$e,L$,F$,j$],UV=O$,_C=$$,zV=M$;class Yk extends Pee{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=ijt,this.pointermove=tpe([O$,h$e],[d$e,p$e],[xD,$$]),this.dragover=tpe([f$e],[c$e],[ED]),this.pointerout=npe([xD,$$]),this.dragleave=npe([ED])}initialize(t,n,r){return this._canvas=t&&Nee(t,"canvas"),[M$,BV,jV,O$,xD,ED].forEach(i=>epe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(m$e,t)}pointerdown(t){this._down=this._active,this.fire(jV,t)}mousedown(t){this._down=this._active,this.fire(BV,t)}click(t){this._down===this._active&&(this.fire(M$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(L$,t,!0)}touchmove(t){this.fire(F$,t,!0)}touchend(t){this.fire(j$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===zV&&i&&i.href?this.handleHref(n,i,i.href):(t===UV||t===_C)&&this.handleTooltip(n,i,t!==_C),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(epe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=JF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Fl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const sjt=e=>e===L$||e===F$||e===j$?[L$,F$,j$]:[e];function epe(e,t){sjt(t).forEach(n=>ojt(e,n))}function ojt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function EA(e,t,n){t.forEach(r=>e.fire(r,n))}function tpe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?EA(this,e,r):((!i||!i.exit)&&EA(this,n,r),this._active=s,EA(this,t,r),EA(this,e,r))}}function npe(e){return function(t){EA(this,e,t),this._active=null}}function ajt(){return typeof window<"u"&&window.devicePixelRatio||1}function ujt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?ajt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class B$ extends Gk{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new bs,this._tempb=new bs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:T0(1,1,this._options.type),t&&this._canvas&&(uc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)ujt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=ljt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):cjt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Fl[n.marktype];n.clip&&a8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const ljt=(e,t,n)=>new bs().set(0,0,t,n).translate(-e[0],-e[1]);function cjt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class g$e extends Pee{constructor(t,n){super(t,n);const r=this;r._hrefHandler=mB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=mB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==_C)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(zV,this._hrefHandler),i.removeEventListener(UV,this._tooltipHandler),i.removeEventListener(_C,this._tooltipHandler)),this._svg=i=t&&Nee(t,"svg"),i&&(i.addEventListener(zV,this._hrefHandler),i.addEventListener(UV,this._tooltipHandler),i.addEventListener(_C,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:mB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const mB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},y$e="aria-hidden",Dee="aria-label",Oee="role",$ee="aria-roledescription",v$e="graphics-object",Mee="graphics-symbol",b$e=(e,t,n)=>({[Oee]:e,[$ee]:t,[Dee]:n||void 0}),fjt=Vf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),rpe={axis:{desc:"axis",caption:pjt},legend:{desc:"legend",caption:mjt},"title-text":{desc:"title",caption:e=>`Title text '${spe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${spe(e)}'`}},ipe={ariaRole:Oee,ariaRoleDescription:$ee,description:Dee};function _$e(e,t){const n=t.aria===!1;if(e(y$e,n||void 0),n||t.description==null)for(const r in ipe)e(ipe[r],void 0);else{const r=t.mark.marktype;e(Dee,t.description),e(Oee,t.ariaRole||(r==="group"?v$e:Mee)),e($ee,t.ariaRoleDescription||`${r} mark`)}}function w$e(e){return e.aria===!1?{[y$e]:!0}:fjt[e.role]?null:rpe[e.role]?hjt(e,rpe[e.role]):djt(e)}function djt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return b$e(n?v$e:Mee,`${t} mark container`,e.description)}function hjt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return b$e(t.role||Mee,t.desc,n.description||r(n))}catch{return null}}function spe(e){return ht(e.text).join(" ")}function pjt(e){const t=e.datum,n=e.orient,r=t.title?E$e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${YE(a)?"discrete":a} scale with ${$3e(o,s,e)}`}function mjt(e){const t=e.datum,n=t.title?E$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return yjt(r)+(n?` titled '${n}'`:"")+` for ${gjt(s)} with ${$3e(u,a,e)}`}function E$e(e){try{return ht(Qn(e.items).items[0].text).join(" ")}catch{return null}}function gjt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function yjt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const x$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),vjt=e=>x$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Lee(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${vjt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=x$e(u),a),toString:()=>e};return a}const S$e=e=>T$e(Lee(),e)+"";function T$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):T$e(e,r)}return e.close()}const U$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},z$={blend:"mix-blend-mode"},A$e={fill:"none","stroke-miterlimit":10},TT=0,ope="http://www.w3.org/2000/xmlns/",Ss=eI.xmlns;class Fee extends Gk{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=As(t,0,"svg",Ss),this._svg.setAttributeNS(ope,"xmlns",Ss),this._svg.setAttributeNS(ope,"xmlns:xlink",eI["xmlns:xlink"]),this._svg.setAttribute("version",eI.version),this._svg.setAttribute("class","marks"),uc(t,1),this._root=As(this._svg,TT,"g",Ss),Qg(this._root,A$e),uc(this._svg,TT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Qg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=As(t,TT,"rect",Ss),Qg(r,{width:this._width,height:this._height,fill:n}));const i=S$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),uc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Fl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ape(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ape(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Fl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=upe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return uc(c,0),n._svg;c.setAttribute("class",l$e(n));const f=w$e(n);for(const m in f)Na(c,m,f[m]);l||Na(c,"pointer-events",u),Na(c,"clip-path",n.clip?mee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=upe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&wjt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):qf(n,p),uc(c,h),c}_update(t,n,r){Hp=n,ta=n.__values__,_$e(wC,r),t.attr(wC,r,this);const i=xjt[t.type];i&&i.call(this,t,n,r),Hp&&this.style(Hp,r)}style(t,n){if(n!=null){for(const r in U$){let i=r==="font"?Wk(n):n[r];if(i===ta[r])continue;const s=U$[r];i==null?t.removeAttribute(s):(dee(i)&&(i=L3e(i,this._defs.gradient,C$e())),t.setAttribute(s,i+"")),ta[r]=i}for(const r in z$)SD(t,z$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=As(t,TT+1,"defs",Ss)),i=bjt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=As(t,TT+1,"defs",Ss)),i=_jt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):uc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ape(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function bjt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=As(e,n++,"pattern",Ss);Qg(o,{id:R$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=As(o,0,"rect",Ss),Qg(o,{width:1,height:1,fill:`url(${C$e()}#${t.id})`}),e=As(e,n++,"radialGradient",Ss),Qg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=As(e,n++,"linearGradient",Ss),Qg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=As(e,r,"stop",Ss),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return uc(e,r),n}function _jt(e,t,n){let r;return e=As(e,n,"clipPath",Ss),e.setAttribute("id",t.id),t.path?(r=As(e,0,"path",Ss),r.setAttribute("d",t.path)):(r=As(e,0,"rect",Ss),Qg(r,{x:0,y:0,width:t.width,height:t.height})),uc(e,1),n+1}function wjt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;qf(n,o=>{i=e.mark(t,o,i,r),++s}),uc(t,1+s)}function upe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Xg(o,r,Ss),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Xg(o,"path",Ss);s.appendChild(a),a.__data__=e;const u=Xg(o,"g",Ss);s.appendChild(u),u.__data__=e;const l=Xg(o,"path",Ss);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Ejt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Ejt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Hp=null,ta=null;const xjt={group(e,t,n){const r=Hp=t.childNodes[2];ta=r.__values__,e.foreground(wC,n,this),ta=t.__values__,Hp=t.childNodes[1],e.content(wC,n,this);const i=Hp=t.childNodes[0];e.background(wC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ta.events&&(Na(r,"pointer-events",s),Na(i,"pointer-events",s),ta.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Na(r,"display",null),this.style(i,n),Na(i,"stroke",null),o&&(n.fill=null),ta=r.__values__,this.style(r,n),o&&(n.fill=o),Hp=null}else Na(r,"display","none")},image(e,t,n){n.smooth===!1?(SD(t,"image-rendering","optimizeSpeed"),SD(t,"image-rendering","pixelated")):SD(t,"image-rendering",null)},text(e,t,n){const r=qk(n);let i,s,o,a;Fe(r)?(s=r.map(u=>sy(n,u)),i=s.join(`
`),i!==ta.text&&(uc(t,0),o=t.ownerDocument,a=iy(n),s.forEach((u,l)=>{const c=Xg(o,"tspan",Ss);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ta.text=i)):(s=sy(n,r),s!==ta.text&&(t.textContent=s,ta.text=s)),Na(t,"font-family",Wk(n)),Na(t,"font-size",Gh(n)+"px"),Na(t,"font-style",n.fontStyle),Na(t,"font-variant",n.fontVariant),Na(t,"font-weight",n.fontWeight)}};function wC(e,t,n){t!==ta[e]&&(n?Sjt(Hp,e,t,n):Na(Hp,e,t),ta[e]=t)}function SD(e,t,n){n!==ta[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ta[t]=n)}function Qg(e,t){for(const n in t)Na(e,n,t[n])}function Na(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Sjt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function C$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class I$e extends Gk{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Lee();n.open("svg",gn({},eI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",A$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Fl[n.marktype],i=r.tag,s=[_$e,r.attr];t.open("g",{class:l$e(n),"clip-path":n.clip?mee(this,n,n.group):null},w$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=qk(a);if(Fe(l)){const c={x:0,dy:iy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(sy(a,l[f])).close()}else t.text(sy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),qf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):qf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&Tjt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:R$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function Tjt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Wk(t),e["font-size"]=Gh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in U$){let a=t[o];const u=U$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(dee(a)&&(a=L3e(a,i.gradient,"")),e[u]=a)}for(const o in z$){const a=t[o];a!=null&&(s=s||[],s.push(`${z$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const af={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Ajt(e){af.svgMarkTypes=e.svgMarkTypes??["text"],af.svgOnTop=e.svgOnTop??!0,af.debug=e.debug??!1}class VV extends Gk{constructor(t){super(t),this._svgRenderer=new Fee(t),this._canvasRenderer=new B$(t)}initialize(t,n,r,i,s){this._root_el=As(t,0,"div");const o=As(this._root_el,0,"div"),a=As(this._root_el,1,"div");return this._root_el.style.position="relative",af.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=af.svgOnTop?a:o,this._canvasEl=af.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return af.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!af.svgMarkTypes.includes(s));this._svgRenderer.render(t,af.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return af.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class k$e extends Yk{constructor(t,n){super(t,n)}initialize(t,n,r){const i=As(As(t,0,"div"),af.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const R$e="canvas",N$e="hybrid",P$e="png",D$e="svg",O$e="none",Jg={Canvas:R$e,PNG:P$e,SVG:D$e,Hybrid:N$e,None:O$e},Zv={};Zv[R$e]=Zv[P$e]={renderer:B$,headless:B$,handler:Yk};Zv[D$e]={renderer:Fee,headless:I$e,handler:g$e};Zv[N$e]={renderer:VV,headless:VV,handler:k$e};Zv[O$e]={};function ZF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Zv[e]=t,this):Zv[e]}function $$e(e,t,n){const r=[],i=new bs().union(t),s=e.marktype;return s?M$e(e,i,n,r):s==="group"?L$e(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function M$e(e,t,n,r){if(Cjt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)L$e(i[a],t,n,r);else for(const u=Fl[s].isect;a<o;++a){const l=i[a];F$e(l,t,u)&&r.push(l)}}return r}function Cjt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function L$e(e,t,n,r){n&&n(e.mark)&&F$e(e,t,Fl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)M$e(i[u],t,n,r);t.translate(o,a)}return r}function F$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const gB=new bs;function j$e(e){const t=e.clip;if(vn(t))t(Vk(gB.clear()));else if(t)gB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(gB)}const Ijt=1e-9;function jee(e,t,n){return e===t?!0:n==="path"?B$e(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=Ijt:!e||!t||!mt(e)&&!mt(t)?e==t:kjt(e,t)}function B$e(e,t){return jee(KE(e),KE(t))}function kjt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!jee(e[i],t[i],i))return!1;return typeof e==typeof t}function Rjt(){H3e(),e5t()}const JE="top",vf="left",Ef="right",oy="bottom",Njt="top-left",Pjt="top-right",Djt="bottom-left",Ojt="bottom-right",Bee="start",HV="middle",Oa="end",$jt="x",Mjt="y",e4="group",Uee="axis",zee="title",Ljt="frame",Fjt="scope",Vee="legend",U$e="row-header",z$e="row-footer",V$e="row-title",H$e="column-header",q$e="column-footer",W$e="column-title",jjt="padding",Bjt="symbol",G$e="fit",Y$e="fit-x",K$e="fit-y",Ujt="pad",Hee="none",YN="all",qV="each",qee="flush",Zg="column",e0="row";function X$e(e){Pe.call(this,null,e)}lt(X$e,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Fl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=KN(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===e4||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(KN(l,o))),r.role){case Uee:case Vee:case zee:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(KN(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(KN(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return j$e(r),t.modifies("bounds")}});function KN(e,t,n){return t(e.bounds.clear(),e,n)}const lpe=":vega_identifier:";function Wee(e){Pe.call(this,0,e)}Wee.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Wee,Pe,{transform(e,t){const n=zjt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function zjt(e){return e._signals[lpe]||(e._signals[lpe]=e.add(0))}function Q$e(e){Pe.call(this,null,e)}lt(Q$e,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Vjt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===e4?qF:HF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Vjt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function J$e(e){Pe.call(this,null,e)}const cpe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!Z$e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},Z$e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),fpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(Z$e(i,s=e[n].bounds,t))return!0},Hjt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},qjt=(e,t,n)=>{var r=e.range(),i=new bs;return t===JE||t===oy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},dpe=e=>(e.forEach(t=>t.opacity=1),e),hpe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(J$e,Pe,{transform(e,t){const n=cpe[e.method]||cpe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(dpe(i),t=hpe(t,e)),t;if(i=i.filter(Hjt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=dpe(i),t=hpe(t,e),s.length>=3&&fpe(s,r)){do s=n(s,r);while(s.length>=3&&fpe(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=qjt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function eMe(e){Pe.call(this,null,e)}lt(eMe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Zo=new bs;function aw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Wjt(e){var t=e.items[0].orient;return t===vf||t===Ef}function Gjt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Yjt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=Gjt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Iee(p),v=0,b=0,w,E;switch(Zo.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case JE:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&XN(e,p,E,m,y,0,-1,g);break;case vf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&XN(e,p,E,m,y,1,-1,g);break;case Ef:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&XN(e,p,E,m,y,1,1,g);break;case oy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&XN(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return eg(g.translate(v,b),i),aw(i,"x",v+o)|aw(i,"y",b+o)&&(i.bounds=Zo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function XN(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const ppe=(e,t)=>Math.floor(Math.min(e,t)),mpe=(e,t)=>Math.ceil(Math.max(e,t));function Kjt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===e4)switch(i.role){case Uee:case Vee:case zee:break;case U$e:o.rowheaders.push(...s);break;case z$e:o.rowfooters.push(...s);break;case H$e:o.colheaders.push(...s);break;case q$e:o.colfooters.push(...s);break;case V$e:o.rowtitle=s[0];break;case W$e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function Xjt(e){return new bs().set(0,0,e.width||0,e.height||0)}function Qjt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function yi(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function gpe(e){return e<0?Math.ceil(-e):0}function tMe(e,t,n){var r=!n.nodirty,i=n.bounds===qee?Xjt:Qjt,s=Zo.set(0,0,0,0),o=yi(n.align,Zg),a=yi(n.align,e0),u=yi(n.padding,Zg),l=yi(n.padding,e0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),S,T,A,C,I,R,M,P,O,F,L;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],I=E[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,w[T]=0,A=T%c,C=~~(T/c),m=Math.max(m,M=Math.ceil(I.x2)),v=Math.max(v,P=Math.ceil(I.y2)),p[A]=Math.max(p[A],M),y[C]=Math.max(y[C],P),h[T]=u+gpe(I.x1),g[T]=l+gpe(I.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===qV)for(A=1;A<c;++A){for(L=0,T=A;T<d;T+=c)L<h[T]&&(L=h[T]);for(T=A;T<d;T+=c)h[T]=L+p[A-1]}else if(o===YN){for(L=0,T=0;T<d;++T)T%c&&L<h[T]&&(L=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=L+m)}else for(o=!1,A=1;A<c;++A)for(T=A;T<d;T+=c)h[T]+=p[A-1];if(a===qV)for(C=1;C<f;++C){for(L=0,T=C*c,S=T+c;T<S;++T)L<g[T]&&(L=g[T]);for(T=C*c;T<S;++T)g[T]=L+y[C-1]}else if(a===YN){for(L=0,T=c;T<d;++T)L<g[T]&&(L=g[T]);for(T=c;T<d;++T)g[T]=L+v}else for(a=!1,C=1;C<f;++C)for(T=C*c,S=T+c;T<S;++T)g[T]+=y[C-1];for(O=0,T=0;T<d;++T)O=h[T]+(T%c?O:0),b[T]+=O-t[T].x;for(A=0;A<c;++A)for(F=0,T=A;T<d;T+=c)F+=g[T],w[T]+=F-t[T].y;if(o&&yi(n.center,Zg)&&f>1)for(T=0;T<d;++T)I=o===YN?m:p[T%c],O=I-E[T].x2-t[T].x-b[T],O>0&&(b[T]+=O/2);if(a&&yi(n.center,e0)&&c!==1)for(T=0;T<d;++T)I=a===YN?v:y[~~(T/c)],F=I-E[T].y2-t[T].y-w[T],F>0&&(w[T]+=F/2);for(T=0;T<d;++T)s.union(E[T].translate(b[T],w[T]));switch(O=yi(n.anchor,$jt),F=yi(n.anchor,Mjt),yi(n.anchor,Zg)){case Oa:O-=s.width();break;case HV:O-=s.width()/2}switch(yi(n.anchor,e0)){case Oa:F-=s.height();break;case HV:F-=s.height()/2}for(O=Math.round(O),F=Math.round(F),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=O,R.y+=w[T]+=F,s.union(R.mark.bounds.union(R.bounds.translate(b[T],w[T]))),r&&e.dirty(R);return s}function Jjt(e,t,n){var r=Kjt(t),i=r.marks,s=n.bounds===qee?Zjt:eBt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=tMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=yi(n.headerBand,e0,null),c=QN(e,r.rowheaders,i,a,u,-yi(o,"rowHeader"),ppe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=yi(n.headerBand,Zg,null),f=QN(e,r.colheaders,i,a,a,-yi(o,"columnHeader"),ppe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=yi(n.footerBand,e0,null),d=QN(e,r.rowfooters,i,a,u,yi(o,"rowFooter"),mpe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=yi(n.footerBand,Zg,null),h=QN(e,r.colfooters,i,a,a,yi(o,"columnFooter"),mpe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=yi(n.titleAnchor,e0),g=yi(o,"rowTitle"),g=p===Oa?d+g:c-g,m=yi(n.titleBand,e0,.5),ype(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=yi(n.titleAnchor,Zg),g=yi(o,"columnTitle"),g=p===Oa?h+g:f-g,m=yi(n.titleBand,Zg,.5),ype(e,r.coltitle,g,1,y,m))}function Zjt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function eBt(e,t){return e.bounds[t]}function QN(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,S,T,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(A=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),C=m):(A=m,C=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(A-(S.x||0),C-(S.y||0))),S.x=A,S.y=C,e.dirty(S),g=o(g,E[l])}return g}function ype(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function tBt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function nBt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function rBt(e,t,n,r,i,s,o){const a=tBt(n,t),u=nBt(e,a("offset",0)),l=a("anchor",Bee),c=l===Oa?1:l===HV?.5:0,f={align:qV,bounds:a("bounds",qee),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case vf:f.anchor={x:Math.floor(r.x1)-u,column:Oa,y:c*(o||r.height()+2*r.y1),row:l};break;case Ef:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case JE:f.anchor={y:Math.floor(i.y1)-u,row:Oa,x:c*(s||i.width()+2*i.x1),column:l};break;case oy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Njt:f.anchor={x:u,y:u};break;case Pjt:f.anchor={x:s-u,y:u,column:Oa};break;case Djt:f.anchor={x:u,y:o-u,row:Oa};break;case Ojt:f.anchor={x:s-u,y:o-u,column:Oa,row:Oa};break}return f}function iBt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),oBt(e,n,n.items[0].items[0]),s=sBt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Bjt&&aBt(n.items[0].items[0].items[0].items),i!==Hee&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,eg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function sBt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function oBt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&AT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case vf:i+=Math.ceil(o.bounds.width())+u;break;case Ef:case oy:break;default:s+=o.bounds.height()+u}switch((i||s)&&AT(e,n,i,s),o.orient){case vf:c+=g_(t,n,o,a,1,1);break;case Ef:l+=g_(t,n,o,Oa,0,0)+u,c+=g_(t,n,o,a,1,1);break;case oy:l+=g_(t,n,o,a,0,0),c+=g_(t,n,o,Oa,-1,0,1)+u;break;default:l+=g_(t,n,o,a,0,0)}(l||c)&&AT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(AT(e,n,-l,0),AT(e,o,-l,0))}}function g_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Iee(n);return Math.round(r===Bee?f:r===Oa?d-h:.5*(c-h))}function AT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function aBt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function uBt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===vf||a===Ef?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==e4?a===vf?(p=i.y2,h=i.y1):a===Ef?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===vf&&(p=r,h=0),b=u===Bee?p:u===Oa?h:(p+h)/2,d&&d.text){switch(a){case JE:case oy:v=f.bounds.height()+c;break;case vf:y=f.bounds.width()+c;break;case Ef:y=-f.bounds.width()-c;break}Zo.clear().union(d.bounds),Zo.translate(y-(d.x||0),v-(d.y||0)),aw(d,"x",y)|aw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Zo),d.mark.bounds.clear().union(Zo),e.dirty(d)),Zo.clear().union(d.bounds)}else Zo.clear();switch(Zo.union(f.bounds),a){case JE:m=b,g=i.y1-Zo.height()-l;break;case vf:m=i.x1-Zo.width()-l,g=b;break;case Ef:m=i.x2+Zo.width()+l,g=b;break;case oy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return aw(s,"x",m)|aw(s,"y",g)&&(Zo.translate(m,g),e.dirty(s),s.bounds.clear().union(Zo),t.bounds.clear().union(Zo),e.dirty(s)),s.bounds}function nMe(e){Pe.call(this,null,e)}lt(nMe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Jjt(n,r,e.layout),cBt(n,r,e)}),lBt(e.mark.group)?t.reflow():t}});function lBt(e){return e&&e.mark.role!=="legend-entry"}function cBt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new bs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Uee:h=Wjt(f)?a:u,h.union(Yjt(e,f,i,s));break;case zee:c=f;break;case Vee:l.push(iBt(e,f));break;case Ljt:case Fjt:case U$e:case z$e:case V$e:case H$e:case q$e:case W$e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Ef,d!==Hee&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];tMe(e,v,rBt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===G$e||n.autosize.type===Y$e||n.autosize.type===K$e))switch(y.orient){case vf:case Ef:o.add(v.x1,0).add(v.x2,0);break;case JE:case oy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(uBt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),fBt(e,t,o,n)}function fBt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===jjt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Hee?(l=0,f=0,u=o,c=a):s===G$e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Y$e?(u=Math.max(0,o-l-d),a=c+f+h):s===K$e?(o=u+l+d,c=Math.max(0,a-f-h)):s===Ujt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const dBt=Object.freeze(Object.defineProperty({__proto__:null,bound:X$e,identifier:Wee,mark:Q$e,overlap:J$e,render:eMe,viewlayout:nMe},Symbol.toStringTag,{value:"Module"}));function rMe(e){Pe.call(this,null,e)}lt(rMe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=cee(s,o,e.minstep),u=e.format||R3e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?k3e(s,e.values,a):fee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>wr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(wr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function iMe(e){Pe.call(this,null,e)}function hBt(){return wr({})}function pBt(e){const t=yS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(iMe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||hBt,s=e.key||Mt,o=this.value;return Fe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=pBt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function sMe(e){Pe.call(this,null,e)}lt(sMe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Fe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||_g,u=i.enter||_g,l=i.exit||_g,c=(s&&!o?i[s]:a)||_g;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==_g&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==_g&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==_g){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function oMe(e){Pe.call(this,[],e)}lt(oMe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||gD,o=e.scale,a=+e.limit,u=cee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===gD,c=e.format||O3e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||D3e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===gD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,vn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=ba(m=p||8),i=i.map((y,v)=>wr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(wr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===U4t?(d=o.domain(),h=A3e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=J4t(o),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const mBt=e=>e.source.x,gBt=e=>e.source.y,yBt=e=>e.target.x,vBt=e=>e.target.y;function Gee(e){Pe.call(this,{},e)}Gee.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Gee,Pe,{transform(e,t){var n=e.sourceX||mBt,r=e.sourceY||gBt,i=e.targetX||yBt,s=e.targetY||vBt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=vpe.get(u+"-"+a)||vpe.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const aMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,bBt=(e,t,n,r)=>aMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),uMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},_Bt=(e,t,n,r)=>uMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),lMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},wBt=(e,t,n,r)=>lMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),EBt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,xBt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,SBt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},TBt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},ABt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},CBt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},vpe=yS({line:aMe,"line-radial":bBt,arc:uMe,"arc-radial":_Bt,curve:lMe,"curve-radial":wBt,"orthogonal-horizontal":EBt,"orthogonal-vertical":xBt,"orthogonal-radial":SBt,"diagonal-horizontal":TBt,"diagonal-vertical":ABt,"diagonal-radial":CBt});function Yee(e){Pe.call(this,null,e)}Yee.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Yee,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||pS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/DEe(l),h=Iu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const IBt=5;function kBt(e){const t=e.type;return!e.bins&&(t===WE||t===Mk||t===Lk)}function cMe(e){return aee(e)&&e!==lh}const RBt=Vf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function fMe(e){Pe.call(this,null,e),this.modified(!0)}lt(fMe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=NBt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!RBt[i]){if(i==="padding"&&cMe(r.type))continue;vn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return LBt(r,e,MBt(r,e,DBt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function NBt(e){var t=e.type,n="",r;return t===lh?lh+"-"+WE:(PBt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?lh+"-":r===3?wS+"-":""),(n+t||WE).toLowerCase())}function PBt(e){const t=e.type;return aee(t)&&t!==Qv&&t!==Jv&&(e.scheme||e.range&&e.range.length&&e.range.every(pt))}function DBt(e,t,n){const r=OBt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&kBt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return cMe(s)&&t.padding&&i[0]!==Qn(i)&&(i=$Bt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(dMe(s,i,n)),s===ree&&e.unknown(t.domainImplicit?O7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&cee(e,t.nice)||null),i.length}function OBt(e,t,n){return t?(e.domain(dMe(e.type,t,n)),t.length):-1}function $Bt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===Pm?XJ(t,null,a):e===Lk?A$(t,null,a,.5):e===Mk?A$(t,null,a,i||1):e===jF?QJ(t,null,a,s||1):KJ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function dMe(e,t,n){if(w3e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nt(t))}return t}function MBt(e,t,n){let r=t.bins;if(r&&!Fe(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Iu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===iee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function LBt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=FBt(r,t,n);else if(t.scheme&&(s=jBt(r,t,n),vn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&E3e(r))return e.interpolator(zF(WV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(uee(t.interpolate,t.interpolateGamma)):vn(e.round)?e.round(i):vn(e.rangeRound)&&e.interpolate(i?HI:Gm),s&&e.range(WV(s,t.reverse))}function FBt(e,t,n){e!==m3e&&e!==NV&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===NV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*nee(n,i,r)]}function jBt(e,t,n){var r=t.schemeExtent,i,s;return Fe(t.scheme)?s=zF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=lee(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===UF?n+1:e===iee?n-1:e===GE||e===BF?+t.schemeCount||IBt:n,E3e(e)?bpe(s,r,t.reverse):vn(s)?T3e(bpe(s,r),n):e===ree?s:s.slice(0,n)}function bpe(e,t,n){return vn(e)&&(t||n)?S3e(e,WV(t||[0,1],n)):e}function WV(e,t){return t?e.slice().reverse():e}function hMe(e){Pe.call(this,null,e)}lt(hMe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Db(e.sort)),this.modified(n),t}});const _pe="zero",pMe="center",mMe="normalize",gMe=["y0","y1"];function Kee(e){Pe.call(this,null,e)}Kee.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:_pe,values:[_pe,pMe,mMe]},{name:"as",type:"string",array:!0,length:2,default:gMe}]};lt(Kee,Pe,{transform(e,t){var n=e.as||gMe,r=n[0],i=n[1],s=Db(e.sort),o=e.field||pS,a=e.offset===pMe?BBt:e.offset===mMe?UBt:zBt,u,l,c,f;for(u=VBt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function BBt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function UBt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function zBt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function VBt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const HBt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:rMe,datajoin:iMe,encode:sMe,legendentries:oMe,linkpath:Gee,pie:Yee,scale:fMe,sortitems:hMe,stack:Kee},Symbol.toStringTag,{value:"Module"}));var qBt=Math.abs,GV=Math.cos,V$=Math.sin,WBt=1e-6,yMe=Math.PI,YV=yMe/2,wpe=GBt(2);function Epe(e){return e>1?YV:e<-1?-YV:Math.asin(e)}function GBt(e){return e>0?Math.sqrt(e):0}function YBt(e,t){var n=e*V$(t),r=30,i;do t-=i=(t+V$(t)-n)/(1+GV(t));while(qBt(i)>WBt&&--r>0);return t/2}function KBt(e,t,n){function r(i,s){return[e*i*GV(s=YBt(n,s)),t*V$(s)]}return r.invert=function(i,s){return s=Epe(s/t),[i/(e*GV(s)),Epe((2*s+V$(2*s))/n)]},r}var XBt=KBt(wpe/YV,wpe,yMe);function QBt(){return Uh(XBt).scale(169.529)}const JBt=uSe(),KV=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function ZBt(e,t){return function n(){const r=t();return r.type=e,r.path=uSe().projection(r),r.copy=r.copy||function(){const i=n();return KV.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},b3e(r)}}function Xee(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(H$[e]=ZBt(e,t),this):H$[e]||null}function vMe(e){return e&&e.path||JBt}const H$={albers:cSe,albersusa:xft,azimuthalequalarea:Sft,azimuthalequidistant:Tft,conicconformal:Ift,conicequalarea:l3,conicequidistant:Nft,equalEarth:Dft,equirectangular:kft,gnomonic:Oft,identity:$ft,mercator:Aft,mollweide:QBt,naturalEarth1:Mft,orthographic:Lft,stereographic:Fft,transversemercator:jft};for(const e in H$)Xee(e,H$[e]);function e9t(){}const fp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function bMe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),t9t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(n9t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,fp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,fp[m|g<<1].forEach(b);for(fp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,fp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,fp[m|g<<1|y<<2|v<<3].forEach(b);fp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,fp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,fp[y<<2|v<<3].forEach(b);fp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],T=o(E),A=o(S),C,I;(C=d[T])?(I=f[A])?(delete d[C.end],delete f[I.start],C===I?(C.ring.push(S),c(C.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete d[C.end],C.ring.push(S),d[C.end=A]=C):(C=f[A])?(I=d[T])?(delete f[C.start],delete d[I.end],C===I?(C.ring.push(S),c(C.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=T]=C):f[T]=d[A]={start:T,end:A,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:e9t,r):n===a},r}function t9t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function n9t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=r9t(e,t[n]))return i;return 0}function r9t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(i9t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function i9t(e,t,n){var r;return s9t(e,t,n)&&o9t(e[r=+(e[0]===t[0])],n[r],t[r])}function s9t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function o9t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function _Me(e,t,n){return function(r){var i=Th(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?M0(s,o,e):a/(e+1);return Iu(s+u,o,u)}}function Qee(e){Pe.call(this,null,e)}Qee.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Qee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||va,s=bMe().smooth(e.smooth!==!1),o=e.thresholds||a9t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Fe(o)?o:o(c.values));u9t(f,c,l,e),f.forEach(d=>{u.push(RF(l,wr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function a9t(e,t,n){const r=_Me(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>h0(t(i).values)))}function u9t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(vn(i)&&(i=i(n,r)),vn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(wMe(t,o,a,u,l))}function wMe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function xpe(e,t,n){const r=e>=0?e:gZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function yB(e){return vn(e)?e:ba(+e)}function EMe(){var e=u=>u[0],t=u=>u[1],n=pS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=xpe(r[0],u,e)>>o,f=xpe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f)):c>0?(y_(p,m,g,y,c),y_(p,m,y,g,c),y_(p,m,g,y,c),v=y):f>0&&(v_(p,m,g,y,f),v_(p,m,y,g,f),v_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/DEe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=yB(u),a):e},a.y=function(u){return arguments.length?(t=yB(u),a):t},a.weight=function(u){return arguments.length?(n=yB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ht(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function y_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function v_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Jee(e){Pe.call(this,null,e)}Jee.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const l9t=["x","y","weight","size","cellSize","bandwidth"];function xMe(e,t){return l9t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Jee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=c9t(r,e.groupby),s=(e.groupby||[]).map(Yi),o=xMe(EMe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>wr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function c9t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Zee(e){Pe.call(this,null,e)}Zee.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Zee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=bMe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||_Me(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=xMe(EMe(),e)(i,!0),u=wMe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Fe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(wr),n}});const XV="Feature",ete="FeatureCollection",f9t="MultiPoint";function tte(e){Pe.call(this,null,e)}tte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(tte,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&va,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(fa(a))||s&&t.modified(fa(s))||o&&t.modified(fa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:XV,geometry:{type:f9t,coordinates:r}})),this.value={type:ete,features:n}}});function nte(e){Pe.call(this,null,e)}nte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(nte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||va,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=vMe(e.projection),n.materialize().reflow()):o=i===va||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=d9t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function d9t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function rte(e){Pe.call(this,null,e)}rte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(rte,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function ite(e){Pe.call(this,null,e)}ite.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(ite,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=h9t(vMe(e.projection),e.field||Tc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function h9t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function ste(e){Pe.call(this,[],e),this.generator=nft()}ste.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(ste,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)vn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(xOe(n[0],i)):t.add.push(wr(i)),n[0]=i,t}});function ote(e){Pe.call(this,null,e)}ote.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(ote,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||va,s=m9t(e.opacity,e),o=p9t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?h0(n.map(l=>h0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=gn({},l,u);r||(f.$max=h0(c.values||[])),l[a]=g9t(c,f,o.dep?o:ba(o(f)),s.dep?s:ba(s(f)))}),t.reflow(!0).modifies(a)}});function p9t(e,t){let n;return vn(e)?(n=r=>L0(e(r,t)),n.dep=SMe(e)):n=ba(L0(e||"#888")),n}function m9t(e,t){let n;return vn(e)?(n=r=>e(r,t),n.dep=SMe(e)):e?n=ba(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function SMe(e){if(!vn(e))return!1;const t=Vf(fa(e));return t.$x||t.$y||t.$value||t.$max}function g9t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Ug,d=T0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function TMe(e){Pe.call(this,null,e),this.modified(!0)}lt(TMe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=v9t(e.type),KV.forEach(r=>{e[r]!=null&&Spe(n,r,e[r])})):KV.forEach(r=>{e.modified(r)&&Spe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&y9t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function y9t(e,t){const n=b9t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function v9t(e){const t=Xee((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function Spe(e,t,n){vn(e[t])&&e[t](n)}function b9t(e){return e=ht(e),e.length===1?e[0]:{type:ete,features:e.reduce((t,n)=>t.concat(_9t(n)),[])}}function _9t(e){return e.type===ete?e.features:ht(e).filter(t=>t!=null).map(t=>t.type===XV?t:{type:XV,geometry:t})}const w9t=Object.freeze(Object.defineProperty({__proto__:null,contour:Zee,geojson:tte,geopath:nte,geopoint:rte,geoshape:ite,graticule:ste,heatmap:ote,isocontour:Qee,kde2d:Jee,projection:TMe},Symbol.toStringTag,{value:"Module"})),Tpe={center:Wlt,collide:fct,nbody:Ect,link:hct,x:xct,y:Sct},xA="forces",QV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],E9t=["static","iterations"],AMe=["x","y","vx","vy"];function ate(e){Pe.call(this,null,e)}ate.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:AMe}]};lt(ate,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(QV),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&CMe(n,e,0,t)):(this.value=n=S9t(t.source,e),n.on("tick",x9t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(E9t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==xA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(AMe)}});function x9t(e,t){return()=>e.touch(t).run()}function S9t(e,t){const n=wct(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),CMe(n,t,!0).on("end",()=>s=!0)}function CMe(e,t,n,r){var i=ht(t.forces),s,o,a,u;for(s=0,o=QV.length;s<o;++s)a=QV[s],a!==xA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=xA+s,a=n||t.modified(xA,s)?A9t(i[s]):r&&T9t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(xA+s,null);return e.numForces=i.length,e}function T9t(e,t){var n,r;for(n in e)if(vn(r=e[n])&&t.modified(fa(r)))return 1;return 0}function A9t(e){var t,n;Ft(Tpe,e.force)||Me("Unrecognized force: "+e.force),t=Tpe[e.force]();for(n in e)vn(t[n])&&C9t(t[n],e[n],e);return t}function C9t(e,t,n){e(vn(t)?r=>t(r,n):t)}const I9t=Object.freeze(Object.defineProperty({__proto__:null,force:ate},Symbol.toStringTag,{value:"Module"}));function JV(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function ute(e){Pe.call(this,null,e)}ute.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const k9t=e=>e.values;lt(ute,Pe,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&kF(o.data)&&i.rem.push(o.data)}),this.value=s=qL({values:ht(e.keys).reduce((o,a)=>(o.key(a),o),R9t()).entries(i.source)},k9t),n&&s.each(o=>{o.children&&(o=wr(o.data),i.add.push(o),i.source.push(o))}),JV(s,Mt,Mt)),i.source.root=s,i}});function R9t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function tg(e){Pe.call(this,null,e)}const N9t=(e,t)=>e.parent===t.parent?1:2;lt(tg,Pe,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Db(e.sort,o=>o.data)),P9t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?N9t:pS);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>D9t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function P9t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function D9t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const ZV=["x","y","r","depth","children"];function lte(e){tg.call(this,e)}lte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ZV.length,default:ZV}]};lt(lte,tg,{layout:TSe,params:["radius","size","padding"],fields:ZV});const eH=["x0","y0","x1","y1","depth","children"];function cte(e){tg.call(this,e)}cte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eH.length,default:eH}]};lt(cte,tg,{layout:Sdt,params:["size","round","padding"],fields:eH});function fte(e){Pe.call(this,null,e)}fte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(fte,Pe,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?JV(sle().id(e.key).parentId(e.parentKey)(i.source),e.key,Ac):JV(sle()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Ape={tidy:Odt,cluster:Gft},tH=["x","y","depth","children"];function dte(e){tg.call(this,e)}dte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:tH.length,default:tH}]};lt(dte,tg,{layout(e){const t=e||"tidy";if(Ft(Ape,t))return Ape[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:tH});function hte(e){Pe.call(this,[],e)}hte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(hte,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(wr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const Cpe={binary:Mdt,dice:YI,slice:WL,slicedice:Ldt,squarify:kSe,resquarify:Fdt},nH=["x0","y0","x1","y1","depth","children"];function pte(e){tg.call(this,e)}pte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nH.length,default:nH}]};lt(pte,tg,{layout(){const e=$dt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(Cpe,t)?e.tile(Cpe[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:nH});const O9t=Object.freeze(Object.defineProperty({__proto__:null,nest:ute,pack:lte,partition:cte,stratify:fte,tree:dte,treelinks:hte,treemap:pte},Symbol.toStringTag,{value:"Module"})),vB=4278190080;function $9t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function M9t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=T0(s,o).getContext("2d"),l=T0(s,o).getContext("2d"),c=a&&T0(s,o).getContext("2d");n.forEach(A=>TD(u,A,!1)),TD(l,t,!1),a&&TD(c,t,!0);const f=bB(u,s,o),d=bB(l,s,o),h=a&&bB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&vB,T=d[w]&vB,S=a&&h[w]&vB,(E||S||T)&&(v=e(g),b=e(y),!i&&(E||T)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function bB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function TD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>TD(e,s.items,n))}):Fl[r].draw(e,{items:n?t.map(L9t):t})}function L9t(e){const t=RF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const dp=5,Ra=31,tI=32,Rg=new Uint32Array(tI+1),df=new Uint32Array(tI+1);df[0]=0;Rg[0]=~df[0];for(let e=1;e<=tI;++e)df[e]=df[e-1]<<1|1,Rg[e]=~df[e];function F9t(e,t){const n=new Uint32Array(~~((e*t+tI)/tI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>dp]&1<<(a&Ra)},set:(s,o)=>{const a=o*e+s;r(a>>>dp,1<<(a&Ra))},clear:(s,o)=>{const a=o*e+s;i(a>>>dp,~(1<<(a&Ra)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>dp,h=f>>>dp,d===h){if(n[d]&Rg[c&Ra]&df[(f&Ra)+1])return!0}else{if(n[d]&Rg[c&Ra]||n[h]&df[(f&Ra)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>dp,d=c>>>dp,f===d)r(f,Rg[l&Ra]&df[(c&Ra)+1]);else for(r(f,Rg[l&Ra]),r(d,df[(c&Ra)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>dp,d=c>>>dp,f===d)i(f,df[l&Ra]|Rg[(c&Ra)+1]);else for(i(f,df[l&Ra]),i(d,Rg[(c&Ra)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function j9t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>F9t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function B9t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Sl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function q$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function t0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function U9t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!q$(p,m,d,h,i,s)&&!t0(e,p,m,h,d,g,o,a)&&!t0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,t0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,S,T,A,C,I,R,M,P,O,F,L,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),I=e(v),M=e(b),R=~~((I+M)/2),P=e(w),F=e(E),O=~~((P+F)/2),A=R;A>=I;--A)for(C=O;C>=P;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=R;A<=M;++A)for(C=O;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(L=Math.abs(b-v+E-w),S=(v+b)/2,T=(w+E)/2,L>=y&&!q$(S,T,h,d,i,s)&&!t0(e,S,T,d,h,d,o,null)&&(y=L,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const z9t=[-1,-1,1,1],V9t=[-1,1,-1,1];function H9t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,S,T,A,C,I,R,M,P,O;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,S=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+S)/2)]);p.length;)if([C,I]=p.pop(),!(o.get(C,I)||a.get(C,I)||u.get(C,I))){u.set(C,I);for(let L=0;L<4;++L)T=C+z9t[L],A=I+V9t[L],u.outOfBounds(T,A,T,A)||p.push([T,A]);if(T=e.invert(C),A=e.invert(I),R=m,M=s,!q$(T,A,h,d,i,s)&&!t0(e,T,A,d,h,R,o,a)&&!t0(e,T,A,d,h,d,o,null)){for(;M-R>=1;)P=(R+M)/2,t0(e,T,A,d,h,P,o,a)?M=P:R=P;R>m&&(l.x=T,l.y=A,m=R,g=!0)}}!g&&!n&&(O=Math.abs(w-b+S-E),T=(b+w)/2,A=(E+S)/2,O>=v&&!q$(T,A,h,d,i,s)&&!t0(e,T,A,d,h,d,o,null)&&(v=O,l.x=T,l.y=A,y=!0))}return g||y?(T=h/2,A=d/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const q9t=["right","center","left"],W9t=["bottom","middle","top"];function G9t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,S,T,A,C,I,R;for(let M=0;M<u;++M){if(h=(n[M]&3)-1,p=(n[M]>>>2&3)-1,m=h===0&&p===0||r[M]<0,g=h&&p?Math.SQRT1_2:1,y=r[M]<0?-1:1,v=c[1+h]+r[M]*h*g,T=c[4+p]+y*f*p/2+r[M]*p*g,w=T-f/2,E=T+f/2,A=e(v),I=e(w),R=e(E),!d)if(Ipe(A,A,I,R,o,a,v,v,w,E,c,m))d=Sl.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,A=e(v),C=e(b),Ipe(A,C,I,R,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?E:w:T,l.align=q9t[h*y+1],l.baseline=W9t[p*y+1],o.setRange(A,I,C,R),!0}return!1}}function Ipe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const _B=0,wB=4,EB=8,xB=0,SB=1,TB=2,Y9t={"top-left":_B+xB,top:_B+SB,"top-right":_B+TB,left:wB+xB,middle:wB+SB,right:wB+TB,"bottom-left":EB+xB,bottom:EB+SB,"bottom-right":EB+TB},K9t={naive:B9t,"reduced-search":U9t,floodfill:H9t};function X9t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=Q9t(r,f),h=J9t(i,f),p=Z9t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=eUt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const S=e.map(I=>{const R=v?Sl.width(I,I.text):void 0;return w=Math.max(w,R),E=Math.max(E,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=j9t(t[0],t[1],l);let A;if(!b){n&&S.sort((M,P)=>n(M.datum,P.datum));let I=!1;for(let M=0;M<h.length&&!I;++M)I=h[M]===5||d[M]<0;const R=(p&&o||g)&&e.map(M=>M.datum);A=s.length||R?M9t(T,R||[],s,I,g):$9t(T,o&&S)}const C=g?K9t[c](T,A,o,u):G9t(T,A,h,d);return S.forEach(I=>I.opacity=+C(I)),S}function Q9t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function J9t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Y9t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Z9t(e){return e&&e.mark&&e.mark.marktype}function eUt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const rH=["x","y","opacity","align","baseline"],IMe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function mte(e){Pe.call(this,null,e)}mte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:IMe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:rH.length,default:rH}]};lt(mte,Pe,{transform(e,t){function n(s){const o=e[s];return vn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||rH;return X9t(t.materialize(t.SOURCE).source||[],e.size,e.sort,ht(e.offset==null?1:e.offset),ht(e.anchor||IMe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const tUt=Object.freeze(Object.defineProperty({__proto__:null,label:mte},Symbol.toStringTag,{value:"Module"}));function kMe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function gte(e){Pe.call(this,null,e)}gte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(gte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=s.length,a=e.as||[Yi(e.x),Yi(e.y)],u=[];i.forEach(l=>{UOe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(wr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const iH={constant:IZ,linear:kZ,log:LOe,exp:FOe,pow:jOe,quad:RZ,poly:BOe},nUt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function yte(e){Pe.call(this,null,e)}yte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(iH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(yte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=e.method||"linear",a=e.order==null?3:e.order,u=nUt(o,a),l=e.as||[Yi(e.x),Yi(e.y)],c=iH[o],f=[];let d=e.extent;Ft(iH,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(wr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Th(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(wr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):LF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const rUt=Object.freeze(Object.defineProperty({__proto__:null,loess:gte,regression:yte},Symbol.toStringTag,{value:"Module"}));function vte(e){Pe.call(this,null,e)}vte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const iUt=[-1e5,-1e5,1e5,1e5];lt(vte,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:iUt;const s=this.value=CY.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!oUt(u)?sUt(u):null}return t.reflow(e.modified()).modifies(n)}});function sUt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function oUt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const aUt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:vte},Symbol.toStringTag,{value:"Module"}));var AB=Math.PI/180,SA=64,AD=2048;function uUt(){var e=[256,256],t,n,r,i,s,o,a,u=RMe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(T0()),m=pUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,lUt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?fUt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(SA<<5)/m,p.height=AD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,S=-E,T,A,C;(T=w(S+=E))&&(A=~~T[0],C=~~T[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!cUt(m,p,e[0]))&&(!g||dUt(m,g))){for(var I=m.sprite,R=m.width>>5,M=e[0]>>5,P=m.x-(R<<4),O=P&127,F=32-O,L=m.y1-m.y0,B=(m.y+m.y0)*M+(P>>5),U,H=0;H<L;H++){U=0;for(var D=0;D<=R;D++)p[B+D]|=U<<F|(D<R?(U=I[H*R+D])>>>O:0);B+=M}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=n1(p),f):n},f.fontStyle=function(p){return arguments.length?(i=n1(p),f):i},f.fontWeight=function(p){return arguments.length?(s=n1(p),f):s},f.rotate=function(p){return arguments.length?(o=n1(p),f):o},f.text=function(p){return arguments.length?(t=n1(p),f):t},f.spiral=function(p){return arguments.length?(u=mUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=n1(p),f):r},f.padding=function(p){return arguments.length?(a=n1(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function lUt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(SA<<5)/s,AD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*AB),g=Math.cos(t.rotate*AB),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=SA<<5&&(o=0,a+=u,u=0),a+d>=AD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*AB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(SA<<5)/s,AD/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),I=E[(a+p)*(SA<<5)+(o+h)<<2]?1<<31-h%32:0;S[C]|=I,T|=I}T?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function cUt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function fUt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function dUt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function RMe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function hUt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function pUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function n1(e){return typeof e=="function"?e:function(){return e}}var mUt={archimedean:RMe,rectangular:hUt};const NMe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],gUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function bte(e){Pe.call(this,uUt(),e)}bte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:NMe}]};lt(bte,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return vn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||gUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||NMe;let a=e.fontSize||14,u;if(vn(a)?u=e.fontSizeRange:a=ba(a),u){const p=a,m=gr("sqrt")().domain(Th(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Ic).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const yUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:bte},Symbol.toStringTag,{value:"Module"})),vUt=e=>new Uint8Array(e),bUt=e=>new Uint16Array(e),EC=e=>new Uint32Array(e);function _Ut(){let e=8,t=[],n=EC(0),r=JN(0,e),i=JN(0,e);return{data:()=>t,seen:()=>n=wUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=JN(s,e,r),i=JN(s,e))}}}function wUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function JN(e,t,n){const r=(t<257?vUt:t<65537?bUt:EC)(e);return n&&r.set(n),r}function kpe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Rpe(){let e=EC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=EC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=EUt(h,d),c)p=t,m=e,t=Array(c+f),e=EC(c+f),xUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[fst(u,a[0],0,l),$0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function EUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),pst(e,t)}function xUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function _te(e){Pe.call(this,_Ut(),e),this._indices=null,this._dims=null}_te.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(_te,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Rpe()),s.push(kpe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,S,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=Rpe(),p[y]=m=g.insert(T,t.source,0)),o[E]=kpe(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function wte(e){Pe.call(this,null,e)}wte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(wte,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const SUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:_te,resolvefilter:wte},Symbol.toStringTag,{value:"Module"})),TUt="RawCode",eb="Literal",AUt="Property",CUt="Identifier",IUt="ArrayExpression",kUt="BinaryExpression",PMe="CallExpression",RUt="ConditionalExpression",NUt="LogicalExpression",PUt="MemberExpression",DUt="ObjectExpression",OUt="UnaryExpression";function Zf(e){this.type=e}Zf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=$Ut(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function $Ut(e){switch(e.type){case IUt:return e.elements;case kUt:case NUt:return[e.left,e.right];case PMe:return[e.callee].concat(e.arguments);case RUt:return[e.test,e.consequent,e.alternate];case PUt:return[e.object,e.property];case DUt:return e.properties;case AUt:return[e.key,e.value];case OUt:return[e.argument];case CUt:case eb:case TUt:default:return[]}}var Yh,kt,$e,ha,Pr,t4=1,Kk=2,tb=3,jy=4,n4=5,Mb=6,yu=7,Xk=8,MUt=9;Yh={};Yh[t4]="Boolean";Yh[Kk]="<end>";Yh[tb]="Identifier";Yh[jy]="Keyword";Yh[n4]="Null";Yh[Mb]="Numeric";Yh[yu]="Punctuator";Yh[Xk]="String";Yh[MUt]="RegularExpression";var LUt="ArrayExpression",FUt="BinaryExpression",jUt="CallExpression",BUt="ConditionalExpression",DMe="Identifier",UUt="Literal",zUt="LogicalExpression",VUt="MemberExpression",HUt="ObjectExpression",qUt="Property",WUt="UnaryExpression",no="Unexpected token %0",GUt="Unexpected number",YUt="Unexpected string",KUt="Unexpected identifier",XUt="Unexpected reserved word",QUt="Unexpected end of input",sH="Invalid regular expression",CB="Invalid regular expression: missing /",OMe="Octal literals are not allowed in strict mode.",JUt="Duplicate data property in object literal not allowed in strict mode",Ao="ILLEGAL",nI="Disabled.",ZUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),e7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function r4(e,t){if(!e)throw new Error("ASSERT: "+t)}function Sp(e){return e>=48&&e<=57}function Ete(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function xC(e){return"01234567".indexOf(e)>=0}function t7t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function rI(e){return e===10||e===13||e===8232||e===8233}function Qk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&ZUt.test(String.fromCharCode(e))}function W$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&e7t.test(String.fromCharCode(e))}const n7t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function $Me(){for(;$e<ha;){const e=kt.charCodeAt($e);if(t7t(e)||rI(e))++$e;else break}}function oH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<ha&&Ete(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},no,Ao);return String.fromCharCode(i)}function r7t(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&pr({},no,Ao);$e<ha&&(e=kt[$e++],!!Ete(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},no,Ao),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function MMe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&pr({},no,Ao),++$e,e=oH("u"),(!e||e==="\\"||!Qk(e.charCodeAt(0)))&&pr({},no,Ao),t=e);$e<ha&&(e=kt.charCodeAt($e),!!W$(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&pr({},no,Ao),++$e,e=oH("u"),(!e||e==="\\"||!W$(e.charCodeAt(0)))&&pr({},no,Ao),t+=e);return t}function i7t(){var e,t;for(e=$e++;$e<ha;){if(t=kt.charCodeAt($e),t===92)return $e=e,MMe();if(W$(t))++$e;else break}return kt.slice(e,$e)}function s7t(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?MMe():i7t(),t.length===1?n=tb:n7t.hasOwnProperty(t)?n=jy:t==="null"?n=n4:t==="true"||t==="false"?n=t4:n=tb,{type:n,value:t,start:e,end:$e}}function IB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:yu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:yu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:yu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:yu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:yu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:yu,value:i,start:e,end:$e};if(i==="//"&&pr({},no,Ao),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:yu,value:r,start:e,end:$e};pr({},no,Ao)}function o7t(e){let t="";for(;$e<ha&&Ete(kt[$e]);)t+=kt[$e++];return t.length===0&&pr({},no,Ao),Qk(kt.charCodeAt($e))&&pr({},no,Ao),{type:Mb,value:parseInt("0x"+t,16),start:e,end:$e}}function a7t(e){let t="0"+kt[$e++];for(;$e<ha&&xC(kt[$e]);)t+=kt[$e++];return(Qk(kt.charCodeAt($e))||Sp(kt.charCodeAt($e)))&&pr({},no,Ao),{type:Mb,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Npe(){var e,t,n;if(n=kt[$e],r4(Sp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,o7t(t);if(xC(n))return a7t(t);n&&Sp(n.charCodeAt(0))&&pr({},no,Ao)}for(;Sp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Sp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Sp(kt.charCodeAt($e)))for(;Sp(kt.charCodeAt($e));)e+=kt[$e++];else pr({},no,Ao);return Qk(kt.charCodeAt($e))&&pr({},no,Ao),{type:Mb,value:parseFloat(e),start:t,end:$e}}function u7t(){var e="",t,n,r,i,s=!1;for(t=kt[$e],r4(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<ha;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!rI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=r7t()):e+=oH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:xC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<ha&&xC(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<ha&&xC(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(rI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},no,Ao),{type:Xk,value:e,octal:s,start:n,end:$e}}function l7t(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},sH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},sH)}try{return new RegExp(e,t)}catch{return null}}function c7t(){var e,t,n,r,i;for(e=kt[$e],r4(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<ha;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],rI(e.charCodeAt(0))&&pr({},CB),t+=e;else if(rI(e.charCodeAt(0)))pr({},CB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},CB),i=t.substr(1,t.length-2),{value:i,literal:t}}function f7t(){var e,t,n;for(t="",n="";$e<ha&&(e=kt[$e],!!W$(e.charCodeAt(0)));)++$e,e==="\\"&&$e<ha?pr({},no,Ao):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},sH,n),{value:n,literal:t}}function d7t(){var e,t,n,r;return Pr=null,$Me(),e=$e,t=c7t(),n=f7t(),r=l7t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function h7t(e){return e.type===tb||e.type===jy||e.type===t4||e.type===n4}function LMe(){if($Me(),$e>=ha)return{type:Kk,start:$e,end:$e};const e=kt.charCodeAt($e);return Qk(e)?s7t():e===40||e===41||e===59?IB():e===39||e===34?u7t():e===46?Sp(kt.charCodeAt($e+1))?Npe():IB():Sp(e)?Npe():IB()}function Tu(){const e=Pr;return $e=e.end,Pr=LMe(),$e=e.end,e}function FMe(){const e=$e;Pr=LMe(),$e=e}function p7t(e){const t=new Zf(LUt);return t.elements=e,t}function Ppe(e,t,n){const r=new Zf(e==="||"||e==="&&"?zUt:FUt);return r.operator=e,r.left=t,r.right=n,r}function m7t(e,t){const n=new Zf(jUt);return n.callee=e,n.arguments=t,n}function g7t(e,t,n){const r=new Zf(BUt);return r.test=e,r.consequent=t,r.alternate=n,r}function xte(e){const t=new Zf(DMe);return t.name=e,t}function TA(e){const t=new Zf(UUt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Dpe(e,t,n){const r=new Zf(VUt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function y7t(e){const t=new Zf(HUt);return t.properties=e,t}function Ope(e,t,n){const r=new Zf(qUt);return r.key=t,r.value=n,r.kind=e,r}function v7t(e,t){const n=new Zf(WUt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(r4(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function i4(e){e.type===Kk&&pr(e,QUt),e.type===Mb&&pr(e,GUt),e.type===Xk&&pr(e,YUt),e.type===tb&&pr(e,KUt),e.type===jy&&pr(e,XUt),pr(e,no,e.value)}function pa(e){const t=Tu();(t.type!==yu||t.value!==e)&&i4(t)}function ui(e){return Pr.type===yu&&Pr.value===e}function kB(e){return Pr.type===jy&&Pr.value===e}function b7t(){const e=[];for($e=Pr.start,pa("[");!ui("]");)ui(",")?(Tu(),e.push(null)):(e.push(nb()),ui("]")||pa(","));return Tu(),p7t(e)}function $pe(){$e=Pr.start;const e=Tu();return e.type===Xk||e.type===Mb?(e.octal&&pr(e,OMe),TA(e)):xte(e.value)}function _7t(){var e,t,n,r;if($e=Pr.start,e=Pr,e.type===tb)return n=$pe(),pa(":"),r=nb(),Ope("init",n,r);if(e.type===Kk||e.type===yu)i4(e);else return t=$pe(),pa(":"),r=nb(),Ope("init",t,r)}function w7t(){var e=[],t,n,r,i={},s=String;for($e=Pr.start,pa("{");!ui("}");)t=_7t(),t.key.type===DMe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},JUt):i[r]=!0,e.push(t),ui("}")||pa(",");return pa("}"),y7t(e)}function E7t(){pa("(");const e=Ste();return pa(")"),e}const x7t={if:1};function S7t(){var e,t,n;if(ui("("))return E7t();if(ui("["))return b7t();if(ui("{"))return w7t();if(e=Pr.type,$e=Pr.start,e===tb||x7t[Pr.value])n=xte(Tu().value);else if(e===Xk||e===Mb)Pr.octal&&pr(Pr,OMe),n=TA(Tu());else{if(e===jy)throw new Error(nI);e===t4?(t=Tu(),t.value=t.value==="true",n=TA(t)):e===n4?(t=Tu(),t.value=null,n=TA(t)):ui("/")||ui("/=")?(n=TA(d7t()),FMe()):i4(Tu())}return n}function T7t(){const e=[];if(pa("("),!ui(")"))for(;$e<ha&&(e.push(nb()),!ui(")"));)pa(",");return pa(")"),e}function A7t(){$e=Pr.start;const e=Tu();return h7t(e)||i4(e),xte(e.value)}function C7t(){return pa("."),A7t()}function I7t(){pa("[");const e=Ste();return pa("]"),e}function k7t(){var e,t,n;for(e=S7t();;)if(ui("."))n=C7t(),e=Dpe(".",e,n);else if(ui("("))t=T7t(),e=m7t(e,t);else if(ui("["))n=I7t(),e=Dpe("[",e,n);else break;return e}function Mpe(){const e=k7t();if(Pr.type===yu&&(ui("++")||ui("--")))throw new Error(nI);return e}function CD(){var e,t;if(Pr.type!==yu&&Pr.type!==jy)t=Mpe();else{if(ui("++")||ui("--"))throw new Error(nI);if(ui("+")||ui("-")||ui("~")||ui("!"))e=Tu(),t=CD(),t=v7t(e.value,t);else{if(kB("delete")||kB("void")||kB("typeof"))throw new Error(nI);t=Mpe()}}return t}function Lpe(e){let t=0;if(e.type!==yu&&e.type!==jy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function R7t(){var e,t,n,r,i,s,o,a,u,l;if(e=Pr,u=CD(),r=Pr,i=Lpe(r),i===0)return u;for(r.prec=i,Tu(),t=[e,Pr],o=CD(),s=[u,r,o];(i=Lpe(Pr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Ppe(a,u,o),s.push(n);r=Tu(),r.prec=i,s.push(r),t.push(Pr),n=CD(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Ppe(s[l-1].value,s[l-2],n),l-=2;return n}function nb(){var e,t,n;return e=R7t(),ui("?")&&(Tu(),t=nb(),pa(":"),n=nb(),e=g7t(e,t,n)),e}function Ste(){const e=nb();if(ui(","))throw new Error(nI);return e}function Tte(e){kt=e,$e=0,ha=kt.length,Pr=null,FMe();const t=Ste();if(Pr.type!==Kk)throw new Error("Unexpect token after expression.");return t}var jMe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function BMe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function N7t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function UMe(e){e=e||{};const t=e.allowed?Vf(e.allowed):{},n=e.forbidden?Vf(e.forbidden):{},r=e.constants||jMe,i=(e.functions||BMe)(f),s=e.globalvar,o=e.fieldvar,a=vn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(pt(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Me("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[N7t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Me("Unrecognized function: "+m),vn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Fpe=Symbol("vega_selection_getter");function zMe(e){return(!e.getter||!e.getter[Fpe])&&(e.getter=Tc(e.field),e.getter[Fpe]=!0),e.getter}const Ate="intersect",jpe="union",P7t="vlMulti",D7t="vlPoint",Bpe="or",O7t="and",Cd="_vgsid_",iI=Tc(Cd),$7t="E",M7t="R",L7t="R-E",F7t="R-LE",j7t="R-RE",G$="index:unit";function Upe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=zMe(a)(e),x0(o)&&(o=ua(o)),x0(r[s])&&(r[s]=ua(r[s])),Fe(r[s])&&x0(r[s][0])&&(r[s]=r[s].map(ua)),a.type===$7t){if(Fe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===M7t){if(!sw(o,r[s]))return!1}else if(a.type===j7t){if(!sw(o,r[s],!0,!1))return!1}else if(a.type===L7t){if(!sw(o,r[s],!1,!1))return!1}else if(a.type===F7t&&!sw(o,r[s],!1,!0))return!1;return!0}function B7t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[G$]&&r[G$].value:void 0,o=n===Ate,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Upe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Upe(t,l),o^h)return h;return a&&o}const VMe=Lx(iI),U7t=VMe.left,z7t=VMe.right;function V7t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[G$]&&r[G$].value:void 0,o=n===Ate,a=iI(t),u=U7t(i,a);if(u===i.length||iI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(z7t(i,a)-u<s.size)return!1}return!0}function H7t(e,t){return e.map(n=>gn(t.fields?{values:t.fields.map(r=>zMe(r)(n.datum))}:{[Cd]:iI(n.datum)},t))}function q7t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,S;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=RB[`${y}_union`],m[d]=v(g,ht(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(ht(f).reduce((T,A,C)=>(T[c[C].field]=A,T),{})))}else h=Cd,p=iI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Cd]:p}));if(t=t||jpe,o[Cd]?o[Cd]=RB[`${Cd}_${t}`](...Object.values(o[Cd])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(A=>o[T][A]).reduce((A,C)=>A===void 0?C:RB[`${u[T]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const T=r?D7t:P7t;o[T]=t===jpe?{[Bpe]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[O7t]:s.map(A=>({[Bpe]:a[A]}))}}return o}var RB={[`${Cd}_union`]:xst,[`${Cd}_intersect`]:wst,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ua(t[0]),r=ua(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ua(t[0]),r=ua(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const W7t=":",G7t="@";function Cte(e,t,n,r){t[0].type!==eb&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=G7t+o,u=W7t+i;s===Ate&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function HMe(e){const t=this.context.data[e];return t?t.values.value:[]}function Y7t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function K7t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Ac).insert(t)),1}function X7t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Jk=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Q7t=Jk("format"),qMe=Jk("timeFormat"),J7t=Jk("utcFormat"),Z7t=Jk("timeParse"),ezt=Jk("utcParse"),ZN=new Date(2e3,0,1);function s4(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(ZN.setYear(2e3),ZN.setMonth(e),ZN.setDate(t),qMe.call(this,ZN,n))}function tzt(e){return s4.call(this,e,1,"%B")}function nzt(e){return s4.call(this,e,1,"%b")}function rzt(e){return s4.call(this,0,2+e,"%A")}function izt(e){return s4.call(this,0,2+e,"%a")}const szt=":",ozt="@",aH="%",WMe="$";function Ite(e,t,n,r){t[0].type!==eb&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=szt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function azt(e,t,n,r){t[0].type!==eb&&Me("First argument to indata must be a string literal."),t[1].type!==eb&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=ozt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Wa(e,t,n,r){if(t[0].type===eb)zpe(n,r,t[0].value);else for(e in n.scales)zpe(n,r,e)}function zpe(e,t,n){const r=aH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Kh(e,t){if(vn(e))return e;if(pt(e)){const n=t.scales[e];return n&&D4t(n.value)?n.value:void 0}}function uzt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Wa,n._range=Wa,n._scale=Wa;const r=i=>"_["+(i.type===eb?nt(aH+i.value):nt(aH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function kte(e,t){return function(n,r,i){if(n){const s=Kh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const lzt=kte("area",$ct),czt=kte("bounds",jct),fzt=kte("centroid",qct);function dzt(e,t){const n=Kh(e,(t||this).context);return n&&n.scale()}function hzt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Rte(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function pzt(){return Rte(this.context.dataflow,"warn",arguments)}function mzt(){return Rte(this.context.dataflow,"info",arguments)}function gzt(){return Rte(this.context.dataflow,"debug",arguments)}function NB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function uH(e){const t=L0(e),n=NB(t.r),r=NB(t.g),i=NB(t.b);return .2126*n+.7152*r+.0722*i}function yzt(e,t){const n=uH(e),r=uH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function vzt(){const e=[].slice.call(arguments);return e.unshift({}),gn(...e)}function GMe(e,t){return e===t||e!==e&&t!==t?!0:Fe(e)?Fe(t)&&e.length===t.length?bzt(e,t):!1:mt(e)&&mt(t)?YMe(e,t):!1}function bzt(e,t){for(let n=0,r=e.length;n<r;++n)if(!GMe(e[n],t[n]))return!1;return!0}function YMe(e,t){for(const n in e)if(!GMe(e[n],t[n]))return!1;return!0}function Vpe(e){return t=>YMe(e,t)}function _zt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Ac:Fe(n)||kF(n)?n:Vpe(n),c.remove(f)),t&&c.insert(t),r&&(f=Vpe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function wzt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Ezt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Hpe={};function xzt(e,t){const n=Hpe[t]||(Hpe[t]=Tc(t));return Fe(e)?e.map(n):n(e)}function Nte(e){return Fe(e)||ArrayBuffer.isView(e)?e:null}function Pte(e){return Nte(e)||(pt(e)?e:null)}function Szt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Nte(e).join(...n)}function Tzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pte(e).indexOf(...n)}function Azt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pte(e).lastIndexOf(...n)}function Czt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pte(e).slice(...n)}function Izt(e,t,n){return vn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function kzt(e){return Nte(e).slice().reverse()}function Rzt(e,t,n){return nee(e||0,t||0,n||0)}function Nzt(e,t){const n=Kh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Pzt(e,t){const n=Kh(e,(t||this).context);return n?n.copy():void 0}function Dzt(e,t){const n=Kh(e,(t||this).context);return n?n.domain():[]}function Ozt(e,t,n){const r=Kh(e,(n||this).context);return r?Fe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function $zt(e,t){const n=Kh(e,(t||this).context);return n&&n.range?n.range():[]}function Mzt(e,t,n){const r=Kh(e,(n||this).context);return r?r(t):void 0}function Lzt(e,t,n,r,i){e=Kh(e,(i||this).context);const s=F3e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=va;return u-a?l=A3e(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Fzt(e,t,n){const r=Kh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function jzt(e){let t=null;return function(n){return n?J2(n,t=t||KE(e)):e}}const KMe=e=>e.data;function XMe(e,t){const n=HMe.call(t,e);return n.root&&n.root.lookup||{}}function Bzt(e,t,n){const r=XMe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(KMe):void 0}function Uzt(e,t){const n=XMe(e,this)[t];return n?n.ancestors().map(KMe):void 0}const QMe=()=>typeof window<"u"&&window||null;function zzt(){const e=QMe();return e?e.screen:{}}function Vzt(){const e=QMe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Hzt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function JMe(e,t,n){if(!e)return[];const[r,i]=e,s=new bs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return $$e(o,s,qzt(t))}function qzt(e){let t=null;if(e){const n=ht(e.marktype),r=ht(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Wzt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ht(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Gzt(e){return ht(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Yzt(e,t,n){const{x:r,y:i,mark:s}=n,o=new bs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),JMe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Kzt(u.x,u.y,t))}function Kzt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const sI={random(){return Ic()},cumulativeNormal:OF,cumulativeLogNormal:EZ,cumulativeUniform:AZ,densityNormal:yZ,densityLogNormal:wZ,densityUniform:TZ,quantileNormal:$F,quantileLogNormal:xZ,quantileUniform:CZ,sampleNormal:DF,sampleLogNormal:_Z,sampleUniform:SZ,isArray:Fe,isBoolean:Fy,isDate:x0,isDefined(e){return e!==void 0},isNumber:lr,isObject:mt,isRegExp:MDe,isString:pt,isTuple:kF,isValid(e){return e!=null&&e===e},toBoolean:tZ,toDate(e){return nZ(e)},toNumber:ua,toString:rZ,indexof:Tzt,join:Szt,lastindexof:Azt,replace:Izt,reverse:kzt,slice:Czt,flush:ODe,lerp:LDe,merge:vzt,pad:BDe,peek:Qn,pluck:xzt,span:Pk,inrange:sw,truncate:UDe,rgb:L0,lab:MO,hcl:LO,hsl:OO,luminance:uH,contrast:yzt,sequence:Iu,format:Q7t,utcFormat:J7t,utcParse:ezt,utcOffset:tOe,utcSequence:iOe,timeFormat:qMe,timeParse:Z7t,timeOffset:eOe,timeSequence:rOe,timeUnitSpecifier:VDe,monthFormat:tzt,monthAbbrevFormat:nzt,dayFormat:rzt,dayAbbrevFormat:izt,quarter:RDe,utcquarter:NDe,week:qDe,utcweek:YDe,dayofyear:HDe,utcdayofyear:GDe,warn:pzt,info:mzt,debug:gzt,extent(e){return Th(e)},inScope:hzt,intersect:JMe,clampRange:PDe,pinchDistance:wzt,pinchAngle:Ezt,screen:zzt,containerSize:Hzt,windowSize:Vzt,bandspace:Rzt,setdata:K7t,pathShape:jzt,panLinear:ADe,panLog:CDe,panPow:IDe,panSymlog:kDe,zoomLinear:KJ,zoomLog:XJ,zoomPow:A$,zoomSymlog:QJ,encode:X7t,modify:_zt,lassoAppend:Wzt,lassoPath:Gzt,intersectLasso:Yzt},Xzt=["view","item","group","xy","x","y"],Qzt="event.vega.",ZMe="this.",Dte={},eLe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nt(WMe+e)}]`,functions:Jzt,constants:jMe,visitors:Dte},lH=UMe(eLe);function Jzt(e){const t=BMe(e);Xzt.forEach(n=>t[n]=Qzt+n);for(const n in sI)t[n]=ZMe+n;return gn(t,uzt(e,sI,Dte)),t}function cs(e,t,n){return arguments.length===1?sI[e]:(sI[e]=t,n&&(Dte[e]=n),lH&&(lH.functions[e]=ZMe+e),this)}cs("bandwidth",Nzt,Wa);cs("copy",Pzt,Wa);cs("domain",Dzt,Wa);cs("range",$zt,Wa);cs("invert",Ozt,Wa);cs("scale",Mzt,Wa);cs("gradient",Lzt,Wa);cs("geoArea",lzt,Wa);cs("geoBounds",czt,Wa);cs("geoCentroid",fzt,Wa);cs("geoShape",Fzt,Wa);cs("geoScale",dzt,Wa);cs("indata",Y7t,azt);cs("data",HMe,Ite);cs("treePath",Bzt,Ite);cs("treeAncestors",Uzt,Ite);cs("vlSelectionTest",B7t,Cte);cs("vlSelectionIdTest",V7t,Cte);cs("vlSelectionResolve",q7t,Cte);cs("vlSelectionTuples",H7t);function Ch(e,t){const n={};let r;try{e=pt(e)?e:nt(e)+"",r=Tte(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==PMe)return;const o=s.callee.name,a=eLe.visitors[o];a&&a(o,s.arguments,t,n)});const i=lH(r);return i.globals.forEach(s=>{const o=WMe+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Zzt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const eVt=Vf(["rule"]),qpe=Vf(["group","image","rect"]);function tVt(e,t){let n="";return eVt[t]||(e.x2&&(e.x?(qpe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(qpe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Ote(e){return(e+"").toLowerCase()}function nVt(e){return Ote(e)==="operator"}function rVt(e){return Ote(e)==="collect"}function CT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function iVt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var sVt={operator:(e,t)=>CT(e,["_"],t.code),parameter:(e,t)=>CT(e,["datum","_"],t.code),event:(e,t)=>CT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return CT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=tVt(r,n),i+="return m;",CT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),iVt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function oVt(e){const t=this;nVt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function aVt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function uVt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Fe(i)?i.map(s=>Wpe(s,n,t)):Wpe(i,n,t)}return t}function Wpe(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=Gpe.length,s;r<i;++r)if(s=Gpe[r],Ft(e,s.key))return s.parse(e,t,n);return e}var Gpe=[{key:"$ref",parse:lVt},{key:"$key",parse:fVt},{key:"$expr",parse:cVt},{key:"$field",parse:dVt},{key:"$encode",parse:pVt},{key:"$compare",parse:hVt},{key:"$context",parse:mVt},{key:"$subflow",parse:gVt},{key:"$tupleid",parse:yVt}];function lVt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function cVt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=tl(t.parameterExpression(e.$expr),e.$fields))}function fVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=eZ(e.$key,e.$flat,t.expr.codegen))}function dVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Tc(e.$field,e.$name,t.expr.codegen))}function hVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ht(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=JJ(r,e.$order,t.expr.codegen))}function pVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=tl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function mVt(e,t){return t}function gVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function yVt(){return Mt}function vVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function bVt(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const _Vt={skip:!0};function wVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function EVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],_Vt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Ac).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function tLe(e,t,n,r){return new nLe(e,t,n,r)}function nLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||sVt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Ype(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}nLe.prototype=Ype.prototype={fork(){const e=new Ype(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),rVt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Ote(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Zzt,parseOperator:oVt,parseOperatorParameters:aVt,parseParameters:uVt,parseStream:vVt,parseUpdate:bVt,getState:wVt,setState:EVt};function xVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),rLe(t,e.description()))}function rLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function SVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const PB="default";function TVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:PB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?pt(i)?i:i.user:PB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return pt(r)||(i=r.item,r=r.user),cH(e,r&&r!==PB?r:i||r),i},{cursor:t})}function cH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function Y$(e,t){var n=e._runtime.data;return Ft(n,t)||Me("Unrecognized data set: "+t),n[t]}function AVt(e,t){return arguments.length<2?Y$(this,e).values.value:o4.call(this,e,Ob().remove(Ac).insert(t))}function o4(e,t){SOe(t)||Me("Second argument to changes must be a changeset.");const n=Y$(this,e);return n.modified=!0,this.pulse(n.input,t)}function CVt(e,t){return o4.call(this,e,Ob().insert(t))}function IVt(e,t){return o4.call(this,e,Ob().remove(t))}function iLe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function sLe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function a4(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function kVt(e){var t=a4(e),n=iLe(e),r=sLe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function RVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=a4(e),o=t.changedTouches?t.changedTouches[0]:t,s=JF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=NVt(e,n,s),t}function NVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ba(e),item:ba(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Kpe="view",PVt="timer",DVt="window",OVt={trap:!1};function $Vt(e){const t=gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Fe(r[s])&&(r[s]=Vf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function oLe(e,t,n,r){e._eventListeners.push({type:n,sources:ht(t),handler:r})}function MVt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function eP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function LVt(e,t,n){var r=this,i=new PF(n),s=function(l,c){r.runAsync(null,()=>{e===Kpe&&MVt(r,t)&&l.preventDefault(),i.receive(RVt(r,l,c))})},o;if(e===PVt)eP(r,"timer",t)&&r.timer(s,t);else if(e===Kpe)eP(r,"view",t)&&r.addEventListener(t,s,OVt);else if(e===DVt?eP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&eP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);oLe(r,o,t,s)}return i}function Xpe(e){return e.item}function Qpe(e){return e.item.mark.source}function Jpe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function FVt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Xpe),Qpe,Jpe(e)),this.on(this.events("view","pointerout",Xpe),Qpe,Jpe(t)),this}function jVt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Tl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const BVt="vega-bind",UVt="vega-bind-name",zVt="vega-bind-radio";function VVt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=ZJ(r.debounce,i.update))),(r.input==null&&r.element?HVt:WVt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function HVt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),oLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(qVt(i))}}function qVt(e){return typeof Event<"u"?new Event(e):{type:e}}function WVt(e,t,n,r){const i=r.signal(n.signal),s=Tl("div",{class:BVt}),o=n.input==="radio"?s:s.appendChild(Tl("label"));o.appendChild(Tl("span",{class:UVt},n.name||n.signal)),t.appendChild(s);let a=GVt;switch(n.input){case"checkbox":a=YVt;break;case"select":a=KVt;break;case"radio":a=XVt;break;case"range":a=QVt;break}a(e,o,n,i)}function GVt(e,t,n,r){const i=Tl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function YVt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Tl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function KVt(e,t,n,r){const i=Tl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};K$(o,r)&&(u.selected=!0),i.appendChild(Tl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(K$(n.options[a],o)){i.selectedIndex=a;return}}}function XVt(e,t,n,r){const i=Tl("span",{class:zVt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};K$(o,r)&&(u.checked=!0);const l=Tl("input",u);l.addEventListener("change",()=>e.update(o));const c=Tl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)K$(a[l].value,o)&&(a[l].checked=!0)}}function QVt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||M0(s,i,100),a=Tl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Tl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function K$(e,t){return e===t||e+""==t+""}function aLe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,iLe(e),sLe(e),a4(e),i,s).background(e.background())}function $te(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function JVt(e,t,n,r){const i=new r(e.loader(),$te(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,a4(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function ZVt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=ZF(r);e=n._el=e?DB(n,e,!0):null,xVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||Yk,a=e?s.renderer:s.headless;return n._renderer=a?aLe(n,n._renderer,e,a):null,n._handler=JVt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=DB(n,t,!0):e.appendChild(Tl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=DB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{VVt(n,u.element||t,u)})),n}function DB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const IT=e=>+e||0,eHt=e=>({top:e,bottom:e,left:e,right:e});function Zpe(e){return mt(e)?{top:IT(e.top),bottom:IT(e.bottom),left:IT(e.left),right:IT(e.right)}:eHt(IT(e))}async function Mte(e,t,n,r){const i=ZF(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),aLe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function tHt(e,t){e!==Jg.Canvas&&e!==Jg.SVG&&e!==Jg.PNG&&Me("Unrecognized image type: "+e);const n=await Mte(this,e,t);return e===Jg.SVG?nHt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function nHt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function rHt(e,t){return(await Mte(this,Jg.Canvas,e,t)).canvas()}async function iHt(e){return(await Mte(this,Jg.SVG,e)).svg()}function sHt(e,t,n){return tLe(e,qE,sI,n).parse(t)}function oHt(e){var t=this._runtime.scales;return Ft(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var uLe="width",lLe="height",Lte="padding",eme={skip:!0};function cLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Lte?r.left+r.right:0)}function fLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Lte?r.top+r.bottom:0)}function aHt(e){var t=e._signals,n=t[uLe],r=t[lLe],i=t[Lte];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=cLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=fLe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function uHt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(uLe,n,eme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(lLe,r,eme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function lHt(e){return this._runtime.getState(e||{data:cHt,signals:fHt,recurse:!0})}function cHt(e,t){return t.modified&&Fe(t.input.value)&&!e.startsWith("_:vega:_")}function fHt(e,t){return!(e==="parent"||t instanceof qE.proxy)}function dHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function hHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Kat(n,t))}function pHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",mHt(r))}function mHt(e){return e==null?"":Fe(e)?dLe(e):mt(e)&&!x0(e)?gHt(e):e+""}function gHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Fe(n)?dLe(n):hLe(n))}).join(`
`)}function dLe(e){return"["+e.map(hLe).join(", ")+"]"}function hLe(e){return Fe(e)?"[]":mt(e)&&!x0(e)?"{}":e}function yHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function pLe(e,t){const n=this;if(t=t||{},zw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=gn({},e.locale,t.locale);n.locale(pOe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Jg.Canvas,n._scenegraph=new u$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||pHt,n._redraw=!0,n._handler=new Yk().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=$Vt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=sHt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=cLe(n,n._width),n._viewHeight=fLe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,aHt(n),SVt(n),TVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function tP(e,t){return Ft(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+nt(t))}function mLe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function tme(e,t,n,r){let i=mLe(n,r);return i||(i=$te(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function nme(e,t,n){const r=mLe(t,n);return r&&t._targets.remove(r),e}lt(pLe,zw,{async evaluate(e,t,n){if(await zw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,kVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&pD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&rLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=tP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Zpe(e)):Zpe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(ZF(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(zw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(tP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:uHt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=$te(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return tme(this,e,tP(this,e),t)},removeSignalListener(e,t){return nme(this,tP(this,e),t)},addDataListener(e,t){return tme(this,e,Y$(this,e).values,t)},removeDataListener(e,t){return nme(this,Y$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=cH(this,null);this._globalCursor=!!e,t&&cH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:hHt,events:LVt,finalize:jVt,hover:FVt,data:AVt,change:o4,insert:CVt,remove:IVt,scale:oHt,initialize:ZVt,toImageURL:tHt,toCanvas:rHt,toSVG:iHt,getState:lHt,setState:dHt,_watchPixelRatio:yHt});const vHt="view",X$="[",Q$="]",gLe="{",yLe="}",bHt=":",vLe=",",_Ht="@",wHt=">",EHt=/[[\]{}]/,xHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let bLe,_Le;function By(e,t,n){return bLe=t||vHt,_Le=n||xHt,wLe(e.trim()).map(fH)}function SHt(e){return _Le[e]}function SC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function wLe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=SC(e,i,vLe,X$+gLe,Q$+yLe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function fH(e){return e[0]==="["?THt(e):AHt(e)}function THt(e){const t=e.length;let n=1,r;if(n=SC(e,n,Q$,X$,Q$),n===t)throw"Empty between selector: "+e;if(r=wLe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==wHt)throw"Expected '>' after between selector: "+e;r=r.map(fH);const i=fH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function AHt(e){const t={source:bLe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===yLe){if(a=e.lastIndexOf(gLe),a>=0){try{r=CHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===_Ht&&(i=++a),u=SC(e,a,bHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=SC(e,a,X$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=SC(e,a,Q$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==X$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||EHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):SHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function CHt(e){const t=e.split(vLe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function IHt(e){return mt(e)?e:{type:e||"pad"}}const kT=e=>+e||0,kHt=e=>({top:e,bottom:e,left:e,right:e});function RHt(e){return mt(e)?e.signal?e:{top:kT(e.top),bottom:kT(e.bottom),left:kT(e.left),right:kT(e.right)}:kHt(kT(e))}const ro=e=>mt(e)&&!Fe(e)?gn({},e):{value:e};function rme(e,t,n,r){return n!=null?(mt(n)&&!Fe(n)||Fe(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function $o(e,t,n){for(const r in t)rme(e,r,t[r]);for(const r in n)rme(e,r,n[r],"update")}function xS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=gn(e[r]||{},t[r]));return e}function M_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Fte="mark",jte="frame",Bte="scope",NHt="axis",PHt="axis-domain",DHt="axis-grid",OHt="axis-label",$Ht="axis-tick",MHt="axis-title",LHt="legend",FHt="legend-band",jHt="legend-entry",BHt="legend-gradient",ELe="legend-label",UHt="legend-symbol",zHt="legend-title",VHt="title",HHt="title-text",qHt="title-subtitle";function WHt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!M_(u,e)&&OB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===jte?i.group:n===Fte?gn({},i.mark,i[t]):null;for(u in c)l=M_(u,e)||(u==="fill"||u==="stroke")&&(M_("fill",e)||M_("stroke",e)),l||OB(s,u,c[u]);ht(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)M_(h,e)||OB(s,h,d[h])}),e=gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=gn(o,e.enter),a&&(e.update=gn(a,e.update)),e}function OB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const xLe=e=>pt(e)?nt(e):e.signal?`(${e.signal})`:SLe(e);function u4(e){if(e.gradient!=null)return YHt(e);let t=e.signal?`(${e.signal})`:e.color?GHt(e.color):e.field!=null?SLe(e.field):e.value!==void 0?nt(e.value):void 0;return e.scale!=null&&(t=KHt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${ID(e.exponent)})`),e.mult!=null&&(t+=`*${ID(e.mult)}`),e.offset!=null&&(t+=`+${ID(e.offset)}`),e.round&&(t=`round(${t})`),t}const nP=(e,t,n,r)=>`(${e}(${[t,n,r].map(u4).join(",")})+'')`;function GHt(e){return e.c?nP("hcl",e.h,e.c,e.l):e.h||e.s?nP("hsl",e.h,e.s,e.l):e.l||e.a?nP("lab",e.l,e.a,e.b):e.r||e.g||e.b?nP("rgb",e.r,e.g,e.b):null}function YHt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(xLe(e.gradient)),`gradient(${t.join(",")})`}function ID(e){return mt(e)?"("+u4(e)+")":e}function SLe(e){return TLe(mt(e)?e:{datum:e})}function TLe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+nt(e));return e.signal||(r=pt(r)?Wh(r).map(nt).join("]["):TLe(r)),t+"["+r+"]"}function KHt(e,t){const n=xLe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+ID(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function XHt(e){let t="";return e.forEach(n=>{const r=u4(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function ALe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=WHt(e,t,n,r,i.config);for(const a in e)o[a]=QHt(e[a],t,s,i);return s}function QHt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=ZHt(JHt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function JHt(e){return Fe(e)?XHt(e):u4(e)}function ZHt(e,t,n,r){const i=Ch(e,t);return i.$fields.forEach(s=>r[s]=1),gn(n,i.$params),i.$expr}const eqt="outer",tqt=["value","update","init","react","bind"];function ime(e,t){Me(e+' for "outer" push: '+nt(t))}function CLe(e,t){const n=e.name;if(e.push===eqt)t.signals[n]||ime("No prior signal definition",n),tqt.forEach(r=>{e[r]!==void 0&&ime("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function dH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function l4(e,t,n,r){return new dH(e,t,n,r)}function J$(e,t){return l4("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function oI(e,t){return t?{$field:e,$name:t}:{$field:e}}const hH=oI("key");function sme(e,t){return{$compare:e,$order:t}}function nqt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const rqt="ascending",iqt="descending";function sqt(e){return mt(e)?(e.order===iqt?"-":"+")+c4(e.op,e.field):""}function c4(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Ute="scope",pH="view";function Ds(e){return e&&e.signal}function oqt(e){return e&&e.expr}function kD(e){if(Ds(e))return!0;if(mt(e)){for(const t in e)if(kD(e[t]))return!0}return!1}function uf(e,t){return e??t}function vv(e){return e&&e.signal||e}const ome="timer";function aI(e,t){return(e.merge?uqt:e.stream?lqt:e.type?cqt:Me("Invalid stream specification: "+nt(e)))(e,t)}function aqt(e){return e===Ute?pH:e||pH}function uqt(e,t){const n=e.merge.map(i=>aI(i,t)),r=zte({merge:n},e,t);return t.addStream(r).id}function lqt(e,t){const n=aI(e.stream,t),r=zte({stream:n},e,t);return t.addStream(r).id}function cqt(e,t){let n;e.type===ome?(n=t.event(ome,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(aqt(e.source),e.type);const r=zte({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function zte(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+nt(t)),e.between=[aI(r[0],n),aI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(fqt(t.marktype,t.markname,t.markrole)),t.source===Ute&&r.push("inScope(event.item)"),r.length&&(e.filter=Ch("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function fqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const dqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function hqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),pt(s)&&(s=By(s,t.isSubscope()?Ute:pH)),s=ht(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[mqt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+nt(r)+")"),i.update=pt(o)?Ch(o,t):o.expr!=null?Ch(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:dqt,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(gn(pqt(u,t),i)))}function pqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):aI(e,t)}}function mqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function gqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Ch(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>hqt(i,t,n.id))}const Ur=e=>(t,n,r)=>l4(e,n,t||void 0,r),ILe=Ur("aggregate"),yqt=Ur("axisticks"),kLe=Ur("bound"),ed=Ur("collect"),ame=Ur("compare"),vqt=Ur("datajoin"),RLe=Ur("encode"),bqt=Ur("expression"),_qt=Ur("facet"),wqt=Ur("field"),Eqt=Ur("key"),xqt=Ur("legendentries"),Sqt=Ur("load"),Tqt=Ur("mark"),Aqt=Ur("multiextent"),Cqt=Ur("multivalues"),Iqt=Ur("overlap"),kqt=Ur("params"),NLe=Ur("prefacet"),Rqt=Ur("projection"),Nqt=Ur("proxy"),Pqt=Ur("relay"),PLe=Ur("render"),Dqt=Ur("scale"),Lb=Ur("sieve"),Oqt=Ur("sortitems"),DLe=Ur("viewlayout"),$qt=Ur("values");let Mqt=0;const OLe={min:"min",max:"max",count:"sum"};function Lqt(e,t){const n=e.type||"linear";_3e(n)||Me("Unrecognized scale type: "+nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Fqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=$Le(e.domain,e,t),e.range!=null&&(n.range=LLe(e,t,n)),e.interpolate!=null&&Yqt(e.interpolate,n),e.nice!=null&&(n.nice=Gqt(e.nice,t)),e.bins!=null&&(n.bins=Wqt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=pc(e[r],t))}function pc(e,t){return mt(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+nt(e)):e}function RD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>pc(n,t))}function f4(e){Me("Can not find data set: "+nt(e))}function $Le(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Fe(e)?jqt:e.fields?Uqt:Bqt)(e,t,n)}function jqt(e,t,n){return e.map(r=>pc(r,n))}function Bqt(e,t,n){const r=n.getData(e.data);return r||f4(e.data),YE(t.type)?r.valuesRef(n,e.field,MLe(e.sort,!1)):x3e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Uqt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=pt(o)?{data:r,field:o}:Fe(o)||o.signal?zqt(o,n):o,s.push(o),s),[]);return(YE(t.type)?Vqt:x3e(t.type)?Hqt:qqt)(e,n,i)}function zqt(e,t){const n="_:vega:_"+Mqt++,r=ed({});if(Fe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Lb({})]),{data:n,field:"data"}}function Vqt(e,t,n){const r=MLe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||f4(l.data),c.countsRef(t,l.field,r)}),a={groupby:hH,pulse:o};r&&(i=r.op||"count",s=r.field?c4(i,r.field):"count",a.ops=[OLe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(ILe(a));const u=t.add(ed({pulse:$t(i)}));return s=t.add($qt({field:hH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function MLe(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!OLe[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function Hqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||f4(i.data),s.domainRef(t,i.field)});return $t(t.add(Cqt({values:r})))}function qqt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||f4(i.data),s.extentRef(t,i.field)});return $t(t.add(Aqt({extents:r})))}function Wqt(e,t){return e.signal||Fe(e)?RD(e,t):t.objectProperty(e)}function Gqt(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:pc(e.interval),step:pc(e.step)}:pc(e)}function Yqt(e,t){t.interpolate=pc(e.type||e),e.gamma!=null&&(t.interpolateGamma=pc(e.gamma))}function LLe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(pt(i)){if(r&&Ft(r,i))return e=gn({},e,{range:r[i]}),LLe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=YE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+nt(i))}else if(i.scheme){n.scheme=Fe(i.scheme)?RD(i.scheme,t):pc(i.scheme,t),i.extent&&(n.schemeExtent=RD(i.extent,t)),i.count&&(n.schemeCount=pc(i.count,t));return}else if(i.step){n.rangeStep=pc(i.step,t);return}else{if(YE(e.type)&&!Fe(i))return $Le(i,e,t);Fe(i)||Me("Unsupported range type: "+nt(i))}return i.map(s=>(Fe(s)?RD:pc)(s,t))}function Kqt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=mH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=mH(n[i],i,t));t.addProjection(e.name,r)}function mH(e,t,n){return Fe(e)?e.map(r=>mH(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+nt(e)):e}const td="top",SS="left",TS="right",ay="bottom",FLe="center",Xqt="vertical",Qqt="start",Jqt="middle",Zqt="end",gH="index",Vte="label",eWt="offset",ZE="perc",tWt="perc2",yc="value",Zk="guide-label",Hte="guide-title",nWt="group-title",rWt="group-subtitle",ume="symbol",ND="gradient",yH="discrete",vH="size",iWt="shape",sWt="fill",oWt="stroke",aWt="strokeWidth",uWt="strokeDash",lWt="opacity",qte=[vH,iWt,sWt,oWt,aWt,uWt,lWt],eR={name:1,style:1,interactive:1},tr={value:0},vc={value:1},d4="group",jLe="rect",Wte="rule",cWt="symbol",Fb="text";function uI(e){return e.type=d4,e.interactive=e.interactive||!1,e}function nl(e,t){const n=(r,i)=>uf(e[r],uf(t[r],i));return n.isVertical=r=>Xqt===uf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>uf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>uf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>uf(e.columns,uf(t.columns,+n.isVertical(!0))),n}function BLe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function fWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function h4(e,t,n){return`item.anchor === '${Qqt}' ? ${e} : item.anchor === '${Zqt}' ? ${t} : ${n}`}const Gte=h4(nt(SS),nt(TS),nt(FLe));function dWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function ULe(e,t){return t?e?mt(e)?Object.assign({},e,{offset:ULe(e.offset,t)}):{value:e,offset:t}:t:e}function jl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=xS(e.encode,t,eR)):e.interactive=!1,e}function hWt(e,t,n,r){const i=nl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:ro(f),height:ro(d)},update:gn({},u,{opacity:vc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return $o(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),jl({type:jLe,role:BHt,encode:h},r)}function pWt(e,t,n,r,i){const s=nl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:yc}};p[l]={signal:h+"datum."+ZE,mult:u},p[c]=tr,p[f]={signal:h+"datum."+tWt,mult:u},p[d]=ro(a);const m={enter:p,update:gn({},p,{opacity:vc}),exit:{opacity:tr}};return $o(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),jl({type:jLe,role:FHt,key:yc,from:i,encode:m},r)}const mWt=`datum.${ZE}<=0?"${SS}":datum.${ZE}>=1?"${TS}":"${FLe}"`,gWt=`datum.${ZE}<=0?"${ay}":datum.${ZE}>=1?"${td}":"${Jqt}"`;function lme(e,t,n,r){const i=nl(e,t),s=i.isVertical(),o=ro(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:vc,text:{field:Vte}},exit:{opacity:tr}};return $o(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:uf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:gWt},f="y",d="x",h="1-"):(l.align=c.align={signal:mWt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+ZE,mult:a},l[d]=c[d]=o,o.offset=uf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+gH}:void 0,jl({type:Fb,role:ELe,style:Zk,key:yc,from:r,encode:p,overlap:u},n)}function yWt(e,t,n,r,i){const s=nl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${eWt} : datum.${vH}`,h=l?ro(l):{field:vH},p=`datum.${gH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:vc,x:y.x,y:y.y},exit:{opacity:tr}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),$o(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),qte.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:yc})});const T=jl({type:cWt,role:UHt,key:yc,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=ro(c);A.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:A},y:h},update:v={opacity:vc,text:{field:Vte},x:y.x,y:y.y},exit:{opacity:tr}},$o(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=jl({type:Fb,role:ELe,style:Zk,key:yc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?ro(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:vc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:gH}},uI({role:Bte,from:r,encode:xS(g,o,eR),marks:[T,C],name:u,interactive:a,sort:w})}function vWt(e,t){const n=nl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Yte='item.orient === "left"',Kte='item.orient === "right"',p4=`(${Yte} || ${Kte})`,bWt=`datum.vgrad && ${p4}`,_Wt=h4('"top"','"bottom"','"middle"'),wWt=h4('"right"','"left"','"center"'),EWt=`datum.vgrad && ${Kte} ? (${wWt}) : (${p4} && !(datum.vgrad && ${Yte})) ? "left" : ${Gte}`,xWt=`item._anchor || (${p4} ? "middle" : "start")`,SWt=`${bWt} ? (${Yte} ? -90 : 90) : 0`,TWt=`${p4} ? (datum.vgrad ? (${Kte} ? "bottom" : "top") : ${_Wt}) : "top"`;function AWt(e,t,n,r){const i=nl(e,t),s={enter:{opacity:tr},update:{opacity:vc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return $o(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:xWt},angle:{signal:SWt},align:{signal:EWt},baseline:{signal:TWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),jl({type:Fb,role:zHt,style:Hte,from:r,encode:s},n)}function CWt(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+cme(e.path)+")":e.sphere&&(n="geoShape("+cme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function cme(e){return mt(e)&&e.signal?e.signal:nt(e)}function zLe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===d4?Bte:t||Fte}function IWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||zLe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function kWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Xte(e,t){const n=COe(e.type);n||Me("Unrecognized transform type: "+nt(e.type));const r=l4(n.type.toLowerCase(),null,VLe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function VLe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=RWt(o,t,n)}return r}function RWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return NWt(e,t,n);if(i===void 0){e.required&&Me("Missing required "+nt(t.type)+" parameter: "+nt(e.name));return}else{if(r==="param")return PWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ds(i)?i.map(s=>fme(e,s,n)):fme(e,i,n)}function fme(e,t,n){const r=e.type;if(Ds(t))return hme(r)?Me("Expression references can not be signals."):$B(r)?n.fieldRef(t):pme(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||$B(r);return i&&DWt(t)?n.exprRef(t.expr,t.as):i&&OWt(t)?oI(t.field,t.as):hme(r)?Ch(t,n):$Wt(r)?$t(n.getData(t).values):$B(r)?oI(t):pme(r)?n.compareRef(t):t}}function NWt(e,t,n){return pt(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function PWt(e,t,n){const r=t[e.name];return e.array?(Fe(r)||Me("Expected an array of sub-parameters. Instead: "+nt(r)),r.map(i=>dme(e,i,n))):dme(e,r,n)}function dme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+nt(t));const s=gn(VLe(i,t,n),i.key);return $t(n.add(kqt(s)))}const DWt=e=>e&&e.expr,OWt=e=>e&&e.field,$Wt=e=>e==="data",hme=e=>e==="expr",$B=e=>e==="field",pme=e=>e==="compare";function MWt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=PD(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=Xte(gn({type:"aggregate",groupby:ht(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=PD(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(ed(null,[{}]))),o||(o=PD(e,n)),{key:i,pulse:o,parent:a}}function PD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function rb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}rb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new rb(e,s,i,r,o)};function HLe(e){return pt(e)?e:null}function mme(e,t,n){const r=c4(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function RT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=sqt(s);let l=HLe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:hH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(l4(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}rb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=HLe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&mme(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&mme(e,u,n),a=e.add(ILe(u)),o=e.add(ed({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return RT(e,this,"extent","extent",t,!1)},domainRef(e,t){return RT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return RT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return RT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return RT(e,this,"indata","tupleindex",t,!0,!0)}};function LWt(e,t,n){const r=e.from.facet,i=r.name,s=PD(r,t);let o;r.name||Me("Facet must have a name: "+nt(r)),r.data||Me("Facet must reference a data set: "+nt(r)),r.field?o=t.add(NLe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(_qt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+nt(r));const a=t.fork(),u=a.add(ed()),l=a.add(Lb({pulse:$t(u)}));a.addData(i,new rb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function FWt(e,t,n){const r=t.add(NLe({pulse:n.pulse})),i=t.fork();i.add(Lb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function qLe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(J$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Ch(l,t);u.update=c.$expr,u.params=c.$params}function m4(e,t){const n=zLe(e),r=e.type===d4,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Bte||n===jte,a,u,l,c,f,d,h;const p=n===Fte||o||i,m=MWt(e.from,r,t);u=t.add(vqt({key:m.key||(e.key?oI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(ed({pulse:g})),u=t.add(Tqt({markdef:IWt(e),interactive:kWt(e.interactive,t),clip:CWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(RLe(ALe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=Xte(S,t),A=T.metadata;(A.generates||A.changes)&&Me("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),T.params.pulse=$t(u),t.add(u=T)}),e.sort&&(u=t.add(Oqt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(DLe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(kLe({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?LWt(e,t,m):p?FWt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=jWt(s,h,t));const w=t.add(PLe({pulse:h})),E=t.add(Lb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new rb(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Me("Marks only support modify triggers."),qLe(S,t,f)}))}function jWt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Ds(s)?n.signalRef(s.signal):s,method:Ds(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Ds(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(Iqt(o)))}function BWt(e,t){const n=t.config.legend,r=e.encode||{},i=nl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;qte.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=UWt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(ed(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(xqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===ND?(h=[hWt(e,c,n,r.gradient),lme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${vv(i.gradientLength())})/100))`)):p===yH?h=[pWt(e,c,n,r.gradient,v),lme(e,n,r.labels,v)]:(f=vWt(e,n),h=[yWt(e,n,r,v,vv(f.columns))],d.size=HWt(e,t,h[0].marks)),h=[uI({role:jHt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(AWt(e,n,r.title,g)),m4(uI({role:LHt,from:g,encode:xS(VWt(i,e,n),s,eR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function UWt(e,t){let n=e.type||ume;return!e.type&&zWt(e)===1&&(e.fill||e.stroke)&&(n=aee(t)?ND:PV(t)?yH:ume),n!==ND?n:PV(t)?yH:ND}function zWt(e){return qte.reduce((t,n)=>t+(e[n]?1:0),0)}function VWt(e,t,n){const r={enter:{},update:{}};return $o(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function HWt(e,t,n){const r=vv(gme("size",e,n)),i=vv(gme("strokeWidth",e,n)),s=vv(qWt(n[1].encode,t,Zk));return Ch(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function gme(e,t,n){return t[e]?`scale("${t[e]}",datum)`:BLe(e,n[0].encode)}function qWt(e,t,n){return BLe("fontSize",e)||fWt("fontSize",t,n)}const WWt=`item.orient==="${SS}"?-90:item.orient==="${TS}"?90:0`;function GWt(e,t){e=pt(e)?{text:e}:e;const n=nl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(ed(null,[l])));return u.push(XWt(e,n,YWt(e),c)),e.subtitle&&u.push(QWt(e,n,r.subtitle,c)),m4(uI({role:VHt,from:c,encode:KWt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function YWt(e){const t=e.encode;return t&&t.title||gn({name:e.name,interactive:e.interactive,style:e.style},t)}function KWt(e,t){const n={enter:{},update:{}};return $o(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Gte},angle:{signal:WWt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),xS(n,t,eR)}function XWt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return $o(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:Fb,role:HHt,style:nWt,from:r,encode:o},n)}function QWt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return $o(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:Fb,role:qHt,style:rWt,from:r,encode:o},n)}function JWt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Xte(r,t))}),e.on&&e.on.forEach(r=>{qLe(r,t,e.name)}),t.addDataPipeline(e.name,ZWt(e,t,n))}function ZWt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Ds(e.values)||kD(e.format)?(r.push(yme(t,e)),r.push(i=r1())):r.push(i=r1({$ingest:e.values,$format:e.format})):e.url?kD(e.url)||kD(e.format)?(r.push(yme(t,e)),r.push(i=r1())):r.push(i=r1({$request:e.url,$format:e.format})):e.source&&(i=a=ht(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=r1()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Pqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,r1())),i||r.push(r1()),r.push(Lb({})),r}function r1(e){const t=ed({},e);return t.metadata={source:!0},t}function yme(e,t){return Sqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const WLe=e=>e===ay||e===td,g4=(e,t,n)=>Ds(e)?rGt(e.signal,t,n):e===SS||e===td?t:n,io=(e,t,n)=>Ds(e)?tGt(e.signal,t,n):WLe(e)?t:n,Of=(e,t,n)=>Ds(e)?nGt(e.signal,t,n):WLe(e)?n:t,GLe=(e,t,n)=>Ds(e)?iGt(e.signal,t,n):e===td?{value:t}:{value:n},eGt=(e,t,n)=>Ds(e)?sGt(e.signal,t,n):e===TS?{value:t}:{value:n},tGt=(e,t,n)=>YLe(`${e} === '${td}' || ${e} === '${ay}'`,t,n),nGt=(e,t,n)=>YLe(`${e} !== '${td}' && ${e} !== '${ay}'`,t,n),rGt=(e,t,n)=>Qte(`${e} === '${SS}' || ${e} === '${td}'`,t,n),iGt=(e,t,n)=>Qte(`${e} === '${td}'`,t,n),sGt=(e,t,n)=>Qte(`${e} === '${TS}'`,t,n),YLe=(e,t,n)=>(t=t!=null?ro(t):t,n=n!=null?ro(n):n,vme(t)&&vme(n)?(t=t?t.signal||nt(t.value):null,n=n?n.signal||nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[gn({test:e},t)].concat(n||[])),vme=e=>e==null||Object.keys(e).length===1,Qte=(e,t,n)=>({signal:`${e} ? (${uw(t)}) : (${uw(n)})`}),oGt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${SS}' ? (${uw(r)}) : `:"")+(n!=null?`${e} === '${ay}' ? (${uw(n)}) : `:"")+(i!=null?`${e} === '${TS}' ? (${uw(i)}) : `:"")+(t!=null?`${e} === '${td}' ? (${uw(t)}) : `:"")+"(null)"}),uw=e=>Ds(e)?e.signal:e==null?null:nt(e),aGt=(e,t)=>t===0?0:Ds(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Vw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function b_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Hte][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Zk][i]}return null}function bme(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function uGt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Ds(o)){const f=bme([n.axisX,n.axisY]),d=bme([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=io(o,b_(l,n.axisX,i,r),b_(l,n.axisY,i,r));u={};for(l of d)u[l]=oGt(o.signal,b_(l,n.axisTop,i,r),b_(l,n.axisBottom,i,r),b_(l,n.axisLeft,i,r),b_(l,n.axisRight,i,r))}else a=o===td||o===ay?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?gn({},i,a,u,s):i}function lGt(e,t,n,r){const i=nl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:vc},exit:{opacity:tr}};$o(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=_me(e,0),c=_me(e,1);return o.x=a.x=io(s,l,tr),o.x2=a.x2=io(s,c),o.y=a.y=Of(s,l,tr),o.y2=a.y2=Of(s,c),jl({type:Wte,role:PHt,from:r,encode:u},n)}function _me(e,t){return{scale:e.scale,range:t}}function cGt(e,t,n,r,i){const s=nl(e,t),o=e.orient,a=e.gridScale,u=g4(o,1,-1),l=fGt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:vc},exit:f={opacity:tr}};$o(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:yc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=io(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:gn(m,{mult:u,offset:l});return c.x=d.x=io(o,p,g),c.y=d.y=Of(o,p,g),c.x2=d.x2=Of(o,y),c.y2=d.y2=io(o,y),f.x=io(o,p),f.y=Of(o,p),jl({type:Wte,role:DHt,key:yc,from:r,encode:h},n)}function fGt(e,t){if(t!==1)if(!mt(e))e=Ds(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=gn({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=gn({},n.mult);else return n.mult=Ds(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function dGt(e,t,n,r,i,s){const o=nl(e,t),a=e.orient,u=g4(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:vc},exit:c={opacity:tr}};$o(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ro(i);h.mult=u;const p={scale:e.scale,field:yc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=io(a,tr,p),f.y2=l.y2=io(a,h),c.x=io(a,p),f.x=l.x=Of(a,tr,p),f.x2=l.x2=Of(a,h),c.y=Of(a,p),jl({type:Wte,role:$Ht,key:yc,from:r,encode:d},n)}function MB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function hGt(e,t,n,r,i,s){const o=nl(e,t),a=e.orient,u=e.scale,l=g4(a,-1,1),c=vv(o("labelFlush")),f=vv(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ro(i);g.mult=l,g.offset=ro(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:yc,band:.5,offset:ULe(s.offset,o("labelOffset"))},v=io(a,p?MB(u,c,'"left"','"right"','"center"'):{value:"center"},eGt(a,"left","right")),b=io(a,GLe(a,"bottom","top"),p?MB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=MB(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:tr,x:io(a,y,g),y:Of(a,y,g)},S={enter:E,update:m={opacity:vc,text:{field:Vte},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:tr,x:E.x,y:E.y}};$o(S,{dx:!d&&p?io(a,w):null,dy:!h&&p?Of(a,w):null}),$o(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let A=o("labelOverlap");return A=A||T?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=Vw(m.align,v)),m.baseline!==b&&(m.baseline=Vw(m.baseline,b)),jl({type:Fb,role:OHt,style:Zk,key:yc,from:r,encode:S,overlap:A},n)}function pGt(e,t,n,r){const i=nl(e,t),s=e.orient,o=g4(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:ro(i("titleAnchor",null)),align:{signal:Gte}},update:u=gn({},a,{opacity:vc,text:ro(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${h4(0,1,.5)})`};return u.x=io(s,c),u.y=Of(s,c),a.angle=io(s,tr,aGt(o,90)),a.baseline=io(s,GLe(s,ay,td),{value:ay}),u.angle=a.angle,u.baseline=a.baseline,$o(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),mGt(i,s,l,n),l.update.align=Vw(l.update.align,a.align),l.update.angle=Vw(l.update.angle,a.angle),l.update.baseline=Vw(l.update.baseline,a.baseline),jl({type:Fb,role:MHt,style:Hte,from:r,encode:l},n)}function mGt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Vw(ro(a),n.update[u]),!1):!M_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ro(o):io(t,ro(o),ro(s))}function gGt(e,t){const n=uGt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=nl(e,n),l=dWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(ed({},[c]))),d=$t(t.add(yqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(cGt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(dGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(hGt(e,n,r.labels,d,p,l))),c.domain&&h.push(lGt(e,n,r.domain,f)),c.title&&h.push(pGt(e,n,r.title,f)),m4(uI({role:NHt,from:f,encode:xS(yGt(u,e),i,eR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function yGt(e,t){const n={enter:{},update:{}};return $o(n,{orient:e("orient"),offset:e("offset")||0,position:uf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function KLe(e,t,n){const r=ht(e.signals),i=ht(e.scales);return n||r.forEach(s=>CLe(s,t)),ht(e.projections).forEach(s=>Kqt(s,t)),i.forEach(s=>Lqt(s,t)),ht(e.data).forEach(s=>JWt(s,t)),i.forEach(s=>Fqt(s,t)),(n||r).forEach(s=>gqt(s,t)),ht(e.axes).forEach(s=>gGt(s,t)),ht(e.marks).forEach(s=>m4(s,t)),ht(e.legends).forEach(s=>BWt(s,t)),e.title&&GWt(e.title,t),t.parseLambdas(),t}const vGt=e=>xS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function bGt(e,t){const n=t.config,r=$t(t.root=t.add(J$())),i=_Gt(e,n);i.forEach(l=>CLe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(ed()),o=t.add(RLe(ALe(vGt(e.encode),d4,jte,e.style,t,{pulse:$t(s)}))),a=t.add(DLe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),KLe(e,t,i),t.operators.push(a);let u=t.add(kLe({mark:r,pulse:$t(a)}));return u=t.add(PLe({pulse:$t(u)})),u=t.add(Lb({pulse:$t(u)})),t.addData("root",new rb(t,s,s,u)),t}function NT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function _Gt(e,t){const n=o=>uf(e[o],t[o]),r=[NT("background",n("background")),NT("autosize",IHt(n("autosize"))),NT("padding",RHt(n("padding"))),NT("width",n("width")||0),NT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ht(e.signals).forEach(o=>{Ft(i,o.name)?o=gn(i[o.name],o):r.push(o),s[o.name]=o}),ht(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function XLe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function wme(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}XLe.prototype=wme.prototype={parse(e){return KLe(e,this)},fork(){return new wme(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof dH?$t(e):e;return this.add(Nqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Lb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(pt(e))return oI(e,t);e.signal||Me("Unsupported field reference: "+nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(wqt(i)))}return r},compareRef(e){let t=!1;const n=s=>Ds(s)?(t=!0,this.signalRef(s.signal)):oqt(s)?(t=!0,this.exprRef(s.expr)):s,r=ht(e.field).map(n),i=ht(e.order).map(n);return t?$t(this.add(ame({fields:r,orders:i}))):sme(r,i)},keyRef(e,t){let n=!1;const r=s=>Ds(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=ht(e).map(r),n?$t(this.add(Eqt({fields:e,flat:t}))):nqt(e,t)},sortRef(e){if(!e)return e;const t=c4(e.op,e.field),n=e.order||rqt;return n.signal?$t(this.add(ame({fields:t,orders:this.signalRef(n.signal)}))):sme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+nt(e));const n=t instanceof dH?t:this.add(J$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(J$(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Ch(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||Jte(e))},exprRef(e,t){const n={expr:Ch(e,this)};return t&&(n.expr.$name=t),$t(this.add(bqt(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+nt(e)),this.bindings.push(gn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Me("Duplicate scale or projection name: "+nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Dqt(t))},addProjection(e,t){this.addScaleProj(e,Rqt(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+nt(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+nt(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.addData(e,rb.fromEntries(this,t))}};function Jte(e){return(Fe(e)?wGt:EGt)(e)}function wGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||Jte(i):nt(i))}return n+"]"}function EGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nt(r)+":"+(mt(i)?i.signal||Jte(i):nt(i));return t+"}"}function xGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function SGt(e,t,n){return mt(e)||Me("Input Vega specification must be an object."),t=mS(xGt(),t,e.config),bGt(e,new XLe(t,n)).toRuntime()}var TGt="5.29.0";gn(qE,S4t,dBt,HBt,w9t,I9t,tUt,O9t,rUt,aUt,yUt,SUt);const AGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:bs,CanvasHandler:Yk,CanvasRenderer:B$,DATE:Ku,DAY:aa,DAYOFYEAR:Ah,Dataflow:zw,Debug:wDe,Error:WJ,EventStream:PF,Gradient:F3e,GroupItem:qF,HOURS:Ml,Handler:Pee,HybridHandler:k$e,HybridRenderer:VV,Info:_De,Item:HF,MILLISECONDS:Hf,MINUTES:Ll,MONTH:da,Marks:Fl,MultiPulse:dZ,None:bDe,Operator:Gr,Parameters:NF,Pulse:S0,QUARTER:Yu,RenderType:Jg,Renderer:Gk,ResourceLoader:q3e,SECONDS:Cc,SVGHandler:g$e,SVGRenderer:Fee,SVGStringRenderer:I$e,Scenegraph:u$e,TIME_UNITS:iZ,Transform:Pe,View:pLe,WEEK:Is,Warn:GJ,YEAR:Ro,accessor:tl,accessorFields:fa,accessorName:Yi,array:ht,ascending:TF,bandwidthNRD:gZ,bin:ROe,bootstrapCI:NOe,boundClip:j$e,boundContext:Vk,boundItem:FV,boundMark:i$e,boundStroke:eg,changeset:Ob,clampRange:PDe,codegenExpression:UMe,compare:JJ,constant:ba,cumulativeLogNormal:EZ,cumulativeNormal:OF,cumulativeUniform:AZ,dayofyear:HDe,debounce:ZJ,defaultLocale:aZ,definition:COe,densityLogNormal:wZ,densityNormal:yZ,densityUniform:TZ,domChild:As,domClear:uc,domCreate:Xg,domFind:Nee,dotbin:POe,error:Me,expressionFunction:cs,extend:gn,extent:Th,extentIndex:DDe,falsy:_g,fastmap:yS,field:Tc,flush:ODe,font:XF,fontFamily:Wk,fontSize:Gh,format:hD,formatLocale:C$,formats:cZ,hasOwnProperty:Ft,id:Nk,identity:va,inferType:gOe,inferTypes:yOe,ingest:wr,inherits:lt,inrange:sw,interpolate:uee,interpolateColors:zF,interpolateRange:S3e,intersect:$$e,intersectBoxLine:ow,intersectPath:gee,intersectPoint:yee,intersectRule:G3e,isArray:Fe,isBoolean:Fy,isDate:x0,isFunction:vn,isIterable:$De,isNumber:lr,isObject:mt,isRegExp:MDe,isString:pt,isTuple:kF,key:eZ,lerp:LDe,lineHeight:iy,loader:CF,locale:pOe,logger:YJ,lruCache:FDe,markup:Lee,merge:jDe,mergeConfig:mS,multiLineOffset:Iee,one:pS,pad:BDe,panLinear:ADe,panLog:CDe,panPow:IDe,panSymlog:kDe,parse:SGt,parseExpression:Tte,parseSelector:By,path:UL,pathCurves:hee,pathEqual:B$e,pathParse:KE,pathRectangle:U3e,pathRender:J2,pathSymbols:B3e,pathTrail:z3e,peek:Qn,point:JF,projection:Xee,quantileLogNormal:xZ,quantileNormal:$F,quantileUniform:CZ,quantiles:pZ,quantizeInterpolator:T3e,quarter:RDe,quartiles:mZ,get random(){return Ic},randomInteger:IFt,randomKDE:bZ,randomLCG:CFt,randomLogNormal:OOe,randomMixture:$Oe,randomNormal:vZ,randomUniform:MOe,read:_Oe,regressionConstant:IZ,regressionExp:FOe,regressionLinear:kZ,regressionLoess:UOe,regressionLog:LOe,regressionPoly:BOe,regressionPow:jOe,regressionQuad:RZ,renderModule:ZF,repeat:pA,resetDefaultLocale:S6t,resetSVGClipId:H3e,resetSVGDefIds:Rjt,responseType:bOe,runtimeContext:tLe,sampleCurve:LF,sampleLogNormal:_Z,sampleNormal:DF,sampleUniform:SZ,scale:gr,sceneEqual:jee,sceneFromJSON:o$e,scenePickVisit:P$,sceneToJSON:s$e,sceneVisit:qf,sceneZOrder:vee,scheme:lee,serializeXML:S$e,setHybridRendererOptions:Ajt,setRandom:TFt,span:Pk,splitAccessPath:Wh,stringValue:nt,textMetrics:Sl,timeBin:aOe,timeFloor:QDe,timeFormatLocale:K2,timeInterval:vS,timeOffset:eOe,timeSequence:rOe,timeUnitSpecifier:VDe,timeUnits:sZ,toBoolean:tZ,toDate:nZ,toNumber:ua,toSet:Vf,toString:rZ,transform:IOe,transforms:qE,truncate:UDe,truthy:Ac,tupleid:Mt,typeParsers:kV,utcFloor:JDe,utcInterval:bS,utcOffset:tOe,utcSequence:iOe,utcdayofyear:GDe,utcquarter:NDe,utcweek:YDe,version:TGt,visitArray:Ig,week:qDe,writeConfig:gS,zero:Ug,zoomLinear:KJ,zoomLog:XJ,zoomPow:A$,zoomSymlog:QJ},Symbol.toStringTag,{value:"Module"}));function CGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var IGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},kGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},RGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const NGt=Array.prototype.slice,i1=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,NGt.call(t,1))},PGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var DGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:PGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return i1("join",arguments)},indexof:function(){return i1("indexOf",arguments)},lastindexof:function(){return i1("lastIndexOf",arguments)},slice:function(){return i1("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return i1("substring",arguments,String)},split:function(){return i1("split",arguments,String)},replace:function(){return i1("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const OGt=["view","item","group","xy","x","y"],bH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&bH.add(setImmediate);const $Gt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:IGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),bH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||DGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>kGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>RGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,bH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function PT(e,t,n,r,i,s){const o=a=>$Gt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,OGt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var MGt={operator(e,t){const n=t.ast,r=e.functions;return i=>PT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>PT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>PT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return PT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=PT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&CGt(o,r,s),l}}};const LGt="vega-lite",FGt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',jGt="5.18.1",BGt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],UGt="https://vega.github.io/vega-lite/",zGt="Vega-Lite is a concise high-level language for interactive visualization.",VGt=["vega","chart","visualization"],HGt="build/vega-lite.js",qGt="build/vega-lite.min.js",WGt="build/vega-lite.min.js",GGt="build/src/index",YGt="build/src/index.d.ts",KGt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},XGt=["bin","build","src","vega-lite*","tsconfig.json"],QGt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},JGt={type:"git",url:"https://github.com/vega/vega-lite.git"},ZGt="BSD-3-Clause",eYt={url:"https://github.com/vega/vega-lite/issues"},tYt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},nYt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},rYt={vega:"^5.24.0"},iYt={node:">=18"},sYt="yarn@1.22.19",oYt={name:LGt,author:FGt,version:jGt,collaborators:BGt,homepage:UGt,description:zGt,keywords:VGt,main:HGt,unpkg:qGt,jsdelivr:WGt,module:GGt,types:YGt,bin:KGt,files:XGt,scripts:QGt,repository:JGt,license:ZGt,bugs:eYt,devDependencies:tYt,dependencies:nYt,peerDependencies:rYt,engines:iYt,packageManager:sYt};function Zte(e){return!!e.or}function ene(e){return!!e.and}function tne(e){return!!e.not}function DD(e,t){if(tne(e))DD(e.not,t);else if(ene(e))for(const n of e.and)DD(n,t);else if(Zte(e))for(const n of e.or)DD(n,t);else t(e)}function Hw(e,t){return tne(e)?{not:Hw(e.not,t)}:ene(e)?{and:e.and.map(n=>Hw(n,t))}:Zte(e)?{or:e.or.map(n=>Hw(n,t))}:t(e)}const en=structuredClone;function QLe(e){throw new Error(e)}function ex(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function ju(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fr(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=pt(e)?e:Fr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function _H(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function ib(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function nne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function JLe(e,...t){for(const n of t)aYt(e,n??{});return e}function aYt(e,t){for(const n of Ye(t))gS(e,n,t[n],!0)}function Yd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function uYt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function ZLe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function rne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function wH(e){const t=new Set;for(const n of e){const i=Wh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function ine(e,t){return e===void 0||t===void 0?!0:rne(wH(e),wH(t))}function Lr(e){return Ye(e).length===0}const Ye=Object.keys,No=Object.values,uy=Object.entries;function lI(e){return e===!0||e===!1}function xi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function TC(e,t){return tne(e)?`!(${TC(e.not,t)})`:ene(e)?`(${e.and.map(n=>TC(n,t)).join(") && (")})`:Zte(e)?`(${e.or.map(n=>TC(n,t)).join(") || (")})`:t(e)}function Z$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Z$(e[n],t)&&delete e[n],Lr(e)}function tR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function sne(e,t="datum"){const n=Wh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function e6e(e,t="datum"){return`${t}[${nt(Wh(e).join("."))}]`}function lYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function kc(e){return`${Wh(e).map(lYt).join("\\.")}`}function sb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function AS(e){return`${Wh(e).join(".")}`}function tx(e){return e?Wh(e).length:0}function as(...e){for(const t of e)if(t!==void 0)return t}let t6e=42;function n6e(e){const t=++t6e;return e?String(e)+t:t}function cYt(){t6e=42}function r6e(e){return i6e(e)?e:`__${e}`}function i6e(e){return e.startsWith("__")}function cI(e){if(e!==void 0)return(e%360+360)%360}function y4(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Eme=Object.getPrototypeOf(structuredClone({}));function El(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!El(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!El(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Eme.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Eme.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!El(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const em="row",tm="column",v4="facet",Si="x",co="y",nd="x2",Xh="y2",Uy="xOffset",CS="yOffset",rd="radius",ng="radius2",Uc="theta",rg="theta2",id="latitude",sd="longitude",od="latitude2",Rc="longitude2",Xu="color",Qh="fill",Jh="stroke",Qu="shape",ig="size",jb="angle",sg="opacity",zy="fillOpacity",Vy="strokeOpacity",Hy="strokeWidth",qy="strokeDash",nR="text",nx="order",rR="detail",b4="key",ob="tooltip",_4="href",w4="url",E4="description",fYt={x:1,y:1,x2:1,y2:1},s6e={theta:1,theta2:1,radius:1,radius2:1};function o6e(e){return e in s6e}const one={longitude:1,longitude2:1,latitude:1,latitude2:1};function a6e(e){switch(e){case id:return"y";case od:return"y2";case sd:return"x";case Rc:return"x2"}}function u6e(e){return e in one}const dYt=Ye(one),ane={...fYt,...s6e,...one,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qw(e){return e===Xu||e===Qh||e===Jh}const l6e={row:1,column:1,facet:1},mc=Ye(l6e),une={...ane,...l6e},hYt=Ye(une),{order:Hsn,detail:qsn,tooltip:Wsn,...pYt}=une,{row:Gsn,column:Ysn,facet:Ksn,...mYt}=pYt;function gYt(e){return!!mYt[e]}function c6e(e){return!!une[e]}const yYt=[nd,Xh,od,Rc,rg,ng];function f6e(e){return Bb(e)!==e}function Bb(e){switch(e){case nd:return Si;case Xh:return co;case od:return id;case Rc:return sd;case rg:return Uc;case ng:return rd}return e}function ly(e){if(o6e(e))switch(e){case Uc:return"startAngle";case rg:return"endAngle";case rd:return"outerRadius";case ng:return"innerRadius"}return e}function Zh(e){switch(e){case Si:return nd;case co:return Xh;case id:return od;case sd:return Rc;case Uc:return rg;case rd:return ng}}function Ju(e){switch(e){case Si:case nd:return"width";case co:case Xh:return"height"}}function d6e(e){switch(e){case Si:return"xOffset";case co:return"yOffset";case nd:return"x2Offset";case Xh:return"y2Offset";case Uc:return"thetaOffset";case rd:return"radiusOffset";case rg:return"theta2Offset";case ng:return"radius2Offset"}}function lne(e){switch(e){case Si:return"xOffset";case co:return"yOffset"}}function vYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const bYt=Ye(ane),{x:Xsn,y:Qsn,x2:Jsn,y2:Zsn,xOffset:eon,yOffset:ton,latitude:non,longitude:ron,latitude2:ion,longitude2:son,theta:oon,theta2:aon,radius:uon,radius2:lon,...cne}=ane,_Yt=Ye(cne),fne={x:1,y:1},ep=Ye(fne);function us(e){return e in fne}const dne={theta:1,radius:1},wYt=Ye(dne);function x4(e){return e==="width"?Si:co}const h6e={xOffset:1,yOffset:1};function iR(e){return e in h6e}const{text:con,tooltip:fon,href:don,url:hon,description:pon,detail:mon,key:gon,order:yon,...p6e}=cne,EYt=Ye(p6e);function xYt(e){return!!cne[e]}function SYt(e){switch(e){case Xu:case Qh:case Jh:case ig:case Qu:case sg:case Hy:case qy:return!0;case zy:case Vy:case jb:return!1}}const m6e={...fne,...dne,...h6e,...p6e},S4=Ye(m6e);function og(e){return!!m6e[e]}function TYt(e,t){return CYt(e)[t]}const g6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:von,...AYt}=g6e;function CYt(e){switch(e){case Xu:case Qh:case Jh:case E4:case rR:case b4:case ob:case _4:case nx:case sg:case zy:case Vy:case Hy:case v4:case em:case tm:return g6e;case Si:case co:case Uy:case CS:case id:case sd:return AYt;case nd:case Xh:case od:case Rc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ig:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case qy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Qu:return{point:"always",geoshape:"always"};case nR:return{text:"always"};case jb:return{point:"always",square:"always",text:"always"};case w4:return{image:"always"};case Uc:return{text:"always",arc:"always"};case rd:return{text:"always",arc:"always"};case rg:case ng:return{arc:"always"}}}function LB(e){switch(e){case Si:case co:case Uc:case rd:case Uy:case CS:case ig:case jb:case Hy:case sg:case zy:case Vy:case nd:case Xh:case rg:case ng:return;case v4:case em:case tm:case Qu:case qy:case nR:case ob:case _4:case w4:case E4:return"discrete";case Xu:case Qh:case Jh:return"flexible";case id:case sd:case od:case Rc:case rR:case b4:case nx:return}}const IYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},kYt={count:1,min:1,max:1};function Dm(e){return!!e&&!!e.argmin}function Wy(e){return!!e&&!!e.argmax}function hne(e){return pt(e)&&!!IYt[e]}const RYt=new Set(["count","valid","missing","distinct"]);function y6e(e){return pt(e)&&RYt.has(e)}function NYt(e){return pt(e)&&Hn(["min","max"],e)}const PYt=new Set(["count","sum","distinct","valid","missing"]),DYt=new Set(["mean","average","median","q1","q3","min","max"]);function v6e(e){return Fy(e)&&(e=M4(e,void 0)),"bin"+Ye(e).map(t=>T4(e[t])?xi(`_${t}_${uy(e[t])}`):xi(`_${t}_${e[t]}`)).join("")}function ii(e){return e===!0||Ub(e)&&!e.binned}function Eo(e){return e==="binned"||Ub(e)&&e.binned===!0}function Ub(e){return mt(e)}function T4(e){return e==null?void 0:e.param}function xme(e){switch(e){case em:case tm:case ig:case Xu:case Qh:case Jh:case Hy:case sg:case zy:case Vy:case Qu:return 6;case qy:return 4;default:return 10}}function sR(e){return!!(e!=null&&e.expr)}function Eu(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=ml(e[r]);return n}function b6e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=ex(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Ng(e){return pt(e)||Fe(e)&&pt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function Gy(e){return!!e.step}function OYt(e){return Fe(e)?!1:"fields"in e&&!("data"in e)}function $Yt(e){return Fe(e)?!1:"fields"in e&&"data"in e}function qp(e){return Fe(e)?!1:"field"in e&&"data"in e}const MYt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},LYt=Ye(MYt),FYt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},EH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function _6e(e){const t=Fe(e.condition)?e.condition.map(Sme):Sme(e.condition);return{...ml(e),condition:t}}function ml(e){if(sR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Sme(e){if(sR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function li(e){if(sR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function jYt(e){return Rt(e)?e.signal:nt(e)}function Tme(e){return Rt(e)?e.signal:nt(e.value)}function xf(e){return Rt(e)?e.signal:e==null?null:nt(e)}function BYt(e,t,n){for(const r of n){const i=Om(r,t.markDef,t.config);i!==void 0&&(e[r]=li(i))}return e}function w6e(e){return[].concat(e.type,e.style??[])}function _r(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Om(e,t,n,r)}function Om(e,t,n,{vgChannel:r}={}){return as(r?eM(e,t,n.style):void 0,eM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function eM(e,t,n){return E6e(e,w6e(t),n)}function E6e(e,t,n){t=ht(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function x6e(e,t){return ht(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function S6e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(El(i,r))return;n.push(r)}),n}function T6e(e,t){return El(e,t)||!t?e:e?[...ht(e),...ht(t)].join(", "):t}function A6e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Ng(n)||Rt(n))&&(Ng(r)||Rt(r)))return{explicit:e.explicit,value:T6e(n,r)};if(Ng(n)||Rt(n))return{explicit:e.explicit,value:n};if(Ng(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Ng(n)&&!Rt(n)&&!Ng(r)&&!Rt(r))return{explicit:e.explicit,value:S6e(n,r)};throw new Error("It should never reach here")}function pne(e){return`Invalid specification ${Fr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const UYt='Autosize "fit" only works for single views and layered views.';function Ame(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Cme(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Ime(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ju(e)}.`:'Dropping "fit" because spec has discrete size.'}function mne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function kme(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function zYt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function VYt(e){return`The "nearest" transform is not supported for ${e} marks.`}function C6e(e){return`Selection not supported for ${e} yet.`}function HYt(e){return`Cannot find a selection named "${e}".`}const qYt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",WYt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",GYt="Legend bindings are only supported for selections over an individual field or encoding channel.";function YYt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function KYt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const XYt="The same selection must be used to override scale domains in a layered view.",QYt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function JYt(e){return`Unknown repeated value "${e}".`}function Rme(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const ZYt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function eKt(e){return`Unrecognized parse "${e}".`}function Nme(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const tKt="Attempt to add the same child twice.";function nKt(e){return`Ignoring an invalid transform: ${Fr(e)}.`}const rKt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Pme(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function iKt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fr(t)} is overridden by a child projection ${Fr(n)}.`}const sKt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function oKt(e){return`${e}Offset dropped because ${e} is continuous`}function aKt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fr(n)}}.`}function I6e(e){return`Invalid field type "${e}".`}function uKt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function lKt(e){return`Invalid aggregation operator "${e}".`}function k6e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function cKt(e){return`Position range does not support relative band size for ${e}.`}function xH(e,t){return`Dropping ${Fr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const fKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function A4(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function dKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function hKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function pKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function mKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function FB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function gKt(e){return`The ${e} for range marks cannot be an expression`}function yKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function vKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function bKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function _Kt(e){return`Cannot use the relative band size with ${e} scale.`}function wKt(e){return`Using unaggregated domain with raw field has no effect (${Fr(e)}).`}function EKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function xKt(e){return`Unaggregated domain is currently unsupported for log scale (${Fr(e)}).`}function SKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function TKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function AKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function R6e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function N6e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function CKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using ${Fr(n)}.`}function IKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using the union of the two domains.`}function kKt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function RKt(e){return`Dropping sort property ${Fr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Dme="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",NKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",PKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",DKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function OKt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function $Kt(e){return`Stack is applied to a non-linear scale (${e}).`}function MKt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function tM(e,t){return`Invalid ${e}: ${Fr(t)}.`}function LKt(e){return`Dropping day from datetime ${Fr(e)} as day cannot be combined with other units.`}function FKt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function jKt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function BKt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Ome(e){return`1D error band does not support ${e}.`}function P6e(e){return`Channel ${e} is required for "binned" bin.`}function UKt(e){return`Channel ${e} should not be used with "binned" bin.`}function zKt(e){return`Domain for ${e} is required for threshold scale.`}const D6e=YJ(GJ);let rx=D6e;function VKt(e){return rx=e,rx}function HKt(){return rx=D6e,rx}function Je(...e){rx.warn(...e)}function qKt(...e){rx.debug(...e)}function zb(e){if(e&&mt(e)){for(const t of yne)if(t in e)return!0}return!1}const O6e=["january","february","march","april","may","june","july","august","september","october","november","december"],WKt=O6e.map(e=>e.substr(0,3)),$6e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],GKt=$6e.map(e=>e.substr(0,3));function YKt(e){if(y4(e)&&(e=+e),lr(e))return e>4&&Je(tM("quarter",e)),e-1;throw new Error(tM("quarter",e))}function KKt(e){if(y4(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=O6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=WKt.indexOf(r);if(i!==-1)return i;throw new Error(tM("month",e))}}function XKt(e){if(y4(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=$6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=GKt.indexOf(r);if(i!==-1)return i;throw new Error(tM("day",e))}}function gne(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Je(LKt(e)),e=en(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?KKt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?YKt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?XKt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ab(e){const n=gne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function QKt(e){const n=gne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function JKt(e){const t=gne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const M6e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},yne=Ye(M6e);function ZKt(e){return!!M6e[e]}function Vb(e){return mt(e)?e.binned:L6e(e)}function L6e(e){return e&&e.startsWith("binned")}function vne(e){return e.startsWith("utc")}function eXt(e){return e.substring(3)}const tXt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function C4(e){return yne.filter(t=>j6e(e,t))}function F6e(e){const t=C4(e);return t[t.length-1]}function j6e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function nXt(e,t,{end:n}={end:!1}){const r=sne(t),i=vne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of yne)j6e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),QKt(a)}function B6e(e){if(!e)return;const t=C4(e);return`timeUnitSpecifier(${Fr(t)}, ${Fr(tXt)})`}function rXt(e,t,n){if(!e)return;const r=B6e(e);return`${n||vne(e)?"utc":"time"}Format(${t}, ${r})`}function ao(e){if(!e)return;let t;return pt(e)?L6e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),vne(t.unit)&&(t.utc=!0,t.unit=eXt(t.unit)),t}function iXt(e){const{utc:t,...n}=ao(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>xi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>xi(`_${r}_${n[r]}`)).join("")}function U6e(e,t=n=>n){const n=ao(e),r=F6e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=z6e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(ab(a))} - ${t(ab(i))}`}}const sXt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function oXt(e){return!!sXt[e]}function z6e(e,t=1){if(oXt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function aXt(e){return e==null?void 0:e.param}function bne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function _ne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function wne(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Ene(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function xne(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Sne(e){if(e!=null&&e.field){if(Fe(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function Tne(e){return!!(e!=null&&e.field)&&(Fe(e.oneOf)||Fe(e.in))}function uXt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function V6e(e){return Tne(e)||bne(e)||Sne(e)||_ne(e)||Ene(e)||wne(e)||xne(e)}function gd(e,t){return L4(e,{timeUnit:t,wrapTime:!0})}function lXt(e,t){return e.map(n=>gd(n,t))}function H6e(e,t=!0){const{field:n}=e,r=ao(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:nXt(i,n)})`:o;if(bne(e))return`${a}===${gd(e.equal,i)}`;if(_ne(e)){const u=e.lt;return`${a}<${gd(u,i)}`}else if(Ene(e)){const u=e.gt;return`${a}>${gd(u,i)}`}else if(wne(e)){const u=e.lte;return`${a}<=${gd(u,i)}`}else if(xne(e)){const u=e.gte;return`${a}>=${gd(u,i)}`}else{if(Tne(e))return`indexof([${lXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(uXt(e))return Ane(a,e.valid);if(Sne(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+gd(l,i)+", "+gd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${gd(l,i)}`),c!==null&&f.push(`${a} <= ${gd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fr(e)}`)}function Ane(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function cXt(e){return V6e(e)&&e.timeUnit?{...e,timeUnit:ao(e.timeUnit)}:e}const oR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function fXt(e){return e==="quantitative"||e==="temporal"}function q6e(e){return e==="ordinal"||e==="nominal"}const ub=oR.quantitative,Cne=oR.ordinal,ix=oR.temporal,Ine=oR.nominal,IS=oR.geojson;function dXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ub:return"quantitative";case"t":case ix:return"temporal";case"o":case Cne:return"ordinal";case"n":case Ine:return"nominal";case IS:return"geojson"}}const Bu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},SH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function hXt(e,t){const n=SH[e],r=SH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const pXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function $me(e){return pXt[e]}const W6e=new Set(["linear","log","pow","sqrt","symlog"]),G6e=new Set([...W6e,"time","utc"]);function Y6e(e){return W6e.has(e)}const K6e=new Set(["quantile","quantize","threshold"]),mXt=new Set([...G6e,...K6e,"sequential","identity"]),gXt=new Set(["ordinal","bin-ordinal","point","band"]);function uo(e){return gXt.has(e)}function Bl(e){return mXt.has(e)}function Sf(e){return G6e.has(e)}function sx(e){return K6e.has(e)}const yXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function vXt(e){return!pt(e)&&!!e.name}function X6e(e){return e==null?void 0:e.param}function bXt(e){return e==null?void 0:e.unionWith}function _Xt(e){return mt(e)&&"field"in e}const wXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:bon,domain:_on,range:won,rangeMax:Eon,rangeMin:xon,scheme:Son,...EXt}=wXt,xXt=Ye(EXt);function TH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Sf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Sf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Sf(e);case"nice":return Sf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Bl(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function Q6e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qw(e)?void 0:bKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function SXt(e,t){return Hn([Cne,Ine],t)?e===void 0||uo(e):t===ix?Hn([Bu.TIME,Bu.UTC,void 0],e):t===ub?Y6e(e)||sx(e)||e===void 0:!0}function TXt(e,t,n=!1){if(!og(e))return!1;switch(e){case Si:case co:case Uy:case CS:case Uc:case rd:return Sf(t)||t==="band"?!0:t==="point"?!n:!1;case ig:case Hy:case sg:case zy:case Vy:case jb:return Sf(t)||sx(t)||Hn(["band","point","ordinal"],t);case Xu:case Qh:case Jh:return t!=="band";case qy:case Qu:return t==="ordinal"||sx(t)}}function kne(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Nne(e);return Ze(n)&&!y6e(n.aggregate)&&i&&Sf(i.get("type"))?AXt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function AXt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return _r("invalid",n,i)===null?[CXt(e,t),r]:r}function CXt(e,t){const n=Rne(e,!0),i=Bb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Rne(e,t=!0){return Ane(pt(e)?e:at(e,{expr:"datum"}),!t)}function IXt(e){const{datum:t}=e;return zb(t)?ab(t):`${Fr(t)}`}function bv(e,t,n,r){const i={};if(t&&(i.scale=t),tp(e)){const{datum:s}=e;zb(s)?i.signal=ab(s):Rt(s)?i.signal=s.signal:sR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function nM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function kXt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Nne({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(an(t)){const f=o==null?void 0:o.get("type");if(Za(t)){c??(c=cy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ii(d)||c&&h&&p===ix)return a!=null&&a.impute?bv(t,s,{binSuffix:"mid"},{offset:u}):c&&!uo(f)?nM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):bv(t,s,cR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Eo(d)){if(Ze(n))return nM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je(P6e(e===Si?nd:Xh))}}return bv(t,s,uo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Wf(t)){const f=t.value,d=u?{offset:u}:{};return{...AC(e,f),...d}}}return vn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function AC(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:li(t)}function lb(e){return e&&e!=="number"&&e!=="time"}function J6e(e,t,n){return`${e}(${t}${n?`, ${Fr(n)}`:""})`}const RXt="  ";function Pne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(lb(n))return Tf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=Z6e(e,r,i),a=ox(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Tf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Tf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Tf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(ux(e)){const c=PXt({field:o,timeUnit:Ze(e)?(u=ao(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:qb(e)&&((l=e.scale)==null?void 0:l.type)===Bu.UTC});return c?{signal:c}:void 0}if(t=AH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&ii(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:aR(o,c,t,n,s)}}else return t||ox(e)==="quantitative"?{signal:`${nFe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function Z6e(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):IXt(e)}function Tf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=Z6e(e,r,i)),o!=="datum.value"&&Ze(e)&&ii(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:aR(o,a,t,n,s)}}return{signal:J6e(n,o,t)}}function eFe(e,t,n,r,i,s){var o;if(!(pt(r)&&lb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&ox(e)==="quantitative"&&(i.normalizedNumberFormatType&&ax(e)&&e.stack==="normalize"||i.numberFormatType))){if(ax(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return AH({type:"quantitative",config:i,normalizeStack:!0});if(ux(e)){const a=Ze(e)?(o=ao(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:NXt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return AH({type:t,specifiedFormat:n,config:i})}}function tFe(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(ux(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=ao(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function AH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(pt(t))return t;if(e===ub)return r?n.normalizedNumberFormat:n.numberFormat}function NXt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:B6e(t)}:r?void 0:n.timeFormat)}function nFe(e,t){return`format(${e}, "${t||""}")`}function Mme(e,t,n,r){return lb(n)?J6e(n,e,t):nFe(e,(pt(t)?t:void 0)??r.numberFormat)}function aR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return aR(e,t,i.numberFormat,i.numberFormatType,i);const s=Mme(e,n,r,i),o=Mme(t,n,r,i);return`${Ane(e,!1)} ? "null" : ${s} + "${RXt}" + ${o}`}function PXt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):rXt(t,e,s)}const su={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},rFe=su.arc,I4=su.area,k4=su.bar,DXt=su.image,R4=su.line,N4=su.point,OXt=su.rect,rM=su.rule,iFe=su.text,Dne=su.tick,$Xt=su.trail,One=su.circle,$ne=su.square,sFe=su.geoshape;function Hb(e){return["line","area","trail"].includes(e)}function fI(e){return["rect","bar","image","arc"].includes(e)}const MXt=new Set(Ye(su));function Ih(e){return e.type}const LXt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],FXt=["fill","fillOpacity"],jXt=[...LXt,...FXt],BXt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Lme=Ye(BXt),UXt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},zXt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},VXt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},oFe=Ye(VXt);function cb(e){return e&&e.band!=null}const HXt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},aFe=5,qXt={binSpacing:1,continuousBandSize:aFe,minBandSize:.25,timeUnitBandPosition:.5},WXt={binSpacing:0,continuousBandSize:aFe,minBandSize:.25,timeUnitBandPosition:.5},GXt={thickness:1};function YXt(e){return Ih(e)?e.type:e}const P4="min",KXt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Fme(e){return e in KXt}function uFe(e){return!!(e!=null&&e.encoding)}function ch(e){return e&&(e.op==="count"||!!e.field)}function lFe(e){return e&&Fe(e)}function uR(e){return"row"in e||"column"in e}function Mne(e){return!!e&&"header"in e}function D4(e){return"facet"in e}function XXt(e){return e.param}function QXt(e){return e&&!pt(e)&&"repeat"in e}function jme(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Lne(e){return"sort"in e}function cy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(an(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Om("timeUnitBandPosition",n,r);if(ii(s))return .5}}function cFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Ju(e),u=_r(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Om("timeUnitBandSize",r,i)};if(ii(h)&&!uo(s))return{band:1}}if(fI(r.type))return s?uo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function fFe(e,t,n,r){return ii(e.bin)||e.timeUnit&&Za(e)&&e.type==="temporal"?cy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function dFe(e){return e&&!!e.sort&&!e.field}function O4(e){return e&&"condition"in e}function $4(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&Ze(t)}function lR(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&an(t)}function JXt(e){const t=e==null?void 0:e.condition;return!!t&&(Fe(t)||Wf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function ox(e){return e==null?void 0:e.type}function tp(e){return e&&"datum"in e}function n0(e){return Za(e)&&!sM(e)||iM(e)}function Bme(e){return Za(e)&&e.type==="quantitative"&&!e.bin||iM(e)}function iM(e){return tp(e)&&lr(e.datum)}function an(e){return Ze(e)||tp(e)}function Za(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Wf(e){return e&&"value"in e&&"value"in e}function qb(e){return e&&("scale"in e||"sort"in e)}function ax(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function hFe(e){return e&&"legend"in e}function pFe(e){return e&&("format"in e||"formatType"in e)}function ZXt(e){return ju(e,["legend","axis","header","scale"])}function eQt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(nQt(e))n=r6e("count");else{let o;if(!t.nofn)if(eQt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ii(a)?(o=v6e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Wy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Dm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Vb(l)&&(o=iXt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?AS(n):t.expr?e6e(n,t.expr)+s:kc(n)+s}function sM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(I6e(e.type))}function tQt(e){var t;return qb(e)&&sx((t=e.scale)==null?void 0:t.type)}function nQt(e){return e.aggregate==="count"}function rQt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ii(r))return`${n} (binned)`;if(i&&!Vb(i)){const a=(o=ao(i))==null?void 0:o.unit;if(a)return`${n} (${C4(a).join("-")})`}else if(s)return Wy(s)?`${n} for max ${s.argmax}`:Dm(s)?`${n} for min ${s.argmin}`:`${tR(s)} of ${n}`;return n}function iQt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Wy(t))return`${i} for argmax(${t.argmax})`;if(Dm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Vb(r)?ao(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ii(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const mFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return iQt(e);default:return rQt(e,t)}};let gFe=mFe;function yFe(e){gFe=e}function sQt(){yFe(mFe)}function Ww(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Fne(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?jne(s,t):void 0;return n?as(i,s.title,o):i??s.title??o}function Fne(e){if(ax(e)&&e.axis)return e.axis;if(hFe(e)&&e.legend)return e.legend;if(Mne(e)&&e.header)return e.header}function jne(e,t){return gFe(e,t)}function oM(e){if(pFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Fne(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function oQt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Lne(e)&&Fe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Wy(n)&&!Dm(n))return"quantitative";if(qb(e)&&((s=e.scale)!=null&&s.type))switch(SH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function kh(e){if(Ze(e))return e;if($4(e))return e.condition}function ks(e){if(an(e))return e;if(lR(e))return e.condition}function vFe(e,t,n,r={}){if(pt(e)||lr(e)||Fy(e)){const i=pt(e)?"string":lr(e)?"number":"boolean";return Je(aKt(t,i,e)),{value:e}}return an(e)?aM(e,t,n,r):lR(e)?{...e,condition:aM(e.condition,t,n,r)}:e}function aM(e,t,n,r){if(pFe(e)){const{format:i,formatType:s,...o}=e;if(lb(s)&&!n.customFormatTypes)return Je(Pme(t)),aM(o,t,n,r)}else{const i=ax(e)?"axis":hFe(e)?"legend":Mne(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(lb(o)&&!n.customFormatTypes)return Je(Pme(t)),aM({...e,[i]:a},t,n,r)}}return Ze(e)?Bne(e,t,r):aQt(e)}function aQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":pt(n)?"nominal":zb(n)?"temporal":void 0,{...e,type:t}}function Bne(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!hne(r)&&!Wy(r)&&!Dm(r)&&(Je(lKt(r)),delete a.aggregate),i&&(a.timeUnit=ao(i)),o&&(a.field=`${o}`),ii(s)&&(a.bin=M4(s,t)),Eo(s)&&!us(t)&&Je(UKt(t)),Za(a)){const{type:u}=a,l=dXt(u);u!==l&&(a.type=l),u!=="quantitative"&&y6e(r)&&(Je(uKt(u,r)),a.type="quantitative")}else if(!f6e(t)){const u=oQt(a,t);a.type=u}if(Za(a)){const{compatible:u,warning:l}=uQt(a,t)||{};u===!1&&Je(l)}if(Lne(a)&&pt(a.sort)){const{sort:u}=a;if(Fme(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Fme(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Mne(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function M4(e,t){return Fy(e)?{maxbins:xme(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:xme(t)}:e}const __={compatible:!0};function uQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case em:case tm:case v4:return sM(e)?__:{compatible:!1,warning:hKt(t)};case Si:case co:case Uy:case CS:case Xu:case Qh:case Jh:case nR:case rR:case b4:case ob:case _4:case w4:case jb:case Uc:case rd:case E4:return __;case sd:case Rc:case id:case od:return n!==ub?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:__;case sg:case zy:case Vy:case Hy:case ig:case rg:case ng:case nd:case Xh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:__;case Qu:case qy:return!sM(e)&&!tQt(e)?{compatible:!1,warning:pKt(t)}:__;case nx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:__}}function ux(e){const{formatType:t}=oM(e);return t==="time"||!t&&lQt(e)}function lQt(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function L4(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=ao(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return sR(e)?a=e.expr:Rt(e)?a=e.signal:zb(e)?(o=!0,a=ab(e)):(pt(e)||lr(e))&&o&&(a=`datetime(${Fr(e)})`,ZKt(s)&&(lr(e)&&e<1e4||pt(e)&&isNaN(Date.parse(e)))&&(a=ab({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Fr(e)}function bFe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!Vb(e.timeUnit)?e.timeUnit:void 0,s=L4(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function cR(e,t){return ii(e.bin)?og(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Ume={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function fR(e){return e==null?void 0:e.condition}const _Fe=["domain","grid","labels","ticks","title"],cQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},wFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},fQt={...wFe,style:1,labelExpr:1,encoding:1};function zme(e){return!!fQt[e]}const dQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},EFe=Ye(dQt);function ag(e){return"mark"in e}class F4{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ag(t)?YXt(t.mark)===this.name:!1}}function _v(e,t){const n=e&&e[t];return n?Fe(n)?ib(n,r=>!!r.field):Ze(n)||$4(n):!1}function xFe(e,t){const n=e&&e[t];return n?Fe(n)?ib(n,r=>!!r.field):Ze(n)||tp(n)||lR(n):!1}function SFe(e,t){if(us(t)){const n=e[t];if((Ze(n)||tp(n))&&(q6e(n.type)||Ze(n)&&n.timeUnit)){const r=lne(t);return xFe(e,r)}}return!1}function Une(e){return ib(hYt,t=>{if(_v(e,t)){const n=e[t];if(Fe(n))return ib(n,r=>!!r.aggregate);{const r=kh(n);return r&&!!r.aggregate}}return!1})}function TFe(e,t){const n=[],r=[],i=[],s=[],o={};return zne(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Fne(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:Ww(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Wy(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Dm(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),Za(a)&&ii(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),cR(a,u)&&n.push(at(a,{binSuffix:"range"})),us(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",f6e(u)||(y.type=ub)}else if(d&&!Vb(d)){i.push({timeUnit:d,field:l,as:g});const v=Za(a)&&a.type!==ix&&"time";v&&(u===nR||u===ob?y.formatType=v:xYt(u)?y.legend={formatType:v,...y.legend}:us(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function hQt(e,t,n){const r=TYt(t,n);if(r){if(r==="binned"){const i=e[t===nd?Si:co];return!!(Ze(i)&&Ze(e[t])&&Eo(i.bin))}}else return!1;return!0}function pQt(e,t,n,r){const i={};for(const s of Ye(e))c6e(s)||Je(dKt(s));for(let s of bYt){if(!e[s])continue;const o=e[s];if(iR(s)){const a=vYt(s),u=i[a];if(Ze(u)&&fXt(u.type)&&Ze(o)&&!u.timeUnit){Je(oKt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(sKt),s=Uc),!hQt(e,s,t)){Je(A4(s,t));continue}if(s===ig&&t==="line"){const a=kh(e[s]);if(a!=null&&a.aggregate){Je(fKt);continue}}if(s===Xu&&(n?"fill"in e:"stroke"in e)){Je(k6e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===rR||s===nx&&!Fe(o)&&!Wf(o)||s===ob&&Fe(o)){if(o){if(s===nx){const a=e[s];if(dFe(a)){i[s]=a;continue}}i[s]=ht(o).reduce((a,u)=>(Ze(u)?a.push(Bne(u,s)):Je(xH(u,s)),a),[])}}else{if(s===ob&&o===null)i[s]=null;else if(!Ze(o)&&!tp(o)&&!Wf(o)&&!O4(o)&&!Rt(o)){Je(xH(o,s));continue}i[s]=vFe(o,s,r)}}return i}function j4(e,t){const n={};for(const r of Ye(e)){const i=vFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function mQt(e){const t=[];for(const n of Ye(e))if(_v(e,n)){const r=e[n],i=ht(r);for(const s of i)Ze(s)?t.push(s):$4(s)&&t.push(s.condition)}return t}function zne(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(Fe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function gQt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return Fe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function AFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Si:case co:case _4:case E4:case w4:case nd:case Xh:case Uy:case CS:case Uc:case rg:case rd:case ng:case id:case sd:case od:case Rc:case nR:case Qu:case jb:case ob:return n;case nx:if(e==="line"||e==="trail")return n;case rR:case b4:{const i=t[r];if(Fe(i)||Ze(i))for(const s of ht(i))s.aggregate||n.push(at(s,{}));return n}case ig:if(e==="trail")return n;case Xu:case Qh:case Jh:case sg:case zy:case Vy:case qy:case Hy:{const i=kh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function yQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Fe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Fe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function CH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Vne(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=mQt(n).map(ZXt);return{tooltip:[...i,...Yd(s,Vn)]}}function Vne(e){const{title:t,field:n}=e;return as(t,n)}function Hne(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Vne(n);return CFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function CFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Ih(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Fy(e[t])?{}:e[t]}}]:[]}function IFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:rP(s,n),continuousAxisChannelDef2:rP(o,n),continuousAxisChannelDefError:rP(a,n),continuousAxisChannelDefError2:rP(u,n),continuousAxis:i}}function rP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(BKt(n,t)),r}else return e}function kFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Ih(n)&&n.orient)return n.orient;if(n0(i)){if(n0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ux(s)&&!ux(i)?"horizontal":"vertical"}return"horizontal"}else{if(n0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const uM="boxplot",vQt=["box","median","outliers","rule","ticks"],bQt=new F4(uM,NFe);function RFe(e){return lr(e)?"tukey":e}function NFe(e,{config:t}){e={...e,encoding:j4(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Ih(n)?n:{type:n};i&&Je(C6e("boxplot"));const u=a.extent??t.boxplot.extent,l=_r("size",a,t),c=a.invalid,f=RFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=_Qt(e,u,t),T=AS(m.field),{color:A,size:C,...I}=b,R=ke=>Hne(a,g,m,ke,t.boxplot),M=R(I),P=R(b),O=(mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=R({...I,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:O}}}}),L=CH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?L:CH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...M({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...M({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],D=[...f!=="tukey"?H:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...F({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:PFe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:H},{tooltip:he,...ye}=I,{scale:Ie,axis:ve}=m,Ke=Vne(m),Ue=ju(ve,["title"]),gt=CFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...Lr(Ue)?{}:{axis:Ue}},...ye,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let rt;const be=[...d,...h,ce];return gt?rt={transform:be,layer:[gt,de]}:(rt=de,rt.transform.unshift(...be)),{...o,layer:[rt,{transform:p,layer:D}]}}function PFe(e){const t=AS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function _Qt(e,t,n){const r=kFe(e,uM),{continuousAxisChannelDef:i,continuousAxis:s}=IFe(e,r,uM),o=i.field,a=AS(o),u=RFe(t),l=[...PFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=yQt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=TFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const qne="errorbar",wQt=["ticks","rule"],EQt=new F4(qne,DFe);function DFe(e,{config:t}){e={...e,encoding:j4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=OFe(e,qne,t);delete s.size;const c=Hne(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function xQt(e,t){const{encoding:n}=e;if(SQt(n))return{orient:kFe(e,t),inputType:"raw"};const r=TQt(n),i=AQt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(an(a)&&an(u))throw new Error(`${t} cannot have both x2 and y2`);if(an(a)){if(n0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(an(u)){if(n0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(an(u)&&!an(a))throw new Error(`${t} cannot have xError2 without xError`);if(an(c)&&!an(l))throw new Error(`${t} cannot have yError2 without yError`);if(an(a)&&an(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(an(a)){if(n0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(an(l)){if(n0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function SQt(e){return(an(e.x)||an(e.y))&&!an(e.x2)&&!an(e.y2)&&!an(e.xError)&&!an(e.xError2)&&!an(e.yError)&&!an(e.yError2)}function TQt(e){return an(e.x2)||an(e.y2)}function AQt(e){return an(e.xError)||an(e.xError2)||an(e.yError)||an(e.yError2)}function OFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Ih(r)?r:{type:r};s&&Je(C6e(t));const{orient:l,inputType:c}=xQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=IFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=CQt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...A}=i,{bins:C,timeUnits:I,aggregate:R,groupby:M,encoding:P}=TFe(A,n),O=[...R,...g],F=c!=="raw"?[]:M,L=CH(v,f,P,b);return{transform:[...a.transform??[],...C,...I,...O.length===0?[]:[{aggregate:O,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function CQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(jKt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:tR(h)},{fieldPrefix:"upper_",titlePrefix:Vme(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Vme(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Ww({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ww({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ww({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(FKt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:sb(sb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Vme(e,t,n){return`${tR(e)} ${n} ${t}`}const Wne="errorband",IQt=["band","borders"],kQt=new F4(Wne,$Fe);function $Fe(e,{config:t}){e={...e,encoding:j4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=OFe(e,Wne,t),l=o,c=Hne(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(Ome("interpolate")):l.tension&&Je(Ome("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const MFe={};function Gne(e,t,n){const r=new F4(e,t);MFe[e]={normalizer:r,parts:n}}function RQt(){return Ye(MFe)}Gne(uM,NFe,vQt);Gne(qne,DFe,wQt);Gne(Wne,$Fe,IQt);const NQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],LFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},FFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},PQt=Ye(LFe),DQt=Ye(FFe),OQt={header:1,headerRow:1,headerColumn:1,headerFacet:1},jFe=Ye(OQt),BFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],$Qt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},MQt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Gf="_vgsid_",LQt={point:{on:"click",fields:[Gf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Yne(e){return e==="legend"||!!(e!=null&&e.legend)}function jB(e){return Yne(e)&&mt(e)}function Kne(e){return!!(e!=null&&e.select)}function UFe(e){const t=[];for(const n of e||[]){if(Kne(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function FQt(e){return B4(e)||Qne(e)||Xne(e)}function Xne(e){return"concat"in e}function B4(e){return"vconcat"in e}function Qne(e){return"hconcat"in e}function zFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Rh(e){return mt(e)&&e.step!==void 0}function Hme(e){return e.view||e.width||e.height}const qme=20,jQt={align:1,bounds:1,center:1,columns:1,spacing:1},BQt=Ye(jQt);function UQt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(D4(e)&&!uR(e.facet)||Xne(e))&&(i.columns=o),B4(e)&&(i.columns=1);for(const a of BQt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function IH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function lM(e,t){const n=cM(e,t);return Rh(n)?n.step:VFe}function cM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return as(n,{step:e.step})}const VFe=20,zQt={continuousWidth:200,continuousHeight:200,step:VFe},VQt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:zQt,mark:zXt,arc:{},area:{},bar:qXt,circle:{},geoshape:{},image:{},line:{},point:{},rect:WXt,rule:{color:"black"},square:{},text:{color:"black"},tick:GXt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:yXt,projection:{},legend:$Qt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:LQt,style:{},title:{},facet:{spacing:qme},concat:{spacing:qme},normalizedNumberFormat:".0%"},hp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Wme={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Gme={blue:hp[0],orange:hp[1],red:hp[2],teal:hp[3],green:hp[4],yellow:hp[5],purple:hp[6],pink:hp[7],brown:hp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function HQt(e={}){return{signals:[{name:"color",value:mt(e)?{...Gme,...e}:Gme}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function qQt(e){return{signals:[{name:"fontSize",value:mt(e)?{...Wme,...e}:Wme}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function WQt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function HFe(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=fR(i)?_6e(i):ml(i)}return n}function GQt(e){const t=Ye(e),n={};for(const r of t)n[r]=HFe(e[r]);return n}const YQt=[...oFe,...EFe,...jFe,"background","padding","legend","lineBreak","scale","style","title","view"];function qFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=mS({},en(VQt),n?WQt(n):{},t?HQt(t):{},r?qQt(r):{},s||{});i&&gS(o,"selection",i,!0);const a=ju(o,YQt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=ml(o[u]));for(const u of oFe)o[u]&&(a[u]=Eu(o[u]));for(const u of EFe)o[u]&&(a[u]=HFe(o[u]));for(const u of jFe)o[u]&&(a[u]=Eu(o[u]));return o.legend&&(a.legend=Eu(o.legend)),o.scale&&(a.scale=Eu(o.scale)),o.style&&(a.style=GQt(o.style)),o.title&&(a.title=Eu(o.title)),o.view&&(a.view=Eu(o.view)),a}const KQt=new Set(["view",...MXt]),XQt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],QQt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...UXt};function JQt(e){e=en(e);for(const t of XQt)delete e[t];if(e.axis)for(const t in e.axis)fR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of NQt)delete e.legend[t];if(e.mark){for(const t of Lme)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(UFe(e.params)),delete e.params);for(const t of KQt){for(const r of Lme)delete e[t][r];const n=QQt[t];if(n)for(const r of n)delete e[t][r];eJt(e,t)}for(const t of RQt())delete e[t];ZQt(e);for(const t in e)mt(e[t])&&Lr(e[t])&&delete e[t];return Lr(e)?void 0:e}function ZQt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=b6e(e.title);Lr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Lr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Lr(r)?delete e.title:e.title=r}function eJt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Lr(s)||(e.style[n??t]=s),delete e[t]}function U4(e){return"layer"in e}function tJt(e){return"repeat"in e}function nJt(e){return!Fe(e.repeat)&&e.repeat.layer}class Jne{map(t,n){return D4(t)?this.mapFacet(t,n):tJt(t)?this.mapRepeat(t,n):Qne(t)?this.mapHConcat(t,n):B4(t)?this.mapVConcat(t,n):Xne(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(U4(t))return this.mapLayer(t,n);if(ag(t))return this.mapUnit(t,n);throw new Error(pne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const rJt={zero:1,center:1,normalize:1};function iJt(e){return e in rJt}const sJt=new Set([rFe,k4,I4,rM,N4,One,$ne,R4,iFe,Dne]),oJt=new Set([k4,I4,rFe]);function w_(e){return Ze(e)&&ox(e)==="quantitative"&&!e.bin}function Yme(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(w_(o)&&w_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(w_(o))return t;if(w_(a))return i}else{if(w_(o))return s&&n==="vertical"?void 0:t;if(w_(a))return s&&n==="horizontal"?void 0:i}}function aJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function WFe(e,t){var m,g;const n=Ih(e)?e:{type:e},r=n.type;if(!sJt.has(r))return null;const i=Yme(t,"x",n)||Yme(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=aJt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=_Yt.reduce((y,v)=>{if(v!=="tooltip"&&_v(t,v)){const b=t[v];for(const w of ht(b)){const E=kh(w);if(E.aggregate)continue;const S=at(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Fy(s.stack)?p=s.stack?"zero":null:p=s.stack:oJt.has(r)&&(p="zero"),!p||!iJt(p)||Une(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Bu.LINEAR&&s!=null&&s.stack&&Je($Kt(s.scale.type)),an(t[Zh(i)])?(s.stack!==void 0&&Je(OKt(i)),null):(Ze(s)&&s.aggregate&&!PYt.has(s.aggregate)&&Je(MKt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Hb(r),stackBy:h,offset:p}))}function GFe(e,t,n){const r=Eu(e),i=_r("orient",r,n);if(r.orient=fJt(r.type,t,i),i!==void 0&&i!==r.orient&&Je(vKt(r.orient,i)),r.type==="bar"&&r.orient){const u=_r("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:HXt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=_r("opacity",r,n),o=_r("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=lJt(r.type,t)),_r("cursor",r,n)===void 0&&(r.cursor=uJt(r,t,n)),r}function uJt(e,t,n){return t.href||e.href||_r("href",e,n)?"pointer":e.cursor}function lJt(e,t){if(Hn([N4,Dne,One,$ne],e)&&!Une(t))return .7}function cJt(e,t,{graticule:n}){if(n)return!1;const r=Om("filled",e,t),i=e.type;return as(r,i!==N4&&i!==R4&&i!==rM)}function fJt(e,t,n){switch(e){case N4:case One:case $ne:case iFe:case OXt:case DXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case k4:if(Ze(r)&&(Eo(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Eo(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===ub&&!ii(r.bin)||iM(r))&&Ze(i)&&Eo(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===ub&&!ii(i.bin)||iM(i))&&Ze(r)&&Eo(r.bin)?"vertical":"horizontal"}case rM:if(s&&!(Ze(r)&&Eo(r.bin))&&o&&!(Ze(i)&&Eo(i.bin)))return;case I4:if(o)return Ze(i)&&Eo(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&Eo(r.bin)?"vertical":"horizontal";if(e===rM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case R4:case Dne:{const a=Bme(r),u=Bme(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Za(r)&&r.type===ix,c=Za(i)&&i.type===ix;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function dJt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function hJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ju(e[t],["point","line"])});return e}function BB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function Kme(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class pJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ag(t)){const{mark:r,encoding:i}=t,s=Ih(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!BB(s,n[s.type],i);case"area":return!!BB(s,n[s.type],i)||!!Kme(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=j4(l,i),d=Ih(a)?a:{type:a},h=BB(d,i[d.type],f),p=d.type==="area"&&Kme(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:dJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ju(f,["shape"])}],g=WFe(GFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=ju(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...ex(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...ex(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:hJt(i)})}}function mJt(e,t){return t?uR(e)?KFe(e,t):YFe(e,t):e}function UB(e,t){return t?KFe(e,t):e}function kH(e,t,n){const r=t[e];if(QXt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(JYt(r.repeat));return}return t}function YFe(e,t){if(e=kH("field",e,t),e!==void 0){if(e===null)return null;if(Lne(e)&&ch(e.sort)){const n=kH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Xme(e,t){if(Ze(e))return YFe(e,t);{const n=kH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Qme(e,t){if(an(e)){const n=Xme(e,t);if(n)return n;if(O4(e))return{condition:e.condition}}else{if(lR(e)){const n=Xme(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function KFe(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Fe(i))n[r]=i.map(s=>Qme(s,t)).filter(s=>s);else{const s=Qme(i,t);s!==void 0&&(n[r]=s)}}return n}class gJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ag(t)){const{encoding:n,mark:r}=t;if(r==="line"||Ih(r)&&r.type==="line")for(const i of yYt){const s=Bb(i),o=n[s];if(n[i]&&(Ze(o)&&!Eo(o.bin)||tp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(yKt(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class yJt extends Jne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[bQt,EQt,kQt,new pJt,new gJt]}map(t,n){if(ag(t)){const r=_v(t.encoding,em),i=_v(t.encoding,tm),s=_v(t.encoding,v4);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=UB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return nJt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${xi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Fe(r)&&t.columns&&(t=ju(t,["columns"]),Je(Rme("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Fe(r)&&r.row||[u?u.row:null],f=!Fe(r)&&r.column||[u?u.column:null],d=Fe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Fe(r)?`${xi(p)}`:(r.row?`row_${xi(m)}`:"")+(r.column?`column_${xi(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(ju(b,["data"]))}const h=Fe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return uR(r)&&t.columns&&(t=ju(t,["columns"]),Je(Rme("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Zme({parentProjection:o,projection:i}),l=Jme({parentEncoding:s,encoding:UB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=UB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(mKt([...r?[em]:[],...i?[tm]:[]]));const o={},a={};for(const u of[em,tm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:mJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Jme({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Zme({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Jme({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(an(o)){const u={...a,...o};r[s]=u}else lR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Wf(a)||Rt(a)||an(a)||Fe(a))&&(r[s]=a)}}else r=t;return!r||Lr(r)?void 0:r}function Zme(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(iKt({parentProjection:t,projection:n})),n??t}function Zne(e){return"filter"in e}function vJt(e){return(e==null?void 0:e.stop)!==void 0}function XFe(e){return"lookup"in e}function bJt(e){return"data"in e}function _Jt(e){return"param"in e}function wJt(e){return"pivot"in e}function EJt(e){return"density"in e}function xJt(e){return"quantile"in e}function SJt(e){return"regression"in e}function TJt(e){return"loess"in e}function AJt(e){return"sample"in e}function CJt(e){return"window"in e}function IJt(e){return"joinaggregate"in e}function kJt(e){return"flatten"in e}function RJt(e){return"calculate"in e}function QFe(e){return"bin"in e}function NJt(e){return"impute"in e}function PJt(e){return"timeUnit"in e}function DJt(e){return"aggregate"in e}function OJt(e){return"stack"in e}function $Jt(e){return"fold"in e}function MJt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function LJt(e){return e.map(t=>Zne(t)?{filter:Hw(t.filter,cXt)}:t)}class FJt extends Jne{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=ege(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=ege(t,n),t.encoding){const r={};for(const[i,s]of uy(t.encoding))r[i]=JFe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:uy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of No(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function ege(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Zne(s))return{filter:RH(s,t)};if(QFe(s)&&Ub(s.bin))return{...s,bin:ZFe(s.bin)};if(XFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function JFe(e,t){var r,i;const n=en(e);if(Ze(n)&&Ub(n.bin)&&(n.bin=ZFe(n.bin)),qb(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(O4(n))if(Fe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:RH(s,t)}});else{const{selection:s,param:o,test:a,...u}=JFe(n.condition,t);n.condition=o?n.condition:{...u,test:RH(n.condition,t)}}return n}function ZFe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function RH(e,t){const n=r=>Hw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Hw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class NH extends Jne{map(t,n){const r=n.selections??[];if(t.params&&!ag(t)){const i=[];for(const s of t.params)Kne(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(pt(a)&&(a===t.name||i.includes(a))||Fe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=NH.prototype[e];NH.prototype[e]=function(n,r){return t.call(this,n,jJt(n,r))}}function jJt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function e4e(e,t){t===void 0&&(t=qFe(e.config));const n=VJt(e,t),{width:r,height:i}=e,s=HJt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const BJt=new yJt,UJt=new FJt,zJt=new NH;function VJt(e,t={}){const n={config:t};return zJt.map(BJt.map(UJt.map(e,n),n),n)}function tge(e){return pt(e)?{type:e}:e??{}}function HJt(e,t,n){let{width:r,height:i}=t;const s=ag(e)||U4(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(Ame("width")),r=void 0),i=="container"&&(Je(Ame("height")),i=void 0));const a={type:"pad",...o,...n?tge(n.autosize):{},...tge(e.autosize)};if(a.type==="fit"&&!s&&(Je(UYt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(Cme("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(Cme("height")),!El(a,{type:"pad"}))return a}function qJt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function WJt(e){return e?`fit-${x4(e)}`:"fit"}const GJt=["background","padding"];function nge(e,t){const n={};for(const r of GJt)e&&e[r]!==void 0&&(n[r]=ml(e[r]));return t&&(n.params=e.params),n}class ug{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ug(en(this.explicit),en(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return as(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ad(e){return{explicit:!0,value:e}}function al(e){return{explicit:!1,value:e}}function t4e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:z4(t,n,r,i)}}function z4(e,t,n,r){return e.explicit&&t.explicit&&Je(CKt(n,r,e.value,t.value)),e}function fy(e,t,n,r,i=z4){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:El(e.value,t.value)?e:i(e,t,n,r)}class YJt extends ug{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function lx(e){return"url"in e}function dI(e){return"values"in e}function n4e(e){return"name"in e&&!lx(e)&&!dI(e)&&!C0(e)}function C0(e){return e&&(r4e(e)||i4e(e)||ere(e))}function r4e(e){return"sequence"in e}function i4e(e){return"sphere"in e}function ere(e){return"graticule"in e}var bi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(bi||(bi={}));function s4e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=kc(i.field),i}function fb(e,t=!0,n=va){if(Fe(e)){const r=e.map(i=>fb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(zb(e))return n(t?ab(e):JKt(e));return t?n(Fr(e)):e}function KJt(e,t){for(const n of No(e.component.selection??{})){const r=n.name;let i=`${r}${hy}, ${n.resolve==="global"?"true":`{unit: ${wv(e)}}`}`;for(const s of W4)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+CZt,on:[{events:{signal:n.name+hy},update:`modify(${nt(n.name+db)}, ${i})`}]})}return tre(t)}function XJt(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:By("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return tre(t)}function QJt(e,t){let n=!1;for(const r of No(e.component.selection??{})){const i=r.name,s=nt(i+db);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${x4e}(${s}, ${nt(a)}${u}`})}n=!0;for(const a of W4)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),tre(t)}function JJt(e,t){const n=[...t],r=wv(e,{escape:!1});for(const i of No(e.component.selection??{})){const s={name:i.name+db};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Gf}}]),i.init){const a=i.project.items.map(s4e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Gf]:fb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:fb(u,!1)}))}n.filter(a=>a.name===i.name+db).length||n.push(s)}return n}function o4e(e,t){for(const n of No(e.component.selection??{}))for(const r of W4)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function ZJt(e,t){for(const n of e.children)Wi(n)&&(t=o4e(n,t));return t}function eZt(e,t,n,r){const i=I4e(e,t.param,t);return{signal:Bl(n.get("type"))&&Fe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function tre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Or{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(tKt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Uu extends Or{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${n6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function zB(e){return e.as!==void 0}function rge(e){return`${e}_end`}class fh extends Or{clone(){return new fh(null,en(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Vb(u)){if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=cy({fieldDef:s,markDef:f,config:d});(fI(c)||h)&&(l={timeUnit:ao(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=cy({fieldDef:s,markDef:f,config:d});fI(c)&&us(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return Lr(r)?null:new fh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=ao(r),o={...i,timeUnit:s};return new fh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of uy(this.timeUnits)){const s=zB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(No(this.timeUnits).map(t=>zB(t)?t.as:rge(t.field)))}dependentFields(){return new Set(No(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of No(this.timeUnits)){const{rectBandPosition:r}=n,i=ao(n.timeUnit);if(zB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:kc(s),type:"timeunit",...a?{units:C4(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...ige(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=a4e({timeUnit:i,field:o}),u=rge(o);t.push({type:"formula",expr:a,as:u}),t.push(...ige([o,u],r,i))}}return t}}const V4="offsetted_rect_start",H4="offsetted_rect_end";function a4e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=F6e(r),{part:o,step:a}=z6e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function ige([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:sge([a4e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${V4}`},{type:"formula",expr:sge([i,s],n+.5),as:`${e}_${H4}`}]}return[]}function sge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const dR="_tuple_fields";class tZt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const nZt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new tZt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=xi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=xi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ht(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of Ye(p))gYt(m)?(h||(h=[])).push(m):l==="interval"?(Je(QYt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(zYt(p,m.aggregate));continue}else if(!g){Je(kme(p));continue}if(m.timeUnit&&!Vb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&og(p)&&Bl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Gf,u6e(p)?(v.geoChannel=p,v.channel=a6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(kme(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Gf}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Lr(o)||(i.timeUnit=new fh(null,o))},signals:(e,t,n)=>{const r=t.name+dR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(s4e)})}},nm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!og(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(WYt),!s||!Bl(o)){Je(qYt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||oge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(x4e)>=0)i.update=`{${r.map(o=>`${nt(kc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${nt(kc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!oge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function PH(e,t){return`domain(${nt(e.scaleName(t))})`}function oge(e){return e.parent&&DS(e.parent)&&!e.parent.parent}const Gw="_brush",u4e="_scale_trigger",DT="geo_interval_init_tick",l4e="_init",rZt="_center",iZt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[Gf],i.encodings||(i.encodings=n.value?Ye(n.value):[sd,id]),n.select={type:"interval",...i}}if(t.translate&&!nm.defined(t)){const i=`!event.item || event.item.mark.name !== ${nt(t.name+Gw)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=ht((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+hy,s=No(t.project.hasChannel).filter(a=>a.channel===Si||a.channel===co),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(sZt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=nt(e.projectionName()),u=e.projectionName()+rZt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+l4e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${wv(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:DT}]:[]],update:b}]})}else{if(!nm.defined(t)){const l=r+u4e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Bl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${wv(e)}, fields: ${r+dR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${fb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===DT).length||n.unshift({name:DT,value:null,on:[{events:"timer{1}",update:`${DT} === null ? {} : ${DT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${nt(t.name+db)})`;if(nm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${wv(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Gw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Gw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function sZt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Si?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=nm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:fb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+u4e},update:Bl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:fb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Si?0:1,h=t.name+l4e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const oZt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+dR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=No(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Gw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${wv(e)}, `;if(t.project.hasSelectionId)l+=`${Gf}: ${o}[${nt(Gf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${nt(e.vgField(d.channel,{}))}], ${o}[${nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+hy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function kS(e,t,n,r){const i=O4(t)&&t.condition,s=r(t);if(i){const a=ht(i).map(u=>{const l=r(u);if(XXt(u)){const{param:c,empty:f}=u;return{test:C4e(e,{param:c,empty:f}),...l}}else return{test:hM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function nre(e,t="text"){const n=e.encoding[t];return kS(e,n,t,r=>q4(r,e.config))}function q4(e,t,n="datum"){if(e){if(Wf(e))return li(e.value);if(an(e)){const{format:r,formatType:i}=oM(e);return Pne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function c4e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Fe(o))return{tooltip:age({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return kS(e,o,"tooltip",u=>{const l=q4(u,i,a);if(l)return l;if(u===null)return;let c=_r("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),pt(c))return{value:c};if(mt(c))return Rt(c)?c:c.content==="encoding"?age(n,s,i,t):{signal:a}})}}function f4e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Bb(f),h=Za(c)?c:{...c,type:e[d].type},p=h.title||jne(h,i),m=ht(p).join(", ").replaceAll(/"/g,'\\"');let g;if(us(f)){const y=f==="x"?"x2":"y2",v=kh(e[y]);if(Eo(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:S}=oM(h);g=aR(b,w,E,S,i),s[y]=!0}}if((us(f)||f===Uc||f===rd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=oM(h);g=Pne({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=q4(h,i,o).signal),a.push({channel:f,key:m,value:g})}zne(e,(c,f)=>{Ze(c)?u(c,f):$4(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function age(e,t,n,{reactiveGeom:r}={}){const i=f4e(e,t,n,{reactiveGeom:r}),s=uy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function aZt(e){const{markDef:t,config:n}=e,r=_r("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...uZt(e),...lZt(e)}}function uZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=_r("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in FYt?{}:{ariaRoleDescription:{value:t}}}function lZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return kS(e,s,"description",u=>q4(u,e.config));const o=_r("description",n,r);if(o!=null)return{description:li(o)};if(r.aria===!1)return{};const a=f4e(t,i,r);if(!Lr(a))return{description:{signal:uy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Qs(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=_r(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=li(u)));const l=i[e];return kS(t,l,o??e,c=>Nne({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function d4e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??_r("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=_r(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=_r(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:li(u)}:{},...l?{stroke:li(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(k6e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Qs("color",e,{vgChannel:c,defaultValue:o?u:l}),...Qs("fill",e,{defaultValue:r.fill?u:void 0}),...Qs("stroke",e,{defaultValue:r.stroke?l:void 0})}}function cZt(e){const{encoding:t,mark:n}=e,r=t.order;return!Hb(n)&&Wf(r)?kS(e,r,"zindex",i=>li(i.value)):{}}function cx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Nne({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:li(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function la(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Zh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=cx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=rre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&us(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:fZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function fZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(an(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return nM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return bv(n,r,{suffix:"end"},{offset:s})}return kne(e)}function rre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Bb(n),u=ly(n),l=_r(n,s,o,{vgChannel:u});if(l!==void 0)return AC(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Bu.LOG,Bu.TIME,Bu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Ju(n)],mult:.5}}}}const dZt={left:"x",center:"xc",right:"x2"},hZt={top:"y",middle:"yc",bottom:"y2"};function h4e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return ly(e);const i=e==="x"?"align":"baseline",s=_r(i,t,n);let o;return Rt(s)?(Je(gKt(i)),o=void 0):o=s,e==="x"?dZt[o||(r==="top"?"left":"center")]:hZt[o||r]}function fM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?p4e(e,t,{defaultPos:n,defaultPos2:r}):la(e,t,{defaultPos:n})}function p4e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Zh(e),a=Ju(e),u=pZt(t,r,o),l=u[a]?h4e(e,i,s):ly(e);return{...la(e,t,{defaultPos:n,vgChannel:l}),...u}}function pZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Bb(n),l=Ju(n),c=ly(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?cx({channel:n,markDef:s,encoding:r,model:e}):cx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Ju(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=mZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:iP(n,s)||iP(n,{[n]:eM(n,s,a.style),[l]:eM(l,s,a.style)})||iP(n,a[i])||iP(n,a.mark)||{[c]:rre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function mZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return an(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?bv(t,s,{suffix:"start"},{offset:u}):kne({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function iP(e,t){const n=Ju(e),r=ly(e);if(t[r]!==void 0)return{[r]:AC(e,t[r])};if(t[e]!==void 0)return{[r]:AC(e,t[e])};if(t[n]){const i=t[n];if(cb(i))Je(cKt(n));else return{[n]:AC(e,i)}}}function dy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Zh(t),a=Ju(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??_r("size",i,n,{vgChannel:a}),p=d6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(ii(u.bin)||Eo(u.bin)||u.timeUnit&&!l)&&!(h&&!cb(h))&&!r[p]&&!uo(f)?vZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(an(u)&&uo(f)||m)&&!l?yZt(u,t,e):p4e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function gZt(e,t,n,r,i,s,o){if(cb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Om("minBandSize",{type:o},r);return{signal:c?`max(${xf(c)}, ${l})`:l}}else i.band!==1&&(Je(_Kt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Gy(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=as(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:lM(r.view,e)-2}}function yZt(e,t,n){var C,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Ju(t),f=Zh(t),d=d6e(t),h=n.scaleName(d),p=n.getScaleComponent(lne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Qs("size",n,{vgChannel:c,defaultRef:li(r.size)}):Je(SKt(r.type)));const y=!!g,v=cFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:gZt(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&cb(v)&&!y?"top":"middle",w=h4e(t,r,s,b),E=w==="xc"||w==="yc",{offset:S,offsetType:T}=cx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=kne({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:rre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:cb(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const R=ly(f),M=g[c],P=S?{...M,offset:S}:M;return{[w]:A,[R]:Fe(A)?[A[0],{...A[1],offset:P}]:{...A,offset:P}}}}function uge(e,t,n,r,i,s,o){if(o6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=xf(n),c=xf(i),f=xf(r),d=xf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function vZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=cFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=us(n)?_r("binSpacing",s,i)??0:0,m=Zh(n),g=ly(n),y=ly(m),v=Om("minBandSize",s,i),{offset:b}=cx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=cx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=kXt({fieldDef:e,scaleName:u}),S=uge(n,p,c,h,b,v,E),T=uge(m,p,c,h,w??b,v,E),A=Rt(f)?{signal:`(1-${f.signal})/2`}:cb(f)?(1-f.band)/2:.5,C=cy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ii(e.bin)||e.timeUnit){const R=e.timeUnit&&C!==.5;return{[y]:lge({fieldDef:e,scaleName:u,bandPosition:A,offset:T,useRectOffsetField:R}),[g]:lge({fieldDef:e,scaleName:u,bandPosition:Rt(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:R})}}else if(Eo(e.bin)){const R=bv(e,u,{},{offset:T});if(Ze(t))return{[y]:R,[g]:bv(t,u,{},{offset:S})};if(Ub(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Je(P6e(m))}function lge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return nM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:V4,endSuffix:H4}:{}})}const bZt=new Set(["aria","width","height"]);function zc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?d4e(e):{};return{..._Zt(e.markDef,t),...cge(e,"fill",n),...cge(e,"stroke",r),...Qs("opacity",e),...Qs("fillOpacity",e),...Qs("strokeOpacity",e),...Qs("strokeWidth",e),...Qs("strokeDash",e),...cZt(e),...c4e(e),...nre(e,"href"),...aZt(e)}}function cge(e,t,n){const{config:r,mark:i,markDef:s}=e;if(_r("invalid",s,r)==="hide"&&n&&!Hb(i)){const a=wZt(e,{invalid:!0,channels:S4});if(a)return{[t]:[{test:a,value:null},...ht(n)]}}return n?{[t]:n}:{}}function _Zt(e,t){return LYt.reduce((n,r)=>(!bZt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=li(e[r])),n),{})}function wZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Bl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Rne(o,t)).join(` ${s} `)}}function ire(e){const{config:t,markDef:n}=e;if(_r("invalid",n,t)){const i=EZt(e,{channels:ep});if(i)return{defined:{signal:i}}}return{}}function EZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Bl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Rne(o,t)).join(` ${s} `)}}function fge(e,t){if(t!==void 0)return{[e]:li(t)}}const VB="voronoi",m4e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(VB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Hb(s))return Je(VYt(s)),n;const o={name:e.getName(VB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...c4e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(VB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},g4e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Yne(e.bind),parse:(e,t,n)=>S4e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=m4e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=xi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:fb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+hy)[0],o=r+dR,a=i.items.map(l=>xi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},dM="_toggle",y4e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+dM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+hy,r=t.name+dM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${wv(e)}}, `)+`${r} ? ${n} : null`}},xZt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=pt(t.clear)?By(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(g4e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===xi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+hy);r(i,"null"),y4e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+dM),r(i,"false"))}return n}},v4e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Yne(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Gf;return t&&!n&&Je(GYt),t&&n},parse:(e,t,n)=>{const r=en(n);if(r.select=pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},S4e(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ht(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=jB(t.bind)?t.bind.legend:"click",s=pt(i)?By(i,"view"):ht(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=jB(t.bind)&&t.bind.legend,s=o=>a=>{const u=en(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${xi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+hy),o=r+dR,a=i.items.filter(d=>d.hasLegend).map(d=>xi(`${r}_${xi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+dM),f=jB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function SZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of No(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&v4e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const b4e="_translate_anchor",_4e="_translate_delta",TZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+b4e,{x:o,y:a}=t.project.hasChannel;let u=By(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Gw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?PH(e,Si):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?PH(e,co):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+_4e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&dge(e,t,o,"width",n),a!==void 0&&dge(e,t,a,"height",n),n}};function dge(e,t,n,r,i){const s=t.name,o=s+b4e,a=s+_4e,u=n.channel,l=nm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Si?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const w4e="_zoom_anchor",E4e="_zoom_delta",AZt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+E4e,{x:o,y:a}=t.project.hasChannel,u=nt(e.scaleName(Si)),l=nt(e.scaleName(co));let c=By(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Gw,f))),n.push({name:r+w4e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&hge(e,t,o,"width",n),a!==void 0&&hge(e,t,a,"height",n),n}};function hge(e,t,n,r,i){const s=t.name,o=n.channel,a=nm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?PH(e,o):u.name,h=s+E4e,p=`${s}${w4e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const db="_store",hy="_tuple",CZt="_modify",x4e="vlSelectionResolve",W4=[oZt,iZt,nZt,y4e,g4e,nm,v4e,xZt,TZt,AZt,m4e];function IZt(e){let t=e.parent;for(;t&&!Al(t);)t=t.parent;return t}function wv(e,{escape:t}={escape:!0}){let n=t?nt(e.name):e.name;const r=IZt(e);if(r){const{facet:i}=r;for(const s of mc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${nt(r.vgField(s))}])`)}return n}function sre(e){return No(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function S4e(e,t){(pt(t.select)||!t.select.on)&&delete e.events,(pt(t.select)||!t.select.clear)&&delete e.clear,(pt(t.select)||!t.select.toggle)&&delete e.toggle}function DH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...DH(e.object)),t.push(...DH(e.property))),t)}function T4e(e){return e.object.type==="MemberExpression"?T4e(e.object):e.object.name==="datum"}function A4e(e){const t=Tte(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&T4e(r)&&n.add(DH(r).slice(1).join("."))}),n}class RS extends Or{clone(){return new RS(null,this.model,en(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=hM(this.model,this.filter,this),this._dependentFields=A4e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function kZt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=xi(i.name),o=i.select,a=pt(o)?o:o.type,u=mt(o)?en(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=en(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:pt(u.on)?By(u.on,"scope"):ht(en(u.on))},f=en(i);for(const d of W4)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function C4e(e,t,n,r="datum"){const i=pt(t)?t:t.param,s=xi(i),o=nt(s+db);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function I4e(e,t,n){const r=xi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${nt(i)} encoding found for selection ${nt(n.param)}. Using "field": ${nt(s)}.`)):s=a[0].field}return`${o.name}[${nt(kc(s))}]`}function RZt(e,t){for(const[n,r]of uy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Uu(new RS(t,e,{param:n}),i,bi.Lookup,e.component.data.outputNodeRefCounts)}}function hM(e,t,n){return TC(t,r=>pt(r)?r:aXt(r)?C4e(e,r,n):H6e(r))}function NZt(e,t){if(e)return Fe(e)&&!Ng(e)?e.map(n=>jne(n,t)).join(", "):e}function HB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function AA(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=cQt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(fR(m)){const{condition:g,...y}=m,v=ht(g),b=Ume[h];if(b){const{vgProp:w,part:E}=b,S=[...v.map(T=>{const{test:A,...C}=T;return{test:hM(null,A),...C}}),y];HB(c,E,w,S),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:S,...T}=E;return`${hM(null,S)} ? ${Tme(T)} : `}).join("")+Tme(y)};c[h]=w}}else if(Rt(m)){const g=Ume[h];if(g){const{vgProp:y,part:v}=g;HB(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Lr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:as(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=sb(a,"datum.label",c.encode.labels.update.text.signal)),HB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of _Fe)e.hasAxisPart(p)||delete c.encode[p];Lr(c.encode)&&delete c.encode}const h=NZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:as(l,0)}}}}function k4e(e){const{axes:t}=e.component,n=[];for(const r of ep)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function PZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>AA(i,"grid",t)),...r.map(i=>AA(i,"grid",t)),...n.map(i=>AA(i,"main",t)),...r.map(i=>AA(i,"main",t))].filter(i=>i)}function pge(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${xf(o[c])} : ${xf(a[c])}`};return l}return t[i]})])}function DZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Y6e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${tR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:pge(a,r,e,n),vgAxisConfig:pge(u,r,e,n),axisConfigStyle:OZt([...u,...a],r)}}function OZt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ht(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function OH(e,t,n,r={}){var s;const i=E6e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const mge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??$Zt(n,e),gridScale:({model:e,channel:t})=>MZt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||N4e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||R4e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??FZt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??jZt(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??UZt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:zZt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=P4e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return S6e(i?[jme(i)]:[],Ze(o)?[jme(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>VZt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??HZt(n,t)};function $Zt(e,t){return!uo(e)&&Ze(t)&&!ii(t==null?void 0:t.bin)&&!Eo(t==null?void 0:t.bin)}function MZt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function LZt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:cI(s);{const{configValue:o}=OH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?cI(o):n===Si&&Hn([Ine,Cne],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function $H(e){return`(((${e.signal} % 360) + 360) % 360)`}function R4e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=$H(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=$H(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function N4e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=$H(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function FZt(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function jZt(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function BZt(e){return e==="x"?"bottom":"left"}function UZt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!uo(t)&&t!=="log"){if(Ze(e)){if(ii(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=ao(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function zZt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=U6e(n);if(r)return{signal:r}}}}function P4e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return T6e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function VZt(e,t){const n=e.values;if(Fe(n))return bFe(t,n);if(Rt(n))return n}function HZt(e,t){return e==="rect"&&sM(t)?1:0}class fx extends Or{clone(){return new fx(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=A4e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(qb(r)&&lFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${H6e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new fx(t,{calculate:u,as:dx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function dx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function G4(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function hx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return as((t||{})[e],i[e],n.header[e])}function Y4(e,t,n,r){const i={};for(const s of e){const o=hx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const ore=["row","column"],are=["header","footer"];function qZt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Y4(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=G4(t,a),l=cI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...O4e(l,u),...D4e(u,l,s),...$4e(r,i,t,PQt,LFe)}}}function D4e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=N4e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function O4e(e,t){const n=R4e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function WZt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of are)if(n[i])for(const s of n[i]){const o=YZt(e,t,i,n,s);o!=null&&r.push(o)}return r}function GZt(e,t){const{sort:n}=e;return ch(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:Fe(n)?{field:dx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function MH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=Y4(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Pne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=G4(t,a);return{text:{signal:u?sb(sb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...O4e(s,c),...D4e(c,s,o),...$4e(n,e,t,DQt,FFe)}}function YZt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=Y4(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=MH(o,t,a))}const u=Al(e)&&!uR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:GZt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const KZt={column:{start:0,end:1},row:{start:1,end:0}};function XZt(e,t){return KZt[t][e]}function QZt(e,t){const n={};for(const r of mc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=Y4(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=G4(r,o),u=XZt(s,a);u!==void 0&&(n[a]=u)}}return Lr(n)?void 0:n}function $4e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=hx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function ure(e){return[...sP(e,"width"),...sP(e,"height"),...sP(e,"childWidth"),...sP(e,"childHeight")]}function sP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(uo(o)&&Gy(a)){const u=e.scaleName(n);return Al(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[gge(u,a)]:[gge(u,a),{name:i,update:M4e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=IH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function gge(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function M4e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=as(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${xf(o)}, ${xf(s)}) * ${e}_step`}function L4e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function F4e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...kS(t,i,r,s=>li(s.value))}},{})}function j4e(e,t){if(Al(t))return e==="theta"?"independent":"shared";if(DS(t))return"shared";if(mre(t))return us(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function lre(e,t){const n=e.scale[t],r=us(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(kKt(t)),"independent"):e[r][t]||"shared"}const JZt={...MQt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},B4e=Ye(JZt);class ZZt extends ug{}const yge={symbols:een,gradient:ten,labels:nen,entries:ren};function een(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...BYt({},n,jXt),...d4e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?U4e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Xu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=li(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=li(m??1));else if(Fe(f.fill)){const g=LH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=li(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Xu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Fe(f.stroke)){const g=as(LH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==sg){const g=Ze(t)&&V4e(n,i,t);g?f.opacity=[{test:g,...li(m??1)},li(u.legend.unselectedOpacity)]:m&&(f.opacity=li(m))}return f={...f,...e},Lr(f)?void 0:f}function ten(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?U4e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=li(l)),a={...a,...e},Lr(a)?void 0:a}function nen(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?V4e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;lb(c)?f=Tf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Tf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Tf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Lr(d)?void 0:d}function ren(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function U4e(e){return z4e(e,(t,n)=>Math.max(t,n.value))}function LH(e){return z4e(e,(t,n)=>as(t,n.value))}function z4e(e,t){if(JXt(e))return ht(e.condition).reduce(t,e.value);if(Wf(e))return e.value}function V4e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=nt(n.field);return r.map(s=>`(!length(data(${nt(xi(s)+db)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const vge={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return eFe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return tFe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??cen(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??fen(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??sen(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Ww(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qw(n)&&Sf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>ien(t,e)};function ien(e,t){const n=e.values;if(Fe(n))return bFe(t,n);if(Rt(n))return n}function sen(e,t,n,r){if(t!=="shape"){const i=LH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function oen(e){const{legend:t}=e;return as(t.type,aen(e))}function aen({channel:e,timeUnit:t,scaleType:n}){if(qw(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(Sf(n))return"gradient"}return"symbol"}function uen({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??len(n,t)}function len(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function cen({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Sf(i))return n==="horizontal"?r==="top"||r==="bottom"?bge(t,"width",o,s):o:bge(t,"height",u,a)}function bge(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function fen(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function H4e(e){const t=Wi(e)?den(e):gen(e);return e.component.legends=t,t}function den(e){const{encoding:t}=e,n={};for(const r of[Xu,...BFe]){const i=ks(t[r]);!i||!e.getScaleComponent(r)||r===Qu&&Ze(i)&&i.type===IS||(n[r]=men(e,r))}return n}function hen(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function pen(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function men(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new ZZt({},hen(e,t));SZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=ks(i[t]),f=Ze(c)?(w=ao(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=oen({legend:n,channel:t,timeUnit:f,scaleType:l}),p=uen({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of B4e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in vge?vge[E](m):n[E];if(S!==void 0){const T=pen(S,E,n,e.fieldDef(t));(T||s.legend[E]===void 0)&&a.set(E,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=F4e(g[E]??{},e),T=E in yge?yge[E](S,b):S;T!==void 0&&!Lr(T)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${xi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Lr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function gen(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){H4e(r);for(const i of Ye(r.component.legends))n.legend[i]=lre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=q4e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function q4e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of B4e){const c=fy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return yen(f,d);case"title":return A6e(f,d);case"type":return i=!0,al("symbol")}return z4(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&Z$(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&Z$(e.explicit,["encode","gradient"])),e}function yen(e,t){return t.value==="circle"?t:e}function ven(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function W4e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Fr(s.get("domains"));if(n[o])for(const a of n[o])q4e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return No(n).flat().map(i=>ben(i,e.config)).filter(i=>i!==void 0)}function ben(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of BFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=sb(r,"datum.label",s.encode.labels.update.text.signal)),ven(s,"labels","text",{signal:l})}return s}}function _en(e){return DS(e)||mre(e)?wen(e):G4e(e)}function wen(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),G4e(e))}function G4e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Een=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Y4e extends ug{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function K4e(e){e.component.projection=Wi(e)?xen(e):Aen(e)}function xen(e){if(e.hasProjection){const t=Eu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Sen(e):void 0,s=new Y4e(e.projectionName(!0),{...Eu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Sen(e){const t=[],{encoding:n}=e;for(const r of[[sd,id],[Rc,od]])(ks(n[r[0]])||ks(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Qu)&&e.typedFieldDef(Qu).type===IS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(bi.Main)),t}function Ten(e,t){const n=nne(Een,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&El(e.get(i),t.get(i))));if(El(e.size,t.size)){if(n)return e;if(El(e.explicit,{}))return t;if(El(t.explicit,{}))return e}return null}function Aen(e){if(e.children.length===0)return;let t;for(const r of e.children)K4e(r);const n=nne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Ten(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Y4e(r,t.specifiedProjection,t.size,en(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Cen(e,t,n,r){if(cR(t,n)){const i=Wi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:aR(s,o,i.format,i.formatType,r)}}return{}}function X4e(e,t){return`${v6e(e)}_${t}`}function Ien(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function cre(e,t,n){const r=M4(n,void 0)??{},i=X4e(r,t);return e.getName(`${i}_bins`)}function ken(e){return"as"in e}function _ge(e,t,n){let r,i;ken(e)?r=pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...M4(t,void 0)},o=X4e(s,e.field),{signal:a,extentSignal:u}=Ien(n,o);if(T4(s.extent)){const c=s.extent;i=I4e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class dh extends Or{clone(){return new dh(null,en(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Za(s)&&ii(s.bin)){const{key:a,binComponent:u}=_ge(s,s.bin,n);i[a]={...u,...i[a],...Cen(n,s,o,n.config)}}return i},{});return Lr(r)?null:new dh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=_ge(n,n.bin,r);return new dh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Yd([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(No(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(No(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return No(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:kc(t.field),as:r,signal:t.signal,...T4(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:kc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Ren(e,t,n,r){var s;const i=Wi(r)?r.encoding[Zh(t)]:void 0;if(Za(n)&&Wi(r)&&fFe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=cy({fieldDef:n,markDef:a,config:u});fI(o)&&l!==.5&&us(t)&&(e.add(at(n,{suffix:V4})),e.add(at(n,{suffix:H4}))),n.bin&&cR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(u6e(t)){const o=a6e(t);e.add(r.getName(o))}else e.add(at(n));return qb(n)&&_Xt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Nen(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class $f extends Or{clone(){return new $f(null,new Set(this.dimensions),en(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Dm(u)||Wy(u)){const c=Dm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);og(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Ren(s,a,o,n)}),s.size+Ye(i).length===0)?null:new $f(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new $f(t,r,i)}merge(t){return ZLe(this.dimensions,t.dimensions)?(Nen(this.measures,t.measures),!0):(qKt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:kc(s));return{type:"aggregate",groupby:[...this.dimensions].map(kc),ops:t,fields:n,as:r}}}class NS extends Or{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of mc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ii(a)?[at(o,{binSuffix:"end"})]:[]],...ch(u)?{sortField:u}:Fe(u)?{sortIndexField:dx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of mc)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of mc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of mc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ep){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(uo(i)&&Gy(s)){const o=K4(this.childModel,n),a=pre(o);a?t[n]=a:Je(mne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=P4,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of ore){for(const c of are){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[tm,em])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function wge(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Pen(e,t){const n=sne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=wge(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=wge(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(eKt(t)),null}function Den(e){const t={};return DD(e.filter,n=>{if(V6e(n)){let r=null;bne(n)?r=ml(n.equal):wne(n)?r=ml(n.lte):_ne(n)?r=ml(n.lt):Ene(n)?r=ml(n.gt):xne(n)?r=ml(n.gte):Sne(n)?r=n.range[0]:Tne(n)&&(r=(n.oneOf??n.in)[0]),r&&(zb(r)?t[n.field]="date":lr(r)?t[n.field]="number":pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Oen(e){const t={};function n(r){ux(r)?t[r.field]="date":r.type==="quantitative"&&NYt(r.aggregate)?t[r.field]="number":tx(r.field)>1?r.field in t||(t[r.field]="flatten"):qb(r)&&ch(r.sort)&&tx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Wi(e)||Al(e))&&e.forEachFieldDef((r,i)=>{if(Za(r))n(r);else{const s=Bb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Hb(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function $en(e){const t={};if(Wi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&tx(i.field)>1&&(t[i.field]="flatten")}return t}class ca extends Or{clone(){return new ca(null,en(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!C0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(Nme(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(Nme(a,n[a],u)))}const s=new ug(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ca(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];tx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?tx(n)>1:!0).map(n=>{const r=Pen(n,this._parse[n]);return r?{type:"formula",expr:r,as:AS(n)}:null}).filter(n=>n!==null)}}class py extends Or{clone(){return new py(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Gf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Gf}}}class hR extends Or{clone(){return new hR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class pR extends Or{clone(){return new pR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class hb extends Or{constructor(t){super(null),t??(t={name:"source"});let n;if(C0(t)||(n=t.format?{...ju(t.format,["parse"])}:{}),dI(t))this._data={values:t.values};else if(lx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else i4e(t)?this._data={values:[{type:"Sphere"}]}:(n4e(t)||C0(t))&&(this._data={});this._generator=C0(t),t.name&&(this._name=t.name),n&&!Lr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Ege=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Men=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},CA;function fre(e){return e instanceof hb||e instanceof hR||e instanceof pR}class dre{constructor(){CA.set(this,void 0),Ege(this,CA,!1,"f")}setModified(){Ege(this,CA,!0,"f")}get modifiedFlag(){return Men(this,CA,"f")}}CA=new WeakMap;class Wb extends dre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class hre extends dre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Len extends hre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Fen extends hre{constructor(t){super(),this.requiresSelectionId=t&&sre(t)}run(t){t instanceof py&&(this.requiresSelectionId&&(fre(t.parent)||t.parent instanceof $f||t.parent instanceof ca)||(this.setModified(),t.remove()))}}class jen extends dre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof fh&&(r=t.producedFields(),rne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Ben extends hre{constructor(){super()}run(t){t instanceof Uu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Uen extends Wb{run(t){if(!fre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ca)if(t instanceof ca)this.setModified(),t.merge(n);else{if(ine(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class zen extends Wb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ca);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Lr(i)){this.setModified();const o=new ca(t,i);for(const a of n){if(a instanceof ca)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ca&&Ye(a.parse).length===0&&a.remove()}}}}}class Ven extends Wb{run(t){t instanceof Uu||t.numChildren()>0||t instanceof NS||t instanceof hb||(this.setModified(),t.remove())}}class Hen extends Wb{run(t){const n=t.children.filter(i=>i instanceof fh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class qen extends Wb{run(t){const n=t.children.filter(i=>i instanceof $f),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Wen extends Wb{constructor(t){super(),this.model=t}run(t){const n=!(fre(t)||t instanceof RS||t instanceof ca||t instanceof py),r=[],i=[];for(const s of t.children)s instanceof dh&&(n&&!ine(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof dh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Gen extends Wb{run(t){const n=[...t.children];if(!ib(n,o=>o instanceof Uu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Uu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Uu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Gb extends Or{clone(){return new Gb(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Yd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Yen(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function Ken(e){return Fe(e)&&e.every(t=>pt(t))&&e.length>1}class rm extends Or{clone(){return new rm(null,en(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(as(f.order,"ascending"));const l={field:a,order:u};let c;return Ken(s)?c=s:pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new rm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return kh(p)}).filter(h=>!!h),c=Yen(n),f=n.encoding.order;let d;if(Fe(f)||Ze(f))d=x6e(f);else{const h=dFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new rm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class PS extends Or{clone(){return new PS(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Yd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>hne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Xen(e){function t(n){if(!(n instanceof NS)){const r=n.clone();if(r instanceof Uu){const i=jH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof $f||r instanceof rm||r instanceof PS||r instanceof Gb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function FH(e){if(e instanceof NS)if(e.numChildren()===1&&!(e.children[0]instanceof Uu)){const t=e.children[0];(t instanceof $f||t instanceof rm||t instanceof PS||t instanceof Gb)&&t.addDimensions(e.fields),t.swapWithParent(),FH(e)}else{const t=e.model.component.data.main;Q4e(t);const n=Xen(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(FH)}function Q4e(e){if(e instanceof Uu&&e.type===bi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof NS||(t.swapWithParent(),Q4e(e))}}const jH="scale_",oP=5;function BH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!BH(t.children))return!1}return!0}function Kc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function xge(e,t,n){let r=e.sources,i=!1;return i=Kc(new Ben,r)||i,i=Kc(new Fen(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Kc(new Ven,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Kc(new Uen,r)||i,i=Kc(new Wen(t),r)||i,i=Kc(new jen,r)||i,i=Kc(new zen,r)||i,i=Kc(new qen,r)||i,i=Kc(new Hen,r)||i,i=Kc(new Len,r)||i,i=Kc(new Gen,r)||i),e.sources=r,i}function Qen(e,t){BH(e.sources);let n=0,r=0;for(let i=0;i<oP&&xge(e,t,!0);i++)n++;e.sources.map(FH);for(let i=0;i<oP&&xge(e,t,!1);i++)r++;BH(e.sources),Math.max(n,r)===oP&&Je(`Maximum optimization runs(${oP}) reached.`)}class Ks{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ks(()=>t(n))}}function J4e(e){Wi(e)?Jen(e):Zen(e)}function Jen(e){const t=e.component.scales;for(const n of Ye(t)){const r=ttn(e,n);if(t[n].setWithExplicit("domains",r),rtn(e,n),e.component.data.isFaceted){let s=e;for(;!Al(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)qp(a)&&(a.data=jH+a.data.replace(jH,""))}}}function Zen(e){for(const n of e.children)J4e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=fy(r,o.getWithExplicit("domains"),"domains","scale",UH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(XYt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function etn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Sge(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Sge(t,n);if(i)return"unaggregated"}return e}function ttn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=etn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&ks(r.x2)?ks(r.x)?fy(Eg(n,i,e,"x"),Eg(n,i,e,"x2"),"domain","scale",UH):Eg(n,i,e,"x2"):t==="y"&&ks(r.y2)?ks(r.y)?fy(Eg(n,i,e,"y"),Eg(n,i,e,"y2"),"domain","scale",UH):Eg(n,i,e,"y2"):Eg(n,i,e,t)}function ntn(e,t,n){return e.map(r=>({signal:`{data: ${L4(r,{timeUnit:n,type:t})}}`}))}function qB(e,t,n){var i;const r=(i=ao(n))==null?void 0:i.unit;return t==="temporal"||r?ntn(e,t,r):[e]}function Eg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=ks(i[r]),{type:c}=l,f=l.timeUnit;if(bXt(t)){const p=Eg(e,void 0,n,r),m=qB(t.unionWith,c,f);return Ad([...m,...p.value])}else{if(Rt(t))return Ad([t]);if(t&&t!=="unaggregated"&&!X6e(t))return Ad(qB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return al([[0,1]]);const p=n.requestDataName(bi.Main);return al([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=og(r)&&Ze(l)?itn(n,r,e):void 0;if(tp(l)){const p=qB([l.datum],c,f);return al(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(bi.Main),{field:m}=l;return al([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ii(h.bin)){if(uo(e))return al(e==="bin-ordinal"?[]:[{data:lI(d)?n.requestDataName(bi.Main):n.requestDataName(bi.Raw),field:n.vgField(r,cR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ii(p)){const m=cre(n,h.field,p);return al([new Ks(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return al([{data:n.requestDataName(bi.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[Zh(r)];if(fFe(h,p,s,a)){const m=n.requestDataName(bi.Main),g=cy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=fI(o)&&g!==.5&&us(r);return al([{data:m,field:n.vgField(r,y?{suffix:V4}:{})},{data:m,field:n.vgField(r,{suffix:y?H4:"end"})}])}}return al(d?[{data:lI(d)?n.requestDataName(bi.Main):n.requestDataName(bi.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(bi.Main),field:n.vgField(r)}])}function WB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":P4),...r?{field:kc(r)}:{},...i?{order:i}:{}}}function rtn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=X6e(r)&&r,o=Ub(i)&&T4(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function itn(e,t,n){if(!uo(n))return;const r=e.fieldDef(t),i=r.sort;if(lFe(i))return{op:"min",field:dx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(ch(i)){const a=s&&!o.has(i.field);return WB(i,a)}else if(uFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Dm(c)||Wy(c))return WB({field:at(l),order:u},d);if(hne(c)||!c)return WB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function Sge(e,t){const{aggregate:n,type:r}=e;return n?pt(n)&&!DYt.has(n)?{valid:!1,reason:EKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:xKt(e)}:{valid:!0}:{valid:!1,reason:wKt(e)}}function UH(e,t,n,r){return e.explicit&&t.explicit&&Je(IKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function stn(e){const t=Yd(e.map(o=>{if(qp(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=Yd(e.map(o=>{if(qp(o)){const a=o.sort;return a!==void 0&&!lI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(qp(o)&&n.length>0){let a=n[0];if(n.length>1){Je(Dme);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Yd(n.map(o=>lI(o)||!("op"in o)||pt(o.op)&&o.op in kYt?o:(Je(RKt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Je(Dme),i=!0);const s=Yd(e.map(o=>qp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function pre(e){if(qp(e)&&pt(e.field))return e.field;if(OYt(e)){let t;for(const n of e.fields)if(qp(n)&&pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(NKt),t}return Je(PKt),t}else if($Yt(e)){Je(DKt);const t=e.fields[0];return pt(t)?t:void 0}}function K4(e,t){const r=e.component.scales[t].get("domains").map(i=>(qp(i)&&(i.data=e.lookupDataSource(i.data)),i));return stn(r)}function Z4e(e){return DS(e)||mre(e)?e.children.reduce((t,n)=>t.concat(Z4e(n)),Tge(e)):Tge(e)}function Tge(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=otn(i.range,s,n,e),h=K4(e,n),p=a?eZt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function otn(e,t,n,r){if(us(n)){if(Gy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&qp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class e5e extends ug{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ib(this.get("domains"),t=>Fe(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const atn=["range","scheme"];function utn(e){const t=e.component.scales;for(const n of S4){const r=t[n];if(!r)continue;const i=ltn(n,e);r.setWithExplicit("range",i)}}function Age(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Ju(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new Ks(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ii(r)){const a=cre(e,i,r);return new Ks(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function ltn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of atn)if(n[f]!==void 0){const d=TH(s,f),h=Q6e(e,f);if(!d)Je(R6e(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(Fe(p)){if(us(e))return Ad(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ks.fromName(y,g)}return m}))}else if(mt(p))return Ad({data:t.requestDataName(bi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ad(p)}case"scheme":return Ad(ctn(n[f]))}}const o=e===Si||e==="xOffset"?"width":"height",a=r[o];if(Rh(a)){if(us(e))if(uo(s)){const f=n5e(a,t,e);if(f)return Ad({step:f})}else Je(N6e(o));else if(iR(e)){const f=e===Uy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=r5e(a,s);if(p)return Ad(p)}}}const{rangeMin:u,rangeMax:l}=n,c=ftn(e,t);return(u!==void 0||l!==void 0)&&TH(s,"rangeMin")&&Fe(c)&&c.length===2?Ad([u??c[0],l??c[1]]):al(c)}function ctn(e){return vXt(e)?{scheme:e.name,...ju(e,["name"])}:{scheme:e}}function t5e(e,t,n,{center:r}={}){const i=Ju(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===co&&Bl(n)?r?[Ks.fromName(a=>`${o(a)}/2`,s),Ks.fromName(a=>`-${o(a)}/2`,s)]:[Ks.fromName(o,s),0]:r?[Ks.fromName(a=>`-${o(a)}/2`,s),Ks.fromName(a=>`${o(a)}/2`,s)]:[0,Ks.fromName(o,s)]}function ftn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=ks(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Si:case co:{if(Hn(["point","band"],u)){const f=i5e(e,n,r.view);if(Rh(f))return{step:n5e(f,t,e)}}return t5e(e,t,u)}case Uy:case CS:return dtn(e,t,u);case ig:{const f=t.component.scales[e].get("zero"),d=s5e(i,f,r),h=mtn(i,n,t,r);return sx(u)?ptn(d,h,htn(u,r,l,e)):[d,h]}case Uc:return[0,Math.PI*2];case jb:return[0,360];case rd:return[0,new Ks(()=>{const f=t.getSignalName(Al(t.parent)?"child_width":"width"),d=t.getSignalName(Al(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Hy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case qy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Qu:return"symbol";case Xu:case Qh:case Jh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case sg:case zy:case Vy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function n5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=lne(n),o=r[s];if(zFe({step:e,offsetIsDiscrete:an(o)&&q6e(o.type)})==="offset"&&xFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${jYt(f)})`}}else return e.step}function r5e(e,t){if(zFe({step:e,offsetIsDiscrete:uo(t)})==="offset")return{step:e.step}}function dtn(e,t,n){const r=e===Uy?"x":"y",i=t.getScaleComponent(r);if(!i)return t5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=i5e(r,t.size,t.config.view);if(Rh(l)){const c=r5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=U6e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=cy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return QLe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function i5e(e,t,n){const r=e===Si?"width":"height",i=t[r];return i||cM(n,r)}function htn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Fe(n)?n.length+1:(Je(zKt(r)),3)}}function ptn(e,t,n){const r=()=>{const i=xf(t),s=xf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Ks(r):{signal:r()}}function s5e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${s5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(A4("size",e))}const Cge=.95;function mtn(e,t,n,r){const i={x:Age(n,"x"),y:Age(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Ige(t,i,r.view);return lr(s)?s-1:new Ks(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Ige(t,i,r.view);return lr(s)?Math.pow(Cge*s,2):new Ks(()=>`pow(${Cge} * ${s.signal}, 2)`)}}throw new Error(A4("size",e))}function Ige(e,t,n){const r=Rh(e.width)?e.width.step:lM(n,"width"),i=Rh(e.height)?e.height.step:lM(n,"height");return t.x||t.y?new Ks(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function o5e(e,t){Wi(e)?gtn(e,t):u5e(e,t)}function gtn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=ks(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=TH(h,t),y=Q6e(a,t);if(d!==void 0&&(g?y&&Je(y):Je(R6e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":zb(u[t])||b==="temporal"||v?l.set(t,{signal:L4(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in kge?kge[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:SFe(i,a),hasSecondaryRangeChannel:!!i[Zh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const kge={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?ytn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>vtn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>btn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>_tn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>wtn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Etn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return xtn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Stn(e,t,n,r,i,s.scale,o)};function a5e(e){Wi(e)?utn(e):u5e(e,"range")}function u5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?a5e(r):o5e(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=fy(i,a,t,"scale",t4e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function ytn(e,t){const n=t.bin;if(ii(n)){const r=cre(e,t.field,n);return new Ks(()=>e.getSignalName(r))}else if(Eo(n)&&Ub(n)&&n.step!==void 0)return{step:n.step}}function vtn(e,t){if(Hn([Xu,Qh,Jh],e)&&t!=="nominal")return"hcl"}function btn(e,t,n,r,i,s){var o;if(!((o=kh(s))!=null&&o.bin||Fe(n)||i!=null||r!=null||Hn([Bu.TIME,Bu.UTC],e)))return us(t)?!0:void 0}function _tn(e,t,n,r,i,s){if(us(e)){if(Sf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Bu.POINT)return n.pointPadding}}function wtn(e,t,n,r,i,s=!1){if(e===void 0){if(us(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:as(o,n==="bar"?a:u)}else if(iR(t)&&r===Bu.BAND)return i.offsetBandPaddingInner}}function Etn(e,t,n,r,i,s=!1){if(e===void 0){if(us(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Bu.BAND)return as(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(iR(t)){if(n===Bu.POINT)return .5;if(n===Bu.BAND)return i.offsetBandPaddingOuter}}}function xtn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Bl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Bl(e)&&t==="descending")return!0}function Stn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Bl(i)){if(Fe(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!sx(i))return!0;if(!(Ze(t)&&t.bin)&&Hn([...ep,...wYt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Ttn(e,t,n,r,i=!1){const s=Atn(t,n,r,i),{type:o}=e;return og(t)?o!==void 0?TXt(t,o)?Ze(n)&&!SXt(o,n.type)?(Je(AKt(o,s)),s):o:(Je(TKt(t,o,s)),s):s:null}function Atn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(qw(e)||LB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(FB(e,"ordinal")),"ordinal";if(us(e)||iR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in dne)return"band";const s=n[Ju(e)];return cb(s)||ax(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return qw(e)?"time":LB(e)==="discrete"?(Je(FB(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&ao(t.timeUnit).utc?"utc":"time";case"quantitative":return qw(e)?Ze(t)&&ii(t.bin)?"bin-ordinal":"linear":LB(e)==="discrete"?(Je(FB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(I6e(t.type))}function Ctn(e,{ignoreRange:t}={}){l5e(e),J4e(e);for(const n of xXt)o5e(e,n);t||a5e(e)}function l5e(e){Wi(e)?e.component.scales=Itn(e):e.component.scales=Rtn(e)}function Itn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of S4){const o=ks(t[s]);if(o&&n===sFe&&s===Qu&&o.type===IS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=SFe(t,s),l=Ttn(a,s,o,r,u);i[s]=new e5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const ktn=t4e((e,t)=>$me(e)-$me(t));function Rtn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){l5e(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=j4e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?hXt(a.value,u.value)?r[o]=fy(a,u,"type","scale",ktn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new e5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class GB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Wi(e){return(e==null?void 0:e.type)==="unit"}function Al(e){return(e==null?void 0:e.type)==="facet"}function mre(e){return(e==null?void 0:e.type)==="concat"}function DS(e){return(e==null?void 0:e.type)==="layer"}class gre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Eu(a),this.name=t.name??i,this.title=Ng(t.title)?{text:t.title}:t.title?Eu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new GB,this.projectionNameMap=r?r.projectionNameMap:new GB,this.signalNameMap=r?r.signalNameMap:new GB,this.data=t.data,this.description=t.description,this.transforms=LJt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:UQt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:D4(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ug,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?en(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Ctn(this)}parseProjection(){K4e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){H4e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=li(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=li(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Lr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=QZt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of mc)t[r].title&&n.push(qZt(this,r));for(const r of ore)n=n.concat(WZt(this,r));return n}assembleAxes(){return PZt(this.component.axes,this.config)}assembleLegends(){return W4e(this)}assembleProjections(){return _en(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...b6e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Lr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Al(this.parent)?Z4e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return xi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(bi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Al(this.parent)){const n=L4e(t),r=x4(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(uo(s)&&Gy(o)){const a=i.get("name"),u=K4(this,r),l=pre(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:M4e(a,i,c)}}else return Je(mne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(c6e(t)&&og(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(HYt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class c5e extends gre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return gQt(this.getMapping(),(r,i,s)=>{const o=kh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){zne(this.getMapping(),(r,i)=>{const s=kh(r);s&&t(s,i)},n)}}class X4 extends Or{clone(){return new X4(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Q4 extends Or{clone(){return new Q4(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class hI extends Or{clone(){return new hI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(_r("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=og(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Bl(d)&&l.aggregate!=="count"&&!Hb(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new hI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class J4 extends Or{clone(){return new J4(this.parent,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Z4 extends Or{clone(){return new Z4(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Yw extends Or{clone(){return new Yw(null,en(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[sd,id],[Rc,od]]){const s=i.map(o=>{const a=ks(n.encoding[o]);return Ze(a)?a.field:tp(a)?{expr:`${a.datum}`}:Wf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Yw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Qu)){const i=n.typedFieldDef(Qu);i.type===IS&&(t=new Yw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class pI extends Or{clone(){return new pI(null,this.projection,en(this.fields),en(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[sd,id],[Rc,od]]){const i=r.map(o=>{const a=ks(n.encoding[o]);return Ze(a)?a.field:tp(a)?{expr:`${a.datum}`}:Wf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Rc?"2":"";(i[0]||i[1])&&(t=new pI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ev extends Or{clone(){return new Ev(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ev(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=AFe(n.mark,r);return new Ev(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:vJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class e5 extends Or{clone(){return new e5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class mI extends Or{clone(){return new mI(null,en(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(bJt(o)){let u=h5e(o.data,s);u||(u=new hb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Uu(u,l,bi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(_Jt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(xi(u),u)}catch{throw new Error(YYt(u))}if(a=l.materialized,!a)throw new Error(KYt(u))}return new mI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ht(this.transform.as)}:{}};else{let n=this.transform.as;pt(n)||(Je(rKt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class t5 extends Or{clone(){return new t5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class n5 extends Or{clone(){return new n5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class r5 extends Or{clone(){return new r5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Yd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class i5 extends Or{clone(){return new i5(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function f5e(e){let t=0;function n(r,i){if(r instanceof hb&&!r.isGenerator&&!lx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ca&&(r.parent instanceof hb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof NS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof hR||r instanceof pR||r instanceof hI||r instanceof RS||r instanceof fx||r instanceof pI||r instanceof $f||r instanceof mI||r instanceof PS||r instanceof Gb||r instanceof Z4||r instanceof J4||r instanceof X4||r instanceof e5||r instanceof t5||r instanceof n5||r instanceof py||r instanceof i5||r instanceof r5||r instanceof Q4)&&i.transform.push(r.assemble()),(r instanceof dh||r instanceof fh||r instanceof Ev||r instanceof rm||r instanceof Yw)&&i.transform.push(...r.assemble()),r instanceof Uu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Uu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Uu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Ntn(e){const t=[],n=f5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Ptn(e,t){const n=[],r=f5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Dtn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function Otn(e){for(const t of mc)$tn(e,t);Rge(e,"x"),Rge(e,"y")}function $tn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=hx("title",null,r,t);let l=Ww(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Fe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=hx("labelOrient",a.header,r,t),f=a.header!==null?as((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[d5e(e,t,f)]}}}function d5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Rge(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=lre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Dtn(a.get("orient"));o[u]??(o[u]=[d5e(e,s,!1)]);const l=AA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Mtn(e){yre(e),pM(e,"width"),pM(e,"height")}function Ltn(e){yre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";pM(e,t),pM(e,n)}function yre(e){for(const t of e.children)t.parseLayoutSize()}function pM(e,t){const n=L4e(t),r=x4(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??j4e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=fy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Ftn(e){const{size:t,component:n}=e;for(const r of ep){const i=Ju(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Rh(s)?"step":s,!0)}else{const s=jtn(e,i);n.layoutSize.set(i,s,!1)}}}function jtn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(uo(s)){const a=cM(r.view,t);return Gy(o)||Rh(a)?"step":a}else return IH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return IH(r.view,t);{const s=cM(r.view,t);return Rh(s)?s.step:s}}}function zH(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class CC extends c5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Ere(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!uR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![em,tm].includes(i)){Je(A4(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(xH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Bne(t,n);return r.header?r.header=Eu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=s5(this),this.child.parseData()}parseLayoutSize(){yre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Otn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of mc)for(const r of are){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=hx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=G4(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof CC))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof CC?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof CC){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of ep){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(uo(o)&&Gy(a)){const u=K4(this.child,i),l=pre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(mne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of mc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ii(d)&&u.push(at(f,{binSuffix:"end"})),ch(h)){const{field:p,op:m=P4}=h,g=zH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Fe(h)){const p=dx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?ch(r.sort)?[zH(r,r.sort,{expr:"datum"})]:Fe(r.sort)?[dx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(ch(i)?i.order:!Fe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return MH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of ore)if(t[s]){const o=hx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return MH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Ntn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:mc.map(u=>this.facetSortFields(u)).flat(),order:mc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(XJt(this,[]))}]}getMapping(){return this.facet}}function Btn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(ch(s.sort)){const{field:o,op:a=P4}=s.sort;e=i=new Gb(e,{joinaggregate:[{op:a,field:o,as:zH(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function h5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(dI(e)&&dI(a)){if(El(e.values,a.values))return o}else if(lx(e)&&lx(a)){if(e.url===a.url)return o}else if(n4e(e)&&e.name===o.dataName)return o}}return null}function Utn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new hb({values:[]});return t.push(r),r}const n=h5e(e.data,t);if(n)return C0(e.data)||(n.data.format=JLe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new hb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function ztn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(RJt(i))o=e=new fx(e,i),s="derived";else if(Zne(i)){const a=Den(i);o=e=ca.makeWithAncestors(e,{},a,n)??e,e=new RS(e,t,i.filter)}else if(QFe(i))o=e=dh.makeFromTransform(e,i,t),s="number";else if(PJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ca(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=fh.makeFromTransform(e,i);else if(DJt(i))o=e=$f.makeFromTransform(e,i),s="number",sre(t)&&(e=new py(e));else if(XFe(i))o=e=mI.make(e,t,i,r++),s="derived";else if(CJt(i))o=e=new PS(e,i),s="number";else if(IJt(i))o=e=new Gb(e,i),s="number";else if(OJt(i))o=e=rm.makeFromTransform(e,i),s="derived";else if($Jt(i))o=e=new Z4(e,i),s="derived";else if(MJt(i))o=e=new Q4(e,i),s="derived";else if(kJt(i))o=e=new J4(e,i),s="derived";else if(wJt(i))o=e=new r5(e,i),s="derived";else if(AJt(i))e=new i5(e,i);else if(NJt(i))o=e=Ev.makeFromTransform(e,i),s="derived";else if(EJt(i))o=e=new X4(e,i),s="derived";else if(xJt(i))o=e=new t5(e,i),s="derived";else if(SJt(i))o=e=new n5(e,i),s="derived";else if(TJt(i))o=e=new e5(e,i),s="derived";else{Je(nKt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function s5(e){var h;let t=Utn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(C0(i)||lx(i)||dI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new YJt;C0(i)?(r4e(i)?t=new pR(t,i.sequence):ere(i)&&(t=new hR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ca.makeExplicit(t,e,o)??t,t=new py(t);const a=e.parent&&DS(e.parent);(Wi(e)||Al(e))&&a&&(t=dh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=ztn(t,e,o));const u=$en(e),l=Oen(e);t=ca.makeWithAncestors(t,{},{...u,...l},o)??t,Wi(e)&&(t=Yw.parseAll(t,e),t=pI.parseAll(t,e)),(Wi(e)||Al(e))&&(a||(t=dh.makeFromEncoding(t,e)??t),t=fh.makeFromEncoding(t,e)??t,t=fx.parseAllForSortIndex(t,e));const c=t=Nge(bi.Raw,e,t);if(Wi(e)){const p=$f.makeFromEncoding(t,e);p&&(t=p,sre(e)&&(t=new py(t))),t=Ev.makeFromEncoding(t,e)??t,t=rm.makeFromEncoding(t,e)??t}Wi(e)&&(t=hI.make(t,e)??t);const f=t=Nge(bi.Main,e,t);Wi(e)&&RZt(e,f);let d=null;if(Al(e)){const p=e.getName("facet");t=Btn(t,e.facet)??t,d=new NS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Nge(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Uu(n,s,e,i);return r[s]=o,o}class Vtn extends gre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(ZYt),this.children=this.getChildren(t).map((l,c)=>Ere(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=s5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return B4(t)?t.vconcat:Qne(t)?t.hconcat:t.concat}parseLayoutSize(){Ltn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=ure(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Htn(e){return e===!1||e===null}const qtn={disable:1,gridScale:1,scale:1,...wFe,labelExpr:1,encode:1},p5e=Ye(qtn);class vre extends ug{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new vre(en(this.explicit),en(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Htn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function Wtn(e,t,n){const{encoding:r,config:i}=e,s=ks(r[t])??ks(r[Zh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(lb(u))return{text:Tf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(ox(s)==="quantitative"){if(ax(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Tf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Tf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(ox(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Tf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Gtn(e){return ep.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[enn(n,e)]),t),{})}const Ytn={bottom:"top",top:"bottom",left:"right",right:"left"};function Ktn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=lre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Xtn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of ep){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=Ytn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function Xtn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Qtn(i,s)}}}else return t.map(n=>n.clone());return e}function Qtn(e,t){for(const n of p5e){const r=fy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return A6e(i,s);case"gridScale":return{explicit:i.explicit,value:as(i.value,s.value)}}return z4(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Jtn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:cI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===P4e(r,i))return!0}return e===n[t]}const Ztn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function enn(e,t){var y,v;let n=t.axis(e);const r=new vre,i=ks(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||BZt(e),u=t.getScaleComponent(e).get("type"),l=DZt(e,u,a,t.config),c=n!==void 0?!n:OH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=LZt(i,n,e,o.style,l),d=tFe(n.formatType,i,u),h=eFe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of p5e){const w=b in mge?mge[b](p):zme(b)?n[b]:void 0,E=w!==void 0,S=Jtn(w,b,n,t,e);if(E&&S)r.set(b,w,S);else{const{configValue:T=void 0,configFrom:A=void 0}=zme(b)&&b!=="values"?OH(b,o.style,n.style,l):{},C=T!==void 0;E&&!C?r.set(b,w,S):(A!=="vgAxisConfig"||Ztn.has(b)&&C||fR(T)||Rt(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=_Fe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=F4e(m[w]??{},t),S=w==="labels"?Wtn(t,e,E):E;return S!==void 0&&!Lr(S)&&(b[w]={update:S}),b},{});return Lr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function tnn({encoding:e,size:t}){for(const n of ep){const r=Ju(n);Rh(t[r])&&n0(e[n])&&(delete t[r],Je(N6e(r)))}return t}const nnn={vgMark:"arc",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...dy(e,"radius"),...dy(e,"theta")})},rnn={vgMark:"area",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...fM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...fM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...ire(e)})},inn={vgMark:"rect",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...dy(e,"x"),...dy(e,"y")})},snn={vgMark:"shape",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===IS?{field:at(n,{expr:"datum"})}:{}}]}},onn={vgMark:"image",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...dy(e,"x"),...dy(e,"y"),...nre(e,"url")})},ann={vgMark:"line",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Qs("size",e,{vgChannel:"strokeWidth"}),...ire(e)})},unn={vgMark:"trail",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Qs("size",e),...ire(e)})};function bre(e,t){const{config:n}=e;return{...zc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Qs("size",e),...Qs("angle",e),...lnn(e,n,t)}}function lnn(e,t,n){return n?{shape:{value:n}}:Qs("shape",e)}const cnn={vgMark:"symbol",encodeEntry:e=>bre(e)},fnn={vgMark:"symbol",encodeEntry:e=>bre(e,"circle")},dnn={vgMark:"symbol",encodeEntry:e=>bre(e,"square")},hnn={vgMark:"rect",encodeEntry:e=>({...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...dy(e,"x"),...dy(e,"y")})},pnn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...fM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Qs("size",e,{vgChannel:"strokeWidth"})}}},mnn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...zc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...nre(e),...Qs("size",e,{vgChannel:"fontSize"}),...Qs("angle",e),...fge("align",gnn(e.markDef,n,t)),...fge("baseline",ynn(e.markDef,n,t)),...la("radius",e,{defaultPos:null}),...la("theta",e,{defaultPos:null})}}};function gnn(e,t,n){if(_r("align",e,n)===void 0)return"center"}function ynn(e,t,n){if(_r("baseline",e,n)===void 0)return"middle"}const vnn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...zc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid",vgChannel:"xc"}),...la("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Qs("size",e,{defaultValue:bnn(e),vgChannel:i}),[s]:li(_r("thickness",n,t))}}};function bnn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=_r("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Gy(a)&&lr(a.step)?a.step*3/4:lM(t.view,i)*3/4}}const aP={arc:nnn,area:rnn,bar:inn,circle:fnn,geoshape:snn,image:onn,line:ann,point:cnn,rect:hnn,rule:pnn,square:dnn,text:mnn,tick:vnn,trail:unn};function _nn(e){if(Hn([R4,I4,$Xt],e.mark)){const t=AFe(e.mark,e.encoding);if(t.length>0)return wnn(e,t)}else if(e.mark===k4){const t=EH.some(n=>_r(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Enn(e)}return _re(e)}const Pge="faceted_path_";function wnn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Pge+e.requestDataName(bi.Main),data:e.requestDataName(bi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:_re(e,{fromPrefix:Pge})}]}const Dge="stack_group_";function Enn(e){var l;const[t]=_re(e,{fromPrefix:Dge}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...ex(t.encode.update,["y","yc","y2","height",...EH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ju(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ex(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ju(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of EH){const f=Om(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=li(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Om(f,e.markDef,e.config);return d!==void 0?{...c,[f]:li(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(bi.Main),name:Dge+e.requestDataName(bi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function xnn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Fe(o)&&Wf(o)&&_H(o.value)||!o&&_H(_r("order",i,s)))){if((Fe(o)||Ze(o))&&!n)return x6e(o,{expr:"datum"});if(Hb(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(Fe(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(ch(c))return{field:at({aggregate:Une(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(uFe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function _re(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=as(r.clip,Snn(e),Tnn(e)),a=w6e(r),u=i.key,l=xnn(e),c=Ann(e),f=_r("aria",r,s),d=aP[n].postEncodingTransform?aP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:aP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(bi.Main)},encode:{update:aP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Snn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Tnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Ann(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class m5e extends c5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Hme(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Ih(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=cJt(o,s,{graticule:t.data&&ere(t.data)}));const u=this.encoding=pQt(t.encoding||{},a,o.filled,s);this.markDef=GFe(o,u,s),this.size=tnn({encoding:u,size:Hme(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=WFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Kne(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===sFe,r=t&&dYt.some(i=>an(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return S4.reduce((r,i)=>{const s=ks(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Eu(t);return Fe(n)&&(i.domain=n.map(ml)),Fe(r)&&(i.range=r.map(ml)),i}initAxes(t){return ep.reduce((n,r)=>{const i=t[r];if(an(i)||r===Si&&an(t.x2)||r===co&&an(t.y2)){const s=an(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=fR(s)?_6e(s):ml(s)}return r}initLegends(t){return EYt.reduce((n,r)=>{const i=ks(t[r]);if(i&&SYt(r)){const s=i.legend;n[r]=s&&Eu(s)}return n},{})}parseData(){this.component.data=s5(this)}parseLayoutSize(){Ftn(this)}parseSelections(){this.component.selection=kZt(this,this.selection)}parseMarkGroup(){this.component.mark=_nn(this)}parseAxesAndHeaders(){this.component.axes=Gtn(this)}assembleSelectionTopLevelSignals(t){return QJt(this,t)}assembleSignals(){return[...k4e(this),...KJt(this,[])]}assembleSelectionData(t){return JJt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return ure(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!DS(this.parent))&&(t=o4e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return _v(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return kh(n)}typedFieldDef(t){const n=this.fieldDef(t);return Za(n)?n:null}}class wre extends gre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(U4(a))return new wre(a,this,this.getName(`layer_${u}`),o,s);if(ag(a))return new m5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(pne(a))})}parseData(){this.component.data=s5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Mtn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Ktn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),k4e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),ure(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ht(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ZJt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),W4e(this))}}function Ere(e,t,n,r,i){if(D4(e))return new CC(e,t,n,i);if(U4(e))return new wre(e,t,n,r,i);if(ag(e))return new m5e(e,t,n,r,i);if(FQt(e))return new Vtn(e,t,n,i);throw new Error(pne(e))}function Cnn(e,t={}){t.logger&&VKt(t.logger),t.fieldTitle&&yFe(t.fieldTitle);try{const n=qFe(mS(t.config,e.config)),r=e4e(e,n),i=Ere(r,null,"",void 0,n);return i.parse(),Qen(i.component.data,i),{spec:knn(i,Inn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&HKt(),t.fieldTitle&&sQt()}}function Inn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):pt(t)&&(t={type:t}),i&&s&&qJt(t.type)){if(i==="step"&&s==="step")Je(Ime()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(Ime(x4(o)));const a=o==="width"?"height":"width";t.type=WJt(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...nge(n,!1),...nge(e,!0)}}function knn(e,t,n={},r){const i=e.config?JQt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Ptn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...UFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Rnn=oYt.version,Nnn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:tx,accessPathWithDatum:sne,compile:Cnn,contains:Hn,deepEqual:El,deleteNestedProperty:Z$,duplicate:en,entries:uy,every:nne,fieldIntersection:ine,flatAccessWithDatum:e6e,getFirstDefined:as,hasIntersection:rne,hash:Vn,internalField:r6e,isBoolean:lI,isEmpty:Lr,isEqual:uYt,isInternalField:i6e,isNullOrFalse:_H,isNumeric:y4,keys:Ye,logicalExpr:TC,mergeDeep:JLe,never:QLe,normalize:e4e,normalizeAngle:cI,omit:ju,pick:ex,prefixGenerator:wH,removePathFromField:AS,replaceAll:sb,replacePathInField:kc,resetIdCounter:cYt,setEqual:ZLe,some:ib,stringify:Fr,titleCase:tR,unique:Yd,uniqueId:n6e,vals:No,varName:xi,version:Rnn},Symbol.toStringTag,{value:"Module"}));function g5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Pnn="vega-themes",Dnn="2.15.0",Onn="Themes for stylized Vega and Vega-Lite visualizations.",$nn=["vega","vega-lite","themes","style"],Mnn="BSD-3-Clause",Lnn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Fnn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],jnn="build/vega-themes.js",xre="build/vega-themes.module.js",Bnn="build/vega-themes.min.js",Unn="build/vega-themes.min.js",znn="build/vega-themes.module.d.ts",Vnn={type:"git",url:"https://github.com/vega/vega-themes.git"},Hnn=["src","build"],qnn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Wnn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Gnn={vega:"*","vega-lite":"*"},Ynn={},Knn={name:Pnn,version:Dnn,description:Onn,keywords:$nn,license:Mnn,author:Lnn,contributors:Fnn,main:jnn,module:xre,unpkg:Bnn,jsdelivr:Unn,types:znn,repository:Vnn,files:Hnn,scripts:qnn,devDependencies:Wnn,peerDependencies:Gnn,dependencies:Ynn};const E_="#fff",Oge="#888",Xnn={background:"#333",view:{stroke:Oge},title:{color:E_,subtitleColor:E_},style:{"guide-label":{fill:E_},"guide-title":{fill:E_}},axis:{domainColor:E_,gridColor:Oge,tickColor:E_}},s1="#4572a7",Qnn={background:"#fff",arc:{fill:s1},area:{fill:s1},line:{stroke:s1,strokeWidth:2},path:{stroke:s1},rect:{fill:s1},shape:{stroke:s1},symbol:{fill:s1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},o1="#30a2da",YB="#cbcbcb",Jnn="#999",Znn="#333",$ge="#f0f0f0",Mge="#333",ern={arc:{fill:o1},area:{fill:o1},axis:{domainColor:YB,grid:!0,gridColor:YB,gridWidth:1,labelColor:Jnn,labelFontSize:10,titleColor:Znn,tickColor:YB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:$ge,group:{fill:$ge},legend:{labelColor:Mge,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Mge,titleFontSize:14,titlePadding:10},line:{stroke:o1,strokeWidth:2},path:{stroke:o1,strokeWidth:.5},rect:{fill:o1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:o1},bar:{binSpacing:2,fill:o1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},a1="#000",trn={group:{fill:"#e5e5e5"},arc:{fill:a1},area:{fill:a1},line:{stroke:a1},path:{stroke:a1},rect:{fill:a1},shape:{stroke:a1},symbol:{fill:a1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},nrn=22,rrn="normal",Lge="Benton Gothic, sans-serif",Fge=11.5,irn="normal",u1="#82c6df",KB="Benton Gothic Bold, sans-serif",jge="normal",Bge=13,OT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},srn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:KB,fontSize:nrn,fontWeight:rrn},arc:{fill:u1},area:{fill:u1},line:{stroke:u1,strokeWidth:2},path:{stroke:u1},rect:{fill:u1},shape:{stroke:u1},symbol:{fill:u1,size:30},axis:{labelFont:Lge,labelFontSize:Fge,labelFontWeight:irn,titleFont:KB,titleFontSize:Bge,titleFontWeight:jge},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Lge,labelFontSize:Fge,symbolType:"square",titleFont:KB,titleFontSize:Bge,titleFontWeight:jge},range:{category:OT["category-6"],diverging:OT["fireandice-6"],heatmap:OT["fire-7"],ordinal:OT["fire-7"],ramp:OT["fire-7"]}},l1="#ab5787",uP="#979797",orn={background:"#f9f9f9",arc:{fill:l1},area:{fill:l1},line:{stroke:l1},path:{stroke:l1},rect:{fill:l1},shape:{stroke:l1},symbol:{fill:l1,size:30},axis:{domainColor:uP,domainWidth:.5,gridWidth:.2,labelColor:uP,tickColor:uP,tickWidth:.2,titleColor:uP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},c1="#3e5c69",arn={background:"#fff",arc:{fill:c1},area:{fill:c1},line:{stroke:c1},path:{stroke:c1},rect:{fill:c1},shape:{stroke:c1},symbol:{fill:c1},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Jl="#1696d2",Uge="#000000",urn="#FFFFFF",lP="Lato",XB="Lato",lrn="Lato",crn="#DEDDDD",frn=18,$T={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},drn={background:urn,title:{anchor:"start",fontSize:frn,font:lP},axisX:{domain:!0,domainColor:Uge,domainWidth:1,grid:!1,labelFontSize:12,labelFont:XB,labelAngle:0,tickColor:Uge,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:lP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:crn,gridWidth:1,labelFontSize:12,labelFont:XB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:lP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:XB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:lP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:$T["six-groups-cat-1"],diverging:$T["diverging-colors"],heatmap:$T["diverging-colors"],ordinal:$T["six-groups-seq"],ramp:$T["shades-blue"]},area:{fill:Jl},rect:{fill:Jl},line:{color:Jl,stroke:Jl,strokeWidth:5},trail:{color:Jl,stroke:Jl,strokeWidth:0,size:1},path:{stroke:Jl,strokeWidth:.5},point:{filled:!0},text:{font:lrn,color:Jl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Jl,stroke:null}},arc:{fill:Jl},shape:{stroke:Jl},symbol:{fill:Jl,size:30}},f1="#3366CC",zge="#ccc",cP="Arial, sans-serif",hrn={arc:{fill:f1},area:{fill:f1},path:{stroke:f1},rect:{fill:f1},shape:{stroke:f1},symbol:{stroke:f1},circle:{fill:f1},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:cP,fontSize:12},"guide-title":{font:cP,fontSize:12},"group-title":{font:cP,fontSize:12}},title:{font:cP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:zge,tickColor:zge,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Sre=e=>e*(1/3+1),Vge=Sre(9),Hge=Sre(10),qge=Sre(12),MT="Segoe UI",Wge="wf_standard-font, helvetica, arial, sans-serif",Gge="#252423",LT="#605E5C",Yge="transparent",prn="#C8C6C4",ef="#118DFF",mrn="#12239E",grn="#E66C37",yrn="#6B007B",vrn="#E044A7",brn="#744EC2",_rn="#D9B300",wrn="#D64550",y5e=ef,v5e="#DEEFFF",Kge=[v5e,y5e],Ern=[v5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",y5e],xrn={view:{stroke:Yge},background:Yge,font:MT,header:{titleFont:Wge,titleFontSize:qge,titleColor:Gge,labelFont:MT,labelFontSize:Hge,labelColor:LT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:LT,labelFontSize:Vge,titleFont:Wge,titleColor:Gge,titleFontSize:qge,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:prn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ef},line:{stroke:ef,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:MT,fontSize:Vge,fill:LT},arc:{fill:ef},area:{fill:ef,line:!0,opacity:.6},path:{stroke:ef},rect:{fill:ef},point:{fill:ef,filled:!0,size:75},shape:{stroke:ef},symbol:{fill:ef,strokeWidth:1.5,size:50},legend:{titleFont:MT,titleFontWeight:"bold",titleColor:LT,labelFont:MT,labelFontSize:Hge,labelColor:LT,symbolType:"circle",symbolSize:75},range:{category:[ef,mrn,grn,yrn,vrn,brn,_rn,wrn],diverging:Kge,heatmap:Kge,ordinal:Ern}},QB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Srn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',JB=400,fP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Trn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Arn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function o5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=fP.gridBg[e],i=fP.textPrimary[e],s=fP.textSecondary[e],o=n==="dark"?Trn:Arn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:QB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Srn,labelFontWeight:JB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:fP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:QB,fill:s,fontWeight:JB},"guide-title":{font:QB,fill:s,fontWeight:JB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Crn=o5({theme:"white",background:"#ffffff"}),Irn=o5({theme:"g10",background:"#f4f4f4"}),krn=o5({theme:"g90",background:"#262626"}),Rrn=o5({theme:"g100",background:"#161616"}),Nrn=Knn.version,Prn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Irn,carbong100:Rrn,carbong90:krn,carbonwhite:Crn,dark:Xnn,excel:Qnn,fivethirtyeight:ern,ggplot2:trn,googlecharts:hrn,latimes:srn,powerbi:xrn,quartz:orn,urbaninstitute:drn,version:Nrn,vox:arn},Symbol.toStringTag,{value:"Module"}));function Drn(e,t,n,r){if(Fe(e))return`[${e.map(i=>t(pt(i)?i:Xge(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=Xge(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Orn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Xge(e,t){return JSON.stringify(e,Orn(t))}var $rn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const b5e="vg-tooltip-element",Mrn={offsetX:10,offsetY:10,id:b5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Lrn,maxDepth:2,formatTooltip:Drn,baseURL:""};function Lrn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Frn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return $rn.toString().replace(b5e,e)}function jrn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Brn{constructor(t){this.options={...Mrn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Frn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=jrn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var ZB={};function Urn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var e9,Qge;function zrn(){return Qge||(Qge=1,e9=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),e9}var Vrn=yr;yr.Node=pb;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)qrn(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Wrn(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=Hrn(this,i,n[r]);return s};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function Hrn(e,t,n){var r=t===e.head?new pb(n,null,t,e):new pb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function qrn(e,t){e.tail=new pb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Wrn(e,t){e.head=new pb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function pb(e,t,n,r){if(!(this instanceof pb))return new pb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{zrn()(yr)}catch{}const Grn=Vrn,j1=Symbol("max"),Tp=Symbol("length"),x_=Symbol("lengthCalculator"),IC=Symbol("allowStale"),sv=Symbol("maxAge"),_p=Symbol("dispose"),Jge=Symbol("noDisposeOnSet"),Hs=Symbol("lruList"),tf=Symbol("cache"),_5e=Symbol("updateAgeOnGet"),t9=()=>1;class Yrn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[j1]=t.max||1/0;const n=t.length||t9;if(this[x_]=typeof n!="function"?t9:n,this[IC]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[sv]=t.maxAge||0,this[_p]=t.dispose,this[Jge]=t.noDisposeOnSet||!1,this[_5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[j1]=t||1/0,FT(this)}get max(){return this[j1]}set allowStale(t){this[IC]=!!t}get allowStale(){return this[IC]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[sv]=t,FT(this)}get maxAge(){return this[sv]}set lengthCalculator(t){typeof t!="function"&&(t=t9),t!==this[x_]&&(this[x_]=t,this[Tp]=0,this[Hs].forEach(n=>{n.length=this[x_](n.value,n.key),this[Tp]+=n.length})),FT(this)}get lengthCalculator(){return this[x_]}get length(){return this[Tp]}get itemCount(){return this[Hs].length}rforEach(t,n){n=n||this;for(let r=this[Hs].tail;r!==null;){const i=r.prev;Zge(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Hs].head;r!==null;){const i=r.next;Zge(this,t,r,n),r=i}}keys(){return this[Hs].toArray().map(t=>t.key)}values(){return this[Hs].toArray().map(t=>t.value)}reset(){this[_p]&&this[Hs]&&this[Hs].length&&this[Hs].forEach(t=>this[_p](t.key,t.value)),this[tf]=new Map,this[Hs]=new Grn,this[Tp]=0}dump(){return this[Hs].map(t=>mM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Hs]}set(t,n,r){if(r=r||this[sv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[x_](n,t);if(this[tf].has(t)){if(s>this[j1])return Kw(this,this[tf].get(t)),!1;const u=this[tf].get(t).value;return this[_p]&&(this[Jge]||this[_p](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Tp]+=s-u.length,u.length=s,this.get(t),FT(this),!0}const o=new Krn(t,n,s,i,r);return o.length>this[j1]?(this[_p]&&this[_p](t,n),!1):(this[Tp]+=o.length,this[Hs].unshift(o),this[tf].set(t,this[Hs].head),FT(this),!0)}has(t){if(!this[tf].has(t))return!1;const n=this[tf].get(t).value;return!mM(this,n)}get(t){return n9(this,t,!0)}peek(t){return n9(this,t,!1)}pop(){const t=this[Hs].tail;return t?(Kw(this,t),t.value):null}del(t){Kw(this,this[tf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[tf].forEach((t,n)=>n9(this,n,!1))}}const n9=(e,t,n)=>{const r=e[tf].get(t);if(r){const i=r.value;if(mM(e,i)){if(Kw(e,r),!e[IC])return}else n&&(e[_5e]&&(r.value.now=Date.now()),e[Hs].unshiftNode(r));return i.value}},mM=(e,t)=>{if(!t||!t.maxAge&&!e[sv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[sv]&&n>e[sv]},FT=e=>{if(e[Tp]>e[j1])for(let t=e[Hs].tail;e[Tp]>e[j1]&&t!==null;){const n=t.prev;Kw(e,t),t=n}},Kw=(e,t)=>{if(t){const n=t.value;e[_p]&&e[_p](n.key,n.value),e[Tp]-=n.length,e[tf].delete(n.key),e[Hs].removeNode(t)}};class Krn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Zge=(e,t,n,r)=>{let i=n.value;mM(e,i)&&(Kw(e,n),e[IC]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var Xrn=Yrn;const Qrn=Object.freeze({loose:!0}),Jrn=Object.freeze({}),Zrn=e=>e?typeof e!="object"?Qrn:e:Jrn;var Tre=Zrn,VH={exports:{}};const ein="2.0.0",w5e=256,tin=Number.MAX_SAFE_INTEGER||9007199254740991,nin=16,rin=w5e-6,iin=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Are={MAX_LENGTH:w5e,MAX_SAFE_COMPONENT_LENGTH:nin,MAX_SAFE_BUILD_LENGTH:rin,MAX_SAFE_INTEGER:tin,RELEASE_TYPES:iin,SEMVER_SPEC_VERSION:ein,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const sin=typeof process=="object"&&ZB&&ZB.NODE_DEBUG&&/\bsemver\b/i.test(ZB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var a5=sin;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Are,s=a5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(VH,VH.exports);var Cre=VH.exports;const e0e=/^[0-9]+$/,E5e=(e,t)=>{const n=e0e.test(e),r=e0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},oin=(e,t)=>E5e(t,e);var ain={compareIdentifiers:E5e,rcompareIdentifiers:oin};const dP=a5,{MAX_LENGTH:t0e,MAX_SAFE_INTEGER:hP}=Are,{safeRe:n0e,t:r0e}=Cre,uin=Tre,{compareIdentifiers:S_}=ain;let lin=class yd{constructor(t,n){if(n=uin(n),t instanceof yd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>t0e)throw new TypeError(`version is longer than ${t0e} characters`);dP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?n0e[r0e.LOOSE]:n0e[r0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>hP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>hP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>hP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<hP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(dP("SemVer.compare",this.version,this.options,t),!(t instanceof yd)){if(typeof t=="string"&&t===this.version)return 0;t=new yd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof yd||(t=new yd(t,this.options)),S_(this.major,t.major)||S_(this.minor,t.minor)||S_(this.patch,t.patch)}comparePre(t){if(t instanceof yd||(t=new yd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(dP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S_(r,i)}while(++n)}compareBuild(t){t instanceof yd||(t=new yd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(dP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),S_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ire=lin;const i0e=Ire,cin=(e,t,n)=>new i0e(e,n).compare(new i0e(t,n));var OS=cin;const fin=OS,din=(e,t,n)=>fin(e,t,n)===0;var hin=din;const pin=OS,min=(e,t,n)=>pin(e,t,n)!==0;var gin=min;const yin=OS,vin=(e,t,n)=>yin(e,t,n)>0;var bin=vin;const _in=OS,win=(e,t,n)=>_in(e,t,n)>=0;var Ein=win;const xin=OS,Sin=(e,t,n)=>xin(e,t,n)<0;var Tin=Sin;const Ain=OS,Cin=(e,t,n)=>Ain(e,t,n)<=0;var Iin=Cin;const kin=hin,Rin=gin,Nin=bin,Pin=Ein,Din=Tin,Oin=Iin,$in=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return kin(e,n,r);case"!=":return Rin(e,n,r);case">":return Nin(e,n,r);case">=":return Pin(e,n,r);case"<":return Din(e,n,r);case"<=":return Oin(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Min=$in,r9,s0e;function Lin(){if(s0e)return r9;s0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}r9=t;const n=Tre,{safeRe:r,t:i}=Cre,s=Min,o=a5,a=Ire,u=x5e();return r9}var i9,o0e;function x5e(){if(o0e)return i9;o0e=1;class e{constructor(O,F){if(F=r(F),O instanceof e)return O.loose===!!F.loose&&O.includePrerelease===!!F.includePrerelease?O:new e(O.raw,F);if(O instanceof i)return this.raw=O.value,this.set=[[O]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(O=>O.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(O){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+O,B=n.get(L);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];O=O.replace(H,R(this.options.includePrerelease)),s("hyphen replace",O),O=O.replace(a[u.COMPARATORTRIM],l),s("comparator trim",O),O=O.replace(a[u.TILDETRIM],c),s("tilde trim",O),O=O.replace(a[u.CARETTRIM],f),s("caret trim",O);let D=O.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>I(q,this.options));U&&(D=D.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(L,j),j}intersects(O,F){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,F)&&O.set.some(B=>g(B,F)&&L.every(U=>B.every(H=>U.intersects(H,F)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new o(O,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(M(this.set[F],O,this.options))return!0;return!1}}i9=e;const t=Xrn,n=new t({max:1e3}),r=Tre,i=Lin(),s=a5,o=Ire,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Cre,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Are,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,O)=>{let F=!0;const L=P.slice();let B=L.pop();for(;F&&L.length;)F=L.every(U=>B.intersects(U,O)),B=L.pop();return F},y=(P,O)=>(s("comp",P,O),P=E(P,O),s("caret",P),P=b(P,O),s("tildes",P),P=T(P,O),s("xrange",P),P=C(P,O),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,O)=>P.trim().split(/\s+/).map(F=>w(F,O)).join(" "),w=(P,O)=>{const F=O.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(L,B,U,H,D)=>{s("tilde",P,L,B,U,H,D);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${B}.${U}.${H}-${D} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(P,O)=>P.trim().split(/\s+/).map(F=>S(F,O)).join(" "),S=(P,O)=>{s("caret",P,O);const F=O.loose?a[u.CARETLOOSE]:a[u.CARET],L=O.includePrerelease?"-0":"";return P.replace(F,(B,U,H,D,z)=>{s("caret",P,B,U,H,D,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${L} <${+U+1}.0.0-0`:v(D)?U==="0"?W=`>=${U}.${H}.0${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${L} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${D}-${z} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${D}${L} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D} <${+U+1}.0.0-0`),s("caret return",W),W})},T=(P,O)=>(s("replaceXRanges",P,O),P.split(/\s+/).map(F=>A(F,O)).join(" ")),A=(P,O)=>{P=P.trim();const F=O.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(L,B,U,H,D,z)=>{s("xRange",P,L,B,U,H,D,z);const W=v(U),j=W||v(H),q=j||v(D),G=q;return B==="="&&G&&(B=""),z=O.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(j&&(H=0),D=0,B===">"?(B=">=",j?(U=+U+1,H=0,D=0):(H=+H+1,D=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),L=`${B+U}.${H}.${D}${z}`):j?L=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(L=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",L),L})},C=(P,O)=>(s("replaceStars",P,O),P.trim().replace(a[u.STAR],"")),I=(P,O)=>(s("replaceGTE0",P,O),P.trim().replace(a[O.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>(O,F,L,B,U,H,D,z,W,j,q,G,ne)=>(v(L)?F="":v(B)?F=`>=${L}.0.0${P?"-0":""}`:v(U)?F=`>=${L}.${B}.0${P?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:P?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),M=(P,O,F)=>{for(let L=0;L<P.length;L++)if(!P[L].test(O))return!1;if(O.prerelease.length&&!F.includePrerelease){for(let L=0;L<P.length;L++)if(s(P[L].semver),P[L].semver!==i.ANY&&P[L].semver.prerelease.length>0){const B=P[L].semver;if(B.major===O.major&&B.minor===O.minor&&B.patch===O.patch)return!0}return!1}return!0};return i9}const Fin=x5e(),jin=(e,t,n)=>{try{t=new Fin(t,n)}catch{return!1}return t.test(e)};var Bin=jin,S5e=Urn(Bin);function Uin(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var zin=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function T5e(e,...t){for(const n of t)Vin(e,n);return e}function Vin(e,t){for(const n of Object.keys(t))gS(e,n,t[n],!0)}const rf=AGt;let gI=Nnn;const pP=typeof window<"u"?window:void 0;var d0e;gI===void 0&&((d0e=pP==null?void 0:pP.vl)!=null&&d0e.compile)&&(gI=pP.vl);const Hin={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},qin={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},IA={vega:"Vega","vega-lite":"Vega-Lite"},gM={vega:rf.version,"vega-lite":gI?gI.version:"not available"},Win={vega:e=>e,"vega-lite":(e,t)=>gI.compile(e,{config:t}).spec},Gin=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Yin="chart-wrapper";function Kin(e){return typeof e=="function"}function a0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${IA[r]} JSON Source`}function Xin(e,t){if(e.$schema){const n=g5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${IA[n.library]}, but mode argument sets ${IA[t]??t}.`);const r=n.library;return S5e(gM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${IA[r]} ${n.version}, but the current version of ${IA[r]} is v${gM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function A5e(e){return!!(e&&"load"in e)}function u0e(e){return A5e(e)?e:rf.loader(e)}function Qin(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Jin(e,t,n={}){let r,i;pt(t)?(i=u0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Qin(r),o=s.loader;(!i||o)&&(i=u0e(n.loader??o));const a=await l0e(s,i),u=await l0e(n,i),l={...T5e(u,a),config:mS(u.config??{},a.config??{})};return await esn(e,r,l,i)}async function l0e(e,t){const n=pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Zin(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function esn(e,t,n={},r){const i=n.theme?mS(Prn[n.theme],n.config??{}):n.config,s=Fy(n.actions)?n.actions:T5e({},Hin,n.actions??{}),o={...qin,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??rf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:T}=Zin(c);if(!S.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?zin.toString():n.defaultStyle,T.appendChild(A)}}const f=Xin(t,n.mode);let d=Win[f](t,i);if(f==="vega-lite"&&d.$schema){const E=g5e(d.$schema);S5e(gM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${gM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Yin),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):EF(d,p,!0,!1).newDocument),n.formatLocale&&rf.formatLocale(n.formatLocale),n.timeFormatLocale&&rf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?rf.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&rf.expressionFunction(E,S)}const{ast:m}=n,g=rf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||rf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:rf.expressionInterpreter??n.expr??MGt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,T=E&&!A5e(E)?E==null?void 0:E.baseURL:void 0,A=Kin(S)?S:new Brn({baseURL:T,...S===!0?{}:S}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const A=document.createElement("summary");A.innerHTML=Gin,T.append(A),b=C=>{T.contains(C.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const A=o[`${T.toUpperCase()}_ACTION`],C=document.createElement("a"),I=mt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${T}`,C.addEventListener("mousedown",async function(R){R.preventDefault();const M=await y.toImageURL(T,I);this.href=M}),S.append(C)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(A){a0e(sB(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(A){a0e(sB(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){Uin(window,T,{config:i,mode:f,renderer:a,spec:sB(t)}),C.preventDefault()}),S.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function tsn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function nsn(e,t,n){n&&(tsn(n)?n(e.data(t)):e.change(t,rf.changeset().remove(()=>!0).insert(n)))}function rsn(e,t){Object.keys(t).forEach(n=>{nsn(e,n,t[n])})}function C5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const I5e=()=>{};function s9(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function isn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=C5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!MP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function c0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function o9(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function kA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class k5e extends Un.PureComponent{constructor(){super(...arguments),kA(this,"containerRef",Un.createRef()),kA(this,"resultPromise",void 0),kA(this,"handleError",t=>{const{onError:n=I5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),kA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=C5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=isn(o9(this.props),o9(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!mV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&c0e(a,s),i&&s9(a,i)),a.run()})}else mV(i,s)||this.modifyView(o=>{s&&c0e(o,s),i&&s9(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=o9(this.props);this.resultPromise=Jin(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;s9(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Un.createElement("div",{ref:this.containerRef,className:t,style:n})}}kA(k5e,"propTypes",{className:ghe.string,onError:ghe.func});function HH(){return HH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HH.apply(this,arguments)}function qH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ssn={};class R5e extends Un.PureComponent{constructor(){super(...arguments),qH(this,"vegaEmbed",Un.createRef()),qH(this,"handleNewView",t=>{this.update();const{onNewView:n=I5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){mV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{rsn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Un.createElement(k5e,HH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}qH(R5e,"defaultProps",{data:ssn});function WH(){return WH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WH.apply(this,arguments)}function osn(e){return Un.createElement(R5e,WH({},e,{mode:"vega-lite"}))}function f0e(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function asn(e){const{studyId:t,allParticipants:n,config:r}=e,i=Hm(),[s,o]=gw(),a=n.filter(y=>y.completed).map(y=>Math.max(...Object.values(y.answers).map(v=>v.endTime).filter(v=>v!==void 0))).filter(y=>Number.isFinite(y)),[u,l]=N.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),c=N.useMemo(()=>n.filter(y=>y.completed&&f0e(y.answers,u)),[n,u]),f=N.useMemo(()=>n.filter(y=>!y.completed&&f0e(y.answers,u)),[n,u]),d=N.useMemo(()=>{var y,v;return c.length>0?[{Date:(y=u[0])==null?void 0:y.getTime(),Participants:0},...c.map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).flat())).sort((b,w)=>b-w).map((b,w)=>({Date:b,Participants:w})),{Date:(v=u[1])==null?void 0:v.getTime(),Participants:c.length}]:[]},[c,u]),h=N.useMemo(()=>{var y,v;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(y=u[0])==null?void 0:y.getTime(),(v=u[1])==null?void 0:v.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[o.width,u,d]),[p,{close:m,open:g}]=yw(!1);return _.jsx(Dh,{children:_.jsxs(xy,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Jt,{align:"center",mb:16,justify:"space-between",children:[_.jsxs(Jt,{direction:"column",children:[_.jsx(ki,{order:5,mb:4,children:t}),_.jsxs(Jt,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[_.jsxs(Jd,{size:"sm",color:"orange",children:["Total:",f.length+c.length]}),_.jsxs(Jd,{size:"sm",color:"green",children:["Completed:",c.length]}),_.jsxs(Jd,{size:"sm",color:"cyan",children:["In Progress:",f.length]})]})]}),_.jsxs(Os,{children:[_.jsx(HPe,{allParticipants:n,studyId:t,config:r}),_.jsxs(Jr,{opened:p,children:[_.jsx(Jr.Target,{children:_.jsx(Rn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:g,onMouseLeave:m,px:4,children:_.jsx(XYe,{})})}),_.jsx(Jr.Dropdown,{children:_.jsx(st,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(VJ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(st,{mt:16,children:"Finished Participants"}),_.jsx(osn,{spec:h,actions:!1})]}):_.jsx(Ee,{h:293.4,children:_.jsx(dm,{style:{height:"100%"},children:_.jsx(st,{children:"Not enough participants for chart"})})})]})})}function usn(e){const{globalConfig:t}=e,[n,r]=N.useState(!1),[i,s]=N.useState({}),[o,a]=N.useState({}),{storageEngine:u}=wa();return N.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await uF(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),_.jsxs(Ee,{children:[_.jsx(ki,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Zs,{children:[t.configsList.map(l=>i[l]&&_.jsx(Zs.Col,{span:{md:12,xl:6},children:_.jsx(asn,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),_.jsx(Ec,{visible:n})]})]})}function lsn({globalConfig:e}){return _.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(Dh,{fluid:!0,children:_.jsx(usn,{globalConfig:e})})})]})}function csn(){const{user:e,triggerAuth:t}=hS(),{storageEngine:n}=wa(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(""),[y,v]=N.useState(null),b=wEe({initialValues:{email:""},validate:{email:Hit("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof ff){const R=await(n==null?void 0:n.getUserManagementData("authentication"));i(R==null?void 0:R.isEnabled);const M=await(n==null?void 0:n.getUserManagementData("adminUsers"));M&&M.adminUsersList&&o(M==null?void 0:M.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof ff){const I=await qPe(n,u);I&&I.email&&v({email:I.email,uid:I.uid}),p(!0)}u(!1)},E=async I=>{u(!0),n instanceof ff&&I&&(await n.changeAuth(!0),await n.addAdminUser(I),o([I.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof ff){await n.addAdminUser({email:b.values.email,uid:null});const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}u(!1),c(!1),b.setValues({email:""})},T=I=>{d(!0),g(I)},A=async()=>{if(u(!0),n instanceof ff){await n.removeAdminUser(m);const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}d(!1),u(!1)},C=N.useMemo(()=>n instanceof ff,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Dh,{children:_.jsxs(xy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ki,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Jt,{children:_.jsx(st,{children:"Authentication is enabled."})}):_.jsxs(Jt,{justify:"space-between",children:[_.jsx(Ee,{children:_.jsx(st,{children:"Authentication is currently disabled."})}),_.jsx(Fa,{label:"You can only enable auth when using Firebase",disabled:C,children:_.jsx(Rn,{onClick:I=>C?w():I.preventDefault(),color:"green","data-disabled":C?void 0:!0,style:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Jt,{mt:40,direction:"column",children:[_.jsxs(Jt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(ki,{order:6,children:"Enabled Users"}),_.jsx(MG,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(I=>{var R;return _.jsxs(Jt,{justify:"space-between",mb:10,children:[_.jsx(st,{children:I}),I===((R=e.user)==null?void 0:R.email)?_.jsx(st,{color:"blue",size:"xs",children:"You"}):_.jsx(P0,{variant:"subtle",onClick:()=>T(I),children:_.jsx(y_e,{color:"red"})})]},I)}):null]}):null]})}),_.jsx(vs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(Ee,{component:"form",onSubmit:b.onSubmit(()=>S()),children:[_.jsx(lv,{leftSection:_.jsx(WYe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(Jt,{mt:30,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Rn,{type:"submit",children:"Save"})]})]})}),_.jsxs(vs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(st,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(st,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(Jt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>A(),children:"Yes, I'm sure."})]})]}),_.jsxs(vs,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(st,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(st,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Jt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(Ec,{visible:a})]})}class fsn extends BPe{constructor(){super("localStorage");sl(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await pV.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Uw(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await Uw(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=E$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=pV.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=E$();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await Uw(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function dsn(){let e,t=!1;{const n=new ff;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new fsn;await n.connect(),e=n}return e}async function hsn(){const t=await(await fetch(`${Mh}global.json`)).text();return Z2t(t)}function psn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function o(){e&&r(await vMt(e))}o()},[e]),N.useEffect(()=>{e||hsn().then(o=>{t(o)})},[e]);const{storageEngine:i,setStorageEngine:s}=wa();return N.useEffect(()=>{if(i!==void 0)return;async function o(){const a=await dsn();s(a)}o()},[s,i]),e?_.jsx(MYe,{basename:Mh,children:_.jsx(oMt,{children:_.jsx(zYe,{children:_.jsx(fi,{padding:"md",header:{height:70},children:_.jsxs(PYe,{children:[_.jsx(pp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(Xnt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(pp,{path:"/:studyId/*",element:_.jsx(bMt,{globalConfig:e})}),_.jsx(pp,{path:"/analysis/dashboard",element:_.jsx(rB,{children:_.jsx(lsn,{globalConfig:e})})}),_.jsx(pp,{path:"/analysis",element:_.jsx(jz,{to:"/analysis/dashboard"})}),_.jsx(pp,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(rB,{children:_.jsx(SMt,{globalConfig:e})})}),_.jsx(pp,{path:"/analysis/stats/:studyId",element:_.jsx(jz,{to:"./table",replace:!0})}),_.jsx(pp,{path:"/settings",element:_.jsxs(rB,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(csn,{})})]})}),_.jsx(pp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(vC,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(TMt,{})})]})})]})})})})}):null}a9.createRoot(document.getElementById("root")).render(_.jsx(Un.StrictMode,{children:_.jsx(zGe,{children:_.jsx(Y1e,{children:_.jsx(psn,{})})})}))});export default msn();
