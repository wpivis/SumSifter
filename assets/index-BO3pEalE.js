var $5e=Object.defineProperty;var M5e=(e,t,n)=>t in e?$5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var L5e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var sl=(e,t,n)=>(M5e(e,typeof t!="symbol"?t+"":t,n),n);var ksn=L5e((jon,Sre)=>{function F5e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function j5e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var p0e={exports:{}},vM={},m0e={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bI=Symbol.for("react.element"),B5e=Symbol.for("react.portal"),U5e=Symbol.for("react.fragment"),z5e=Symbol.for("react.strict_mode"),V5e=Symbol.for("react.profiler"),H5e=Symbol.for("react.provider"),q5e=Symbol.for("react.context"),W5e=Symbol.for("react.forward_ref"),G5e=Symbol.for("react.suspense"),Y5e=Symbol.for("react.memo"),K5e=Symbol.for("react.lazy"),Vre=Symbol.iterator;function X5e(e){return e===null||typeof e!="object"?null:(e=Vre&&e[Vre]||e["@@iterator"],typeof e=="function"?e:null)}var g0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y0e=Object.assign,v0e={};function px(e,t,n){this.props=e,this.context=t,this.refs=v0e,this.updater=n||g0e}px.prototype.isReactComponent={};px.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};px.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function b0e(){}b0e.prototype=px.prototype;function YH(e,t,n){this.props=e,this.context=t,this.refs=v0e,this.updater=n||g0e}var KH=YH.prototype=new b0e;KH.constructor=YH;y0e(KH,px.prototype);KH.isPureReactComponent=!0;var Hre=Array.isArray,_0e=Object.prototype.hasOwnProperty,XH={current:null},w0e={key:!0,ref:!0,__self:!0,__source:!0};function E0e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)_0e.call(t,r)&&!w0e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:bI,type:e,key:s,ref:o,props:i,_owner:XH.current}}function Q5e(e,t){return{$$typeof:bI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function QH(e){return typeof e=="object"&&e!==null&&e.$$typeof===bI}function J5e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var qre=/\/+/g;function p5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?J5e(""+e.key):t.toString(36)}function gP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case bI:case B5e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+p5(o,0):r,Hre(i)?(n="",e!=null&&(n=e.replace(qre,"$&/")+"/"),gP(i,t,n,"",function(l){return l})):i!=null&&(QH(i)&&(i=Q5e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qre,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Hre(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+p5(s,a);o+=gP(s,t,n,u,i)}else if(u=X5e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+p5(s,a++),o+=gP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function CR(e,t,n){if(e==null)return e;var r=[],i=0;return gP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Z5e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var eu={current:null},yP={transition:null},e8e={ReactCurrentDispatcher:eu,ReactCurrentBatchConfig:yP,ReactCurrentOwner:XH};function x0e(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:CR,forEach:function(e,t,n){CR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return CR(e,function(){t++}),t},toArray:function(e){return CR(e,function(t){return t})||[]},only:function(e){if(!QH(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=px;Mn.Fragment=U5e;Mn.Profiler=V5e;Mn.PureComponent=YH;Mn.StrictMode=z5e;Mn.Suspense=G5e;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e8e;Mn.act=x0e;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=y0e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=XH.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)_0e.call(t,u)&&!w0e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:bI,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:q5e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:H5e,_context:e},e.Consumer=e};Mn.createElement=E0e;Mn.createFactory=function(e){var t=E0e.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:W5e,render:e}};Mn.isValidElement=QH;Mn.lazy=function(e){return{$$typeof:K5e,_payload:{_status:-1,_result:e},_init:Z5e}};Mn.memo=function(e,t){return{$$typeof:Y5e,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=yP.transition;yP.transition={};try{e()}finally{yP.transition=t}};Mn.unstable_act=x0e;Mn.useCallback=function(e,t){return eu.current.useCallback(e,t)};Mn.useContext=function(e){return eu.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return eu.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return eu.current.useEffect(e,t)};Mn.useId=function(){return eu.current.useId()};Mn.useImperativeHandle=function(e,t,n){return eu.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return eu.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return eu.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return eu.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return eu.current.useReducer(e,t,n)};Mn.useRef=function(e){return eu.current.useRef(e)};Mn.useState=function(e){return eu.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return eu.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return eu.current.useTransition()};Mn.version="18.3.1";m0e.exports=Mn;var N=m0e.exports;const Ht=Ul(N),$D=F5e({__proto__:null,default:Ht},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t8e=N,n8e=Symbol.for("react.element"),r8e=Symbol.for("react.fragment"),i8e=Object.prototype.hasOwnProperty,s8e=t8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o8e={key:!0,ref:!0,__self:!0,__source:!0};function S0e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)i8e.call(t,r)&&!o8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:n8e,type:e,key:s,ref:o,props:i,_owner:s8e.current}}vM.Fragment=r8e;vM.jsx=S0e;vM.jsxs=S0e;p0e.exports=vM;var _=p0e.exports,l9={},T0e={exports:{}},zl={},A0e={exports:{}},C0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var D=U.length;U.push(H);e:for(;0<D;){var z=D-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[D]=W,D=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],D=U.pop();if(D!==H){U[0]=D;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,D))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=D,z=ne):(U[z]=G,U[q]=D,z=q);else if(ne<W&&0>i(ce,D))U[z]=ce,U[ne]=D,z=ne;else break e}}return H}function i(U,H){var D=U.sortIndex-H.sortIndex;return D!==0?D:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,L(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var D=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!R());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=D,h=!1}}var S=!1,T=null,A=-1,C=5,I=-1;function R(){return!(e.unstable_now()-I<C)}function M(){if(T!==null){var U=e.unstable_now();I=U;var H=!0;try{H=T(!0,U)}finally{H?P():(S=!1,T=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,F=O.port2;O.port1.onmessage=M,P=function(){F.postMessage(null)}}else P=function(){g(M,0)};function L(U){T=U,S||(S=!0,P())}function B(U,H){A=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var D=d;d=H;try{return U()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var D=d;d=U;try{return H()}finally{d=D}},e.unstable_scheduleCallback=function(U,H,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,U={id:c++,callback:H,priorityLevel:U,startTime:D,expirationTime:W,sortIndex:-1},D>z?(U.sortIndex=D,t(l,U),n(u)===null&&U===n(l)&&(m?(y(A),A=-1):m=!0,B(w,D-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,L(E))),U},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(U){var H=d;return function(){var D=d;d=H;try{return U.apply(this,arguments)}finally{d=D}}}})(C0e);A0e.exports=C0e;var a8e=A0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u8e=N,Cl=a8e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var I0e=new Set,RC={};function mb(e,t){Xw(e,t),Xw(e+"Capture",t)}function Xw(e,t){for(RC[e]=t,e=0;e<t.length;e++)I0e.add(t[e])}var sm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c9=Object.prototype.hasOwnProperty,l8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wre={},Gre={};function c8e(e){return c9.call(Gre,e)?!0:c9.call(Wre,e)?!1:l8e.test(e)?Gre[e]=!0:(Wre[e]=!0,!1)}function f8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function d8e(e,t,n,r){if(t===null||typeof t>"u"||f8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Po={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Po[e]=new tu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Po[t]=new tu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Po[e]=new tu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Po[e]=new tu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Po[e]=new tu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Po[e]=new tu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Po[e]=new tu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Po[e]=new tu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Po[e]=new tu(e,5,!1,e.toLowerCase(),null,!1,!1)});var JH=/[\-:]([a-z])/g;function ZH(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(JH,ZH);Po[t]=new tu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(JH,ZH);Po[t]=new tu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(JH,ZH);Po[t]=new tu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Po[e]=new tu(e,1,!1,e.toLowerCase(),null,!1,!1)});Po.xlinkHref=new tu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Po[e]=new tu(e,1,!1,e.toLowerCase(),null,!0,!0)});function eq(e,t,n,r){var i=Po.hasOwnProperty(t)?Po[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(d8e(t,n,i,r)&&(n=null),r||i===null?c8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Mm=u8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,IR=Symbol.for("react.element"),L_=Symbol.for("react.portal"),F_=Symbol.for("react.fragment"),tq=Symbol.for("react.strict_mode"),f9=Symbol.for("react.profiler"),k0e=Symbol.for("react.provider"),R0e=Symbol.for("react.context"),nq=Symbol.for("react.forward_ref"),d9=Symbol.for("react.suspense"),h9=Symbol.for("react.suspense_list"),rq=Symbol.for("react.memo"),xg=Symbol.for("react.lazy"),N0e=Symbol.for("react.offscreen"),Yre=Symbol.iterator;function jS(e){return e===null||typeof e!="object"?null:(e=Yre&&e[Yre]||e["@@iterator"],typeof e=="function"?e:null)}var Di=Object.assign,m5;function BT(e){if(m5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);m5=t&&t[1]||""}return`
`+m5+e}var g5=!1;function y5(e,t){if(!e||g5)return"";g5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{g5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?BT(e):""}function h8e(e){switch(e.tag){case 5:return BT(e.type);case 16:return BT("Lazy");case 13:return BT("Suspense");case 19:return BT("SuspenseList");case 0:case 2:case 15:return e=y5(e.type,!1),e;case 11:return e=y5(e.type.render,!1),e;case 1:return e=y5(e.type,!0),e;default:return""}}function p9(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F_:return"Fragment";case L_:return"Portal";case f9:return"Profiler";case tq:return"StrictMode";case d9:return"Suspense";case h9:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R0e:return(e.displayName||"Context")+".Consumer";case k0e:return(e._context.displayName||"Context")+".Provider";case nq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rq:return t=e.displayName||null,t!==null?t:p9(e.type)||"Memo";case xg:t=e._payload,e=e._init;try{return p9(e(t))}catch{}}return null}function p8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return p9(t);case 8:return t===tq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function I0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function P0e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function m8e(e){var t=P0e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function kR(e){e._valueTracker||(e._valueTracker=m8e(e))}function D0e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=P0e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function MD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function m9(e,t){var n=t.checked;return Di({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Kre(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=I0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function O0e(e,t){t=t.checked,t!=null&&eq(e,"checked",t,!1)}function g9(e,t){O0e(e,t);var n=I0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?y9(e,t.type,n):t.hasOwnProperty("defaultValue")&&y9(e,t.type,I0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Xre(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function y9(e,t,n){(t!=="number"||MD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var UT=Array.isArray;function lw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+I0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function v9(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Di({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qre(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(UT(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:I0(n)}}function $0e(e,t){var n=I0(t.value),r=I0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Jre(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function M0e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function b9(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?M0e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var RR,L0e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(RR=RR||document.createElement("div"),RR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=RR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function NC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var NA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g8e=["Webkit","ms","Moz","O"];Object.keys(NA).forEach(function(e){g8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),NA[t]=NA[e]})});function F0e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||NA.hasOwnProperty(e)&&NA[e]?(""+t).trim():t+"px"}function j0e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=F0e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var y8e=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _9(e,t){if(t){if(y8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function w9(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var E9=null;function iq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var x9=null,cw=null,fw=null;function Zre(e){if(e=EI(e)){if(typeof x9!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=xM(t),x9(e.stateNode,e.type,t))}}function B0e(e){cw?fw?fw.push(e):fw=[e]:cw=e}function U0e(){if(cw){var e=cw,t=fw;if(fw=cw=null,Zre(e),t)for(e=0;e<t.length;e++)Zre(t[e])}}function z0e(e,t){return e(t)}function V0e(){}var v5=!1;function H0e(e,t,n){if(v5)return e(t,n);v5=!0;try{return z0e(e,t,n)}finally{v5=!1,(cw!==null||fw!==null)&&(V0e(),U0e())}}function PC(e,t){var n=e.stateNode;if(n===null)return null;var r=xM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var S9=!1;if(sm)try{var BS={};Object.defineProperty(BS,"passive",{get:function(){S9=!0}}),window.addEventListener("test",BS,BS),window.removeEventListener("test",BS,BS)}catch{S9=!1}function v8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var PA=!1,LD=null,FD=!1,T9=null,b8e={onError:function(e){PA=!0,LD=e}};function _8e(e,t,n,r,i,s,o,a,u){PA=!1,LD=null,v8e.apply(b8e,arguments)}function w8e(e,t,n,r,i,s,o,a,u){if(_8e.apply(this,arguments),PA){if(PA){var l=LD;PA=!1,LD=null}else throw Error(tt(198));FD||(FD=!0,T9=l)}}function gb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function q0e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eie(e){if(gb(e)!==e)throw Error(tt(188))}function E8e(e){var t=e.alternate;if(!t){if(t=gb(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return eie(i),e;if(s===r)return eie(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function W0e(e){return e=E8e(e),e!==null?G0e(e):null}function G0e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=G0e(e);if(t!==null)return t;e=e.sibling}return null}var Y0e=Cl.unstable_scheduleCallback,tie=Cl.unstable_cancelCallback,x8e=Cl.unstable_shouldYield,S8e=Cl.unstable_requestPaint,rs=Cl.unstable_now,T8e=Cl.unstable_getCurrentPriorityLevel,sq=Cl.unstable_ImmediatePriority,K0e=Cl.unstable_UserBlockingPriority,jD=Cl.unstable_NormalPriority,A8e=Cl.unstable_LowPriority,X0e=Cl.unstable_IdlePriority,bM=null,Qd=null;function C8e(e){if(Qd&&typeof Qd.onCommitFiberRoot=="function")try{Qd.onCommitFiberRoot(bM,e,void 0,(e.current.flags&128)===128)}catch{}}var Cf=Math.clz32?Math.clz32:R8e,I8e=Math.log,k8e=Math.LN2;function R8e(e){return e>>>=0,e===0?32:31-(I8e(e)/k8e|0)|0}var NR=64,PR=4194304;function zT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function BD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=zT(a):(s&=o,s!==0&&(r=zT(s)))}else o=n&~i,o!==0?r=zT(o):s!==0&&(r=zT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Cf(t),i=1<<n,r|=e[n],t&=~i;return r}function N8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Cf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=N8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function A9(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Q0e(){var e=NR;return NR<<=1,!(NR&4194240)&&(NR=64),e}function b5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _I(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cf(t),e[t]=n}function D8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Cf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function oq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Cf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dr=0;function J0e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Z0e,aq,eye,tye,nye,C9=!1,DR=[],r0=null,i0=null,s0=null,DC=new Map,OC=new Map,Pg=[],O8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nie(e,t){switch(e){case"focusin":case"focusout":r0=null;break;case"dragenter":case"dragleave":i0=null;break;case"mouseover":case"mouseout":s0=null;break;case"pointerover":case"pointerout":DC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":OC.delete(t.pointerId)}}function US(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=EI(t),t!==null&&aq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $8e(e,t,n,r,i){switch(t){case"focusin":return r0=US(r0,e,t,n,r,i),!0;case"dragenter":return i0=US(i0,e,t,n,r,i),!0;case"mouseover":return s0=US(s0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return DC.set(s,US(DC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,OC.set(s,US(OC.get(s)||null,e,t,n,r,i)),!0}return!1}function rye(e){var t=B1(e.target);if(t!==null){var n=gb(t);if(n!==null){if(t=n.tag,t===13){if(t=q0e(n),t!==null){e.blockedOn=t,nye(e.priority,function(){eye(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=I9(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);E9=r,n.target.dispatchEvent(r),E9=null}else return t=EI(n),t!==null&&aq(t),e.blockedOn=n,!1;t.shift()}return!0}function rie(e,t,n){vP(e)&&n.delete(t)}function M8e(){C9=!1,r0!==null&&vP(r0)&&(r0=null),i0!==null&&vP(i0)&&(i0=null),s0!==null&&vP(s0)&&(s0=null),DC.forEach(rie),OC.forEach(rie)}function zS(e,t){e.blockedOn===t&&(e.blockedOn=null,C9||(C9=!0,Cl.unstable_scheduleCallback(Cl.unstable_NormalPriority,M8e)))}function $C(e){function t(i){return zS(i,e)}if(0<DR.length){zS(DR[0],e);for(var n=1;n<DR.length;n++){var r=DR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(r0!==null&&zS(r0,e),i0!==null&&zS(i0,e),s0!==null&&zS(s0,e),DC.forEach(t),OC.forEach(t),n=0;n<Pg.length;n++)r=Pg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pg.length&&(n=Pg[0],n.blockedOn===null);)rye(n),n.blockedOn===null&&Pg.shift()}var dw=Mm.ReactCurrentBatchConfig,UD=!0;function L8e(e,t,n,r){var i=Dr,s=dw.transition;dw.transition=null;try{Dr=1,uq(e,t,n,r)}finally{Dr=i,dw.transition=s}}function F8e(e,t,n,r){var i=Dr,s=dw.transition;dw.transition=null;try{Dr=4,uq(e,t,n,r)}finally{Dr=i,dw.transition=s}}function uq(e,t,n,r){if(UD){var i=I9(e,t,n,r);if(i===null)k5(e,t,r,zD,n),nie(e,r);else if($8e(i,e,t,n,r))r.stopPropagation();else if(nie(e,r),t&4&&-1<O8e.indexOf(e)){for(;i!==null;){var s=EI(i);if(s!==null&&Z0e(s),s=I9(e,t,n,r),s===null&&k5(e,t,r,zD,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else k5(e,t,r,null,n)}}var zD=null;function I9(e,t,n,r){if(zD=null,e=iq(r),e=B1(e),e!==null)if(t=gb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=q0e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zD=e,null}function iye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T8e()){case sq:return 1;case K0e:return 4;case jD:case A8e:return 16;case X0e:return 536870912;default:return 16}default:return 16}}var zg=null,lq=null,bP=null;function sye(){if(bP)return bP;var e,t=lq,n=t.length,r,i="value"in zg?zg.value:zg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return bP=i.slice(e,1<r?1-r:void 0)}function _P(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function OR(){return!0}function iie(){return!1}function Vl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?OR:iie,this.isPropagationStopped=iie,this}return Di(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=OR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=OR)},persist:function(){},isPersistent:OR}),t}var mx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cq=Vl(mx),wI=Di({},mx,{view:0,detail:0}),j8e=Vl(wI),_5,w5,VS,_M=Di({},wI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==VS&&(VS&&e.type==="mousemove"?(_5=e.screenX-VS.screenX,w5=e.screenY-VS.screenY):w5=_5=0,VS=e),_5)},movementY:function(e){return"movementY"in e?e.movementY:w5}}),sie=Vl(_M),B8e=Di({},_M,{dataTransfer:0}),U8e=Vl(B8e),z8e=Di({},wI,{relatedTarget:0}),E5=Vl(z8e),V8e=Di({},mx,{animationName:0,elapsedTime:0,pseudoElement:0}),H8e=Vl(V8e),q8e=Di({},mx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),W8e=Vl(q8e),G8e=Di({},mx,{data:0}),oie=Vl(G8e),Y8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},K8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q8e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=X8e[e])?!!t[e]:!1}function fq(){return Q8e}var J8e=Di({},wI,{key:function(e){if(e.key){var t=Y8e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_P(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?K8e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fq,charCode:function(e){return e.type==="keypress"?_P(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_P(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Z8e=Vl(J8e),eje=Di({},_M,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),aie=Vl(eje),tje=Di({},wI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fq}),nje=Vl(tje),rje=Di({},mx,{propertyName:0,elapsedTime:0,pseudoElement:0}),ije=Vl(rje),sje=Di({},_M,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oje=Vl(sje),aje=[9,13,27,32],dq=sm&&"CompositionEvent"in window,DA=null;sm&&"documentMode"in document&&(DA=document.documentMode);var uje=sm&&"TextEvent"in window&&!DA,oye=sm&&(!dq||DA&&8<DA&&11>=DA),uie=" ",lie=!1;function aye(e,t){switch(e){case"keyup":return aje.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var j_=!1;function lje(e,t){switch(e){case"compositionend":return uye(t);case"keypress":return t.which!==32?null:(lie=!0,uie);case"textInput":return e=t.data,e===uie&&lie?null:e;default:return null}}function cje(e,t){if(j_)return e==="compositionend"||!dq&&aye(e,t)?(e=sye(),bP=lq=zg=null,j_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oye&&t.locale!=="ko"?null:t.data;default:return null}}var fje={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fje[e.type]:t==="textarea"}function lye(e,t,n,r){B0e(r),t=VD(t,"onChange"),0<t.length&&(n=new cq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var OA=null,MC=null;function dje(e){_ye(e,0)}function wM(e){var t=z_(e);if(D0e(t))return e}function hje(e,t){if(e==="change")return t}var cye=!1;if(sm){var x5;if(sm){var S5="oninput"in document;if(!S5){var fie=document.createElement("div");fie.setAttribute("oninput","return;"),S5=typeof fie.oninput=="function"}x5=S5}else x5=!1;cye=x5&&(!document.documentMode||9<document.documentMode)}function die(){OA&&(OA.detachEvent("onpropertychange",fye),MC=OA=null)}function fye(e){if(e.propertyName==="value"&&wM(MC)){var t=[];lye(t,MC,e,iq(e)),H0e(dje,t)}}function pje(e,t,n){e==="focusin"?(die(),OA=t,MC=n,OA.attachEvent("onpropertychange",fye)):e==="focusout"&&die()}function mje(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wM(MC)}function gje(e,t){if(e==="click")return wM(t)}function yje(e,t){if(e==="input"||e==="change")return wM(t)}function vje(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lf=typeof Object.is=="function"?Object.is:vje;function LC(e,t){if(Lf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!c9.call(t,i)||!Lf(e[i],t[i]))return!1}return!0}function hie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pie(e,t){var n=hie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hie(n)}}function dye(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dye(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hye(){for(var e=window,t=MD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=MD(e.document)}return t}function hq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bje(e){var t=hye(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dye(n.ownerDocument.documentElement,n)){if(r!==null&&hq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=pie(n,s);var o=pie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _je=sm&&"documentMode"in document&&11>=document.documentMode,B_=null,k9=null,$A=null,R9=!1;function mie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;R9||B_==null||B_!==MD(r)||(r=B_,"selectionStart"in r&&hq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$A&&LC($A,r)||($A=r,r=VD(k9,"onSelect"),0<r.length&&(t=new cq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=B_)))}function $R(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var U_={animationend:$R("Animation","AnimationEnd"),animationiteration:$R("Animation","AnimationIteration"),animationstart:$R("Animation","AnimationStart"),transitionend:$R("Transition","TransitionEnd")},T5={},pye={};sm&&(pye=document.createElement("div").style,"AnimationEvent"in window||(delete U_.animationend.animation,delete U_.animationiteration.animation,delete U_.animationstart.animation),"TransitionEvent"in window||delete U_.transitionend.transition);function EM(e){if(T5[e])return T5[e];if(!U_[e])return e;var t=U_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in pye)return T5[e]=t[n];return e}var mye=EM("animationend"),gye=EM("animationiteration"),yye=EM("animationstart"),vye=EM("transitionend"),bye=new Map,gie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function my(e,t){bye.set(e,t),mb(t,[e])}for(var A5=0;A5<gie.length;A5++){var C5=gie[A5],wje=C5.toLowerCase(),Eje=C5[0].toUpperCase()+C5.slice(1);my(wje,"on"+Eje)}my(mye,"onAnimationEnd");my(gye,"onAnimationIteration");my(yye,"onAnimationStart");my("dblclick","onDoubleClick");my("focusin","onFocus");my("focusout","onBlur");my(vye,"onTransitionEnd");Xw("onMouseEnter",["mouseout","mouseover"]);Xw("onMouseLeave",["mouseout","mouseover"]);Xw("onPointerEnter",["pointerout","pointerover"]);Xw("onPointerLeave",["pointerout","pointerover"]);mb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mb("onBeforeInput",["compositionend","keypress","textInput","paste"]);mb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var VT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xje=new Set("cancel close invalid load scroll toggle".split(" ").concat(VT));function yie(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,w8e(r,t,void 0,e),e.currentTarget=null}function _ye(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;yie(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;yie(i,a,l),s=u}}}if(FD)throw e=T9,FD=!1,T9=null,e}function si(e,t){var n=t[$9];n===void 0&&(n=t[$9]=new Set);var r=e+"__bubble";n.has(r)||(wye(t,e,2,!1),n.add(r))}function I5(e,t,n){var r=0;t&&(r|=4),wye(n,e,r,t)}var MR="_reactListening"+Math.random().toString(36).slice(2);function FC(e){if(!e[MR]){e[MR]=!0,I0e.forEach(function(n){n!=="selectionchange"&&(xje.has(n)||I5(n,!1,e),I5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[MR]||(t[MR]=!0,I5("selectionchange",!1,t))}}function wye(e,t,n,r){switch(iye(t)){case 1:var i=L8e;break;case 4:i=F8e;break;default:i=uq}n=i.bind(null,t,n,e),i=void 0,!S9||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function k5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=B1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}H0e(function(){var l=s,c=iq(n),f=[];e:{var d=bye.get(e);if(d!==void 0){var h=cq,p=e;switch(e){case"keypress":if(_P(n)===0)break e;case"keydown":case"keyup":h=Z8e;break;case"focusin":p="focus",h=E5;break;case"focusout":p="blur",h=E5;break;case"beforeblur":case"afterblur":h=E5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=sie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=U8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=nje;break;case mye:case gye:case yye:h=H8e;break;case vye:h=ije;break;case"scroll":h=j8e;break;case"wheel":h=oje;break;case"copy":case"cut":case"paste":h=W8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=aie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=PC(v,y),w!=null&&m.push(jC(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==E9&&(p=n.relatedTarget||n.fromElement)&&(B1(p)||p[om]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?B1(p):null,p!==null&&(g=gb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=sie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=aie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:z_(h),b=p==null?d:z_(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,B1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Zb(b))v++;for(b=0,w=y;w;w=Zb(w))b++;for(;0<v-b;)m=Zb(m),v--;for(;0<b-v;)y=Zb(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Zb(m),y=Zb(y)}m=null}else m=null;h!==null&&vie(f,d,h,m,!1),p!==null&&g!==null&&vie(f,g,p,m,!0)}}e:{if(d=l?z_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=hje;else if(cie(d))if(cye)E=yje;else{E=mje;var S=pje}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=gje);if(E&&(E=E(e,l))){lye(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&y9(d,"number",d.value)}switch(S=l?z_(l):window,e){case"focusin":(cie(S)||S.contentEditable==="true")&&(B_=S,k9=l,$A=null);break;case"focusout":$A=k9=B_=null;break;case"mousedown":R9=!0;break;case"contextmenu":case"mouseup":case"dragend":R9=!1,mie(f,n,c);break;case"selectionchange":if(_je)break;case"keydown":case"keyup":mie(f,n,c)}var T;if(dq)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else j_?aye(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(oye&&n.locale!=="ko"&&(j_||A!=="onCompositionStart"?A==="onCompositionEnd"&&j_&&(T=sye()):(zg=c,lq="value"in zg?zg.value:zg.textContent,j_=!0)),S=VD(l,A),0<S.length&&(A=new oie(A,e,null,n,c),f.push({event:A,listeners:S}),T?A.data=T:(T=uye(n),T!==null&&(A.data=T)))),(T=uje?lje(e,n):cje(e,n))&&(l=VD(l,"onBeforeInput"),0<l.length&&(c=new oie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}_ye(f,t)})}function jC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function VD(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=PC(e,n),s!=null&&r.unshift(jC(e,s,i)),s=PC(e,t),s!=null&&r.push(jC(e,s,i))),e=e.return}return r}function Zb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=PC(n,s),u!=null&&o.unshift(jC(n,u,a))):i||(u=PC(n,s),u!=null&&o.push(jC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Sje=/\r\n?/g,Tje=/\u0000|\uFFFD/g;function bie(e){return(typeof e=="string"?e:""+e).replace(Sje,`
`).replace(Tje,"")}function LR(e,t,n){if(t=bie(t),bie(e)!==t&&n)throw Error(tt(425))}function HD(){}var N9=null,P9=null;function D9(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var O9=typeof setTimeout=="function"?setTimeout:void 0,Aje=typeof clearTimeout=="function"?clearTimeout:void 0,_ie=typeof Promise=="function"?Promise:void 0,Cje=typeof queueMicrotask=="function"?queueMicrotask:typeof _ie<"u"?function(e){return _ie.resolve(null).then(e).catch(Ije)}:O9;function Ije(e){setTimeout(function(){throw e})}function R5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),$C(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$C(t)}function o0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gx=Math.random().toString(36).slice(2),Rd="__reactFiber$"+gx,BC="__reactProps$"+gx,om="__reactContainer$"+gx,$9="__reactEvents$"+gx,kje="__reactListeners$"+gx,Rje="__reactHandles$"+gx;function B1(e){var t=e[Rd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[om]||n[Rd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wie(e);e!==null;){if(n=e[Rd])return n;e=wie(e)}return t}e=n,n=e.parentNode}return null}function EI(e){return e=e[Rd]||e[om],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function z_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function xM(e){return e[BC]||null}var M9=[],V_=-1;function gy(e){return{current:e}}function fi(e){0>V_||(e.current=M9[V_],M9[V_]=null,V_--)}function Zr(e,t){V_++,M9[V_]=e.current,e.current=t}var k0={},ma=gy(k0),Pu=gy(!1),xv=k0;function Qw(e,t){var n=e.type.contextTypes;if(!n)return k0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Du(e){return e=e.childContextTypes,e!=null}function qD(){fi(Pu),fi(ma)}function Eie(e,t,n){if(ma.current!==k0)throw Error(tt(168));Zr(ma,t),Zr(Pu,n)}function Eye(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,p8e(e)||"Unknown",i));return Di({},n,r)}function WD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||k0,xv=ma.current,Zr(ma,e),Zr(Pu,Pu.current),!0}function xie(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=Eye(e,t,xv),r.__reactInternalMemoizedMergedChildContext=e,fi(Pu),fi(ma),Zr(ma,e)):fi(Pu),Zr(Pu,n)}var Ep=null,SM=!1,N5=!1;function xye(e){Ep===null?Ep=[e]:Ep.push(e)}function Nje(e){SM=!0,xye(e)}function yy(){if(!N5&&Ep!==null){N5=!0;var e=0,t=Dr;try{var n=Ep;for(Dr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ep=null,SM=!1}catch(i){throw Ep!==null&&(Ep=Ep.slice(e+1)),Y0e(sq,yy),i}finally{Dr=t,N5=!1}}return null}var H_=[],q_=0,GD=null,YD=0,rc=[],ic=0,Sv=null,Op=1,$p="";function d1(e,t){H_[q_++]=YD,H_[q_++]=GD,GD=e,YD=t}function Sye(e,t,n){rc[ic++]=Op,rc[ic++]=$p,rc[ic++]=Sv,Sv=e;var r=Op;e=$p;var i=32-Cf(r)-1;r&=~(1<<i),n+=1;var s=32-Cf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Op=1<<32-Cf(t)+i|n<<i|r,$p=s+e}else Op=1<<s|n<<i|r,$p=e}function pq(e){e.return!==null&&(d1(e,1),Sye(e,1,0))}function mq(e){for(;e===GD;)GD=H_[--q_],H_[q_]=null,YD=H_[--q_],H_[q_]=null;for(;e===Sv;)Sv=rc[--ic],rc[ic]=null,$p=rc[--ic],rc[ic]=null,Op=rc[--ic],rc[ic]=null}var xl=null,gl=null,wi=!1,cf=null;function Tye(e,t){var n=fc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Sie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xl=e,gl=o0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xl=e,gl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Sv!==null?{id:Op,overflow:$p}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=fc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xl=e,gl=null,!0):!1;default:return!1}}function L9(e){return(e.mode&1)!==0&&(e.flags&128)===0}function F9(e){if(wi){var t=gl;if(t){var n=t;if(!Sie(e,t)){if(L9(e))throw Error(tt(418));t=o0(n.nextSibling);var r=xl;t&&Sie(e,t)?Tye(r,n):(e.flags=e.flags&-4097|2,wi=!1,xl=e)}}else{if(L9(e))throw Error(tt(418));e.flags=e.flags&-4097|2,wi=!1,xl=e}}}function Tie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xl=e}function FR(e){if(e!==xl)return!1;if(!wi)return Tie(e),wi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!D9(e.type,e.memoizedProps)),t&&(t=gl)){if(L9(e))throw Aye(),Error(tt(418));for(;t;)Tye(e,t),t=o0(t.nextSibling)}if(Tie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gl=o0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gl=null}}else gl=xl?o0(e.stateNode.nextSibling):null;return!0}function Aye(){for(var e=gl;e;)e=o0(e.nextSibling)}function Jw(){gl=xl=null,wi=!1}function gq(e){cf===null?cf=[e]:cf.push(e)}var Pje=Mm.ReactCurrentBatchConfig;function HS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function jR(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Aie(e){var t=e._init;return t(e._payload)}function Cye(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=c0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=F5(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===F_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xg&&Aie(E)===v.type)?(w=i(v,b.props),w.ref=HS(y,v,b),w.return=y,w):(w=CP(b.type,b.key,b.props,null,y.mode,w),w.ref=HS(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=j5(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=av(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=F5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case IR:return b=CP(v.type,v.key,v.props,null,y.mode,b),b.ref=HS(y,null,v),b.return=y,b;case L_:return v=j5(v,y.mode,b),v.return=y,v;case xg:var w=v._init;return f(y,w(v._payload),b)}if(UT(v)||jS(v))return v=av(v,y.mode,b,null),v.return=y,v;jR(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case IR:return b.key===E?u(y,v,b,w):null;case L_:return b.key===E?l(y,v,b,w):null;case xg:return E=b._init,d(y,v,E(b._payload),w)}if(UT(b)||jS(b))return E!==null?null:c(y,v,b,w,null);jR(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case IR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case L_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case xg:var S=w._init;return h(y,v,b,S(w._payload),E)}if(UT(w)||jS(w))return y=y.get(b)||null,c(v,y,w,E,null);jR(v,w)}return null}function p(y,v,b,w){for(var E=null,S=null,T=v,A=v=0,C=null;T!==null&&A<b.length;A++){T.index>A?(C=T,T=null):C=T.sibling;var I=d(y,T,b[A],w);if(I===null){T===null&&(T=C);break}e&&T&&I.alternate===null&&t(y,T),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I,T=C}if(A===b.length)return n(y,T),wi&&d1(y,A),E;if(T===null){for(;A<b.length;A++)T=f(y,b[A],w),T!==null&&(v=s(T,v,A),S===null?E=T:S.sibling=T,S=T);return wi&&d1(y,A),E}for(T=r(y,T);A<b.length;A++)C=h(T,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?A:C.key),v=s(C,v,A),S===null?E=C:S.sibling=C,S=C);return e&&T.forEach(function(R){return t(y,R)}),wi&&d1(y,A),E}function m(y,v,b,w){var E=jS(b);if(typeof E!="function")throw Error(tt(150));if(b=E.call(b),b==null)throw Error(tt(151));for(var S=E=null,T=v,A=v=0,C=null,I=b.next();T!==null&&!I.done;A++,I=b.next()){T.index>A?(C=T,T=null):C=T.sibling;var R=d(y,T,I.value,w);if(R===null){T===null&&(T=C);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,A),S===null?E=R:S.sibling=R,S=R,T=C}if(I.done)return n(y,T),wi&&d1(y,A),E;if(T===null){for(;!I.done;A++,I=b.next())I=f(y,I.value,w),I!==null&&(v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return wi&&d1(y,A),E}for(T=r(y,T);!I.done;A++,I=b.next())I=h(T,y,A,I.value,w),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?A:I.key),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return e&&T.forEach(function(M){return t(y,M)}),wi&&d1(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===F_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case IR:e:{for(var E=b.key,S=v;S!==null;){if(S.key===E){if(E=b.type,E===F_){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===xg&&Aie(E)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=HS(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===F_?(v=av(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=CP(b.type,b.key,b.props,null,y.mode,w),w.ref=HS(y,v,b),w.return=y,y=w)}return o(y);case L_:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=j5(b,y.mode,w),v.return=y,y=v}return o(y);case xg:return S=b._init,g(y,v,S(b._payload),w)}if(UT(b))return p(y,v,b,w);if(jS(b))return m(y,v,b,w);jR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=F5(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var Zw=Cye(!0),Iye=Cye(!1),KD=gy(null),XD=null,W_=null,yq=null;function vq(){yq=W_=XD=null}function bq(e){var t=KD.current;fi(KD),e._currentValue=t}function j9(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hw(e,t){XD=e,yq=W_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Au=!0),e.firstContext=null)}function _c(e){var t=e._currentValue;if(yq!==e)if(e={context:e,memoizedValue:t,next:null},W_===null){if(XD===null)throw Error(tt(308));W_=e,XD.dependencies={lanes:0,firstContext:e}}else W_=W_.next=e;return t}var U1=null;function _q(e){U1===null?U1=[e]:U1.push(e)}function kye(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,_q(t)):(n.next=i.next,i.next=n),t.interleaved=n,am(e,r)}function am(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sg=!1;function wq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rye(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function a0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,am(e,n)}return i=r.interleaved,i===null?(t.next=t,_q(r)):(t.next=i.next,i.next=t),r.interleaved=t,am(e,n)}function wP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oq(e,n)}}function Cie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function QD(e,t,n,r){var i=e.updateQueue;Sg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Di({},f,d);break e;case 2:Sg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Av|=o,e.lanes=o,e.memoizedState=f}}function Iie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var xI={},Jd=gy(xI),UC=gy(xI),zC=gy(xI);function z1(e){if(e===xI)throw Error(tt(174));return e}function Eq(e,t){switch(Zr(zC,t),Zr(UC,e),Zr(Jd,xI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:b9(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=b9(t,e)}fi(Jd),Zr(Jd,t)}function eE(){fi(Jd),fi(UC),fi(zC)}function Nye(e){z1(zC.current);var t=z1(Jd.current),n=b9(t,e.type);t!==n&&(Zr(UC,e),Zr(Jd,n))}function xq(e){UC.current===e&&(fi(Jd),fi(UC))}var ki=gy(0);function JD(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var P5=[];function Sq(){for(var e=0;e<P5.length;e++)P5[e]._workInProgressVersionPrimary=null;P5.length=0}var EP=Mm.ReactCurrentDispatcher,D5=Mm.ReactCurrentBatchConfig,Tv=0,Ri=null,Es=null,Ys=null,ZD=!1,MA=!1,VC=0,Dje=0;function Ho(){throw Error(tt(321))}function Tq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Lf(e[n],t[n]))return!1;return!0}function Aq(e,t,n,r,i,s){if(Tv=s,Ri=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,EP.current=e===null||e.memoizedState===null?Lje:Fje,e=n(r,i),MA){s=0;do{if(MA=!1,VC=0,25<=s)throw Error(tt(301));s+=1,Ys=Es=null,t.updateQueue=null,EP.current=jje,e=n(r,i)}while(MA)}if(EP.current=eO,t=Es!==null&&Es.next!==null,Tv=0,Ys=Es=Ri=null,ZD=!1,t)throw Error(tt(300));return e}function Cq(){var e=VC!==0;return VC=0,e}function _d(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ys===null?Ri.memoizedState=Ys=e:Ys=Ys.next=e,Ys}function wc(){if(Es===null){var e=Ri.alternate;e=e!==null?e.memoizedState:null}else e=Es.next;var t=Ys===null?Ri.memoizedState:Ys.next;if(t!==null)Ys=t,Es=e;else{if(e===null)throw Error(tt(310));Es=e,e={memoizedState:Es.memoizedState,baseState:Es.baseState,baseQueue:Es.baseQueue,queue:Es.queue,next:null},Ys===null?Ri.memoizedState=Ys=e:Ys=Ys.next=e}return Ys}function HC(e,t){return typeof t=="function"?t(e):t}function O5(e){var t=wc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Es,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Tv&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ri.lanes|=c,Av|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Lf(r,t.memoizedState)||(Au=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ri.lanes|=s,Av|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $5(e){var t=wc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Lf(s,t.memoizedState)||(Au=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Pye(){}function Dye(e,t){var n=Ri,r=wc(),i=t(),s=!Lf(r.memoizedState,i);if(s&&(r.memoizedState=i,Au=!0),r=r.queue,Iq(Mye.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Ys!==null&&Ys.memoizedState.tag&1){if(n.flags|=2048,qC(9,$ye.bind(null,n,r,i,t),void 0,null),so===null)throw Error(tt(349));Tv&30||Oye(n,t,i)}return i}function Oye(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $ye(e,t,n,r){t.value=n,t.getSnapshot=r,Lye(t)&&Fye(e)}function Mye(e,t,n){return n(function(){Lye(t)&&Fye(e)})}function Lye(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Lf(e,n)}catch{return!0}}function Fye(e){var t=am(e,1);t!==null&&If(t,e,1,-1)}function kie(e){var t=_d();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:HC,lastRenderedState:e},t.queue=e,e=e.dispatch=Mje.bind(null,Ri,e),[t.memoizedState,e]}function qC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function jye(){return wc().memoizedState}function xP(e,t,n,r){var i=_d();Ri.flags|=e,i.memoizedState=qC(1|t,n,void 0,r===void 0?null:r)}function TM(e,t,n,r){var i=wc();r=r===void 0?null:r;var s=void 0;if(Es!==null){var o=Es.memoizedState;if(s=o.destroy,r!==null&&Tq(r,o.deps)){i.memoizedState=qC(t,n,s,r);return}}Ri.flags|=e,i.memoizedState=qC(1|t,n,s,r)}function Rie(e,t){return xP(8390656,8,e,t)}function Iq(e,t){return TM(2048,8,e,t)}function Bye(e,t){return TM(4,2,e,t)}function Uye(e,t){return TM(4,4,e,t)}function zye(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vye(e,t,n){return n=n!=null?n.concat([e]):null,TM(4,4,zye.bind(null,t,e),n)}function kq(){}function Hye(e,t){var n=wc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tq(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qye(e,t){var n=wc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Tq(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wye(e,t,n){return Tv&21?(Lf(n,t)||(n=Q0e(),Ri.lanes|=n,Av|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Au=!0),e.memoizedState=n)}function Oje(e,t){var n=Dr;Dr=n!==0&&4>n?n:4,e(!0);var r=D5.transition;D5.transition={};try{e(!1),t()}finally{Dr=n,D5.transition=r}}function Gye(){return wc().memoizedState}function $je(e,t,n){var r=l0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yye(e))Kye(t,n);else if(n=kye(e,t,n,r),n!==null){var i=Va();If(n,e,r,i),Xye(n,t,r)}}function Mje(e,t,n){var r=l0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yye(e))Kye(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Lf(a,o)){var u=t.interleaved;u===null?(i.next=i,_q(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=kye(e,t,i,r),n!==null&&(i=Va(),If(n,e,r,i),Xye(n,t,r))}}function Yye(e){var t=e.alternate;return e===Ri||t!==null&&t===Ri}function Kye(e,t){MA=ZD=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xye(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oq(e,n)}}var eO={readContext:_c,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useInsertionEffect:Ho,useLayoutEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useDeferredValue:Ho,useTransition:Ho,useMutableSource:Ho,useSyncExternalStore:Ho,useId:Ho,unstable_isNewReconciler:!1},Lje={readContext:_c,useCallback:function(e,t){return _d().memoizedState=[e,t===void 0?null:t],e},useContext:_c,useEffect:Rie,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,xP(4194308,4,zye.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xP(4194308,4,e,t)},useInsertionEffect:function(e,t){return xP(4,2,e,t)},useMemo:function(e,t){var n=_d();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_d();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$je.bind(null,Ri,e),[r.memoizedState,e]},useRef:function(e){var t=_d();return e={current:e},t.memoizedState=e},useState:kie,useDebugValue:kq,useDeferredValue:function(e){return _d().memoizedState=e},useTransition:function(){var e=kie(!1),t=e[0];return e=Oje.bind(null,e[1]),_d().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ri,i=_d();if(wi){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),so===null)throw Error(tt(349));Tv&30||Oye(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Rie(Mye.bind(null,r,s,e),[e]),r.flags|=2048,qC(9,$ye.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=_d(),t=so.identifierPrefix;if(wi){var n=$p,r=Op;n=(r&~(1<<32-Cf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=VC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Dje++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Fje={readContext:_c,useCallback:Hye,useContext:_c,useEffect:Iq,useImperativeHandle:Vye,useInsertionEffect:Bye,useLayoutEffect:Uye,useMemo:qye,useReducer:O5,useRef:jye,useState:function(){return O5(HC)},useDebugValue:kq,useDeferredValue:function(e){var t=wc();return Wye(t,Es.memoizedState,e)},useTransition:function(){var e=O5(HC)[0],t=wc().memoizedState;return[e,t]},useMutableSource:Pye,useSyncExternalStore:Dye,useId:Gye,unstable_isNewReconciler:!1},jje={readContext:_c,useCallback:Hye,useContext:_c,useEffect:Iq,useImperativeHandle:Vye,useInsertionEffect:Bye,useLayoutEffect:Uye,useMemo:qye,useReducer:$5,useRef:jye,useState:function(){return $5(HC)},useDebugValue:kq,useDeferredValue:function(e){var t=wc();return Es===null?t.memoizedState=e:Wye(t,Es.memoizedState,e)},useTransition:function(){var e=$5(HC)[0],t=wc().memoizedState;return[e,t]},useMutableSource:Pye,useSyncExternalStore:Dye,useId:Gye,unstable_isNewReconciler:!1};function rf(e,t){if(e&&e.defaultProps){t=Di({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function B9(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Di({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var AM={isMounted:function(e){return(e=e._reactInternals)?gb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Va(),i=l0(e),s=Gp(r,i);s.payload=t,n!=null&&(s.callback=n),t=a0(e,s,i),t!==null&&(If(t,e,i,r),wP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Va(),i=l0(e),s=Gp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=a0(e,s,i),t!==null&&(If(t,e,i,r),wP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Va(),r=l0(e),i=Gp(n,r);i.tag=2,t!=null&&(i.callback=t),t=a0(e,i,r),t!==null&&(If(t,e,r,n),wP(t,e,r))}};function Nie(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!LC(n,r)||!LC(i,s):!0}function Qye(e,t,n){var r=!1,i=k0,s=t.contextType;return typeof s=="object"&&s!==null?s=_c(s):(i=Du(t)?xv:ma.current,r=t.contextTypes,s=(r=r!=null)?Qw(e,i):k0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=AM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Pie(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&AM.enqueueReplaceState(t,t.state,null)}function U9(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},wq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=_c(s):(s=Du(t)?xv:ma.current,i.context=Qw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(B9(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&AM.enqueueReplaceState(i,i.state,null),QD(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function tE(e,t){try{var n="",r=t;do n+=h8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function M5(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function z9(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Bje=typeof WeakMap=="function"?WeakMap:Map;function Jye(e,t,n){n=Gp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){nO||(nO=!0,J9=r),z9(e,t)},n}function Zye(e,t,n){n=Gp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){z9(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){z9(e,t),typeof r!="function"&&(u0===null?u0=new Set([this]):u0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Die(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Bje;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=eBe.bind(null,e,t,n),t.then(e,e))}function Oie(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $ie(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Gp(-1,1),t.tag=2,a0(n,t,1))),n.lanes|=1),e)}var Uje=Mm.ReactCurrentOwner,Au=!1;function Pa(e,t,n,r){t.child=e===null?Iye(t,null,n,r):Zw(t,e.child,n,r)}function Mie(e,t,n,r,i){n=n.render;var s=t.ref;return hw(t,i),r=Aq(e,t,n,r,s,i),n=Cq(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,um(e,t,i)):(wi&&n&&pq(t),t.flags|=1,Pa(e,t,r,i),t.child)}function Lie(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Lq(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,e1e(e,t,s,r,i)):(e=CP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:LC,n(o,r)&&e.ref===t.ref)return um(e,t,i)}return t.flags|=1,e=c0(s,r),e.ref=t.ref,e.return=t,t.child=e}function e1e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(LC(s,r)&&e.ref===t.ref)if(Au=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Au=!0);else return t.lanes=e.lanes,um(e,t,i)}return V9(e,t,n,r,i)}function t1e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(Y_,ll),ll|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(Y_,ll),ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Zr(Y_,ll),ll|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Zr(Y_,ll),ll|=r;return Pa(e,t,i,n),t.child}function n1e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function V9(e,t,n,r,i){var s=Du(n)?xv:ma.current;return s=Qw(t,s),hw(t,i),n=Aq(e,t,n,r,s,i),r=Cq(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,um(e,t,i)):(wi&&r&&pq(t),t.flags|=1,Pa(e,t,n,i),t.child)}function Fie(e,t,n,r,i){if(Du(n)){var s=!0;WD(t)}else s=!1;if(hw(t,i),t.stateNode===null)SP(e,t),Qye(t,n,r),U9(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=_c(l):(l=Du(n)?xv:ma.current,l=Qw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Pie(t,o,r,l),Sg=!1;var d=t.memoizedState;o.state=d,QD(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Pu.current||Sg?(typeof c=="function"&&(B9(t,n,c,r),u=t.memoizedState),(a=Sg||Nie(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rye(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:rf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=_c(u):(u=Du(n)?xv:ma.current,u=Qw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Pie(t,o,r,u),Sg=!1,d=t.memoizedState,o.state=d,QD(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Pu.current||Sg?(typeof h=="function"&&(B9(t,n,h,r),p=t.memoizedState),(l=Sg||Nie(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return H9(e,t,n,r,s,i)}function H9(e,t,n,r,i,s){n1e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&xie(t,n,!1),um(e,t,s);r=t.stateNode,Uje.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Zw(t,e.child,null,s),t.child=Zw(t,null,a,s)):Pa(e,t,a,s),t.memoizedState=r.state,i&&xie(t,n,!0),t.child}function r1e(e){var t=e.stateNode;t.pendingContext?Eie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Eie(e,t.context,!1),Eq(e,t.containerInfo)}function jie(e,t,n,r,i){return Jw(),gq(i),t.flags|=256,Pa(e,t,n,r),t.child}var q9={dehydrated:null,treeContext:null,retryLane:0};function W9(e){return{baseLanes:e,cachePool:null,transitions:null}}function i1e(e,t,n){var r=t.pendingProps,i=ki.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Zr(ki,i&1),e===null)return F9(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=kM(o,r,0,null),e=av(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=W9(n),t.memoizedState=q9,e):Rq(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zje(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=c0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=c0(a,s):(s=av(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?W9(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=q9,r}return s=e.child,e=s.sibling,r=c0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Rq(e,t){return t=kM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function BR(e,t,n,r){return r!==null&&gq(r),Zw(t,e.child,null,n),e=Rq(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zje(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=M5(Error(tt(422))),BR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=kM({mode:"visible",children:r.children},i,0,null),s=av(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Zw(t,e.child,null,o),t.child.memoizedState=W9(o),t.memoizedState=q9,s);if(!(t.mode&1))return BR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=M5(s,r,void 0),BR(e,t,o,r)}if(a=(o&e.childLanes)!==0,Au||a){if(r=so,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,am(e,i),If(r,e,i,-1))}return Mq(),r=M5(Error(tt(421))),BR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=tBe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,gl=o0(i.nextSibling),xl=t,wi=!0,cf=null,e!==null&&(rc[ic++]=Op,rc[ic++]=$p,rc[ic++]=Sv,Op=e.id,$p=e.overflow,Sv=t),t=Rq(t,r.children),t.flags|=4096,t)}function Bie(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),j9(e.return,t,n)}function L5(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function s1e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Pa(e,t,r.children,n),r=ki.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Bie(e,n,t);else if(e.tag===19)Bie(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Zr(ki,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&JD(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),L5(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&JD(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}L5(t,!0,n,null,s);break;case"together":L5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function SP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function um(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Av|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=c0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=c0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Vje(e,t,n){switch(t.tag){case 3:r1e(t),Jw();break;case 5:Nye(t);break;case 1:Du(t.type)&&WD(t);break;case 4:Eq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Zr(KD,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Zr(ki,ki.current&1),t.flags|=128,null):n&t.child.childLanes?i1e(e,t,n):(Zr(ki,ki.current&1),e=um(e,t,n),e!==null?e.sibling:null);Zr(ki,ki.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return s1e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zr(ki,ki.current),r)break;return null;case 22:case 23:return t.lanes=0,t1e(e,t,n)}return um(e,t,n)}var o1e,G9,a1e,u1e;o1e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};G9=function(){};a1e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,z1(Jd.current);var s=null;switch(n){case"input":i=m9(e,i),r=m9(e,r),s=[];break;case"select":i=Di({},i,{value:void 0}),r=Di({},r,{value:void 0}),s=[];break;case"textarea":i=v9(e,i),r=v9(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=HD)}_9(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(RC.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(RC.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&si("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};u1e=function(e,t,n,r){n!==r&&(t.flags|=4)};function qS(e,t){if(!wi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hje(e,t,n){var r=t.pendingProps;switch(mq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:return Du(t.type)&&qD(),qo(t),null;case 3:return r=t.stateNode,eE(),fi(Pu),fi(ma),Sq(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(FR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cf!==null&&(tU(cf),cf=null))),G9(e,t),qo(t),null;case 5:xq(t);var i=z1(zC.current);if(n=t.type,e!==null&&t.stateNode!=null)a1e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return qo(t),null}if(e=z1(Jd.current),FR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Rd]=t,r[BC]=s,e=(t.mode&1)!==0,n){case"dialog":si("cancel",r),si("close",r);break;case"iframe":case"object":case"embed":si("load",r);break;case"video":case"audio":for(i=0;i<VT.length;i++)si(VT[i],r);break;case"source":si("error",r);break;case"img":case"image":case"link":si("error",r),si("load",r);break;case"details":si("toggle",r);break;case"input":Kre(r,s),si("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},si("invalid",r);break;case"textarea":Qre(r,s),si("invalid",r)}_9(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&LR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&LR(r.textContent,a,e),i=["children",""+a]):RC.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&si("scroll",r)}switch(n){case"input":kR(r),Xre(r,s,!0);break;case"textarea":kR(r),Jre(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=HD)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=M0e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Rd]=t,e[BC]=r,o1e(e,t,!1,!1),t.stateNode=e;e:{switch(o=w9(n,r),n){case"dialog":si("cancel",e),si("close",e),i=r;break;case"iframe":case"object":case"embed":si("load",e),i=r;break;case"video":case"audio":for(i=0;i<VT.length;i++)si(VT[i],e);i=r;break;case"source":si("error",e),i=r;break;case"img":case"image":case"link":si("error",e),si("load",e),i=r;break;case"details":si("toggle",e),i=r;break;case"input":Kre(e,r),i=m9(e,r),si("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Di({},r,{value:void 0}),si("invalid",e);break;case"textarea":Qre(e,r),i=v9(e,r),si("invalid",e);break;default:i=r}_9(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?j0e(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&L0e(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&NC(e,u):typeof u=="number"&&NC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(RC.hasOwnProperty(s)?u!=null&&s==="onScroll"&&si("scroll",e):u!=null&&eq(e,s,u,o))}switch(n){case"input":kR(e),Xre(e,r,!1);break;case"textarea":kR(e),Jre(e);break;case"option":r.value!=null&&e.setAttribute("value",""+I0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?lw(e,!!r.multiple,s,!1):r.defaultValue!=null&&lw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=HD)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&t.stateNode!=null)u1e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=z1(zC.current),z1(Jd.current),FR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rd]=t,(s=r.nodeValue!==n)&&(e=xl,e!==null))switch(e.tag){case 3:LR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&LR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rd]=t,t.stateNode=r}return qo(t),null;case 13:if(fi(ki),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wi&&gl!==null&&t.mode&1&&!(t.flags&128))Aye(),Jw(),t.flags|=98560,s=!1;else if(s=FR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Rd]=t}else Jw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;qo(t),s=!1}else cf!==null&&(tU(cf),cf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ki.current&1?Is===0&&(Is=3):Mq())),t.updateQueue!==null&&(t.flags|=4),qo(t),null);case 4:return eE(),G9(e,t),e===null&&FC(t.stateNode.containerInfo),qo(t),null;case 10:return bq(t.type._context),qo(t),null;case 17:return Du(t.type)&&qD(),qo(t),null;case 19:if(fi(ki),s=t.memoizedState,s===null)return qo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)qS(s,!1);else{if(Is!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=JD(e),o!==null){for(t.flags|=128,qS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Zr(ki,ki.current&1|2),t.child}e=e.sibling}s.tail!==null&&rs()>nE&&(t.flags|=128,r=!0,qS(s,!1),t.lanes=4194304)}else{if(!r)if(e=JD(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wi)return qo(t),null}else 2*rs()-s.renderingStartTime>nE&&n!==1073741824&&(t.flags|=128,r=!0,qS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rs(),t.sibling=null,n=ki.current,Zr(ki,r?n&1|2:n&1),t):(qo(t),null);case 22:case 23:return $q(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ll&1073741824&&(qo(t),t.subtreeFlags&6&&(t.flags|=8192)):qo(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function qje(e,t){switch(mq(t),t.tag){case 1:return Du(t.type)&&qD(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return eE(),fi(Pu),fi(ma),Sq(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return xq(t),null;case 13:if(fi(ki),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));Jw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fi(ki),null;case 4:return eE(),null;case 10:return bq(t.type._context),null;case 22:case 23:return $q(),null;case 24:return null;default:return null}}var UR=!1,ra=!1,Wje=typeof WeakSet=="function"?WeakSet:Set,xt=null;function G_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function Y9(e,t,n){try{n()}catch(r){zi(e,t,r)}}var Uie=!1;function Gje(e,t){if(N9=UD,e=hye(),hq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(P9={focusedElem:e,selectionRange:n},UD=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:rf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){zi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Uie,Uie=!1,p}function LA(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Y9(t,n,s)}i=i.next}while(i!==r)}}function CM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function K9(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function l1e(e){var t=e.alternate;t!==null&&(e.alternate=null,l1e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rd],delete t[BC],delete t[$9],delete t[kje],delete t[Rje])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function c1e(e){return e.tag===5||e.tag===3||e.tag===4}function zie(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||c1e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function X9(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=HD));else if(r!==4&&(e=e.child,e!==null))for(X9(e,t,n),e=e.sibling;e!==null;)X9(e,t,n),e=e.sibling}function Q9(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Q9(e,t,n),e=e.sibling;e!==null;)Q9(e,t,n),e=e.sibling}var bo=null,of=!1;function cg(e,t,n){for(n=n.child;n!==null;)f1e(e,t,n),n=n.sibling}function f1e(e,t,n){if(Qd&&typeof Qd.onCommitFiberUnmount=="function")try{Qd.onCommitFiberUnmount(bM,n)}catch{}switch(n.tag){case 5:ra||G_(n,t);case 6:var r=bo,i=of;bo=null,cg(e,t,n),bo=r,of=i,bo!==null&&(of?(e=bo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):bo.removeChild(n.stateNode));break;case 18:bo!==null&&(of?(e=bo,n=n.stateNode,e.nodeType===8?R5(e.parentNode,n):e.nodeType===1&&R5(e,n),$C(e)):R5(bo,n.stateNode));break;case 4:r=bo,i=of,bo=n.stateNode.containerInfo,of=!0,cg(e,t,n),bo=r,of=i;break;case 0:case 11:case 14:case 15:if(!ra&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Y9(n,t,o),i=i.next}while(i!==r)}cg(e,t,n);break;case 1:if(!ra&&(G_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zi(n,t,a)}cg(e,t,n);break;case 21:cg(e,t,n);break;case 22:n.mode&1?(ra=(r=ra)||n.memoizedState!==null,cg(e,t,n),ra=r):cg(e,t,n);break;default:cg(e,t,n)}}function Vie(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Wje),t.forEach(function(r){var i=nBe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:bo=a.stateNode,of=!1;break e;case 3:bo=a.stateNode.containerInfo,of=!0;break e;case 4:bo=a.stateNode.containerInfo,of=!0;break e}a=a.return}if(bo===null)throw Error(tt(160));f1e(s,o,i),bo=null,of=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)d1e(t,e),t=t.sibling}function d1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qc(t,e),dd(e),r&4){try{LA(3,e,e.return),CM(3,e)}catch(m){zi(e,e.return,m)}try{LA(5,e,e.return)}catch(m){zi(e,e.return,m)}}break;case 1:qc(t,e),dd(e),r&512&&n!==null&&G_(n,n.return);break;case 5:if(qc(t,e),dd(e),r&512&&n!==null&&G_(n,n.return),e.flags&32){var i=e.stateNode;try{NC(i,"")}catch(m){zi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&O0e(i,s),w9(a,o);var l=w9(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?j0e(i,f):c==="dangerouslySetInnerHTML"?L0e(i,f):c==="children"?NC(i,f):eq(i,c,f,l)}switch(a){case"input":g9(i,s);break;case"textarea":$0e(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?lw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?lw(i,!!s.multiple,s.defaultValue,!0):lw(i,!!s.multiple,s.multiple?[]:"",!1))}i[BC]=s}catch(m){zi(e,e.return,m)}}break;case 6:if(qc(t,e),dd(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zi(e,e.return,m)}}break;case 3:if(qc(t,e),dd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$C(t.containerInfo)}catch(m){zi(e,e.return,m)}break;case 4:qc(t,e),dd(e);break;case 13:qc(t,e),dd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dq=rs())),r&4&&Vie(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ra=(l=ra)||c,qc(t,e),ra=l):qc(t,e),dd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:LA(4,d,d.return);break;case 1:G_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zi(r,n,m)}}break;case 5:G_(d,d.return);break;case 22:if(d.memoizedState!==null){qie(f);continue}}h!==null?(h.return=d,xt=h):qie(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=F0e("display",o))}catch(m){zi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qc(t,e),dd(e),r&4&&Vie(e);break;case 21:break;default:qc(t,e),dd(e)}}function dd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(c1e(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(NC(i,""),r.flags&=-33);var s=zie(e);Q9(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=zie(e);X9(e,a,o);break;default:throw Error(tt(161))}}catch(u){zi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yje(e,t,n){xt=e,h1e(e)}function h1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||UR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ra;a=UR;var l=ra;if(UR=o,(ra=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?Wie(i):u!==null?(u.return=o,xt=u):Wie(i);for(;s!==null;)xt=s,h1e(s),s=s.sibling;xt=i,UR=a,ra=l}Hie(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Hie(e)}}function Hie(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ra||CM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ra)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:rf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Iie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Iie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&$C(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ra||t.flags&512&&K9(t)}catch(d){zi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function qie(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Wie(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{CM(4,t)}catch(u){zi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zi(t,i,u)}}var s=t.return;try{K9(t)}catch(u){zi(t,s,u)}break;case 5:var o=t.return;try{K9(t)}catch(u){zi(t,o,u)}}}catch(u){zi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var Kje=Math.ceil,tO=Mm.ReactCurrentDispatcher,Nq=Mm.ReactCurrentOwner,gc=Mm.ReactCurrentBatchConfig,ur=0,so=null,ys=null,Co=0,ll=0,Y_=gy(0),Is=0,WC=null,Av=0,IM=0,Pq=0,FA=null,vu=null,Dq=0,nE=1/0,yp=null,nO=!1,J9=null,u0=null,zR=!1,Vg=null,rO=0,jA=0,Z9=null,TP=-1,AP=0;function Va(){return ur&6?rs():TP!==-1?TP:TP=rs()}function l0(e){return e.mode&1?ur&2&&Co!==0?Co&-Co:Pje.transition!==null?(AP===0&&(AP=Q0e()),AP):(e=Dr,e!==0||(e=window.event,e=e===void 0?16:iye(e.type)),e):1}function If(e,t,n,r){if(50<jA)throw jA=0,Z9=null,Error(tt(185));_I(e,n,r),(!(ur&2)||e!==so)&&(e===so&&(!(ur&2)&&(IM|=n),Is===4&&Dg(e,Co)),Ou(e,r),n===1&&ur===0&&!(t.mode&1)&&(nE=rs()+500,SM&&yy()))}function Ou(e,t){var n=e.callbackNode;P8e(e,t);var r=BD(e,e===so?Co:0);if(r===0)n!==null&&tie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&tie(n),t===1)e.tag===0?Nje(Gie.bind(null,e)):xye(Gie.bind(null,e)),Cje(function(){!(ur&6)&&yy()}),n=null;else{switch(J0e(r)){case 1:n=sq;break;case 4:n=K0e;break;case 16:n=jD;break;case 536870912:n=X0e;break;default:n=jD}n=w1e(n,p1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function p1e(e,t){if(TP=-1,AP=0,ur&6)throw Error(tt(327));var n=e.callbackNode;if(pw()&&e.callbackNode!==n)return null;var r=BD(e,e===so?Co:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=iO(e,r);else{t=r;var i=ur;ur|=2;var s=g1e();(so!==e||Co!==t)&&(yp=null,nE=rs()+500,ov(e,t));do try{Jje();break}catch(a){m1e(e,a)}while(!0);vq(),tO.current=s,ur=i,ys!==null?t=0:(so=null,Co=0,t=Is)}if(t!==0){if(t===2&&(i=A9(e),i!==0&&(r=i,t=eU(e,i))),t===1)throw n=WC,ov(e,0),Dg(e,r),Ou(e,rs()),n;if(t===6)Dg(e,r);else{if(i=e.current.alternate,!(r&30)&&!Xje(i)&&(t=iO(e,r),t===2&&(s=A9(e),s!==0&&(r=s,t=eU(e,s))),t===1))throw n=WC,ov(e,0),Dg(e,r),Ou(e,rs()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:h1(e,vu,yp);break;case 3:if(Dg(e,r),(r&130023424)===r&&(t=Dq+500-rs(),10<t)){if(BD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Va(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=O9(h1.bind(null,e,vu,yp),t);break}h1(e,vu,yp);break;case 4:if(Dg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Cf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=rs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kje(r/1960))-r,10<r){e.timeoutHandle=O9(h1.bind(null,e,vu,yp),r);break}h1(e,vu,yp);break;case 5:h1(e,vu,yp);break;default:throw Error(tt(329))}}}return Ou(e,rs()),e.callbackNode===n?p1e.bind(null,e):null}function eU(e,t){var n=FA;return e.current.memoizedState.isDehydrated&&(ov(e,t).flags|=256),e=iO(e,t),e!==2&&(t=vu,vu=n,t!==null&&tU(t)),e}function tU(e){vu===null?vu=e:vu.push.apply(vu,e)}function Xje(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Lf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dg(e,t){for(t&=~Pq,t&=~IM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Cf(t),r=1<<n;e[n]=-1,t&=~r}}function Gie(e){if(ur&6)throw Error(tt(327));pw();var t=BD(e,0);if(!(t&1))return Ou(e,rs()),null;var n=iO(e,t);if(e.tag!==0&&n===2){var r=A9(e);r!==0&&(t=r,n=eU(e,r))}if(n===1)throw n=WC,ov(e,0),Dg(e,t),Ou(e,rs()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,h1(e,vu,yp),Ou(e,rs()),null}function Oq(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(nE=rs()+500,SM&&yy())}}function Cv(e){Vg!==null&&Vg.tag===0&&!(ur&6)&&pw();var t=ur;ur|=1;var n=gc.transition,r=Dr;try{if(gc.transition=null,Dr=1,e)return e()}finally{Dr=r,gc.transition=n,ur=t,!(ur&6)&&yy()}}function $q(){ll=Y_.current,fi(Y_)}function ov(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Aje(n)),ys!==null)for(n=ys.return;n!==null;){var r=n;switch(mq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qD();break;case 3:eE(),fi(Pu),fi(ma),Sq();break;case 5:xq(r);break;case 4:eE();break;case 13:fi(ki);break;case 19:fi(ki);break;case 10:bq(r.type._context);break;case 22:case 23:$q()}n=n.return}if(so=e,ys=e=c0(e.current,null),Co=ll=t,Is=0,WC=null,Pq=IM=Av=0,vu=FA=null,U1!==null){for(t=0;t<U1.length;t++)if(n=U1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}U1=null}return e}function m1e(e,t){do{var n=ys;try{if(vq(),EP.current=eO,ZD){for(var r=Ri.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ZD=!1}if(Tv=0,Ys=Es=Ri=null,MA=!1,VC=0,Nq.current=null,n===null||n.return===null){Is=1,WC=t,ys=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Co,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Oie(o);if(h!==null){h.flags&=-257,$ie(h,o,a,s,t),h.mode&1&&Die(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Die(s,l,t),Mq();break e}u=Error(tt(426))}}else if(wi&&a.mode&1){var g=Oie(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),$ie(g,o,a,s,t),gq(tE(u,a));break e}}s=u=tE(u,a),Is!==4&&(Is=2),FA===null?FA=[s]:FA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Jye(s,u,t);Cie(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(u0===null||!u0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Zye(s,a,t);Cie(s,w);break e}}s=s.return}while(s!==null)}v1e(n)}catch(E){t=E,ys===n&&n!==null&&(ys=n=n.return);continue}break}while(!0)}function g1e(){var e=tO.current;return tO.current=eO,e===null?eO:e}function Mq(){(Is===0||Is===3||Is===2)&&(Is=4),so===null||!(Av&268435455)&&!(IM&268435455)||Dg(so,Co)}function iO(e,t){var n=ur;ur|=2;var r=g1e();(so!==e||Co!==t)&&(yp=null,ov(e,t));do try{Qje();break}catch(i){m1e(e,i)}while(!0);if(vq(),ur=n,tO.current=r,ys!==null)throw Error(tt(261));return so=null,Co=0,Is}function Qje(){for(;ys!==null;)y1e(ys)}function Jje(){for(;ys!==null&&!x8e();)y1e(ys)}function y1e(e){var t=_1e(e.alternate,e,ll);e.memoizedProps=e.pendingProps,t===null?v1e(e):ys=t,Nq.current=null}function v1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=qje(n,t),n!==null){n.flags&=32767,ys=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Is=6,ys=null;return}}else if(n=Hje(n,t,ll),n!==null){ys=n;return}if(t=t.sibling,t!==null){ys=t;return}ys=t=e}while(t!==null);Is===0&&(Is=5)}function h1(e,t,n){var r=Dr,i=gc.transition;try{gc.transition=null,Dr=1,Zje(e,t,n,r)}finally{gc.transition=i,Dr=r}return null}function Zje(e,t,n,r){do pw();while(Vg!==null);if(ur&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(D8e(e,s),e===so&&(ys=so=null,Co=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zR||(zR=!0,w1e(jD,function(){return pw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gc.transition,gc.transition=null;var o=Dr;Dr=1;var a=ur;ur|=4,Nq.current=null,Gje(e,n),d1e(n,e),bje(P9),UD=!!N9,P9=N9=null,e.current=n,Yje(n),S8e(),ur=a,Dr=o,gc.transition=s}else e.current=n;if(zR&&(zR=!1,Vg=e,rO=i),s=e.pendingLanes,s===0&&(u0=null),C8e(n.stateNode),Ou(e,rs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(nO)throw nO=!1,e=J9,J9=null,e;return rO&1&&e.tag!==0&&pw(),s=e.pendingLanes,s&1?e===Z9?jA++:(jA=0,Z9=e):jA=0,yy(),null}function pw(){if(Vg!==null){var e=J0e(rO),t=gc.transition,n=Dr;try{if(gc.transition=null,Dr=16>e?16:e,Vg===null)var r=!1;else{if(e=Vg,Vg=null,rO=0,ur&6)throw Error(tt(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:LA(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(l1e(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:LA(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:CM(9,a)}}catch(E){zi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,yy(),Qd&&typeof Qd.onPostCommitFiberRoot=="function")try{Qd.onPostCommitFiberRoot(bM,e)}catch{}r=!0}return r}finally{Dr=n,gc.transition=t}}return!1}function Yie(e,t,n){t=tE(n,t),t=Jye(e,t,1),e=a0(e,t,1),t=Va(),e!==null&&(_I(e,1,t),Ou(e,t))}function zi(e,t,n){if(e.tag===3)Yie(e,e,n);else for(;t!==null;){if(t.tag===3){Yie(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(u0===null||!u0.has(r))){e=tE(n,e),e=Zye(t,e,1),t=a0(t,e,1),e=Va(),t!==null&&(_I(t,1,e),Ou(t,e));break}}t=t.return}}function eBe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Va(),e.pingedLanes|=e.suspendedLanes&n,so===e&&(Co&n)===n&&(Is===4||Is===3&&(Co&130023424)===Co&&500>rs()-Dq?ov(e,0):Pq|=n),Ou(e,t)}function b1e(e,t){t===0&&(e.mode&1?(t=PR,PR<<=1,!(PR&130023424)&&(PR=4194304)):t=1);var n=Va();e=am(e,t),e!==null&&(_I(e,t,n),Ou(e,n))}function tBe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),b1e(e,n)}function nBe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),b1e(e,n)}var _1e;_1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pu.current)Au=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Au=!1,Vje(e,t,n);Au=!!(e.flags&131072)}else Au=!1,wi&&t.flags&1048576&&Sye(t,YD,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;SP(e,t),e=t.pendingProps;var i=Qw(t,ma.current);hw(t,n),i=Aq(null,t,r,e,i,n);var s=Cq();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Du(r)?(s=!0,WD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wq(t),i.updater=AM,t.stateNode=i,i._reactInternals=t,U9(t,r,e,n),t=H9(null,t,r,!0,s,n)):(t.tag=0,wi&&s&&pq(t),Pa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(SP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=iBe(r),e=rf(r,e),i){case 0:t=V9(null,t,r,e,n);break e;case 1:t=Fie(null,t,r,e,n);break e;case 11:t=Mie(null,t,r,e,n);break e;case 14:t=Lie(null,t,r,rf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rf(r,i),V9(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rf(r,i),Fie(e,t,r,i,n);case 3:e:{if(r1e(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Rye(e,t),QD(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=tE(Error(tt(423)),t),t=jie(e,t,r,n,i);break e}else if(r!==i){i=tE(Error(tt(424)),t),t=jie(e,t,r,n,i);break e}else for(gl=o0(t.stateNode.containerInfo.firstChild),xl=t,wi=!0,cf=null,n=Iye(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jw(),r===i){t=um(e,t,n);break e}Pa(e,t,r,n)}t=t.child}return t;case 5:return Nye(t),e===null&&F9(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,D9(r,i)?o=null:s!==null&&D9(r,s)&&(t.flags|=32),n1e(e,t),Pa(e,t,o,n),t.child;case 6:return e===null&&F9(t),null;case 13:return i1e(e,t,n);case 4:return Eq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Zw(t,null,r,n):Pa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rf(r,i),Mie(e,t,r,i,n);case 7:return Pa(e,t,t.pendingProps,n),t.child;case 8:return Pa(e,t,t.pendingProps.children,n),t.child;case 12:return Pa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Zr(KD,r._currentValue),r._currentValue=o,s!==null)if(Lf(s.value,o)){if(s.children===i.children&&!Pu.current){t=um(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Gp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),j9(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),j9(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,hw(t,n),i=_c(i),r=r(i),t.flags|=1,Pa(e,t,r,n),t.child;case 14:return r=t.type,i=rf(r,t.pendingProps),i=rf(r.type,i),Lie(e,t,r,i,n);case 15:return e1e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:rf(r,i),SP(e,t),t.tag=1,Du(r)?(e=!0,WD(t)):e=!1,hw(t,n),Qye(t,r,i),U9(t,r,i,n),H9(null,t,r,!0,e,n);case 19:return s1e(e,t,n);case 22:return t1e(e,t,n)}throw Error(tt(156,t.tag))};function w1e(e,t){return Y0e(e,t)}function rBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fc(e,t,n,r){return new rBe(e,t,n,r)}function Lq(e){return e=e.prototype,!(!e||!e.isReactComponent)}function iBe(e){if(typeof e=="function")return Lq(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nq)return 11;if(e===rq)return 14}return 2}function c0(e,t){var n=e.alternate;return n===null?(n=fc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function CP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Lq(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case F_:return av(n.children,i,s,t);case tq:o=8,i|=8;break;case f9:return e=fc(12,n,t,i|2),e.elementType=f9,e.lanes=s,e;case d9:return e=fc(13,n,t,i),e.elementType=d9,e.lanes=s,e;case h9:return e=fc(19,n,t,i),e.elementType=h9,e.lanes=s,e;case N0e:return kM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k0e:o=10;break e;case R0e:o=9;break e;case nq:o=11;break e;case rq:o=14;break e;case xg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=fc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function av(e,t,n,r){return e=fc(7,e,r,t),e.lanes=n,e}function kM(e,t,n,r){return e=fc(22,e,r,t),e.elementType=N0e,e.lanes=n,e.stateNode={isHidden:!1},e}function F5(e,t,n){return e=fc(6,e,null,t),e.lanes=n,e}function j5(e,t,n){return t=fc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=b5(0),this.expirationTimes=b5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=b5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fq(e,t,n,r,i,s,o,a,u){return e=new sBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=fc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wq(s),e}function oBe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function E1e(e){if(!e)return k0;e=e._reactInternals;e:{if(gb(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Du(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Du(n))return Eye(e,n,t)}return t}function x1e(e,t,n,r,i,s,o,a,u){return e=Fq(n,r,!0,e,i,s,o,a,u),e.context=E1e(null),n=e.current,r=Va(),i=l0(n),s=Gp(r,i),s.callback=t??null,a0(n,s,i),e.current.lanes=i,_I(e,i,r),Ou(e,r),e}function RM(e,t,n,r){var i=t.current,s=Va(),o=l0(i);return n=E1e(n),t.context===null?t.context=n:t.pendingContext=n,t=Gp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=a0(i,t,o),e!==null&&(If(e,i,o,s),wP(e,i,o)),o}function sO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kie(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jq(e,t){Kie(e,t),(e=e.alternate)&&Kie(e,t)}function aBe(){return null}var S1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bq(e){this._internalRoot=e}NM.prototype.render=Bq.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));RM(e,t,null,null)};NM.prototype.unmount=Bq.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cv(function(){RM(null,e,null,null)}),t[om]=null}};function NM(e){this._internalRoot=e}NM.prototype.unstable_scheduleHydration=function(e){if(e){var t=tye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pg.length&&t!==0&&t<Pg[n].priority;n++);Pg.splice(n,0,e),n===0&&rye(e)}};function Uq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function PM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xie(){}function uBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=sO(o);s.call(l)}}var o=x1e(t,r,e,0,null,!1,!1,"",Xie);return e._reactRootContainer=o,e[om]=o.current,FC(e.nodeType===8?e.parentNode:e),Cv(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=sO(u);a.call(l)}}var u=Fq(e,0,!1,null,null,!1,!1,"",Xie);return e._reactRootContainer=u,e[om]=u.current,FC(e.nodeType===8?e.parentNode:e),Cv(function(){RM(t,u,n,r)}),u}function DM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=sO(o);a.call(u)}}RM(t,o,e,i)}else o=uBe(n,t,e,i,r);return sO(o)}Z0e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=zT(t.pendingLanes);n!==0&&(oq(t,n|1),Ou(t,rs()),!(ur&6)&&(nE=rs()+500,yy()))}break;case 13:Cv(function(){var r=am(e,1);if(r!==null){var i=Va();If(r,e,1,i)}}),jq(e,1)}};aq=function(e){if(e.tag===13){var t=am(e,134217728);if(t!==null){var n=Va();If(t,e,134217728,n)}jq(e,134217728)}};eye=function(e){if(e.tag===13){var t=l0(e),n=am(e,t);if(n!==null){var r=Va();If(n,e,t,r)}jq(e,t)}};tye=function(){return Dr};nye=function(e,t){var n=Dr;try{return Dr=e,t()}finally{Dr=n}};x9=function(e,t,n){switch(t){case"input":if(g9(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xM(r);if(!i)throw Error(tt(90));D0e(r),g9(r,i)}}}break;case"textarea":$0e(e,n);break;case"select":t=n.value,t!=null&&lw(e,!!n.multiple,t,!1)}};z0e=Oq;V0e=Cv;var lBe={usingClientEntryPoint:!1,Events:[EI,z_,xM,B0e,U0e,Oq]},WS={findFiberByHostInstance:B1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cBe={bundleType:WS.bundleType,version:WS.version,rendererPackageName:WS.rendererPackageName,rendererConfig:WS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=W0e(e),e===null?null:e.stateNode},findFiberByHostInstance:WS.findFiberByHostInstance||aBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var VR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!VR.isDisabled&&VR.supportsFiber)try{bM=VR.inject(cBe),Qd=VR}catch{}}zl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lBe;zl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uq(t))throw Error(tt(200));return oBe(e,t,null,n)};zl.createRoot=function(e,t){if(!Uq(e))throw Error(tt(299));var n=!1,r="",i=S1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Fq(e,1,!1,null,null,n,!1,r,i),e[om]=t.current,FC(e.nodeType===8?e.parentNode:e),new Bq(t)};zl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=W0e(t),e=e===null?null:e.stateNode,e};zl.flushSync=function(e){return Cv(e)};zl.hydrate=function(e,t,n){if(!PM(t))throw Error(tt(200));return DM(null,e,t,!0,n)};zl.hydrateRoot=function(e,t,n){if(!Uq(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=S1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=x1e(t,null,e,1,n??null,i,!1,s,o),e[om]=t.current,FC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new NM(t)};zl.render=function(e,t,n){if(!PM(t))throw Error(tt(200));return DM(null,e,t,!1,n)};zl.unmountComponentAtNode=function(e){if(!PM(e))throw Error(tt(40));return e._reactRootContainer?(Cv(function(){DM(null,null,e,!1,function(){e._reactRootContainer=null,e[om]=null})}),!0):!1};zl.unstable_batchedUpdates=Oq;zl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!PM(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return DM(e,t,n,!1,r)};zl.version="18.3.1-next-f1338f8080-20240426";function T1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T1e)}catch(e){console.error(e)}}T1e(),T0e.exports=zl;var SI=T0e.exports;const fBe=Ul(SI);var Qie=SI;l9.createRoot=Qie.createRoot,l9.hydrateRoot=Qie.hydrateRoot;var Nd=function(){return Nd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Nd.apply(this,arguments)};function TI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Cp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Jie(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function V1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function B5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function BA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Jie=="function"?Jie(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var IP="right-scroll-bar-position",kP="width-before-scroll-bar",hBe="with-scroll-bars-hidden",pBe="--removed-body-scroll-bar-size";function U5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function mBe(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var gBe=typeof window<"u"?N.useLayoutEffect:N.useEffect,Zie=new WeakMap;function yBe(e,t){var n=mBe(null,function(r){return e.forEach(function(i){return U5(i,r)})});return gBe(function(){var r=Zie.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||U5(a,null)}),s.forEach(function(a){i.has(a)||U5(a,o)})}Zie.set(n,e)},[e]),n}function vBe(e){return e}function bBe(e,t){t===void 0&&(t=vBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function _Be(e){e===void 0&&(e={});var t=bBe(null);return t.options=Nd({async:!0,ssr:!1},e),t}var A1e=function(e){var t=e.sideCar,n=TI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Nd({},n))};A1e.isSideCarExport=!0;function wBe(e,t){return e.useMedium(t),A1e}var C1e=_Be(),z5=function(){},OM=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:z5,onWheelCapture:z5,onTouchMoveCapture:z5}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=TI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=yBe([n,t]),S=Nd(Nd({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(w,{sideCar:C1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),Nd(Nd({},S),{ref:E})):N.createElement(y,Nd({},S,{className:u,ref:E}),a))});OM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};OM.classNames={fullWidth:kP,zeroRight:IP};var EBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xBe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=EBe();return t&&e.setAttribute("nonce",t),e}function SBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function TBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ABe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=xBe())&&(SBe(t,n),TBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},CBe=function(){var e=ABe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},I1e=function(){var e=CBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},IBe={left:0,top:0,right:0,gap:0},V5=function(e){return parseInt(e||"",10)||0},kBe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[V5(n),V5(r),V5(i)]},RBe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return IBe;var t=kBe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},NBe=I1e(),mw="data-scroll-locked",PBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(hBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(mw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(IP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(kP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(IP," .").concat(IP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(kP," .").concat(kP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(mw,`] {
    `).concat(pBe,": ").concat(a,`px;
  }
`)},ese=function(){var e=parseInt(document.body.getAttribute(mw)||"0",10);return isFinite(e)?e:0},DBe=function(){N.useEffect(function(){return document.body.setAttribute(mw,(ese()+1).toString()),function(){var e=ese()-1;e<=0?document.body.removeAttribute(mw):document.body.setAttribute(mw,e.toString())}},[])},OBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;DBe();var s=N.useMemo(function(){return RBe(i)},[i]);return N.createElement(NBe,{styles:PBe(s,!t,i,n?"":"!important")})},nU=!1;if(typeof window<"u")try{var HR=Object.defineProperty({},"passive",{get:function(){return nU=!0,!0}});window.addEventListener("test",HR,HR),window.removeEventListener("test",HR,HR)}catch{nU=!1}var e_=nU?{passive:!1}:!1,$Be=function(e){return e.tagName==="TEXTAREA"},k1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!$Be(e)&&n[t]==="visible")},MBe=function(e){return k1e(e,"overflowY")},LBe=function(e){return k1e(e,"overflowX")},tse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=R1e(e,r);if(i){var s=N1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},FBe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},jBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},R1e=function(e,t){return e==="v"?MBe(t):LBe(t)},N1e=function(e,t){return e==="v"?FBe(t):jBe(t)},BBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},UBe=function(e,t,n,r,i){var s=BBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=N1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&R1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},qR=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},nse=function(e){return[e.deltaX,e.deltaY]},rse=function(e){return e&&"current"in e?e.current:e},zBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},VBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},HBe=0,t_=[];function qBe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(HBe++)[0],s=N.useState(I1e)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=dBe([e.lockRef.current],(e.shards||[]).map(rse),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=qR(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var A=tse(T,S);if(!A)return!0;if(A?E=T:(E=T==="v"?"h":"v",A=tse(T,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return UBe(C,g,m,C==="h"?b:w,!0)},[]),u=N.useCallback(function(m){var g=m;if(!(!t_.length||t_[t_.length-1]!==s)){var y="deltaY"in g?nse(g):qR(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&zBe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(rse).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:WBe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=N.useCallback(function(m){n.current=qR(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,nse(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,qR(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return t_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,e_),document.addEventListener("touchmove",u,e_),document.addEventListener("touchstart",c,e_),function(){t_=t_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,e_),document.removeEventListener("touchmove",u,e_),document.removeEventListener("touchstart",c,e_)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:VBe(i)}):null,h?N.createElement(OBe,{gapMode:e.gapMode}):null)}function WBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const GBe=wBe(C1e,qBe);var $M=N.forwardRef(function(e,t){return N.createElement(OM,Nd({},e,{ref:t,sideCar:GBe}))});$M.classNames=OM.classNames;function Ni(e){return Object.keys(e)}function H5(e){return e&&typeof e=="object"&&!Array.isArray(e)}function zq(e,t){const n={...e},r=t;return H5(e)&&H5(t)&&Object.keys(t).forEach(i=>{H5(r[i])&&i in e?n[i]=zq(n[i],r[i]):n[i]=r[i]}),n}function YBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function KBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function rU(e){const t=KBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function q5(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function P1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?q5(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?q5(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?q5(s):s}}return r}return n}const Te=P1e("rem",{shouldScale:!0}),oO=P1e("em");function yx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function D1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function vy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function _a(e){const t=N.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function vx(e=null){const t=N.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function ise(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function aO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function XBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function QBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function JBe(e,t,n){return aO(e,n)===aO(t,n)}function O1e({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=aO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>JBe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=QBe(l,u,r),f=XBe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const ZBe={app:100,modal:200,popover:300,overlay:400,max:9999};function Pc(e){return ZBe[e]}const e9e=()=>{};function t9e(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||e9e:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function vn(e,t="size",n=!0){if(e!==void 0)return D1e(e)?n?Te(e):e:`var(--${t}-${e})`}function Il(e){return vn(e,"mantine-spacing")}function pi(e){return e===void 0?"var(--mantine-radius-default)":vn(e,"mantine-radius")}function oo(e){return vn(e,"mantine-font-size")}function $1e(e){return vn(e,"mantine-line-height",!1)}function Vq(e){if(e)return vn(e,"mantine-shadow",!1)}function Mp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function Hq(e,t){return e in t.breakpoints?rU(t.breakpoints[e]):rU(e)}function uO(e,t){const n=e.map(r=>({value:r,px:Hq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function HT(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function n9e(e,t,n){var r;return n?Array.from(((r=aO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function r9e(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Hd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function UA(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function A1(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function MM(e,t){const n=A1(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const sse=["mousedown","touchstart"];function i9e(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||sse).forEach(s=>document.addEventListener(s,i)),()=>{(t||sse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function s9e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function o9e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function a9e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:o9e(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),s9e(s.current,o=>i(o.matches))},[e]),r}const yb=typeof document<"u"?N.useLayoutEffect:N.useEffect;function lm(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function M1e({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return lm(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function u9e(e,t="body > :not(script)"){const n=UA(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const l9e=/input|select|textarea|button|object/,L1e="a, input, select, textarea, button, object, [tabindex]";function c9e(e){return e.style.display==="none"}function f9e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(c9e(n))return!1;n=n.parentNode}return!0}function F1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function iU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(F1e(e));return(l9e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&f9e(e)}function j1e(e){const t=F1e(e);return(Number.isNaN(t)||t>=0)&&iU(e)}function d9e(e){return Array.from(e.querySelectorAll(L1e)).filter(j1e)}function h9e(e,t){const n=d9e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function p9e(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(L1e));o=a.find(j1e)||a.find(iU)||null,!o&&iU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=u9e(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&h9e(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const m9e=Ht.useId||(()=>{});function g9e(){const e=m9e();return e?`mantine-${e.replace(/:/g,"")}`:""}function Zu(e){const t=g9e(),[n,r]=N.useState(t);return yb(()=>{r(UA())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function B1e(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function qq(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function U1e(...e){return t=>{e.forEach(n=>qq(n,t))}}function cs(...e){return N.useCallback(U1e(...e),e)}function z1e(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=Hd((w-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:Hd((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Do({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Wq(e,t){return a9e("(prefers-reduced-motion: reduce)",e,t)}const y9e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function gw(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(y9e),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function v9e(e){const[t,{width:n,height:r}]=gw(e);return{ref:t,width:n,height:r}}function b9e(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function _9e(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function w9e(e){return t=>_9e(b9e(e),t)}function E9e(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{w9e(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function yw(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function x9e(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function S9e(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function T9e(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function A9e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function C9e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});yb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>A9e(`${e}:${String(r)}`,i[0])}return[t,n]}var I9e={};function V1e(){return typeof process<"u"&&I9e?"production":"development"}function H1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=H1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ki(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=H1e(e))&&(r&&(r+=" "),r+=t);return r}const k9e={};function R9e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ki(t[r],i):t[r]=i})}),t}function LM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||k9e);return R9e(s)}function lO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const q1e=N.createContext(null);function by(){const e=N.useContext(q1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function N9e(){return by().cssVariablesResolver}function P9e(){return by().classNamesPrefix}function Gq(){return by().getStyleNonce}function D9e(){return by().withStaticClasses}function O9e(){return by().headless}function $9e(){var e;return(e=by().stylesTransform)==null?void 0:e.sx}function M9e(){var e;return(e=by().stylesTransform)==null?void 0:e.styles}function L9e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function F9e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function j9e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function B9e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function Yq(e){return L9e(e)?F9e(e):e.startsWith("rgb")?j9e(e):e.startsWith("hsl")?B9e(e):{r:0,g:0,b:0,a:1}}function WR(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=Yq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function GC(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function W5(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function U9e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function z9e(e){if(e.startsWith("oklch("))return(U9e(e)||0)/100;const{r:t,g:n,b:r}=Yq(e),i=t/255,s=n/255,o=r/255,a=W5(i),u=W5(s),l=W5(o);return .2126*a+.7152*u+.0722*l}function GS(e,t=.179){return e.startsWith("var(")?!1:z9e(e)>t}function Ph({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:GS(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:GS(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:GS(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][GC(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:GS(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:GS(e,t.luminanceThreshold),shade:s,variable:void 0}}function ti(e,t){const n=Ph({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function sU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=ti(n.from,t),i=ti(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function wd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=Yq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const n_=wd,V9e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Ph({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:WR(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:wd(a,.1),hover:wd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:wd(e,.1),hover:wd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:wd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:wd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:wd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:wd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:WR(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:WR(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:WR(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:sU(r,t),hover:sU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},H9e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},ose="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Kq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:H9e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:V9e,autoContrast:!1,luminanceThreshold:.3,fontFamily:ose,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:ose,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function ase(e){return e==="auto"||e==="dark"||e==="light"}function q9e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ase(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ase(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const W9e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",use="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function G5(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function lse(e){if(!(e.primaryColor in e.colors))throw new Error(W9e);if(typeof e.primaryShade=="object"&&(!G5(e.primaryShade.dark)||!G5(e.primaryShade.light)))throw new Error(use);if(typeof e.primaryShade=="number"&&!G5(e.primaryShade))throw new Error(use)}function G9e(e,t){var r;if(!t)return lse(e),e;const n=zq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),lse(n),n}const Xq=N.createContext(null),Y9e=()=>N.useContext(Xq)||Kq;function Ls(){const e=N.useContext(Xq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function W1e({theme:e,children:t,inherit:n=!0}){const r=Y9e(),i=N.useMemo(()=>G9e(n?r:Kq,e),[e,r,n]);return _.jsx(Xq.Provider,{value:i,children:t})}W1e.displayName="@mantine/core/MantineThemeProvider";function K9e(){const e=Ls(),t=Gq(),n=Ni(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=rU(e.breakpoints[i]),a=s?`${o-.1}px`:oO(o-.1),u=s?`${o}px`:oO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Y5(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function K5(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function X9e(e,t){const n=Y5(e.variables),r=n?K5(t,n):"",i=Y5(e.dark),s=i?K5(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Y5(e.light),a=o?K5(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function _y({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Ph({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function cse(e,t){return _y({color:e.colors[e.primaryColor][GC(e,t)],theme:e,autoContrast:null})}function GR({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=GC(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=GC(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:n_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:n_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:n_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function Q9e(e){return Array.isArray(e)?e:Array(10).fill(e)}function J9e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function r_(e,t,n){Ni(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const G1e=e=>{const t=GC(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":cse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":cse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};r_(r.variables,e.breakpoints,"breakpoint"),r_(r.variables,e.spacing,"spacing"),r_(r.variables,e.fontSizes,"font-size"),r_(r.variables,e.lineHeights,"line-height"),r_(r.variables,e.shadows,"shadow"),r_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Ni(e.colors).forEach(s=>{const o=e.colors[s];if(J9e(o)){Object.assign(r.light,GR({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,GR({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,GR({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,GR({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ni(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Z9e({theme:e,generator:t}){const n=G1e(e),r=t==null?void 0:t(e);return r?zq(n,r):n}const X5=G1e(Kq);function eUe(e){const t={variables:{},light:{},dark:{}};return Ni(e.variables).forEach(n=>{X5.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ni(e.light).forEach(n=>{X5.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ni(e.dark).forEach(n=>{X5.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function tUe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Y1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ls(),r=Gq(),i=N9e(),s=Z9e({theme:n,generator:i}),o=e===":root"&&t,a=o?eUe(s):s,u=X9e(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":tUe(e)}`}}):null}Y1e.displayName="@mantine/CssVariables";function nUe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function i_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function rUe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(i_(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),i_(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),yb(()=>{i_(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return i_(r,n),()=>{};r===void 0&&i_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&i_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function iUe({respectReducedMotion:e,getRootElement:t}){yb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}nUe();function K1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=q9e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=rUe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return iUe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(q1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(W1e,{theme:e,children:[o&&_.jsx(Y1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(K9e,{}),t]})})}K1e.displayName="@mantine/core/MantineProvider";function Lm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ls();return{resolvedClassNames:LM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:lO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const sUe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function oUe({theme:e,options:t,unstyled:n}){return Ki((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||sUe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function aUe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return LM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function fse({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return LM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function uUe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function lUe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function cUe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function fUe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=LM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function dUe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function hUe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ki(oUe({theme:e,options:t,unstyled:a||h}),fUe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),dUe({options:t,classes:o,selector:r,unstyled:a}),fse({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),fse({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),aUe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),uUe({rootSelector:l,selector:r,className:u}),lUe({selector:r,classes:o,unstyled:a||h}),d&&!h&&cUe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function pUe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return lO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function oU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...oU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function mUe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...yx(n[r])}}),t),{})}function gUe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=mUe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function yUe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&pUe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&lO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&lO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...gUe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?oU({style:u,theme:e}):null,...oU({style:r==null?void 0:r.style,theme:e})}}function vUe({props:e,stylesCtx:t,themeName:n}){var o;const r=Ls(),i=(o=M9e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function vt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ls(),h=P9e(),p=D9e(),m=O9e(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=vUe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:hUe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:yUe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function bx(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ae(e,t,n){var o;const r=Ls(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...yx(n)}}function Q5(e){return Ni(e).reduce((t,n)=>e[n]!==void 0?`${t}${YBe(n)}:${e[n]};`:t,"").trim()}function bUe({selector:e,styles:t,media:n,container:r}){const i=t?Q5(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Q5(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Q5(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function AI(e){const t=Gq();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:bUe(e)}})}function _x(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:M,fs:P,tt:O,td:F,w:L,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:it,darkHidden:be,sx:ke,...ze}=e;return{styleProps:yx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:M,fs:P,tt:O,td:F,w:L,miw:B,maw:U,h:H,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:it,darkHidden:be,sx:ke}),rest:ze}}const _Ue={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function Qq(e,t){const n=Ph({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function wUe(e,t){const n=Ph({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:Qq(e,t)}function EUe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),Q9e.length>0&&(s+=` ${Qq(i.join(" "),t)}`),s.trim()}return e}const dse={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function xUe(e){return typeof e=="string"&&e in dse?dse[e]:e}const SUe=["h1","h2","h3","h4","h5","h6"];function TUe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&SUe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function AUe(e){return e}const CUe=["h1","h2","h3","h4","h5","h6"];function IUe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&CUe.includes(e)?`var(--mantine-${e}-line-height)`:e}function kUe(e){return typeof e=="number"?Te(e):e}function RUe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const J5={color:Qq,textColor:wUe,fontSize:TUe,spacing:RUe,identity:AUe,size:kUe,lineHeight:IUe,fontFamily:xUe,border:EUe};function hse(e){return e.replace("(min-width: ","").replace("em)","")}function NUe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(hse(i))-Number(hse(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function PUe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function DUe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function OUe(e){return typeof e=="object"&&e!==null?Ni(e).filter(t=>t!=="base"):[]}function $Ue(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function X1e({styleProps:e,data:t,theme:n}){return NUe(Ni(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=DUe(e[i]);if(!PUe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=J5[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=OUe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=J5[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:J5[s.type]($Ue(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function FM(){return`__m__-${N.useId().replace(/:/g,"")}`}function Jq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Jq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Q1e(e){return e.startsWith("data-")?e:`data-${e}`}function MUe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Q1e(n)]=e[n]),t},{})}function J1e(e){return e?typeof e=="string"?{[Q1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...J1e(n)}),{}):MUe(e):null}function aU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...aU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function LUe({theme:e,style:t,vars:n,styleProps:r}){const i=aU(t,e),s=aU(n,e);return{...i,...s,...r}}const Z1e=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=Ls(),g=e||"div",{styleProps:y,rest:v}=_x(h),b=$9e(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=FM(),S=X1e({styleProps:y,theme:m,data:_Ue}),T={ref:p,style:LUe({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Ki(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":D1e(o)?void 0:o||void 0,size:d,...J1e(s),...v};return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(AI,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):_.jsx(g,{...T})]})});Z1e.displayName="@mantine/core/Box";const Ee=Z1e;function eve(e){return e}function je(e){const t=N.forwardRef(e);return t.extend=eve,t}function Fs(e){const t=N.forwardRef(e);return t.extend=eve,t}const FUe=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Dh(){return N.useContext(FUe)}function jUe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Z5(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const YS=typeof window<"u"&&window.requestAnimationFrame;function BUe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{SI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||jUe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}lm(()=>{typeof YS=="function"&&YS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),YS(()=>{const p=Z5(i);c({...f(p),height:p})})}:()=>{const p=Z5(i);c({...f(p),willChange:"height",height:p}),YS(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Z5(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:U1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const UUe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},tve=je((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ae("Collapse",UUe,e),c=Ls(),f=Wq(),h=(c.respectReducedMotion?f:!1)?0:i,p=BUe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(Ee,{...l,children:n}):null:_.jsx(Ee,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...Jq(o,c)},ref:t,...l}),children:n})});tve.displayName="@mantine/core/Collapse";const[zUe,Dc]=_a("ScrollArea.Root component was not found in tree");function rE(e,t){const n=A1(t);yb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const VUe=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Dc(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return rE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),rE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),HUe=N.forwardRef((e,t)=>{const n=Dc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(VUe,{...e,ref:t}):null}),qUe={scrollHideDelay:1e3,type:"hover"},nve=N.forwardRef((e,t)=>{const n=Ae("ScrollAreaRoot",qUe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,w]=N.useState(0),[E,S]=N.useState(!1),[T,A]=N.useState(!1),C=cs(t,I=>u(I));return _.jsx(zUe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(Ee,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});nve.displayName="@mantine/core/ScrollAreaRoot";function rve(e,t){const n=e/t;return Number.isNaN(n)?0:n}function jM(e){const t=rve(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ive(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function WUe(e,[t,n]){return Math.min(n,Math.max(t,e))}function pse(e,t,n="ltr"){const r=jM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=WUe(e,u);return ive([0,o],[0,a])(l)}function GUe(e,t,n,r="ltr"){const i=jM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return ive([u,l],f)(e)}function sve(e,t){return e>0&&e<t}function cO(e){return e?parseInt(e,10):0}function uv(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[YUe,ove]=_a("ScrollAreaScrollbar was not found in tree"),ave=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Dc(),[h,p]=N.useState(null),m=cs(t,A=>p(A)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=A1(l),E=A1(a),S=MM(c,10),T=A=>{if(g.current){const C=A.clientX-g.current.left,I=A.clientY-g.current.top;u({x:C,y:I})}};return N.useEffect(()=>{const A=C=>{const I=C.target;(h==null?void 0:h.contains(I))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),N.useEffect(E,[n,E]),rE(h,S),rE(d.content,S),_.jsx(YUe,{value:{scrollbar:h,hasThumb:r,onThumbChange:A1(i),onThumbPointerUp:A1(s),onThumbPositionChange:E,onThumbPointerDown:A1(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:uv(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:uv(e.onPointerMove,T),onPointerUp:uv(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),KUe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Dc(),[a,u]=N.useState(),l=N.useRef(null),c=cs(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(ave,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${jM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),sve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:cO(a.paddingLeft),paddingEnd:cO(a.paddingRight)}})}})}),XUe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Dc(),[a,u]=N.useState(),l=N.useRef(null),c=cs(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(ave,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${jM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),sve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:cO(a.paddingTop),paddingEnd:cO(a.paddingBottom)}})}})}),Zq=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Dh(),s=Dc(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=rve(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>GUe(h,a.current,u,p);return n==="horizontal"?_.jsx(KUe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=pse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(XUe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=pse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),uve=N.forwardRef((e,t)=>{const n=Dc(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=MM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return rE(n.viewport,u),rE(n.content,u),r||s?_.jsx(Zq,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),QUe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Dc(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(uve,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),JUe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Dc(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=MM(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(Zq,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:uv(e.onPointerEnter,()=>a("interacting")),onPointerLeave:uv(e.onPointerLeave,()=>a("idle"))}):null}),mse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Dc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(QUe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(JUe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(uve,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(Zq,{...r,ref:t}):null});function ZUe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const e7e=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Dc(),s=ove(),{onThumbPositionChange:o}=s,a=cs(t,c=>s.onThumbChange(c)),u=N.useRef(),l=MM(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=ZUe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:uv(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:uv(e.onPointerUp,s.onThumbPointerUp)})}),gse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ove();return n||i.hasThumb?_.jsx(e7e,{ref:t,...r}):null}),lve=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Dc(),s=cs(r,i.onViewportChange);return _.jsx(Ee,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});lve.displayName="@mantine/core/ScrollAreaViewport";var eW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const cve={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},t7e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),Kf=je((e,t)=>{const n=Ae("ScrollArea",cve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=N.useState(!1),E=vt({name:"ScrollArea",props:n,classes:eW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:t7e});return _.jsxs(nve,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(lve,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(mse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(gse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(mse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(gse,{...E("thumb")})}),_.jsx(HUe,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Kf.displayName="@mantine/core/ScrollArea";const tW=je((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Ae("ScrollAreaAutosize",cve,e);return _.jsx(Ee,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(Ee,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(Kf,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Kf.classes=eW;tW.displayName="@mantine/core/ScrollAreaAutosize";tW.classes=eW;Kf.Autosize=tW;var fve={root:"m_87cf2631"};const n7e={__staticSelector:"UnstyledButton"},Ns=Fs((e,t)=>{const n=Ae("UnstyledButton",n7e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=vt({name:s,props:n,classes:fve,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(Ee,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Ns.classes=fve;Ns.displayName="@mantine/core/UnstyledButton";var dve={root:"m_515a97f8"};const r7e={},nW=je((e,t)=>{const n=Ae("VisuallyHidden",r7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=vt({name:"VisuallyHidden",classes:dve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(Ee,{component:"span",ref:t,...c("root"),...l})});nW.classes=dve;nW.displayName="@mantine/core/VisuallyHidden";var hve={root:"m_1b7284a3"};const i7e={},s7e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:pi(t),"--paper-shadow":Vq(n)}}),BM=Fs((e,t)=>{const n=Ae("Paper",i7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=vt({name:"Paper",props:n,classes:hve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:s7e});return _.jsx(Ee,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});BM.classes=hve;BM.displayName="@mantine/core/Paper";function wx(e){return pve(e)?(e.nodeName||"").toLowerCase():"#document"}function $u(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fm(e){var t;return(t=(pve(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function pve(e){return e instanceof Node||e instanceof $u(e).Node}function Ei(e){return e instanceof Element||e instanceof $u(e).Element}function kl(e){return e instanceof HTMLElement||e instanceof $u(e).HTMLElement}function uU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $u(e).ShadowRoot}function CI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Ec(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function o7e(e){return["table","td","th"].includes(wx(e))}function rW(e){const t=iW(),n=Ec(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function a7e(e){let t=cm(e);for(;kl(t)&&!R0(t);){if(rW(t))return t;t=cm(t)}return null}function iW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function R0(e){return["html","body","#document"].includes(wx(e))}function Ec(e){return $u(e).getComputedStyle(e)}function UM(e){return Ei(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function cm(e){if(wx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||uU(e)&&e.host||Fm(e);return uU(t)?t.host:t}function mve(e){const t=cm(e);return R0(t)?e.ownerDocument?e.ownerDocument.body:e.body:kl(t)&&CI(t)?t:mve(t)}function Yp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=mve(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=$u(i);return s?t.concat(o,o.visualViewport||[],CI(i)?i:[],o.frameElement&&n?Yp(o.frameElement):[]):t.concat(i,Yp(i,[],n))}function yse(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function YC(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&uU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function gve(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function yve(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function u7e(e){return f7e()?!1:!vse()&&e.width===0&&e.height===0||vse()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function l7e(){return/apple/i.test(navigator.vendor)}function vse(){const e=/android/i;return e.test(gve())||e.test(yve())}function c7e(){return gve().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function f7e(){return yve().includes("jsdom/")}function lU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function d7e(e){return"nativeEvent"in e}function h7e(e){return e.matches("html,body")}function H1(e){return(e==null?void 0:e.ownerDocument)||document}function e8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function T_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const p7e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function m7e(e){return kl(e)&&e.matches(p7e)}const yl=Math.min,ia=Math.max,fO=Math.round,YR=Math.floor,N0=e=>({x:e,y:e}),g7e={left:"right",right:"left",bottom:"top",top:"bottom"},y7e={start:"end",end:"start"};function cU(e,t,n){return ia(e,yl(t,n))}function fm(e,t){return typeof e=="function"?e(t):e}function Ff(e){return e.split("-")[0]}function Ex(e){return e.split("-")[1]}function sW(e){return e==="x"?"y":"x"}function oW(e){return e==="y"?"height":"width"}function vb(e){return["top","bottom"].includes(Ff(e))?"y":"x"}function aW(e){return sW(vb(e))}function v7e(e,t,n){n===void 0&&(n=!1);const r=Ex(e),i=aW(e),s=oW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=dO(o)),[o,dO(o)]}function b7e(e){const t=dO(e);return[fU(e),t,fU(t)]}function fU(e){return e.replace(/start|end/g,t=>y7e[t])}function _7e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function w7e(e,t,n,r){const i=Ex(e);let s=_7e(Ff(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(fU)))),s}function dO(e){return e.replace(/left|right|bottom|top/g,t=>g7e[t])}function E7e(e){return{top:0,right:0,bottom:0,left:0,...e}}function uW(e){return typeof e!="number"?E7e(e):{top:e,right:e,bottom:e,left:e}}function iE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function bse(e,t,n){let{reference:r,floating:i}=e;const s=vb(t),o=aW(t),a=oW(o),u=Ff(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Ex(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const x7e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=bse(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=bse(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function lW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=fm(t,e),p=uW(h),g=a[d?f==="floating"?"reference":"floating":f],y=iE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=iE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const S7e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=fm(e,t)||{};if(l==null)return{};const f=uW(c),d={x:n,y:r},h=aW(i),p=oW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=T/2-m[p]/2-1,I=yl(f[y],C),R=yl(f[v],C),M=I,P=T-m[p]-R,O=T/2-m[p]/2+A,F=cU(M,O,P),L=!u.arrow&&Ex(i)!=null&&O!==F&&s.reference[p]/2-(O<M?I:R)-m[p]/2<0,B=L?O<M?O-M:O-P:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:O-F-B,...L&&{alignmentOffset:B}},reset:L}}}),T7e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=fm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Ff(i),v=Ff(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[dO(a)]:b7e(a));!d&&p!=="none"&&w.push(...w7e(a,m,p,b));const E=[a,...w],S=await lW(t,g),T=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const M=v7e(i,o,b);T.push(S[M[0]],S[M[1]])}if(A=[...A,{placement:i,overflows:T}],!T.every(M=>M<=0)){var C,I;const M=(((C=s.flip)==null?void 0:C.index)||0)+1,P=E[M];if(P)return{data:{index:M,overflows:A},reset:{placement:P}};let O=(I=A.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:I.placement;if(!O)switch(h){case"bestFit":{var R;const F=(R=A.map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:R[0];F&&(O=F);break}case"initialPlacement":O=a;break}if(i!==O)return{reset:{placement:O}}}return{}}}};function vve(e){const t=yl(...e.map(s=>s.left)),n=yl(...e.map(s=>s.top)),r=ia(...e.map(s=>s.right)),i=ia(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function A7e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>iE(vve(i)))}const C7e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=fm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=A7e(c),d=iE(vve(c)),h=uW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(vb(n)==="y"){const I=f[0],R=f[f.length-1],M=Ff(n)==="top",P=I.top,O=R.bottom,F=M?I.left:R.left,L=M?I.right:R.right,B=L-F,U=O-P;return{top:P,bottom:O,left:F,right:L,width:B,height:U,x:F,y:P}}const g=Ff(n)==="left",y=ia(...f.map(I=>I.right)),v=yl(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),w=b[0].top,E=b[b.length-1].bottom,S=v,T=y,A=T-S,C=E-w;return{top:w,bottom:E,left:S,right:T,width:A,height:C,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function I7e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ff(n),a=Ex(n),u=vb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=fm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const k7e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await I7e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},R7e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=fm(e,t),l={x:n,y:r},c=await lW(t,u),f=vb(Ff(i)),d=sW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=cU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=cU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},N7e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=fm(e,t),c={x:n,y:r},f=vb(i),d=sW(f);let h=c[d],p=c[f];const m=fm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Ff(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},P7e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=fm(e,t),u=await lW(t,a),l=Ff(n),c=Ex(n),f=vb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=yl(h-u[p],g),b=yl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=b;if(f?S=c||w?yl(b,y):y:E=c||w?yl(v,g):g,w&&!c){const A=ia(u.left,0),C=ia(u.right,0),I=ia(u.top,0),R=ia(u.bottom,0);f?S=d-2*(A!==0||C!==0?A+C:ia(u.left,u.right)):E=h-2*(I!==0||R!==0?I+R:ia(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function bve(e){const t=Ec(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=kl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=fO(n)!==s||fO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function cW(e){return Ei(e)?e:e.contextElement}function vw(e){const t=cW(e);if(!kl(t))return N0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=bve(t);let o=(s?fO(n.width):n.width)/r,a=(s?fO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const D7e=N0(0);function _ve(e){const t=$u(e);return!iW()||!t.visualViewport?D7e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function O7e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$u(e)?!1:t}function Iv(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=cW(e);let o=N0(1);t&&(r?Ei(r)&&(o=vw(r)):o=vw(e));const a=O7e(s,n,r)?_ve(s):N0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=$u(s),h=r&&Ei(r)?$u(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=vw(m),y=m.getBoundingClientRect(),v=Ec(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=$u(m),m=p.frameElement}}return iE({width:c,height:f,x:u,y:l})}const $7e=[":popover-open",":modal"];function fW(e){return $7e.some(t=>{try{return e.matches(t)}catch{return!1}})}function M7e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Fm(r),a=t?fW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=N0(1);const c=N0(0),f=kl(r);if((f||!f&&!s)&&((wx(r)!=="body"||CI(o))&&(u=UM(r)),kl(r))){const d=Iv(r);l=vw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function L7e(e){return Array.from(e.getClientRects())}function wve(e){return Iv(Fm(e)).left+UM(e).scrollLeft}function F7e(e){const t=Fm(e),n=UM(e),r=e.ownerDocument.body,i=ia(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ia(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+wve(e);const a=-n.scrollTop;return Ec(r).direction==="rtl"&&(o+=ia(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function j7e(e,t){const n=$u(e),r=Fm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=iW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function B7e(e,t){const n=Iv(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=kl(e)?vw(e):N0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function _se(e,t,n){let r;if(t==="viewport")r=j7e(e,n);else if(t==="document")r=F7e(Fm(e));else if(Ei(t))r=B7e(t,n);else{const i=_ve(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return iE(r)}function Eve(e,t){const n=cm(e);return n===t||!Ei(n)||R0(n)?!1:Ec(n).position==="fixed"||Eve(n,t)}function U7e(e,t){const n=t.get(e);if(n)return n;let r=Yp(e,[],!1).filter(a=>Ei(a)&&wx(a)!=="body"),i=null;const s=Ec(e).position==="fixed";let o=s?cm(e):e;for(;Ei(o)&&!R0(o);){const a=Ec(o),u=rW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||CI(o)&&!u&&Eve(e,o))?r=r.filter(c=>c!==o):i=a,o=cm(o)}return t.set(e,r),r}function z7e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?fW(t)?[]:U7e(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=_se(t,c,i);return l.top=ia(f.top,l.top),l.right=yl(f.right,l.right),l.bottom=yl(f.bottom,l.bottom),l.left=ia(f.left,l.left),l},_se(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function V7e(e){const{width:t,height:n}=bve(e);return{width:t,height:n}}function H7e(e,t,n){const r=kl(t),i=Fm(t),s=n==="fixed",o=Iv(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=N0(0);if(r||!r&&!s)if((wx(t)!=="body"||CI(i))&&(a=UM(t)),r){const f=Iv(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=wve(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function t8(e){return Ec(e).position==="static"}function wse(e,t){return!kl(e)||Ec(e).position==="fixed"?null:t?t(e):e.offsetParent}function xve(e,t){const n=$u(e);if(fW(e))return n;if(!kl(e)){let i=cm(e);for(;i&&!R0(i);){if(Ei(i)&&!t8(i))return i;i=cm(i)}return n}let r=wse(e,t);for(;r&&o7e(r)&&t8(r);)r=wse(r,t);return r&&R0(r)&&t8(r)&&!rW(r)?n:r||a7e(e)||n}const q7e=async function(e){const t=this.getOffsetParent||xve,n=this.getDimensions,r=await n(e.floating);return{reference:H7e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function W7e(e){return Ec(e).direction==="rtl"}const G7e={convertOffsetParentRelativeRectToViewportRelativeRect:M7e,getDocumentElement:Fm,getClippingRect:z7e,getOffsetParent:xve,getElementRects:q7e,getClientRects:L7e,getDimensions:V7e,getScale:vw,isElement:Ei,isRTL:W7e};function Y7e(e,t){let n=null,r;const i=Fm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=YR(c),p=YR(i.clientWidth-(l+f)),m=YR(i.clientHeight-(c+d)),g=YR(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ia(0,yl(1,u))||1};let b=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function K7e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=cW(e),c=i||s?[...l?Yp(l):[],...Yp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?Y7e(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Iv(e):null;u&&g();function g(){const y=Iv(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const X7e=k7e,Q7e=R7e,J7e=T7e,Z7e=P7e,Ese=S7e,eze=C7e,tze=N7e,nze=(e,t,n)=>{const r=new Map,i={platform:G7e,...n},s={...i.platform,_c:r};return x7e(e,t,{...i,platform:s})};var RP=typeof document<"u"?N.useLayoutEffect:N.useEffect;function hO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!hO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!hO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Sve(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function xse(e,t){const n=Sve(e);return Math.round(t*n)/n}function Sse(e){const t=N.useRef(e);return RP(()=>{t.current=e}),t}function rze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);hO(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),b=N.useCallback(B=>{B!==T.current&&(T.current=B,y(B))},[]),w=s||p,E=o||g,S=N.useRef(null),T=N.useRef(null),A=N.useRef(c),C=u!=null,I=Sse(u),R=Sse(i),M=N.useCallback(()=>{if(!S.current||!T.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),nze(S.current,T.current,B).then(U=>{const H={...U,isPositioned:!0};P.current&&!hO(A.current,H)&&(A.current=H,SI.flushSync(()=>{f(H)}))})},[d,t,n,R]);RP(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=N.useRef(!1);RP(()=>(P.current=!0,()=>{P.current=!1}),[]),RP(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if(I.current)return I.current(w,E,M);M()}},[w,E,M,I,C]);const O=N.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),F=N.useMemo(()=>({reference:w,floating:E}),[w,E]),L=N.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=xse(F.floating,c.x),H=xse(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...Sve(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:M,refs:O,elements:F,floatingStyles:L}),[c,M,O,F,L])}const ize=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Ese({element:r.current,padding:i}).fn(n):{}:r?Ese({element:r,padding:i}).fn(n):{}}}},Tve=(e,t)=>({...X7e(e),options:[e,t]}),dW=(e,t)=>({...Q7e(e),options:[e,t]}),Tse=(e,t)=>({...tze(e),options:[e,t]}),dU=(e,t)=>({...J7e(e),options:[e,t]}),sze=(e,t)=>({...Z7e(e),options:[e,t]}),hU=(e,t)=>({...eze(e),options:[e,t]}),Ave=(e,t)=>({...ize(e),options:[e,t]}),Cve={...$D},oze=Cve.useInsertionEffect,aze=oze||(e=>e());function Og(e){const t=N.useRef(()=>{});return aze(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Zd=typeof document<"u"?N.useLayoutEffect:N.useEffect;let Ase=!1,uze=0;const Cse=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+uze++;function lze(){const[e,t]=N.useState(()=>Ase?Cse():void 0);return Zd(()=>{e==null&&t(Cse())},[]),N.useEffect(()=>{Ase=!0},[]),e}const cze=Cve.useId,Ive=cze||lze;function fze(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const dze=N.createContext(null),hze=N.createContext(null),hW=()=>{var e;return((e=N.useContext(dze))==null?void 0:e.id)||null},pW=()=>N.useContext(hze);function mW(e){return"data-floating-ui-"+e}function Ise(e){const t=N.useRef(e);return Zd(()=>{t.current=e}),t}const kse=mW("safe-polygon");function NP(e,t,n){return n&&!lU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function pze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=pW(),m=hW(),g=Ise(c),y=Ise(l),v=N.useRef(),b=N.useRef(-1),w=N.useRef(),E=N.useRef(-1),S=N.useRef(!0),T=N.useRef(!1),A=N.useRef(()=>{}),C=N.useCallback(()=>{var P;const O=(P=i.current.openEvent)==null?void 0:P.type;return(O==null?void 0:O.includes("mouse"))&&O!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function P(O){let{open:F}=O;F||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function P(F){C()&&r(!1,F,"hover")}const O=H1(a).documentElement;return O.addEventListener("mouseleave",P),()=>{O.removeEventListener("mouseleave",P)}},[a,n,r,u,g,C]);const I=N.useCallback(function(P,O,F){O===void 0&&(O=!0),F===void 0&&(F="hover");const L=NP(y.current,"close",v.current);L&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,F),L)):O&&(clearTimeout(b.current),r(!1,P,F))},[y,r]),R=Og(()=>{A.current(),w.current=void 0}),M=Og(()=>{if(T.current){const P=H1(a).body;P.style.pointerEvents="",P.removeAttribute(kse),T.current=!1}});return N.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function O(B){if(clearTimeout(b.current),S.current=!1,f&&!lU(v.current)||d>0&&!NP(y.current,"open"))return;const U=NP(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(P())return;A.current();const U=H1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){M(),R(),I(B,!0,"safe-polygon")}});const D=w.current;U.addEventListener("mousemove",D),A.current=()=>{U.removeEventListener("mousemove",D)};return}(v.current==="touch"?!YC(a,B.relatedTarget):!0)&&I(B)}function L(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){M(),R(),I(B)}})(B))}if(Ei(o)){const B=o;return n&&B.addEventListener("mouseleave",L),a==null||a.addEventListener("mouseleave",L),h&&B.addEventListener("mousemove",O,{once:!0}),B.addEventListener("mouseenter",O),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",L),a==null||a.removeEventListener("mouseleave",L),h&&B.removeEventListener("mousemove",O),B.removeEventListener("mouseenter",O),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,I,R,M,r,n,p,y,g,i]),Zd(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&C()){const F=H1(a).body;if(F.setAttribute(kse,""),F.style.pointerEvents="none",T.current=!0,Ei(o)&&a){var O;const L=o,B=p==null||(O=p.nodesRef.current.find(U=>U.id===m))==null||(O=O.context)==null?void 0:O.elements.floating;return B&&(B.style.pointerEvents=""),L.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{L.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),Zd(()=>{n||(v.current=void 0,R(),M())},[n,R,M]),N.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(E.current),M()},[u,o,R,M]),N.useMemo(()=>{if(!u)return{};function P(O){v.current=O.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove(O){function F(){S.current||r(!0,O.nativeEvent,"hover")}f&&!lU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave(O){I(O.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const pU=()=>{},kve=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:pU,setState:pU,isInstantPhase:!1}),Rve=()=>N.useContext(kve);function mze(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Zd(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(kve.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function gze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Rve(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Zd(()=>{u&&(f({delay:{open:1,close:NP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Zd(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Zd(()=>{l===pU||!n||l(o)},[n,l,o]),a}function n8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const yze={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},vze={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Rse=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function bze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=pW(),v=Og(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=N.useRef(!1),E=N.useRef(!1),{escapeKey:S,outsidePress:T}=Rse(m),{escapeKey:A,outsidePress:C}=Rse(g),I=Og(O=>{var F;if(!n||!u||!l||O.key!=="Escape")return;const L=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?n8(y.nodesRef.current,L):[];if(!S&&(O.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var D;if((D=H.context)!=null&&D.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,d7e(O)?O.nativeEvent:O,"escape-key")}),R=Og(O=>{var F;const L=()=>{var B;I(O),(B=T_(O))==null||B.removeEventListener("keydown",L)};(F=T_(O))==null||F.addEventListener("keydown",L)}),M=Og(O=>{var F;const L=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||L||typeof b=="function"&&!b(O))return;const U=T_(O),H="["+mW("inert")+"]",D=H1(o).querySelectorAll(H);let z=Ei(U)?U:null;for(;z&&!R0(z);){const G=cm(z);if(R0(G)||!Ei(G))break;z=G}if(D.length&&Ei(U)&&!h7e(U)&&!YC(U,o)&&Array.from(D).every(G=>!YC(z,G)))return;if(kl(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&O.offsetX>U.clientWidth;if(ne&&Ec(U).direction==="rtl"&&(ce=O.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&O.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&n8(y.nodesRef.current,W).some(G=>{var ne;return e8(O,(ne=G.context)==null?void 0:ne.elements.floating)});if(e8(O,o)||e8(O,s)||j)return;const q=y?n8(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,O,"outside-press")}),P=Og(O=>{var F;const L=()=>{var B;M(O),(B=T_(O))==null||B.removeEventListener(f,L)};(F=T_(O))==null||F.addEventListener(f,L)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function O(B){r(!1,B,"ancestor-scroll")}const F=H1(o);l&&F.addEventListener("keydown",A?R:I,A),b&&F.addEventListener(f,C?P:M,C);let L=[];return p&&(Ei(s)&&(L=Yp(s)),Ei(o)&&(L=L.concat(Yp(o))),!Ei(i)&&i&&i.contextElement&&(L=L.concat(Yp(i.contextElement)))),L=L.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",O,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?R:I,A),b&&F.removeEventListener(f,C?P:M,C),L.forEach(B=>{B.removeEventListener("scroll",O)})}},[a,o,s,i,l,b,f,n,r,p,u,S,T,I,A,R,M,C,P]),N.useEffect(()=>{w.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:I,[yze[h]]:O=>{d&&r(!1,O.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[vze[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,I])}function _ze(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Ive(),s=N.useRef({}),[o]=N.useState(()=>fze()),a=hW()!=null,[u,l]=N.useState(r.reference),c=Og((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function gW(e){e===void 0&&(e={});const{nodeId:t}=e,n=_ze({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=pW();Zd(()=>{c&&(f.current=c)},[c]);const h=rze({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const w=Ei(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=N.useCallback(b=>{(Ei(b)||b===null)&&(f.current=b,o(b)),(Ei(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ei(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Zd(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function wze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=$u(o);function h(){!n&&kl(o)&&o===yse(H1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){u7e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=T_(d.nativeEvent);if(u&&Ei(h))try{if(l7e()&&c7e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!m7e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ei(h)&&h.hasAttribute(mW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=yse(o?o.ownerDocument:document);!h&&g===o||YC((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||YC(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Nse="active",Pse="selected";function r8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Nse]:o,[Pse]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Nse,Pse].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Eze(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>r8(s,e,"reference"),t),r=N.useCallback(s=>r8(s,e,"floating"),t),i=N.useCallback(s=>r8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const xze=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Sze(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=xze.get(o))!=null?n:o,u=Ive(),c=hW()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Nve(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Dse(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Ose(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Tze={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Aze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[Tze[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...Dse(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Dse(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Ose(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Ose(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const yW=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Dh();return s?_.jsx("div",{...l,ref:c,style:{...u,...Aze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});yW.displayName="@mantine/core/FloatingArrow";const[Cze,Pve]=_a("Popover component was not found in the tree");function zM({children:e,active:t=!0,refProp:n="ref"}){const r=p9e(t),i=cs(r,e==null?void 0:e.ref);return vy(e)?N.cloneElement(e,{[n]:i}):e}function Dve(e){return _.jsx(nW,{tabIndex:-1,"data-autofocus":!0,...e})}zM.displayName="@mantine/core/FocusTrap";Dve.displayName="@mantine/core/FocusTrapInitialFocus";zM.InitialFocus=Dve;function Ize(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const kze={},Ove=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ae("Portal",kze,e),[s,o]=N.useState(!1),a=N.useRef(null);return yb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Ize(i),qq(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:SI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});Ove.displayName="@mantine/core/Portal";function II({withinPortal:e=!0,children:t,...n}){return e?_.jsx(Ove,{...n,children:t}):_.jsx(_.Fragment,{children:t})}II.displayName="@mantine/core/OptionalPortal";const KS=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),KR={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...KS("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...KS("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...KS("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...KS("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...KS("top"),common:{transformOrigin:"top right"}}},$se={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Rze({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in KR?{transitionProperty:KR[e].transitionProperty,...i,...KR[e].common,...KR[e][$se[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[$se[t]]}}function Nze({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Ls(),l=Wq(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{fBe.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return lm(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function jm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=Nze({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(Rze({transition:t,duration:f,state:d,timingFunction:h}))})}jm.displayName="@mantine/core/Transition";var $ve={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Pze={},vW=je((e,t)=>{var g,y,v,b;const n=Ae("PopoverDropdown",Pze,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Pve(),h=M1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=cs(t,d.floating);return d.disabled?null:_.jsx(II,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(jm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(zM,{active:d.trapFocus,children:_.jsxs(Ee,{...p,...f,variant:u,ref:m,onKeyDownCapture:t9e(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(yW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});vW.classes=$ve;vW.displayName="@mantine/core/PopoverDropdown";const Dze={refProp:"ref",popupType:"dialog"},Mve=je((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ae("PopoverTarget",Dze,e);if(!vy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Pve(),u=cs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Ki(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Mve.displayName="@mantine/core/PopoverTarget";function Lve({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return K7e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),lm(()=>{t.update()},r),lm(()=>{s(o=>o+1)},[e])}function Oze(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function $ze(e,t){const n=Oze(e.middlewares),r=[Tve(e.offset)];return n.shift&&r.push(dW(typeof n.shift=="boolean"?{limiter:Tse(),padding:5}:{limiter:Tse(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?dU():dU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?hU():hU(n.inline)),r.push(Ave({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(sze({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function Mze(e){const[t,n]=Do({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=gW({strategy:e.strategy,placement:e.position,middleware:$ze(e,()=>s)});return Lve({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),lm(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),lm(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const Lze={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Pc("popover"),__staticSelector:"Popover",width:"max-content"},Fze=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:pi(t),"--popover-shadow":Vq(n)}});function Jr(e){var be,ke,ze,ct,Dt,We;const t=Ae("Popover",Lze,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:T,trapFocus:A,onClose:C,onOpen:I,onChange:R,zIndex:M,radius:P,shadow:O,id:F,defaultOpened:L,__staticSelector:B,withRoles:U,disabled:H,returnFocus:D,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=vt({name:B,props:t,classes:$ve,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:Fze}),ce=N.useRef(null),[de,he]=N.useState(null),[ye,Ie]=N.useState(null),{dir:ve}=Dh(),Ke=Zu(F),Ue=Mze({middlewares:c,width:l,position:Nve(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:R,onOpen:I,onClose:C,strategy:q});i9e(()=>b&&Ue.onClose(),T,[de,ye]);const gt=N.useCallback(me=>{he(me),Ue.floating.refs.setReference(me)},[Ue.floating.refs.setReference]),it=N.useCallback(me=>{Ie(me),Ue.floating.refs.setFloating(me)},[Ue.floating.refs.setFloating]);return _.jsx(Cze,{value:{returnFocus:D,disabled:H,controlled:Ue.controlled,reference:gt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(be=Ue.floating)==null?void 0:be.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Dt=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Dt.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:M,radius:P,shadow:O,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}Jr.Target=Mve;Jr.Dropdown=vW;Jr.displayName="@mantine/core/Popover";Jr.extend=e=>e;var _f={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const jze=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Ki(_f.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:_f.bar}),_.jsx("span",{className:_f.bar}),_.jsx("span",{className:_f.bar})]})),Bze=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ee,{component:"span",className:Ki(_f.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:_f.dot}),_.jsx("span",{className:_f.dot}),_.jsx("span",{className:_f.dot})]})),Uze=N.forwardRef(({className:e,...t},n)=>_.jsx(Ee,{component:"span",className:Ki(_f.ovalLoader,e),...t,ref:n})),Fve={bars:jze,oval:Uze,dots:Bze},zze={loaders:Fve,type:"oval"},Vze=(e,{size:t,color:n})=>({root:{"--loader-size":vn(t,"loader-size"),"--loader-color":n?ti(n,e):void 0}}),Bm=je((e,t)=>{const n=Ae("Loader",zze,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=vt({name:"Loader",props:n,classes:_f,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:Vze});return p?_.jsx(Ee,{...g("root"),ref:t,...m,children:p}):_.jsx(Ee,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Bm.defaultLoaders=Fve;Bm.classes=_f;Bm.displayName="@mantine/core/Loader";var VM={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Mse={orientation:"horizontal"},Hze=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),bW=je((e,t)=>{const n=Ae("ActionIconGroup",Mse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ActionIconGroup",Mse,e),p=vt({name:"ActionIconGroup",props:n,classes:VM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Hze,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});bW.classes=VM;bW.displayName="@mantine/core/ActionIconGroup";const qze={},Wze=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":vn(t,"ai-size"),"--ai-radius":n===void 0?void 0:pi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},P0=Fs((e,t)=>{const n=Ae("ActionIcon",qze,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...S}=n,T=vt({name:["ActionIcon",p],props:n,className:r,style:u,classes:VM,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:Wze});return _.jsxs(Ns,{...T("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(jm,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(Ee,{component:"span",...T("loader",{style:A}),"aria-hidden":!0,children:_.jsx(Bm,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(Ee,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});P0.classes=VM;P0.displayName="@mantine/core/ActionIcon";P0.Group=bW;const jve=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));jve.displayName="@mantine/core/CloseIcon";var Bve={root:"m_86a44da5","root--subtle":"m_220c80f2"};const Gze={variant:"subtle"},Yze=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":vn(t,"cb-size"),"--cb-radius":n===void 0?void 0:pi(n),"--cb-icon-size":Te(r)}}),wy=Fs((e,t)=>{const n=Ae("CloseButton",Gze,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=vt({name:"CloseButton",props:n,className:a,style:l,classes:Bve,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:Yze});return _.jsxs(Ns,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(jve,{}),i]})});wy.classes=Bve;wy.displayName="@mantine/core/CloseButton";function Kze(e){return N.Children.toArray(e).filter(Boolean)}var Uve={root:"m_4081bf90"};const Xze={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},Qze=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Il(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),$s=je((e,t)=>{const n=Ae("Group",Xze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=Kze(u),E=w.length,S=Il(l??"md"),A={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},C=vt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:Uve,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:Qze});return _.jsx(Ee,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});$s.classes=Uve;$s.displayName="@mantine/core/Group";var zve={root:"m_9814e45f"};const Jze={zIndex:Pc("modal")},Zze=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&wd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:pi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),KC=Fs((e,t)=>{const n=Ae("Overlay",Jze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=vt({name:"Overlay",props:n,classes:zve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zze});return _.jsx(Ee,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});KC.classes=zve;KC.displayName="@mantine/core/Overlay";const[eVe,Um]=_a("ModalBase component was not found in tree");function tVe({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=Wq()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function nVe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Zu(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=tVe({opened:n,transitionDuration:d});return B1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),M1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Vve=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:S,bodyMounted:T,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:I}=nVe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(II,{...c,withinPortal:l,children:_.jsx(eVe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:C,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx($M,{enabled:A&&f,...v,children:_.jsx(Ee,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Pc("modal")).toString(),"--mb-shadow":Vq(p),"--mb-padding":Il(m)},children:d})})})})});function rVe(){const e=Um();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var sE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const _W=N.forwardRef(({className:e,...t},n)=>{const r=rVe(),i=Um();return _.jsx(Ee,{ref:n,...t,id:r,className:Ki({[sE.body]:!i.unstyled},e)})});_W.displayName="@mantine/core/ModalBaseBody";const wW=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Um();return _.jsx(wy,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ki({[sE.close]:!i.unstyled},e),unstyled:i.unstyled})});wW.displayName="@mantine/core/ModalBaseCloseButton";const Hve=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Um();return _.jsx(jm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Ki({[sE.inner]:!a.unstyled},n.className),children:_.jsx(zM,{active:a.opened&&a.trapFocus,children:_.jsx(BM,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ki({[sE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),EW=N.forwardRef(({className:e,...t},n)=>{const r=Um();return _.jsx(Ee,{component:"header",ref:n,className:Ki({[sE.header]:!r.unstyled},e),...t})});EW.displayName="@mantine/core/ModalBaseHeader";const iVe={duration:200,timingFunction:"ease",transition:"fade"};function sVe(e){const t=Um();return{...iVe,...t.transitionProps,...e}}const xW=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Um(),o=sVe(t);return _.jsx(jm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(KC,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});xW.displayName="@mantine/core/ModalBaseOverlay";function oVe(){const e=Um();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const SW=N.forwardRef(({className:e,...t},n)=>{const r=oVe(),i=Um();return _.jsx(Ee,{component:"h2",ref:n,className:Ki({[sE.title]:!i.unstyled},e),...t,id:r})});SW.displayName="@mantine/core/ModalBaseTitle";function qve({children:e}){return _.jsx(_.Fragment,{children:e})}const[aVe,xx]=vx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Oc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Lse={},uVe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`}}),HM=je((e,t)=>{const n=Ae("InputDescription",Lse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ae("InputDescription",Lse,n),p=xx(),m=vt({name:["InputWrapper",c],props:n,classes:Oc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:uVe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});HM.classes=Oc;HM.displayName="@mantine/core/InputDescription";const lVe={},cVe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`}}),qM=je((e,t)=>{const n=Ae("InputError",lVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=vt({name:["InputWrapper",c],props:n,classes:Oc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:cVe}),m=xx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(Ee,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});qM.classes=Oc;qM.displayName="@mantine/core/InputError";const Fse={labelElement:"label"},fVe=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0}}),WM=je((e,t)=>{const n=Ae("InputLabel",Fse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Ae("InputLabel",Fse,n),b=vt({name:["InputWrapper",m],props:n,classes:Oc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:fVe}),w=xx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(Ee,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});WM.classes=Oc;WM.displayName="@mantine/core/InputLabel";const jse={},TW=je((e,t)=>{const n=Ae("InputPlaceholder",jse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ae("InputPlaceholder",jse,n),p=vt({name:["InputPlaceholder",l],props:n,classes:Oc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(Ee,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});TW.classes=Oc;TW.displayName="@mantine/core/InputPlaceholder";function dVe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const hVe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},pVe=(e,{size:t})=>({label:{"--input-label-size":oo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${oo(t)} - ${Te(2)})`}}),AW=je((e,t)=>{const n=Ae("InputWrapper",hVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:S,id:T,required:A,__stylesApiProps:C,mod:I,...R}=n,M=vt({name:["InputWrapper",f],props:C||n,classes:Oc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pVe}),P={size:l,variant:c,__staticSelector:f},O=Zu(T),F=typeof S=="boolean"?S:A,L=(b==null?void 0:b.id)||`${O}-error`,B=(v==null?void 0:v.id)||`${O}-description`,U=O,H=!!m&&typeof m!="boolean",D=!!g,z=`${H?L:""} ${D?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${O}-label`,q=p&&_.jsx(WM,{labelElement:w,id:j,htmlFor:U,required:F,...P,...y,children:p},"label"),G=D&&_.jsx(HM,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(N.Fragment,{children:d(E)},"input"),ce=H&&N.createElement(qM,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||L},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(aVe,{value:{getStyles:M,describedBy:W,inputId:U,labelId:j,...dVe(h,{hasDescription:D,hasError:H})},children:_.jsx(Ee,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...M("root"),...R,children:de})})});AW.classes=Oc;AW.displayName="@mantine/core/InputWrapper";const mVe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},gVe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":vn(t.size,"input-height"),"--input-fz":oo(t.size),"--input-radius":t.radius===void 0?void 0:pi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?vn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Pi=Fs((e,t)=>{const n=Ae("Input",mVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:A,pointer:C,multiline:I,radius:R,id:M,withAria:P,withErrorStyles:O,mod:F,inputSize:L,...B}=n,{styleProps:U,rest:H}=_x(B),D=xx(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=vt({name:["Input",l],props:c||n,classes:Oc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:A,varsResolver:gVe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||M}:{};return _.jsxs(Ee,{...W("wrapper"),...U,...d,mod:[{error:!!h&&O,pointer:C,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:T,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(Ee,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&O},variant:T,__size:L,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});Pi.classes=Oc;Pi.Wrapper=AW;Pi.Label=WM;Pi.Error=qM;Pi.Description=HM;Pi.Placeholder=TW;Pi.displayName="@mantine/core/Input";function Wve(e,t,n){const r=Ae(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,vars:C,mod:I,...R}=r,{styleProps:M,rest:P}=_x(R),O={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,id:v,mod:I,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...O,...M},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const yVe={__staticSelector:"InputBase",withAria:!0},$c=Fs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Wve("InputBase",yVe,e);return _.jsx(Pi.Wrapper,{...r,children:_.jsx(Pi,{...n,...i,ref:t})})});$c.classes={...Pi.classes,...Pi.Wrapper.classes};$c.displayName="@mantine/core/InputBase";const vVe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Gve={root:"m_8bffd616"};const bVe={},Zt=Fs((e,t)=>{const n=Ae("Flex",bVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=vt({name:"Flex",classes:Gve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Ls(),b=FM(),w=X1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:vVe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(AI,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(Ee,{ref:t,...y("root",{className:b,style:yx(w.inlineStyles)}),...g})]})});Zt.classes=Gve;Zt.displayName="@mantine/core/Flex";function _Ve(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function wVe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{_Ve(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),x9e(()=>{V1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),S9e(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Yve={root:"m_96b553a6"};const EVe={},xVe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),CW=je((e,t)=>{const n=Ae("FloatingIndicator",EVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=vt({name:"FloatingIndicator",classes:Yve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xVe}),g=N.useRef(null),{initialized:y,hidden:v}=wVe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=cs(t,g);return!l||!c?null:_.jsx(Ee,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});CW.displayName="@mantine/core/FloatingIndicator";CW.classes=Yve;function pO({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}pO.displayName="@mantine/core/AccordionChevron";var Kve={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const SVe={},TVe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:pi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},IW=je((e,t)=>{const n=Ae("Alert",SVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=vt({name:"Alert",classes:Kve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TVe}),S=Zu(h),T=f&&`${S}-title`||void 0,A=`${S}-body`;return _.jsx(Ee,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":T,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:T,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(wy,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});IW.classes=Kve;IW.displayName="@mantine/core/Alert";var Xve={root:"m_b6d8b162"};function AVe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const CVe={inherit:!1},IVe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":oo(i),"--text-lh":$1e(i),"--text-gradient":t==="gradient"?sU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?ti(s,e):void 0}}),et=Fs((e,t)=>{const n=Ae("Text",CVe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=vt({name:["Text",l],props:n,classes:Xve,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:IVe});return _.jsx(Ee,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":AVe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});et.classes=Xve;et.displayName="@mantine/core/Text";var Qve={root:"m_849cf0da"};const kVe={underline:"hover"},Sx=Fs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ae("Anchor",kVe,e);return _.jsx(et,{component:"a",ref:t,className:Ki({[Qve.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Sx.classes=Qve;Sx.displayName="@mantine/core/Anchor";const[RVe,Tx]=_a("AppShell was not found in tree");var Ey={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const NVe={},kW=je((e,t)=>{const n=Ae("AppShellAside",NVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});kW.classes=Ey;kW.displayName="@mantine/core/AppShellAside";const PVe={},RW=je((e,t)=>{var p;const n=Ae("AppShellFooter",PVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ki({[$M.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});RW.classes=Ey;RW.displayName="@mantine/core/AppShellFooter";const DVe={},NW=je((e,t)=>{var p;const n=Ae("AppShellHeader",DVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ki({[$M.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});NW.classes=Ey;NW.displayName="@mantine/core/AppShellHeader";const OVe={},PW=je((e,t)=>{const n=Ae("AppShellMain",OVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Tx();return _.jsx(Ee,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});PW.classes=Ey;PW.displayName="@mantine/core/AppShellMain";function kI(e){return typeof e=="object"?e.base:e}function RI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function NI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function $Ve({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),RI(s)){const f=Te(kI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(NI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Hq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function MVe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(RI(r)){const o=Te(kI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}NI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function LVe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(RI(r)){const o=Te(kI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}NI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function FVe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),RI(s)){const f=Te(kI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(NI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Hq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function i8(e){return Number(e)===0?"0px":Il(e)}function jVe({padding:e,baseStyles:t,minMediaStyles:n}){RI(e)&&(t["--app-shell-padding"]=i8(kI(e))),NI(e)&&(e.base&&(t["--app-shell-padding"]=i8(e.base)),Ni(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=i8(e[r]))}))}function BVe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};FVe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),$Ve({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),LVe({baseStyles:u,minMediaStyles:o,header:t}),MVe({baseStyles:u,minMediaStyles:o,footer:n}),jVe({baseStyles:u,minMediaStyles:o,padding:i});const l=uO(Ni(o),s).map(d=>({query:`(min-width: ${oO(d.px)})`,styles:o[d.value]})),c=uO(Ni(a),s).map(d=>({query:`(max-width: ${oO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function UVe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ls(),o=by(),{media:a,baseStyles:u}=BVe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(AI,{media:a,styles:u,selector:o.cssVariablesSelector})}const zVe={},DW=je((e,t)=>{const n=Ae("AppShellNavbar",zVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Tx();return h.disabled?null:_.jsx(Ee,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});DW.classes=Ey;DW.displayName="@mantine/core/AppShellNavbar";const VVe={},OW=Fs((e,t)=>{const n=Ae("AppShellSection",VVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Tx();return _.jsx(Ee,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});OW.classes=Ey;OW.displayName="@mantine/core/AppShellSection";function HVe({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return B1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),yb(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const qVe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Pc("app")},WVe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),di=je((e,t)=>{const n=Ae("AppShell",qVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...S}=n,T=vt({name:"AppShell",classes:Ey,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WVe}),A=HVe({disabled:y,transitionDuration:d});return _.jsxs(RVe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(UVe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(Ee,{ref:t,...T("root"),mod:[{resizing:A,layout:g,disabled:y},E],...S})]})});di.classes=Ey;di.displayName="@mantine/core/AppShell";di.Navbar=DW;di.Header=NW;di.Main=PW;di.Aside=kW;di.Footer=RW;di.Section=OW;function Jve(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Jve(t))}:e}function Zve(e){return e?e.map(t=>Jve(t)):[]}function $W(e){return e.reduce((t,n)=>"group"in n?{...t,...$W(n.items)}:(t[n.value]=n,t),{})}var zu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const GVe={error:null},YVe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":vn(t,"combobox-chevron-size")}}),MW=je((e,t)=>{const n=Ae("ComboboxChevron",GVe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=vt({name:"ComboboxChevron",classes:zu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:YVe,rootSelector:"chevron"});return _.jsx(Ee,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});MW.classes=zu;MW.displayName="@mantine/core/ComboboxChevron";const[KVe,Mc]=_a("Combobox component was not found in tree"),ebe=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(wy,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));ebe.displayName="@mantine/core/ComboboxClearButton";const XVe={},LW=je((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ae("ComboboxDropdown",XVe,e),u=Mc();return _.jsx(Jr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});LW.classes=zu;LW.displayName="@mantine/core/ComboboxDropdown";const QVe={refProp:"ref"},tbe=je((e,t)=>{const{children:n,refProp:r}=Ae("ComboboxDropdownTarget",QVe,e);if(Mc(),!vy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Jr.Target,{ref:t,refProp:r,children:n})});tbe.displayName="@mantine/core/ComboboxDropdownTarget";const JVe={},FW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxEmpty",JVe,e),u=Mc();return _.jsx(Ee,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});FW.classes=zu;FW.displayName="@mantine/core/ComboboxEmpty";function jW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Mc(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const ZVe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},nbe=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxEventsTarget",ZVe,e);if(!vy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Mc(),f=jW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:cs(t,c.store.targetRef,n==null?void 0:n.ref)})});nbe.displayName="@mantine/core/ComboboxEventsTarget";const eHe={},BW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxFooter",eHe,e),u=Mc();return _.jsx(Ee,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});BW.classes=zu;BW.displayName="@mantine/core/ComboboxFooter";const tHe={},UW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ae("ComboboxGroup",tHe,e),c=Mc();return _.jsxs(Ee,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});UW.classes=zu;UW.displayName="@mantine/core/ComboboxGroup";const nHe={},zW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ComboboxHeader",nHe,e),u=Mc();return _.jsx(Ee,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});zW.classes=zu;zW.displayName="@mantine/core/ComboboxHeader";function rbe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}rbe.displayName="@mantine/core/ComboboxHiddenInput";const rHe={},VW=je((e,t)=>{const n=Ae("ComboboxOption",rHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Mc(),v=N.useId(),b=l||v;return _.jsx(Ee,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});VW.classes=zu;VW.displayName="@mantine/core/ComboboxOption";const iHe={},HW=je((e,t)=>{const n=Ae("ComboboxOptions",iHe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Mc(),d=Zu(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(Ee,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});HW.classes=zu;HW.displayName="@mantine/core/ComboboxOptions";const sHe={withAriaAttributes:!0,withKeyboardNavigation:!0},qW=je((e,t)=>{const n=Ae("ComboboxSearch",sHe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Mc(),h=d.getStyles("search"),p=jW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(Pi,{ref:cs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});qW.classes=zu;qW.displayName="@mantine/core/ComboboxSearch";const oHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ibe=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ae("ComboboxTarget",oHe,e);if(!vy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Mc(),f=jW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return _.jsx(Jr.Target,{ref:cs(t,c.store.targetRef),children:d})});ibe.displayName="@mantine/core/ComboboxTarget";function aHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function uHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function lHe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function WW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Do({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=N.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=N.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),b=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=N.useCallback(L=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=L>=U.length?0:L<0?U.length-1:L;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),E=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===L);return w(U)}return w(0)},[w]),S=N.useCallback(()=>w(uHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),T=N.useCallback(()=>w(aHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=N.useCallback(()=>w(lHe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=N.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var D;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${L}`));c.current=H,B!=null&&B.scrollIntoView&&((D=U[H])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=N.useCallback(()=>{c.current=-1,b()},[b]),R=N.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),M=N.useCallback(L=>{l.current=L},[]),P=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),O=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:C,listId:l.current,setListId:M,clickSelectedOption:R,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:O}}const cHe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},fHe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":oo(t),"--combobox-option-padding":vn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":oo(t),"--combobox-option-padding":vn(t,"combobox-option-padding")}});function Kn(e){const t=Ae("Combobox",cHe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=WW(),y=o||g,v=vt({name:h||"Combobox",classes:zu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:fHe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(KVe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Jr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const dHe=e=>e;Kn.extend=dHe;Kn.classes=zu;Kn.displayName="@mantine/core/Combobox";Kn.Target=ibe;Kn.Dropdown=LW;Kn.Options=HW;Kn.Option=VW;Kn.Search=qW;Kn.Empty=FW;Kn.Chevron=MW;Kn.Footer=BW;Kn.Header=zW;Kn.EventsTarget=nbe;Kn.DropdownTarget=tbe;Kn.Group=UW;Kn.ClearButton=ebe;Kn.HiddenInput=rbe;var sbe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const hHe=sbe,GW=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const S=vt({name:e,props:t,className:n,style:y,classes:sbe,classNames:r,styles:i,unstyled:s});return _.jsx(Ee,{...S("root"),ref:E,__vars:{"--label-fz":oo(d),"--label-lh":vn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(Ee,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,_.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(Ee,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(Pi.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(Pi.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});GW.displayName="@mantine/core/InlineInput";const obe=N.createContext(null),pHe=obe.Provider,abe=()=>N.useContext(obe),[mHe,gHe]=vx();var ube={card:"m_26775b0a"};const yHe={withBorder:!0},vHe=(e,{radius:t})=>({card:{"--card-radius":pi(t)}}),YW=je((e,t)=>{const n=Ae("CheckboxCard",yHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=vt({name:"CheckboxCard",classes:ube,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vHe,rootSelector:"card"}),g=abe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(mHe,{value:{checked:y},children:_.jsx(Ns,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});YW.displayName="@mantine/core/CheckboxCard";YW.classes=ube;function lbe({children:e,role:t}){const n=xx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const bHe={},KW=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ae("CheckboxGroup",bHe,e),[c,f]=Do({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(pHe,{value:{value:c,onChange:d,size:s},children:_.jsx(Pi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(lbe,{role:"group",children:a})})})});KW.classes=Pi.Wrapper.classes;KW.displayName="@mantine/core/CheckboxGroup";function cbe({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function fbe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(cbe,{...t})}var dbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const _He={icon:fbe},wHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":vn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:pi(t),"--checkbox-color":s==="outline"?u:ti(n,e),"--checkbox-icon-color":i?ti(i,e):bx(o,e)?_y({color:n,theme:e,autoContrast:o}):void 0}}},XW=je((e,t)=>{const n=Ae("CheckboxIndicator",_He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=vt({name:"CheckboxIndicator",classes:dbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wHe,rootSelector:"indicator"}),S=gHe(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return _.jsx(Ee,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});XW.displayName="@mantine/core/CheckboxIndicator";XW.classes=dbe;var hbe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const EHe={labelPosition:"right",icon:fbe},xHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":vn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:pi(t),"--checkbox-color":s==="outline"?u:ti(n,e),"--checkbox-icon-color":i?ti(i,e):bx(o,e)?_y({color:n,theme:e,autoContrast:o}):void 0}}},dm=je((e,t)=>{const n=Ae("Checkbox",EHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:S,icon:T,rootRef:A,iconColor:C,onChange:I,autoContrast:R,mod:M,...P}=n,O=abe(),F=d||(O==null?void 0:O.size),L=T,B=vt({name:"Checkbox",props:n,classes:hbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xHe}),{styleProps:U,rest:H}=_x(P),D=Zu(f),z=O?{checked:O.value.includes(H.value),onChange:W=>{O.onChange(W),I==null||I(W)}}:{};return _.jsx(GW,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:A,mod:M,...U,...p,children:_.jsxs(Ee,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(Ee,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:I,...H,...z,type:"checkbox"}),_.jsx(L,{indeterminate:S,...B("icon")})]})})});dm.classes={...hbe,...hHe};dm.displayName="@mantine/core/Checkbox";dm.Group=KW;dm.Indicator=XW;dm.Card=YW;function oE(e){return"group"in e}function pbe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;oE(o)&&i.push({group:o.group,items:pbe({options:o.items,search:t,limit:n-i.length})}),oE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function SHe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function mbe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(oE(n))mbe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function THe(e,t){return Array.isArray(e)?e.includes(t):e===t}function gbe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!oE(e)){const a=THe(n,e.value),u=t&&a&&_.jsx(cbe,{className:zu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Ki({[zu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(gbe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Kn.Group,{label:e.group,children:o})}function ybe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){mbe(e);const b=typeof i=="string"?(r||pbe)({options:e,search:u?i:"",limit:s??1/0}):e,w=SHe(b),E=b.map(S=>_.jsx(gbe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},oE(S)?S.group:S.value));return _.jsx(Kn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(Kf.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Kn.Empty,{children:d})]})})}var vbe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const AHe={},CHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":vn(s,"badge-height"),"--badge-padding-x":vn(s,"badge-padding-x"),"--badge-fz":vn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:pi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?ti(n,e):void 0}}},yc=Fs((e,t)=>{const n=Ae("Badge",AHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=vt({name:"Badge",props:n,classes:vbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CHe});return _.jsxs(Ee,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});yc.classes=vbe;yc.displayName="@mantine/core/Badge";var bbe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const IHe={},kHe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?ti(t,e):void 0,"--burger-size":vn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),QW=je((e,t)=>{const n=Ae("Burger",IHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=vt({name:"Burger",classes:bbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kHe});return _.jsxs(Ns,{...p("root"),ref:t,...h,children:[_.jsx(Ee,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});QW.classes=bbe;QW.displayName="@mantine/core/Burger";var GM={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Bse={orientation:"horizontal"},RHe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),JW=je((e,t)=>{const n=Ae("ButtonGroup",Bse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ae("ButtonGroup",Bse,e),p=vt({name:"ButtonGroup",props:n,classes:GM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:RHe,rootSelector:"group"});return _.jsx(Ee,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});JW.classes=GM;JW.displayName="@mantine/core/ButtonGroup";const NHe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},PHe={},DHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":vn(s,"button-height"),"--button-padding-x":vn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?oo(s.replace("compact-","")):oo(s),"--button-radius":t===void 0?void 0:pi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Nn=Fs((e,t)=>{const n=Ae("Button",PHe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:S,...T}=n,A=vt({name:"Button",props:n,classes:GM,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:DHe}),C=!!l,I=!!c;return _.jsxs(Ns,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":I},S],...T,children:[_.jsx(jm,{mounted:!!p,transition:NHe,duration:150,children:R=>_.jsx(Ee,{component:"span",...A("loader",{style:R}),"aria-hidden":!0,children:_.jsx(Bm,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(Ee,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(Ee,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(Ee,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});Nn.classes=GM;Nn.displayName="@mantine/core/Button";Nn.Group=JW;const[OHe,$He]=_a("Card component was not found in tree");var ZW={root:"m_e615b15f",section:"m_599a2148"};const MHe={},YM=Fs((e,t)=>{const n=Ae("CardSection",MHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=$He();return _.jsx(Ee,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});YM.classes=ZW;YM.displayName="@mantine/core/CardSection";const LHe={},FHe=(e,{padding:t})=>({root:{"--card-padding":Il(t)}}),xy=Fs((e,t)=>{const n=Ae("Card",LHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=vt({name:"Card",props:n,classes:ZW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FHe}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===YM?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(OHe,{value:{getStyles:d},children:_.jsx(BM,{ref:t,unstyled:a,...d("root"),...f,children:p})})});xy.classes=ZW;xy.displayName="@mantine/core/Card";xy.Section=YM;var _be={root:"m_4451eb3a"};const jHe={},hm=Fs((e,t)=>{const n=Ae("Center",jHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=vt({name:"Center",props:n,classes:_be,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(Ee,{ref:t,mod:[{inline:l},c],...d("root"),...f})});hm.classes=_be;hm.displayName="@mantine/core/Center";var wbe={root:"m_7485cace"};const BHe={},UHe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:vn(t,"container-size")}}),Oh=je((e,t)=>{const n=Ae("Container",BHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=vt({name:"Container",classes:wbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UHe});return _.jsx(Ee,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Oh.classes=wbe;Oh.displayName="@mantine/core/Container";var Ebe={root:"m_3eebeb36",label:"m_9e365f20"};const zHe={orientation:"horizontal"},VHe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?ti(t,e):void 0,"--divider-border-style":n,"--divider-size":vn(r,"divider-size")}}),eG=je((e,t)=>{const n=Ae("Divider",zHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=vt({name:"Divider",classes:Ebe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VHe});return _.jsx(Ee,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(Ee,{component:"span",mod:{position:d},...m("label"),children:f})})});eG.classes=Ebe;eG.displayName="@mantine/core/Divider";const[HHe,Ax]=_a("Drawer component was not found in tree");var zm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const qHe={},KM=je((e,t)=>{const n=Ae("DrawerBody",qHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(_W,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});KM.classes=zm;KM.displayName="@mantine/core/DrawerBody";const WHe={},XM=je((e,t)=>{const n=Ae("DrawerCloseButton",WHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(wW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});XM.classes=zm;XM.displayName="@mantine/core/DrawerCloseButton";const GHe={},QM=je((e,t)=>{const n=Ae("DrawerContent",GHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Ax(),d=f.scrollAreaComponent||qve;return _.jsx(Hve,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});QM.classes=zm;QM.displayName="@mantine/core/DrawerContent";const YHe={},JM=je((e,t)=>{const n=Ae("DrawerHeader",YHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(EW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});JM.classes=zm;JM.displayName="@mantine/core/DrawerHeader";const KHe={},ZM=je((e,t)=>{const n=Ae("DrawerOverlay",KHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(xW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});ZM.classes=zm;ZM.displayName="@mantine/core/DrawerOverlay";function XHe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function QHe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const JHe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},ZHe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},eqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Pc("modal"),position:"left"},tqe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":vn(n,"drawer-size"),"--drawer-flex":QHe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":XHe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),eL=je((e,t)=>{const n=Ae("DrawerRoot",eqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Dh(),m=vt({name:"Drawer",classes:zm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tqe}),g=(p==="rtl"?ZHe:JHe)[c];return _.jsx(HHe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(Vve,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});eL.classes=zm;eL.displayName="@mantine/core/DrawerRoot";const nqe={},tL=je((e,t)=>{const n=Ae("DrawerTitle",nqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ax();return _.jsx(SW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});tL.classes=zm;tL.displayName="@mantine/core/DrawerTitle";const rqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Pc("modal"),withOverlay:!0,withCloseButton:!0},$h=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ae("Drawer",rqe,e),l=!!n||s;return _.jsxs(eL,{ref:t,...u,children:[r&&_.jsx(ZM,{...i}),_.jsxs(QM,{children:[l&&_.jsxs(JM,{children:[n&&_.jsx(tL,{children:n}),s&&_.jsx(XM,{...o})]}),_.jsx(KM,{children:a})]})]})});$h.classes=zm;$h.displayName="@mantine/core/Drawer";$h.Root=eL;$h.Overlay=ZM;$h.Content=QM;$h.Body=KM;$h.Header=JM;$h.Title=tL;$h.CloseButton=XM;function iqe({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[sqe,xbe]=_a("Grid component was not found in tree"),mU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Use=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":mU(e,t),zse=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Vse=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function oqe({span:e,order:t,offset:n,selector:r}){var d;const i=Ls(),s=xbe(),a=HT(e)===void 0?12:HT(e),u=yx({"--col-order":(d=HT(t))==null?void 0:d.toString(),"--col-flex-grow":zse(a,s.grow),"--col-flex-basis":mU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Use(a,s.columns,s.grow),"--col-offset":Vse(HT(n),s.columns)}),l=Ni(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=zse(e[p],s.grow),h[p]["--col-flex-basis"]=mU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Use(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Vse(n[p],s.columns)),h},{}),f=uO(Ni(l),i).filter(h=>Ni(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(AI,{styles:u,media:f,selector:r})}var tG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const aqe={span:12},nG=je((e,t)=>{const n=Ae("GridCol",aqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=xbe(),h=FM();return _.jsxs(_.Fragment,{children:[_.jsx(oqe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(Ee,{ref:t,...d.getStyles("col",{className:Ki(i,h),style:s,classNames:r,styles:o}),...f})]})});nG.classes=tG;nG.displayName="@mantine/core/GridCol";function uqe({gutter:e,selector:t}){const n=Ls(),r=yx({"--grid-gutter":Il(HT(e))}),i=Ni(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Il(e[u])),a),{}),o=uO(Ni(i),n).filter(a=>Ni(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(AI,{styles:r,media:o,selector:t})}const lqe={gutter:"md",grow:!1,columns:12},cqe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),ss=je((e,t)=>{const n=Ae("Grid",lqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=vt({name:"Grid",classes:tG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cqe}),y=FM();return _.jsxs(sqe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(uqe,{selector:`.${y}`,...n}),_.jsx(Ee,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});ss.classes=tG;ss.displayName="@mantine/core/Grid";ss.Col=nG;var Sbe={root:"m_9e117634"};const fqe={},dqe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:pi(t),"--image-object-fit":n}}),Sy=Fs((e,t)=>{const n=Ae("Image",fqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=vt({name:"Image",classes:Sbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dqe});return g&&h?_.jsx(Ee,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(Ee,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Sy.classes=Sbe;Sy.displayName="@mantine/core/Image";function gU(){return gU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gU.apply(null,arguments)}function hqe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var pqe=N.useLayoutEffect,mqe=function(t){var n=N.useRef(t);return pqe(function(){n.current=t}),n},Hse=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},gqe=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&Hse(r.current,null),r.current=n,n&&Hse(n,i)},[n])},qse={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},yqe=function(t){Object.keys(qse).forEach(function(n){t.style.setProperty(n,qse[n],"important")})},Wse=yqe,Ca=null,Gse=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function vqe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ca||(Ca=document.createElement("textarea"),Ca.setAttribute("tabindex","-1"),Ca.setAttribute("aria-hidden","true"),Wse(Ca)),Ca.parentNode===null&&document.body.appendChild(Ca);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Ca.style[h]=o[h]}),Wse(Ca),Ca.value=t;var u=Gse(Ca,e);Ca.value=t,u=Gse(Ca,e),Ca.value="x";var l=Ca.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Yse=function(){},bqe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},_qe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],wqe=!!document.documentElement.currentStyle,Eqe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=bqe(_qe,n),i=r.boxSizing;if(i==="")return null;wqe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},xqe=Eqe;function Tbe(e,t,n){var r=mqe(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Sqe=function(t){Tbe(window,"resize",t)},Tqe=function(t){Tbe(document.fonts,"loadingdone",t)},Aqe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Cqe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Yse:o,u=t.onHeightChange,l=u===void 0?Yse:u,c=hqe(t,Aqe),f=c.value!==void 0,d=N.useRef(null),h=gqe(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:xqe(b);if(w){m.current=w;var E=vqe(w,b.value||b.placeholder||"x",s,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),Sqe(g),Tqe(g),N.createElement("textarea",gU({},c,{onChange:y,ref:h}))},Iqe=N.forwardRef(Cqe);const kqe={},rG=je((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ae("Textarea",kqe,e),u=n&&V1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx($c,{component:u?Iqe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});rG.classes=$c.classes;rG.displayName="@mantine/core/Textarea";const[Rqe,Nqe]=_a("List component was not found in tree");var iG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Pqe={},sG=je((e,t)=>{const n=Ae("ListItem",Pqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Nqe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(Ee,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});sG.classes=iG;sG.displayName="@mantine/core/ListItem";const Dqe={type:"unordered"},Oqe=(e,{size:t,spacing:n})=>({root:{"--list-fz":oo(t),"--list-lh":$1e(t),"--list-spacing":Il(n)}}),kf=je((e,t)=>{const n=Ae("List",Dqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=vt({name:"List",classes:iG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Oqe});return _.jsx(Rqe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(Ee,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});kf.classes=iG;kf.displayName="@mantine/core/List";kf.Item=sG;var Abe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Kse={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Pc("overlay")},$qe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),xc=je((e,t)=>{const n=Ae("LoadingOverlay",Kse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ls(),g=vt({name:"LoadingOverlay",classes:Abe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$qe}),y={...Kse.overlayProps,...f};return _.jsx(jm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(Ee,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Bm,{...g("loader"),unstyled:a,...c}),_.jsx(KC,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(KC,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});xc.classes=Abe;xc.displayName="@mantine/core/LoadingOverlay";const[Mqe,PI]=_a("Menu component was not found in the tree");var Cx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const Lqe={},oG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuDivider",Lqe,e),u=PI();return _.jsx(Ee,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});oG.classes=Cx;oG.displayName="@mantine/core/MenuDivider";const Fqe={},aG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ae("MenuDropdown",Fqe,e),f=N.useRef(null),d=PI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Mp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Mp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Jr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:cs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});aG.classes=Cx;aG.displayName="@mantine/core/MenuDropdown";const jqe={},uG=Fs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ae("MenuItem",jqe,e),p=PI(),m=Ls(),{dir:g}=Dh(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,w=Mp(b.onMouseLeave,()=>p.setHovered(-1)),E=Mp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=Mp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=Mp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?Ph({color:a,theme:m}):null;return _.jsxs(Ns,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:cs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:O1e({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});uG.classes=Cx;uG.displayName="@mantine/core/MenuItem";const Bqe={},lG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("MenuLabel",Bqe,e),u=PI();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});lG.classes=Cx;lG.displayName="@mantine/core/MenuLabel";const Uqe={refProp:"ref"},Cbe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ae("MenuTarget",Uqe,e);if(!vy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=PI(),o=Mp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Mp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Mp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Jr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});Cbe.displayName="@mantine/core/MenuTarget";const zqe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function bu(e){const t=Ae("Menu",zqe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...S}=t,T=vt({name:"Menu",classes:Cx,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:I}]=r9e(),[R,M]=Do({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,O]=N.useState(!1),F=()=>{M(!1),O(!1),R&&(i==null||i())},L=()=>{M(!0),!R&&(r==null||r())},B=()=>{R?F():L()},{openDropdown:U,closeDropdown:H}=iqe({open:L,close:F,closeDelay:p,openDelay:h}),D=j=>n9e("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Lm({classNames:m,styles:g,props:t});return lm(()=>{I()},[R]),_.jsx(Mqe,{value:{getStyles:T,opened:R,toggleDropdown:B,getItemIndex:D,hovered:A,setHovered:C,openedViaClick:P,setOpenedViaClick:O,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?L:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Jr,{...S,opened:R,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}bu.extend=e=>e;bu.classes=Cx;bu.displayName="@mantine/core/Menu";bu.Item=uG;bu.Label=lG;bu.Dropdown=aG;bu.Target=Cbe;bu.Divider=oG;const[Vqe,Ix]=_a("Modal component was not found in tree");var Vm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Hqe={},nL=je((e,t)=>{const n=Ae("ModalBody",Hqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(_W,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});nL.classes=Vm;nL.displayName="@mantine/core/ModalBody";const qqe={},rL=je((e,t)=>{const n=Ae("ModalCloseButton",qqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(wW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});rL.classes=Vm;rL.displayName="@mantine/core/ModalCloseButton";const Wqe={},iL=je((e,t)=>{const n=Ae("ModalContent",Wqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Ix(),f=c.scrollAreaComponent||qve;return _.jsx(Hve,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});iL.classes=Vm;iL.displayName="@mantine/core/ModalContent";const Gqe={},sL=je((e,t)=>{const n=Ae("ModalHeader",Gqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(EW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});sL.classes=Vm;sL.displayName="@mantine/core/ModalHeader";const Yqe={},oL=je((e,t)=>{const n=Ae("ModalOverlay",Yqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(xW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});oL.classes=Vm;oL.displayName="@mantine/core/ModalOverlay";const Kqe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Pc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Xqe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:pi(t),"--modal-size":vn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),aL=je((e,t)=>{const n=Ae("ModalRoot",Kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=vt({name:m,classes:Vm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xqe});return _.jsx(Vqe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(Vve,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});aL.classes=Vm;aL.displayName="@mantine/core/ModalRoot";const Qqe={},uL=je((e,t)=>{const n=Ae("ModalTitle",Qqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ix();return _.jsx(SW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});uL.classes=Vm;uL.displayName="@mantine/core/ModalTitle";const Jqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Pc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},bs=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ae("Modal",Jqe,e),c=!!n||s;return _.jsxs(aL,{ref:t,radius:u,...l,children:[r&&_.jsx(oL,{...i}),_.jsxs(iL,{radius:u,children:[c&&_.jsxs(sL,{children:[n&&_.jsx(uL,{children:n}),s&&_.jsx(rL,{...o})]}),_.jsx(nL,{children:a})]})]})});bs.classes=Vm;bs.displayName="@mantine/core/Modal";bs.Root=aL;bs.Overlay=oL;bs.Content=iL;bs.Body=nL;bs.Header=sL;bs.Title=uL;bs.CloseButton=rL;const[Zqe,cG]=vx(),[eWe,tWe]=vx();var lL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const nWe={},rWe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?vn(t):vn(n,"pg-gap")}}),fG=je((e,t)=>{const n=Ae("PillGroup",nWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=cG(),h=(d==null?void 0:d.size)||l||void 0,p=vt({name:"PillGroup",classes:lL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rWe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(eWe,{value:{size:h,disabled:c},children:_.jsx(Ee,{ref:t,size:h,...p("group"),...f})})});fG.classes=lL;fG.displayName="@mantine/core/PillGroup";const iWe={variant:"default"},sWe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":vn(n,"pill-fz"),"--pill-height":vn(n,"pill-height"),"--pill-radius":t===void 0?void 0:pi(t)}}),XC=je((e,t)=>{const n=Ae("Pill",iWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=tWe(),w=cG(),E=m||(b==null?void 0:b.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=vt({name:"Pill",classes:lL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sWe,stylesCtx:{size:E}});return _.jsxs(Ee,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...T("label"),children:c}),f&&_.jsx(wy,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});XC.classes=lL;XC.displayName="@mantine/core/Pill";XC.Group=fG;var Ibe={field:"m_45c4369d"};const oWe={type:"visible"},dG=je((e,t)=>{const n=Ae("PillsInputField",oWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=cG(),g=xx(),y=vt({name:"PillsInputField",classes:Ibe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(Ee,{component:"input",ref:cs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});dG.classes=Ibe;dG.displayName="@mantine/core/PillsInputField";const aWe={},mO=je((e,t)=>{const n=Ae("PillsInput",aWe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return _.jsx(Zqe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx($c,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});mO.displayName="@mantine/core/PillsInput";mO.Field=dG;function uWe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(oE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const lWe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},hG=je((e,t)=>{const n=Ae("MultiSelect",lWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,searchValue:R,defaultSearchValue:M,onSearchChange:P,readOnly:O,disabled:F,onFocus:L,onBlur:B,onPaste:U,radius:H,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:it,error:be,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Dt,checkIconPosition:We,hidePickedOptions:me,withErrorStyles:dt,name:yt,form:pe,id:Ce,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Ln,hiddenInputValuesDivider:Tr,required:Fn,mod:cr,renderOption:pn,onRemove:Tn,onClear:nr,scrollAreaProps:rr,...Fo}=n,$i=Zu(Ce),An=Zve(m),Mi=$W(An),Ar=WW({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Ar.resetSelectedOption()}}),{styleProps:ds,rest:{type:rp,autoComplete:rl,...ld}}=_x(Fo),[Er,Ai]=Do({value:c,defaultValue:f,finalValue:[],onChange:d}),[Yr,ou]=Do({value:R,defaultValue:M,finalValue:"",onChange:P}),Sa=vt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ta,resolvedStyles:oe}=Lm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Ar.toggleDropdown()),ot.key==="Backspace"&&Yr.length===0&&Er.length>0&&(Tn==null||Tn(Er[Er.length-1]),Ai(Er.slice(0,Er.length-1)))},ae=Er.map((ot,St)=>{var Vt,On;return _.jsx(XC,{withRemoveButton:!O&&!((Vt=Mi[ot])!=null&&Vt.disabled),onRemove:()=>{Ai(Er.filter(jn=>ot!==jn)),Tn==null||Tn(ot)},unstyled:a,disabled:F,...Sa("pill"),children:((On=Mi[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});N.useEffect(()=>{w&&Ar.selectFirstOption()},[w,Er]);const Se=He&&Er.length>0&&!F&&!O&&_.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ai([]),ou("")}}),xe=uWe({data:An,value:Er});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:Ar,classNames:Ta,styles:oe,unstyled:a,size:l,readOnly:O,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),ou(""),Ar.updateSelectedOptionIndex("selected"),Er.includes(Mi[ot].value)?(Ai(Er.filter(St=>St!==Mi[ot].value)),Tn==null||Tn(Mi[ot].value)):Er.length<ke&&Ai([...Er,Mi[ot].value])},...S,children:[_.jsx(Kn.DropdownTarget,{children:_.jsx(mO,{...ds,__staticSelector:"MultiSelect",classNames:Ta,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:D||Se||_.jsx(Kn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Se?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:it,error:be,multiline:!0,withErrorStyles:dt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Se?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Ar.openDropdown():Ar.toggleDropdown(),"data-expanded":Ar.dropdownOpened||void 0,id:$i,required:Fn,mod:cr,children:_.jsxs(XC.Group,{disabled:F,unstyled:a,...Sa("pillsList"),children:[ae,_.jsx(Kn.EventsTarget,{autoComplete:rl,children:_.jsx(mO.Field,{...ld,ref:t,id:$i,placeholder:Ln,type:!ze&&!Ln?"hidden":"visible",...Sa("inputField"),unstyled:a,onFocus:ot=>{L==null||L(ot),ze&&Ar.openDropdown()},onBlur:ot=>{B==null||B(ot),Ar.closeDropdown(),ou("")},onKeyDown:ee,value:Yr,onChange:ot=>{ou(ot.currentTarget.value),ze&&Ar.openDropdown(),w&&Ar.selectFirstOption()},disabled:F,readOnly:O||!ze,pointer:!ze})})]})})}),_.jsx(ybe,{data:me?xe:An,hidden:O||F,filter:T,search:Yr,limit:A,hiddenWhenEmpty:!ze||!ct||me&&xe.length===0&&Yr.trim().length===0,withScrollArea:C,maxDropdownHeight:I,filterOptions:ze,value:Er,checkIconPosition:We,withCheckIcon:Dt,nothingFoundMessage:ct,unstyled:a,labelId:it?`${$i}-label`:void 0,"aria-label":it?void 0:Fo["aria-label"],renderOption:pn,scrollAreaProps:rr})]}),_.jsx(Kn.HiddenInput,{name:yt,valuesDivider:Tr,value:Er,form:pe,disabled:F,..._t})]})});hG.classes={...$c.classes,...Kn.classes};hG.displayName="@mantine/core/MultiSelect";var kbe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const cWe={},fWe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Il(r)}}},cL=Fs((e,t)=>{const n=Ae("NavLink",cWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:A,mod:C,...I}=n,R=vt({name:"NavLink",props:n,classes:kbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fWe}),[M,P]=Do({value:l,defaultValue:c,finalValue:!1,onChange:f}),O=!!d,F=L=>{h==null||h(L),O&&(L.preventDefault(),P(!M))};return _.jsxs(_.Fragment,{children:[_.jsxs(Ns,{...R("root"),component:"a",ref:t,onClick:F,onKeyDown:L=>{T==null||T(L),L.nativeEvent.code==="Space"&&O&&(L.preventDefault(),P(!M))},unstyled:a,mod:[{disabled:m,active:p,expanded:M},C],...I,children:[g&&_.jsx(Ee,{component:"span",...R("section"),mod:{position:"left"},children:g}),_.jsxs(Ee,{...R("body"),mod:{"no-wrap":E},children:[_.jsx(Ee,{component:"span",...R("label"),children:v}),_.jsx(Ee,{component:"span",mod:{active:p},...R("description"),children:b})]}),(O||y)&&_.jsx(Ee,{...R("section"),component:"span",mod:{rotate:M&&!w,position:"right"},children:O?y||_.jsx(pO,{...R("chevron")}):y})]}),_.jsx(tve,{in:M,...R("collapse"),children:_.jsx("div",{...R("children"),children:d})})]})});cL.classes=kbe;cL.displayName="@mantine/core/NavLink";function Rbe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var QC;(function(e){e.event="event",e.props="prop"})(QC||(QC={}));function $g(){}function dWe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function JC(e){return!!(e||"").match(/\d/)}function bw(e){return e==null}function hWe(e){return typeof e=="number"&&isNaN(e)}function Nbe(e){return bw(e)||hWe(e)||typeof e=="number"&&!isFinite(e)}function Pbe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function pWe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function mWe(e,t,n){var r=pWe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function gWe(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function pG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function yWe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Dbe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Xse(e,t){return Array(t+1).join(e)}function Obe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Xse("0",Math.abs(o))+i:o>=a?i=i+Xse("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Qse(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=pG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=Dbe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function C1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var $be=dWe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),vWe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function bWe(e,t,n){return Math.min(Math.max(e,t),n)}function s8(e){return Math.max(e.selectionStart,e.selectionEnd)}function _We(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function wWe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function EWe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function xWe(e,t,n,r,i,s,o){o===void 0&&(o=EWe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Jse(e,t,n,r){var i=e.length;if(t=bWe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function SWe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(JC(e[n])||JC(e[n-1]));return t}function Mbe(e,t,n,r,i,s){s===void 0&&(s=$g);var o=gWe(function(p,m){var g,y;return Nbe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Obe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(bw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;bw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function TWe(e){return e.replace(/[^0-9]/g,"")}function AWe(e){return e}function CWe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=AWe);var a=e.removeFormatting;a===void 0&&(a=TWe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=$g);var h=e.onKeyDown;h===void 0&&(h=$g);var p=e.onMouseUp;p===void 0&&(p=$g);var m=e.onFocus;m===void 0&&(m=$g);var g=e.onBlur;g===void 0&&(g=$g);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=SWe);var b=e.isValidInputCharacter;b===void 0&&(b=JC);var w=e.isCharacterSame,E=Rbe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=Mbe(y,u,!!l,o,a,c),T=S[0],A=T.formattedValue,C=T.numAsString,I=S[1],R=N.useRef(),M=N.useRef({formattedValue:A,numAsString:C}),P=function(be,ke){M.current={formattedValue:be.formattedValue,numAsString:be.value},I(be,ke)},O=N.useState(!1),F=O[0],L=O[1],B=N.useRef(null),U=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return L(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,D=function(be,ke){var ze=parseFloat(ke);return{formattedValue:be,value:ke,floatValue:isNaN(ze)?void 0:ze}},z=function(be,ke,ze){be.selectionStart===0&&be.selectionEnd===be.value.length||(C1(be,ke),U.current.setCaretTimeout=setTimeout(function(){be.value===ze&&be.selectionStart!==ke&&C1(be,ke)},0))},W=function(be,ke,ze){return Jse(be,ke,v(be),ze)},j=function(be,ke,ze){var ct=v(ke),Dt=xWe(ke,A,be,ze,ct,b,w);return Dt=Jse(ke,Dt,ct),Dt},q=function(be){var ke=be.formattedValue;ke===void 0&&(ke="");var ze=be.input,ct=be.source,Dt=be.event,We=be.numAsString,me;if(ze){var dt=be.inputValue||ze.value,yt=s8(ze);ze.value=ke,me=j(dt,ke,yt),me!==void 0&&z(ze,me,ke)}ke!==A&&P(D(ke,We),{event:Dt,source:ct})};N.useEffect(function(){var be=M.current,ke=be.formattedValue,ze=be.numAsString;(A!==ke||C!==ze)&&P(D(A,C),{event:void 0,source:QC.props})},[A,C]);var G=B.current?s8(B.current):void 0,ne=typeof window<"u"?N.useLayoutEffect:N.useEffect;ne(function(){var be=B.current;if(A!==M.current.formattedValue&&be){var ke=j(M.current.formattedValue,A,G);be.value=A,z(be,ke,A)}},[A]);var ce=function(be,ke,ze){var ct=ke.target,Dt=R.current?vWe(R.current,ct.selectionEnd):$be(A,be),We=Object.assign(Object.assign({},Dt),{lastValue:A}),me=a(be,We),dt=H(me);if(me=a(dt,void 0),f&&!f(D(dt,me))){var yt=ke.target,pe=s8(yt),Ce=j(be,A,pe);return yt.value=A,z(yt,Ce,A),!1}return q({formattedValue:dt,numAsString:me,inputValue:be,event:ke,source:ze,input:ke.target}),!0},de=function(be,ke){ke===void 0&&(ke=0);var ze=be.selectionStart,ct=be.selectionEnd;R.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(be){var ke=be.target,ze=ke.value,ct=ce(ze,be,QC.event);ct&&d(be),R.current=void 0},ye=function(be){var ke=be.target,ze=be.key,ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me;ze==="ArrowLeft"||ze==="Backspace"?me=Math.max(ct-1,0):ze==="ArrowRight"?me=Math.min(ct+1,We.length):ze==="Delete"&&(me=ct);var dt=0;ze==="Delete"&&ct===Dt&&(dt=1);var yt=ze==="ArrowLeft"||ze==="ArrowRight";if(me===void 0||ct!==Dt&&!yt){h(be),de(ke,dt);return}var pe=me;if(yt){var Ce=ze==="ArrowLeft"?"left":"right";pe=W(We,me,Ce),pe!==me&&be.preventDefault()}else ze==="Delete"&&!b(We[me])?pe=W(We,me,"right"):ze==="Backspace"&&!b(We[me])&&(pe=W(We,me,"left"));pe!==me&&z(ke,pe,We),h(be),de(ke,dt)},Ie=function(be){var ke=be.target,ze=function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Dt){var me=W(We,ct);me!==ct&&z(ke,me,We)}};ze(),requestAnimationFrame(function(){ze()}),p(be),de(ke)},ve=function(be){be.persist&&be.persist();var ke=be.target,ze=be.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me=W(We,ct);me!==ct&&!(ct===0&&Dt===We.length)&&z(ke,me,We),m(Object.assign(Object.assign({},be),{currentTarget:ze}))},0)},Ke=function(be){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(be)},Ue=F&&_We()?"numeric":void 0,gt=Object.assign({inputMode:Ue},E,{type:t,value:A,onChange:he,onKeyDown:ye,onMouseUp:Ie,onFocus:ve,onBlur:Ke});if(n==="text")return i?Ht.createElement(Ht.Fragment,null,i(A,E)||null):Ht.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var it=r;return Ht.createElement(it,Object.assign({},gt,{ref:s}))}return Ht.createElement("input",Object.assign({},gt,{ref:s}))}function Zse(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=fL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=pG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=Dbe(p,n,!!r)),l&&(h=mWe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function fL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function IWe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function kWe(e,t){return new RegExp("(^-)|[0-9]|"+Pbe(e),"g")}function RWe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function NWe(e,t,n){var r;t===void 0&&(t=wWe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=fL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(JC(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var D=!1,z=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,T=w.value,A=e.substring(c,f);e.length&&T.length&&(E>T.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=T);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=IWe(b?"-"+e:e,i),e=(e.match(kWe(p))||[]).join("");var M=e.indexOf(p);e=e.replace(new RegExp(Pbe(p),"g"),function(B,U){return U===M?".":""});var P=pG(e,i),O=P.beforeDecimal,F=P.afterDecimal,L=P.addNegation;return l.end-l.start<u.end-u.start&&O===""&&m&&!parseFloat(F)&&(e=L?"-":""),e}function PWe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function DWe(e){var t=fL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function OWe(e){e=DWe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=$g);var s=e.onBlur;s===void 0&&(s=$g);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Rbe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=fL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return Zse(L,e)},b=function(L,B){return NWe(L,B,e)},w=bw(f)?c:f,E=d??RWe(w,l,t);bw(f)?bw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(L){return Nbe(L)?L:(typeof L=="number"&&(L=Obe(L)),E&&typeof a=="number"?Qse(L,a,!!u):L)},T=Mbe(S(f),S(c),!!E,v,b,h),A=T[0],C=A.numAsString,I=A.formattedValue,R=T[1],M=function(L){var B=L.target,U=L.key,H=B.selectionStart,D=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&D<l.length){L.preventDefault();return}if(H!==D){i(L);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&C1(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(C1(B,H-1),L.preventDefault()):U==="Delete"&&z[H]===g&&L.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&C1(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&C1(B,H-1),U==="Delete"&&z[H]===W&&C1(B,H+1),i(L)},P=function(L){var B=C;if(B.match(/\d/g)||(B=""),r||(B=yWe(B)),u&&a&&(B=Qse(B,a,u)),B!==C){var U=Zse(B,e);R({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:L,source:QC.event})}s(L)},O=function(L){return L===g?!0:JC(L)},F=function(L){var B=L.currentValue,U=L.lastValue,H=L.formattedValue,D=L.currentValueIndex,z=L.formattedValueIndex,W=B[D],j=H[z],q=$be(U,B),G=q.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:O,isCharacterSame:F,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(L){return PWe(L,e)},onKeyDown:M,onBlur:P})}function $We(e){var t=OWe(e);return Ht.createElement(CWe,Object.assign({},t))}function eoe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var yU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const MWe=/^(0\.0*|-0(\.0*)?)$/,LWe=/^-?0\d+(\.\d+)?\.?$/;function FWe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function toe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const jWe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},BWe=(e,{size:t})=>({controls:{"--ni-chevron-size":vn(t,"ni-chevron-size")}}),mG=je((e,t)=>{const n=Ae("NumberInput",jWe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:A,startValue:C,disabled:I,rightSectionPointerEvents:R,allowNegative:M,readOnly:P,size:O,rightSectionWidth:F,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:D,...z}=n,W=vt({name:"NumberInput",classes:yU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:BWe}),{resolvedClassNames:j,resolvedStyles:q}=Lm({classNames:i,styles:s,props:n}),[G,ne]=Do({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&L!==void 0,de=N.useRef(null),he=N.useRef(null),ye=N.useRef(0),Ie=(me,dt)=>{dt.source==="event"&&ne(FWe(me.floatValue)&&!MWe.test(me.value)&&!(U&&LWe.test(me.value))?me.floatValue:me.value),l==null||l(me,dt)},ve=me=>{const dt=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return dt?Math.max(0,(dt[1]?dt[1].length:0)-(dt[2]?+dt[2]:0)):0},Ke=me=>{de.current&&typeof me<"u"&&de.current.setSelectionRange(me,me)},Ue=N.useRef();Ue.current=()=>{let me;const dt=ve(G),yt=ve(p),pe=Math.max(dt,yt),Ce=10**pe;if(typeof G!="number"||Number.isNaN(G))me=Hd(C,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;me=ut<=d?ut:d}else me=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const He=me.toFixed(pe);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const gt=N.useRef();gt.current=()=>{let me;const dt=h!==void 0?h:M?Number.MIN_SAFE_INTEGER:0,yt=ve(G),pe=ve(p),Ce=Math.max(yt,pe),He=10**Ce;if(typeof G!="number"||Number.isNaN(G))me=Hd(C,dt,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;me=dt!==void 0&&_t<dt?dt:_t}const ut=me.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const it=me=>{S==null||S(me),!(P||!H)&&(me.key==="ArrowUp"&&(me.preventDefault(),Ue.current()),me.key==="ArrowDown"&&(me.preventDefault(),gt.current()))},be=me=>{if(T==null||T(me),me.key==="Backspace"){const dt=de.current;dt.selectionStart===0&&dt.selectionStart===dt.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>Ke(0),0))}};qq(A,{increment:Ue.current,decrement:gt.current});const ke=me=>{me?Ue.current():gt.current(),ye.current+=1},ze=me=>{if(ke(me),ce){const dt=typeof L=="number"?L:L(ye.current);he.current=window.setTimeout(()=>ze(me),dt)}},ct=(me,dt)=>{var yt;me.preventDefault(),(yt=de.current)==null||yt.focus(),ke(dt),ce&&(he.current=window.setTimeout(()=>ze(dt),B))},Dt=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ye.current=0},We=_.jsxs("div",{...W("controls"),children:[_.jsx(Ns,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(eoe,{direction:"up"})}),_.jsx(Ns,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(eoe,{direction:"down"})})]});return _.jsx($c,{component:$We,allowNegative:M,className:Ki(yU.root,r),size:O,...z,readOnly:P,disabled:I,value:G,getInputRef:cs(t,de),onValueChange:Ie,rightSection:m||P?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:be,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${O||"sm"})`,allowLeadingZeros:U,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&Hd(G,h,d)!==G&&ne(Hd(G,h,d)),D&&typeof G=="string"){const dt=G.replace(/^0+/,""),yt=parseFloat(dt);ne(Number.isNaN(yt)?dt:yt)}},isAllowed:me=>v==="strict"?y?y(me)&&toe(me.floatValue,h,d):toe(me.floatValue,h,d):y?y(me):!0})});mG.classes={...$c.classes,...yU};mG.displayName="@mantine/core/NumberInput";const[UWe,Lbe]=_a("Progress.Root component was not found in tree");var DI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const zWe={},gG=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ae("ProgressLabel",zWe,e),u=Lbe();return _.jsx(Ee,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});gG.classes=DI;gG.displayName="@mantine/core/ProgressLabel";const VWe={},HWe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":vn(t,"progress-size"),"--progress-radius":n===void 0?void 0:pi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),dL=je((e,t)=>{const n=Ae("ProgressRoot",VWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=vt({name:"Progress",classes:DI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HWe});return _.jsx(UWe,{value:{getStyles:d,autoContrast:l},children:_.jsx(Ee,{ref:t,...d("root"),...f})})});dL.classes=DI;dL.displayName="@mantine/core/ProgressRoot";const qWe={withAria:!0},hL=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ae("ProgressSection",qWe,e),p=Lbe(),m=Ls(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(Ee,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":ti(l,m),"--progress-label-color":bx(p.autoContrast,m)?_y({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});hL.classes=DI;hL.displayName="@mantine/core/ProgressSection";const WWe={},kx=je((e,t)=>{const n=Ae("Progress",WWe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Lm({classNames:i,styles:s,props:n});return _.jsx(dL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(hL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});kx.classes=DI;kx.displayName="@mantine/core/Progress";kx.Section=hL;kx.Root=dL;kx.Label=gG;const[GWe,Fbe]=vx(),[YWe,KWe]=vx();var jbe={card:"m_9dc8ae12"};const XWe={withBorder:!0},QWe=(e,{radius:t})=>({card:{"--card-radius":pi(t)}}),yG=je((e,t)=>{const n=Ae("RadioCard",XWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=vt({name:"RadioCard",classes:jbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QWe,rootSelector:"card"}),{dir:v}=Dh(),b=Fbe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(M=>M===T.target),I=C+1>=A.length?0:C+1,R=C-1<0?A.length-1:C-1;T.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),T.nativeEvent.code==="ArrowUp"&&(A[R].focus(),A[R].click()),T.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?R:I].focus(),A[v==="ltr"?R:I].click()),T.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:R].focus(),A[v==="ltr"?I:R].click())}};return _.jsx(YWe,{value:{checked:w},children:_.jsx(Ns,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:S})})});yG.displayName="@mantine/core/RadioCard";yG.classes=jbe;const JWe={},vG=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ae("RadioGroup",JWe,e),f=Zu(u),[d,h]=Do({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(GWe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(Pi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(lbe,{role:"radiogroup",children:a})})})});vG.classes=Pi.Wrapper.classes;vG.displayName="@mantine/core/RadioGroup";function Bbe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Ube={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const ZWe={icon:Bbe},eGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":vn(r,"radio-size"),"--radio-radius":t===void 0?void 0:pi(t),"--radio-color":s==="outline"?u:ti(n,e),"--radio-icon-size":vn(r,"radio-icon-size"),"--radio-icon-color":i?ti(i,e):bx(o,e)?_y({color:n,theme:e,autoContrast:o}):void 0}}},bG=je((e,t)=>{const n=Ae("RadioIndicator",ZWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=vt({name:"RadioIndicator",classes:Ube,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eGe,rootSelector:"indicator"}),E=KWe(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(Ee,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});bG.displayName="@mantine/core/RadioIndicator";bG.classes=Ube;var zbe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const tGe={labelPosition:"right"},nGe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ph({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":vn(t,"radio-size"),"--radio-radius":n===void 0?void 0:pi(n),"--radio-color":s==="outline"?u:ti(r,e),"--radio-icon-color":i?ti(i,e):bx(o,e)?_y({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":vn(t,"radio-icon-size")}}},kv=je((e,t)=>{const n=Ae("Radio",tGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=Bbe,rootRef:E,iconColor:S,onChange:T,mod:A,...C}=n,I=vt({name:"Radio",classes:zbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nGe}),R=Fbe(),M=(R==null?void 0:R.size)??c,P=n.size?c:M,{styleProps:O,rest:F}=_x(C),L=Zu(l),B=R?{checked:R.value===F.value,name:F.name??R.name,onChange:U=>{R.onChange(U),T==null||T(U)}}:{};return _.jsx(GW,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...O,...b,children:_.jsxs(Ee,{...I("inner"),mod:{"label-position":d},children:[_.jsx(Ee,{...I("radio",{focusable:!0,variant:y}),onChange:T,...F,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),_.jsx(w,{...I("icon"),"aria-hidden":!0})]})})});kv.classes=zbe;kv.displayName="@mantine/core/Radio";kv.Group=vG;kv.Card=yG;kv.Indicator=bG;const rGe={duration:100,transition:"fade"};function iGe(e,t){return{...rGe,...t,...e}}function sGe({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=gW({placement:t,middleware:[dW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Yp(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var pL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const oGe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Pc("popover")},aGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:pi(t),"--tooltip-bg":n?ti(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),_G=je((e,t)=>{const n=Ae("TooltipFloating",oGe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...S}=n,T=Ls(),A=vt({name:"TooltipFloating",props:n,classes:pL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:aGe}),{handleMouseMove:C,x:I,y:R,opened:M,boundaryRef:P,floating:O,setOpened:F}=sGe({offset:p,position:m});if(!vy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=cs(P,r.ref,t),B=H=>{var D,z;(z=(D=r.props).onMouseEnter)==null||z.call(D,H),C(H),F(!0)},U=H=>{var D,z;(z=(D=r.props).onMouseLeave)==null||z.call(D,H),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(II,{...E,withinPortal:s,children:_.jsx(Ee,{...S,...A("tooltip",{style:{...Jq(o,T),zIndex:y,display:!v&&M?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:O,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:L,onMouseEnter:B,onMouseLeave:U})]})});_G.classes=pL;_G.displayName="@mantine/core/TooltipFloating";const Vbe=N.createContext(!1),uGe=Vbe.Provider,lGe=()=>N.useContext(Vbe),cGe={openDelay:0,closeDelay:0};function Hbe(e){const{openDelay:t,closeDelay:n,children:r}=Ae("TooltipGroup",cGe,e);return _.jsx(uGe,{value:!0,children:_.jsx(mze,{delay:{open:t,close:n},children:r})})}Hbe.displayName="@mantine/core/TooltipGroup";function fGe(e){var S,T,A;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=lGe(),o=Zu(),{delay:a,currentId:u,setCurrentId:l}=Rve(),c=N.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=gW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Tve(e.offset),dW({padding:8}),dU(),Ave({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[hU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=Eze([pze(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),wze(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),Sze(h,{role:"tooltip"}),bze(h,{enabled:typeof e.opened>"u"}),gze(h,{id:o})]);Lve({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),lm(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const noe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Pc("popover"),positionDependencies:[]},dGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:pi(t),"--tooltip-bg":n?ti(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Fa=je((e,t)=>{const n=Ae("Tooltip",noe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,offset:A,transitionProps:C,multiline:I,events:R,zIndex:M,disabled:P,positionDependencies:O,onClick:F,onMouseEnter:L,onMouseLeave:B,inline:U,variant:H,keepMounted:D,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=Ae("Tooltip",noe,n),{dir:ne}=Dh(),ce=N.useRef(null),de=fGe({position:Nve(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:ce,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...O,r],inline:U,strategy:q}),he=vt({name:"Tooltip",props:n,classes:pL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:dGe});if(!vy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=cs(de.reference,r.ref,t),Ie=iGe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(II,{...W,withinPortal:f,children:_.jsx(jm,{...Ie,keepMounted:D,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:ve=>_.jsxs(Ee,{...G,variant:H,mod:[{multiline:I},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...ve,zIndex:M,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(yW,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,...he("arrow")})]})})}),N.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:L,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Ki(v,r.props.className),...r.props}))]})});Fa.classes=pL;Fa.displayName="@mantine/core/Tooltip";Fa.Floating=_G;Fa.Group=Hbe;var qbe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const hGe={withItemsBorders:!0},pGe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:pi(t),"--sc-color":n?ti(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":vn(i,"sc-padding"),"--sc-font-size":oo(i)}}),wG=je((e,t)=>{var ne,ce;const n=Ae("SegmentedControl",hGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:S,variant:T,autoContrast:A,withItemsBorders:C,mod:I,...R}=n,M=vt({name:"SegmentedControl",props:n,classes:qbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pGe}),P=Ls(),O=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=T9e(),[L,B]=N.useState(null),[U,H]=N.useState({}),D=(de,he)=>{U[he]=de,H(U)},[z,W]=Do({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=O.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Zu(p),q=O.map(de=>N.createElement(Ee,{...M("control"),mod:{active:z===de.value,orientation:v},key:de.value},N.createElement("input",{...M("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),N.createElement(Ee,{component:"label",...M("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>D(he,de.value),__vars:{"--sc-label-color":w!==void 0?_y({color:w,theme:P,autoContrast:A}):void 0},key:`${de.value}-label`},_.jsx("span",{...M("innerLabel"),children:de.label})))),G=cs(t,de=>B(de));return l.length===0?null:_.jsxs(Ee,{...M("root"),variant:T,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},I],...R,role:"radiogroup",children:[typeof z=="string"&&_.jsx(CW,{target:U[z],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...M("indicator")}),q]})});wG.classes=qbe;wG.displayName="@mantine/core/SegmentedControl";const mGe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},OI=je((e,t)=>{const n=Ae("Select",mGe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,size:R,searchable:M,rightSection:P,checkIconPosition:O,withCheckIcon:F,nothingFoundMessage:L,name:B,form:U,searchValue:H,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ye,autoComplete:Ie,scrollAreaProps:ve,...Ke}=n,Ue=N.useMemo(()=>Zve(m),[m]),gt=N.useMemo(()=>$W(Ue),[Ue]),it=Zu(G),[be,ke,ze]=Do({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof be=="string"?gt[be]:void 0,[Dt,We]=Do({value:H,defaultValue:D,finalValue:ct?ct.label:"",onChange:z}),me=WW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:dt,resolvedStyles:yt}=Lm({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&me.selectFirstOption()},[v,be]),N.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const pe=ne&&!!be&&!S&&!E&&_.jsx(Kn.ClearButton,{size:R,...ce,onClear:()=>{ke(null,null),We(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:me,__staticSelector:"Select",classNames:dt,styles:yt,unstyled:s,readOnly:E,onOptionSubmit:Ce=>{b==null||b(Ce);const He=W&&gt[Ce].value===be?null:gt[Ce],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),me.closeDropdown()},size:R,...w,children:[_.jsx(Kn.Target,{targetType:M?"input":"button",autoComplete:Ie,children:_.jsx($c,{id:it,ref:t,rightSection:P||pe||_.jsx(Kn.Chevron,{size:R,error:j,unstyled:s}),rightSectionPointerEvents:q||(pe?"all":"none"),...Ke,size:R,__staticSelector:"Select",disabled:S,readOnly:E||!M,value:Dt,onChange:Ce=>{We(Ce.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:Ce=>{M&&me.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var He;M&&me.closeDropdown(),We(be!=null&&((He=gt[be])==null?void 0:He.label)||""),d==null||d(Ce)},onClick:Ce=>{M?me.openDropdown():me.toggleDropdown(),h==null||h(Ce)},classNames:dt,styles:yt,unstyled:s,pointer:!M,error:j})}),_.jsx(ybe,{data:Ue,hidden:E||S,filter:T,search:Dt,limit:A,hiddenWhenEmpty:!M||!L,withScrollArea:C,maxDropdownHeight:I,filterOptions:M&&(ct==null?void 0:ct.label)!==Dt,value:be,checkIconPosition:O,withCheckIcon:F,nothingFoundMessage:L,unstyled:s,labelId:Ke.label?`${it}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:ve})]}),_.jsx(Kn.HiddenInput,{value:be,name:B,form:U,disabled:S,...de})]})});OI.classes={...$c.classes,...Kn.classes};OI.displayName="@mantine/core/Select";const[Wbe,mL]=_a("SliderProvider was not found in tree"),EG=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=mL();return _.jsx(Ee,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});EG.displayName="@mantine/core/SliderRoot";const gO=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=mL(),[b,w]=N.useState(!1),E=l||s||b||h&&p;return _.jsxs(Ee,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,_.jsx(jm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>_.jsx("div",{...v("label",{style:S}),children:i})})]})});gO.displayName="@mantine/core/SliderThumb";function yO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function gGe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Gbe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=mL();if(!e)return null;const u=e.map((l,c)=>N.createElement(Ee,{...a("markWrapper"),__vars:{"--mark-offset":`${yO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(Ee,{...a("mark"),mod:{filled:gGe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}Gbe.displayName="@mantine/core/SliderMarks";function xG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=mL();return _.jsx(_.Fragment,{children:_.jsx(Ee,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(Ee,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(Ee,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(Gbe,{...a,offset:i,disabled:r,inverted:s})]})})})}xG.displayName="@mantine/core/SliderTrack";function vU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function tc(e,t){return parseFloat(e.toFixed(t))}function Ybe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var gL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const yGe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},vGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":vn(t,"slider-size"),"--slider-color":n?ti(n,e):void 0,"--slider-radius":i===void 0?void 0:pi(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),yL=je((e,t)=>{const n=Ae("Slider",yGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:T,scale:A,inverted:C,className:I,style:R,vars:M,hiddenInputProps:P,...O}=n,F=vt({name:"Slider",props:n,classes:gL,classNames:r,className:I,styles:i,style:R,vars:M,varsResolver:vGe,unstyled:T}),{dir:L}=Dh(),[B,U]=N.useState(!1),[H,D]=Do({value:typeof s=="number"?Hd(s,l,c):s,defaultValue:typeof h=="number"?Hd(h,l,c):h,finalValue:Hd(0,l,c),onChange:o}),z=N.useRef(H),W=N.useRef(),j=N.useRef(),q=yO({value:H,min:l,max:c}),G=A(H),ne=typeof g=="function"?g(G):g,ce=d??Ybe(f),de=N.useCallback(({x:ve})=>{if(!S){const Ke=vU({value:ve,min:l,max:c,step:f,precision:ce});D(Ke),z.current=Ke}},[S,l,c,f,ce,D]),{ref:he,active:ye}=z1e(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},L),Ie=ve=>{var Ke,Ue,gt,it,be,ke;if(!S)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=tc(Math.min(Math.max(H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowRight":{ve.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=tc(Math.min(Math.max(L==="rtl"?H-f:H+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowDown":{ve.preventDefault(),(gt=j.current)==null||gt.focus();const ze=tc(Math.min(Math.max(H-f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowLeft":{ve.preventDefault(),(it=j.current)==null||it.focus();const ze=tc(Math.min(Math.max(L==="rtl"?H+f:H-f,l),c),ce);D(ze),a==null||a(ze);break}case"Home":{ve.preventDefault(),(be=j.current)==null||be.focus(),D(l),a==null||a(l);break}case"End":{ve.preventDefault(),(ke=j.current)==null||ke.focus(),D(c),a==null||a(c);break}}};return _.jsx(Wbe,{value:{getStyles:F},children:_.jsxs(EG,{...O,ref:cs(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:S,children:[_.jsx(xG,{inverted:C,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(gO,{max:c,min:l,value:G,position:q,dragging:ye,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});yL.classes=gL;yL.displayName="@mantine/core/Slider";function bGe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const _Ge=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":vn(t,"slider-size"),"--slider-color":n?ti(n,e):void 0,"--slider-radius":i===void 0?void 0:pi(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),wGe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},vO=je((e,t)=>{const n=Ae("RangeSlider",wGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:A,disabled:C,unstyled:I,scale:R,inverted:M,className:P,style:O,vars:F,hiddenInputProps:L,...B}=n,U=vt({name:"Slider",props:n,classes:gL,classNames:r,className:P,styles:i,style:O,vars:F,varsResolver:_Ge,unstyled:I}),{dir:H}=Dh(),[D,z]=N.useState(-1),[W,j]=N.useState(!1),[q,G]=Do({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=N.useRef(q),ce=N.useRef([]),de=N.useRef(void 0),he=[yO({value:q[0],min:l,max:c}),yO({value:q[1],min:l,max:c})],ye=p??Ybe(h),Ie=We=>{G(We),ne.current=We};N.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ve=(We,me,dt)=>{const yt=[...ne.current];yt[me]=We,me===0&&(We>yt[1]-(f-1e-9)&&(yt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(yt[me]=ne.current[me]),yt[1]-We>d&&(yt[1]=We+d)),me===1&&(We<yt[0]+f&&(yt[0]=Math.max(We-f,l)),We<yt[0]+f&&(yt[me]=ne.current[me]),We-yt[0]>d&&(yt[0]=We-d)),yt[0]=tc(yt[0],ye),yt[1]=tc(yt[1],ye),Ie(yt),dt&&(a==null||a(ne.current))},Ke=We=>{if(!C){const me=vU({value:We,min:l,max:c,step:h,precision:ye});ve(me,de.current,!1)}},{ref:Ue,active:gt}=z1e(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function it(We){de.current=We}const be=We=>{Ue.current.focus();const me=Ue.current.getBoundingClientRect(),dt=bGe(We.nativeEvent),yt=vU({value:dt-me.left,max:c,min:l,step:h,containerWidth:me.width}),pe=Math.abs(q[0]-yt)>Math.abs(q[1]-yt)?1:0,Ce=H==="ltr"?pe:pe===1?0:1;de.current=Ce},ke=()=>D!==1&&D!==0?(z(0),0):D,ze=We=>{if(!C)switch(We.key){case"ArrowUp":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(H==="rtl"?ne.current[me]-h:ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(ne.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(tc(Math.min(Math.max(H==="rtl"?ne.current[me]+h:ne.current[me]-h,l),c),ye),me,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Dt=Array.isArray(A);return _.jsx(Wbe,{value:{getStyles:U},children:_.jsxs(EG,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(xG,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:M,min:l,max:c,value:q[1],disabled:C,containerProps:{ref:Ue,onMouseEnter:T?()=>j(!0):void 0,onMouseLeave:T?()=>j(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[_.jsx(gO,{...ct,value:R(q[0]),position:he[0],dragging:gt,label:typeof v=="function"?v(tc(R(q[0]),ye)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[0]:A}),_.jsx(gO,{...ct,thumbLabel:S,value:R(q[1]),position:he[1],dragging:gt,label:typeof v=="function"?v(tc(R(q[1]),ye)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...L}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...L})]})})});vO.classes=gL;vO.displayName="@mantine/core/RangeSlider";const EGe={},Rf=je((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ae("Space",EGe,e);return _.jsx(Ee,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Rf.displayName="@mantine/core/Space";var Kbe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const xGe={maxHeight:100,initialState:!1},SGe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),SG=je((e,t)=>{const n=Ae("Spoiler",xGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=vt({name:"Spoiler",classes:Kbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SGe}),b=Zu(g),w=`${b}-region`,[E,S]=N.useState(l),{ref:T,height:A}=v9e(),C=E?f:d,I=C!==null&&c<A;return _.jsxs(Ee,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&_.jsx(Sx,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Te(A):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:T,children:h})})]})});SG.classes=Kbe;SG.displayName="@mantine/core/Spoiler";var Xbe={root:"m_6d731127"};const TGe={gap:"md",align:"stretch",justify:"flex-start"},AGe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Il(t),"--stack-align":n,"--stack-justify":r}}),Lp=je((e,t)=>{const n=Ae("Stack",TGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=vt({name:"Stack",props:n,classes:Xbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AGe});return _.jsx(Ee,{ref:t,...p("root"),variant:d,...h})});Lp.classes=Xbe;Lp.displayName="@mantine/core/Stack";const[CGe,IGe]=_a("Table component was not found in the tree");var $I={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function kGe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function bb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=je((i,s)=>{const o=Ae(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=IGe();return _.jsx(Ee,{component:e,ref:s,...kGe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=$I,r}const bU=bb("th",{columnBorder:!0}),Qbe=bb("td",{columnBorder:!0}),PP=bb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Jbe=bb("thead",{stickyHeader:!0}),Zbe=bb("tbody"),e_e=bb("tfoot"),t_e=bb("caption",{captionSide:!0});function TG({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(t_e,{children:e.caption}),e.head&&_.jsx(Jbe,{children:_.jsx(PP,{children:e.head.map((t,n)=>_.jsx(bU,{children:t},n))})}),e.body&&_.jsx(Zbe,{children:e.body.map((t,n)=>_.jsx(PP,{children:t.map((r,i)=>_.jsx(Qbe,{children:r},i))},n))}),e.foot&&_.jsx(e_e,{children:_.jsx(PP,{children:e.foot.map((t,n)=>_.jsx(bU,{children:t},n))})})]})}TG.displayName="@mantine/core/TableDataRenderer";const RGe={type:"scrollarea"},NGe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),AG=je((e,t)=>{const n=Ae("TableScrollContainer",RGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=vt({name:"TableScrollContainer",classes:$I,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NGe,rootSelector:"scrollContainer"});return _.jsx(Ee,{component:f==="scrollarea"?Kf:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});AG.classes=$I;AG.displayName="@mantine/core/TableScrollContainer";const PGe={withRowBorders:!0,verticalSpacing:7},DGe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Il(r),"--table-vertical-spacing":Il(i),"--table-border-color":s?ti(s,e):void 0,"--table-striped-color":u&&o?ti(o,e):void 0,"--table-highlight-on-hover-color":l&&a?ti(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),Cn=je((e,t)=>{const n=Ae("Table",PGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:S,children:T,stickyHeader:A,stickyHeaderOffset:C,mod:I,...R}=n,M=vt({name:"Table",props:n,className:i,style:s,classes:$I,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:DGe});return _.jsx(CGe,{value:{getStyles:M,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(Ee,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},I],...M("table"),...R,children:T||!!S&&_.jsx(TG,{data:S})})})});Cn.classes=$I;Cn.displayName="@mantine/core/Table";Cn.Td=Qbe;Cn.Th=bU;Cn.Tr=PP;Cn.Thead=Jbe;Cn.Tbody=Zbe;Cn.Tfoot=e_e;Cn.Caption=t_e;Cn.ScrollContainer=AG;Cn.DataRenderer=TG;const[OGe,CG]=_a("Tabs component was not found in the tree");var MI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const $Ge={},IG=je((e,t)=>{const n=Ae("TabsList",$Ge,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=CG();return _.jsx(Ee,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});IG.classes=MI;IG.displayName="@mantine/core/TabsList";const MGe={},kG=je((e,t)=>{const n=Ae("TabsPanel",MGe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=CG(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(Ee,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});kG.classes=MI;kG.displayName="@mantine/core/TabsPanel";const LGe={},RG=je((e,t)=>{const n=Ae("TabsTab",LGe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Ls(),{dir:b}=Dh(),w=CG(),E=a===w.value,S=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},T={classNames:h,styles:p,props:n};return _.jsxs(Ns,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?ti(f,v):void 0},onKeyDown:O1e({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",T),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:s})]})});RG.classes=MI;RG.displayName="@mantine/core/TabsTab";const roe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",FGe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},jGe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":pi(t),"--tabs-color":ti(n,e),"--tabs-text-color":bx(r,e)?_y({color:n,theme:e,autoContrast:r}):void 0}}),ts=je((e,t)=>{const n=Ae("Tabs",FGe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:S,vars:T,autoContrast:A,mod:C,...I}=n,R=Zu(l),[M,P]=Do({value:i,defaultValue:r,finalValue:null,onChange:s}),O=vt({name:"Tabs",props:n,classes:MI,className:E,style:S,classNames:v,styles:b,unstyled:w,vars:T,varsResolver:jGe});return _.jsx(OGe,{value:{placement:g,value:M,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:ise(`${R}-tab`,roe),getPanelId:ise(`${R}-panel`,roe),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:O},children:_.jsx(Ee,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...O("root"),...I,children:a})})});ts.classes=MI;ts.displayName="@mantine/core/Tabs";ts.Tab=RG;ts.Panel=kG;ts.List=IG;const BGe={},lv=je((e,t)=>{const n=Ae("TextInput",BGe,e);return _.jsx($c,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});lv.classes=$c.classes;lv.displayName="@mantine/core/TextInput";const UGe=["h1","h2","h3","h4","h5","h6"];function zGe(e,t){const n=t!==void 0?t:`h${e}`;return UGe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var n_e={root:"m_8a5d1357"};const VGe={order:1},HGe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=zGe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},oi=je((e,t)=>{const n=Ae("Title",VGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=vt({name:"Title",props:n,classes:n_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:HGe});return[1,2,3,4,5,6].includes(u)?_.jsx(Ee,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});oi.classes=n_e;oi.displayName="@mantine/core/Title";const r_e=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),wa=()=>N.useContext(r_e);function qGe({children:e}){const[t,n]=Ht.useState(void 0),r=Ht.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(r_e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZC(){return ZC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZC.apply(this,arguments)}var Hg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Hg||(Hg={}));const ioe="popstate";function WGe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return _U("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:s_e(i)}return YGe(t,n,null,e)}function os(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function i_e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function GGe(){return Math.random().toString(36).substr(2,8)}function soe(e,t){return{usr:e.state,key:e.key,idx:t}}function _U(e,t,n,r){return n===void 0&&(n=null),ZC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Rx(t):t,{state:n,key:t&&t.key||r||GGe()})}function s_e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Rx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function YGe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Hg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(ZC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Hg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Hg.Push;let v=_U(m.location,g,y);l=c()+1;let b=soe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Hg.Replace;let v=_U(m.location,g,y);l=c();let b=soe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:s_e(g);return v=v.replace(/ $/,"%20"),os(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ioe,f),u=g,()=>{i.removeEventListener(ioe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var ooe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ooe||(ooe={}));function KGe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Rx(t):t,i=u_e(r.pathname||"/",n);if(i==null)return null;let s=o_e(e);XGe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=uYe(i);o=sYe(s[a],u)}return o}function o_e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(os(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=f0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(os(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),o_e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:rYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of a_e(s.path))i(s,o,u)}),t}function a_e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=a_e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function XGe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:iYe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QGe=/^:[\w-]+$/,JGe=3,ZGe=2,eYe=1,tYe=10,nYe=-2,aoe=e=>e==="*";function rYe(e,t){let n=e.split("/"),r=n.length;return n.some(aoe)&&(r+=nYe),t&&(r+=ZGe),n.filter(i=>!aoe(i)).reduce((i,s)=>i+(QGe.test(s)?JGe:s===""?eYe:tYe),r)}function iYe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function sYe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=oYe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:f0([i,c.pathname]),pathnameBase:dYe(f0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=f0([i,c.pathnameBase]))}return s}function oYe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=aYe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function aYe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),i_e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function uYe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return i_e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function u_e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function lYe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Rx(e):e;return{pathname:n?n.startsWith("/")?n:cYe(n,t):t,search:hYe(r),hash:pYe(i)}}function cYe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function o8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fYe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function NG(e,t){let n=fYe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function PG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Rx(e):(i=ZC({},e),os(!i.pathname||!i.pathname.includes("?"),o8("?","pathname","search",i)),os(!i.pathname||!i.pathname.includes("#"),o8("#","pathname","hash",i)),os(!i.search||!i.search.includes("#"),o8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=lYe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const f0=e=>e.join("/").replace(/\/\/+/g,"/"),dYe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hYe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pYe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function mYe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const l_e=["post","put","patch","delete"];new Set(l_e);const gYe=["get",...l_e];new Set(gYe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function e2(){return e2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e2.apply(this,arguments)}const DG=N.createContext(null),yYe=N.createContext(null),_b=N.createContext(null),vL=N.createContext(null),Mh=N.createContext({outlet:null,matches:[],isDataRoute:!1}),c_e=N.createContext(null);function f_e(e,t){let{relative:n}={};Nx()||os(!1);let{basename:r,navigator:i}=N.useContext(_b),{hash:s,pathname:o,search:a}=wYe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:f0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Nx(){return N.useContext(vL)!=null}function wb(){return Nx()||os(!1),N.useContext(vL).location}function d_e(e){N.useContext(_b).static||N.useLayoutEffect(e)}function Hm(){let{isDataRoute:e}=N.useContext(Mh);return e?PYe():vYe()}function vYe(){Nx()||os(!1);let e=N.useContext(DG),{basename:t,future:n,navigator:r}=N.useContext(_b),{matches:i}=N.useContext(Mh),{pathname:s}=wb(),o=JSON.stringify(NG(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return d_e(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=PG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:f0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const bYe=N.createContext(null);function _Ye(e){let t=N.useContext(Mh).outlet;return t&&N.createElement(bYe.Provider,{value:e},t)}function aE(){let{matches:e}=N.useContext(Mh),t=e[e.length-1];return t?t.params:{}}function wYe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(_b),{matches:i}=N.useContext(Mh),{pathname:s}=wb(),o=JSON.stringify(NG(i,r.v7_relativeSplatPath));return N.useMemo(()=>PG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function h_e(e,t){return EYe(e,t)}function EYe(e,t,n,r){Nx()||os(!1);let{navigator:i}=N.useContext(_b),{matches:s}=N.useContext(Mh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=wb(),c;if(t){var f;let g=typeof t=="string"?Rx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||os(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=KGe(e,{pathname:h}),m=CYe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:f0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:f0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(vL.Provider,{value:{location:e2({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Hg.Pop}},m):m}function xYe(){let e=NYe(),t=mYe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const SYe=N.createElement(xYe,null);class TYe extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(Mh.Provider,{value:this.props.routeContext},N.createElement(c_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AYe(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(DG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Mh.Provider,{value:t},r)}function CYe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||os(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||SYe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(AYe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(TYe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var p_e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(p_e||{}),bO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(bO||{});function IYe(e){let t=N.useContext(DG);return t||os(!1),t}function kYe(e){let t=N.useContext(yYe);return t||os(!1),t}function RYe(e){let t=N.useContext(Mh);return t||os(!1),t}function m_e(e){let t=RYe(),n=t.matches[t.matches.length-1];return n.route.id||os(!1),n.route.id}function NYe(){var e;let t=N.useContext(c_e),n=kYe(bO.UseRouteError),r=m_e(bO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function PYe(){let{router:e}=IYe(p_e.UseNavigateStable),t=m_e(bO.UseNavigateStable),n=N.useRef(!1);return d_e(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,e2({fromRouteId:t},s)))},[e,t])}function OG(e){let{to:t,replace:n,state:r,relative:i}=e;Nx()||os(!1);let{future:s,static:o}=N.useContext(_b),{matches:a}=N.useContext(Mh),{pathname:u}=wb(),l=Hm(),c=PG(t,NG(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function DYe(e){return _Ye(e.context)}function mp(e){os(!1)}function OYe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Hg.Pop,navigator:s,static:o=!1,future:a}=e;Nx()&&os(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:e2({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Rx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=u_e(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(_b.Provider,{value:l},N.createElement(vL.Provider,{children:n,value:m}))}function $Ye(e){let{children:t,location:n}=e;return h_e(wU(t),n)}new Promise(()=>{});function wU(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,wU(r.props.children,s));return}r.type!==mp&&os(!1),!r.props.index||!r.props.children||os(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function EU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function MYe(e,t){let n=EU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const LYe="6";try{window.__reactRouterVersion=LYe}catch{}const FYe="startTransition",uoe=$D[FYe];function jYe(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=WGe({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&uoe?uoe(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(OYe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var loe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(loe||(loe={}));var coe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(coe||(coe={}));function $G(e){let t=N.useRef(EU(e)),n=N.useRef(!1),r=wb(),i=N.useMemo(()=>MYe(r.search,n.current?null:t.current),[r.search]),s=Hm(),o=N.useCallback((a,u)=>{const l=EU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const MG=N.createContext(null);MG.displayName="@mantine/modals/ModalsContext";function BYe(){const e=N.useContext(MG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function UYe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=BYe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(Ee,{mb:"md",children:l}),_.jsxs($s,{justify:"flex-end",...o,children:[_.jsx(Nn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Nn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[zYe,bL]=C9e("mantine-modals");bL("openModal");bL("closeModal");bL("closeAllModals");const xU=bL("openConfirmModal");function foe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function VYe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;foe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{foe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function HYe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function qYe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(VYe,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||UA();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||UA();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||UA();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);zYe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=HYe(g.props);return{modalProps:y,content:_.jsx(UYe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(MG.Provider,{value:d,children:[_.jsx(bs,{zIndex:Pc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WYe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...WYe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GYe=jr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var doe=jr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YYe=jr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KYe=jr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XYe=jr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QYe=jr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JYe=jr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZYe=jr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eKe=jr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hoe=jr("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tKe=jr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nKe=jr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rKe=jr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iKe=jr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sKe=jr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oKe=jr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aKe=jr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uKe=jr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lKe=jr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cKe=jr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fKe=jr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g_e=jr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y_e=jr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dKe=jr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v_e=jr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LG=jr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b_e=jr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hKe=jr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function __e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Lh="/SumSifter/";function poe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function w_e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const pKe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,mKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gKe={};function moe(e,t){return(gKe.jsx?mKe:pKe).test(e)}const yKe=/[ \t\n\f\r]/g;function vKe(e){return typeof e=="object"?e.type==="text"?goe(e.value):!1:goe(e)}function goe(e){return e.replace(yKe,"")===""}let LI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};LI.prototype.property={};LI.prototype.normal={};LI.prototype.space=null;function E_e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new LI(n,r,t)}function t2(e){return e.toLowerCase()}let Lc=class{constructor(t,n){this.property=t,this.attribute=n}};Lc.prototype.space=null;Lc.prototype.boolean=!1;Lc.prototype.booleanish=!1;Lc.prototype.overloadedBoolean=!1;Lc.prototype.number=!1;Lc.prototype.commaSeparated=!1;Lc.prototype.spaceSeparated=!1;Lc.prototype.commaOrSpaceSeparated=!1;Lc.prototype.mustUseProperty=!1;Lc.prototype.defined=!1;let bKe=0;const mn=Eb(),ps=Eb(),x_e=Eb(),nt=Eb(),Qr=Eb(),_w=Eb(),ol=Eb();function Eb(){return 2**++bKe}const SU=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:ps,commaOrSpaceSeparated:ol,commaSeparated:_w,number:nt,overloadedBoolean:x_e,spaceSeparated:Qr},Symbol.toStringTag,{value:"Module"})),a8=Object.keys(SU);class FG extends Lc{constructor(t,n,r,i){let s=-1;if(super(t,n),yoe(this,"space",i),typeof r=="number")for(;++s<a8.length;){const o=a8[s];yoe(this,a8[s],(r&SU[o])===SU[o])}}}FG.prototype.defined=!0;function yoe(e,t,n){n&&(e[t]=n)}const _Ke={}.hasOwnProperty;function Px(e){const t={},n={};let r;for(r in e.properties)if(_Ke.call(e.properties,r)){const i=e.properties[r],s=new FG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[t2(r)]=r,n[t2(s.attribute)]=r}return new LI(t,n,e.space)}const S_e=Px({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),T_e=Px({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function A_e(e,t){return t in e?e[t]:t}function C_e(e,t){return A_e(e,t.toLowerCase())}const I_e=Px({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:C_e,properties:{xmlns:null,xmlnsXLink:null}}),k_e=Px({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ps,ariaAutoComplete:null,ariaBusy:ps,ariaChecked:ps,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:Qr,ariaCurrent:null,ariaDescribedBy:Qr,ariaDetails:null,ariaDisabled:ps,ariaDropEffect:Qr,ariaErrorMessage:null,ariaExpanded:ps,ariaFlowTo:Qr,ariaGrabbed:ps,ariaHasPopup:null,ariaHidden:ps,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Qr,ariaLevel:nt,ariaLive:null,ariaModal:ps,ariaMultiLine:ps,ariaMultiSelectable:ps,ariaOrientation:null,ariaOwns:Qr,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:ps,ariaReadOnly:ps,ariaRelevant:null,ariaRequired:ps,ariaRoleDescription:Qr,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:ps,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),wKe=Px({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:C_e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:_w,acceptCharset:Qr,accessKey:Qr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Qr,autoFocus:mn,autoPlay:mn,blocking:Qr,capture:null,charSet:null,checked:mn,cite:null,className:Qr,cols:nt,colSpan:null,content:null,contentEditable:ps,controls:mn,controlsList:Qr,coords:nt|_w,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:x_e,draggable:ps,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Qr,height:nt,hidden:mn,high:nt,href:null,hrefLang:null,htmlFor:Qr,httpEquiv:Qr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Qr,itemRef:Qr,itemScope:mn,itemType:Qr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:nt,pattern:null,ping:Qr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Qr,required:mn,reversed:mn,rows:nt,rowSpan:nt,sandbox:Qr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:ps,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:ps,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Qr,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:ps,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),EKe=Px({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:A_e,properties:{about:ol,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:Qr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:_w,g2:_w,glyphName:_w,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:ol,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Qr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ol,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ol,rev:ol,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ol,requiredFeatures:ol,requiredFonts:ol,requiredFormats:ol,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:ol,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ol,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ol,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),xKe=/^data[-\w.:]+$/i,voe=/-[a-z]/g,SKe=/[A-Z]/g;function _L(e,t){const n=t2(t);let r=t,i=Lc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&xKe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(voe,AKe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!voe.test(s)){let o=s.replace(SKe,TKe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=FG}return new i(r,t)}function TKe(e){return"-"+e.toLowerCase()}function AKe(e){return e.charAt(1).toUpperCase()}const CKe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},FI=E_e([T_e,S_e,I_e,k_e,wKe],"html"),Ty=E_e([T_e,S_e,I_e,k_e,EKe],"svg");function boe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function R_e(e){return e.join(" ").trim()}var N_e={},_oe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,IKe=/\n/g,kKe=/^\s*/,RKe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,NKe=/^:\s*/,PKe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,DKe=/^[;\s]*/,OKe=/^\s+|\s+$/g,$Ke=`
`,woe="/",Eoe="*",I1="",MKe="comment",LKe="declaration",FKe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(IKe);m&&(n+=m.length);var g=p.lastIndexOf($Ke);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(kKe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(woe!=e.charAt(0)||Eoe!=e.charAt(1))){for(var m=2;I1!=e.charAt(m)&&(Eoe!=e.charAt(m)||woe!=e.charAt(m+1));)++m;if(m+=2,I1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:MKe,comment:g})}}function d(){var p=s(),m=u(RKe);if(m){if(f(),!u(NKe))return a("property missing ':'");var g=u(PKe),y=p({type:LKe,property:xoe(m[0].replace(_oe,I1)),value:g?xoe(g[0].replace(_oe,I1)):I1});return u(DKe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function xoe(e){return e?e.replace(OKe,I1):I1}var jKe=Zs&&Zs.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(N_e,"__esModule",{value:!0});var BKe=jKe(FKe);function UKe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,BKe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Soe=N_e.default=UKe;const zKe=Soe.default||Soe,wL=P_e("end"),Fh=P_e("start");function P_e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function VKe(e){const t=Fh(e),n=wL(e);if(t&&n)return{start:t,end:n}}function zA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Toe(e.position):"start"in e||"end"in e?Toe(e):"line"in e||"column"in e?TU(e):""}function TU(e){return Aoe(e&&e.line)+":"+Aoe(e&&e.column)}function Toe(e){return TU(e&&e.start)+"-"+TU(e&&e.end)}function Aoe(e){return e&&typeof e=="number"?e:1}class Ea extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=zA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ea.prototype.file="";Ea.prototype.name="";Ea.prototype.reason="";Ea.prototype.message="";Ea.prototype.stack="";Ea.prototype.column=void 0;Ea.prototype.line=void 0;Ea.prototype.ancestors=void 0;Ea.prototype.cause=void 0;Ea.prototype.fatal=void 0;Ea.prototype.place=void 0;Ea.prototype.ruleId=void 0;Ea.prototype.source=void 0;const jG={}.hasOwnProperty,HKe=new Map,qKe=/[A-Z]/g,WKe=/-([a-z])/g,GKe=new Set(["table","tbody","thead","tfoot","tr"]),YKe=new Set(["td","th"]),D_e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function KKe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=rXe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=nXe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ty:FI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=O_e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function O_e(e,t,n){if(t.type==="element")return XKe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return QKe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return ZKe(e,t,n);if(t.type==="mdxjsEsm")return JKe(e,t);if(t.type==="root")return eXe(e,t,n);if(t.type==="text")return tXe(e,t)}function XKe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Ty,e.schema=i),e.ancestors.push(t);const s=M_e(e,t.tagName,!1),o=iXe(e,t);let a=UG(e,t);return GKe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!vKe(u):!0})),$_e(e,o,s,t),BG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function QKe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}n2(e,t.position)}function JKe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);n2(e,t.position)}function ZKe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Ty,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:M_e(e,t.name,!0),o=sXe(e,t),a=UG(e,t);return $_e(e,o,s,t),BG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function eXe(e,t,n){const r={};return BG(r,UG(e,t)),e.create(t,e.Fragment,r,n)}function tXe(e,t){return t.value}function $_e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function BG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function nXe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function rXe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Fh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function iXe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&jG.call(t.properties,i)){const s=oXe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&YKe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function sXe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else n2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else n2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function UG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:HKe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=O_e(e,s,o);a!==void 0&&n.push(a)}return n}function oXe(e,t,n){const r=_L(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?w_e(n):R_e(n)),r.property==="style"){let i=typeof n=="object"?n:aXe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=uXe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?CKe[r.property]||r.property:r.attribute,n]}}function aXe(e,t){const n={};try{zKe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ea("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=D_e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(WKe,cXe)),n[o]=s}}function M_e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=moe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=moe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return jG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);n2(e)}function n2(e,t){const n=new Ea("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=D_e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function uXe(e){const t={};let n;for(n in e)jG.call(e,n)&&(t[lXe(n)]=e[n]);return t}function lXe(e){let t=e.replace(qKe,fXe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function cXe(e,t){return t.toUpperCase()}function fXe(e){return"-"+e.toLowerCase()}const u8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},dXe={};function hXe(e,t){const n=dXe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return L_e(e,r,i)}function L_e(e,t,n){if(pXe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Coe(e.children,t,n)}return Array.isArray(e)?Coe(e,t,n):""}function Coe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=L_e(e[i],t,n);return r.join("")}function pXe(e){return!!(e&&typeof e=="object")}const Ioe=document.createElement("i");function zG(e){const t="&"+e+";";Ioe.innerHTML=t;const n=Ioe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function pm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function sc(e,t){return e.length>0?(pm(e,e.length,0,t),e):t}const koe={}.hasOwnProperty;function mXe(e){const t={};let n=-1;for(;++n<e.length;)gXe(t,e[n]);return t}function gXe(e,t){let n;for(n in t){const i=(koe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){koe.call(i,o)||(i[o]=[]);const a=s[o];yXe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function yXe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);pm(e,0,0,r)}function F_e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function ww(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pd=Ay(/[A-Za-z]/),vl=Ay(/[\dA-Za-z]/),vXe=Ay(/[#-'*+\--9=?A-Z^-~]/);function AU(e){return e!==null&&(e<32||e===127)}const CU=Ay(/\d/),bXe=Ay(/[\dA-Fa-f]/),_Xe=Ay(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function Mu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const wXe=Ay(new RegExp("\\p{P}|\\p{S}","u")),EXe=Ay(/\s/);function Ay(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Dx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&vl(e.charCodeAt(n+1))&&vl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ei(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const xXe={tokenize:SXe};function SXe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ei(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const TXe={tokenize:AXe},Roe={tokenize:CXe};function AXe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return pm(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Roe,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Roe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return en(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let A=T,C,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){I=t.events[A][1].end;break}C=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;pm(t.events,A+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function CXe(e,t,n){return ei(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Noe(e){if(e===null||Mu(e)||EXe(e))return 1;if(wXe(e))return 2}function VG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const IU={name:"attention",tokenize:kXe,resolveAll:IXe};function IXe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Poe(f,-u),Poe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=sc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=sc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=sc(l,VG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=sc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=sc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,pm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function kXe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Noe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Noe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Poe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const RXe={name:"autolink",tokenize:NXe};function NXe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Pd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||vl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||vl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||AU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):vXe(h)?(e.consume(h),l):n(h)}function c(h){return vl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||vl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const EL={tokenize:PXe,partial:!0};function PXe(e,t,n){return r;function r(s){return br(s)?ei(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const j_e={name:"blockQuote",tokenize:DXe,continuation:{tokenize:OXe},exit:$Xe};function DXe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function OXe(e,t,n){const r=this;return i;function i(o){return br(o)?ei(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(j_e,t,n)(o)}}function $Xe(e){e.exit("blockQuote")}const B_e={name:"characterEscape",tokenize:MXe};function MXe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return _Xe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const U_e={name:"characterReference",tokenize:LXe};function LXe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=vl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=bXe,c):(e.enter("characterReferenceValue"),s=7,o=CU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===vl&&!zG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Doe={tokenize:jXe,partial:!0},Ooe={name:"codeFenced",tokenize:FXe,concrete:!0};function FXe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),br(S)?ei(e,f,"whitespace")(S):f(S))}function f(S){return S===null||en(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(Doe,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||en(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):br(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ei(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||en(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||en(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&br(S)?ei(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||en(S)?e.check(Doe,m,w)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||en(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,T,A){let C=0;return I;function I(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),R}function R(F){return S.enter("codeFencedFence"),br(F)?ei(S,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):M(F)}function M(F){return F===a?(S.enter("codeFencedFenceSequence"),P(F)):A(F)}function P(F){return F===a?(C++,S.consume(F),P):C>=o?(S.exit("codeFencedFenceSequence"),br(F)?ei(S,O,"whitespace")(F):O(F)):A(F)}function O(F){return F===null||en(F)?(S.exit("codeFencedFence"),T(F)):A(F)}}}function jXe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const l8={name:"codeIndented",tokenize:UXe},BXe={tokenize:zXe,partial:!0};function UXe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ei(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(BXe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function zXe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ei(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const VXe={name:"codeText",tokenize:WXe,resolve:HXe,previous:qXe};function HXe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function qXe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function WXe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class GXe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&XS(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),XS(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),XS(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);XS(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);XS(this.left,n.reverse())}}}function XS(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function z_e(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new GXe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,YXe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return pm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function YXe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const KXe={tokenize:JXe,resolve:QXe},XXe={tokenize:ZXe,partial:!0};function QXe(e){return z_e(e),e}function JXe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(XXe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ZXe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ei(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function V_e(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||AU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Mu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||AU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function H_e(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function q_e(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ei(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function VA(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?ei(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const eQe={name:"definition",tokenize:nQe},tQe={tokenize:rQe,partial:!0};function nQe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return H_e.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=ww(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Mu(h)?VA(e,l)(h):l(h)}function l(h){return V_e(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(tQe,f,f)(h)}function f(h){return br(h)?ei(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function rQe(e,t,n){return r;function r(a){return Mu(a)?VA(e,i)(a):n(a)}function i(a){return q_e(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?ei(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const iQe={name:"hardBreakEscape",tokenize:sQe};function sQe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const oQe={name:"headingAtx",tokenize:uQe,resolve:aQe};function aQe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},pm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function uQe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Mu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):br(c)?ei(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Mu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const lQe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$oe=["pre","script","style","textarea"],cQe={name:"htmlFlow",tokenize:pQe,resolveTo:hQe,concrete:!0},fQe={tokenize:gQe,partial:!0},dQe={tokenize:mQe,partial:!0};function hQe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function pQe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):Pd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Pd(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:M:p):n(j)}function m(j){return Pd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Mu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&$oe.includes(G)?(i=1,r.interrupt?t(j):M(j)):lQe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):M(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||vl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:M):n(j)}function v(j){return br(j)?(e.consume(j),v):I(j)}function b(j){return j===47?(e.consume(j),I):j===58||j===95||Pd(j)?(e.consume(j),w):br(j)?(e.consume(j),b):I(j)}function w(j){return j===45||j===46||j===58||j===95||vl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):br(j)?(e.consume(j),E):b(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,T):br(j)?(e.consume(j),S):A(j)}function T(j){return j===u?(e.consume(j),u=null,C):j===null||en(j)?n(j):(e.consume(j),T)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Mu(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||br(j)?b(j):n(j)}function I(j){return j===62?(e.consume(j),R):n(j)}function R(j){return j===null||en(j)?M(j):br(j)?(e.consume(j),R):n(j)}function M(j){return j===45&&i===2?(e.consume(j),L):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),H):en(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(fQe,W,P)(j)):j===null||en(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),M)}function P(j){return e.check(dQe,O,W)(j)}function O(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||en(j)?P(j):(e.enter("htmlFlowData"),M(j))}function L(j){return j===45?(e.consume(j),D):M(j)}function B(j){return j===47?(e.consume(j),o="",U):M(j)}function U(j){if(j===62){const q=o.toLowerCase();return $oe.includes(q)?(e.consume(j),z):M(j)}return Pd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):M(j)}function H(j){return j===93?(e.consume(j),D):M(j)}function D(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),D):M(j)}function z(j){return j===null||en(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function mQe(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function gQe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(EL,t,n)}}const yQe={name:"htmlText",tokenize:vQe};function vQe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):Pd(D)?(e.consume(D),A):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):Pd(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):en(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?L(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):en(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?L(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?L(D):en(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):en(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?L(D):b(D)}function E(D){return Pd(D)?(e.consume(D),S):n(D)}function S(D){return D===45||vl(D)?(e.consume(D),S):T(D)}function T(D){return en(D)?(o=T,B(D)):br(D)?(e.consume(D),T):L(D)}function A(D){return D===45||vl(D)?(e.consume(D),A):D===47||D===62||Mu(D)?C(D):n(D)}function C(D){return D===47?(e.consume(D),L):D===58||D===95||Pd(D)?(e.consume(D),I):en(D)?(o=C,B(D)):br(D)?(e.consume(D),C):L(D)}function I(D){return D===45||D===46||D===58||D===95||vl(D)?(e.consume(D),I):R(D)}function R(D){return D===61?(e.consume(D),M):en(D)?(o=R,B(D)):br(D)?(e.consume(D),R):C(D)}function M(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):en(D)?(o=M,B(D)):br(D)?(e.consume(D),M):(e.consume(D),O)}function P(D){return D===i?(e.consume(D),i=void 0,F):D===null?n(D):en(D)?(o=P,B(D)):(e.consume(D),P)}function O(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Mu(D)?C(D):(e.consume(D),O)}function F(D){return D===47||D===62||Mu(D)?C(D):n(D)}function L(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),U}function U(D){return br(D)?ei(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):H(D)}function H(D){return e.enter("htmlTextData"),o(D)}}const HG={name:"labelEnd",tokenize:SQe,resolveTo:xQe,resolveAll:EQe},bQe={tokenize:TQe},_Qe={tokenize:AQe},wQe={tokenize:CQe};function EQe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function xQe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=sc(a,e.slice(s+1,s+r+3)),a=sc(a,[["enter",c,t]]),a=sc(a,VG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=sc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=sc(a,e.slice(o+1)),a=sc(a,[["exit",u,t]]),pm(e,s,e.length,a),e}function SQe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(ww(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(bQe,c,o?c:f)(d):d===91?e.attempt(_Qe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(wQe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function TQe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Mu(f)?VA(e,s)(f):s(f)}function s(f){return f===41?c(f):V_e(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Mu(f)?VA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?q_e(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Mu(f)?VA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function AQe(e,t,n){const r=this;return i;function i(a){return H_e.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ww(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function CQe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const IQe={name:"labelStartImage",tokenize:kQe,resolveAll:HG.resolveAll};function kQe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const RQe={name:"labelStartLink",tokenize:NQe,resolveAll:HG.resolveAll};function NQe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const c8={name:"lineEnding",tokenize:PQe};function PQe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ei(e,t,"linePrefix")}}const DP={name:"thematicBreak",tokenize:DQe};function DQe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?ei(e,a,"whitespace")(l):a(l))}}const fu={name:"list",tokenize:MQe,continuation:{tokenize:LQe},exit:jQe},OQe={tokenize:BQe,partial:!0},$Qe={tokenize:FQe,partial:!0};function MQe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:CU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(DP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return CU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(EL,r.interrupt?n:c,e.attempt(OQe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function LQe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(EL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ei(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt($Qe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ei(e,e.attempt(fu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function FQe(e,t,n){const r=this;return ei(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function jQe(e){e.exit(this.containerState.type)}function BQe(e,t,n){const r=this;return ei(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Moe={name:"setextUnderline",tokenize:zQe,resolveTo:UQe};function UQe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function zQe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?ei(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const VQe={tokenize:HQe};function HQe(e){const t=this,n=e.attempt(EL,r,e.attempt(this.parser.constructs.flowInitial,i,ei(e,e.attempt(this.parser.constructs.flow,i,e.attempt(KXe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const qQe={resolveAll:G_e()},WQe=W_e("string"),GQe=W_e("text");function W_e(e){return{tokenize:t,resolveAll:G_e(e==="text"?YQe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function G_e(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function YQe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function KQe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:T(E),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=sc(o,R),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=VG(s,l.events,l),l.events)}function d(R,M){return QQe(h(R),M)}function h(R){return XQe(o,R)}function p(){const{line:R,column:M,offset:P,_index:O,_bufferIndex:F}=r;return{line:R,column:M,offset:P,_index:O,_bufferIndex:F}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const M=o[r._index];if(typeof M=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<M.length;)y(M.charCodeAt(r._bufferIndex));else y(M)}}function y(R){c=c(R)}function v(R){en(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,M){const P=M||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(R){const M=a.pop();return M.end=p(),l.events.push(["exit",M,l]),M}function E(R,M){A(R,M.from)}function S(R,M){M.restore()}function T(R,M){return P;function P(O,F,L){let B,U,H,D;return Array.isArray(O)?W(O):"tokenize"in O?W([O]):z(O);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ye=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?L:j(ne[U])}function j(ne){return ce;function ce(de){return D=C(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(M?Object.assign(Object.create(l),M):l,u,q,G)(de)}}function q(ne){return R(H,D),F}function G(ne){return D.restore(),++U<B.length?j(B[U]):L}}}function A(R,M){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&pm(l.events,M,l.events.length-M,R.resolve(l.events.slice(M),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function C(){const R=p(),M=l.previous,P=l.currentConstruct,O=l.events.length,F=Array.from(a);return{restore:L,from:O};function L(){r=R,l.previous=M,l.currentConstruct=P,l.events.length=O,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function XQe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function QQe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const JQe={42:fu,43:fu,45:fu,48:fu,49:fu,50:fu,51:fu,52:fu,53:fu,54:fu,55:fu,56:fu,57:fu,62:j_e},ZQe={91:eQe},eJe={[-2]:l8,[-1]:l8,32:l8},tJe={35:oQe,42:DP,45:[Moe,DP],60:cQe,61:Moe,95:DP,96:Ooe,126:Ooe},nJe={38:U_e,92:B_e},rJe={[-5]:c8,[-4]:c8,[-3]:c8,33:IQe,38:U_e,42:IU,60:[RXe,yQe],91:RQe,92:[iQe,B_e],93:HG,95:IU,96:VXe},iJe={null:[IU,qQe]},sJe={null:[42,95]},oJe={null:[]},aJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:sJe,contentInitial:ZQe,disable:oJe,document:JQe,flow:tJe,flowInitial:eJe,insideSpan:iJe,string:nJe,text:rJe},Symbol.toStringTag,{value:"Module"}));function uJe(e){const n=mXe([aJe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(xXe),document:i(TXe),flow:i(VQe),string:i(WQe),text:i(GQe)};return r;function i(s){return o;function o(a){return KQe(r,s,a)}}}function lJe(e){for(;!z_e(e););return e}const Loe=/[\0\t\n\r]/g;function cJe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Loe.lastIndex=f,l=Loe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const fJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function dJe(e){return e.replace(fJe,hJe)}function hJe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return F_e(n.slice(s?2:1),s?16:10)}return zG(n)||e}const Y_e={}.hasOwnProperty;function pJe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),mJe(n)(lJe(uJe(n).document().write(cJe()(e,t,!0))))}function mJe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(gt),blockQuote:s(ye),characterEscape:C,characterReference:C,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(ve,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(be,o),htmlFlowData:C,htmlText:s(be,o),htmlTextData:C,image:s(ke),label:o,link:s(ze),listItem:s(Dt),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(gt),strong:s(me),thematicBreak:s(yt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(F),codeTextData:I,data:I,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u(P),htmlFlowData:I,htmlText:u(O),htmlTextData:I,image:u(B),label:H,labelText:U,lineEnding:R,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:D,resourceTitleString:z,resource:W,setextHeading:u(A),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};K_e(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ce={type:"root",children:[]};const He={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Ln=ut.pop();_t=i(pe,Ln,_t)}for(_t=-1;++_t<pe.length;){const Ln=t[pe[_t][0]];Y_e.call(Ln,pe[_t][1].type)&&Ln[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},He),pe[_t][1])}if(He.tokenStack.length>0){const Ln=He.tokenStack[He.tokenStack.length-1];(Ln[1]||Foe).call(He,void 0,Ln[0])}for(Ce.position={start:fg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:fg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(pe,Ce,He){let ut=Ce-1,_t=-1,Ln=!1,Tr,Fn,cr,pn;for(;++ut<=He;){const Tn=pe[ut];switch(Tn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Tn[0]==="enter"?_t++:_t--,pn=void 0;break}case"lineEndingBlank":{Tn[0]==="enter"&&(Tr&&!pn&&!_t&&!cr&&(cr=ut),pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pn=void 0}if(!_t&&Tn[0]==="enter"&&Tn[1].type==="listItemPrefix"||_t===-1&&Tn[0]==="exit"&&(Tn[1].type==="listUnordered"||Tn[1].type==="listOrdered")){if(Tr){let nr=ut;for(Fn=void 0;nr--;){const rr=pe[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Fn&&(pe[Fn][1].type="lineEndingBlank",Ln=!0),rr[1].type="lineEnding",Fn=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Fn||cr<Fn)&&(Tr._spread=!0),Tr.end=Object.assign({},Fn?pe[Fn][1].start:Tn[1].end),pe.splice(Fn||ut,0,["exit",Tr,Tn[2]]),ut++,He++}if(Tn[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},Tn[1].start),end:void 0};Tr=nr,pe.splice(ut,0,["enter",nr,Tn[2]]),ut++,He++,cr=void 0,pn=!0}}}return pe[Ce][1]._spread=Ln,He}function s(pe,Ce){return He;function He(ut){a.call(this,pe(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ce,He){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ce,He]),pe.position={start:fg(Ce.start),end:void 0}}function u(pe){return Ce;function Ce(He){pe&&pe.call(this,He),l.call(this,He)}}function l(pe,Ce){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ce?Ce.call(this,pe,ut[0]):(ut[1]||Foe).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+zA({start:pe.start,end:pe.end})+"): it’s not open");He.position.end=fg(pe.end)}function c(){return hXe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=pe}function p(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=ww(this.sliceSerialize(pe)).toLowerCase()}function b(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function w(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function E(pe){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const He=this.sliceSerialize(pe).length;Ce.depth=He}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(pe){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(pe){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=dt(),ut.position={start:fg(pe.start),end:void 0},He.push(ut)),this.stack.push(ut)}function I(pe){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(pe),Ce.position.end=fg(pe.end)}function R(pe){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ce.children[Ce.children.length-1];He.position.end=fg(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(C.call(this,pe),I.call(this,pe))}function M(){this.data.atHardBreak=!0}function P(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function O(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function F(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function L(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function U(pe){const Ce=this.sliceSerialize(pe),He=this.stack[this.stack.length-2];He.label=dJe(Ce),He.identifier=ww(Ce).toLowerCase()}function H(){const pe=this.stack[this.stack.length-1],Ce=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=pe.children;He.children=ut}else He.alt=Ce}function D(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function z(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=ww(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ce=this.sliceSerialize(pe),He=this.data.characterReferenceType;let ut;He?(ut=F_e(Ce,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=zG(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ce=this.stack.pop();Ce.position.end=fg(pe.end)}function de(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(pe)}function he(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(pe)}function ye(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function gt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function be(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Dt(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function me(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function yt(){return{type:"thematicBreak"}}}function fg(e){return{line:e.line,column:e.column,offset:e.offset}}function K_e(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?K_e(e,r):gJe(e,r)}}function gJe(e,t){let n;for(n in t)if(Y_e.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Foe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+zA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+zA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+zA({start:t.start,end:t.end})+") is still open")}function yJe(e){const t=this;t.parser=n;function n(r){return pJe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function vJe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function bJe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function _Je(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function wJe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function EJe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xJe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Dx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function SJe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function TJe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function X_e(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function AJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return X_e(e,t);const i={src:Dx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function CJe(e,t){const n={src:Dx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function IJe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function kJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return X_e(e,t);const i={href:Dx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function RJe(e,t){const n={href:Dx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function NJe(e,t,n){const r=e.all(t),i=n?PJe(n):Q_e(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function PJe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Q_e(n[r])}return t}function Q_e(e){const t=e.spread;return t??e.children.length>1}function DJe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function OJe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $Je(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function MJe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function LJe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Fh(t.children[1]),u=wL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function FJe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function jJe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const joe=9,Boe=32;function BJe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Uoe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Uoe(t.slice(i),i>0,!1)),s.join("")}function Uoe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===joe||s===Boe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===joe||s===Boe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function UJe(e,t){const n={type:"text",value:BJe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function zJe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const VJe={blockquote:vJe,break:bJe,code:_Je,delete:wJe,emphasis:EJe,footnoteReference:xJe,heading:SJe,html:TJe,imageReference:AJe,image:CJe,inlineCode:IJe,linkReference:kJe,link:RJe,listItem:NJe,list:DJe,paragraph:OJe,root:$Je,strong:MJe,table:LJe,tableCell:jJe,tableRow:FJe,text:UJe,thematicBreak:zJe,toml:XR,yaml:XR,definition:XR,footnoteDefinition:XR};function XR(){}const J_e=-1,xL=0,_O=1,wO=2,qG=3,WG=4,GG=5,YG=6,Z_e=7,ewe=8,zoe=typeof self=="object"?self:globalThis,HJe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case xL:case J_e:return n(o,i);case _O:{const a=n([],i);for(const u of o)a.push(r(u));return a}case wO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case qG:return n(new Date(o),i);case WG:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case GG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case YG:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case Z_e:{const{name:a,message:u}=o;return n(new zoe[a](u),i)}case ewe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new zoe[s](o),i)};return r},Voe=e=>HJe(new Map,e)(0),s_="",{toString:qJe}={},{keys:WJe}=Object,QS=e=>{const t=typeof e;if(t!=="object"||!e)return[xL,t];const n=qJe.call(e).slice(8,-1);switch(n){case"Array":return[_O,s_];case"Object":return[wO,s_];case"Date":return[qG,s_];case"RegExp":return[WG,s_];case"Map":return[GG,s_];case"Set":return[YG,s_]}return n.includes("Array")?[_O,n]:n.includes("Error")?[Z_e,n]:[wO,n]},QR=([e,t])=>e===xL&&(t==="function"||t==="symbol"),GJe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=QS(o);switch(a){case xL:{let c=o;switch(u){case"bigint":a=ewe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([J_e],o)}return i([a,c],o)}case _O:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case wO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of WJe(o))(e||!QR(QS(o[d])))&&c.push([s(d),s(o[d])]);return f}case qG:return i([a,o.toISOString()],o);case WG:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case GG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(QR(QS(d))||QR(QS(h))))&&c.push([s(d),s(h)]);return f}case YG:{const c=[],f=i([a,c],o);for(const d of o)(e||!QR(QS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Hoe=(e,{json:t,lossy:n}={})=>{const r=[];return GJe(!(t||n),!!t,new Map,r)(e),r},uE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Voe(Hoe(e,t)):structuredClone(e):(e,t)=>Voe(Hoe(e,t));function YJe(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function KJe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function XJe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||YJe,r=e.options.footnoteBackLabel||KJe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=Dx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...uE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const twe=function(e){if(e==null)return eZe;if(typeof e=="function")return SL(e);if(typeof e=="object")return Array.isArray(e)?QJe(e):JJe(e);if(typeof e=="string")return ZJe(e);throw new Error("Expected function, string, or object as test")};function QJe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=twe(e[n]);return SL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function JJe(e){const t=e;return SL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function ZJe(e){return SL(t);function t(n){return n&&n.type===e}}function SL(e){return t;function t(n,r,i){return!!(tZe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function eZe(){return!0}function tZe(e){return e!==null&&typeof e=="object"&&"type"in e}const nwe=[],nZe=!0,qoe=!1,rZe="skip";function iZe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=twe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=nwe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=sZe(n(u,c)),h[0]===qoe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==rZe)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===qoe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function sZe(e){return Array.isArray(e)?e:typeof e=="number"?[nZe,e]:e==null?nwe:[e]}function KG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),iZe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const kU={}.hasOwnProperty,oZe={};function aZe(e,t){const n=t||oZe,r=new Map,i=new Map,s=new Map,o={...VJe,...n.handlers},a={all:l,applyData:lZe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:uZe,wrap:fZe};return KG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(kU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=uE(g);return y.children=a.all(c),y}return uE(c)}return(a.options.unknownHandler||cZe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Woe(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Woe(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function uZe(e,t){e.position&&(t.position=VKe(e))}function lZe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,uE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function cZe(e,t){const n=t.data||{},r="value"in t&&!(kU.call(n,"hProperties")||kU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function fZe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Woe(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Goe(e,t){const n=aZe(e,t),r=n.one(e,void 0),i=XJe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function dZe(e,t){return e&&"run"in e?async function(n,r){const i=Goe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Goe(n,{file:r,...t||e})}}function Yoe(e){if(e)throw e}var OP=Object.prototype.hasOwnProperty,rwe=Object.prototype.toString,Koe=Object.defineProperty,Xoe=Object.getOwnPropertyDescriptor,Qoe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):rwe.call(t)==="[object Array]"},Joe=function(t){if(!t||rwe.call(t)!=="[object Object]")return!1;var n=OP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&OP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||OP.call(t,i)},Zoe=function(t,n){Koe&&n.name==="__proto__"?Koe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},eae=function(t,n){if(n==="__proto__")if(OP.call(t,n)){if(Xoe)return Xoe(t,n).value}else return;return t[n]},hZe=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=eae(a,n),i=eae(t,n),a!==i&&(c&&i&&(Joe(i)||(s=Qoe(i)))?(s?(s=!1,o=r&&Qoe(r)?r:[]):o=r&&Joe(r)?r:{},Zoe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Zoe(a,{name:n,newValue:i}));return a};const f8=Ul(hZe);function RU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function pZe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?mZe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function mZe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Ed={basename:gZe,dirname:yZe,extname:vZe,join:bZe,sep:"/"};function gZe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');jI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function yZe(e){if(jI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function vZe(e){jI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function bZe(...e){let t=-1,n;for(;++t<e.length;)jI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":_Ze(n)}function _Ze(e){jI(e);const t=e.codePointAt(0)===47;let n=wZe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function wZe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function jI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const EZe={cwd:xZe};function xZe(){return"/"}function NU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function SZe(e){if(typeof e=="string")e=new URL(e);else if(!NU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return TZe(e)}function TZe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const d8=["history","path","basename","stem","extname","dirname"];class iwe{constructor(t){let n;t?NU(t)?n={path:t}:typeof t=="string"||AZe(t)?n={value:t}:n=t:n={},this.cwd=EZe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<d8.length;){const s=d8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)d8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ed.basename(this.path):void 0}set basename(t){p8(t,"basename"),h8(t,"basename"),this.path=Ed.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ed.dirname(this.path):void 0}set dirname(t){tae(this.basename,"dirname"),this.path=Ed.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ed.extname(this.path):void 0}set extname(t){if(h8(t,"extname"),tae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ed.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){NU(t)&&(t=SZe(t)),p8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ed.basename(this.path,this.extname):void 0}set stem(t){p8(t,"stem"),h8(t,"stem"),this.path=Ed.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ea(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function h8(e,t){if(e&&e.includes(Ed.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ed.sep+"`")}function p8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function tae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function AZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const CZe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},IZe={}.hasOwnProperty;class XG extends CZe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pZe()}copy(){const t=new XG;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(f8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(y8("data",this.frozen),this.namespace[t]=n,this):IZe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(y8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=JR(t),r=this.parser||this.Parser;return m8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),m8("process",this.parser||this.Parser),g8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=JR(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);NZe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),m8("processSync",this.parser||this.Parser),g8("processSync",this.compiler||this.Compiler),this.process(t,i),rae("processSync","process",n),r;function i(s,o){n=!0,Yoe(s),r=o}}run(t,n,r){nae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=JR(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),rae("runSync","run",r),i;function s(o,a){Yoe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=JR(n),i=this.compiler||this.Compiler;return g8("stringify",i),nae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(y8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=f8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];RU(m)&&RU(h)&&(h=f8(!0,m,h)),r[d]=[l,h,...p]}}}}const kZe=new XG().freeze();function m8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function g8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function y8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nae(e){if(!RU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function rae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function JR(e){return RZe(e)?e:new iwe(e)}function RZe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function NZe(e){return typeof e=="string"||PZe(e)}function PZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const DZe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",iae=[],sae={allowDangerousHtml:!0},OZe=/^(https?|ircs?|mailto|xmpp)$/i,$Ze=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function MZe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||iae,u=e.remarkPlugins||iae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...sae}:sae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||LZe,h=kZe().use(yJe).use(u).use(dZe,l).use(a),p=new iwe;typeof r=="string"&&(p.value=r);for(const v of $Ze)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+DZe+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),KG(g,y),KKe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in u8)if(Object.hasOwn(u8,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],T=u8[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function LZe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||OZe.test(e.slice(0,t))?e:""}const oae=/[#.]/g;function FZe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){oae.lastIndex=i;const a=oae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const jZe=new Set(["button","menu","reset","submit"]),PU={}.hasOwnProperty;function swe(e,t,n){const r=n&&VZe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=FZe(s,t),l.tagName=l.tagName.toLowerCase(),r&&PU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),BZe(o,l.tagName)){let c;for(c in o)PU.call(o,c)&&UZe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)DU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function BZe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?jZe.has(e.type.toLowerCase()):!("value"in e)}function UZe(e,t,n,r){const i=_L(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=boe(r):i.commaSeparated?o=poe(r):i.commaOrSpaceSeparated?o=boe(poe(r).join(" ")):o=aae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?zZe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=aae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function DU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)DU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?DU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function aae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||t2(n)===t2(t)))return!0}return n}function zZe(e){const t=[];let n;for(n in e)PU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function VZe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const HZe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],qZe=swe(FI,"div"),WZe=swe(Ty,"g",HZe),v8=/\r?\n|\r/g;function GZe(e){const t=String(e),n=[];for(v8.lastIndex=0;v8.test(t);)n.push(v8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const q1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},owe={}.hasOwnProperty,YZe=Object.prototype;function KZe(e,t){const n=t||{};return QG({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ty:FI,verbose:n.verbose||!1},e)}function QG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},$P(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:awe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=GZe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},$P(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},$P(e,r,n),n}default:return n=XZe(e,t),n}}function awe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=QG(e,t[n]);r.push(i)}return r}function XZe(e,t){const n=e.schema;e.schema=t.namespaceURI===q1.svg?Ty:FI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;owe.call(YZe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?WZe:qZe)(t.tagName,i,awe(e,t.childNodes));if($P(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&K_(u.startTag),c=u&&u.endTag&&K_(u.endTag),f=QG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function $P(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=QZe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function QZe(e,t,n){const r=K_(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)owe.call(n.attrs,o)&&(s[_L(e.schema,o).property]=K_(n.attrs[o]));n.startTag;const a=K_(n.startTag),u=n.endTag?K_(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function K_(e){const t=uae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=uae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function uae(e){return e.line&&e.column?e:void 0}const lae={}.hasOwnProperty;function uwe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&lae.call(i,e)){const u=String(i[e]);o=lae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const JZe={},ZZe={}.hasOwnProperty,lwe=uwe("type",{handlers:{root:tet,element:oet,text:iet,comment:set,doctype:ret}});function eet(e,t){const r=(t||JZe).space;return lwe(e,r==="svg"?Ty:FI)}function tet(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=JG(e.children,n,t),Ox(e,n),n}function net(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=JG(e.children,n,t),Ox(e,n),n}function ret(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Ox(e,t),t}function iet(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Ox(e,t),t}function set(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Ox(e,t),t}function oet(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Ty);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&ZZe.call(e.properties,s)){const u=aet(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:q1[o],childNodes:[],parentNode:null};return a.childNodes=JG(e.children,a,r),Ox(e,a),e.tagName==="template"&&e.content&&(a.content=net(e.content,r)),a}function aet(e,t,n){const r=_L(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?w_e(n):R_e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=q1[r.space]}return i}function JG(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=lwe(e[r],n);s.parentNode=t,i.push(s)}return i}function Ox(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const uet=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],cet=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),gi="�";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const lu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function cwe(e){return e>=55296&&e<=57343}function fet(e){return e>=56320&&e<=57343}function det(e,t){return(e-55296)*1024+9216+t}function fwe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function dwe(e){return e>=64976&&e<=65007||cet.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const het=65536;class pet{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=het,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(fet(n))return this.pos++,this._addGap(),det(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,cwe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){fwe(t)?this._err(Ne.controlCharacterInInputStream):dwe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var In;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(In=In||(In={}));function hwe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const yg=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),met=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var b8;const get=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),yet=(b8=String.fromCodePoint)!==null&&b8!==void 0?b8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function vet(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=get.get(e))!==null&&t!==void 0?t:e}var Qs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Qs||(Qs={}));const bet=32;var qd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(qd||(qd={}));function OU(e){return e>=Qs.ZERO&&e<=Qs.NINE}function _et(e){return e>=Qs.UPPER_A&&e<=Qs.UPPER_F||e>=Qs.LOWER_A&&e<=Qs.LOWER_F}function wet(e){return e>=Qs.UPPER_A&&e<=Qs.UPPER_Z||e>=Qs.LOWER_A&&e<=Qs.LOWER_Z||OU(e)}function Eet(e){return e===Qs.EQUALS||wet(e)}var Hs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Hs||(Hs={}));var k1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(k1||(k1={}));class xet{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Hs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=k1.Strict}startEntity(t){this.decodeMode=t,this.state=Hs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Hs.EntityStart:return t.charCodeAt(n)===Qs.NUM?(this.state=Hs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Hs.NamedEntity,this.stateNamedEntity(t,n));case Hs.NumericStart:return this.stateNumericStart(t,n);case Hs.NumericDecimal:return this.stateNumericDecimal(t,n);case Hs.NumericHex:return this.stateNumericHex(t,n);case Hs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|bet)===Qs.LOWER_X?(this.state=Hs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Hs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(OU(i)||_et(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(OU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Qs.SEMI)this.consumed+=1;else if(this.decodeMode===k1.Strict)return 0;return this.emitCodePoint(vet(this.result),this.consumed),this.errors&&(t!==Qs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&qd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=mwe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===k1.Attribute&&(s===0||Eet(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&qd.VALUE_LENGTH)>>14,s!==0){if(o===Qs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==k1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&qd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~qd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Hs.NamedEntity:return this.result!==0&&(this.decodeMode!==k1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Hs.NumericDecimal:return this.emitNumericEntity(0,2);case Hs.NumericHex:return this.emitNumericEntity(0,3);case Hs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Hs.EntityStart:return 0}}}function pwe(e){let t="";const n=new xet(e,r=>t+=yet(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function mwe(e,t,n,r){const i=(t&qd.BRANCH_LENGTH)>>7,s=t&qd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}pwe(yg);pwe(met);var Le;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Le=Le||(Le={}));var d0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(d0=d0||(d0={}));var fl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(fl=fl||(fl={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var k;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(k=k||(k={}));const Tet=new Map([[we.A,k.A],[we.ADDRESS,k.ADDRESS],[we.ANNOTATION_XML,k.ANNOTATION_XML],[we.APPLET,k.APPLET],[we.AREA,k.AREA],[we.ARTICLE,k.ARTICLE],[we.ASIDE,k.ASIDE],[we.B,k.B],[we.BASE,k.BASE],[we.BASEFONT,k.BASEFONT],[we.BGSOUND,k.BGSOUND],[we.BIG,k.BIG],[we.BLOCKQUOTE,k.BLOCKQUOTE],[we.BODY,k.BODY],[we.BR,k.BR],[we.BUTTON,k.BUTTON],[we.CAPTION,k.CAPTION],[we.CENTER,k.CENTER],[we.CODE,k.CODE],[we.COL,k.COL],[we.COLGROUP,k.COLGROUP],[we.DD,k.DD],[we.DESC,k.DESC],[we.DETAILS,k.DETAILS],[we.DIALOG,k.DIALOG],[we.DIR,k.DIR],[we.DIV,k.DIV],[we.DL,k.DL],[we.DT,k.DT],[we.EM,k.EM],[we.EMBED,k.EMBED],[we.FIELDSET,k.FIELDSET],[we.FIGCAPTION,k.FIGCAPTION],[we.FIGURE,k.FIGURE],[we.FONT,k.FONT],[we.FOOTER,k.FOOTER],[we.FOREIGN_OBJECT,k.FOREIGN_OBJECT],[we.FORM,k.FORM],[we.FRAME,k.FRAME],[we.FRAMESET,k.FRAMESET],[we.H1,k.H1],[we.H2,k.H2],[we.H3,k.H3],[we.H4,k.H4],[we.H5,k.H5],[we.H6,k.H6],[we.HEAD,k.HEAD],[we.HEADER,k.HEADER],[we.HGROUP,k.HGROUP],[we.HR,k.HR],[we.HTML,k.HTML],[we.I,k.I],[we.IMG,k.IMG],[we.IMAGE,k.IMAGE],[we.INPUT,k.INPUT],[we.IFRAME,k.IFRAME],[we.KEYGEN,k.KEYGEN],[we.LABEL,k.LABEL],[we.LI,k.LI],[we.LINK,k.LINK],[we.LISTING,k.LISTING],[we.MAIN,k.MAIN],[we.MALIGNMARK,k.MALIGNMARK],[we.MARQUEE,k.MARQUEE],[we.MATH,k.MATH],[we.MENU,k.MENU],[we.META,k.META],[we.MGLYPH,k.MGLYPH],[we.MI,k.MI],[we.MO,k.MO],[we.MN,k.MN],[we.MS,k.MS],[we.MTEXT,k.MTEXT],[we.NAV,k.NAV],[we.NOBR,k.NOBR],[we.NOFRAMES,k.NOFRAMES],[we.NOEMBED,k.NOEMBED],[we.NOSCRIPT,k.NOSCRIPT],[we.OBJECT,k.OBJECT],[we.OL,k.OL],[we.OPTGROUP,k.OPTGROUP],[we.OPTION,k.OPTION],[we.P,k.P],[we.PARAM,k.PARAM],[we.PLAINTEXT,k.PLAINTEXT],[we.PRE,k.PRE],[we.RB,k.RB],[we.RP,k.RP],[we.RT,k.RT],[we.RTC,k.RTC],[we.RUBY,k.RUBY],[we.S,k.S],[we.SCRIPT,k.SCRIPT],[we.SECTION,k.SECTION],[we.SELECT,k.SELECT],[we.SOURCE,k.SOURCE],[we.SMALL,k.SMALL],[we.SPAN,k.SPAN],[we.STRIKE,k.STRIKE],[we.STRONG,k.STRONG],[we.STYLE,k.STYLE],[we.SUB,k.SUB],[we.SUMMARY,k.SUMMARY],[we.SUP,k.SUP],[we.TABLE,k.TABLE],[we.TBODY,k.TBODY],[we.TEMPLATE,k.TEMPLATE],[we.TEXTAREA,k.TEXTAREA],[we.TFOOT,k.TFOOT],[we.TD,k.TD],[we.TH,k.TH],[we.THEAD,k.THEAD],[we.TITLE,k.TITLE],[we.TR,k.TR],[we.TRACK,k.TRACK],[we.TT,k.TT],[we.U,k.U],[we.UL,k.UL],[we.SVG,k.SVG],[we.VAR,k.VAR],[we.WBR,k.WBR],[we.XMP,k.XMP]]);function $x(e){var t;return(t=Tet.get(e))!==null&&t!==void 0?t:k.UNKNOWN}const Qe=k,Aet={[Le.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Le.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Le.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Le.XLINK]:new Set,[Le.XML]:new Set,[Le.XMLNS]:new Set};function gwe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const Cet=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const is={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function HA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function qT(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Iet(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function vg(e){return Iet(e)||qT(e)}function $U(e){return vg(e)||HA(e)}function ywe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function vwe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function ket(e){return HA(e)||ywe(e)||vwe(e)}function ZR(e){return e+32}function bwe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Ret(e){return e===X.EQUALS_SIGN||$U(e)}function cae(e){return bwe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Net{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new pet(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:In.START_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:In.END_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:In.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:In.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(hwe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=$x(t.tagName),t.type===In.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case In.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case In.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case In.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:In.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=bwe(t)?In.WHITESPACE_CHARACTER:t===X.NULL?In.NULL_CHARACTER:In.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(In.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=yg[0];s>=0&&(s=mwe(yg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=yg[s];const a=o&qd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Ret(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[yg[s]&~qd.VALUE_LENGTH]:u===1?[yg[++s]]:[yg[++s],yg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(vg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(vg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(qT(t)?ZR(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){vg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){vg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){vg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:vg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){vg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&cae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(lu.SCRIPT,!1)&&cae(this.preprocessor.peek(lu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<lu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=gi;break}default:this.currentAttr.name+=String.fromCodePoint(qT(t)?ZR(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=gi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(lu.DASH_DASH,!0)?(this._createCommentToken(lu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(lu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(lu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(lu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(lu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=gi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(qT(t))this._createDoctypeToken(String.fromCharCode(ZR(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(gi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=gi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(qT(t)?ZR(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(lu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(lu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:$U(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){$U(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:HA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){ket(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){ywe(t)?this.charRefCode=this.charRefCode*16+t-55:vwe(t)?this.charRefCode=this.charRefCode*16+t-87:HA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){HA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(cwe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(dwe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(fwe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=Cet.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const _we=new Set([k.DD,k.DT,k.LI,k.OPTGROUP,k.OPTION,k.P,k.RB,k.RP,k.RT,k.RTC]),fae=new Set([..._we,k.CAPTION,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]),eN=new Map([[k.APPLET,Le.HTML],[k.CAPTION,Le.HTML],[k.HTML,Le.HTML],[k.MARQUEE,Le.HTML],[k.OBJECT,Le.HTML],[k.TABLE,Le.HTML],[k.TD,Le.HTML],[k.TEMPLATE,Le.HTML],[k.TH,Le.HTML],[k.ANNOTATION_XML,Le.MATHML],[k.MI,Le.MATHML],[k.MN,Le.MATHML],[k.MO,Le.MATHML],[k.MS,Le.MATHML],[k.MTEXT,Le.MATHML],[k.DESC,Le.SVG],[k.FOREIGN_OBJECT,Le.SVG],[k.TITLE,Le.SVG]]),Pet=[k.H1,k.H2,k.H3,k.H4,k.H5,k.H6],Det=[k.TR,k.TEMPLATE,k.HTML],Oet=[k.TBODY,k.TFOOT,k.THEAD,k.TEMPLATE,k.HTML],$et=[k.TABLE,k.TEMPLATE,k.HTML],Met=[k.TD,k.TH];class Let{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=k.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===k.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Le.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Pet,Le.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Met,Le.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo($et,Le.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Oet,Le.HTML)}clearBackToTableRowContext(){this.clearBackTo(Det,Le.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===k.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===k.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(eN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(gwe(n)&&r===Le.HTML)return!0;if(eN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if((r===k.UL||r===k.OL)&&i===Le.HTML||eN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(r===k.BUTTON&&i===Le.HTML||eN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r===k.TABLE||r===k.TEMPLATE||r===k.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Le.HTML){if(n===k.TBODY||n===k.THEAD||n===k.TFOOT)return!0;if(n===k.TABLE||n===k.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r!==k.OPTION&&r!==k.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;_we.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;fae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&fae.has(this.currentTagId);)this.pop()}}const _8=3;var ff;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(ff=ff||(ff={}));const dae={type:ff.Marker};class Fet{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===ff.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<_8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<_8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=_8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(dae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:ff.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ff.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(dae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===ff.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===ff.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===ff.Element&&n.element===t)}}function hae(e){return{nodeName:"#text",value:e,parentNode:null}}const A_={createDocument(){return{nodeName:"#document",mode:fl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};A_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(A_.isTextNode(n)){n.value+=t;return}}A_.appendChild(e,hae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&A_.isTextNode(r)?r.value+=t:A_.insertBefore(e,hae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},wwe="html",jet="about:legacy-compat",Bet="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Ewe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Uet=[...Ewe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],zet=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),xwe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Vet=[...xwe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function pae(e,t){return t.some(n=>e.startsWith(n))}function Het(e){return e.name===wwe&&e.publicId===null&&(e.systemId===null||e.systemId===jet)}function qet(e){if(e.name!==wwe)return fl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Bet)return fl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),zet.has(n))return fl.QUIRKS;let r=t===null?Uet:Ewe;if(pae(n,r))return fl.QUIRKS;if(r=t===null?xwe:Vet,pae(n,r))return fl.LIMITED_QUIRKS}return fl.NO_QUIRKS}const mae={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Wet="definitionurl",Get="definitionURL",Yet=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Ket=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Le.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Le.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Le.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Le.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Le.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Le.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Le.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Le.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Le.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Le.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Le.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Le.XMLNS}]]),Xet=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Qet=new Set([k.B,k.BIG,k.BLOCKQUOTE,k.BODY,k.BR,k.CENTER,k.CODE,k.DD,k.DIV,k.DL,k.DT,k.EM,k.EMBED,k.H1,k.H2,k.H3,k.H4,k.H5,k.H6,k.HEAD,k.HR,k.I,k.IMG,k.LI,k.LISTING,k.MENU,k.META,k.NOBR,k.OL,k.P,k.PRE,k.RUBY,k.S,k.SMALL,k.SPAN,k.STRONG,k.STRIKE,k.SUB,k.SUP,k.TABLE,k.TT,k.U,k.UL,k.VAR]);function Jet(e){const t=e.tagID;return t===k.FONT&&e.attrs.some(({name:r})=>r===d0.COLOR||r===d0.SIZE||r===d0.FACE)||Qet.has(t)}function Swe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Wet){e.attrs[t].name=Get;break}}function Twe(e){for(let t=0;t<e.attrs.length;t++){const n=Yet.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function ZG(e){for(let t=0;t<e.attrs.length;t++){const n=Ket.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Zet(e){const t=Xet.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=$x(e.tagName))}function ett(e,t){return t===Le.MATHML&&(e===k.MI||e===k.MO||e===k.MN||e===k.MS||e===k.MTEXT)}function ttt(e,t,n){if(t===Le.MATHML&&e===k.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===d0.ENCODING){const i=n[r].value.toLowerCase();return i===mae.TEXT_HTML||i===mae.APPLICATION_XML}}return t===Le.SVG&&(e===k.FOREIGN_OBJECT||e===k.DESC||e===k.TITLE)}function ntt(e,t,n,r){return(!r||r===Le.HTML)&&ttt(e,t,n)||(!r||r===Le.MATHML)&&ett(e,t)}const rtt="hidden",itt=8,stt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const ott={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Awe=new Set([k.TABLE,k.TBODY,k.TFOOT,k.THEAD,k.TR]),gae={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:A_,onParseError:null};let yae=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...gae,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Net(this.options,this),this.activeFormattingElements=new Fet(this.treeAdapter),this.fragmentContextID=r?$x(this.treeAdapter.getTagName(r)):k.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Let(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...gae,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Le.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Le.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===k.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:ott,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Le.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Le.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=is.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Le.HTML))switch(this.fragmentContextID){case k.TITLE:case k.TEXTAREA:{this.tokenizer.state=is.RCDATA;break}case k.STYLE:case k.XMP:case k.IFRAME:case k.NOEMBED:case k.NOFRAMES:case k.NOSCRIPT:{this.tokenizer.state=is.RAWTEXT;break}case k.SCRIPT:{this.tokenizer.state=is.SCRIPT_DATA;break}case k.PLAINTEXT:{this.tokenizer.state=is.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Le.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Le.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Le.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,k.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===In.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===k.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Le.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===k.MGLYPH||t.tagID===k.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Le.HTML)}_processToken(t){switch(t.type){case In.CHARACTER:{this.onCharacter(t);break}case In.NULL_CHARACTER:{this.onNullCharacter(t);break}case In.COMMENT:{this.onComment(t);break}case In.DOCTYPE:{this.onDoctype(t);break}case In.START_TAG:{this._processStartTag(t);break}case In.END_TAG:{this.onEndTag(t);break}case In.EOF:{this.onEof(t);break}case In.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return ntt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===ff.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(k.P),this.openElements.popUntilTagNamePopped(k.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case k.TR:{this.insertionMode=ie.IN_ROW;return}case k.TBODY:case k.THEAD:case k.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case k.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case k.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case k.TABLE:{this.insertionMode=ie.IN_TABLE;return}case k.BODY:{this.insertionMode=ie.IN_BODY;return}case k.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case k.SELECT:{this._resetInsertionModeForSelect(t);return}case k.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case k.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case k.TD:case k.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case k.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===k.TEMPLATE)break;if(r===k.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return Awe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case k.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Le.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case k.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Aet[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Mnt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{JS(this,t);break}case ie.BEFORE_HTML:{qA(this,t);break}case ie.BEFORE_HEAD:{WA(this,t);break}case ie.IN_HEAD:{GA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{YA(this,t);break}case ie.AFTER_HEAD:{KA(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{Iwe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{w8(this,t);break}case ie.IN_TABLE_TEXT:{Owe(this,t);break}case ie.IN_COLUMN_GROUP:{EO(this,t);break}case ie.AFTER_BODY:{xO(this,t);break}case ie.AFTER_AFTER_BODY:{MP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){$nt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{JS(this,t);break}case ie.BEFORE_HTML:{qA(this,t);break}case ie.BEFORE_HEAD:{WA(this,t);break}case ie.IN_HEAD:{GA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{YA(this,t);break}case ie.AFTER_HEAD:{KA(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{w8(this,t);break}case ie.IN_COLUMN_GROUP:{EO(this,t);break}case ie.AFTER_BODY:{xO(this,t);break}case ie.AFTER_AFTER_BODY:{MP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){MU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{MU(this,t);break}case ie.IN_TABLE_TEXT:{ZS(this,t);break}case ie.AFTER_BODY:{htt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{ptt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{mtt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{ZS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Lnt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{JS(this,t);break}case ie.BEFORE_HTML:{gtt(this,t);break}case ie.BEFORE_HEAD:{vtt(this,t);break}case ie.IN_HEAD:{Xf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{wtt(this,t);break}case ie.AFTER_HEAD:{xtt(this,t);break}case ie.IN_BODY:{xa(this,t);break}case ie.IN_TABLE:{lE(this,t);break}case ie.IN_TABLE_TEXT:{ZS(this,t);break}case ie.IN_CAPTION:{bnt(this,t);break}case ie.IN_COLUMN_GROUP:{nY(this,t);break}case ie.IN_TABLE_BODY:{CL(this,t);break}case ie.IN_ROW:{IL(this,t);break}case ie.IN_CELL:{Ent(this,t);break}case ie.IN_SELECT:{Lwe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Snt(this,t);break}case ie.IN_TEMPLATE:{Ant(this,t);break}case ie.AFTER_BODY:{Int(this,t);break}case ie.IN_FRAMESET:{knt(this,t);break}case ie.AFTER_FRAMESET:{Nnt(this,t);break}case ie.AFTER_AFTER_BODY:{Dnt(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Ont(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Fnt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{JS(this,t);break}case ie.BEFORE_HTML:{ytt(this,t);break}case ie.BEFORE_HEAD:{btt(this,t);break}case ie.IN_HEAD:{_tt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Ett(this,t);break}case ie.AFTER_HEAD:{Stt(this,t);break}case ie.IN_BODY:{AL(this,t);break}case ie.TEXT:{lnt(this,t);break}case ie.IN_TABLE:{r2(this,t);break}case ie.IN_TABLE_TEXT:{ZS(this,t);break}case ie.IN_CAPTION:{_nt(this,t);break}case ie.IN_COLUMN_GROUP:{wnt(this,t);break}case ie.IN_TABLE_BODY:{LU(this,t);break}case ie.IN_ROW:{Mwe(this,t);break}case ie.IN_CELL:{xnt(this,t);break}case ie.IN_SELECT:{Fwe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Tnt(this,t);break}case ie.IN_TEMPLATE:{Cnt(this,t);break}case ie.AFTER_BODY:{Bwe(this,t);break}case ie.IN_FRAMESET:{Rnt(this,t);break}case ie.AFTER_FRAMESET:{Pnt(this,t);break}case ie.AFTER_AFTER_BODY:{MP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{JS(this,t);break}case ie.BEFORE_HTML:{qA(this,t);break}case ie.BEFORE_HEAD:{WA(this,t);break}case ie.IN_HEAD:{GA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{YA(this,t);break}case ie.AFTER_HEAD:{KA(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{Pwe(this,t);break}case ie.TEXT:{cnt(this,t);break}case ie.IN_TABLE_TEXT:{ZS(this,t);break}case ie.IN_TEMPLATE:{jwe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{tY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Cwe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{w8(this,t);break}case ie.IN_TABLE_TEXT:{Dwe(this,t);break}}}};function att(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Nwe(e,t),n}function utt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function ltt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=stt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=ctt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function ctt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function ftt(e,t,n){const r=e.treeAdapter.getTagName(t),i=$x(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===k.TEMPLATE&&s===Le.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function dtt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function eY(e,t){for(let n=0;n<itt;n++){const r=att(e,t);if(!r)break;const i=utt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=ltt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&ftt(e,o,s),dtt(e,i,r)}}function MU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function htt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function ptt(e,t){e._appendCommentNode(t,e.document)}function tY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function mtt(e,t){e._setDocumentType(t);const n=t.forceQuirks?fl.QUIRKS:qet(t);Het(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function JS(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,fl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function gtt(e,t){t.tagID===k.HTML?(e._insertElement(t,Le.HTML),e.insertionMode=ie.BEFORE_HEAD):qA(e,t)}function ytt(e,t){const n=t.tagID;(n===k.HTML||n===k.HEAD||n===k.BODY||n===k.BR)&&qA(e,t)}function qA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function vtt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.HEAD:{e._insertElement(t,Le.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:WA(e,t)}}function btt(e,t){const n=t.tagID;n===k.HEAD||n===k.BODY||n===k.HTML||n===k.BR?WA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function WA(e,t){e._insertFakeElement(we.HEAD,k.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Xf(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.TITLE:{e._switchToTextParsing(t,is.RCDATA);break}case k.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,is.RAWTEXT):(e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case k.NOFRAMES:case k.STYLE:{e._switchToTextParsing(t,is.RAWTEXT);break}case k.SCRIPT:{e._switchToTextParsing(t,is.SCRIPT_DATA);break}case k.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:GA(e,t)}}function _tt(e,t){switch(t.tagID){case k.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case k.BODY:case k.BR:case k.HTML:{GA(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function xb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==k.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function GA(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function wtt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BASEFONT:case k.BGSOUND:case k.HEAD:case k.LINK:case k.META:case k.NOFRAMES:case k.STYLE:{Xf(e,t);break}case k.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:YA(e,t)}}function Ett(e,t){switch(t.tagID){case k.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case k.BR:{YA(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function YA(e,t){const n=t.type===In.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function xtt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.BODY:{e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case k.FRAMESET:{e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET;break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,k.HEAD),Xf(e,t),e.openElements.remove(e.headElement);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:KA(e,t)}}function Stt(e,t){switch(t.tagID){case k.BODY:case k.HTML:case k.BR:{KA(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function KA(e,t){e._insertFakeElement(we.BODY,k.BODY),e.insertionMode=ie.IN_BODY,TL(e,t)}function TL(e,t){switch(t.type){case In.CHARACTER:{Iwe(e,t);break}case In.WHITESPACE_CHARACTER:{Cwe(e,t);break}case In.COMMENT:{MU(e,t);break}case In.START_TAG:{xa(e,t);break}case In.END_TAG:{AL(e,t);break}case In.EOF:{Pwe(e,t);break}}}function Cwe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Iwe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Ttt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Att(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Ctt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET)}function Itt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function ktt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),gwe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Le.HTML)}function Rtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Ntt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),n||(e.formElement=e.openElements.current))}function Ptt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===k.LI&&i===k.LI||(n===k.DD||n===k.DT)&&(i===k.DD||i===k.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==k.ADDRESS&&i!==k.DIV&&i!==k.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function Dtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.tokenizer.state=is.PLAINTEXT}function Ott(e,t){e.openElements.hasInScope(k.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1}function $tt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(eY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Mtt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ltt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(k.NOBR)&&(eY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ftt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function jtt(e,t){e.treeAdapter.getDocumentMode(e.document)!==fl.QUIRKS&&e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function kwe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Rwe(e){const t=hwe(e,d0.TYPE);return t!=null&&t.toLowerCase()===rtt}function Btt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),Rwe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Utt(e,t){e._appendElement(t,Le.HTML),t.ackSelfClosing=!0}function ztt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Vtt(e,t){t.tagName=we.IMG,t.tagID=k.IMG,kwe(e,t)}function Htt(e,t){e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.tokenizer.state=is.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function qtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function Wtt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,is.RAWTEXT)}function vae(e,t){e._switchToTextParsing(t,is.RAWTEXT)}function Gtt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Ytt(e,t){e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function Ktt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Le.HTML)}function Xtt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(k.RTC),e._insertElement(t,Le.HTML)}function Qtt(e,t){e._reconstructActiveFormattingElements(),Swe(t),ZG(t),t.selfClosing?e._appendElement(t,Le.MATHML):e._insertElement(t,Le.MATHML),t.ackSelfClosing=!0}function Jtt(e,t){e._reconstructActiveFormattingElements(),Twe(t),ZG(t),t.selfClosing?e._appendElement(t,Le.SVG):e._insertElement(t,Le.SVG),t.ackSelfClosing=!0}function bae(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function xa(e,t){switch(t.tagID){case k.I:case k.S:case k.B:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.SMALL:case k.STRIKE:case k.STRONG:{Mtt(e,t);break}case k.A:{$tt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{ktt(e,t);break}case k.P:case k.DL:case k.OL:case k.UL:case k.DIV:case k.DIR:case k.NAV:case k.MAIN:case k.MENU:case k.ASIDE:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.DETAILS:case k.ADDRESS:case k.ARTICLE:case k.SECTION:case k.SUMMARY:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Itt(e,t);break}case k.LI:case k.DD:case k.DT:{Ptt(e,t);break}case k.BR:case k.IMG:case k.WBR:case k.AREA:case k.EMBED:case k.KEYGEN:{kwe(e,t);break}case k.HR:{ztt(e,t);break}case k.RB:case k.RTC:{Ktt(e,t);break}case k.RT:case k.RP:{Xtt(e,t);break}case k.PRE:case k.LISTING:{Rtt(e,t);break}case k.XMP:{qtt(e,t);break}case k.SVG:{Jtt(e,t);break}case k.HTML:{Ttt(e,t);break}case k.BASE:case k.LINK:case k.META:case k.STYLE:case k.TITLE:case k.SCRIPT:case k.BGSOUND:case k.BASEFONT:case k.TEMPLATE:{Xf(e,t);break}case k.BODY:{Att(e,t);break}case k.FORM:{Ntt(e,t);break}case k.NOBR:{Ltt(e,t);break}case k.MATH:{Qtt(e,t);break}case k.TABLE:{jtt(e,t);break}case k.INPUT:{Btt(e,t);break}case k.PARAM:case k.TRACK:case k.SOURCE:{Utt(e,t);break}case k.IMAGE:{Vtt(e,t);break}case k.BUTTON:{Ott(e,t);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{Ftt(e,t);break}case k.IFRAME:{Wtt(e,t);break}case k.SELECT:{Gtt(e,t);break}case k.OPTION:case k.OPTGROUP:{Ytt(e,t);break}case k.NOEMBED:{vae(e,t);break}case k.FRAMESET:{Ctt(e,t);break}case k.TEXTAREA:{Htt(e,t);break}case k.NOSCRIPT:{e.options.scriptingEnabled?vae(e,t):bae(e,t);break}case k.PLAINTEXT:{Dtt(e,t);break}case k.COL:case k.TH:case k.TD:case k.TR:case k.HEAD:case k.FRAME:case k.TBODY:case k.TFOOT:case k.THEAD:case k.CAPTION:case k.COLGROUP:break;default:bae(e,t)}}function Ztt(e,t){if(e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function ent(e,t){e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,Bwe(e,t))}function tnt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function nnt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(k.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(k.FORM):n&&e.openElements.remove(n))}function rnt(e){e.openElements.hasInButtonScope(k.P)||e._insertFakeElement(we.P,k.P),e._closePElement()}function int(e){e.openElements.hasInListItemScope(k.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(k.LI),e.openElements.popUntilTagNamePopped(k.LI))}function snt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function ont(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function ant(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function unt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,k.BR),e.openElements.pop(),e.framesetOk=!1}function Nwe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==k.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function AL(e,t){switch(t.tagID){case k.A:case k.B:case k.I:case k.S:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.NOBR:case k.SMALL:case k.STRIKE:case k.STRONG:{eY(e,t);break}case k.P:{rnt(e);break}case k.DL:case k.UL:case k.OL:case k.DIR:case k.DIV:case k.NAV:case k.PRE:case k.MAIN:case k.MENU:case k.ASIDE:case k.BUTTON:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.ADDRESS:case k.ARTICLE:case k.DETAILS:case k.SECTION:case k.SUMMARY:case k.LISTING:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{tnt(e,t);break}case k.LI:{int(e);break}case k.DD:case k.DT:{snt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{ont(e);break}case k.BR:{unt(e);break}case k.BODY:{Ztt(e,t);break}case k.HTML:{ent(e,t);break}case k.FORM:{nnt(e);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{ant(e,t);break}case k.TEMPLATE:{xb(e,t);break}default:Nwe(e,t)}}function Pwe(e,t){e.tmplInsertionModeStack.length>0?jwe(e,t):tY(e,t)}function lnt(e,t){var n;t.tagID===k.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function cnt(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function w8(e,t){if(Awe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case In.CHARACTER:{Owe(e,t);break}case In.WHITESPACE_CHARACTER:{Dwe(e,t);break}}else BI(e,t)}function fnt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CAPTION}function dnt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function hnt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,k.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,nY(e,t)}function pnt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_TABLE_BODY}function mnt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,k.TBODY),e.insertionMode=ie.IN_TABLE_BODY,CL(e,t)}function gnt(e,t){e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function ynt(e,t){Rwe(t)?e._appendElement(t,Le.HTML):BI(e,t),t.ackSelfClosing=!0}function vnt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Le.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function lE(e,t){switch(t.tagID){case k.TD:case k.TH:case k.TR:{mnt(e,t);break}case k.STYLE:case k.SCRIPT:case k.TEMPLATE:{Xf(e,t);break}case k.COL:{hnt(e,t);break}case k.FORM:{vnt(e,t);break}case k.TABLE:{gnt(e,t);break}case k.TBODY:case k.TFOOT:case k.THEAD:{pnt(e,t);break}case k.INPUT:{ynt(e,t);break}case k.CAPTION:{fnt(e,t);break}case k.COLGROUP:{dnt(e,t);break}default:BI(e,t)}}function r2(e,t){switch(t.tagID){case k.TABLE:{e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode());break}case k.TEMPLATE:{xb(e,t);break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:BI(e,t)}}function BI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,TL(e,t),e.fosterParentingEnabled=n}function Dwe(e,t){e.pendingCharacterTokens.push(t)}function Owe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ZS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)BI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const $we=new Set([k.CAPTION,k.COL,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]);function bnt(e,t){const n=t.tagID;$we.has(n)?e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,lE(e,t)):xa(e,t)}function _nt(e,t){const n=t.tagID;switch(n){case k.CAPTION:case k.TABLE:{e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===k.TABLE&&r2(e,t));break}case k.BODY:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:AL(e,t)}}function nY(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.COL:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.TEMPLATE:{Xf(e,t);break}default:EO(e,t)}}function wnt(e,t){switch(t.tagID){case k.COLGROUP:{e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TEMPLATE:{xb(e,t);break}case k.COL:break;default:EO(e,t)}}function EO(e,t){e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function CL(e,t){switch(t.tagID){case k.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_ROW;break}case k.TH:case k.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,k.TR),e.insertionMode=ie.IN_ROW,IL(e,t);break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,lE(e,t));break}default:lE(e,t)}}function LU(e,t){const n=t.tagID;switch(t.tagID){case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,r2(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:case k.TR:break;default:r2(e,t)}}function IL(e,t){switch(t.tagID){case k.TH:case k.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,CL(e,t));break}default:lE(e,t)}}function Mwe(e,t){switch(t.tagID){case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case k.TABLE:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,LU(e,t));break}case k.TBODY:case k.TFOOT:case k.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(k.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,LU(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:break;default:r2(e,t)}}function Ent(e,t){const n=t.tagID;$we.has(n)?(e.openElements.hasInTableScope(k.TD)||e.openElements.hasInTableScope(k.TH))&&(e._closeTableCell(),IL(e,t)):xa(e,t)}function xnt(e,t){const n=t.tagID;switch(n){case k.TD:case k.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case k.TABLE:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Mwe(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:break;default:AL(e,t)}}function Lwe(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case k.OPTGROUP:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case k.INPUT:case k.KEYGEN:case k.TEXTAREA:case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),t.tagID!==k.SELECT&&e._processStartTag(t));break}case k.SCRIPT:case k.TEMPLATE:{Xf(e,t);break}}}function Fwe(e,t){switch(t.tagID){case k.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===k.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===k.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop();break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop();break}case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode());break}case k.TEMPLATE:{xb(e,t);break}}}function Snt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Lwe(e,t)}function Tnt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Fwe(e,t)}function Ant(e,t){switch(t.tagID){case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{Xf(e,t);break}case k.CAPTION:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,lE(e,t);break}case k.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,nY(e,t);break}case k.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,CL(e,t);break}case k.TD:case k.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,IL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,xa(e,t)}}function Cnt(e,t){t.tagID===k.TEMPLATE&&xb(e,t)}function jwe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):tY(e,t)}function Int(e,t){t.tagID===k.HTML?xa(e,t):xO(e,t)}function Bwe(e,t){var n;if(t.tagID===k.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===k.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else xO(e,t)}function xO(e,t){e.insertionMode=ie.IN_BODY,TL(e,t)}function knt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.FRAMESET:{e._insertElement(t,Le.HTML);break}case k.FRAME:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case k.NOFRAMES:{Xf(e,t);break}}}function Rnt(e,t){t.tagID===k.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==k.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Nnt(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.NOFRAMES:{Xf(e,t);break}}}function Pnt(e,t){t.tagID===k.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function Dnt(e,t){t.tagID===k.HTML?xa(e,t):MP(e,t)}function MP(e,t){e.insertionMode=ie.IN_BODY,TL(e,t)}function Ont(e,t){switch(t.tagID){case k.HTML:{xa(e,t);break}case k.NOFRAMES:{Xf(e,t);break}}}function $nt(e,t){t.chars=gi,e._insertCharacters(t)}function Mnt(e,t){e._insertCharacters(t),e.framesetOk=!1}function Uwe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Le.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Lnt(e,t){if(Jet(t))Uwe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Le.MATHML?Swe(t):r===Le.SVG&&(Zet(t),Twe(t)),ZG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Fnt(e,t){if(t.tagID===k.P||t.tagID===k.BR){Uwe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Le.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const jnt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),_ae={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function zwe(e,t){const n=Knt(e),r=uwe("type",{handlers:{root:Bnt,element:Unt,text:znt,comment:Hwe,doctype:Vnt,raw:qnt},unknown:Wnt}),i={parser:n?new yae(_ae):yae.getFragmentParser(void 0,_ae),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Mx(i,Fh());const s=n?i.parser.document:i.parser.getFragment(),o=KZe(s,{file:i.options.file});return i.stitches&&KG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function Vwe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Bnt(e,t){Vwe(e.children,t)}function Unt(e,t){Gnt(e,t),Vwe(e.children,t),Ynt(e,t)}function znt(e,t){const n={type:In.CHARACTER,chars:e.value,location:UI(e)};Mx(t,Fh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Vnt(e,t){const n={type:In.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:UI(e)};Mx(t,Fh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Hnt(e,t){t.stitches=!0;const n=Xnt(e);if("children"in e&&"children"in n){const r=zwe({type:"root",children:e.children},t.options);n.children=r.children}Hwe({type:"comment",value:{stitch:n}},t)}function Hwe(e,t){const n=e.value,r={type:In.COMMENT,data:n,location:UI(e)};Mx(t,Fh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function qnt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,qwe(t,Fh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Wnt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Hnt(n,t);else{let r="";throw jnt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Mx(e,t){qwe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=is.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function qwe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Gnt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===is.PLAINTEXT)return;Mx(t,Fh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:q1.html;i===q1.html&&n==="svg"&&(i=q1.svg);const s=eet({...e,children:[]},{space:i===q1.svg?"svg":"html"}),o={type:In.START_TAG,tagName:n,tagID:$x(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:UI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Ynt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&uet.includes(n)||t.parser.tokenizer.state===is.PLAINTEXT)return;Mx(t,wL(e));const r={type:In.END_TAG,tagName:n,tagID:$x(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:UI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===is.RCDATA||t.parser.tokenizer.state===is.RAWTEXT||t.parser.tokenizer.state===is.SCRIPT_DATA)&&(t.parser.tokenizer.state=is.DATA)}function Knt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function UI(e){const t=Fh(e)||{line:void 0,column:void 0,offset:void 0},n=wL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Xnt(e){return"children"in e?uE({...e,children:[]}):uE(e)}function Qnt(e){return function(t,n){return zwe(t,{...e,file:n})}}function Ga({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Sy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(et,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(oi,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(oi,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(oi,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(oi,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(oi,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(oi,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Sx,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(kf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(kf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(MZe,{components:n,rehypePlugins:[Qnt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function FU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ga,{text:n})}const Jnt="https://github.com/revisit-studies/study/tree/main/public/";function Znt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Hm();return _.jsx(di.Main,{children:_.jsxs(Oh,{size:"xs",px:"xs",children:[_.jsx(Sy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Lh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(et,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=__e(i);return _.jsx(Ns,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(xy,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:i}),_.jsxs(Zt,{align:"center",direction:"row",children:[_.jsx(doe,{color:"red"}),_.jsx(et,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(FU,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(et,{c:"dimmed",children:[_.jsx(et,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(et,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(et,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Sx,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Jnt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Zt,{align:"center",direction:"row",children:[_.jsx(doe,{color:"orange"}),_.jsx(et,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(FU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var Wwe={exports:{}},Gwe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=N;function ert(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var trt=typeof Object.is=="function"?Object.is:ert,nrt=zI.useSyncExternalStore,rrt=zI.useRef,irt=zI.useEffect,srt=zI.useMemo,ort=zI.useDebugValue;Gwe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=rrt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=srt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,trt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=nrt(e,s[0],s[1]);return irt(function(){o.hasValue=!0,o.value=a},[a]),ort(a),a};Wwe.exports=Gwe;var art=Wwe.exports,bl="default"in $D?Ht:$D,wae=Symbol.for("react-redux-context"),Eae=typeof globalThis<"u"?globalThis:{};function urt(){if(!bl.createContext)return{};const e=Eae[wae]??(Eae[wae]=new Map);let t=e.get(bl.createContext);return t||(t=bl.createContext(null),e.set(bl.createContext,t)),t}var D0=urt(),lrt=()=>{throw new Error("uSES not initialized!")};function rY(e=D0){return function(){return bl.useContext(e)}}var Ywe=rY(),Kwe=lrt,crt=e=>{Kwe=e},frt=(e,t)=>e===t;function drt(e=D0){const t=e===D0?Ywe:rY(e),n=(r,i={})=>{const{equalityFn:s=frt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();bl.useRef(!0);const d=bl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=Kwe(u.addNestedSub,a.getState,l||a.getState,d,s);return bl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var hrt=drt();function prt(e){e()}function mrt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){prt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var xae={notify(){},get:()=>[]};function grt(e,t){let n,r=xae,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=mrt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=xae)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var yrt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vrt=typeof navigator<"u"&&navigator.product==="ReactNative",brt=yrt||vrt?bl.useLayoutEffect:bl.useEffect;function _rt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=bl.useMemo(()=>{const l=grt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=bl.useMemo(()=>e.getState(),[e]);brt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||D0;return bl.createElement(u.Provider,{value:o},n)}var wrt=_rt;function Xwe(e=D0){const t=e===D0?Ywe:rY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Ert=Xwe();function xrt(e=D0){const t=e===D0?Ert:Xwe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Qwe=xrt();crt(art.useSyncExternalStoreWithSelector);function vo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Srt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Sae=Srt,E8=()=>Math.random().toString(36).substring(7).split("").join("."),Trt={INIT:`@@redux/INIT${E8()}`,REPLACE:`@@redux/REPLACE${E8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${E8()}`},SO=Trt;function iY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Jwe(e,t,n){if(typeof e!="function")throw new Error(vo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(vo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(vo(1));return n(Jwe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(vo(3));return i}function f(g){if(typeof g!="function")throw new Error(vo(4));if(u)throw new Error(vo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(vo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!iY(g))throw new Error(vo(7));if(typeof g.type>"u")throw new Error(vo(8));if(typeof g.type!="string")throw new Error(vo(17));if(u)throw new Error(vo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(vo(10));r=g,d({type:SO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(vo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Sae](){return this}}}return d({type:SO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Sae]:p}}function Art(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:SO.INIT})>"u")throw new Error(vo(12));if(typeof n(void 0,{type:SO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vo(13))})}function Crt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Art(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(vo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function TO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Irt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(vo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=TO(...a)(i.dispatch),{...i,dispatch:s}}}function krt(e){return iY(e)&&"type"in e&&typeof e.type=="string"}var Zwe=Symbol.for("immer-nothing"),Tae=Symbol.for("immer-draftable"),Rl=Symbol.for("immer-state");function pf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var cE=Object.getPrototypeOf;function O0(e){return!!e&&!!e[Rl]}function mm(e){var t;return e?eEe(e)||Array.isArray(e)||!!e[Tae]||!!((t=e.constructor)!=null&&t[Tae])||RL(e)||NL(e):!1}var Rrt=Object.prototype.constructor.toString();function eEe(e){if(!e||typeof e!="object")return!1;const t=cE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Rrt}function AO(e,t){kL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function kL(e){const t=e[Rl];return t?t.type_:Array.isArray(e)?1:RL(e)?2:NL(e)?3:0}function jU(e,t){return kL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function tEe(e,t,n){const r=kL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Nrt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function RL(e){return e instanceof Map}function NL(e){return e instanceof Set}function p1(e){return e.copy_||e.base_}function BU(e,t){if(RL(e))return new Map(e);if(NL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=eEe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Rl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(cE(e),r)}else{const r=cE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function sY(e,t=!1){return PL(e)||O0(e)||!mm(e)||(kL(e)>1&&(e.set=e.add=e.clear=e.delete=Prt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>sY(r,!0))),e}function Prt(){pf(2)}function PL(e){return Object.isFrozen(e)}var Drt={};function Rv(e){const t=Drt[e];return t||pf(0,e),t}var i2;function nEe(){return i2}function Ort(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Aae(e,t){t&&(Rv("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function UU(e){zU(e),e.drafts_.forEach($rt),e.drafts_=null}function zU(e){e===i2&&(i2=e.parent_)}function Cae(e){return i2=Ort(i2,e)}function $rt(e){const t=e[Rl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Iae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Rl].modified_&&(UU(t),pf(4)),mm(e)&&(e=CO(t,e),t.parent_||IO(t,e)),t.patches_&&Rv("Patches").generateReplacementPatches_(n[Rl].base_,e,t.patches_,t.inversePatches_)):e=CO(t,n,[]),UU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Zwe?e:void 0}function CO(e,t,n){if(PL(t))return t;const r=t[Rl];if(!r)return AO(t,(i,s)=>kae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return IO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),AO(s,(a,u)=>kae(e,r,i,a,u,n,o)),IO(e,i,!1),n&&e.patches_&&Rv("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function kae(e,t,n,r,i,s,o){if(O0(i)){const a=s&&t&&t.type_!==3&&!jU(t.assigned_,r)?s.concat(r):void 0,u=CO(e,i,a);if(tEe(n,r,u),O0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(mm(i)&&!PL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;CO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&IO(e,i)}}function IO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sY(t,n)}function Mrt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:nEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=oY;n&&(i=[r],s=s2);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var oY={get(e,t){if(t===Rl)return e;const n=p1(e);if(!jU(n,t))return Lrt(e,n,t);const r=n[t];return e.finalized_||!mm(r)?r:r===x8(e.base_,t)?(S8(e),e.copy_[t]=HU(r,e)):r},has(e,t){return t in p1(e)},ownKeys(e){return Reflect.ownKeys(p1(e))},set(e,t,n){const r=rEe(p1(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=x8(p1(e),t),s=i==null?void 0:i[Rl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Nrt(n,i)&&(n!==void 0||jU(e.base_,t)))return!0;S8(e),VU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return x8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,S8(e),VU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=p1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){pf(11)},getPrototypeOf(e){return cE(e.base_)},setPrototypeOf(){pf(12)}},s2={};AO(oY,(e,t)=>{s2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});s2.deleteProperty=function(e,t){return s2.set.call(this,e,t,void 0)};s2.set=function(e,t,n){return oY.set.call(this,e[0],t,n,e[0])};function x8(e,t){const n=e[Rl];return(n?p1(n):e)[t]}function Lrt(e,t,n){var i;const r=rEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function rEe(e,t){if(!(t in e))return;let n=cE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=cE(n)}}function VU(e){e.modified_||(e.modified_=!0,e.parent_&&VU(e.parent_))}function S8(e){e.copy_||(e.copy_=BU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Frt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&pf(6),r!==void 0&&typeof r!="function"&&pf(7);let i;if(mm(t)){const s=Cae(this),o=HU(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?UU(s):zU(s)}return Aae(s,r),Iae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===Zwe&&(i=void 0),this.autoFreeze_&&sY(i,!0),r){const s=[],o=[];Rv("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else pf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mm(e)||pf(8),O0(e)&&(e=iEe(e));const t=Cae(this),n=HU(e,void 0);return n[Rl].isManual_=!0,zU(t),n}finishDraft(e,t){const n=e&&e[Rl];(!n||!n.isManual_)&&pf(9);const{scope_:r}=n;return Aae(r,t),Iae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Rv("Patches").applyPatches_;return O0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function HU(e,t){const n=RL(e)?Rv("MapSet").proxyMap_(e,t):NL(e)?Rv("MapSet").proxySet_(e,t):Mrt(e,t);return(t?t.scope_:nEe()).drafts_.push(n),n}function iEe(e){return O0(e)||pf(10,e),sEe(e)}function sEe(e){if(!mm(e)||PL(e))return e;const t=e[Rl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=BU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=BU(e,!0);return AO(n,(r,i)=>{tEe(n,r,sEe(i))}),t&&(t.finalized_=!1),n}var Nl=new Frt,oEe=Nl.produce;Nl.produceWithPatches.bind(Nl);Nl.setAutoFreeze.bind(Nl);Nl.setUseStrictShallowCopy.bind(Nl);Nl.applyPatches.bind(Nl);Nl.createDraft.bind(Nl);Nl.finishDraft.bind(Nl);function jrt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Brt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Urt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Rae=e=>Array.isArray(e)?e:[e];function zrt(e){const t=Array.isArray(e[0])?e[0]:e;return Urt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Vrt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Hrt=class{constructor(e){this.value=e}deref(){return this.value}},qrt=typeof WeakRef<"u"?WeakRef:Hrt,Wrt=0,Nae=1;function tN(){return{s:Wrt,v:void 0,o:null,p:null}}function aY(e,t={}){let n=tN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=tN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=tN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Nae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new qrt(c):c}return l.s=Nae,l.v=c,c}return o.clearCache=()=>{n=tN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function aEe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),jrt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=aY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Rae(d),y=Rae(p),v=zrt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=Vrt(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Grt=aEe(aY),Yrt=Object.assign((e,t=Grt)=>{Brt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Yrt});function uEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Krt=uEe(),Xrt=uEe,Qrt=(...e)=>{const t=aEe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(O0(o)?iEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Qrt(aY);var Jrt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?TO:TO.apply(null,arguments)};function fE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Lu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>krt(r)&&r.type===e,n}var lEe=class WT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,WT.prototype)}static get[Symbol.species](){return WT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new WT(...t[0].concat(this)):new WT(...t.concat(this))}};function Pae(e){return mm(e)?oEe(e,()=>{}):e}function Dae(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Lu(10));const r=n.insert(t,e);return e.set(t,r),r}function Zrt(e){return typeof e=="boolean"}var eit=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new lEe;return n&&(Zrt(n)?o.push(Krt):o.push(Xrt(n.extraArgument))),o},tit="RTK_autoBatch",cEe=e=>t=>{setTimeout(t,e)},nit=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cEe(10),rit=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?nit:e.type==="callback"?e.queueNotification:cEe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[tit]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},iit=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new lEe(e);return r&&i.push(rit(typeof r=="object"?r:void 0)),i},sit=!0;function oit(e){const t=eit(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(iY(n))a=Crt(n);else throw new Error(Lu(1));let u;typeof r=="function"?u=r(t):u=t();let l=TO;i&&(l=Jrt({trace:!sit,...typeof i=="object"&&i}));const c=Irt(...u),f=iit(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return Jwe(a,s,h)}function fEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Lu(28));if(a in t)throw new Error(Lu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function ait(e){return typeof e=="function"}function uit(e,t){let[n,r,i]=fEe(t),s;if(ait(e))s=()=>Pae(e());else{const a=Pae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(O0(c)){const h=f(c,u);return h===void 0?c:h}else{if(mm(c))return oEe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Lu(9))}return d}}return c},a)}return o.getInitialState=s,o}var lit="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",cit=(e=21)=>{let t="",n=e;for(;n--;)t+=lit[Math.random()*64|0];return t},fit=Symbol.for("rtk-slice-createasyncthunk");function dit(e,t){return`${e}/${t}`}function hit({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[fit];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Lu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(git()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Lu(12));if(E in l.sliceCaseReducersByType)throw new Error(Lu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:dit(s,b),createNotation:typeof i.reducers=="function"};vit(w)?_it(E,w,c,t):yit(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?fEe(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return uit(i.initialState,T=>{for(let A in S)T.addCase(A,S[A]);for(let A of l.sliceMatchers)T.addMatcher(A.matcher,A.reducer);for(let A of w)T.addMatcher(A.matcher,A.reducer);E&&T.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(T){let A=T[b];return typeof A>"u"&&w&&(A=g()),A}function S(T=d){const A=Dae(h,w,{insert:()=>new WeakMap});return Dae(A,T,{insert:()=>{const C={};for(const[I,R]of Object.entries(i.selectors??{}))C[I]=pit(R,T,g,w);return C}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function pit(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var mit=hit();function git(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function yit({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!bit(r))throw new Error(Lu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?fE(e,o):fE(e))}function vit(e){return e._reducerDefinitionType==="asyncThunk"}function bit(e){return e._reducerDefinitionType==="reducerWithPrepare"}function _it({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Lu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||nN,pending:a||nN,rejected:u||nN,settled:l||nN})}function nN(){}var wit=(e,t)=>{if(typeof e!="function")throw new Error(Lu(32))},uY="listenerMiddleware",Eit=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=fE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Lu(21));return wit(s),{predicate:i,type:t,effect:s}},xit=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Eit(e);return{id:cit(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Lu(22))}}},{withTypes:()=>xit}),Sit=Object.assign(fE(`${uY}/add`),{withTypes:()=>Sit});fE(`${uY}/removeAll`);var Tit=Object.assign(fE(`${uY}/remove`),{withTypes:()=>Tit});function Lu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function gm(e){return e.components.flatMap(t=>typeof t=="string"?t:gm(t))}function dEe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:dEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function hEe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+gm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+gm(e).length-1}];r+=1}else{const o=hEe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function pEe(e,t){const n=hEe(e,t,0);return typeof n=="number"?null:n}function mEe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=mEe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Ait(e,t){const n=mEe(e,t,0);return n.found?n.distance:-1}function gEe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...gEe(i,`${t}-${s}`))}),n}async function Cit(e,t,n,r,i,s){const o=gm(n),a=Object.fromEntries(o.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:Object.keys(i).length>0?i:a,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=mit({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}}}});return{store:oit({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const yEe=N.createContext(null);function jh(){return N.useContext(yEe).actions}const Bh=Qwe,Fc=hrt;function Iit(e){return Fc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function lY(){return Fc(e=>gm(e.sequence))}function VI(){const{studyId:e}=aE();return`${e}`}function qm(){const{index:e}=aE(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Wm(){const e=qm(),t=lY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var kO={exports:{}};kO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",F="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[R]=j[M]=j[P]=j[O]=j[F]=j[L]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[C]=j[c]=j[I]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[A]=!1;var q=typeof Zs=="object"&&Zs&&Zs.Object===Object&&Zs,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ye=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,Ct=Array(te);++Re<te;)Ct[Re]=ue(Re);return Ct}function gt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function be(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Dt=ne["__core-js_shared__"],We=ze.toString,me=ct.hasOwnProperty,dt=function(){var te=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),yt=ct.toString,pe=We.call(Object),Ce=RegExp("^"+We.call(me).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Ln=be(Object.getPrototypeOf,Object),Tr=Object.create,Fn=ct.propertyIsEnumerable,cr=ke.splice,pn=ut?ut.toStringTag:void 0,Tn=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,Fo=Date.now,$i=qe(ne,"Map"),An=qe(Object,"create"),Mi=function(){function te(){}return function(ue){if(!ap(ue))return{};if(Tr)return Tr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Ar(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ds(){this.__data__=An?An(null):{},this.size=0}function rp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function rl(te){var ue=this.__data__;if(An){var Re=ue[te];return Re===r?void 0:Re}return me.call(ue,te)?ue[te]:void 0}function ld(te){var ue=this.__data__;return An?ue[te]!==void 0:me.call(ue,te)}function Er(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=An&&ue===void 0?r:ue,this}Ar.prototype.clear=ds,Ar.prototype.delete=rp,Ar.prototype.get=rl,Ar.prototype.has=ld,Ar.prototype.set=Er;function Ai(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function Yr(){this.__data__=[],this.size=0}function ou(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var Ct=ue.length-1;return Re==Ct?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Sa(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function Ta(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,Ct=Jn(Re,te);return Ct<0?(++this.size,Re.push([te,ue])):Re[Ct][1]=ue,this}Ai.prototype.clear=Yr,Ai.prototype.delete=ou,Ai.prototype.get=Sa,Ai.prototype.has=Ta,Ai.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ae(){this.size=0,this.__data__={hash:new Ar,map:new($i||Ai),string:new Ar}}function Se(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function xe(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),Ct=Re.size;return Re.set(te,ue),this.size+=Re.size==Ct?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Se,ee.prototype.get=xe,ee.prototype.has=ot,ee.prototype.set=St;function Vt(te){var ue=this.__data__=new Ai(te);this.size=ue.size}function On(){this.__data__=new Ai,this.size=0}function jn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function dn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function Cr(te,ue){var Re=this.__data__;if(Re instanceof Ai){var Ct=Re.__data__;if(!$i||Ct.length<n-1)return Ct.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(Ct)}return Re.set(te,ue),this.size=Re.size,this}Vt.prototype.clear=On,Vt.prototype.delete=jn,Vt.prototype.get=dn,Vt.prototype.has=ir,Vt.prototype.set=Cr;function zt(te,ue){var Re=sp(te),Ct=!Re&&au(te),$n=!Re&&!Ct&&op(te),xr=!Re&&!Ct&&!$n&&bR(te),Vr=Re||Ct||$n||xr,Un=Vr?Ue(te.length,String):[],Hr=Un.length;for(var Ji in te)Vr&&(Ji=="length"||$n&&(Ji=="offset"||Ji=="parent")||xr&&(Ji=="buffer"||Ji=="byteLength"||Ji=="byteOffset")||Et(Ji,Hr))||Un.push(Ji);return Un}function sr(te,ue,Re){(Re!==void 0&&!Gl(te[ue],Re)||Re===void 0&&!(ue in te))&&Ci(te,ue,Re)}function zr(te,ue,Re){var Ct=te[ue];(!(me.call(te,ue)&&Gl(Ct,Re))||Re===void 0&&!(ue in te))&&Ci(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(Gl(te[Re][0],ue))return Re;return-1}function Ci(te,ue,Re){ue=="__proto__"&&Tn?Tn(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Us=Oe();function Kr(te){return te==null?te===void 0?T:y:pn&&pn in Object(te)?Ge(te):Bo(te)}function fo(te){return uu(te)&&Kr(te)==a}function Li(te){if(!ap(te)||Bn(te))return!1;var ue=LS(te)?Ce:z;return ue.test(gR(te))}function Fi(te){return uu(te)&&vR(te.length)&&!!j[Kr(te)]}function jo(te){if(!ap(te))return kr(te);var ue=Ir(te),Re=[];for(var Ct in te)Ct=="constructor"&&(ue||!me.call(te,Ct))||Re.push(Ct);return Re}function Aa(te,ue,Re,Ct,$n){te!==ue&&Us(ue,function(xr,Vr){if($n||($n=new Vt),ap(xr))zs(te,ue,Vr,Re,Aa,Ct,$n);else{var Un=Ct?Ct(ip(te,Vr),xr,Vr+"",te,ue,$n):void 0;Un===void 0&&(Un=xr),sr(te,Vr,Un)}},Xy)}function zs(te,ue,Re,Ct,$n,xr,Vr){var Un=ip(te,Re),Hr=ip(ue,Re),Ji=Vr.get(Hr);if(Ji){sr(te,Re,Ji);return}var Uo=xr?xr(Un,Hr,Re+"",te,ue,Vr):void 0,Jy=Uo===void 0;if(Jy){var up=sp(Hr),Kb=!up&&op(Hr),Xb=!up&&!Kb&&bR(Hr);Uo=Hr,up||Kb||Xb?sp(Un)?Uo=Un:yR(Un)?Uo=fe(Un):Kb?(Jy=!1,Uo=Y(Hr)):Xb?(Jy=!1,Uo=Z(Hr)):Uo=[]:c5(Hr)||au(Hr)?(Uo=Un,au(Un)?Uo=Ky(Un):(!ap(Un)||LS(Un))&&(Uo=st(Hr))):Jy=!1}Jy&&(Vr.set(Hr,Uo),$n(Uo,Hr,Ct,xr,Vr),Vr.delete(Hr)),sr(te,Re,Uo)}function Wl(te,ue){return MS(fd(te,ue,lg),te+"")}var cd=Tn?function(te,ue){return Tn(te,"toString",{configurable:!0,enumerable:!1,value:Qy(ue),writable:!0})}:lg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,Ct=te.length;for(ue||(ue=Array(Ct));++Re<Ct;)ue[Re]=te[Re];return ue}function ge(te,ue,Re,Ct){var $n=!Re;Re||(Re={});for(var xr=-1,Vr=ue.length;++xr<Vr;){var Un=ue[xr],Hr=void 0;Hr===void 0&&(Hr=te[Un]),$n?Ci(Re,Un,Hr):zr(Re,Un,Hr)}return Re}function le(te){return Wl(function(ue,Re){var Ct=-1,$n=Re.length,xr=$n>1?Re[$n-1]:void 0,Vr=$n>2?Re[2]:void 0;for(xr=te.length>3&&typeof xr=="function"?($n--,xr):void 0,Vr&&hn(Re[0],Re[1],Vr)&&(xr=$n<3?void 0:xr,$n=1),ue=Object(ue);++Ct<$n;){var Un=Re[Ct];Un&&te(ue,Un,Ct,xr)}return ue})}function Oe(te){return function(ue,Re,Ct){for(var $n=-1,xr=Object(ue),Vr=Ct(ue),Un=Vr.length;Un--;){var Hr=Vr[++$n];if(Re(xr[Hr],Hr,xr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Nt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=it(te,ue);return Li(Re)?Re:void 0}function Ge(te){var ue=me.call(te,pn),Re=te[pn];try{te[pn]=void 0;var Ct=!0}catch{}var $n=yt.call(te);return Ct&&(ue?te[pn]=Re:delete te[pn]),$n}function st(te){return typeof te.constructor=="function"&&!Ir(te)?Mi(Ln(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function hn(te,ue,Re){if(!ap(Re))return!1;var Ct=typeof ue;return(Ct=="number"?Yb(Re)&&Et(ue,Re.length):Ct=="string"&&ue in Re)?Gl(Re[ue],te):!1}function Nt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Bn(te){return!!dt&&dt in te}function Ir(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function kr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Bo(te){return yt.call(te)}function fd(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var Ct=arguments,$n=-1,xr=rr(Ct.length-ue,0),Vr=Array(xr);++$n<xr;)Vr[$n]=Ct[ue+$n];$n=-1;for(var Un=Array(ue+1);++$n<ue;)Un[$n]=Ct[$n];return Un[ue]=Re(Vr),Ke(te,this,Un)}}function ip(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var MS=Yy(cd);function Yy(te){var ue=0,Re=0;return function(){var Ct=Fo(),$n=s-(Ct-Re);if(Re=Ct,$n>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function gR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function Gl(te,ue){return te===ue||te!==te&&ue!==ue}var au=fo(function(){return arguments}())?fo:function(te){return uu(te)&&me.call(te,"callee")&&!Fn.call(te,"callee")},sp=Array.isArray;function Yb(te){return te!=null&&vR(te.length)&&!LS(te)}function yR(te){return uu(te)&&Yb(te)}var op=nr||wR;function LS(te){if(!ap(te))return!1;var ue=Kr(te);return ue==h||ue==p||ue==l||ue==b}function vR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function ap(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function uu(te){return te!=null&&typeof te=="object"}function c5(te){if(!uu(te)||Kr(te)!=v)return!1;var ue=Ln(te);if(ue===null)return!0;var Re=me.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==pe}var bR=ve?gt(ve):Fi;function Ky(te){return ge(te,Xy(te))}function Xy(te){return Yb(te)?zt(te):jo(te)}var _R=le(function(te,ue,Re){Aa(te,ue,Re)});function Qy(te){return function(){return te}}function lg(te){return te}function wR(){return!1}e.exports=_R})(kO,kO.exports);var kit=kO.exports;const cY=Ul(kit);function cv(e){return structuredClone(e)}function fY(){const{answers:e}=Fc(i=>i),t=qm(),r=`${Wm()}_${t}`;return e[r]}const vEe=N.createContext(null);function Rit(){const e=N.useContext(vEe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function ym(){return Fc(e=>e.config)}function Oae(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function bEe(){const e=qm(),t=lY(),r=`${Wm()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Fc(w=>w),a=Bh(),{saveTrialAnswer:u,setIframeAnswers:l}=jh(),{storageEngine:c}=wa(),f=Iit(r),d=typeof e!="number"||!f,h=fY(),p=Hm(),m=ym(),g=VI(),y=N.useMemo(()=>Date.now(),[]),v=Rit(),b=N.useCallback(()=>{if(typeof e!="number")return;const w=cv(i[r]),E=Object.values(w).reduce((P,O)=>Object.hasOwn(O,"values")?{...P,...O.values}:P,{}),{provenanceGraph:S}=w,T=Date.now(),A=v&&"current"in v&&v.current?v.current.splice(0,v.current.length):[];h.endTime||(a(u({identifier:r,answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A})),c&&c.saveAnswers({...o,[r]:{answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A}}),a(l({})));let C=e+1;const I=pEe(s,e),R=I!==null&&I.some(P=>Object.hasOwn(P.currentBlock,"skip")&&P.currentBlock.skip!==void 0),M={...o,[r]:{answer:E,startTime:y,endTime:T,provenanceGraph:S,windowEvents:A}};R&&[...I.flatMap(O=>O.currentBlock.skip?O.currentBlock.skip.map(F=>({...F,firstIndex:O.firstIndex,lastIndex:O.lastIndex})):[])].some(O=>{let F=!1;const L=Object.fromEntries(Object.entries(M).filter(([U])=>{const H=parseInt(U.slice(U.lastIndexOf("_")+1),10);return H>=O.firstIndex&&H<=e})),B=O.check!=="block"?Object.entries(L).filter(([U])=>U.slice(0,U.lastIndexOf("_"))===O.name):Object.entries(L);if(B.length===0)return!1;if(B.some(([U,H])=>!H))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(O,null,2)}`);if(O.check==="response"||O.check==="responses"){const[U,H]=B[0];O.check==="response"?F=O.value!==H.answer[O.responseId]:F=!Oae(H.answer,U,m.components[U.slice(0,U.lastIndexOf("_"))],m)}else if(O.check==="block"||O.check==="repeatedComponent"){if(B.length<O.value)return!1;const U=B.map(([z,W])=>Oae(W.answer,z,m.components[z.slice(0,z.lastIndexOf("_"))],m)),H=U.filter(z=>z).length,D=U.length-H;F=O.condition==="numCorrect"&&H===O.value||O.condition==="numIncorrect"&&D===O.value}if(F){const U=t.indexOf(O.to),H=U===-1?Ait(s,O.to):-1;return C=U===-1?H:U,!0}return!1}),p(`/${g}/${C}${window.location.search}`)},[i,r,v,h,e,s,o,y,p,g,a,u,c,l,m,t]);return{isNextDisabled:d,goToNextStep:b}}function Nit({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=bEe(),o=N.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(Nn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Pit(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Dit=typeof window<"u"?N.useLayoutEffect:N.useEffect;function po(e,t){Dit(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Oit(e,t){e&&Pit(e),po(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),po(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),po(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),po(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),po(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),po(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),po(`mantine-form:${e}:clear-errors`,t.clearErrors),po(`mantine-form:${e}:reset`,t.reset),po(`mantine-form:${e}:validate`,t.validate),po(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),po(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),po(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),po(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),po(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),po(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),po(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),po(`mantine-form:${e}:reset-touched`,t.resetTouched)}function $it(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function qU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Mit(e){const[t,n]=N.useState(qU(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=qU(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function _Ee(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function $ae(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Mae(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=_Ee(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=$ae(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=$ae(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Lit(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Lae(e,t,n){typeof n.value=="object"&&(n.value=X_(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function X_(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(X_(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(X_(a),X_(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(X_(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Lae(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Lae(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function wEe(e){return typeof e!="string"?[]:e.split(".")}function Cu(e,t){const n=wEe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function DL(e,t,n){const r=wEe(e);if(r.length===0)return n;const i=X_(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Fit(e,{from:t,to:n},r){const i=Cu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),DL(e,s,r)}function jit(e,t,n,r){const i=Cu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),DL(e,s,r)}function Bit(e,t,n){const r=Cu(e,n);return Array.isArray(r)?DL(e,r.filter((i,s)=>s!==t),n):n}function Uit({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Lit(o,a,u)),e.setValues({values:Fit(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Mae(o,a,u,-1)),e.setValues({values:Bit(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Mae(o,u,l,1)),e.setValues({values:jit(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var dY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const LP=Ul(dY);function rN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function zit({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=N.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=N.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=N.useCallback((E,S)=>{c(T=>rN(T,E)===S?T:{...T,[E]:S})},[]),m=N.useCallback((E,S)=>{f(T=>rN(T,E)===S?T:{...T,[E]:S})},[]),g=N.useCallback(E=>rN(u.current,E),[]),y=N.useCallback(E=>f(S=>{if(typeof E!="string")return S;const T=_Ee(E,S);return delete T[E],LP(T,S)?S:T}),[]),v=N.useCallback(E=>{if(E){const T=Cu(E,l.current);if(typeof T=="boolean")return T;const A=Cu(E,r.refValues.current),C=Cu(E,r.valuesSnapshot.current);return!LP(A,C)}return Object.keys(l.current).length>0?rN(l.current):!LP(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),w=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Vit({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Cu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=DL(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Hit({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Cu(i,o.previousValues),value:Cu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Fae(e,t){return e?`${e}-${t.toString()}`:t.toString()}function jae(e){const t=qU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function WU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Cu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>WU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||WU(o,t,a,i)),i},r)}function GU(e,t){return jae(typeof e=="function"?e(t):WU(e,t))}function iN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=GU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const qit="__MANTINE_FORM_INDEX__";function Bae(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${qit}`)):!1:!1}function EEe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Mit(r),p=Vit({initialValues:n,onValuesChange:l,mode:t}),m=zit({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Uit({$values:p,$errors:h,$status:m}),y=Hit({$status:m}),[v,b]=N.useState(0),[w,E]=N.useState({}),S=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),T=N.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),A=N.useCallback((D,z,W)=>{const j=Bae(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?q=>{const G=iN(D,d,q.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[D]:(q[D]||0)+1})):null]})},[l,d]),C=N.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Cu(W,p.refValues.current),q=Cu(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),I=N.useCallback(()=>{const D=GU(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),R=N.useCallback(D=>{const z=iN(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),M=(D,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:$it(ce=>A(D,ce,{forceUpdate:!1})),"data-path":Fae(e,D)};return W&&(ne.error=h.errorsState[D]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Cu(D,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Cu(D,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(D,!0),ne.onBlur=()=>{if(Bae(D,u)){const ce=iN(D,d,p.refValues.current);ce.hasError?h.setFieldError(D,ce.error):h.clearFieldError(D)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:D,options:{type:z,withError:W,withFocus:j,...q},form:H}))},P=(D,z)=>W=>{W==null||W.preventDefault();const j=I();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},O=D=>c(D||p.refValues.current),F=N.useCallback(D=>{D.preventDefault(),S()},[]),L=N.useCallback(D=>D?!iN(D,d,p.refValues.current).hasError:!GU(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,U=N.useCallback(D=>document.querySelector(`[data-path="${Fae(e,D)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:I,validateField:R,getInputProps:M,onSubmit:P,onReset:F,isValid:L,getTransformedValues:O,key:B,getInputNode:U};return Oit(e,H),H}function Wit(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Git(e){return Wit(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Yit=new URLSearchParams(window.location.search),Kit=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Yit.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Xit=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Qit(e,t,n){const[r,i]=N.useState(null),s=EEe({initialValues:Kit(e,n),validate:Xit(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Sb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Jit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(dm.Group,{label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:u,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx($s,{mt:"xs",children:a.map(l=>_.jsx(dm,{disabled:t,value:l.value,label:l.label},l.value))})})}function Zit({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(OI,{disabled:t,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Sb(e,n,u)})}function est({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(Pi.Wrapper,{label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(kf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(kf.Item,{children:a},a)):_.jsx(kf.Item,{children:t.value})})})}function xEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(kv.Group,{name:`radioInput${e.id}`,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:c,...n,error:Sb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs($s,{mt:"xs",children:[u?_.jsx(et,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(kv,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(et,{children:l})]})},e.id)}function tst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(xEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function nst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(mG,{disabled:t,placeholder:l,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Sb(e,n)})}function rst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Sb(e,n);return _.jsx(Pi.Wrapper,{label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(yL,{disabled:t,marks:a,...n,h:40})})}function ist({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(lv,{disabled:t,placeholder:s,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function sst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(rG,{disabled:t,placeholder:s,label:_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ee,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ee,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ga,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Sb(e,n)})}function ost({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=$G(),u=ym().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(Ee,{mb:"md",children:[e.type==="numerical"&&_.jsx(nst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(ist,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(sst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(tst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Zit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(rst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(xEe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Jit,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(est,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function RO({config:e,location:t,status:n,style:r}){var w;const i=qm(),s=Wm(),o=n==null?void 0:n.answer,a=e,u=N.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Bh(),{updateResponseBlockValidation:c}=jh(),f=Qit(u,i,o||{}),[d,h]=N.useState(void 0),[p,m]=N.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Fc(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return N.useEffect(()=>{const E=u.find(S=>S.type==="iframe");if(g&&E){const S=E.id;f.setValues({...f.values,[S]:g[S]})}},[g]),N.useEffect(()=>{y&&h(y)},[y]),N.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:cv(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,S)=>{var T,A;return _.jsx(Ht.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(ost,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:S+1}),v&&p&&_.jsx(et,{children:`The correct answer is: ${(A=(T=a.correctAnswer)==null?void 0:T.find(C=>C.id===E.id))==null?void 0:A.answer}`})]})},`${E.id}-${i}`)}),_.jsxs($s,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(Nn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(Nit,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const eT="@REVISIT_COMMS",ast={minHeight:"500px",width:"100%",border:0};function ust({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=jh(),r=Bh(),i=Qwe(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Wm(),u=Hm(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${eT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${eT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${eT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${eT}/ANSWERS`:r(t(d.message));break;case`${eT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Lh}${e.path}?trialid=${a}&id=${o}`,style:ast})}async function hY(e){const n=await(await fetch(`${Lh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Nv({email:e,path:t}){const n=wb();return _.jsxs(Oh,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(oi,{order:2,children:_.jsx(et,{span:!0,c:"orange",children:"404"})}),_.jsxs(et,{children:[_.jsx(et,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Rf,{h:"lg"}),_.jsxs(kf,{children:[_.jsx(kf.Item,{children:_.jsx(et,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(kf.Item,{children:_.jsxs(et,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Sx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const lst={maxWidth:"100%"};function cst({currentConfig:e}){const t={...lst,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await hY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Sy,{mx:"auto",src:`${Lh}${e.path}`,style:t}):_.jsx(Nv,{path:e.path})}function Kp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fst(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lx(e){let t,n,r;e.length!==2?(t=Kp,n=(a,u)=>Kp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Kp||e===fst?e:dst,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function dst(){return 0}function SEe(e){return e===null?NaN:+e}function*hst(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const TEe=Lx(Kp),$0=TEe.right,pst=TEe.left;Lx(SEe).center;function mst(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function gst(e,t){const n=mst(e,t);return n&&Math.sqrt(n)}function Uae(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ha{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class zae extends Map{constructor(t,n=IEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(YU(this,t))}has(t){return super.has(YU(this,t))}set(t,n){return super.set(AEe(this,t),n)}delete(t){return super.delete(CEe(this,t))}}class NO extends Set{constructor(t,n=IEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(YU(this,t))}add(t){return super.add(AEe(this,t))}delete(t){return super.delete(CEe(this,t))}}function YU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function AEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function CEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function IEe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function yst(e,t){return Array.from(t,n=>e[n])}function vst(e=Kp){if(e===Kp)return kEe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function kEe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const bst=Math.sqrt(50),_st=Math.sqrt(10),wst=Math.sqrt(2);function PO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=bst?10:s>=_st?5:s>=wst?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?PO(e,t,n*2):[a,u,l]}function KU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?PO(t,e,n):PO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function XU(e,t,n){return t=+t,e=+e,n=+n,PO(e,t,n)[2]}function M0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?XU(t,e,n):XU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function h0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function QU(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function REe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?kEe:vst(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));REe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(tT(e,n,t),i(e[r],s)>0&&tT(e,n,r);o<a;){for(tT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?tT(e,n,a):(++a,tT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function tT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function JU(e,t,n){if(e=Float64Array.from(hst(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return QU(e);if(t>=1)return h0(e);var r,i=(r-1)*t,s=Math.floor(i),o=h0(REe(e,s).subarray(0,s+1)),a=QU(e.subarray(s+1));return o+(a-o)*(i-s)}}function NEe(e,t,n=SEe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Est(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function PEe(e,t){return JU(e,.5,t)}function*xst(e){for(const t of e)yield*t}function DEe(e){return Array.from(xst(e))}function Iu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function OEe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Sst(e,...t){e=new NO(e),t=t.map(Tst);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Tst(e){return e instanceof NO?e:new NO(e)}function Ast(...e){const t=new NO;for(const n of e)for(const r of n)t.add(r);return t}var Cst={value:()=>{}};function OL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new FP(n)}function FP(e){this._=e}function Ist(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}FP.prototype=OL.prototype={constructor:FP,on:function(e,t){var n=this._,r=Ist(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=kst(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Vae(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Vae(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new FP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function kst(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Vae(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Cst,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ZU="http://www.w3.org/1999/xhtml";const Hae={svg:"http://www.w3.org/2000/svg",xhtml:ZU,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $L(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Hae.hasOwnProperty(t)?{space:Hae[t],local:e}:e}function Rst(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ZU&&t.documentElement.namespaceURI===ZU?t.createElement(e):t.createElementNS(n,e)}}function Nst(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $Ee(e){var t=$L(e);return(t.local?Nst:Rst)(t)}function Pst(){}function pY(e){return e==null?Pst:function(){return this.querySelector(e)}}function Dst(e){typeof e!="function"&&(e=pY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ya(r,this._parents)}function MEe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Ost(){return[]}function LEe(e){return e==null?Ost:function(){return this.querySelectorAll(e)}}function $st(e){return function(){return MEe(e.apply(this,arguments))}}function Mst(e){typeof e=="function"?e=$st(e):e=LEe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ya(r,i)}function FEe(e){return function(){return this.matches(e)}}function jEe(e){return function(t){return t.matches(e)}}var Lst=Array.prototype.find;function Fst(e){return function(){return Lst.call(this.children,e)}}function jst(){return this.firstElementChild}function Bst(e){return this.select(e==null?jst:Fst(typeof e=="function"?e:jEe(e)))}var Ust=Array.prototype.filter;function zst(){return Array.from(this.children)}function Vst(e){return function(){return Ust.call(this.children,e)}}function Hst(e){return this.selectAll(e==null?zst:Vst(typeof e=="function"?e:jEe(e)))}function qst(e){typeof e!="function"&&(e=FEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ya(r,this._parents)}function BEe(e){return new Array(e.length)}function Wst(){return new Ya(this._enter||this._groups.map(BEe),this._parents)}function DO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}DO.prototype={constructor:DO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gst(e){return function(){return e}}function Yst(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new DO(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Kst(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new DO(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Xst(e){return e.__data__}function Qst(e,t){if(!arguments.length)return Array.from(this,Xst);var n=t?Kst:Yst,r=this._parents,i=this._groups;typeof e!="function"&&(e=Gst(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Jst(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Ya(o,r),o._enter=a,o._exit=u,o}function Jst(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Zst(){return new Ya(this._exit||this._groups.map(BEe),this._parents)}function eot(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function tot(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ya(a,this._parents)}function not(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function rot(e){e||(e=iot);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ya(i,this._parents).order()}function iot(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function sot(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function oot(){return Array.from(this)}function aot(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function uot(){let e=0;for(const t of this)++e;return e}function lot(){return!this.node()}function cot(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function fot(e){return function(){this.removeAttribute(e)}}function dot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hot(e,t){return function(){this.setAttribute(e,t)}}function pot(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function mot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function got(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yot(e,t){var n=$L(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?dot:fot:typeof t=="function"?n.local?got:mot:n.local?pot:hot)(n,t))}function UEe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vot(e){return function(){this.style.removeProperty(e)}}function bot(e,t,n){return function(){this.style.setProperty(e,t,n)}}function _ot(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function wot(e,t,n){return arguments.length>1?this.each((t==null?vot:typeof t=="function"?_ot:bot)(e,t,n??"")):dE(this.node(),e)}function dE(e,t){return e.style.getPropertyValue(t)||UEe(e).getComputedStyle(e,null).getPropertyValue(t)}function Eot(e){return function(){delete this[e]}}function xot(e,t){return function(){this[e]=t}}function Sot(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Tot(e,t){return arguments.length>1?this.each((t==null?Eot:typeof t=="function"?Sot:xot)(e,t)):this.node()[e]}function zEe(e){return e.trim().split(/^|\s+/)}function mY(e){return e.classList||new VEe(e)}function VEe(e){this._node=e,this._names=zEe(e.getAttribute("class")||"")}VEe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function HEe(e,t){for(var n=mY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function qEe(e,t){for(var n=mY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Aot(e){return function(){HEe(this,e)}}function Cot(e){return function(){qEe(this,e)}}function Iot(e,t){return function(){(t.apply(this,arguments)?HEe:qEe)(this,e)}}function kot(e,t){var n=zEe(e+"");if(arguments.length<2){for(var r=mY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Iot:t?Aot:Cot)(n,t))}function Rot(){this.textContent=""}function Not(e){return function(){this.textContent=e}}function Pot(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Dot(e){return arguments.length?this.each(e==null?Rot:(typeof e=="function"?Pot:Not)(e)):this.node().textContent}function Oot(){this.innerHTML=""}function $ot(e){return function(){this.innerHTML=e}}function Mot(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Lot(e){return arguments.length?this.each(e==null?Oot:(typeof e=="function"?Mot:$ot)(e)):this.node().innerHTML}function Fot(){this.nextSibling&&this.parentNode.appendChild(this)}function jot(){return this.each(Fot)}function Bot(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uot(){return this.each(Bot)}function zot(e){var t=typeof e=="function"?e:$Ee(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Vot(){return null}function Hot(e,t){var n=typeof e=="function"?e:$Ee(e),r=t==null?Vot:typeof t=="function"?t:pY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function qot(){var e=this.parentNode;e&&e.removeChild(this)}function Wot(){return this.each(qot)}function Got(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Yot(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kot(e){return this.select(e?Yot:Got)}function Xot(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Qot(e){return function(t){e.call(this,t,this.__data__)}}function Jot(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Zot(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function eat(e,t,n){return function(){var r=this.__on,i,s=Qot(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function tat(e,t,n){var r=Jot(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?eat:Zot,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function WEe(e,t,n){var r=UEe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function nat(e,t){return function(){return WEe(this,e,t)}}function rat(e,t){return function(){return WEe(this,e,t.apply(this,arguments))}}function iat(e,t){return this.each((typeof t=="function"?rat:nat)(e,t))}function*sat(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var gY=[null];function Ya(e,t){this._groups=e,this._parents=t}function HI(){return new Ya([[document.documentElement]],gY)}function oat(){return this}Ya.prototype=HI.prototype={constructor:Ya,select:Dst,selectAll:Mst,selectChild:Bst,selectChildren:Hst,filter:qst,data:Qst,enter:Wst,exit:Zst,join:eot,merge:tot,selection:oat,order:not,sort:rot,call:sot,nodes:oot,node:aot,size:uot,empty:lot,each:cot,attr:yot,style:wot,property:Tot,classed:kot,text:Dot,html:Lot,raise:jot,lower:Uot,append:zot,insert:Hot,remove:Wot,clone:Kot,datum:Xot,on:tat,dispatch:iat,[Symbol.iterator]:sat};function ms(e){return typeof e=="string"?new Ya([[document.querySelector(e)]],[document.documentElement]):new Ya([[e]],gY)}function aat(e){let t;for(;t=e.sourceEvent;)e=t;return e}function e7(e,t){if(e=aat(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function uat(e){return typeof e=="string"?new Ya([document.querySelectorAll(e)],[document.documentElement]):new Ya([MEe(e)],gY)}const t7={capture:!0,passive:!1};function n7(e){e.preventDefault(),e.stopImmediatePropagation()}function lat(e){var t=e.document.documentElement,n=ms(e).on("dragstart.drag",n7,t7);"onselectstart"in t?n.on("selectstart.drag",n7,t7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function cat(e,t){var n=e.document.documentElement,r=ms(e).on("dragstart.drag",null);t&&(r.on("click.drag",n7,t7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Fx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function qI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cy(){}var Pv=.7,hE=1/Pv,Ew="\\s*([+-]?\\d+)\\s*",o2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",fat=/^#([0-9a-f]{3,8})$/,dat=new RegExp(`^rgb\\(${Ew},${Ew},${Ew}\\)$`),hat=new RegExp(`^rgb\\(${eh},${eh},${eh}\\)$`),pat=new RegExp(`^rgba\\(${Ew},${Ew},${Ew},${o2}\\)$`),mat=new RegExp(`^rgba\\(${eh},${eh},${eh},${o2}\\)$`),gat=new RegExp(`^hsl\\(${o2},${eh},${eh}\\)$`),yat=new RegExp(`^hsla\\(${o2},${eh},${eh},${o2}\\)$`),qae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fx(Cy,Dv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wae,formatHex:Wae,formatHex8:vat,formatHsl:bat,formatRgb:Gae,toString:Gae});function Wae(){return this.rgb().formatHex()}function vat(){return this.rgb().formatHex8()}function bat(){return GEe(this).formatHsl()}function Gae(){return this.rgb().formatRgb()}function Dv(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=fat.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Yae(t):n===3?new eo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dat.exec(e))?new eo(t[1],t[2],t[3],1):(t=hat.exec(e))?new eo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pat.exec(e))?sN(t[1],t[2],t[3],t[4]):(t=mat.exec(e))?sN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gat.exec(e))?Qae(t[1],t[2]/100,t[3]/100,1):(t=yat.exec(e))?Qae(t[1],t[2]/100,t[3]/100,t[4]):qae.hasOwnProperty(e)?Yae(qae[e]):e==="transparent"?new eo(NaN,NaN,NaN,0):null}function Yae(e){return new eo(e>>16&255,e>>8&255,e&255,1)}function sN(e,t,n,r){return r<=0&&(e=t=n=NaN),new eo(e,t,n,r)}function yY(e){return e instanceof Cy||(e=Dv(e)),e?(e=e.rgb(),new eo(e.r,e.g,e.b,e.opacity)):new eo}function L0(e,t,n,r){return arguments.length===1?yY(e):new eo(e,t,n,r??1)}function eo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Fx(eo,L0,qI(Cy,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pv:Math.pow(Pv,e),new eo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new eo(fv(this.r),fv(this.g),fv(this.b),OO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kae,formatHex:Kae,formatHex8:_at,formatRgb:Xae,toString:Xae}));function Kae(){return`#${W1(this.r)}${W1(this.g)}${W1(this.b)}`}function _at(){return`#${W1(this.r)}${W1(this.g)}${W1(this.b)}${W1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xae(){const e=OO(this.opacity);return`${e===1?"rgb(":"rgba("}${fv(this.r)}, ${fv(this.g)}, ${fv(this.b)}${e===1?")":`, ${e})`}`}function OO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function W1(e){return e=fv(e),(e<16?"0":"")+e.toString(16)}function Qae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new mf(e,t,n,r)}function GEe(e){if(e instanceof mf)return new mf(e.h,e.s,e.l,e.opacity);if(e instanceof Cy||(e=Dv(e)),!e)return new mf;if(e instanceof mf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new mf(o,a,u,e.opacity)}function $O(e,t,n,r){return arguments.length===1?GEe(e):new mf(e,t,n,r??1)}function mf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fx(mf,$O,qI(Cy,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new mf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pv:Math.pow(Pv,e),new mf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new eo(T8(e>=240?e-240:e+120,i,r),T8(e,i,r),T8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new mf(Jae(this.h),oN(this.s),oN(this.l),OO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=OO(this.opacity);return`${e===1?"hsl(":"hsla("}${Jae(this.h)}, ${oN(this.s)*100}%, ${oN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Jae(e){return e=(e||0)%360,e<0?e+360:e}function oN(e){return Math.max(0,Math.min(1,e||0))}function T8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const YEe=Math.PI/180,KEe=180/Math.PI,MO=18,XEe=.96422,QEe=1,JEe=.82521,ZEe=4/29,xw=6/29,exe=3*xw*xw,wat=xw*xw*xw;function txe(e){if(e instanceof th)return new th(e.l,e.a,e.b,e.opacity);if(e instanceof Fp)return nxe(e);e instanceof eo||(e=yY(e));var t=k8(e.r),n=k8(e.g),r=k8(e.b),i=A8((.2225045*t+.7168786*n+.0606169*r)/QEe),s,o;return t===n&&n===r?s=o=i:(s=A8((.4360747*t+.3850649*n+.1430804*r)/XEe),o=A8((.0139322*t+.0971045*n+.7141733*r)/JEe)),new th(116*i-16,500*(s-i),200*(i-o),e.opacity)}function LO(e,t,n,r){return arguments.length===1?txe(e):new th(e,t,n,r??1)}function th(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Fx(th,LO,qI(Cy,{brighter(e){return new th(this.l+MO*(e??1),this.a,this.b,this.opacity)},darker(e){return new th(this.l-MO*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=XEe*C8(t),e=QEe*C8(e),n=JEe*C8(n),new eo(I8(3.1338561*t-1.6168667*e-.4906146*n),I8(-.9787684*t+1.9161415*e+.033454*n),I8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function A8(e){return e>wat?Math.pow(e,1/3):e/exe+ZEe}function C8(e){return e>xw?e*e*e:exe*(e-ZEe)}function I8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function k8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Eat(e){if(e instanceof Fp)return new Fp(e.h,e.c,e.l,e.opacity);if(e instanceof th||(e=txe(e)),e.a===0&&e.b===0)return new Fp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*KEe;return new Fp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function FO(e,t,n,r){return arguments.length===1?Eat(e):new Fp(e,t,n,r??1)}function Fp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function nxe(e){if(isNaN(e.h))return new th(e.l,0,0,e.opacity);var t=e.h*YEe;return new th(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fx(Fp,FO,qI(Cy,{brighter(e){return new Fp(this.h,this.c,this.l+MO*(e??1),this.opacity)},darker(e){return new Fp(this.h,this.c,this.l-MO*(e??1),this.opacity)},rgb(){return nxe(this).rgb()}}));var rxe=-.14861,vY=1.78277,bY=-.29227,ML=-.90649,a2=1.97294,Zae=a2*ML,eue=a2*vY,tue=vY*bY-ML*rxe;function xat(e){if(e instanceof dv)return new dv(e.h,e.s,e.l,e.opacity);e instanceof eo||(e=yY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(tue*r+Zae*t-eue*n)/(tue+Zae-eue),s=r-i,o=(a2*(n-i)-bY*s)/ML,a=Math.sqrt(o*o+s*s)/(a2*i*(1-i)),u=a?Math.atan2(o,s)*KEe-120:NaN;return new dv(u<0?u+360:u,a,i,e.opacity)}function r7(e,t,n,r){return arguments.length===1?xat(e):new dv(e,t,n,r??1)}function dv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fx(dv,r7,qI(Cy,{brighter(e){return e=e==null?hE:Math.pow(hE,e),new dv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pv:Math.pow(Pv,e),new dv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*YEe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new eo(255*(t+n*(rxe*r+vY*i)),255*(t+n*(bY*r+ML*i)),255*(t+n*(a2*r)),this.opacity)}}));function ixe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function sxe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return ixe((n-r/t)*t,o,i,s,a)}}function oxe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return ixe((n-r/t)*t,i,s,o,a)}}const LL=e=>()=>e;function axe(e,t){return function(n){return e+n*t}}function Sat(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function FL(e,t){var n=t-e;return n?axe(e,n>180||n<-180?n-360*Math.round(n/360):n):LL(isNaN(e)?t:e)}function Tat(e){return(e=+e)==1?to:function(t,n){return n-t?Sat(t,n,e):LL(isNaN(t)?n:t)}}function to(e,t){var n=t-e;return n?axe(e,n):LL(isNaN(e)?t:e)}const u2=function e(t){var n=Tat(t);function r(i,s){var o=n((i=L0(i)).r,(s=L0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=to(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function uxe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=L0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Aat=uxe(sxe),Cat=uxe(oxe);function _Y(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function lxe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Iat(e,t){return(lxe(t)?_Y:cxe)(e,t)}function cxe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Gm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function fxe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function oc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function dxe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Gm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var i7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R8=new RegExp(i7.source,"g");function kat(e){return function(){return e}}function Rat(e){return function(t){return e(t)+""}}function wY(e,t){var n=i7.lastIndex=R8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=i7.exec(e))&&(i=R8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:oc(r,i)})),n=R8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Rat(u[0].x):kat(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Gm(e,t){var n=typeof t,r;return t==null||n==="boolean"?LL(t):(n==="number"?oc:n==="string"?(r=Dv(t))?(t=r,u2):wY:t instanceof Dv?u2:t instanceof Date?fxe:lxe(t)?_Y:Array.isArray(t)?cxe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dxe:oc)(e,t)}function Nat(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Pat(e,t){var n=FL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function WI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var nue=180/Math.PI,s7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hxe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*nue,skewX:Math.atan(u)*nue,scaleX:o,scaleY:a}}var aN;function Dat(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?s7:hxe(t.a,t.b,t.c,t.d,t.e,t.f)}function Oat(e){return e==null||(aN||(aN=document.createElementNS("http://www.w3.org/2000/svg","g")),aN.setAttribute("transform",e),!(e=aN.transform.baseVal.consolidate()))?s7:(e=e.matrix,hxe(e.a,e.b,e.c,e.d,e.e,e.f))}function pxe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:oc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:oc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:oc(l,f)},{i:m-2,x:oc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var mxe=pxe(Dat,"px, ","px)","deg)"),gxe=pxe(Oat,", ",")",")"),$at=1e-12;function rue(e){return((e=Math.exp(e))+1/e)/2}function Mat(e){return((e=Math.exp(e))-1/e)/2}function Lat(e){return((e=Math.exp(2*e))-1)/(e+1)}const Fat=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<$at)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(T){var A=T*y,C=rue(E),I=l/(n*v)*(C*Lat(t*A+E)-Mat(E));return[a+I*h,u+I*p,l*C/rue(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function yxe(e){return function(t,n){var r=e((t=$O(t)).h,(n=$O(n)).h),i=to(t.s,n.s),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const jat=yxe(FL);var Bat=yxe(to);function Uat(e,t){var n=to((e=LO(e)).l,(t=LO(t)).l),r=to(e.a,t.a),i=to(e.b,t.b),s=to(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function vxe(e){return function(t,n){var r=e((t=FO(t)).h,(n=FO(n)).h),i=to(t.c,n.c),s=to(t.l,n.l),o=to(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const zat=vxe(FL);var Vat=vxe(to);function bxe(e){return function t(n){n=+n;function r(i,s){var o=e((i=r7(i)).h,(s=r7(s)).h),a=to(i.s,s.s),u=to(i.l,s.l),l=to(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Hat=bxe(FL);var qat=bxe(to);function EY(e,t){t===void 0&&(t=e,e=Gm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Wat(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Gat=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Gm,interpolateArray:Iat,interpolateBasis:sxe,interpolateBasisClosed:oxe,interpolateCubehelix:Hat,interpolateCubehelixLong:qat,interpolateDate:fxe,interpolateDiscrete:Nat,interpolateHcl:zat,interpolateHclLong:Vat,interpolateHsl:jat,interpolateHslLong:Bat,interpolateHue:Pat,interpolateLab:Uat,interpolateNumber:oc,interpolateNumberArray:_Y,interpolateObject:dxe,interpolateRgb:u2,interpolateRgbBasis:Aat,interpolateRgbBasisClosed:Cat,interpolateRound:WI,interpolateString:wY,interpolateTransformCss:mxe,interpolateTransformSvg:gxe,interpolateZoom:Fat,piecewise:EY,quantize:Wat},Symbol.toStringTag,{value:"Module"}));var pE=0,GT=0,nT=0,_xe=1e3,jO,YT,BO=0,Ov=0,jL=0,l2=typeof performance=="object"&&performance.now?performance:Date,wxe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function BL(){return Ov||(wxe(Yat),Ov=l2.now()+jL)}function Yat(){Ov=0}function c2(){this._call=this._time=this._next=null}c2.prototype=xY.prototype={constructor:c2,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?BL():+n)+(t==null?0:+t),!this._next&&YT!==this&&(YT?YT._next=this:jO=this,YT=this),this._call=e,this._time=n,o7()},stop:function(){this._call&&(this._call=null,this._time=1/0,o7())}};function xY(e,t,n){var r=new c2;return r.restart(e,t,n),r}function Kat(){BL(),++pE;for(var e=jO,t;e;)(t=Ov-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pE}function iue(){Ov=(BO=l2.now())+jL,pE=GT=0;try{Kat()}finally{pE=0,Qat(),Ov=0}}function Xat(){var e=l2.now(),t=e-BO;t>_xe&&(jL-=t,BO=e)}function Qat(){for(var e,t=jO,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jO=n);YT=e,o7(r)}function o7(e){if(!pE){GT&&(GT=clearTimeout(GT));var t=e-Ov;t>24?(e<1/0&&(GT=setTimeout(iue,e-l2.now()-jL)),nT&&(nT=clearInterval(nT))):(nT||(BO=l2.now(),nT=setInterval(Xat,_xe)),pE=1,wxe(iue))}}function sue(e,t,n){var r=new c2;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Jat(e,t,n){var r=new c2,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?BL():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Zat=OL("start","end","cancel","interrupt"),eut=[],Exe=0,oue=1,a7=2,jP=3,aue=4,u7=5,BP=6;function UL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;tut(e,n,{name:t,index:r,group:i,on:Zat,tween:eut,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Exe})}function SY(e,t){var n=Qf(e,t);if(n.state>Exe)throw new Error("too late; already scheduled");return n}function Uh(e,t){var n=Qf(e,t);if(n.state>jP)throw new Error("too late; already running");return n}function Qf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function tut(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=xY(s,0,n.time);function s(l){n.state=oue,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==oue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===jP)return sue(o);h.state===aue?(h.state=BP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=BP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(sue(function(){n.state===jP&&(n.state=aue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=a7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===a7){for(n.state=jP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=u7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===u7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=BP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function l7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>a7&&r.state<u7,r.state=BP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function nut(e){return this.each(function(){l7(this,e)})}function rut(e,t){var n,r;return function(){var i=Uh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function iut(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Uh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function sut(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?rut:iut)(n,e,t))}function TY(e,t,n){var r=e._id;return e.each(function(){var i=Uh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qf(i,r).value[t]}}function xxe(e,t){var n;return(typeof t=="number"?oc:t instanceof Dv?u2:(n=Dv(t))?(t=n,u2):wY)(e,t)}function out(e){return function(){this.removeAttribute(e)}}function aut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function uut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function lut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function cut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function fut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function dut(e,t){var n=$L(e),r=n==="transform"?gxe:xxe;return this.attrTween(e,typeof t=="function"?(n.local?fut:cut)(n,r,TY(this,"attr."+e,t)):t==null?(n.local?aut:out)(n):(n.local?lut:uut)(n,r,t))}function hut(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function put(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function mut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&put(e,s)),n}return i._value=t,i}function gut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&hut(e,s)),n}return i._value=t,i}function yut(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=$L(e);return this.tween(n,(r.local?mut:gut)(r,t))}function vut(e,t){return function(){SY(this,e).delay=+t.apply(this,arguments)}}function but(e,t){return t=+t,function(){SY(this,e).delay=t}}function _ut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?vut:but)(t,e)):Qf(this.node(),t).delay}function wut(e,t){return function(){Uh(this,e).duration=+t.apply(this,arguments)}}function Eut(e,t){return t=+t,function(){Uh(this,e).duration=t}}function xut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?wut:Eut)(t,e)):Qf(this.node(),t).duration}function Sut(e,t){if(typeof t!="function")throw new Error;return function(){Uh(this,e).ease=t}}function Tut(e){var t=this._id;return arguments.length?this.each(Sut(t,e)):Qf(this.node(),t).ease}function Aut(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Uh(this,e).ease=n}}function Cut(e){if(typeof e!="function")throw new Error;return this.each(Aut(this._id,e))}function Iut(e){typeof e!="function"&&(e=FEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new vm(r,this._parents,this._name,this._id)}function kut(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new vm(o,this._parents,this._name,this._id)}function Rut(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Nut(e,t,n){var r,i,s=Rut(t)?SY:Uh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Put(e,t){var n=this._id;return arguments.length<2?Qf(this.node(),n).on.on(e):this.each(Nut(n,e,t))}function Dut(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Out(){return this.on("end.remove",Dut(this._id))}function $ut(e){var t=this._name,n=this._id;typeof e!="function"&&(e=pY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,UL(l[d],t,n,d,l,Qf(c,n)));return new vm(s,this._parents,t,n)}function Mut(e){var t=this._name,n=this._id;typeof e!="function"&&(e=LEe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Qf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&UL(h,t,n,m,d,p);s.push(d),o.push(c)}return new vm(s,o,t,n)}var Lut=HI.prototype.constructor;function Fut(){return new Lut(this._groups,this._parents)}function jut(e,t){var n,r,i;return function(){var s=dE(this,e),o=(this.style.removeProperty(e),dE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Sxe(e){return function(){this.style.removeProperty(e)}}function But(e,t,n){var r,i=n+"",s;return function(){var o=dE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Uut(e,t,n){var r,i,s;return function(){var o=dE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),dE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function zut(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Uh(this,e),l=u.on,c=u.value[s]==null?a||(a=Sxe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Vut(e,t,n){var r=(e+="")=="transform"?mxe:xxe;return t==null?this.styleTween(e,jut(e,r)).on("end.style."+e,Sxe(e)):typeof t=="function"?this.styleTween(e,Uut(e,r,TY(this,"style."+e,t))).each(zut(this._id,e)):this.styleTween(e,But(e,r,t),n).on("end.style."+e,null)}function Hut(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function qut(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Hut(e,o,n)),r}return s._value=t,s}function Wut(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,qut(e,t,n??""))}function Gut(e){return function(){this.textContent=e}}function Yut(e){return function(){var t=e(this);this.textContent=t??""}}function Kut(e){return this.tween("text",typeof e=="function"?Yut(TY(this,"text",e)):Gut(e==null?"":e+""))}function Xut(e){return function(t){this.textContent=e.call(this,t)}}function Qut(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Xut(i)),t}return r._value=e,r}function Jut(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Qut(e))}function Zut(){for(var e=this._name,t=this._id,n=Txe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Qf(u,t);UL(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vm(r,this._parents,e,n)}function elt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Uh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var tlt=0;function vm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Txe(){return++tlt}var lp=HI.prototype;vm.prototype={constructor:vm,select:$ut,selectAll:Mut,selectChild:lp.selectChild,selectChildren:lp.selectChildren,filter:Iut,merge:kut,selection:Fut,transition:Zut,call:lp.call,nodes:lp.nodes,node:lp.node,size:lp.size,empty:lp.empty,each:lp.each,on:Put,attr:dut,attrTween:yut,style:Vut,styleTween:Wut,text:Kut,textTween:Jut,remove:Out,tween:sut,delay:_ut,duration:xut,ease:Tut,easeVarying:Cut,end:elt,[Symbol.iterator]:lp[Symbol.iterator]};const nlt=e=>+e;function rlt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ilt={time:null,delay:0,duration:250,ease:rlt};function slt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function olt(e){var t,n;e instanceof vm?(t=e._id,e=e._name):(t=Txe(),(n=ilt).time=BL(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&UL(u,e,t,l,o,n||slt(u,t));return new vm(r,this._parents,e,t)}HI.prototype.interrupt=nut;HI.prototype.transition=olt;const N8=e=>()=>e;function alt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function ult(e){e.stopImmediatePropagation()}function P8(e){e.preventDefault(),e.stopImmediatePropagation()}var uue={name:"drag"},D8={name:"space"},o_={name:"handle"},a_={name:"center"};const{abs:lue,max:Wo,min:Go}=Math;function cue(e){return[+e[0],+e[1]]}function c7(e){return[cue(e[0]),cue(e[1])]}var UP={name:"x",handles:["w","e"].map(f2),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},zP={name:"y",handles:["n","s"].map(f2),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},llt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(f2),input:function(e){return e==null?null:c7(e)},output:function(e){return e}},cp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},fue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},due={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},clt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},flt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function f2(e){return{type:e}}function dlt(e){return!e.ctrlKey&&!e.button}function hlt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function plt(){return navigator.maxTouchPoints||"ontouchstart"in this}function O8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function mlt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function glt(){return AY(UP)}function ylt(){return AY(zP)}function vlt(){return AY(llt)}function AY(e){var t=hlt,n=dlt,r=plt,i=!0,s=OL("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([f2("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cp.overlay).merge(y).each(function(){var b=O8(this).extent;ms(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([f2("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return cp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),S=w.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=Gm(S,T);function C(I){w.selection=I===1&&T===null?null:A(I),l.call(b),E.brush()}return S!==null&&T!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,S=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),T=c(b,w).beforestart();l7(b),E.selection=S===null?null:S,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=ms(this),y=O8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=ms(this.that).datum();s.call(g,this.that,new alt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?uue:i&&g.altKey?a_:o_,w=e===zP?null:clt[v],E=e===UP?null:flt[v],S=O8(y),T=S.extent,A=S.selection,C=T[0][0],I,R,M=T[0][1],P,O,F=T[1][0],L,B,U=T[1][1],H,D,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],be=>{const ke=be.identifier;return be=e7(be,y),be.point0=be.slice(),be.identifier=ke,be});l7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const be=[ce[0],ce[1]||ce[0]];S.selection=A=[[I=e===zP?C:Go(be[0][0],be[1][0]),P=e===UP?M:Go(be[0][1],be[1][1])],[L=e===zP?F:Wo(be[0][0],be[1][0]),H=e===UP?U:Wo(be[0][1],be[1][1])]],ce.length>1&&Ke(g)}else I=A[0][0],P=A[0][1],L=A[1][0],H=A[1][1];R=I,O=P,B=L,D=H;var he=ms(y).attr("pointer-events","none"),ye=he.selectAll(".overlay").attr("cursor",cp[v]);if(g.touches)de.moved=ve,de.ended=Ue;else{var Ie=ms(g.view).on("mousemove.brush",ve,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",gt,!0).on("keyup.brush",it,!0),lat(g.view)}l.call(y),de.start(g,b.name);function ve(be){for(const ke of be.changedTouches||[be])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=e7(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];lue(ke.cur[0]-ke[0])>lue(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,P8(be),Ke(be)}function Ke(be){const ke=ce[0],ze=ke.point0;var ct;switch(z=ke[0]-ze[0],W=ke[1]-ze[1],b){case D8:case uue:{w&&(z=Wo(C-I,Go(F-L,z)),R=I+z,B=L+z),E&&(W=Wo(M-P,Go(U-H,W)),O=P+W,D=H+W);break}case o_:{ce[1]?(w&&(R=Wo(C,Go(F,ce[0][0])),B=Wo(C,Go(F,ce[1][0])),w=1),E&&(O=Wo(M,Go(U,ce[0][1])),D=Wo(M,Go(U,ce[1][1])),E=1)):(w<0?(z=Wo(C-I,Go(F-I,z)),R=I+z,B=L):w>0&&(z=Wo(C-L,Go(F-L,z)),R=I,B=L+z),E<0?(W=Wo(M-P,Go(U-P,W)),O=P+W,D=H):E>0&&(W=Wo(M-H,Go(U-H,W)),O=P,D=H+W));break}case a_:{w&&(R=Wo(C,Go(F,I-z*w)),B=Wo(C,Go(F,L+z*w))),E&&(O=Wo(M,Go(U,P-W*E)),D=Wo(M,Go(U,H+W*E)));break}}B<R&&(w*=-1,ct=I,I=L,L=ct,ct=R,R=B,B=ct,v in fue&&ye.attr("cursor",cp[v=fue[v]])),D<O&&(E*=-1,ct=P,P=H,H=ct,ct=O,O=D,D=ct,v in due&&ye.attr("cursor",cp[v=due[v]])),S.selection&&(A=S.selection),G&&(R=A[0][0],B=A[1][0]),ne&&(O=A[0][1],D=A[1][1]),(A[0][0]!==R||A[0][1]!==O||A[1][0]!==B||A[1][1]!==D)&&(S.selection=[[R,O],[B,D]],l.call(y),de.brush(be,b.name))}function Ue(be){if(ult(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else cat(be.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ye.attr("cursor",cp.overlay),S.selection&&(A=S.selection),mlt(A)&&(S.selection=null,l.call(y)),de.end(be,b.name)}function gt(be){switch(be.keyCode){case 16:{q=w&&E;break}case 18:{b===o_&&(w&&(L=B-z*w,I=R+z*w),E&&(H=D-W*E,P=O+W*E),b=a_,Ke(be));break}case 32:{(b===o_||b===a_)&&(w<0?L=B-z:w>0&&(I=R-z),E<0?H=D-W:E>0&&(P=O-W),b=D8,ye.attr("cursor",cp.selection),Ke(be));break}default:return}P8(be)}function it(be){switch(be.keyCode){case 16:{q&&(G=ne=q=!1,Ke(be));break}case 18:{b===a_&&(w<0?L=B:w>0&&(I=R),E<0?H=D:E>0&&(P=O),b=o_,Ke(be));break}case 32:{b===D8&&(be.altKey?(w&&(L=B-z*w,I=R+z*w),E&&(H=D-W*E,P=O+W*E),b=a_):(w<0?L=B:w>0&&(I=R),E<0?H=D:E>0&&(P=O),b=o_),ye.attr("cursor",cp[v]),Ke(be));break}default:return}P8(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=c7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:N8(c7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:N8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:N8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const f7=Math.PI,d7=2*f7,m1=1e-6,blt=d7-m1;function Axe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _lt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Axe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let CY=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Axe:_lt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>m1)if(!(Math.abs(f*u-l*c)>m1)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((f7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>m1&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>m1||Math.abs(this._y1-c)>m1)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%d7+d7),d>blt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>m1&&this._append`A${r},${r},0,${+(d>=f7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function zL(){return new CY}zL.prototype=CY.prototype;const Xp=11102230246251565e-32,Yo=134217729,wlt=(3+8*Xp)*Xp;function $8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Elt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function GI(e){return new Float64Array(e)}const xlt=(3+16*Xp)*Xp,Slt=(2+12*Xp)*Xp,Tlt=(9+64*Xp)*Xp*Xp,u_=GI(4),hue=GI(8),pue=GI(12),mue=GI(16),Ia=GI(4);function Alt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,S,T,A;const C=e-i,I=n-i,R=t-s,M=r-s;w=C*M,d=Yo*C,h=d-(d-C),p=C-h,d=Yo*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),S=R*I,d=Yo*R,h=d-(d-R),p=R-h,d=Yo*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,u_[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,u_[1]=b-(y+f)+(f-S),A=v+y,f=A-v,u_[2]=v-(A-f)+(y-f),u_[3]=A;let P=Elt(4,u_),O=Slt*o;if(P>=O||-P>=O||(f=e-C,a=e-(C+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-M,c=r-(M+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(O=Tlt*o+wlt*Math.abs(P),P+=C*c+M*a-(R*l+I*u),P>=O||-P>=O))return P;w=a*M,d=Yo*a,h=d-(d-a),p=a-h,d=Yo*M,m=d-(d-M),g=M-m,E=p*g-(w-h*m-p*m-h*g),S=u*I,d=Yo*u,h=d-(d-u),p=u-h,d=Yo*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const F=$8(4,u_,4,Ia,hue);w=C*c,d=Yo*C,h=d-(d-C),p=C-h,d=Yo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=R*l,d=Yo*R,h=d-(d-R),p=R-h,d=Yo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const L=$8(F,hue,4,Ia,pue);w=a*c,d=Yo*a,h=d-(d-a),p=a-h,d=Yo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Yo*u,h=d-(d-u),p=u-h,d=Yo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Ia[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Ia[1]=b-(y+f)+(f-S),A=v+y,f=A-v,Ia[2]=v-(A-f)+(y-f),Ia[3]=A;const B=$8(L,pue,4,Ia,mue);return mue[B-1]}function uN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=xlt*l?u:-Alt(e,t,n,r,i,s,l)}const gue=Math.pow(2,-52),lN=new Uint32Array(512);class UO{static from(t,n=Nlt,r=Plt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new UO(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const I=t[2*C],R=t[2*C+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,I=1/0;C<o;C++){const R=M8(f,d,t[2*C],t[2*C+1]);R<I&&(h=C,I=R)}const g=t[2*h],y=t[2*h+1];for(let C=0,I=1/0;C<o;C++){if(C===h)continue;const R=M8(g,y,t[2*C],t[2*C+1]);R<I&&R>0&&(p=C,I=R)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const I=klt(g,y,v,b,t[2*C],t[2*C+1]);I<w&&(m=C,w=I)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Q_(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let I=0;for(let R=0,M=-1/0;R<o;R++){const P=this._ids[R],O=this._dists[P];O>M&&(C[I++]=P,M=O)}this.hull=C.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(uN(g,y,v,b,E,S)<0){const C=p,I=v,R=b;p=m,v=E,b=S,m=C,E=I,S=R}const T=Rlt(g,y,v,b,E,S);this._cx=T.x,this._cy=T.y;for(let C=0;C<o;C++)this._dists[C]=M8(t[2*C],t[2*C+1],T.x,T.y);Q_(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,I,R;C<this._ids.length;C++){const M=this._ids[C],P=t[2*M],O=t[2*M+1];if(C>0&&Math.abs(P-I)<=gue&&Math.abs(O-R)<=gue||(I=P,R=O,M===h||M===p||M===m))continue;let F=0;for(let D=0,z=this._hashKey(P,O);D<this._hashSize&&(F=s[(z+D)%this._hashSize],!(F!==-1&&F!==r[F]));D++);F=n[F];let L=F,B;for(;B=r[L],uN(P,O,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===F){L=-1;break}if(L===-1)continue;let U=this._addTriangle(L,M,r[L],-1,-1,i[L]);i[M]=this._legalize(U+2),i[L]=U,A++;let H=r[L];for(;B=r[H],uN(P,O,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,M,B,i[M],-1,i[H]),i[M]=this._legalize(U+2),r[H]=H,A--,H=B;if(L===F)for(;B=n[L],uN(P,O,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)U=this._addTriangle(B,M,L,-1,i[L],i[B]),this._legalize(U+2),i[B]=U,r[L]=L,A--,L=B;this._hullStart=n[M]=L,r[L]=n[H]=M,r[M]=H,s[this._hashKey(P,O)]=M,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(A);for(let C=0,I=this._hullStart;C<A;C++)this.hull[C]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Clt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=lN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Ilt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<lN.length&&(lN[s++]=v)}else{if(s===0)break;t=lN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Clt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function M8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Ilt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function klt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Rlt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Q_(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;rT(e,i,s),t[e[n]]>t[e[r]]&&rT(e,n,r),t[e[s]]>t[e[r]]&&rT(e,s,r),t[e[n]]>t[e[s]]&&rT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;rT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Q_(e,t,s,r),Q_(e,t,n,o-1)):(Q_(e,t,n,o-1),Q_(e,t,s,r))}}function rT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Nlt(e){return e[0]}function Plt(e){return e[1]}const yue=1e-6;class G1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>yue||Math.abs(this._y1-s)>yue)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class h7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Dlt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[w],A=t[w+1],C=t[E],I=t[E+1],R=t[S],M=t[S+1],P=C-T,O=I-A,F=R-T,L=M-A,B=(P*L-O*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-T)*L-(o-A)*F);v=(T+R)/2-U*L,b=(A+M)/2+U*F}else{const U=1/B,H=P*P+O*O,D=F*F+L*L;v=T+(L*H-O*D)*U,b=A+(P*D-F*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new G1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new G1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new G1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new h7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Olt=2*Math.PI,l_=Math.pow;function $lt(e){return e[0]}function Mlt(e){return e[1]}function Llt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Flt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class IY{static from(t,n=$lt,r=Mlt,i){return new IY("length"in t?jlt(t,n,r,i):Float64Array.from(Blt(t,n,r,i)))}constructor(t){this._delaunator=new UO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Llt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Flt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new UO(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Dlt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=l_(n-l[t*2],2)+l_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=l_(n-l[p*2],2)+l_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&l_(n-l[h*2],2)+l_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new G1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new G1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Olt)}return r&&r.value()}renderHull(t){const n=t==null?t=new G1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new h7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new G1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new h7;return this.renderTriangle(t,n),n.value()}}function jlt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Blt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var vue={},L8={},F8=34,iT=10,j8=13;function Cxe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Ult(e,t){var n=Cxe(e);return function(r,i){return t(n(r),i,e)}}function bue(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function du(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function zlt(e){return e<0?"-"+du(-e,6):e>9999?"+"+du(e,6):du(e,4)}function Vlt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":zlt(e.getUTCFullYear())+"-"+du(e.getUTCMonth()+1,2)+"-"+du(e.getUTCDate(),2)+(i?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"."+du(i,3)+"Z":r?"T"+du(t,2)+":"+du(n,2)+":"+du(r,2)+"Z":n||t?"T"+du(t,2)+":"+du(n,2)+"Z":"")}function Ixe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Ult(g,d):Cxe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===iT&&--p,f.charCodeAt(p-1)===j8&&--p;function w(){if(v)return L8;if(b)return b=!1,vue;var S,T=m,A;if(f.charCodeAt(T)===F8){for(;m++<p&&f.charCodeAt(m)!==F8||f.charCodeAt(++m)===F8;);return(S=m)>=p?v=!0:(A=f.charCodeAt(m++))===iT?b=!0:A===j8&&(b=!0,f.charCodeAt(m)===iT&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(S=m++))===iT)b=!0;else if(A===j8)b=!0,f.charCodeAt(m)===iT&&++m;else if(A!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=w())!==L8;){for(var E=[];y!==vue&&y!==L8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=bue(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=bue(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Vlt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Hlt=Ixe(","),qlt=Hlt.parse;function Wlt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Glt(e,t){return fetch(e,t).then(Wlt)}function Ylt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Glt(t,n).then(function(i){return e(i,r)})}}var d2=Ylt(qlt);function Klt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Xlt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return kxe(this.cover(t,n),t,n,e)}function kxe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Qlt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)kxe(this,o[n],a[n],e[n]);return this}function Jlt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Zlt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function ect(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ja(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tct(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new ja(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new ja(h[3],g,y,u,l),new ja(h[2],o,y,g,l),new ja(h[1],g,a,u,y),new ja(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function nct(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function rct(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function ict(){return this._root}function sct(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function oct(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new ja(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new ja(i,l,c,a,u)),(i=r[2])&&t.push(new ja(i,s,c,l,u)),(i=r[1])&&t.push(new ja(i,l,o,a,c)),(i=r[0])&&t.push(new ja(i,s,o,l,c))}return this}function act(e){var t=[],n=[],r;for(this._root&&t.push(new ja(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new ja(s,o,a,c,f)),(s=i[1])&&t.push(new ja(s,c,a,u,f)),(s=i[2])&&t.push(new ja(s,o,f,c,l)),(s=i[3])&&t.push(new ja(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function uct(e){return e[0]}function lct(e){return arguments.length?(this._x=e,this):this._x}function cct(e){return e[1]}function fct(e){return arguments.length?(this._y=e,this):this._y}function kY(e,t,n){var r=new RY(t??uct,n??cct,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function RY(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function _ue(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var nu=kY.prototype=RY.prototype;nu.copy=function(){var e=new RY(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=_ue(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=_ue(r));return e};nu.add=Xlt;nu.addAll=Qlt;nu.cover=Jlt;nu.data=Zlt;nu.extent=ect;nu.find=tct;nu.remove=nct;nu.removeAll=rct;nu.root=ict;nu.size=sct;nu.visit=oct;nu.visitAfter=act;nu.x=lct;nu.y=fct;function Ua(e){return function(){return e}}function qg(e){return(e()-.5)*1e-6}function dct(e){return e.x+e.vx}function hct(e){return e.y+e.vy}function pct(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ua(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=kY(t,dct,hct).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,S,T){var A=b.data,C=b.r,I=m+C;if(A){if(A.index>d.index){var R=h-A.x-A.vx,M=p-A.y-A.vy,P=R*R+M*M;P<I*I&&(R===0&&(R=qg(r),P+=R*R),M===0&&(M=qg(r),P+=M*M),P=(I-(P=Math.sqrt(P)))/P*i,d.vx+=(R*=P)*(I=(C*=C)/(g+C)),d.vy+=(M*=P)*I,A.vx-=R*(I=1-I),A.vy-=M*I)}return}return w>h+I||S<h-I||E>p+I||T<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ua(+l),u(),o):e},o}function mct(e){return e.index}function wue(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function gct(e){var t=mct,n=f,r,i=Ua(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,S,T,A,C,I;b<v;++b)w=e[b],E=w.source,S=w.target,T=S.x+S.vx-E.x-E.vx||qg(l),A=S.y+S.vy-E.y-E.vy||qg(l),C=Math.sqrt(T*T+A*A),C=(C-s[b])/C*g*r[b],T*=C,A*=C,S.vx-=T*(I=u[b]),S.vy-=A*I,E.vx+=T*(I=1-I),E.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=wue(b,w.source)),typeof w.target!="object"&&(w.target=wue(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ua(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ua(+g),m(),d):i},d}const yct=1664525,vct=1013904223,Eue=4294967296;function bct(){let e=1;return()=>(e=(yct*e+vct)%Eue)/Eue}function _ct(e){return e.x}function wct(e){return e.y}var Ect=10,xct=Math.PI*(3-Math.sqrt(5));function Sct(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=xY(f),l=OL("tick","end"),c=bct();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Ect*Math.sqrt(.5+m),b=m*xct;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,S,T,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],w=m-T.x,E=g-T.y,S=w*w+E*E,S<y&&(A=T,y=S);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Tct(){var e,t,n,r,i=Ua(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=kY(e,_ct,wct).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=qg(n),w+=y*y),v===0&&(v=qg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=qg(n),w+=y*y),v===0&&(v=qg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ua(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Act(e){var t=Ua(.1),n,r,i;typeof e!="function"&&(e=Ua(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ua(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ua(+a),o(),s):e},s}function Cct(e){var t=Ua(.1),n,r,i;typeof e!="function"&&(e=Ua(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ua(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ua(+a),o(),s):e},s}function Ict(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function mE(e){return e=zO(Math.abs(e)),e?e[1]:NaN}function kct(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Rct(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Nct=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $v(e){if(!(t=Nct.exec(e)))throw new Error("invalid format: "+e);var t;return new NY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$v.prototype=NY.prototype;function NY(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}NY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Pct(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Rxe;function Dct(e,t){var n=zO(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Rxe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+zO(e,Math.max(0,t+s-1))[0]}function xue(e,t){var n=zO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Sue={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ict,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xue(e*100,t),r:xue,s:Dct,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Tue(e){return e}var Aue=Array.prototype.map,Cue=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nxe(e){var t=e.grouping===void 0||e.thousands===void 0?Tue:kct(Aue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Tue:Rct(Aue.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=$v(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Sue[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",A=Sue[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var M=S,P=T,O,F,L;if(E==="c")P=A(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:A(Math.abs(R),b),w&&(R=Pct(R)),B&&+R==0&&p!=="+"&&(B=!1),M=(B?p==="("?p:a:p==="-"||p==="("?"":p)+M,P=(E==="s"?Cue[8+Rxe/3]:"")+P+(B&&p==="("?")":""),C){for(O=-1,F=R.length;++O<F;)if(L=R.charCodeAt(O),48>L||L>57){P=(L===46?i+R.slice(O+1):R.slice(O))+P,R=R.slice(0,O);break}}}v&&!g&&(R=t(R,1/0));var U=M.length+R.length+P.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(R=t(H+R,H.length?y-P.length:1/0),H=""),h){case"<":R=M+R+P+H;break;case"=":R=M+H+R+P;break;case"^":R=H.slice(0,U=H.length>>1)+M+R+P+H.slice(U);break;default:R=H+M+R+P;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=$v(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(mE(d)/3)))*3,m=Math.pow(10,-p),g=Cue[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var cN,jx,PY;Oct({thousands:",",grouping:[3],currency:["$",""]});function Oct(e){return cN=Nxe(e),jx=cN.format,PY=cN.formatPrefix,cN}function Pxe(e){return Math.max(0,-mE(Math.abs(e)))}function Dxe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mE(t)/3)))*3-mE(Math.abs(e)))}function Oxe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,mE(t)-mE(e))+1}var jt=1e-6,VO=1e-12,Pn=Math.PI,Gi=Pn/2,HO=Pn/4,Ka=Pn*2,ns=180/Pn,kn=Pn/180,Xn=Math.abs,Bx=Math.atan,Sc=Math.atan2,Ut=Math.cos,fN=Math.ceil,$xe=Math.exp,p7=Math.hypot,qO=Math.log,B8=Math.pow,Lt=Math.sin,dc=Math.sign||function(e){return e>0?1:e<0?-1:0},Xa=Math.sqrt,DY=Math.tan;function Mxe(e){return e>1?0:e<-1?Pn:Math.acos(e)}function Vu(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function To(){}function WO(e,t){e&&kue.hasOwnProperty(e.type)&&kue[e.type](e,t)}var Iue={Feature:function(e,t){WO(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)WO(n[r].geometry,t)}},kue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){m7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)m7(n[r],t,0)},Polygon:function(e,t){Rue(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Rue(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)WO(n[r],t)}};function m7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Rue(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)m7(e[n],t,1);t.polygonEnd()}function Ip(e,t){e&&Iue.hasOwnProperty(e.type)?Iue[e.type](e,t):WO(e,t)}var GO=new Ha,YO=new Ha,Lxe,Fxe,g7,y7,v7,ph={point:To,lineStart:To,lineEnd:To,polygonStart:function(){GO=new Ha,ph.lineStart=$ct,ph.lineEnd=Mct},polygonEnd:function(){var e=+GO;YO.add(e<0?Ka+e:e),this.lineStart=this.lineEnd=this.point=To},sphere:function(){YO.add(Ka)}};function $ct(){ph.point=Lct}function Mct(){jxe(Lxe,Fxe)}function Lct(e,t){ph.point=jxe,Lxe=e,Fxe=t,e*=kn,t*=kn,g7=e,y7=Ut(t=t/2+HO),v7=Lt(t)}function jxe(e,t){e*=kn,t*=kn,t=t/2+HO;var n=e-g7,r=n>=0?1:-1,i=r*n,s=Ut(t),o=Lt(t),a=v7*o,u=y7*s+a*Ut(i),l=a*r*Lt(i);GO.add(Sc(l,u)),g7=e,y7=s,v7=o}function Fct(e){return YO=new Ha,Ip(e,ph),YO*2}function KO(e){return[Sc(e[1],e[0]),Vu(e[2])]}function Mv(e){var t=e[0],n=e[1],r=Ut(n);return[r*Ut(t),r*Lt(t),Lt(n)]}function dN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function U8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function hN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function XO(e){var t=Xa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ii,_u,ji,dl,g1,Bxe,Uxe,Sw,XA,Tg,bm,xp={point:b7,lineStart:Nue,lineEnd:Pue,polygonStart:function(){xp.point=Vxe,xp.lineStart=jct,xp.lineEnd=Bct,XA=new Ha,ph.polygonStart()},polygonEnd:function(){ph.polygonEnd(),xp.point=b7,xp.lineStart=Nue,xp.lineEnd=Pue,GO<0?(Ii=-(ji=180),_u=-(dl=90)):XA>jt?dl=90:XA<-jt&&(_u=-90),bm[0]=Ii,bm[1]=ji},sphere:function(){Ii=-(ji=180),_u=-(dl=90)}};function b7(e,t){Tg.push(bm=[Ii=e,ji=e]),t<_u&&(_u=t),t>dl&&(dl=t)}function zxe(e,t){var n=Mv([e*kn,t*kn]);if(Sw){var r=gE(Sw,n),i=[r[1],-r[0],0],s=gE(i,r);XO(s),s=KO(s);var o=e-g1,a=o>0?1:-1,u=s[0]*ns*a,l,c=Xn(o)>180;c^(a*g1<u&&u<a*e)?(l=s[1]*ns,l>dl&&(dl=l)):(u=(u+360)%360-180,c^(a*g1<u&&u<a*e)?(l=-s[1]*ns,l<_u&&(_u=l)):(t<_u&&(_u=t),t>dl&&(dl=t))),c?e<g1?cl(Ii,e)>cl(Ii,ji)&&(ji=e):cl(e,ji)>cl(Ii,ji)&&(Ii=e):ji>=Ii?(e<Ii&&(Ii=e),e>ji&&(ji=e)):e>g1?cl(Ii,e)>cl(Ii,ji)&&(ji=e):cl(e,ji)>cl(Ii,ji)&&(Ii=e)}else Tg.push(bm=[Ii=e,ji=e]);t<_u&&(_u=t),t>dl&&(dl=t),Sw=n,g1=e}function Nue(){xp.point=zxe}function Pue(){bm[0]=Ii,bm[1]=ji,xp.point=b7,Sw=null}function Vxe(e,t){if(Sw){var n=e-g1;XA.add(Xn(n)>180?n+(n>0?360:-360):n)}else Bxe=e,Uxe=t;ph.point(e,t),zxe(e,t)}function jct(){ph.lineStart()}function Bct(){Vxe(Bxe,Uxe),ph.lineEnd(),Xn(XA)>jt&&(Ii=-(ji=180)),bm[0]=Ii,bm[1]=ji,Sw=null}function cl(e,t){return(t-=e)<0?t+360:t}function Uct(e,t){return e[0]-t[0]}function Due(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function zct(e){var t,n,r,i,s,o,a;if(dl=ji=-(Ii=_u=1/0),Tg=[],Ip(e,xp),n=Tg.length){for(Tg.sort(Uct),t=1,r=Tg[0],s=[r];t<n;++t)i=Tg[t],Due(r,i[0])||Due(r,i[1])?(cl(r[0],i[1])>cl(r[0],r[1])&&(r[1]=i[1]),cl(i[0],r[1])>cl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=cl(r[1],i[0]))>o&&(o=a,Ii=i[0],ji=r[1])}return Tg=bm=null,Ii===1/0||_u===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ii,_u],[ji,dl]]}var KT,QO,JO,ZO,e3,t3,n3,r3,_7,w7,E7,Hxe,qxe,$a,Ma,La,wf={sphere:To,point:OY,lineStart:Oue,lineEnd:$ue,polygonStart:function(){wf.lineStart=qct,wf.lineEnd=Wct},polygonEnd:function(){wf.lineStart=Oue,wf.lineEnd=$ue}};function OY(e,t){e*=kn,t*=kn;var n=Ut(t);YI(n*Ut(e),n*Lt(e),Lt(t))}function YI(e,t,n){++KT,JO+=(e-JO)/KT,ZO+=(t-ZO)/KT,e3+=(n-e3)/KT}function Oue(){wf.point=Vct}function Vct(e,t){e*=kn,t*=kn;var n=Ut(t);$a=n*Ut(e),Ma=n*Lt(e),La=Lt(t),wf.point=Hct,YI($a,Ma,La)}function Hct(e,t){e*=kn,t*=kn;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=Sc(Xa((o=Ma*s-La*i)*o+(o=La*r-$a*s)*o+(o=$a*i-Ma*r)*o),$a*r+Ma*i+La*s);QO+=o,t3+=o*($a+($a=r)),n3+=o*(Ma+(Ma=i)),r3+=o*(La+(La=s)),YI($a,Ma,La)}function $ue(){wf.point=OY}function qct(){wf.point=Gct}function Wct(){Wxe(Hxe,qxe),wf.point=OY}function Gct(e,t){Hxe=e,qxe=t,e*=kn,t*=kn,wf.point=Wxe;var n=Ut(t);$a=n*Ut(e),Ma=n*Lt(e),La=Lt(t),YI($a,Ma,La)}function Wxe(e,t){e*=kn,t*=kn;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=Ma*s-La*i,a=La*r-$a*s,u=$a*i-Ma*r,l=p7(o,a,u),c=Vu(l),f=l&&-c/l;_7.add(f*o),w7.add(f*a),E7.add(f*u),QO+=c,t3+=c*($a+($a=r)),n3+=c*(Ma+(Ma=i)),r3+=c*(La+(La=s)),YI($a,Ma,La)}function Yct(e){KT=QO=JO=ZO=e3=t3=n3=r3=0,_7=new Ha,w7=new Ha,E7=new Ha,Ip(e,wf);var t=+_7,n=+w7,r=+E7,i=p7(t,n,r);return i<VO&&(t=t3,n=n3,r=r3,QO<jt&&(t=JO,n=ZO,r=e3),i=p7(t,n,r),i<VO)?[NaN,NaN]:[Sc(n,t)*ns,Vu(r/i)*ns]}function x7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function S7(e,t){return Xn(e)>Pn&&(e-=Math.round(e/Ka)*Ka),[e,t]}S7.invert=S7;function Gxe(e,t,n){return(e%=Ka)?t||n?x7(Lue(e),Fue(t,n)):Lue(e):t||n?Fue(t,n):S7}function Mue(e){return function(t,n){return t+=e,Xn(t)>Pn&&(t-=Math.round(t/Ka)*Ka),[t,n]}}function Lue(e){var t=Mue(e);return t.invert=Mue(-e),t}function Fue(e,t){var n=Ut(e),r=Lt(e),i=Ut(t),s=Lt(t);function o(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[Sc(f*i-h*s,c*n-d*r),Vu(h*i+f*s)]}return o.invert=function(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[Sc(f*i+d*s,c*n+h*r),Vu(h*n-c*r)]},o}function Kct(e){e=Gxe(e[0]*kn,e[1]*kn,e.length>2?e[2]*kn:0);function t(n){return n=e(n[0]*kn,n[1]*kn),n[0]*=ns,n[1]*=ns,n}return t.invert=function(n){return n=e.invert(n[0]*kn,n[1]*kn),n[0]*=ns,n[1]*=ns,n},t}function Xct(e,t,n,r,i,s){if(n){var o=Ut(t),a=Lt(t),u=r*n;i==null?(i=t+r*Ka,s=t-u/2):(i=jue(o,i),s=jue(o,s),(r>0?i<s:i>s)&&(i+=r*Ka));for(var l,c=i;r>0?c>s:c<s;c-=u)l=KO([o,-a*Ut(c),-a*Lt(c)]),e.point(l[0],l[1])}}function jue(e,t){t=Mv(t),t[0]-=e,XO(t);var n=Mxe(-t[1]);return((-t[2]<0?-n:n)+Ka-jt)%Ka}function Yxe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:To,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function VP(e,t){return Xn(e[0]-t[0])<jt&&Xn(e[1]-t[1])<jt}function pN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Kxe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(VP(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new pN(g,p,null,!0)),o.push(v.o=new pN(g,null,v,!1)),s.push(v=new pN(y,p,null,!1)),o.push(v.o=new pN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Bue(s),Bue(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Bue(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function z8(e){return Xn(e[0])<=Pn?e[0]:dc(e[0])*((Xn(e[0])+Pn)%Ka-Pn)}function Qct(e,t){var n=z8(t),r=t[1],i=Lt(r),s=[Lt(n),-Ut(n),0],o=0,a=0,u=new Ha;i===1?r=Gi+jt:i===-1&&(r=-Gi-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=z8(h),m=h[1]/2+HO,g=Lt(m),y=Ut(m),v=0;v<d;++v,p=w,g=S,y=T,h=b){var b=f[v],w=z8(b),E=b[1]/2+HO,S=Lt(E),T=Ut(E),A=w-p,C=A>=0?1:-1,I=C*A,R=I>Pn,M=g*S;if(u.add(Sc(M*C*Lt(I),y*T+M*Ut(I))),o+=R?A+C*Ka:A,R^p>=n^w>=n){var P=gE(Mv(h),Mv(b));XO(P);var O=gE(s,P);XO(O);var F=(R^A>=0?-1:1)*Vu(O[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=R^A>=0?1:-1)}}return(o<-jt||o<jt&&u<-VO)^a&1}function Xxe(e,t,n,r){return function(i){var s=t(i),o=Yxe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=DEe(c);var w=Qct(l,r);c.length?(u||(i.polygonStart(),u=!0),Kxe(c,Zct,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,T=E.length,A,C,I;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<A;++S)i.point((I=C[S])[0],I[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Jct))}}return d}}function Jct(e){return e.length>1}function Zct(e,t){return((e=e.x)[0]<0?e[1]-Gi-jt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-jt:Gi-t[1])}const Uue=Xxe(function(){return!0},eft,nft,[-Pn,-Gi]);function eft(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Pn:-Pn,u=Xn(s-t);Xn(u-Pn)<jt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Pn&&(Xn(t-r)<jt&&(t-=r*jt),Xn(s-a)<jt&&(s-=a*jt),n=tft(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function tft(e,t,n,r){var i,s,o=Lt(e-n);return Xn(o)>jt?Bx((Lt(t)*(s=Ut(r))*Lt(n)-Lt(r)*(i=Ut(t))*Lt(e))/(i*s*o)):(t+r)/2}function nft(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Pn,i),r.point(0,i),r.point(Pn,i),r.point(Pn,0),r.point(Pn,-i),r.point(0,-i),r.point(-Pn,-i),r.point(-Pn,0),r.point(-Pn,i);else if(Xn(e[0]-t[0])>jt){var s=e[0]<t[0]?Pn:-Pn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function rft(e){var t=Ut(e),n=2*kn,r=t>0,i=Xn(t)>jt;function s(c,f,d,h){Xct(h,e,n,d,c,f)}function o(c,f){return Ut(c)*Ut(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Pn:-Pn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||VP(f,b)||VP(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!VP(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Mv(c),p=Mv(f),m=[1,0,0],g=gE(h,p),y=dN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,S=gE(m,g),T=hN(m,w),A=hN(g,E);U8(T,A);var C=S,I=dN(T,C),R=dN(C,C),M=I*I-R*(dN(T,T)-1);if(!(M<0)){var P=Xa(M),O=hN(C,(-I-P)/R);if(U8(O,T),O=KO(O),!d)return O;var F=c[0],L=f[0],B=c[1],U=f[1],H;L<F&&(H=F,F=L,L=H);var D=L-F,z=Xn(D-Pn)<jt,W=z||D<jt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^O[1]<(Xn(O[0]-F)<jt?B:U):B<=O[1]&&O[1]<=U:D>Pn^(F<=O[0]&&O[0]<=L)){var j=hN(C,(-I+P)/R);return U8(j,T),[O,KO(j)]}}}function l(c,f){var d=r?e:Pn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return Xxe(o,a,s,r?[0,-e]:[-Pn,e-Pn])}function ift(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var XT=1e9,mN=-XT;function Qxe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<jt?c>0?0:3:Xn(l[0]-n)<jt?c>0?2:1:Xn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=Yxe(),d,h,p,m,g,y,v,b,w,E,S,T={point:A,lineStart:M,lineEnd:P,polygonStart:I,polygonEnd:R};function A(F,L){i(F,L)&&c.point(F,L)}function C(){for(var F=0,L=0,B=h.length;L<B;++L)for(var U=h[L],H=1,D=U.length,z=U[0],W,j,q=z[0],G=z[1];H<D;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function I(){c=f,d=[],h=[],S=!0}function R(){var F=C(),L=S&&F,B=(d=DEe(d)).length;(L||B)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&Kxe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function M(){T.point=O,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&(O(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=A,w&&c.lineEnd()}function O(F,L){var B=i(F,L);if(h&&p.push([F,L]),E)m=F,g=L,y=B,E=!1,B&&(c.lineStart(),c.point(F,L));else if(B&&w)c.point(F,L);else{var U=[v=Math.max(mN,Math.min(XT,v)),b=Math.max(mN,Math.min(XT,b))],H=[F=Math.max(mN,Math.min(XT,F)),L=Math.max(mN,Math.min(XT,L))];ift(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(F,L),S=!1)}v=F,b=L,w=B}return T}}function zue(e,t,n){var r=Iu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Vue(e,t,n){var r=Iu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function sft(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Iu(fN(r/c)*c,n,c).map(p).concat(Iu(fN(a/f)*f,o,f).map(m)).concat(Iu(fN(t/u)*u,e,u).filter(function(b){return Xn(b%c)>jt}).map(d)).concat(Iu(fN(s/l)*l,i,l).filter(function(b){return Xn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=zue(s,i,90),h=Vue(t,e,g),p=zue(a,o,90),m=Vue(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const h2=e=>e;var V8=new Ha,T7=new Ha,Jxe,Zxe,A7,C7,kp={point:To,lineStart:To,lineEnd:To,polygonStart:function(){kp.lineStart=oft,kp.lineEnd=uft},polygonEnd:function(){kp.lineStart=kp.lineEnd=kp.point=To,V8.add(Xn(T7)),T7=new Ha},result:function(){var e=V8/2;return V8=new Ha,e}};function oft(){kp.point=aft}function aft(e,t){kp.point=eSe,Jxe=A7=e,Zxe=C7=t}function eSe(e,t){T7.add(C7*e-A7*t),A7=e,C7=t}function uft(){eSe(Jxe,Zxe)}var yE=1/0,i3=yE,p2=-yE,s3=p2,o3={point:lft,lineStart:To,lineEnd:To,polygonStart:To,polygonEnd:To,result:function(){var e=[[yE,i3],[p2,s3]];return p2=s3=-(i3=yE=1/0),e}};function lft(e,t){e<yE&&(yE=e),e>p2&&(p2=e),t<i3&&(i3=t),t>s3&&(s3=t)}var I7=0,k7=0,QT=0,a3=0,u3=0,J_=0,R7=0,N7=0,JT=0,tSe,nSe,Dd,Od,lc={point:Lv,lineStart:Hue,lineEnd:que,polygonStart:function(){lc.lineStart=dft,lc.lineEnd=hft},polygonEnd:function(){lc.point=Lv,lc.lineStart=Hue,lc.lineEnd=que},result:function(){var e=JT?[R7/JT,N7/JT]:J_?[a3/J_,u3/J_]:QT?[I7/QT,k7/QT]:[NaN,NaN];return I7=k7=QT=a3=u3=J_=R7=N7=JT=0,e}};function Lv(e,t){I7+=e,k7+=t,++QT}function Hue(){lc.point=cft}function cft(e,t){lc.point=fft,Lv(Dd=e,Od=t)}function fft(e,t){var n=e-Dd,r=t-Od,i=Xa(n*n+r*r);a3+=i*(Dd+e)/2,u3+=i*(Od+t)/2,J_+=i,Lv(Dd=e,Od=t)}function que(){lc.point=Lv}function dft(){lc.point=pft}function hft(){rSe(tSe,nSe)}function pft(e,t){lc.point=rSe,Lv(tSe=Dd=e,nSe=Od=t)}function rSe(e,t){var n=e-Dd,r=t-Od,i=Xa(n*n+r*r);a3+=i*(Dd+e)/2,u3+=i*(Od+t)/2,J_+=i,i=Od*e-Dd*t,R7+=i*(Dd+e),N7+=i*(Od+t),JT+=i*3,Lv(Dd=e,Od=t)}function iSe(e){this._context=e}iSe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ka);break}}},result:To};var P7=new Ha,H8,sSe,oSe,ZT,eA,m2={point:To,lineStart:function(){m2.point=mft},lineEnd:function(){H8&&aSe(sSe,oSe),m2.point=To},polygonStart:function(){H8=!0},polygonEnd:function(){H8=null},result:function(){var e=+P7;return P7=new Ha,e}};function mft(e,t){m2.point=aSe,sSe=ZT=e,oSe=eA=t}function aSe(e,t){ZT-=e,eA-=t,P7.add(Xa(ZT*ZT+eA*eA)),ZT=e,eA=t}let Wue,l3,Gue,Yue;class Kue{constructor(t){this._append=t==null?uSe:gft(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Gue||this._append!==l3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Gue=r,l3=this._append,Yue=this._,this._=i}this._+=Yue;break}}}result(){const t=this._;return this._="",t.length?t:null}}function uSe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function gft(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return uSe;if(t!==Wue){const n=10**t;Wue=t,l3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return l3}function lSe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ip(a,i(s))),s.result()}return o.area=function(a){return Ip(a,i(kp)),kp.result()},o.measure=function(a){return Ip(a,i(m2)),m2.result()},o.bounds=function(a){return Ip(a,i(o3)),o3.result()},o.centroid=function(a){return Ip(a,i(lc)),lc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,h2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Kue(n)):new iSe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Kue(n)),o},o.projection(e).digits(n).context(t)}function VL(e){return function(t){var n=new D7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function D7(){}D7.prototype={constructor:D7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $Y(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ip(n,e.stream(o3)),t(o3.result()),r!=null&&e.clipExtent(r),e}function HL(e,t,n){return $Y(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function MY(e,t,n){return HL(e,[[0,0],t],n)}function LY(e,t,n){return $Y(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function FY(e,t,n){return $Y(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Xue=16,yft=Ut(30*kn);function Que(e,t){return+t?bft(e,t):vft(e)}function vft(e){return VL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function bft(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,S=u+p,T=Xa(w*w+E*E+S*S),A=Vu(S/=T),C=Xn(Xn(S)-1)<jt||Xn(s-f)<jt?(s+f)/2:Sc(E,w),I=e(C,A),R=I[0],M=I[1],P=R-r,O=M-i,F=v*P-y*O;(F*F/b>t||Xn((y*P+v*O)/b-.5)>.3||o*d+a*h+u*p<yft)&&(n(r,i,s,o,a,u,R,M,C,w/=T,E/=T,S,m,g),g.point(R,M),n(R,M,C,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var I=Mv([A,C]),R=e(A,C);n(f,d,c,h,p,m,f=R[0],d=R[1],c=A,h=I[0],p=I[1],m=I[2],Xue,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,Xue,r),g.lineEnd=w,w()}return g}}var _ft=VL({point:function(e,t){this.stream.point(e*kn,t*kn)}});function wft(e){return VL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Eft(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Jue(e,t,n,r,i,s){if(!s)return Eft(e,t,n,r,i);var o=Ut(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function zh(e){return cSe(function(){return e})()}function cSe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Uue,g=null,y,v,b,w=h2,E=.5,S,T,A,C,I;function R(F){return A(F[0]*kn,F[1]*kn)}function M(F){return F=A.invert(F[0],F[1]),F&&[F[0]*ns,F[1]*ns]}R.stream=function(F){return C&&I===F?C:C=_ft(wft(c)(m(S(w(I=F)))))},R.preclip=function(F){return arguments.length?(m=F,p=void 0,O()):m},R.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,O()):w},R.clipAngle=function(F){return arguments.length?(m=+F?rft(p=F*kn):(p=null,Uue),O()):p*ns},R.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,h2):Qxe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),O()):g==null?null:[[g,y],[v,b]]},R.scale=function(F){return arguments.length?(n=+F,P()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},R.center=function(F){return arguments.length?(s=F[0]%360*kn,o=F[1]%360*kn,P()):[s*ns,o*ns]},R.rotate=function(F){return arguments.length?(a=F[0]%360*kn,u=F[1]%360*kn,l=F.length>2?F[2]%360*kn:0,P()):[a*ns,u*ns,l*ns]},R.angle=function(F){return arguments.length?(f=F%360*kn,P()):f*ns},R.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},R.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},R.precision=function(F){return arguments.length?(S=Que(T,E=F*F),O()):Xa(E)},R.fitExtent=function(F,L){return HL(R,F,L)},R.fitSize=function(F,L){return MY(R,F,L)},R.fitWidth=function(F,L){return LY(R,F,L)},R.fitHeight=function(F,L){return FY(R,F,L)};function P(){var F=Jue(n,0,0,d,h,f).apply(null,t(s,o)),L=Jue(n,r-F[0],i-F[1],d,h,f);return c=Gxe(a,u,l),T=x7(t,L),A=x7(c,T),S=Que(T,E),O()}function O(){return C=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&M,P()}}function jY(e){var t=0,n=Pn/3,r=cSe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*kn,n=s[1]*kn):[t*ns,n*ns]},i}function xft(e){var t=Ut(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Vu(i*t)]},n}function Sft(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Xn(r)<jt)return xft(e);var i=1+n*(2*r-n),s=Xa(i)/r;function o(a,u){var l=Xa(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*Ut(a)]}return o.invert=function(a,u){var l=s-u,c=Sc(a,Xn(l))*dc(l);return l*r<0&&(c-=Pn*dc(a)*dc(l)),[c/r,Vu((i-(a*a+l*l)*r*r)/(2*r))]},o}function c3(){return jY(Sft).scale(155.424).center([0,33.6442])}function fSe(){return c3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tft(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Aft(){var e,t,n=fSe(),r,i=c3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=c3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Tft([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return HL(c,d,h)},c.fitSize=function(d,h){return MY(c,d,h)},c.fitWidth=function(d,h){return LY(c,d,h)},c.fitHeight=function(d,h){return FY(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function dSe(e){return function(t,n){var r=Ut(t),i=Ut(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function KI(e){return function(t,n){var r=Xa(t*t+n*n),i=e(r),s=Lt(i),o=Ut(i);return[Sc(t*s,r*o),Vu(r&&n*s/r)]}}var hSe=dSe(function(e){return Xa(2/(1+e))});hSe.invert=KI(function(e){return 2*Vu(e/2)});function Cft(){return zh(hSe).scale(124.75).clipAngle(180-.001)}var pSe=dSe(function(e){return(e=Mxe(e))&&e/Lt(e)});pSe.invert=KI(function(e){return e});function Ift(){return zh(pSe).scale(79.4188).clipAngle(180-.001)}function qL(e,t){return[e,qO(DY((Gi+t)/2))]}qL.invert=function(e,t){return[e,2*Bx($xe(t))-Gi]};function kft(){return mSe(qL).scale(961/Ka)}function mSe(e){var t=zh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Pn*r(),d=t(Kct(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===qL?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function gN(e){return DY((Gi+e)/2)}function Rft(e,t){var n=Ut(e),r=e===t?Lt(e):qO(n/Ut(t))/qO(gN(t)/gN(e)),i=n*B8(gN(e),r)/r;if(!r)return qL;function s(o,a){i>0?a<-Gi+jt&&(a=-Gi+jt):a>Gi-jt&&(a=Gi-jt);var u=i/B8(gN(a),r);return[u*Lt(r*o),i-u*Ut(r*o)]}return s.invert=function(o,a){var u=i-a,l=dc(r)*Xa(o*o+u*u),c=Sc(o,Xn(u))*dc(u);return u*r<0&&(c-=Pn*dc(o)*dc(u)),[c/r,2*Bx(B8(i/l,1/r))-Gi]},s}function Nft(){return jY(Rft).scale(109.5).parallels([30,30])}function f3(e,t){return[e,t]}f3.invert=f3;function Pft(){return zh(f3).scale(152.63)}function Dft(e,t){var n=Ut(e),r=e===t?Lt(e):(n-Ut(t))/(t-e),i=n/r+e;if(Xn(r)<jt)return f3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*Ut(l)]}return s.invert=function(o,a){var u=i-a,l=Sc(o,Xn(u))*dc(u);return u*r<0&&(l-=Pn*dc(o)*dc(u)),[l/r,i-dc(r)*Xa(o*o+u*u)]},s}function Oft(){return jY(Dft).scale(131.154).center([0,13.9389])}var QA=1.340264,JA=-.081106,ZA=893e-6,eC=.003796,d3=Xa(3)/2,$ft=12;function gSe(e,t){var n=Vu(d3*Lt(t)),r=n*n,i=r*r*r;return[e*Ut(n)/(d3*(QA+3*JA*r+i*(7*ZA+9*eC*r))),n*(QA+JA*r+i*(ZA+eC*r))]}gSe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<$ft&&(a=n*(QA+JA*r+i*(ZA+eC*r))-t,u=QA+3*JA*r+i*(7*ZA+9*eC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<VO));++s);return[d3*e*(QA+3*JA*r+i*(7*ZA+9*eC*r))/Ut(n),Vu(Lt(n)/d3)]};function Mft(){return zh(gSe).scale(177.158)}function ySe(e,t){var n=Ut(t),r=Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}ySe.invert=KI(Bx);function Lft(){return zh(ySe).scale(144.049).clipAngle(60)}function Fft(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=VL({point:function(w,E){var S=b([w,E]);this.stream.point(S[0],S[1])}}),m=h2,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,S=w[1]*h;if(s){var T=S*o-E*a;E=E*o+S*a,S=T}return[E+t,S+n]}return b.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var T=S*o+E*a;E=E*o-S*a,S=T}return[E/d,S/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,h2):Qxe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*kn,a=Lt(s),o=Ut(s),v()):s*ns},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return HL(b,w,E)},b.fitSize=function(w,E){return MY(b,w,E)},b.fitWidth=function(w,E){return LY(b,w,E)},b.fitHeight=function(w,E){return FY(b,w,E)},b}function vSe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}vSe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function jft(){return zh(vSe).scale(175.295)}function bSe(e,t){return[Ut(t)*Lt(e),Lt(t)]}bSe.invert=KI(Vu);function Bft(){return zh(bSe).scale(249.5).clipAngle(90+jt)}function _Se(e,t){var n=Ut(t),r=1+Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}_Se.invert=KI(function(e){return 2*Bx(e)});function Uft(){return zh(_Se).scale(250).clipAngle(142)}function wSe(e,t){return[qO(DY((Gi+t)/2)),-e]}wSe.invert=function(e,t){return[-t,2*Bx($xe(e))-Gi]};function zft(){var e=mSe(wSe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Vft(e,t){return e.parent===t.parent?1:2}function Hft(e){return e.reduce(qft,0)/e.length}function qft(e,t){return e+t.x}function Wft(e){return 1+e.reduce(Gft,0)}function Gft(e,t){return Math.max(e,t.y)}function Yft(e){for(var t;t=e.children;)e=t[0];return e}function Kft(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Xft(){var e=Vft,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Hft(h),d.y=Wft(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Yft(s),l=Kft(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Qft(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Jft(){return this.eachAfter(Qft)}function Zft(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function edt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function tdt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function ndt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function rdt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function idt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function sdt(e){for(var t=this,n=odt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function odt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function adt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function udt(){return Array.from(this)}function ldt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function cdt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*fdt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function WL(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=pdt)):t===void 0&&(t=hdt);for(var n=new vE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new vE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(ESe)}function ddt(){return WL(this).eachBefore(mdt)}function hdt(e){return e.children}function pdt(e){return Array.isArray(e)?e[1]:null}function mdt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function ESe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function vE(e){this.data=e,this.depth=this.height=0,this.parent=null}vE.prototype=WL.prototype={constructor:vE,count:Jft,each:Zft,eachAfter:tdt,eachBefore:edt,find:ndt,sum:rdt,sort:idt,path:sdt,ancestors:adt,descendants:udt,leaves:ldt,links:cdt,copy:ddt,[Symbol.iterator]:fdt};function HP(e){return e==null?null:xSe(e)}function xSe(e){if(typeof e!="function")throw new Error;return e}function R1(){return 0}function C_(e){return function(){return e}}const gdt=1664525,ydt=1013904223,Zue=4294967296;function vdt(){let e=1;return()=>(e=(gdt*e+ydt)%Zue)/Zue}function bdt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _dt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function wdt(e,t){for(var n=0,r=(e=_dt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&SSe(o,s)?++n:(o=xdt(i=Edt(i,s)),n=0);return o}function Edt(e,t){var n,r;if(q8(t,e))return[t];for(n=0;n<e.length;++n)if(yN(t,e[n])&&q8(tA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(yN(tA(e[n],e[r]),t)&&yN(tA(e[n],t),e[r])&&yN(tA(e[r],t),e[n])&&q8(TSe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function yN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function SSe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function q8(e,t){for(var n=0;n<t.length;++n)if(!SSe(e,t[n]))return!1;return!0}function xdt(e){switch(e.length){case 1:return Sdt(e[0]);case 2:return tA(e[0],e[1]);case 3:return TSe(e[0],e[1],e[2])}}function Sdt(e){return{x:e.x,y:e.y,r:e.r}}function tA(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function TSe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*b)/(E*2)-r,T=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,I=T*T+C*C-1,R=2*(s+S*T+A*C),M=S*S+A*A-s*s,P=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*M))/(2*I):M/R);return{x:r+S+T*P,y:i+A+C*P,r:P}}function ele(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function tle(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function nle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function vN(e){this._=e,this.next=null,this.previous=null}function Tdt(e,t){if(!(s=(e=bdt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;ele(r,n,i=e[2]),n=new vN(n),r=new vN(r),i=new vN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){ele(n._,r._,i=e[u]),i=new vN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(tle(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(tle(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=nle(n);(i=i.next)!==r;)(a=nle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=wdt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Adt(e){return Math.sqrt(e.value)}function ASe(){var e=null,t=1,n=1,r=R1;function i(s){const o=vdt();return s.x=t/2,s.y=n/2,e?s.eachBefore(rle(e)).eachAfter(W8(r,.5,o)).eachBefore(ile(1)):s.eachBefore(rle(Adt)).eachAfter(W8(R1,1,o)).eachAfter(W8(r,s.r/Math.min(t,n),o)).eachBefore(ile(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=HP(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:C_(+s),i):r},i}function rle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function W8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Tdt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function ile(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function CSe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function XI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Cdt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(CSe),o}function s(o,a){return function(u){u.children&&XI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Idt={depth:-1},sle={},G8={};function kdt(e){return e.id}function Rdt(e){return e.parentId}function ole(){var e=kdt,t=Rdt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>Ndt(n(w,E,i))),v=y.map(ale),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(ale(w)),s.push(G8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new vE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?sle:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===sle)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===G8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===G8);--y)h.data=null}if(f.parent=Idt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(ESe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=HP(i),r):e},r.parentId=function(i){return arguments.length?(t=HP(i),r):t},r.path=function(i){return arguments.length?(n=HP(i),r):n},r}function Ndt(e){e=`${e}`;let t=e.length;return O7(e,t-1)&&!O7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function ale(e){let t=e.length;if(t<2)return"";for(;--t>1&&!O7(e,t););return e.slice(0,t)}function O7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Pdt(e,t){return e.parent===t.parent?1:2}function Y8(e){var t=e.children;return t?t[0]:e.t}function K8(e){var t=e.children;return t?t[t.length-1]:e.t}function Ddt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Odt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function $dt(e,t,n){return e.a.parent===t.parent?e.a:n}function qP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}qP.prototype=Object.create(vE.prototype);function Mdt(e){for(var t=new qP(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new qP(s[o],o)),i.parent=n;return(t.parent=new qP(null,0)).children=[t],t}function Ldt(){var e=Pdt,t=1,n=1,r=null;function i(l){var c=Mdt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Odt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=K8(p),d=Y8(d),p&&d;)m=Y8(m),h=K8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(Ddt($dt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!K8(h)&&(h.t=p,h.m+=v-y),d&&!Y8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function GL(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var ISe=(1+Math.sqrt(5))/2;function kSe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,b=Math.max(v/S,S/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?XI(u,n,r,i,m?r+=p*g/m:s):GL(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const RSe=function e(t){function n(r,i,s,o,a){kSe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ISe);function Fdt(){var e=RSe,t=!1,n=1,r=1,i=[0],s=R1,o=R1,a=R1,u=R1,l=R1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(CSe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=xSe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:C_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:C_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:C_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:C_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:C_(+d),c):l},c}function jdt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,S=d-1;E<S;){var T=E+S>>>1;l[T]<w?E=T+1:S=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var I=h?(p*C+g*A)/h:g;c(f,E,A,p,m,I,y),c(E,d,C,I,m,g,y)}else{var R=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,R),c(E,d,C,p,R,g,y)}}}function Bdt(e,t,n,r,i){(e.depth&1?GL:XI)(e,t,n,r,i)}const Udt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?XI(l,i,s,o,m?s+=(a-s)*l.value/m:a):GL(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=kSe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(ISe);function Jf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Iy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $7=Symbol("implicit");function Ux(){var e=new zae,t=[],n=[],r=$7;function i(s){let o=e.get(s);if(o===void 0){if(r!==$7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new zae;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Ux(t,n).unknown(r)},Jf.apply(i,arguments),i}function QI(){var e=Ux().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Iu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return QI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Jf.apply(f(),arguments)}function zdt(e){return function(){return e}}function M7(e){return+e}var ule=[0,1];function ku(e){return e}function L7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:zdt(isNaN(t)?NaN:.5)}function Vdt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Hdt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=L7(i,r),s=n(o,s)):(r=L7(r,i),s=n(s,o)),function(a){return s(r(a))}}function qdt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=L7(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=$0(e,a,1,r)-1;return s[u](i[u](a))}}function JI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function YL(){var e=ule,t=ule,n=Gm,r,i,s,o=ku,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==ku&&(o=Vdt(e[0],e[d-1])),a=d>2?qdt:Hdt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),oc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,M7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=WI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:ku,c()):o!==ku},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function NSe(){return YL()(ku,ku)}function PSe(e,t,n,r){var i=M0(e,t,n),s;switch(r=$v(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Dxe(i,o))&&(r.precision=s),PY(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Oxe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Pxe(i))&&(r.precision=s-(r.type==="%")*2);break}}return jx(r)}function Tb(e){var t=e.domain;return e.ticks=function(n){var r=t();return KU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return PSe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=XU(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function _m(){var e=NSe();return e.copy=function(){return JI(e,_m())},Jf.apply(e,arguments),Tb(e)}function DSe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,M7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return DSe(e).unknown(t)},e=arguments.length?Array.from(e,M7):[0,1],Tb(n)}function OSe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function lle(e){return Math.log(e)}function cle(e){return Math.exp(e)}function Wdt(e){return-Math.log(-e)}function Gdt(e){return-Math.exp(-e)}function Ydt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Kdt(e){return e===10?Ydt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Xdt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function fle(e){return(t,n)=>-e(-t,n)}function BY(e){const t=e(lle,cle),n=t.domain;let r=10,i,s;function o(){return i=Xdt(r),s=Kdt(r),n()[0]<0?(i=fle(i),s=fle(s),e(Wdt,Gdt)):e(lle,cle),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=KU(l,c,g))}else y=KU(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=$v(u)).precision==null&&(u.trim=!0),u=jx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(OSe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function $Se(){const e=BY(YL()).domain([1,10]);return e.copy=()=>JI(e,$Se()).base(e.base()),Jf.apply(e,arguments),e}function dle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hle(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function UY(e){var t=1,n=e(dle(t),hle(t));return n.constant=function(r){return arguments.length?e(dle(t=+r),hle(t)):t},Tb(n)}function MSe(){var e=UY(YL());return e.copy=function(){return JI(e,MSe()).constant(e.constant())},Jf.apply(e,arguments)}function ple(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Qdt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jdt(e){return e<0?-e*e:e*e}function zY(e){var t=e(ku,ku),n=1;function r(){return n===1?e(ku,ku):n===.5?e(Qdt,Jdt):e(ple(n),ple(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Tb(t)}function VY(){var e=zY(YL());return e.copy=function(){return JI(e,VY()).exponent(e.exponent())},Jf.apply(e,arguments),e}function Zdt(){return VY.apply(null,arguments).exponent(.5)}function LSe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=NEe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[$0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Kp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return LSe().domain(e).range(t).unknown(r)},Jf.apply(s,arguments)}function FSe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[$0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return FSe().domain([e,t]).range(i).unknown(s)},Jf.apply(Tb(o),arguments)}function jSe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[$0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return jSe().domain(e).range(t).unknown(n)},Jf.apply(i,arguments)}const X8=new Date,Q8=new Date;function js(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>js(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(X8.setTime(+s),Q8.setTime(+o),e(X8),e(Q8),Math.floor(n(X8,Q8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const bE=js(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);bE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?js(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):bE);bE.range;const jp=1e3,hc=jp*60,Bp=hc*60,wm=Bp*24,HY=wm*7,mle=wm*30,J8=wm*365,Up=js(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*jp)},(e,t)=>(t-e)/jp,e=>e.getUTCSeconds());Up.range;const KL=js(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jp)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getMinutes());KL.range;const XL=js(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*hc)},(e,t)=>(t-e)/hc,e=>e.getUTCMinutes());XL.range;const QL=js(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jp-e.getMinutes()*hc)},(e,t)=>{e.setTime(+e+t*Bp)},(e,t)=>(t-e)/Bp,e=>e.getHours());QL.range;const JL=js(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bp)},(e,t)=>(t-e)/Bp,e=>e.getUTCHours());JL.range;const Qp=js(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hc)/wm,e=>e.getDate()-1);Qp.range;const p0=js(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wm,e=>e.getUTCDate()-1);p0.range;const BSe=js(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wm,e=>Math.floor(e/wm));BSe.range;function Ab(e){return js(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*hc)/HY)}const zx=Ab(0),h3=Ab(1),eht=Ab(2),tht=Ab(3),_E=Ab(4),nht=Ab(5),rht=Ab(6);zx.range;h3.range;eht.range;tht.range;_E.range;nht.range;rht.range;function Cb(e){return js(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/HY)}const Vx=Cb(0),p3=Cb(1),iht=Cb(2),sht=Cb(3),wE=Cb(4),oht=Cb(5),aht=Cb(6);Vx.range;p3.range;iht.range;sht.range;wE.range;oht.range;aht.range;const g2=js(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());g2.range;const y2=js(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());y2.range;const mh=js(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());mh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:js(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});mh.range;const gh=js(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());gh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:js(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});gh.range;function USe(e,t,n,r,i,s){const o=[[Up,1,jp],[Up,5,5*jp],[Up,15,15*jp],[Up,30,30*jp],[s,1,hc],[s,5,5*hc],[s,15,15*hc],[s,30,30*hc],[i,1,Bp],[i,3,3*Bp],[i,6,6*Bp],[i,12,12*Bp],[r,1,wm],[r,2,2*wm],[n,1,HY],[t,1,mle],[t,3,3*mle],[e,1,J8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Lx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(M0(l/J8,c/J8,f));if(h===0)return bE.every(Math.max(M0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[uht,lht]=USe(gh,y2,Vx,BSe,JL,XL),[cht,fht]=USe(mh,g2,zx,Qp,QL,KL);function Z8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ej(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function zSe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=oT(i),c=aT(i),f=oT(s),d=aT(s),h=oT(o),p=aT(o),m=oT(a),g=aT(a),y=oT(u),v=aT(u),b={a:B,A:U,b:H,B:D,c:null,d:wle,e:wle,f:Oht,g:Hht,G:Wht,H:Nht,I:Pht,j:Dht,L:VSe,m:$ht,M:Mht,p:z,q:W,Q:Sle,s:Tle,S:Lht,u:Fht,U:jht,V:Bht,w:Uht,W:zht,x:null,X:null,y:Vht,Y:qht,Z:Ght,"%":xle},w={a:j,A:q,b:G,B:ne,c:null,d:Ele,e:Ele,f:Qht,g:apt,G:lpt,H:Yht,I:Kht,j:Xht,L:qSe,m:Jht,M:Zht,p:ce,q:de,Q:Sle,s:Tle,S:ept,u:tpt,U:npt,V:rpt,w:ipt,W:spt,x:null,X:null,y:opt,Y:upt,Z:cpt,"%":xle},E={a:I,A:R,b:M,B:P,c:O,d:ble,e:ble,f:Cht,g:vle,G:yle,H:_le,I:_le,j:xht,L:Aht,m:Eht,M:Sht,p:C,q:wht,Q:kht,s:Rht,S:Tht,u:ght,U:yht,V:vht,w:mht,W:bht,x:F,X:L,y:vle,Y:yle,Z:_ht,"%":Iht};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(he,ye){return function(Ie){var ve=[],Ke=-1,Ue=0,gt=he.length,it,be,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<gt;)he.charCodeAt(Ke)===37&&(ve.push(he.slice(Ue,Ke)),(be=gle[it=he.charAt(++Ke)])!=null?it=he.charAt(++Ke):be=it==="e"?" ":"0",(ke=ye[it])&&(it=ke(Ie,be)),ve.push(it),Ue=Ke+1);return ve.push(he.slice(Ue,Ke)),ve.join("")}}function T(he,ye){return function(Ie){var ve=sT(1900,void 0,1),Ke=A(ve,he,Ie+="",0),Ue,gt;if(Ke!=Ie.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ue=ej(sT(ve.y,0,1)),gt=Ue.getUTCDay(),Ue=gt>4||gt===0?p3.ceil(Ue):p3(Ue),Ue=p0.offset(Ue,(ve.V-1)*7),ve.y=Ue.getUTCFullYear(),ve.m=Ue.getUTCMonth(),ve.d=Ue.getUTCDate()+(ve.w+6)%7):(Ue=Z8(sT(ve.y,0,1)),gt=Ue.getDay(),Ue=gt>4||gt===0?h3.ceil(Ue):h3(Ue),Ue=Qp.offset(Ue,(ve.V-1)*7),ve.y=Ue.getFullYear(),ve.m=Ue.getMonth(),ve.d=Ue.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),gt="Z"in ve?ej(sT(ve.y,0,1)).getUTCDay():Z8(sT(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(gt+5)%7:ve.w+ve.U*7-(gt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,ej(ve)):Z8(ve)}}function A(he,ye,Ie,ve){for(var Ke=0,Ue=ye.length,gt=Ie.length,it,be;Ke<Ue;){if(ve>=gt)return-1;if(it=ye.charCodeAt(Ke++),it===37){if(it=ye.charAt(Ke++),be=E[it in gle?ye.charAt(Ke++):it],!be||(ve=be(he,Ie,ve))<0)return-1}else if(it!=Ie.charCodeAt(ve++))return-1}return ve}function C(he,ye,Ie){var ve=l.exec(ye.slice(Ie));return ve?(he.p=c.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function I(he,ye,Ie){var ve=h.exec(ye.slice(Ie));return ve?(he.w=p.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function R(he,ye,Ie){var ve=f.exec(ye.slice(Ie));return ve?(he.w=d.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function M(he,ye,Ie){var ve=y.exec(ye.slice(Ie));return ve?(he.m=v.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function P(he,ye,Ie){var ve=m.exec(ye.slice(Ie));return ve?(he.m=g.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function O(he,ye,Ie){return A(he,t,ye,Ie)}function F(he,ye,Ie){return A(he,n,ye,Ie)}function L(he,ye,Ie){return A(he,r,ye,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function D(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ye=S(he+="",b);return ye.toString=function(){return he},ye},parse:function(he){var ye=T(he+="",!1);return ye.toString=function(){return he},ye},utcFormat:function(he){var ye=S(he+="",w);return ye.toString=function(){return he},ye},utcParse:function(he){var ye=T(he+="",!0);return ye.toString=function(){return he},ye}}}var gle={"-":"",_:" ",0:"0"},lo=/^\s*\d+/,dht=/^%/,hht=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function pht(e){return e.replace(hht,"\\$&")}function oT(e){return new RegExp("^(?:"+e.map(pht).join("|")+")","i")}function aT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function mht(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function ght(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function yht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function vht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function bht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function yle(e,t,n){var r=lo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function vle(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _ht(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function wht(e,t,n){var r=lo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Eht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ble(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function xht(e,t,n){var r=lo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function _le(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Sht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Tht(e,t,n){var r=lo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Aht(e,t,n){var r=lo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Cht(e,t,n){var r=lo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Iht(e,t,n){var r=dht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function kht(e,t,n){var r=lo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Rht(e,t,n){var r=lo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function wle(e,t){return mr(e.getDate(),t,2)}function Nht(e,t){return mr(e.getHours(),t,2)}function Pht(e,t){return mr(e.getHours()%12||12,t,2)}function Dht(e,t){return mr(1+Qp.count(mh(e),e),t,3)}function VSe(e,t){return mr(e.getMilliseconds(),t,3)}function Oht(e,t){return VSe(e,t)+"000"}function $ht(e,t){return mr(e.getMonth()+1,t,2)}function Mht(e,t){return mr(e.getMinutes(),t,2)}function Lht(e,t){return mr(e.getSeconds(),t,2)}function Fht(e){var t=e.getDay();return t===0?7:t}function jht(e,t){return mr(zx.count(mh(e)-1,e),t,2)}function HSe(e){var t=e.getDay();return t>=4||t===0?_E(e):_E.ceil(e)}function Bht(e,t){return e=HSe(e),mr(_E.count(mh(e),e)+(mh(e).getDay()===4),t,2)}function Uht(e){return e.getDay()}function zht(e,t){return mr(h3.count(mh(e)-1,e),t,2)}function Vht(e,t){return mr(e.getFullYear()%100,t,2)}function Hht(e,t){return e=HSe(e),mr(e.getFullYear()%100,t,2)}function qht(e,t){return mr(e.getFullYear()%1e4,t,4)}function Wht(e,t){var n=e.getDay();return e=n>=4||n===0?_E(e):_E.ceil(e),mr(e.getFullYear()%1e4,t,4)}function Ght(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function Ele(e,t){return mr(e.getUTCDate(),t,2)}function Yht(e,t){return mr(e.getUTCHours(),t,2)}function Kht(e,t){return mr(e.getUTCHours()%12||12,t,2)}function Xht(e,t){return mr(1+p0.count(gh(e),e),t,3)}function qSe(e,t){return mr(e.getUTCMilliseconds(),t,3)}function Qht(e,t){return qSe(e,t)+"000"}function Jht(e,t){return mr(e.getUTCMonth()+1,t,2)}function Zht(e,t){return mr(e.getUTCMinutes(),t,2)}function ept(e,t){return mr(e.getUTCSeconds(),t,2)}function tpt(e){var t=e.getUTCDay();return t===0?7:t}function npt(e,t){return mr(Vx.count(gh(e)-1,e),t,2)}function WSe(e){var t=e.getUTCDay();return t>=4||t===0?wE(e):wE.ceil(e)}function rpt(e,t){return e=WSe(e),mr(wE.count(gh(e),e)+(gh(e).getUTCDay()===4),t,2)}function ipt(e){return e.getUTCDay()}function spt(e,t){return mr(p3.count(gh(e)-1,e),t,2)}function opt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function apt(e,t){return e=WSe(e),mr(e.getUTCFullYear()%100,t,2)}function upt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function lpt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wE(e):wE.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function cpt(){return"+0000"}function xle(){return"%"}function Sle(e){return+e}function Tle(e){return Math.floor(+e/1e3)}var c_,qY,GSe,ZL,YSe;fpt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fpt(e){return c_=zSe(e),qY=c_.format,GSe=c_.parse,ZL=c_.utcFormat,YSe=c_.utcParse,c_}function dpt(e){return new Date(e)}function hpt(e){return e instanceof Date?+e:+new Date(+e)}function WY(e,t,n,r,i,s,o,a,u,l){var c=NSe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,hpt)):d().map(dpt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(OSe(T,S)):c},c.copy=function(){return JI(c,WY(e,t,n,r,i,s,o,a,u,l))},c}function KSe(){return Jf.apply(WY(cht,fht,mh,g2,zx,Qp,QL,KL,Up,qY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ppt(){return Jf.apply(WY(uht,lht,gh,y2,Vx,p0,JL,XL,Up,ZL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function e6(){var e=0,t=1,n,r,i,s,o=ku,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Gm),l.rangeRound=c(WI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function ky(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function GY(){var e=Tb(e6()(ku));return e.copy=function(){return ky(e,GY())},Iy.apply(e,arguments)}function XSe(){var e=BY(e6()).domain([1,10]);return e.copy=function(){return ky(e,XSe()).base(e.base())},Iy.apply(e,arguments)}function QSe(){var e=UY(e6());return e.copy=function(){return ky(e,QSe()).constant(e.constant())},Iy.apply(e,arguments)}function YY(){var e=zY(e6());return e.copy=function(){return ky(e,YY()).exponent(e.exponent())},Iy.apply(e,arguments)}function mpt(){return YY.apply(null,arguments).exponent(.5)}function t6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=ku,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=EY(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Gm),h.rangeRound=p(WI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function JSe(){var e=Tb(t6()(ku));return e.copy=function(){return ky(e,JSe())},Iy.apply(e,arguments)}function ZSe(){var e=BY(t6()).domain([.1,1,10]);return e.copy=function(){return ky(e,ZSe()).base(e.base())},Iy.apply(e,arguments)}function eTe(){var e=UY(t6());return e.copy=function(){return ky(e,eTe()).constant(e.constant())},Iy.apply(e,arguments)}function KY(){var e=zY(t6());return e.copy=function(){return ky(e,KY()).exponent(e.exponent())},Iy.apply(e,arguments)}function gpt(){return KY.apply(null,arguments).exponent(.5)}function Zf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const ypt=Zf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),vpt=Zf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),bpt=Zf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),_pt=Zf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),wpt=Zf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ept=Zf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),xpt=Zf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Spt=Zf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Tpt=Zf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Apt=Zf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),tTe=Zf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function wn(e){return function(){return e}}const Ale=Math.abs,Ko=Math.atan2,e1=Math.cos,Cpt=Math.max,tj=Math.min,hd=Math.sin,Y1=Math.sqrt,Jo=1e-12,EE=Math.PI,m3=EE/2,tC=2*EE;function Ipt(e){return e>1?0:e<-1?EE:Math.acos(e)}function Cle(e){return e>=1?m3:e<=-1?-m3:Math.asin(e)}function n6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new CY(t)}function kpt(e){return e.innerRadius}function Rpt(e){return e.outerRadius}function Npt(e){return e.startAngle}function Ppt(e){return e.endAngle}function Dpt(e){return e&&e.padAngle}function Opt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Jo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function bN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Y1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,S=d*m-p*h,T=(b<0?-1:1)*Y1(Cpt(0,E*E*w-S*S)),A=(S*b-v*T)/w,C=(-S*v-b*T)/w,I=(S*b+v*T)/w,R=(-S*v+b*T)/w,M=A-g,P=C-y,O=I-g,F=R-y;return M*M+P*P>O*O+F*F&&(A=I,C=R),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function F7(){var e=kpt,t=Rpt,n=wn(0),r=null,i=Npt,s=Ppt,o=Dpt,a=null,u=n6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-m3,m=s.apply(this,arguments)-m3,g=Ale(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Jo))a.moveTo(0,0);else if(g>tC-Jo)a.moveTo(h*e1(p),h*hd(p)),a.arc(0,0,h,p,m,!y),d>Jo&&(a.moveTo(d*e1(m),d*hd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,S=g,T=g,A=o.apply(this,arguments)/2,C=A>Jo&&(r?+r.apply(this,arguments):Y1(d*d+h*h)),I=tj(Ale(h-d)/2,+n.apply(this,arguments)),R=I,M=I,P,O;if(C>Jo){var F=Cle(C/d*hd(A)),L=Cle(C/h*hd(A));(S-=F*2)>Jo?(F*=y?1:-1,w+=F,E-=F):(S=0,w=E=(p+m)/2),(T-=L*2)>Jo?(L*=y?1:-1,v+=L,b-=L):(T=0,v=b=(p+m)/2)}var B=h*e1(v),U=h*hd(v),H=d*e1(E),D=d*hd(E);if(I>Jo){var z=h*e1(b),W=h*hd(b),j=d*e1(w),q=d*hd(w),G;if(g<EE)if(G=Opt(B,U,j,q,z,W,H,D)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ye=1/hd(Ipt((ne*de+ce*he)/(Y1(ne*ne+ce*ce)*Y1(de*de+he*he)))/2),Ie=Y1(G[0]*G[0]+G[1]*G[1]);R=tj(I,(d-Ie)/(ye-1)),M=tj(I,(h-Ie)/(ye+1))}else R=M=0}T>Jo?M>Jo?(P=bN(j,q,B,U,h,M,y),O=bN(z,W,H,D,h,M,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),M<I?a.arc(P.cx,P.cy,M,Ko(P.y01,P.x01),Ko(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,M,Ko(P.y01,P.x01),Ko(P.y11,P.x11),!y),a.arc(0,0,h,Ko(P.cy+P.y11,P.cx+P.x11),Ko(O.cy+O.y11,O.cx+O.x11),!y),a.arc(O.cx,O.cy,M,Ko(O.y11,O.x11),Ko(O.y01,O.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>Jo)||!(S>Jo)?a.lineTo(H,D):R>Jo?(P=bN(H,D,z,W,d,-R,y),O=bN(B,U,j,q,d,-R,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<I?a.arc(P.cx,P.cy,R,Ko(P.y01,P.x01),Ko(O.y01,O.x01),!y):(a.arc(P.cx,P.cy,R,Ko(P.y01,P.x01),Ko(P.y11,P.x11),!y),a.arc(0,0,d,Ko(P.cy+P.y11,P.cx+P.x11),Ko(O.cy+O.y11,O.cx+O.x11),y),a.arc(O.cx,O.cy,R,Ko(O.y11,O.x11),Ko(O.y01,O.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-EE/2;return[e1(f)*c,hd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:wn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:wn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:wn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:wn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:wn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:wn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:wn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function r6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function nTe(e){this._context=e}nTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function XY(e){return new nTe(e)}function rTe(e){return e[0]}function iTe(e){return e[1]}function sTe(e,t){var n=wn(!0),r=null,i=XY,s=null,o=n6(a);e=typeof e=="function"?e:e===void 0?rTe:wn(e),t=typeof t=="function"?t:t===void 0?iTe:wn(t);function a(u){var l,c=(u=r6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:wn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:wn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:wn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function oTe(e,t,n){var r=null,i=wn(!0),s=null,o=XY,a=null,u=n6(l);e=typeof e=="function"?e:e===void 0?rTe:wn(+e),t=typeof t=="function"?t:wn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?iTe:wn(+n);function l(f){var d,h,p,m=(f=r6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return sTe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:wn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:wn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:wn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:wn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:wn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:wn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:wn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function $pt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Mpt(e){return e}function Lpt(){var e=Mpt,t=$pt,n=null,r=wn(0),i=wn(tC),s=wn(0);function o(a){var u,l=(a=r6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(tC,Math.max(-tC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,S){return t(p[E],p[S])}):n!=null&&h.sort(function(E,S){return n(a[E],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:wn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:wn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:wn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:wn(+a),o):s},o}const Fpt={draw(e,t){const n=Y1(t/EE);e.moveTo(n,0),e.arc(0,0,n,0,tC)}};function jpt(e,t){let n=null,r=n6(i);e=typeof e=="function"?e:wn(e||Fpt),t=typeof t=="function"?t:wn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:wn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:wn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function F0(){}function g3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function i6(e){this._context=e}i6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:g3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:g3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bpt(e){return new i6(e)}function aTe(e){this._context=e}aTe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:g3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Upt(e){return new aTe(e)}function uTe(e){this._context=e}uTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:g3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zpt(e){return new uTe(e)}function lTe(e,t){this._basis=new i6(e),this._beta=t}lTe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Vpt=function e(t){function n(r){return t===1?new i6(r):new lTe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function y3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function QY(e,t){this._context=e,this._k=(1-t)/6}QY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:y3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:y3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hpt=function e(t){function n(r){return new QY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function JY(e,t){this._context=e,this._k=(1-t)/6}JY.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:y3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qpt=function e(t){function n(r){return new JY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function ZY(e,t){this._context=e,this._k=(1-t)/6}ZY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:y3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wpt=function e(t){function n(r){return new ZY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function eK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Jo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Jo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function cTe(e,t){this._context=e,this._alpha=t}cTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:eK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gpt=function e(t){function n(r){return t?new cTe(r,t):new QY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function fTe(e,t){this._context=e,this._alpha=t}fTe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:eK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ypt=function e(t){function n(r){return t?new fTe(r,t):new JY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function dTe(e,t){this._context=e,this._alpha=t}dTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kpt=function e(t){function n(r){return t?new dTe(r,t):new ZY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function hTe(e){this._context=e}hTe.prototype={areaStart:F0,areaEnd:F0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Xpt(e){return new hTe(e)}function Ile(e){return e<0?-1:1}function kle(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Ile(s)+Ile(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Rle(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function nj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function v3(e){this._context=e}v3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:nj(this,this._t0,Rle(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,nj(this,Rle(this,n=kle(this,e,t)),n);break;default:nj(this,this._t0,n=kle(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function pTe(e){this._context=new mTe(e)}(pTe.prototype=Object.create(v3.prototype)).point=function(e,t){v3.prototype.point.call(this,t,e)};function mTe(e){this._context=e}mTe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Qpt(e){return new v3(e)}function Jpt(e){return new pTe(e)}function gTe(e){this._context=e}gTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Nle(e),i=Nle(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Nle(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Zpt(e){return new gTe(e)}function s6(e,t){this._context=e,this._t=t}s6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function emt(e){return new s6(e,.5)}function tmt(e){return new s6(e,0)}function nmt(e){return new s6(e,1)}function Ple(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Dle(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function rmt(e,t){return e[t]}function imt(e){const t=[];return t.key=e,t}function smt(){var e=wn([]),t=Dle,n=Ple,r=rmt;function i(s){var o=Array.from(e.apply(this,arguments),imt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=r6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:wn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Dle:typeof s=="function"?s:wn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Ple,i):n},i}function nA(e,t,n){this.k=e,this.x=t,this.y=n}nA.prototype={constructor:nA,scale:function(e){return e===1?this:new nA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new nA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};nA.prototype;function tK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?ZL("%B"):jx(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(hm,{children:_.jsx($s,{gap:3,children:_.jsx(et,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(hm,{children:_.jsx(Fa,{withinPortal:!0,label:c,children:_.jsx(et,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const omt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:tK},Symbol.toStringTag,{value:"Module"}));function yTe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(hm,{children:_.jsx($s,{gap:3,children:_.jsx(et,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx($s,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(et,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const amt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:yTe},Symbol.toStringTag,{value:"Module"})),Yl={top:15,left:100,right:50,bottom:50};function j7({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=gw(),o=N.useMemo(()=>s-Yl.left-Yl.right,[s]),a=N.useMemo(()=>i-Yl.top-Yl.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ux(tTe).domain(d)},[n,t.category]),l=N.useMemo(()=>e?_m([Yl.left,o+Yl.left]).domain([0,h0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?QI([Yl.top,a+Yl.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Yl.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Yl.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(tK,{xScale:l,yRange:c.range(),vertPosition:a+Yl.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(yTe,{yScale:c,horizontalPosition:Yl.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Bm,{})}const umt=Object.freeze(Object.defineProperty({__proto__:null,Bar:j7,default:j7},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Hu(e){return e!=null?dr(e)?e:[e]:[]}function lmt(e=0,t=1/0){return`${Ole(e)} < row_number() && row_number() <= ${Ole(t)}`}function Ole(e){return e<0?`count() + ${e}`:e}class vTe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(lmt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Hu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function En(e){throw Error(e)}function Qa(e){return typeof e=="number"}function hi(e){return typeof e=="function"}function o6(e,t){const n=Array(e);if(hi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let cmt=class extends vTe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){En("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){En("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){En("Not implemented")}getter(t){En("Not implemented")}objects(t){En("Not implemented")}object(t){En("Not implemented")}[Symbol.iterator](){En("Not implemented")}print(t={}){Qa(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=o6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},fmt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},dmt=function(e){return e&&hi(e.get)?e:new fmt(e)};function Em(e){return e instanceof Date}function ga(e){return e===Object(e)}function b3(e){return e instanceof RegExp}function Mo(e){return typeof e=="string"}function hmt(e,t){const n=r=>En(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?$le(e.entries(),t):Em(e)?n("Date"):b3(e)?n("RegExp"):Mo(e)?n():dr(e)?pmt(e,t):hi(e[Symbol.iterator])?mmt(e,t):ga(e)?$le(Object.entries(e),t):n()}function $le(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function pmt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function mmt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:gmt}=Object.prototype;function jf(e,t){return gmt.call(e,t)}function Hl(e){return e?new Mle({...e.data()},e.columnNames()):new Mle}class Mle{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return jf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,ymt=Object.getPrototypeOf(Int8Array);function ZI(e){return e instanceof ymt}function K1(e){return dr(e)||ZI(e)}function Ef(e){return e!=null&&e===e}const uT=e=>K1(e)||Mo(e),vmt={compact:e=>K1(e)?e.filter(t=>Ef(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>uT(e)?e.includes(t,n):!1,indexof:(e,t)=>uT(e)?e.indexOf(t):-1,join:(e,t)=>K1(e)?e.join(t):ar,lastindexof:(e,t)=>uT(e)?e.lastIndexOf(t):-1,length:e=>uT(e)?e.length:0,pluck:(e,t)=>K1(e)?e.map(n=>Ef(n)?n[t]:ar):ar,reverse:e=>K1(e)?e.slice().reverse():Mo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>uT(e)?e.slice(t,n):ar};function bmt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function WP(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const pd=e=>(e<10?"0":"")+e,_mt=e=>e<0?"-"+WP(-e,6):e>9999?"+"+WP(e,6):WP(e,4);function bTe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return _mt(e)+"-"+pd(t+1)+"-"+pd(n)+(!u||o?"T"+pd(r)+":"+pd(i)+":"+pd(s)+"."+WP(o,3)+l:s?"T"+pd(r)+":"+pd(i)+":"+pd(s)+l:i||r||!a?"T"+pd(r)+":"+pd(i)+l:"")}function _Te(e,t){return isNaN(e)?"Invalid Date":bTe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function a6(e,t){return isNaN(e)?"Invalid Date":bTe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const wmt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Emt(e){return e.match(wmt)&&!isNaN(Date.parse(e))}function xmt(e,t=Date.parse){return Emt(e)?t(e):e}const wTe=6e4,ETe=864e5,xTe=6048e5,Vi=new Date,Hi=new Date,Zi=e=>(Vi.setTime(typeof e=="string"?xmt(e):e),Vi);function Smt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function Tmt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function Amt(e){Hi.setTime(+e),Hi.setHours(0,0,0,0),Vi.setTime(+Hi),Vi.setMonth(0),Vi.setDate(1);const t=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*wTe;return Math.floor(1+(Hi-Vi-t)/ETe)}function Cmt(e){Hi.setTime(+e),Hi.setUTCHours(0,0,0,0);const t=Date.UTC(Hi.getUTCFullYear(),0,1);return Math.floor(1+(Hi-t)/ETe)}function Imt(e,t){const n=t||0;Hi.setTime(+e),Hi.setDate(Hi.getDate()-(Hi.getDay()+7-n)%7),Hi.setHours(0,0,0,0),Vi.setTime(+e),Vi.setMonth(0),Vi.setDate(1),Vi.setDate(1-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0);const r=(Hi.getTimezoneOffset()-Vi.getTimezoneOffset())*wTe;return Math.floor((1+(Hi-Vi)-r)/xTe)}function kmt(e,t){const n=t||0;return Hi.setTime(+e),Hi.setUTCDate(Hi.getUTCDate()-(Hi.getUTCDay()+7-n)%7),Hi.setUTCHours(0,0,0,0),Vi.setTime(+e),Vi.setUTCMonth(0),Vi.setUTCDate(1),Vi.setUTCDate(1-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),Math.floor((1+(Hi-Vi))/xTe)}const Rmt={format_date:(e,t)=>_Te(Zi(e),!t),format_utcdate:(e,t)=>a6(Zi(e),!t),timestamp:e=>+Zi(e),year:e=>Zi(e).getFullYear(),quarter:e=>Math.floor(Zi(e).getMonth()/3),month:e=>Zi(e).getMonth(),date:e=>Zi(e).getDate(),dayofweek:e=>Zi(e).getDay(),hours:e=>Zi(e).getHours(),minutes:e=>Zi(e).getMinutes(),seconds:e=>Zi(e).getSeconds(),milliseconds:e=>Zi(e).getMilliseconds(),utcyear:e=>Zi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Zi(e).getUTCMonth()/3),utcmonth:e=>Zi(e).getUTCMonth(),utcdate:e=>Zi(e).getUTCDate(),utcdayofweek:e=>Zi(e).getUTCDay(),utchours:e=>Zi(e).getUTCHours(),utcminutes:e=>Zi(e).getUTCMinutes(),utcseconds:e=>Zi(e).getUTCSeconds(),utcmilliseconds:e=>Zi(e).getUTCMilliseconds(),datetime:Smt,dayofyear:Amt,week:Imt,utcdatetime:Tmt,utcdayofyear:Cmt,utcweek:kmt,now:Date.now};function nK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Em(e)||Em(t)?+e==+t:b3(e)&&b3(t)?e+""==t+"":ga(e)&&ga(t)?Nmt(e,t):!1}function Nmt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Lle(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Lle(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!nK(e[o],t[o]))return!1}return!0}function Lle(e,t,n=nK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Pmt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Dmt=Math.random;function Hx(){return Dmt()}const Omt={random:Hx,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function rK(e){return e instanceof Map}function $mt(e){return e instanceof Set}function GP(e){return rK(e)||$mt(e)}function rj(e){return Array.from(e)}const Mmt={has:(e,t)=>GP(e)?e.has(t):e!=null?jf(e,t):!1,keys:e=>rK(e)?rj(e.keys()):e!=null?Object.keys(e):[],values:e=>GP(e)?rj(e.values()):e!=null?Object.values(e):[],entries:e=>GP(e)?rj(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function Lmt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(jf(t,e))return t[e];return n!==void 0?n:e}function Fmt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const jmt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Z_={bin:bmt,equal:nK,recode:Lmt,sequence:Fmt,...vmt,...Rmt,...Pmt,...Omt,...Mmt,...jmt};function v2(e){return typeof e=="bigint"}function yh(e){return e===void 0?e+"":v2(e)?e+"n":JSON.stringify(e)}function gn(e,t=[],n=[]){return new Bmt(e,Hu(t),Hu(n))}let Bmt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${yh(n)}]`),...this.params.map(yh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const STe=e=>gn("any",e),TTe=()=>gn("count"),ATe=e=>gn("array_agg",e),CTe=e=>gn("array_agg_distinct",e),ITe=(e,t)=>gn("map_agg",[e,t]),kTe=(e,t)=>gn("object_agg",[e,t]),RTe=(e,t)=>gn("entries_agg",[e,t]);({...Z_});function Umt(e,t){e=GP(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function zmt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Vmt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Hmt(e,t,n,r){const i=r==="map"||r===!0?ITe:r==="entries"?RTe:r==="object"?kTe:En('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Umt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:ATe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const qmt="ArrayPattern",Wmt="ArrowFunctionExpression",Gmt="FunctionExpression",m0="Identifier",qx="Literal",NTe="MemberExpression",Ymt="ObjectExpression",PTe="ObjectPattern",DTe="Property",ek="Column",Kmt="Constant",Xmt="Dictionary",Qmt="Function",Jmt="Parameter",OTe="Op",Xr=(e,t)=>{const n=Zmt[e.type];return n?n(e,t):En(`Unsupported expression construct: ${e.type}`)},ij=(e,t)=>"("+Xr(e.left,t)+" "+e.operator+" "+Xr(e.right,t)+")",sj=(e,t)=>"("+xd(e.params,t)+")=>"+Xr(e.body,t),Fle=(e,t)=>Xr(e.callee,t)+"("+xd(e.arguments,t)+")",xd=(e,t,n=",")=>e.map(r=>Xr(r,t)).join(n),$Te=e=>e.computed?`[${yh(e.name)}]`:`.${e.name}`,jle=(e,t,n)=>{const r=e.table||"";return`data${r}${$Te(e)}.${n}(${t.index}${r})`},Zmt={Constant:e=>e.raw,Column:(e,t)=>jle(e,t,"get"),Dictionary:(e,t)=>jle(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${$Te(e)}`,Op:(e,t)=>`op(${yh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Xr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Xr(e.object,t),i=Xr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Fle,NewExpression:(e,t)=>"new "+Fle(e,t),ArrayExpression:(e,t)=>"["+xd(e.elements,t)+"]",AssignmentExpression:ij,BinaryExpression:ij,LogicalExpression:ij,UnaryExpression:(e,t)=>"("+e.operator+Xr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Xr(e.test,t)+"?"+Xr(e.consequent,t)+":"+Xr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+xd(e.properties,t)+"})",Property:(e,t)=>{const n=Xr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Xr(e.value,t)},ArrowFunctionExpression:sj,FunctionExpression:sj,FunctionDeclaration:sj,ArrayPattern:(e,t)=>"["+xd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+xd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+xd(e.declarations,t,","),VariableDeclarator:(e,t)=>Xr(e.id,t)+"="+Xr(e.init,t),SpreadElement:(e,t)=>"..."+Xr(e.argument,t),BlockStatement:(e,t)=>"{"+xd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Xr(e.expression,t),IfStatement:(e,t)=>"if ("+Xr(e.test,t)+")"+Xr(e.consequent,t)+(e.alternate?" else "+Xr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Xr(e.discriminant,t)+") {"+xd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Xr(e.test,t):"default")+": "+xd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Xr(e.argument,t),Program:(e,t)=>Xr(e.body[0],t)};function _3(e,t={index:"row"}){return Xr(e,t)}function egt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function xE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Em(e)?+e:dr(e)||ZI(e)?`[${e.map(xE)}]`:b3(e)?e+"":tgt(e)}function tgt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${xE(e[r])}`;return t+="}",t}function w3(e,t){const n=e.length;return n===1?(r,i)=>xE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=xE(a)}return s}}function ngt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=xE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=xE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Sp(){}function rgt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ws(e){return e.init=e.init||Sp,e.add=e.add||Sp,e.rem=e.rem||Sp,e}function Ble(e,t){return e.product_v=!1,e.product=t}const MTe={count:{create:()=>ws({value:e=>e.count}),param:[]},array_agg:{create:()=>ws({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ws({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ws({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ws({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ws({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>ws({value:e=>e.valid}),param:[1]},invalid:{create:()=>ws({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=ngt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ws({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ws({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>v2(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Ble(e,1),value:e=>e.valid?e.product_v?Ble(e,rgt(e.list.values())):e.product:void 0,add:(e,t)=>v2(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ws({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ws({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>ws({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>ws({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ws({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ws({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ws({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>ws({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ws({value:i=>egt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Ule={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},zle={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},LTe={row_number:{create(){return{init:Sp,value:e=>e.index+1}},param:[]},rank:Ule,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Ule.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:zle,ntile:{create(e){e=+e,e>0||En("ntile num must be greater than zero.");const{init:t,value:n}=zle.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:Sp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:Sp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Sp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Sp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||En("nth_value nth must be greater than zero."),{init:Sp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Ef(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=igt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function igt(e,t,n){for(const r=e.size;n<r;++n)if(Ef(e.value(n,t)))return n;return-1}function iK(e){return jf(MTe,e)}function sK(e){return jf(LTe,e)}function FTe(e){return jf(Z_,e)||e==="row_object"}function jTe(e){return iK(e)&&MTe[e]}function BTe(e){return sK(e)&&LTe[e]}function lT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const oK={escape:(e,t,n)=>lT(e,t,n),expr:(e,t)=>lT(`(row,data,op)=>${e}`,Z_,t),expr2:(e,t)=>lT(`(row0,data0,row,data)=>${e}`,Z_,t),join:(e,t)=>lT(`(row1,data1,row2,data2)=>${e}`,Z_,t),param:(e,t)=>lT(e,Z_,t)},sgt={"==":1,"!=":1,"===":1,"!==":1};function UTe(e,t,n=0,r,i){if(e.type=ek,e.name=t,e.table=n,i&&r&&hi(r.keyFor)){const s=sgt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===qx&&ogt(i,e,s,r.keyFor(s.value))}return e}function ogt(e,t,n,r){return r<0?(e.type=qx,e.value=!1,e.raw="false"):(t.type=Xmt,n.value=r,n.raw=r+""),!0}function u6(e){return dr(e)?e:rK(e)?e.entries():e?Object.entries(e):[]}const zTe="row_object";function VTe(e,t){e.type=Ymt;const n=e.properties=[];for(const r of u6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:DTe,key:{type:qx,raw:yh(s)},value:UTe({computed:!0},i)})}return e}function HTe(e){return _3(VTe({},e))}function qTe(e){return oK.expr(HTe(e))}const agt=new TextDecoder("utf-8"),B7=e=>agt.decode(e),ugt=new TextEncoder,aK=e=>ugt.encode(e),lgt=e=>typeof e=="boolean",mu=e=>typeof e=="function",Ry=e=>e!=null&&Object(e)===e,l6=e=>Ry(e)&&mu(e.then),uK=e=>Ry(e)&&mu(e[Symbol.iterator]),c6=e=>Ry(e)&&mu(e[Symbol.asyncIterator]),cgt=e=>Ry(e)&&"done"in e&&"value"in e,WTe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,fgt=e=>Ry(e)&&mu(e.abort)&&mu(e.getWriter)&&!WTe(e),dgt=e=>Ry(e)&&mu(e.end)&&mu(e.write)&&lgt(e.writable)&&!WTe(e),hgt=e=>Ry(e)&&mu(e.clear)&&mu(e.bytes)&&mu(e.position)&&mu(e.setPosition)&&mu(e.capacity)&&mu(e.getBufferIdentifier)&&mu(e.createLong),lK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function pgt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function E3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function vh(e,t){const n=pgt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?E3(o,s,a):o=s;break}E3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ws(e,t){let n=cgt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=aK(n)),n instanceof ArrayBuffer?new e(n):n instanceof lK?new e(n):hgt(n)?Ws(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const cT=e=>Ws(Int32Array,e),Nr=e=>Ws(Uint8Array,e),U7=e=>(e.next(),e);function*mgt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof lK?n(t):uK(t)?t:n(t);return yield*U7(function*(i){let s=null;do s=i.next(yield Ws(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const ggt=e=>mgt(Uint8Array,e);function GTe(e,t){return V1(this,arguments,function*(){if(l6(t))return yield Yn(yield Yn(yield*B5(BA(GTe(e,yield Yn(t))))));const r=function(o){return V1(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return V1(this,arguments,function*(){yield Yn(yield*B5(BA(U7(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof lK?r(t):uK(t)?i(t):c6(t)?t:r(t);return yield Yn(yield*B5(BA(U7(function(o){return V1(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Ws(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const ygt=e=>GTe(Uint8Array,e);function YTe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function vgt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Vle={fromIterable(e){return _N(bgt(e))},fromAsyncIterable(e){return _N(_gt(e))},fromDOMStream(e){return _N(wgt(e))},fromNodeStream(e){return _N(xgt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},_N=e=>(e.next(),e);function*bgt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?vh(r,o)[0]:([i,r,a]=vh(r,o),i)}({cmd:s,size:o}=yield null);const l=ggt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function _gt(e){return V1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?vh(i,a)[0]:([s,i,u]=vh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=ygt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function wgt(e){return V1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?vh(i,a)[0]:([s,i,u]=vh(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new Egt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Nr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class Egt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Cp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Cp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Nr(n)),n})}}const oj=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function xgt(e){return V1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?vh(l,a)[0]:([c,l,u]=vh(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=oj(e,"end"),n[1]=oj(e,"error");do{if(n[2]=oj(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Nr(e.read(a-u)),c.byteLength<a-u&&(c=Nr(e.read()))):c=Nr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ba;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ba||(Ba={}));var qu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(qu||(qu={}));var Io;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Io||(Io={}));var bh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(bh||(bh={}));var qt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(qt||(qt={}));var _h;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(_h||(_h={}));var Ks;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ks||(Ks={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var vp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(vp||(vp={}));const Sgt=void 0;function Fv(e){if(e===null)return"null";if(e===Sgt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Fv(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Tgt=Symbol.for("isArrowBigNum");function ed(e,...t){return t.length===0?Object.setPrototypeOf(Ws(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}ed.prototype[Tgt]=!0;ed.prototype.toJSON=function(){return`"${_2(this)}"`};ed.prototype.valueOf=function(){return KTe(this)};ed.prototype.toString=function(){return _2(this)};ed.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return KTe(this);case"string":return _2(this);case"default":return Agt(this)}return _2(this)};function Tw(...e){return ed.apply(this,e)}function Aw(...e){return ed.apply(this,e)}function b2(...e){return ed.apply(this,e)}Object.setPrototypeOf(Tw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Aw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(b2.prototype,Object.create(Uint32Array.prototype));Object.assign(Tw.prototype,ed.prototype,{constructor:Tw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Aw.prototype,ed.prototype,{constructor:Aw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(b2.prototype,ed.prototype,{constructor:b2,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function KTe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const _2=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return aj(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return aj(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${aj(t)}`},Agt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:_2(e);function aj(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class cK{static new(t,n){switch(n){case!0:return new Tw(t);case!1:return new Aw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Tw(t)}return t.byteLength===16?new b2(t):new Aw(t)}static signed(t){return new Tw(t)}static unsigned(t){return new Aw(t)}static decimal(t){return new b2(t)}constructor(t,n){return cK.new(t,n)}}function Bf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var XTe,QTe,JTe,ZTe,eAe,tAe,nAe,rAe,iAe,sAe,oAe,aAe,uAe,lAe,cAe,fAe,dAe,hAe,pAe,mAe;let xn=class z7{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return z7.isUnion(t)&&t.mode===qu.Dense}static isSparseUnion(t){return z7.isUnion(t)&&t.mode===qu.Sparse}get typeId(){return re.NONE}};XTe=Symbol.toStringTag;xn[XTe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(xn.prototype);let xm=class extends xn{toString(){return"Null"}get typeId(){return re.Null}};QTe=Symbol.toStringTag;xm[QTe]=(e=>e[Symbol.toStringTag]="Null")(xm.prototype);class Ja extends xn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}JTe=Symbol.toStringTag;Ja[JTe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ja.prototype);class fK extends Ja{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class dK extends Ja{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class j0 extends Ja{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class hK extends Ja{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class pK extends Ja{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class mK extends Ja{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class gK extends Ja{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class yK extends Ja{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(fK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(dK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(j0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(hK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(pK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(mK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(gK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(yK.prototype,"ArrayType",{value:BigUint64Array});class B0 extends xn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Io.HALF:return Uint16Array;case Io.SINGLE:return Float32Array;case Io.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}ZTe=Symbol.toStringTag;B0[ZTe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(B0.prototype);class gAe extends B0{constructor(){super(Io.HALF)}}class vK extends B0{constructor(){super(Io.SINGLE)}}class bK extends B0{constructor(){super(Io.DOUBLE)}}Object.defineProperty(gAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(vK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(bK.prototype,"ArrayType",{value:Float64Array});let w2=class extends xn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};eAe=Symbol.toStringTag;w2[eAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(w2.prototype);let SE=class extends xn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};tAe=Symbol.toStringTag;SE[tAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(SE.prototype);let E2=class extends xn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};nAe=Symbol.toStringTag;E2[nAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(E2.prototype);let x3=class extends xn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};rAe=Symbol.toStringTag;x3[rAe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(x3.prototype);class TE extends xn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${bh[this.unit]}>`}}iAe=Symbol.toStringTag;TE[iAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(TE.prototype);class Cgt extends TE{constructor(){super(bh.DAY)}}class Igt extends TE{constructor(){super(bh.MILLISECOND)}}class Sm extends xn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${qt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}sAe=Symbol.toStringTag;Sm[sAe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Sm.prototype);class kgt extends Sm{constructor(){super(qt.SECOND,32)}}class Rgt extends Sm{constructor(){super(qt.MILLISECOND,32)}}class Ngt extends Sm{constructor(){super(qt.MICROSECOND,64)}}class Pgt extends Sm{constructor(){super(qt.NANOSECOND,64)}}class S3 extends xn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${qt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}oAe=Symbol.toStringTag;S3[oAe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(S3.prototype);class AE extends xn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${_h[this.unit]}>`}}aAe=Symbol.toStringTag;AE[aAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(AE.prototype);class Dgt extends AE{constructor(){super(_h.DAY_TIME)}}class Ogt extends AE{constructor(){super(_h.YEAR_MONTH)}}let T3=class extends xn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${qt[this.unit]}>`}};uAe=Symbol.toStringTag;T3[uAe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(T3.prototype);let CE=class extends xn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};lAe=Symbol.toStringTag;CE[lAe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(CE.prototype);class oa extends xn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}cAe=Symbol.toStringTag;oa[cAe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(oa.prototype);class x2 extends xn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}fAe=Symbol.toStringTag;x2[fAe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(x2.prototype);let A3=class extends xn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};dAe=Symbol.toStringTag;A3[dAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(A3.prototype);let IE=class extends xn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};hAe=Symbol.toStringTag;IE[hAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(IE.prototype);class S2 extends xn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}pAe=Symbol.toStringTag;S2[pAe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(S2.prototype);const $gt=(e=>()=>++e)(-1);class U0 extends xn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?$gt():Bf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}mAe=Symbol.toStringTag;U0[mAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(U0.prototype);function Ad(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Sn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Mgt(this,t,n)}getVisitFnByTypeId(t,n=!0){return I_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Mgt(e,t,n=!0){return typeof t=="number"?I_(e,t,n):typeof t=="string"&&t in re?I_(e,re[t],n):t&&t instanceof xn?I_(e,Hle(t),n):t!=null&&t.type&&t.type instanceof xn?I_(e,Hle(t.type),n):I_(e,re.NONE,n)}function I_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Hle(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Io.HALF:return re.Float16;case Io.SINGLE:return re.Float32;case Io.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case qt.SECOND:return re.TimeSecond;case qt.MILLISECOND:return re.TimeMillisecond;case qt.MICROSECOND:return re.TimeMicrosecond;case qt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case qt.SECOND:return re.TimestampSecond;case qt.MILLISECOND:return re.TimestampMillisecond;case qt.MICROSECOND:return re.TimestampMicrosecond;case qt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case bh.DAY:return re.DateDay;case bh.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case _h.DAY_TIME:return re.IntervalDayTime;case _h.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case qt.SECOND:return re.DurationSecond;case qt.MILLISECOND:return re.DurationMillisecond;case qt.MICROSECOND:return re.DurationMicrosecond;case qt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case qu.Dense:return re.DenseUnion;case qu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Sn.prototype.visitInt8=null;Sn.prototype.visitInt16=null;Sn.prototype.visitInt32=null;Sn.prototype.visitInt64=null;Sn.prototype.visitUint8=null;Sn.prototype.visitUint16=null;Sn.prototype.visitUint32=null;Sn.prototype.visitUint64=null;Sn.prototype.visitFloat16=null;Sn.prototype.visitFloat32=null;Sn.prototype.visitFloat64=null;Sn.prototype.visitDateDay=null;Sn.prototype.visitDateMillisecond=null;Sn.prototype.visitTimestampSecond=null;Sn.prototype.visitTimestampMillisecond=null;Sn.prototype.visitTimestampMicrosecond=null;Sn.prototype.visitTimestampNanosecond=null;Sn.prototype.visitTimeSecond=null;Sn.prototype.visitTimeMillisecond=null;Sn.prototype.visitTimeMicrosecond=null;Sn.prototype.visitTimeNanosecond=null;Sn.prototype.visitDenseUnion=null;Sn.prototype.visitSparseUnion=null;Sn.prototype.visitIntervalDayTime=null;Sn.prototype.visitIntervalYearMonth=null;Sn.prototype.visitDuration=null;Sn.prototype.visitDurationSecond=null;Sn.prototype.visitDurationMillisecond=null;Sn.prototype.visitDurationMicrosecond=null;Sn.prototype.visitDurationNanosecond=null;const yAe=new Float64Array(1),f_=new Uint32Array(yAe.buffer);function vAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function bAe(e){if(e!==e)return 32256;yAe[0]=e;const t=(f_[1]&2147483648)>>16&65535;let n=f_[1]&2146435072,r=0;return n>=1089470464?f_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(f_[1]&1048575)>>10):n<=1056964608?(r=1048576+(f_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(f_[1]&1048575)+512>>10),t|n|r&65535}class Xt extends Sn{}function nn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const Lgt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},_K=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Fgt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},jgt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},_Ae=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},Bgt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Ym=({values:e},t,n)=>{e[t]=n},wK=({values:e},t,n)=>{e[t]=n},wAe=({values:e},t,n)=>{e[t]=bAe(n)},Ugt=(e,t,n)=>{switch(e.type.precision){case Io.HALF:return wAe(e,t,n);case Io.SINGLE:case Io.DOUBLE:return wK(e,t,n)}},EK=({values:e},t,n)=>{Lgt(e,t,n.valueOf())},xK=({values:e},t,n)=>{_K(e,t*2,n.valueOf())},EAe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},zgt=({values:e,valueOffsets:t},n,r)=>_Ae(e,t,n,r),Vgt=({values:e,valueOffsets:t},n,r)=>{_Ae(e,t,n,aK(r))},xAe=(e,t,n)=>{e.type.unit===bh.DAY?EK(e,t,n):xK(e,t,n)},SK=({values:e},t,n)=>_K(e,t*2,n/1e3),TK=({values:e},t,n)=>_K(e,t*2,n),AK=({values:e},t,n)=>Fgt(e,t*2,n),CK=({values:e},t,n)=>jgt(e,t*2,n),SAe=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return SK(e,t,n);case qt.MILLISECOND:return TK(e,t,n);case qt.MICROSECOND:return AK(e,t,n);case qt.NANOSECOND:return CK(e,t,n)}},IK=({values:e},t,n)=>{e[t]=n},kK=({values:e},t,n)=>{e[t]=n},RK=({values:e},t,n)=>{e[t]=n},NK=({values:e},t,n)=>{e[t]=n},TAe=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return IK(e,t,n);case qt.MILLISECOND:return kK(e,t,n);case qt.MICROSECOND:return RK(e,t,n);case qt.NANOSECOND:return NK(e,t,n)}},AAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Hgt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Tc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},qgt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Tc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Wgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Ggt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),Ygt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Kgt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Xgt=(e,t,n)=>{const r=e.type.children.map(s=>Tc.getVisitFn(s.type)),i=n instanceof Map?Ygt(t,n):n instanceof hr?Ggt(t,n):Array.isArray(n)?Wgt(t,n):Kgt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Qgt=(e,t,n)=>{e.type.mode===qu.Dense?CAe(e,t,n):IAe(e,t,n)},CAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Tc.visit(i,e.valueOffsets[t],n)},IAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Tc.visit(i,t,n)},Jgt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},kAe=(e,t,n)=>{e.type.unit===_h.DAY_TIME?PK(e,t,n):DK(e,t,n)},PK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},DK=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},OK=({values:e},t,n)=>{e[t]=n},$K=({values:e},t,n)=>{e[t]=n},MK=({values:e},t,n)=>{e[t]=n},LK=({values:e},t,n)=>{e[t]=n},RAe=(e,t,n)=>{switch(e.type.unit){case qt.SECOND:return OK(e,t,n);case qt.MILLISECOND:return $K(e,t,n);case qt.MICROSECOND:return MK(e,t,n);case qt.NANOSECOND:return LK(e,t,n)}},Zgt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Tc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Xt.prototype.visitBool=nn(Bgt);Xt.prototype.visitInt=nn(Ym);Xt.prototype.visitInt8=nn(Ym);Xt.prototype.visitInt16=nn(Ym);Xt.prototype.visitInt32=nn(Ym);Xt.prototype.visitInt64=nn(Ym);Xt.prototype.visitUint8=nn(Ym);Xt.prototype.visitUint16=nn(Ym);Xt.prototype.visitUint32=nn(Ym);Xt.prototype.visitUint64=nn(Ym);Xt.prototype.visitFloat=nn(Ugt);Xt.prototype.visitFloat16=nn(wAe);Xt.prototype.visitFloat32=nn(wK);Xt.prototype.visitFloat64=nn(wK);Xt.prototype.visitUtf8=nn(Vgt);Xt.prototype.visitBinary=nn(zgt);Xt.prototype.visitFixedSizeBinary=nn(EAe);Xt.prototype.visitDate=nn(xAe);Xt.prototype.visitDateDay=nn(EK);Xt.prototype.visitDateMillisecond=nn(xK);Xt.prototype.visitTimestamp=nn(SAe);Xt.prototype.visitTimestampSecond=nn(SK);Xt.prototype.visitTimestampMillisecond=nn(TK);Xt.prototype.visitTimestampMicrosecond=nn(AK);Xt.prototype.visitTimestampNanosecond=nn(CK);Xt.prototype.visitTime=nn(TAe);Xt.prototype.visitTimeSecond=nn(IK);Xt.prototype.visitTimeMillisecond=nn(kK);Xt.prototype.visitTimeMicrosecond=nn(RK);Xt.prototype.visitTimeNanosecond=nn(NK);Xt.prototype.visitDecimal=nn(AAe);Xt.prototype.visitList=nn(Hgt);Xt.prototype.visitStruct=nn(Xgt);Xt.prototype.visitUnion=nn(Qgt);Xt.prototype.visitDenseUnion=nn(CAe);Xt.prototype.visitSparseUnion=nn(IAe);Xt.prototype.visitDictionary=nn(Jgt);Xt.prototype.visitInterval=nn(kAe);Xt.prototype.visitIntervalDayTime=nn(PK);Xt.prototype.visitIntervalYearMonth=nn(DK);Xt.prototype.visitDuration=nn(RAe);Xt.prototype.visitDurationSecond=nn(OK);Xt.prototype.visitDurationMillisecond=nn($K);Xt.prototype.visitDurationMicrosecond=nn(MK);Xt.prototype.visitDurationNanosecond=nn(LK);Xt.prototype.visitFixedSizeList=nn(Zgt);Xt.prototype.visitMap=nn(qgt);const Tc=new Xt,af=Symbol.for("parent"),Cw=Symbol.for("rowIndex");class FK{constructor(t,n){return this[af]=t,this[Cw]=n,new Proxy(this,new t0t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Cw],n=this[af],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Wu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Fv(t)}: ${Fv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new e0t(this[af],this[Cw])}}class e0t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Wu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(FK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[af]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Cw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class t0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[af].type.children.map(n=>n.name)}has(t,n){return t[af].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[af].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[af].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Wu.visit(t[af].children[r],t[Cw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[af].type.children.findIndex(s=>s.name===n);return i!==-1?(Tc.visit(t[af].children[i],t[Cw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Wt extends Sn{}function Qt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const n0t=(e,t)=>864e5*e[t],jK=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),r0t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,i0t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,NAe=e=>new Date(e),s0t=(e,t)=>NAe(n0t(e,t)),o0t=(e,t)=>NAe(jK(e,t)),a0t=(e,t)=>null,PAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},u0t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},DAe=({values:e},t)=>s0t(e,t),OAe=({values:e},t)=>o0t(e,t*2),Ny=({stride:e,values:t},n)=>t[e*n],l0t=({stride:e,values:t},n)=>vAe(t[e*n]),$Ae=({values:e},t)=>e[t],c0t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),f0t=({values:e,valueOffsets:t},n)=>PAe(e,t,n),d0t=({values:e,valueOffsets:t},n)=>{const r=PAe(e,t,n);return r!==null?B7(r):null},h0t=({values:e},t)=>e[t],p0t=({type:e,values:t},n)=>e.precision!==Io.HALF?t[n]:vAe(t[n]),m0t=(e,t)=>e.type.unit===bh.DAY?DAe(e,t):OAe(e,t),MAe=({values:e},t)=>1e3*jK(e,t*2),LAe=({values:e},t)=>jK(e,t*2),FAe=({values:e},t)=>r0t(e,t*2),jAe=({values:e},t)=>i0t(e,t*2),g0t=(e,t)=>{switch(e.type.unit){case qt.SECOND:return MAe(e,t);case qt.MILLISECOND:return LAe(e,t);case qt.MICROSECOND:return FAe(e,t);case qt.NANOSECOND:return jAe(e,t)}},BAe=({values:e},t)=>e[t],UAe=({values:e},t)=>e[t],zAe=({values:e},t)=>e[t],VAe=({values:e},t)=>e[t],y0t=(e,t)=>{switch(e.type.unit){case qt.SECOND:return BAe(e,t);case qt.MILLISECOND:return UAe(e,t);case qt.MICROSECOND:return zAe(e,t);case qt.NANOSECOND:return VAe(e,t)}},v0t=({values:e,stride:t},n)=>cK.decimal(e.subarray(t*n,t*(n+1))),b0t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},_0t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new f6(o.slice(i,s-i))},w0t=(e,t)=>new FK(e,t),E0t=(e,t)=>e.type.mode===qu.Dense?HAe(e,t):qAe(e,t),HAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Wu.visit(r,e.valueOffsets[t])},qAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Wu.visit(r,t)},x0t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},S0t=(e,t)=>e.type.unit===_h.DAY_TIME?WAe(e,t):GAe(e,t),WAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),GAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},YAe=({values:e},t)=>e[t],KAe=({values:e},t)=>e[t],XAe=({values:e},t)=>e[t],QAe=({values:e},t)=>e[t],T0t=(e,t)=>{switch(e.type.unit){case qt.SECOND:return YAe(e,t);case qt.MILLISECOND:return KAe(e,t);case qt.MICROSECOND:return XAe(e,t);case qt.NANOSECOND:return QAe(e,t)}},A0t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};Wt.prototype.visitNull=Qt(a0t);Wt.prototype.visitBool=Qt(u0t);Wt.prototype.visitInt=Qt(h0t);Wt.prototype.visitInt8=Qt(Ny);Wt.prototype.visitInt16=Qt(Ny);Wt.prototype.visitInt32=Qt(Ny);Wt.prototype.visitInt64=Qt($Ae);Wt.prototype.visitUint8=Qt(Ny);Wt.prototype.visitUint16=Qt(Ny);Wt.prototype.visitUint32=Qt(Ny);Wt.prototype.visitUint64=Qt($Ae);Wt.prototype.visitFloat=Qt(p0t);Wt.prototype.visitFloat16=Qt(l0t);Wt.prototype.visitFloat32=Qt(Ny);Wt.prototype.visitFloat64=Qt(Ny);Wt.prototype.visitUtf8=Qt(d0t);Wt.prototype.visitBinary=Qt(f0t);Wt.prototype.visitFixedSizeBinary=Qt(c0t);Wt.prototype.visitDate=Qt(m0t);Wt.prototype.visitDateDay=Qt(DAe);Wt.prototype.visitDateMillisecond=Qt(OAe);Wt.prototype.visitTimestamp=Qt(g0t);Wt.prototype.visitTimestampSecond=Qt(MAe);Wt.prototype.visitTimestampMillisecond=Qt(LAe);Wt.prototype.visitTimestampMicrosecond=Qt(FAe);Wt.prototype.visitTimestampNanosecond=Qt(jAe);Wt.prototype.visitTime=Qt(y0t);Wt.prototype.visitTimeSecond=Qt(BAe);Wt.prototype.visitTimeMillisecond=Qt(UAe);Wt.prototype.visitTimeMicrosecond=Qt(zAe);Wt.prototype.visitTimeNanosecond=Qt(VAe);Wt.prototype.visitDecimal=Qt(v0t);Wt.prototype.visitList=Qt(b0t);Wt.prototype.visitStruct=Qt(w0t);Wt.prototype.visitUnion=Qt(E0t);Wt.prototype.visitDenseUnion=Qt(HAe);Wt.prototype.visitSparseUnion=Qt(qAe);Wt.prototype.visitDictionary=Qt(x0t);Wt.prototype.visitInterval=Qt(S0t);Wt.prototype.visitIntervalDayTime=Qt(WAe);Wt.prototype.visitIntervalYearMonth=Qt(GAe);Wt.prototype.visitDuration=Qt(T0t);Wt.prototype.visitDurationSecond=Qt(YAe);Wt.prototype.visitDurationMillisecond=Qt(KAe);Wt.prototype.visitDurationMicrosecond=Qt(XAe);Wt.prototype.visitDurationNanosecond=Qt(QAe);Wt.prototype.visitFixedSizeList=Qt(A0t);Wt.prototype.visitMap=Qt(_0t);const Wu=new Wt,gf=Symbol.for("keys"),Iw=Symbol.for("vals");class f6{constructor(t){return this[gf]=new hr([t.children[0]]).memoize(),this[Iw]=t.children[1],new Proxy(this,new I0t)}[Symbol.iterator](){return new C0t(this[gf],this[Iw])}get size(){return this[gf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[gf],n=this[Iw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Wu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Fv(t)}: ${Fv(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class C0t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Wu.visit(this.vals,t)]})}}class I0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[gf].toArray().map(String)}has(t,n){return t[gf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[gf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[gf].indexOf(n);if(r!==-1){const i=Wu.visit(Reflect.get(t,Iw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[gf].indexOf(n);return i!==-1?(Tc.visit(Reflect.get(t,Iw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(f6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[gf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Iw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let qle;function JAe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(qle=s,s=o,o=qle),o>i&&(o=i),r?r(e,s,o):[s,o]}const Wle=e=>e!==e;function Wx(e){if(typeof e!=="object"||e===null)return Wle(e)?Wle:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?vgt(e,n):!1:e instanceof Map?R0t(e):Array.isArray(e)?k0t(e):e instanceof hr?N0t(e):P0t(e,!0)}function k0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Wx(e[n]);return d6(t)}function R0t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Wx(r);return d6(n)}function N0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Wx(e.get(n));return d6(t)}function P0t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Wx(e[n[i]]);return d6(r,n)}function d6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return D0t(e,n);case Map:return Gle(e,n,n.keys());case f6:case FK:case Object:case void 0:return Gle(e,n,t||Object.keys(n))}return n instanceof hr?O0t(e,n):!1}}function D0t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function O0t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Gle(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function ZAe(e,t,n,r){return(n&1<<r)!==0}function $0t(e,t,n,r){return(n&1<<r)>>r}function C3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):eCe(new BK(n,e,t,null,ZAe)).subarray(0,r)),i}return n}function eCe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class BK{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function V7(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new BK(e,t,n-t,e,$0t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return V7(e,t,i)+V7(e,r,n)+M0t(e,i>>3,r-i>>3)}function M0t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=uj(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=uj(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=uj(s.getUint8(i)),i+=1;return r}function uj(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const L0t=-1;class Rr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return xn.isSparseUnion(t)?this.children.some(n=>n.nullable):xn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(xn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=L0t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-V7(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Rr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Ad(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(xn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===qu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(xn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===qu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(C3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Rr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(C3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[vp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[vp.TYPE])&&(o[vp.TYPE]=s.subarray(t,t+n)),(s=o[vp.OFFSET])&&(o[vp.OFFSET]=s.subarray(t,t+n+1))||(s=o[vp.DATA])&&(o[vp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Rr.prototype.children=Object.freeze([]);class nC extends Sn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Rr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=cT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.data),s=Nr(t.nullBitmap),o=cT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Nr(t.nullBitmap),o=cT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Nr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ws(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(xn.isSparseUnion(n))return new Rr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=cT(t.valueOffsets);return new Rr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new nC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Nr(t.nullBitmap),s=Ws(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new nC().visit({type:n.valueType})}=t,s=Nr(t.nullBitmap),{["length"]:o=i.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Rr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new nC().visit({type:n.childType})}=t,s=Nr(t.nullBitmap),o=cT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Rr(n,r,a,u,[o,void 0,s],[i])}}const F0t=new nC;function na(e){return F0t.visit(e)}class Yle{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function tCe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function nCe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function rCe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function UK(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function zK(e,t){return e.getValid(t)}function kw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return UK(r,this._offsets,n,t)}}function iCe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=UK(s,this._offsets,r,n);return t=void 0,o}}function sCe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):UK(s,this._offsets,i,n);return t=void 0,o}}class Gt extends Sn{}function j0t(e,t){return t===null&&e.length>0?0:-1}function B0t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new BK(n,e.offset+(t||0),e.length,n,ZAe)){if(!i)return r;++r}return-1}function ln(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return B0t(e,n)}const r=Wu.getVisitFn(e),i=Wx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function oCe(e,t,n){const r=Wu.getVisitFn(e),i=Wx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Gt.prototype.visitNull=j0t;Gt.prototype.visitBool=ln;Gt.prototype.visitInt=ln;Gt.prototype.visitInt8=ln;Gt.prototype.visitInt16=ln;Gt.prototype.visitInt32=ln;Gt.prototype.visitInt64=ln;Gt.prototype.visitUint8=ln;Gt.prototype.visitUint16=ln;Gt.prototype.visitUint32=ln;Gt.prototype.visitUint64=ln;Gt.prototype.visitFloat=ln;Gt.prototype.visitFloat16=ln;Gt.prototype.visitFloat32=ln;Gt.prototype.visitFloat64=ln;Gt.prototype.visitUtf8=ln;Gt.prototype.visitBinary=ln;Gt.prototype.visitFixedSizeBinary=ln;Gt.prototype.visitDate=ln;Gt.prototype.visitDateDay=ln;Gt.prototype.visitDateMillisecond=ln;Gt.prototype.visitTimestamp=ln;Gt.prototype.visitTimestampSecond=ln;Gt.prototype.visitTimestampMillisecond=ln;Gt.prototype.visitTimestampMicrosecond=ln;Gt.prototype.visitTimestampNanosecond=ln;Gt.prototype.visitTime=ln;Gt.prototype.visitTimeSecond=ln;Gt.prototype.visitTimeMillisecond=ln;Gt.prototype.visitTimeMicrosecond=ln;Gt.prototype.visitTimeNanosecond=ln;Gt.prototype.visitDecimal=ln;Gt.prototype.visitList=ln;Gt.prototype.visitStruct=ln;Gt.prototype.visitUnion=ln;Gt.prototype.visitDenseUnion=oCe;Gt.prototype.visitSparseUnion=oCe;Gt.prototype.visitDictionary=ln;Gt.prototype.visitInterval=ln;Gt.prototype.visitIntervalDayTime=ln;Gt.prototype.visitIntervalYearMonth=ln;Gt.prototype.visitDuration=ln;Gt.prototype.visitDurationSecond=ln;Gt.prototype.visitDurationMillisecond=ln;Gt.prototype.visitDurationMicrosecond=ln;Gt.prototype.visitDurationNanosecond=ln;Gt.prototype.visitFixedSizeList=ln;Gt.prototype.visitMap=ln;const I3=new Gt;class Yt extends Sn{}function Jt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Ja&&t.bitWidth!==64||t instanceof Sm&&t.bitWidth!==64||t instanceof B0&&t.precision!==Io.HALF))return new Yle(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Yle(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new U0t(o)})}class U0t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Yt.prototype.visitNull=Jt;Yt.prototype.visitBool=Jt;Yt.prototype.visitInt=Jt;Yt.prototype.visitInt8=Jt;Yt.prototype.visitInt16=Jt;Yt.prototype.visitInt32=Jt;Yt.prototype.visitInt64=Jt;Yt.prototype.visitUint8=Jt;Yt.prototype.visitUint16=Jt;Yt.prototype.visitUint32=Jt;Yt.prototype.visitUint64=Jt;Yt.prototype.visitFloat=Jt;Yt.prototype.visitFloat16=Jt;Yt.prototype.visitFloat32=Jt;Yt.prototype.visitFloat64=Jt;Yt.prototype.visitUtf8=Jt;Yt.prototype.visitBinary=Jt;Yt.prototype.visitFixedSizeBinary=Jt;Yt.prototype.visitDate=Jt;Yt.prototype.visitDateDay=Jt;Yt.prototype.visitDateMillisecond=Jt;Yt.prototype.visitTimestamp=Jt;Yt.prototype.visitTimestampSecond=Jt;Yt.prototype.visitTimestampMillisecond=Jt;Yt.prototype.visitTimestampMicrosecond=Jt;Yt.prototype.visitTimestampNanosecond=Jt;Yt.prototype.visitTime=Jt;Yt.prototype.visitTimeSecond=Jt;Yt.prototype.visitTimeMillisecond=Jt;Yt.prototype.visitTimeMicrosecond=Jt;Yt.prototype.visitTimeNanosecond=Jt;Yt.prototype.visitDecimal=Jt;Yt.prototype.visitList=Jt;Yt.prototype.visitStruct=Jt;Yt.prototype.visitUnion=Jt;Yt.prototype.visitDenseUnion=Jt;Yt.prototype.visitSparseUnion=Jt;Yt.prototype.visitDictionary=Jt;Yt.prototype.visitInterval=Jt;Yt.prototype.visitIntervalDayTime=Jt;Yt.prototype.visitIntervalYearMonth=Jt;Yt.prototype.visitDuration=Jt;Yt.prototype.visitDurationSecond=Jt;Yt.prototype.visitDurationMillisecond=Jt;Yt.prototype.visitDurationMicrosecond=Jt;Yt.prototype.visitDurationNanosecond=Jt;Yt.prototype.visitFixedSizeList=Jt;Yt.prototype.visitMap=Jt;const VK=new Yt,z0t=(e,t)=>e+t;class Py extends Sn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===qt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+wh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+wh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const V0t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),H0t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),q0t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=wh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},W0t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=wh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},G0t=(e,t)=>e.type.mode===qu.Dense?aCe(e,t):uCe(e,t),aCe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+wh.visit(t[s],r[i])},uCe=({children:e},t)=>4+wh.visitMany(e,e.map(()=>t)).reduce(z0t,0);Py.prototype.visitUtf8=V0t;Py.prototype.visitBinary=H0t;Py.prototype.visitList=q0t;Py.prototype.visitFixedSizeList=W0t;Py.prototype.visitUnion=G0t;Py.prototype.visitDenseUnion=aCe;Py.prototype.visitSparseUnion=uCe;const wh=new Py;var lCe;const cCe={},fCe={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Rr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=cCe[o.typeId],f=s[0];this.isValid=d=>zK(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,fCe[o.typeId]),this._offsets=nCe(s);break}this.data=s,this.type=o,this.stride=Ad(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return tCe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return VK.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(JAe(this,t,n,({data:r,_offsets:i},s,o)=>rCe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return xn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(xn.isDictionary(this.type)){const t=new k3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new k3(this)}unmemoize(){if(xn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}lCe=Symbol.toStringTag;hr[lCe]=(e=>{e.type=xn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Wu.getVisitFnByTypeId(n),i=Tc.getVisitFnByTypeId(n),s=I3.getVisitFnByTypeId(n),o=wh.getVisitFnByTypeId(n);cCe[n]={get:r,set:i,indexOf:s,byteLength:o},fCe[n]=Object.create(e,{isValid:{value:kw(zK)},get:{value:kw(Wu.getVisitFnByTypeId(n))},set:{value:iCe(Tc.getVisitFnByTypeId(n))},indexOf:{value:sCe(I3.getVisitFnByTypeId(n))},getByteLength:{value:kw(wh.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class k3 extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new k3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Y0t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${K0t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function K0t(e){return typeof e!="bigint"?Fv(e):`${Fv(e)}n`}const lj=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,X0t=(e,t=0)=>e.length>=t?e.subarray(0,t):E3(new e.constructor(t),e,0);class h6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?lj(r*1,this.BYTES_PER_ELEMENT):lj(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=lj(t*this.stride,this.BYTES_PER_ELEMENT);const n=X0t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=E3(new this.ArrayType(t),this.buffer)}}h6.prototype.offset=0;class tk extends h6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class dCe extends tk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class hCe extends tk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let el=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Ad(t),this._nulls=new dCe,n&&n.length>0&&(this._isValid=Y0t(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),na({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};el.prototype.length=1;el.prototype.stride=1;el.prototype.children=null;el.prototype.finished=!1;el.prototype.nullValues=null;el.prototype._isValid=()=>!0;class Km extends el{constructor(t){super(t),this._values=new tk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class p6 extends el{constructor(t){super(t),this._pendingLength=0,this._offsets=new hCe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof f6?n[gf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class H7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const cj=2,$d=4,Rp=4,Br=4,Ag=new Int32Array(2),Kle=new Float32Array(Ag.buffer),Xle=new Float64Array(Ag.buffer),wN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var q7;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(q7||(q7={}));let R3=class pCe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new pCe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ag[0]=this.readInt32(t),Kle[0]}readFloat64(t){return Ag[wN?0:1]=this.readInt32(t),Ag[wN?1:0]=this.readInt32(t+4),Xle[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Kle[0]=n,this.writeInt32(t,Ag[0])}writeFloat64(t,n){Xle[0]=n,this.writeInt32(t,Ag[wN?0:1]),this.writeInt32(t+4,Ag[wN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+$d+Rp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Rp;n++)t+=String.fromCharCode(this.readInt8(this.position_+$d+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=$d;const i=this.bytes_.subarray(t,t+r);return n===q7.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+$d}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Rp)throw new Error("FlatBuffers: file identifier must be length "+Rp);for(let n=0;n<Rp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+$d+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},mCe=class gCe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=R3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=gCe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=R3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep($d,0),this.writeInt32(this.offset()-t+$d)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*cj;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=cj;l<s;l+=cj)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Br:0;if(n){const s=n;if(this.prep(this.minalign,$d+Rp+i),s.length!=Rp)throw new TypeError("FlatBuffers: file identifier must be length "+Rp);for(let o=Rp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,$d+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep($d,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Br),(n||new Ss).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ss.startKeyValue(t),Ss.addKey(t,n),Ss.addValue(t,r),Ss.endKeyValue(t)}}var kE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(kE||(kE={}));var RE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(RE||(RE={}));var N3;(function(e){e[e.DenseArray=0]="DenseArray"})(N3||(N3={}));class hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Br),(n||new hl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return hl.startInt(t),hl.addBitWidth(t,n),hl.addIsSigned(t,r),hl.endInt(t)}}class Np{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Br),(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new hl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):N3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,N3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class X1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new X1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Br),(n||new X1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return X1.startBinary(t),X1.endBinary(t)}}class Q1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Q1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Br),(n||new Q1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Q1.startBool(t),Q1.endBool(t)}}var P3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(P3||(P3={}));let YP=class k_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Br),(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):P3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,P3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return k_.startDate(t),k_.addUnit(t,n),k_.endDate(t)}};class gu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Br),(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return gu.startDecimal(t),gu.addPrecision(t,n),gu.addScale(t,r),gu.addBitWidth(t,i),gu.endDecimal(t)}}var z0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(z0||(z0={}));class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Br),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,z0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Md.startDuration(t),Md.addUnit(t,n),Md.endDuration(t)}}class Ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Br),(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(t),Ld.addByteWidth(t,n),Ld.endFixedSizeBinary(t)}}class Fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Br),(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Fd.startFixedSizeList(t),Fd.addListSize(t,n),Fd.endFixedSizeList(t)}}var D3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(D3||(D3={}));class jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Br),(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):D3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,D3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return jd.startFloatingPoint(t),jd.addPrecision(t,n),jd.endFloatingPoint(t)}}var O3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(O3||(O3={}));class Bd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Br),(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):O3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,O3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Bd.startInterval(t),Bd.addUnit(t,n),Bd.endInterval(t)}}class J1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new J1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Br),(n||new J1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return J1.startList(t),J1.endList(t)}}let KP=class R_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new R_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Br),(n||new R_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return R_.startMap(t),R_.addKeysSorted(t,n),R_.endMap(t)}};class Z1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Z1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Br),(n||new Z1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Z1.startNull(t),Z1.endNull(t)}}class ev{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new ev).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Br),(n||new ev).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ev.startStruct_(t),ev.endStruct_(t)}}let rA=class y1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new y1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Br),(n||new y1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,z0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return y1.startTime(t),y1.addUnit(t,n),y1.addBitWidth(t,r),y1.endTime(t)}},iA=class v1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new v1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Br),(n||new v1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,z0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return v1.startTimestamp(t),v1.addUnit(t,n),v1.addTimezone(t,r),v1.endTimestamp(t)}};var $3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})($3||($3={}));let b1=class _1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new _1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Br),(n||new _1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,$3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return _1.startUnion(t),_1.addMode(t,n),_1.addTypeIds(t,r),_1.endUnion(t)}};class tv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Br),(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return tv.startUtf8(t),tv.endUtf8(t)}}var yi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(yi||(yi={}));let Zl=class XP{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new XP).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Br),(n||new XP).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):yi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Np).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new XP).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ss).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,yi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Sd=class gp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new gp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Br),(n||new gp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):RE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Zl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ss).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,RE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return gp.startSchema(t),gp.addEndianness(t,n),gp.addFields(t,r),gp.addCustomMetadata(t,i),gp.addFeatures(t,s),gp.endSchema(t)}};class ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Br),(n||new ul).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Sd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new H7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new H7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ss).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Sr{constructor(t=[],n,r,i=Ba.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=G7(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Sr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Sr(n,this.metadata)}assign(...t){const n=t[0]instanceof Sr?t[0]:Array.isArray(t[0])?new Sr(t[0]):new Sr(t),r=[...this.fields],i=EN(EN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:EN(EN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=G7(s,new Map);return new Sr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Sr.prototype.fields=null;Sr.prototype.metadata=null;Sr.prototype.dictionaries=null;let Mr=class W7{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new W7(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],W7.new(n,r,i,s)}};Mr.prototype.type=null;Mr.prototype.name=null;Mr.prototype.nullable=null;Mr.prototype.metadata=null;function EN(e,t){return new Map([...e||new Map,...t||new Map])}function G7(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(xn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&G7(s.children,t)}return t}var Q0t=mCe,J0t=R3;class Y7{static decode(t){t=new J0t(Nr(t));const n=ul.getRootAsFooter(t),r=Sr.decode(n.schema(),new Map,n.version());return new Z0t(r,n)}static encode(t){const n=new Q0t,r=Sr.encode(n,t.schema);ul.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())V0.encode(n,o);const i=n.endVector();ul.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())V0.encode(n,o);const s=n.endVector();return ul.startFooter(n),ul.addSchema(n,r),ul.addVersion(n,Ba.V5),ul.addRecordBatches(n,i),ul.addDictionaries(n,s),ul.finishFooterBuffer(n,ul.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ba.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Z0t extends Y7{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return V0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return V0.decode(n)}return null}}class V0{static decode(t){return new V0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return H7.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Bf(r),this.bodyLength=Bf(n)}}const xN=Object.freeze({done:!0,value:void 0});class yCe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class eyt extends yCe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Cp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(xN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Vle.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Vle.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Cp(this,void 0,void 0,function*(){return yield this.abort(t),xN})}return(t){return Cp(this,void 0,void 0,function*(){return yield this.close(),xN})}read(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(xN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class fj extends eyt{write(t){if((t=Nr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?B7(this.toUint8Array(!0)):this.toUint8Array(!1).then(B7)}toUint8Array(t=!1){return t?vh(this._values)[0]:Cp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=BA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return vh(o,a)[0]})}}class vCe extends p6{constructor(t){super(t),this._values=new h6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Nr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class tyt extends el{constructor(t){super(t),this._values=new dCe}setValue(t,n){this._values.set(t,+n)}}class m6 extends Km{}m6.prototype._setValue=xAe;class bCe extends m6{}bCe.prototype._setValue=EK;class _Ce extends m6{}_Ce.prototype._setValue=xK;class wCe extends Km{}wCe.prototype._setValue=AAe;class nyt extends el{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new U0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=M3({type:this.type.indices,nullValues:n}),this.dictionary=M3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class ECe extends Km{}ECe.prototype._setValue=EAe;class ryt extends el{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new IE(this.type.listSize,new Mr(n,t.type,!0)),r}}class g6 extends Km{setValue(t,n){this._values.set(t,n)}}class iyt extends g6{setValue(t,n){super.setValue(t,bAe(n))}}class syt extends g6{}class oyt extends g6{}class y6 extends Km{}y6.prototype._setValue=kAe;class xCe extends y6{}xCe.prototype._setValue=PK;class SCe extends y6{}SCe.prototype._setValue=DK;class Gx extends Km{}Gx.prototype._setValue=RAe;class TCe extends Gx{}TCe.prototype._setValue=OK;class ACe extends Gx{}ACe.prototype._setValue=$K;class CCe extends Gx{}CCe.prototype._setValue=MK;class ICe extends Gx{}ICe.prototype._setValue=LK;class Xm extends Km{setValue(t,n){this._values.set(t,n)}}class ayt extends Xm{}class uyt extends Xm{}class lyt extends Xm{}class cyt extends Xm{}class fyt extends Xm{}class dyt extends Xm{}class hyt extends Xm{}class pyt extends Xm{}class myt extends p6{constructor(t){super(t),this._offsets=new hCe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new CE(new Mr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class gyt extends p6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new S2(new Mr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class yyt extends el{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class vyt extends el{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new oa([...this.type.children,new Mr(n,t.type,!0)]),r}}class Yx extends Km{}Yx.prototype._setValue=SAe;class kCe extends Yx{}kCe.prototype._setValue=SK;class RCe extends Yx{}RCe.prototype._setValue=TK;class NCe extends Yx{}NCe.prototype._setValue=AK;class PCe extends Yx{}PCe.prototype._setValue=CK;class Kx extends Km{}Kx.prototype._setValue=TAe;class DCe extends Kx{}DCe.prototype._setValue=IK;class OCe extends Kx{}OCe.prototype._setValue=kK;class $Ce extends Kx{}$Ce.prototype._setValue=RK;class MCe extends Kx{}MCe.prototype._setValue=NK;class HK extends el{constructor(t){super(t),this._typeIds=new tk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Mr(n,t.type)];return this.type=new x2(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class byt extends HK{}class _yt extends HK{constructor(t){super(t),this._offsets=new tk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class LCe extends p6{constructor(t){super(t),this._values=new h6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,aK(n))}_flushPending(t,n){}}LCe.prototype._flushPending=vCe.prototype._flushPending;class wyt extends Sn{visitNull(){return yyt}visitBool(){return tyt}visitInt(){return Xm}visitInt8(){return ayt}visitInt16(){return uyt}visitInt32(){return lyt}visitInt64(){return cyt}visitUint8(){return fyt}visitUint16(){return dyt}visitUint32(){return hyt}visitUint64(){return pyt}visitFloat(){return g6}visitFloat16(){return iyt}visitFloat32(){return syt}visitFloat64(){return oyt}visitUtf8(){return LCe}visitBinary(){return vCe}visitFixedSizeBinary(){return ECe}visitDate(){return m6}visitDateDay(){return bCe}visitDateMillisecond(){return _Ce}visitTimestamp(){return Yx}visitTimestampSecond(){return kCe}visitTimestampMillisecond(){return RCe}visitTimestampMicrosecond(){return NCe}visitTimestampNanosecond(){return PCe}visitTime(){return Kx}visitTimeSecond(){return DCe}visitTimeMillisecond(){return OCe}visitTimeMicrosecond(){return $Ce}visitTimeNanosecond(){return MCe}visitDecimal(){return wCe}visitList(){return myt}visitStruct(){return vyt}visitUnion(){return HK}visitDenseUnion(){return _yt}visitSparseUnion(){return byt}visitDictionary(){return nyt}visitInterval(){return y6}visitIntervalDayTime(){return xCe}visitIntervalYearMonth(){return SCe}visitDuration(){return Gx}visitDurationSecond(){return TCe}visitDurationMillisecond(){return ACe}visitDurationMicrosecond(){return CCe}visistDurationNanosecond(){return ICe}visitFixedSizeList(){return ryt}visitMap(){return gyt}}const Eyt=new wyt;class Kt extends Sn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function ru(e,t){return t instanceof e.constructor}function nk(e,t){return e===t||ru(e,t)}function Qm(e,t){return e===t||ru(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function v6(e,t){return e===t||ru(e,t)&&e.precision===t.precision}function xyt(e,t){return e===t||ru(e,t)&&e.byteWidth===t.byteWidth}function qK(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function rk(e,t){return e===t||ru(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function ik(e,t){return e===t||ru(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Syt(e,t){return e===t||ru(e,t)&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function Tyt(e,t){return e===t||ru(e,t)&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function WK(e,t){return e===t||ru(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&H0.compareManyFields(e.children,t.children)}function Ayt(e,t){return e===t||ru(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&H0.visit(e.indices,t.indices)&&H0.visit(e.dictionary,t.dictionary)}function GK(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function sk(e,t){return e===t||ru(e,t)&&e.unit===t.unit}function Cyt(e,t){return e===t||ru(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}function Iyt(e,t){return e===t||ru(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&H0.compareManyFields(e.children,t.children)}Kt.prototype.visitNull=nk;Kt.prototype.visitBool=nk;Kt.prototype.visitInt=Qm;Kt.prototype.visitInt8=Qm;Kt.prototype.visitInt16=Qm;Kt.prototype.visitInt32=Qm;Kt.prototype.visitInt64=Qm;Kt.prototype.visitUint8=Qm;Kt.prototype.visitUint16=Qm;Kt.prototype.visitUint32=Qm;Kt.prototype.visitUint64=Qm;Kt.prototype.visitFloat=v6;Kt.prototype.visitFloat16=v6;Kt.prototype.visitFloat32=v6;Kt.prototype.visitFloat64=v6;Kt.prototype.visitUtf8=nk;Kt.prototype.visitBinary=nk;Kt.prototype.visitFixedSizeBinary=xyt;Kt.prototype.visitDate=qK;Kt.prototype.visitDateDay=qK;Kt.prototype.visitDateMillisecond=qK;Kt.prototype.visitTimestamp=rk;Kt.prototype.visitTimestampSecond=rk;Kt.prototype.visitTimestampMillisecond=rk;Kt.prototype.visitTimestampMicrosecond=rk;Kt.prototype.visitTimestampNanosecond=rk;Kt.prototype.visitTime=ik;Kt.prototype.visitTimeSecond=ik;Kt.prototype.visitTimeMillisecond=ik;Kt.prototype.visitTimeMicrosecond=ik;Kt.prototype.visitTimeNanosecond=ik;Kt.prototype.visitDecimal=nk;Kt.prototype.visitList=Syt;Kt.prototype.visitStruct=Tyt;Kt.prototype.visitUnion=WK;Kt.prototype.visitDenseUnion=WK;Kt.prototype.visitSparseUnion=WK;Kt.prototype.visitDictionary=Ayt;Kt.prototype.visitInterval=GK;Kt.prototype.visitIntervalDayTime=GK;Kt.prototype.visitIntervalYearMonth=GK;Kt.prototype.visitDuration=sk;Kt.prototype.visitDurationSecond=sk;Kt.prototype.visitDurationMillisecond=sk;Kt.prototype.visitDurationMicrosecond=sk;Kt.prototype.visitDurationNanosecond=sk;Kt.prototype.visitFixedSizeList=Cyt;Kt.prototype.visitMap=Iyt;const H0=new Kt;function K7(e,t){return H0.compareSchemas(e,t)}function M3(e){const t=e.type,n=new(Eyt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(M3(Object.assign(Object.assign({},l),{type:u})))}}return n}function dj(e,t){return kyt(e,t.map(n=>n.data.concat()))}function kyt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Ryt(n,o,c,t,i),o>0&&(r[s++]=na({type:new oa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new pl(e,f))]}function Ryt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:na({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var FCe;class wu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Sr([]),this._offsets=[0],this;let i,s;t[0]instanceof Sr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof pl)return[u];if(u instanceof wu)return u.batches;if(u instanceof Rr){if(u.type instanceof oa)return[new pl(new Sr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=new Sr(l.map((h,p)=>new Mr(String(h),c[p].type))),[,d]=dj(f,c);return d.length===0?[new pl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Sr([]),!(i instanceof Sr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof pl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!K7(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??nCe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=tCe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?VK.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new wu(n,r.map(i=>new pl(n,i)))}slice(t,n){const r=this.schema;[t,n]=JAe({length:this.numRows},t,n);const i=rCe(this.data,this._offsets,t,n);return new wu(r,i.map(s=>new pl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=na({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([na({type:new xm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=dj(r,a)}return new wu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new wu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new wu(...dj(s,o))}}FCe=Symbol.toStringTag;wu[FCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=kw(zK),e.get=kw(Wu.getVisitFn(re.Struct)),e.set=iCe(Tc.getVisitFn(re.Struct)),e.indexOf=sCe(I3.getVisitFn(re.Struct)),e.getByteLength=kw(wh.getVisitFn(re.Struct)),"Table"))(wu.prototype);var jCe;let pl=class sA{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Sr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=na({nullCount:0,type:new oa(this.schema.fields),children:this.schema.fields.map(n=>na({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Rr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Qle(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Mr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Sr(r),a=na({type:new oa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Qle(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=BCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Wu.visit(this.data,t)}set(t,n){return Tc.visit(this.data,t,n)}indexOf(t,n){return I3.visit(this.data,t,n)}getByteLength(t){return wh.visit(this.data,t)}[Symbol.iterator](){return VK.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new wu(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new sA(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([na({type:new xm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Sr(s,new Map(this.schema.metadata)),i=na({type:new oa(s),children:o})}return new sA(r,i)}select(t){const n=this.schema.select(t),r=new oa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new sA(n,na({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=na({type:new oa(n.fields),length:this.numRows,children:r});return new sA(n,i)}};jCe=Symbol.toStringTag;pl[jCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(pl.prototype);function Qle(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:na({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),na({type:new oa(i),length:n,children:s})]}function BCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])BCe(a.children,l==null?void 0:l.children,n);if(xn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Nyt extends pl{constructor(t){const n=t.fields.map(i=>na({type:i.type})),r=na({type:new oa(t.fields),nullCount:0,children:n});super(t,r)}}var L3;(function(e){e[e.BUFFER=0]="BUFFER"})(L3||(L3={}));var F3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(F3||(F3={}));class Cg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Br),(n||new Cg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):F3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):L3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,F3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,L3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Cg.startBodyCompression(t),Cg.addCodec(t,n),Cg.addMethod(t,r),Cg.endBodyCompression(t)}}let UCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},zCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},bp=class X7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new X7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Br),(n||new X7).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new zCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new UCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Cg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},N_=class Q7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Q7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Br),(n||new Q7).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new bp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var j3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(j3||(j3={}));let dg=class gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Br),(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):j3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ss).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,j3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return gd.startMessage(t),gd.addVersion(t,n),gd.addHeaderType(t,r),gd.addHeader(t,i),gd.addBodyLength(t,s),gd.addCustomMetadata(t,o),gd.endMessage(t)}};class Pyt extends Sn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Z1.startNull(n),Z1.endNull(n)}visitInt(t,n){return hl.startInt(n),hl.addBitWidth(n,t.bitWidth),hl.addIsSigned(n,t.isSigned),hl.endInt(n)}visitFloat(t,n){return jd.startFloatingPoint(n),jd.addPrecision(n,t.precision),jd.endFloatingPoint(n)}visitBinary(t,n){return X1.startBinary(n),X1.endBinary(n)}visitBool(t,n){return Q1.startBool(n),Q1.endBool(n)}visitUtf8(t,n){return tv.startUtf8(n),tv.endUtf8(n)}visitDecimal(t,n){return gu.startDecimal(n),gu.addScale(n,t.scale),gu.addPrecision(n,t.precision),gu.addBitWidth(n,t.bitWidth),gu.endDecimal(n)}visitDate(t,n){return YP.startDate(n),YP.addUnit(n,t.unit),YP.endDate(n)}visitTime(t,n){return rA.startTime(n),rA.addUnit(n,t.unit),rA.addBitWidth(n,t.bitWidth),rA.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return iA.startTimestamp(n),iA.addUnit(n,t.unit),r!==void 0&&iA.addTimezone(n,r),iA.endTimestamp(n)}visitInterval(t,n){return Bd.startInterval(n),Bd.addUnit(n,t.unit),Bd.endInterval(n)}visitDuration(t,n){return Md.startDuration(n),Md.addUnit(n,t.unit),Md.endDuration(n)}visitList(t,n){return J1.startList(n),J1.endList(n)}visitStruct(t,n){return ev.startStruct_(n),ev.endStruct_(n)}visitUnion(t,n){b1.startTypeIdsVector(n,t.typeIds.length);const r=b1.createTypeIdsVector(n,t.typeIds);return b1.startUnion(n),b1.addMode(n,t.mode),b1.addTypeIds(n,r),b1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Np.startDictionaryEncoding(n),Np.addId(n,BigInt(t.id)),Np.addIsOrdered(n,t.isOrdered),r!==void 0&&Np.addIndexType(n,r),Np.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(n),Ld.addByteWidth(n,t.byteWidth),Ld.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Fd.startFixedSizeList(n),Fd.addListSize(n,t.listSize),Fd.endFixedSizeList(n)}visitMap(t,n){return KP.startMap(n),KP.addKeysSorted(n,t.keysSorted),KP.endMap(n)}}const hj=new Pyt;function Dyt(e,t=new Map){return new Sr($yt(e,t),QP(e.metadata),t)}function VCe(e){return new Pl(e.count,HCe(e.columns),qCe(e.columns))}function Oyt(e){return new Eh(VCe(e.data),e.id,e.isDelta)}function $yt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function Jle(e,t){return(e.children||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function HCe(e){return(e||[]).reduce((t,n)=>[...t,new q0(n.count,Myt(n.VALIDITY)),...HCe(n.children)],[])}function qCe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Wd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Wd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Wd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Wd(t.length,i.DATA.length)),t=qCe(i.children,t)}return t}function Myt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Lyt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=ece(e,Jle(e,t)),i=new Mr(e.name,o,e.nullable,QP(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Zle(r):new j0,a=new U0(t.get(n),r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,QP(e.metadata))):(r=(r=s.indexType)?Zle(r):new j0,t.set(n,o=ece(e,Jle(e,t))),a=new U0(o,r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,QP(e.metadata))),i||null}function QP(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Zle(e){return new Ja(e.isSigned,e.bitWidth)}function ece(e,t){const n=e.type.name;switch(n){case"NONE":return new xm;case"null":return new xm;case"binary":return new w2;case"utf8":return new SE;case"bool":return new E2;case"list":return new CE((t||[])[0]);case"struct":return new oa(t||[]);case"struct_":return new oa(t||[])}switch(n){case"int":{const r=e.type;return new Ja(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new B0(Io[r.precision])}case"decimal":{const r=e.type;return new x3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new TE(bh[r.unit])}case"time":{const r=e.type;return new Sm(qt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new S3(qt[r.unit],r.timezone)}case"interval":{const r=e.type;return new AE(_h[r.unit])}case"duration":{const r=e.type;return new T3(qt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new x2(qu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new A3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new IE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new S2((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Fyt=mCe,jyt=R3;class Ud{static fromJSON(t,n){const r=new Ud(0,Ba.V5,n);return r._createHeader=Byt(t,n),r}static decode(t){t=new jyt(Nr(t));const n=dg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Ud(r,i,s);return o._createHeader=Uyt(n,s),o}static encode(t){const n=new Fyt;let r=-1;return t.isSchema()?r=Sr.encode(n,t.header()):t.isRecordBatch()?r=Pl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Eh.encode(n,t.header())),dg.startMessage(n),dg.addVersion(n,Ba.V5),dg.addHeader(n,r),dg.addHeaderType(n,t.headerType),dg.addBodyLength(n,BigInt(t.bodyLength)),dg.finishMessageBuffer(n,dg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Sr)return new Ud(0,Ba.V5,Ks.Schema,t);if(t instanceof Pl)return new Ud(n,Ba.V5,Ks.RecordBatch,t);if(t instanceof Eh)return new Ud(n,Ba.V5,Ks.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ks.Schema}isRecordBatch(){return this.headerType===Ks.RecordBatch}isDictionaryBatch(){return this.headerType===Ks.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Bf(t)}}class Pl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Bf(t)}}class Eh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Bf(n)}}class Wd{constructor(t,n){this.offset=Bf(t),this.length=Bf(n)}}class q0{constructor(t,n){this.length=Bf(t),this.nullCount=Bf(n)}}function Byt(e,t){return()=>{switch(t){case Ks.Schema:return Sr.fromJSON(e);case Ks.RecordBatch:return Pl.fromJSON(e);case Ks.DictionaryBatch:return Eh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ks[t]}, type: ${t} }`)}}function Uyt(e,t){return()=>{switch(t){case Ks.Schema:return Sr.decode(e.header(new Sd),new Map,e.version());case Ks.RecordBatch:return Pl.decode(e.header(new bp),e.version());case Ks.DictionaryBatch:return Eh.decode(e.header(new N_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ks[t]}, type: ${t} }`)}}Mr.encode=Jyt;Mr.decode=Xyt;Mr.fromJSON=Lyt;Sr.encode=Qyt;Sr.decode=zyt;Sr.fromJSON=Dyt;Pl.encode=Zyt;Pl.decode=Vyt;Pl.fromJSON=VCe;Eh.encode=e1t;Eh.decode=Hyt;Eh.fromJSON=Oyt;q0.encode=t1t;q0.decode=Wyt;Wd.encode=n1t;Wd.decode=qyt;function zyt(e,t=new Map,n=Ba.V5){const r=Kyt(e,t);return new Sr(r,JP(e),t,n)}function Vyt(e,t=Ba.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Pl(e.length(),Gyt(e),Yyt(e,t))}function Hyt(e,t=Ba.V5){return new Eh(Pl.decode(e.data(),t),e.id(),e.isDelta())}function qyt(e){return new Wd(e.offset(),e.length())}function Wyt(e){return new q0(e.length(),e.nullCount())}function Gyt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=q0.decode(n));return t}function Yyt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ba.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Wd.decode(r));return n}function Kyt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Mr.decode(r,t));return n}function tce(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Mr.decode(r,t));return n}function Xyt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=rce(e,tce(e,t)),r=new Mr(e.name(),i,e.nullable(),JP(e))):t.has(n=Bf(a.id()))?(s=(s=a.indexType())?nce(s):new j0,o=new U0(t.get(n),s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),JP(e))):(s=(s=a.indexType())?nce(s):new j0,t.set(n,i=rce(e,tce(e,t))),o=new U0(i,s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),JP(e))),r||null}function JP(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function nce(e){return new Ja(e.isSigned(),e.bitWidth())}function rce(e,t){const n=e.typeType();switch(n){case yi.NONE:return new xm;case yi.Null:return new xm;case yi.Binary:return new w2;case yi.Utf8:return new SE;case yi.Bool:return new E2;case yi.List:return new CE((t||[])[0]);case yi.Struct_:return new oa(t||[])}switch(n){case yi.Int:{const r=e.type(new hl);return new Ja(r.isSigned(),r.bitWidth())}case yi.FloatingPoint:{const r=e.type(new jd);return new B0(r.precision())}case yi.Decimal:{const r=e.type(new gu);return new x3(r.scale(),r.precision(),r.bitWidth())}case yi.Date:{const r=e.type(new YP);return new TE(r.unit())}case yi.Time:{const r=e.type(new rA);return new Sm(r.unit(),r.bitWidth())}case yi.Timestamp:{const r=e.type(new iA);return new S3(r.unit(),r.timezone())}case yi.Interval:{const r=e.type(new Bd);return new AE(r.unit())}case yi.Duration:{const r=e.type(new Md);return new T3(r.unit())}case yi.Union:{const r=e.type(new b1);return new x2(r.mode(),r.typeIdsArray()||[],t||[])}case yi.FixedSizeBinary:{const r=e.type(new Ld);return new A3(r.byteWidth())}case yi.FixedSizeList:{const r=e.type(new Fd);return new IE(r.listSize(),(t||[])[0])}case yi.Map:{const r=e.type(new KP);return new S2((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${yi[n]}" (${n})`)}function Qyt(e,t){const n=t.fields.map(s=>Mr.encode(e,s));Sd.startFieldsVector(e,n.length);const r=Sd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Sd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ss.startKeyValue(e),Ss.addKey(e,a),Ss.addValue(e,u),Ss.endKeyValue(e)})):-1;return Sd.startSchema(e),Sd.addFields(e,r),Sd.addEndianness(e,r1t?RE.Little:RE.Big),i!==-1&&Sd.addCustomMetadata(e,i),Sd.endSchema(e)}function Jyt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;xn.isDictionary(s)?(o=s.dictionary.typeId,i=hj.visit(s,e),r=hj.visit(s.dictionary,e)):r=hj.visit(s,e);const a=(s.children||[]).map(c=>Mr.encode(e,c)),u=Zl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Zl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ss.startKeyValue(e),Ss.addKey(e,d),Ss.addValue(e,h),Ss.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Zl.startField(e),Zl.addType(e,r),Zl.addTypeType(e,o),Zl.addChildren(e,u),Zl.addNullable(e,!!t.nullable),n!==-1&&Zl.addName(e,n),i!==-1&&Zl.addDictionary(e,i),l!==-1&&Zl.addCustomMetadata(e,l),Zl.endField(e)}function Zyt(e,t){const n=t.nodes||[],r=t.buffers||[];bp.startNodesVector(e,n.length);for(const o of n.slice().reverse())q0.encode(e,o);const i=e.endVector();bp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Wd.encode(e,o);const s=e.endVector();return bp.startRecordBatch(e),bp.addLength(e,BigInt(t.length)),bp.addNodes(e,i),bp.addBuffers(e,s),bp.endRecordBatch(e)}function e1t(e,t){const n=Pl.encode(e,t.data);return N_.startDictionaryBatch(e),N_.addId(e,BigInt(t.id)),N_.addIsDelta(e,t.isDelta),N_.addData(e,n),N_.endDictionaryBatch(e)}function t1t(e,t){return zCe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function n1t(e,t){return UCe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const r1t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),J7="ARROW1",YK=new Uint8Array(J7.length);for(let e=0;e<J7.length;e+=1)YK[e]=J7.codePointAt(e);YK.length;class as extends Sn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof pl?s.data.children:s.data),r=new as;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!xn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(xn.isUnion(n))this.nodes.push(new q0(r,0));else{const{nullCount:i}=t;xn.isNull(n)||Nf.call(this,i<=0?new Uint8Array(0):C3(t.offset,r,t.nullBitmap)),this.nodes.push(new q0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Nf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Wd(this._byteLength,t)),this._byteLength+=t,this}function i1t(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Nf.call(this,i),n.mode===qu.Sparse)return Z7.call(this,e);if(n.mode===qu.Dense){if(e.offset<=0)return Nf.call(this,s),Z7.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Nf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function s1t(e){let t;return e.nullCount>=e.length?Nf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Nf.call(this,C3(e.offset,e.length,t)):Nf.call(this,eCe(e.values))}function Jm(e){return Nf.call(this,e.values.subarray(0,e.length*e.stride))}function WCe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Nf.call(this,YTe(-i,t+1,r)),Nf.call(this,n.subarray(i,i+o)),this}function KK(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Nf.call(this,YTe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Z7(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}as.prototype.visitBool=s1t;as.prototype.visitInt=Jm;as.prototype.visitFloat=Jm;as.prototype.visitUtf8=WCe;as.prototype.visitBinary=WCe;as.prototype.visitFixedSizeBinary=Jm;as.prototype.visitDate=Jm;as.prototype.visitTimestamp=Jm;as.prototype.visitTime=Jm;as.prototype.visitDecimal=Jm;as.prototype.visitList=KK;as.prototype.visitStruct=Z7;as.prototype.visitUnion=i1t;as.prototype.visitInterval=Jm;as.prototype.visitDuration=Jm;as.prototype.visitFixedSizeList=KK;as.prototype.visitMap=KK;class GCe extends yCe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new fj,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ry(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return l6(t)?t.then(n=>this.writeAll(n)):c6(t)?ZK(this,t):JK(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof fj?this._sink=t:(this._sink=new fj,t&&fgt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&dgt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!K7(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof wu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof pl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!K7(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof pl?t instanceof Nyt||this._writeRecordBatch(t):t instanceof wu?this.writeAll(t.batches):uK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Ud.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ks.RecordBatch?this._recordBatchBlocks.push(new V0(a,t.bodyLength,this._position)):t.headerType===Ks.DictionaryBatch&&this._dictionaryBlocks.push(new V0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Nr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Ud.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(YK)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=as.assemble(t),o=new Pl(t.numRows,r,i),a=Ud.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=as.assemble(new hr([t])),u=new Pl(t.length,s,o),l=new Eh(u,n,r),c=Ud.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class XK extends GCe{static writeAll(t,n){const r=new XK(n);return l6(t)?t.then(i=>r.writeAll(i)):c6(t)?ZK(r,t):JK(r,t)}}class QK extends GCe{static writeAll(t){const n=new QK;return l6(t)?t.then(r=>n.writeAll(r)):c6(t)?ZK(n,t):JK(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Y7.encode(new Y7(t,Ba.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function JK(e,t){let n=t;t instanceof wu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function ZK(e,t){var n,r,i,s,o,a,u;return Cp(this,void 0,void 0,function*(){try{for(n=!0,r=BA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function o1t(e,t="stream"){return(t==="stream"?XK:QK).writeAll(e).toUint8Array(!0)}function eX(e,t=1){return(e*t+63&-64||64)/t}function W0(e,t,n=e.BYTES_PER_ELEMENT){return new e(eX(t,n))}function tX(e){return e instanceof Rr?e:new Rr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function a1t(e){return new hr([tX(e)])}const nX=new TextEncoder;function u1t(e,t,n){const r=nX.encode(n);return e.set(r,t),r.length}function l1t(e,t,n){return nX.encodeInto(n,e.subarray(t)).written}const c1t=nX.encodeInto?l1t:u1t;function ice(e,t){const n=W0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function f1t(e,t){const n=W0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function d1t(e,t){const n=W0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function h1t(e,t){const n=W0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function p1t(e){const t=M3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function m1t(e,t,n){const r=W0(Int32Array,t+1),i=W0(Uint8Array,3*n);let s=0;return{set(o,a){s+=c1t(i,s,o),r[a+1]=s},data:()=>{const o=eX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function g1t(e,t){const n=[],r=W0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:y1t(e.dictionary,n,o)})}}function y1t(e,t,n){const r=m1t(e,t.length,n);return t.forEach(r.set),a1t(r.data())}function v1t(e,t){const n=W0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function b1t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?ice:null;break;case re.Float:r=e.precision>0?ice:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?g1t:null;break;case re.Bool:r=f1t;break;case re.Date:r=e.unit?h1t:d1t;break}return r==null?p1t(e):n?v1t(r(e,t),t):r(e,t)}function _1t(e,t){const n=e.length,r=eX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),tX({type:t,length:n,buffers:[null,i]})}function YCe(e,t,n,r,i=!0){const s=b1t(r,e,i);return t(n,s.set),tX(s.data())}function rX(e){if(e instanceof xn||e==null)return e;switch(e){case re.Binary:return new w2;case re.Bool:return new E2;case re.DateDay:return new Cgt;case re.DateMillisecond:case re.Date:return new Igt;case re.Dictionary:return new U0(new SE,new j0);case re.Float16:return new gAe;case re.Float32:return new vK;case re.Float64:case re.Float:return new bK;case re.Int8:return new fK;case re.Int16:return new dK;case re.Int32:case re.Int:return new j0;case re.Int64:return new hK;case re.IntervalDayTime:return new Dgt;case re.Interval:case re.IntervalYearMonth:return new Ogt;case re.Null:return new xm;case re.TimeMicrosecond:return new Ngt;case re.TimeMillisecond:case re.Time:return new Rgt;case re.TimeNanosecond:return new Pgt;case re.TimeSecond:return new kgt;case re.Uint8:return new pK;case re.Uint16:return new mK;case re.Uint32:return new gK;case re.Uint64:return new yK;case re.Utf8:return new SE;default:En(`Unsupported type code: ${yh(e)}. Use a data type constructor instead?`)}}function w1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function KCe(e,t){const n=ez();return e(t,n.add),n}function ez(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Em(t))++e.dates,w1t(t)&&++e.utcdays;else if(K1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=ez());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=ez())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return rX(E1t(e))}};return e}function E1t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:En(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:En(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Mr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new IE(e.minlen,n):new CE(n)}else if(e.structs===t){const n=e.struct_prof;return new oa(Object.keys(n).map(r=>Mr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;En("Type inference failure")}}}}function x1t(e,t,n,r,i,s=!0){if(i=rX(i),!i){const o=KCe(r,t);s=o.nulls>0,i=o.type()}return YCe(n,r,t,i,s)}function S1t(e,t,n,r,i,s=!0){i=rX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=T1t(o);if(u&&a&&sce(u.type,i))return u;const l=o.data;if(ZI(l)){const c=A1t(l);if(a&&c&&sce(c,i))return _1t(l,c);i=i||c,s=!1}if(!i){const c=KCe(r,o);s=c.nulls>0,i=c.type()}return YCe(n,r,o,i,s)}function T1t(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function A1t(e){const n={Float32Array:vK,Float64Array:bK,Int8Array:fK,Int16Array:dK,Int32Array:j0,Uint8Array:pK,Uint16Array:mK,Uint32Array:gK,BigInt64Array:hK,BigUint64Array:yK}[e.constructor.name];return n?new n:null}function sce(e,t){return!e||!t?!0:e.compareTo(t)}function C1t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function I1t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&K1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const k1t=()=>En("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function R1t(){try{return wu}catch{k1t()}}function XCe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=N1t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&En("Column length mismatch"),a[l]=c});const u=R1t();return new u(a)}function N1t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=hi(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:x1t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:C1t(e,r,i)};if(P1t(e))return{dataFrom:S1t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:I1t(e,r,i)};En("Unsupported input data type")}function P1t(e){return e&&hi(e.reify)}function D1t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return o1t(XCe(e,r),n)}function O1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function $1t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Em(u))++i,O1t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function b6(e,t){return hi(t)?t(e):t||e.columnNames()}function QCe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=$1t(M1t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function M1t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function iX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function L1t(e,t={}){const n=b6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Em(l)?a6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return iX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function JCe(e,t={}){if(hi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Em(e))return t.utc?a6(e):_Te(e);{const r=JSON.stringify(e,(s,o)=>ZI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+"…"+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function _6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function F1t(e,t={}){const n=b6(e,t.columns),{align:r,format:i}=QCe(e,n,t),s=j1t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(JCe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return iX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function j1t(e){return _6(e.style,t=>hi(t)?t:()=>t)}function B1t(e,t=!0,n=!1){return e===void 0||e?t:n}const U1t=e=>Em(e)?a6(e,!0):e;function z1t(e,t={}){const n=B1t(t.schema),r=t.format||{},i=b6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||U1t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function V1t(e,t={}){const n=b6(e,t.columns),{align:r,format:i}=QCe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return iX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(JCe(u,i[l]))+"|"}}),a+`
`}function ZCe(e,t){for(const[n,r]of u6(t))e.set(n,r);return e}function H1t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Tm(e,t,n=new Map){return t=Qa(t)?e.columnName(t):t,Mo(t)?n.set(t,t):dr(t)?t.forEach(r=>Tm(e,r,n)):hi(t)?Tm(e,t(e),n):ga(t)?ZCe(n,t):En(`Invalid column selection: ${yh(t)}`),n}function w6(e,t){return e.toObject=t,e}function e2e(e){return dr(e)?e.map(e2e):e&&e.toObject?e.toObject():e}function NE(){return w6(e=>e.columnNames(),()=>({all:[]}))}function t2e(...e){return e=e.flat(),w6(t=>{const n=Tm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:e2e(e)}))}function q1t(e,t){return w6(n=>{let r=Qa(e)?e:n.columnIndex(e),i=Qa(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function W1t(e){return Mo(e)&&(e=RegExp(H1t(e))),w6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function G1t(e){return ZI(e.data)?e.data.constructor:Array}class Pp extends cmt{static from(t,n){return new Pp(hmt(t,n),n)}static new(t,n){if(t instanceof Pp)return t;const r={},i=[];for(const[s,o]of u6(t))r[s]=o,i.push(s);return new Pp(r,n||i)}constructor(t,n,r,i,s,o){_6(t,dmt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Pp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:zmt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Hl(r).groupby(r.groups());return t.forEach(s=>{s=Pp.new(s),s.numRows()!==n&&En("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):En(`Unrecognized column: ${t}`)}object(t=0){return oce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Tm(this,t.columns||NE()),o=qTe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Hmt(this,u,a,n)}return a}*[Symbol.iterator](){const t=oce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(G1t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Vmt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return XCe(this,t)}toArrowBuffer(t){return D1t(this,t)}toCSV(t){return L1t(this,t)}toHTML(t){return F1t(this,t)}toJSON(t){return z1t(this,t)}toMarkdown(t){return V1t(this,t)}}function oce(e){let t=e._builder;if(!t){const n=qTe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class Y1t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=K1t[e.type];s&&s(e,t,n)}const SN=(e,t,n)=>{er(e.argument,t,n,e)},pj=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},ace=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},mj=(e,t,n)=>{Td(e.params,t,n,e),er(e.body,t,n,e)},uce=(e,t,n)=>{er(e.callee,t,n,e),Td(e.arguments,t,n,e)},Td=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},K1t={TemplateLiteral:(e,t,n)=>{Td(e.expressions,t,n,e),Td(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:uce,NewExpression:uce,ArrayExpression:(e,t,n)=>{Td(e.elements,t,n,e)},AssignmentExpression:pj,AwaitExpression:SN,BinaryExpression:pj,LogicalExpression:pj,UnaryExpression:SN,UpdateExpression:SN,ConditionalExpression:ace,ObjectExpression:(e,t,n)=>{Td(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:mj,FunctionExpression:mj,FunctionDeclaration:mj,VariableDeclaration:(e,t,n)=>{Td(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Td(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:ace,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),Td(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),Td(e.consequent,t,n,e)},ReturnStatement:SN,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function n2e(e){delete e.start,delete e.end,delete e.optional}function lce(e){n2e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function X1t(e){return er(e,null,{Column:lce,Constant:lce,Default:n2e}),e}function As(e,t){return t&&t.type===e}function Q1t(e){return As(Gmt,e)||As(Wmt,e)}function J1t(e){return hi(e)?e:()=>e}const Z1t="Escaped functions are not valid as rollup or pivot values.";function evt(e,t,n){e.aggronly&&En(Z1t);const r="(row,data)=>fn("+HTe(e.table.columnNames())+",$)";return{escape:oK.escape(r,J1t(t.expr),n)}}var tvt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],r2e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],nvt="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࢘-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",i2e="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",gj={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},yj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",rvt={5:yj,"5module":yj+" export import",6:yj+" const class extends export import super"},ivt=/^in(stanceof)?$/,svt=new RegExp("["+i2e+"]"),ovt=new RegExp("["+i2e+nvt+"]");function tz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Am(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&svt.test(String.fromCharCode(e)):t===!1?!1:tz(e,r2e)}function PE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&ovt.test(String.fromCharCode(e)):t===!1?!1:tz(e,r2e)||tz(e,tvt)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Kl(e,t){return new or(e,{beforeExpr:!0,binop:t})}var Xl={beforeExpr:!0},cu={startsExpr:!0},sX={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,sX[e]=new or(e,t)}var K={num:new or("num",cu),regexp:new or("regexp",cu),string:new or("string",cu),name:new or("name",cu),privateId:new or("privateId",cu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",Xl),semi:new or(";",Xl),colon:new or(":",Xl),dot:new or("."),question:new or("?",Xl),questionDot:new or("?."),arrow:new or("=>",Xl),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",Xl),backQuote:new or("`",cu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Kl("||",1),logicalAND:Kl("&&",2),bitwiseOR:Kl("|",3),bitwiseXOR:Kl("^",4),bitwiseAND:Kl("&",5),equality:Kl("==/!=/===/!==",6),relational:Kl("</>/<=/>=",7),bitShift:Kl("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Kl("%",10),star:Kl("*",10),slash:Kl("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:Kl("??",1),_break:Wn("break"),_case:Wn("case",Xl),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",Xl),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",Xl),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",cu),_if:Wn("if"),_return:Wn("return",Xl),_switch:Wn("switch"),_throw:Wn("throw",Xl),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",cu),_super:Wn("super",cu),_class:Wn("class",cu),_extends:Wn("extends",Xl),_export:Wn("export"),_import:Wn("import",cu),_null:Wn("null",cu),_true:Wn("true",cu),_false:Wn("false",cu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},jc=/\r\n?|\n|\u2028|\u2029/,avt=new RegExp(jc.source,"g");function Xx(e){return e===10||e===13||e===8232||e===8233}function s2e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(Xx(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var o2e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ac=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,a2e=Object.prototype,uvt=a2e.hasOwnProperty,lvt=a2e.toString,ok=Object.hasOwn||function(e,t){return uvt.call(e,t)},cce=Array.isArray||function(e){return lvt.call(e)==="[object Array]"},fce=Object.create(null);function Wg(e){return fce[e]||(fce[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function G0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var cvt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,T2=function(t,n){this.line=t,this.column=n};T2.prototype.offset=function(t){return new T2(this.line,this.column+t)};var E6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function u2e(e,t){for(var n=1,r=0;;){var i=s2e(e,r,t);if(i<0)return new T2(n,t-r);++n,r=i}}var nz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},dce=!1;function fvt(e){var t={};for(var n in nz)t[n]=e&&ok(e,n)?e[n]:nz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!dce&&typeof console=="object"&&console.warn&&(dce=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),cce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return cce(t.onComment)&&(t.onComment=dvt(t,t.onComment)),t}function dvt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new E6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var A2=1,Qx=2,oX=4,l2e=8,c2e=16,f2e=32,aX=64,d2e=128,ak=256,uX=A2|Qx|ak;function lX(e,t){return Qx|(e?oX:0)|(t?l2e:0)}var B3=0,cX=1,Zm=2,h2e=3,p2e=4,m2e=5,Ms=function(t,n,r){this.options=t=fvt(t),this.sourceFile=t.sourceFile,this.keywords=Wg(rvt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=gj[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Wg(i);var s=(i?i+" ":"")+gj.strict;this.reservedWordsStrict=Wg(s),this.reservedWordsStrictBind=Wg(s+" "+gj.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(jc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(A2),this.regexpState=null,this.privateNameStack=[]},Vh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ms.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Vh.inFunction.get=function(){return(this.currentVarScope().flags&Qx)>0};Vh.inGenerator.get=function(){return(this.currentVarScope().flags&l2e)>0&&!this.currentVarScope().inClassFieldInit};Vh.inAsync.get=function(){return(this.currentVarScope().flags&oX)>0&&!this.currentVarScope().inClassFieldInit};Vh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&ak)return!1;if(t.flags&Qx)return(t.flags&oX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Vh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&aX)>0||n||this.options.allowSuperOutsideMethod};Vh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&d2e)>0};Vh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Vh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Qx|ak))>0||n};Vh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ak)>0};Ms.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ms.parse=function(t,n){return new this(n,t).parse()};Ms.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ms.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ms.prototype,Vh);var iu=Ms.prototype,hvt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;iu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){ac.lastIndex=e,e+=ac.exec(this.input)[0].length;var t=hvt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){ac.lastIndex=e+t[0].length;var n=ac.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||jc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,ac.lastIndex=e,e+=ac.exec(this.input)[0].length,this.input[e]===";"&&e++}};iu.eat=function(e){return this.type===e?(this.next(),!0):!1};iu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};iu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};iu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};iu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||jc.test(this.input.slice(this.lastTokEnd,this.start))};iu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};iu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};iu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};iu.expect=function(e){this.eat(e)||this.unexpected()};iu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var x6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};iu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};iu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};iu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};iu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=Ms.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var fX={kind:"loop"},pvt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ac.lastIndex=this.pos;var t=ac.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Am(r,!0)){for(var i=n+1;PE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!ivt.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ac.lastIndex=this.pos;var e=ac.exec(this.input),t=this.pos+e[0].length,n;return!jc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(PE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){ac.lastIndex=this.pos;var o=ac.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(fX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(fX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new x6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,rC|(n?0:rz),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(pvt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),jc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var mvt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?f2e:0),this.checkLValPattern(e,t?p2e:Zm),this.expect(K.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(fX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?cX:Zm,!1)};var rC=1,rz=2,g2e=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&rz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&rC&&(e.id=t&g2e&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&rz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?cX:Zm:h2e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(lX(e.async,e.generator)),t&rC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&rC?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&gvt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&U3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&U3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(U3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&U3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(ak|aX);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Zm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];ok(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function gvt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function U3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,rC|g2e,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),ok(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=mvt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Zm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Zm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Zm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return cvt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Bc=Ms.prototype;Bc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Bc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Bc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Bc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Bc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Bc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Bc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Bc.parseBindingListItem=function(e){return e};Bc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Bc.checkLValSimple=function(e,t,n){t===void 0&&(t=B3);var r=t!==B3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Zm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(ok(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==m2e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Bc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=B3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Bc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=B3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Qc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},xi={b_stat:new Qc("{",!1),b_expr:new Qc("{",!0),b_tmpl:new Qc("${",!1),p_stat:new Qc("(",!1),p_expr:new Qc("(",!0),q_tmpl:new Qc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Qc("function",!1),f_expr:new Qc("function",!0),f_expr_gen:new Qc("function",!0,!1,null,!0),f_gen:new Qc("function",!1,!1,null,!0)},Jx=Ms.prototype;Jx.initialContext=function(){return[xi.b_stat]};Jx.curContext=function(){return this.context[this.context.length-1]};Jx.braceIsBlock=function(e){var t=this.curContext();return t===xi.f_expr||t===xi.f_stat?!0:e===K.colon&&(t===xi.b_stat||t===xi.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?jc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===xi.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};Jx.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Jx.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Jx.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===xi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?xi.b_stat:xi.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(xi.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?xi.p_stat:xi.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==xi.p_stat)&&!(e===K._return&&jc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===xi.b_stat)?this.context.push(xi.f_expr):this.context.push(xi.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===xi.q_tmpl?this.context.pop():this.context.push(xi.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===xi.f_expr?this.context[t]=xi.f_expr_gen:this.context[t]=xi.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var an=Ms.prototype;an.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};an.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};an.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new x6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};an.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};an.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};an.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};an.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};an.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&y2e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function y2e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&y2e(e.expression)}an.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};an.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};an.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};an.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};an.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new x6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};an.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(xi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(xi.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};an.parseExprAtomDefault=function(){this.unexpected()};an.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};an.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};an.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};an.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};an.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};an.shouldParseArrow=function(e){return!this.canInsertSemicolon()};an.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new x6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};an.parseParenItem=function(e){return e};an.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var yvt=[];an.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=yvt,this.finishNode(e,"NewExpression")};an.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};an.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};an.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!jc.test(this.input.slice(this.lastTokEnd,this.start))};an.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};an.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};an.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};an.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};an.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};an.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};an.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(lX(t,r.generator)|aX|(n?d2e:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};an.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(lX(n,!1)|c2e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};an.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,m2e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};an.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};an.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,cX,t?null:n)}};an.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};an.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};an.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};an.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};an.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};an.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};an.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var z3=Ms.prototype;z3.raise=function(e,t){var n=u2e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};z3.raiseRecoverable=z3.raise;z3.curPosition=function(){if(this.options.locations)return new T2(this.curLine,this.pos-this.lineStart)};var Dy=Ms.prototype,vvt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Dy.enterScope=function(e){this.scopeStack.push(new vvt(e))};Dy.exitScope=function(){this.scopeStack.pop()};Dy.treatFunctionsAsVarInScope=function(e){return e.flags&Qx||!this.inModule&&e.flags&A2};Dy.declareName=function(e,t,n){var r=!1;if(t===Zm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&A2&&delete this.undefinedExports[e]}else if(t===p2e){var s=this.currentScope();s.lexical.push(e)}else if(t===h2e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&f2e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&A2&&delete this.undefinedExports[e],u.flags&uX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Dy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Dy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Dy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&uX)return t}};Dy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&uX&&!(t.flags&c2e))return t}};var S6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new E6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},uk=Ms.prototype;uk.startNode=function(){return new S6(this,this.start,this.startLoc)};uk.startNodeAt=function(e,t){return new S6(this,e,t)};function v2e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}uk.finishNode=function(e,t){return v2e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};uk.finishNodeAt=function(e,t,n,r){return v2e.call(this,e,t,n,r)};uk.copyNode=function(e){var t=new S6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var b2e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",_2e=b2e+" Extended_Pictographic",w2e=_2e,E2e=w2e+" EBase EComp EMod EPres ExtPict",x2e=E2e,bvt=x2e,_vt={9:b2e,10:_2e,11:w2e,12:E2e,13:x2e,14:bvt},wvt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Evt={9:"",10:"",11:"",12:"",13:"",14:wvt},hce="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",S2e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",T2e=S2e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",A2e=T2e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",C2e=A2e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",I2e=C2e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",xvt=I2e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Svt={9:S2e,10:T2e,11:A2e,12:C2e,13:I2e,14:xvt},k2e={};function Tvt(e){var t=k2e[e]={binary:Wg(_vt[e]+" "+hce),binaryOfStrings:Wg(Evt[e]),nonBinary:{General_Category:Wg(hce),Script:Wg(Svt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var vj=0,pce=[9,10,11,12,13,14];vj<pce.length;vj+=1){var Avt=pce[vj];Tvt(Avt)}var At=Ms.prototype,Hh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=k2e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Hh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Hh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Hh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Hh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Hh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Hh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Hh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Hh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Hh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return R2e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function R2e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!R2e(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=G0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=G0(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Cvt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Cvt(e){return Am(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Ivt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Ivt(e){return PE(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!T6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return N2e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function N2e(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&kvt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function kvt(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var P2e=0,Cm=1,cc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Rvt(t))return e.lastIntValue=-1,e.advance(),Cm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===cc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return P2e};function Rvt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Cm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return P2e};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){ok(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Cm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return cc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";D2e(t=e.current());)e.lastStringValue+=G0(t),e.advance();return e.lastStringValue!==""};function D2e(e){return N2e(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Nvt(t=e.current());)e.lastStringValue+=G0(t),e.advance();return e.lastStringValue!==""};function Nvt(e){return D2e(e)||T6(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===cc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Cm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Cm)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||M2e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Cm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===cc&&(t=cc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==cc&&(t=Cm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===cc&&(t=cc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Cm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===cc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===cc&&(t=cc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Cm:cc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&Pvt(n)||Dvt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function Pvt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function Dvt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return Ovt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Ovt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return T6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;T6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function T6(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;O2e(n=e.current());)e.lastIntValue=16*e.lastIntValue+$2e(n),e.advance();return e.pos!==t};function O2e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function $2e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return M2e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function M2e(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!O2e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+$2e(i),e.advance()}return!0};var dX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new E6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=Ms.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new dX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new dX(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return Am(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=s2e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Xx(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&o2e.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||jc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Am(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+G0(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+G0(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(jc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Hh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function $vt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function L2e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=L2e(this.input.slice(t,this.pos)),++this.pos):Am(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=L2e(this.input.slice(t,this.pos));return++this.pos,Am(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Am(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=$vt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Xx(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var F2e={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===F2e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw F2e;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Xx(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return G0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Xx(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(PE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Am:PE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=G0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=sX[e]),this.finishToken(t,e)};var Mvt="8.11.3";Ms.acorn={Parser:Ms,version:Mvt,defaultOptions:nz,Position:T2,SourceLocation:E6,getLineInfo:u2e,Node:S6,TokenType:or,tokTypes:K,keywordTypes:sX,TokContext:Qc,tokContexts:xi,isIdentifierChar:PE,isIdentifierStart:Am,Token:dX,isNewLine:Xx,lineBreak:jc,lineBreakG:avt,nonASCIIwhitespace:o2e};function Lvt(e,t){return Ms.parse(e,t)}const hX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},Fvt={ecmaVersion:11},mce="$",jvt="d",Bvt="d1",Uvt="d2",_o=e=>(t,n)=>n.error(t,e+" not allowed"),zvt=_o("Aggregate function"),Vvt=_o("Window function"),Hvt="Invalid argument",pX="Invalid column reference",qvt=pX+" (must be input to an aggregate function)",j2e="Invalid function call",Wvt="Invalid member expression",Gvt="Invalid operator parameter",Yvt="Invalid param reference",Kvt="Invalid variable reference",Xvt="Variable not accessible in operator call",Qvt="Unsupported variable declaration",Jvt="Unsupported destructuring pattern",B2e="Table expressions do not support closures",U2e="Use aq.escape(fn) to use a function as-is (including closures)",Zvt="use table.params({ name: value }) to define dynamic parameters",ebt="use aq.addFunction(name, fn) to add new op functions",tbt=`
Note: ${B2e}. ${U2e}, or ${Zvt}.`,z2e=`
Note: ${B2e}. ${U2e}, or ${ebt}.`,nbt=`The ${zTe} method is not valid in multi-table expressions.`;function rbt(e,t){const n=ibt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,Q1t(r)?(obt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Bvt),e.scope.add(e.tuple2=Uvt),e.scope.add(e.$param=mce)):(e.scope.add(e.tuple=jvt),e.scope.add(e.$param=mce)),er(r,e,mX),e.root}function ibt(e){try{const t=e.field?sbt(e):dr(e)?yh(e):e;return Lvt(`expr=(${t})`,Fvt).body[0].expression.right}catch{En(`Expression parse error: ${e+""}`)}}function sbt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const mX={FunctionDeclaration:_o("Function definitions"),ForStatement:_o("For loops"),ForOfStatement:_o("For-of loops"),ForInStatement:_o("For-in loops"),WhileStatement:_o("While loops"),DoWhileStatement:_o("Do-while loops"),AwaitExpression:_o("Await expressions"),ArrowFunctionExpression:_o("Function definitions"),AssignmentExpression:_o("Assignments"),FunctionExpression:_o("Function definitions"),NewExpression:_o('Use of "new"'),UpdateExpression:_o("Update expressions"),VariableDeclarator(e,t){oz(e.id,t)},Identifier(e,t,n){q2e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Kvt,tbt)},CallExpression(e,t){const n=V2e(e.callee),r=jTe(n)||BTe(n);if(r){if((t.join||t.aggregate===!1)&&iK(n)&&zvt(e,t),(t.join||t.window===!1)&&sK(n)&&Vvt(e,t),t.$op=1,t.ast)sz(e,n,t),e.arguments.forEach(i=>er(i,t,iz));else{const i=t.op(abt(t,r,n,e.arguments));Object.assign(e,{type:OTe,name:i.id})}return t.$op=0,!1}else FTe(n)?sz(e,n,t):t.error(e,j2e,z2e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!As(m0,r))return;const{name:s}=r;if(H2e(e)&&As(m0,i)&&jf(hX,i.name)){Y2e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return gce(e,o,t,W2e,n);if(s===t.$param)return gce(e,o,t,lbt);t.paramsRef.has(s)?C2(e,t.paramsRef.get(s)):t.columnRef.has(s)?G2e(r,s,t,e):jf(t.params,s)&&C2(r,s)}};function gce(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(As(qx,s))a=s.value;else try{er(s,n,mX,e),a=n.param(s)}catch{n.error(e,Wvt)}return r(e,a,t,n,i),!1}const iz={...mX,VariableDeclarator:_o("Variable declaration in operator call"),Identifier(e,t,n){q2e(e,t,n)&&t.error(e,Xvt)},CallExpression(e,t){const n=V2e(e.callee);FTe(n)?sz(e,n,t):t.error(e,j2e,z2e)}};function obt(e,t){e.generator&&_o("Generator functions")(e,t),e.async&&_o("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(fT(t,n[0],"tuple1",i(1)),r>1&&fT(t,n[1],"tuple2",i(2)),r>2&&fT(t,n[2],"$param",s)):(fT(t,n[0],"tuple",i(0)),r>1&&fT(t,n[1],"$param",s))),t.root=e.body}function fT(e,t,n,r){As(m0,t)?(e.scope.add(t.name),e[n]=t.name):As(PTe,t)&&t.properties.forEach(i=>{const s=As(m0,i.key)?i.key.name:As(qx,i.key)?i.key.value:e.error(i,Hvt);As(m0,i.value)||e.error(i.value,Jvt),r(i.value.name,s)})}function abt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,iz),i.push(e.field(u))):l<a?(er(u,e,iz),s.push(e.param(u))):e.error(u,Gvt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function V2e(e){return As(m0,e)?e.name:As(NTe,e)?H2e(e)?ubt(e.property.name):e.property.name:null}function H2e(e){return As(m0,e.object)&&e.object.name==="Math"}function ubt(e){return e==="max"?"greatest":e==="min"?"least":e}function q2e(e,t,n){const{name:r}=e;if(!(As(NTe,n)&&n.property===e)){if(!(As(DTe,n)&&n.key===e))if(t.paramsRef.has(r))C2(e,t.paramsRef.get(r));else if(t.columnRef.has(r))G2e(e,r,t,n);else if(jf(t.params,r))C2(e,r);else if(jf(hX,r))Y2e(e,r);else return!0}}function W2e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,pX),r.aggronly&&!r.$op&&r.error(e,qvt),UTe(e,t,n,o,i)}function G2e(e,t,n,r){const[i,s]=n.columnRef.get(t);W2e(e,i,s,n,r)}function lbt(e,t,n,r){r.params&&!jf(r.params,t)&&r.error(e,Yvt),C2(e,t)}function C2(e,t){e.type=Jmt,e.name=t}function Y2e(e,t){e.type=Kmt,e.name=t,e.raw=hX[t]}function sz(e,t,n){if(t===zTe){const r=n.table;r||n.error(e,nbt),VTe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Qa(s)?r.columnName(s):s;return r.column(o)||n.error(i,pX),o}):r.columnNames())}else e.callee={type:Qmt,name:t}}function oz(e,t){As(m0,e)?t.scope.add(e.name):As(qmt,e)?e.elements.forEach(n=>oz(n,t)):As(PTe,e)?e.properties.forEach(n=>oz(n.value,t)):t.error(e.id,Qvt)}const cbt={[ek]:1,[OTe]:1};function Gu(e,t={}){const n=t.generate||_3,r=t.compiler||oK,i=dbt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=fbt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return As(qx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?X1t(g):f(n(g),i));u.push(y),cbt[g.type]&&y!==g&&ga(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);En(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of u6(e))d.value(m+"",g.escape?evt(d,g,i):rbt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function fbt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function dbt(e){return(e.table?bj(e.table):e.join?{...bj(e.join[1]),...bj(e.join[0])}:{})||{}}function bj(e){return e&&hi(e.params)?e.params():{}}const K2e="Expr",Jc="ExprList",X2e="ExprNumber",oA="ExprObject",ew="JoinKeys",V3="JoinValues",ec="Options",gX="OrderKeys",bg="SelectionList",N1="TableRef",tw="TableRefList",hbt="Descending",pbt="Query",mbt="Selection",gbt="Verb",ybt="Window";function A6(e,t){return e&&e.expr?new yce({...e,...t}):new yce(t,e)}class yce{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...hi(this.expr)?{func:!0}:{}}}}function vbt(e){return A6(e,{desc:!0})}function jv(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return A6(e,t?{expr:t,...r}:r)}function bbt(e,t,n){return A6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function _bt(e){const t=n=>n;return t.toString=()=>e,t}function vce(e,t){return t=t&&hi(t.query)?t.query():t,t&&hi(t.evaluate)?t.evaluate(null,e):e(t)}function Q2e(e){return ga(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function I2(e){return e&&hi(e.toObject)?e.toObject():hi(e)?{expr:String(e),func:!0}:dr(e)?e.map(I2):ga(e)?_6(e,t=>I2(t)):e}function yX(e){return dr(e)?e.map(yX):ga(e)?dr(e.verbs)?bX.from(e):dr(e.all)?NE():dr(e.range)?q1t(...e.range):dr(e.match)?W1t(RegExp(...e.match)):dr(e.not)?t2e(e.not.map(I2)):wbt(e):e}function wbt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=jv(n):e.func===!0&&(t=n=_bt(n)),ga(e.window)){const{frame:r,peers:i}=e.window;t=n=bbt(n,r,i)}e.desc===!0&&(t=vbt(n))}return e===t?_6(e,r=>yX(r)):t}function Ebt(e){return dr(e)?e.map(xbt):e}function xbt(e){const t=[];return Hu(e).forEach(n=>{Qa(n)?t.push(n):Mo(n)?t.push(jv(n,null)):ga(n)&&n.expr||hi(n)?t.push(n):En(`Invalid key value: ${n+""}`)}),t}function Sbt(e){return dr(e)?e.map(Tbt):e}function Tbt(e,t){return t<2?Hu(e):e}function Abt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ga(r)&&!hi(r))for(const i in r)t.push(r[i]);else n=Qa(r)?r:Mo(r)?jv(n):hi(r)?n:En(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const Cbt={[K2e]:tIe,[Jc]:DE,[X2e]:Dbt,[oA]:Y0,[ew]:Obt,[V3]:$bt,[gX]:DE,[bg]:Nbt};function Ibt(e,t,n){return t===N1?bce(e):t===tw?e.map(bce):J2e(I2(e),t,n)}function J2e(e,t,n){return t===ec?e&&kbt(e,n):Cbt[t](e)}function kbt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?J2e(i,t[r]):i}return n}function Rbt(e,t){return Gu({expr:e},{...t,ast:!0}).exprs[0]}function vX(e){return{type:ek,name:e}}function Z2e(e){return{type:ek,index:e}}function Y0(e,t){if(Mo(e))return Rbt(e,t);if(e.expr){let n;if(e.field===!0?n=vX(e.expr):e.func===!0&&(n=Y0(e.expr,t)),n)return e.desc&&(n={type:hbt,expr:n}),e.window&&(n={type:ybt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...Y0(e[n],t),as:n}))}function eIe(e){const t=mbt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:DE(e.not)}:e.range?{type:t,operator:"range",arguments:DE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:En("Invalid input")}function Nbt(e){return Hu(e).map(Pbt).flat()}function Pbt(e){return Q2e(e)?eIe(e):Qa(e)?Z2e(e):Mo(e)?vX(e):ga(e)?Object.keys(e).map(t=>({type:ek,name:t,as:e[t]})):En("Invalid input")}function tIe(e){return Q2e(e)?eIe(e):Qa(e)?Z2e(e):Mo(e)?vX(e):ga(e)?Y0(e):En("Invalid input")}function DE(e){return Hu(e).map(tIe).flat()}function Dbt(e){return Qa(e)?e:Y0(e)}function Obt(e){return dr(e)?e.map(DE):Y0(e,{join:!0})}function $bt(e){return dr(e)?e.map((t,n)=>n<2?DE(t):Y0(t,{join:!0})):Y0(e,{join:!0})}function bce(e){return e&&hi(e.toAST)?e.toAST():e}class nIe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===ew?Ebt(a):o===V3?Sbt(a):o===gX?Abt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=az[t.verb],r=(n.schema||[]).map(({name:i})=>yX(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===N1?vce(n,o):s===tw?o.map(a=>vce(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=I2(this[n])}),t}toAST(){const t={type:gbt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Ibt(this[n],r,i)}),t}}function $r(e,t){return Object.assign((...n)=>new nIe(e,t,n),{schema:t})}const az={count:$r("count",[{name:"options",type:ec}]),derive:$r("derive",[{name:"values",type:oA},{name:"options",type:ec,props:{before:bg,after:bg}}]),filter:$r("filter",[{name:"criteria",type:oA}]),groupby:$r("groupby",[{name:"keys",type:Jc}]),orderby:$r("orderby",[{name:"keys",type:gX}]),relocate:$r("relocate",[{name:"columns",type:bg},{name:"options",type:ec,props:{before:bg,after:bg}}]),rename:$r("rename",[{name:"columns",type:bg}]),rollup:$r("rollup",[{name:"values",type:oA}]),sample:$r("sample",[{name:"size",type:X2e},{name:"options",type:ec,props:{weight:K2e}}]),select:$r("select",[{name:"columns",type:bg}]),ungroup:$r("ungroup"),unorder:$r("unorder"),reify:$r("reify"),dedupe:$r("dedupe",[{name:"keys",type:Jc,default:[]}]),impute:$r("impute",[{name:"values",type:oA},{name:"options",type:ec,props:{expand:Jc}}]),fold:$r("fold",[{name:"values",type:Jc},{name:"options",type:ec}]),pivot:$r("pivot",[{name:"keys",type:Jc},{name:"values",type:Jc},{name:"options",type:ec}]),spread:$r("spread",[{name:"values",type:Jc},{name:"options",type:ec}]),unroll:$r("unroll",[{name:"values",type:Jc},{name:"options",type:ec,props:{drop:Jc}}]),lookup:$r("lookup",[{name:"table",type:N1},{name:"on",type:ew},{name:"values",type:Jc}]),join:$r("join",[{name:"table",type:N1},{name:"on",type:ew},{name:"values",type:V3},{name:"options",type:ec}]),cross:$r("cross",[{name:"table",type:N1},{name:"values",type:V3},{name:"options",type:ec}]),semijoin:$r("semijoin",[{name:"table",type:N1},{name:"on",type:ew}]),antijoin:$r("antijoin",[{name:"table",type:N1},{name:"on",type:ew}]),concat:$r("concat",[{name:"tables",type:tw}]),union:$r("union",[{name:"tables",type:tw}]),intersect:$r("intersect",[{name:"tables",type:tw}]),except:$r("except",[{name:"tables",type:tw}])};let bX=class rIe extends vTe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new rIe(t.map(nIe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return _ce(this,"toObject")}toJSON(){return this.toObject()}toAST(){return _ce(this,"toAST",{type:pbt})}};function _ce(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function Mbt(e,t){return new bX(e._verbs.concat(t),e._params,e._table)}for(const e in az){const t=az[e];bX.prototype["__"+e]=function(n,...r){return Mbt(n,t(...r))}}function Zx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function Lbt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function _X(e,t){const n=Hl();return t.forEach((r,i)=>{const s=Mo(r)?r:i;if(s){const o=e.column(i)||En(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function iIe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||En("relocate requires a before or after option."),i&&s&&En("relocate accepts only one of the before or after options."),t=Tm(e,t);const o=[...Tm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),_X(e,u)}function lk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function wX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Fbt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function jbt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function TN(e){return v2(e)?e:+e}function Bbt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return TN(e[0]);if(t>=1)return TN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=TN(e[i]);return v2(s)?s:s+(TN(e[i+1])-s)*(r-i)}class Ubt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Fbt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:jbt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(wX)),Bbt(this._sorted,t)}}const H3=(e,t,n)=>Zx(t,"{"+lk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function zbt(e,t){const{ops:n,output:r}=Vbt(e,t),i=e[0].fields,s=i.length,o=s===0?EX:s===1?Hbt:s===2?qbt:En("Unsupported field count: "+s);return new o(i,n,r,t)}function Vbt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=jTe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class EX extends Y1t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Ubt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Hbt extends EX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=H3(n,s,"add"),this._rem=H3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Ef(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Ef(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class qbt extends EX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=H3(n,s,"add"),this._rem=H3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Ef(i)&&Ef(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Ef(i)&&Ef(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Ib(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=eS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function eS(e,t,n){if(!t.length)return n;const r=sIe(t),i=e.groups(),s=i?i.size:1;return n=n||o6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=aIe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=oIe(e,o);o.write(a,n,0)}),n}function sIe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(zbt(r[i],t));return n}function oIe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function aIe(e,t,n){const{keys:r,size:i}=n,s=o6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function uIe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function lIe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const wce=lIe(wX);function Wbt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?Zx(["w","r","k"],"{"+lk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=wce.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=wce.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],T=a[E];for(let A=b;A<p.i0;++A)S.rem(T,s[A],e);for(let A=w;A<p.i1;++A)S.add(T,s[A],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const Gbt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),Ybt=e=>!!e.peers;function Kbt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=BTe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function Xbt(e,t,n,r={},i){const s=e.data(),o=Qbt(i,s),a=o.length,u=Zx(["r","d","op"],"{"+lk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Jbt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function Qbt(e,t){const n={};return e.forEach(r=>{const i=Gbt(r),s=Ybt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});iK(r.name)?a.push(r):u.push(Kbt(r))}),Object.values(n).map(r=>Wbt(t,r.frame,r.peers,r.winOps,sIe(r.aggOps,r.frame[0]!=null?-1:1)))}function Jbt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function Zbt(e){return sK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function xX(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Hl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=e_t(r),c=e.isGrouped()?e.groups().size:1,f=eS(e,u,o6(r.length,()=>Array(c)));return l.length?Xbt(e,a,n,f,l):t_t(e,a,n,f),e.create(o)}function e_t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(Zbt(s)?n:t).push(s)}return[t,n]}function t_t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function n_t(e,t,n={}){const r=xX(e,Gu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:iIe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function r_t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const AN=2147483648,i_t=4294967295;class cIe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&AN>>>t}set(t){this._bits[t>>5]|=AN>>>t}clear(t){this._bits[t>>5]&=~(AN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&i_t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=AN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function s_t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new cIe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function o_t(e,t){const n=Gu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=xX(e,n,{drop:!0}).column("p");r=s=>i[s]}return s_t(e,r)}function fIe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Ib(e,r,n),l=Hl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},b=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,T)=>{const A=Hu(w(S,T)),C=Math.min(A.length,s);v(S,C);for(let I=0;I<C;++I)E[m+I]=A[I];b(m,C),m+=C})}else e.scan((w,E)=>{let S=0;const T=u.map(A=>{const C=Hu(A(w,E));return S=Math.min(Math.max(S,C.length),s),C});v(w,S);for(let A=0;A<y;++A){const C=h[A],I=T[A];for(let R=0;R<S;++R)C[m+R]=I[R]}b(m,S),m+=S});return e.create(l.new())}function a_t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Ib(e,r,n);return fIe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Uf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Qa(o)?t.columnName(o):o,Mo(o)?i.set(o,jv(o)):hi(o)?Tm(t,o).forEach(s):ga(o)?ZCe(i,o):En(`Invalid ${e} value: ${o+""}`)};return Hu(n).forEach(s),r.preparse&&r.preparse(i),Gu(i,{table:t,...r})}function u_t(e,t,n){return a_t(e,Uf("fold",e,t),n)}function Ece(e,t,n,r){const i=n&&n.length;return l_t(i?c_t(e,n,r):e,t,i)}function l_t(e,{names:t,exprs:n,ops:r},i){const s=Ib(e,r,n),o=i?null:Hl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Ef(p)?p:d(h)})}),i?e:e.create(o)}function c_t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=w3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Hl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=w3(o.map((p,m)=>g=>g[m])),h=Zx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),xce(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else xce(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function xce(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function SX(e,{names:t,exprs:n,ops:r}){const i=Hl(),s=e.groups();return s&&uIe(i,s),f_t(t,n,s,eS(e,r),i),e.create(i.new())}function f_t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function d_t(e,t,n={}){if(t=Gu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:En(`Invalid impute column ${yh(r)}`)),n.expand){const r={preparse:h_t,aggronly:!0},i=Uf("impute",e,n.expand,r),s=SX(e.ungroup(),i);return Ece(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Ece(e,t)}function h_t(e){e.forEach((t,n)=>t.field?e.set(n,CTe(t+"")):0)}function p_t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function dIe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function m_t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function g_t(e,t){const n=["i","a","j","b"];return Zx(n,"{"+lk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function y_t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Hl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=g_t(g,y);if((dr(n)?b_t:v_t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function v_t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function b_t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,T,A,C)=>e(A,C,S,T));const w=m_t(v,m,g),E=p.length;for(let S=0;S<E;++S){const T=p[S],A=w.get(d(T,f));if(A){const C=A.length;for(let I=0;I<C;++I){const R=A[I];b(T,f,v[R],m),y[R]=1}h[S]=1}}}function q3(e,t,n){const r=new Map;Hu(n).forEach((s,o)=>{s=Qa(s)?t.columnName(s):s,Mo(s)?r.set(o,jv(s)):hi(s)||ga(s)&&s.expr?r.set(o,s):En(`Invalid ${e} key value: ${s+""}`)});const i=Gu(r,{table:t,aggregate:!1,window:!1});return w3(i.exprs,!0)}function __t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function TX(e,t,n){if(n)Mo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=__t(e.columnNames(),t.columnNames());r.length||En("Natural join requires shared column names."),n=[r,r]}return n}function hIe(e,t,n,r){return n.length!==r.length&&En("Mismatched number of join keys"),[q3("join",e,n),q3("join",t,r)]}const w_t={aggregate:!1,window:!1},E_t={...w_t,index:1};function Sce(e,t,n,r,i={}){n=TX(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Hu);o=hIe(e,t,a,u),r||(r=x_t(e,a,u,i))}else o=Gu({on:n},s).exprs[0],r||(r=[NE(),NE()]);return y_t(e,t,o,S_t(e,t,r,s,i&&i.suffix),i)}function x_t(e,t,n,r){const i=[];t.forEach((o,a)=>Mo(o)&&o===n[a]?i.push(o):0);const s=t2e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${yh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,NE()]:[NE(),s]}function S_t(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Uf("join",e,n[0],r)),u--&&(o=Uf("join",t,n[1],E_t)),u--&&(a=Gu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Tce(s.names,l,i[0]||"_1"),i[1]!==""&&Tce(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Gu(n,r)}function Tce(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function T_t(e,t,n,r={}){const i=new cIe(e.totalRows());return(dr(n)?A_t:C_t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function A_t(e,t,n,[r,i]){const s=dIe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function C_t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Ace(e,t,n,r){n=TX(e,t,n);const i=dr(n)?hIe(e,t,...n.map(Hu)):Gu({on:n},{join:[e,t]}).exprs[0];return T_t(e,t,i,r)}function I_t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Hl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=dIe(t,r),c=Zx(["lr","rr","data"],"{"+lk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Ib(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function k_t(e,t,n,r){return n=TX(e,t,n),I_t(e,t,[q3("lookup",e,n[0]),q3("lookup",t,n[1])],Uf("lookup",t,r))}const uz=(e,t)=>e??t;function R_t(e,t,n,r={}){const{keys:i,keyColumn:s}=N_t(e,t,r),o=uz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>eS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(P_t(n,a,e.groups(),u))}function N_t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=uz(n.sort,!0),s=uz(n.keySeparator,"_"),o=Ib(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=eS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function P_t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Hl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&uIe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function D_t(e,t,n,r){return R_t(e,Uf("fold",e,t),Uf("fold",e,n,{preparse:O_t,aggronly:!0}),r)}function O_t(e){e.forEach((t,n)=>t.field?e.set(n,STe(t+"")):0)}function $_t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),_X(e,Tm(e,t,n))}function Cce(e,t){return SX(e,Gu(t,{table:e,aggronly:!0,window:!1}))}function M_t(e,t,n,r){return(t?r?F_t:L_t:r?B_t:j_t)(e.length,e,n,r)}function L_t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Hx()|0];return t}function F_t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=lIe(wX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Hx())];return t}function j_t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Hx();s<e&&(t[s|0]=n[i])}return t}function B_t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Hx())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function U_t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Hx()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function z_t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):M_t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&U_t(u),e.reify(u)}function V_t(e,t,n={}){return z_t(e,H_t(e,t),q_t(e,n.weight),n)}const pIe=e=>t=>e.get(t)||0;function H_t(e,t){return Qa(t)?()=>t:pIe(SX(e,Gu({size:t},{table:e,window:!1})).column("size"))}function q_t(e,t){return t==null?null:(t=Qa(t)?e.columnName(t):t,pIe(Mo(t)?e.column(t):xX(e,Gu({w:t},{table:e}),{drop:!0}).column("w")))}function W_t(e,t){return _X(e,Tm(e,t))}function G_t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Ib(e,r,n),l=Hl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=Y_t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function Y_t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Hu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function K_t(e,t,n){return G_t(e,Uf("spread",e,t),n)}function X_t(e,t){return e.concat(t).dedupe()}function Q_t(e,t,n){return fIe(e,Uf("unroll",e,t),n&&n.drop?{...n,drop:Uf("unroll",e,n.drop).names}:n)}function J_t(e,t){return e.create({groups:Z_t(e,t)})}function Z_t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Ib(e,r,n);const o=w3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function ewt(e,t){return J_t(e,Uf("groupby",e,t))}function twt(e,t){return e.create({order:t})}const nwt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function rwt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Gu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([_3(p,{index:"a",op:o}),_3(p,{index:"b",op:a})])},window:!1}),l=eS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=nwt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function iwt(e,t){return twt(e,swt(e,t))}function swt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ga(o)&&!hi(o))for(const a in o)i(o[a]);else i(Qa(o)?jv(s,e.columnName(o)):Mo(o)?jv(s):hi(o)?s:En(`Invalid orderby field: ${s+""}`))}),rwt(e,r)}function owt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Hl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function awt(e,t){const n=Hl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?aIe(e,t,r):[oIe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function uwt(e){return e.isGrouped()?e.create({groups:null}):e}function lwt(e){return e.isOrdered()?e.create({order:null}):e}const cwt={__antijoin:(e,t,n)=>Ace(e,t,n,{anti:!0}),__count:(e,t={})=>Cce(e,{[t.as||"count"]:TTe()}),__cross:(e,t,n,r)=>Sce(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:owt,__dedupe:Lbt,__derive:n_t,__except:r_t,__filter:o_t,__fold:u_t,__impute:d_t,__intersect:p_t,__join:Sce,__lookup:k_t,__pivot:D_t,__relocate:iIe,__rename:$_t,__rollup:Cce,__sample:V_t,__select:W_t,__semijoin:Ace,__spread:K_t,__union:X_t,__unroll:Q_t,__groupby:ewt,__orderby:iwt,__ungroup:uwt,__unorder:lwt,__reduce:awt};Object.assign(Pp.prototype,cwt);function fwt(e,t){return Pp.from(e,t)}function _j(e){return A6(e,{escape:!0,toString(){En("Escaped values can not be serialized.")}})}Pp.prototype;function yf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function K0(e){return!!e&&!!e[bi]}function Im(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===_wt}(e)||Array.isArray(e)||!!e[Oce]||!!(!((t=e.constructor)===null||t===void 0)&&t[Oce])||AX(e)||CX(e))}function Bv(e,t,n){n===void 0&&(n=!1),tS(e)===0?(n?Object.keys:Nw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function tS(e){var t=e[bi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:AX(e)?2:CX(e)?3:0}function Rw(e,t){return tS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function dwt(e,t){return tS(e)===2?e.get(t):e[t]}function mIe(e,t,n){var r=tS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function gIe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function AX(e){return vwt&&e instanceof Map}function CX(e){return bwt&&e instanceof Set}function w1(e){return e.o||e.t}function IX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=vIe(e);delete t[bi];for(var n=Nw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function kX(e,t){return t===void 0&&(t=!1),RX(e)||K0(e)||!Im(e)||(tS(e)>1&&(e.set=e.add=e.clear=e.delete=hwt),Object.freeze(e),t&&Bv(e,function(n,r){return kX(r,!0)},!0)),e}function hwt(){yf(2)}function RX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function nh(e){var t=dz[e];return t||yf(18,e),t}function pwt(e,t){dz[e]||(dz[e]=t)}function lz(){return k2}function wj(e,t){t&&(nh("Patches"),e.u=[],e.s=[],e.v=t)}function W3(e){cz(e),e.p.forEach(mwt),e.p=null}function cz(e){e===k2&&(k2=e.l)}function Ice(e){return k2={p:[],l:k2,h:e,m:!0,_:0}}function mwt(e){var t=e[bi];t.i===0||t.i===1?t.j():t.g=!0}function Ej(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||nh("ES5").S(t,e,r),r?(n[bi].P&&(W3(t),yf(4)),Im(e)&&(e=G3(t,e),t.l||Y3(t,e)),t.u&&nh("Patches").M(n[bi].t,e,t.u,t.s)):e=G3(t,n,[]),W3(t),t.u&&t.v(t.u,t.s),e!==yIe?e:void 0}function G3(e,t,n){if(RX(t))return t;var r=t[bi];if(!r)return Bv(t,function(a,u){return kce(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Y3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=IX(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),Bv(s,function(a,u){return kce(e,r,i,a,u,n,o)}),Y3(e,i,!1),n&&e.u&&nh("Patches").N(r,n,e.u,e.s)}return r.o}function kce(e,t,n,r,i,s,o){if(K0(i)){var a=G3(e,i,s&&t&&t.i!==3&&!Rw(t.R,r)?s.concat(r):void 0);if(mIe(n,r,a),!K0(a))return;e.m=!1}else o&&n.add(i);if(Im(i)&&!RX(i)){if(!e.h.D&&e._<1)return;G3(e,i),t&&t.A.l||Y3(e,i)}}function Y3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&kX(t,n)}function xj(e,t){var n=e[bi];return(n?w1(n):e)[t]}function Rce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Mg(e){e.P||(e.P=!0,e.l&&Mg(e.l))}function Sj(e){e.o||(e.o=IX(e.t))}function fz(e,t,n){var r=AX(t)?nh("MapSet").F(t,n):CX(t)?nh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:lz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=R2;o&&(u=[a],l=aA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):nh("ES5").J(t,n);return(n?n.A:lz()).p.push(r),r}function gwt(e){return K0(e)||yf(22,e),function t(n){if(!Im(n))return n;var r,i=n[bi],s=tS(n);if(i){if(!i.P&&(i.i<4||!nh("ES5").K(i)))return i.t;i.I=!0,r=Nce(n,s),i.I=!1}else r=Nce(n,s);return Bv(r,function(o,a){i&&dwt(i.t,o)===a||mIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Nce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return IX(e)}function ywt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[bi];return R2.get(u,s)},set:function(u){var l=this[bi];R2.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][bi];if(!a.P)switch(a.i){case 5:r(a)&&Mg(a);break;case 4:n(a)&&Mg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Nw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==bi){var f=o[c];if(f===void 0&&!Rw(o,c))return!0;var d=a[c],h=d&&d[bi];if(h?h.t!==f:!gIe(d,f))return!0}}var p=!!o[bi];return u.length!==Nw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};pwt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=vIe(f);delete p[bi];for(var m=Nw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:lz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,bi,{value:l,writable:!0}),u},S:function(s,o,a){a?K0(o)&&o[bi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[bi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Bv(d,function(b){b!==bi&&(f[b]!==void 0||Rw(f,b)?h[b]||u(d[b]):(h[b]=!0,Mg(c)))}),Bv(f,function(b){d[b]!==void 0||Rw(d,b)||(h[b]=!1,Mg(c))});else if(p===5){if(r(c)&&(Mg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Pce,k2,NX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",vwt=typeof Map<"u",bwt=typeof Set<"u",Dce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",yIe=NX?Symbol.for("immer-nothing"):((Pce={})["immer-nothing"]=!0,Pce),Oce=NX?Symbol.for("immer-draftable"):"__$immer_draftable",bi=NX?Symbol.for("immer-state"):"__$immer_state",_wt=""+Object.prototype.constructor,Nw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,vIe=Object.getOwnPropertyDescriptors||function(e){var t={};return Nw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},dz={},R2={get:function(e,t){if(t===bi)return e;var n=w1(e);if(!Rw(n,t))return function(i,s,o){var a,u=Rce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Im(r)?r:r===xj(e.t,t)?(Sj(e),e.o[t]=fz(e.A.h,r,e)):r},has:function(e,t){return t in w1(e)},ownKeys:function(e){return Reflect.ownKeys(w1(e))},set:function(e,t,n){var r=Rce(w1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=xj(w1(e),t),s=i==null?void 0:i[bi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(gIe(n,i)&&(n!==void 0||Rw(e.t,t)))return!0;Sj(e),Mg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return xj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Sj(e),Mg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=w1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){yf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){yf(12)}},aA={};Bv(R2,function(e,t){aA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),aA.deleteProperty=function(e,t){return aA.set.call(this,e,t,void 0)},aA.set=function(e,t,n){return R2.set.call(this,e[0],t,n,e[0])};var wwt=function(){function e(n){var r=this;this.O=Dce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&yf(6),o!==void 0&&typeof o!="function"&&yf(7),Im(i)){var c=Ice(r),f=fz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?W3(c):cz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return wj(c,o),Ej(m,c)},function(m){throw W3(c),m}):(wj(c,o),Ej(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===yIe&&(l=void 0),r.D&&kX(l,!0),o){var h=[],p=[];nh("Patches").M(i,l,h,p),o(h,p)}return l}yf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Im(n)||yf(8),K0(n)&&(n=gwt(n));var r=Ice(this),i=fz(this,n,void 0);return i[bi].C=!0,cz(r),i},t.finishDraft=function(n,r){var i=n&&n[bi],s=i.A;return wj(s,r),Ej(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Dce&&yf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=nh("Patches").$;return K0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Dl=new wwt,Ewt=Dl.produce;Dl.produceWithPatches.bind(Dl);Dl.setAutoFreeze.bind(Dl);Dl.setUseProxies.bind(Dl);Dl.applyPatches.bind(Dl);Dl.createDraft.bind(Dl);Dl.finishDraft.bind(Dl);const bIe=Ewt;function N2(e){"@babel/helpers - typeof";return N2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N2(e)}function xwt(e,t){if(N2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(N2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Swt(e){var t=xwt(e,"string");return N2(t)=="symbol"?t:t+""}function Twt(e,t,n){return(t=Swt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$ce(Object(n),!0).forEach(function(r){Twt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ea(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Lce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Tj=function(){return Math.random().toString(36).substring(7).split("").join(".")},K3={INIT:"@@redux/INIT"+Tj(),REPLACE:"@@redux/REPLACE"+Tj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Tj()}};function Awt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _Ie(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ea(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ea(1));return n(_Ie)(e,t)}if(typeof e!="function")throw new Error(ea(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ea(3));return s}function f(m){if(typeof m!="function")throw new Error(ea(4));if(u)throw new Error(ea(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ea(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Awt(m))throw new Error(ea(7));if(typeof m.type>"u")throw new Error(ea(8));if(u)throw new Error(ea(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ea(10));i=m,d({type:K3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ea(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Lce]=function(){return this},m}return d({type:K3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Lce]=p,r}function Cwt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:K3.INIT});if(typeof r>"u")throw new Error(ea(12));if(typeof n(void 0,{type:K3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ea(13))})}function Iwt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Cwt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ea(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function X3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function kwt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ea(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=X3.apply(void 0,a)(i.dispatch),Mce(Mce({},i),{},{dispatch:s})}}}function wIe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var hz=wIe();hz.withExtraArgument=wIe;var EIe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ck=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Uv=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Rwt=Object.defineProperty,Nwt=Object.defineProperties,Pwt=Object.getOwnPropertyDescriptors,Fce=Object.getOwnPropertySymbols,Dwt=Object.prototype.hasOwnProperty,Owt=Object.prototype.propertyIsEnumerable,jce=function(e,t,n){return t in e?Rwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},g0=function(e,t){for(var n in t||(t={}))Dwt.call(t,n)&&jce(e,n,t[n]);if(Fce)for(var r=0,i=Fce(t);r<i.length;r++){var n=i[r];Owt.call(t,n)&&jce(e,n,t[n])}return e},Aj=function(e,t){return Nwt(e,Pwt(t))},fk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},$wt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?X3:X3.apply(null,arguments)};function xIe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Mwt=function(e){return e&&typeof e.match=="function"};function rh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return g0(g0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Lwt(e){return xIe(e)&&"type"in e}var Fwt=function(e){EIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Uv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Uv([void 0],n.concat(this))))},t}(Array),jwt=function(e){EIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Uv([void 0],n[0].concat(this)))):new(t.bind.apply(t,Uv([void 0],n.concat(this))))},t}(Array);function pz(e){return Im(e)?bIe(e,function(){}):e}function Bwt(e){return typeof e=="boolean"}function Uwt(){return function(t){return zwt(t)}}function zwt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Fwt;return n&&(Bwt(n)?r.push(hz):r.push(hz.withExtraArgument(n.extraArgument))),r}var Vwt=!0;function Hwt(e){var t=Uwt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(xIe(i))h=Iwt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=kwt.apply(void 0,p),g=X3;u&&(g=$wt(g0({trace:!Vwt},typeof u=="object"&&u)));var y=new jwt(m),v=y;Array.isArray(d)?v=Uv([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return _Ie(h,c,b)}function SIe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function qwt(e){return typeof e=="function"}function Wwt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?SIe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(qwt(e))u=function(){return pz(e())};else{var l=pz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Uv([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(K0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Im(p))return bIe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function Gwt(e,t){return e+"/"+t}function Ywt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:pz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Gwt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?rh(d,p):rh(d)});function u(){var c=typeof e.extraReducers=="function"?SIe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=g0(g0({},d),o);return Wwt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Kwt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",TIe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Kwt[Math.random()*64|0];return t},Xwt=["name","message","stack","code"],Cj=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Bce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Qwt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Xwt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=rh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Aj(g0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=rh(t+"/pending",function(l,c,f){return{payload:void 0,meta:Aj(g0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=rh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Qwt)(l||"Rejected"),meta:Aj(g0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):TIe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return fk(this,null,function(){var v,b,w,E,S,T,A;return ck(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Zwt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new Cj(I,R)},fulfillWithValue:function(I,R){return new Bce(I,R)}})).then(function(I){if(I instanceof Cj)throw I;return I instanceof Bce?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return T=C.sent(),w=T instanceof Cj?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(Jwt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Jwt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Zwt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var eEt=function(e,t){return Mwt(e)?e.match(t):e(t)};function Uce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return eEt(r,n)})}}var PX=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},mz=function(){},AIe=function(e,t){return t===void 0&&(t=mz),e.catch(t),e},CIe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Pw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},tEt="task",IIe="listener",kIe="completed",DX="cancelled",nEt="task-"+DX,rEt="task-"+kIe,RIe=IIe+"-"+DX,iEt=IIe+"-"+kIe,C6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=tEt+" "+DX+" (reason: "+t+")"}return e}(),Dw=function(e){if(e.aborted)throw new C6(e.reason)};function NIe(e,t){var n=mz;return new Promise(function(r,i){var s=function(){return i(new C6(e.reason))};if(e.aborted){s();return}n=CIe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=mz})}var sEt=function(e,t){return fk(void 0,null,function(){var n,r;return ck(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof C6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},Q3=function(e){return function(t){return AIe(NIe(e,t).then(function(n){return Dw(e),n}))}},PIe=function(e){var t=Q3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},oEt=Object.assign,zce={},dk="listenerMiddleware",aEt=function(e,t){var n=function(r){return CIe(e,function(){return Pw(r,e.reason)})};return function(r,i){PX(r,"taskExecutor");var s=new AbortController;n(s);var o=sEt(function(){return fk(void 0,null,function(){var a;return ck(this,function(u){switch(u.label){case 0:return Dw(e),Dw(s.signal),[4,r({pause:Q3(s.signal),delay:PIe(s.signal),signal:s.signal})];case 1:return a=u.sent(),Dw(s.signal),[2,a]}})})},function(){return Pw(s,rEt)});return i!=null&&i.autoJoin&&t.push(o),{result:Q3(e)(o),cancel:function(){Pw(s,nEt)}}}},uEt=function(e,t){var n=function(r,i){return fk(void 0,null,function(){var s,o,a,u;return ck(this,function(l){switch(l.label){case 0:Dw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,NIe(t,Promise.race(a))];case 2:return u=l.sent(),Dw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return AIe(n(r,i))}},DIe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=rh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return PX(s,"options.listener"),{predicate:i,type:t,effect:s}},lEt=function(e){var t=DIe(e),n=t.type,r=t.predicate,i=t.effect,s=TIe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},gz=function(e){e.pending.forEach(function(t){Pw(t,RIe)})},cEt=function(e){return function(){e.forEach(gz),e.clear()}},Vce=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},fEt=rh(dk+"/add"),dEt=rh(dk+"/removeAll"),hEt=rh(dk+"/remove"),pEt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Uv([dk+"/error"],e))};function mEt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?pEt:i;PX(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&gz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=lEt(h)),o(p)},l=function(h){var p=DIe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&gz(v)),!!v},c=function(h,p,m,g){return fk(t,null,function(){var y,v,b,w;return ck(this,function(E){switch(E.label){case 0:y=new AbortController,v=uEt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,oEt({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:PIe(y.signal),pause:Q3(y.signal),extra:r,signal:y.signal,fork:aEt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,A){S!==y&&(Pw(S,RIe),A.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof C6||Vce(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),Pw(y,iEt),h.pending.delete(y),[7];case 6:return[2]}})})},f=cEt(n),d=function(h){return function(p){return function(m){if(!Lwt(m))return p(m);if(fEt.match(m))return u(m.payload);if(dEt.match(m)){f();return}if(hEt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===zce)throw new Error(dk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var T=S[E],A=!1;try{A=T.predicate(m,b,g)}catch(C){A=!1,Vce(s,C,{raisedBy:"predicate"})}A&&c(T,m,h,y)}}finally{g=zce}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Hce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);ywt();function gEt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let CN;const yEt=new Uint8Array(16);function vEt(){if(!CN&&(CN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!CN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return CN(yEt)}const mo=[];for(let e=0;e<256;++e)mo.push((e+256).toString(16).slice(1));function bEt(e,t=0){return(mo[e[t+0]]+mo[e[t+1]]+mo[e[t+2]]+mo[e[t+3]]+"-"+mo[e[t+4]]+mo[e[t+5]]+"-"+mo[e[t+6]]+mo[e[t+7]]+"-"+mo[e[t+8]]+mo[e[t+9]]+"-"+mo[e[t+10]]+mo[e[t+11]]+mo[e[t+12]]+mo[e[t+13]]+mo[e[t+14]]+mo[e[t+15]]).toLowerCase()}const _Et=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qce={randomUUID:_Et};function Wce(e,t,n){if(qce.randomUUID&&!t&&!e)return qce.randomUUID();e=e||{};const r=e.random||(e.rng||vEt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,bEt(r)}class ih{static get(){let t=Wce();for(;this.ids.has(t);)t=Wce();return this.ids.set(t,!0),t}}ih.ids=new Map;function sh(e){return"parent"in e}function wEt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:ih.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:ih.get(),createdOn:Date.now(),val:r}]:[];return{id:ih.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function EEt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:ih.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:ih.get(),createdOn:Date.now(),val:s}]:[];return{id:ih.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function qi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=NEt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function zv(e){return!!e&&!!e[Ol]}function X0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===PEt}(e)||Array.isArray(e)||!!e[iC]||!!(!((t=e.constructor)===null||t===void 0)&&t[iC])||I6(e)||k6(e))}function OE(e,t,n){n===void 0&&(n=!1),Q0(e)===0?(n?Object.keys:jX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Q0(e){var t=e[Ol];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:I6(e)?2:k6(e)?3:0}function P2(e,t){return Q0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ZP(e,t){return Q0(e)===2?e.get(t):e[t]}function OIe(e,t,n){var r=Q0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function xEt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function I6(e){return kEt&&e instanceof Map}function k6(e){return REt&&e instanceof Set}function E1(e){return e.o||e.t}function OX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=DEt(e);delete t[Ol];for(var n=jX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function $X(e,t){return t===void 0&&(t=!1),MX(e)||zv(e)||!X0(e)||(Q0(e)>1&&(e.set=e.add=e.clear=e.delete=SEt),Object.freeze(e),t&&OE(e,function(n,r){return $X(r,!0)},!0)),e}function SEt(){qi(2)}function MX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function oh(e){var t=_z[e];return t||qi(18,e),t}function TEt(e,t){_z[e]||(_z[e]=t)}function Gce(){return{}.NODE_ENV==="production"||$E||qi(0),$E}function Ij(e,t){t&&(oh("Patches"),e.u=[],e.s=[],e.v=t)}function J3(e){yz(e),e.p.forEach(AEt),e.p=null}function yz(e){e===$E&&($E=e.l)}function Yce(e){return $E={p:[],l:$E,h:e,m:!0,_:0}}function AEt(e){var t=e[Ol];t.i===0||t.i===1?t.j():t.O=!0}function kj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||oh("ES5").S(t,e,r),r?(n[Ol].P&&(J3(t),qi(4)),X0(e)&&(e=Z3(t,e),t.l||e$(t,e)),t.u&&oh("Patches").M(n[Ol].t,e,t.u,t.s)):e=Z3(t,n,[]),J3(t),t.u&&t.v(t.u,t.s),e!==FX?e:void 0}function Z3(e,t,n){if(MX(t))return t;var r=t[Ol];if(!r)return OE(t,function(s,o){return Kce(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return e$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=OX(r.k):r.o;OE(r.i===3?new Set(i):i,function(s,o){return Kce(e,r,i,s,o,n)}),e$(e,i,!1),n&&e.u&&oh("Patches").R(r,n,e.u,e.s)}return r.o}function Kce(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&qi(5),zv(i)){var o=Z3(e,i,s&&t&&t.i!==3&&!P2(t.D,r)?s.concat(r):void 0);if(OIe(n,r,o),!zv(o))return;e.m=!1}if(X0(i)&&!MX(i)){if(!e.h.F&&e._<1)return;Z3(e,i),t&&t.A.l||e$(e,i)}}function e$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&$X(t,n)}function Rj(e,t){var n=e[Ol];return(n?E1(n):e)[t]}function Xce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function vz(e){e.P||(e.P=!0,e.l&&vz(e.l))}function Nj(e){e.o||(e.o=OX(e.t))}function bz(e,t,n){var r=I6(t)?oh("MapSet").N(t,n):k6(t)?oh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Gce(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=wz;o&&(u=[a],l=uA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):oh("ES5").J(t,n);return(n?n.A:Gce()).p.push(r),r}function CEt(e){return zv(e)||qi(22,e),function t(n){if(!X0(n))return n;var r,i=n[Ol],s=Q0(n);if(i){if(!i.P&&(i.i<4||!oh("ES5").K(i)))return i.t;i.I=!0,r=Qce(n,s),i.I=!1}else r=Qce(n,s);return OE(r,function(o,a){i&&ZP(i.t,o)===a||OIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Qce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return OX(e)}function IEt(){function e(r){if(!X0(r))return r;if(Array.isArray(r))return r.map(e);if(I6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(k6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return P2(r,iC)&&(i[iC]=r[iC]),i}function t(r){return zv(r)?e(r):r}var n="add";TEt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Q0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||qi(24),typeof u=="function"&&f==="prototype"&&qi(24),typeof(u=ZP(u,f))!="object"&&qi(15,o.join("/"))}var d=Q0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:qi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:qi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;OE(a.D,function(h,p){var m=ZP(f,h),g=ZP(d,h),y=p?P2(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===FX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Jce,$E,LX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",kEt=typeof Map<"u",REt=typeof Set<"u",Zce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",FX=LX?Symbol.for("immer-nothing"):((Jce={})["immer-nothing"]=!0,Jce),iC=LX?Symbol.for("immer-draftable"):"__$immer_draftable",Ol=LX?Symbol.for("immer-state"):"__$immer_state",NEt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},PEt=""+Object.prototype.constructor,jX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,DEt=Object.getOwnPropertyDescriptors||function(e){var t={};return jX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},_z={},wz={get:function(e,t){if(t===Ol)return e;var n=E1(e);if(!P2(n,t))return function(i,s,o){var a,u=Xce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!X0(r)?r:r===Rj(e.t,t)?(Nj(e),e.o[t]=bz(e.A.h,r,e)):r},has:function(e,t){return t in E1(e)},ownKeys:function(e){return Reflect.ownKeys(E1(e))},set:function(e,t,n){var r=Xce(E1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Rj(E1(e),t),s=i==null?void 0:i[Ol];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(xEt(n,i)&&(n!==void 0||P2(e.t,t)))return!0;Nj(e),vz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Rj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Nj(e),vz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=E1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){qi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){qi(12)}},uA={};OE(wz,function(e,t){uA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),uA.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&qi(13),uA.set.call(this,e,t,void 0)},uA.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&qi(14),wz.set.call(this,e[0],t,n,e[0])};var OEt=function(){function e(n){var r=this;this.g=Zce,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&qi(6),o!==void 0&&typeof o!="function"&&qi(7),X0(i)){var c=Yce(r),f=bz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?J3(c):yz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Ij(c,o),kj(m,c)},function(m){throw J3(c),m}):(Ij(c,o),kj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===FX&&(l=void 0),r.F&&$X(l,!0),o){var h=[],p=[];oh("Patches").M(i,l,h,p),o(h,p)}return l}qi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){X0(n)||qi(8),zv(n)&&(n=CEt(n));var r=Yce(this),i=bz(this,n,void 0);return i[Ol].C=!0,yz(r),i},t.finishDraft=function(n,r){var i=n&&n[Ol];({}).NODE_ENV!=="production"&&(i&&i.C||qi(9),i.I&&qi(10));var s=i.A;return Ij(s,r),kj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Zce&&qi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=oh("Patches").$;return zv(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),$l=new OEt,$Et=$l.produce;$l.produceWithPatches.bind($l);$l.setAutoFreeze.bind($l);$l.setUseProxies.bind($l);$l.applyPatches.bind($l);$l.createDraft.bind($l);$l.finishDraft.bind($l);function MEt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=wEt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Ywt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:ih.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:ih.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function LEt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=MEt(e),s=mEt();s.startListening({matcher:Uce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Uce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Hwt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:ih.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var FEt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jEt=Object.prototype.hasOwnProperty;function Ez(e,t){return jEt.call(e,t)}function xz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Ez(e,i)&&r.push(i);return r}function Ru(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Sz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function x1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function $Ie(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Tz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Tz(e[t]))return!0}else if(typeof e=="object"){for(var r=xz(e),i=r.length,s=0;s<i;s++)if(Tz(e[r[s]]))return!0}}return!1}function efe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var MIe=function(e){FEt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,efe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=efe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=MIe,BEt=Ru,nw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=t$(n,this.path);r&&(r=Ru(r));var i=hv(n,{op:"remove",path:this.from}).removed;return hv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=t$(n,this.from);return hv(n,{op:"add",path:this.path,value:Ru(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:D2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},UEt={add:function(e,t,n){return Sz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:nw.move,copy:nw.copy,test:nw.test,_get:nw._get};function t$(e,t){if(t=="")return e;var n={op:"_get",path:t};return hv(e,n),n.value}function hv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):n$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=t$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=D2(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ru(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=n$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=$Ie(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Sz(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Sz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=UEt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=nw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function R6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ru(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=hv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function zEt(e,t,n){var r=hv(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function n$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(nw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Tz(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=LIe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function LIe(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)R6(Ru(t),Ru(e),n||!0);else{n=n||n$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function D2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!D2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!D2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const VEt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:D2,applyOperation:hv,applyPatch:R6,applyReducer:zEt,deepClone:BEt,getValueByPointer:t$,validate:LIe,validator:n$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var BX=new WeakMap,HEt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),qEt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function WEt(e){return BX.get(e)}function GEt(e,t){return e.observers.get(t)}function YEt(e,t){e.observers.delete(t.callback)}function KEt(e,t){t.unobserve()}function XEt(e,t){var n=[],r,i=WEt(e);if(!i)i=new HEt(e),BX.set(e,i);else{var s=GEt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ru(e),t){r.callback=t,r.next=null;var o=function(){Az(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Az(r),clearTimeout(r.next),YEt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new qEt(t,r)),r}function Az(e,t){t===void 0&&(t=!1);var n=BX.get(e.object);UX(n.value,e.object,e.patches,"",t),e.patches.length&&R6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function UX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=xz(t),o=xz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Ez(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?UX(c,f,n,r+"/"+x1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+x1(l),value:Ru(c)}),n.push({op:"replace",path:r+"/"+x1(l),value:Ru(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+x1(l),value:Ru(c)}),n.push({op:"remove",path:r+"/"+x1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Ez(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+x1(l),value:Ru(t[l])})}}}function FIe(e,t,n){n===void 0&&(n=!1);var r=[];return UX(e,t,r,"",n),r}const QEt=Object.freeze(Object.defineProperty({__proto__:null,compare:FIe,generate:Az,observe:XEt,unobserve:KEt},Symbol.toStringTag,{value:"Module"}));Object.assign({},VEt,QEt,{JsonPatchError:MIe,deepClone:Ru,escapePathComponent:x1,unescapePathComponent:$Ie});var lA=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(lA||{});function eD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=jIe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=eD(i,t);return R6(a,Ru(o),!0,!1).newDocument}function JEt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function N6({registry:e,initialState:t}){let n=!1;const r=gEt(),i=LEt(t);function s(c){return i.backend.nodes[c]}r.listen(lA.TRAVERSAL_START,()=>{n=!0}),r.listen(lA.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return eD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=eD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=FIe(y,f);if(JEt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=EEt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=eD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(lA.TRAVERSAL_START);const f=jIe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);ext(p,m)?sh(p)&&d.push(...p.sideEffects.undo):sh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(lA.TRAVERSAL_END)},undo(){const{current:c}=i;return sh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return BIe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function ZEt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;sh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)sh(r)&&(r=n[r.parent]),sh(i)&&(i=n[i.parent]);return r.id}function jIe(e,t,n){const r=ZEt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),sh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),sh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function ext(e,t){if(sh(e)&&e.parent===t.id)return!0;if(sh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function BIe(e,t){return{...e,children:e.children.map(n=>BIe(t[n],t)),name:`${e.label}`}}IEt();function txt(e){return e.length===2?$Et(e):e}class nS{static create(){return new nS}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:txt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),rh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var nxt="Expected a function",tfe=NaN,rxt="[object Symbol]",ixt=/^\s+|\s+$/g,sxt=/^[-+]0x[0-9a-f]+$/i,oxt=/^0b[01]+$/i,axt=/^0o[0-7]+$/i,uxt=parseInt,lxt=typeof Zs=="object"&&Zs&&Zs.Object===Object&&Zs,cxt=typeof self=="object"&&self&&self.Object===Object&&self,fxt=lxt||cxt||Function("return this")(),dxt=Object.prototype,hxt=dxt.toString,pxt=Math.max,mxt=Math.min,Pj=function(){return fxt.Date.now()};function gxt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(nxt);t=nfe(t)||0,Cz(n)&&(c=!!n.leading,f="maxWait"in n,s=f?pxt(nfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,A=i;return r=i=void 0,l=S,o=e.apply(A,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,A=S-l,C=t-T;return f?mxt(C,s-A):C}function g(S){var T=S-u,A=S-l;return u===void 0||T>=t||T<0||f&&A>=s}function y(){var S=Pj();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Pj())}function E(){var S=Pj(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function Cz(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function yxt(e){return!!e&&typeof e=="object"}function vxt(e){return typeof e=="symbol"||yxt(e)&&hxt.call(e)==rxt}function nfe(e){if(typeof e=="number")return e;if(vxt(e))return tfe;if(Cz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ixt,"");var n=oxt.test(e);return n||axt.test(e)?uxt(e.slice(2),n?2:8):sxt.test(e)?tfe:+e}var bxt=gxt;const yd=Ul(bxt);function UIe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>jx(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(hm,{children:_.jsx($s,{gap:3,children:_.jsx(et,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const _xt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:UIe},Symbol.toStringTag,{value:"Module"})),Dj=15;function zIe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=ms("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<Dj&&Math.abs(t(g[r.y])-p[1])<Dj);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:Dj,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const wxt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:zIe},Symbol.toStringTag,{value:"Module"})),mi={top:15,left:100,right:15,bottom:70};function Iz({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=gw(),[c]=gw(),[f]=gw(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-mi.left-mi.right,[l]),m=N.useMemo(()=>u-mi.top-mi.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Ux(tTe).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=N.useMemo(()=>{const I=s.map(L=>+L[i.x]).filter(L=>L!==null),[R,M]=Uae(I),P=s.map(L=>+L[i.y]).filter(L=>L!==null),[O,F]=Uae(P);return{xMin:R,xMax:M,yMin:O,yMax:F}},[s,i.x,i.y]),E=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?KSe([mi.left,p+mi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):_m([mi.left,p+mi.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=w-v;return m<=0?null:_m([m+mi.top,mi.top]).domain([v-I/10,w+I/10]).nice()},[m,w,v]),T=N.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const I=glt().extent([[mi.left,mi.top+m-5],[mi.left+p,mi.top+m+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],E,S,M.mode)}),R=ylt().extent([[mi.left-5,mi.top],[mi.left+5,mi.top+m]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],E,S,M.mode)});return c.current&&f.current&&(ms(f.current).call(R),ms(c.current).call(I),t.hasBrush||(ms(f.current).call(R.move,[S(w),S(v)]),ms(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{ms(f.current).call(R.move,[S(w),S(v)]),ms(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const I=vlt().extent([[mi.left,mi.top],[mi.left+p,mi.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],E,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(ms(a.current).call(I.move,null),e(null))});return ms(a.current).call(I),()=>{ms(a.current).call(I.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(w)],[E(b),S(v)]],E,S,null),()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),C=N.useMemo(()=>!E||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const M=i.dataType==="date"?E(new Date(I[i.x])):E(I[i.x]);return _.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:M,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return N.useEffect(()=>{r==="Axis Selection"&&uat(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Lp,{children:[_.jsxs($s,{children:[_.jsx(Nn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(wG,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs($s,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?_.jsxs("g",{children:[_.jsx(UIe,{yScale:S,label:i.y,horizontalPosition:mi.left,xRange:E.range()}),_.jsx(tK,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+mi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:E(I)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&S&&r==="Paintbrush Selection"?_.jsx(zIe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?_.jsxs(Lp,{style:{flexGrow:1},gap:50,children:[_.jsxs(Lp,{gap:0,children:[_.jsx(et,{children:i.x}),_.jsx(vO,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[E(I[0]),t.y1],[E(I[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(I=>({value:I,label:I})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Lp,{gap:0,children:[_.jsx(et,{children:i.y}),_.jsx(vO,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const Ext=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Iz,default:Iz},Symbol.toStringTag,{value:"Module"}));function rfe({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{d2(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?fwt(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=nS.create(),y=g.register("brush",(S,T)=>(S.all={brush:T},S)),v=g.register("brushMove",(S,T)=>(S.all={brush:T},S)),b=g.register("brushResize",(S,T)=>(S.all={brush:T},S)),w=g.register("brushClear",(S,T)=>(S.all={brush:T},S)),E=N6({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>yd(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const R=new Set(w);C=u.filter(_j(M=>R.has(M[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(_j(R=>new Date(R[e.x])>=new Date(E)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=T&&R[e.y]<=A)):C=u.filter(_j(R=>R[e.x]>=E&&R[e.x]<=S&&R[e.y]>=T&&R[e.y]<=A));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?_.jsxs(Lp,{gap:"xs",children:[_.jsx(Iz,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(j7,{data:o,parameters:e,barsTable:p})]}):_.jsx(Bm,{})}const xxt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:rfe,default:rfe},Symbol.toStringTag,{value:"Module"})),Sxt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ife=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},rS=e=>{const t=N.useRef(null),n=ife(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=ife({...n,width:n.width||r,height:n.height||s});return[t,a]},Txt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:rS},Symbol.toStringTag,{value:"Module"}));function VIe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const Axt=Object.freeze(Object.defineProperty({__proto__:null,Bars:VIe},Symbol.toStringTag,{value:"Module"}));function zX({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=_m().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const Cxt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:zX},Symbol.toStringTag,{value:"Module"}));function HIe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=QI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const Ixt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:HIe},Symbol.toStringTag,{value:"Module"})),kxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function Rxt({parameters:e}){const[n,r]=rS(kxt),i=QI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=_m().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(HIe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(zX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(VIe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const Nxt=Object.freeze(Object.defineProperty({__proto__:null,default:Rxt},Symbol.toStringTag,{value:"Module"}));function qIe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const Pxt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:qIe},Symbol.toStringTag,{value:"Module"}));function VX({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const Dxt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:VX},Symbol.toStringTag,{value:"Module"})),Oxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},$xt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=ASe().size([t-10,n-10]).padding(1.5),o=WL(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},Mxt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function Lxt({parameters:e}){const[t,n]=rS(Oxt),r=$xt(e,n.width,n.height),i=Mxt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(qIe,{data:r}),_.jsx(VX,{positions:i})]})})})}const Fxt=Object.freeze(Object.defineProperty({__proto__:null,default:Lxt},Symbol.toStringTag,{value:"Module"}));function WIe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const jxt=Object.freeze(Object.defineProperty({__proto__:null,Slices:WIe},Symbol.toStringTag,{value:"Module"}));function GIe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const Bxt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:GIe},Symbol.toStringTag,{value:"Module"})),Uxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},zxt=Lpt().value(e=>e.value),dT=150;function Vxt({parameters:e}){const[t,n]=rS(Uxt),r=zxt(e.data),i=r.map(o=>F7().innerRadius(0).outerRadius(dT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>F7().outerRadius(dT+10).innerRadius(dT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+dT,n.marginTop+dT].join(",")})`,children:[_.jsx(WIe,{arcs:i}),_.jsx(GIe,{positions:s})]})})})}const Hxt=Object.freeze(Object.defineProperty({__proto__:null,default:Vxt},Symbol.toStringTag,{value:"Module"}));function YIe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=_m().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const qxt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:YIe},Symbol.toStringTag,{value:"Module"}));function KIe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const Wxt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:KIe},Symbol.toStringTag,{value:"Module"})),Gxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function Yxt({parameters:e}){const[n,r]=rS(Gxt),i=QI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=_m().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return smt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(YIe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(zX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(KIe,{data:c,barWidth:f,yScale:s}),_.jsx(VX,{positions:d})]})]})})})}const Kxt=Object.freeze(Object.defineProperty({__proto__:null,default:Yxt},Symbol.toStringTag,{value:"Module"})),Xxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function Qxt({parameters:e,setAnswer:t}){const[n,r]=rS(Xxt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(300),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=nS.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=N6({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=ms("#movingCircle"),g=ms("#clickAccuracySvg"),y=e7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;ms(n.current).select("circle").transition().duration(y).ease(nlt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(Ee,{children:["Adjust speed (px/s):",_.jsx(yL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const Jxt=Object.freeze(Object.defineProperty({__proto__:null,default:Qxt},Symbol.toStringTag,{value:"Module"}));function sfe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function Zxt({parameters:e,setAnswer:t}){const n=Wm(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=bEe(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=E9e([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(ss,{children:[_.jsxs(ss.Col,{span:2,children:[_.jsx(sfe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(Nn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(hoe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(ss.Col,{span:2,children:[_.jsx(sfe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(Nn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(hoe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const eSt=Object.freeze(Object.defineProperty({__proto__:null,default:Zxt},Symbol.toStringTag,{value:"Module"})),tSt="_badge_1xjx6_1",nSt="_sourceItem_1xjx6_10",rSt="_sourceItemBadge_1xjx6_14",HX={badge:tSt,sourceItem:nSt,sourceItemBadge:rSt};function iSt({source:e,isActive:t,onActiveRefChange:n}){const r=Ht.useRef(null);return N.useEffect(()=>{var i;t&&((i=r.current)==null||i.scrollIntoView({behavior:"smooth",block:"center"}),n(r.current))},[e.id,t,n]),_.jsx(et,{className:HX.sourceItem,ref:r,component:"span",px:5,children:_.jsx(et,{component:"span",bg:t?"blue.3":"transparent",dangerouslySetInnerHTML:{__html:e.text}})})}const sSt=Ht.memo(iSt);function XIe({sourceList:e,activeSourceId:t,onSourceBadgePositionChange:n}){var c;const r=Ht.useRef(null),i=Ht.useRef(null),[s,o]=Ht.useState(0),[a,u]=Ht.useState(0);N.useEffect(()=>{if(r.current){const f=r.current,d=()=>{var h,p;u((f==null?void 0:f.getBoundingClientRect().left)||0),o(((h=i.current)==null?void 0:h.getBoundingClientRect().top)||0),n((f==null?void 0:f.getBoundingClientRect().left)||0,((p=i.current)==null?void 0:p.getBoundingClientRect().top)||0)};return r.current.addEventListener("scroll",d),()=>{f.removeEventListener("scroll",d)}}return()=>{}},[r,n]);const l=N.useCallback(f=>{i.current=f},[]);return _.jsxs(Kf,{style:{height:"calc(100vh - 110px)"},viewportRef:r,children:[_.jsx(oi,{order:2,children:"Source Document"}),e.map((f,d)=>_.jsx(sSt,{source:f,isActive:f.id===t,onActiveRefChange:l},d)),t&&_.jsxs(_.Fragment,{children:[_.jsx(yc,{className:HX.sourceItemBadge,color:"blue.5",style:{position:"fixed",left:a-10,top:s,transform:"translate(-100%, 0)"},children:t},t),_.jsx("div",{style:{position:"fixed",left:a-10,top:s+16,backgroundColor:"var(--mantine-color-blue-5)",height:2,width:((c=r.current)==null?void 0:c.clientWidth)||0}})]})]})}const oSt=Object.freeze(Object.defineProperty({__proto__:null,default:XIe},Symbol.toStringTag,{value:"Module"}));function aSt({sentence:e,src:t,idx:n,onSourceClick:r,activeSourceId:i}){const s=Ht.useRef(null);return _.jsxs(Ht.Fragment,{children:[_.jsx(yc,{ref:s,className:HX.badge,onClick:()=>{r(s.current,e.id,t)},style:{cursor:"pointer"},color:i===t?"blue.5":"gray.5",children:t}),n<e.sources.length-1&&", "]},n)}function QIe({sentences:e,onSourceClick:t,activeSourceId:n,onSummaryBadgePositionChange:r}){const i=Ht.useRef(null),s=Ht.useRef(null),[o,a]=Ht.useState(0),[u,l]=Ht.useState(0),[c,f]=Ht.useState(0);N.useEffect(()=>{if(i.current){const h=i.current,p=()=>{var m,g,y,v;a(((m=s.current)==null?void 0:m.getBoundingClientRect().top)||0),f(((g=s.current)==null?void 0:g.getBoundingClientRect().left)||0),l(((y=i.current)==null?void 0:y.getBoundingClientRect().right)||0),r(((v=s.current)==null?void 0:v.getBoundingClientRect().top)||0)};return i.current.addEventListener("scroll",p),()=>{h.removeEventListener("scroll",p)}}return()=>{}},[i,r]);const d=e.map((h,p)=>{const m=/^(.*?)([.?!])?$/,g=h.text.match(m),y=g?g[1]:h.text,v=g?g[2]:"",b=(w,E,S)=>{var T;t(E,S),r((w==null?void 0:w.getBoundingClientRect().top)||0),s.current=w,a((w==null?void 0:w.getBoundingClientRect().top)||0),f((w==null?void 0:w.getBoundingClientRect().left)||0),l(((T=i.current)==null?void 0:T.getBoundingClientRect().right)||0)};return _.jsxs(Ht.Fragment,{children:[y," ",h.sources.length>0&&_.jsxs("span",{children:["[",h.sources.map((w,E)=>_.jsx(aSt,{sentence:h,src:w,idx:E,onSourceClick:b,activeSourceId:n},E)),"]"]}),v," "]},p)});return _.jsxs(Kf,{style:{height:"calc(100vh - 110px)"},viewportRef:i,children:[_.jsx(oi,{order:2,mb:16,children:"LLM-Generated Summary"}),_.jsx(et,{children:d}),_.jsx("div",{style:{position:"fixed",top:o+18,left:c+5,backgroundColor:"var(--mantine-color-blue-5)",height:2,width:u-c+35}})]})}const uSt=Object.freeze(Object.defineProperty({__proto__:null,default:QIe},Symbol.toStringTag,{value:"Module"}));function lSt({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState([]),[o,a]=N.useState([]),[u,l]=N.useState(0),[c,f]=N.useState(0),[d,h]=N.useState(0),{actions:p,trrack:m}=N.useMemo(()=>{const b=nS.create(),w=b.register("mouseHover",(S,T)=>(S.activeSummaryId=T.summaryId,S.activeSourceId=T.sourceId,S)),E=N6({registry:b,initialState:{activeSummaryId:null,activeSourceId:null}});return{actions:{mouseHoverAction:w},trrack:E}},[]);N.useEffect(()=>{d2(`./data/${e.datasetSummary}.csv`).then(b=>{const w=b.map(E=>({id:String(E.id),text:E.text??"",sources:(E.sources??"").split(",").map(S=>S.trim())}));s(w)})},[e]),N.useEffect(()=>{d2(`./data/${e.datasetSource}.csv`).then(b=>{const w=b.map(E=>({id:String(E.id),text:E.text??"",sources:(E.sources??"").split(",").map(S=>S.trim())}));a(w)})},[e]),N.useEffect(()=>{},[]);const g=(b,w)=>{m.apply("Clicked",p.mouseHoverAction({summaryId:b,sourceId:w})),t({status:!0,provenanceGraph:m.graph.backend,answers:{}}),r(w)},y=b=>{l(b)},v=(b,w)=>{f(w),h(b)};return _.jsxs(_.Fragment,{children:[_.jsxs(ss,{gutter:50,children:[_.jsx(ss.Col,{span:6,children:_.jsx(QIe,{sentences:i,onSummaryBadgePositionChange:y,onSourceClick:g,activeSourceId:n})}),_.jsx(ss.Col,{span:6,children:_.jsx(XIe,{sourceList:o,onSourceBadgePositionChange:v,activeSourceId:n})})]}),n&&_.jsx("div",{style:{position:"fixed",top:(u>c?c:u)+18,left:d-10,width:2,height:Math.abs(u-c)-(u>c?-2:2),backgroundColor:"var(--mantine-color-blue-5)"}})]})}const cSt=Object.freeze(Object.defineProperty({__proto__:null,default:lSt},Symbol.toStringTag,{value:"Module"})),fSt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),dSt="_badge_1xjx6_1",hSt="_sourceItem_1xjx6_10",pSt="_sourceItemBadge_1xjx6_14",qX={badge:dSt,sourceItem:hSt,sourceItemBadge:pSt};function mSt({source:e,isActive:t,onActiveRefChange:n}){const r=Ht.useRef(null);return N.useEffect(()=>{var i;t&&((i=r.current)==null||i.scrollIntoView({behavior:"smooth",block:"center"}),n(r.current))},[e.id,t,n]),_.jsx(et,{className:qX.sourceItem,ref:r,component:"span",px:5,children:_.jsx(et,{component:"span",bg:t?"blue.3":"transparent",dangerouslySetInnerHTML:{__html:e.text}})})}const gSt=Ht.memo(mSt);function JIe({sourceList:e,activeSourceId:t,onSourceBadgePositionChange:n}){var c;const r=Ht.useRef(null),i=Ht.useRef(null),[s,o]=Ht.useState(0),[a,u]=Ht.useState(0);N.useEffect(()=>{if(r.current){const f=r.current,d=()=>{var h,p;u((f==null?void 0:f.getBoundingClientRect().left)||0),o(((h=i.current)==null?void 0:h.getBoundingClientRect().top)||0),n((f==null?void 0:f.getBoundingClientRect().left)||0,((p=i.current)==null?void 0:p.getBoundingClientRect().top)||0)};return r.current.addEventListener("scroll",d),()=>{f.removeEventListener("scroll",d)}}return()=>{}},[r,n]);const l=N.useCallback(f=>{i.current=f},[]);return _.jsxs(Kf,{style:{height:"calc(100vh - 110px)"},viewportRef:r,children:[_.jsx(oi,{order:2,children:"Source Document"}),e.map((f,d)=>_.jsx(gSt,{source:f,isActive:f.id===t,onActiveRefChange:l},d)),t&&_.jsxs(_.Fragment,{children:[_.jsx(yc,{className:qX.sourceItemBadge,color:"blue.5",style:{position:"fixed",left:a-10,top:s,transform:"translate(-100%, 0)"},children:t},t),_.jsx("div",{style:{position:"fixed",left:a-10,top:s+16,backgroundColor:"var(--mantine-color-blue-5)",height:2,width:((c=r.current)==null?void 0:c.clientWidth)||0}})]})]})}const ySt=Object.freeze(Object.defineProperty({__proto__:null,default:JIe},Symbol.toStringTag,{value:"Module"}));function vSt({sentence:e,src:t,idx:n,onSourceClick:r,activeSourceId:i}){const s=Ht.useRef(null);return _.jsxs(Ht.Fragment,{children:[_.jsx(yc,{ref:s,className:qX.badge,onClick:()=>{r(s.current,e.id,t)},style:{cursor:"pointer"},color:i===t?"blue.5":"gray.5",children:t}),n<e.sources.length-1&&", "]},n)}function ZIe({sentences:e,onSourceClick:t,activeSourceId:n,onSummaryBadgePositionChange:r}){const i=Ht.useRef(null),s=Ht.useRef(null),[o,a]=Ht.useState(0),[u,l]=Ht.useState(0),[c,f]=Ht.useState(0);N.useEffect(()=>{if(i.current){const h=i.current,p=()=>{var m,g,y,v;a(((m=s.current)==null?void 0:m.getBoundingClientRect().top)||0),f(((g=s.current)==null?void 0:g.getBoundingClientRect().left)||0),l(((y=i.current)==null?void 0:y.getBoundingClientRect().right)||0),r(((v=s.current)==null?void 0:v.getBoundingClientRect().top)||0)};return i.current.addEventListener("scroll",p),()=>{h.removeEventListener("scroll",p)}}return()=>{}},[i,r]);const d=e.map((h,p)=>{const m=/^(.*?)([.?!])?$/,g=h.text.match(m),y=g?g[1]:h.text,v=g?g[2]:"",b=(w,E,S)=>{var T;t(E,S),r((w==null?void 0:w.getBoundingClientRect().top)||0),s.current=w,a((w==null?void 0:w.getBoundingClientRect().top)||0),f((w==null?void 0:w.getBoundingClientRect().left)||0),l(((T=i.current)==null?void 0:T.getBoundingClientRect().right)||0)};return _.jsxs(Ht.Fragment,{children:[y," ",h.sources.length>0&&_.jsxs("span",{children:["[",h.sources.map((w,E)=>_.jsx(vSt,{sentence:h,src:w,idx:E,onSourceClick:b,activeSourceId:n},E)),"]"]}),v," "]},p)});return _.jsxs(Kf,{style:{height:"calc(100vh - 110px)"},viewportRef:i,children:[_.jsx(oi,{order:2,mb:16,children:"LLM-Generated Summary"}),_.jsx(et,{children:d}),_.jsx("div",{style:{position:"fixed",top:o+18,left:c+5,backgroundColor:"var(--mantine-color-blue-5)",height:2,width:u-c+35}})]})}const bSt=Object.freeze(Object.defineProperty({__proto__:null,default:ZIe},Symbol.toStringTag,{value:"Module"}));function _St({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState([]),[o,a]=N.useState([]),[u,l]=N.useState(0),[c,f]=N.useState(0),[d,h]=N.useState(0),{actions:p,trrack:m}=N.useMemo(()=>{const b=nS.create(),w=b.register("mouseHover",(S,T)=>(S.activeSummaryId=T.summaryId,S.activeSourceId=T.sourceId,S)),E=N6({registry:b,initialState:{activeSummaryId:null,activeSourceId:null}});return{actions:{mouseHoverAction:w},trrack:E}},[]);N.useEffect(()=>{d2(`./data/${e.datasetSummary}.csv`).then(b=>{const w=b.map(E=>({id:String(E.id),text:E.text??"",sources:(E.sources??"").split(",").map(S=>S.trim())}));s(w)})},[e]),N.useEffect(()=>{d2(`./data/${e.datasetSource}.csv`).then(b=>{const w=b.map(E=>({id:String(E.id),text:E.text??"",sources:(E.sources??"").split(",").map(S=>S.trim())}));a(w)})},[e]),N.useEffect(()=>{},[]);const g=(b,w)=>{m.apply("Clicked",p.mouseHoverAction({summaryId:b,sourceId:w})),t({status:!0,provenanceGraph:m.graph.backend,answers:{}}),r(w)},y=b=>{l(b)},v=(b,w)=>{f(w),h(b)};return _.jsxs(_.Fragment,{children:[_.jsxs(ss,{gutter:50,children:[_.jsx(ss.Col,{span:6,children:_.jsx(ZIe,{sentences:i,onSummaryBadgePositionChange:y,onSourceClick:g,activeSourceId:n})}),_.jsx(ss.Col,{span:6,children:_.jsx(JIe,{sourceList:o,onSourceBadgePositionChange:v,activeSourceId:n})})]}),n&&_.jsx("div",{style:{position:"fixed",top:(u>c?c:u)+18,left:d-10,width:2,height:Math.abs(u-c)-(u>c?-2:2),backgroundColor:"var(--mantine-color-blue-5)"}})]})}const wSt=Object.freeze(Object.defineProperty({__proto__:null,default:_St},Symbol.toStringTag,{value:"Module"})),ESt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ofe=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":umt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":xxt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":wxt,"../public/demo-brush-interactions/assets/Scatter.tsx":Ext,"../public/demo-brush-interactions/assets/XAxisBar.tsx":omt,"../public/demo-brush-interactions/assets/YAxis.tsx":_xt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":amt,"../public/demo-brush-interactions/assets/types.ts":Sxt,"../public/demo-cleveland/assets/BarChart.tsx":Nxt,"../public/demo-cleveland/assets/BubbleChart.tsx":Fxt,"../public/demo-cleveland/assets/PieChart.tsx":Hxt,"../public/demo-cleveland/assets/StackedBarChart.tsx":Kxt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":Axt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":Pxt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":Dxt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":qxt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":Cxt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":Ixt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":jxt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":Bxt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":Wxt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":Txt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":Jxt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":eSt,"../public/sumsifter-memory-study-p1/Source.tsx":oSt,"../public/sumsifter-memory-study-p1/Summary.tsx":uSt,"../public/sumsifter-memory-study-p1/SummaryApp.tsx":cSt,"../public/sumsifter-memory-study-p1/types.ts":fSt,"../public/sumsifter/Source.tsx":ySt,"../public/sumsifter/Summary.tsx":bSt,"../public/sumsifter/SummaryApp.tsx":wSt,"../public/sumsifter/types.ts":ESt});function xSt({currentConfig:e}){const t=qm(),n=Wm(),r=`../public/${e.path}`,i=r in ofe?ofe[r].default:null,s=Bh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=jh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(Nv,{path:e.path})})}function SSt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await hY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ga,{text:t}):_.jsx(Nv,{path:e.path})}const TSt={},ASt=Object.freeze(Object.defineProperty({__proto__:null,default:TSt},Symbol.toStringTag,{value:"Module"})),CSt=j5e(ASt);var ISt=CSt;function kSt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function RSt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function NSt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function PSt(e){return e.__COMMENTS__}function DSt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var P6={EOL:ISt.EOL||`
`,tryParseNumber:kSt,createComment:RSt,removeComment:NSt,getComment:PSt,forceComment:DSt},OSt="3.2.1";function $St(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return afe}else if(e.length===0)return afe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return LSt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),MSt.bind(null,n)}function MSt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function afe(){}function LSt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function eke(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}eke.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function tke(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}tke.description="parse hexadecimal numbers prefixed with 0x";function nke(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}nke.description="support ISO dates";var WX={loadDsf:$St,std:{math:eke,hex:tke,date:nke}},FSt=function(e,t){var n=P6,r=WX,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(O){return O==="{"||O==="}"||O==="["||O==="]"||O===","||O===":"}function d(O){var F,L=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,L++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error(O+" at line "+B+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(O){return i.charAt(s+O)}function m(O){for(var F="",L=o;h();){if(o===L)return h(),O&&L==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),D;o>="0"&&o<="9"?D=H-48:o>="a"&&o<="f"?D=H-97+10:o>="A"&&o<="F"?D=H-65+10:d("Bad \\u char "+o),B=B*16+D}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var O="",F=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function U(){for(var H=L;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return O.slice(-1)===`
`&&(O=O.slice(0,-1)),O;continue}else for(;F>0;)O+="'",F--;o===`
`?(O+=`
`,h(),U()):(o!=="\r"&&(O+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var O="",F=s,L=-1;;){if(o===":")return O?L>=0&&L!==O.length&&(s=F+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),O;o<=" "?o?L<0&&(L=O.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):O+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var O=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=O[0];switch(L){case"f":if(O.trim()==="false")return!1;break;case"n":if(O.trim()==="null")return null;break;case"t":if(O.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber(O);if(B!==void 0)return B}}if(F){O=O.trim();var U=l(O);return U!==void 0?U:O}}O+=o}}function w(O,F){var L;for(O--,L=s-2;L>O&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr(O,L-O+1);for(L=0;L<B.length;L++)if(B[L]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E(O){function F(B,U){var H,D,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=F(B[D],U)||W)}return W}function L(B){var U=F(O,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function S(){var O=[],F,L,B;try{if(u&&(F=n.createComment(O,{a:[]})),h(),L=s,v(),F&&(B=w(L,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),O;for(;o;){if(O.push(A()),L=s,v(),o===","&&(h(),L=s,v()),F){var U=w(L);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),O;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E(O),H}}function T(O){var F="",L={},B,U,H;try{if(u&&(B=n.createComment(L,{c:{},o:[]})),O?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!O)return B&&(B.e=[H]),h(),L;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[F]=A(),U=s,v(),o===","&&(h(),U=s,v()),B){var D=w(U);B.c[F]=[H||"",D[0]||""],H=D[1],B.o.push(F)}if(o==="}"&&!O)return h(),B&&(B.c[F][1]+=H||""),L;v()}if(O)return L;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(L),z}}function A(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function C(O,F){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(L).join(`
`);if(U||B){var H=n.createComment(O,n.getComment(O));H.r=[B,U]}}return O}function I(){v();var O=u?w(1):null;switch(o){case"{":return C(T(),O);case"[":return C(S(),O);default:return C(A(),O)}}function R(){v();var O=u?w(1):null;switch(o){case"{":return C(T(),O);case"[":return C(S(),O)}try{return C(T(!0),O)}catch(F){c();try{return C(A(),O)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var M=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,M=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(M,"parse"),i=e,c(),P?R():I()},jSt=function(e,t){var n=P6,r=WX,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="-­؀-؄܏឴឵‌-‏\u2028- ⁠-⁯\uFEFF￰-￿",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,M="",P=0;function O(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(S,function(j){var q=I[j];return typeof q=="string"?O(g.esc,q):O(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function L(W,j,q,G){return W?(T.lastIndex=0,C.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(S.lastIndex=0,A.lastIndex=0,S.test(W)?!A.test(W)&&!G&&d?B(W,j):O(g.qstr,F(W)):O(g.qstr,W)):O(g.str,W)):O(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return O(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||R.test(W)?(S.lastIndex=0,O(g.qkey,S.test(W)?F(W):W)):O(g.key,W):'""'}function H(W,j,q,G){function ne(pn){return pn&&pn[pn[0]==="\r"?1:0]===`
`}function ce(pn){return pn&&!ne(pn)}function de(pn,Tn,nr){if(!pn)return"";pn=n.forceComment(pn);var rr,Fo=pn.length;for(rr=0;rr<Fo&&pn[rr]<=" ";rr++);return nr&&rr>0&&(pn=pn.substr(rr)),rr<Fo?Tn+O(g.rem,pn):pn}var he=w(W);if(he!==void 0)return O(g.dsf,he);switch(typeof W){case"string":return L(W,M,j,G);case"number":return isFinite(W)?O(g.num,String(W)):O(g.lit,"null");case"boolean":return O(g.lit,String(W));case"object":if(!W)return O(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",ve=M;M+=o;var Ke=s+ve,Ue=s+M,gt=q||u?"":Ke,it=[],be,ke=f?[]:null,ze=c,ct=d,Dt=h?"":g.com[0],We=0,me,dt,yt,pe,Ce,He,ut,_t,Ln;if(Ie){for(me=0,dt=W.length;me<dt;me++){if(be=me<dt-1,ye?(He=ye.a[me]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),P=0,pe=W[me],it.push(H(pe,ye?ut:!1,!0)+(be?h:"")),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,ke.push(H(pe,!1,!0)+(be?g.com[0]:"")),c=ze,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(be?Dt:""));break}be&&(P+=g.com[0].length-g.com[2]),We+=P}ye&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut))}dt===0?ye&&ye.e&&it.push(de(ye.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=O(g.arr,""):(_t=gt+O(g.arr,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=O(g.arr,Ln))))}else{var Tr=ye?ye.o.slice():[],Fn=[];for(yt in W)Object.prototype.hasOwnProperty.call(W,yt)&&Tr.indexOf(yt)<0&&Fn.push(yt);m&&Fn.sort();var cr=Tr.concat(Fn);for(me=0,dt=cr.length;me<dt;me++)if(be=me<dt-1,yt=cr[me],ye?(He=ye.c[yt]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),P=0,pe=W[yt],Ce=H(pe,ye&&ut),it.push(U(yt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(be?h:"")),ye&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,Ce=H(pe,!1),c=ze,d=ct,ke.push(U(yt)+g.col[0]+" "+Ce+(be?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(be?Dt:""));break}P+=g.col[0].length-g.col[2],be&&(P+=g.com[0].length-g.com[2]),We+=P}dt===0?ye&&ye.e&&it.push(de(ye.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=O(g.obj,""):(_t=gt+O(g.obj,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=O(g.obj,Ln))))}return M=ve,_t}}w=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=H(e,null,!0,!0),z&&(D+=z[1]||""),D},Ow=P6;function sC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function kz(e,t){if(!(e===null||typeof e!="object")){var n=Ow.getComment(e);n&&Ow.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)ufe(o.a,r,n.a[r],kz(e[r]))&&(s=!0);!s&&n.e&&(o.e=sC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];ufe(o.s,l,n.c[l],kz(e[l]))&&(s=!0)}!s&&n.e&&(o.e=sC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=sC(n.r[0],n.r[1])),s?o:void 0}}function BSt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function USt(e,t){var n=[];if(Rz(e,t,n,[]),n.length>0){var r=r$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+BSt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),r$(t,r,1)}}function ufe(e,t,n,r){var i=sC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function oC(e,t){var n=sC(t.b,t.a);return n.path=e,n}function aC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(oC(s,o)),aC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(oC(u,l)),aC(l.x,t,u))});e.e&&t.push(oC(n,e.e))}}function Rz(e,t,n,r){if(e){if(t===null||typeof t!="object"){aC(e,n,r);return}var i,s=Ow.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],Rz(u.x,t[i],n,l)):(n.push(oC(l,u)),aC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],Rz(d.x,t[c],n,f))):d&&(n.push(oC(f,d)),aC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function r$(e,t,n){var r=Ow.createComment(e,Ow.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Ow.forceComment(t)),r.r[n]||""}var zSt={extract:function(e){return kz(e,!0)},merge:USt,header:function(e,t){return r$(e,t,0)},footer:function(e,t){return r$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var lfe=P6,VSt=OSt,cfe=FSt,ffe=jSt,HSt=zSt,qSt=WX,GX={parse:cfe,stringify:ffe,endOfLine:function(){return lfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(lfe.EOL=e)},version:VSt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,cfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,ffe(e,t)}},comments:HSt,dsf:qSt.std},Nz={exports:{}},rke={},Pf={},ME={},hk={},Dn={},O2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(O2);var Pz={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=O2;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Pz);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=O2,n=Pz;var r=O2;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Pz;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=O(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=O(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>M(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=O(this.condition,q,G),this}get names(){const q=super.names;return P(q,this.condition),this.else&&M(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=O(this.iteration,q,G),this}get names(){return M(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=P(super.names,this.from);return P(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=O(this.iterable,q,G),this}get names(){return M(super.names,this.iterable.names)}}class S extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class A extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&M(q,this.catch.names),this.finally&&M(q,this.finally.names),q}}class C extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}C.kind="catch";class I extends p{render(q){return"finally"+super.render(q)}}I.kind="finally";class R{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ye=>{this.var(de,(0,t._)`${he}[${ye}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new T;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new A;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new C(de),G(de)}return ne&&(this._currNode=ce.finally=new I,this.code(ne)),this._endBlockNode(C,I)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new S(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=R;function M(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function P(j,q){return q instanceof t._CodeOrName?M(j,q.names):j}function O(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function L(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=L;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function D(...j){return j.reduce(H)}e.or=D;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Dn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Wr=Dn,WSt=O2;function GSt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=GSt;function YSt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(ike(e,t),!ske(t,e.self.RULES.all))}wt.alwaysValidSchema=YSt;function ike(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||uke(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=ike;function ske(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=ske;function KSt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=KSt;function XSt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Wr._)`${n}`}return(0,Wr._)`${e}${t}${(0,Wr.getProperty)(r)}`}wt.schemaRefOrVal=XSt;function QSt(e){return oke(decodeURIComponent(e))}wt.unescapeFragment=QSt;function JSt(e){return encodeURIComponent(YX(e))}wt.escapeFragment=JSt;function YX(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=YX;function oke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=oke;function ZSt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=ZSt;function dfe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Wr.Name?(s instanceof Wr.Name?e(i,s,o):t(i,s,o),o):s instanceof Wr.Name?(t(i,o,s),s):n(s,o);return a===Wr.Name&&!(u instanceof Wr.Name)?r(i,u):u}}wt.mergeEvaluated={props:dfe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Wr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Wr._)`${n} || {}`).code((0,Wr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Wr._)`${n} || {}`),KX(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:ake}),items:dfe({mergeNames:(e,t,n)=>e.if((0,Wr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Wr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Wr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Wr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function ake(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Wr._)`{}`);return t!==void 0&&KX(e,n,t),n}wt.evaluatedPropsToName=ake;function KX(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Wr._)`${t}${(0,Wr.getProperty)(r)}`,!0))}wt.setEvaluated=KX;const hfe={};function eTt(e,t){return e.scopeValue("func",{ref:t,code:hfe[t.code]||(hfe[t.code]=new WSt._Code(t.code))})}wt.useFunc=eTt;var Dz;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Dz||(wt.Type=Dz={}));function tTt(e,t,n){if(e instanceof Wr.Name){const r=t===Dz.Num;return n?r?(0,Wr._)`"[" + ${e} + "]"`:(0,Wr._)`"['" + ${e} + "']"`:r?(0,Wr._)`"/" + ${e}`:(0,Wr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Wr.getProperty)(e).toString():"/"+YX(e)}wt.getErrorPath=tTt;function uke(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=uke;var qh={};Object.defineProperty(qh,"__esModule",{value:!0});const Xo=Dn,nTt={data:new Xo.Name("data"),valCxt:new Xo.Name("valCxt"),instancePath:new Xo.Name("instancePath"),parentData:new Xo.Name("parentData"),parentDataProperty:new Xo.Name("parentDataProperty"),rootData:new Xo.Name("rootData"),dynamicAnchors:new Xo.Name("dynamicAnchors"),vErrors:new Xo.Name("vErrors"),errors:new Xo.Name("errors"),this:new Xo.Name("this"),self:new Xo.Name("self"),scope:new Xo.Name("scope"),json:new Xo.Name("json"),jsonPos:new Xo.Name("jsonPos"),jsonLen:new Xo.Name("jsonLen"),jsonPart:new Xo.Name("jsonPart")};qh.default=nTt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Dn,n=wt,r=qh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,A=f(g,y,v);b??(S||T)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:S}=b,T=f(g,y,v);u(w,T),E||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:S,it:T}=g,{opts:A,propertyName:C,topSchemaRef:I,schemaPath:R}=T;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(hk);Object.defineProperty(ME,"__esModule",{value:!0});ME.boolOrEmptySchema=ME.topBoolOrEmptySchema=void 0;const rTt=hk,iTt=Dn,sTt=qh,oTt={message:"boolean schema is false"};function aTt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?lke(e,!1):typeof n=="object"&&n.$async===!0?t.return(sTt.default.data):(t.assign((0,iTt._)`${r}.errors`,null),t.return(!0))}ME.topBoolOrEmptySchema=aTt;function uTt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),lke(e)):n.var(t,!0)}ME.boolOrEmptySchema=uTt;function lke(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,rTt.reportError)(i,oTt,void 0,t)}var xs={},Vv={};Object.defineProperty(Vv,"__esModule",{value:!0});Vv.getRules=Vv.isJSONType=void 0;const lTt=["string","number","integer","boolean","null","object","array"],cTt=new Set(lTt);function fTt(e){return typeof e=="string"&&cTt.has(e)}Vv.isJSONType=fTt;function dTt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Vv.getRules=dTt;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.shouldUseRule=Jp.shouldUseGroup=Jp.schemaHasRulesForType=void 0;function hTt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&cke(e,r)}Jp.schemaHasRulesForType=hTt;function cke(e,t){return t.rules.some(n=>fke(e,n))}Jp.shouldUseGroup=cke;function fke(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Jp.shouldUseRule=fke;Object.defineProperty(xs,"__esModule",{value:!0});xs.reportTypeError=xs.checkDataTypes=xs.checkDataType=xs.coerceAndCheckDataType=xs.getJSONTypes=xs.getSchemaTypes=xs.DataType=void 0;const pTt=Vv,mTt=Jp,gTt=hk,_n=Dn,dke=wt;var $w;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})($w||(xs.DataType=$w={}));function yTt(e){const t=hke(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}xs.getSchemaTypes=yTt;function hke(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(pTt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}xs.getJSONTypes=hke;function vTt(e,t){const{gen:n,data:r,opts:i}=e,s=bTt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,mTt.schemaHasRulesForType)(e,t[0]));if(o){const a=XX(t,r,i.strictNumbers,$w.Wrong);n.if(a,()=>{s.length?_Tt(e,t,s):QX(e)})}return o}xs.coerceAndCheckDataType=vTt;const pke=new Set(["string","number","integer","boolean","null"]);function bTt(e,t){return t?e.filter(n=>pke.has(n)||t==="array"&&n==="array"):[]}function _Tt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,_n._)`typeof ${i}`),a=r.let("coerced",(0,_n._)`undefined`);s.coerceTypes==="array"&&r.if((0,_n._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,_n._)`${i}[0]`).assign(o,(0,_n._)`typeof ${i}`).if(XX(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,_n._)`${a} !== undefined`);for(const l of n)(pke.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),QX(e),r.endIf(),r.if((0,_n._)`${a} !== undefined`,()=>{r.assign(i,a),wTt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,_n._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,_n._)`"" + ${i}`).elseIf((0,_n._)`${i} === null`).assign(a,(0,_n._)`""`);return;case"number":r.elseIf((0,_n._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,_n._)`+${i}`);return;case"integer":r.elseIf((0,_n._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,_n._)`+${i}`);return;case"boolean":r.elseIf((0,_n._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,_n._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,_n._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,_n._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,_n._)`[${i}]`)}}}function wTt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,_n._)`${t} !== undefined`,()=>e.assign((0,_n._)`${t}[${n}]`,r))}function Oz(e,t,n,r=$w.Correct){const i=r===$w.Correct?_n.operators.EQ:_n.operators.NEQ;let s;switch(e){case"null":return(0,_n._)`${t} ${i} null`;case"array":s=(0,_n._)`Array.isArray(${t})`;break;case"object":s=(0,_n._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,_n._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,_n._)`typeof ${t} ${i} ${e}`}return r===$w.Correct?s:(0,_n.not)(s);function o(a=_n.nil){return(0,_n.and)((0,_n._)`typeof ${t} == "number"`,a,n?(0,_n._)`isFinite(${t})`:_n.nil)}}xs.checkDataType=Oz;function XX(e,t,n,r){if(e.length===1)return Oz(e[0],t,n,r);let i;const s=(0,dke.toHash)(e);if(s.array&&s.object){const o=(0,_n._)`typeof ${t} != "object"`;i=s.null?o:(0,_n._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=_n.nil;s.number&&delete s.integer;for(const o in s)i=(0,_n.and)(i,Oz(o,t,n,r));return i}xs.checkDataTypes=XX;const ETt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,_n._)`{type: ${e}}`:(0,_n._)`{type: ${t}}`};function QX(e){const t=xTt(e);(0,gTt.reportError)(t,ETt)}xs.reportTypeError=QX;function xTt(e){const{gen:t,data:n,schema:r}=e,i=(0,dke.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var D6={};Object.defineProperty(D6,"__esModule",{value:!0});D6.assignDefaults=void 0;const d_=Dn,STt=wt;function TTt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)pfe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>pfe(e,s,i.default))}D6.assignDefaults=TTt;function pfe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,d_._)`${s}${(0,d_.getProperty)(t)}`;if(i){(0,STt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,d_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,d_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,d_._)`${a} = ${(0,d_.stringify)(n)}`)}var Gd={},Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.validateUnion=Rn.validateArray=Rn.usePattern=Rn.callValidateCode=Rn.schemaProperties=Rn.allSchemaProperties=Rn.noPropertyInData=Rn.propertyInData=Rn.isOwnProperty=Rn.hasPropFunc=Rn.reportMissingProp=Rn.checkMissingProp=Rn.checkReportMissingProp=void 0;const ai=Dn,JX=wt,hg=qh,ATt=wt;function CTt(e,t){const{gen:n,data:r,it:i}=e;n.if(eQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ai._)`${t}`},!0),e.error()})}Rn.checkReportMissingProp=CTt;function ITt({gen:e,data:t,it:{opts:n}},r,i){return(0,ai.or)(...r.map(s=>(0,ai.and)(eQ(e,t,s,n.ownProperties),(0,ai._)`${i} = ${s}`)))}Rn.checkMissingProp=ITt;function kTt(e,t){e.setParams({missingProperty:t},!0),e.error()}Rn.reportMissingProp=kTt;function mke(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ai._)`Object.prototype.hasOwnProperty`})}Rn.hasPropFunc=mke;function ZX(e,t,n){return(0,ai._)`${mke(e)}.call(${t}, ${n})`}Rn.isOwnProperty=ZX;function RTt(e,t,n,r){const i=(0,ai._)`${t}${(0,ai.getProperty)(n)} !== undefined`;return r?(0,ai._)`${i} && ${ZX(e,t,n)}`:i}Rn.propertyInData=RTt;function eQ(e,t,n,r){const i=(0,ai._)`${t}${(0,ai.getProperty)(n)} === undefined`;return r?(0,ai.or)(i,(0,ai.not)(ZX(e,t,n))):i}Rn.noPropertyInData=eQ;function gke(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Rn.allSchemaProperties=gke;function NTt(e,t){return gke(t).filter(n=>!(0,JX.alwaysValidSchema)(e,t[n]))}Rn.schemaProperties=NTt;function PTt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ai._)`${e}, ${t}, ${r}${i}`:t,f=[[hg.default.instancePath,(0,ai.strConcat)(hg.default.instancePath,s)],[hg.default.parentData,o.parentData],[hg.default.parentDataProperty,o.parentDataProperty],[hg.default.rootData,hg.default.rootData]];o.opts.dynamicRef&&f.push([hg.default.dynamicAnchors,hg.default.dynamicAnchors]);const d=(0,ai._)`${c}, ${n.object(...f)}`;return u!==ai.nil?(0,ai._)`${a}.call(${u}, ${d})`:(0,ai._)`${a}(${d})`}Rn.callValidateCode=PTt;const DTt=(0,ai._)`new RegExp`;function OTt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ai._)`${i.code==="new RegExp"?DTt:(0,ATt.useFunc)(e,i)}(${n}, ${r})`})}Rn.usePattern=OTt;function $Tt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ai._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:JX.Type.Num},s),t.if((0,ai.not)(s),a)})}}Rn.validateArray=$Tt;function MTt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,JX.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ai._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ai.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Rn.validateUnion=MTt;Object.defineProperty(Gd,"__esModule",{value:!0});Gd.validateKeywordUsage=Gd.validSchemaType=Gd.funcKeywordCode=Gd.macroKeywordCode=void 0;const Da=Dn,P1=qh,LTt=Rn,FTt=hk;function jTt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=yke(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Da.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Gd.macroKeywordCode=jTt;function BTt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;zTt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=yke(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&mfe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&mfe(e),g(()=>UTt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Da._)`await `),v=>r.assign(f,!1).if((0,Da._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Da._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Da._)`${c}.errors`;return r.assign(y,null),m(Da.nil),y}function m(y=t.async?(0,Da._)`await `:Da.nil){const v=u.opts.passContext?P1.default.this:P1.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Da._)`${y}${(0,LTt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Da.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Gd.funcKeywordCode=BTt;function mfe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Da._)`${r.parentData}[${r.parentDataProperty}]`))}function UTt(e,t){const{gen:n}=e;n.if((0,Da._)`Array.isArray(${t})`,()=>{n.assign(P1.default.vErrors,(0,Da._)`${P1.default.vErrors} === null ? ${t} : ${P1.default.vErrors}.concat(${t})`).assign(P1.default.errors,(0,Da._)`${P1.default.vErrors}.length`),(0,FTt.extendErrors)(e)},()=>e.error())}function zTt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function yke(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Da.stringify)(n)})}function VTt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Gd.validSchemaType=VTt;function HTt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Gd.validateKeywordUsage=HTt;var y0={};Object.defineProperty(y0,"__esModule",{value:!0});y0.extendSubschemaMode=y0.extendSubschemaData=y0.getSubschema=void 0;const zd=Dn,vke=wt;function qTt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,zd._)`${e.schemaPath}${(0,zd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,zd._)`${e.schemaPath}${(0,zd.getProperty)(t)}${(0,zd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,vke.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}y0.getSubschema=qTt;function WTt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,zd._)`${t.data}${(0,zd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,zd.str)`${l}${(0,vke.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,zd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof zd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}y0.extendSubschemaData=WTt;function GTt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}y0.extendSubschemaMode=GTt;var xo={},bke={exports:{}},Gg=bke.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};tD(t,r,i,e,"",e)};Gg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Gg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Gg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Gg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function tD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Gg.arrayKeywords)for(var d=0;d<f.length;d++)tD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Gg.propsKeywords){if(f&&typeof f=="object")for(var h in f)tD(e,t,n,f[h],i+"/"+c+"/"+YTt(h),s,i,c,r,h)}else(c in Gg.keywords||e.allKeys&&!(c in Gg.skipKeywords))&&tD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function YTt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var KTt=bke.exports;Object.defineProperty(xo,"__esModule",{value:!0});xo.getSchemaRefs=xo.resolveUrl=xo.normalizeId=xo._getFullPath=xo.getFullPath=xo.inlineRef=void 0;const XTt=wt,QTt=dY,JTt=KTt,ZTt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function eAt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!$z(e):t?_ke(e)<=t:!1}xo.inlineRef=eAt;const tAt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function $z(e){for(const t in e){if(tAt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some($z)||typeof n=="object"&&$z(n))return!0}return!1}function _ke(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!ZTt.has(n)&&(typeof e[n]=="object"&&(0,XTt.eachItem)(e[n],r=>t+=_ke(r)),t===1/0))return 1/0}return t}function wke(e,t="",n){n!==!1&&(t=Mw(t));const r=e.parse(t);return Eke(e,r)}xo.getFullPath=wke;function Eke(e,t){return e.serialize(t).split("#")[0]+"#"}xo._getFullPath=Eke;const nAt=/#\/?$/;function Mw(e){return e?e.replace(nAt,""):""}xo.normalizeId=Mw;function rAt(e,t,n){return n=Mw(n),e.resolve(t,n)}xo.resolveUrl=rAt;const iAt=/^[a-z_][-a-z0-9._]*$/i;function sAt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Mw(e[n]||t),s={"":i},o=wke(r,i,!1),a={},u=new Set;return JTt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Mw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Mw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!iAt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!QTt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}xo.getSchemaRefs=sAt;Object.defineProperty(Pf,"__esModule",{value:!0});Pf.getData=Pf.KeywordCxt=Pf.validateFunctionCode=void 0;const xke=ME,gfe=xs,tQ=Jp,i$=xs,oAt=D6,uC=Gd,Oj=y0,Pt=Dn,rn=qh,aAt=xo,Zp=wt,hT=hk;function uAt(e){if(Ake(e)&&(Cke(e),Tke(e))){fAt(e);return}Ske(e,()=>(0,xke.topBoolOrEmptySchema)(e))}Pf.validateFunctionCode=uAt;function Ske({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Pt._)`${rn.default.data}, ${rn.default.valCxt}`,r.$async,()=>{e.code((0,Pt._)`"use strict"; ${yfe(n,i)}`),cAt(e,i),e.code(s)}):e.func(t,(0,Pt._)`${rn.default.data}, ${lAt(i)}`,r.$async,()=>e.code(yfe(n,i)).code(s))}function lAt(e){return(0,Pt._)`{${rn.default.instancePath}="", ${rn.default.parentData}, ${rn.default.parentDataProperty}, ${rn.default.rootData}=${rn.default.data}${e.dynamicRef?(0,Pt._)`, ${rn.default.dynamicAnchors}={}`:Pt.nil}}={}`}function cAt(e,t){e.if(rn.default.valCxt,()=>{e.var(rn.default.instancePath,(0,Pt._)`${rn.default.valCxt}.${rn.default.instancePath}`),e.var(rn.default.parentData,(0,Pt._)`${rn.default.valCxt}.${rn.default.parentData}`),e.var(rn.default.parentDataProperty,(0,Pt._)`${rn.default.valCxt}.${rn.default.parentDataProperty}`),e.var(rn.default.rootData,(0,Pt._)`${rn.default.valCxt}.${rn.default.rootData}`),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Pt._)`${rn.default.valCxt}.${rn.default.dynamicAnchors}`)},()=>{e.var(rn.default.instancePath,(0,Pt._)`""`),e.var(rn.default.parentData,(0,Pt._)`undefined`),e.var(rn.default.parentDataProperty,(0,Pt._)`undefined`),e.var(rn.default.rootData,rn.default.data),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Pt._)`{}`)})}function fAt(e){const{schema:t,opts:n,gen:r}=e;Ske(e,()=>{n.$comment&&t.$comment&&kke(e),gAt(e),r.let(rn.default.vErrors,null),r.let(rn.default.errors,0),n.unevaluated&&dAt(e),Ike(e),bAt(e)})}function dAt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Pt._)`${n}.evaluated`),t.if((0,Pt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Pt._)`${e.evaluated}.props`,(0,Pt._)`undefined`)),t.if((0,Pt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Pt._)`${e.evaluated}.items`,(0,Pt._)`undefined`))}function yfe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Pt._)`/*# sourceURL=${n} */`:Pt.nil}function hAt(e,t){if(Ake(e)&&(Cke(e),Tke(e))){pAt(e,t);return}(0,xke.boolOrEmptySchema)(e,t)}function Tke({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function Ake(e){return typeof e.schema!="boolean"}function pAt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&kke(e),yAt(e),vAt(e);const s=r.const("_errs",rn.default.errors);Ike(e,s),r.var(t,(0,Pt._)`${s} === ${rn.default.errors}`)}function Cke(e){(0,Zp.checkUnknownRules)(e),mAt(e)}function Ike(e,t){if(e.opts.jtd)return vfe(e,[],!1,t);const n=(0,gfe.getSchemaTypes)(e.schema),r=(0,gfe.coerceAndCheckDataType)(e,n);vfe(e,n,!r,t)}function mAt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Zp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function gAt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Zp.checkStrictMode)(e,"default is ignored in the schema root")}function yAt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,aAt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function vAt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function kke({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Pt._)`${rn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Pt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Pt._)`${rn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function bAt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Pt._)`${rn.default.errors} === 0`,()=>t.return(rn.default.data),()=>t.throw((0,Pt._)`new ${i}(${rn.default.vErrors})`)):(t.assign((0,Pt._)`${r}.errors`,rn.default.vErrors),s.unevaluated&&_At(e),t.return((0,Pt._)`${rn.default.errors} === 0`))}function _At({gen:e,evaluated:t,props:n,items:r}){n instanceof Pt.Name&&e.assign((0,Pt._)`${t}.props`,n),r instanceof Pt.Name&&e.assign((0,Pt._)`${t}.items`,r)}function vfe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Zp.schemaHasRulesButRef)(s,c))){i.block(()=>Pke(e,"$ref",c.all.$ref.definition));return}u.jtd||wAt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,tQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,i$.checkDataType)(d.type,o,u.strictNumbers)),bfe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,i$.reportTypeError)(e)),i.endIf()):bfe(e,d),a||i.if((0,Pt._)`${rn.default.errors} === ${r||0}`))}}function bfe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,oAt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,tQ.shouldUseRule)(r,s)&&Pke(e,s.keyword,s.definition,t.type)})}function wAt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(EAt(e,t),e.opts.allowUnionTypes||xAt(e,t),SAt(e,e.dataTypes))}function EAt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Rke(e.dataTypes,n)||nQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),AAt(e,t)}}function xAt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&nQ(e,"use allowUnionTypes to allow union type keyword")}function SAt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,tQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>TAt(t,o))&&nQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function TAt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Rke(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function AAt(e,t){const n=[];for(const r of e.dataTypes)Rke(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function nQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Zp.checkStrictMode)(e,t,e.opts.strictTypes)}class Nke{constructor(t,n,r){if((0,uC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Zp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",Dke(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,uC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",rn.default.errors))}result(t,n,r){this.failResult((0,Pt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Pt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Pt._)`${n} !== undefined && (${(0,Pt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?hT.reportExtraError:hT.reportError)(this,this.def.error,n)}$dataError(){(0,hT.reportError)(this,this.def.$dataError||hT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,hT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Pt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Pt.nil,n=Pt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Pt.or)((0,Pt._)`${i} === undefined`,n)),t!==Pt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Pt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Pt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Pt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Pt._)`${(0,i$.checkDataTypes)(u,n,s.opts.strictNumbers,i$.DataType.Wrong)}`}return Pt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Pt._)`!${u}(${n})`}return Pt.nil}}subschema(t,n){const r=(0,Oj.getSubschema)(this.it,t);(0,Oj.extendSubschemaData)(r,this.it,t),(0,Oj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return hAt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Zp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Zp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Pt.Name)),!0}}Pf.KeywordCxt=Nke;function Pke(e,t,n,r){const i=new Nke(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,uC.funcKeywordCode)(i,n):"macro"in n?(0,uC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,uC.funcKeywordCode)(i,n)}const CAt=/^\/(?:[^~]|~0|~1)*$/,IAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Dke(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return rn.default.rootData;if(e[0]==="/"){if(!CAt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=rn.default.rootData}else{const l=IAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Pt._)`${s}${(0,Pt.getProperty)((0,Zp.unescapeJsonPointer)(l))}`,o=(0,Pt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Pf.getData=Dke;var pk={};Object.defineProperty(pk,"__esModule",{value:!0});class kAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}pk.default=kAt;var iS={};Object.defineProperty(iS,"__esModule",{value:!0});const $j=xo;class RAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,$j.resolveUrl)(t,n,r),this.missingSchema=(0,$j.normalizeId)((0,$j.getFullPath)(t,this.missingRef))}}iS.default=RAt;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.resolveSchema=xu.getCompilingSchema=xu.resolveRef=xu.compileSchema=xu.SchemaEnv=void 0;const Wc=Dn,NAt=pk,t1=qh,vf=xo,_fe=wt,PAt=Pf;class O6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,vf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}xu.SchemaEnv=O6;function rQ(e){const t=Oke.call(this,e);if(t)return t;const n=(0,vf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Wc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:NAt.default,code:(0,Wc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:t1.default.data,parentData:t1.default.parentData,parentDataProperty:t1.default.parentDataProperty,dataNames:[t1.default.data],dataPathArr:[Wc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Wc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Wc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Wc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,PAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(t1.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${t1.default.self}`,`${t1.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Wc.Name?void 0:p,items:m instanceof Wc.Name?void 0:m,dynamicProps:p instanceof Wc.Name,dynamicItems:m instanceof Wc.Name},h.source&&(h.source.evaluated=(0,Wc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}xu.compileSchema=rQ;function DAt(e,t,n){var r;n=(0,vf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=MAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new O6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=OAt.call(this,s)}xu.resolveRef=DAt;function OAt(e){return(0,vf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:rQ.call(this,e)}function Oke(e){for(const t of this._compilations)if($At(t,e))return t}xu.getCompilingSchema=Oke;function $At(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function MAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||$6.call(this,e,t)}function $6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,vf._getFullPath)(this.opts.uriResolver,n);let i=(0,vf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Mj.call(this,n,e);const s=(0,vf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=$6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Mj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||rQ.call(this,o),s===(0,vf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,vf.resolveUrl)(this.opts.uriResolver,i,l)),new O6({schema:a,schemaId:u,root:e,baseId:i})}return Mj.call(this,n,o)}}xu.resolveSchema=$6;const LAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Mj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,_fe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!LAt.has(a)&&l&&(t=(0,vf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,_fe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,vf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=$6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new O6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const FAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",jAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",BAt="object",UAt=["$data"],zAt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},VAt=!1,HAt={$id:FAt,description:jAt,type:BAt,required:UAt,properties:zAt,additionalProperties:VAt};var iQ={},Mz={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Zs,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Se=ee.length-1,xe=1;xe<Se;++xe)ee[xe]=ee[xe].slice(1,-1);return ee[Se]=ee[Se].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Se in ee)ae[Se]=ee[Se];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Se=r(ae,"[A-Fa-f]"),xe=i(i("%[EFef]"+Se+"%"+Se+Se+"%"+Se+Se)+"|"+i("%[89A-Fa-f]"+Se+"%"+Se+Se)+"|"+i("%"+Se+Se)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Vt=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jn=oe?"[\\uE000-\\uF8FF]":"[]",dn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(xe+"|"+r(dn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Cr=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),zt=i(Se+"{1,4}"),sr=i(i(zt+"\\:"+zt)+"|"+Cr),zr=i(i(zt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(zt+"\\:")+"{5}"+sr),Ci=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+sr),Us=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+sr),Kr=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+sr),fo=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+sr),Li=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+sr),Fi=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),jo=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),Aa=i([zr,Jn,Ci,Us,Kr,fo,Li,Fi,jo].join("|")),zs=i(i(dn+"|"+xe)+"+");i("[vV]"+Se+"+\\."+r(dn,St,"[\\:]")+"+"),i(i(xe+"|"+r(dn,St))+"*");var Wl=i(xe+"|"+r(dn,St,"[\\:\\@]"));return i(i(xe+"|"+r(dn,St,"[\\@]"))+"+"),i(i(Wl+"|"+r("[\\/\\?]",jn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",dn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",dn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",dn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",dn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",dn,St,"[\\:\\@\\/\\?]",jn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",dn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",dn,St),"g"),UNRESERVED:new RegExp(dn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",dn,Vt),"g"),PCT_ENCODED:new RegExp(xe,"g"),IPV4ADDRESS:new RegExp("^("+Cr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Aa+")"+i(i("\\%25|\\%(?!"+Se+"{2})")+"("+zs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Se=[],xe=!0,ot=!1,St=void 0;try{for(var Vt=ee[Symbol.iterator](),On;!(xe=(On=Vt.next()).done)&&(Se.push(On.value),!(ae&&Se.length===ae));xe=!0);}catch(jn){ot=!0,St=jn}finally{try{!xe&&Vt.return&&Vt.return()}finally{if(ot)throw St}}return Se}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,S="-",T=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,M=Math.floor,P=String.fromCharCode;function O(oe){throw new RangeError(I[oe])}function F(oe,ee){for(var ae=[],Se=oe.length;Se--;)ae[Se]=ee(oe[Se]);return ae}function L(oe,ee){var ae=oe.split("@"),Se="";ae.length>1&&(Se=ae[0]+"@",oe=ae[1]),oe=oe.replace(C,".");var xe=oe.split("."),ot=F(xe,ee).join(".");return Se+ot}function B(oe){for(var ee=[],ae=0,Se=oe.length;ae<Se;){var xe=oe.charCodeAt(ae++);if(xe>=55296&&xe<=56319&&ae<Se){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((xe&1023)<<10)+(ot&1023)+65536):(ee.push(xe),ae--)}else ee.push(xe)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Se){var xe=0;for(ee=Se?M(ee/b):ee>>1,ee+=M(ee/ae);ee>R*y>>1;xe+=m)ee=M(ee/R);return M(xe+(R+1)*ee/(ee+v))},W=function(ee){var ae=[],Se=ee.length,xe=0,ot=E,St=w,Vt=ee.lastIndexOf(S);Vt<0&&(Vt=0);for(var On=0;On<Vt;++On)ee.charCodeAt(On)>=128&&O("not-basic"),ae.push(ee.charCodeAt(On));for(var jn=Vt>0?Vt+1:0;jn<Se;){for(var dn=xe,ir=1,Cr=m;;Cr+=m){jn>=Se&&O("invalid-input");var zt=H(ee.charCodeAt(jn++));(zt>=m||zt>M((p-xe)/ir))&&O("overflow"),xe+=zt*ir;var sr=Cr<=St?g:Cr>=St+y?y:Cr-St;if(zt<sr)break;var zr=m-sr;ir>M(p/zr)&&O("overflow"),ir*=zr}var Jn=ae.length+1;St=z(xe-dn,Jn,dn==0),M(xe/Jn)>p-ot&&O("overflow"),ot+=M(xe/Jn),xe%=Jn,ae.splice(xe++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Se=ee.length,xe=E,ot=0,St=w,Vt=!0,On=!1,jn=void 0;try{for(var dn=ee[Symbol.iterator](),ir;!(Vt=(ir=dn.next()).done);Vt=!0){var Cr=ir.value;Cr<128&&ae.push(P(Cr))}}catch(Oe){On=!0,jn=Oe}finally{try{!Vt&&dn.return&&dn.return()}finally{if(On)throw jn}}var zt=ae.length,sr=zt;for(zt&&ae.push(S);sr<Se;){var zr=p,Jn=!0,Ci=!1,Us=void 0;try{for(var Kr=ee[Symbol.iterator](),fo;!(Jn=(fo=Kr.next()).done);Jn=!0){var Li=fo.value;Li>=xe&&Li<zr&&(zr=Li)}}catch(Oe){Ci=!0,Us=Oe}finally{try{!Jn&&Kr.return&&Kr.return()}finally{if(Ci)throw Us}}var Fi=sr+1;zr-xe>M((p-ot)/Fi)&&O("overflow"),ot+=(zr-xe)*Fi,xe=zr;var jo=!0,Aa=!1,zs=void 0;try{for(var Wl=ee[Symbol.iterator](),cd;!(jo=(cd=Wl.next()).done);jo=!0){var Y=cd.value;if(Y<xe&&++ot>p&&O("overflow"),Y==xe){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ge=se-fe,le=m-fe;ae.push(P(D(fe+ge%le,0))),se=M(ge/le)}ae.push(P(D(se,0))),St=z(ot,Fi,sr==zt),ot=0,++sr}}}catch(Oe){Aa=!0,zs=Oe}finally{try{!jo&&Wl.return&&Wl.return()}finally{if(Aa)throw zs}}++ot,++xe}return ae.join("")},q=function(ee){return L(ee,function(ae){return T.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return L(ee,function(ae){return A.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Se=oe.length;ae<Se;){var xe=parseInt(oe.substr(ae+1,2),16);if(xe<128)ee+=String.fromCharCode(xe),ae+=3;else if(xe>=194&&xe<224){if(Se-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((xe&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(xe>=224){if(Se-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Vt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((xe&15)<<12|(St&63)<<6|Vt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ye(oe,ee){function ae(Se){var xe=he(Se);return xe.match(ee.UNRESERVED)?xe:Se}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ve(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Se=d(ae,2),xe=Se[1];return xe?xe.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Se=d(ae,3),xe=Se[1],ot=Se[2];if(xe){for(var St=xe.toLowerCase().split("::").reverse(),Vt=d(St,2),On=Vt[0],jn=Vt[1],dn=jn?jn.split(":").map(Ie):[],ir=On.split(":").map(Ie),Cr=ee.IPV4ADDRESS.test(ir[ir.length-1]),zt=Cr?7:8,sr=ir.length-zt,zr=Array(zt),Jn=0;Jn<zt;++Jn)zr[Jn]=dn[Jn]||ir[sr+Jn]||"";Cr&&(zr[zt-1]=ve(zr[zt-1],ee));var Ci=zr.reduce(function(Fi,jo,Aa){if(!jo||jo==="0"){var zs=Fi[Fi.length-1];zs&&zs.index+zs.length===Aa?zs.length++:Fi.push({index:Aa,length:1})}return Fi},[]),Us=Ci.sort(function(Fi,jo){return jo.length-Fi.length})[0],Kr=void 0;if(Us&&Us.length>1){var fo=zr.slice(0,Us.index),Li=zr.slice(Us.index+Us.length);Kr=fo.join(":")+"::"+Li.join(":")}else Kr=zr.join(":");return ot&&(Kr+="%"+ot),Kr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,gt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Se=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var xe=oe.match(Ue);if(xe){gt?(ae.scheme=xe[1],ae.userinfo=xe[3],ae.host=xe[4],ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=xe[7],ae.fragment=xe[8],isNaN(ae.port)&&(ae.port=xe[5])):(ae.scheme=xe[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?xe[3]:void 0,ae.host=oe.indexOf("//")!==-1?xe[4]:void 0,ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=oe.indexOf("?")!==-1?xe[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?xe[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?xe[4]:void 0)),ae.host&&(ae.host=Ke(ve(ae.host,Se),Se)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Se.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Se);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,ee){var ae=ee.iri!==!1?f:c,Se=[];return oe.userinfo!==void 0&&(Se.push(oe.userinfo),Se.push("@")),oe.host!==void 0&&Se.push(Ke(ve(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(xe,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Se.push(":"),Se.push(String(oe.port))),Se.length?Se.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Dt=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Dt);if(ae){var Se=ae[0];oe=oe.slice(Se.length),ee.push(Se)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function me(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Se=[],xe=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(xe&&xe.serialize&&xe.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||xe&&xe.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Vt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Vt}}ye(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Se.push(oe.scheme),Se.push(":"));var ot=be(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Se.push("//"),Se.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Se.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!xe||!xe.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Se.push(St)}return oe.query!==void 0&&(Se.push("?"),Se.push(oe.query)),oe.fragment!==void 0&&(Se.push("#"),Se.push(oe.fragment)),Se.join("")}function dt(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=arguments[3],xe={};return Se||(oe=it(me(oe,ae),ae),ee=it(me(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(xe.scheme=ee.scheme,xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=We(ee.path||""),xe.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=We(ee.path||""),xe.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?xe.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?xe.path="/"+ee.path:oe.path?xe.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:xe.path=ee.path,xe.path=We(xe.path)),xe.query=ee.query):(xe.path=oe.path,ee.query!==void 0?xe.query=ee.query:xe.query=oe.query),xe.userinfo=oe.userinfo,xe.host=oe.host,xe.port=oe.port),xe.scheme=oe.scheme),xe.fragment=ee.fragment,xe}function yt(oe,ee,ae){var Se=u({scheme:"null"},ae);return me(dt(it(oe,Se),it(ee,Se),Se,!0),Se)}function pe(oe,ee){return typeof oe=="string"?oe=me(it(oe,ee),ee):s(oe)==="object"&&(oe=it(me(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=me(it(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof ee=="string"?ee=me(it(ee,ae),ae):s(ee)==="object"&&(ee=me(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Se=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Se?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Ln={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Tr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Fn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Se=ee;return Se.secure=Tr(Se),Se.resourceName=(Se.path||"/")+(Se.query?"?"+Se.query:""),Se.path=void 0,Se.query=void 0,Se},serialize:function(ee,ae){if((ee.port===(Tr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Se=ee.resourceName.split("?"),xe=d(Se,2),ot=xe[0],St=xe[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Fn.domainHost,parse:Fn.parse,serialize:Fn.serialize},pn={},Tn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),Fo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",An=r($i,'[\\"\\\\]'),Mi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ar=new RegExp(Tn,"g"),ds=new RegExp(rr,"g"),rp=new RegExp(r("[^]",Fo,"[\\.]",'[\\"]',An),"g"),rl=new RegExp(r("[^]",Tn,Mi),"g"),ld=rl;function Er(oe){var ee=he(oe);return ee.match(Ar)?ee:oe}var Ai={scheme:"mailto",parse:function(ee,ae){var Se=ee,xe=Se.to=Se.path?Se.path.split(","):[];if(Se.path=void 0,Se.query){for(var ot=!1,St={},Vt=Se.query.split("&"),On=0,jn=Vt.length;On<jn;++On){var dn=Vt[On].split("=");switch(dn[0]){case"to":for(var ir=dn[1].split(","),Cr=0,zt=ir.length;Cr<zt;++Cr)xe.push(ir[Cr]);break;case"subject":Se.subject=ut(dn[1],ae);break;case"body":Se.body=ut(dn[1],ae);break;default:ot=!0,St[ut(dn[0],ae)]=ut(dn[1],ae);break}}ot&&(Se.headers=St)}Se.query=void 0;for(var sr=0,zr=xe.length;sr<zr;++sr){var Jn=xe[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(Ci){Se.error=Se.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ci}xe[sr]=Jn.join("@")}return Se},serialize:function(ee,ae){var Se=ee,xe=a(ee.to);if(xe){for(var ot=0,St=xe.length;ot<St;++ot){var Vt=String(xe[ot]),On=Vt.lastIndexOf("@"),jn=Vt.slice(0,On).replace(ds,Er).replace(ds,o).replace(rp,de),dn=Vt.slice(On+1);try{dn=ae.iri?ne.toUnicode(dn):ne.toASCII(ut(dn,ae).toLowerCase())}catch(sr){Se.error=Se.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}xe[ot]=jn+"@"+dn}Se.path=xe.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var Cr=[];for(var zt in ir)ir[zt]!==pn[zt]&&Cr.push(zt.replace(ds,Er).replace(ds,o).replace(rl,de)+"="+ir[zt].replace(ds,Er).replace(ds,o).replace(ld,de));return Cr.length&&(Se.query=Cr.join("&")),Se}},Yr=/^([^\:]+)\:(.*)/,ou={scheme:"urn",parse:function(ee,ae){var Se=ee.path&&ee.path.match(Yr),xe=ee;if(Se){var ot=ae.scheme||xe.scheme||"urn",St=Se[1].toLowerCase(),Vt=Se[2],On=ot+":"+(ae.nid||St),jn=ce[On];xe.nid=St,xe.nss=Vt,xe.path=void 0,jn&&(xe=jn.parse(xe,ae))}else xe.error=xe.error||"URN can not be parsed.";return xe},serialize:function(ee,ae){var Se=ae.scheme||ee.scheme||"urn",xe=ee.nid,ot=Se+":"+(ae.nid||xe),St=ce[ot];St&&(ee=St.serialize(ee,ae));var Vt=ee,On=ee.nss;return Vt.path=(xe||ae.nid)+":"+On,Vt}},Sa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ta={scheme:"urn:uuid",parse:function(ee,ae){var Se=ee;return Se.uuid=Se.nss,Se.nss=void 0,!ae.tolerant&&(!Se.uuid||!Se.uuid.match(Sa))&&(Se.error=Se.error||"UUID is not valid."),Se},serialize:function(ee,ae){var Se=ee;return Se.nss=(ee.uuid||"").toLowerCase(),Se}};ce[_t.scheme]=_t,ce[Ln.scheme]=Ln,ce[Fn.scheme]=Fn,ce[cr.scheme]=cr,ce[Ai.scheme]=Ai,ce[ou.scheme]=ou,ce[Ta.scheme]=Ta,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=We,n.serialize=me,n.resolveComponents=dt,n.resolve=yt,n.normalize=pe,n.equal=Ce,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(Mz,Mz.exports);var qAt=Mz.exports;Object.defineProperty(iQ,"__esModule",{value:!0});const $ke=qAt;$ke.code='require("ajv/dist/runtime/uri").default';iQ.default=$ke;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Pf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Dn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=pk,i=iS,s=Vv,o=xu,a=Dn,u=xo,l=xs,c=wt,f=HAt,d=iQ,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,j,q,G,ne,ce,de,he,ye,Ie,ve,Ke,Ue,gt,it,be,ke,ze,ct,Dt,We,me,dt,yt;const pe=D.strict,Ce=(z=D.code)===null||z===void 0?void 0:z.optimize,He=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=D.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=D.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=D.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ye=(he=D.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ie=D.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&ve!==void 0?ve:"log",strictRequired:(Ue=(Ke=D.strictRequired)!==null&&Ke!==void 0?Ke:pe)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(gt=D.loopRequired)!==null&&gt!==void 0?gt:v,loopEnum:(it=D.loopEnum)!==null&&it!==void 0?it:v,meta:(be=D.meta)!==null&&be!==void 0?be:!0,messages:(ke=D.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=D.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=D.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Dt=D.addUsedSchema)!==null&&Dt!==void 0?Dt:!0,validateSchema:(We=D.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(me=D.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(dt=D.unicodeRegExp)!==null&&dt!==void 0?dt:!0,int32range:(yt=D.int32range)!==null&&yt!==void 0?yt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=M(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=I.call(this),z.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&C.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),T.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ye,Ie){await G.call(this,ye.$schema);const ve=this._addSchema(ye,Ie);return ve.validate||ne.call(this,ve)}async function G(ye){ye&&!this.getSchema(ye)&&await q.call(this,{$ref:ye},!0)}async function ne(ye){try{return this._compileSchemaEnv(ye)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ye)}}function ce({missingSchema:ye,missingRef:Ie}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ie} cannot be resolved`)}async function de(ye){const Ie=await he.call(this,ye);this.refs[ye]||await G.call(this,Ie.$schema),this.refs[ye]||this.addSchema(Ie,ye,W)}async function he(ye){const Ie=this._loading[ye];if(Ie)return Ie;try{return await(this._loading[ye]=j(ye))}finally{delete this._loading[ye]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(O.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ye=ne[ce];he&&ye&&(ne[ce]=H(ye))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,z,W,j="error"){for(const q in D){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${D[G]}`)}}function S(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function T(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function A(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function C(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function I(){const D={...this.opts};for(const z of p)delete D[z];return D}const R={log(){},warn(){},error(){}};function M(D){if(D===!1)return R;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function O(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(D,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[D]=!0,!z)return;const ce={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?L.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[D]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function L(D,z,W){const j=D.rules.findIndex(q=>q.keyword===W);j>=0?D.rules.splice(j,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=H(z)),D.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(D){return{anyOf:[D,U]}}})(rke);var sQ={},oQ={},aQ={};Object.defineProperty(aQ,"__esModule",{value:!0});const WAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};aQ.default=WAt;var Hv={};Object.defineProperty(Hv,"__esModule",{value:!0});Hv.callRef=Hv.getValidate=void 0;const GAt=iS,wfe=Rn,hu=Dn,h_=qh,Efe=xu,IN=wt,YAt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Efe.resolveRef.call(u,l,i,n);if(c===void 0)throw new GAt.default(r.opts.uriResolver,i,n);if(c instanceof Efe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return nD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return nD(e,(0,hu._)`${p}.validate`,l,l.$async)}function d(p){const m=Mke(e,p);nD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,hu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:hu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function Mke(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,hu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}Hv.getValidate=Mke;function nD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?h_.default.this:hu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,hu._)`await ${(0,wfe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,hu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,wfe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,hu._)`${p}.errors`;i.assign(h_.default.vErrors,(0,hu._)`${h_.default.vErrors} === null ? ${m} : ${h_.default.vErrors}.concat(${m})`),i.assign(h_.default.errors,(0,hu._)`${h_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=IN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,hu._)`${p}.evaluated.props`);s.props=IN.mergeEvaluated.props(i,y,s.props,hu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=IN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,hu._)`${p}.evaluated.items`);s.items=IN.mergeEvaluated.items(i,y,s.items,hu.Name)}}}Hv.callRef=nD;Hv.default=YAt;Object.defineProperty(oQ,"__esModule",{value:!0});const KAt=aQ,XAt=Hv,QAt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",KAt.default,XAt.default];oQ.default=QAt;var uQ={},lQ={};Object.defineProperty(lQ,"__esModule",{value:!0});const s$=Dn,pg=s$.operators,o$={maximum:{okStr:"<=",ok:pg.LTE,fail:pg.GT},minimum:{okStr:">=",ok:pg.GTE,fail:pg.LT},exclusiveMaximum:{okStr:"<",ok:pg.LT,fail:pg.GTE},exclusiveMinimum:{okStr:">",ok:pg.GT,fail:pg.LTE}},JAt={message:({keyword:e,schemaCode:t})=>(0,s$.str)`must be ${o$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,s$._)`{comparison: ${o$[e].okStr}, limit: ${t}}`},ZAt={keyword:Object.keys(o$),type:"number",schemaType:"number",$data:!0,error:JAt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,s$._)`${n} ${o$[t].fail} ${r} || isNaN(${n})`)}};lQ.default=ZAt;var cQ={};Object.defineProperty(cQ,"__esModule",{value:!0});const lC=Dn,eCt={message:({schemaCode:e})=>(0,lC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,lC._)`{multipleOf: ${e}}`},tCt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:eCt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,lC._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,lC._)`${o} !== parseInt(${o})`;e.fail$data((0,lC._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};cQ.default=tCt;var fQ={},dQ={};Object.defineProperty(dQ,"__esModule",{value:!0});function Lke(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}dQ.default=Lke;Lke.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(fQ,"__esModule",{value:!0});const D1=Dn,nCt=wt,rCt=dQ,iCt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,D1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,D1._)`{limit: ${e}}`},sCt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:iCt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?D1.operators.GT:D1.operators.LT,o=i.opts.unicode===!1?(0,D1._)`${n}.length`:(0,D1._)`${(0,nCt.useFunc)(e.gen,rCt.default)}(${n})`;e.fail$data((0,D1._)`${o} ${s} ${r}`)}};fQ.default=sCt;var hQ={};Object.defineProperty(hQ,"__esModule",{value:!0});const oCt=Rn,a$=Dn,aCt={message:({schemaCode:e})=>(0,a$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,a$._)`{pattern: ${e}}`},uCt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:aCt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,a$._)`(new RegExp(${i}, ${o}))`:(0,oCt.usePattern)(e,r);e.fail$data((0,a$._)`!${a}.test(${t})`)}};hQ.default=uCt;var pQ={};Object.defineProperty(pQ,"__esModule",{value:!0});const cC=Dn,lCt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,cC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,cC._)`{limit: ${e}}`},cCt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:lCt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?cC.operators.GT:cC.operators.LT;e.fail$data((0,cC._)`Object.keys(${n}).length ${i} ${r}`)}};pQ.default=cCt;var mQ={};Object.defineProperty(mQ,"__esModule",{value:!0});const pT=Rn,fC=Dn,fCt=wt,dCt={message:({params:{missingProperty:e}})=>(0,fC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,fC._)`{missingProperty: ${e}}`},hCt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:dCt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,fCt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(fC.nil,f);else for(const h of n)(0,pT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,pT.checkMissingProp)(e,n,h)),(0,pT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,pT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,pT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,fC.not)(p),()=>{e.error(),t.break()})},fC.nil)}}};mQ.default=hCt;var gQ={};Object.defineProperty(gQ,"__esModule",{value:!0});const dC=Dn,pCt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,dC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,dC._)`{limit: ${e}}`},mCt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:pCt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?dC.operators.GT:dC.operators.LT;e.fail$data((0,dC._)`${n}.length ${i} ${r}`)}};gQ.default=mCt;var yQ={},mk={};Object.defineProperty(mk,"__esModule",{value:!0});const Fke=dY;Fke.code='require("ajv/dist/runtime/equal").default';mk.default=Fke;Object.defineProperty(yQ,"__esModule",{value:!0});const Lj=xs,yo=Dn,gCt=wt,yCt=mk,vCt={message:({params:{i:e,j:t}})=>(0,yo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,yo._)`{i: ${e}, j: ${t}}`},bCt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:vCt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Lj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,yo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,yo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,yo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Lj.checkDataTypes)(l,g,a.opts.strictNumbers,Lj.DataType.Wrong),v=t.const("indices",(0,yo._)`{}`);t.for((0,yo._)`;${p}--;`,()=>{t.let(g,(0,yo._)`${n}[${p}]`),t.if(y,(0,yo._)`continue`),l.length>1&&t.if((0,yo._)`typeof ${g} == "string"`,(0,yo._)`${g} += "_"`),t.if((0,yo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,yo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,yo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,gCt.useFunc)(t,yCt.default),y=t.name("outer");t.label(y).for((0,yo._)`;${p}--;`,()=>t.for((0,yo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,yo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};yQ.default=bCt;var vQ={};Object.defineProperty(vQ,"__esModule",{value:!0});const Lz=Dn,_Ct=wt,wCt=mk,ECt={message:"must be equal to constant",params:({schemaCode:e})=>(0,Lz._)`{allowedValue: ${e}}`},xCt={keyword:"const",$data:!0,error:ECt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,Lz._)`!${(0,_Ct.useFunc)(t,wCt.default)}(${n}, ${i})`):e.fail((0,Lz._)`${s} !== ${n}`)}};vQ.default=xCt;var bQ={};Object.defineProperty(bQ,"__esModule",{value:!0});const cA=Dn,SCt=wt,TCt=mk,ACt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,cA._)`{allowedValues: ${e}}`},CCt={keyword:"enum",schemaType:"array",$data:!0,error:ACt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,SCt.useFunc)(t,TCt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,cA.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,cA._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,cA._)`${l()}(${n}, ${h}[${p}])`:(0,cA._)`${n} === ${m}`}}};bQ.default=CCt;Object.defineProperty(uQ,"__esModule",{value:!0});const ICt=lQ,kCt=cQ,RCt=fQ,NCt=hQ,PCt=pQ,DCt=mQ,OCt=gQ,$Ct=yQ,MCt=vQ,LCt=bQ,FCt=[ICt.default,kCt.default,RCt.default,NCt.default,PCt.default,DCt.default,OCt.default,$Ct.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},MCt.default,LCt.default];uQ.default=FCt;var _Q={},sS={};Object.defineProperty(sS,"__esModule",{value:!0});sS.validateAdditionalItems=void 0;const O1=Dn,Fz=wt,jCt={message:({params:{len:e}})=>(0,O1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,O1._)`{limit: ${e}}`},BCt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:jCt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,Fz.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}jke(e,r)}};function jke(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,O1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,O1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,Fz.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,O1._)`${a} <= ${t.length}`);n.if((0,O1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:Fz.Type.Num},l),o.allErrors||n.if((0,O1.not)(l),()=>n.break())})}}sS.validateAdditionalItems=jke;sS.default=BCt;var wQ={},oS={};Object.defineProperty(oS,"__esModule",{value:!0});oS.validateTuple=void 0;const xfe=Dn,rD=wt,UCt=Rn,zCt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Bke(e,"additionalItems",t);n.items=!0,!(0,rD.alwaysValidSchema)(n,t)&&e.ok((0,UCt.validateArray)(e))}};function Bke(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=rD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,xfe._)`${s}.length`);n.forEach((f,d)=>{(0,rD.alwaysValidSchema)(a,f)||(r.if((0,xfe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,rD.checkStrictMode)(a,g,d.strictTuples)}}}oS.validateTuple=Bke;oS.default=zCt;Object.defineProperty(wQ,"__esModule",{value:!0});const VCt=oS,HCt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,VCt.validateTuple)(e,"items")};wQ.default=HCt;var EQ={};Object.defineProperty(EQ,"__esModule",{value:!0});const Sfe=Dn,qCt=wt,WCt=Rn,GCt=sS,YCt={message:({params:{len:e}})=>(0,Sfe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Sfe._)`{limit: ${e}}`},KCt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:YCt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,qCt.alwaysValidSchema)(r,t)&&(i?(0,GCt.validateAdditionalItems)(e,i):e.ok((0,WCt.validateArray)(e)))}};EQ.default=KCt;var xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const nc=Dn,kN=wt,XCt={message:({params:{min:e,max:t}})=>t===void 0?(0,nc.str)`must contain at least ${e} valid item(s)`:(0,nc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,nc._)`{minContains: ${e}}`:(0,nc._)`{minContains: ${e}, maxContains: ${t}}`},QCt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:XCt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,nc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,kN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,kN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,kN.alwaysValidSchema)(s,n)){let m=(0,nc._)`${c} >= ${o}`;a!==void 0&&(m=(0,nc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,nc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:kN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,nc._)`${m}++`),a===void 0?t.if((0,nc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,nc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,nc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};xQ.default=QCt;var Uke={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Dn,n=wt,r=Rn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(Uke);var SQ={};Object.defineProperty(SQ,"__esModule",{value:!0});const zke=Dn,JCt=wt,ZCt={message:"property name must be valid",params:({params:e})=>(0,zke._)`{propertyName: ${e.propertyName}}`},e2t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:ZCt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,JCt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,zke.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};SQ.default=e2t;var M6={};Object.defineProperty(M6,"__esModule",{value:!0});const RN=Rn,Zc=Dn,t2t=qh,NN=wt,n2t={message:"must NOT have additional properties",params:({params:e})=>(0,Zc._)`{additionalProperty: ${e.additionalProperty}}`},r2t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:n2t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,NN.alwaysValidSchema)(o,n))return;const l=(0,RN.allSchemaProperties)(r.properties),c=(0,RN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Zc._)`${s} === ${t2t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,NN.schemaRefOrVal)(o,r.properties,"properties");y=(0,RN.isOwnProperty)(t,v,g)}else l.length?y=(0,Zc.or)(...l.map(v=>(0,Zc._)`${g} === ${v}`)):y=Zc.nil;return c.length&&(y=(0,Zc.or)(y,...c.map(v=>(0,Zc._)`${(0,RN.usePattern)(e,v)}.test(${g})`))),(0,Zc.not)(y)}function h(g){t.code((0,Zc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,NN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Zc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Zc.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:NN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};M6.default=r2t;var TQ={};Object.defineProperty(TQ,"__esModule",{value:!0});const i2t=Pf,Tfe=Rn,Fj=wt,Afe=M6,s2t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Afe.default.code(new i2t.KeywordCxt(s,Afe.default,"additionalProperties"));const o=(0,Tfe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Fj.mergeEvaluated.props(t,(0,Fj.toHash)(o),s.props));const a=o.filter(f=>!(0,Fj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Tfe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};TQ.default=s2t;var AQ={};Object.defineProperty(AQ,"__esModule",{value:!0});const Cfe=Rn,PN=Dn,Ife=wt,kfe=wt,o2t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Cfe.allSchemaProperties)(n),u=a.filter(m=>(0,Ife.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof PN.Name)&&(s.props=(0,kfe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Ife.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,PN._)`${(0,Cfe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:kfe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,PN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,PN.not)(c),()=>t.break())})})}}};AQ.default=o2t;var CQ={};Object.defineProperty(CQ,"__esModule",{value:!0});const a2t=wt,u2t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,a2t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};CQ.default=u2t;var IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});const l2t=Rn,c2t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:l2t.validateUnion,error:{message:"must match a schema in anyOf"}};IQ.default=c2t;var kQ={};Object.defineProperty(kQ,"__esModule",{value:!0});const iD=Dn,f2t=wt,d2t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,iD._)`{passingSchemas: ${e.passing}}`},h2t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:d2t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,f2t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,iD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,iD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,iD.Name)})})}}};kQ.default=h2t;var RQ={};Object.defineProperty(RQ,"__esModule",{value:!0});const p2t=wt,m2t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,p2t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};RQ.default=m2t;var NQ={};Object.defineProperty(NQ,"__esModule",{value:!0});const u$=Dn,Vke=wt,g2t={message:({params:e})=>(0,u$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,u$._)`{failingKeyword: ${e.ifClause}}`},y2t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:g2t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Vke.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Rfe(r,"then"),s=Rfe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,u$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,u$._)`${c}`):e.setParams({ifClause:c})}}}};function Rfe(e,t){const n=e.schema[t];return n!==void 0&&!(0,Vke.alwaysValidSchema)(e,n)}NQ.default=y2t;var PQ={};Object.defineProperty(PQ,"__esModule",{value:!0});const v2t=wt,b2t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,v2t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};PQ.default=b2t;Object.defineProperty(_Q,"__esModule",{value:!0});const _2t=sS,w2t=wQ,E2t=oS,x2t=EQ,S2t=xQ,T2t=Uke,A2t=SQ,C2t=M6,I2t=TQ,k2t=AQ,R2t=CQ,N2t=IQ,P2t=kQ,D2t=RQ,O2t=NQ,$2t=PQ;function M2t(e=!1){const t=[R2t.default,N2t.default,P2t.default,D2t.default,O2t.default,$2t.default,A2t.default,C2t.default,T2t.default,I2t.default,k2t.default];return e?t.push(w2t.default,x2t.default):t.push(_2t.default,E2t.default),t.push(S2t.default),t}_Q.default=M2t;var DQ={},OQ={};Object.defineProperty(OQ,"__esModule",{value:!0});const es=Dn,L2t={message:({schemaCode:e})=>(0,es.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,es._)`{format: ${e}}`},F2t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:L2t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,es._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,es._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,es._)`${m}.type || "string"`).assign(y,(0,es._)`${m}.validate`),()=>n.assign(g,(0,es._)`"string"`).assign(y,m)),e.fail$data((0,es.or)(v(),b()));function v(){return u.strictSchema===!1?es.nil:(0,es._)`${o} && !${y}`}function b(){const w=c.$async?(0,es._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,es._)`${y}(${r})`,E=(0,es._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,es._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const S=E instanceof RegExp?(0,es.regexpCode)(E):u.code.formats?(0,es._)`${u.code.formats}${(0,es.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,es._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,es._)`await ${y}(${r})`}return typeof g=="function"?(0,es._)`${y}(${r})`:(0,es._)`${y}.test(${r})`}}}};OQ.default=F2t;Object.defineProperty(DQ,"__esModule",{value:!0});const j2t=OQ,B2t=[j2t.default];DQ.default=B2t;var LE={};Object.defineProperty(LE,"__esModule",{value:!0});LE.contentVocabulary=LE.metadataVocabulary=void 0;LE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];LE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(sQ,"__esModule",{value:!0});const U2t=oQ,z2t=uQ,V2t=_Q,H2t=DQ,Nfe=LE,q2t=[U2t.default,z2t.default,(0,V2t.default)(),H2t.default,Nfe.metadataVocabulary,Nfe.contentVocabulary];sQ.default=q2t;var $Q={},L6={};Object.defineProperty(L6,"__esModule",{value:!0});L6.DiscrError=void 0;var Pfe;(function(e){e.Tag="tag",e.Mapping="mapping"})(Pfe||(L6.DiscrError=Pfe={}));Object.defineProperty($Q,"__esModule",{value:!0});const P_=Dn,jz=L6,Dfe=xu,W2t=iS,G2t=wt,Y2t={message:({params:{discrError:e,tagName:t}})=>e===jz.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,P_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},K2t={keyword:"discriminator",type:"object",schemaType:"object",error:Y2t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,P_._)`${n}${(0,P_.getProperty)(a)}`);t.if((0,P_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:jz.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,P_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:jz.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,P_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,G2t.schemaHasRulesButRef)(E,s.self.RULES)){const T=E.$ref;if(E=Dfe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),E instanceof Dfe.SchemaEnv&&(E=E.schema),E===void 0)throw new W2t.default(s.opts.uriResolver,s.baseId,T)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const S of w.enum)b(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};$Q.default=K2t;const X2t="http://json-schema.org/draft-07/schema#",Q2t="http://json-schema.org/draft-07/schema#",J2t="Core schema meta-schema",Z2t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},eIt=["object","boolean"],tIt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},nIt={$schema:X2t,$id:Q2t,title:J2t,definitions:Z2t,type:eIt,properties:tIt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=rke,r=sQ,i=$Q,s=nIt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Pf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Dn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=pk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=iS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Nz,Nz.exports);var rIt=Nz.exports;const Hke=Ul(rIt),iIt="#/definitions/StudyConfig",sIt="http://json-schema.org/draft-07/schema#",oIt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": {     "instructionLocation": "sidebar",     "nextButtonLocation": "sidebar",     "path": "<study-name>/assets/my-image.jpg",     "response": [         {             "id": "my-image-id",             "options": [                 {                     "label": "Europe",                     "value": "Europe"                 },                 {                     "label": "Japan",                     "value": "Japan"                 },                 {                     "label": "USA",                     "value": "USA"                 }             ],             "prompt": "Your Selected Answer:",             "type": "dropdown"         }     ],     "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {     "baseComponent": "my-image-component",     "description": "Choosing section with largest GDP",     "instruction": "Which region has the largest GDP?" }, "q2": {     "baseComponent": "my-image-component",     "description": "Choosing section with lowest GDP",     "instruction": "Which region has the lowest GDP?" }, "q3": {     "baseComponent": "my-image-component",     "description": "Choosing section with highest exports of Wheat",     "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js {  "id": "q7",  "prompt": "Checkbox example (not required)",  "required": false,  "location": "aboveStimulus",  "type": "checkbox",  "options": [      {          "label": "Option 1",          "value": "opt-1"      },      {          "label": "Option 2",          "value": "opt-2"      },      {          "label": "Option 3",          "value": "opt-3"      }  ] }',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js {  "id": "q-color",  "prompt": "What is your favorite color?",  "required": true,  "location": "aboveStimulus",  "type": "dropdown",  "placeholder": "Please choose your favorite color",  "options": [      {          "label": "Red",          "value": "red"      },      {          "label": "Blue",          "value": "blue"      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likerts Scale:

\`\`\`js {    "id": "q-satisfaction",    "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).",    "required": true,    "location": "aboveStimulus",    "type": "likert",    "leftLabel": "Not Enjoyable",    "rightLabel": "Very Enjoyable",    "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js {  "id": "q-name",  "prompt": "What is your first name?",  "required": true,  "location": "aboveStimulus",  "type": "longText",  "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js {  "id": "q-numerical",  "prompt": "Numerical example",  "required": true,  "location": "aboveStimulus",  "type": "numerical",  "placeholder": "Enter your age, range from 0 - 120",  "max": 120,  "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js {  "id": "q-short-text",  "prompt": "Short text example",  "required": true,  "location": "aboveStimulus",  "type": "shortText",  "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js {  "id": "q-slider",  "prompt": "How are you feeling?",  "location": "aboveStimulus",  "required": true,  "type": "slider",  "options": [      {          "label": "Bad",          "value": 0      },      {          "label": "OK",          "value": 50      },      {          "label": "Good",          "value": 100      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta13/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "contact@revisit.dev",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},aIt={$ref:iIt,$schema:sIt,definitions:oIt},uIt="#/definitions/GlobalConfig",lIt="http://json-schema.org/draft-07/schema#",cIt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},fIt={$ref:uIt,$schema:lIt,definitions:cIt},qke=new Hke;qke.addSchema(fIt);const Ofe=qke.getSchema("#/definitions/GlobalConfig"),Wke=new Hke;Wke.addSchema(aIt);const jj=Wke.getSchema("#/definitions/StudyConfig");function dIt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function F6(e){return e.baseComponent!==void 0}function hIt(e){const t=GX.parse(e),n=Ofe(t),r=dIt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Ofe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function Gke(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):Gke(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function pIt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;F6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=dEe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return Gke(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function mIt(e){let t=!1,n;try{n=GX.parse(e),t=jj(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=pIt(n);r=[...jj.errors||[],...s],i=o}else r=jj.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function Yke(){const e=qm(),{setAlertModal:t}=jh(),n=Bh();N.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}const $fe=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],Mfe=["participantId","trialId","trialOrder","responseId"];function MQ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function gIt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(gm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=F6(u)&&u.baseComponent&&t.baseComponents?cY({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function yIt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=N.useState([...$fe].filter(c=>c!=="meta")),a=N.useMemo(()=>{const c=[...Mfe,...s],f=c,d=i.map(h=>gIt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=N.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);MQ(c,n)},[n,a.header,a.rows]),l=N.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return _.jsxs(bs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(hG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...$fe],value:s,onChange:c=>o(c),label:"Included optional columns:",leftSection:_.jsx(sKe,{}),variant:"filled"}),_.jsx(Rf,{h:"md"}),_.jsx(Ee,{mih:300,style:{width:"100%",overflow:"scroll"},children:_.jsxs(Cn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(Cn.Thead,{children:_.jsx(Cn.Tr,{children:a.header.map(c=>_.jsx(Cn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:_.jsxs(Zt,{direction:"row",justify:"space-between",align:"center",children:[c,!Mfe.includes(c)&&_.jsx(P0,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(b_e,{size:16})})]})},c))})}),_.jsx(Cn.Tbody,{children:a.rows.slice(0,5).map((c,f)=>_.jsx(Cn.Tr,{children:a.header.map(d=>_.jsx(Cn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),_.jsx(Rf,{h:"sm"}),_.jsx(Zt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(et,{children:l})}),_.jsx(Rf,{h:"md"}),_.jsxs($s,{justify:"right",children:[_.jsx(Nn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Nn,{leftSection:_.jsx(y_e,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function vIt(){const e=ym(),{storageEngine:t}=wa(),{answers:n}=Fc(m=>m),[r,i]=N.useState(!1);N.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),Yke();const[s,o]=N.useState(),[a,u]=N.useState(""),l=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=N.useCallback(async()=>{MQ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=N.useState(Math.floor(d/1e3));return N.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),_.jsx(hm,{style:{height:"100%"},children:_.jsx(Zt,{direction:"column",children:r?_.jsx(et,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ga,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(et,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Rf,{h:"lg"}),_.jsx(hm,{children:_.jsx(Bm,{color:"blue"})})]})})})}function bIt(){var d;const e=ym(),t=qm(),n=Wm()||"Notfound",r=e.components[n],i=fY();Yke();const{storageEngine:s}=wa(),o=Bh(),{setAlertModal:a}=jh();if(N.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(vIt,{});if(n==="Notfound")return _.jsx(Nv,{email:e.uiConfig.contactEmail});const u=F6(r)&&e.baseComponents?cY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Ga,{text:l}),_.jsx(RO,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(SSt,{currentConfig:u}),u.type==="website"&&_.jsx(ust,{currentConfig:u}),u.type==="image"&&_.jsx(cst,{currentConfig:u}),u.type==="react-component"&&_.jsx(xSt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Ga,{text:l}),_.jsx(RO,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function Bz(e){const[t]=$G();return _.jsx(OG,{...e,to:{pathname:e.to,search:t.toString()}})}function Kke(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=Kke(o,t,n,r),r.includes(o.orderPath))break}return i}function Xke(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=Xke(s,r)}}),n}function _It(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function wIt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=VI(),u=Hm(),l=qm(),c=ym(),[f,{close:d,open:h}]=yw(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?Kke(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return _.jsxs(Jr,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[_.jsx(Jr.Target,{children:_.jsx(Ee,{onMouseEnter:h,onMouseLeave:d,children:_.jsx(cL,{active:g,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(Ee,{children:[i&&_.jsx(XYe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?_.jsx(et,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(et,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(Jr.Dropdown,{onMouseLeave:d,children:_.jsx(et,{size:"sm",children:_.jsxs(Ee,{children:[p.description&&_.jsxs(Ee,{children:[_.jsx(et,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(et,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(et,{children:[_.jsx(et,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(et,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function Uz({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=cv(e.components);return n&&r&&(i=_It(cv(e.components),cv(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx(_.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return _.jsx(wIt,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?gm(u).length-Xke(o,u):0,c=gm(o);return _.jsx(cL,{label:_.jsxs(Ee,{style:{opacity:l>0?1:.5},children:[_.jsx(et,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(YYe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(yc,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(yc,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(Ee,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(Uz,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function Qke(e,t,n,r){e==null||e.nextParticipant(t,n).then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Jke(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>Jke(n,`${t}-${r}`))}}function Lfe({text:e}){return _.jsx(Fa,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(iKe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function EIt(){const{showStudyBrowser:e,sequence:t,metadata:n}=Fc(h=>h),{toggleStudyBrowser:r}=jh(),i=Wm(),s=ym(),o=Bh(),a=VI(),u=f_e(`/${a}`),{storageEngine:l}=wa(),c=N.useMemo(()=>{let h=cv(s.sequence);return h=Jke(h,"root"),h.components.push("end"),h},[s.sequence]),[f,d]=N.useState("participant");return e||i==="end"&&s.uiConfig.autoDownloadStudy?_.jsxs(di.Aside,{p:"0",children:[_.jsx(di.Section,{children:_.jsxs(Zt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(et,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Nn,{variant:"light",leftSection:_.jsx(LG,{size:14}),onClick:()=>Qke(l,s,n,u),size:"xs",disabled:f==="allTrials",children:"Next Participant"}),_.jsx(wy,{onClick:()=>o(r()),mt:1})]})}),_.jsx(di.Section,{grow:!0,component:Kf,p:"xs",pt:0,children:_.jsxs(ts,{value:f,onChange:d,children:[_.jsx(Ee,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(ts.List,{grow:!0,children:[_.jsxs(ts.Tab,{value:"participant",children:["Participant View",_.jsx(Lfe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(ts.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Lfe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(ts.Panel,{value:"participant",children:_.jsx(Uz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!0})}),_.jsx(ts.Panel,{value:"allTrials",children:_.jsx(Uz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!1})})]})})]}):null}var Ffe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zke=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},xIt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},LQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Zke(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):xIt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new SIt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class SIt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TIt=function(e){const t=Zke(e);return LQ.encodeByteArray(t,!0)},l$=function(e){return TIt(e).replace(/\./g,"")},eRe=function(e){try{return LQ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tRe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AIt=()=>tRe().__FIREBASE_DEFAULTS__,CIt=()=>{if(typeof process>"u"||typeof Ffe>"u")return;const e=Ffe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},IIt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&eRe(e[1]);return t&&JSON.parse(t)},j6=()=>{try{return AIt()||CIt()||IIt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},nRe=e=>{var t,n;return(n=(t=j6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},kIt=e=>{const t=nRe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},rRe=()=>{var e;return(e=j6())===null||e===void 0?void 0:e.config},iRe=e=>{var t;return(t=j6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RIt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l$(JSON.stringify(n)),l$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NIt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oo())}function PIt(){var e;const t=(e=j6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DIt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function OIt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $It(){const e=Oo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function MIt(){return!PIt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FQ(){try{return typeof indexedDB=="object"}catch{return!1}}function LIt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIt="FirebaseError";class Wh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=FIt,Object.setPrototypeOf(this,Wh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aS.prototype.create)}}class aS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?jIt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Wh(i,a,r)}}function jIt(e,t){return e.replace(BIt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const BIt=/\{\$([^}]+)}/g;function UIt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function M2(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(jfe(s)&&jfe(o)){if(!M2(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jfe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function zIt(e,t){const n=new VIt(e,t);return n.subscribe.bind(n)}class VIt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HIt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Bj),i.error===void 0&&(i.error=Bj),i.complete===void 0&&(i.complete=Bj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HIt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Bj(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qIt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIt=1e3,GIt=2,YIt=4*60*60*1e3,KIt=.5;function XIt(e,t=WIt,n=GIt){const r=t*Math.pow(n,e),i=Math.round(KIt*r*(Math.random()-.5)*2);return Math.min(YIt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(e){return e&&e._delegate?e._delegate:e}class xh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QIt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new $2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ZIt(t))try{this.getOrInitializeService({instanceIdentifier:S1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=S1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=S1){return this.instances.has(t)}getOptions(t=S1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:JIt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=S1){return this.component?this.component.multipleInstances?t:S1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JIt(e){return e===S1?void 0:e}function ZIt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ekt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new QIt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const tkt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},nkt=Gn.INFO,rkt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},ikt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=rkt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class B6{constructor(t){this.name=t,this._logLevel=nkt,this._logHandler=ikt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tkt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const skt=(e,t)=>t.some(n=>e instanceof n);let Bfe,Ufe;function okt(){return Bfe||(Bfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function akt(){return Ufe||(Ufe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sRe=new WeakMap,zz=new WeakMap,oRe=new WeakMap,Uj=new WeakMap,jQ=new WeakMap;function ukt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(v0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&sRe.set(n,e)}).catch(()=>{}),jQ.set(t,e),t}function lkt(e){if(zz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});zz.set(e,t)}let Vz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return zz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||oRe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return v0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function ckt(e){Vz=e(Vz)}function fkt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(zj(this),t,...n);return oRe.set(r,t.sort?t.sort():[t]),v0(r)}:akt().includes(e)?function(...t){return e.apply(zj(this),t),v0(sRe.get(this))}:function(...t){return v0(e.apply(zj(this),t))}}function dkt(e){return typeof e=="function"?fkt(e):(e instanceof IDBTransaction&&lkt(e),skt(e,okt())?new Proxy(e,Vz):e)}function v0(e){if(e instanceof IDBRequest)return ukt(e);if(Uj.has(e))return Uj.get(e);const t=dkt(e);return t!==e&&(Uj.set(e,t),jQ.set(t,e)),t}const zj=e=>jQ.get(e);function hkt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=v0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(v0(o.result),u.oldVersion,u.newVersion,v0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const pkt=["get","getKey","getAll","getAllKeys","count"],mkt=["put","add","delete","clear"],Vj=new Map;function zfe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Vj.get(t))return Vj.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=mkt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||pkt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Vj.set(t,s),s}ckt(e=>({...e,get:(t,n,r)=>zfe(t,n)||e.get(t,n,r),has:(t,n)=>!!zfe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gkt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ykt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ykt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Hz="@firebase/app",Vfe="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new B6("@firebase/app"),vkt="@firebase/app-compat",bkt="@firebase/analytics-compat",_kt="@firebase/analytics",wkt="@firebase/app-check-compat",Ekt="@firebase/app-check",xkt="@firebase/auth",Skt="@firebase/auth-compat",Tkt="@firebase/database",Akt="@firebase/database-compat",Ckt="@firebase/functions",Ikt="@firebase/functions-compat",kkt="@firebase/installations",Rkt="@firebase/installations-compat",Nkt="@firebase/messaging",Pkt="@firebase/messaging-compat",Dkt="@firebase/performance",Okt="@firebase/performance-compat",$kt="@firebase/remote-config",Mkt="@firebase/remote-config-compat",Lkt="@firebase/storage",Fkt="@firebase/storage-compat",jkt="@firebase/firestore",Bkt="@firebase/vertexai-preview",Ukt="@firebase/firestore-compat",zkt="firebase",Vkt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz="[DEFAULT]",Hkt={[Hz]:"fire-core",[vkt]:"fire-core-compat",[_kt]:"fire-analytics",[bkt]:"fire-analytics-compat",[Ekt]:"fire-app-check",[wkt]:"fire-app-check-compat",[xkt]:"fire-auth",[Skt]:"fire-auth-compat",[Tkt]:"fire-rtdb",[Akt]:"fire-rtdb-compat",[Ckt]:"fire-fn",[Ikt]:"fire-fn-compat",[kkt]:"fire-iid",[Rkt]:"fire-iid-compat",[Nkt]:"fire-fcm",[Pkt]:"fire-fcm-compat",[Dkt]:"fire-perf",[Okt]:"fire-perf-compat",[$kt]:"fire-rc",[Mkt]:"fire-rc-compat",[Lkt]:"fire-gcs",[Fkt]:"fire-gcs-compat",[jkt]:"fire-fst",[Ukt]:"fire-fst-compat",[Bkt]:"fire-vertex","fire-js":"fire-js",[zkt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=new Map,qkt=new Map,Wz=new Map;function Hfe(e,t){try{e.container.addComponent(t)}catch(n){qv.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function km(e){const t=e.name;if(Wz.has(t))return qv.debug(`There were multiple attempts to register component ${t}.`),!1;Wz.set(t,e);for(const n of c$.values())Hfe(n,e);for(const n of qkt.values())Hfe(n,e);return!0}function uS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Yd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wkt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},b0=new aS("app","Firebase",Wkt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gkt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw b0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=Vkt;function aRe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:qz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw b0.create("bad-app-name",{appName:String(i)});if(n||(n=rRe()),!n)throw b0.create("no-options");const s=c$.get(i);if(s){if(M2(n,s.options)&&M2(r,s.config))return s;throw b0.create("duplicate-app",{appName:i})}const o=new ekt(i);for(const u of Wz.values())o.addComponent(u);const a=new Gkt(n,r,o);return c$.set(i,a),a}function BQ(e=qz){const t=c$.get(e);if(!t&&e===qz&&rRe())return aRe();if(!t)throw b0.create("no-app",{appName:e});return t}function Df(e,t,n){var r;let i=(r=Hkt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),qv.warn(a.join(" "));return}km(new xh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ykt="firebase-heartbeat-database",Kkt=1,L2="firebase-heartbeat-store";let Hj=null;function uRe(){return Hj||(Hj=hkt(Ykt,Kkt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(L2)}catch(n){console.warn(n)}}}}).catch(e=>{throw b0.create("idb-open",{originalErrorMessage:e.message})})),Hj}async function Xkt(e){try{const n=(await uRe()).transaction(L2),r=await n.objectStore(L2).get(lRe(e));return await n.done,r}catch(t){if(t instanceof Wh)qv.warn(t.message);else{const n=b0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});qv.warn(n.message)}}}async function qfe(e,t){try{const r=(await uRe()).transaction(L2,"readwrite");await r.objectStore(L2).put(t,lRe(e)),await r.done}catch(n){if(n instanceof Wh)qv.warn(n.message);else{const r=b0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qv.warn(r.message)}}}function lRe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qkt=1024,Jkt=30*24*60*60*1e3;class Zkt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tRt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wfe();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Jkt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Wfe(),{heartbeatsToSend:r,unsentEntries:i}=eRt(this._heartbeatsCache.heartbeats),s=l$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Wfe(){return new Date().toISOString().substring(0,10)}function eRt(e,t=Qkt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Gfe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Gfe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tRt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FQ()?LIt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Xkt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qfe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return qfe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Gfe(e){return l$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nRt(e){km(new xh("platform-logger",t=>new gkt(t),"PRIVATE")),km(new xh("heartbeat",t=>new Zkt(t),"PRIVATE")),Df(Hz,Vfe,e),Df(Hz,Vfe,"esm2017"),Df("fire-js","")}nRt("");function cRe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rRt=cRe,fRe=new aS("auth","Firebase",cRe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f$=new B6("@firebase/auth");function iRt(e,...t){f$.logLevel<=Gn.WARN&&f$.warn(`Auth (${kb}): ${e}`,...t)}function sD(e,...t){f$.logLevel<=Gn.ERROR&&f$.error(`Auth (${kb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(e,...t){throw zQ(e,...t)}function Of(e,...t){return zQ(e,...t)}function UQ(e,t,n){const r=Object.assign(Object.assign({},rRt()),{[t]:n});return new aS("auth","Firebase",r).create(t,{appName:e.name})}function _0(e){return UQ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sRt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Sh(e,"argument-error"),UQ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zQ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return fRe.create(e,...t)}function sn(e,t,...n){if(!e)throw zQ(t,...n)}function zp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw sD(t),new Error(t)}function Rm(e,t){e||zp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function oRt(){return Yfe()==="http:"||Yfe()==="https:"}function Yfe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aRt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oRt()||DIt()||"connection"in navigator)?navigator.onLine:!0}function uRt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Rm(n>t,"Short delay should be less than long delay!"),this.isMobile=NIt()||OIt()}get(){return aRt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VQ(e,t){Rm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dRe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lRt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cRt=new yk(3e4,6e4);function U6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lS(e,t,n,r,i={}){return hRe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=gk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),dRe.fetch()(mRe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function hRe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},lRt),t);try{const i=new fRt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw DN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw DN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw DN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw DN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw UQ(e,c,l);Sh(e,c)}}catch(i){if(i instanceof Wh)throw i;Sh(e,"network-request-failed",{message:String(i)})}}async function pRe(e,t,n,r,i={}){const s=await lS(e,t,n,r,i);return"mfaPendingCredential"in s&&Sh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function mRe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?VQ(e.config,i):`${e.config.apiScheme}://${i}`}class fRt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Of(this.auth,"network-request-failed")),cRt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function DN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Of(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dRt(e,t){return lS(e,"POST","/v1/accounts:delete",t)}async function gRe(e,t){return lS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function hRt(e,t=!1){const n=ri(e),r=await n.getIdToken(t),i=HQ(r);sn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:hC(qj(i.auth_time)),issuedAtTime:hC(qj(i.iat)),expirationTime:hC(qj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qj(e){return Number(e)*1e3}function HQ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return sD("JWT malformed, contained fewer than 3 sections"),null;try{const i=eRe(n);return i?JSON.parse(i):(sD("Failed to decode base64 JWT payload"),null)}catch(i){return sD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Kfe(e){const t=HQ(e);return sn(t,"internal-error"),sn(typeof t.exp<"u","internal-error"),sn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Wh&&pRt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function pRt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mRt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hC(this.lastLoginAt),this.creationTime=hC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await F2(e,gRe(n,{idToken:r}));sn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?yRe(s.providerUserInfo):[],a=yRt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yz(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function gRt(e){const t=ri(e);await d$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yRt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function yRe(e){return e.map(t=>{var{providerId:n}=t,r=TI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vRt(e,t){const n=await hRe(e,{},async()=>{const r=gk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=mRe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",dRe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bRt(e,t){return lS(e,"POST","/v2/accounts:revokeToken",U6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){sn(t.idToken,"internal-error"),sn(typeof t.idToken<"u","internal-error"),sn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Kfe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){sn(t.length!==0,"internal-error");const n=Kfe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(sn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await vRt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Lw;return r&&(sn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(sn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(sn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Lw,this.toJSON())}_performRefresh(){return zp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(e,t){sn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Vp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=TI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mRt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yz(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await F2(this,this.stsTokenManager.getToken(this.auth,t));return sn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return hRt(this,t)}reload(){return gRt(this)}_assign(t){this!==t&&(sn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Vp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){sn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await d$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yd(this.auth.app))return Promise.reject(_0(this.auth));const t=await this.getIdToken();return await F2(this,dRt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:T}=n;sn(b&&T,t,"internal-error");const A=Lw.fromJSON(this.name,T);sn(typeof b=="string",t,"internal-error"),mg(f,t.name),mg(d,t.name),sn(typeof w=="boolean",t,"internal-error"),sn(typeof E=="boolean",t,"internal-error"),mg(h,t.name),mg(p,t.name),mg(m,t.name),mg(g,t.name),mg(y,t.name),mg(v,t.name);const C=new Vp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(C.providerData=S.map(I=>Object.assign({},I))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new Lw;i.updateFromServerResponse(n);const s=new Vp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await d$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];sn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?yRe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Lw;a.updateFromIdToken(r);const u=new Vp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Yz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xfe=new Map;function Hp(e){Rm(e instanceof Function,"Expected a class definition");let t=Xfe.get(e);return t?(Rm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Xfe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vRe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}vRe.type="NONE";const Qfe=vRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(e,t,n){return`firebase:${e}:${t}:${n}`}class Fw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=oD(this.userKey,i.apiKey,s),this.fullPersistenceKey=oD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Vp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Fw(Hp(Qfe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Hp(Qfe);const o=oD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Vp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Fw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Fw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jfe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(wRe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bRe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xRe(t))return"Blackberry";if(SRe(t))return"Webos";if(qQ(t))return"Safari";if((t.includes("chrome/")||_Re(t))&&!t.includes("edge/"))return"Chrome";if(ERe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bRe(e=Oo()){return/firefox\//i.test(e)}function qQ(e=Oo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _Re(e=Oo()){return/crios\//i.test(e)}function wRe(e=Oo()){return/iemobile/i.test(e)}function ERe(e=Oo()){return/android/i.test(e)}function xRe(e=Oo()){return/blackberry/i.test(e)}function SRe(e=Oo()){return/webos/i.test(e)}function z6(e=Oo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _Rt(e=Oo()){var t;return z6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function wRt(){return $It()&&document.documentMode===10}function TRe(e=Oo()){return z6(e)||ERe(e)||SRe(e)||xRe(e)||/windows phone/i.test(e)||wRe(e)}function ERt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ARe(e,t=[]){let n;switch(e){case"Browser":n=Jfe(Oo());break;case"Worker":n=`${Jfe(Oo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xRt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SRt(e,t={}){return lS(e,"GET","/v2/passwordPolicy",U6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TRt=6;class ARt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TRt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CRt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zfe(this),this.idTokenSubscription=new Zfe(this),this.beforeStateQueue=new xRt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fRe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Hp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Fw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await gRe(this,{idToken:t}),r=await Vp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Yd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return sn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await d$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=uRt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Yd(this.app))return Promise.reject(_0(this));const n=t?ri(t):null;return n&&sn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&sn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Yd(this.app)?Promise.reject(_0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Yd(this.app)?Promise.reject(_0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await SRt(this),n=new ARt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new aS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await bRt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Hp(t)||this._popupRedirectResolver;sn(n,this,"argument-error"),this.redirectPersistenceManager=await Fw.create(this,[Hp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(sn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return sn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ARe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&iRt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vk(e){return ri(e)}class Zfe{constructor(t){this.auth=t,this.observer=null,this.addObserver=zIt(n=>this.observer=n)}get next(){return sn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WQ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function IRt(e){WQ=e}function kRt(e){return WQ.loadJS(e)}function RRt(){return WQ.gapiScript}function NRt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PRt(e,t){const n=uS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(M2(s,t??{}))return i;Sh(i,"already-initialized")}return n.initialize({options:t})}function DRt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function ORt(e,t,n){const r=vk(e);sn(r._canInitEmulator,r,"emulator-config-failed"),sn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=CRe(t),{host:o,port:a}=$Rt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),MRt()}function CRe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function $Rt(e){const t=CRe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ede(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:ede(o)}}}function ede(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function MRt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IRe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zp("not implemented")}_getIdTokenResponse(t){return zp("not implemented")}_linkToIdToken(t,n){return zp("not implemented")}_getReauthenticationResolver(t){return zp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(e,t){return pRe(e,"POST","/v1/accounts:signInWithIdp",U6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LRt="http://localhost";class Wv extends IRe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Wv(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Sh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=TI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Wv(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return jw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,jw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,jw(t,n)}buildRequest(){const t={requestUri:LRt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=gk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GQ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk extends GQ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends bk{constructor(){super("facebook.com")}static credential(t){return Wv._fromParams({providerId:Lg.PROVIDER_ID,signInMethod:Lg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lg.credentialFromTaggedObject(t)}static credentialFromError(t){return Lg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lg.credential(t.oauthAccessToken)}catch{return null}}}Lg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Lg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends bk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Wv._fromParams({providerId:Dp.PROVIDER_ID,signInMethod:Dp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Dp.credentialFromTaggedObject(t)}static credentialFromError(t){return Dp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Dp.credential(n,r)}catch{return null}}}Dp.GOOGLE_SIGN_IN_METHOD="google.com";Dp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends bk{constructor(){super("github.com")}static credential(t){return Wv._fromParams({providerId:Fg.PROVIDER_ID,signInMethod:Fg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Fg.credentialFromTaggedObject(t)}static credentialFromError(t){return Fg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Fg.credential(t.oauthAccessToken)}catch{return null}}}Fg.GITHUB_SIGN_IN_METHOD="github.com";Fg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends bk{constructor(){super("twitter.com")}static credential(t,n){return Wv._fromParams({providerId:jg.PROVIDER_ID,signInMethod:jg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return jg.credentialFromTaggedObject(t)}static credentialFromError(t){return jg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return jg.credential(n,r)}catch{return null}}}jg.TWITTER_SIGN_IN_METHOD="twitter.com";jg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FRt(e,t){return pRe(e,"POST","/v1/accounts:signUp",U6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Vp._fromIdTokenResponse(t,r,i),o=tde(r);return new J0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=tde(r);return new J0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function tde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jRt(e){var t;if(Yd(e.app))return Promise.reject(_0(e));const n=vk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new J0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await FRt(n,{returnSecureToken:!0}),i=await J0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h$ extends Wh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,h$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new h$(t,n,r,i)}}function kRe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?h$._fromErrorAndOperation(e,s,t,r):s})}async function BRt(e,t,n=!1){const r=await F2(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return J0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function URt(e,t,n=!1){const{auth:r}=e;if(Yd(r.app))return Promise.reject(_0(r));const i="reauthenticate";try{const s=await F2(e,kRe(r,i,t,e),n);sn(s.idToken,r,"internal-error");const o=HQ(s.idToken);sn(o,r,"internal-error");const{sub:a}=o;return sn(e.uid===a,r,"user-mismatch"),J0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Sh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zRt(e,t,n=!1){if(Yd(e.app))return Promise.reject(_0(e));const r="signIn",i=await kRe(e,r,t),s=await J0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function VRt(e,t,n,r){return ri(e).onIdTokenChanged(t,n,r)}function HRt(e,t,n){return ri(e).beforeAuthStateChanged(t,n)}function qRt(e,t,n,r){return ri(e).onAuthStateChanged(t,n,r)}function WRt(e){return ri(e).signOut()}const p$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RRe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(p$,"1"),this.storage.removeItem(p$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GRt(){const e=Oo();return qQ(e)||z6(e)}const YRt=1e3,KRt=10;class NRe extends RRe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=GRt()&&ERt(),this.fallbackToPolling=TRe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);wRt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,KRt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},YRt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}NRe.type="LOCAL";const XRt=NRe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PRe extends RRe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}PRe.type="SESSION";const DRe=PRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QRt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new V6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await QRt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}V6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YQ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JRt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=YQ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(){return window}function ZRt(e){ah().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ORe(){return typeof ah().WorkerGlobalScope<"u"&&typeof ah().importScripts=="function"}async function eNt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tNt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function nNt(){return ORe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Re="firebaseLocalStorageDb",rNt=1,m$="firebaseLocalStorage",MRe="fbase_key";class _k{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function H6(e,t){return e.transaction([m$],t?"readwrite":"readonly").objectStore(m$)}function iNt(){const e=indexedDB.deleteDatabase($Re);return new _k(e).toPromise()}function Kz(){const e=indexedDB.open($Re,rNt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(m$,{keyPath:MRe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(m$)?t(r):(r.close(),await iNt(),t(await Kz()))})})}async function nde(e,t,n){const r=H6(e,!0).put({[MRe]:t,value:n});return new _k(r).toPromise()}async function sNt(e,t){const n=H6(e,!1).get(t),r=await new _k(n).toPromise();return r===void 0?null:r.value}function rde(e,t){const n=H6(e,!0).delete(t);return new _k(n).toPromise()}const oNt=800,aNt=3;class LRe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Kz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>aNt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ORe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=V6._getInstance(nNt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await eNt(),!this.activeServiceWorker)return;this.sender=new JRt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||tNt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Kz();return await nde(t,p$,"1"),await rde(t,p$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>sNt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=H6(i,!1).getAll();return new _k(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oNt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LRe.type="LOCAL";const uNt=LRe;new yk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FRe(e,t){return t?Hp(t):(sn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KQ extends IRe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return jw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return jw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return jw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function lNt(e){return zRt(e.auth,new KQ(e),e.bypassAuthState)}function cNt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),URt(n,new KQ(e),e.bypassAuthState)}async function fNt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),BRt(n,new KQ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jRe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return lNt;case"linkViaPopup":case"linkViaRedirect":return fNt;case"reauthViaPopup":case"reauthViaRedirect":return cNt;default:Sh(this.auth,"internal-error")}}resolve(t){Rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dNt=new yk(2e3,1e4);async function hNt(e,t,n){if(Yd(e.app))return Promise.reject(Of(e,"operation-not-supported-in-this-environment"));const r=vk(e);sRt(e,t,GQ);const i=FRe(r,n);return new nv(r,"signInViaPopup",t,i).executeNotNull()}class nv extends jRe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,nv.currentPopupAction&&nv.currentPopupAction.cancel(),nv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return sn(t,this.auth,"internal-error"),t}async onExecution(){Rm(this.filter.length===1,"Popup operations only handle one event");const t=YQ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Of(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Of(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Of(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,dNt.get())};t()}}nv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pNt="pendingRedirect",aD=new Map;class mNt extends jRe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=aD.get(this.auth._key());if(!t){try{const r=await gNt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}aD.set(this.auth._key(),t)}return this.bypassAuthState||aD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gNt(e,t){const n=bNt(t),r=vNt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function yNt(e,t){aD.set(e._key(),t)}function vNt(e){return Hp(e._redirectPersistence)}function bNt(e){return oD(pNt,e.config.apiKey,e.name)}async function _Nt(e,t,n=!1){if(Yd(e.app))return Promise.reject(_0(e));const r=vk(e),i=FRe(r,t),o=await new mNt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wNt=10*60*1e3;class ENt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!xNt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!BRe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Of(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=wNt&&this.cachedEventUids.clear(),this.cachedEventUids.has(ide(t))}saveEventToCache(t){this.cachedEventUids.add(ide(t)),this.lastProcessedEventTime=Date.now()}}function ide(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function BRe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function xNt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BRe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SNt(e,t={}){return lS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TNt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ANt=/^https?/;async function CNt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await SNt(e);for(const n of t)try{if(INt(n))return}catch{}Sh(e,"unauthorized-domain")}function INt(e){const t=Gz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ANt.test(n))return!1;if(TNt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kNt=new yk(3e4,6e4);function sde(){const e=ah().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function RNt(e){return new Promise((t,n)=>{var r,i,s;function o(){sde(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{sde(),n(Of(e,"network-request-failed"))},timeout:kNt.get()})}if(!((i=(r=ah().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=ah().gapi)===null||s===void 0)&&s.load)o();else{const a=NRt("iframefcb");return ah()[a]=()=>{gapi.load?o():n(Of(e,"network-request-failed"))},kRt(`${RRt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw uD=null,t})}let uD=null;function NNt(e){return uD=uD||RNt(e),uD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PNt=new yk(5e3,15e3),DNt="__/auth/iframe",ONt="emulator/auth/iframe",$Nt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MNt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LNt(e){const t=e.config;sn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?VQ(t,ONt):`https://${e.config.authDomain}/${DNt}`,r={apiKey:t.apiKey,appName:e.name,v:kb},i=MNt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gk(r).slice(1)}`}async function FNt(e){const t=await NNt(e),n=ah().gapi;return sn(n,e,"internal-error"),t.open({where:document.body,url:LNt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$Nt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Of(e,"network-request-failed"),a=ah().setTimeout(()=>{s(o)},PNt.get());function u(){ah().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jNt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BNt=500,UNt=600,zNt="_blank",VNt="http://localhost";class ode{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HNt(e,t,n,r=BNt,i=UNt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},jNt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Oo().toLowerCase();n&&(a=_Re(l)?zNt:n),bRe(l)&&(t=t||VNt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(_Rt(l)&&a!=="_self")return qNt(t||"",a),new ode(null);const f=window.open(t||"",a,c);sn(f,e,"popup-blocked");try{f.focus()}catch{}return new ode(f)}function qNt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WNt="__/auth/handler",GNt="emulator/auth/handler",YNt=encodeURIComponent("fac");async function ade(e,t,n,r,i,s){sn(e.config.authDomain,e,"auth-domain-config-required"),sn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kb,eventId:i};if(t instanceof GQ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",UIt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof bk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${YNt}=${encodeURIComponent(u)}`:"";return`${KNt(e)}?${gk(a).slice(1)}${l}`}function KNt({config:e}){return e.emulator?VQ(e,GNt):`https://${e.authDomain}/${WNt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="webStorageSupport";class XNt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DRe,this._completeRedirectFn=_Nt,this._overrideRedirectResult=yNt}async _openPopup(t,n,r,i){var s;Rm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ade(t,n,r,Gz(),i);return HNt(t,o,YQ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await ade(t,n,r,Gz(),i);return ZRt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Rm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await FNt(t),r=new ENt(t);return n.register("authEvent",i=>(sn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Wj,{type:Wj},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Wj];o!==void 0&&n(!!o),Sh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CNt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return TRe()||qQ()||z6()}}const URe=XNt;var ude="@firebase/auth",lde="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QNt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){sn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JNt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZNt(e){km(new xh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;sn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ARe(e)},l=new CRt(r,i,s,u);return DRt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),km(new xh("auth-internal",t=>{const n=vk(t.getProvider("auth").getImmediate());return(r=>new QNt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Df(ude,lde,JNt(e)),Df(ude,lde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ePt=5*60,tPt=iRe("authIdTokenMaxAge")||ePt;let cde=null;const nPt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tPt)return;const i=n==null?void 0:n.token;cde!==i&&(cde=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function g$(e=BQ()){const t=uS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=PRt(e,{popupRedirectResolver:URe,persistence:[uNt,XRt,DRe]}),r=iRe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=nPt(s.toString());HRt(n,o,()=>o(n.currentUser)),VRt(n,a=>o(a))}}const i=nRe("auth");return i&&ORt(n,`http://${i}`),n}function rPt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}IRt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Of("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rPt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZNt("Browser");var iPt="firebase",sPt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Df(iPt,sPt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zRe="firebasestorage.googleapis.com",VRe="storageBucket",oPt=2*60*1e3,aPt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Wh{constructor(t,n,r=0){super(Gj(t),`Firebase Storage: ${n} (${Gj(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Gj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xi||(Xi={}));function Gj(e){return"storage/"+e}function XQ(){const e="An unknown error occurred, please check the error payload for server response.";return new Qi(Xi.UNKNOWN,e)}function uPt(e){return new Qi(Xi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function lPt(e){return new Qi(Xi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function cPt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qi(Xi.UNAUTHENTICATED,e)}function fPt(){return new Qi(Xi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dPt(e){return new Qi(Xi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function hPt(){return new Qi(Xi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pPt(){return new Qi(Xi.CANCELED,"User canceled the upload/download.")}function mPt(e){return new Qi(Xi.INVALID_URL,"Invalid URL '"+e+"'.")}function gPt(e){return new Qi(Xi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function yPt(){return new Qi(Xi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VRe+"' property when initializing the app?")}function vPt(){return new Qi(Xi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bPt(){return new Qi(Xi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _Pt(e){return new Qi(Xi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Xz(e){return new Qi(Xi.INVALID_ARGUMENT,e)}function HRe(){return new Qi(Xi.APP_DELETED,"The Firebase app was deleted.")}function wPt(e){return new Qi(Xi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pC(e,t){return new Qi(Xi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function mT(e){throw new Qi(Xi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=za.makeFromUrl(t,n)}catch{return new za(t,"")}if(r.path==="")return r;throw gPt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===zRe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let A=S[E.indices.path];A||(A=""),r=new za(T,A),E.postModify(r);break}}if(r==null)throw mPt(t);return r}}class EPt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xPt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function SPt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TPt(e){return e!==void 0}function APt(e){return typeof e=="object"&&!Array.isArray(e)}function QQ(e){return typeof e=="string"||e instanceof String}function fde(e){return JQ()&&e instanceof Blob}function JQ(){return typeof Blob<"u"}function Qz(e,t,n,r){if(r<t)throw Xz(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Xz(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function qRe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pv;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(pv||(pv={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CPt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IPt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new ON(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===pv.NO_ERROR,u=s.getStatus();if(!a||CPt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===pv.ABORT;r(!1,new ON(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new ON(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());TPt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=XQ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?HRe():pPt();o(u)}else{const u=hPt();o(u)}};this.canceled_?n(!1,new ON(!1,null,!0)):this.backoffId_=xPt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&SPt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ON{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function kPt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function RPt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function NPt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function PPt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function DPt(e,t,n,r,i,s,o=!0){const a=qRe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return NPt(l,t),kPt(l,n),RPt(l,s),PPt(l,r),new IPt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OPt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function $Pt(...e){const t=OPt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(JQ())return new Blob(e);throw new Qi(Xi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MPt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LPt(e){if(typeof atob>"u")throw _Pt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yj{constructor(t,n){this.data=t,this.contentType=n||null}}function FPt(e,t){switch(e){case Kd.RAW:return new Yj(WRe(t));case Kd.BASE64:case Kd.BASE64URL:return new Yj(GRe(e,t));case Kd.DATA_URL:return new Yj(BPt(t),UPt(t))}throw XQ()}function WRe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function jPt(e){let t;try{t=decodeURIComponent(e)}catch{throw pC(Kd.DATA_URL,"Malformed data URL.")}return WRe(t)}function GRe(e,t){switch(e){case Kd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw pC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Kd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw pC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=LPt(t)}catch(i){throw i.message.includes("polyfill")?i:pC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class YRe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw pC(Kd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zPt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function BPt(e){const t=new YRe(e);return t.base64?GRe(Kd.BASE64,t.rest):jPt(t.rest)}function UPt(e){return new YRe(e).contentType}function zPt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,n){let r=0,i="";fde(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(fde(this.data_)){const r=this.data_,i=MPt(r,t,n);return i===null?null:new Bg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Bg(r,!0)}}static getBlob(...t){if(JQ()){const n=t.map(r=>r instanceof Bg?r.data_:r);return new Bg($Pt.apply(null,n))}else{const n=t.map(o=>QQ(o)?FPt(Kd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Bg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZQ(e){let t;try{t=JSON.parse(e)}catch{return null}return APt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VPt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function HPt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function KRe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qPt(e,t){return t}class ka{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||qPt}}let $N=null;function WPt(e){return!QQ(e)||e.length<2?e:KRe(e)}function XRe(){if($N)return $N;const e=[];e.push(new ka("bucket")),e.push(new ka("generation")),e.push(new ka("metageneration")),e.push(new ka("name","fullPath",!0));function t(s,o){return WPt(o)}const n=new ka("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ka("size");return i.xform=r,e.push(i),e.push(new ka("timeCreated")),e.push(new ka("updated")),e.push(new ka("md5Hash",null,!0)),e.push(new ka("cacheControl",null,!0)),e.push(new ka("contentDisposition",null,!0)),e.push(new ka("contentEncoding",null,!0)),e.push(new ka("contentLanguage",null,!0)),e.push(new ka("contentType",null,!0)),e.push(new ka("metadata","customMetadata",!0)),$N=e,$N}function GPt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new za(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function YPt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return GPt(r,e),r}function QRe(e,t,n){const r=ZQ(t);return r===null?null:YPt(e,r,n)}function KPt(e,t,n,r){const i=ZQ(t);if(i===null||!QQ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=wk(d,n,r),p=qRe({alt:"media",token:l});return h+p})[0]}function XPt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dde="prefixes",hde="items";function QPt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[dde])for(const i of n[dde]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new za(t,s));r.prefixes.push(o)}if(n[hde])for(const i of n[hde]){const s=e._makeStorageReference(new za(t,i.name));r.items.push(s)}return r}function JPt(e,t,n){const r=ZQ(n);return r===null?null:QPt(e,t,r)}class q6{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eJ(e){if(!e)throw XQ()}function ZPt(e,t){function n(r,i){const s=QRe(e,i,t);return eJ(s!==null),s}return n}function eDt(e,t){function n(r,i){const s=JPt(e,t,i);return eJ(s!==null),s}return n}function tDt(e,t){function n(r,i){const s=QRe(e,i,t);return eJ(s!==null),KPt(s,i,e.host,e._protocol)}return n}function tJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=fPt():i=cPt():n.getStatus()===402?i=lPt(e.bucket):n.getStatus()===403?i=dPt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function JRe(e){const t=tJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=uPt(e.path)),s.serverResponse=i.serverResponse,s}return n}function nDt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=wk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new q6(a,u,eDt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=tJ(t),c}function rDt(e,t,n){const r=t.fullServerUrl(),i=wk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new q6(i,s,tDt(e,n),o);return a.errorHandler=JRe(t),a}function iDt(e,t){const n=t.fullServerUrl(),r=wk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new q6(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=JRe(t),a}function sDt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function oDt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=sDt(null,t)),r}function aDt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=oDt(t,r,i),c=XPt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Bg.getBlob(f,r,d);if(h===null)throw vPt();const p={name:l.fullPath},m=wk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new q6(m,g,ZPt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=tJ(t),v}class uDt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=pv.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=pv.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=pv.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw mT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class lDt extends uDt{initXhr(){this.xhr_.responseType="text"}}function W6(){return new lDt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(t,n){this._service=t,n instanceof za?this._location=n:this._location=za.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Gv(t,n)}get root(){const t=new za(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KRe(this._location.path)}get storage(){return this._service}get parent(){const t=VPt(this._location.path);if(t===null)return null;const n=new za(this._location.bucket,t);return new Gv(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw wPt(t)}}function cDt(e,t,n){e._throwIfRoot("uploadBytes");const r=aDt(e.storage,e._location,XRe(),new Bg(t,!0),n);return e.storage.makeRequestWithTokens(r,W6).then(i=>({metadata:i,ref:e}))}function fDt(e){const t={prefixes:[],items:[]};return ZRe(e,t).then(()=>t)}async function ZRe(e,t,n){const i=await dDt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await ZRe(e,t,i.nextPageToken)}function dDt(e,t){t!=null&&typeof t.maxResults=="number"&&Qz("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=nDt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,W6)}function hDt(e){e._throwIfRoot("getDownloadURL");const t=rDt(e.storage,e._location,XRe());return e.storage.makeRequestWithTokens(t,W6).then(n=>{if(n===null)throw bPt();return n})}function pDt(e){e._throwIfRoot("deleteObject");const t=iDt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,W6)}function mDt(e,t){const n=HPt(e._location.path,t),r=new za(e._location.bucket,n);return new Gv(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gDt(e){return/^[A-Za-z]+:\/\//.test(e)}function yDt(e,t){return new Gv(e,t)}function eNe(e,t){if(e instanceof nJ){const n=e;if(n._bucket==null)throw yPt();const r=new Gv(n,n._bucket);return t!=null?eNe(r,t):r}else return t!==void 0?mDt(e,t):e}function vDt(e,t){if(t&&gDt(t)){if(e instanceof nJ)return yDt(e,t);throw Xz("To use ref(service, url), the first argument must be a Storage instance.")}else return eNe(e,t)}function pde(e,t){const n=t==null?void 0:t[VRe];return n==null?null:za.makeFromBucketSpec(n,e)}function bDt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:RIt(i,e.app.options.projectId))}class nJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=zRe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oPt,this._maxUploadRetryTime=aPt,this._requests=new Set,i!=null?this._bucket=za.makeFromBucketSpec(i,this._host):this._bucket=pde(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=za.makeFromBucketSpec(this._url,t):this._bucket=pde(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Qz("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Qz("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Gv(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new EPt(HRe());{const o=DPt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const mde="@firebase/storage",gde="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tNe="storage";function Kj(e,t,n){return e=ri(e),cDt(e,t,n)}function gT(e){return e=ri(e),fDt(e)}function Xj(e){return e=ri(e),hDt(e)}function yde(e){return e=ri(e),pDt(e)}function Gc(e,t){return e=ri(e),vDt(e,t)}function _Dt(e=BQ(),t){e=ri(e);const r=uS(e,tNe).getImmediate({identifier:t}),i=kIt("storage");return i&&wDt(r,...i),r}function wDt(e,t,n,r={}){bDt(e,t,n,r)}function EDt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new nJ(n,r,i,t,kb)}function xDt(){km(new xh(tNe,EDt,"PUBLIC").setMultipleInstances(!0)),Df(mde,gde,""),Df(mde,gde,"esm2017")}xDt();var vde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mv,nNe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,A){function C(){}C.prototype=A.prototype,T.D=A.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(I,R,M){for(var P=Array(arguments.length-2),O=2;O<arguments.length;O++)P[O-2]=arguments[O];return A.prototype[R].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,A,C){C||(C=0);var I=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)I[R]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(R=0;16>R;++R)I[R]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=T.g[0],C=T.g[1],R=T.g[2];var M=T.g[3],P=A+(M^C&(R^M))+I[0]+3614090360&4294967295;A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[1]+3905402710&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[2]+606105819&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[3]+3250441966&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[4]+4118548399&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[5]+1200080426&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[6]+2821735955&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[7]+4249261313&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[8]+1770035416&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[9]+2336552879&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[10]+4294925233&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[11]+2304563134&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(M^C&(R^M))+I[12]+1804603682&4294967295,A=C+(P<<7&4294967295|P>>>25),P=M+(R^A&(C^R))+I[13]+4254626195&4294967295,M=A+(P<<12&4294967295|P>>>20),P=R+(C^M&(A^C))+I[14]+2792965006&4294967295,R=M+(P<<17&4294967295|P>>>15),P=C+(A^R&(M^A))+I[15]+1236535329&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(R^M&(C^R))+I[1]+4129170786&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[6]+3225465664&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[11]+643717713&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[0]+3921069994&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[5]+3593408605&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[10]+38016083&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[15]+3634488961&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[4]+3889429448&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[9]+568446438&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[14]+3275163606&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[3]+4107603335&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[8]+1163531501&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^M&(C^R))+I[13]+2850285829&4294967295,A=C+(P<<5&4294967295|P>>>27),P=M+(C^R&(A^C))+I[2]+4243563512&4294967295,M=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(M^A))+I[7]+1735328473&4294967295,R=M+(P<<14&4294967295|P>>>18),P=C+(M^A&(R^M))+I[12]+2368359562&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(C^R^M)+I[5]+4294588738&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[8]+2272392833&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[11]+1839030562&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[14]+4259657740&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[1]+2763975236&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[4]+1272893353&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[7]+4139469664&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[10]+3200236656&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[13]+681279174&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[0]+3936430074&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[3]+3572445317&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[6]+76029189&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^M)+I[9]+3654602809&4294967295,A=C+(P<<4&4294967295|P>>>28),P=M+(A^C^R)+I[12]+3873151461&4294967295,M=A+(P<<11&4294967295|P>>>21),P=R+(M^A^C)+I[15]+530742520&4294967295,R=M+(P<<16&4294967295|P>>>16),P=C+(R^M^A)+I[2]+3299628645&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(R^(C|~M))+I[0]+4096336452&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[7]+1126891415&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[14]+2878612391&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[5]+4237533241&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[12]+1700485571&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[3]+2399980690&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[10]+4293915773&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[1]+2240044497&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[8]+1873313359&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[15]+4264355552&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[6]+2734768916&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[13]+1309151649&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~M))+I[4]+4149444226&4294967295,A=C+(P<<6&4294967295|P>>>26),P=M+(C^(A|~R))+I[11]+3174756917&4294967295,M=A+(P<<10&4294967295|P>>>22),P=R+(A^(M|~C))+I[2]+718787259&4294967295,R=M+(P<<15&4294967295|P>>>17),P=C+(M^(R|~A))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var C=A-this.blockSize,I=this.B,R=this.h,M=0;M<A;){if(R==0)for(;M<=C;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<A;)if(I[R++]=T.charCodeAt(M++),R==this.blockSize){i(this,I),R=0;break}}else for(;M<A;)if(I[R++]=T[M++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var C=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=C&255,C/=256;for(this.u(T),T=Array(16),A=C=0;4>A;++A)for(var I=0;32>I;I+=8)T[C++]=this.g[A]>>>I&255;return T};function s(T,A){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=A(T)}function o(T,A){this.h=A;for(var C=[],I=!0,R=T.length-1;0<=R;R--){var M=T[R]|0;I&&M==A||(C[R]=M,I=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?s(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var A=[],C=1,I=0;T>=C;I++)A[I]=T/C|0,C*=4294967296;return new o(A,0)}function c(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return g(c(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),I=f,R=0;R<T.length;R+=8){var M=Math.min(8,T.length-R),P=parseInt(T.substring(R,R+M),A);8>M?(M=l(Math.pow(A,M)),I=I.j(M).add(l(P))):(I=I.j(C),I=I.add(l(P)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,A=1,C=0;C<this.g.length;C++){var I=this.i(C);T+=(0<=I?I:4294967296+I)*A,A*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var A=l(Math.pow(T,6)),C=this,I="";;){var R=w(C,A).g;C=y(C,R.j(A));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=R,p(C))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var A=T.g.length,C=[],I=0;I<A;I++)C[I]=~T.g[I];return new o(C,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0,R=0;R<=A;R++){var M=I+(this.i(R)&65535)+(T.i(R)&65535),P=(M>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=P>>>16,M&=65535,P&=65535,C[R]=P<<16|M}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(T,A){return T.add(g(A))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var A=this.g.length+T.g.length,C=[],I=0;I<2*A;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<T.g.length;R++){var M=this.i(I)>>>16,P=this.i(I)&65535,O=T.i(R)>>>16,F=T.i(R)&65535;C[2*I+2*R]+=P*F,v(C,2*I+2*R),C[2*I+2*R+1]+=M*F,v(C,2*I+2*R+1),C[2*I+2*R+1]+=P*O,v(C,2*I+2*R+1),C[2*I+2*R+2]+=M*O,v(C,2*I+2*R+2)}for(I=0;I<A;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=A;I<2*A;I++)C[I]=0;return new o(C,0)};function v(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function b(T,A){this.g=T,this.h=A}function w(T,A){if(p(A))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return A=w(g(T),A),new b(g(A.g),g(A.h));if(m(A))return A=w(T,g(A)),new b(g(A.g),A.h);if(30<T.g.length){if(m(T)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,I=A;0>=I.l(T);)C=E(C),I=E(I);var R=S(C,1),M=S(I,1);for(I=S(I,2),C=S(C,2);!p(I);){var P=M.add(I);0>=P.l(T)&&(R=R.add(C),M=P),I=S(I,1),C=S(C,1)}return A=y(T,R.j(A)),new b(R,A)}for(R=f;0<=T.l(A);){for(C=Math.max(1,Math.floor(T.m()/A.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=l(C),P=M.j(A);m(P)||0<P.l(T);)C-=I,M=l(C),P=M.j(A);p(M)&&(M=d),R=R.add(M),T=y(T,P)}return new b(R,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)&T.i(I);return new o(C,this.h&T.h)},e.or=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)|T.i(I);return new o(C,this.h|T.h)},e.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)^T.i(I);return new o(C,this.h^T.h)};function E(T){for(var A=T.g.length+1,C=[],I=0;I<A;I++)C[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(C,T.h)}function S(T,A){var C=A>>5;A%=32;for(var I=T.g.length-C,R=[],M=0;M<I;M++)R[M]=0<A?T.i(M+C)>>>A|T.i(M+C+1)<<32-A:T.i(M+C);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nNe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,mv=o}).apply(typeof vde<"u"?vde:typeof self<"u"?self:typeof window<"u"?window:{});var MN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rNe,iNe,fA,sNe,lD,Jz,oNe,aNe,uNe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,$,V){return x==Array.prototype||x==Object.prototype||(x[$]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof MN=="object"&&MN];for(var $=0;$<x.length;++$){var V=x[$];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,$){if($)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var _e=x[Q];if(!(_e in V))break e;V=V[_e]}x=x[x.length-1],Q=V[x],$=$(Q),$!=Q&&$!=null&&t(V,x,{configurable:!0,writable:!0,value:$})}}function s(x,$){x instanceof String&&(x+="");var V=0,Q=!1,_e={next:function(){if(!Q&&V<x.length){var De=V++;return{value:$(De,x[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(x){return x||function(){return s(this,function($,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var $=typeof x;return $=$!="object"?$:x?Array.isArray(x)?"array":$:"null",$=="array"||$=="object"&&typeof x.length=="number"}function l(x){var $=typeof x;return $=="object"&&x!=null||$=="function"}function c(x,$,V){return x.call.apply(x.bind,arguments)}function f(x,$,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),x.apply($,_e)}}return function(){return x.apply($,arguments)}}function d(x,$,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,$){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,$){function V(){}V.prototype=$.prototype,x.aa=$.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,_e,De){for(var ft=Array(arguments.length-2),qr=2;qr<arguments.length;qr++)ft[qr-2]=arguments[qr];return $.prototype[_e].apply(Q,ft)}}function m(x){const $=x.length;if(0<$){const V=Array($);for(let Q=0;Q<$;Q++)V[Q]=x[Q];return V}return[]}function g(x,$){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const _e=x.length||0,De=Q.length||0;x.length=_e+De;for(let ft=0;ft<De;ft++)x[_e+ft]=Q[ft]}else x.push(Q)}}class y{constructor($,V){this.i=$,this.j=V,this.h=0,this.g=null}get(){let $;return 0<this.h?(this.h--,$=this.g,this.g=$.next,$.next=null):$=this.i(),$}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(x,$,V){for(const Q in x)$.call(V,x[Q],Q,x)}function T(x,$){for(const V in x)$.call(void 0,x[V],V,x)}function A(x){const $={};for(const V in x)$[V]=x[V];return $}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(x,$){let V,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(V in Q)x[V]=Q[V];for(let De=0;De<C.length;De++)V=C[De],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function R(x){var $=1;x=x.split(":");const V=[];for(;0<$&&x.length;)V.push(x.shift()),$--;return x.length&&V.push(x.join(":")),V}function M(x){a.setTimeout(()=>{throw x},0)}function P(){var x=H;let $=null;return x.g&&($=x.g,x.g=x.g.next,x.g||(x.h=null),$.next=null),$}class O{constructor(){this.h=this.g=null}add($,V){const Q=F.get();Q.set($,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new L,x=>x.reset());class L{constructor(){this.next=this.g=this.h=null}set($,V){this.h=$,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new O,D=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(V){M(V)}var $=F;$.j(x),100>$.h&&($.h++,x.next=$.g,$.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,$){this.type=x,this.g=this.target=$,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,$=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,$),a.removeEventListener("test",V,$)}catch{}return x}();function G(x,$){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=$,$=x.relatedTarget){if(E){e:{try{w($.nodeName);var _e=!0;break e}catch{}_e=!1}_e||($=null)}}else V=="mouseover"?$=x.fromElement:V=="mouseout"&&($=x.toElement);this.relatedTarget=$,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,$,V,Q,_e){this.listener=x,this.proxy=null,this.src=$,this.type=V,this.capture=!!Q,this.ha=_e,this.key=++de,this.da=this.fa=!1}function ye(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,$,V,Q,_e){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var ft=Ke(x,$,Q,_e);return-1<ft?($=x[ft],V||($.fa=!1)):($=new he($,this.src,De,!!Q,_e),$.fa=V,x.push($)),$};function ve(x,$){var V=$.type;if(V in x.g){var Q=x.g[V],_e=Array.prototype.indexOf.call(Q,$,void 0),De;(De=0<=_e)&&Array.prototype.splice.call(Q,_e,1),De&&(ye($),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,$,V,Q){for(var _e=0;_e<x.length;++_e){var De=x[_e];if(!De.da&&De.listener==$&&De.capture==!!V&&De.ha==Q)return _e}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),gt={};function it(x,$,V,Q,_e){if(Array.isArray($)){for(var De=0;De<$.length;De++)it(x,$[De],V,Q,_e);return null}return V=yt(V),x&&x[ce]?x.K($,V,l(Q)?!!Q.capture:!!Q,_e):be(x,$,V,!1,Q,_e)}function be(x,$,V,Q,_e,De){if(!$)throw Error("Invalid event type");var ft=l(_e)?!!_e.capture:!!_e,qr=me(x);if(qr||(x[Ue]=qr=new Ie(x)),V=qr.add($,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)q||(_e=ft),_e===void 0&&(_e=!1),x.addEventListener($.toString(),Q,_e);else if(x.attachEvent)x.attachEvent(Dt($.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return $.call(x.src,x.listener,V)}const $=We;return x}function ze(x,$,V,Q,_e){if(Array.isArray($))for(var De=0;De<$.length;De++)ze(x,$[De],V,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,V=yt(V),x&&x[ce]?(x=x.i,$=String($).toString(),$ in x.g&&(De=x.g[$],V=Ke(De,V,Q,_e),-1<V&&(ye(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[$],x.h--)))):x&&(x=me(x))&&($=x.g[$.toString()],x=-1,$&&(x=Ke($,V,Q,_e)),(V=-1<x?$[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var $=x.src;if($&&$[ce])ve($.i,x);else{var V=x.type,Q=x.proxy;$.removeEventListener?$.removeEventListener(V,Q,x.capture):$.detachEvent?$.detachEvent(Dt(V),Q):$.addListener&&$.removeListener&&$.removeListener(Q),(V=me($))?(ve(V,x),V.h==0&&(V.src=null,$[Ue]=null)):ye(x)}}}function Dt(x){return x in gt?gt[x]:gt[x]="on"+x}function We(x,$){if(x.da)x=!0;else{$=new G($,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,$)}return x}function me(x){return x=x[Ue],x instanceof Ie?x:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function yt(x){return typeof x=="function"?x:(x[dt]||(x[dt]=function($){return x.handleEvent($)}),x[dt])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(x,$,V,Q){ze(this,x,$,V,Q)};function Ce(x,$){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=$.type||$,typeof $=="string")$=new j($,x);else if($ instanceof j)$.target=$.target||x;else{var _e=$;$=new j(Q,x),I($,_e)}if(_e=!0,V)for(var De=V.length-1;0<=De;De--){var ft=$.g=V[De];_e=He(ft,Q,!0,$)&&_e}if(ft=$.g=x,_e=He(ft,Q,!0,$)&&_e,_e=He(ft,Q,!1,$)&&_e,V)for(De=0;De<V.length;De++)ft=$.g=V[De],_e=He(ft,Q,!1,$)&&_e}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,$;for($ in x.g){for(var V=x.g[$],Q=0;Q<V.length;Q++)ye(V[Q]);delete x.g[$],x.h--}}this.F=null},pe.prototype.K=function(x,$,V,Q){return this.i.add(String(x),$,!1,V,Q)},pe.prototype.L=function(x,$,V,Q){return this.i.add(String(x),$,!0,V,Q)};function He(x,$,V,Q){if($=x.i.g[String($)],!$)return!0;$=$.concat();for(var _e=!0,De=0;De<$.length;++De){var ft=$[De];if(ft&&!ft.da&&ft.capture==V){var qr=ft.listener,ho=ft.ha||ft.src;ft.fa&&ve(x.i,ft),_e=qr.call(ho,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function ut(x,$,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number($)?-1:a.setTimeout(x,$||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const $=x.h;x.h=null,x.m.apply(null,$)}class Ln extends W{constructor($,V){super(),this.m=$,this.l=V,this.h=null,this.i=!1,this.g=null}j($){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(x){W.call(this),this.h=x,this.g={}}p(Tr,W);var Fn=[];function cr(x){S(x.g,function($,V){this.g.hasOwnProperty(V)&&ct($)},x),x.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),cr(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=a.JSON.stringify,Tn=a.JSON.parse,nr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function rr(){}rr.prototype.h=null;function Fo(x){return x.h||(x.h=x.i())}function $i(){}var An={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){j.call(this,"d")}p(Mi,j);function Ar(){j.call(this,"c")}p(Ar,j);var ds={},rp=null;function rl(){return rp=rp||new pe}ds.La="serverreachability";function ld(x){j.call(this,ds.La,x)}p(ld,j);function Er(x){const $=rl();Ce($,new ld($))}ds.STAT_EVENT="statevent";function Ai(x,$){j.call(this,ds.STAT_EVENT,x),this.stat=$}p(Ai,j);function Yr(x){const $=rl();Ce($,new Ai($,x))}ds.Ma="timingevent";function ou(x,$){j.call(this,ds.Ma,x),this.size=$}p(ou,j);function Sa(x,$){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},$)}function Ta(){this.g=!0}Ta.prototype.xa=function(){this.g=!1};function oe(x,$,V,Q,_e,De){x.info(function(){if(x.g)if(De)for(var ft="",qr=De.split("&"),ho=0;ho<qr.length;ho++){var fr=qr[ho].split("=");if(1<fr.length){var zo=fr[0];fr=fr[1];var Vo=zo.split("_");ft=2<=Vo.length&&Vo[1]=="type"?ft+(zo+"="+fr+"&"):ft+(zo+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+$+`
`+V+`
`+ft})}function ee(x,$,V,Q,_e,De,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+$+`
`+V+`
`+De+" "+ft})}function ae(x,$,V,Q){x.info(function(){return"XMLHTTP TEXT ("+$+"): "+xe(x,V)+(Q?" "+Q:"")})}function Se(x,$){x.info(function(){return"TIMEOUT: "+$})}Ta.prototype.info=function(){};function xe(x,$){if(!x.g)return $;if(!$)return null;try{var V=JSON.parse($);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var De=_e[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<_e.length;ft++)_e[ft]=""}}}}return pn(V)}catch{return $}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function On(){}p(On,rr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Vt=new On;function jn(x,$,V,Q){this.j=x,this.i=$,this.l=V,this.R=Q||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dn}function dn(){this.i=null,this.g="",this.h=!1}var ir={},Cr={};function zt(x,$,V){x.L=1,x.v=Bn(Ge($)),x.m=V,x.P=!0,sr(x,null)}function sr(x,$){x.F=Date.now(),Ci(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),yR(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new dn,x.g=jre(x.j,V?$:null,!x.m),0<x.O&&(x.M=new Ln(d(x.Y,x,x.g),x.O)),$=x.U,V=x.g,Q=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(Fn[0]=_e.toString()),_e=Fn);for(var De=0;De<_e.length;De++){var ft=it(V,_e[De],Q||$.handleEvent,!1,$.h||$);if(!ft)break;$.g[ft.key]=ft}$=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),$["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,$)):(x.u="GET",x.g.ea(x.A,x.u,null,$)),Er(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}jn.prototype.ca=function(x){x=x.target;const $=this.M;$&&Ji(x)==3?$.j():this.Y(x)},jn.prototype.Y=function(x){try{if(x==this.g)e:{const Vo=Ji(this.g);var $=this.g.Ba();const Jb=this.g.Z();if(!(3>Vo)&&(Vo!=3||this.g&&(this.h.h||this.g.oa()||Uo(this.g)))){this.J||Vo!=4||$==7||($==8||0>=Jb?Er(3):Er(2)),Kr(this);var V=this.g.Z();this.X=V;t:if(zr(this)){var Q=Uo(this.g);x="";var _e=Q.length,De=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),fo(this);var ft="";break t}this.h.i=new a.TextDecoder}for($=0;$<_e;$++)this.h.h=!0,x+=this.h.i.decode(Q[$],{stream:!(De&&$==_e-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Vo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var qr,ho=this.g;if((qr=ho.g?ho.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(qr)){var fr=qr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,V);else{this.o=!1,this.s=3,Yr(12),Li(this),fo(this);break e}}if(this.P){V=!0;let Hc;for(;!this.J&&this.C<ft.length;)if(Hc=Jn(this,ft),Hc==Cr){Vo==4&&(this.s=4,Yr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Hc==ir){this.s=4,Yr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,Hc,null),Fi(this,Hc);if(zr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vo!=4||ft.length!=0||this.h.h||(this.s=1,Yr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Li(this),fo(this);else if(0<ft.length&&!this.W){this.W=!0;var zo=this.j;zo.g==this&&zo.ba&&!zo.M&&(zo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),d5(zo),zo.M=!0,Yr(11))}}else ae(this.i,this.l,ft,null),Fi(this,ft);Vo==4&&Li(this),this.o&&!this.J&&(Vo==4?$re(this.j,this):(this.o=!1,Ci(this)))}else Jy(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Yr(12)):(this.s=0,Yr(13)),Li(this),fo(this)}}}catch{}finally{}};function zr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Jn(x,$){var V=x.C,Q=$.indexOf(`
`,V);return Q==-1?Cr:(V=Number($.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>$.length?Cr:($=$.slice(Q,Q+V),x.C=Q+V,$)))}jn.prototype.cancel=function(){this.J=!0,Li(this)};function Ci(x){x.S=Date.now()+x.I,Us(x,x.I)}function Us(x,$){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Sa(d(x.ba,x),$)}function Kr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}jn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Se(this.i,this.A),this.L!=2&&(Er(),Yr(17)),Li(this),this.s=2,fo(this)):Us(this,this.S-x)};function fo(x){x.j.G==0||x.J||$re(x.j,x)}function Li(x){Kr(x);var $=x.M;$&&typeof $.ma=="function"&&$.ma(),x.M=null,cr(x.U),x.g&&($=x.g,x.g=null,$.abort(),$.ma())}function Fi(x,$){try{var V=x.j;if(V.G!=0&&(V.g==x||cd(V.h,x))){if(!x.K&&cd(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse($)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)SR(V),ER(V);else break e;f5(V),Yr(18)}}else V.za=_e[1],0<V.za-V.T&&37500>_e[2]&&V.F&&V.v==0&&!V.C&&(V.C=Sa(d(V.Za,V),6e3));if(1>=Wl(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Zy(V,11)}else if((x.K||V.g==x)&&SR(V),!v($))for(_e=V.Da.g.parse($),$=0;$<_e.length;$++){let fr=_e[$];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const zo=fr[3];zo!=null&&(V.la=zo,V.j.info("VER="+V.la));const Vo=fr[4];Vo!=null&&(V.Aa=Vo,V.j.info("SVER="+V.Aa));const Jb=fr[5];Jb!=null&&typeof Jb=="number"&&0<Jb&&(Q=1.5*Jb,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const Hc=x.g;if(Hc){const AR=Hc.g?Hc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(AR){var De=Q.h;De.g||AR.indexOf("spdy")==-1&&AR.indexOf("quic")==-1&&AR.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const h5=Hc.g?Hc.g.getResponseHeader("X-HTTP-Session-Id"):null;h5&&(Q.ya=h5,Nt(Q.I,Q.D,h5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Fre(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var qr=ft,ho=Q.L;ho&&(qr.I=ho),qr.B&&(Kr(qr),Ci(qr)),Q.g=ft}else Dre(Q);0<V.i.length&&xR(V)}else fr[0]!="stop"&&fr[0]!="close"||Zy(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?Zy(V,7):Xb(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}Er(4)}catch{}}var jo=class{constructor(x,$){this.g=x,this.map=$}};function Aa(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zs(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Wl(x){return x.h?1:x.g?x.g.size:0}function cd(x,$){return x.h?x.h==$:x.g?x.g.has($):!1}function Y(x,$){x.g?x.g.add($):x.h=$}function se(x,$){x.h&&x.h==$?x.h=null:x.g&&x.g.has($)&&x.g.delete($)}Aa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let $=x.i;for(const V of x.g.values())$=$.concat(V.D);return $}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var $=[],V=x.length,Q=0;Q<V;Q++)$.push(x[Q]);return $}$=[],V=0;for(Q in x)$[V++]=x[Q];return $}function ge(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var $=[];x=x.length;for(var V=0;V<x;V++)$.push(V);return $}$=[],V=0;for(const Q in x)$[V++]=Q;return $}}}function le(x,$){if(x.forEach&&typeof x.forEach=="function")x.forEach($,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,$,void 0);else for(var V=ge(x),Q=fe(x),_e=Q.length,De=0;De<_e;De++)$.call(void 0,Q[De],V&&V[De],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,$){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),_e=null;if(0<=Q){var De=x[V].substring(0,Q);_e=x[V].substring(Q+1)}else De=x[V];$(De,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,st(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var $=x.i,V=new Gl;V.i=$.i,$.g&&(V.g=new Map($.g),V.h=$.h),hn(this,V),this.m=x.m}else x&&($=String(x).match(Oe))?(this.h=!1,st(this,$[1]||"",!0),this.o=Ir($[2]||""),this.g=Ir($[3]||"",!0),Et(this,$[4]),this.l=Ir($[5]||"",!0),hn(this,$[6]||"",!0),this.m=Ir($[7]||"")):(this.h=!1,this.i=new Gl(null,this.h))}qe.prototype.toString=function(){var x=[],$=this.j;$&&x.push(kr($,fd,!0),":");var V=this.g;return(V||$=="file")&&(x.push("//"),($=this.o)&&x.push(kr($,fd,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(kr(V,V.charAt(0)=="/"?MS:ip,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",kr(V,gR)),x.join("")};function Ge(x){return new qe(x)}function st(x,$,V){x.j=V?Ir($,!0):$,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,$){if($){if($=Number($),isNaN($)||0>$)throw Error("Bad port number "+$);x.s=$}else x.s=null}function hn(x,$,V){$ instanceof Gl?(x.i=$,LS(x.i,x.h)):(V||($=kr($,Yy)),x.i=new Gl($,x.h))}function Nt(x,$,V){x.i.set($,V)}function Bn(x){return Nt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Ir(x,$){return x?$?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function kr(x,$,V){return typeof x=="string"?(x=encodeURI(x).replace($,Bo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Bo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var fd=/[#\/\?@]/g,ip=/[#\?:]/g,MS=/[#\?]/g,Yy=/[#\?@]/g,gR=/#/g;function Gl(x,$){this.h=this.g=null,this.i=x||null,this.j=!!$}function au(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function($,V){x.add(decodeURIComponent($.replace(/\+/g," ")),V)}))}e=Gl.prototype,e.add=function(x,$){au(this),this.i=null,x=op(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push($),this.h+=1,this};function sp(x,$){au(x),$=op(x,$),x.g.has($)&&(x.i=null,x.h-=x.g.get($).length,x.g.delete($))}function Yb(x,$){return au(x),$=op(x,$),x.g.has($)}e.forEach=function(x,$){au(this),this.g.forEach(function(V,Q){V.forEach(function(_e){x.call($,_e,Q,this)},this)},this)},e.na=function(){au(this);const x=Array.from(this.g.values()),$=Array.from(this.g.keys()),V=[];for(let Q=0;Q<$.length;Q++){const _e=x[Q];for(let De=0;De<_e.length;De++)V.push($[Q])}return V},e.V=function(x){au(this);let $=[];if(typeof x=="string")Yb(this,x)&&($=$.concat(this.g.get(op(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)$=$.concat(x[V])}return $},e.set=function(x,$){return au(this),this.i=null,x=op(this,x),Yb(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[$]),this.h+=1,this},e.get=function(x,$){return x?(x=this.V(x),0<x.length?String(x[0]):$):$};function yR(x,$,V){sp(x,$),0<V.length&&(x.i=null,x.g.set(op(x,$),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],$=Array.from(this.g.keys());for(var V=0;V<$.length;V++){var Q=$[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var _e=De;ft[Q]!==""&&(_e+="="+encodeURIComponent(String(ft[Q]))),x.push(_e)}}return this.i=x.join("&")};function op(x,$){return $=String($),x.j&&($=$.toLowerCase()),$}function LS(x,$){$&&!x.j&&(au(x),x.i=null,x.g.forEach(function(V,Q){var _e=Q.toLowerCase();Q!=_e&&(sp(this,Q),yR(this,_e,V))},x)),x.j=$}function vR(x,$){const V=new Ta;if(a.Image){const Q=new Image;Q.onload=h(uu,V,"TestLoadImage: loaded",!0,$,Q),Q.onerror=h(uu,V,"TestLoadImage: error",!1,$,Q),Q.onabort=h(uu,V,"TestLoadImage: abort",!1,$,Q),Q.ontimeout=h(uu,V,"TestLoadImage: timeout",!1,$,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else $(!1)}function ap(x,$){const V=new Ta,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),uu(V,"TestPingServer: timeout",!1,$)},1e4);fetch(x,{signal:Q.signal}).then(De=>{clearTimeout(_e),De.ok?uu(V,"TestPingServer: ok",!0,$):uu(V,"TestPingServer: server error",!1,$)}).catch(()=>{clearTimeout(_e),uu(V,"TestPingServer: error",!1,$)})}function uu(x,$,V,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(V)}catch{}}function c5(){this.g=new nr}function bR(x,$,V){const Q=V||"";try{le(x,function(_e,De){let ft=_e;l(_e)&&(ft=pn(_e)),$.push(Q+De+"="+encodeURIComponent(ft))})}catch(_e){throw $.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function Ky(x){this.l=x.Ub||null,this.j=x.eb||!1}p(Ky,rr),Ky.prototype.g=function(){return new Xy(this.l,this.j)},Ky.prototype.i=function(x){return function(){return x}}({});function Xy(x,$){pe.call(this),this.D=x,this.o=$,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Xy,pe),e=Xy.prototype,e.open=function(x,$){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=$,this.readyState=1,lg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const $={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&($.body=x),(this.D||a).fetch(new Request(this.A,$)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qy(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,lg(this)),this.g&&(this.readyState=3,lg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_R(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function _R(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var $=x.value?x.value:new Uint8Array(0);($=this.v.decode($,{stream:!x.done}))&&(this.response=this.responseText+=$)}x.done?Qy(this):lg(this),this.readyState==3&&_R(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,Qy(this))},e.Qa=function(x){this.g&&(this.response=x,Qy(this))},e.ga=function(){this.g&&Qy(this)};function Qy(x){x.readyState=4,x.l=null,x.j=null,x.v=null,lg(x)}e.setRequestHeader=function(x,$){this.u.append(x,$)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],$=this.h.entries();for(var V=$.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=$.next();return x.join(`\r
`)};function lg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Xy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function wR(x){let $="";return S(x,function(V,Q){$+=Q,$+=":",$+=V,$+=`\r
`}),$}function te(x,$,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=wR(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Nt(x,$,V))}function ue(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,Ct=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,$,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);$=$?$.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?Fo(this.o):Fo(Vt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open($,String(x),!0),this.B=!1}catch(De){$n(this,De);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)V.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),_e=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ct,$,void 0))||Q||_e||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hr(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){$n(this,De)}};function $n(x,$){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=$,x.m=5,xr(x),Un(x)}function xr(x){x.A||(x.A=!0,Ce(x,"complete"),Ce(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ce(this,"complete"),Ce(this,"abort"),Un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vr(this):this.bb())},e.bb=function(){Vr(this)};function Vr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Ji(x)!=4||x.Z()!=2)){if(x.u&&Ji(x)==4)ut(x.Ea,0,x);else if(Ce(x,"readystatechange"),Ji(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var $=!0;break e;default:$=!1}var V;if(!(V=$)){var Q;if(Q=ft===0){var _e=String(x.D).match(Oe)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!Re.test(_e?_e.toLowerCase():"")}V=Q}if(V)Ce(x,"complete"),Ce(x,"success");else{x.m=6;try{var De=2<Ji(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",xr(x)}}finally{Un(x)}}}}function Un(x,$){if(x.g){Hr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,$||Ce(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Hr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Ji(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var $=this.g.responseText;return x&&$.indexOf(x)==0&&($=$.substring(x.length)),Tn($)}};function Uo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Jy(x){const $={};x=(x.g&&2<=Ji(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=R(x[Q]);const _e=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=$[_e]||[];$[_e]=De,De.push(V)}T($,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function up(x,$,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||$}function Kb(x){this.Aa=0,this.i=[],this.j=new Ta,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=up("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=up("baseRetryDelayMs",5e3,x),this.cb=up("retryDelaySeedMs",1e4,x),this.Wa=up("forwardChannelMaxRetries",2,x),this.wa=up("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Aa(x&&x.concurrentRequestLimit),this.Da=new c5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Kb.prototype,e.la=8,e.G=1,e.connect=function(x,$,V,Q){Yr(0),this.W=x,this.H=$||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Fre(this,null,this.W),xR(this)};function Xb(x){if(Rre(x),x.G==3){var $=x.U++,V=Ge(x.I);if(Nt(V,"SID",x.K),Nt(V,"RID",$),Nt(V,"TYPE","terminate"),FS(x,V),$=new jn(x,x.j,$),$.L=2,$.v=Bn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon($.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=$.v,V=!0),V||($.g=jre($.j,null),$.g.ea($.v)),$.F=Date.now(),Ci($)}Lre(x)}function ER(x){x.g&&(d5(x),x.g.cancel(),x.g=null)}function Rre(x){ER(x),x.u&&(a.clearTimeout(x.u),x.u=null),SR(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function xR(x){if(!zs(x.h)&&!x.s){x.s=!0;var $=x.Ga;B||D(),U||(B(),U=!0),H.add($,x),x.B=0}}function O5e(x,$){return Wl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=$.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Sa(d(x.Ga,x,$),Mre(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new jn(this,this.j,x);let De=this.o;if(this.S&&(De?(De=A(De),I(De,this.S)):De=this.S),this.m!==null||this.O||(_e.H=De,De=null),this.P)e:{for(var $=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if($+=Q,4096<$){$=V;break e}if($===4096||V===this.i.length-1){$=V+1;break e}}$=1e3}else $=1e3;$=Pre(this,_e,$),V=Ge(this.I),Nt(V,"RID",x),Nt(V,"CVER",22),this.D&&Nt(V,"X-HTTP-Session-Id",this.D),FS(this,V),De&&(this.O?$="headers="+encodeURIComponent(String(wR(De)))+"&"+$:this.m&&te(V,this.m,De)),Y(this.h,_e),this.Ua&&Nt(V,"TYPE","init"),this.P?(Nt(V,"$req",$),Nt(V,"SID","null"),_e.T=!0,zt(_e,V,null)):zt(_e,V,$),this.G=2}}else this.G==3&&(x?Nre(this,x):this.i.length==0||zs(this.h)||Nre(this))};function Nre(x,$){var V;$?V=$.l:V=x.U++;const Q=Ge(x.I);Nt(Q,"SID",x.K),Nt(Q,"RID",V),Nt(Q,"AID",x.T),FS(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new jn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),$&&(x.i=$.D.concat(x.i)),$=Pre(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),zt(V,Q,$)}function FS(x,$){x.H&&S(x.H,function(V,Q){Nt($,Q,V)}),x.l&&le({},function(V,Q){Nt($,Q,V)})}function Pre(x,$,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var _e=x.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=_e[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let qr=!0;for(let ho=0;ho<V;ho++){let fr=_e[ho].g;const zo=_e[ho].map;if(fr-=De,0>fr)De=Math.max(0,_e[ho].g-100),qr=!1;else try{bR(zo,ft,"req"+fr+"_")}catch{Q&&Q(zo)}}if(qr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),$.D=x,Q}function Dre(x){if(!x.g&&!x.u){x.Y=1;var $=x.Fa;B||D(),U||(B(),U=!0),H.add($,x),x.v=0}}function f5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Sa(d(x.Fa,x),Mre(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Ore(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Sa(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yr(10),ER(this),Ore(this))};function d5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Ore(x){x.g=new jn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var $=Ge(x.qa);Nt($,"RID","rpc"),Nt($,"SID",x.K),Nt($,"AID",x.T),Nt($,"CI",x.F?"0":"1"),!x.F&&x.ja&&Nt($,"TO",x.ja),Nt($,"TYPE","xmlhttp"),FS(x,$),x.m&&x.o&&te($,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Bn(Ge($)),V.m=null,V.P=!0,sr(V,x)}e.Za=function(){this.C!=null&&(this.C=null,ER(this),f5(this),Yr(19))};function SR(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function $re(x,$){var V=null;if(x.g==$){SR(x),d5(x),x.g=null;var Q=2}else if(cd(x.h,$))V=$.D,se(x.h,$),Q=1;else return;if(x.G!=0){if($.o)if(Q==1){V=$.m?$.m.length:0,$=Date.now()-$.F;var _e=x.B;Q=rl(),Ce(Q,new ou(Q,V)),xR(x)}else Dre(x);else if(_e=$.s,_e==3||_e==0&&0<$.X||!(Q==1&&O5e(x,$)||Q==2&&f5(x)))switch(V&&0<V.length&&($=x.h,$.i=$.i.concat(V)),_e){case 1:Zy(x,5);break;case 4:Zy(x,10);break;case 3:Zy(x,6);break;default:Zy(x,2)}}}function Mre(x,$){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*$}function Zy(x,$){if(x.j.info("Error code "+$),$==2){var V=d(x.fb,x),Q=x.Xa;const _e=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Bn(Q),_e?vR(Q.toString(),V):ap(Q.toString(),V)}else Yr(2);x.G=0,x.l&&x.l.sa($),Lre(x),Rre(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Yr(2)):(this.j.info("Failed to ping google.com"),Yr(1))};function Lre(x){if(x.G=0,x.ka=[],x.l){const $=Z(x.h);($.length!=0||x.i.length!=0)&&(g(x.ka,$),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Fre(x,$,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")$&&(Q.g=$+"."+Q.g),Et(Q,Q.s);else{var _e=a.location;Q=_e.protocol,$=$?$+"."+_e.hostname:_e.hostname,_e=+_e.port;var De=new qe(null);Q&&st(De,Q),$&&(De.g=$),_e&&Et(De,_e),V&&(De.l=V),Q=De}return V=x.D,$=x.ya,V&&$&&Nt(Q,V,$),Nt(Q,"VER",x.la),FS(x,Q),Q}function jre(x,$,V){if($&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return $=x.Ca&&!x.pa?new ue(new Ky({eb:V})):new ue(x.pa),$.Ha(x.J),$}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bre(){}e=Bre.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function TR(){}TR.prototype.g=function(x,$){return new il(x,$)};function il(x,$){pe.call(this),this.g=new Kb($),this.l=x,this.h=$&&$.messageUrlParams||null,x=$&&$.messageHeaders||null,$&&$.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=$&&$.initMessageHeaders||null,$&&$.messageContentType&&(x?x["X-WebChannel-Content-Type"]=$.messageContentType:x={"X-WebChannel-Content-Type":$.messageContentType}),$&&$.va&&(x?x["X-WebChannel-Client-Profile"]=$.va:x={"X-WebChannel-Client-Profile":$.va}),this.g.S=x,(x=$&&$.Sb)&&!v(x)&&(this.g.m=x),this.v=$&&$.supportsCrossDomainXhr||!1,this.u=$&&$.sendRawJson||!1,($=$&&$.httpSessionIdParam)&&!v($)&&(this.g.D=$,x=this.h,x!==null&&$ in x&&(x=this.h,$ in x&&delete x[$])),this.j=new Qb(this)}p(il,pe),il.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},il.prototype.close=function(){Xb(this.g)},il.prototype.o=function(x){var $=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=pn(x),x=V);$.i.push(new jo($.Ya++,x)),$.G==3&&xR($)},il.prototype.N=function(){this.g.l=null,delete this.j,Xb(this.g),delete this.g,il.aa.N.call(this)};function Ure(x){Mi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var $=x.__sm__;if($){e:{for(const V in $){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,$=$!==null&&x in $?$[x]:void 0),this.data=$}else this.data=x}p(Ure,Mi);function zre(){Ar.call(this),this.status=1}p(zre,Ar);function Qb(x){this.g=x}p(Qb,Bre),Qb.prototype.ua=function(){Ce(this.g,"a")},Qb.prototype.ta=function(x){Ce(this.g,new Ure(x))},Qb.prototype.sa=function(x){Ce(this.g,new zre)},Qb.prototype.ra=function(){Ce(this.g,"b")},TR.prototype.createWebChannel=TR.prototype.g,il.prototype.send=il.prototype.o,il.prototype.open=il.prototype.m,il.prototype.close=il.prototype.close,uNe=function(){return new TR},aNe=function(){return rl()},oNe=ds,Jz={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,lD=ot,St.COMPLETE="complete",sNe=St,$i.EventType=An,An.OPEN="a",An.CLOSE="b",An.ERROR="c",An.MESSAGE="d",pe.prototype.listen=pe.prototype.K,fA=$i,iNe=Ky,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,rNe=ue}).apply(typeof MN<"u"?MN:typeof self<"u"?self:typeof window<"u"?window:{});const bde="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pu.UNAUTHENTICATED=new pu(null),pu.GOOGLE_CREDENTIALS=new pu("google-credentials-uid"),pu.FIRST_PARTY=new pu("first-party-uid"),pu.MOCK_USER=new pu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new B6("@firebase/firestore");function yT(){return Yv.logLevel}function It(e,...t){if(Yv.logLevel<=Gn.DEBUG){const n=t.map(rJ);Yv.debug(`Firestore (${cS}): ${e}`,...n)}}function Nm(e,...t){if(Yv.logLevel<=Gn.ERROR){const n=t.map(rJ);Yv.error(`Firestore (${cS}): ${e}`,...n)}}function j2(e,...t){if(Yv.logLevel<=Gn.WARN){const n=t.map(rJ);Yv.warn(`Firestore (${cS}): ${e}`,...n)}}function rJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e="Unexpected state"){const t=`FIRESTORE (${cS}) INTERNAL ASSERTION FAILED: `+e;throw Nm(t),new Error(t)}function ni(e,t){e||on()}function fn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Wh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SDt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class TDt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pu.UNAUTHENTICATED))}shutdown(){}}class ADt{constructor(t){this.t=t,this.currentUser=pu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new em;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new em,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new em)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ni(typeof r.accessToken=="string"),new SDt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ni(t===null||typeof t=="string"),new pu(t)}}class CDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=pu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class IDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new CDt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(pu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kDt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RDt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ni(typeof n.token=="string"),this.R=n.token,new kDt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NDt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lNe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=NDt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function FE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ps.fromMillis(Date.now())}static fromDate(t){return Ps.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ps(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new cn(t)}static min(){return new cn(new Ps(0,0))}static max(){return new cn(new Ps(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(t,n,r){n===void 0?n=0:n>t.length&&on(),r===void 0?r=t.length-n:r>t.length-n&&on(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return B2.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof B2?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ui extends B2{construct(t,n,r){return new ui(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ui(n)}static emptyPath(){return new ui([])}}const PDt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class So extends B2{construct(t,n,r){return new So(t,n,r)}static isValidIdentifier(t){return PDt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),So.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new So(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new So(n)}static emptyPath(){return new So([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(ui.fromString(t))}static fromName(t){return new Bt(ui.fromString(t).popFirst(5))}static empty(){return new Bt(ui.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ui.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ui.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new ui(t.slice()))}}function DDt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cn.fromTimestamp(r===1e9?new Ps(n+1,0):new Ps(n,r));return new Z0(i,Bt.empty(),t)}function ODt(e){return new Z0(e.readTime,e.key,-1)}class Z0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Z0(cn.min(),Bt.empty(),-1)}static max(){return new Z0(cn.max(),Bt.empty(),-1)}}function $Dt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MDt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LDt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==MDt)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function FDt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}iJ.oe=-1;function G6(e){return e==null}function y$(e){return e===0&&1/e==-1/0}function jDt(e){return typeof e=="number"&&Number.isInteger(e)&&!y$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _de(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function cNe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||wo.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,wo.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,wo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new LN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new LN(this.root,t,this.comparator,!1)}getReverseIterator(){return new LN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new LN(this.root,t,this.comparator,!0)}}class LN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class wo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??wo.RED,this.left=i??wo.EMPTY,this.right=s??wo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new wo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return wo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,wo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,wo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const t=this.left.check();if(t!==this.right.check())throw on();return t+(this.isRed()?0:1)}}wo.EMPTY=null,wo.RED=!0,wo.BLACK=!1;wo.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(t,n,r,i,s){return this}insert(t,n,r){return new wo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new wde(this.data.getIterator())}getIteratorFrom(t){return new wde(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof ko)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new ko(this.comparator);return n.data=t,n}}class wde{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t){this.fields=t,t.sort(So.comparator)}static empty(){return new _l([])}unionWith(t){let n=new ko(So.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new _l(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return FE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fNe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fNe("Invalid base64 string: "+s):s}}(t);return new ya(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ya(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ya.EMPTY_BYTE_STRING=new ya("");const BDt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ey(e){if(ni(!!e),typeof e=="string"){let t=0;const n=BDt.exec(e);if(ni(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gs(e.seconds),nanos:gs(e.nanos)}}function gs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Kv(e){return typeof e=="string"?ya.fromBase64String(e):ya.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function oJ(e){const t=e.mapValue.fields.__previous_value__;return sJ(t)?oJ(t):t}function U2(e){const t=ey(e.mapValue.fields.__local_write_time__.timestampValue);return new Ps(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UDt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class z2{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new z2("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof z2&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sJ(e)?4:zDt(e)?9007199254740991:10:on()}function Th(e,t){if(e===t)return!0;const n=Xv(e);if(n!==Xv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return U2(e).isEqual(U2(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ey(i.timestampValue),a=ey(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return Kv(i.bytesValue).isEqual(Kv(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return gs(i.geoPointValue.latitude)===gs(s.geoPointValue.latitude)&&gs(i.geoPointValue.longitude)===gs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gs(i.integerValue)===gs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gs(i.doubleValue),a=gs(s.doubleValue);return o===a?y$(o)===y$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return FE(e.arrayValue.values||[],t.arrayValue.values||[],Th);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(_de(o)!==_de(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Th(o[u],a[u])))return!1;return!0}(e,t);default:return on()}}function V2(e,t){return(e.values||[]).find(n=>Th(n,t))!==void 0}function jE(e,t){if(e===t)return 0;const n=Xv(e),r=Xv(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=gs(s.integerValue||s.doubleValue),u=gs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Ede(e.timestampValue,t.timestampValue);case 4:return Ede(U2(e),U2(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=Kv(s),u=Kv(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(gs(s.latitude),gs(o.latitude));return a!==0?a:vr(gs(s.longitude),gs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=jE(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===FN.mapValue&&o===FN.mapValue)return 0;if(s===FN.mapValue)return 1;if(o===FN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=jE(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw on()}}function Ede(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=ey(e),r=ey(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function BE(e){return Zz(e)}function Zz(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ey(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Kv(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Zz(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Zz(n.fields[o])}`;return i+"}"}(e.mapValue):on()}function xde(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function eV(e){return!!e&&"integerValue"in e}function aJ(e){return!!e&&"arrayValue"in e}function Sde(e){return!!e&&"nullValue"in e}function Tde(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cD(e){return!!e&&"mapValue"in e}function mC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Rb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=mC(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mC(e.arrayValue.values[n]);return t}return Object.assign({},e)}function zDt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(t){this.value=t}static empty(){return new Su({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!cD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=mC(n)}setAll(t){let n=So.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=mC(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());cD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Th(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];cD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Rb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Su(mC(this.value))}}function dNe(e){const t=[];return Rb(e.fields,(n,r)=>{const i=new So([n]);if(cD(r)){const s=dNe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new _l(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new sa(t,0,cn.min(),cn.min(),cn.min(),Su.empty(),0)}static newFoundDocument(t,n,r,i){return new sa(t,1,n,cn.min(),r,i,0)}static newNoDocument(t,n){return new sa(t,2,n,cn.min(),cn.min(),Su.empty(),0)}static newUnknownDocument(t,n){return new sa(t,3,n,cn.min(),cn.min(),Su.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(cn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Su.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Su.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof sa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new sa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Ade(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=jE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cde(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Th(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,n="asc"){this.field=t,this.dir=n}}function VDt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hNe=class{};class vs extends hNe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new qDt(t,n,r):n==="array-contains"?new YDt(t,r):n==="in"?new KDt(t,r):n==="not-in"?new XDt(t,r):n==="array-contains-any"?new QDt(t,r):new vs(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new WDt(t,r):new GDt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(jE(n,this.value)):n!==null&&Xv(this.value)===Xv(n)&&this.matchesComparison(jE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zf extends hNe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new zf(t,n)}matches(t){return pNe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pNe(e){return e.op==="and"}function mNe(e){return HDt(e)&&pNe(e)}function HDt(e){for(const t of e.filters)if(t instanceof zf)return!1;return!0}function tV(e){if(e instanceof vs)return e.field.canonicalString()+e.op.toString()+BE(e.value);if(mNe(e))return e.filters.map(t=>tV(t)).join(",");{const t=e.filters.map(n=>tV(n)).join(",");return`${e.op}(${t})`}}function gNe(e,t){return e instanceof vs?function(r,i){return i instanceof vs&&r.op===i.op&&r.field.isEqual(i.field)&&Th(r.value,i.value)}(e,t):e instanceof zf?function(r,i){return i instanceof zf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&gNe(o,i.filters[a]),!0):!1}(e,t):void on()}function yNe(e){return e instanceof vs?function(n){return`${n.field.canonicalString()} ${n.op} ${BE(n.value)}`}(e):e instanceof zf?function(n){return n.op.toString()+" {"+n.getFilters().map(yNe).join(" ,")+"}"}(e):"Filter"}class qDt extends vs{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class WDt extends vs{constructor(t,n){super(t,"in",n),this.keys=vNe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class GDt extends vs{constructor(t,n){super(t,"not-in",n),this.keys=vNe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function vNe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class YDt extends vs{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return aJ(n)&&V2(n.arrayValue,this.value)}}class KDt extends vs{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&V2(this.value.arrayValue,n)}}class XDt extends vs{constructor(t,n){super(t,"not-in",n)}matches(t){if(V2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!V2(this.value.arrayValue,n)}}class QDt extends vs{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!aJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>V2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JDt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Ide(e,t=null,n=[],r=[],i=null,s=null,o=null){return new JDt(e,t,n,r,i,s,o)}function uJ(e){const t=fn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>tV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),G6(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>BE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>BE(r)).join(",")),t.ue=n}return t.ue}function lJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!VDt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gNe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cde(e.startAt,t.startAt)&&Cde(e.endAt,t.endAt)}function nV(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ZDt(e,t,n,r,i,s,o,a){return new fS(e,t,n,r,i,s,o,a)}function cJ(e){return new fS(e)}function kde(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function bNe(e){return e.collectionGroup!==null}function gC(e){const t=fn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ko(So.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new H2(s,r))}),n.has(So.keyField().canonicalString())||t.ce.push(new H2(So.keyField(),r))}return t.ce}function uh(e){const t=fn(e);return t.le||(t.le=eOt(t,gC(e))),t.le}function eOt(e,t){if(e.limitType==="F")return Ide(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new H2(i.field,s)});const n=e.endAt?new v$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new v$(e.startAt.position,e.startAt.inclusive):null;return Ide(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function rV(e,t){const n=e.filters.concat([t]);return new fS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function iV(e,t,n){return new fS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Y6(e,t){return lJ(uh(e),uh(t))&&e.limitType===t.limitType}function _Ne(e){return`${uJ(uh(e))}|lt:${e.limitType}`}function D_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yNe(i)).join(", ")}]`),G6(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>BE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>BE(i)).join(",")),`Target(${r})`}(uh(e))}; limitType=${e.limitType})`}function K6(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of gC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Ade(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,gC(r),i)||r.endAt&&!function(o,a,u){const l=Ade(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,gC(r),i))}(e,t)}function tOt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wNe(e){return(t,n)=>{let r=!1;for(const i of gC(e)){const s=nOt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function nOt(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?jE(u,l):on()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return on()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Rb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return cNe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rOt=new Oi(Bt.comparator);function Pm(){return rOt}const ENe=new Oi(Bt.comparator);function dA(...e){let t=ENe;for(const n of e)t=t.insert(n.key,n);return t}function xNe(e){let t=ENe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function rv(){return yC()}function SNe(){return yC()}function yC(){return new dS(e=>e.toString(),(e,t)=>e.isEqual(t))}const iOt=new Oi(Bt.comparator),sOt=new ko(Bt.comparator);function zn(...e){let t=sOt;for(const n of e)t=t.add(n);return t}const oOt=new ko(vr);function aOt(){return oOt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TNe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:y$(t)?"-0":t}}function ANe(e){return{integerValue:""+e}}function uOt(e,t){return jDt(t)?ANe(t):TNe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this._=void 0}}function lOt(e,t,n){return e instanceof q2?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sJ(s)&&(s=oJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof W2?INe(e,t):e instanceof G2?kNe(e,t):function(i,s){const o=CNe(i,s),a=Rde(o)+Rde(i.Pe);return eV(o)&&eV(i.Pe)?ANe(a):TNe(i.serializer,a)}(e,t)}function cOt(e,t,n){return e instanceof W2?INe(e,t):e instanceof G2?kNe(e,t):n}function CNe(e,t){return e instanceof b$?function(r){return eV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class q2 extends X6{}class W2 extends X6{constructor(t){super(),this.elements=t}}function INe(e,t){const n=RNe(t);for(const r of e.elements)n.some(i=>Th(i,r))||n.push(r);return{arrayValue:{values:n}}}class G2 extends X6{constructor(t){super(),this.elements=t}}function kNe(e,t){let n=RNe(t);for(const r of e.elements)n=n.filter(i=>!Th(i,r));return{arrayValue:{values:n}}}class b$ extends X6{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Rde(e){return gs(e.integerValue||e.doubleValue)}function RNe(e){return aJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fOt{constructor(t,n){this.field=t,this.transform=n}}function dOt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof W2&&i instanceof W2||r instanceof G2&&i instanceof G2?FE(r.elements,i.elements,Th):r instanceof b$&&i instanceof b$?Th(r.Pe,i.Pe):r instanceof q2&&i instanceof q2}(e.transform,t.transform)}class hOt{constructor(t,n){this.version=t,this.transformResults=n}}class Fu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Fu}static exists(t){return new Fu(void 0,t)}static updateTime(t){return new Fu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Q6{}function NNe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new J6(e.key,Fu.none()):new Sk(e.key,e.data,Fu.none());{const n=e.data,r=Su.empty();let i=new ko(So.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Oy(e.key,r,new _l(i.toArray()),Fu.none())}}function pOt(e,t,n){e instanceof Sk?function(i,s,o){const a=i.value.clone(),u=Pde(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Oy?function(i,s,o){if(!fD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Pde(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(PNe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function vC(e,t,n,r){return e instanceof Sk?function(s,o,a,u){if(!fD(s.precondition,o))return a;const l=s.value.clone(),c=Dde(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Oy?function(s,o,a,u){if(!fD(s.precondition,o))return a;const l=Dde(s.fieldTransforms,u,o),c=o.data;return c.setAll(PNe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return fD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function mOt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=CNe(r.transform,i||null);s!=null&&(n===null&&(n=Su.empty()),n.set(r.field,s))}return n||null}function Nde(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&FE(r,i,(s,o)=>dOt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Sk extends Q6{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oy extends Q6{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function PNe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Pde(e,t,n){const r=new Map;ni(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,cOt(o,a,n[i]))}return r}function Dde(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,lOt(s,o,t))}return r}class J6 extends Q6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gOt extends Q6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yOt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&pOt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=vC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=vC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=SNe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=NNe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(cn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&FE(this.mutations,t.mutations,(n,r)=>Nde(n,r))&&FE(this.baseMutations,t.baseMutations,(n,r)=>Nde(n,r))}}class fJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ni(t.mutations.length===r.length);let i=function(){return iOt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vOt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bOt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs,Zn;function _Ot(e){switch(e){default:return on();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function DNe(e){if(e===void 0)return Nm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case hs.OK:return Be.OK;case hs.CANCELLED:return Be.CANCELLED;case hs.UNKNOWN:return Be.UNKNOWN;case hs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case hs.INTERNAL:return Be.INTERNAL;case hs.UNAVAILABLE:return Be.UNAVAILABLE;case hs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case hs.NOT_FOUND:return Be.NOT_FOUND;case hs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case hs.ABORTED:return Be.ABORTED;case hs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case hs.DATA_LOSS:return Be.DATA_LOSS;default:return on()}}(Zn=hs||(hs={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wOt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EOt=new mv([4294967295,4294967295],0);function Ode(e){const t=wOt().encode(e),n=new nNe;return n.update(t),new Uint8Array(n.digest())}function $de(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new mv([n,r],0),new mv([i,s],0)]}class dJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hA(`Invalid padding: ${n}`);if(r<0)throw new hA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new hA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new hA(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=mv.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(mv.fromNumber(r)));return i.compare(EOt)===1&&(i=new mv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Ode(t),[r,i]=$de(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new dJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Ode(t),[r,i]=$de(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class hA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Tk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Z6(cn.min(),i,new Oi(vr),Pm(),zn())}}class Tk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Tk(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ONe{constructor(t,n){this.targetId=t,this.me=n}}class $Ne{constructor(t,n,r=ya.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Mde{constructor(){this.fe=0,this.ge=Fde(),this.pe=ya.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:on()}}),new Tk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Fde()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ni(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xOt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Pm(),this.qe=Lde(),this.Qe=new Oi(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:on()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(nV(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,sa.newNoDocument(o,cn.min()))}else ni(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Kv(r).toUint8Array()}catch(u){if(u instanceof fNe)return j2("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new dJ(o,i,s)}catch(u){return j2(u instanceof hA?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&nV(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,sa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new Z6(t,n,this.Qe,this.ke,r);return this.ke=Pm(),this.qe=Lde(),this.Qe=new Oi(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Mde,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new ko(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Mde),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Lde(){return new Oi(Bt.comparator)}function Fde(){return new Oi(Bt.comparator)}const SOt={asc:"ASCENDING",desc:"DESCENDING"},TOt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AOt={and:"AND",or:"OR"};class COt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function sV(e,t){return e.useProto3Json||G6(t)?t:{value:t}}function _$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function MNe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function IOt(e,t){return _$(e,t.toTimestamp())}function lh(e){return ni(!!e),cn.fromTimestamp(function(n){const r=ey(n);return new Ps(r.seconds,r.nanos)}(e))}function hJ(e,t){return oV(e,t).canonicalString()}function oV(e,t){const n=function(i){return new ui(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function LNe(e){const t=ui.fromString(e);return ni(zNe(t)),t}function aV(e,t){return hJ(e.databaseId,t.path)}function Qj(e,t){const n=LNe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(jNe(n))}function FNe(e,t){return hJ(e.databaseId,t)}function kOt(e){const t=LNe(e);return t.length===4?ui.emptyPath():jNe(t)}function uV(e){return new ui(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jNe(e){return ni(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function jde(e,t,n){return{name:aV(e,t),fields:n.value.mapValue.fields}}function ROt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:on()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ni(c===void 0||typeof c=="string"),ya.fromBase64String(c||"")):(ni(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ya.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:DNe(l.code);return new bt(c,l.message||"")}(o);n=new $Ne(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qj(e,r.document.name),s=lh(r.document.updateTime),o=r.document.createTime?lh(r.document.createTime):cn.min(),a=new Su({mapValue:{fields:r.document.fields}}),u=sa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new dD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Qj(e,r.document),s=r.readTime?lh(r.readTime):cn.min(),o=sa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Qj(e,r.document),s=r.removedTargetIds||[];n=new dD([],s,i,null)}else{if(!("filter"in t))return on();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new bOt(i,s),a=r.targetId;n=new ONe(a,o)}}return n}function NOt(e,t){let n;if(t instanceof Sk)n={update:jde(e,t.key,t.value)};else if(t instanceof J6)n={delete:aV(e,t.key)};else if(t instanceof Oy)n={update:jde(e,t.key,t.data),updateMask:BOt(t.fieldMask)};else{if(!(t instanceof gOt))return on();n={verify:aV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof q2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof W2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof G2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof b$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw on()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:IOt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:on()}(e,t.precondition)),n}function POt(e,t){return e&&e.length>0?(ni(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?lh(i.updateTime):lh(s);return o.isEqual(cn.min())&&(o=lh(s)),new hOt(o,i.transformResults||[])}(n,t))):[]}function DOt(e,t){return{documents:[FNe(e,t.path)]}}function OOt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=FNe(e,i);const s=function(l){if(l.length!==0)return UNe(zf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:O_(d.field),direction:LOt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function $Ot(e){let t=kOt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ni(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=BNe(f);return d instanceof zf&&mNe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new H2($_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,G6(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new v$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new v$(h,d)}(n.endAt)),ZDt(t,i,o,s,a,"F",u,l)}function MOt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function BNe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$_(n.unaryFilter.field);return vs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$_(n.unaryFilter.field);return vs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$_(n.unaryFilter.field);return vs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$_(n.unaryFilter.field);return vs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(e):e.fieldFilter!==void 0?function(n){return vs.create($_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return zf.create(n.compositeFilter.filters.map(r=>BNe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(e):on()}function LOt(e){return SOt[e]}function FOt(e){return TOt[e]}function jOt(e){return AOt[e]}function O_(e){return{fieldPath:e.canonicalString()}}function $_(e){return So.fromServerFormat(e.fieldPath)}function UNe(e){return e instanceof vs?function(n){if(n.op==="=="){if(Tde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NAN"}};if(Sde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NOT_NAN"}};if(Sde(n.value))return{unaryFilter:{field:O_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:O_(n.field),op:FOt(n.op),value:n.value}}}(e):e instanceof zf?function(n){const r=n.getFilters().map(i=>UNe(i));return r.length===1?r[0]:{compositeFilter:{op:jOt(n.op),filters:r}}}(e):on()}function BOt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function zNe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(t,n,r,i,s=cn.min(),o=cn.min(),a=ya.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Yg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Yg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UOt{constructor(t){this.ct=t}}function zOt(e){const t=$Ot({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?iV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VOt{constructor(){this._n=new HOt}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(Z0.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(Z0.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class HOt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new ko(ui.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new ko(ui.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new UE(0)}static Ln(){return new UE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qOt{constructor(){this.changes=new dS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,sa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WOt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GOt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&vC(r.mutation,i,_l.empty(),Ps.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=rv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=dA();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=rv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Pm();const o=yC(),a=function(){return yC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Oy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),vC(c.mutation,l,c.mutation.getFieldMask(),Ps.now())):o.set(l.key,_l.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new WOt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=yC();let i=new Oi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||_l.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=SNe();c.forEach(d=>{if(!s.has(d)){const h=NNe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):bNe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(rv());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:xNe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=dA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=dA();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new fS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,sa.newInvalidDocument(c)))});let a=dA();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&vC(c.mutation,l,_l.empty(),Ps.now()),K6(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YOt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:zOt(i.bundledQuery),readTime:lh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KOt{constructor(){this.overlays=new Oi(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=rv();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=rv(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Oi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=rv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=rv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vOt(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pJ{constructor(){this.Pr=new ko(Gs.Ir),this.Tr=new ko(Gs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Gs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Gs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new ui([])),r=new Gs(n,t),i=new Gs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new ui([])),r=new Gs(n,t),i=new Gs(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Gs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Gs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XOt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ko(Gs.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yOt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Gs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Gs(n,0),i=new Gs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new ko(vr);return n.forEach(i=>{const s=new Gs(i,0),o=new Gs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Gs(new Bt(s),0);let a=new ko(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ni(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Gs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Gs(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QOt{constructor(t){this.vr=t,this.docs=function(){return new Oi(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():sa.newInvalidDocument(n))}getEntries(t,n){let r=Pm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sa.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Pm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||$Dt(ODt(c),r)<=0||(i.has(c.key)||K6(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){on()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new JOt(this)}getSize(t){return Xe.resolve(this.size)}}class JOt extends qOt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZOt{constructor(t){this.persistence=t,this.Mr=new dS(n=>uJ(n),lJ),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new pJ,this.targetCount=0,this.Lr=UE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new UE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3t{constructor(t,n){this.Br={},this.overlays={},this.kr=new iJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new ZOt(this),this.indexManager=new VOt,this.remoteDocumentCache=function(i){return new QOt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new UOt(n),this.$r=new YOt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new KOt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new XOt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new t3t(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class t3t extends LDt{constructor(t){super(),this.currentSequenceNumber=t}}class mJ{constructor(t){this.persistence=t,this.zr=new pJ,this.jr=null}static Hr(t){return new mJ(t)}get Jr(){if(this.jr)return this.jr;throw on()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,cn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3t{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3t{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return MIt()?8:FDt(Oo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new n3t;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(yT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",D_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(yT()<=Gn.DEBUG&&It("QueryEngine","Query:",D_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(yT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",D_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,uh(n))):Xe.resolve())}ji(t,n){if(kde(n))return Xe.resolve(null);let r=uh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=iV(n,null,"F"),r=uh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,iV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return kde(n)||i.isEqual(cn.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(yT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),D_(n)),this.es(t,o,n,DDt(i,-1)).next(a=>a))})}Zi(t,n){let r=new ko(wNe(t));return n.forEach((i,s)=>{K6(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return yT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",D_(n)),this.zi.getDocumentsMatchingQuery(t,n,Z0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3t{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Oi(vr),this.rs=new dS(s=>uJ(s),lJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new GOt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function s3t(e,t,n,r){return new i3t(e,t,n,r)}async function VNe(e,t){const n=fn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function o3t(e,t){const n=fn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ni(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function HNe(e){const t=fn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function a3t(e,t){const n=fn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ya.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Pm(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(u3t(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(cn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function u3t(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Pm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(cn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function l3t(e,t){const n=fn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function c3t(e,t){const n=fn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Yg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function lV(e,t,n){const r=fn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xk(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Bde(e,t,n){const r=fn(e);let i=cn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=fn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,uh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:cn.min(),n?s:zn())).next(a=>(f3t(r,tOt(t),a),{documents:a,hs:s})))}function f3t(e,t,n){let r=e.ss.get(t)||cn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Ude{constructor(){this.activeTargetIds=aOt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class d3t{constructor(){this.no=new Ude,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Ude,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3t{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zde{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jN=null;function Jj(){return jN===null?jN=function(){return 268435456+Math.round(2147483648*Math.random())}():jN++,"0x"+jN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3t{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="WebChannelConnection";class g3t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Jj(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw j2("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=p3t[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=Jj();return new Promise((o,a)=>{const u=new rNe;u.setWithCredentials(!0),u.listenOnce(sNe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case lD.NO_ERROR:const c=u.getResponseJson();It(Qo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case lD.TIMEOUT:It(Qo,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case lD.HTTP_ERROR:const f=u.getStatus();if(It(Qo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{It(Qo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(Qo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=Jj(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=uNe(),a=aNe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new iNe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(Qo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new m3t({lo:g=>{h?It(Qo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(Qo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(Qo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,fA.EventType.OPEN,()=>{h||(It(Qo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,fA.EventType.CLOSE,()=>{h||(h=!0,It(Qo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,fA.EventType.ERROR,g=>{h||(h=!0,j2(Qo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,fA.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ni(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(Qo,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(C){const I=hs[C];if(I!==void 0)return DNe(I)}(E),T=w.message;S===void 0&&(S=Be.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(S,T)),f.close()}else It(Qo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,oNe.STAT_EVENT,g=>{g.stat===Jz.PROXY?It(Qo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Jz.NOPROXY&&It(Qo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Zj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(e){return new COt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qNe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WNe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new qNe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Nm(n.toString()),Nm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y3t extends WNe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=ROt(this.serializer,t),r=function(s){if(!("targetChange"in s))return cn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?cn.min():o.readTime?lh(o.readTime):cn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=uV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=nV(u)?{documents:DOt(s,u)}:{query:OOt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=MNe(s,o.resumeToken);const l=sV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(cn.min())>0){a.readTime=_$(s,o.snapshotVersion.toTimestamp());const l=sV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=MOt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=uV(this.serializer),n.removeTarget=t,this.i_(n)}}class v3t extends WNe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ni(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=POt(t.writeResults,t.commitTime),r=lh(t.commitTime);return this.listener.A_(r,n)}return ni(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=uV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>NOt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,oV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,oV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class _3t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Nm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Nb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=fn(u);l.M_.add(4),await Ck(l),l.N_.set("Unknown"),l.M_.delete(4),await Ak(l)}(this))})}),this.N_=new _3t(r,i)}}async function Ak(e){if(Nb(e))for(const t of e.x_)await t(!0)}async function Ck(e){for(const t of e.x_)await t(!1)}function GNe(e,t){const n=fn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),_J(n)?bJ(n):hS(n).Xo()&&vJ(n,t))}function yJ(e,t){const n=fn(e),r=hS(n);n.F_.delete(t),r.Xo()&&YNe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Nb(n)&&n.N_.set("Unknown"))}function vJ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(cn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}hS(e).P_(t)}function YNe(e,t){e.L_.xe(t),hS(e).I_(t)}function bJ(e){e.L_=new xOt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),hS(e).start(),e.N_.w_()}function _J(e){return Nb(e)&&!hS(e).Zo()&&e.F_.size>0}function Nb(e){return fn(e).M_.size===0}function KNe(e){e.L_=void 0}async function E3t(e){e.N_.set("Online")}async function x3t(e){e.F_.forEach((t,n)=>{vJ(e,t)})}async function S3t(e,t){KNe(e),_J(e)?(e.N_.D_(t),bJ(e)):e.N_.set("Unknown")}async function T3t(e,t,n){if(e.N_.set("Online"),t instanceof $Ne&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await w$(e,r)}else if(t instanceof dD?e.L_.Ke(t):t instanceof ONe?e.L_.He(t):e.L_.We(t),!n.isEqual(cn.min()))try{const r=await HNe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ya.EMPTY_BYTE_STRING,c.snapshotVersion)),YNe(s,u);const f=new Yg(c.target,u,l,c.sequenceNumber);vJ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await w$(e,r)}}async function w$(e,t,n){if(!xk(t))throw t;e.M_.add(1),await Ck(e),e.N_.set("Offline"),n||(n=()=>HNe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Ak(e)})}function XNe(e,t){return t().catch(n=>w$(e,n,t))}async function tF(e){const t=fn(e),n=ty(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;A3t(t);)try{const i=await l3t(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,C3t(t,i)}catch(i){await w$(t,i)}QNe(t)&&JNe(t)}function A3t(e){return Nb(e)&&e.v_.length<10}function C3t(e,t){e.v_.push(t);const n=ty(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function QNe(e){return Nb(e)&&!ty(e).Zo()&&e.v_.length>0}function JNe(e){ty(e).start()}async function I3t(e){ty(e).V_()}async function k3t(e){const t=ty(e);for(const n of e.v_)t.d_(n.mutations)}async function R3t(e,t,n){const r=e.v_.shift(),i=fJ.from(r,t,n);await XNe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await tF(e)}async function N3t(e,t){t&&ty(e).E_&&await async function(r,i){if(function(o){return _Ot(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();ty(r).t_(),await XNe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await tF(r)}}(e,t),QNe(e)&&JNe(e)}async function Vde(e,t){const n=fn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Nb(n);n.M_.add(3),await Ck(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Ak(n)}async function P3t(e,t){const n=fn(e);t?(n.M_.delete(2),await Ak(n)):t||(n.M_.add(2),await Ck(n),n.N_.set("Unknown"))}function hS(e){return e.B_||(e.B_=function(n,r,i){const s=fn(n);return s.f_(),new y3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:E3t.bind(null,e),To:x3t.bind(null,e),Ao:S3t.bind(null,e),h_:T3t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),_J(e)?bJ(e):e.N_.set("Unknown")):(await e.B_.stop(),KNe(e))})),e.B_}function ty(e){return e.k_||(e.k_=function(n,r,i){const s=fn(n);return s.f_(),new v3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:I3t.bind(null,e),Ao:N3t.bind(null,e),R_:k3t.bind(null,e),A_:R3t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await tF(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new em,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new wJ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function EJ(e,t){if(Nm("AsyncQueue",`${t}: ${e}`),xk(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=dA(),this.sortedSet=new Oi(this.comparator)}static emptySet(t){return new Bw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Bw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Bw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hde{constructor(){this.q_=new Oi(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):on():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class zE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zE(t,n,Bw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Y6(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class O3t{constructor(){this.queries=new dS(t=>_Ne(t),Y6),this.onlineState="Unknown",this.z_=new Set}}async function ZNe(e,t){const n=fn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new D3t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=EJ(o,`Initialization of query '${D_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&xJ(n)}async function ePe(e,t){const n=fn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function $3t(e,t){const n=fn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&xJ(n)}function M3t(e,t,n){const r=fn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function xJ(e){e.z_.forEach(t=>{t.next()})}var cV,qde;(qde=cV||(cV={})).J_="default",qde.Cache="cache";class tPe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new zE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=zE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==cV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nPe{constructor(t){this.key=t}}class rPe{constructor(t){this.key=t}}class L3t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=wNe(t),this.Ta=new Bw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Hde,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=K6(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new zE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Hde,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new rPe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new nPe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return zE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class F3t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class j3t{constructor(t){this.key=t,this.wa=!1}}class B3t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new dS(a=>_Ne(a),Y6),this.Da=new Map,this.Ca=new Set,this.va=new Oi(Bt.comparator),this.Fa=new Map,this.Ma=new pJ,this.xa={},this.Oa=new Map,this.Na=UE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function U3t(e,t,n=!0){const r=lPe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await iPe(r,t,n,!0),i}async function z3t(e,t){const n=lPe(e);await iPe(n,t,!0,!1)}async function iPe(e,t,n,r){const i=await c3t(e.localStore,uh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await V3t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&GNe(e.remoteStore,i),a}async function V3t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await Bde(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,w,E);return Gde(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await Bde(e.localStore,t,!0),o=new L3t(t,s.hs),a=o.da(s.documents),u=Tk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Gde(e,n,l.fa);const c=new F3t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function H3t(e,t,n){const r=fn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!Y6(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yJ(r.remoteStore,i.targetId),fV(r,i.targetId)}).catch(Ek)):(fV(r,i.targetId),await lV(r.localStore,i.targetId,!0))}async function q3t(e,t){const n=fn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yJ(n.remoteStore,r.targetId))}async function W3t(e,t,n){const r=Z3t(e);try{const i=await function(o,a){const u=fn(o),l=Ps.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Pm(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=mOt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Oy(v.key,b,dNe(b.value.mapValue),Fu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:xNe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Oi(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Ik(r,i.changes),await tF(r.remoteStore)}catch(i){const s=EJ(i,"Failed to persist write");n.reject(s)}}async function sPe(e,t){const n=fn(e);try{const r=await a3t(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ni(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ni(o.wa):i.removedDocuments.size>0&&(ni(o.wa),o.wa=!1))}),await Ik(n,r,t)}catch(r){await Ek(r)}}function Wde(e,t,n){const r=fn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=fn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&xJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function G3t(e,t,n){const r=fn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Oi(Bt.comparator);o=o.insert(s,sa.newNoDocument(s,cn.min()));const a=zn().add(s),u=new Z6(cn.min(),new Map,new Oi(vr),o,a);await sPe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),SJ(r)}else await lV(r.localStore,t,!1).then(()=>fV(r,t,n)).catch(Ek)}async function Y3t(e,t){const n=fn(e),r=t.batch.batchId;try{const i=await o3t(n.localStore,t);aPe(n,r,null),oPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ik(n,i)}catch(i){await Ek(i)}}async function K3t(e,t,n){const r=fn(e);try{const i=await function(o,a){const u=fn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ni(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);aPe(r,t,n),oPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ik(r,i)}catch(i){await Ek(i)}}function oPe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function aPe(e,t,n){const r=fn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function fV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||uPe(e,r)})}function uPe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(yJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),SJ(e))}function Gde(e,t,n){for(const r of n)r instanceof nPe?(e.Ma.addReference(r.key,t),X3t(e,r)):r instanceof rPe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||uPe(e,r.key)):on()}function X3t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),SJ(e))}function SJ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(ui.fromString(t)),r=e.Na.next();e.Fa.set(r,new j3t(n)),e.va=e.va.insert(n,r),GNe(e.remoteStore,new Yg(uh(cJ(n.path)),r,"TargetPurposeLimboResolution",iJ.oe))}}async function Ik(e,t,n){const r=fn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=gJ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=fn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!xk(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function Q3t(e,t){const n=fn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await VNe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Ik(n,r.us)}}function J3t(e,t){const n=fn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function lPe(e){const t=fn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=sPe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=J3t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=G3t.bind(null,t),t.Sa.h_=$3t.bind(null,t.eventManager),t.Sa.ka=M3t.bind(null,t.eventManager),t}function Z3t(e){const t=fn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Y3t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=K3t.bind(null,t),t}class Yde{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=eF(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return s3t(this.persistence,new r3t,t.initialUser,this.serializer)}createPersistence(t){return new e3t(mJ.Hr,this.serializer)}createSharedClientState(t){return new d3t}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class e$t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Wde(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q3t.bind(null,this.syncEngine),await P3t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new O3t}()}createDatastore(t){const n=eF(t.databaseInfo.databaseId),r=function(s){return new g3t(s)}(t.databaseInfo);return function(s,o,a,u){return new b3t(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new w3t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Wde(this.syncEngine,n,0),function(){return zde.D()?new zde:new h3t}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new B3t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=fn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Ck(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Nm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t$t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pu.UNAUTHENTICATED,this.clientId=lNe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new em;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=EJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function eB(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VNe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Kde(e,t){e.asyncQueue.verifyOperationInProgress();const n=await fPe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Vde(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Vde(t.remoteStore,i)),e._onlineComponents=t}function n$t(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function fPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await eB(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!n$t(n))throw n;j2("Error using user provided cache. Falling back to memory cache: "+n),await eB(e,new Yde)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await eB(e,new Yde);return e._offlineComponents}async function TJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Kde(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Kde(e,new e$t))),e._onlineComponents}function r$t(e){return fPe(e).then(t=>t.persistence)}function i$t(e){return TJ(e).then(t=>t.remoteStore)}function s$t(e){return TJ(e).then(t=>t.syncEngine)}async function dPe(e){const t=await TJ(e),n=t.eventManager;return n.onListen=U3t.bind(null,t.syncEngine),n.onUnlisten=H3t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=z3t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=q3t.bind(null,t.syncEngine),n}function o$t(e){return e.asyncQueue.enqueue(async()=>{const t=await r$t(e),n=await i$t(e);return t.setNetworkEnabled(!0),function(i){const s=fn(i);return s.M_.delete(0),Ak(s)}(n)})}function a$t(e,t,n={}){const r=new em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new cPe({next:d=>{o.enqueueAndForget(()=>ePe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new tPe(cJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return ZNe(s,f)}(await dPe(e),e.asyncQueue,t,n,r)),r.promise}function u$t(e,t,n={}){const r=new em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new cPe({next:d=>{o.enqueueAndForget(()=>ePe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new tPe(a,c,{includeMetadataChanges:!0,ra:!0});return ZNe(s,f)}(await dPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hPe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xde=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pPe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function l$t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Qde(e){if(!Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Jde(e){if(Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function nF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":on()}function Vf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nF(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zde{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}l$t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hPe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class AJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zde({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zde(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new TDt;switch(r.type){case"firstParty":return new IDt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Xde.get(n);r&&(It("ComponentProvider","Removing Datastore"),Xde.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Pb(this.firestore,t,this._query)}}class qa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new w0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new qa(this.firestore,t,this._key)}}class w0 extends Pb{constructor(t,n,r){super(t,n,cJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new qa(this.firestore,null,new Bt(t))}withConverter(t){return new w0(this.firestore,t,this._path)}}function Yc(e,t,...n){if(e=ri(e),pPe("collection","path",t),e instanceof AJ){const r=ui.fromString(t,...n);return Jde(r),new w0(e,null,r)}{if(!(e instanceof qa||e instanceof w0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return Jde(r),new w0(e.firestore,null,r)}}function Vs(e,t,...n){if(e=ri(e),arguments.length===1&&(t=lNe.newId()),pPe("doc","path",t),e instanceof AJ){const r=ui.fromString(t,...n);return Qde(r),new qa(e,null,new Bt(r))}{if(!(e instanceof qa||e instanceof w0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return Qde(r),new qa(e.firestore,e instanceof w0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c$t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new qNe(this,"async_queue_retry"),this.hu=()=>{const n=Zj();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Zj();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Zj();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new em;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!xk(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Nm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=wJ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&on()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class $y extends AJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new c$t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mPe(this),this._firestoreClient.terminate()}}function f$t(e,t,n){n||(n="(default)");const r=uS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(M2(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function kk(e){return e._firestoreClient||mPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function mPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new UDt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,hPe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new t$t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function d$t(e){return o$t(kk(e=Vf(e,$y)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new VE(ya.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new VE(ya.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new So(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h$t=/^__.*__$/;class p$t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Oy(t,this.data,this.fieldMask,n,this.fieldTransforms):new Sk(t,this.data,n,this.fieldTransforms)}}class gPe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Oy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function yPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class IJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new IJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return E$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(yPe(this.fu)&&h$t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class m$t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||eF(t)}Fu(t,n,r,i=!1){return new IJ({fu:t,methodName:n,vu:r,path:So.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iF(e){const t=e._freezeSettings(),n=eF(e._databaseId);return new m$t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function vPe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);RJ("Data must be an object, but it was:",o,r);const a=wPe(r,o);let u,l;if(s.merge)u=new _l(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=dV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);xPe(c,d)||c.push(d)}u=new _l(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new p$t(new Su(a),u,l)}class sF extends rF{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof sF}}class kJ extends rF{_toFieldTransform(t){return new fOt(t.path,new q2)}isEqual(t){return t instanceof kJ}}function bPe(e,t,n,r){const i=e.Fu(1,t,n);RJ("Data must be an object, but it was:",i,r);const s=[],o=Su.empty();Rb(r,(u,l)=>{const c=NJ(t,u,n);l=ri(l);const f=i.Su(c);if(l instanceof sF)s.push(c);else{const d=Nk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new _l(s);return new gPe(o,a,i.fieldTransforms)}function _Pe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[dV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(dV(t,s[d])),u.push(s[d+1]);const l=[],c=Su.empty();for(let d=a.length-1;d>=0;--d)if(!xPe(l,a[d])){const h=a[d];let p=u[d];p=ri(p);const m=o.Su(h);if(p instanceof sF)l.push(h);else{const g=Nk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new _l(l);return new gPe(c,f,o.fieldTransforms)}function g$t(e,t,n,r=!1){return Nk(n,e.Fu(r?4:3,t))}function Nk(e,t){if(EPe(e=ri(e)))return RJ("Unsupported field value:",t,e),wPe(e,t);if(e instanceof rF)return function(r,i){if(!yPe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Nk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ri(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uOt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ps.fromDate(r);return{timestampValue:_$(i.serializer,s)}}if(r instanceof Ps){const s=new Ps(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_$(i.serializer,s)}}if(r instanceof CJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof VE)return{bytesValue:MNe(i.serializer,r._byteString)};if(r instanceof qa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${nF(r)}`)}(e,t)}function wPe(e,t){const n={};return cNe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rb(e,(r,i)=>{const s=Nk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function EPe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ps||e instanceof CJ||e instanceof VE||e instanceof qa||e instanceof rF)}function RJ(e,t,n){if(!EPe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=nF(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function dV(e,t,n){if((t=ri(t))instanceof Rk)return t._internalPath;if(typeof t=="string")return NJ(e,t);throw E$("Field path arguments must be of type string or ",e,!1,void 0,n)}const y$t=new RegExp("[~\\*/\\[\\]]");function NJ(e,t,n){if(t.search(y$t)>=0)throw E$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Rk(...t.split("."))._internalPath}catch{throw E$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function E$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function xPe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new v$t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(oF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v$t extends SPe{data(){return super.data()}}function oF(e,t){return typeof t=="string"?NJ(e,t):t instanceof Rk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PJ{}class TPe extends PJ{}function ehe(e,t,...n){let r=[];t instanceof PJ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof DJ).length,a=s.filter(u=>u instanceof aF).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class aF extends TPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new aF(t,n,r)}_apply(t){const n=this._parse(t);return APe(t._query,n),new Pb(t.firestore,t.converter,rV(t._query,n))}_parse(t){const n=iF(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){nhe(f,c);const h=[];for(const p of f)h.push(the(u,s,p));d={arrayValue:{values:h}}}else d=the(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||nhe(f,c),d=g$t(a,o,f,c==="in"||c==="not-in");return vs.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function _$t(e,t,n){const r=t,i=oF("where",e);return aF._create(i,r,n)}class DJ extends PJ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new DJ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:zf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)APe(o,u),o=rV(o,u)}(t._query,n),new Pb(t.firestore,t.converter,rV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class OJ extends TPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new OJ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new H2(s,o)}(t._query,this._field,this._direction);return new Pb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new fS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function w$t(e,t="asc"){const n=t,r=oF("orderBy",e);return OJ._create(r,n)}function the(e,t,n){if(typeof(n=ri(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bNe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ui.fromString(n));if(!Bt.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xde(e,new Bt(r))}if(n instanceof qa)return xde(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nF(n)}.`)}function nhe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function APe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class E$t{convertValue(t,n="none"){switch(Xv(t)){case 0:return null;case 1:return t.booleanValue;case 2:return gs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Kv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw on()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Rb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new CJ(gs(t.latitude),gs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=oJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(U2(t));default:return null}}convertTimestamp(t){const n=ey(t);return new Ps(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ui.fromString(t);ni(zNe(r));const i=new z2(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||Nm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CPe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class IPe extends SPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new hD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(oF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hD extends IPe{data(t={}){return super.data(t)}}class x$t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new pA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new hD(this._firestore,this._userDataWriter,r.key,r,new pA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new hD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new hD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:S$t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function S$t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(e){e=Vf(e,qa);const t=Vf(e.firestore,$y);return a$t(kk(t),e._key).then(n=>C$t(t,e,n))}class kPe extends E$t{constructor(t){super(),this.firestore=t}convertBytes(t){return new VE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new qa(this.firestore,null,n)}}function vT(e){e=Vf(e,Pb);const t=Vf(e.firestore,$y),n=kk(t),r=new kPe(t);return b$t(e._query),u$t(n,e._query).then(i=>new x$t(t,r,e,i))}function Kc(e,t,n){e=Vf(e,qa);const r=Vf(e.firestore,$y),i=CPe(e.converter,t,n);return uF(r,[vPe(iF(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Fu.none())])}function T$t(e,t,n,...r){e=Vf(e,qa);const i=Vf(e.firestore,$y),s=iF(i);let o;return o=typeof(t=ri(t))=="string"||t instanceof Rk?_Pe(s,"updateDoc",e._key,t,n,r):bPe(s,"updateDoc",e._key,t),uF(i,[o.toMutation(e._key,Fu.exists(!0))])}function A$t(e){return uF(Vf(e.firestore,$y),[new J6(e._key,Fu.none())])}function uF(e,t){return function(r,i){const s=new em;return r.asyncQueue.enqueueAndForget(async()=>W3t(await s$t(r),i,s)),s.promise}(kk(e),t)}function C$t(e,t,n){const r=n.docs.get(t._key),i=new kPe(e);return new IPe(e,i,t._key,r,new pA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I$t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=iF(t)}set(t,n,r){this._verifyNotCommitted();const i=nB(t,this._firestore),s=CPe(i.converter,n,r),o=vPe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Fu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=nB(t,this._firestore);let o;return o=typeof(n=ri(n))=="string"||n instanceof Rk?_Pe(this._dataReader,"WriteBatch.update",s._key,n,r,i):bPe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Fu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=nB(t,this._firestore);return this._mutations=this._mutations.concat(new J6(n._key,Fu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nB(e,t){if((e=ri(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function k$t(){return new kJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rhe(e){return kk(e=Vf(e,$y)),new I$t(e,t=>uF(e,t))}(function(t,n=!0){(function(i){cS=i})(kb),km(new xh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new $y(new ADt(r.getProvider("auth-internal")),new RDt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new z2(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Df(bde,"4.6.3",t),Df(bde,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV=new Map,RPe={activated:!1,tokenObservers:[]},R$t={initialized:!1,enabled:!1};function Ds(e){return hV.get(e)||Object.assign({},RPe)}function N$t(e,t){return hV.set(e,t),hV.get(e)}function lF(){return R$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NPe="https://content-firebaseappcheck.googleapis.com/v1",P$t="exchangeRecaptchaV3Token",D$t="exchangeDebugToken",ihe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},O$t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $$t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new $2,this.pending.promise.catch(n=>{}),await M$t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new $2,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function M$t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Nu=new aS("appCheck","AppCheck",L$t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function she(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function $J(e){if(!Ds(e).activated)throw Nu.create("use-before-activation",{appName:e.name})}function PPe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=BN(n)+"d:"),r&&(o+=BN(r)+"h:"),o+=BN(i)+"m:"+BN(s)+"s",o}function BN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MJ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Nu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Nu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Nu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Nu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function F$t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${NPe}/projects/${n}/apps/${r}:${P$t}?key=${i}`,body:{recaptcha_v3_token:t}}}function DPe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${NPe}/projects/${n}/apps/${r}:${D$t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$t="firebase-app-check-database",B$t=1,Y2="firebase-app-check-store",OPe="debug-token";let UN=null;function $Pe(){return UN||(UN=new Promise((e,t)=>{try{const n=indexedDB.open(j$t,B$t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Nu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Y2,{keyPath:"compositeKey"})}}}catch(n){t(Nu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),UN)}function U$t(e){return LPe(FPe(e))}function z$t(e,t){return MPe(FPe(e),t)}function V$t(e){return MPe(OPe,e)}function H$t(){return LPe(OPe)}async function MPe(e,t){const r=(await $Pe()).transaction(Y2,"readwrite"),s=r.objectStore(Y2).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Nu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function LPe(e){const n=(await $Pe()).transaction(Y2,"readonly"),i=n.objectStore(Y2).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Nu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function FPe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new B6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q$t(e){if(FQ()){let t;try{t=await U$t(e)}catch(n){K2.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function rB(e,t){return FQ()?z$t(e,t).catch(n=>{K2.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function W$t(){let e;try{e=await H$t()}catch{}if(e)return e;{const t=qIt();return V$t(t).catch(n=>K2.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LJ(){return lF().enabled}async function FJ(){const e=lF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function G$t(){const e=tRe(),t=lF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new $2;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(W$t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$t={error:"UNKNOWN_ERROR"};function K$t(e){return LQ.encodeString(JSON.stringify(e),!1)}async function pV(e,t=!1){const n=e.app;$J(n);const r=Ds(n);let i=r.token,s;if(i&&!rw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(rw(u)?i=u:await rB(n,void 0))}if(!t&&i&&rw(i))return{token:i.token};let o=!1;if(LJ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=MJ(DPe(n,await FJ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await rB(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ds(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?K2.warn(u.message):K2.error(u),s=u}let a;return i?s?rw(i)?a={token:i.token,internalError:s}:a=ahe(s):(a={token:i.token},r.token=i,await rB(n,i)):a=ahe(s),o&&UPe(n,a),a}async function X$t(e){const t=e.app;$J(t);const{provider:n}=Ds(t);if(LJ()){const r=await FJ(),{token:i}=await MJ(DPe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function jPe(e,t,n,r){const{app:i}=e,s=Ds(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&rw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),ohe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ohe(e))}function BPe(e,t){const n=Ds(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function ohe(e){const{app:t}=e,n=Ds(t);let r=n.tokenRefresher;r||(r=Q$t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Q$t(e){const{app:t}=e;return new $$t(async()=>{const n=Ds(t);let r;if(n.token?r=await pV(e,!0):r=await pV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ds(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ihe.RETRIAL_MIN_WAIT,ihe.RETRIAL_MAX_WAIT)}function UPe(e,t){const n=Ds(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function rw(e){return e.expireTimeMillis-Date.now()>0}function ahe(e){return{token:K$t(Y$t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J$t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ds(this.app);for(const n of t)BPe(this.app,n.next);return Promise.resolve()}}function Z$t(e,t){return new J$t(e,t)}function eMt(e){return{getToken:t=>pV(e,t),getLimitedUseToken:()=>X$t(e),addTokenListener:t=>jPe(e,"INTERNAL",t),removeTokenListener:t=>BPe(e.app,t)}}const tMt="@firebase/app-check",nMt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rMt="https://www.google.com/recaptcha/api.js";function iMt(e,t){const n=new $2,r=Ds(e);r.reCAPTCHAState={initialized:n};const i=sMt(e),s=she(!1);return s?uhe(e,t,s,i,n):uMt(()=>{const o=she(!1);if(!o)throw new Error("no recaptcha");uhe(e,t,o,i,n)}),n.promise}function uhe(e,t,n,r,i){n.ready(()=>{aMt(e,t,n,r),i.resolve(n)})}function sMt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function oMt(e){$J(e);const n=await Ds(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ds(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function aMt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ds(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ds(e).reCAPTCHAState.succeeded=!1}}),s=Ds(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function uMt(e){const t=document.createElement("script");t.src=rMt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;cMt(this._throttleData);const i=await oMt(this._app).catch(o=>{throw Nu.create("recaptcha-error")});if(!(!((t=Ds(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Nu.create("recaptcha-error");let s;try{s=await MJ(F$t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=lMt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Nu.create("throttled",{time:PPe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=uS(t,"heartbeat"),iMt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof jJ?this._siteKey===t._siteKey:!1}}function lMt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+O$t,httpStatus:e};{const n=t?t.backoffCount:0,r=XIt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function cMt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Nu.create("throttled",{time:PPe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fMt(e=BQ(),t){e=ri(e);const n=uS(e,"app-check");if(lF().initialized||G$t(),LJ()&&FJ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Nu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return dMt(e,t.provider,t.isTokenAutoRefreshEnabled),Ds(e).isTokenAutoRefreshEnabled&&jPe(r,"INTERNAL",()=>{}),r}function dMt(e,t,n){const r=N$t(e,Object.assign({},RPe));r.activated=!0,r.provider=t,r.cachedTokenPromise=q$t(e).then(i=>(i&&rw(i)&&(r.token=i,UPe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const hMt="app-check",lhe="app-check-internal";function pMt(){km(new xh(hMt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Z$t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(lhe).initialize()})),km(new xh(lhe,e=>{const t=e.getProvider("app-check").getImmediate();return eMt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Df(tMt,nMt)}pMt();function zN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zPe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof zN=="function"&&zN;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof zN=="function"&&zN,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Zs<"u"?Zs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:S;h(T,A,this.outcome)}else this.queue.push(new d(T,E,S));return T};function d(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){s(function(){var A;try{A=S(T)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var A=T.value;if(A)m(E,A);else{E.state=l,E.outcome=S;for(var C=-1,I=E.queue.length;++C<I;)E.queue[C].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var T=-1,A=E.queue.length;++T<A;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function A(M){T||(T=!0,a.reject(E,M))}function C(M){T||(T=!0,a.resolve(E,M))}function I(){S(C,A)}var R=g(I);R.status==="error"&&A(R.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(A){T.status="error",T.value=A}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=new Array(T),I=0,R=-1,M=new this(o);++R<T;)P(E[R],R);return M;function P(O,F){S.resolve(O).then(L,function(B){A||(A=!0,a.reject(M,B))});function L(B){C[F]=B,++I===T&&!A&&(A=!0,a.resolve(M,C))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=-1,I=new this(o);++C<T;)R(E[C]);return I;function R(M){S.resolve(M).then(function(P){A||(A=!0,a.resolve(I,P))},function(P){A||(A=!0,a.reject(I,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Zs<"u"?Zs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ge=0;ge<Y.length;ge+=1)fe.append(Y[ge]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ge=0;ge<se;ge++)fe[ge]=Y.charCodeAt(ge);return Z}function T(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(se){return y=se,y})}function C(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ge){Z.resolve=fe,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function I(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function M(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)C(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var le=u.open.apply(u,ge);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),I(Y)}})}function P(Y){return M(Y,!1)}function O(Y){return M(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function L(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ge){var le=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function D(Y){C(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ge=Z[fe];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,P(Y).then(function(le){return Y.db=le,F(Y)?O(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw R(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),O(Y)}).then(function(){return D(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ge.forages.length;Ve++){var qe=ge.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ge.forages.slice(0);return f.all(le).then(function(){return Z.db=ge.db,P(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?O(Z):st}).then(function(st){Z.db=ge.db=st,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var hn=Ge[Et];hn!==se&&(hn._dbInfo.db=Z.db,hn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var st=Ge.result;st===void 0&&(st=null),U(st)&&(st=B(st)),ge(st)},Ge.onerror=function(){le(Ge.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),st=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var hn=Et.value;U(hn)&&(hn=B(hn));var Nt=Y(hn,Et.key,st++);Nt!==void 0?ge(Nt):Et.continue()}else ge()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ge=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,b.call(se)==="[object Blob]"?A(Ve.db).then(function(qe){return qe?se:L(se)}):se}).then(function(qe){z(fe._dbInfo,E,function(Ge,st){if(Ge)return Oe(Ge);try{var Et=st.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var hn=Et.put(qe,Y);st.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},st.onabort=st.onerror=function(){var Nt=hn.error?hn.error:hn.transaction.error;Oe(Nt)}}catch(Nt){Oe(Nt)}})}).catch(Oe)});return d(ge,Z),ge}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ge()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var st=Ge.error?Ge.error:Ge.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,E,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ge(Ge)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ge(qe.error)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,fe=new f(function(ge,le){if(Y<0){ge(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,st=qe.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ge(null);return}Y===0||Ge?ge(Et.key):(Ge=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var st=qe.result;if(!st){fe(Ge);return}Ge.push(st.key),st.continue()},qe.onerror=function(){ge(qe.error)}}catch(st){ge(st)}})}).catch(ge)});return d(Z,Y),Z}function ve(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):P(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var st=0;st<Ge.length;st++)Ge[st]._dbInfo.db=Ve;return Ve});Y.storeName?ge=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;C(Y);var Ge=v[Y.name],st=Ge.forages;Ve.close();for(var Et=0;Et<st.length;Et++){var hn=st[Et];hn._dbInfo.db=null,hn._dbInfo.version=qe}var Nt=new f(function(Bn,Ir){var kr=u.open(Y.name,qe);kr.onerror=function(Bo){var fd=kr.result;fd.close(),Ir(Bo)},kr.onupgradeneeded=function(){var Bo=kr.result;Bo.deleteObjectStore(Y.storeName)},kr.onsuccess=function(){var Bo=kr.result;Bo.close(),Bn(Bo)}});return Nt.then(function(Bn){Ge.db=Bn;for(var Ir=0;Ir<st.length;Ir++){var kr=st[Ir];kr._dbInfo.db=Bn,I(kr._dbInfo)}}).catch(function(Bn){throw(R(Y,Bn)||f.resolve()).catch(function(){}),Bn})}}):ge=Oe.then(function(Ve){C(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var st=0;st<Ge.length;st++){var Et=Ge[st];Et._dbInfo.db=null}var hn=new f(function(Nt,Bn){var Ir=u.deleteDatabase(Y.name);Ir.onerror=function(){var kr=Ir.result;kr&&kr.close(),Bn(Ir.error)},Ir.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Ir.onsuccess=function(){var kr=Ir.result;kr&&kr.close(),Nt(kr)}});return hn.then(function(Nt){qe.db=Nt;for(var Bn=0;Bn<Ge.length;Bn++){var Ir=Ge[Bn];I(Ir._dbInfo)}}).catch(function(Nt){throw(R(Y,Nt)||f.resolve()).catch(function(){}),Nt})})}return d(ge,se),ge}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ye,keys:Ie,dropInstance:ve};function Ue(){return typeof openDatabase=="function"}var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Dt="blob",We="si08",me="ui08",dt="uic8",yt="si16",pe="si32",Ce="ur16",He="ui32",ut="fl32",_t="fl64",Ln=ze+ct.length,Tr=Object.prototype.toString;function Fn(Y){var se=Y.length*.75,Z=Y.length,fe,ge=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),st=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=gt.indexOf(Y[fe]),Oe=gt.indexOf(Y[fe+1]),Ve=gt.indexOf(Y[fe+2]),qe=gt.indexOf(Y[fe+3]),st[ge++]=le<<2|Oe>>4,st[ge++]=(Oe&15)<<4|Ve>>2,st[ge++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=gt[se[fe]>>2],Z+=gt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=gt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=gt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function pn(Y,se){var Z="";if(Y&&(Z=Tr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Tr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ge=ke;Y instanceof ArrayBuffer?(fe=Y,ge+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ge+=We:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=dt:Z==="[object Int16Array]"?ge+=yt:Z==="[object Uint16Array]"?ge+=Ce:Z==="[object Int32Array]"?ge+=pe:Z==="[object Uint32Array]"?ge+=He:Z==="[object Float32Array]"?ge+=ut:Z==="[object Float64Array]"?ge+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ge+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=it+Y.type+"~"+cr(this.result);se(ke+Dt+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Tn(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Ln),Z=Y.substring(ze,Ln),fe;if(Z===Dt&&be.test(se)){var ge=se.match(be);fe=ge[1],se=se.substring(ge[0].length)}var le=Fn(se);switch(Z){case ct:return le;case Dt:return c([le],{type:fe});case We:return new Int8Array(le);case me:return new Uint8Array(le);case dt:return new Uint8ClampedArray(le);case yt:return new Int16Array(le);case Ce:return new Uint16Array(le);case pe:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:pn,deserialize:Tn,stringToBuffer:Fn,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Fo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ge=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ge}function $i(Y,se,Z,fe,ge,le){Y.executeSql(Z,fe,ge,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ge,le)},le)},le):le(Oe,Ve)},le)}function An(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ge(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Mi(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var st=Ge.rows,Et=st.length,hn=0;hn<Et;hn++){var Nt=st.item(hn),Bn=Nt.value;if(Bn&&(Bn=Oe.serializer.deserialize(Bn)),Bn=Y(Bn,Nt.key,hn+1),Bn!==void 0){ge(Bn);return}}ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ar(Y,se,Z,fe){var ge=this;Y=p(Y);var le=new f(function(Oe,Ve){ge.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ge._dbInfo;Ge.serializer.serialize(se,function(st,Et){Et?Ve(Et):Ge.db.transaction(function(hn){$i(hn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(qe)},function(Nt,Bn){Ve(Bn)})},function(hn){if(hn.code===hn.QUOTA_ERR){if(fe>0){Oe(Ar.apply(ge,[Y,qe,Z,fe-1]));return}Ve(hn)}})})}).catch(Ve)});return d(le,Z),le}function ds(Y,se,Z){return Ar.apply(this,[Y,se,Z,1])}function rp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function rl(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function ld(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Er(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).key:null;ge(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ai(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],st=0;st<qe.rows.length;st++)Ge.push(qe.rows.item(st).key);fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Yr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ge,le){Z(le)})},function(fe){Z(fe)})})}function ou(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;return Y.name?ge=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Yr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Nt){return new f(function(Bn,Ir){qe.executeSql("DROP TABLE IF EXISTS "+Nt,[],function(){Bn()},function(kr,Bo){Ir(Bo)})})}for(var st=[],Et=0,hn=le.storeNames.length;Et<hn;Et++)st.push(Ge(le.storeNames[Et]));f.all(st).then(function(){Oe()}).catch(function(Nt){Ve(Nt)})},function(qe){Ve(qe)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Sa={_driver:"webSQLStorage",_initStorage:Fo,_support:Ue(),iterate:Mi,getItem:An,setItem:ds,removeItem:rp,clear:rl,length:ld,key:Er,keys:Ai,dropInstance:ou};function Ta(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Se(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function xe(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var le=localStorage.key(ge);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo,le=localStorage.getItem(ge.keyPrefix+Y);return le&&(le=ge.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ge=Z._dbInfo,le=ge.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var st=localStorage.key(Ge);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ge.serializer.deserialize(Et)),Et=Y(Et,st.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Vt(Y,se){var Z=this,fe=Z.ready().then(function(){var ge=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ge.keyPrefix.length)),le});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ge=localStorage.length,le=[],Oe=0;Oe<ge;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function jn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function dn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ge=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,st){if(st)Ve(st);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ge,Z),ge}function Cr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ge;return Y.name?ge=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var zt={_driver:"localStorageWrapper",_initStorage:Se,_support:Ta(),iterate:St,getItem:ot,setItem:ir,removeItem:dn,clear:xe,length:jn,key:Vt,keys:On,dropInstance:Cr},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},zr=function(se,Z){for(var fe=se.length,ge=0;ge<fe;){if(sr(se[ge],Z))return!0;ge++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ci={},Us={},Kr={INDEXEDDB:Ke,WEBSQL:Sa,LOCALSTORAGE:zt},fo=[Kr.INDEXEDDB._driver,Kr.WEBSQL._driver,Kr.LOCALSTORAGE._driver],Li=["dropInstance"],Fi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Li),jo={description:"",driver:fo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Aa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function zs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Wl=function(){function Y(se){o(this,Y);for(var Z in Kr)if(Kr.hasOwnProperty(Z)){var fe=Kr[Z],ge=fe._driver;this[Z]=ge,Ci[ge]||this.defineDriver(fe)}this._defaultConfig=zs({},jo),this._config=zs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ge){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var st=Fi.concat("_initStorage"),Et=0,hn=st.length;Et<hn;Et++){var Nt=st[Et],Bn=!zr(Li,Nt);if((Bn||Z[Nt])&&typeof Z[Nt]!="function"){Ve(Ge);return}}var Ir=function(){for(var fd=function(Gl){return function(){var au=new Error("Method "+Gl+" is not implemented by the current driver"),sp=f.reject(au);return d(sp,arguments[arguments.length-1]),sp}},ip=0,MS=Li.length;ip<MS;ip++){var Yy=Li[ip];Z[Yy]||(Z[Yy]=fd(Yy))}};Ir();var kr=function(fd){Ci[qe]&&console.info("Redefining LocalForage driver: "+qe),Ci[qe]=Z,Us[qe]=fd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(kr,Ve):kr(!!Z._support):kr(!0)}catch(Bo){Ve(Bo)}});return h(le,fe,ge),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ge){var le=Ci[Z]?f.resolve(Ci[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ge),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ge=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,fe,ge){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var hn=0;function Nt(){for(;hn<Et.length;){var Bn=Et[hn];return hn++,le._dbInfo=null,le._ready=null,le.getDriver(Bn).then(qe).catch(Nt)}Ve();var Ir=new Error("No available storage method found.");return le._driverSet=f.reject(Ir),le._driverSet}return Nt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(hn){le._driver=hn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ge),this._driverSet},Y.prototype.supports=function(Z){return!!Us[Z]},Y.prototype._extend=function(Z){zs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ge=0,le=Z.length;ge<le;ge++){var Oe=Z[ge];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Fi.length;Z<fe;Z++)Aa(this,Fi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),cd=new Wl;r.exports=cd},{3:3}]},{},[4])(4)})})(zPe);var mMt=zPe.exports;const mV=Ul(mMt);var go=[];for(var iB=0;iB<256;++iB)go.push((iB+256).toString(16).slice(1));function gMt(e,t=0){return(go[e[t+0]]+go[e[t+1]]+go[e[t+2]]+go[e[t+3]]+"-"+go[e[t+4]]+go[e[t+5]]+"-"+go[e[t+6]]+go[e[t+7]]+"-"+go[e[t+8]]+go[e[t+9]]+"-"+go[e[t+10]]+go[e[t+11]]+go[e[t+12]]+go[e[t+13]]+go[e[t+14]]+go[e[t+15]]).toLowerCase()}var VN,yMt=new Uint8Array(16);function vMt(){if(!VN&&(VN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!VN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return VN(yMt)}var bMt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const che={randomUUID:bMt};function x$(e,t,n){if(che.randomUUID&&!t&&!e)return che.randomUUID();e=e||{};var r=e.random||(e.rng||vMt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,gMt(r)}class VPe{constructor(t){sl(this,"engine");sl(this,"connected",!1);sl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Uw(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function bT(e){return e.participantId!==void 0}class df extends VPe{constructor(){super("firebase");sl(this,"RECAPTCHAV3TOKEN","6LfZFvgpAAAAAASYVKyTVe7V0at6zdqBt8L1kI3I");sl(this,"firestore");sl(this,"collectionPrefix","prod-");sl(this,"studyCollection");sl(this,"storage");sl(this,"studyId","");sl(this,"localForage",mV.createInstance({name:"currentParticipantId"}));sl(this,"participantData",null);const n=GX.parse(`
{
  apiKey: "AIzaSyAt0JPT7QXK5N4Oc-n6gnEJEDtfUYQqpeU",
  authDomain: "sumsifterdemo.firebaseapp.com",
  projectId: "sumsifterdemo",
  storageBucket: "sumsifterdemo.appspot.com",
  messagingSenderId: "529083000336",
  appId: "1:529083000336:web:3af6cc2f15933822af0c95"
}
`),r=aRe(n);this.firestore=f$t(r,{}),this.storage=_Dt();try{fMt(r,{provider:new jJ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await d$t(this.firestore);const n=await Vs(this.firestore,".info/connected");await tB(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=g$();if(!i.currentUser&&(await jRt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Uw(JSON.stringify(r));if(this.studyCollection=Yc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");if(bT(o))return this.participantData=o,o;const a=await Uw(JSON.stringify(r));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=x$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=Vs(this.studyCollection,"sequenceAssignment");await Kc(r,{});const i=Yc(r,"sequenceAssignment"),s=Vs(i,this.currentParticipantId),o=ehe(i,_$t("participantId","==","")),a=await vT(o);if(a.docs.length>0){const h=a.docs[0],p=h.data().timestamp;await A$t(h.ref),await Kc(s,{participantId:this.currentParticipantId,timestamp:p})}else await Kc(s,{participantId:this.currentParticipantId,timestamp:k$t()});const u=ehe(i,w$t("timestamp","asc")),f=(await vT(u)).docs.map(h=>h.data()).findIndex(h=>h.participantId===this.currentParticipantId),d=n[f%n.length];if(!d)throw new Error("Latin square is empty");return d}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await gT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");bT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return bT(n)?n:null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=x$();await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;const s=await Uw(JSON.stringify(n)),o={participantId:i,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};return await this._pushToFirebaseStorage(`participants/${i}`,"participantData",o),o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");return this.participantData.completed=!0,await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Yc(this.firestore,"user-management"),i=await vT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await Kc(Vs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Kc(Vs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Kc(Vs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Kc(Vs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Kc(Vs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Gc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await gT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");bT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Yc(this.firestore,`${this.collectionPrefix}${n}`),s=Gc(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!bT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Vs(i,"sequenceAssignment"),u=Yc(a,"sequenceAssignment"),l=Vs(u,r);await T$t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Vs(this.firestore,"metadata","collections"),i=await tB(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Vs(this.firestore,"metadata","collections");await Kc(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Vs(this.firestore,"metadata","collections"),i=await tB(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Kc(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Gc(this.storage,n),s=(await gT(r)).items.map(o=>yde(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Gc(this.storage,n),o=(await gT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Gc(this.storage,n),s=Gc(this.storage,r),o=await Xj(i),u=await(await fetch(o)).blob();await Kj(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Yc(this.firestore,n),s=Vs(i,"sequenceAssignment"),o=Yc(s,"sequenceAssignment"),a=Yc(this.firestore,r),u=Vs(a,"sequenceAssignment");await Kc(u,{});const l=Yc(u,"sequenceAssignment"),c=await vT(o),f=rhe(this.firestore);c.docs.forEach(d=>{const h=Vs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Yc(this.firestore,n),i=Vs(r,"sequenceAssignment"),s=Yc(i,"sequenceAssignment"),o=await vT(s),a=rhe(this.firestore);o.forEach(u=>{const l=Vs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Gc(this.storage,n);return(await gT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Xj(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Xj(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await Kj(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Kj(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Gc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await yde(i)}}const HPe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),pS=()=>N.useContext(HPe);function _Mt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=wa(),l=async()=>{const h=g$();try{await WRt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;N.useEffect(()=>{s(t);let h;if(u instanceof df)try{h=g$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof df){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=qRt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(HPe.Provider,{value:d,children:i.determiningStatus?_.jsx(xc,{visible:!0}):e})}function wMt(){const{config:e,metadata:t}=Fc(w=>w),n=lY(),r=Bh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=jh(),{storageEngine:o}=wa(),a=qm(),u=pS(),l=n.length-1,c=typeof a=="number"?a/l*100:0,[f,d]=N.useState(!1),h=e==null?void 0:e.uiConfig.logoPath,p=e==null?void 0:e.uiConfig.withProgressBar,m=VI(),g=f_e(`/${m}`),y=N.useRef(null),[v,b]=N.useState(!1);return N.useEffect(()=>{const w=y.current;w&&b(w.scrollWidth>w.offsetWidth)},[e]),_.jsx(di.Header,{p:"md",children:_.jsxs(ss,{mt:-7,align:"center",children:[_.jsx(ss.Col,{span:4,children:_.jsxs(Zt,{align:"center",children:[_.jsx(Sy,{w:40,src:`${Lh}${h}`,alt:"Study Logo"}),_.jsx(Rf,{w:"md"}),_.jsx(oi,{ref:y,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:v?e==null?void 0:e.studyMetadata.title:void 0,children:e==null?void 0:e.studyMetadata.title})]})}),_.jsx(ss.Col,{span:4,children:p&&_.jsx(kx,{radius:"md",size:"lg",value:c})}),_.jsx(ss.Col,{span:4,children:_.jsxs($s,{wrap:"nowrap",justify:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&_.jsx(Nn,{variant:"outline",onClick:()=>r(i()),children:"Help"}),u.user.isAdmin&&_.jsxs(bu,{shadow:"md",width:200,withinPortal:!0,opened:f,onChange:d,children:[_.jsx(bu.Target,{children:_.jsx(P0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(nKe,{})})}),_.jsxs(bu.Dropdown,{children:[_.jsx(bu.Item,{leftSection:_.jsx(cKe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),_.jsx(bu.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(oKe,{size:14}),children:"Contact"}),_.jsx(bu.Item,{leftSection:_.jsx(LG,{size:14}),onClick:()=>Qke(o,e,t,g),children:"Next Participant"})]})]})]})})]})})}function EMt(){var u;const e=(u=ym())==null?void 0:u.uiConfig.sidebar,t=ym(),n=Wm(),r=t.components[n],i=N.useMemo(()=>{var l;return r?F6(r)&&t.baseComponents?cY({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=fY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(di.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(di.Section,{bg:"gray.3",p:"md",children:_.jsxs(et,{c:"gray.9",children:[_.jsx(et,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ga,{text:o})]})}),_.jsx(di.Section,{p:"md",children:_.jsx(RO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(di.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(RO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function xMt(){const{showHelpText:e,config:t}=Fc(u=>u),n=Bh(),{toggleShowHelpText:r}=jh(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){const l=await hY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(bs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ga,{text:i}):_.jsx(Nv,{path:t.uiConfig.helpTextPath})})}function SMt(){const{alertModal:e}=Fc(o=>o),{setAlertModal:t}=jh(),n=Bh(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),_.jsx(bs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(IW,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(GYe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(et,{my:"md",children:e.message}),_.jsx($s,{w:"100%",justify:"end",children:_.jsx(Nn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function TMt(){const e=N.useRef([]),t=ym(),n=t.uiConfig.windowEventDebounceTime??100,r=Fc(s=>s.showStudyBrowser);N.useEffect(()=>{const s=yd(p=>{e.current.push([Date.now(),"focus",p.target instanceof HTMLElement?p.target.tagName:""])},n,{maxWait:n}),o=yd(p=>{e.current.push([Date.now(),"input",p.data??""])},n,{maxWait:n}),a=yd(p=>{e.current.push([Date.now(),"keypress",p.key])},n,{maxWait:n}),u=yd(p=>{e.current.push([Date.now(),"mousedown",[p.clientX,p.clientY]])},n,{maxWait:n}),l=yd(p=>{e.current.push([Date.now(),"mouseup",[p.clientX,p.clientY]])},n,{maxWait:n}),c=yd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),f=yd(p=>{e.current.push([Date.now(),"mousemove",[p.clientX,p.clientY]])},n,{maxWait:n}),d=yd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),h=yd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",s,!0),window.addEventListener("input",o),window.addEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.addEventListener("resize",c),window.addEventListener("mousemove",f),window.addEventListener("scroll",d),document.addEventListener("visibilitychange",h),()=>{window.removeEventListener("focus",s,!0),window.removeEventListener("input",o),window.removeEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.removeEventListener("resize",c),window.removeEventListener("mousemove",f),window.removeEventListener("scroll",d),document.removeEventListener("visibilitychange",h)}},[]);const i=t.uiConfig.sidebarWidth??300;return _.jsx(vEe.Provider,{value:e,children:_.jsxs(di,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!r,mobile:!r}},children:[_.jsx(EMt,{}),_.jsx(EIt,{}),_.jsx(wMt,{}),_.jsx(xMt,{}),_.jsx(SMt,{}),_.jsx(di.Main,{children:_.jsx(DYe,{})})]})})}function AMt(e,t=!1){return typeof e=="number"?fhe(e,t):fhe(e.length,t).map(r=>r.map(i=>e[i]))}function fhe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function qPe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=qPe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function CMt(e,t){const n=cv(e);return qPe(n,t,"root")}function WPe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&WPe(s,t,i,o)})}function IMt(e){const t=[];return WPe(e,t,"",0),t}function dhe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return AMt(i.sort(()=>.5-Math.random()),!0)}function kMt(e){const n=IMt(e.sequence).map(s=>({[s]:dhe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=CMt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=dhe(e,o))})}),i}var RMt={VITE_BASE_PATH:"/SumSifter/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAt0JPT7QXK5N4Oc-n6gnEJEDtfUYQqpeU",
  authDomain: "sumsifterdemo.firebaseapp.com",
  projectId: "sumsifterdemo",
  storageBucket: "sumsifterdemo.appspot.com",
  messagingSenderId: "529083000336",
  appId: "1:529083000336:web:3af6cc2f15933822af0c95"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZFvgpAAAAAASYVKyTVe7V0at6zdqBt8L1kI3I",VITE_REVISIT_MODE:"private",BASE_URL:"/SumSifter/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function NMt(e){const t=await(await fetch(`${Lh}${e}`)).text();return mIt(t)}async function cF(e,t){const n=t.configsList.find(r=>__e(r)===e);if(n){const r=t.configs[n];return await NMt(`${r.path}`)}return null}async function PMt(e){const t={},n=e.configsList.filter(i=>RMt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>cF(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function DMt({globalConfig:e}){const t=VI(),[n,r]=N.useState(null),i=e.configsList.includes(t),s=pS();N.useEffect(()=>{cF(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=N.useState([]),[u,l]=N.useState(null),{storageEngine:c}=wa(),[f]=$G();N.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await kMt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(T=>""),b=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},E=await c.initializeParticipantSession(y,n,w,g),S=await Cit(t,n,E.sequence,w,E.answers,s.user.isAdmin);l(S),a([{element:_.jsx(TMt,{}),children:[{path:"/",element:_.jsx(Bz,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(oi,{order:2,mb:8,children:"Error loading config"}),_.jsx(FU,{issues:n.errors,type:"error"})]}):_.jsx(bIt,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=h_e(o);let h=null;return i?o.length===0?h=_.jsx(xc,{visible:!0}):h=d&&u?_.jsx(yEe.Provider,{value:u,children:_.jsx(wrt,{store:u.store,children:d})}):_.jsx(Nv,{}):h=_.jsx(Nv,{}),h}function bC({studyIds:e}){const t=Hm(),{studyId:n}=aE(),r=wb(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=wa(),{user:o,logout:a}=pS(),[u,l]=N.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(rKe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(QYe,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:_.jsx(g_e,{}),href:"/settings",needAdmin:!0}];return _.jsx(di.Header,{p:"md",children:_.jsxs(ss,{mt:-7,align:"center",children:[_.jsx(ss.Col,{span:6,children:_.jsxs(Zt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Sy,{w:40,src:`${Lh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Rf,{w:"md"}),_.jsx(oi,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(ss.Col,{span:6,children:_.jsxs(Zt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(OI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(QW,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx($h,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Zt,{direction:"column",mt:20,children:[_.jsx(et,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(Nn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(Nn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(Ee,{ml:10,children:[_.jsx(eG,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function GPe({allParticipants:e,studyId:t,config:n}){const[r,{close:i,open:s}]=yw(!1),[o,{close:a,open:u}]=yw(!1),[l,{open:c,close:f}]=yw(!1);return _.jsxs(_.Fragment,{children:[_.jsxs($s,{children:[_.jsxs(Jr,{opened:r,children:[_.jsx(Jr.Target,{children:_.jsx(Nn,{variant:"light",disabled:e.length===0,onClick:()=>{MQ(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:s,onMouseLeave:i,px:4,children:_.jsx(tKe,{})})}),_.jsx(Jr.Dropdown,{children:_.jsx(et,{children:"Download all participants data as JSON"})})]}),_.jsxs(Jr,{opened:o,children:[_.jsx(Jr.Target,{children:_.jsx(Nn,{variant:"light",disabled:e.length===0,onClick:c,onMouseEnter:u,onMouseLeave:a,px:4,children:_.jsx(y_e,{})})}),_.jsx(Jr.Dropdown,{children:_.jsx(et,{children:"Download all participants data as a tidy CSV"})})]})]}),l&&_.jsx(yIt,{opened:l,close:f,filename:`${t}_all_tidy.csv`,studyConfig:n,data:e})]})}function OMt({cellData:e}){return _.jsx(Cn.Td,{children:_.jsx(Lp,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(Ee,{children:[_.jsxs(et,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(et,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function hhe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(Cn.Td,{children:[t.toFixed(1)," ","s"]})}function $Mt(e){const{metaData:t}=e;return _.jsx(Cn.Td,{children:_.jsx(SG,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Lp,{gap:"xs",children:[_.jsxs(Ee,{children:["IP:"," ",t.ip]}),_.jsxs(Ee,{children:["Language:"," ",t.language]}),_.jsxs(Ee,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(Ee,{children:["User Agent:"," ",t.userAgent]})]})})})}function MMt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=wa(),{studyId:s}=aE(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),await r())},[a,u]=N.useState([]),[l,c]=N.useState(!1),f=()=>xU({title:"Confirm rejecting participants",children:_.jsxs(et,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(et,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),await r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=gEe(n.sequence),p=[_.jsx(Cn.Th,{children:_.jsx(Zt,{justify:"center",children:_.jsx(dm,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),_.jsx(Cn.Th,{children:"ID"},"ID"),_.jsx(Cn.Th,{children:"Status"},"status"),_.jsx(Cn.Th,{children:"Meta"},"meta"),...h.flatMap(g=>[_.jsx(Cn.Th,{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),_.jsxs(Cn.Th,{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),_.jsx(Cn.Th,{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>_.jsxs(Cn.Tr,{children:[_.jsx(Cn.Td,{children:_.jsx(Zt,{justify:"center",children:_.jsx(dm,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),_.jsx(Cn.Td,{style:{whiteSpace:"nowrap"},children:g.participantId}),_.jsx(Cn.Td,{children:_.jsxs(Zt,{direction:"row",align:"center",children:[g.rejected?_.jsx(Fa,{label:"Rejected",children:_.jsx(b_e,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?_.jsx(Fa,{label:"Completed",children:_.jsx(eKe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(Fa,{label:"In Progress",children:_.jsx(uKe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&_.jsxs(et,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(gm(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?_.jsx($Mt,{metaData:g.metadata}):_.jsx(Cn.Td,{children:"N/A"}),h.map(y=>{const v=pEe(g.sequence,y.orderPath),b=v&&Object.entries(g.answers).sort((w,E)=>{const S=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),T=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10);return S-T}).filter(([w])=>{const E=w.slice(0,w.lastIndexOf("_")),S=parseInt(w.slice(w.lastIndexOf("_")+1),10);return E===y.componentName&&S<=v[0].lastIndex&&S>=v[0].firstIndex});return b!==null&&b.length>=y.timesSeenInBlock+1?_.jsxs(Ht.Fragment,{children:[_.jsx(OMt,{cellData:b[y.timesSeenInBlock][1]}),_.jsx(hhe,{cellData:b[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):_.jsxs(Ht.Fragment,{children:[_.jsx(Cn.Td,{children:"N/A"}),_.jsx(Cn.Td,{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),_.jsx(hhe,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx(xc,{visible:l,overlayProps:{blur:2}}),_.jsxs(Zt,{justify:"space-between",mb:8,p:8,children:[_.jsx($s,{children:_.jsx(OI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,value:null,leftSection:_.jsx(fKe,{size:14}),onChange:g=>g&&d(g)})}),_.jsxs($s,{children:[_.jsx(GPe,{allParticipants:[...e,...t],studyId:s||"",config:n}),_.jsx(Nn,{disabled:a.length===0,onClick:f,color:"red",children:"Reject Participants"})]})]}),_.jsxs(Cn,{striped:!0,withTableBorder:!0,children:[_.jsx(Cn.Thead,{children:_.jsx(Cn.Tr,{children:p})}),_.jsx(Cn.Tbody,{children:m})]})]}):_.jsx(Zt,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(et,{children:"No data available"})})}function LMt({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(""),[c,f]=N.useState([]),[d,h]=N.useState(""),[p,m]=N.useState(!1),[g,y]=N.useState(!1),{storageEngine:v}=wa(),b=v,w=N.useCallback(async()=>{y(!0);const M=await b.getSnapshots(e);f(M),y(!1)},[b,e]);N.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},T=async M=>{m(!0),await b.restoreSnapshot(e,M),w(),m(!1),await t()},A=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},C=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},I=()=>xU({title:"Create a Snapshot",children:_.jsx(et,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),R=M=>xU({title:"Restore Snapshot",children:_.jsx(et,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>T(M)});return _.jsxs(_.Fragment,{children:[_.jsx(xc,{visible:p}),_.jsx(Oh,{children:_.jsxs(xy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(oi,{mb:"lg",order:4,children:"Data Management"}),_.jsxs(Zt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(oi,{order:5,children:"Create a Snapshot"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(et,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Fa,{label:"Create a snapshot",children:_.jsx(Nn,{onClick:I,children:"Snapshot"})})]}),_.jsx(Rf,{h:"lg"}),_.jsxs(Zt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(oi,{order:5,children:"Archive Data"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Fa,{label:"Snapshot and Delete Data",children:_.jsx(Nn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Rf,{h:"lg"}),_.jsxs(Zt,{justify:"space-between",align:"center",children:[_.jsxs(Ee,{style:{width:"70%"},children:[_.jsx(oi,{order:5,children:"Delete Data"}),_.jsxs(et,{children:["This will delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(Fa,{label:"Delete Data",children:_.jsx(Nn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(Rf,{h:"xl"}),_.jsxs(Zt,{direction:"column",children:[_.jsx(Zt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(oi,{order:5,children:"Snapshots"})}),_.jsxs(Ee,{style:{position:"relative"},children:[_.jsx(xc,{visible:g}),c.length>0?c.map(M=>_.jsxs(Zt,{justify:"space-between",mb:"xs",children:[_.jsx(et,{children:M}),_.jsxs(Zt,{direction:"row",gap:"xs",children:[_.jsx(Fa,{label:"Restore Snapshot",children:_.jsx(P0,{color:"blue",variant:"subtle",onClick:()=>{R(M)},children:_.jsx(lKe,{})})}),_.jsx(Fa,{label:"Delete Snapshot",children:_.jsx(P0,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(M)},children:_.jsx(v_e,{})})})]})]},M)):_.jsx(et,{children:"No snapshots."})]})]})]})}),_.jsxs(bs,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(et,{children:"Archive Data"}),children:[_.jsx(et,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(lv,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(Nn,{color:"red",onClick:S,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(bs,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(et,{children:"Delete Snapshot"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(lv,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(Nn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(bs,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(et,{children:"Delete Live Data"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(lv,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:M=>h(M.target.value)}),_.jsxs(Zt,{mt:"sm",justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(Nn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]})]})}function FMt(e){const{globalConfig:t}=e,{studyId:n}=aE(),[r,i]=N.useState([]),[s,o]=N.useState(void 0),[a,u]=N.useState(!1),{storageEngine:l}=wa(),c=Hm(),{tab:f}=aE(),d=N.useCallback(async()=>{if(u(!0),n){const g=await cF(n,t);if(!g||!l)return;await l.initializeStudyDb(n,g);const y=await l.getAllParticipantsData();i(y),o(g),u(!1)}},[t,l,n]);N.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=N.useMemo(()=>{const g=r.filter(v=>v.completed),y=r.filter(v=>!v.completed);return[g,y]},[r]),m=l instanceof df;return _.jsxs(_.Fragment,{children:[_.jsx(bC,{studyIds:e.globalConfig.configsList}),_.jsx(di.Main,{children:_.jsxs(Oh,{fluid:!0,style:{height:"100%"},children:[_.jsx(xc,{visible:a}),_.jsxs(ts,{variant:"outline",value:f,onChange:g=>c(`./../${g}`),style:{height:"100%"},children:[_.jsxs(ts.List,{children:[_.jsx(ts.Tab,{value:"table",leftSection:_.jsx(dKe,{size:16}),children:"Table View"}),_.jsx(ts.Tab,{value:"stats",leftSection:_.jsx(JYe,{size:16}),children:"Trial Stats"}),_.jsx(ts.Tab,{value:"replay",leftSection:_.jsx(aKe,{size:16}),children:"Individual Replay"}),_.jsx(ts.Tab,{value:"manage",leftSection:_.jsx(g_e,{size:16}),disabled:!m,children:"Manage"})]}),_.jsx(ts.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&_.jsx(MMt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),_.jsx(ts.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(ts.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(ts.Panel,{value:"manage",pt:"xs",children:n&&m&&_.jsx(LMt,{studyId:n,refresh:d})})]})]})})]})}function sB({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=pS(),{storageEngine:i}=wa();return N.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?_.jsx(xc,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?_.jsx(OG,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function YPe(e,t,n){if(e instanceof df){t(!0);const r=new Dp,i=g$();try{await hNt(i,r,URe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function jMt(){const{user:e}=pS(),[t,n]=N.useState(null),[r,i]=N.useState(!1),{storageEngine:s}=wa();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(OG,{to:"/"}):_.jsx(Oh,{children:_.jsx(xy,{padding:"lg",children:_.jsxs(Zt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Sy,{maw:200,mt:50,mb:100,src:`${Lh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(et,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Nn,{onClick:()=>YPe(s,i,n),leftSection:_.jsx(hKe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(yc,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(xc,{visible:r})]})})})}var KPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Zs,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var F=["th","st","nd","rd"],L=O%100;return"["+O+(F[(L-20)%10]||F[L]||F[0])+"]"}},b=function(O,F,L){var B=String(O);return!B||B.length>=F?O:""+Array(F+1-B.length).join(L)+O},w={s:b,z:function(O){var F=-O.utcOffset(),L=Math.abs(F),B=Math.floor(L/60),U=L%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function O(F,L){if(F.date()<L.date())return-O(L,F);var B=12*(L.year()-F.year())+(L.month()-F.month()),U=F.clone().add(B,f),H=L-U<0,D=F.clone().add(B+(H?-1:1),f);return+(-(B+(L-U)/(H?U-D:D-U))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",A=function(O){return O instanceof M||!(!O||!O[T])},C=function O(F,L,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();S[H]&&(U=H),L&&(S[H]=L,U=H);var D=F.split("-");if(!U&&D.length>1)return O(D[0])}else{var z=F.name;S[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},I=function(O,F){if(A(O))return O.clone();var L=typeof F=="object"?F:{};return L.date=O,L.args=arguments,new M(L)},R=w;R.l=C,R.i=A,R.w=function(O,F){return I(O,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var M=function(){function O(L){this.$L=C(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[T]=!0}var F=O.prototype;return F.parse=function(L){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(R.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var D=U.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return H?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(U)}(L),this.init()},F.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},F.$utils=function(){return R},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(L,B){var U=I(L);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(L,B){return I(L)<this.startOf(B)},F.isBefore=function(L,B){return this.endOf(B)<I(L)},F.$g=function(L,B,U){return R.u(L)?this[B]:this.set(U,L)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(L,B){var U=this,H=!!R.u(B)||B,D=R.p(L),z=function(he,ye){var Ie=R.w(U.$u?Date.UTC(U.$y,ye,he):new Date(U.$y,ye,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ye){return R.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(L){return this.startOf(L,!1)},F.$set=function(L,B){var U,H=R.p(L),D="set"+(this.$u?"UTC":""),z=(U={},U[l]=D+"Date",U[p]=D+"Date",U[f]=D+"Month",U[h]=D+"FullYear",U[u]=D+"Hours",U[a]=D+"Minutes",U[o]=D+"Seconds",U[s]=D+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(L,B){return this.clone().$set(L,B)},F.get=function(L){return this[R.p(L)]()},F.add=function(L,B){var U,H=this;L=Number(L);var D=R.p(B),z=function(q){var G=I(H);return R.w(G.date(G.date()+Math.round(q*L)),H)};if(D===f)return this.set(f,this.$M+L);if(D===h)return this.set(h,this.$y+L);if(D===l)return z(1);if(D===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[D]||1,j=this.$d.getTime()+L*W;return R.w(j,this)},F.subtract=function(L,B){return this.add(-1*L,B)},F.format=function(L){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=L||"YYYY-MM-DDTHH:mm:ssZ",D=R.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ye,Ie,ve,Ke){return ye&&(ye[Ie]||ye(B,H))||ve[Ie].slice(0,Ke)},de=function(ye){return R.s(z%12||12,ye,"0")},he=ne||function(ye,Ie,ve){var Ke=ye<12?"AM":"PM";return ve?Ke.toLowerCase():Ke};return H.replace(y,function(ye,Ie){return Ie||function(ve){switch(ve){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return j+1;case"MM":return R.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return R.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return D}return null}(ye)||D.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(L,B,U){var H,D=this,z=R.p(B),W=I(L),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return R.m(D,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:R.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(L,B){if(!L)return this.$L;var U=this.clone(),H=C(L,B,!0);return H&&(U.$L=H),U},F.clone=function(){return R.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},O}(),P=M.prototype;return I.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(O){P[O[1]]=function(F){return this.$g(F,O[0],O[1])}}),I.extend=function(O,F){return O.$i||(O(F,M,I),O.$i=!0),I},I.locale=C,I.isDayjs=A,I.unix=function(O){return I(1e3*O)},I.en=S[E],I.Ls=S,I.p={},I})})(KPe);var BMt=KPe.exports;const Tt=Ul(BMt);function UMt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function zMt({formatter:e,...t}){return(e||UMt)(t)}function VMt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function XPe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=VMt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?XPe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function HMt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function qMt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function BJ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=HMt(i.key);if(s){i.preventDefault();const o=qMt(e);XPe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var QPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Zs,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(T).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,T,A){var C=S-60*T*1e3,I=l(C,A);if(T===I)return[C,T];var R=l(C-=60*(I-T)*1e3,A);return I===R?[C,I]:[S-60*Math.min(I,R)*1e3,Math.max(I,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(QPe);var WMt=QPe.exports;const GMt=Ul(WMt);var JPe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Zs,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],A=T[0],C=60*+T[1]+ +T[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(JPe);var YMt=JPe.exports;const KMt=Ul(YMt);Tt.extend(KMt);Tt.extend(GMt);function XMt(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const phe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=XMt(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function E0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>phe(i,n,e)):phe(t,n,e)}function QMt({minDate:e,maxDate:t,timezone:n}){const r=E0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const JMt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"–",consistentWeeks:!1},ZMt=N.createContext(JMt);function ql(){const e=N.useContext(ZMt),t=N.useCallback(o=>o||e.locale,[e.locale]),n=N.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=N.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=N.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=N.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function eLt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()} – ${r.toISOString()}`:`${n.toISOString()} –`:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function ZPe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:eLt(e,t),name:n,form:r})}ZPe.displayName="@mantine/dates/HiddenDatesInput";var eDe={day:"m_396ce5cb"};const tLt={},nLt=(e,{size:t})=>({day:{"--day-size":vn(t,"day-size")}}),UJ=je((e,t)=>{const n=Ae("Day",tLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,S=vt({name:f||"Day",classes:eDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nLt,rootSelector:"day"}),T=ql();return _.jsx(Ns,{...S("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(E0("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});UJ.classes=eDe;UJ.displayName="@mantine/dates/Day";function rLt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var tDe={weekday:"m_18a3eca"};const iLt={},sLt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":oo(t),"--wr-spacing":Il(t)}}),zJ=je((e,t)=>{const n=Ae("WeekdaysRow",iLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=vt({name:h||"WeekdaysRow",classes:tDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sLt,rootSelector:"weekdaysRow"}),g=ql(),y=rLt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(Ee,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});zJ.classes=tDe;zJ.displayName="@mantine/dates/WeekdaysRow";function oLt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function aLt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function uLt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=oLt(s,t),a=aLt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function nDe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function rDe(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function iDe(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function lLt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return iDe(c,n)&&rDe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||nDe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var sDe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const cLt={withCellSpacing:!0},fF=je((e,t)=>{const n=Ae("Month",cLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:A,__onDayKeyDown:C,__onDayClick:I,__onDayMouseEnter:R,__preventFocus:M,__stopPropagation:P,withCellSpacing:O,size:F,...L}=n,B=vt({name:l||"Month",classes:sDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=ql(),H=uLt({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),D=lLt(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Lm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!nDe(ce,h),ye=(S==null?void 0:S(ce))||Tt(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),ve=Tt(ce).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":O||void 0,children:_.jsx(UJ,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ye,static:T,disabled:(g==null?void 0:g(ce))||!iDe(ce,v)||!rDe(ce,y),ref:Ke=>A==null?void 0:A(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),C==null||C(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),R==null||R(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),I==null||I(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),M&&Ke.preventDefault()},tabIndex:M||!ve?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(Ee,{component:"table",...B("month"),size:F,ref:t,...L,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(zJ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});fF.classes=sDe;fF.displayName="@mantine/dates/Month";var oDe={pickerControl:"m_dc6a3c71"};const fLt={},dLt=(e,{size:t})=>({pickerControl:{"--dpc-fz":oo(t),"--dpc-size":vn(t,"dpc-size")}}),dF=je((e,t)=>{const n=Ae("PickerControl",fLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=vt({name:d||"PickerControl",classes:oDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dLt,rootSelector:"pickerControl"});return _.jsx(Ns,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});dF.classes=oDe;dF.displayName="@mantine/dates/PickerControl";function aDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function hLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!aDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function uDe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var lDe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const pLt={yearsListFormat:"YYYY",withCellSpacing:!0},hF=je((e,t)=>{const n=Ae("YearsList",pLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=vt({name:m||"YearsList",classes:lDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),I=ql(),R=uDe(l),M=hLt(R,d,h,p),P=R.map((O,F)=>{const L=O.map((B,U)=>{const H=p==null?void 0:p(B),D=Tt(B).isSame(M,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":S||void 0,children:_.jsx(dF,{...C("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:aDe(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...C("yearsListRow"),children:L},F)});return _.jsx(Ee,{component:"table",ref:t,size:T,...C("yearsList"),...A,children:_.jsx("tbody",{children:P})})});hF.classes=lDe;hF.displayName="@mantine/dates/YearsList";function cDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function mLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!cDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function gLt(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var fDe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const yLt={monthsListFormat:"MMM",withCellSpacing:!0},pF=je((e,t)=>{const n=Ae("MonthsList",yLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=vt({name:l||"MonthsList",classes:fDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),I=ql(),R=gLt(c),M=mLt(R,h,p,m),P=R.map((O,F)=>{const L=O.map((B,U)=>{const H=m==null?void 0:m(B),D=Tt(B).isSame(M,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":S||void 0,children:_.jsx(dF,{...C("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:cDe(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...C("monthsListRow"),children:L},F)});return _.jsx(Ee,{component:"table",ref:t,size:T,...C("monthsList"),...A,children:_.jsx("tbody",{children:P})})});pF.classes=fDe;pF.displayName="@mantine/dates/MonthsList";var dDe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const vLt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},bLt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":vn(t,"dch-control-size"),"--dch-fz":oo(t)}}),My=je((e,t)=>{const n=Ae("CalendarHeader",vLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:A,__stopPropagation:C,...I}=n,R=vt({name:T||"CalendarHeader",classes:dDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bLt,rootSelector:"calendarHeader"}),M=A?P=>P.preventDefault():void 0;return _.jsxs(Ee,{...R("calendarHeader"),ref:t,...I,children:[S&&_.jsx(Ns,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:M,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(pO,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Ns,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?M:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(Ns,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:M,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(pO,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});My.classes=dDe;My.displayName="@mantine/dates/CalendarHeader";function _Lt(e){const t=uDe(e);return[t[0][0],t[3][0]]}const wLt={decadeLabelFormat:"YYYY"},mF=je((e,t)=>{const n=Ae("DecadeLevel",wLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:A,withPrevious:C,decadeLabelFormat:I,classNames:R,styles:M,unstyled:P,__staticSelector:O,__stopPropagation:F,size:L,...B}=n,U=ql(),[H,D]=_Lt(r),z={__staticSelector:O||"DecadeLevel",classNames:R,styles:M,unstyled:P,size:L},W=typeof E=="boolean"?E:o?!Tt(D).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return _.jsxs(Ee,{"data-decade-level":!0,size:L,ref:t,...B,children:[_.jsx(My,{label:typeof I=="function"?I(H,D):`${q(H,I)} – ${q(D,I)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:T,withNext:A,withPrevious:C,...z}),_.jsx(hF,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});mF.classes={...hF.classes,...My.classes};mF.displayName="@mantine/dates/DecadeLevel";const ELt={yearLabelFormat:"YYYY"},gF=je((e,t)=>{const n=Ae("YearLevel",ELt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,yearLabelFormat:M,__staticSelector:P,__stopPropagation:O,size:F,classNames:L,styles:B,unstyled:U,...H}=n,D=ql(),z={__staticSelector:P||"YearLevel",classNames:L,styles:B,unstyled:U,size:F},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(Ee,{"data-year-level":!0,size:F,ref:t,...H,children:[_.jsx(My,{label:typeof M=="function"?M(r):Tt(r).locale(i||D.locale).format(M),__preventFocus:p,__stopPropagation:O,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,...z}),_.jsx(pF,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:O,withCellSpacing:h,...z})]})});gF.classes={...My.classes,...pF.classes};gF.displayName="@mantine/dates/YearLevel";const xLt={monthLabelFormat:"MMMM YYYY"},yF=je((e,t)=>{const n=Ae("MonthLevel",xLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:M,onLevelClick:P,nextDisabled:O,previousDisabled:F,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:D,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=ql(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ye=typeof O=="boolean"?O:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(Ee,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx(My,{label:typeof D=="function"?D(r):Tt(r).locale(i||de.locale).format(D),__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:M,onLevelClick:P,nextDisabled:ye,previousDisabled:Ie,hasNextLevel:L,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),_.jsx(fF,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:S,static:ne,withCellSpacing:w,...he})]})});yF.classes={...fF.classes,...My.classes};yF.displayName="@mantine/dates/MonthLevel";var hDe={levelsGroup:"m_30b26e33"};const SLt={},Ly=je((e,t)=>{const n=Ae("LevelsGroup",SLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=vt({name:l||"LevelsGroup",classes:hDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(Ee,{ref:t,...f("levelsGroup"),...c})});Ly.classes=hDe;Ly.displayName="@mantine/dates/LevelsGroup";const TLt={numberOfColumns:1},vF=je((e,t)=>{const n=Ae("DecadeLevelGroup",TLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:S,unstyled:T,__staticSelector:A,__stopPropagation:C,numberOfColumns:I,levelControlAriaLabel:R,decadeLabelFormat:M,size:P,vars:O,...F}=n,L=N.useRef([]),B=Array(I).fill(0).map((U,H)=>{const D=Tt(r).add(H*10,"years").toDate();return _.jsx(mF,{size:P,yearsListFormat:a,decade:D,withNext:H===I-1,withPrevious:H===0,decadeLabelFormat:M,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>BJ({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:L}),__getControlRef:(z,W,j)=>{Array.isArray(L.current[H])||(L.current[H]=[]),Array.isArray(L.current[H][z])||(L.current[H][z]=[]),L.current[H][z][W]=j},levelControlAriaLabel:typeof R=="function"?R(D):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:f},H)});return _.jsx(Ly,{classNames:E,styles:S,__staticSelector:A||"DecadeLevelGroup",ref:t,size:P,unstyled:T,...F,children:B})});vF.classes={...Ly.classes,...mF.classes};vF.displayName="@mantine/dates/DecadeLevelGroup";const ALt={numberOfColumns:1},bF=je((e,t)=>{const n=Ae("YearLevelGroup",ALt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:T,styles:A,unstyled:C,__staticSelector:I,__stopPropagation:R,numberOfColumns:M,levelControlAriaLabel:P,yearLabelFormat:O,size:F,vars:L,...B}=n,U=N.useRef([]),H=Array(M).fill(0).map((D,z)=>{const W=Tt(r).add(z,"years").toDate();return _.jsx(gF,{size:F,monthsListFormat:a,year:W,withNext:z===M-1,withPrevious:z===0,yearLabelFormat:O,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>BJ({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:T,styles:A,unstyled:C,__staticSelector:I||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(Ly,{classNames:T,styles:A,__staticSelector:I||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:H})});bF.classes={...gF.classes,...Ly.classes};bF.displayName="@mantine/dates/YearLevelGroup";const CLt={numberOfColumns:1},_F=je((e,t)=>{const n=Ae("MonthLevelGroup",CLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:M,hasNextLevel:P,classNames:O,styles:F,unstyled:L,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:D,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=N.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ye=Tt(r).add(he,"months").toDate();return _.jsx(yF,{month:ye,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,ve)=>BJ({levelIndex:he,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,ve,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][ve]=Ke},levelControlAriaLabel:typeof U=="function"?U(ye):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:M,hasNextLevel:P,classNames:O,styles:F,unstyled:L,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(Ly,{classNames:O,styles:F,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});_F.classes={...Ly.classes,...yF.classes};_F.displayName="@mantine/dates/MonthLevelGroup";var pDe={input:"m_6fa5e2aa"};const ILt={},wF=je((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:S,value:T,name:A,form:C,type:I,...R}=Wve("PickerInputBase",ILt,e),M=b||(g&&w&&!E&&!S?_.jsx(wy,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{I==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(bs,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(Pi.Wrapper,{...r,children:_.jsxs(Jr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var O;(O=u==null?void 0:u.onClose)==null||O.call(u),P()},children:[_.jsx(Jr.Target,{children:_.jsx(Pi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:O=>{m==null||m(O),h.toggle()},rightSection:M,...n,ref:t,classNames:{...s,input:Ki(pDe.input,s==null?void 0:s.input)},...R,children:d||_.jsx(Pi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Jr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(ZPe,{value:T,name:A,form:C,type:I})]})});wF.classes=pDe;wF.displayName="@mantine/dates/PickerInputBase";const mhe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function VJ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=N.useRef(e),o=ql(),[a,u,l]=Do({value:E0("add",t,o.getTimezone(),!i),defaultValue:E0("add",n,o.getTimezone(),!i),finalValue:mhe(e),onChange:f=>{r==null||r(E0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:mhe(e),u(c))),[c,u,l]}function oB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function kLt(e){return e===0?"month":e===1?"year":"decade"}function _T(e,t,n){return kLt(Hd(oB(e,0),oB(t,0),oB(n,2)))}const RLt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},EF=je((e,t)=>{const n=Ae("Calendar",RLt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:M,getDayAriaLabel:P,monthLabelFormat:O,nextIcon:F,previousIcon:L,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:D,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ye,locale:Ie,__staticSelector:ve,size:Ke,__preventFocus:Ue,__stopPropagation:gt,onNextDecade:it,onPreviousDecade:be,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Dt,static:We,__timezoneApplied:me,...dt}=n,{resolvedClassNames:yt,resolvedStyles:pe}=Lm({classNames:ne,styles:ce,props:n}),[Ce,He]=Do({value:a?_T(a,s,i):void 0,defaultValue:o?_T(o,s,i):void 0,finalValue:_T(void 0,s,i),onChange:u}),[ut,_t]=VJ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),Ln={__staticSelector:ve||"Calendar",styles:pe,classNames:yt,unstyled:de,size:Ke},Tr=ql(),Fn=h||d||1,cr=ut||E0("add",new Date,Tr.getTimezone()),pn=()=>{const An=Tt(cr).add(Fn,"month").toDate();ct==null||ct(An),_t(An)},Tn=()=>{const An=Tt(cr).subtract(Fn,"month").toDate();Dt==null||Dt(An),_t(An)},nr=()=>{const An=Tt(cr).add(Fn,"year").toDate();ke==null||ke(An),_t(An)},rr=()=>{const An=Tt(cr).subtract(Fn,"year").toDate();ze==null||ze(An),_t(An)},Fo=()=>{const An=Tt(cr).add(10*Fn,"year").toDate();it==null||it(An),_t(An)},$i=()=>{const An=Tt(cr).subtract(10*Fn,"year").toDate();be==null||be(An),_t(An)};return _.jsxs(Ee,{ref:t,size:Ke,"data-calendar":!0,...dt,children:[Ce==="month"&&_.jsx(_F,{month:cr,minDate:he,maxDate:ye,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:M,getDayAriaLabel:P,onNext:pn,onPrevious:Tn,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:O,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:gt,static:We,withCellSpacing:H,...Ln}),Ce==="year"&&_.jsx(bF,{year:cr,numberOfColumns:d,minDate:he,maxDate:ye,monthsListFormat:D,getMonthControlProps:z,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(An,Mi)=>{w&&_t(Mi),He(_T("month",s,i)),g==null||g(Mi)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:H,...Ln}),Ce==="decade"&&_.jsx(vF,{decade:cr,minDate:he,maxDate:ye,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:Fo,onPrevious:$i,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(An,Mi)=>{b&&_t(Mi),He(_T("year",s,i)),m==null||m(Mi)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:H,...Ln})]})});EF.classes={...vF.classes,...bF.classes,..._F.classes};EF.displayName="@mantine/dates/Calendar";function NLt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:M,weekendDays:P,getDayProps:O,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:M,weekendDays:P,getDayProps:O,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie},others:ve}}function ghe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function PLt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=VJ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=N.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=N.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const T=[S,f];T.sort((A,C)=>A.getTime()-C.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(T=>Tt(T).isSame(S,t))?c(l.filter(T=>!Tt(T).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?ghe(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?ghe(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:b(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const T=Tt(l).isSame(S,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return N.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const DLt={type:"default",defaultLevel:"month",numberOfColumns:1},xF=je((e,t)=>{const n=Ae("DatePicker",DLt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:T,getControlProps:A}=PLt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:I}=Lm({classNames:r,styles:i,props:n}),R=ql();return _.jsx(EF,{ref:t,minLevel:"month",classNames:C,styles:I,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(M,P)=>{T(P),y==null||y(M,P)},__onDayClick:(M,P)=>{E(P),v==null||v(M,P)},getDayProps:M=>({...A(M),...f==null?void 0:f(M)}),...w,date:E0("add",w.date,R.getTimezone(),b),__timezoneApplied:!0})});xF.classes=EF.classes;xF.displayName="@mantine/dates/DatePicker";function OLt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=ql(),[f,d]=yw(!1),[h,p]=VJ({type:e,value:t,defaultValue:n,onChange:r}),m=zMt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const $Lt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},HJ=je((e,t)=>{const n=Ae("DatePickerInput",$Lt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:S,...T}=n,{resolvedClassNames:A,resolvedStyles:C}=Lm({classNames:c,styles:f,props:n}),{calendarProps:I,others:R}=NLt(T),{_value:M,setValue:P,formattedValue:O,dropdownHandlers:F,dropdownOpened:L,onClear:B,shouldClear:U}=OLt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),H=Array.isArray(M)?M[0]||E:M||E,D=ql();return _.jsx(wF,{formattedValue:O,dropdownOpened:L,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:U,value:M,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:_.jsx(xF,{...I,size:p,variant:m,type:r,value:M,defaultDate:H||QMt({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:E0("add",I.date,D.getTimezone()),__timezoneApplied:!0})})});HJ.classes={...wF.classes,...xF.classes};HJ.displayName="@mantine/dates/DatePickerInput";var mDe={exports:{}},MLt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",LLt=MLt,FLt=LLt;function gDe(){}function yDe(){}yDe.resetWarningCache=gDe;var jLt=function(){function e(r,i,s,o,a,u){if(u!==FLt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:yDe,resetWarningCache:gDe};return n.PropTypes=n,n};mDe.exports=jLt();var BLt=mDe.exports;const yhe=Ul(BLt),vhe={};function gV(e,t){e===void 0&&(e=vhe),t===void 0&&(t=vhe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ULt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zLt=Object.prototype.hasOwnProperty;function yV(e,t){return zLt.call(e,t)}function vV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)yV(e,i)&&r.push(i);return r}function wl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function bV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function T1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function vDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function _V(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(_V(e[t]))return!0}else if(typeof e=="object"){for(var r=vV(e),i=r.length,s=0;s<i;s++)if(_V(e[r[s]]))return!0}}return!1}function bhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var bDe=function(e){ULt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,bhe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=bhe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ui=bDe,VLt=wl,iw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=S$(n,this.path);r&&(r=wl(r));var i=gv(n,{op:"remove",path:this.from}).removed;return gv(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=S$(n,this.from);return gv(n,{op:"add",path:this.path,value:wl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:X2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},HLt={add:function(e,t,n){return bV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:iw.move,copy:iw.copy,test:iw.test,_get:iw._get};function S$(e,t){if(t=="")return e;var n={op:"_get",path:t};return gv(e,n),n.value}function gv(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):T$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=S$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=X2(e,t.value),o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=wl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=T$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=vDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!bV(h))throw new Ui("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);bV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ui("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=HLt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=iw[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ui("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function SF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=wl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=gv(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function qLt(e,t,n){var r=gv(e,t);if(r.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function T$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ui("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(iw[e.op]){if(typeof e.path!="string")throw new Ui("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ui('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ui("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&_V(e.value))throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ui("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ui("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=_De([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ui("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function _De(e,t,n){try{if(!Array.isArray(e))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)SF(wl(t),wl(e),n||!0);else{n=n||T$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ui)return i;throw i}}function X2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!X2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!X2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const WLt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ui,_areEquals:X2,applyOperation:gv,applyPatch:SF,applyReducer:qLt,deepClone:VLt,getValueByPointer:S$,validate:_De,validator:T$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var qJ=new WeakMap,GLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),YLt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function KLt(e){return qJ.get(e)}function XLt(e,t){return e.observers.get(t)}function QLt(e,t){e.observers.delete(t.callback)}function JLt(e,t){t.unobserve()}function ZLt(e,t){var n=[],r,i=KLt(e);if(!i)i=new GLt(e),qJ.set(e,i);else{var s=XLt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=wl(e),t){r.callback=t,r.next=null;var o=function(){wV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){wV(r),clearTimeout(r.next),QLt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new YLt(t,r)),r}function wV(e,t){t===void 0&&(t=!1);var n=qJ.get(e.object);WJ(n.value,e.object,e.patches,"",t),e.patches.length&&SF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function WJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=vV(t),o=vV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(yV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?WJ(c,f,n,r+"/"+T1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+T1(l),value:wl(c)}),n.push({op:"replace",path:r+"/"+T1(l),value:wl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+T1(l),value:wl(c)}),n.push({op:"remove",path:r+"/"+T1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!yV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+T1(l),value:wl(t[l])})}}}function e6t(e,t,n){n===void 0&&(n=!1);var r=[];return WJ(e,t,r,"",n),r}const t6t=Object.freeze(Object.defineProperty({__proto__:null,compare:e6t,generate:wV,observe:ZLt,unobserve:JLt},Symbol.toStringTag,{value:"Module"}));Object.assign({},WLt,t6t,{JsonPatchError:bDe,deepClone:wl,escapePathComponent:T1,unescapePathComponent:vDe});var n6t=/("(?:[^\\"]|\\.)*")|[:,]/g,r6t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(n6t,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const aB=Ul(r6t);function tl(e,t,n){return e.fields=t||[],e.fname=n,e}function Yi(e){return e==null?null:e.fname}function fa(e){return e==null?null:e.fields}function wDe(e){return e.length===1?i6t(e[0]):s6t(e)}const i6t=e=>function(t){return t[e]},s6t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function Gh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Ac(e,t,n){const r=Gh(e);return e=r.length===1?r[0]:e,tl((n&&n.get||wDe)(r),[e],t||e)}const Pk=Ac("id"),va=tl(e=>e,[],"identity"),Ug=tl(()=>0,[],"zero"),mS=tl(()=>1,[],"one"),Cc=tl(()=>!0,[],"true"),_g=tl(()=>!1,[],"false");function o6t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const EDe=0,GJ=1,YJ=2,xDe=3,SDe=4;function KJ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o6t,r=e||EDe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=GJ&&n(t||"error","ERROR",arguments),this},warn(){return r>=YJ&&n(t||"warn","WARN",arguments),this},info(){return r>=xDe&&n(t||"log","INFO",arguments),this},debug(){return r>=SDe&&n(t||"log","DEBUG",arguments),this}}}var Fe=Array.isArray;function mt(e){return e===Object(e)}const _he=e=>e!=="__proto__";function gS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=a6t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;yS(r,s,i[s],o)}return r},{})}function yS(e,t,n,r){if(!_he(t))return;let i,s;if(mt(n)&&!Fe(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?yS(s,i,n[i]):_he(i)&&(s[i]=n[i])}else e[t]=n}function a6t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function ua(e){return e==null||e===""?null:+e}const TDe=e=>t=>e*Math.exp(t),ADe=e=>t=>Math.log(e*t),CDe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),IDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,A$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function TF(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function kDe(e,t){return TF(e,t,ua,va)}function RDe(e,t){var n=Math.sign(e[0]);return TF(e,t,ADe(n),TDe(n))}function NDe(e,t,n){return TF(e,t,A$(n),A$(1/n))}function PDe(e,t,n){return TF(e,t,CDe(n),IDe(n))}function AF(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function XJ(e,t,n){return AF(e,t,n,ua,va)}function QJ(e,t,n){const r=Math.sign(e[0]);return AF(e,t,n,ADe(r),TDe(r))}function C$(e,t,n,r){return AF(e,t,n,A$(r),A$(1/r))}function JJ(e,t,n,r){return AF(e,t,n,CDe(r),IDe(r))}function DDe(e){return 1+~~(new Date(e).getMonth()/3)}function ODe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ht(e){return e!=null?Fe(e)?e:[e]:[]}function $De(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function bn(e){return typeof e=="function"}const u6t="descending";function ZJ(e,t,n){n=n||{},t=ht(t)||[];const r=[],i=[],s={},o=n.comparator||l6t;return ht(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===u6t?-1:1),i.push(a=bn(a)?a:Ac(a,null,n)),(fa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:tl(o(i,r),Object.keys(s))}const CF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),l6t=(e,t)=>e.length===1?c6t(e[0],t[0]):f6t(e,t,e.length),c6t=(e,t)=>function(n,r){return CF(e(n),e(r))*t},f6t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=CF(s(r),s(i));return o*t[a]});function ba(e){return bn(e)?e:()=>e}function eZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function yn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Ah(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function MDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const d6t=Object.prototype.hasOwnProperty;function Ft(e,t){return d6t.call(e,t)}const HN={};function vS(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==HN}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===HN&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=HN),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==HN&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function LDe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),yn(r,n)}function sw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Fy(e){return typeof e=="boolean"}function x0(e){return Object.prototype.toString.call(e)==="[object Date]"}function FDe(e){return e&&bn(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function jDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function pt(e){return typeof e=="string"}function tZ(e,t,n){e&&(e=t?ht(e).map(a=>a.replace(/\\(.)/g,"$1")):ht(e));const r=e&&e.length,i=n&&n.get||wDe,s=a=>i(t?[a]:Gh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return tl(o,e,"key")}function BDe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const h6t=1e4;function UDe(e){e=+e||h6t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function zDe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function mA(e,t){let n="";for(;--t>=0;)n+=e;return n}function VDe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?mA(i,o)+s:r==="center"?mA(i,~~(o/2))+s+mA(i,Math.ceil(o/2)):s+mA(i,o)}function Dk(e){return e&&Qn(e)-e[0]||0}function rt(e){return Fe(e)?"["+e.map(rt)+"]":mt(e)||pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function nZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const p6t=e=>lr(e)||x0(e)?e:Date.parse(e);function rZ(e,t){return t=t||p6t,e==null||e===""?null:t(e)}function iZ(e){return e==null||e===""?null:e+""}function Hf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function HDe(e,t,n,r){const i=r??"…",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Ig(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function m6t(e){return e}function g6t(e){if(e==null)return m6t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function y6t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function v6t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return whe(e,n)})}:whe(e,t)}function whe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=qDe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function qDe(e,t){var n=g6t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&y6t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function b6t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function _6t(e){return qDe(e,w6t.apply(this,arguments))}function w6t(e,t,n){var r,i,s;if(arguments.length>1)r=E6t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:b6t(e,r)}}function E6t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Ro="year",Yu="quarter",da="month",ks="week",Ku="date",aa="day",Ch="dayofyear",Ml="hours",Ll="minutes",Ic="seconds",qf="milliseconds",sZ=[Ro,Yu,da,ks,Ku,aa,Ch,Ml,Ll,Ic,qf],uB=sZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function oZ(e){const t=ht(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{Ft(uB,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[ks]||n[aa]?1:0)+(n[Yu]||n[da]||n[Ku]?1:0)+(n[Ch]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>uB[i]-uB[s]),t}const x6t={[Ro]:"%Y ",[Yu]:"Q%q ",[da]:"%b ",[Ku]:"%d ",[ks]:"W%U ",[aa]:"%a ",[Ch]:"%j ",[Ml]:"%H:00",[Ll]:"00:%M",[Ic]:":%S",[qf]:".%L",[`${Ro}-${da}`]:"%Y-%m ",[`${Ro}-${da}-${Ku}`]:"%Y-%m-%d ",[`${Ml}-${Ll}`]:"%H:%M"};function WDe(e,t){const n=yn({},x6t,t),r=oZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const $1=new Date;function aZ(e){return $1.setFullYear(e),$1.setMonth(0),$1.setDate(1),$1.setHours(0,0,0,0),$1}function GDe(e){return KDe(new Date(e))}function YDe(e){return EV(new Date(e))}function KDe(e){return Qp.count(aZ(e.getFullYear())-1,e)}function EV(e){return zx.count(aZ(e.getFullYear())-1,e)}function xV(e){return aZ(e).getDay()}function S6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function XDe(e){return JDe(new Date(e))}function QDe(e){return SV(new Date(e))}function JDe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return p0.count(t-1,e)}function SV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Vx.count(t-1,e)}function TV(e){return $1.setTime(Date.UTC(e,0,1)),$1.getUTCDay()}function T6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function ZDe(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,b)=>(b=b||y,A6t(n[b],r[b],y===o&&s,v)),u=new Date,l=Hf(e),c=l[Ro]?a(Ro):ba(2012),f=l[da]?a(da):l[Yu]?a(Yu):Ug,d=l[ks]&&l[aa]?a(aa,1,ks+aa):l[ks]?a(ks,1):l[aa]?a(aa,1):l[Ku]?a(Ku,1):l[Ch]?a(Ch,1):mS,h=l[Ml]?a(Ml):Ug,p=l[Ll]?a(Ll):Ug,m=l[Ic]?a(Ic):Ug,g=l[qf]?a(qf):Ug;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function A6t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function HE(e,t,n){return t+e*7-(n+6)%7}const C6t={[Ro]:e=>e.getFullYear(),[Yu]:e=>Math.floor(e.getMonth()/3),[da]:e=>e.getMonth(),[Ku]:e=>e.getDate(),[Ml]:e=>e.getHours(),[Ll]:e=>e.getMinutes(),[Ic]:e=>e.getSeconds(),[qf]:e=>e.getMilliseconds(),[Ch]:e=>KDe(e),[ks]:e=>EV(e),[ks+aa]:(e,t)=>HE(EV(e),e.getDay(),xV(t)),[aa]:(e,t)=>HE(1,e.getDay(),xV(t))},I6t={[Yu]:e=>3*e,[ks]:(e,t)=>HE(e,0,xV(t))};function eOe(e,t){return ZDe(e,t||1,C6t,I6t,S6t)}const k6t={[Ro]:e=>e.getUTCFullYear(),[Yu]:e=>Math.floor(e.getUTCMonth()/3),[da]:e=>e.getUTCMonth(),[Ku]:e=>e.getUTCDate(),[Ml]:e=>e.getUTCHours(),[Ll]:e=>e.getUTCMinutes(),[Ic]:e=>e.getUTCSeconds(),[qf]:e=>e.getUTCMilliseconds(),[Ch]:e=>JDe(e),[ks]:e=>SV(e),[aa]:(e,t)=>HE(1,e.getUTCDay(),TV(t)),[ks+aa]:(e,t)=>HE(SV(e),e.getUTCDay(),TV(t))},R6t={[Yu]:e=>3*e,[ks]:(e,t)=>HE(e,0,TV(t))};function tOe(e,t){return ZDe(e,t||1,k6t,R6t,T6t)}const N6t={[Ro]:mh,[Yu]:g2.every(3),[da]:g2,[ks]:zx,[Ku]:Qp,[aa]:Qp,[Ch]:Qp,[Ml]:QL,[Ll]:KL,[Ic]:Up,[qf]:bE},P6t={[Ro]:gh,[Yu]:y2.every(3),[da]:y2,[ks]:Vx,[Ku]:p0,[aa]:p0,[Ch]:p0,[Ml]:JL,[Ll]:XL,[Ic]:Up,[qf]:bE};function bS(e){return N6t[e]}function _S(e){return P6t[e]}function nOe(e,t,n){return e?e.offset(t,n):void 0}function rOe(e,t,n){return nOe(bS(e),t,n)}function iOe(e,t,n){return nOe(_S(e),t,n)}function sOe(e,t,n,r){return e?e.range(t,n,r):void 0}function oOe(e,t,n,r){return sOe(bS(e),t,n,r)}function aOe(e,t,n,r){return sOe(_S(e),t,n,r)}const gA=1e3,yA=gA*60,vA=yA*60,IF=vA*24,D6t=IF*7,Ehe=IF*30,AV=IF*365,uOe=[Ro,da,Ku,Ml,Ll,Ic,qf],bA=uOe.slice(0,-1),_A=bA.slice(0,-1),wA=_A.slice(0,-1),O6t=wA.slice(0,-1),$6t=[Ro,ks],xhe=[Ro,da],lOe=[Ro],wT=[[bA,1,gA],[bA,5,5*gA],[bA,15,15*gA],[bA,30,30*gA],[_A,1,yA],[_A,5,5*yA],[_A,15,15*yA],[_A,30,30*yA],[wA,1,vA],[wA,3,3*vA],[wA,6,6*vA],[wA,12,12*vA],[O6t,1,IF],[$6t,1,D6t],[xhe,1,Ehe],[xhe,3,3*Ehe],[lOe,1,AV]];function cOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Dk(t))/n;let i=Lx(a=>a[2]).right(wT,r),s,o;return i===wT.length?(s=lOe,o=M0(t[0]/AV,t[1]/AV,n)):i?(i=wT[r/wT[i-1][2]<wT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=uOe,o=Math.max(M0(t[0],t[1],n),1)),{units:s,step:o}}function EA(e){const t={};return n=>t[n]||(t[n]=e(n))}function M6t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=L6t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function L6t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function fOe(e){const t=EA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=$v(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return M6t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=$v(o??",f");const a=M0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Dxe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Oxe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=Pxe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let CV;dOe();function dOe(){return CV=fOe({format:jx,formatPrefix:PY})}function hOe(e){return fOe(Nxe(e))}function I$(e){return arguments.length?CV=hOe(e):CV}function She(e,t,n){n=n||{},mt(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(Ic),i=t(Ll),s=t(Ml),o=t(Ku),a=t(ks),u=t(da),l=t(Yu),c=t(Ro),f=e(n[qf]||".%L"),d=e(n[Ic]||":%S"),h=e(n[Ll]||"%I:%M"),p=e(n[Ml]||"%I %p"),m=e(n[Ku]||n[aa]||"%a %d"),g=e(n[ks]||"%b %d"),y=e(n[da]||"%B"),v=e(n[Yu]||"%B"),b=e(n[Ro]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function pOe(e){const t=EA(e.format),n=EA(e.utcFormat);return{timeFormat:r=>pt(r)?t(r):She(t,bS,r),utcFormat:r=>pt(r)?n(r):She(n,_S,r),timeParse:EA(e.parse),utcParse:EA(e.utcParse)}}let IV;mOe();function mOe(){return IV=pOe({format:qY,parse:GSe,utcFormat:ZL,utcParse:YSe})}function gOe(e){return pOe(zSe(e))}function Q2(e){return arguments.length?IV=gOe(e):IV}const kV=(e,t)=>yn({},e,t);function yOe(e,t){const n=e?hOe(e):I$(),r=t?gOe(t):Q2();return kV(n,r)}function uZ(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?kV(I$(e),Q2(t)):kV(I$(),Q2())}function F6t(){return dOe(),mOe(),uZ()}const j6t=/^(data:|([A-Za-z]+:)?\/\/)/,B6t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,U6t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,The="file://";function z6t(e,t){return n=>({options:n||{},sanitize:H6t,load:V6t,fileAccess:!!t,file:q6t(t),http:G6t(e)})}async function V6t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function H6t(e,t){t=yn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=B6t.test(e.replace(U6t,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+rt(e));const u=j6t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(The))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(The.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function q6t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):W6t}async function W6t(){Me("No file system access.")}function G6t(e){return e?async function(t,n){const r=yn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?bn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:Y6t}async function Y6t(){Me("No HTTP fetch method available.")}const K6t=e=>e!=null&&e===e,X6t=e=>e==="true"||e==="false"||e===!0||e===!1,Q6t=e=>!Number.isNaN(Date.parse(e)),vOe=e=>!Number.isNaN(+e)&&!(e instanceof Date),J6t=e=>vOe(e)&&Number.isInteger(+e),RV={boolean:nZ,integer:ua,number:ua,date:rZ,string:iZ,unknown:va},qN=[X6t,J6t,vOe,Q6t],Z6t=["boolean","integer","number","date"];function bOe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=qN.length,i=qN.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&K6t(u)&&!qN[a](u)&&(i[a]=0,++o,o===qN.length))return"string";return Z6t[i.reduce((s,o)=>s===0?o:s,0)-1]}function _Oe(e,t){return t.reduce((n,r)=>(n[r]=bOe(e,r),n),{})}function Ahe(e){const t=function(n,r){const i={delimiter:e};return lZ(n,r?yn(r,i):i)};return t.responseType="text",t}function lZ(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),Ixe(t.delimiter).parse(e+"")}lZ.responseType="text";function eFt(e){return typeof Buffer=="function"&&bn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function cZ(e,t){const n=t&&t.property?Ac(t.property):va;return mt(e)&&!eFt(e)?tFt(n(e),t):n(JSON.parse(e))}cZ.responseType="json";function tFt(e,t){return!Fe(e)&&FDe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const nFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function wOe(e,t){let n,r,i,s;return e=cZ(e,t),t&&t.feature?(n=v6t,i=t.feature):t&&t.mesh?(n=_6t,i=t.mesh,s=nFt[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}wOe.responseType="json";const pD={dsv:lZ,csv:Ahe(","),tsv:Ahe("	"),json:cZ,topojson:wOe};function fZ(e,t){return arguments.length>1?(pD[e]=t,this):Ft(pD,e)?pD[e]:null}function EOe(e){const t=fZ(e);return t&&t.responseType||"text"}function xOe(e,t,n,r){t=t||{};const i=fZ(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&rFt(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function rFt(e,t,n,r){if(!e.length)return;const i=Q2();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=_Oe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!RV[p])throw Error("Illegal format pattern: "+h+":"+p);return RV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const kF=z6t(typeof fetch<"u"&&fetch,null);function RF(e){const t=e||va,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function mD(e,t){try{await t(e)}catch(n){e.error(n)}}const SOe=Symbol("vega_id");let iFt=1;function NF(e){return!!(e&&Mt(e))}function Mt(e){return e[SOe]}function TOe(e,t){return e[SOe]=t,e}function wr(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:TOe(t,iFt++)}function dZ(e){return PF(e,wr({}))}function PF(e,t){for(const n in e)t[n]=e[n];return t}function AOe(e,t){return TOe(t,Mt(e))}function Db(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function COe(e){return e&&e.constructor===Ob}function Ob(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Ob,insert(a){const u=ht(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=bn(a)?r:t,l=ht(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ba(l)};return bn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return bn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(wr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const gD="_:mod:_";function DF(){Object.defineProperty(this,gD,{writable:!0,value:{}})}DF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[gD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Fe(n)?1+n.length:-1),i},modified(e,t){const n=this[gD];if(arguments.length){if(Fe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[gD]={},this}};let sFt=0;const oFt="pulse",aFt=new DF,uFt=1,lFt=2;function Gr(e,t,n,r){this.id=++sFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Che(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Gr.prototype={targets(){return this._targets||(this._targets=RF(Pk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Che(uFt),modified:Che(lFt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new DF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Gr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===oFt)ht(a).forEach(f=>{f instanceof Gr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(Fe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||aFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function cFt(e,t,n,r){let i=1,s;return e instanceof Gr?s=e:e&&e.prototype instanceof Gr?s=new e:bn(e)?s=new Gr(null,e):(i=0,s=new Gr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function fFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let dFt=0;function OF(e,t,n){this.id=++dFt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function wg(e,t,n){return new OF(e,t,n)}OF.prototype={_filter:Cc,_apply:va,targets(){return this._targets||(this._targets=RF(Pk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=wg(e);return this.targets().add(t),t},apply(e){const t=wg(null,e);return this.targets().add(t),t},merge(){const e=wg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=wg();return this.targets().add(wg(null,null,eZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(wg(null,null,()=>n=!0)),t.targets().add(wg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Cc,this._targets=null}};function hFt(e,t,n,r){const i=this,s=wg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ht(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function pFt(e,t){const n=this.locale();return xOe(e,t,n.timeParse,n.utcParse)}function mFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function gFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:EOe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function yFt(e,t,n){const r=this,i=r._pending||vFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Cc).insert(s.data||[])),i.done(),s}function vFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const bFt={skip:!0};function _Ft(e,t,n,r,i){return(e instanceof Gr?EFt:wFt)(this,e,t,n,r,i),this}function wFt(e,t,n,r,i,s){const o=yn({},s,bFt);let a,u;bn(n)||(n=ba(n)),r===void 0?a=l=>e.touch(n(l)):bn(r)?(u=new Gr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;COe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function EFt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Gr(null,xFt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function xFt(e,t){return t=bn(t)?t:ba(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function SFt(e){e.rank=++this._rank}function TFt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const k$={},Cd=1,kg=2,_p=4,AFt=Cd|kg,Ihe=Cd|_p,p_=Cd|kg|_p,khe=8,ET=16,Rhe=32,Nhe=64;function S0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function lB(e,t){const n=[];return Ig(e,t,r=>n.push(r)),n}function Phe(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function WN(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}S0.prototype={StopPropagation:k$,ADD:Cd,REM:kg,MOD:_p,ADD_REM:AFt,ADD_MOD:Ihe,ALL:p_,REFLOW:khe,SOURCE:ET,NO_SOURCE:Rhe,NO_FIELDS:Nhe,fork(e){return new S0(this.dataflow).init(this,e)},clone(){const e=this.fork(p_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(p_|ET)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new S0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Nhe)&&(n.fields=e.fields),t&Cd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&kg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&_p?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Rhe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||p_;return t&Cd&&this.add.length||t&kg&&this.rem.length||t&_p&&this.mod.length},reflow(e){if(e)return this.fork(p_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(_p,Phe(this,Cd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Fe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Cd&&(n.addF=WN(n.addF,t)),e&kg&&(n.remF=WN(n.remF,t)),e&_p&&(n.modF=WN(n.modF,t)),e&ET&&(n.srcF=WN(n.srcF,t)),n},materialize(e){e=e||p_;const t=this;return e&Cd&&t.addF&&(t.add=lB(t.add,t.addF),t.addF=null),e&kg&&t.remF&&(t.rem=lB(t.rem,t.remF),t.remF=null),e&_p&&t.modF&&(t.mod=lB(t.mod,t.modF),t.modF=null),e&ET&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&ET)return Ig(n.source,n.srcF,r),n;e&Cd&&Ig(n.add,n.addF,r),e&kg&&Ig(n.rem,n.remF,r),e&_p&&Ig(n.mod,n.modF,r);const i=n.source;if(e&khe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Ig(i,Phe(n,Ihe),r):Ig(i,n.srcF,r))}return n}};function hZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(hZ,S0,{fork(e){const t=new S0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Fe(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function CFt(e,t,n){const r=this,i=[];if(r._pulse)return IOe(r);if(r._pending&&await r._pending,t&&await mD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new S0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=RF(Pk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=k$),u!==k$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await mD(r,c[f].callback)}return n&&await mD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function IFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function kFt(e,t,n){return this._pulse?IOe(this):(this.evaluate(e,t,n),this)}function RFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function IOe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function NFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function PFt(e,t){const n=e.source,r=this._clock;return n&&Fe(n)?new hZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||DFt(this._pulse,n&&n.pulse)}function DFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==k$&&(e.source=t.source),e)}const pZ={skip:!1,force:!1};function OFt(e,t){const n=t||pZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function $Ft(e,t,n){const r=n||pZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function MFt(e,t,n){this.touch(e,n||pZ);const r=new S0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function LFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),kOe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,FFt(t,0,e)):r=n,r}}}function kOe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function FFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,kOe(e,r,t,n)}function zw(){this.logger(KJ()),this.logLevel(GJ),this._clock=0,this._rank=0,this._locale=uZ();try{this._loader=kF()}catch{}this._touched=RF(Pk),this._input={},this._pulse=null,this._heap=LFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function xT(e){return function(){return this._log[e].apply(this,arguments)}}zw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:xT("error"),warn:xT("warn"),info:xT("info"),debug:xT("debug"),logLevel:xT("level"),cleanThreshold:1e4,add:cFt,connect:fFt,rank:SFt,rerank:TFt,pulse:MFt,touch:OFt,update:$Ft,changeset:Ob,ingest:mFt,parse:pFt,preload:yFt,request:gFt,events:hFt,on:_Ft,evaluate:CFt,run:kFt,runAsync:IFt,runAfter:RFt,_enqueue:NFt,_getPulse:PFt};function Pe(e,t){Gr.call(this,e,null,t)}lt(Pe,Gr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const qE={};function ROe(e){const t=NOe(e);return t&&t.Definition||null}function NOe(e){return e=e&&e.toLowerCase(),Ft(qE,e)?qE[e]:null}function*POe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function mZ(e,t,n){const r=Float64Array.from(POe(e,n));return r.sort(Kp),t.map(i=>NEe(r,i))}function gZ(e,t){return mZ(e,[.25,.5,.75],t)}function yZ(e,t){const n=e.length,r=gst(e,t),i=gZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function DOe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var kc=Math.random;function jFt(e){kc=e}function OOe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(POe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(kc()*s)];c[l]=a/s}return c.sort(Kp),[JU(c,n/2),JU(c,1-n/2)]}function $Oe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?BFt(s,t+t/4):s}function BFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function UFt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function zFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*kc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const MOe=Math.sqrt(2*Math.PI),VFt=Math.SQRT2;let ST=NaN;function $F(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(ST===ST)n=ST,ST=NaN;else{do n=kc()*2-1,r=kc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,ST=r*s}return e+n*t}function vZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*MOe)}function MF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function LF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*VFt*HFt(2*e-1)}function HFt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function bZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>$F(n,r),pdf:s=>vZ(s,n,r),cdf:s=>MF(s,n,r),icdf:s=>LF(s,n,r)};return i.mean(e).stdev(t)}function _Z(e,t){const n=bZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=yZ(e)),i):t},sample(){return e[~~(kc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function wZ(e,t){return e=e||0,t=t??1,Math.exp(e+$F()*t)}function EZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*MOe*e)}function xZ(e,t,n){return MF(Math.log(e),t,n)}function SZ(e,t,n){return Math.exp(LF(e,t,n))}function LOe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>wZ(n,r),pdf:s=>EZ(s,n,r),cdf:s=>xZ(s,n,r),icdf:s=>SZ(s,n,r)};return i.mean(e).stdev(t)}function FOe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=kc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function TZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*kc()}function AZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function CZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function IZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function jOe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>TZ(n,r),pdf:s=>AZ(s,n,r),cdf:s=>CZ(s,n,r),icdf:s=>IZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function kZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Ok(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function FF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function $k(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function wS(e,t,n,r,i){let s=0,o=0;return $k(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function RZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;$k(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Ok(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:wS(e,t,n,i,l)}}function BOe(e,t,n){let r=0,i=0,s=0,o=0,a=0;$k(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Ok(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:wS(e,t,n,i,l)}}function UOe(e,t,n){const[r,i,s,o]=FF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;$k(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Ok(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:wS(e,t,n,o,y)}}function zOe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;$k(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Ok(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:wS(e,t,n,a,c)}}function NZ(e,t,n){const[r,i,s,o]=FF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,S=T=>(T=T-s,b*T*T+w*T+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:S,rSquared:wS(e,t,n,o,S)}}function VOe(e,t,n,r){if(r===0)return kZ(e,t,n);if(r===1)return RZ(e,t,n);if(r===2)return NZ(e,t,n);const[i,s,o,a]=FF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=WFt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:qFt(f,y,-o,a),predict:v,rSquared:wS(e,t,n,a,v)}}function qFt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function WFt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Dhe=2,Ohe=1e-12;function HOe(e,t,n,r){const[i,s,o,a]=FF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Dhe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,S=0,T=0,A=0,C=0;const I=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const O=i[P],F=s[P],L=GFt(Math.abs(y-O)*I)*d[P],B=O*L;E+=L,S+=B,T+=F*L,A+=F*B,C+=O*B}const[R,M]=Ok(S/E,T/E,A/E,C/E);c[g]=R+M*y,f[g]=Math.abs(s[g]-c[g]),YFt(i,g+1,p)}if(h===Dhe)break;const m=PEe(f);if(Math.abs(m)<Ohe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Ohe:(v=1-y*y)*v}return KFt(i,c,o,a)}function GFt(e){return(e=1-e*e*e)*e*e}function YFt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function KFt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const XFt=.5*Math.PI/180;function jF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=QFt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&JFt(f,m,d,h,p)>XFt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function QFt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function JFt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function ZFt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function NV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:ZFt(e)}function qOe(e,t,n){return n||e+(t?"_"+t:"")}const cB=()=>{},e4t={init:cB,add:cB,rem:cB,idx:0},J2={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Mk=Object.keys(J2).filter(e=>e!=="__count__");function t4t(e,t){return(n,r)=>yn({name:e,aggregate_param:r,out:n||e},e4t,t)}[...Mk,"__count__"].forEach(e=>{J2[e]=t4t(e,J2[e])});function WOe(e,t,n){return J2[e](n,t)}function GOe(e,t){return e.idx-t.idx}function n4t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=J2[i]())})};return e.forEach(n),Object.values(t).sort(GOe)}function r4t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function i4t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function s4t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function o4t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function YOe(e,t){const n=t||va,r=n4t(e),i=e.slice().sort(GOe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=r4t,s.prototype.add=i4t,s.prototype.rem=s4t,s.prototype.set=o4t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function PZ(e){this._key=e?Ac(e):Mt,this.reset()}const Lo=PZ.prototype;Lo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Lo.add=function(e){this._add.push(e)};Lo.rem=function(e){this._rem.push(e)};Lo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Lo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Lo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=MDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Lo.argmin=function(e){return this.extent(e)[0]||{}};Lo.argmax=function(e){return this.extent(e)[1]||{}};Lo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Lo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Lo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=gZ(this.values(),e),this._get=e),this._q};Lo.q1=function(e){return this.quartile(e)[0]};Lo.q2=function(e){return this.quartile(e)[1]};Lo.q3=function(e){return this.quartile(e)[2]};Lo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=OOe(this.values(),1e3,.05,e),this._get=e),this._ci};Lo.ci0=function(e){return this.ci(e)[0]};Lo.ci1=function(e){return this.ci(e)[1]};function ny(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ny.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Mk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(ny,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ht(fa(v)),w=b.length;let E=0,S;for(;E<w;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=ht(e.groupby),this._dnames=this._dims.map(v=>{const b=Yi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:NV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=Yi(f),g=qOe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(WOe(d,h,g))}return this._measures=this._measures.map(v=>YOe(v,v.field)),Object.create(null)},cellkey:NV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new PZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?AOe(t.tuple,s):wr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const a4t=1e-14;function DZ(e){Pe.call(this,null,e)}DZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(DZ,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(fa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=DOe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ua(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(a4t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=tl(u,fa(t),e.name||"bin_"+Yi(t))}});function KOe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?zDe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function OZ(e){Pe.call(this,[],e)}OZ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(OZ,Pe,{transform(e,t){const n=t.fork(t.ALL),r=KOe(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Db(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function XOe(e){Gr.call(this,null,u4t,e)}lt(XOe,Gr);function u4t(e){return this.value&&!e.modified()?this.value:ZJ(e.fields,e.orders)}function $Z(e){Pe.call(this,null,e)}$Z.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function l4t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt($Z,Pe,{transform(e,t){const n=f=>d=>{for(var h=l4t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=wr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function MZ(e){Pe.call(this,null,e)}MZ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(MZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=c4t(a,i,s,e.filter||Cc)):n.mod=a,n.source=this.value,n.modifies(r)}});function c4t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(wr(s)),s={},s[t]=l);return i}const $he={kde:_Z,mixture:FOe,normal:bZ,lognormal:LOe,uniform:jOe},f4t="distributions",Mhe="function",d4t="field";function QOe(e,t){const n=e[Mhe];Ft($he,n)||Me("Unknown distribution function: "+n);const r=$he[n]();for(const i in e)i===d4t?r.data((e.from||t()).map(e[i])):i===f4t?r[i](e[i].map(s=>QOe(s,t))):typeof r[i]===Mhe&&r[i](e[i]);return r}function LZ(e){Pe.call(this,null,e)}const JOe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],h4t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:JOe},{name:"weights",type:"number",array:!0}]};LZ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:JOe.concat(h4t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(LZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=QOe(e.distribution,p4t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Ah(r.data()),l=jF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],wr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function p4t(e){return()=>e.materialize(e.SOURCE).source}function ZOe(e,t){return e?e.map((n,r)=>t[r]||Yi(n)):null}function FZ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const e3e="bin";function jZ(e){Pe.call(this,null,e)}jZ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:e3e}]};const m4t=(e,t)=>Dk(Ah(e,t))/30;lt(jZ,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=FZ(t.source,e.groupby,va),i=e.smooth||!1,s=e.field,o=e.step||m4t(n,s),a=Db((p,m)=>s(p)-s(m)),u=e.as||e3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of $Oe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function t3e(e){Gr.call(this,null,g4t,e),this.modified(!0)}lt(t3e,Gr);function g4t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:tl(n=>t(n,e),fa(t),Yi(t))}function BZ(e){Pe.call(this,[void 0,void 0],e)}BZ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(BZ,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ua(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Yi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function UZ(e,t){Gr.call(this,e),this.parent=t,this.count=0}lt(UZ,Gr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function BF(e){Pe.call(this,{},e),this._keys=vS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(BF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new UZ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function n3e(e){Gr.call(this,null,y4t,e)}lt(n3e,Gr);function y4t(e){return this.value&&!e.modified()?this.value:Fe(e.name)?ht(e.name).map(t=>Ac(t)):Ac(e.name,e.as)}function zZ(e){Pe.call(this,vS(),e)}zZ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(zZ,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function VZ(e){Pe.call(this,[],e)}VZ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(VZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ZOe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=dZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function HZ(e){Pe.call(this,[],e)}HZ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(HZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Yi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=dZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function qZ(e){Pe.call(this,null,e)}qZ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(qZ,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function r3e(e){Pe.call(this,[],e)}lt(r3e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=wr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const GN={value:"value",median:PEe,mean:Est,min:QU,max:h0},v4t=[];function WZ(e){Pe.call(this,[],e)}WZ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function b4t(e){var t=e.method||GN.value,n;if(GN[t]==null)Me("Unrecognized imputation method: "+t);else return t===GN.value?(n=e.value!==void 0?e.value:0,()=>n):GN[t]}function _4t(e){const t=e.field;return n=>n?t(n):NaN}lt(WZ,Pe,{transform(e,t){var n=t.fork(t.ALL),r=b4t(e),i=_4t(e),s=Yi(e.field),o=Yi(e.key),a=(e.groupby||[]).map(Yi),u=w4t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(wr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function w4t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):v4t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function GZ(e){ny.call(this,e)}GZ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Mk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(GZ,ny,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{yn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function YZ(e){Pe.call(this,null,e)}YZ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(YZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=FZ(r,e.groupby,e.field),s=(e.groupby||[]).map(Yi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Ah(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=_Z(h,o)[a],m=e.counts?h.length:1,g=c||Ah(h);jF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(wr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function i3e(e){Gr.call(this,null,E4t,e)}lt(i3e,Gr);function E4t(e){return this.value&&!e.modified()?this.value:tZ(e.fields,e.flat)}function s3e(e){Pe.call(this,[],e),this._pending=null}lt(s3e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?fB(this,t,this._pending):x4t(e)?t.StopPropagation:e.values?fB(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ht(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>fB(this,t,ht(r.data)))}});function x4t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function fB(e,t,n){n.forEach(wr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function KZ(e){Pe.call(this,{},e)}KZ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(KZ,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(Yi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function o3e(e){Gr.call(this,null,S4t,e)}lt(o3e,Gr);function S4t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function a3e(e){Gr.call(this,null,T4t,e)}lt(a3e,Gr);function T4t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function u3e(e){Pe.call(this,null,e)}lt(u3e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function XZ(e){ny.call(this,e)}XZ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Mk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(XZ,ny,{_transform:ny.prototype.transform,transform(e,t){return this._transform(A4t(e,t),t)}});function A4t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=fa(n).concat(fa(r)),o=I4t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>C4t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function C4t(e,t,n,r){return tl(i=>t(i)===e?n(i):NaN,r,e+"")}function I4t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(CF),t?i.slice(0,t):i}function l3e(e){BF.call(this,e)}lt(l3e,BF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(fa(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(wr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function QZ(e){Pe.call(this,null,e)}QZ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(QZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ZOe(e.fields,e.as||[]),s=r?(a,u)=>k4t(a,u,r,i):PF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,wr({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function k4t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function c3e(e){Pe.call(this,null,e)}lt(c3e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function JZ(e){Pe.call(this,null,e)}JZ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const R4t=1e-14;lt(JZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=FZ(i,e.groupby,e.field),o=(e.groupby||[]).map(Yi),a=[],u=e.step||.01,l=e.probs||Iu(u/2,1-R4t,u),c=l.length;return s.forEach(f=>{const d=mZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(wr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function f3e(e){Pe.call(this,null,e)}lt(f3e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=dZ(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function ZZ(e){Pe.call(this,[],e),this.count=0}ZZ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(ZZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*kc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function eee(e){Pe.call(this,null,e)}eee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(eee,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Iu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,wr(s)}),n.add=t.add.concat(this.value),n}});function d3e(e){Pe.call(this,null,e),this.modified(!0)}lt(d3e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function tee(e){Pe.call(this,null,e)}const h3e=["unit0","unit1"];tee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:sZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:h3e}]};lt(tee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?_S:bS)(s.unit).offset,a=e.as||h3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(fa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:cOe({extent:e.extent||Ah(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=oZ(r),o=this.value||{},a=(n?tOe:eOe)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function p3e(e){Pe.call(this,vS(),e)}lt(p3e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function m3e(e){Pe.call(this,null,e)}lt(m3e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Db(e.sort)):t.source).map(e.field))}});function N4t(e,t,n,r){const i=Z2[e](t,n);return{init:i.init||Ug,update:function(s,o){o[r]=i.next(s)}}}const Z2={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Z2.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=Z2.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=P4t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function P4t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const D4t=Object.keys(Z2);function g3e(e){const t=ht(e.ops),n=ht(e.fields),r=ht(e.params),i=ht(e.aggregate_params),s=ht(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ht(fa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Yi(g),w=qOe(p,b,s[m]);if(h(g),o.push(w),Ft(Z2,p))a.push(N4t(p,g,y,w));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(WOe(p,v,w))}}),(c.length||f.length)&&(this.cell=O4t(f,c,d)),this.inputs=Object.keys(u)}const y3e=g3e.prototype;y3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};y3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function O4t(e,t,n){e=e.map(u=>YOe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new PZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function nee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}nee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:D4t.concat(Mk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(nee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Db(e.sort),i=NV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new g3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)$4t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=KOe(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function $4t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Lx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ba(-1)};t.init();for(let f=0;f<u;++f)M4t(c,o,f,u),s&&L4t(c,l),t.update(c,a[f])}function M4t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function L4t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const F4t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ny,bin:DZ,collect:OZ,compare:XOe,countpattern:$Z,cross:MZ,density:LZ,dotbin:jZ,expression:t3e,extent:BZ,facet:BF,field:n3e,filter:zZ,flatten:VZ,fold:HZ,formula:qZ,generate:r3e,impute:WZ,joinaggregate:GZ,kde:YZ,key:i3e,load:s3e,lookup:KZ,multiextent:o3e,multivalues:a3e,params:u3e,pivot:XZ,prefacet:l3e,project:QZ,proxy:c3e,quantile:JZ,relay:f3e,sample:ZZ,sequence:eee,sieve:d3e,subflow:UZ,timeunit:tee,tupleindex:p3e,values:m3e,window:nee},Symbol.toStringTag,{value:"Module"}));function T0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const j4t=()=>typeof Image<"u"?Image:null;function ree(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const B4t="identity",WE="linear",Dm="log",Lk="pow",Fk="sqrt",UF="symlog",Qv="time",Jv="utc",ch="sequential",ES="diverging",GE="quantile",zF="quantize",VF="threshold",iee="ordinal",PV="point",v3e="band",see="bin-ordinal",Bs="continuous",jk="discrete",Bk="discretizing",Uc="interpolating",oee="temporal";function U4t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function z4t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function aee(){const e=Ux().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=ree(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Iu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,$0(h,m)-1),v=m===g?y:$0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return aee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function b3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return b3e(t())},e}function V4t(){return b3e(aee().paddingInner(1))}var H4t=Array.prototype.map;function q4t(e){return H4t.call(e,ua)}const W4t=Array.prototype.slice;function _3e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[($0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=q4t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=W4t.call(r),n):t.slice()},n.tickFormat=function(r,i){return PSe(e[0],Qn(e),r??10,i)},n.copy=function(){return _3e().domain(n.domain()).range(n.range())},n}const R$=new Map,w3e=Symbol("vega_scale");function E3e(e){return e[w3e]=!0,e}function G4t(e){return e&&e[w3e]===!0}function Y4t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?U4t(s):s.invertExtent?z4t(s):void 0),s.type=e,E3e(s)};return r.metadata=Hf(ht(n)),r}function gr(e,t,n){return arguments.length>1?(R$.set(e,Y4t(e,t,n)),this):x3e(e)?R$.get(e):void 0}gr(B4t,DSe);gr(WE,_m,Bs);gr(Dm,$Se,[Bs,Dm]);gr(Lk,VY,Bs);gr(Fk,Zdt,Bs);gr(UF,MSe,Bs);gr(Qv,KSe,[Bs,oee]);gr(Jv,ppt,[Bs,oee]);gr(ch,GY,[Bs,Uc]);gr(`${ch}-${WE}`,GY,[Bs,Uc]);gr(`${ch}-${Dm}`,XSe,[Bs,Uc,Dm]);gr(`${ch}-${Lk}`,YY,[Bs,Uc]);gr(`${ch}-${Fk}`,mpt,[Bs,Uc]);gr(`${ch}-${UF}`,QSe,[Bs,Uc]);gr(`${ES}-${WE}`,JSe,[Bs,Uc]);gr(`${ES}-${Dm}`,ZSe,[Bs,Uc,Dm]);gr(`${ES}-${Lk}`,KY,[Bs,Uc]);gr(`${ES}-${Fk}`,gpt,[Bs,Uc]);gr(`${ES}-${UF}`,eTe,[Bs,Uc]);gr(GE,LSe,[Bk,GE]);gr(zF,FSe,Bk);gr(VF,jSe,Bk);gr(see,_3e,[jk,Bk]);gr(iee,Ux,jk);gr(v3e,aee,jk);gr(PV,V4t,jk);function x3e(e){return R$.has(e)}function $b(e,t){const n=R$.get(e);return n&&n.metadata[t]}function uee(e){return $b(e,Bs)}function YE(e){return $b(e,jk)}function DV(e){return $b(e,Bk)}function S3e(e){return $b(e,Dm)}function K4t(e){return $b(e,oee)}function T3e(e){return $b(e,Uc)}function A3e(e){return $b(e,GE)}const X4t=["clamp","base","constant","exponent"];function C3e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function HF(e,t,n){return EY(lee(t||"rgb",n),e)}function I3e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function k3e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ba(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),X4t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function lee(e,t){const n=Gat[Q4t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Q4t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const J4t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Z4t={accent:vpt,category10:ypt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:bpt,observable10:_pt,paired:wpt,pastel1:Ept,pastel2:xpt,set1:Spt,set2:Tpt,set3:Apt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function R3e(e){if(Fe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function N3e(e,t){for(const n in e)cee(n,t(e[n]))}const Lhe={};N3e(Z4t,R3e);N3e(J4t,e=>HF(R3e(e)));function cee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Lhe[e]=t,this):Lhe[e]}const yD="symbol",e5t="discrete",t5t="gradient",n5t=e=>Fe(e)?e.map(t=>String(t)):String(e),r5t=(e,t)=>e[1]-t[1],i5t=(e,t)=>t[1]-e[1];function fee(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Dk(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),pt(t)&&(t=e.type===Qv?bS(t):e.type==Jv?_S(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function P3e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=r5t;if(i>s&&(r=s,s=i,i=r,o=i5t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function dee(e,t){return e.bins?P3e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function D3e(e,t,n,r,i,s){const o=t.type;let a=n5t;if(o===Qv||i===Qv)a=e.timeFormat(r);else if(o===Jv||i===Jv)a=e.utcFormat(r);else if(S3e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=O3e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function O3e(e,t,n){const r=dee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const OV={[GE]:"quantiles",[zF]:"thresholds",[VF]:"domain"},$3e={[GE]:"quantiles",[zF]:"domain"};function M3e(e,t){return e.bins?a5t(e.bins):e.type===Dm?O3e(e,t,!0):OV[e.type]?o5t(e[OV[e.type]]()):dee(e,t)}function s5t(e,t,n){const r=t[$3e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function o5t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function a5t(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const u5t=e=>OV[e.type]||e.bins;function L3e(e,t,n,r,i,s,o){const a=$3e[t.type]&&s!==Qv&&s!==Jv?s5t(e,t,i):D3e(e,t,n,i,s,o);return r===yD&&u5t(t)?l5t(a):r===e5t?c5t(a):f5t(a)}const l5t=e=>(t,n,r)=>{const i=Fhe(r[n+1],Fhe(r.max,1/0)),s=jhe(t,e),o=jhe(i,e);return s&&o?s+" – "+o:o?"< "+o:"≥ "+s},Fhe=(e,t)=>e??t,c5t=e=>(t,n)=>n?e(t):null,f5t=e=>t=>e(t),jhe=(e,t)=>Number.isFinite(e)?t(e):null;function d5t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===VF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function h5t(e,t,n,r){const i=r||t.type;return pt(n)&&K4t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Qv?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Jv?e.utcFormat("%A, %d %B %Y, %X UTC"):L3e(e,t,5,null,n,r,!0)}function F3e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=h5t(e,t,n.format,n.formatType);if(DV(t.type)){const s=M3e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(YE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let j3e=0;function p5t(){j3e=0}const N$="p_";function hee(e){return e&&e.gradient}function B3e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?N$:"";return i||(i=e.id="gradient_"+j3e++,r==="radial"?(e.x1=md(e.x1,.5),e.y1=md(e.y1,.5),e.r1=md(e.r1,0),e.x2=md(e.x2,.5),e.y2=md(e.y2,.5),e.r2=md(e.r2,.5),s=N$):(e.x1=md(e.x1,0),e.y1=md(e.y1,0),e.x2=md(e.x2,1),e.y2=md(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function md(e,t){return e??t}function U3e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Bhe={basis:{curve:Bpt},"basis-closed":{curve:Upt},"basis-open":{curve:zpt},bundle:{curve:Vpt,tension:"beta",value:.85},cardinal:{curve:Hpt,tension:"tension",value:0},"cardinal-open":{curve:Wpt,tension:"tension",value:0},"cardinal-closed":{curve:qpt,tension:"tension",value:0},"catmull-rom":{curve:Gpt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Ypt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Kpt,tension:"alpha",value:.5},linear:{curve:XY},"linear-closed":{curve:Xpt},monotone:{horizontal:Jpt,vertical:Qpt},natural:{curve:Zpt},step:{curve:emt},"step-after":{curve:nmt},"step-before":{curve:tmt}};function pee(e,t,n){var r=Ft(Bhe,e)&&Bhe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const m5t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},g5t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,y5t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,v5t=/^((\s+,?\s*)|(,\s*))/,b5t=/^[01]/;function KE(e){const t=[];return(e.match(g5t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=m5t[s],a=_5t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function _5t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?b5t:y5t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(v5t);u!==null&&(i+=u[0].length)}return r}const ry=Math.PI/180,w5t=1e-14,M1=Math.PI/2,Vd=Math.PI*2,m_=Math.sqrt(3)/2;var dB={},hB={},z3e=[].join;function E5t(e,t,n,r,i,s,o,a,u){const l=z3e.call(arguments);if(dB[l])return dB[l];const c=o*ry,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,S=g*e+y*t,T=v*e+b*t;let C=1/((S-w)*(S-w)+(T-E)*(T-E))-.25;C<0&&(C=0);let I=Math.sqrt(C);s==i&&(I=-I);const R=.5*(w+S)-I*(T-E),M=.5*(E+T)+I*(S-w),P=Math.atan2(E-M,w-R);let F=Math.atan2(T-M,S-R)-P;F<0&&s===1?F+=Vd:F>0&&s===0&&(F-=Vd);const L=Math.ceil(Math.abs(F/(M1+.001))),B=[];for(let U=0;U<L;++U){const H=P+U*F/L,D=P+(U+1)*F/L;B[U]=[R,M,H,D,n,r,f,d]}return dB[l]=B}function x5t(e){const t=z3e.call(e);if(hB[t])return hB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,S=r+m+w*p,T=n+g,A=r+y,C=T+w*y,I=A-w*g;return hB[t]=[c*E+f*S,d*E+h*S,c*C+f*I,d*C+h*I,c*T+f*A,d*T+h*A]}const Ql=["l",0,0,0,0,0,0,0];function S5t(e,t,n){const r=Ql[0]=e[0];if(r==="a"||r==="A")Ql[1]=t*e[1],Ql[2]=n*e[2],Ql[3]=e[3],Ql[4]=e[4],Ql[5]=e[5],Ql[6]=t*e[6],Ql[7]=n*e[7];else if(r==="h"||r==="H")Ql[1]=t*e[1];else if(r==="v"||r==="V")Ql[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Ql[i]=(i%2==1?t:n)*e[i];return Ql}function eI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=S5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Uhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Uhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Uhe(e,t,n,r){const i=E5t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=x5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const zhe=.5773502691896257,Vhe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Vd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*zhe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*zhe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function V3e(e){return Ft(Vhe,e)?Vhe[e]:T5t(e)}var pB={};function T5t(e){if(!Ft(pB,e)){const t=KE(e);pB[e]={draw:function(n,r){eI(n,t,0,0,Math.sqrt(r)/2)}}}return pB[e]}const gg=.448084975506;function A5t(e){return e.x}function C5t(e){return e.y}function I5t(e){return e.width}function k5t(e){return e.height}function fp(e){return typeof e=="function"?e:()=>+e}function YN(e,t,n){return Math.max(t,Math.min(e,n))}function H3e(){var e=A5t,t=C5t,n=I5t,r=k5t,i=fp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=YN(+i.call(this,c),0,v),w=YN(+s.call(this,c),0,v),E=YN(+o.call(this,c),0,v),S=YN(+a.call(this,c),0,v);if(u||(u=h=zL()),b<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(T-w,m),u.bezierCurveTo(T-gg*w,m,T,m+gg*w,T,m+w),u.lineTo(T,A-S),u.bezierCurveTo(T,A-gg*S,T-gg*S,A,T-S,A),u.lineTo(p+E,A),u.bezierCurveTo(p+gg*E,A,p,A-gg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+gg*b,p+gg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=fp(c),l):e},l.y=function(c){return arguments.length?(t=fp(c),l):t},l.width=function(c){return arguments.length?(n=fp(c),l):n},l.height=function(c){return arguments.length?(r=fp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=fp(c),s=f!=null?fp(f):i,a=d!=null?fp(d):i,o=h!=null?fp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function q3e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Vd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=zL()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Uk(e,t){return e??t}const zk=e=>e.x||0,Vk=e=>e.y||0,R5t=e=>e.width||0,N5t=e=>e.height||0,P5t=e=>(e.x||0)+(e.width||0),D5t=e=>(e.y||0)+(e.height||0),O5t=e=>e.startAngle||0,$5t=e=>e.endAngle||0,M5t=e=>e.padAngle||0,L5t=e=>e.innerRadius||0,F5t=e=>e.outerRadius||0,j5t=e=>e.cornerRadius||0,B5t=e=>Uk(e.cornerRadiusTopLeft,e.cornerRadius)||0,U5t=e=>Uk(e.cornerRadiusTopRight,e.cornerRadius)||0,z5t=e=>Uk(e.cornerRadiusBottomRight,e.cornerRadius)||0,V5t=e=>Uk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,H5t=e=>Uk(e.size,64),q5t=e=>e.size||1,qF=e=>e.defined!==!1,W5t=e=>V3e(e.shape||"circle"),G5t=F7().startAngle(O5t).endAngle($5t).padAngle(M5t).innerRadius(L5t).outerRadius(F5t).cornerRadius(j5t),Y5t=oTe().x(zk).y1(Vk).y0(D5t).defined(qF),K5t=oTe().y(Vk).x1(zk).x0(P5t).defined(qF),X5t=sTe().x(zk).y(Vk).defined(qF),Q5t=H3e().x(zk).y(Vk).width(R5t).height(N5t).cornerRadius(B5t,U5t,z5t,V5t),J5t=jpt().type(W5t).size(H5t),Z5t=q3e().x(zk).y(Vk).defined(qF).size(q5t);function mee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function e8t(e,t){return G5t.context(e)(t)}function t8t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?K5t:Y5t).curve(pee(r,n.orient,n.tension)).context(e)(t)}function n8t(e,t){const n=t[0],r=n.interpolate||"linear";return X5t.curve(pee(r,n.orient,n.tension)).context(e)(t)}function xS(e,t,n,r){return Q5t.context(e)(t,n,r)}function r8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function i8t(e,t){return J5t.context(e)(t)}function s8t(e,t){return Z5t.context(e)(t)}var W3e=1;function G3e(){W3e=1}function gee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+W3e++),o=i.clipping[s]||(i.clipping[s]={id:s});return bn(r)?o.path=r(null):mee(n)?o.path=xS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function _s(e){this.clear(),e&&this.union(e)}_s.prototype={clone(){return new _s(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function WF(e){this.mark=e,this.bounds=this.bounds||new _s}function GF(e){WF.call(this,e),this.items=this.items||[]}lt(GF,WF);class Y3e{constructor(t){this._pending=0,this._loader=t||kF()}pending(){return this._pending}sanitizeURL(t){const n=this;return Hhe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(TT(n),r)).catch(()=>(TT(n),null))}loadImage(t){const n=this,r=j4t();return Hhe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>TT(n),o.onerror=()=>TT(n),o.src=s,o}).catch(i=>(TT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Hhe(e){e._pending+=1}function TT(e){e._pending-=1}function eg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?o8t(t,r):0))}return e}function o8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const a8t=Vd-1e-8;let YF,vD,bD,iv,$V,_D,MV,LV;const Kg=(e,t)=>YF.add(e,t),wD=(e,t)=>Kg(vD=e,bD=t),qhe=e=>Kg(e,YF.y1),Whe=e=>Kg(YF.x1,e),L1=(e,t)=>$V*e+MV*t,F1=(e,t)=>_D*e+LV*t,mB=(e,t)=>Kg(L1(e,t),F1(e,t)),gB=(e,t)=>wD(L1(e,t),F1(e,t));function Hk(e,t){return YF=e,t?(iv=t*ry,$V=LV=Math.cos(iv),_D=Math.sin(iv),MV=-_D):($V=LV=1,iv=_D=MV=0),u8t}const u8t={beginPath(){},closePath(){},moveTo:gB,lineTo:gB,rect(e,t,n,r){iv?(mB(e+n,t),mB(e+n,t+r),mB(e,t+r),gB(e,t)):(Kg(e+n,t+r),wD(e,t))},quadraticCurveTo(e,t,n,r){const i=L1(e,t),s=F1(e,t),o=L1(n,r),a=F1(n,r);Ghe(vD,i,o,qhe),Ghe(bD,s,a,Whe),wD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=L1(e,t),a=F1(e,t),u=L1(n,r),l=F1(n,r),c=L1(i,s),f=F1(i,s);Yhe(vD,o,u,c,qhe),Yhe(bD,a,l,f,Whe),wD(c,f)},arc(e,t,n,r,i,s){if(r+=iv,i+=iv,vD=n*Math.cos(i)+e,bD=n*Math.sin(i)+t,Math.abs(i-r)>a8t)Kg(e-n,t-n),Kg(e+n,t+n);else{const o=l=>Kg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Vd,r<0&&(r+=Vd),i=i%Vd,i<0&&(i+=Vd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Vd,a=r-r%M1,u=0;u<4&&a>i;++u,a-=M1)o(a);else for(a=r-r%M1+M1,u=0;u<4&&a<i;++u,a=a+M1)o(a)}}};function Ghe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Yhe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>w5t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Khe(u,e,t,n,r)),0<l&&l<1&&i(Khe(l,e,t,n,r))}function Khe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var A0=(A0=T0(1,1))?A0.getContext("2d"):null;const FV=new _s;function yee(e){return function(t,n){if(!A0)return!0;e(A0,t),FV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=FV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(A0.isPointInPath(u,a))return!0;return!1}}function vee(e,t){return t.contains(e.x||0,e.y||0)}function K3e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(FV.set(n,r,n+i,r+s))}function X3e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ow(t,n,r,i,s)}function ow(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function XE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ef(e,t){return e??t}function Xhe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function l8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+ef(t.x1,.5)*r,n.y1+ef(t.y1,.5)*i,Math.max(r,i)*ef(t.r1,0),n.x1+ef(t.x2,.5)*r,n.y1+ef(t.y2,.5)*i,Math.max(r,i)*ef(t.r2,.5));else{const o=ef(t.x1,0),a=ef(t.y1,0),u=ef(t.x2,1),l=ef(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=T0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Xhe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Xhe(s,t.stops)}function Q3e(e,t,n){return hee(n)?l8t(e,n,t.bounds):n}function P$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Q3e(e,t,t.fill),!0):!1}var c8t=[];function QE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Q3e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||c8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function f8t(e,t){return e.zindex-t.zindex||e.index-t.index}function bee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(f8t)}function Wf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=bee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function D$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=bee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function _ee(e){return function(t,n,r){Wf(n,i=>{(!r||r.intersects(i.bounds))&&J3e(e,t,i,i)})}}function d8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&J3e(e,t,n.items[0],n.items)}}function J3e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(XE(t,n),n.fill&&P$(t,n,i)&&t.fill(),n.stroke&&QE(t,n,i)&&t.stroke()))}function KF(e){return e=e||Cc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,D$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function qk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function wee(e){return KF(qk(e))}function yv(e,t){return"translate("+e+","+t+")"}function Eee(e){return"rotate("+e+")"}function h8t(e,t){return"scale("+e+","+t+")"}function Z3e(e){return yv(e.x||0,e.y||0)}function p8t(e){return yv(e.x||0,e.y||0)+(e.angle?" "+Eee(e.angle):"")}function m8t(e){return yv(e.x||0,e.y||0)+(e.angle?" "+Eee(e.angle):"")+(e.scaleX||e.scaleY?" "+h8t(e.scaleX||1,e.scaleY||1):"")}function xee(e,t,n){function r(o,a){o("transform",p8t(a)),o("d",t(null,a))}function i(o,a){return t(Hk(o,a.angle),a),eg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=ry),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:_ee(s),pick:wee(s),isect:n||yee(s)}}var g8t=xee("arc",e8t);function y8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function v8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function b8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function See(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Hk(u),c),eg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=qk(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:d8t(s),pick:a,isect:vee,tip:n}}var _8t=See("area",t8t,y8t);function w8t(e,t){var n=t.clip;e.save(),bn(n)?(e.beginPath(),n(e),e.clip()):e$e(e,t.group)}function e$e(e,t){e.beginPath(),mee(t)?xS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function t$e(e){const t=ef(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function E8t(e,t){e("transform",Z3e(t))}function n$e(e,t){const n=t$e(t);e("d",xS(null,t,n,n))}function x8t(e,t){e("class","background"),e("aria-hidden",!0),n$e(e,t)}function S8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?n$e(e,t):e("d","")}function T8t(e,t,n){const r=t.clip?gee(n,t,t):null;e("clip-path",r)}function A8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),eg(e,t),e.translate(t.x||0,t.y||0)}function tI(e,t,n,r){const i=t$e(t);e.beginPath(),xS(e,t,(n||0)+i,(r||0)+i)}const C8t=qk(tI),I8t=qk(tI,!1),k8t=qk(tI,!0);function R8t(e,t,n,r){Wf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(tI(e,i,s,o),XE(e,i),i.fill&&P$(e,i,u)&&e.fill(),i.stroke&&!a&&QE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&e$e(e,i),n&&n.translate(-s,-o),Wf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(tI(e,i,s,o),XE(e,i),QE(e,i,u)&&e.stroke())})}function N8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return D$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&mee(u)&&!k8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&I8t(e,u,o,a)?(e.restore(),u):(l=D$(u,v=>P8t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&C8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function P8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var D8t={type:"group",tag:"g",nested:!1,attr:E8t,bound:A8t,draw:R8t,pick:N8t,isect:K3e,content:T8t,background:x8t,foreground:S8t},nI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Tee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Aee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Cee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function XF(e,t){return e==="center"?t/2:e==="right"?t:0}function QF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function O8t(e,t,n){const r=Tee(t,n),i=Aee(t,r),s=Cee(t,r),o=(t.x||0)-XF(t.align,i),a=(t.y||0)-QF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,nI["xmlns:xlink"],"xlink:href"),e("transform",yv(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function $8t(e,t){const n=t.image,r=Aee(t,n),i=Cee(t,n),s=(t.x||0)-XF(t.align,r),o=(t.y||0)-QF(t.baseline,i);return e.set(s,o,s+r,o+i)}function M8t(e,t,n){Wf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Tee(r,this);let s=Aee(r,i),o=Cee(r,i);if(s===0||o===0)return;let a=(r.x||0)-XF(r.align,s),u=(r.y||0)-QF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(XE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var L8t={type:"image",tag:"image",nested:!1,attr:O8t,bound:$8t,draw:M8t,pick:KF(),isect:Cc,get:Tee,xOffset:XF,yOffset:QF},F8t=See("line",n8t,v8t);function j8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",m8t(t)),e("d",t.path)}function ED(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*ry,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=KE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),eI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):eI(e,u,r,i,s,o)}function B8t(e,t){return ED(Hk(e,t.angle),t)?e.set(0,0,0,0):eg(e,t,!0)}var U8t={type:"path",tag:"path",nested:!1,attr:j8t,bound:B8t,draw:_ee(ED),pick:wee(ED),isect:yee(ED)};function z8t(e,t){e("d",xS(null,t))}function V8t(e,t){var n,r;return eg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Qhe(e,t){e.beginPath(),xS(e,t)}var H8t={type:"rect",tag:"path",nested:!1,attr:z8t,bound:V8t,draw:_ee(Qhe),pick:wee(Qhe),isect:K3e};function q8t(e,t){e("transform",Z3e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function W8t(e,t){var n,r;return eg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function r$e(e,t,n){var r,i,s,o;return t.stroke&&QE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function G8t(e,t,n){Wf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&r$e(e,r,i)&&(XE(e,r),e.stroke())}})}function Y8t(e,t,n,r){return e.isPointInStroke?r$e(e,t,1)&&e.isPointInStroke(n,r):!1}var K8t={type:"rule",tag:"line",nested:!1,attr:q8t,bound:W8t,draw:G8t,pick:KF(Y8t),isect:X3e},X8t=xee("shape",r8t),Q8t=xee("symbol",i8t,vee);const Jhe=UDe();var Sl={height:Yh,measureWidth:Iee,estimateWidth:O$,width:O$,canvas:i$e};i$e(!0);function i$e(e){Sl.width=e&&A0?Iee:O$}function O$(e,t){return s$e(sy(e,t),Yh(e))}function s$e(e,t){return~~(.8*e.length*t)}function Iee(e,t){return Yh(e)<=0||!(t=sy(e,t))?0:o$e(t,JF(e))}function o$e(e,t){const n=`(${t}) ${e}`;let r=Jhe.get(n);return r===void 0&&(A0.font=t,r=A0.measureText(e).width,Jhe.set(n,r)),r}function Yh(e){return e.fontSize!=null?+e.fontSize||0:11}function iy(e){return e.lineHeight!=null?e.lineHeight:Yh(e)+2}function J8t(e){return Fe(e)?e.length>1?e:e[0]:e}function Wk(e){return J8t(e.lineBreak&&e.text&&!Fe(e.text)?e.text.split(e.lineBreak):e.text)}function kee(e){const t=Wk(e);return(Fe(t)?t.length-1:0)*iy(e)}function sy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?ejt(e,n):n}function Z8t(e){if(Sl.width===Iee){const t=JF(e);return n=>o$e(n,t)}else if(Sl.width===O$){const t=Yh(e);return n=>s$e(n,t)}else return t=>Sl.width(e,t)}function ejt(e,t){var n=+e.limit,r=Z8t(e);if(r(t)<n)return t;var i=e.ellipsis||"…",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function Gk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function JF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Yh(e)+"px "+Gk(e,t)}function Ree(e){var t=e.baseline,n=Yh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*iy(e):t==="line-bottom"?.29*n-.5*iy(e):0)}const tjt={left:"start",center:"middle",right:"end"},_C=new _s;function ZF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-M1,t+=r*Math.cos(i),n+=r*Math.sin(i)),_C.x1=t,_C.y1=n,_C}function njt(e,t){var n=t.dx||0,r=(t.dy||0)+Ree(t),i=ZF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",tjt[t.align]||"start"),a?(u=yv(s,o)+" "+Eee(a),(n||r)&&(u+=" "+yv(n,r))):u=yv(s+n,o+r),e("transform",u)}function Nee(e,t,n){var r=Sl.height(t),i=t.align,s=ZF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Ree(t)-Math.round(.8*r),c=Wk(t),f;if(Fe(c)?(r+=iy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Sl.width(t,h)),0)):f=Sl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*ry,o,a);else if(n===2)return e.rotatedPoints(t.angle*ry,o,a);return e}function rjt(e,t,n){Wf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=JF(r),e.textAlign=r.align||"left",s=ZF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*ry),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Ree(r),c=Wk(r),XE(e,r),Fe(c))for(l=iy(r),u=0;u<c.length;++u)f=sy(r,c[u]),r.fill&&P$(e,r,i)&&e.fillText(f,o,a),r.stroke&&QE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=sy(r,c),r.fill&&P$(e,r,i)&&e.fillText(f,o,a),r.stroke&&QE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function ijt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=ZF(t),a=o.x1,u=o.y1,l=Nee(_C,t,1),c=-t.angle*ry,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function sjt(e,t){const n=Nee(_C,e,2);return ow(t,n[0],n[1],n[2],n[3])||ow(t,n[0],n[1],n[4],n[5])||ow(t,n[4],n[5],n[6],n[7])||ow(t,n[2],n[3],n[6],n[7])}var ojt={type:"text",tag:"text",nested:!1,attr:njt,bound:Nee,draw:rjt,pick:KF(ijt),isect:sjt},ajt=See("trail",s8t,b8t),Fl={arc:g8t,area:_8t,group:D8t,image:L8t,line:F8t,path:U8t,rect:H8t,rule:K8t,shape:X8t,symbol:Q8t,text:ojt,trail:ajt};function jV(e,t,n){var r=Fl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new _s),e,n)}var Zhe={mark:null};function a$e(e,t,n){var r=Fl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Zhe.mark=e,l=Zhe),c=jV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new _s,o)for(a=0,u=s.length;a<u;++a)t.union(jV(s[a],i,n));return e.bounds=t}const ujt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function u$e(e,t){return JSON.stringify(e,ujt,t)}function l$e(e){const t=typeof e=="string"?JSON.parse(e):e;return c$e(t)}function c$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&c$e(n[i]);return t&&a$e(e),e}class f$e{constructor(t){arguments.length?this.root=l$e(t):(this.root=epe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new GF(this.root)])}toJSON(t){return u$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=epe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function epe(e,t){const n={bounds:new _s,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Xg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Pee(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Cs(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Xg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function uc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function d$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function e4(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function ljt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Fl[i.marktype]).tip){for(o=e4(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Dee=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||kF(),this._tooltip=n||cjt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Xg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=ljt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function cjt(e,t,n,r){e.element().setAttribute("title",r||"")}class Yk{constructor(t){this._el=null,this._bgcolor=null,this._loader=new Y3e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const fjt="keydown",djt="keypress",hjt="keyup",h$e="dragenter",xD="dragleave",p$e="dragover",BV="pointerdown",pjt="pointerup",$$="pointermove",SD="pointerout",m$e="pointerover",UV="mousedown",mjt="mouseup",g$e="mousemove",M$="mouseout",y$e="mouseover",L$="click",gjt="dblclick",yjt="wheel",v$e="mousewheel",F$="touchstart",j$="touchmove",B$="touchend",vjt=[fjt,djt,hjt,h$e,xD,p$e,BV,pjt,$$,SD,m$e,UV,mjt,g$e,M$,y$e,L$,gjt,yjt,v$e,F$,j$,B$],zV=$$,wC=M$,VV=L$;class Kk extends Dee{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=vjt,this.pointermove=npe([$$,g$e],[m$e,y$e],[SD,M$]),this.dragover=npe([p$e],[h$e],[xD]),this.pointerout=rpe([SD,M$]),this.dragleave=rpe([xD])}initialize(t,n,r){return this._canvas=t&&Pee(t,"canvas"),[L$,UV,BV,$$,SD,xD].forEach(i=>tpe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(v$e,t)}pointerdown(t){this._down=this._active,this.fire(BV,t)}mousedown(t){this._down=this._active,this.fire(UV,t)}click(t){this._down===this._active&&(this.fire(L$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(F$,t,!0)}touchmove(t){this.fire(j$,t,!0)}touchend(t){this.fire(B$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===VV&&i&&i.href?this.handleHref(n,i,i.href):(t===zV||t===wC)&&this.handleTooltip(n,i,t!==wC),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(tpe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=e4(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Fl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const bjt=e=>e===F$||e===j$||e===B$?[F$,j$,B$]:[e];function tpe(e,t){bjt(t).forEach(n=>_jt(e,n))}function _jt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function xA(e,t,n){t.forEach(r=>e.fire(r,n))}function npe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?xA(this,e,r):((!i||!i.exit)&&xA(this,n,r),this._active=s,xA(this,t,r),xA(this,e,r))}}function rpe(e){return function(t){xA(this,e,t),this._active=null}}function wjt(){return typeof window<"u"&&window.devicePixelRatio||1}function Ejt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?wjt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class U$ extends Yk{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new _s,this._tempb=new _s}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:T0(1,1,this._options.type),t&&this._canvas&&(uc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Ejt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=xjt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):Sjt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Fl[n.marktype];n.clip&&w8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const xjt=(e,t,n)=>new _s().set(0,0,t,n).translate(-e[0],-e[1]);function Sjt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class b$e extends Dee{constructor(t,n){super(t,n);const r=this;r._hrefHandler=yB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=yB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==wC)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(VV,this._hrefHandler),i.removeEventListener(zV,this._tooltipHandler),i.removeEventListener(wC,this._tooltipHandler)),this._svg=i=t&&Pee(t,"svg"),i&&(i.addEventListener(VV,this._hrefHandler),i.addEventListener(zV,this._tooltipHandler),i.addEventListener(wC,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:yB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const yB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},_$e="aria-hidden",Oee="aria-label",$ee="role",Mee="aria-roledescription",w$e="graphics-object",Lee="graphics-symbol",E$e=(e,t,n)=>({[$ee]:e,[Mee]:t,[Oee]:n||void 0}),Tjt=Hf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),ipe={axis:{desc:"axis",caption:Ijt},legend:{desc:"legend",caption:kjt},"title-text":{desc:"title",caption:e=>`Title text '${ope(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${ope(e)}'`}},spe={ariaRole:$ee,ariaRoleDescription:Mee,description:Oee};function x$e(e,t){const n=t.aria===!1;if(e(_$e,n||void 0),n||t.description==null)for(const r in spe)e(spe[r],void 0);else{const r=t.mark.marktype;e(Oee,t.description),e($ee,t.ariaRole||(r==="group"?w$e:Lee)),e(Mee,t.ariaRoleDescription||`${r} mark`)}}function S$e(e){return e.aria===!1?{[_$e]:!0}:Tjt[e.role]?null:ipe[e.role]?Cjt(e,ipe[e.role]):Ajt(e)}function Ajt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return E$e(n?w$e:Lee,`${t} mark container`,e.description)}function Cjt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return E$e(t.role||Lee,t.desc,n.description||r(n))}catch{return null}}function ope(e){return ht(e.text).join(" ")}function Ijt(e){const t=e.datum,n=e.orient,r=t.title?T$e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${YE(a)?"discrete":a} scale with ${F3e(o,s,e)}`}function kjt(e){const t=e.datum,n=t.title?T$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Njt(r)+(n?` titled '${n}'`:"")+` for ${Rjt(s)} with ${F3e(u,a,e)}`}function T$e(e){try{return ht(Qn(e.items).items[0].text).join(" ")}catch{return null}}function Rjt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function Njt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const A$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Pjt=e=>A$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Fee(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Pjt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=A$e(u),a),toString:()=>e};return a}const C$e=e=>I$e(Fee(),e)+"";function I$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):I$e(e,r)}return e.close()}const z$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},V$={blend:"mix-blend-mode"},k$e={fill:"none","stroke-miterlimit":10},AT=0,ape="http://www.w3.org/2000/xmlns/",Ts=nI.xmlns;class jee extends Yk{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Cs(t,0,"svg",Ts),this._svg.setAttributeNS(ape,"xmlns",Ts),this._svg.setAttributeNS(ape,"xmlns:xlink",nI["xmlns:xlink"]),this._svg.setAttribute("version",nI.version),this._svg.setAttribute("class","marks"),uc(t,1),this._root=Cs(this._svg,AT,"g",Ts),Qg(this._root,k$e),uc(this._svg,AT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Qg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Cs(t,AT,"rect",Ts),Qg(r,{width:this._width,height:this._height,fill:n}));const i=C$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),uc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Fl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,upe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,upe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Fl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=lpe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return uc(c,0),n._svg;c.setAttribute("class",d$e(n));const f=S$e(n);for(const m in f)Na(c,m,f[m]);l||Na(c,"pointer-events",u),Na(c,"clip-path",n.clip?gee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=lpe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&$jt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Wf(n,p),uc(c,h),c}_update(t,n,r){qp=n,ta=n.__values__,x$e(EC,r),t.attr(EC,r,this);const i=Ljt[t.type];i&&i.call(this,t,n,r),qp&&this.style(qp,r)}style(t,n){if(n!=null){for(const r in z$){let i=r==="font"?Gk(n):n[r];if(i===ta[r])continue;const s=z$[r];i==null?t.removeAttribute(s):(hee(i)&&(i=B3e(i,this._defs.gradient,R$e())),t.setAttribute(s,i+"")),ta[r]=i}for(const r in V$)TD(t,V$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Cs(t,AT+1,"defs",Ts)),i=Djt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Cs(t,AT+1,"defs",Ts)),i=Ojt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):uc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function upe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Djt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Cs(e,n++,"pattern",Ts);Qg(o,{id:N$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Cs(o,0,"rect",Ts),Qg(o,{width:1,height:1,fill:`url(${R$e()}#${t.id})`}),e=Cs(e,n++,"radialGradient",Ts),Qg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Cs(e,n++,"linearGradient",Ts),Qg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Cs(e,r,"stop",Ts),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return uc(e,r),n}function Ojt(e,t,n){let r;return e=Cs(e,n,"clipPath",Ts),e.setAttribute("id",t.id),t.path?(r=Cs(e,0,"path",Ts),r.setAttribute("d",t.path)):(r=Cs(e,0,"rect",Ts),Qg(r,{x:0,y:0,width:t.width,height:t.height})),uc(e,1),n+1}function $jt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Wf(n,o=>{i=e.mark(t,o,i,r),++s}),uc(t,1+s)}function lpe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Xg(o,r,Ts),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Xg(o,"path",Ts);s.appendChild(a),a.__data__=e;const u=Xg(o,"g",Ts);s.appendChild(u),u.__data__=e;const l=Xg(o,"path",Ts);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Mjt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Mjt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let qp=null,ta=null;const Ljt={group(e,t,n){const r=qp=t.childNodes[2];ta=r.__values__,e.foreground(EC,n,this),ta=t.__values__,qp=t.childNodes[1],e.content(EC,n,this);const i=qp=t.childNodes[0];e.background(EC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ta.events&&(Na(r,"pointer-events",s),Na(i,"pointer-events",s),ta.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Na(r,"display",null),this.style(i,n),Na(i,"stroke",null),o&&(n.fill=null),ta=r.__values__,this.style(r,n),o&&(n.fill=o),qp=null}else Na(r,"display","none")},image(e,t,n){n.smooth===!1?(TD(t,"image-rendering","optimizeSpeed"),TD(t,"image-rendering","pixelated")):TD(t,"image-rendering",null)},text(e,t,n){const r=Wk(n);let i,s,o,a;Fe(r)?(s=r.map(u=>sy(n,u)),i=s.join(`
`),i!==ta.text&&(uc(t,0),o=t.ownerDocument,a=iy(n),s.forEach((u,l)=>{const c=Xg(o,"tspan",Ts);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ta.text=i)):(s=sy(n,r),s!==ta.text&&(t.textContent=s,ta.text=s)),Na(t,"font-family",Gk(n)),Na(t,"font-size",Yh(n)+"px"),Na(t,"font-style",n.fontStyle),Na(t,"font-variant",n.fontVariant),Na(t,"font-weight",n.fontWeight)}};function EC(e,t,n){t!==ta[e]&&(n?Fjt(qp,e,t,n):Na(qp,e,t),ta[e]=t)}function TD(e,t,n){n!==ta[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ta[t]=n)}function Qg(e,t){for(const n in t)Na(e,n,t[n])}function Na(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Fjt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function R$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class N$e extends Yk{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Fee();n.open("svg",yn({},nI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",k$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Fl[n.marktype],i=r.tag,s=[x$e,r.attr];t.open("g",{class:d$e(n),"clip-path":n.clip?gee(this,n,n.group):null},S$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=Wk(a);if(Fe(l)){const c={x:0,dy:iy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(sy(a,l[f])).close()}else t.text(sy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Wf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Wf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&jjt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:N$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function jjt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Gk(t),e["font-size"]=Yh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in z$){let a=t[o];const u=z$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(hee(a)&&(a=B3e(a,i.gradient,"")),e[u]=a)}for(const o in V$){const a=t[o];a!=null&&(s=s||[],s.push(`${V$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const uf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Bjt(e){uf.svgMarkTypes=e.svgMarkTypes??["text"],uf.svgOnTop=e.svgOnTop??!0,uf.debug=e.debug??!1}class HV extends Yk{constructor(t){super(t),this._svgRenderer=new jee(t),this._canvasRenderer=new U$(t)}initialize(t,n,r,i,s){this._root_el=Cs(t,0,"div");const o=Cs(this._root_el,0,"div"),a=Cs(this._root_el,1,"div");return this._root_el.style.position="relative",uf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=uf.svgOnTop?a:o,this._canvasEl=uf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return uf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!uf.svgMarkTypes.includes(s));this._svgRenderer.render(t,uf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return uf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class P$e extends Kk{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Cs(Cs(t,0,"div"),uf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const D$e="canvas",O$e="hybrid",$$e="png",M$e="svg",L$e="none",Jg={Canvas:D$e,PNG:$$e,SVG:M$e,Hybrid:O$e,None:L$e},Zv={};Zv[D$e]=Zv[$$e]={renderer:U$,headless:U$,handler:Kk};Zv[M$e]={renderer:jee,headless:N$e,handler:b$e};Zv[O$e]={renderer:HV,headless:HV,handler:P$e};Zv[L$e]={};function t4(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Zv[e]=t,this):Zv[e]}function F$e(e,t,n){const r=[],i=new _s().union(t),s=e.marktype;return s?j$e(e,i,n,r):s==="group"?B$e(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function j$e(e,t,n,r){if(Ujt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)B$e(i[a],t,n,r);else for(const u=Fl[s].isect;a<o;++a){const l=i[a];U$e(l,t,u)&&r.push(l)}}return r}function Ujt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function B$e(e,t,n,r){n&&n(e.mark)&&U$e(e,t,Fl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)j$e(i[u],t,n,r);t.translate(o,a)}return r}function U$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const vB=new _s;function z$e(e){const t=e.clip;if(bn(t))t(Hk(vB.clear()));else if(t)vB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(vB)}const zjt=1e-9;function Bee(e,t,n){return e===t?!0:n==="path"?V$e(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=zjt:!e||!t||!mt(e)&&!mt(t)?e==t:Vjt(e,t)}function V$e(e,t){return Bee(KE(e),KE(t))}function Vjt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Bee(e[i],t[i],i))return!1;return typeof e==typeof t}function Hjt(){G3e(),p5t()}const JE="top",bf="left",xf="right",oy="bottom",qjt="top-left",Wjt="top-right",Gjt="bottom-left",Yjt="bottom-right",Uee="start",qV="middle",Oa="end",Kjt="x",Xjt="y",n4="group",zee="axis",Vee="title",Qjt="frame",Jjt="scope",Hee="legend",H$e="row-header",q$e="row-footer",W$e="row-title",G$e="column-header",Y$e="column-footer",K$e="column-title",Zjt="padding",eBt="symbol",X$e="fit",Q$e="fit-x",J$e="fit-y",tBt="pad",qee="none",KN="all",WV="each",Wee="flush",Zg="column",e0="row";function Z$e(e){Pe.call(this,null,e)}lt(Z$e,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Fl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=XN(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===n4||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(XN(l,o))),r.role){case zee:case Hee:case Vee:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(XN(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(XN(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return z$e(r),t.modifies("bounds")}});function XN(e,t,n){return t(e.bounds.clear(),e,n)}const cpe=":vega_identifier:";function Gee(e){Pe.call(this,0,e)}Gee.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Gee,Pe,{transform(e,t){const n=nBt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function nBt(e){return e._signals[cpe]||(e._signals[cpe]=e.add(0))}function eMe(e){Pe.call(this,null,e)}lt(eMe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,rBt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===n4?GF:WF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function rBt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function tMe(e){Pe.call(this,null,e)}const fpe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!nMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},nMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),dpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(nMe(i,s=e[n].bounds,t))return!0},iBt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},sBt=(e,t,n)=>{var r=e.range(),i=new _s;return t===JE||t===oy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},hpe=e=>(e.forEach(t=>t.opacity=1),e),ppe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(tMe,Pe,{transform(e,t){const n=fpe[e.method]||fpe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(hpe(i),t=ppe(t,e)),t;if(i=i.filter(iBt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=hpe(i),t=ppe(t,e),s.length>=3&&dpe(s,r)){do s=n(s,r);while(s.length>=3&&dpe(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=sBt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function rMe(e){Pe.call(this,null,e)}lt(rMe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Zo=new _s;function aw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function oBt(e){var t=e.items[0].orient;return t===bf||t===xf}function aBt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function uBt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=aBt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&kee(p),v=0,b=0,w,E;switch(Zo.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case JE:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&QN(e,p,E,m,y,0,-1,g);break;case bf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&QN(e,p,E,m,y,1,-1,g);break;case xf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&QN(e,p,E,m,y,1,1,g);break;case oy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&QN(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return eg(g.translate(v,b),i),aw(i,"x",v+o)|aw(i,"y",b+o)&&(i.bounds=Zo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function QN(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const mpe=(e,t)=>Math.floor(Math.min(e,t)),gpe=(e,t)=>Math.ceil(Math.max(e,t));function lBt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===n4)switch(i.role){case zee:case Hee:case Vee:break;case H$e:o.rowheaders.push(...s);break;case q$e:o.rowfooters.push(...s);break;case G$e:o.colheaders.push(...s);break;case Y$e:o.colfooters.push(...s);break;case W$e:o.rowtitle=s[0];break;case K$e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function cBt(e){return new _s().set(0,0,e.width||0,e.height||0)}function fBt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vi(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function ype(e){return e<0?Math.ceil(-e):0}function iMe(e,t,n){var r=!n.nodirty,i=n.bounds===Wee?cBt:fBt,s=Zo.set(0,0,0,0),o=vi(n.align,Zg),a=vi(n.align,e0),u=vi(n.padding,Zg),l=vi(n.padding,e0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),S,T,A,C,I,R,M,P,O,F,L;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],I=E[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,w[T]=0,A=T%c,C=~~(T/c),m=Math.max(m,M=Math.ceil(I.x2)),v=Math.max(v,P=Math.ceil(I.y2)),p[A]=Math.max(p[A],M),y[C]=Math.max(y[C],P),h[T]=u+ype(I.x1),g[T]=l+ype(I.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===WV)for(A=1;A<c;++A){for(L=0,T=A;T<d;T+=c)L<h[T]&&(L=h[T]);for(T=A;T<d;T+=c)h[T]=L+p[A-1]}else if(o===KN){for(L=0,T=0;T<d;++T)T%c&&L<h[T]&&(L=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=L+m)}else for(o=!1,A=1;A<c;++A)for(T=A;T<d;T+=c)h[T]+=p[A-1];if(a===WV)for(C=1;C<f;++C){for(L=0,T=C*c,S=T+c;T<S;++T)L<g[T]&&(L=g[T]);for(T=C*c;T<S;++T)g[T]=L+y[C-1]}else if(a===KN){for(L=0,T=c;T<d;++T)L<g[T]&&(L=g[T]);for(T=c;T<d;++T)g[T]=L+v}else for(a=!1,C=1;C<f;++C)for(T=C*c,S=T+c;T<S;++T)g[T]+=y[C-1];for(O=0,T=0;T<d;++T)O=h[T]+(T%c?O:0),b[T]+=O-t[T].x;for(A=0;A<c;++A)for(F=0,T=A;T<d;T+=c)F+=g[T],w[T]+=F-t[T].y;if(o&&vi(n.center,Zg)&&f>1)for(T=0;T<d;++T)I=o===KN?m:p[T%c],O=I-E[T].x2-t[T].x-b[T],O>0&&(b[T]+=O/2);if(a&&vi(n.center,e0)&&c!==1)for(T=0;T<d;++T)I=a===KN?v:y[~~(T/c)],F=I-E[T].y2-t[T].y-w[T],F>0&&(w[T]+=F/2);for(T=0;T<d;++T)s.union(E[T].translate(b[T],w[T]));switch(O=vi(n.anchor,Kjt),F=vi(n.anchor,Xjt),vi(n.anchor,Zg)){case Oa:O-=s.width();break;case qV:O-=s.width()/2}switch(vi(n.anchor,e0)){case Oa:F-=s.height();break;case qV:F-=s.height()/2}for(O=Math.round(O),F=Math.round(F),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=O,R.y+=w[T]+=F,s.union(R.mark.bounds.union(R.bounds.translate(b[T],w[T]))),r&&e.dirty(R);return s}function dBt(e,t,n){var r=lBt(t),i=r.marks,s=n.bounds===Wee?hBt:pBt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=iMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=vi(n.headerBand,e0,null),c=JN(e,r.rowheaders,i,a,u,-vi(o,"rowHeader"),mpe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=vi(n.headerBand,Zg,null),f=JN(e,r.colheaders,i,a,a,-vi(o,"columnHeader"),mpe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=vi(n.footerBand,e0,null),d=JN(e,r.rowfooters,i,a,u,vi(o,"rowFooter"),gpe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=vi(n.footerBand,Zg,null),h=JN(e,r.colfooters,i,a,a,vi(o,"columnFooter"),gpe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=vi(n.titleAnchor,e0),g=vi(o,"rowTitle"),g=p===Oa?d+g:c-g,m=vi(n.titleBand,e0,.5),vpe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=vi(n.titleAnchor,Zg),g=vi(o,"columnTitle"),g=p===Oa?h+g:f-g,m=vi(n.titleBand,Zg,.5),vpe(e,r.coltitle,g,1,y,m))}function hBt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function pBt(e,t){return e.bounds[t]}function JN(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,S,T,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(A=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),C=m):(A=m,C=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(A-(S.x||0),C-(S.y||0))),S.x=A,S.y=C,e.dirty(S),g=o(g,E[l])}return g}function vpe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function mBt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function gBt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function yBt(e,t,n,r,i,s,o){const a=mBt(n,t),u=gBt(e,a("offset",0)),l=a("anchor",Uee),c=l===Oa?1:l===qV?.5:0,f={align:WV,bounds:a("bounds",Wee),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case bf:f.anchor={x:Math.floor(r.x1)-u,column:Oa,y:c*(o||r.height()+2*r.y1),row:l};break;case xf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case JE:f.anchor={y:Math.floor(i.y1)-u,row:Oa,x:c*(s||i.width()+2*i.x1),column:l};break;case oy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case qjt:f.anchor={x:u,y:u};break;case Wjt:f.anchor={x:s-u,y:u,column:Oa};break;case Gjt:f.anchor={x:u,y:o-u,row:Oa};break;case Yjt:f.anchor={x:s-u,y:o-u,column:Oa,row:Oa};break}return f}function vBt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),_Bt(e,n,n.items[0].items[0]),s=bBt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===eBt&&wBt(n.items[0].items[0].items[0].items),i!==qee&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,eg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function bBt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function _Bt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&CT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case bf:i+=Math.ceil(o.bounds.width())+u;break;case xf:case oy:break;default:s+=o.bounds.height()+u}switch((i||s)&&CT(e,n,i,s),o.orient){case bf:c+=g_(t,n,o,a,1,1);break;case xf:l+=g_(t,n,o,Oa,0,0)+u,c+=g_(t,n,o,a,1,1);break;case oy:l+=g_(t,n,o,a,0,0),c+=g_(t,n,o,Oa,-1,0,1)+u;break;default:l+=g_(t,n,o,a,0,0)}(l||c)&&CT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(CT(e,n,-l,0),CT(e,o,-l,0))}}function g_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:kee(n);return Math.round(r===Uee?f:r===Oa?d-h:.5*(c-h))}function CT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function wBt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function EBt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===bf||a===xf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==n4?a===bf?(p=i.y2,h=i.y1):a===xf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===bf&&(p=r,h=0),b=u===Uee?p:u===Oa?h:(p+h)/2,d&&d.text){switch(a){case JE:case oy:v=f.bounds.height()+c;break;case bf:y=f.bounds.width()+c;break;case xf:y=-f.bounds.width()-c;break}Zo.clear().union(d.bounds),Zo.translate(y-(d.x||0),v-(d.y||0)),aw(d,"x",y)|aw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Zo),d.mark.bounds.clear().union(Zo),e.dirty(d)),Zo.clear().union(d.bounds)}else Zo.clear();switch(Zo.union(f.bounds),a){case JE:m=b,g=i.y1-Zo.height()-l;break;case bf:m=i.x1-Zo.width()-l,g=b;break;case xf:m=i.x2+Zo.width()+l,g=b;break;case oy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return aw(s,"x",m)|aw(s,"y",g)&&(Zo.translate(m,g),e.dirty(s),s.bounds.clear().union(Zo),t.bounds.clear().union(Zo),e.dirty(s)),s.bounds}function sMe(e){Pe.call(this,null,e)}lt(sMe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&dBt(n,r,e.layout),SBt(n,r,e)}),xBt(e.mark.group)?t.reflow():t}});function xBt(e){return e&&e.mark.role!=="legend-entry"}function SBt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new _s().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case zee:h=oBt(f)?a:u,h.union(uBt(e,f,i,s));break;case Vee:c=f;break;case Hee:l.push(vBt(e,f));break;case Qjt:case Jjt:case H$e:case q$e:case W$e:case G$e:case Y$e:case K$e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||xf,d!==qee&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];iMe(e,v,yBt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===X$e||n.autosize.type===Q$e||n.autosize.type===J$e))switch(y.orient){case bf:case xf:o.add(v.x1,0).add(v.x2,0);break;case JE:case oy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(EBt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),TBt(e,t,o,n)}function TBt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Zjt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===qee?(l=0,f=0,u=o,c=a):s===X$e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===Q$e?(u=Math.max(0,o-l-d),a=c+f+h):s===J$e?(o=u+l+d,c=Math.max(0,a-f-h)):s===tBt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const ABt=Object.freeze(Object.defineProperty({__proto__:null,bound:Z$e,identifier:Gee,mark:eMe,overlap:tMe,render:rMe,viewlayout:sMe},Symbol.toStringTag,{value:"Module"}));function oMe(e){Pe.call(this,null,e)}lt(oMe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=fee(s,o,e.minstep),u=e.format||D3e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?P3e(s,e.values,a):dee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>wr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(wr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function aMe(e){Pe.call(this,null,e)}function CBt(){return wr({})}function IBt(e){const t=vS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(aMe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||CBt,s=e.key||Mt,o=this.value;return Fe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=IBt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function uMe(e){Pe.call(this,null,e)}lt(uMe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Fe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||_g,u=i.enter||_g,l=i.exit||_g,c=(s&&!o?i[s]:a)||_g;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==_g&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==_g&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==_g){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function lMe(e){Pe.call(this,[],e)}lt(lMe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||yD,o=e.scale,a=+e.limit,u=fee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===yD,c=e.format||L3e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||M3e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===yD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,bn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=ba(m=p||8),i=i.map((y,v)=>wr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(wr({index:i.length,label:`…${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===t5t?(d=o.domain(),h=k3e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=d5t(o),i=f.map((y,v)=>wr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const kBt=e=>e.source.x,RBt=e=>e.source.y,NBt=e=>e.target.x,PBt=e=>e.target.y;function Yee(e){Pe.call(this,{},e)}Yee.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Yee,Pe,{transform(e,t){var n=e.sourceX||kBt,r=e.sourceY||RBt,i=e.targetX||NBt,s=e.targetY||PBt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=bpe.get(u+"-"+a)||bpe.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const cMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,DBt=(e,t,n,r)=>cMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},OBt=(e,t,n,r)=>fMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},$Bt=(e,t,n,r)=>dMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),MBt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,LBt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,FBt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},jBt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},BBt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},UBt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},bpe=vS({line:cMe,"line-radial":DBt,arc:fMe,"arc-radial":OBt,curve:dMe,"curve-radial":$Bt,"orthogonal-horizontal":MBt,"orthogonal-vertical":LBt,"orthogonal-radial":FBt,"diagonal-horizontal":jBt,"diagonal-vertical":BBt,"diagonal-radial":UBt});function Kee(e){Pe.call(this,null,e)}Kee.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Kee,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||mS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/OEe(l),h=Iu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const zBt=5;function VBt(e){const t=e.type;return!e.bins&&(t===WE||t===Lk||t===Fk)}function hMe(e){return uee(e)&&e!==ch}const HBt=Hf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function pMe(e){Pe.call(this,null,e),this.modified(!0)}lt(pMe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=qBt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!HBt[i]){if(i==="padding"&&hMe(r.type))continue;bn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return QBt(r,e,XBt(r,e,GBt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function qBt(e){var t=e.type,n="",r;return t===ch?ch+"-"+WE:(WBt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?ch+"-":r===3?ES+"-":""),(n+t||WE).toLowerCase())}function WBt(e){const t=e.type;return uee(t)&&t!==Qv&&t!==Jv&&(e.scheme||e.range&&e.range.length&&e.range.every(pt))}function GBt(e,t,n){const r=YBt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&VBt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return hMe(s)&&t.padding&&i[0]!==Qn(i)&&(i=KBt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(mMe(s,i,n)),s===iee&&e.unknown(t.domainImplicit?$7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&fee(e,t.nice)||null),i.length}function YBt(e,t,n){return t?(e.domain(mMe(e.type,t,n)),t.length):-1}function KBt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===Dm?QJ(t,null,a):e===Fk?C$(t,null,a,.5):e===Lk?C$(t,null,a,i||1):e===UF?JJ(t,null,a,s||1):XJ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function mMe(e,t,n){if(S3e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function XBt(e,t,n){let r=t.bins;if(r&&!Fe(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Iu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===see&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function QBt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=JBt(r,t,n);else if(t.scheme&&(s=ZBt(r,t,n),bn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&T3e(r))return e.interpolator(HF(GV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(lee(t.interpolate,t.interpolateGamma)):bn(e.round)?e.round(i):bn(e.rangeRound)&&e.interpolate(i?WI:Gm),s&&e.range(GV(s,t.reverse))}function JBt(e,t,n){e!==v3e&&e!==PV&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===PV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ree(n,i,r)]}function ZBt(e,t,n){var r=t.schemeExtent,i,s;return Fe(t.scheme)?s=HF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=cee(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===VF?n+1:e===see?n-1:e===GE||e===zF?+t.schemeCount||zBt:n,T3e(e)?_pe(s,r,t.reverse):bn(s)?I3e(_pe(s,r),n):e===iee?s:s.slice(0,n)}function _pe(e,t,n){return bn(e)&&(t||n)?C3e(e,GV(t||[0,1],n)):e}function GV(e,t){return t?e.slice().reverse():e}function gMe(e){Pe.call(this,null,e)}lt(gMe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Db(e.sort)),this.modified(n),t}});const wpe="zero",yMe="center",vMe="normalize",bMe=["y0","y1"];function Xee(e){Pe.call(this,null,e)}Xee.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:wpe,values:[wpe,yMe,vMe]},{name:"as",type:"string",array:!0,length:2,default:bMe}]};lt(Xee,Pe,{transform(e,t){var n=e.as||bMe,r=n[0],i=n[1],s=Db(e.sort),o=e.field||mS,a=e.offset===yMe?e9t:e.offset===vMe?t9t:n9t,u,l,c,f;for(u=r9t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function e9t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function t9t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function n9t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function r9t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const i9t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:oMe,datajoin:aMe,encode:uMe,legendentries:lMe,linkpath:Yee,pie:Kee,scale:pMe,sortitems:gMe,stack:Xee},Symbol.toStringTag,{value:"Module"}));var s9t=Math.abs,YV=Math.cos,H$=Math.sin,o9t=1e-6,_Me=Math.PI,KV=_Me/2,Epe=a9t(2);function xpe(e){return e>1?KV:e<-1?-KV:Math.asin(e)}function a9t(e){return e>0?Math.sqrt(e):0}function u9t(e,t){var n=e*H$(t),r=30,i;do t-=i=(t+H$(t)-n)/(1+YV(t));while(s9t(i)>o9t&&--r>0);return t/2}function l9t(e,t,n){function r(i,s){return[e*i*YV(s=u9t(n,s)),t*H$(s)]}return r.invert=function(i,s){return s=xpe(s/t),[i/(e*YV(s)),xpe((2*s+H$(2*s))/n)]},r}var c9t=l9t(Epe/KV,Epe,_Me);function f9t(){return zh(c9t).scale(169.529)}const d9t=lSe(),XV=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function h9t(e,t){return function n(){const r=t();return r.type=e,r.path=lSe().projection(r),r.copy=r.copy||function(){const i=n();return XV.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},E3e(r)}}function Qee(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(q$[e]=h9t(e,t),this):q$[e]||null}function wMe(e){return e&&e.path||d9t}const q$={albers:fSe,albersusa:Aft,azimuthalequalarea:Cft,azimuthalequidistant:Ift,conicconformal:Nft,conicequalarea:c3,conicequidistant:Oft,equalEarth:Mft,equirectangular:Pft,gnomonic:Lft,identity:Fft,mercator:kft,mollweide:f9t,naturalEarth1:jft,orthographic:Bft,stereographic:Uft,transversemercator:zft};for(const e in q$)Qee(e,q$[e]);function p9t(){}const dp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function EMe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),m9t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(g9t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,dp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,dp[m|g<<1].forEach(b);for(dp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,dp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,dp[m|g<<1|y<<2|v<<3].forEach(b);dp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,dp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,dp[y<<2|v<<3].forEach(b);dp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],T=o(E),A=o(S),C,I;(C=d[T])?(I=f[A])?(delete d[C.end],delete f[I.start],C===I?(C.ring.push(S),c(C.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete d[C.end],C.ring.push(S),d[C.end=A]=C):(C=f[A])?(I=d[T])?(delete f[C.start],delete d[I.end],C===I?(C.ring.push(S),c(C.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=T]=C):f[T]=d[A]={start:T,end:A,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:p9t,r):n===a},r}function m9t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function g9t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=y9t(e,t[n]))return i;return 0}function y9t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(v9t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function v9t(e,t,n){var r;return b9t(e,t,n)&&_9t(e[r=+(e[0]===t[0])],n[r],t[r])}function b9t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function _9t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function xMe(e,t,n){return function(r){var i=Ah(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?M0(s,o,e):a/(e+1);return Iu(s+u,o,u)}}function Jee(e){Pe.call(this,null,e)}Jee.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Jee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||va,s=EMe().smooth(e.smooth!==!1),o=e.thresholds||w9t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Fe(o)?o:o(c.values));E9t(f,c,l,e),f.forEach(d=>{u.push(PF(l,wr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function w9t(e,t,n){const r=xMe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>h0(t(i).values)))}function E9t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(bn(i)&&(i=i(n,r)),bn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(SMe(t,o,a,u,l))}function SMe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function Spe(e,t,n){const r=e>=0?e:yZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function bB(e){return bn(e)?e:ba(+e)}function TMe(){var e=u=>u[0],t=u=>u[1],n=mS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=Spe(r[0],u,e)>>o,f=Spe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f)):c>0?(y_(p,m,g,y,c),y_(p,m,y,g,c),y_(p,m,g,y,c),v=y):f>0&&(v_(p,m,g,y,f),v_(p,m,y,g,f),v_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/OEe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=bB(u),a):e},a.y=function(u){return arguments.length?(t=bB(u),a):t},a.weight=function(u){return arguments.length?(n=bB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ht(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function y_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function v_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Zee(e){Pe.call(this,null,e)}Zee.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const x9t=["x","y","weight","size","cellSize","bandwidth"];function AMe(e,t){return x9t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Zee,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=S9t(r,e.groupby),s=(e.groupby||[]).map(Yi),o=AMe(TMe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>wr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function S9t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function ete(e){Pe.call(this,null,e)}ete.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(ete,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=EMe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||xMe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=AMe(TMe(),e)(i,!0),u=SMe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Fe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(wr),n}});const QV="Feature",tte="FeatureCollection",T9t="MultiPoint";function nte(e){Pe.call(this,null,e)}nte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(nte,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&va,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(fa(a))||s&&t.modified(fa(s))||o&&t.modified(fa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:QV,geometry:{type:T9t,coordinates:r}})),this.value={type:tte,features:n}}});function rte(e){Pe.call(this,null,e)}rte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(rte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||va,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=wMe(e.projection),n.materialize().reflow()):o=i===va||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=A9t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function A9t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function ite(e){Pe.call(this,null,e)}ite.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(ite,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function ste(e){Pe.call(this,null,e)}ste.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(ste,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=C9t(wMe(e.projection),e.field||Ac("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function C9t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function ote(e){Pe.call(this,[],e),this.generator=sft()}ote.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(ote,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)bn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(AOe(n[0],i)):t.add.push(wr(i)),n[0]=i,t}});function ate(e){Pe.call(this,null,e)}ate.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(ate,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||va,s=k9t(e.opacity,e),o=I9t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?h0(n.map(l=>h0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=yn({},l,u);r||(f.$max=h0(c.values||[])),l[a]=R9t(c,f,o.dep?o:ba(o(f)),s.dep?s:ba(s(f)))}),t.reflow(!0).modifies(a)}});function I9t(e,t){let n;return bn(e)?(n=r=>L0(e(r,t)),n.dep=CMe(e)):n=ba(L0(e||"#888")),n}function k9t(e,t){let n;return bn(e)?(n=r=>e(r,t),n.dep=CMe(e)):e?n=ba(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function CMe(e){if(!bn(e))return!1;const t=Hf(fa(e));return t.$x||t.$y||t.$value||t.$max}function R9t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Ug,d=T0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function IMe(e){Pe.call(this,null,e),this.modified(!0)}lt(IMe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=P9t(e.type),XV.forEach(r=>{e[r]!=null&&Tpe(n,r,e[r])})):XV.forEach(r=>{e.modified(r)&&Tpe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&N9t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function N9t(e,t){const n=D9t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function P9t(e){const t=Qee((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function Tpe(e,t,n){bn(e[t])&&e[t](n)}function D9t(e){return e=ht(e),e.length===1?e[0]:{type:tte,features:e.reduce((t,n)=>t.concat(O9t(n)),[])}}function O9t(e){return e.type===tte?e.features:ht(e).filter(t=>t!=null).map(t=>t.type===QV?t:{type:QV,geometry:t})}const $9t=Object.freeze(Object.defineProperty({__proto__:null,contour:ete,geojson:nte,geopath:rte,geopoint:ite,geoshape:ste,graticule:ote,heatmap:ate,isocontour:Jee,kde2d:Zee,projection:IMe},Symbol.toStringTag,{value:"Module"})),Ape={center:Klt,collide:pct,nbody:Tct,link:gct,x:Act,y:Cct},SA="forces",JV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],M9t=["static","iterations"],kMe=["x","y","vx","vy"];function ute(e){Pe.call(this,null,e)}ute.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:kMe}]};lt(ute,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(JV),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&RMe(n,e,0,t)):(this.value=n=F9t(t.source,e),n.on("tick",L9t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(M9t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==SA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(kMe)}});function L9t(e,t){return()=>e.touch(t).run()}function F9t(e,t){const n=Sct(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),RMe(n,t,!0).on("end",()=>s=!0)}function RMe(e,t,n,r){var i=ht(t.forces),s,o,a,u;for(s=0,o=JV.length;s<o;++s)a=JV[s],a!==SA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=SA+s,a=n||t.modified(SA,s)?B9t(i[s]):r&&j9t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(SA+s,null);return e.numForces=i.length,e}function j9t(e,t){var n,r;for(n in e)if(bn(r=e[n])&&t.modified(fa(r)))return 1;return 0}function B9t(e){var t,n;Ft(Ape,e.force)||Me("Unrecognized force: "+e.force),t=Ape[e.force]();for(n in e)bn(t[n])&&U9t(t[n],e[n],e);return t}function U9t(e,t,n){e(bn(t)?r=>t(r,n):t)}const z9t=Object.freeze(Object.defineProperty({__proto__:null,force:ute},Symbol.toStringTag,{value:"Module"}));function ZV(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function lte(e){Pe.call(this,null,e)}lte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const V9t=e=>e.values;lt(lte,Pe,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&NF(o.data)&&i.rem.push(o.data)}),this.value=s=WL({values:ht(e.keys).reduce((o,a)=>(o.key(a),o),H9t()).entries(i.source)},V9t),n&&s.each(o=>{o.children&&(o=wr(o.data),i.add.push(o),i.source.push(o))}),ZV(s,Mt,Mt)),i.source.root=s,i}});function H9t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function tg(e){Pe.call(this,null,e)}const q9t=(e,t)=>e.parent===t.parent?1:2;lt(tg,Pe,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Db(e.sort,o=>o.data)),W9t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?q9t:mS);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>G9t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function W9t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function G9t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const eH=["x","y","r","depth","children"];function cte(e){tg.call(this,e)}cte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eH.length,default:eH}]};lt(cte,tg,{layout:ASe,params:["radius","size","padding"],fields:eH});const tH=["x0","y0","x1","y1","depth","children"];function fte(e){tg.call(this,e)}fte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tH.length,default:tH}]};lt(fte,tg,{layout:Cdt,params:["size","round","padding"],fields:tH});function dte(e){Pe.call(this,null,e)}dte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(dte,Pe,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?ZV(ole().id(e.key).parentId(e.parentKey)(i.source),e.key,Cc):ZV(ole()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Cpe={tidy:Ldt,cluster:Xft},nH=["x","y","depth","children"];function hte(e){tg.call(this,e)}hte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:nH.length,default:nH}]};lt(hte,tg,{layout(e){const t=e||"tidy";if(Ft(Cpe,t))return Cpe[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:nH});function pte(e){Pe.call(this,[],e)}pte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(pte,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(wr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const Ipe={binary:jdt,dice:XI,slice:GL,slicedice:Bdt,squarify:RSe,resquarify:Udt},rH=["x0","y0","x1","y1","depth","children"];function mte(e){tg.call(this,e)}mte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rH.length,default:rH}]};lt(mte,tg,{layout(){const e=Fdt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(Ipe,t)?e.tile(Ipe[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:rH});const Y9t=Object.freeze(Object.defineProperty({__proto__:null,nest:lte,pack:cte,partition:fte,stratify:dte,tree:hte,treelinks:pte,treemap:mte},Symbol.toStringTag,{value:"Module"})),_B=4278190080;function K9t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function X9t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=T0(s,o).getContext("2d"),l=T0(s,o).getContext("2d"),c=a&&T0(s,o).getContext("2d");n.forEach(A=>AD(u,A,!1)),AD(l,t,!1),a&&AD(c,t,!0);const f=wB(u,s,o),d=wB(l,s,o),h=a&&wB(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&_B,T=d[w]&_B,S=a&&h[w]&_B,(E||S||T)&&(v=e(g),b=e(y),!i&&(E||T)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function wB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function AD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>AD(e,s.items,n))}):Fl[r].draw(e,{items:n?t.map(Q9t):t})}function Q9t(e){const t=PF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const hp=5,Ra=31,rI=32,Rg=new Uint32Array(rI+1),hf=new Uint32Array(rI+1);hf[0]=0;Rg[0]=~hf[0];for(let e=1;e<=rI;++e)hf[e]=hf[e-1]<<1|1,Rg[e]=~hf[e];function J9t(e,t){const n=new Uint32Array(~~((e*t+rI)/rI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>hp]&1<<(a&Ra)},set:(s,o)=>{const a=o*e+s;r(a>>>hp,1<<(a&Ra))},clear:(s,o)=>{const a=o*e+s;i(a>>>hp,~(1<<(a&Ra)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>hp,h=f>>>hp,d===h){if(n[d]&Rg[c&Ra]&hf[(f&Ra)+1])return!0}else{if(n[d]&Rg[c&Ra]||n[h]&hf[(f&Ra)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>hp,d=c>>>hp,f===d)r(f,Rg[l&Ra]&hf[(c&Ra)+1]);else for(r(f,Rg[l&Ra]),r(d,hf[(c&Ra)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>hp,d=c>>>hp,f===d)i(f,hf[l&Ra]|Rg[(c&Ra)+1]);else for(i(f,hf[l&Ra]),i(d,Rg[(c&Ra)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function Z9t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>J9t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function eUt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Sl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function W$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function t0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function tUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!W$(p,m,d,h,i,s)&&!t0(e,p,m,h,d,g,o,a)&&!t0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,t0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,S,T,A,C,I,R,M,P,O,F,L,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),I=e(v),M=e(b),R=~~((I+M)/2),P=e(w),F=e(E),O=~~((P+F)/2),A=R;A>=I;--A)for(C=O;C>=P;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=R;A<=M;++A)for(C=O;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(L=Math.abs(b-v+E-w),S=(v+b)/2,T=(w+E)/2,L>=y&&!W$(S,T,h,d,i,s)&&!t0(e,S,T,d,h,d,o,null)&&(y=L,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const nUt=[-1,-1,1,1],rUt=[-1,1,-1,1];function iUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Sl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,S,T,A,C,I,R,M,P,O;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,S=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+S)/2)]);p.length;)if([C,I]=p.pop(),!(o.get(C,I)||a.get(C,I)||u.get(C,I))){u.set(C,I);for(let L=0;L<4;++L)T=C+nUt[L],A=I+rUt[L],u.outOfBounds(T,A,T,A)||p.push([T,A]);if(T=e.invert(C),A=e.invert(I),R=m,M=s,!W$(T,A,h,d,i,s)&&!t0(e,T,A,d,h,R,o,a)&&!t0(e,T,A,d,h,d,o,null)){for(;M-R>=1;)P=(R+M)/2,t0(e,T,A,d,h,P,o,a)?M=P:R=P;R>m&&(l.x=T,l.y=A,m=R,g=!0)}}!g&&!n&&(O=Math.abs(w-b+S-E),T=(b+w)/2,A=(E+S)/2,O>=v&&!W$(T,A,h,d,i,s)&&!t0(e,T,A,d,h,d,o,null)&&(v=O,l.x=T,l.y=A,y=!0))}return g||y?(T=h/2,A=d/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const sUt=["right","center","left"],oUt=["bottom","middle","top"];function aUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,S,T,A,C,I,R;for(let M=0;M<u;++M){if(h=(n[M]&3)-1,p=(n[M]>>>2&3)-1,m=h===0&&p===0||r[M]<0,g=h&&p?Math.SQRT1_2:1,y=r[M]<0?-1:1,v=c[1+h]+r[M]*h*g,T=c[4+p]+y*f*p/2+r[M]*p*g,w=T-f/2,E=T+f/2,A=e(v),I=e(w),R=e(E),!d)if(kpe(A,A,I,R,o,a,v,v,w,E,c,m))d=Sl.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,A=e(v),C=e(b),kpe(A,C,I,R,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?E:w:T,l.align=sUt[h*y+1],l.baseline=oUt[p*y+1],o.setRange(A,I,C,R),!0}return!1}}function kpe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const EB=0,xB=4,SB=8,TB=0,AB=1,CB=2,uUt={"top-left":EB+TB,top:EB+AB,"top-right":EB+CB,left:xB+TB,middle:xB+AB,right:xB+CB,"bottom-left":SB+TB,bottom:SB+AB,"bottom-right":SB+CB},lUt={naive:eUt,"reduced-search":tUt,floodfill:iUt};function cUt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=fUt(r,f),h=dUt(i,f),p=hUt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=pUt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const S=e.map(I=>{const R=v?Sl.width(I,I.text):void 0;return w=Math.max(w,R),E=Math.max(E,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=Z9t(t[0],t[1],l);let A;if(!b){n&&S.sort((M,P)=>n(M.datum,P.datum));let I=!1;for(let M=0;M<h.length&&!I;++M)I=h[M]===5||d[M]<0;const R=(p&&o||g)&&e.map(M=>M.datum);A=s.length||R?X9t(T,R||[],s,I,g):K9t(T,o&&S)}const C=g?lUt[c](T,A,o,u):aUt(T,A,h,d);return S.forEach(I=>I.opacity=+C(I)),S}function fUt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function dUt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=uUt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function hUt(e){return e&&e.mark&&e.mark.marktype}function pUt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const iH=["x","y","opacity","align","baseline"],NMe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function gte(e){Pe.call(this,null,e)}gte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:NMe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:iH.length,default:iH}]};lt(gte,Pe,{transform(e,t){function n(s){const o=e[s];return bn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||iH;return cUt(t.materialize(t.SOURCE).source||[],e.size,e.sort,ht(e.offset==null?1:e.offset),ht(e.anchor||NMe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const mUt=Object.freeze(Object.defineProperty({__proto__:null,label:gte},Symbol.toStringTag,{value:"Module"}));function PMe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function yte(e){Pe.call(this,null,e)}yte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(yte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=s.length,a=e.as||[Yi(e.x),Yi(e.y)],u=[];i.forEach(l=>{HOe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(wr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const sH={constant:kZ,linear:RZ,log:BOe,exp:UOe,pow:zOe,quad:NZ,poly:VOe},gUt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function vte(e){Pe.call(this,null,e)}vte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(sH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(vte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=PMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=e.method||"linear",a=e.order==null?3:e.order,u=gUt(o,a),l=e.as||[Yi(e.x),Yi(e.y)],c=sH[o],f=[];let d=e.extent;Ft(sH,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(wr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Ah(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(wr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):jF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const yUt=Object.freeze(Object.defineProperty({__proto__:null,loess:yte,regression:vte},Symbol.toStringTag,{value:"Module"}));function bte(e){Pe.call(this,null,e)}bte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const vUt=[-1e5,-1e5,1e5,1e5];lt(bte,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:vUt;const s=this.value=IY.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!_Ut(u)?bUt(u):null}return t.reflow(e.modified()).modifies(n)}});function bUt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function _Ut(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const wUt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:bte},Symbol.toStringTag,{value:"Module"}));var IB=Math.PI/180,TA=64,CD=2048;function EUt(){var e=[256,256],t,n,r,i,s,o,a,u=DMe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(T0()),m=IUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,xUt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?TUt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(TA<<5)/m,p.height=CD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,S=-E,T,A,C;(T=w(S+=E))&&(A=~~T[0],C=~~T[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!SUt(m,p,e[0]))&&(!g||AUt(m,g))){for(var I=m.sprite,R=m.width>>5,M=e[0]>>5,P=m.x-(R<<4),O=P&127,F=32-O,L=m.y1-m.y0,B=(m.y+m.y0)*M+(P>>5),U,H=0;H<L;H++){U=0;for(var D=0;D<=R;D++)p[B+D]|=U<<F|(D<R?(U=I[H*R+D])>>>O:0);B+=M}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=n1(p),f):n},f.fontStyle=function(p){return arguments.length?(i=n1(p),f):i},f.fontWeight=function(p){return arguments.length?(s=n1(p),f):s},f.rotate=function(p){return arguments.length?(o=n1(p),f):o},f.text=function(p){return arguments.length?(t=n1(p),f):t},f.spiral=function(p){return arguments.length?(u=kUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=n1(p),f):r},f.padding=function(p){return arguments.length?(a=n1(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function xUt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(TA<<5)/s,CD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*IB),g=Math.cos(t.rotate*IB),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=TA<<5&&(o=0,a+=u,u=0),a+d>=CD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*IB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(TA<<5)/s,CD/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),I=E[(a+p)*(TA<<5)+(o+h)<<2]?1<<31-h%32:0;S[C]|=I,T|=I}T?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function SUt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function TUt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function AUt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function DMe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function CUt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function IUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function n1(e){return typeof e=="function"?e:function(){return e}}var kUt={archimedean:DMe,rectangular:CUt};const OMe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],RUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function _te(e){Pe.call(this,EUt(),e)}_te.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:OMe}]};lt(_te,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return bn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||RUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||OMe;let a=e.fontSize||14,u;if(bn(a)?u=e.fontSizeRange:a=ba(a),u){const p=a,m=gr("sqrt")().domain(Ah(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(kc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const NUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:_te},Symbol.toStringTag,{value:"Module"})),PUt=e=>new Uint8Array(e),DUt=e=>new Uint16Array(e),xC=e=>new Uint32Array(e);function OUt(){let e=8,t=[],n=xC(0),r=ZN(0,e),i=ZN(0,e);return{data:()=>t,seen:()=>n=$Ut(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=ZN(s,e,r),i=ZN(s,e))}}}function $Ut(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function ZN(e,t,n){const r=(t<257?PUt:t<65537?DUt:xC)(e);return n&&r.set(n),r}function Rpe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Npe(){let e=xC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=xC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=MUt(h,d),c)p=t,m=e,t=Array(c+f),e=xC(c+f),LUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[pst(u,a[0],0,l),$0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function MUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),yst(e,t)}function LUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function wte(e){Pe.call(this,OUt(),e),this._indices=null,this._dims=null}wte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(wte,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Npe()),s.push(Rpe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,S,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=Npe(),p[y]=m=g.insert(T,t.source,0)),o[E]=Rpe(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Ete(e){Pe.call(this,null,e)}Ete.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(Ete,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const FUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:wte,resolvefilter:Ete},Symbol.toStringTag,{value:"Module"})),jUt="RawCode",eb="Literal",BUt="Property",UUt="Identifier",zUt="ArrayExpression",VUt="BinaryExpression",$Me="CallExpression",HUt="ConditionalExpression",qUt="LogicalExpression",WUt="MemberExpression",GUt="ObjectExpression",YUt="UnaryExpression";function td(e){this.type=e}td.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=KUt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function KUt(e){switch(e.type){case zUt:return e.elements;case VUt:case qUt:return[e.left,e.right];case $Me:return[e.callee].concat(e.arguments);case HUt:return[e.test,e.consequent,e.alternate];case WUt:return[e.object,e.property];case GUt:return e.properties;case BUt:return[e.key,e.value];case YUt:return[e.argument];case UUt:case eb:case jUt:default:return[]}}var Kh,kt,$e,ha,Pr,r4=1,Xk=2,tb=3,jy=4,i4=5,Mb=6,yu=7,Qk=8,XUt=9;Kh={};Kh[r4]="Boolean";Kh[Xk]="<end>";Kh[tb]="Identifier";Kh[jy]="Keyword";Kh[i4]="Null";Kh[Mb]="Numeric";Kh[yu]="Punctuator";Kh[Qk]="String";Kh[XUt]="RegularExpression";var QUt="ArrayExpression",JUt="BinaryExpression",ZUt="CallExpression",e7t="ConditionalExpression",MMe="Identifier",t7t="Literal",n7t="LogicalExpression",r7t="MemberExpression",i7t="ObjectExpression",s7t="Property",o7t="UnaryExpression",no="Unexpected token %0",a7t="Unexpected number",u7t="Unexpected string",l7t="Unexpected identifier",c7t="Unexpected reserved word",f7t="Unexpected end of input",oH="Invalid regular expression",kB="Invalid regular expression: missing /",LMe="Octal literals are not allowed in strict mode.",d7t="Duplicate data property in object literal not allowed in strict mode",Ao="ILLEGAL",iI="Disabled.",h7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),p7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function s4(e,t){if(!e)throw new Error("ASSERT: "+t)}function Tp(e){return e>=48&&e<=57}function xte(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function SC(e){return"01234567".indexOf(e)>=0}function m7t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function sI(e){return e===10||e===13||e===8232||e===8233}function Jk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&h7t.test(String.fromCharCode(e))}function G$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&p7t.test(String.fromCharCode(e))}const g7t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function FMe(){for(;$e<ha;){const e=kt.charCodeAt($e);if(m7t(e)||sI(e))++$e;else break}}function aH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<ha&&xte(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},no,Ao);return String.fromCharCode(i)}function y7t(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&pr({},no,Ao);$e<ha&&(e=kt[$e++],!!xte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},no,Ao),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function jMe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&pr({},no,Ao),++$e,e=aH("u"),(!e||e==="\\"||!Jk(e.charCodeAt(0)))&&pr({},no,Ao),t=e);$e<ha&&(e=kt.charCodeAt($e),!!G$(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&pr({},no,Ao),++$e,e=aH("u"),(!e||e==="\\"||!G$(e.charCodeAt(0)))&&pr({},no,Ao),t+=e);return t}function v7t(){var e,t;for(e=$e++;$e<ha;){if(t=kt.charCodeAt($e),t===92)return $e=e,jMe();if(G$(t))++$e;else break}return kt.slice(e,$e)}function b7t(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?jMe():v7t(),t.length===1?n=tb:g7t.hasOwnProperty(t)?n=jy:t==="null"?n=i4:t==="true"||t==="false"?n=r4:n=tb,{type:n,value:t,start:e,end:$e}}function RB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:yu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:yu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:yu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:yu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:yu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:yu,value:i,start:e,end:$e};if(i==="//"&&pr({},no,Ao),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:yu,value:r,start:e,end:$e};pr({},no,Ao)}function _7t(e){let t="";for(;$e<ha&&xte(kt[$e]);)t+=kt[$e++];return t.length===0&&pr({},no,Ao),Jk(kt.charCodeAt($e))&&pr({},no,Ao),{type:Mb,value:parseInt("0x"+t,16),start:e,end:$e}}function w7t(e){let t="0"+kt[$e++];for(;$e<ha&&SC(kt[$e]);)t+=kt[$e++];return(Jk(kt.charCodeAt($e))||Tp(kt.charCodeAt($e)))&&pr({},no,Ao),{type:Mb,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Ppe(){var e,t,n;if(n=kt[$e],s4(Tp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,_7t(t);if(SC(n))return w7t(t);n&&Tp(n.charCodeAt(0))&&pr({},no,Ao)}for(;Tp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Tp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Tp(kt.charCodeAt($e)))for(;Tp(kt.charCodeAt($e));)e+=kt[$e++];else pr({},no,Ao);return Jk(kt.charCodeAt($e))&&pr({},no,Ao),{type:Mb,value:parseFloat(e),start:t,end:$e}}function E7t(){var e="",t,n,r,i,s=!1;for(t=kt[$e],s4(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<ha;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!sI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=y7t()):e+=aH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:SC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<ha&&SC(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<ha&&SC(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(sI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},no,Ao),{type:Qk,value:e,octal:s,start:n,end:$e}}function x7t(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},oH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},oH)}try{return new RegExp(e,t)}catch{return null}}function S7t(){var e,t,n,r,i;for(e=kt[$e],s4(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<ha;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],sI(e.charCodeAt(0))&&pr({},kB),t+=e;else if(sI(e.charCodeAt(0)))pr({},kB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},kB),i=t.substr(1,t.length-2),{value:i,literal:t}}function T7t(){var e,t,n;for(t="",n="";$e<ha&&(e=kt[$e],!!G$(e.charCodeAt(0)));)++$e,e==="\\"&&$e<ha?pr({},no,Ao):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},oH,n),{value:n,literal:t}}function A7t(){var e,t,n,r;return Pr=null,FMe(),e=$e,t=S7t(),n=T7t(),r=x7t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function C7t(e){return e.type===tb||e.type===jy||e.type===r4||e.type===i4}function BMe(){if(FMe(),$e>=ha)return{type:Xk,start:$e,end:$e};const e=kt.charCodeAt($e);return Jk(e)?b7t():e===40||e===41||e===59?RB():e===39||e===34?E7t():e===46?Tp(kt.charCodeAt($e+1))?Ppe():RB():Tp(e)?Ppe():RB()}function Tu(){const e=Pr;return $e=e.end,Pr=BMe(),$e=e.end,e}function UMe(){const e=$e;Pr=BMe(),$e=e}function I7t(e){const t=new td(QUt);return t.elements=e,t}function Dpe(e,t,n){const r=new td(e==="||"||e==="&&"?n7t:JUt);return r.operator=e,r.left=t,r.right=n,r}function k7t(e,t){const n=new td(ZUt);return n.callee=e,n.arguments=t,n}function R7t(e,t,n){const r=new td(e7t);return r.test=e,r.consequent=t,r.alternate=n,r}function Ste(e){const t=new td(MMe);return t.name=e,t}function AA(e){const t=new td(t7t);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Ope(e,t,n){const r=new td(r7t);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function N7t(e){const t=new td(i7t);return t.properties=e,t}function $pe(e,t,n){const r=new td(s7t);return r.key=t,r.value=n,r.kind=e,r}function P7t(e,t){const n=new td(o7t);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(s4(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function o4(e){e.type===Xk&&pr(e,f7t),e.type===Mb&&pr(e,a7t),e.type===Qk&&pr(e,u7t),e.type===tb&&pr(e,l7t),e.type===jy&&pr(e,c7t),pr(e,no,e.value)}function pa(e){const t=Tu();(t.type!==yu||t.value!==e)&&o4(t)}function li(e){return Pr.type===yu&&Pr.value===e}function NB(e){return Pr.type===jy&&Pr.value===e}function D7t(){const e=[];for($e=Pr.start,pa("[");!li("]");)li(",")?(Tu(),e.push(null)):(e.push(nb()),li("]")||pa(","));return Tu(),I7t(e)}function Mpe(){$e=Pr.start;const e=Tu();return e.type===Qk||e.type===Mb?(e.octal&&pr(e,LMe),AA(e)):Ste(e.value)}function O7t(){var e,t,n,r;if($e=Pr.start,e=Pr,e.type===tb)return n=Mpe(),pa(":"),r=nb(),$pe("init",n,r);if(e.type===Xk||e.type===yu)o4(e);else return t=Mpe(),pa(":"),r=nb(),$pe("init",t,r)}function $7t(){var e=[],t,n,r,i={},s=String;for($e=Pr.start,pa("{");!li("}");)t=O7t(),t.key.type===MMe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},d7t):i[r]=!0,e.push(t),li("}")||pa(",");return pa("}"),N7t(e)}function M7t(){pa("(");const e=Tte();return pa(")"),e}const L7t={if:1};function F7t(){var e,t,n;if(li("("))return M7t();if(li("["))return D7t();if(li("{"))return $7t();if(e=Pr.type,$e=Pr.start,e===tb||L7t[Pr.value])n=Ste(Tu().value);else if(e===Qk||e===Mb)Pr.octal&&pr(Pr,LMe),n=AA(Tu());else{if(e===jy)throw new Error(iI);e===r4?(t=Tu(),t.value=t.value==="true",n=AA(t)):e===i4?(t=Tu(),t.value=null,n=AA(t)):li("/")||li("/=")?(n=AA(A7t()),UMe()):o4(Tu())}return n}function j7t(){const e=[];if(pa("("),!li(")"))for(;$e<ha&&(e.push(nb()),!li(")"));)pa(",");return pa(")"),e}function B7t(){$e=Pr.start;const e=Tu();return C7t(e)||o4(e),Ste(e.value)}function U7t(){return pa("."),B7t()}function z7t(){pa("[");const e=Tte();return pa("]"),e}function V7t(){var e,t,n;for(e=F7t();;)if(li("."))n=U7t(),e=Ope(".",e,n);else if(li("("))t=j7t(),e=k7t(e,t);else if(li("["))n=z7t(),e=Ope("[",e,n);else break;return e}function Lpe(){const e=V7t();if(Pr.type===yu&&(li("++")||li("--")))throw new Error(iI);return e}function ID(){var e,t;if(Pr.type!==yu&&Pr.type!==jy)t=Lpe();else{if(li("++")||li("--"))throw new Error(iI);if(li("+")||li("-")||li("~")||li("!"))e=Tu(),t=ID(),t=P7t(e.value,t);else{if(NB("delete")||NB("void")||NB("typeof"))throw new Error(iI);t=Lpe()}}return t}function Fpe(e){let t=0;if(e.type!==yu&&e.type!==jy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function H7t(){var e,t,n,r,i,s,o,a,u,l;if(e=Pr,u=ID(),r=Pr,i=Fpe(r),i===0)return u;for(r.prec=i,Tu(),t=[e,Pr],o=ID(),s=[u,r,o];(i=Fpe(Pr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Dpe(a,u,o),s.push(n);r=Tu(),r.prec=i,s.push(r),t.push(Pr),n=ID(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Dpe(s[l-1].value,s[l-2],n),l-=2;return n}function nb(){var e,t,n;return e=H7t(),li("?")&&(Tu(),t=nb(),pa(":"),n=nb(),e=R7t(e,t,n)),e}function Tte(){const e=nb();if(li(","))throw new Error(iI);return e}function Ate(e){kt=e,$e=0,ha=kt.length,Pr=null,UMe();const t=Tte();if(Pr.type!==Xk)throw new Error("Unexpect token after expression.");return t}var zMe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function VMe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function q7t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function HMe(e){e=e||{};const t=e.allowed?Hf(e.allowed):{},n=e.forbidden?Hf(e.forbidden):{},r=e.constants||zMe,i=(e.functions||VMe)(f),s=e.globalvar,o=e.fieldvar,a=bn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(pt(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Me("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[q7t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Me("Unrecognized function: "+m),bn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const jpe=Symbol("vega_selection_getter");function qMe(e){return(!e.getter||!e.getter[jpe])&&(e.getter=Ac(e.field),e.getter[jpe]=!0),e.getter}const Cte="intersect",Bpe="union",W7t="vlMulti",G7t="vlPoint",Upe="or",Y7t="and",kd="_vgsid_",oI=Ac(kd),K7t="E",X7t="R",Q7t="R-E",J7t="R-LE",Z7t="R-RE",Y$="index:unit";function zpe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=qMe(a)(e),x0(o)&&(o=ua(o)),x0(r[s])&&(r[s]=ua(r[s])),Fe(r[s])&&x0(r[s][0])&&(r[s]=r[s].map(ua)),a.type===K7t){if(Fe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===X7t){if(!sw(o,r[s]))return!1}else if(a.type===Z7t){if(!sw(o,r[s],!0,!1))return!1}else if(a.type===Q7t){if(!sw(o,r[s],!1,!1))return!1}else if(a.type===J7t&&!sw(o,r[s],!1,!0))return!1;return!0}function ezt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[Y$]&&r[Y$].value:void 0,o=n===Cte,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=zpe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=zpe(t,l),o^h)return h;return a&&o}const WMe=Lx(oI),tzt=WMe.left,nzt=WMe.right;function rzt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[Y$]&&r[Y$].value:void 0,o=n===Cte,a=oI(t),u=tzt(i,a);if(u===i.length||oI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(nzt(i,a)-u<s.size)return!1}return!0}function izt(e,t){return e.map(n=>yn(t.fields?{values:t.fields.map(r=>qMe(r)(n.datum))}:{[kd]:oI(n.datum)},t))}function szt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,S;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=PB[`${y}_union`],m[d]=v(g,ht(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(ht(f).reduce((T,A,C)=>(T[c[C].field]=A,T),{})))}else h=kd,p=oI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[kd]:p}));if(t=t||Bpe,o[kd]?o[kd]=PB[`${kd}_${t}`](...Object.values(o[kd])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(A=>o[T][A]).reduce((A,C)=>A===void 0?C:PB[`${u[T]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const T=r?G7t:W7t;o[T]=t===Bpe?{[Upe]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[Y7t]:s.map(A=>({[Upe]:a[A]}))}}return o}var PB={[`${kd}_union`]:Ast,[`${kd}_intersect`]:Sst,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ua(t[0]),r=ua(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ua(t[0]),r=ua(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const ozt=":",azt="@";function Ite(e,t,n,r){t[0].type!==eb&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=azt+o,u=ozt+i;s===Cte&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function GMe(e){const t=this.context.data[e];return t?t.values.value:[]}function uzt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function lzt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Cc).insert(t)),1}function czt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Zk=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},fzt=Zk("format"),YMe=Zk("timeFormat"),dzt=Zk("utcFormat"),hzt=Zk("timeParse"),pzt=Zk("utcParse"),eP=new Date(2e3,0,1);function a4(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(eP.setYear(2e3),eP.setMonth(e),eP.setDate(t),YMe.call(this,eP,n))}function mzt(e){return a4.call(this,e,1,"%B")}function gzt(e){return a4.call(this,e,1,"%b")}function yzt(e){return a4.call(this,0,2+e,"%A")}function vzt(e){return a4.call(this,0,2+e,"%a")}const bzt=":",_zt="@",uH="%",KMe="$";function kte(e,t,n,r){t[0].type!==eb&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=bzt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function wzt(e,t,n,r){t[0].type!==eb&&Me("First argument to indata must be a string literal."),t[1].type!==eb&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=_zt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Wa(e,t,n,r){if(t[0].type===eb)Vpe(n,r,t[0].value);else for(e in n.scales)Vpe(n,r,e)}function Vpe(e,t,n){const r=uH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Xh(e,t){if(bn(e))return e;if(pt(e)){const n=t.scales[e];return n&&G4t(n.value)?n.value:void 0}}function Ezt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Wa,n._range=Wa,n._scale=Wa;const r=i=>"_["+(i.type===eb?rt(uH+i.value):rt(uH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Rte(e,t){return function(n,r,i){if(n){const s=Xh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const xzt=Rte("area",Fct),Szt=Rte("bounds",zct),Tzt=Rte("centroid",Yct);function Azt(e,t){const n=Xh(e,(t||this).context);return n&&n.scale()}function Czt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Nte(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Izt(){return Nte(this.context.dataflow,"warn",arguments)}function kzt(){return Nte(this.context.dataflow,"info",arguments)}function Rzt(){return Nte(this.context.dataflow,"debug",arguments)}function DB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function lH(e){const t=L0(e),n=DB(t.r),r=DB(t.g),i=DB(t.b);return .2126*n+.7152*r+.0722*i}function Nzt(e,t){const n=lH(e),r=lH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Pzt(){const e=[].slice.call(arguments);return e.unshift({}),yn(...e)}function XMe(e,t){return e===t||e!==e&&t!==t?!0:Fe(e)?Fe(t)&&e.length===t.length?Dzt(e,t):!1:mt(e)&&mt(t)?QMe(e,t):!1}function Dzt(e,t){for(let n=0,r=e.length;n<r;++n)if(!XMe(e[n],t[n]))return!1;return!0}function QMe(e,t){for(const n in e)if(!XMe(e[n],t[n]))return!1;return!0}function Hpe(e){return t=>QMe(e,t)}function Ozt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Cc:Fe(n)||NF(n)?n:Hpe(n),c.remove(f)),t&&c.insert(t),r&&(f=Hpe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function $zt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Mzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const qpe={};function Lzt(e,t){const n=qpe[t]||(qpe[t]=Ac(t));return Fe(e)?e.map(n):n(e)}function Pte(e){return Fe(e)||ArrayBuffer.isView(e)?e:null}function Dte(e){return Pte(e)||(pt(e)?e:null)}function Fzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Pte(e).join(...n)}function jzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dte(e).indexOf(...n)}function Bzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dte(e).lastIndexOf(...n)}function Uzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dte(e).slice(...n)}function zzt(e,t,n){return bn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function Vzt(e){return Pte(e).slice().reverse()}function Hzt(e,t,n){return ree(e||0,t||0,n||0)}function qzt(e,t){const n=Xh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Wzt(e,t){const n=Xh(e,(t||this).context);return n?n.copy():void 0}function Gzt(e,t){const n=Xh(e,(t||this).context);return n?n.domain():[]}function Yzt(e,t,n){const r=Xh(e,(n||this).context);return r?Fe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Kzt(e,t){const n=Xh(e,(t||this).context);return n&&n.range?n.range():[]}function Xzt(e,t,n){const r=Xh(e,(n||this).context);return r?r(t):void 0}function Qzt(e,t,n,r,i){e=Xh(e,(i||this).context);const s=U3e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=va;return u-a?l=k3e(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Jzt(e,t,n){const r=Xh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Zzt(e){let t=null;return function(n){return n?eI(n,t=t||KE(e)):e}}const JMe=e=>e.data;function ZMe(e,t){const n=GMe.call(t,e);return n.root&&n.root.lookup||{}}function eVt(e,t,n){const r=ZMe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(JMe):void 0}function tVt(e,t){const n=ZMe(e,this)[t];return n?n.ancestors().map(JMe):void 0}const eLe=()=>typeof window<"u"&&window||null;function nVt(){const e=eLe();return e?e.screen:{}}function rVt(){const e=eLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function iVt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function tLe(e,t,n){if(!e)return[];const[r,i]=e,s=new _s().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return F$e(o,s,sVt(t))}function sVt(e){let t=null;if(e){const n=ht(e.marktype),r=ht(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function oVt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ht(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function aVt(e){return ht(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function uVt(e,t,n){const{x:r,y:i,mark:s}=n,o=new _s().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),tLe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>lVt(u.x,u.y,t))}function lVt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const aI={random(){return kc()},cumulativeNormal:MF,cumulativeLogNormal:xZ,cumulativeUniform:CZ,densityNormal:vZ,densityLogNormal:EZ,densityUniform:AZ,quantileNormal:LF,quantileLogNormal:SZ,quantileUniform:IZ,sampleNormal:$F,sampleLogNormal:wZ,sampleUniform:TZ,isArray:Fe,isBoolean:Fy,isDate:x0,isDefined(e){return e!==void 0},isNumber:lr,isObject:mt,isRegExp:jDe,isString:pt,isTuple:NF,isValid(e){return e!=null&&e===e},toBoolean:nZ,toDate(e){return rZ(e)},toNumber:ua,toString:iZ,indexof:jzt,join:Fzt,lastindexof:Bzt,replace:zzt,reverse:Vzt,slice:Uzt,flush:LDe,lerp:BDe,merge:Pzt,pad:VDe,peek:Qn,pluck:Lzt,span:Dk,inrange:sw,truncate:HDe,rgb:L0,lab:LO,hcl:FO,hsl:$O,luminance:lH,contrast:Nzt,sequence:Iu,format:fzt,utcFormat:dzt,utcParse:pzt,utcOffset:iOe,utcSequence:aOe,timeFormat:YMe,timeParse:hzt,timeOffset:rOe,timeSequence:oOe,timeUnitSpecifier:WDe,monthFormat:mzt,monthAbbrevFormat:gzt,dayFormat:yzt,dayAbbrevFormat:vzt,quarter:DDe,utcquarter:ODe,week:YDe,utcweek:QDe,dayofyear:GDe,utcdayofyear:XDe,warn:Izt,info:kzt,debug:Rzt,extent(e){return Ah(e)},inScope:Czt,intersect:tLe,clampRange:$De,pinchDistance:$zt,pinchAngle:Mzt,screen:nVt,containerSize:iVt,windowSize:rVt,bandspace:Hzt,setdata:lzt,pathShape:Zzt,panLinear:kDe,panLog:RDe,panPow:NDe,panSymlog:PDe,zoomLinear:XJ,zoomLog:QJ,zoomPow:C$,zoomSymlog:JJ,encode:czt,modify:Ozt,lassoAppend:oVt,lassoPath:aVt,intersectLasso:uVt},cVt=["view","item","group","xy","x","y"],fVt="event.vega.",nLe="this.",Ote={},rLe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(KMe+e)}]`,functions:dVt,constants:zMe,visitors:Ote},cH=HMe(rLe);function dVt(e){const t=VMe(e);cVt.forEach(n=>t[n]=fVt+n);for(const n in aI)t[n]=nLe+n;return yn(t,Ezt(e,aI,Ote)),t}function fs(e,t,n){return arguments.length===1?aI[e]:(aI[e]=t,n&&(Ote[e]=n),cH&&(cH.functions[e]=nLe+e),this)}fs("bandwidth",qzt,Wa);fs("copy",Wzt,Wa);fs("domain",Gzt,Wa);fs("range",Kzt,Wa);fs("invert",Yzt,Wa);fs("scale",Xzt,Wa);fs("gradient",Qzt,Wa);fs("geoArea",xzt,Wa);fs("geoBounds",Szt,Wa);fs("geoCentroid",Tzt,Wa);fs("geoShape",Jzt,Wa);fs("geoScale",Azt,Wa);fs("indata",uzt,wzt);fs("data",GMe,kte);fs("treePath",eVt,kte);fs("treeAncestors",tVt,kte);fs("vlSelectionTest",ezt,Ite);fs("vlSelectionIdTest",rzt,Ite);fs("vlSelectionResolve",szt,Ite);fs("vlSelectionTuples",izt);function Ih(e,t){const n={};let r;try{e=pt(e)?e:rt(e)+"",r=Ate(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==$Me)return;const o=s.callee.name,a=rLe.visitors[o];a&&a(o,s.arguments,t,n)});const i=cH(r);return i.globals.forEach(s=>{const o=KMe+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:yn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function hVt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const pVt=Hf(["rule"]),Wpe=Hf(["group","image","rect"]);function mVt(e,t){let n="";return pVt[t]||(e.x2&&(e.x?(Wpe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Wpe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function $te(e){return(e+"").toLowerCase()}function gVt(e){return $te(e)==="operator"}function yVt(e){return $te(e)==="collect"}function IT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function vVt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var bVt={operator:(e,t)=>IT(e,["_"],t.code),parameter:(e,t)=>IT(e,["datum","_"],t.code),event:(e,t)=>IT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return IT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=mVt(r,n),i+="return m;",IT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),vVt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function _Vt(e){const t=this;gVt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function wVt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function EVt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Fe(i)?i.map(s=>Gpe(s,n,t)):Gpe(i,n,t)}return t}function Gpe(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=Ype.length,s;r<i;++r)if(s=Ype[r],Ft(e,s.key))return s.parse(e,t,n);return e}var Ype=[{key:"$ref",parse:xVt},{key:"$key",parse:TVt},{key:"$expr",parse:SVt},{key:"$field",parse:AVt},{key:"$encode",parse:IVt},{key:"$compare",parse:CVt},{key:"$context",parse:kVt},{key:"$subflow",parse:RVt},{key:"$tupleid",parse:NVt}];function xVt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function SVt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=tl(t.parameterExpression(e.$expr),e.$fields))}function TVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=tZ(e.$key,e.$flat,t.expr.codegen))}function AVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Ac(e.$field,e.$name,t.expr.codegen))}function CVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ht(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=ZJ(r,e.$order,t.expr.codegen))}function IVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=tl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function kVt(e,t){return t}function RVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function NVt(){return Mt}function PVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function DVt(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const OVt={skip:!0};function $Vt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function MVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],OVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Cc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function iLe(e,t,n,r){return new sLe(e,t,n,r)}function sLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||bVt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Kpe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}sLe.prototype=Kpe.prototype={fork(){const e=new Kpe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),yVt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[$te(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:hVt,parseOperator:_Vt,parseOperatorParameters:wVt,parseParameters:EVt,parseStream:PVt,parseUpdate:DVt,getState:$Vt,setState:MVt};function LVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),oLe(t,e.description()))}function oLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function FVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const OB="default";function jVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:OB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?pt(i)?i:i.user:OB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return pt(r)||(i=r.item,r=r.user),fH(e,r&&r!==OB?r:i||r),i},{cursor:t})}function fH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function K$(e,t){var n=e._runtime.data;return Ft(n,t)||Me("Unrecognized data set: "+t),n[t]}function BVt(e,t){return arguments.length<2?K$(this,e).values.value:u4.call(this,e,Ob().remove(Cc).insert(t))}function u4(e,t){COe(t)||Me("Second argument to changes must be a changeset.");const n=K$(this,e);return n.modified=!0,this.pulse(n.input,t)}function UVt(e,t){return u4.call(this,e,Ob().insert(t))}function zVt(e,t){return u4.call(this,e,Ob().remove(t))}function aLe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function uLe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function l4(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function VVt(e){var t=l4(e),n=aLe(e),r=uLe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function HVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=l4(e),o=t.changedTouches?t.changedTouches[0]:t,s=e4(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=qVt(e,n,s),t}function qVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ba(e),item:ba(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Xpe="view",WVt="timer",GVt="window",YVt={trap:!1};function KVt(e){const t=yn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Fe(r[s])&&(r[s]=Hf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function lLe(e,t,n,r){e._eventListeners.push({type:n,sources:ht(t),handler:r})}function XVt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function tP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function QVt(e,t,n){var r=this,i=new OF(n),s=function(l,c){r.runAsync(null,()=>{e===Xpe&&XVt(r,t)&&l.preventDefault(),i.receive(HVt(r,l,c))})},o;if(e===WVt)tP(r,"timer",t)&&r.timer(s,t);else if(e===Xpe)tP(r,"view",t)&&r.addEventListener(t,s,YVt);else if(e===GVt?tP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&tP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);lLe(r,o,t,s)}return i}function Qpe(e){return e.item}function Jpe(e){return e.item.mark.source}function Zpe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function JVt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Qpe),Jpe,Zpe(e)),this.on(this.events("view","pointerout",Qpe),Jpe,Zpe(t)),this}function ZVt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Tl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const eHt="vega-bind",tHt="vega-bind-name",nHt="vega-bind-radio";function rHt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=eZ(r.debounce,i.update))),(r.input==null&&r.element?iHt:oHt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function iHt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),lLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(sHt(i))}}function sHt(e){return typeof Event<"u"?new Event(e):{type:e}}function oHt(e,t,n,r){const i=r.signal(n.signal),s=Tl("div",{class:eHt}),o=n.input==="radio"?s:s.appendChild(Tl("label"));o.appendChild(Tl("span",{class:tHt},n.name||n.signal)),t.appendChild(s);let a=aHt;switch(n.input){case"checkbox":a=uHt;break;case"select":a=lHt;break;case"radio":a=cHt;break;case"range":a=fHt;break}a(e,o,n,i)}function aHt(e,t,n,r){const i=Tl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function uHt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Tl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function lHt(e,t,n,r){const i=Tl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};X$(o,r)&&(u.selected=!0),i.appendChild(Tl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(X$(n.options[a],o)){i.selectedIndex=a;return}}}function cHt(e,t,n,r){const i=Tl("span",{class:nHt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};X$(o,r)&&(u.checked=!0);const l=Tl("input",u);l.addEventListener("change",()=>e.update(o));const c=Tl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)X$(a[l].value,o)&&(a[l].checked=!0)}}function fHt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||M0(s,i,100),a=Tl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Tl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function X$(e,t){return e===t||e+""==t+""}function cLe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,aLe(e),uLe(e),l4(e),i,s).background(e.background())}function Mte(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function dHt(e,t,n,r){const i=new r(e.loader(),Mte(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,l4(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function hHt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=t4(r);e=n._el=e?$B(n,e,!0):null,LVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||Kk,a=e?s.renderer:s.headless;return n._renderer=a?cLe(n,n._renderer,e,a):null,n._handler=dHt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=$B(n,t,!0):e.appendChild(Tl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=$B(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{rHt(n,u.element||t,u)})),n}function $B(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const kT=e=>+e||0,pHt=e=>({top:e,bottom:e,left:e,right:e});function eme(e){return mt(e)?{top:kT(e.top),bottom:kT(e.bottom),left:kT(e.left),right:kT(e.right)}:pHt(kT(e))}async function Lte(e,t,n,r){const i=t4(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),cLe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function mHt(e,t){e!==Jg.Canvas&&e!==Jg.SVG&&e!==Jg.PNG&&Me("Unrecognized image type: "+e);const n=await Lte(this,e,t);return e===Jg.SVG?gHt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function gHt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function yHt(e,t){return(await Lte(this,Jg.Canvas,e,t)).canvas()}async function vHt(e){return(await Lte(this,Jg.SVG,e)).svg()}function bHt(e,t,n){return iLe(e,qE,aI,n).parse(t)}function _Ht(e){var t=this._runtime.scales;return Ft(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var fLe="width",dLe="height",Fte="padding",tme={skip:!0};function hLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Fte?r.left+r.right:0)}function pLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Fte?r.top+r.bottom:0)}function wHt(e){var t=e._signals,n=t[fLe],r=t[dLe],i=t[Fte];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=hLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=pLe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function EHt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(fLe,n,tme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(dLe,r,tme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function xHt(e){return this._runtime.getState(e||{data:SHt,signals:THt,recurse:!0})}function SHt(e,t){return t.modified&&Fe(t.input.value)&&!e.startsWith("_:vega:_")}function THt(e,t){return!(e==="parent"||t instanceof qE.proxy)}function AHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function CHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Jat(n,t))}function IHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",kHt(r))}function kHt(e){return e==null?"":Fe(e)?mLe(e):mt(e)&&!x0(e)?RHt(e):e+""}function RHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Fe(n)?mLe(n):gLe(n))}).join(`
`)}function mLe(e){return"["+e.map(gLe).join(", ")+"]"}function gLe(e){return Fe(e)?"[…]":mt(e)&&!x0(e)?"{…}":e}function NHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function yLe(e,t){const n=this;if(t=t||{},zw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=yn({},e.locale,t.locale);n.locale(yOe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Jg.Canvas,n._scenegraph=new f$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||IHt,n._redraw=!0,n._handler=new Kk().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=KVt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=bHt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:yn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=hLe(n,n._width),n._viewHeight=pLe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,wHt(n),FVt(n),jVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function nP(e,t){return Ft(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+rt(t))}function vLe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function nme(e,t,n,r){let i=vLe(n,r);return i||(i=Mte(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function rme(e,t,n){const r=vLe(t,n);return r&&t._targets.remove(r),e}lt(yLe,zw,{async evaluate(e,t,n){if(await zw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,VVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&mD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&oLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=nP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",eme(e)):eme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(t4(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(zw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(nP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:EHt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Mte(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return nme(this,e,nP(this,e),t)},removeSignalListener(e,t){return rme(this,nP(this,e),t)},addDataListener(e,t){return nme(this,e,K$(this,e).values,t)},removeDataListener(e,t){return rme(this,K$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=fH(this,null);this._globalCursor=!!e,t&&fH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:CHt,events:QVt,finalize:ZVt,hover:JVt,data:BVt,change:u4,insert:UVt,remove:zVt,scale:_Ht,initialize:hHt,toImageURL:mHt,toCanvas:yHt,toSVG:vHt,getState:xHt,setState:AHt,_watchPixelRatio:NHt});const PHt="view",Q$="[",J$="]",bLe="{",_Le="}",DHt=":",wLe=",",OHt="@",$Ht=">",MHt=/[[\]{}]/,LHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let ELe,xLe;function By(e,t,n){return ELe=t||PHt,xLe=n||LHt,SLe(e.trim()).map(dH)}function FHt(e){return xLe[e]}function TC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function SLe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=TC(e,i,wLe,Q$+bLe,J$+_Le),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function dH(e){return e[0]==="["?jHt(e):BHt(e)}function jHt(e){const t=e.length;let n=1,r;if(n=TC(e,n,J$,Q$,J$),n===t)throw"Empty between selector: "+e;if(r=SLe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==$Ht)throw"Expected '>' after between selector: "+e;r=r.map(dH);const i=dH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function BHt(e){const t={source:ELe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===_Le){if(a=e.lastIndexOf(bLe),a>=0){try{r=UHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===OHt&&(i=++a),u=TC(e,a,DHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=TC(e,a,Q$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=TC(e,a,J$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==Q$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||MHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):FHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function UHt(e){const t=e.split(wLe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function zHt(e){return mt(e)?e:{type:e||"pad"}}const RT=e=>+e||0,VHt=e=>({top:e,bottom:e,left:e,right:e});function HHt(e){return mt(e)?e.signal?e:{top:RT(e.top),bottom:RT(e.bottom),left:RT(e.left),right:RT(e.right)}:VHt(RT(e))}const ro=e=>mt(e)&&!Fe(e)?yn({},e):{value:e};function ime(e,t,n,r){return n!=null?(mt(n)&&!Fe(n)||Fe(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function $o(e,t,n){for(const r in t)ime(e,r,t[r]);for(const r in n)ime(e,r,n[r],"update")}function SS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=yn(e[r]||{},t[r]));return e}function M_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const jte="mark",Bte="frame",Ute="scope",qHt="axis",WHt="axis-domain",GHt="axis-grid",YHt="axis-label",KHt="axis-tick",XHt="axis-title",QHt="legend",JHt="legend-band",ZHt="legend-entry",eqt="legend-gradient",TLe="legend-label",tqt="legend-symbol",nqt="legend-title",rqt="title",iqt="title-text",sqt="title-subtitle";function oqt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!M_(u,e)&&MB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Bte?i.group:n===jte?yn({},i.mark,i[t]):null;for(u in c)l=M_(u,e)||(u==="fill"||u==="stroke")&&(M_("fill",e)||M_("stroke",e)),l||MB(s,u,c[u]);ht(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)M_(h,e)||MB(s,h,d[h])}),e=yn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=yn(o,e.enter),a&&(e.update=yn(a,e.update)),e}function MB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const ALe=e=>pt(e)?rt(e):e.signal?`(${e.signal})`:CLe(e);function c4(e){if(e.gradient!=null)return uqt(e);let t=e.signal?`(${e.signal})`:e.color?aqt(e.color):e.field!=null?CLe(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=lqt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${kD(e.exponent)})`),e.mult!=null&&(t+=`*${kD(e.mult)}`),e.offset!=null&&(t+=`+${kD(e.offset)}`),e.round&&(t=`round(${t})`),t}const rP=(e,t,n,r)=>`(${e}(${[t,n,r].map(c4).join(",")})+'')`;function aqt(e){return e.c?rP("hcl",e.h,e.c,e.l):e.h||e.s?rP("hsl",e.h,e.s,e.l):e.l||e.a?rP("lab",e.l,e.a,e.b):e.r||e.g||e.b?rP("rgb",e.r,e.g,e.b):null}function uqt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(ALe(e.gradient)),`gradient(${t.join(",")})`}function kD(e){return mt(e)?"("+c4(e)+")":e}function CLe(e){return ILe(mt(e)?e:{datum:e})}function ILe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+rt(e));return e.signal||(r=pt(r)?Gh(r).map(rt).join("]["):ILe(r)),t+"["+r+"]"}function lqt(e,t){const n=ALe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+kD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function cqt(e){let t="";return e.forEach(n=>{const r=c4(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function kLe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=oqt(e,t,n,r,i.config);for(const a in e)o[a]=fqt(e[a],t,s,i);return s}function fqt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=hqt(dqt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function dqt(e){return Fe(e)?cqt(e):c4(e)}function hqt(e,t,n,r){const i=Ih(e,t);return i.$fields.forEach(s=>r[s]=1),yn(n,i.$params),i.$expr}const pqt="outer",mqt=["value","update","init","react","bind"];function sme(e,t){Me(e+' for "outer" push: '+rt(t))}function RLe(e,t){const n=e.name;if(e.push===pqt)t.signals[n]||sme("No prior signal definition",n),mqt.forEach(r=>{e[r]!==void 0&&sme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function hH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function f4(e,t,n,r){return new hH(e,t,n,r)}function Z$(e,t){return f4("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function uI(e,t){return t?{$field:e,$name:t}:{$field:e}}const pH=uI("key");function ome(e,t){return{$compare:e,$order:t}}function gqt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const yqt="ascending",vqt="descending";function bqt(e){return mt(e)?(e.order===vqt?"-":"+")+d4(e.op,e.field):""}function d4(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const zte="scope",mH="view";function Os(e){return e&&e.signal}function _qt(e){return e&&e.expr}function RD(e){if(Os(e))return!0;if(mt(e)){for(const t in e)if(RD(e[t]))return!0}return!1}function lf(e,t){return e??t}function vv(e){return e&&e.signal||e}const ame="timer";function lI(e,t){return(e.merge?Eqt:e.stream?xqt:e.type?Sqt:Me("Invalid stream specification: "+rt(e)))(e,t)}function wqt(e){return e===zte?mH:e||mH}function Eqt(e,t){const n=e.merge.map(i=>lI(i,t)),r=Vte({merge:n},e,t);return t.addStream(r).id}function xqt(e,t){const n=lI(e.stream,t),r=Vte({stream:n},e,t);return t.addStream(r).id}function Sqt(e,t){let n;e.type===ame?(n=t.event(ame,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(wqt(e.source),e.type);const r=Vte({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Vte(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[lI(r[0],n),lI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Tqt(t.marktype,t.markname,t.markrole)),t.source===zte&&r.push("inScope(event.item)"),r.length&&(e.filter=Ih("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Tqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Aqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Cqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),pt(s)&&(s=By(s,t.isSubscope()?zte:mH)),s=ht(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[kqt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=pt(o)?Ih(o,t):o.expr!=null?Ih(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Aqt,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(yn(Iqt(u,t),i)))}function Iqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):lI(e,t)}}function kqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Rqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Ih(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Cqt(i,t,n.id))}const Ur=e=>(t,n,r)=>f4(e,n,t||void 0,r),NLe=Ur("aggregate"),Nqt=Ur("axisticks"),PLe=Ur("bound"),nd=Ur("collect"),ume=Ur("compare"),Pqt=Ur("datajoin"),DLe=Ur("encode"),Dqt=Ur("expression"),Oqt=Ur("facet"),$qt=Ur("field"),Mqt=Ur("key"),Lqt=Ur("legendentries"),Fqt=Ur("load"),jqt=Ur("mark"),Bqt=Ur("multiextent"),Uqt=Ur("multivalues"),zqt=Ur("overlap"),Vqt=Ur("params"),OLe=Ur("prefacet"),Hqt=Ur("projection"),qqt=Ur("proxy"),Wqt=Ur("relay"),$Le=Ur("render"),Gqt=Ur("scale"),Lb=Ur("sieve"),Yqt=Ur("sortitems"),MLe=Ur("viewlayout"),Kqt=Ur("values");let Xqt=0;const LLe={min:"min",max:"max",count:"sum"};function Qqt(e,t){const n=e.type||"linear";x3e(n)||Me("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function Jqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=FLe(e.domain,e,t),e.range!=null&&(n.range=BLe(e,t,n)),e.interpolate!=null&&uWt(e.interpolate,n),e.nice!=null&&(n.nice=aWt(e.nice,t)),e.bins!=null&&(n.bins=oWt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=pc(e[r],t))}function pc(e,t){return mt(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+rt(e)):e}function ND(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>pc(n,t))}function h4(e){Me("Can not find data set: "+rt(e))}function FLe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Fe(e)?Zqt:e.fields?tWt:eWt)(e,t,n)}function Zqt(e,t,n){return e.map(r=>pc(r,n))}function eWt(e,t,n){const r=n.getData(e.data);return r||h4(e.data),YE(t.type)?r.valuesRef(n,e.field,jLe(e.sort,!1)):A3e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function tWt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=pt(o)?{data:r,field:o}:Fe(o)||o.signal?nWt(o,n):o,s.push(o),s),[]);return(YE(t.type)?rWt:A3e(t.type)?iWt:sWt)(e,n,i)}function nWt(e,t){const n="_:vega:_"+Xqt++,r=nd({});if(Fe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Lb({})]),{data:n,field:"data"}}function rWt(e,t,n){const r=jLe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||h4(l.data),c.countsRef(t,l.field,r)}),a={groupby:pH,pulse:o};r&&(i=r.op||"count",s=r.field?d4(i,r.field):"count",a.ops=[LLe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(NLe(a));const u=t.add(nd({pulse:$t(i)}));return s=t.add(Kqt({field:pH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function jLe(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!LLe[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function iWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||h4(i.data),s.domainRef(t,i.field)});return $t(t.add(Uqt({values:r})))}function sWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||h4(i.data),s.extentRef(t,i.field)});return $t(t.add(Bqt({extents:r})))}function oWt(e,t){return e.signal||Fe(e)?ND(e,t):t.objectProperty(e)}function aWt(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:pc(e.interval),step:pc(e.step)}:pc(e)}function uWt(e,t){t.interpolate=pc(e.type||e),e.gamma!=null&&(t.interpolateGamma=pc(e.gamma))}function BLe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(pt(i)){if(r&&Ft(r,i))return e=yn({},e,{range:r[i]}),BLe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=YE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=Fe(i.scheme)?ND(i.scheme,t):pc(i.scheme,t),i.extent&&(n.schemeExtent=ND(i.extent,t)),i.count&&(n.schemeCount=pc(i.count,t));return}else if(i.step){n.rangeStep=pc(i.step,t);return}else{if(YE(e.type)&&!Fe(i))return FLe(i,e,t);Fe(i)||Me("Unsupported range type: "+rt(i))}return i.map(s=>(Fe(s)?ND:pc)(s,t))}function lWt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=gH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=gH(n[i],i,t));t.addProjection(e.name,r)}function gH(e,t,n){return Fe(e)?e.map(r=>gH(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+rt(e)):e}const rd="top",TS="left",AS="right",ay="bottom",ULe="center",cWt="vertical",fWt="start",dWt="middle",hWt="end",yH="index",Hte="label",pWt="offset",ZE="perc",mWt="perc2",vc="value",eR="guide-label",qte="guide-title",gWt="group-title",yWt="group-subtitle",lme="symbol",PD="gradient",vH="discrete",bH="size",vWt="shape",bWt="fill",_Wt="stroke",wWt="strokeWidth",EWt="strokeDash",xWt="opacity",Wte=[bH,vWt,bWt,_Wt,wWt,EWt,xWt],tR={name:1,style:1,interactive:1},tr={value:0},bc={value:1},p4="group",zLe="rect",Gte="rule",SWt="symbol",Fb="text";function cI(e){return e.type=p4,e.interactive=e.interactive||!1,e}function nl(e,t){const n=(r,i)=>lf(e[r],lf(t[r],i));return n.isVertical=r=>cWt===lf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>lf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>lf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>lf(e.columns,lf(t.columns,+n.isVertical(!0))),n}function VLe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function TWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function m4(e,t,n){return`item.anchor === '${fWt}' ? ${e} : item.anchor === '${hWt}' ? ${t} : ${n}`}const Yte=m4(rt(TS),rt(AS),rt(ULe));function AWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function HLe(e,t){return t?e?mt(e)?Object.assign({},e,{offset:HLe(e.offset,t)}):{value:e,offset:t}:t:e}function jl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=SS(e.encode,t,tR)):e.interactive=!1,e}function CWt(e,t,n,r){const i=nl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:ro(f),height:ro(d)},update:yn({},u,{opacity:bc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return $o(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),jl({type:zLe,role:eqt,encode:h},r)}function IWt(e,t,n,r,i){const s=nl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:vc}};p[l]={signal:h+"datum."+ZE,mult:u},p[c]=tr,p[f]={signal:h+"datum."+mWt,mult:u},p[d]=ro(a);const m={enter:p,update:yn({},p,{opacity:bc}),exit:{opacity:tr}};return $o(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),jl({type:zLe,role:JHt,key:vc,from:i,encode:m},r)}const kWt=`datum.${ZE}<=0?"${TS}":datum.${ZE}>=1?"${AS}":"${ULe}"`,RWt=`datum.${ZE}<=0?"${ay}":datum.${ZE}>=1?"${rd}":"${dWt}"`;function cme(e,t,n,r){const i=nl(e,t),s=i.isVertical(),o=ro(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:bc,text:{field:Hte}},exit:{opacity:tr}};return $o(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:lf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:RWt},f="y",d="x",h="1-"):(l.align=c.align={signal:kWt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+ZE,mult:a},l[d]=c[d]=o,o.offset=lf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+yH}:void 0,jl({type:Fb,role:TLe,style:eR,key:vc,from:r,encode:p,overlap:u},n)}function NWt(e,t,n,r,i){const s=nl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${pWt} : datum.${bH}`,h=l?ro(l):{field:bH},p=`datum.${yH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:bc,x:y.x,y:y.y},exit:{opacity:tr}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),$o(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Wte.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:vc})});const T=jl({type:SWt,role:tqt,key:vc,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=ro(c);A.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:A},y:h},update:v={opacity:bc,text:{field:Hte},x:y.x,y:y.y},exit:{opacity:tr}},$o(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=jl({type:Fb,role:TLe,style:eR,key:vc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?ro(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:bc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:yH}},cI({role:Ute,from:r,encode:SS(g,o,tR),marks:[T,C],name:u,interactive:a,sort:w})}function PWt(e,t){const n=nl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Kte='item.orient === "left"',Xte='item.orient === "right"',g4=`(${Kte} || ${Xte})`,DWt=`datum.vgrad && ${g4}`,OWt=m4('"top"','"bottom"','"middle"'),$Wt=m4('"right"','"left"','"center"'),MWt=`datum.vgrad && ${Xte} ? (${$Wt}) : (${g4} && !(datum.vgrad && ${Kte})) ? "left" : ${Yte}`,LWt=`item._anchor || (${g4} ? "middle" : "start")`,FWt=`${DWt} ? (${Kte} ? -90 : 90) : 0`,jWt=`${g4} ? (datum.vgrad ? (${Xte} ? "bottom" : "top") : ${OWt}) : "top"`;function BWt(e,t,n,r){const i=nl(e,t),s={enter:{opacity:tr},update:{opacity:bc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return $o(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:LWt},angle:{signal:FWt},align:{signal:MWt},baseline:{signal:jWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),jl({type:Fb,role:nqt,style:qte,from:r,encode:s},n)}function UWt(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+fme(e.path)+")":e.sphere&&(n="geoShape("+fme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function fme(e){return mt(e)&&e.signal?e.signal:rt(e)}function qLe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===p4?Ute:t||jte}function zWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||qLe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function VWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Qte(e,t){const n=ROe(e.type);n||Me("Unrecognized transform type: "+rt(e.type));const r=f4(n.type.toLowerCase(),null,WLe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function WLe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=HWt(o,t,n)}return r}function HWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return qWt(e,t,n);if(i===void 0){e.required&&Me("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return WWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Os(i)?i.map(s=>dme(e,s,n)):dme(e,i,n)}function dme(e,t,n){const r=e.type;if(Os(t))return pme(r)?Me("Expression references can not be signals."):LB(r)?n.fieldRef(t):mme(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||LB(r);return i&&GWt(t)?n.exprRef(t.expr,t.as):i&&YWt(t)?uI(t.field,t.as):pme(r)?Ih(t,n):KWt(r)?$t(n.getData(t).values):LB(r)?uI(t):mme(r)?n.compareRef(t):t}}function qWt(e,t,n){return pt(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function WWt(e,t,n){const r=t[e.name];return e.array?(Fe(r)||Me("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>hme(e,i,n))):hme(e,r,n)}function hme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+rt(t));const s=yn(WLe(i,t,n),i.key);return $t(n.add(Vqt(s)))}const GWt=e=>e&&e.expr,YWt=e=>e&&e.field,KWt=e=>e==="data",pme=e=>e==="expr",LB=e=>e==="field",mme=e=>e==="compare";function XWt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=DD(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=Qte(yn({type:"aggregate",groupby:ht(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=DD(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(nd(null,[{}]))),o||(o=DD(e,n)),{key:i,pulse:o,parent:a}}function DD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function rb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}rb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new rb(e,s,i,r,o)};function GLe(e){return pt(e)?e:null}function gme(e,t,n){const r=d4(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function NT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=bqt(s);let l=GLe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:pH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(f4(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}rb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=GLe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&gme(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&gme(e,u,n),a=e.add(NLe(u)),o=e.add(nd({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return NT(e,this,"extent","extent",t,!1)},domainRef(e,t){return NT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return NT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return NT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return NT(e,this,"indata","tupleindex",t,!0,!0)}};function QWt(e,t,n){const r=e.from.facet,i=r.name,s=DD(r,t);let o;r.name||Me("Facet must have a name: "+rt(r)),r.data||Me("Facet must reference a data set: "+rt(r)),r.field?o=t.add(OLe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Oqt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(nd()),l=a.add(Lb({pulse:$t(u)}));a.addData(i,new rb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function JWt(e,t,n){const r=t.add(OLe({pulse:n.pulse})),i=t.fork();i.add(Lb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function YLe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(Z$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Ih(l,t);u.update=c.$expr,u.params=c.$params}function y4(e,t){const n=qLe(e),r=e.type===p4,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Ute||n===Bte,a,u,l,c,f,d,h;const p=n===jte||o||i,m=XWt(e.from,r,t);u=t.add(Pqt({key:m.key||(e.key?uI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(nd({pulse:g})),u=t.add(jqt({markdef:zWt(e),interactive:VWt(e.interactive,t),clip:UWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(DLe(kLe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=Qte(S,t),A=T.metadata;(A.generates||A.changes)&&Me("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),T.params.pulse=$t(u),t.add(u=T)}),e.sort&&(u=t.add(Yqt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(MLe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(PLe({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?QWt(e,t,m):p?JWt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=ZWt(s,h,t));const w=t.add($Le({pulse:h})),E=t.add(Lb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new rb(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Me("Marks only support modify triggers."),YLe(S,t,f)}))}function ZWt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Os(s)?n.signalRef(s.signal):s,method:Os(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Os(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(zqt(o)))}function eGt(e,t){const n=t.config.legend,r=e.encode||{},i=nl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Wte.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=tGt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(nd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(Lqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===PD?(h=[CWt(e,c,n,r.gradient),cme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${vv(i.gradientLength())})/100))`)):p===vH?h=[IWt(e,c,n,r.gradient,v),cme(e,n,r.labels,v)]:(f=PWt(e,n),h=[NWt(e,n,r,v,vv(f.columns))],d.size=iGt(e,t,h[0].marks)),h=[cI({role:ZHt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(BWt(e,n,r.title,g)),y4(cI({role:QHt,from:g,encode:SS(rGt(i,e,n),s,tR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function tGt(e,t){let n=e.type||lme;return!e.type&&nGt(e)===1&&(e.fill||e.stroke)&&(n=uee(t)?PD:DV(t)?vH:lme),n!==PD?n:DV(t)?vH:PD}function nGt(e){return Wte.reduce((t,n)=>t+(e[n]?1:0),0)}function rGt(e,t,n){const r={enter:{},update:{}};return $o(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function iGt(e,t,n){const r=vv(yme("size",e,n)),i=vv(yme("strokeWidth",e,n)),s=vv(sGt(n[1].encode,t,eR));return Ih(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function yme(e,t,n){return t[e]?`scale("${t[e]}",datum)`:VLe(e,n[0].encode)}function sGt(e,t,n){return VLe("fontSize",e)||TWt("fontSize",t,n)}const oGt=`item.orient==="${TS}"?-90:item.orient==="${AS}"?90:0`;function aGt(e,t){e=pt(e)?{text:e}:e;const n=nl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(nd(null,[l])));return u.push(cGt(e,n,uGt(e),c)),e.subtitle&&u.push(fGt(e,n,r.subtitle,c)),y4(cI({role:rqt,from:c,encode:lGt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function uGt(e){const t=e.encode;return t&&t.title||yn({name:e.name,interactive:e.interactive,style:e.style},t)}function lGt(e,t){const n={enter:{},update:{}};return $o(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Yte},angle:{signal:oGt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),SS(n,t,tR)}function cGt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return $o(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:Fb,role:iqt,style:gWt,from:r,encode:o},n)}function fGt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return $o(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jl({type:Fb,role:sqt,style:yWt,from:r,encode:o},n)}function dGt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Qte(r,t))}),e.on&&e.on.forEach(r=>{YLe(r,t,e.name)}),t.addDataPipeline(e.name,hGt(e,t,n))}function hGt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Os(e.values)||RD(e.format)?(r.push(vme(t,e)),r.push(i=r1())):r.push(i=r1({$ingest:e.values,$format:e.format})):e.url?RD(e.url)||RD(e.format)?(r.push(vme(t,e)),r.push(i=r1())):r.push(i=r1({$request:e.url,$format:e.format})):e.source&&(i=a=ht(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=r1()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Wqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,r1())),i||r.push(r1()),r.push(Lb({})),r}function r1(e){const t=nd({},e);return t.metadata={source:!0},t}function vme(e,t){return Fqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const KLe=e=>e===ay||e===rd,v4=(e,t,n)=>Os(e)?yGt(e.signal,t,n):e===TS||e===rd?t:n,io=(e,t,n)=>Os(e)?mGt(e.signal,t,n):KLe(e)?t:n,$f=(e,t,n)=>Os(e)?gGt(e.signal,t,n):KLe(e)?n:t,XLe=(e,t,n)=>Os(e)?vGt(e.signal,t,n):e===rd?{value:t}:{value:n},pGt=(e,t,n)=>Os(e)?bGt(e.signal,t,n):e===AS?{value:t}:{value:n},mGt=(e,t,n)=>QLe(`${e} === '${rd}' || ${e} === '${ay}'`,t,n),gGt=(e,t,n)=>QLe(`${e} !== '${rd}' && ${e} !== '${ay}'`,t,n),yGt=(e,t,n)=>Jte(`${e} === '${TS}' || ${e} === '${rd}'`,t,n),vGt=(e,t,n)=>Jte(`${e} === '${rd}'`,t,n),bGt=(e,t,n)=>Jte(`${e} === '${AS}'`,t,n),QLe=(e,t,n)=>(t=t!=null?ro(t):t,n=n!=null?ro(n):n,bme(t)&&bme(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[yn({test:e},t)].concat(n||[])),bme=e=>e==null||Object.keys(e).length===1,Jte=(e,t,n)=>({signal:`${e} ? (${uw(t)}) : (${uw(n)})`}),_Gt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${TS}' ? (${uw(r)}) : `:"")+(n!=null?`${e} === '${ay}' ? (${uw(n)}) : `:"")+(i!=null?`${e} === '${AS}' ? (${uw(i)}) : `:"")+(t!=null?`${e} === '${rd}' ? (${uw(t)}) : `:"")+"(null)"}),uw=e=>Os(e)?e.signal:e==null?null:rt(e),wGt=(e,t)=>t===0?0:Os(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Vw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function b_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[qte][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[eR][i]}return null}function _me(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function EGt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Os(o)){const f=_me([n.axisX,n.axisY]),d=_me([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=io(o,b_(l,n.axisX,i,r),b_(l,n.axisY,i,r));u={};for(l of d)u[l]=_Gt(o.signal,b_(l,n.axisTop,i,r),b_(l,n.axisBottom,i,r),b_(l,n.axisLeft,i,r),b_(l,n.axisRight,i,r))}else a=o===rd||o===ay?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?yn({},i,a,u,s):i}function xGt(e,t,n,r){const i=nl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:bc},exit:{opacity:tr}};$o(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=wme(e,0),c=wme(e,1);return o.x=a.x=io(s,l,tr),o.x2=a.x2=io(s,c),o.y=a.y=$f(s,l,tr),o.y2=a.y2=$f(s,c),jl({type:Gte,role:WHt,from:r,encode:u},n)}function wme(e,t){return{scale:e.scale,range:t}}function SGt(e,t,n,r,i){const s=nl(e,t),o=e.orient,a=e.gridScale,u=v4(o,1,-1),l=TGt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:bc},exit:f={opacity:tr}};$o(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:vc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=io(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:yn(m,{mult:u,offset:l});return c.x=d.x=io(o,p,g),c.y=d.y=$f(o,p,g),c.x2=d.x2=$f(o,y),c.y2=d.y2=io(o,y),f.x=io(o,p),f.y=$f(o,p),jl({type:Gte,role:GHt,key:vc,from:r,encode:h},n)}function TGt(e,t){if(t!==1)if(!mt(e))e=Os(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=yn({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=yn({},n.mult);else return n.mult=Os(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function AGt(e,t,n,r,i,s){const o=nl(e,t),a=e.orient,u=v4(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:bc},exit:c={opacity:tr}};$o(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ro(i);h.mult=u;const p={scale:e.scale,field:vc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=io(a,tr,p),f.y2=l.y2=io(a,h),c.x=io(a,p),f.x=l.x=$f(a,tr,p),f.x2=l.x2=$f(a,h),c.y=$f(a,p),jl({type:Gte,role:KHt,key:vc,from:r,encode:d},n)}function FB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function CGt(e,t,n,r,i,s){const o=nl(e,t),a=e.orient,u=e.scale,l=v4(a,-1,1),c=vv(o("labelFlush")),f=vv(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ro(i);g.mult=l,g.offset=ro(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:vc,band:.5,offset:HLe(s.offset,o("labelOffset"))},v=io(a,p?FB(u,c,'"left"','"right"','"center"'):{value:"center"},pGt(a,"left","right")),b=io(a,XLe(a,"bottom","top"),p?FB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=FB(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:tr,x:io(a,y,g),y:$f(a,y,g)},S={enter:E,update:m={opacity:bc,text:{field:Hte},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:tr,x:E.x,y:E.y}};$o(S,{dx:!d&&p?io(a,w):null,dy:!h&&p?$f(a,w):null}),$o(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let A=o("labelOverlap");return A=A||T?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=Vw(m.align,v)),m.baseline!==b&&(m.baseline=Vw(m.baseline,b)),jl({type:Fb,role:YHt,style:eR,key:vc,from:r,encode:S,overlap:A},n)}function IGt(e,t,n,r){const i=nl(e,t),s=e.orient,o=v4(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:ro(i("titleAnchor",null)),align:{signal:Yte}},update:u=yn({},a,{opacity:bc,text:ro(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${m4(0,1,.5)})`};return u.x=io(s,c),u.y=$f(s,c),a.angle=io(s,tr,wGt(o,90)),a.baseline=io(s,XLe(s,ay,rd),{value:ay}),u.angle=a.angle,u.baseline=a.baseline,$o(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),kGt(i,s,l,n),l.update.align=Vw(l.update.align,a.align),l.update.angle=Vw(l.update.angle,a.angle),l.update.baseline=Vw(l.update.baseline,a.baseline),jl({type:Fb,role:XHt,style:qte,from:r,encode:l},n)}function kGt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Vw(ro(a),n.update[u]),!1):!M_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ro(o):io(t,ro(o),ro(s))}function RGt(e,t){const n=EGt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=nl(e,n),l=AWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(nd({},[c]))),d=$t(t.add(Nqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(SGt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(AGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(CGt(e,n,r.labels,d,p,l))),c.domain&&h.push(xGt(e,n,r.domain,f)),c.title&&h.push(IGt(e,n,r.title,f)),y4(cI({role:qHt,from:f,encode:SS(NGt(u,e),i,tR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function NGt(e,t){const n={enter:{},update:{}};return $o(n,{orient:e("orient"),offset:e("offset")||0,position:lf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function JLe(e,t,n){const r=ht(e.signals),i=ht(e.scales);return n||r.forEach(s=>RLe(s,t)),ht(e.projections).forEach(s=>lWt(s,t)),i.forEach(s=>Qqt(s,t)),ht(e.data).forEach(s=>dGt(s,t)),i.forEach(s=>Jqt(s,t)),(n||r).forEach(s=>Rqt(s,t)),ht(e.axes).forEach(s=>RGt(s,t)),ht(e.marks).forEach(s=>y4(s,t)),ht(e.legends).forEach(s=>eGt(s,t)),e.title&&aGt(e.title,t),t.parseLambdas(),t}const PGt=e=>SS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function DGt(e,t){const n=t.config,r=$t(t.root=t.add(Z$())),i=OGt(e,n);i.forEach(l=>RLe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(nd()),o=t.add(DLe(kLe(PGt(e.encode),p4,Bte,e.style,t,{pulse:$t(s)}))),a=t.add(MLe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),JLe(e,t,i),t.operators.push(a);let u=t.add(PLe({mark:r,pulse:$t(a)}));return u=t.add($Le({pulse:$t(u)})),u=t.add(Lb({pulse:$t(u)})),t.addData("root",new rb(t,s,s,u)),t}function PT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function OGt(e,t){const n=o=>lf(e[o],t[o]),r=[PT("background",n("background")),PT("autosize",zHt(n("autosize"))),PT("padding",HHt(n("padding"))),PT("width",n("width")||0),PT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ht(e.signals).forEach(o=>{Ft(i,o.name)?o=yn(i[o.name],o):r.push(o),s[o.name]=o}),ht(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function ZLe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Eme(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}ZLe.prototype=Eme.prototype={parse(e){return JLe(e,this)},fork(){return new Eme(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof hH?$t(e):e;return this.add(qqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Lb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(pt(e))return uI(e,t);e.signal||Me("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add($qt(i)))}return r},compareRef(e){let t=!1;const n=s=>Os(s)?(t=!0,this.signalRef(s.signal)):_qt(s)?(t=!0,this.exprRef(s.expr)):s,r=ht(e.field).map(n),i=ht(e.order).map(n);return t?$t(this.add(ume({fields:r,orders:i}))):ome(r,i)},keyRef(e,t){let n=!1;const r=s=>Os(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=ht(e).map(r),n?$t(this.add(Mqt({fields:e,flat:t}))):gqt(e,t)},sortRef(e){if(!e)return e;const t=d4(e.op,e.field),n=e.order||yqt;return n.signal?$t(this.add(ume({fields:t,orders:this.signalRef(n.signal)}))):ome(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+rt(e));const n=t instanceof hH?t:this.add(Z$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(Z$(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Ih(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||Zte(e))},exprRef(e,t){const n={expr:Ih(e,this)};return t&&(n.expr.$name=t),$t(this.add(Dqt(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+rt(e)),this.bindings.push(yn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Me("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Gqt(t))},addProjection(e,t){this.addScaleProj(e,Hqt(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+rt(e)),this.addData(e,rb.fromEntries(this,t))}};function Zte(e){return(Fe(e)?$Gt:MGt)(e)}function $Gt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||Zte(i):rt(i))}return n+"]"}function MGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(mt(i)?i.signal||Zte(i):rt(i));return t+"}"}function LGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function FGt(e,t,n){return mt(e)||Me("Input Vega specification must be an object."),t=gS(LGt(),t,e.config),DGt(e,new ZLe(t,n)).toRuntime()}var jGt="5.29.0";yn(qE,F4t,ABt,i9t,$9t,z9t,mUt,Y9t,yUt,wUt,NUt,FUt);const BGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:_s,CanvasHandler:Kk,CanvasRenderer:U$,DATE:Ku,DAY:aa,DAYOFYEAR:Ch,Dataflow:zw,Debug:SDe,Error:GJ,EventStream:OF,Gradient:U3e,GroupItem:GF,HOURS:Ml,Handler:Dee,HybridHandler:P$e,HybridRenderer:HV,Info:xDe,Item:WF,MILLISECONDS:qf,MINUTES:Ll,MONTH:da,Marks:Fl,MultiPulse:hZ,None:EDe,Operator:Gr,Parameters:DF,Pulse:S0,QUARTER:Yu,RenderType:Jg,Renderer:Yk,ResourceLoader:Y3e,SECONDS:Ic,SVGHandler:b$e,SVGRenderer:jee,SVGStringRenderer:N$e,Scenegraph:f$e,TIME_UNITS:sZ,Transform:Pe,View:yLe,WEEK:ks,Warn:YJ,YEAR:Ro,accessor:tl,accessorFields:fa,accessorName:Yi,array:ht,ascending:CF,bandwidthNRD:yZ,bin:DOe,bootstrapCI:OOe,boundClip:z$e,boundContext:Hk,boundItem:jV,boundMark:a$e,boundStroke:eg,changeset:Ob,clampRange:$De,codegenExpression:HMe,compare:ZJ,constant:ba,cumulativeLogNormal:xZ,cumulativeNormal:MF,cumulativeUniform:CZ,dayofyear:GDe,debounce:eZ,defaultLocale:uZ,definition:ROe,densityLogNormal:EZ,densityNormal:vZ,densityUniform:AZ,domChild:Cs,domClear:uc,domCreate:Xg,domFind:Pee,dotbin:$Oe,error:Me,expressionFunction:fs,extend:yn,extent:Ah,extentIndex:MDe,falsy:_g,fastmap:vS,field:Ac,flush:LDe,font:JF,fontFamily:Gk,fontSize:Yh,format:pD,formatLocale:I$,formats:fZ,hasOwnProperty:Ft,id:Pk,identity:va,inferType:bOe,inferTypes:_Oe,ingest:wr,inherits:lt,inrange:sw,interpolate:lee,interpolateColors:HF,interpolateRange:C3e,intersect:F$e,intersectBoxLine:ow,intersectPath:yee,intersectPoint:vee,intersectRule:X3e,isArray:Fe,isBoolean:Fy,isDate:x0,isFunction:bn,isIterable:FDe,isNumber:lr,isObject:mt,isRegExp:jDe,isString:pt,isTuple:NF,key:tZ,lerp:BDe,lineHeight:iy,loader:kF,locale:yOe,logger:KJ,lruCache:UDe,markup:Fee,merge:zDe,mergeConfig:gS,multiLineOffset:kee,one:mS,pad:VDe,panLinear:kDe,panLog:RDe,panPow:NDe,panSymlog:PDe,parse:FGt,parseExpression:Ate,parseSelector:By,path:zL,pathCurves:pee,pathEqual:V$e,pathParse:KE,pathRectangle:H3e,pathRender:eI,pathSymbols:V3e,pathTrail:q3e,peek:Qn,point:e4,projection:Qee,quantileLogNormal:SZ,quantileNormal:LF,quantileUniform:IZ,quantiles:mZ,quantizeInterpolator:I3e,quarter:DDe,quartiles:gZ,get random(){return kc},randomInteger:zFt,randomKDE:_Z,randomLCG:UFt,randomLogNormal:LOe,randomMixture:FOe,randomNormal:bZ,randomUniform:jOe,read:xOe,regressionConstant:kZ,regressionExp:UOe,regressionLinear:RZ,regressionLoess:HOe,regressionLog:BOe,regressionPoly:VOe,regressionPow:zOe,regressionQuad:NZ,renderModule:t4,repeat:mA,resetDefaultLocale:F6t,resetSVGClipId:G3e,resetSVGDefIds:Hjt,responseType:EOe,runtimeContext:iLe,sampleCurve:jF,sampleLogNormal:wZ,sampleNormal:$F,sampleUniform:TZ,scale:gr,sceneEqual:Bee,sceneFromJSON:l$e,scenePickVisit:D$,sceneToJSON:u$e,sceneVisit:Wf,sceneZOrder:bee,scheme:cee,serializeXML:C$e,setHybridRendererOptions:Bjt,setRandom:jFt,span:Dk,splitAccessPath:Gh,stringValue:rt,textMetrics:Sl,timeBin:cOe,timeFloor:eOe,timeFormatLocale:Q2,timeInterval:bS,timeOffset:rOe,timeSequence:oOe,timeUnitSpecifier:WDe,timeUnits:oZ,toBoolean:nZ,toDate:rZ,toNumber:ua,toSet:Hf,toString:iZ,transform:NOe,transforms:qE,truncate:HDe,truthy:Cc,tupleid:Mt,typeParsers:RV,utcFloor:tOe,utcInterval:_S,utcOffset:iOe,utcSequence:aOe,utcdayofyear:XDe,utcquarter:ODe,utcweek:QDe,version:jGt,visitArray:Ig,week:YDe,writeConfig:yS,zero:Ug,zoomLinear:XJ,zoomLog:QJ,zoomPow:C$,zoomSymlog:JJ},Symbol.toStringTag,{value:"Module"}));function UGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var zGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},VGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},HGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const qGt=Array.prototype.slice,i1=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,qGt.call(t,1))},WGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var GGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:WGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return i1("join",arguments)},indexof:function(){return i1("indexOf",arguments)},lastindexof:function(){return i1("lastIndexOf",arguments)},slice:function(){return i1("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return i1("substring",arguments,String)},split:function(){return i1("split",arguments,String)},replace:function(){return i1("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const YGt=["view","item","group","xy","x","y"],_H=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&_H.add(setImmediate);const KGt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:zGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),_H.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||GGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>VGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>HGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,_H.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function DT(e,t,n,r,i,s){const o=a=>KGt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,YGt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var XGt={operator(e,t){const n=t.ast,r=e.functions;return i=>DT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>DT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>DT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return DT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=DT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&UGt(o,r,s),l}}};const QGt="vega-lite",JGt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',ZGt="5.18.1",eYt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],tYt="https://vega.github.io/vega-lite/",nYt="Vega-Lite is a concise high-level language for interactive visualization.",rYt=["vega","chart","visualization"],iYt="build/vega-lite.js",sYt="build/vega-lite.min.js",oYt="build/vega-lite.min.js",aYt="build/src/index",uYt="build/src/index.d.ts",lYt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},cYt=["bin","build","src","vega-lite*","tsconfig.json"],fYt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},dYt={type:"git",url:"https://github.com/vega/vega-lite.git"},hYt="BSD-3-Clause",pYt={url:"https://github.com/vega/vega-lite/issues"},mYt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},gYt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},yYt={vega:"^5.24.0"},vYt={node:">=18"},bYt="yarn@1.22.19",_Yt={name:QGt,author:JGt,version:ZGt,collaborators:eYt,homepage:tYt,description:nYt,keywords:rYt,main:iYt,unpkg:sYt,jsdelivr:oYt,module:aYt,types:uYt,bin:lYt,files:cYt,scripts:fYt,repository:dYt,license:hYt,bugs:pYt,devDependencies:mYt,dependencies:gYt,peerDependencies:yYt,engines:vYt,packageManager:bYt};function ene(e){return!!e.or}function tne(e){return!!e.and}function nne(e){return!!e.not}function OD(e,t){if(nne(e))OD(e.not,t);else if(tne(e))for(const n of e.and)OD(n,t);else if(ene(e))for(const n of e.or)OD(n,t);else t(e)}function Hw(e,t){return nne(e)?{not:Hw(e.not,t)}:tne(e)?{and:e.and.map(n=>Hw(n,t))}:ene(e)?{or:e.or.map(n=>Hw(n,t))}:t(e)}const tn=structuredClone;function e6e(e){throw new Error(e)}function ex(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function ju(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fr(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=pt(e)?e:Fr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function wH(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function ib(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function rne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function t6e(e,...t){for(const n of t)wYt(e,n??{});return e}function wYt(e,t){for(const n of Ye(t))yS(e,n,t[n],!0)}function Xd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function EYt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function n6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function ine(e,t){for(const n of e)if(t.has(n))return!0;return!1}function EH(e){const t=new Set;for(const n of e){const i=Gh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function sne(e,t){return e===void 0||t===void 0?!0:ine(EH(e),EH(t))}function Lr(e){return Ye(e).length===0}const Ye=Object.keys,No=Object.values,uy=Object.entries;function fI(e){return e===!0||e===!1}function Si(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function AC(e,t){return nne(e)?`!(${AC(e.not,t)})`:tne(e)?`(${e.and.map(n=>AC(n,t)).join(") && (")})`:ene(e)?`(${e.or.map(n=>AC(n,t)).join(") || (")})`:t(e)}function eM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&eM(e[n],t)&&delete e[n],Lr(e)}function nR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function one(e,t="datum"){const n=Gh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function r6e(e,t="datum"){return`${t}[${rt(Gh(e).join("."))}]`}function xYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Rc(e){return`${Gh(e).map(xYt).join("\\.")}`}function sb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function CS(e){return`${Gh(e).join(".")}`}function tx(e){return e?Gh(e).length:0}function us(...e){for(const t of e)if(t!==void 0)return t}let i6e=42;function s6e(e){const t=++i6e;return e?String(e)+t:t}function SYt(){i6e=42}function o6e(e){return a6e(e)?e:`__${e}`}function a6e(e){return e.startsWith("__")}function dI(e){if(e!==void 0)return(e%360+360)%360}function b4(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const xme=Object.getPrototypeOf(structuredClone({}));function El(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!El(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!El(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==xme.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==xme.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!El(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const tm="row",nm="column",_4="facet",Ti="x",co="y",id="x2",Qh="y2",Uy="xOffset",IS="yOffset",sd="radius",ng="radius2",zc="theta",rg="theta2",od="latitude",ad="longitude",ud="latitude2",Nc="longitude2",Xu="color",Jh="fill",Zh="stroke",Qu="shape",ig="size",jb="angle",sg="opacity",zy="fillOpacity",Vy="strokeOpacity",Hy="strokeWidth",qy="strokeDash",rR="text",nx="order",iR="detail",w4="key",ob="tooltip",E4="href",x4="url",S4="description",TYt={x:1,y:1,x2:1,y2:1},u6e={theta:1,theta2:1,radius:1,radius2:1};function l6e(e){return e in u6e}const ane={longitude:1,longitude2:1,latitude:1,latitude2:1};function c6e(e){switch(e){case od:return"y";case ud:return"y2";case ad:return"x";case Nc:return"x2"}}function f6e(e){return e in ane}const AYt=Ye(ane),une={...TYt,...u6e,...ane,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qw(e){return e===Xu||e===Jh||e===Zh}const d6e={row:1,column:1,facet:1},mc=Ye(d6e),lne={...une,...d6e},CYt=Ye(lne),{order:ion,detail:son,tooltip:oon,...IYt}=lne,{row:aon,column:uon,facet:lon,...kYt}=IYt;function RYt(e){return!!kYt[e]}function h6e(e){return!!lne[e]}const NYt=[id,Qh,ud,Nc,rg,ng];function p6e(e){return Bb(e)!==e}function Bb(e){switch(e){case id:return Ti;case Qh:return co;case ud:return od;case Nc:return ad;case rg:return zc;case ng:return sd}return e}function ly(e){if(l6e(e))switch(e){case zc:return"startAngle";case rg:return"endAngle";case sd:return"outerRadius";case ng:return"innerRadius"}return e}function ep(e){switch(e){case Ti:return id;case co:return Qh;case od:return ud;case ad:return Nc;case zc:return rg;case sd:return ng}}function Ju(e){switch(e){case Ti:case id:return"width";case co:case Qh:return"height"}}function m6e(e){switch(e){case Ti:return"xOffset";case co:return"yOffset";case id:return"x2Offset";case Qh:return"y2Offset";case zc:return"thetaOffset";case sd:return"radiusOffset";case rg:return"theta2Offset";case ng:return"radius2Offset"}}function cne(e){switch(e){case Ti:return"xOffset";case co:return"yOffset"}}function PYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const DYt=Ye(une),{x:con,y:fon,x2:don,y2:hon,xOffset:pon,yOffset:mon,latitude:gon,longitude:yon,latitude2:von,longitude2:bon,theta:_on,theta2:won,radius:Eon,radius2:xon,...fne}=une,OYt=Ye(fne),dne={x:1,y:1},tp=Ye(dne);function ls(e){return e in dne}const hne={theta:1,radius:1},$Yt=Ye(hne);function T4(e){return e==="width"?Ti:co}const g6e={xOffset:1,yOffset:1};function sR(e){return e in g6e}const{text:Son,tooltip:Ton,href:Aon,url:Con,description:Ion,detail:kon,key:Ron,order:Non,...y6e}=fne,MYt=Ye(y6e);function LYt(e){return!!fne[e]}function FYt(e){switch(e){case Xu:case Jh:case Zh:case ig:case Qu:case sg:case Hy:case qy:return!0;case zy:case Vy:case jb:return!1}}const v6e={...dne,...hne,...g6e,...y6e},A4=Ye(v6e);function og(e){return!!v6e[e]}function jYt(e,t){return UYt(e)[t]}const b6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Pon,...BYt}=b6e;function UYt(e){switch(e){case Xu:case Jh:case Zh:case S4:case iR:case w4:case ob:case E4:case nx:case sg:case zy:case Vy:case Hy:case _4:case tm:case nm:return b6e;case Ti:case co:case Uy:case IS:case od:case ad:return BYt;case id:case Qh:case ud:case Nc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ig:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case qy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Qu:return{point:"always",geoshape:"always"};case rR:return{text:"always"};case jb:return{point:"always",square:"always",text:"always"};case x4:return{image:"always"};case zc:return{text:"always",arc:"always"};case sd:return{text:"always",arc:"always"};case rg:case ng:return{arc:"always"}}}function jB(e){switch(e){case Ti:case co:case zc:case sd:case Uy:case IS:case ig:case jb:case Hy:case sg:case zy:case Vy:case id:case Qh:case rg:case ng:return;case _4:case tm:case nm:case Qu:case qy:case rR:case ob:case E4:case x4:case S4:return"discrete";case Xu:case Jh:case Zh:return"flexible";case od:case ad:case ud:case Nc:case iR:case w4:case nx:return}}const zYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},VYt={count:1,min:1,max:1};function Om(e){return!!e&&!!e.argmin}function Wy(e){return!!e&&!!e.argmax}function pne(e){return pt(e)&&!!zYt[e]}const HYt=new Set(["count","valid","missing","distinct"]);function _6e(e){return pt(e)&&HYt.has(e)}function qYt(e){return pt(e)&&Hn(["min","max"],e)}const WYt=new Set(["count","sum","distinct","valid","missing"]),GYt=new Set(["mean","average","median","q1","q3","min","max"]);function w6e(e){return Fy(e)&&(e=F4(e,void 0)),"bin"+Ye(e).map(t=>C4(e[t])?Si(`_${t}_${uy(e[t])}`):Si(`_${t}_${e[t]}`)).join("")}function ii(e){return e===!0||Ub(e)&&!e.binned}function Eo(e){return e==="binned"||Ub(e)&&e.binned===!0}function Ub(e){return mt(e)}function C4(e){return e==null?void 0:e.param}function Sme(e){switch(e){case tm:case nm:case ig:case Xu:case Jh:case Zh:case Hy:case sg:case zy:case Vy:case Qu:return 6;case qy:return 4;default:return 10}}function oR(e){return!!(e!=null&&e.expr)}function Eu(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=ml(e[r]);return n}function E6e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=ex(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Ng(e){return pt(e)||Fe(e)&&pt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function Gy(e){return!!e.step}function YYt(e){return Fe(e)?!1:"fields"in e&&!("data"in e)}function KYt(e){return Fe(e)?!1:"fields"in e&&"data"in e}function Wp(e){return Fe(e)?!1:"field"in e&&"data"in e}const XYt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},QYt=Ye(XYt),JYt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},xH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function x6e(e){const t=Fe(e.condition)?e.condition.map(Tme):Tme(e.condition);return{...ml(e),condition:t}}function ml(e){if(oR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tme(e){if(oR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ci(e){if(oR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function ZYt(e){return Rt(e)?e.signal:rt(e)}function Ame(e){return Rt(e)?e.signal:rt(e.value)}function Sf(e){return Rt(e)?e.signal:e==null?null:rt(e)}function eKt(e,t,n){for(const r of n){const i=$m(r,t.markDef,t.config);i!==void 0&&(e[r]=ci(i))}return e}function S6e(e){return[].concat(e.type,e.style??[])}function _r(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:$m(e,t,n,r)}function $m(e,t,n,{vgChannel:r}={}){return us(r?tM(e,t,n.style):void 0,tM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function tM(e,t,n){return T6e(e,S6e(t),n)}function T6e(e,t,n){t=ht(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function A6e(e,t){return ht(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function C6e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(El(i,r))return;n.push(r)}),n}function I6e(e,t){return El(e,t)||!t?e:e?[...ht(e),...ht(t)].join(", "):t}function k6e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Ng(n)||Rt(n))&&(Ng(r)||Rt(r)))return{explicit:e.explicit,value:I6e(n,r)};if(Ng(n)||Rt(n))return{explicit:e.explicit,value:n};if(Ng(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Ng(n)&&!Rt(n)&&!Ng(r)&&!Rt(r))return{explicit:e.explicit,value:C6e(n,r)};throw new Error("It should never reach here")}function mne(e){return`Invalid specification ${Fr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const tKt='Autosize "fit" only works for single views and layered views.';function Cme(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Ime(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function kme(e){return e?`Dropping "fit-${e}" because spec has discrete ${Ju(e)}.`:'Dropping "fit" because spec has discrete size.'}function gne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Rme(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function nKt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function rKt(e){return`The "nearest" transform is not supported for ${e} marks.`}function R6e(e){return`Selection not supported for ${e} yet.`}function iKt(e){return`Cannot find a selection named "${e}".`}const sKt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",oKt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",aKt="Legend bindings are only supported for selections over an individual field or encoding channel.";function uKt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function lKt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const cKt="The same selection must be used to override scale domains in a layered view.",fKt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function dKt(e){return`Unknown repeated value "${e}".`}function Nme(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const hKt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function pKt(e){return`Unrecognized parse "${e}".`}function Pme(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const mKt="Attempt to add the same child twice.";function gKt(e){return`Ignoring an invalid transform: ${Fr(e)}.`}const yKt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Dme(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function vKt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fr(t)} is overridden by a child projection ${Fr(n)}.`}const bKt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function _Kt(e){return`${e}Offset dropped because ${e} is continuous`}function wKt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fr(n)}}.`}function N6e(e){return`Invalid field type "${e}".`}function EKt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function xKt(e){return`Invalid aggregation operator "${e}".`}function P6e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function SKt(e){return`Position range does not support relative band size for ${e}.`}function SH(e,t){return`Dropping ${Fr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const TKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function I4(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function AKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function CKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function IKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function kKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function BB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function RKt(e){return`The ${e} for range marks cannot be an expression`}function NKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function PKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function DKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function OKt(e){return`Cannot use the relative band size with ${e} scale.`}function $Kt(e){return`Using unaggregated domain with raw field has no effect (${Fr(e)}).`}function MKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function LKt(e){return`Unaggregated domain is currently unsupported for log scale (${Fr(e)}).`}function FKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function jKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function BKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function D6e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function O6e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function UKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using ${Fr(n)}.`}function zKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using the union of the two domains.`}function VKt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function HKt(e){return`Dropping sort property ${Fr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Ome="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",qKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",WKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",GKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function YKt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function KKt(e){return`Stack is applied to a non-linear scale (${e}).`}function XKt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function nM(e,t){return`Invalid ${e}: ${Fr(t)}.`}function QKt(e){return`Dropping day from datetime ${Fr(e)} as day cannot be combined with other units.`}function JKt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function ZKt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function eXt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function $me(e){return`1D error band does not support ${e}.`}function $6e(e){return`Channel ${e} is required for "binned" bin.`}function tXt(e){return`Channel ${e} should not be used with "binned" bin.`}function nXt(e){return`Domain for ${e} is required for threshold scale.`}const M6e=KJ(YJ);let rx=M6e;function rXt(e){return rx=e,rx}function iXt(){return rx=M6e,rx}function Je(...e){rx.warn(...e)}function sXt(...e){rx.debug(...e)}function zb(e){if(e&&mt(e)){for(const t of vne)if(t in e)return!0}return!1}const L6e=["january","february","march","april","may","june","july","august","september","october","november","december"],oXt=L6e.map(e=>e.substr(0,3)),F6e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],aXt=F6e.map(e=>e.substr(0,3));function uXt(e){if(b4(e)&&(e=+e),lr(e))return e>4&&Je(nM("quarter",e)),e-1;throw new Error(nM("quarter",e))}function lXt(e){if(b4(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=L6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=oXt.indexOf(r);if(i!==-1)return i;throw new Error(nM("month",e))}}function cXt(e){if(b4(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=F6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=aXt.indexOf(r);if(i!==-1)return i;throw new Error(nM("day",e))}}function yne(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Je(QKt(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?lXt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?uXt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?cXt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ab(e){const n=yne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function fXt(e){const n=yne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function dXt(e){const t=yne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const j6e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},vne=Ye(j6e);function hXt(e){return!!j6e[e]}function Vb(e){return mt(e)?e.binned:B6e(e)}function B6e(e){return e&&e.startsWith("binned")}function bne(e){return e.startsWith("utc")}function pXt(e){return e.substring(3)}const mXt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function k4(e){return vne.filter(t=>z6e(e,t))}function U6e(e){const t=k4(e);return t[t.length-1]}function z6e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function gXt(e,t,{end:n}={end:!1}){const r=one(t),i=bne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of vne)z6e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),fXt(a)}function V6e(e){if(!e)return;const t=k4(e);return`timeUnitSpecifier(${Fr(t)}, ${Fr(mXt)})`}function yXt(e,t,n){if(!e)return;const r=V6e(e);return`${n||bne(e)?"utc":"time"}Format(${t}, ${r})`}function ao(e){if(!e)return;let t;return pt(e)?B6e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),bne(t.unit)&&(t.utc=!0,t.unit=pXt(t.unit)),t}function vXt(e){const{utc:t,...n}=ao(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>Si(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>Si(`_${r}_${n[r]}`)).join("")}function H6e(e,t=n=>n){const n=ao(e),r=U6e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=q6e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(ab(a))} - ${t(ab(i))}`}}const bXt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function _Xt(e){return!!bXt[e]}function q6e(e,t=1){if(_Xt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function wXt(e){return e==null?void 0:e.param}function _ne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function wne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Ene(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function xne(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Sne(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Tne(e){if(e!=null&&e.field){if(Fe(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function Ane(e){return!!(e!=null&&e.field)&&(Fe(e.oneOf)||Fe(e.in))}function EXt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function W6e(e){return Ane(e)||_ne(e)||Tne(e)||wne(e)||xne(e)||Ene(e)||Sne(e)}function vd(e,t){return j4(e,{timeUnit:t,wrapTime:!0})}function xXt(e,t){return e.map(n=>vd(n,t))}function G6e(e,t=!0){const{field:n}=e,r=ao(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:gXt(i,n)})`:o;if(_ne(e))return`${a}===${vd(e.equal,i)}`;if(wne(e)){const u=e.lt;return`${a}<${vd(u,i)}`}else if(xne(e)){const u=e.gt;return`${a}>${vd(u,i)}`}else if(Ene(e)){const u=e.lte;return`${a}<=${vd(u,i)}`}else if(Sne(e)){const u=e.gte;return`${a}>=${vd(u,i)}`}else{if(Ane(e))return`indexof([${xXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(EXt(e))return Cne(a,e.valid);if(Tne(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+vd(l,i)+", "+vd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${vd(l,i)}`),c!==null&&f.push(`${a} <= ${vd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fr(e)}`)}function Cne(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function SXt(e){return W6e(e)&&e.timeUnit?{...e,timeUnit:ao(e.timeUnit)}:e}const aR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function TXt(e){return e==="quantitative"||e==="temporal"}function Y6e(e){return e==="ordinal"||e==="nominal"}const ub=aR.quantitative,Ine=aR.ordinal,ix=aR.temporal,kne=aR.nominal,kS=aR.geojson;function AXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ub:return"quantitative";case"t":case ix:return"temporal";case"o":case Ine:return"ordinal";case"n":case kne:return"nominal";case kS:return"geojson"}}const Bu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},TH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function CXt(e,t){const n=TH[e],r=TH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const IXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Mme(e){return IXt[e]}const K6e=new Set(["linear","log","pow","sqrt","symlog"]),X6e=new Set([...K6e,"time","utc"]);function Q6e(e){return K6e.has(e)}const J6e=new Set(["quantile","quantize","threshold"]),kXt=new Set([...X6e,...J6e,"sequential","identity"]),RXt=new Set(["ordinal","bin-ordinal","point","band"]);function uo(e){return RXt.has(e)}function Bl(e){return kXt.has(e)}function Tf(e){return X6e.has(e)}function sx(e){return J6e.has(e)}const NXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function PXt(e){return!pt(e)&&!!e.name}function Z6e(e){return e==null?void 0:e.param}function DXt(e){return e==null?void 0:e.unionWith}function OXt(e){return mt(e)&&"field"in e}const $Xt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Don,domain:Oon,range:$on,rangeMax:Mon,rangeMin:Lon,scheme:Fon,...MXt}=$Xt,LXt=Ye(MXt);function AH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Tf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Tf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Tf(e);case"nice":return Tf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Bl(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function eFe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qw(e)?void 0:DKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function FXt(e,t){return Hn([Ine,kne],t)?e===void 0||uo(e):t===ix?Hn([Bu.TIME,Bu.UTC,void 0],e):t===ub?Q6e(e)||sx(e)||e===void 0:!0}function jXt(e,t,n=!1){if(!og(e))return!1;switch(e){case Ti:case co:case Uy:case IS:case zc:case sd:return Tf(t)||t==="band"?!0:t==="point"?!n:!1;case ig:case Hy:case sg:case zy:case Vy:case jb:return Tf(t)||sx(t)||Hn(["band","point","ordinal"],t);case Xu:case Jh:case Zh:return t!=="band";case qy:case Qu:return t==="ordinal"||sx(t)}}function Rne(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Pne(e);return Ze(n)&&!_6e(n.aggregate)&&i&&Tf(i.get("type"))?BXt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function BXt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return _r("invalid",n,i)===null?[UXt(e,t),r]:r}function UXt(e,t){const n=Nne(e,!0),i=Bb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Nne(e,t=!0){return Cne(pt(e)?e:at(e,{expr:"datum"}),!t)}function zXt(e){const{datum:t}=e;return zb(t)?ab(t):`${Fr(t)}`}function bv(e,t,n,r){const i={};if(t&&(i.scale=t),np(e)){const{datum:s}=e;zb(s)?i.signal=ab(s):Rt(s)?i.signal=s.signal:oR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function rM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function VXt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Pne({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(un(t)){const f=o==null?void 0:o.get("type");if(Za(t)){c??(c=cy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ii(d)||c&&h&&p===ix)return a!=null&&a.impute?bv(t,s,{binSuffix:"mid"},{offset:u}):c&&!uo(f)?rM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):bv(t,s,fR(t,e)?{binSuffix:"range"}:{},{offset:u});if(Eo(d)){if(Ze(n))return rM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je($6e(e===Ti?id:Qh))}}return bv(t,s,uo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Gf(t)){const f=t.value,d=u?{offset:u}:{};return{...CC(e,f),...d}}}return bn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function CC(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ci(t)}function lb(e){return e&&e!=="number"&&e!=="time"}function tFe(e,t,n){return`${e}(${t}${n?`, ${Fr(n)}`:""})`}const HXt=" – ";function Dne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(lb(n))return Af({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=nFe(e,r,i),a=ox(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Af({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Af({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Af({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(ux(e)){const c=WXt({field:o,timeUnit:Ze(e)?(u=ao(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:qb(e)&&((l=e.scale)==null?void 0:l.type)===Bu.UTC});return c?{signal:c}:void 0}if(t=CH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&ii(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:uR(o,c,t,n,s)}}else return t||ox(e)==="quantitative"?{signal:`${sFe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function nFe(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):zXt(e)}function Af({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=nFe(e,r,i)),o!=="datum.value"&&Ze(e)&&ii(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:uR(o,a,t,n,s)}}return{signal:tFe(n,o,t)}}function rFe(e,t,n,r,i,s){var o;if(!(pt(r)&&lb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&ox(e)==="quantitative"&&(i.normalizedNumberFormatType&&ax(e)&&e.stack==="normalize"||i.numberFormatType))){if(ax(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return CH({type:"quantitative",config:i,normalizeStack:!0});if(ux(e)){const a=Ze(e)?(o=ao(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:qXt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return CH({type:t,specifiedFormat:n,config:i})}}function iFe(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(ux(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=ao(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function CH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(pt(t))return t;if(e===ub)return r?n.normalizedNumberFormat:n.numberFormat}function qXt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:V6e(t)}:r?void 0:n.timeFormat)}function sFe(e,t){return`format(${e}, "${t||""}")`}function Lme(e,t,n,r){return lb(n)?tFe(n,e,t):sFe(e,(pt(t)?t:void 0)??r.numberFormat)}function uR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return uR(e,t,i.numberFormat,i.numberFormatType,i);const s=Lme(e,n,r,i),o=Lme(t,n,r,i);return`${Cne(e,!1)} ? "null" : ${s} + "${HXt}" + ${o}`}function WXt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):yXt(t,e,s)}const su={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},oFe=su.arc,R4=su.area,N4=su.bar,GXt=su.image,P4=su.line,D4=su.point,YXt=su.rect,iM=su.rule,aFe=su.text,One=su.tick,KXt=su.trail,$ne=su.circle,Mne=su.square,uFe=su.geoshape;function Hb(e){return["line","area","trail"].includes(e)}function hI(e){return["rect","bar","image","arc"].includes(e)}const XXt=new Set(Ye(su));function kh(e){return e.type}const QXt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],JXt=["fill","fillOpacity"],ZXt=[...QXt,...JXt],eQt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Fme=Ye(eQt),tQt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},nQt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},rQt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},lFe=Ye(rQt);function cb(e){return e&&e.band!=null}const iQt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},cFe=5,sQt={binSpacing:1,continuousBandSize:cFe,minBandSize:.25,timeUnitBandPosition:.5},oQt={binSpacing:0,continuousBandSize:cFe,minBandSize:.25,timeUnitBandPosition:.5},aQt={thickness:1};function uQt(e){return kh(e)?e.type:e}const O4="min",lQt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function jme(e){return e in lQt}function fFe(e){return!!(e!=null&&e.encoding)}function fh(e){return e&&(e.op==="count"||!!e.field)}function dFe(e){return e&&Fe(e)}function lR(e){return"row"in e||"column"in e}function Lne(e){return!!e&&"header"in e}function $4(e){return"facet"in e}function cQt(e){return e.param}function fQt(e){return e&&!pt(e)&&"repeat"in e}function Bme(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Fne(e){return"sort"in e}function cy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(un(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return $m("timeUnitBandPosition",n,r);if(ii(s))return .5}}function hFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Ju(e),u=_r(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:$m("timeUnitBandSize",r,i)};if(ii(h)&&!uo(s))return{band:1}}if(hI(r.type))return s?uo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function pFe(e,t,n,r){return ii(e.bin)||e.timeUnit&&Za(e)&&e.type==="temporal"?cy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function mFe(e){return e&&!!e.sort&&!e.field}function M4(e){return e&&"condition"in e}function L4(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&Ze(t)}function cR(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&un(t)}function dQt(e){const t=e==null?void 0:e.condition;return!!t&&(Fe(t)||Gf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function ox(e){return e==null?void 0:e.type}function np(e){return e&&"datum"in e}function n0(e){return Za(e)&&!oM(e)||sM(e)}function Ume(e){return Za(e)&&e.type==="quantitative"&&!e.bin||sM(e)}function sM(e){return np(e)&&lr(e.datum)}function un(e){return Ze(e)||np(e)}function Za(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Gf(e){return e&&"value"in e&&"value"in e}function qb(e){return e&&("scale"in e||"sort"in e)}function ax(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function gFe(e){return e&&"legend"in e}function yFe(e){return e&&("format"in e||"formatType"in e)}function hQt(e){return ju(e,["legend","axis","header","scale"])}function pQt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(gQt(e))n=o6e("count");else{let o;if(!t.nofn)if(pQt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ii(a)?(o=w6e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Wy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Om(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Vb(l)&&(o=vXt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?CS(n):t.expr?r6e(n,t.expr)+s:Rc(n)+s}function oM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(N6e(e.type))}function mQt(e){var t;return qb(e)&&sx((t=e.scale)==null?void 0:t.type)}function gQt(e){return e.aggregate==="count"}function yQt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ii(r))return`${n} (binned)`;if(i&&!Vb(i)){const a=(o=ao(i))==null?void 0:o.unit;if(a)return`${n} (${k4(a).join("-")})`}else if(s)return Wy(s)?`${n} for max ${s.argmax}`:Om(s)?`${n} for min ${s.argmin}`:`${nR(s)} of ${n}`;return n}function vQt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Wy(t))return`${i} for argmax(${t.argmax})`;if(Om(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Vb(r)?ao(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ii(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const vFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return vQt(e);default:return yQt(e,t)}};let bFe=vFe;function _Fe(e){bFe=e}function bQt(){_Fe(vFe)}function Ww(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=jne(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Bne(s,t):void 0;return n?us(i,s.title,o):i??s.title??o}function jne(e){if(ax(e)&&e.axis)return e.axis;if(gFe(e)&&e.legend)return e.legend;if(Lne(e)&&e.header)return e.header}function Bne(e,t){return bFe(e,t)}function aM(e){if(yFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=jne(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function _Qt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Fne(e)&&Fe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Wy(n)&&!Om(n))return"quantitative";if(qb(e)&&((s=e.scale)!=null&&s.type))switch(TH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Rh(e){if(Ze(e))return e;if(L4(e))return e.condition}function Rs(e){if(un(e))return e;if(cR(e))return e.condition}function wFe(e,t,n,r={}){if(pt(e)||lr(e)||Fy(e)){const i=pt(e)?"string":lr(e)?"number":"boolean";return Je(wKt(t,i,e)),{value:e}}return un(e)?uM(e,t,n,r):cR(e)?{...e,condition:uM(e.condition,t,n,r)}:e}function uM(e,t,n,r){if(yFe(e)){const{format:i,formatType:s,...o}=e;if(lb(s)&&!n.customFormatTypes)return Je(Dme(t)),uM(o,t,n,r)}else{const i=ax(e)?"axis":gFe(e)?"legend":Lne(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(lb(o)&&!n.customFormatTypes)return Je(Dme(t)),uM({...e,[i]:a},t,n,r)}}return Ze(e)?Une(e,t,r):wQt(e)}function wQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":pt(n)?"nominal":zb(n)?"temporal":void 0,{...e,type:t}}function Une(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!pne(r)&&!Wy(r)&&!Om(r)&&(Je(xKt(r)),delete a.aggregate),i&&(a.timeUnit=ao(i)),o&&(a.field=`${o}`),ii(s)&&(a.bin=F4(s,t)),Eo(s)&&!ls(t)&&Je(tXt(t)),Za(a)){const{type:u}=a,l=AXt(u);u!==l&&(a.type=l),u!=="quantitative"&&_6e(r)&&(Je(EKt(u,r)),a.type="quantitative")}else if(!p6e(t)){const u=_Qt(a,t);a.type=u}if(Za(a)){const{compatible:u,warning:l}=EQt(a,t)||{};u===!1&&Je(l)}if(Fne(a)&&pt(a.sort)){const{sort:u}=a;if(jme(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&jme(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Lne(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function F4(e,t){return Fy(e)?{maxbins:Sme(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Sme(t)}:e}const __={compatible:!0};function EQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case tm:case nm:case _4:return oM(e)?__:{compatible:!1,warning:CKt(t)};case Ti:case co:case Uy:case IS:case Xu:case Jh:case Zh:case rR:case iR:case w4:case ob:case E4:case x4:case jb:case zc:case sd:case S4:return __;case ad:case Nc:case od:case ud:return n!==ub?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:__;case sg:case zy:case Vy:case Hy:case ig:case rg:case ng:case id:case Qh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:__;case Qu:case qy:return!oM(e)&&!mQt(e)?{compatible:!1,warning:IKt(t)}:__;case nx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:__}}function ux(e){const{formatType:t}=aM(e);return t==="time"||!t&&xQt(e)}function xQt(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function j4(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=ao(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return oR(e)?a=e.expr:Rt(e)?a=e.signal:zb(e)?(o=!0,a=ab(e)):(pt(e)||lr(e))&&o&&(a=`datetime(${Fr(e)})`,hXt(s)&&(lr(e)&&e<1e4||pt(e)&&isNaN(Date.parse(e)))&&(a=ab({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Fr(e)}function EFe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!Vb(e.timeUnit)?e.timeUnit:void 0,s=j4(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function fR(e,t){return ii(e.bin)?og(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const zme={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function dR(e){return e==null?void 0:e.condition}const xFe=["domain","grid","labels","ticks","title"],SQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},SFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},TQt={...SFe,style:1,labelExpr:1,encoding:1};function Vme(e){return!!TQt[e]}const AQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},TFe=Ye(AQt);function ag(e){return"mark"in e}class B4{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ag(t)?uQt(t.mark)===this.name:!1}}function _v(e,t){const n=e&&e[t];return n?Fe(n)?ib(n,r=>!!r.field):Ze(n)||L4(n):!1}function AFe(e,t){const n=e&&e[t];return n?Fe(n)?ib(n,r=>!!r.field):Ze(n)||np(n)||cR(n):!1}function CFe(e,t){if(ls(t)){const n=e[t];if((Ze(n)||np(n))&&(Y6e(n.type)||Ze(n)&&n.timeUnit)){const r=cne(t);return AFe(e,r)}}return!1}function zne(e){return ib(CYt,t=>{if(_v(e,t)){const n=e[t];if(Fe(n))return ib(n,r=>!!r.aggregate);{const r=Rh(n);return r&&!!r.aggregate}}return!1})}function IFe(e,t){const n=[],r=[],i=[],s=[],o={};return Vne(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=jne(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:Ww(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Wy(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Om(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),Za(a)&&ii(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),fR(a,u)&&n.push(at(a,{binSuffix:"range"})),ls(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",p6e(u)||(y.type=ub)}else if(d&&!Vb(d)){i.push({timeUnit:d,field:l,as:g});const v=Za(a)&&a.type!==ix&&"time";v&&(u===rR||u===ob?y.formatType=v:LYt(u)?y.legend={formatType:v,...y.legend}:ls(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function CQt(e,t,n){const r=jYt(t,n);if(r){if(r==="binned"){const i=e[t===id?Ti:co];return!!(Ze(i)&&Ze(e[t])&&Eo(i.bin))}}else return!1;return!0}function IQt(e,t,n,r){const i={};for(const s of Ye(e))h6e(s)||Je(AKt(s));for(let s of DYt){if(!e[s])continue;const o=e[s];if(sR(s)){const a=PYt(s),u=i[a];if(Ze(u)&&TXt(u.type)&&Ze(o)&&!u.timeUnit){Je(_Kt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(bKt),s=zc),!CQt(e,s,t)){Je(I4(s,t));continue}if(s===ig&&t==="line"){const a=Rh(e[s]);if(a!=null&&a.aggregate){Je(TKt);continue}}if(s===Xu&&(n?"fill"in e:"stroke"in e)){Je(P6e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===iR||s===nx&&!Fe(o)&&!Gf(o)||s===ob&&Fe(o)){if(o){if(s===nx){const a=e[s];if(mFe(a)){i[s]=a;continue}}i[s]=ht(o).reduce((a,u)=>(Ze(u)?a.push(Une(u,s)):Je(SH(u,s)),a),[])}}else{if(s===ob&&o===null)i[s]=null;else if(!Ze(o)&&!np(o)&&!Gf(o)&&!M4(o)&&!Rt(o)){Je(SH(o,s));continue}i[s]=wFe(o,s,r)}}return i}function U4(e,t){const n={};for(const r of Ye(e)){const i=wFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function kQt(e){const t=[];for(const n of Ye(e))if(_v(e,n)){const r=e[n],i=ht(r);for(const s of i)Ze(s)?t.push(s):L4(s)&&t.push(s.condition)}return t}function Vne(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(Fe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function RQt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return Fe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function kFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Ti:case co:case E4:case S4:case x4:case id:case Qh:case Uy:case IS:case zc:case rg:case sd:case ng:case od:case ad:case ud:case Nc:case rR:case Qu:case jb:case ob:return n;case nx:if(e==="line"||e==="trail")return n;case iR:case w4:{const i=t[r];if(Fe(i)||Ze(i))for(const s of ht(i))s.aggregate||n.push(at(s,{}));return n}case ig:if(e==="trail")return n;case Xu:case Jh:case Zh:case sg:case zy:case Vy:case qy:case Hy:{const i=Rh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function NQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Fe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Fe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function IH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Hne(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=kQt(n).map(hQt);return{tooltip:[...i,...Xd(s,Vn)]}}function Hne(e){const{title:t,field:n}=e;return us(t,n)}function qne(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Hne(n);return RFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function RFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...kh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Fy(e[t])?{}:e[t]}}]:[]}function NFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:iP(s,n),continuousAxisChannelDef2:iP(o,n),continuousAxisChannelDefError:iP(a,n),continuousAxisChannelDefError2:iP(u,n),continuousAxis:i}}function iP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(eXt(n,t)),r}else return e}function PFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(kh(n)&&n.orient)return n.orient;if(n0(i)){if(n0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ux(s)&&!ux(i)?"horizontal":"vertical"}return"horizontal"}else{if(n0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const lM="boxplot",PQt=["box","median","outliers","rule","ticks"],DQt=new B4(lM,OFe);function DFe(e){return lr(e)?"tukey":e}function OFe(e,{config:t}){e={...e,encoding:U4(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=kh(n)?n:{type:n};i&&Je(R6e("boxplot"));const u=a.extent??t.boxplot.extent,l=_r("size",a,t),c=a.invalid,f=DFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=OQt(e,u,t),T=CS(m.field),{color:A,size:C,...I}=b,R=ke=>qne(a,g,m,ke,t.boxplot),M=R(I),P=R(b),O=(mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=R({...I,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:O}}}}),L=IH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?L:IH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...M({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...M({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],D=[...f!=="tukey"?H:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...F({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:$Fe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:H},{tooltip:he,...ye}=I,{scale:Ie,axis:ve}=m,Ke=Hne(m),Ue=ju(ve,["title"]),gt=RFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...Lr(Ue)?{}:{axis:Ue}},...ye,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let it;const be=[...d,...h,ce];return gt?it={transform:be,layer:[gt,de]}:(it=de,it.transform.unshift(...be)),{...o,layer:[it,{transform:p,layer:D}]}}function $Fe(e){const t=CS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function OQt(e,t,n){const r=PFe(e,lM),{continuousAxisChannelDef:i,continuousAxis:s}=NFe(e,r,lM),o=i.field,a=CS(o),u=DFe(t),l=[...$Fe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=NQt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=IFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Wne="errorbar",$Qt=["ticks","rule"],MQt=new B4(Wne,MFe);function MFe(e,{config:t}){e={...e,encoding:U4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=LFe(e,Wne,t);delete s.size;const c=qne(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function LQt(e,t){const{encoding:n}=e;if(FQt(n))return{orient:PFe(e,t),inputType:"raw"};const r=jQt(n),i=BQt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(un(a)&&un(u))throw new Error(`${t} cannot have both x2 and y2`);if(un(a)){if(n0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(un(u)){if(n0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(un(u)&&!un(a))throw new Error(`${t} cannot have xError2 without xError`);if(un(c)&&!un(l))throw new Error(`${t} cannot have yError2 without yError`);if(un(a)&&un(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(un(a)){if(n0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(un(l)){if(n0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function FQt(e){return(un(e.x)||un(e.y))&&!un(e.x2)&&!un(e.y2)&&!un(e.xError)&&!un(e.xError2)&&!un(e.yError)&&!un(e.yError2)}function jQt(e){return un(e.x2)||un(e.y2)}function BQt(e){return un(e.xError)||un(e.xError2)||un(e.yError)||un(e.yError2)}function LFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=kh(r)?r:{type:r};s&&Je(R6e(t));const{orient:l,inputType:c}=LQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=NFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=UQt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...A}=i,{bins:C,timeUnits:I,aggregate:R,groupby:M,encoding:P}=IFe(A,n),O=[...R,...g],F=c!=="raw"?[]:M,L=IH(v,f,P,b);return{transform:[...a.transform??[],...C,...I,...O.length===0?[]:[{aggregate:O,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function UQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(ZKt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:nR(h)},{fieldPrefix:"upper_",titlePrefix:Hme(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Hme(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Ww({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ww({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ww({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(JKt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:sb(sb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Hme(e,t,n){return`${nR(e)} ${n} ${t}`}const Gne="errorband",zQt=["band","borders"],VQt=new B4(Gne,FFe);function FFe(e,{config:t}){e={...e,encoding:U4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=LFe(e,Gne,t),l=o,c=qne(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je($me("interpolate")):l.tension&&Je($me("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const jFe={};function Yne(e,t,n){const r=new B4(e,t);jFe[e]={normalizer:r,parts:n}}function HQt(){return Ye(jFe)}Yne(lM,OFe,PQt);Yne(Wne,MFe,$Qt);Yne(Gne,FFe,zQt);const qQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],BFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},UFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},WQt=Ye(BFe),GQt=Ye(UFe),YQt={header:1,headerRow:1,headerColumn:1,headerFacet:1},zFe=Ye(YQt),VFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],KQt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},XQt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Yf="_vgsid_",QQt={point:{on:"click",fields:[Yf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Kne(e){return e==="legend"||!!(e!=null&&e.legend)}function UB(e){return Kne(e)&&mt(e)}function Xne(e){return!!(e!=null&&e.select)}function HFe(e){const t=[];for(const n of e||[]){if(Xne(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function JQt(e){return z4(e)||Jne(e)||Qne(e)}function Qne(e){return"concat"in e}function z4(e){return"vconcat"in e}function Jne(e){return"hconcat"in e}function qFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Nh(e){return mt(e)&&e.step!==void 0}function qme(e){return e.view||e.width||e.height}const Wme=20,ZQt={align:1,bounds:1,center:1,columns:1,spacing:1},eJt=Ye(ZQt);function tJt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&($4(e)&&!lR(e.facet)||Qne(e))&&(i.columns=o),z4(e)&&(i.columns=1);for(const a of eJt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function kH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function cM(e,t){const n=fM(e,t);return Nh(n)?n.step:WFe}function fM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return us(n,{step:e.step})}const WFe=20,nJt={continuousWidth:200,continuousHeight:200,step:WFe},rJt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:nJt,mark:nQt,arc:{},area:{},bar:sQt,circle:{},geoshape:{},image:{},line:{},point:{},rect:oQt,rule:{color:"black"},square:{},text:{color:"black"},tick:aQt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:NXt,projection:{},legend:KQt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:QQt,style:{},title:{},facet:{spacing:Wme},concat:{spacing:Wme},normalizedNumberFormat:".0%"},pp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Gme={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Yme={blue:pp[0],orange:pp[1],red:pp[2],teal:pp[3],green:pp[4],yellow:pp[5],purple:pp[6],pink:pp[7],brown:pp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function iJt(e={}){return{signals:[{name:"color",value:mt(e)?{...Yme,...e}:Yme}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function sJt(e){return{signals:[{name:"fontSize",value:mt(e)?{...Gme,...e}:Gme}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function oJt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function GFe(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=dR(i)?x6e(i):ml(i)}return n}function aJt(e){const t=Ye(e),n={};for(const r of t)n[r]=GFe(e[r]);return n}const uJt=[...lFe,...TFe,...zFe,"background","padding","legend","lineBreak","scale","style","title","view"];function YFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=gS({},tn(rJt),n?oJt(n):{},t?iJt(t):{},r?sJt(r):{},s||{});i&&yS(o,"selection",i,!0);const a=ju(o,uJt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=ml(o[u]));for(const u of lFe)o[u]&&(a[u]=Eu(o[u]));for(const u of TFe)o[u]&&(a[u]=GFe(o[u]));for(const u of zFe)o[u]&&(a[u]=Eu(o[u]));return o.legend&&(a.legend=Eu(o.legend)),o.scale&&(a.scale=Eu(o.scale)),o.style&&(a.style=aJt(o.style)),o.title&&(a.title=Eu(o.title)),o.view&&(a.view=Eu(o.view)),a}const lJt=new Set(["view",...XXt]),cJt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],fJt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...tQt};function dJt(e){e=tn(e);for(const t of cJt)delete e[t];if(e.axis)for(const t in e.axis)dR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of qQt)delete e.legend[t];if(e.mark){for(const t of Fme)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(HFe(e.params)),delete e.params);for(const t of lJt){for(const r of Fme)delete e[t][r];const n=fJt[t];if(n)for(const r of n)delete e[t][r];pJt(e,t)}for(const t of HQt())delete e[t];hJt(e);for(const t in e)mt(e[t])&&Lr(e[t])&&delete e[t];return Lr(e)?void 0:e}function hJt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=E6e(e.title);Lr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Lr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Lr(r)?delete e.title:e.title=r}function pJt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Lr(s)||(e.style[n??t]=s),delete e[t]}function V4(e){return"layer"in e}function mJt(e){return"repeat"in e}function gJt(e){return!Fe(e.repeat)&&e.repeat.layer}class Zne{map(t,n){return $4(t)?this.mapFacet(t,n):mJt(t)?this.mapRepeat(t,n):Jne(t)?this.mapHConcat(t,n):z4(t)?this.mapVConcat(t,n):Qne(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(V4(t))return this.mapLayer(t,n);if(ag(t))return this.mapUnit(t,n);throw new Error(mne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const yJt={zero:1,center:1,normalize:1};function vJt(e){return e in yJt}const bJt=new Set([oFe,N4,R4,iM,D4,$ne,Mne,P4,aFe,One]),_Jt=new Set([N4,R4,oFe]);function w_(e){return Ze(e)&&ox(e)==="quantitative"&&!e.bin}function Kme(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(w_(o)&&w_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(w_(o))return t;if(w_(a))return i}else{if(w_(o))return s&&n==="vertical"?void 0:t;if(w_(a))return s&&n==="horizontal"?void 0:i}}function wJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function KFe(e,t){var m,g;const n=kh(e)?e:{type:e},r=n.type;if(!bJt.has(r))return null;const i=Kme(t,"x",n)||Kme(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=wJt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=OYt.reduce((y,v)=>{if(v!=="tooltip"&&_v(t,v)){const b=t[v];for(const w of ht(b)){const E=Rh(w);if(E.aggregate)continue;const S=at(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Fy(s.stack)?p=s.stack?"zero":null:p=s.stack:_Jt.has(r)&&(p="zero"),!p||!vJt(p)||zne(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Bu.LINEAR&&s!=null&&s.stack&&Je(KKt(s.scale.type)),un(t[ep(i)])?(s.stack!==void 0&&Je(YKt(i)),null):(Ze(s)&&s.aggregate&&!WYt.has(s.aggregate)&&Je(XKt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Hb(r),stackBy:h,offset:p}))}function XFe(e,t,n){const r=Eu(e),i=_r("orient",r,n);if(r.orient=TJt(r.type,t,i),i!==void 0&&i!==r.orient&&Je(PKt(r.orient,i)),r.type==="bar"&&r.orient){const u=_r("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:iQt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=_r("opacity",r,n),o=_r("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=xJt(r.type,t)),_r("cursor",r,n)===void 0&&(r.cursor=EJt(r,t,n)),r}function EJt(e,t,n){return t.href||e.href||_r("href",e,n)?"pointer":e.cursor}function xJt(e,t){if(Hn([D4,One,$ne,Mne],e)&&!zne(t))return .7}function SJt(e,t,{graticule:n}){if(n)return!1;const r=$m("filled",e,t),i=e.type;return us(r,i!==D4&&i!==P4&&i!==iM)}function TJt(e,t,n){switch(e){case D4:case $ne:case Mne:case aFe:case YXt:case GXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case N4:if(Ze(r)&&(Eo(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Eo(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===ub&&!ii(r.bin)||sM(r))&&Ze(i)&&Eo(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===ub&&!ii(i.bin)||sM(i))&&Ze(r)&&Eo(r.bin)?"vertical":"horizontal"}case iM:if(s&&!(Ze(r)&&Eo(r.bin))&&o&&!(Ze(i)&&Eo(i.bin)))return;case R4:if(o)return Ze(i)&&Eo(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&Eo(r.bin)?"vertical":"horizontal";if(e===iM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case P4:case One:{const a=Ume(r),u=Ume(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Za(r)&&r.type===ix,c=Za(i)&&i.type===ix;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function AJt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function CJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ju(e[t],["point","line"])});return e}function zB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function Xme(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class IJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ag(t)){const{mark:r,encoding:i}=t,s=kh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!zB(s,n[s.type],i);case"area":return!!zB(s,n[s.type],i)||!!Xme(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=U4(l,i),d=kh(a)?a:{type:a},h=zB(d,i[d.type],f),p=d.type==="area"&&Xme(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:AJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:ju(f,["shape"])}],g=KFe(XFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=ju(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...ex(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...ex(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:CJt(i)})}}function kJt(e,t){return t?lR(e)?JFe(e,t):QFe(e,t):e}function VB(e,t){return t?JFe(e,t):e}function RH(e,t,n){const r=t[e];if(fQt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(dKt(r.repeat));return}return t}function QFe(e,t){if(e=RH("field",e,t),e!==void 0){if(e===null)return null;if(Fne(e)&&fh(e.sort)){const n=RH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Qme(e,t){if(Ze(e))return QFe(e,t);{const n=RH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Jme(e,t){if(un(e)){const n=Qme(e,t);if(n)return n;if(M4(e))return{condition:e.condition}}else{if(cR(e)){const n=Qme(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function JFe(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Fe(i))n[r]=i.map(s=>Jme(s,t)).filter(s=>s);else{const s=Jme(i,t);s!==void 0&&(n[r]=s)}}return n}class RJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ag(t)){const{encoding:n,mark:r}=t;if(r==="line"||kh(r)&&r.type==="line")for(const i of NYt){const s=Bb(i),o=n[s];if(n[i]&&(Ze(o)&&!Eo(o.bin)||np(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(NKt(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class NJt extends Zne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[DQt,MQt,VQt,new IJt,new RJt]}map(t,n){if(ag(t)){const r=_v(t.encoding,tm),i=_v(t.encoding,nm),s=_v(t.encoding,_4);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=VB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return gJt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Si(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Fe(r)&&t.columns&&(t=ju(t,["columns"]),Je(Nme("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Fe(r)&&r.row||[u?u.row:null],f=!Fe(r)&&r.column||[u?u.column:null],d=Fe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Fe(r)?`${Si(p)}`:(r.row?`row_${Si(m)}`:"")+(r.column?`column_${Si(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(ju(b,["data"]))}const h=Fe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return lR(r)&&t.columns&&(t=ju(t,["columns"]),Je(Nme("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=ege({parentProjection:o,projection:i}),l=Zme({parentEncoding:s,encoding:VB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=VB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(kKt([...r?[tm]:[],...i?[nm]:[]]));const o={},a={};for(const u of[tm,nm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:kJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Zme({parentEncoding:n,encoding:s,layer:!0}),parentProjection:ege({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Zme({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(un(o)){const u={...a,...o};r[s]=u}else cR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Gf(a)||Rt(a)||un(a)||Fe(a))&&(r[s]=a)}}else r=t;return!r||Lr(r)?void 0:r}function ege(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(vKt({parentProjection:t,projection:n})),n??t}function ere(e){return"filter"in e}function PJt(e){return(e==null?void 0:e.stop)!==void 0}function ZFe(e){return"lookup"in e}function DJt(e){return"data"in e}function OJt(e){return"param"in e}function $Jt(e){return"pivot"in e}function MJt(e){return"density"in e}function LJt(e){return"quantile"in e}function FJt(e){return"regression"in e}function jJt(e){return"loess"in e}function BJt(e){return"sample"in e}function UJt(e){return"window"in e}function zJt(e){return"joinaggregate"in e}function VJt(e){return"flatten"in e}function HJt(e){return"calculate"in e}function e4e(e){return"bin"in e}function qJt(e){return"impute"in e}function WJt(e){return"timeUnit"in e}function GJt(e){return"aggregate"in e}function YJt(e){return"stack"in e}function KJt(e){return"fold"in e}function XJt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function QJt(e){return e.map(t=>ere(t)?{filter:Hw(t.filter,SXt)}:t)}class JJt extends Zne{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=tge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=tge(t,n),t.encoding){const r={};for(const[i,s]of uy(t.encoding))r[i]=t4e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:uy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of No(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function tge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(ere(s))return{filter:NH(s,t)};if(e4e(s)&&Ub(s.bin))return{...s,bin:n4e(s.bin)};if(ZFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function t4e(e,t){var r,i;const n=tn(e);if(Ze(n)&&Ub(n.bin)&&(n.bin=n4e(n.bin)),qb(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(M4(n))if(Fe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:NH(s,t)}});else{const{selection:s,param:o,test:a,...u}=t4e(n.condition,t);n.condition=o?n.condition:{...u,test:NH(n.condition,t)}}return n}function n4e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function NH(e,t){const n=r=>Hw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Hw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class PH extends Zne{map(t,n){const r=n.selections??[];if(t.params&&!ag(t)){const i=[];for(const s of t.params)Xne(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(pt(a)&&(a===t.name||i.includes(a))||Fe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=PH.prototype[e];PH.prototype[e]=function(n,r){return t.call(this,n,ZJt(n,r))}}function ZJt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function r4e(e,t){t===void 0&&(t=YFe(e.config));const n=rZt(e,t),{width:r,height:i}=e,s=iZt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const eZt=new NJt,tZt=new JJt,nZt=new PH;function rZt(e,t={}){const n={config:t};return nZt.map(eZt.map(tZt.map(e,n),n),n)}function nge(e){return pt(e)?{type:e}:e??{}}function iZt(e,t,n){let{width:r,height:i}=t;const s=ag(e)||V4(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(Cme("width")),r=void 0),i=="container"&&(Je(Cme("height")),i=void 0));const a={type:"pad",...o,...n?nge(n.autosize):{},...nge(e.autosize)};if(a.type==="fit"&&!s&&(Je(tKt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(Ime("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(Ime("height")),!El(a,{type:"pad"}))return a}function sZt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function oZt(e){return e?`fit-${T4(e)}`:"fit"}const aZt=["background","padding"];function rge(e,t){const n={};for(const r of aZt)e&&e[r]!==void 0&&(n[r]=ml(e[r]));return t&&(n.params=e.params),n}class ug{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ug(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return us(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Id(e){return{explicit:!0,value:e}}function al(e){return{explicit:!1,value:e}}function i4e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:H4(t,n,r,i)}}function H4(e,t,n,r){return e.explicit&&t.explicit&&Je(UKt(n,r,e.value,t.value)),e}function fy(e,t,n,r,i=H4){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:El(e.value,t.value)?e:i(e,t,n,r)}class uZt extends ug{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function lx(e){return"url"in e}function pI(e){return"values"in e}function s4e(e){return"name"in e&&!lx(e)&&!pI(e)&&!C0(e)}function C0(e){return e&&(o4e(e)||a4e(e)||tre(e))}function o4e(e){return"sequence"in e}function a4e(e){return"sphere"in e}function tre(e){return"graticule"in e}var _i;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(_i||(_i={}));function u4e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Rc(i.field),i}function fb(e,t=!0,n=va){if(Fe(e)){const r=e.map(i=>fb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(zb(e))return n(t?ab(e):dXt(e));return t?n(Fr(e)):e}function lZt(e,t){for(const n of No(e.component.selection??{})){const r=n.name;let i=`${r}${hy}, ${n.resolve==="global"?"true":`{unit: ${wv(e)}}`}`;for(const s of Y4)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+UZt,on:[{events:{signal:n.name+hy},update:`modify(${rt(n.name+db)}, ${i})`}]})}return nre(t)}function cZt(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:By("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return nre(t)}function fZt(e,t){let n=!1;for(const r of No(e.component.selection??{})){const i=r.name,s=rt(i+db);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${A4e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of Y4)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),nre(t)}function dZt(e,t){const n=[...t],r=wv(e,{escape:!1});for(const i of No(e.component.selection??{})){const s={name:i.name+db};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Yf}}]),i.init){const a=i.project.items.map(u4e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Yf]:fb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:fb(u,!1)}))}n.filter(a=>a.name===i.name+db).length||n.push(s)}return n}function l4e(e,t){for(const n of No(e.component.selection??{}))for(const r of Y4)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function hZt(e,t){for(const n of e.children)Wi(n)&&(t=l4e(n,t));return t}function pZt(e,t,n,r){const i=N4e(e,t.param,t);return{signal:Bl(n.get("type"))&&Fe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function nre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Or{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(mKt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Uu extends Or{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${s6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function HB(e){return e.as!==void 0}function ige(e){return`${e}_end`}class dh extends Or{clone(){return new dh(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Vb(u)){if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=cy({fieldDef:s,markDef:f,config:d});(hI(c)||h)&&(l={timeUnit:ao(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Wi(n)){const{mark:c,markDef:f,config:d}=n,h=cy({fieldDef:s,markDef:f,config:d});hI(c)&&ls(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return Lr(r)?null:new dh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=ao(r),o={...i,timeUnit:s};return new dh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of uy(this.timeUnits)){const s=HB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(No(this.timeUnits).map(t=>HB(t)?t.as:ige(t.field)))}dependentFields(){return new Set(No(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of No(this.timeUnits)){const{rectBandPosition:r}=n,i=ao(n.timeUnit);if(HB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Rc(s),type:"timeunit",...a?{units:k4(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...sge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=c4e({timeUnit:i,field:o}),u=ige(o);t.push({type:"formula",expr:a,as:u}),t.push(...sge([o,u],r,i))}}return t}}const q4="offsetted_rect_start",W4="offsetted_rect_end";function c4e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=U6e(r),{part:o,step:a}=q6e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function sge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:oge([c4e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${q4}`},{type:"formula",expr:oge([i,s],n+.5),as:`${e}_${W4}`}]}return[]}function oge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const hR="_tuple_fields";class mZt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const gZt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new mZt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Si(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Si(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ht(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of Ye(p))RYt(m)?(h||(h=[])).push(m):l==="interval"?(Je(fKt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(nKt(p,m.aggregate));continue}else if(!g){Je(Rme(p));continue}if(m.timeUnit&&!Vb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&og(p)&&Bl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Yf,f6e(p)?(v.geoChannel=p,v.channel=c6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(Rme(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Yf}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Lr(o)||(i.timeUnit=new dh(null,o))},signals:(e,t,n)=>{const r=t.name+hR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(u4e)})}},rm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!og(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(oKt),!s||!Bl(o)){Je(sKt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||age(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(A4e)>=0)i.update=`{${r.map(o=>`${rt(Rc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Rc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!age(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function DH(e,t){return`domain(${rt(e.scaleName(t))})`}function age(e){return e.parent&&OS(e.parent)&&!e.parent.parent}const Gw="_brush",f4e="_scale_trigger",OT="geo_interval_init_tick",d4e="_init",yZt="_center",vZt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[Yf],i.encodings||(i.encodings=n.value?Ye(n.value):[ad,od]),n.select={type:"interval",...i}}if(t.translate&&!rm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+Gw)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=ht((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+hy,s=No(t.project.hasChannel).filter(a=>a.channel===Ti||a.channel===co),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(bZt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+yZt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+d4e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${wv(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:OT}]:[]],update:b}]})}else{if(!rm.defined(t)){const l=r+f4e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Bl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${wv(e)}, fields: ${r+hR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${fb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Wi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===OT).length||n.unshift({name:OT,value:null,on:[{events:"timer{1}",update:`${OT} === null ? {} : ${OT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+db)})`;if(rm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${wv(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Gw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Gw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function bZt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ti?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=rm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:fb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+f4e},update:Bl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:fb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ti?0:1,h=t.name+d4e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const _Zt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+hR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=No(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Gw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${wv(e)}, `;if(t.project.hasSelectionId)l+=`${Yf}: ${o}[${rt(Yf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+hy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function RS(e,t,n,r){const i=M4(t)&&t.condition,s=r(t);if(i){const a=ht(i).map(u=>{const l=r(u);if(cQt(u)){const{param:c,empty:f}=u;return{test:R4e(e,{param:c,empty:f}),...l}}else return{test:pM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function rre(e,t="text"){const n=e.encoding[t];return RS(e,n,t,r=>G4(r,e.config))}function G4(e,t,n="datum"){if(e){if(Gf(e))return ci(e.value);if(un(e)){const{format:r,formatType:i}=aM(e);return Dne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function h4e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Fe(o))return{tooltip:uge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return RS(e,o,"tooltip",u=>{const l=G4(u,i,a);if(l)return l;if(u===null)return;let c=_r("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),pt(c))return{value:c};if(mt(c))return Rt(c)?c:c.content==="encoding"?uge(n,s,i,t):{signal:a}})}}function p4e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Bb(f),h=Za(c)?c:{...c,type:e[d].type},p=h.title||Bne(h,i),m=ht(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ls(f)){const y=f==="x"?"x2":"y2",v=Rh(e[y]);if(Eo(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:S}=aM(h);g=uR(b,w,E,S,i),s[y]=!0}}if((ls(f)||f===zc||f===sd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=aM(h);g=Dne({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=G4(h,i,o).signal),a.push({channel:f,key:m,value:g})}Vne(e,(c,f)=>{Ze(c)?u(c,f):L4(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function uge(e,t,n,{reactiveGeom:r}={}){const i=p4e(e,t,n,{reactiveGeom:r}),s=uy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function wZt(e){const{markDef:t,config:n}=e,r=_r("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...EZt(e),...xZt(e)}}function EZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=_r("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in JYt?{}:{ariaRoleDescription:{value:t}}}function xZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return RS(e,s,"description",u=>G4(u,e.config));const o=_r("description",n,r);if(o!=null)return{description:ci(o)};if(r.aria===!1)return{};const a=p4e(t,i,r);if(!Lr(a))return{description:{signal:uy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Js(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=_r(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=ci(u)));const l=i[e];return RS(t,l,o??e,c=>Pne({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function m4e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??_r("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=_r(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=_r(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ci(u)}:{},...l?{stroke:ci(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(P6e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Js("color",e,{vgChannel:c,defaultValue:o?u:l}),...Js("fill",e,{defaultValue:r.fill?u:void 0}),...Js("stroke",e,{defaultValue:r.stroke?l:void 0})}}function SZt(e){const{encoding:t,mark:n}=e,r=t.order;return!Hb(n)&&Gf(r)?RS(e,r,"zindex",i=>ci(i.value)):{}}function cx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Pne({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ci(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function la(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[ep(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=cx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=ire({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ls(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:TZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function TZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(un(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return rM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return bv(n,r,{suffix:"end"},{offset:s})}return Rne(e)}function ire({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Bb(n),u=ly(n),l=_r(n,s,o,{vgChannel:u});if(l!==void 0)return CC(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Bu.LOG,Bu.TIME,Bu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Ju(n)],mult:.5}}}}const AZt={left:"x",center:"xc",right:"x2"},CZt={top:"y",middle:"yc",bottom:"y2"};function g4e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return ly(e);const i=e==="x"?"align":"baseline",s=_r(i,t,n);let o;return Rt(s)?(Je(RKt(i)),o=void 0):o=s,e==="x"?AZt[o||(r==="top"?"left":"center")]:CZt[o||r]}function dM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?y4e(e,t,{defaultPos:n,defaultPos2:r}):la(e,t,{defaultPos:n})}function y4e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=ep(e),a=Ju(e),u=IZt(t,r,o),l=u[a]?g4e(e,i,s):ly(e);return{...la(e,t,{defaultPos:n,vgChannel:l}),...u}}function IZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Bb(n),l=Ju(n),c=ly(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?cx({channel:n,markDef:s,encoding:r,model:e}):cx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Ju(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=kZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:sP(n,s)||sP(n,{[n]:tM(n,s,a.style),[l]:tM(l,s,a.style)})||sP(n,a[i])||sP(n,a.mark)||{[c]:ire({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function kZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return un(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?bv(t,s,{suffix:"start"},{offset:u}):Rne({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function sP(e,t){const n=Ju(e),r=ly(e);if(t[r]!==void 0)return{[r]:CC(e,t[r])};if(t[e]!==void 0)return{[r]:CC(e,t[e])};if(t[n]){const i=t[n];if(cb(i))Je(SKt(n));else return{[n]:CC(e,i)}}}function dy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=ep(t),a=Ju(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??_r("size",i,n,{vgChannel:a}),p=m6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(ii(u.bin)||Eo(u.bin)||u.timeUnit&&!l)&&!(h&&!cb(h))&&!r[p]&&!uo(f)?PZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(un(u)&&uo(f)||m)&&!l?NZt(u,t,e):y4e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function RZt(e,t,n,r,i,s,o){if(cb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=$m("minBandSize",{type:o},r);return{signal:c?`max(${Sf(c)}, ${l})`:l}}else i.band!==1&&(Je(OKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Gy(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=us(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:cM(r.view,e)-2}}function NZt(e,t,n){var C,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Ju(t),f=ep(t),d=m6e(t),h=n.scaleName(d),p=n.getScaleComponent(cne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Js("size",n,{vgChannel:c,defaultRef:ci(r.size)}):Je(FKt(r.type)));const y=!!g,v=hFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:RZt(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&cb(v)&&!y?"top":"middle",w=g4e(t,r,s,b),E=w==="xc"||w==="yc",{offset:S,offsetType:T}=cx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=Rne({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:ire({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:cb(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const R=ly(f),M=g[c],P=S?{...M,offset:S}:M;return{[w]:A,[R]:Fe(A)?[A[0],{...A[1],offset:P}]:{...A,offset:P}}}}function lge(e,t,n,r,i,s,o){if(l6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=Sf(n),c=Sf(i),f=Sf(r),d=Sf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function PZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=hFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=ls(n)?_r("binSpacing",s,i)??0:0,m=ep(n),g=ly(n),y=ly(m),v=$m("minBandSize",s,i),{offset:b}=cx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=cx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=VXt({fieldDef:e,scaleName:u}),S=lge(n,p,c,h,b,v,E),T=lge(m,p,c,h,w??b,v,E),A=Rt(f)?{signal:`(1-${f.signal})/2`}:cb(f)?(1-f.band)/2:.5,C=cy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ii(e.bin)||e.timeUnit){const R=e.timeUnit&&C!==.5;return{[y]:cge({fieldDef:e,scaleName:u,bandPosition:A,offset:T,useRectOffsetField:R}),[g]:cge({fieldDef:e,scaleName:u,bandPosition:Rt(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:R})}}else if(Eo(e.bin)){const R=bv(e,u,{},{offset:T});if(Ze(t))return{[y]:R,[g]:bv(t,u,{},{offset:S})};if(Ub(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Je($6e(m))}function cge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return rM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:q4,endSuffix:W4}:{}})}const DZt=new Set(["aria","width","height"]);function Vc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?m4e(e):{};return{...OZt(e.markDef,t),...fge(e,"fill",n),...fge(e,"stroke",r),...Js("opacity",e),...Js("fillOpacity",e),...Js("strokeOpacity",e),...Js("strokeWidth",e),...Js("strokeDash",e),...SZt(e),...h4e(e),...rre(e,"href"),...wZt(e)}}function fge(e,t,n){const{config:r,mark:i,markDef:s}=e;if(_r("invalid",s,r)==="hide"&&n&&!Hb(i)){const a=$Zt(e,{invalid:!0,channels:A4});if(a)return{[t]:[{test:a,value:null},...ht(n)]}}return n?{[t]:n}:{}}function OZt(e,t){return QYt.reduce((n,r)=>(!DZt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ci(e[r])),n),{})}function $Zt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Bl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Nne(o,t)).join(` ${s} `)}}function sre(e){const{config:t,markDef:n}=e;if(_r("invalid",n,t)){const i=MZt(e,{channels:tp});if(i)return{defined:{signal:i}}}return{}}function MZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Bl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Nne(o,t)).join(` ${s} `)}}function dge(e,t){if(t!==void 0)return{[e]:ci(t)}}const qB="voronoi",v4e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(qB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Hb(s))return Je(rKt(s)),n;const o={name:e.getName(qB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...h4e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(qB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},b4e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Kne(e.bind),parse:(e,t,n)=>C4e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=v4e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Si(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:fb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+hy)[0],o=r+hR,a=i.items.map(l=>Si(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},hM="_toggle",_4e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+hM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+hy,r=t.name+hM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${wv(e)}}, `)+`${r} ? ${n} : null`}},LZt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=pt(t.clear)?By(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(b4e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Si(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+hy);r(i,"null"),_4e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+hM),r(i,"false"))}return n}},w4e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Kne(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Yf;return t&&!n&&Je(aKt),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},C4e(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ht(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=UB(t.bind)?t.bind.legend:"click",s=pt(i)?By(i,"view"):ht(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=UB(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Si(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+hy),o=r+hR,a=i.items.filter(d=>d.hasLegend).map(d=>Si(`${r}_${Si(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+hM),f=UB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function FZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of No(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&w4e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const E4e="_translate_anchor",x4e="_translate_delta",jZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=rm.defined(t),s=r+E4e,{x:o,y:a}=t.project.hasChannel;let u=By(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Gw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?DH(e,Ti):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?DH(e,co):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+x4e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&hge(e,t,o,"width",n),a!==void 0&&hge(e,t,a,"height",n),n}};function hge(e,t,n,r,i){const s=t.name,o=s+E4e,a=s+x4e,u=n.channel,l=rm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ti?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const S4e="_zoom_anchor",T4e="_zoom_delta",BZt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=rm.defined(t),s=r+T4e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ti)),l=rt(e.scaleName(co));let c=By(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Gw,f))),n.push({name:r+S4e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&pge(e,t,o,"width",n),a!==void 0&&pge(e,t,a,"height",n),n}};function pge(e,t,n,r,i){const s=t.name,o=n.channel,a=rm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?DH(e,o):u.name,h=s+T4e,p=`${s}${S4e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const db="_store",hy="_tuple",UZt="_modify",A4e="vlSelectionResolve",Y4=[_Zt,vZt,gZt,_4e,b4e,rm,w4e,LZt,jZt,BZt,v4e];function zZt(e){let t=e.parent;for(;t&&!Al(t);)t=t.parent;return t}function wv(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=zZt(e);if(r){const{facet:i}=r;for(const s of mc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function ore(e){return No(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function C4e(e,t){(pt(t.select)||!t.select.on)&&delete e.events,(pt(t.select)||!t.select.clear)&&delete e.clear,(pt(t.select)||!t.select.toggle)&&delete e.toggle}function OH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...OH(e.object)),t.push(...OH(e.property))),t)}function I4e(e){return e.object.type==="MemberExpression"?I4e(e.object):e.object.name==="datum"}function k4e(e){const t=Ate(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&I4e(r)&&n.add(OH(r).slice(1).join("."))}),n}class NS extends Or{clone(){return new NS(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=pM(this.model,this.filter,this),this._dependentFields=k4e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function VZt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Si(i.name),o=i.select,a=pt(o)?o:o.type,u=mt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:pt(u.on)?By(u.on,"scope"):ht(tn(u.on))},f=tn(i);for(const d of Y4)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function R4e(e,t,n,r="datum"){const i=pt(t)?t:t.param,s=Si(i),o=rt(s+db);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function N4e(e,t,n){const r=Si(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Rc(s))}]`}function HZt(e,t){for(const[n,r]of uy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Uu(new NS(t,e,{param:n}),i,_i.Lookup,e.component.data.outputNodeRefCounts)}}function pM(e,t,n){return AC(t,r=>pt(r)?r:wXt(r)?R4e(e,r,n):G6e(r))}function qZt(e,t){if(e)return Fe(e)&&!Ng(e)?e.map(n=>Bne(n,t)).join(", "):e}function WB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function CA(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=SQt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(dR(m)){const{condition:g,...y}=m,v=ht(g),b=zme[h];if(b){const{vgProp:w,part:E}=b,S=[...v.map(T=>{const{test:A,...C}=T;return{test:pM(null,A),...C}}),y];WB(c,E,w,S),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:S,...T}=E;return`${pM(null,S)} ? ${Ame(T)} : `}).join("")+Ame(y)};c[h]=w}}else if(Rt(m)){const g=zme[h];if(g){const{vgProp:y,part:v}=g;WB(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Lr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:us(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=sb(a,"datum.label",c.encode.labels.update.text.signal)),WB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of xFe)e.hasAxisPart(p)||delete c.encode[p];Lr(c.encode)&&delete c.encode}const h=qZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:us(l,0)}}}}function P4e(e){const{axes:t}=e.component,n=[];for(const r of tp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function WZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>CA(i,"grid",t)),...r.map(i=>CA(i,"grid",t)),...n.map(i=>CA(i,"main",t)),...r.map(i=>CA(i,"main",t))].filter(i=>i)}function mge(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Sf(o[c])} : ${Sf(a[c])}`};return l}return t[i]})])}function GZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Q6e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${nR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:mge(a,r,e,n),vgAxisConfig:mge(u,r,e,n),axisConfigStyle:YZt([...u,...a],r)}}function YZt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ht(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function $H(e,t,n,r={}){var s;const i=T6e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const gge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??KZt(n,e),gridScale:({model:e,channel:t})=>XZt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||O4e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||D4e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??JZt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??ZZt(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??ten({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:nen,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$4e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return C6e(i?[Bme(i)]:[],Ze(o)?[Bme(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>ren(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??ien(n,t)};function KZt(e,t){return!uo(e)&&Ze(t)&&!ii(t==null?void 0:t.bin)&&!Eo(t==null?void 0:t.bin)}function XZt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function QZt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:dI(s);{const{configValue:o}=$H("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?dI(o):n===Ti&&Hn([kne,Ine],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function MH(e){return`(((${e.signal} % 360) + 360) % 360)`}function D4e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=MH(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=MH(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function O4e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=MH(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function JZt(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function ZZt(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function een(e){return e==="x"?"bottom":"left"}function ten({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!uo(t)&&t!=="log"){if(Ze(e)){if(ii(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=ao(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function nen({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=H6e(n);if(r)return{signal:r}}}}function $4e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return I6e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function ren(e,t){const n=e.values;if(Fe(n))return EFe(t,n);if(Rt(n))return n}function ien(e,t){return e==="rect"&&oM(t)?1:0}class fx extends Or{clone(){return new fx(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=k4e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(qb(r)&&dFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${G6e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new fx(t,{calculate:u,as:dx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function dx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function K4(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function hx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return us((t||{})[e],i[e],n.header[e])}function X4(e,t,n,r){const i={};for(const s of e){const o=hx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const are=["row","column"],ure=["header","footer"];function sen(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=X4(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=K4(t,a),l=dI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...L4e(l,u),...M4e(u,l,s),...F4e(r,i,t,WQt,BFe)}}}function M4e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=O4e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function L4e(e,t){const n=D4e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function oen(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of ure)if(n[i])for(const s of n[i]){const o=uen(e,t,i,n,s);o!=null&&r.push(o)}return r}function aen(e,t){const{sort:n}=e;return fh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:Fe(n)?{field:dx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function LH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=X4(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Dne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=K4(t,a);return{text:{signal:u?sb(sb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...L4e(s,c),...M4e(c,s,o),...F4e(n,e,t,GQt,UFe)}}function uen(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=X4(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=LH(o,t,a))}const u=Al(e)&&!lR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:aen(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const len={column:{start:0,end:1},row:{start:1,end:0}};function cen(e,t){return len[t][e]}function fen(e,t){const n={};for(const r of mc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=X4(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=K4(r,o),u=cen(s,a);u!==void 0&&(n[a]=u)}}return Lr(n)?void 0:n}function F4e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=hx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function lre(e){return[...oP(e,"width"),...oP(e,"height"),...oP(e,"childWidth"),...oP(e,"childHeight")]}function oP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(uo(o)&&Gy(a)){const u=e.scaleName(n);return Al(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[yge(u,a)]:[yge(u,a),{name:i,update:j4e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=kH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function yge(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function j4e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=us(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Sf(o)}, ${Sf(s)}) * ${e}_step`}function B4e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function U4e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...RS(t,i,r,s=>ci(s.value))}},{})}function z4e(e,t){if(Al(t))return e==="theta"?"independent":"shared";if(OS(t))return"shared";if(gre(t))return ls(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function cre(e,t){const n=e.scale[t],r=ls(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(VKt(t)),"independent"):e[r][t]||"shared"}const den={...XQt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},V4e=Ye(den);class hen extends ug{}const vge={symbols:pen,gradient:men,labels:gen,entries:yen};function pen(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...eKt({},n,ZXt),...m4e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?H4e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Xu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=ci(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ci(m??1));else if(Fe(f.fill)){const g=FH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ci(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Xu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Fe(f.stroke)){const g=us(FH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==sg){const g=Ze(t)&&W4e(n,i,t);g?f.opacity=[{test:g,...ci(m??1)},ci(u.legend.unselectedOpacity)]:m&&(f.opacity=ci(m))}return f={...f,...e},Lr(f)?void 0:f}function men(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?H4e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ci(l)),a={...a,...e},Lr(a)?void 0:a}function gen(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?W4e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;lb(c)?f=Af({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Af({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Af({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Lr(d)?void 0:d}function yen(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function H4e(e){return q4e(e,(t,n)=>Math.max(t,n.value))}function FH(e){return q4e(e,(t,n)=>us(t,n.value))}function q4e(e,t){if(dQt(e))return ht(e.condition).reduce(t,e.value);if(Gf(e))return e.value}function W4e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Si(s)+db)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const bge={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return rFe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return iFe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Sen(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Ten(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??ben(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Ww(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qw(n)&&Tf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>ven(t,e)};function ven(e,t){const n=e.values;if(Fe(n))return EFe(t,n);if(Rt(n))return n}function ben(e,t,n,r){if(t!=="shape"){const i=FH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function _en(e){const{legend:t}=e;return us(t.type,wen(e))}function wen({channel:e,timeUnit:t,scaleType:n}){if(qw(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(Tf(n))return"gradient"}return"symbol"}function Een({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??xen(n,t)}function xen(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Sen({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Tf(i))return n==="horizontal"?r==="top"||r==="bottom"?_ge(t,"width",o,s):o:_ge(t,"height",u,a)}function _ge(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Ten(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function G4e(e){const t=Wi(e)?Aen(e):Ren(e);return e.component.legends=t,t}function Aen(e){const{encoding:t}=e,n={};for(const r of[Xu,...VFe]){const i=Rs(t[r]);!i||!e.getScaleComponent(r)||r===Qu&&Ze(i)&&i.type===kS||(n[r]=ken(e,r))}return n}function Cen(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Ien(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function ken(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new hen({},Cen(e,t));FZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Rs(i[t]),f=Ze(c)?(w=ao(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=_en({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Een({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of V4e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in bge?bge[E](m):n[E];if(S!==void 0){const T=Ien(S,E,n,e.fieldDef(t));(T||s.legend[E]===void 0)&&a.set(E,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=U4e(g[E]??{},e),T=E in vge?vge[E](S,b):S;T!==void 0&&!Lr(T)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${Si(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Lr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Ren(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){G4e(r);for(const i of Ye(r.component.legends))n.legend[i]=cre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Y4e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Y4e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of V4e){const c=fy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Nen(f,d);case"title":return k6e(f,d);case"type":return i=!0,al("symbol")}return H4(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&eM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&eM(e.explicit,["encode","gradient"])),e}function Nen(e,t){return t.value==="circle"?t:e}function Pen(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function K4e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Fr(s.get("domains"));if(n[o])for(const a of n[o])Y4e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return No(n).flat().map(i=>Den(i,e.config)).filter(i=>i!==void 0)}function Den(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of VFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=sb(r,"datum.label",s.encode.labels.update.text.signal)),Pen(s,"labels","text",{signal:l})}return s}}function Oen(e){return OS(e)||gre(e)?$en(e):X4e(e)}function $en(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),X4e(e))}function X4e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Men=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Q4e extends ug{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function J4e(e){e.component.projection=Wi(e)?Len(e):Ben(e)}function Len(e){if(e.hasProjection){const t=Eu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Fen(e):void 0,s=new Q4e(e.projectionName(!0),{...Eu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Fen(e){const t=[],{encoding:n}=e;for(const r of[[ad,od],[Nc,ud]])(Rs(n[r[0]])||Rs(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Qu)&&e.typedFieldDef(Qu).type===kS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(_i.Main)),t}function jen(e,t){const n=rne(Men,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&El(e.get(i),t.get(i))));if(El(e.size,t.size)){if(n)return e;if(El(e.explicit,{}))return t;if(El(t.explicit,{}))return e}return null}function Ben(e){if(e.children.length===0)return;let t;for(const r of e.children)J4e(r);const n=rne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=jen(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Q4e(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Uen(e,t,n,r){if(fR(t,n)){const i=Wi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:uR(s,o,i.format,i.formatType,r)}}return{}}function Z4e(e,t){return`${w6e(e)}_${t}`}function zen(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function fre(e,t,n){const r=F4(n,void 0)??{},i=Z4e(r,t);return e.getName(`${i}_bins`)}function Ven(e){return"as"in e}function wge(e,t,n){let r,i;Ven(e)?r=pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...F4(t,void 0)},o=Z4e(s,e.field),{signal:a,extentSignal:u}=zen(n,o);if(C4(s.extent)){const c=s.extent;i=N4e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class hh extends Or{clone(){return new hh(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Za(s)&&ii(s.bin)){const{key:a,binComponent:u}=wge(s,s.bin,n);i[a]={...u,...i[a],...Uen(n,s,o,n.config)}}return i},{});return Lr(r)?null:new hh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=wge(n,n.bin,r);return new hh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Xd([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(No(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(No(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return No(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Rc(t.field),as:r,signal:t.signal,...C4(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Rc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Hen(e,t,n,r){var s;const i=Wi(r)?r.encoding[ep(t)]:void 0;if(Za(n)&&Wi(r)&&pFe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=cy({fieldDef:n,markDef:a,config:u});hI(o)&&l!==.5&&ls(t)&&(e.add(at(n,{suffix:q4})),e.add(at(n,{suffix:W4}))),n.bin&&fR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(f6e(t)){const o=c6e(t);e.add(r.getName(o))}else e.add(at(n));return qb(n)&&OXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function qen(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Mf extends Or{clone(){return new Mf(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Om(u)||Wy(u)){const c=Om(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);og(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Hen(s,a,o,n)}),s.size+Ye(i).length===0)?null:new Mf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new Mf(t,r,i)}merge(t){return n6e(this.dimensions,t.dimensions)?(qen(this.measures,t.measures),!0):(sXt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Rc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Rc),ops:t,fields:n,as:r}}}class PS extends Or{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of mc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ii(a)?[at(o,{binSuffix:"end"})]:[]],...fh(u)?{sortField:u}:Fe(u)?{sortIndexField:dx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of mc)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of mc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of mc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of tp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(uo(i)&&Gy(s)){const o=Q4(this.childModel,n),a=mre(o);a?t[n]=a:Je(gne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=O4,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of are){for(const c of ure){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[nm,tm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Ege(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Wen(e,t){const n=one(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Ege(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Ege(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(pKt(t)),null}function Gen(e){const t={};return OD(e.filter,n=>{if(W6e(n)){let r=null;_ne(n)?r=ml(n.equal):Ene(n)?r=ml(n.lte):wne(n)?r=ml(n.lt):xne(n)?r=ml(n.gt):Sne(n)?r=ml(n.gte):Tne(n)?r=n.range[0]:Ane(n)&&(r=(n.oneOf??n.in)[0]),r&&(zb(r)?t[n.field]="date":lr(r)?t[n.field]="number":pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Yen(e){const t={};function n(r){ux(r)?t[r.field]="date":r.type==="quantitative"&&qYt(r.aggregate)?t[r.field]="number":tx(r.field)>1?r.field in t||(t[r.field]="flatten"):qb(r)&&fh(r.sort)&&tx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Wi(e)||Al(e))&&e.forEachFieldDef((r,i)=>{if(Za(r))n(r);else{const s=Bb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Wi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Hb(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Ken(e){const t={};if(Wi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&tx(i.field)>1&&(t[i.field]="flatten")}return t}class ca extends Or{clone(){return new ca(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!C0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(Pme(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(Pme(a,n[a],u)))}const s=new ug(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ca(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];tx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?tx(n)>1:!0).map(n=>{const r=Wen(n,this._parse[n]);return r?{type:"formula",expr:r,as:CS(n)}:null}).filter(n=>n!==null)}}class py extends Or{clone(){return new py(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Yf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Yf}}}class pR extends Or{clone(){return new pR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class mR extends Or{clone(){return new mR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class hb extends Or{constructor(t){super(null),t??(t={name:"source"});let n;if(C0(t)||(n=t.format?{...ju(t.format,["parse"])}:{}),pI(t))this._data={values:t.values};else if(lx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else a4e(t)?this._data={values:[{type:"Sphere"}]}:(s4e(t)||C0(t))&&(this._data={});this._generator=C0(t),t.name&&(this._name=t.name),n&&!Lr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var xge=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Xen=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},IA;function dre(e){return e instanceof hb||e instanceof pR||e instanceof mR}class hre{constructor(){IA.set(this,void 0),xge(this,IA,!1,"f")}setModified(){xge(this,IA,!0,"f")}get modifiedFlag(){return Xen(this,IA,"f")}}IA=new WeakMap;class Wb extends hre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class pre extends hre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Qen extends pre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Jen extends pre{constructor(t){super(),this.requiresSelectionId=t&&ore(t)}run(t){t instanceof py&&(this.requiresSelectionId&&(dre(t.parent)||t.parent instanceof Mf||t.parent instanceof ca)||(this.setModified(),t.remove()))}}class Zen extends hre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof dh&&(r=t.producedFields(),ine(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class etn extends pre{constructor(){super()}run(t){t instanceof Uu&&!t.isRequired()&&(this.setModified(),t.remove())}}class ttn extends Wb{run(t){if(!dre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ca)if(t instanceof ca)this.setModified(),t.merge(n);else{if(sne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class ntn extends Wb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ca);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Lr(i)){this.setModified();const o=new ca(t,i);for(const a of n){if(a instanceof ca)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ca&&Ye(a.parse).length===0&&a.remove()}}}}}class rtn extends Wb{run(t){t instanceof Uu||t.numChildren()>0||t instanceof PS||t instanceof hb||(this.setModified(),t.remove())}}class itn extends Wb{run(t){const n=t.children.filter(i=>i instanceof dh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class stn extends Wb{run(t){const n=t.children.filter(i=>i instanceof Mf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class otn extends Wb{constructor(t){super(),this.model=t}run(t){const n=!(dre(t)||t instanceof NS||t instanceof ca||t instanceof py),r=[],i=[];for(const s of t.children)s instanceof hh&&(n&&!sne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof hh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class atn extends Wb{run(t){const n=[...t.children];if(!ib(n,o=>o instanceof Uu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Uu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Uu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Gb extends Or{clone(){return new Gb(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function utn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function ltn(e){return Fe(e)&&e.every(t=>pt(t))&&e.length>1}class im extends Or{clone(){return new im(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(us(f.order,"ascending"));const l={field:a,order:u};let c;return ltn(s)?c=s:pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new im(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Rh(p)}).filter(h=>!!h),c=utn(n),f=n.encoding.order;let d;if(Fe(f)||Ze(f))d=A6e(f);else{const h=mFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new im(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class DS extends Or{clone(){return new DS(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Xd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>pne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function ctn(e){function t(n){if(!(n instanceof PS)){const r=n.clone();if(r instanceof Uu){const i=BH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Mf||r instanceof im||r instanceof DS||r instanceof Gb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function jH(e){if(e instanceof PS)if(e.numChildren()===1&&!(e.children[0]instanceof Uu)){const t=e.children[0];(t instanceof Mf||t instanceof im||t instanceof DS||t instanceof Gb)&&t.addDimensions(e.fields),t.swapWithParent(),jH(e)}else{const t=e.model.component.data.main;e5e(t);const n=ctn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(jH)}function e5e(e){if(e instanceof Uu&&e.type===_i.Main&&e.numChildren()===1){const t=e.children[0];t instanceof PS||(t.swapWithParent(),e5e(e))}}const BH="scale_",aP=5;function UH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!UH(t.children))return!1}return!0}function Xc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Sge(e,t,n){let r=e.sources,i=!1;return i=Xc(new etn,r)||i,i=Xc(new Jen(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Xc(new rtn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Xc(new ttn,r)||i,i=Xc(new otn(t),r)||i,i=Xc(new Zen,r)||i,i=Xc(new ntn,r)||i,i=Xc(new stn,r)||i,i=Xc(new itn,r)||i,i=Xc(new Qen,r)||i,i=Xc(new atn,r)||i),e.sources=r,i}function ftn(e,t){UH(e.sources);let n=0,r=0;for(let i=0;i<aP&&Sge(e,t,!0);i++)n++;e.sources.map(jH);for(let i=0;i<aP&&Sge(e,t,!1);i++)r++;UH(e.sources),Math.max(n,r)===aP&&Je(`Maximum optimization runs(${aP}) reached.`)}class Xs{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Xs(()=>t(n))}}function t5e(e){Wi(e)?dtn(e):htn(e)}function dtn(e){const t=e.component.scales;for(const n of Ye(t)){const r=mtn(e,n);if(t[n].setWithExplicit("domains",r),ytn(e,n),e.component.data.isFaceted){let s=e;for(;!Al(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Wp(a)&&(a.data=BH+a.data.replace(BH,""))}}}function htn(e){for(const n of e.children)t5e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=fy(r,o.getWithExplicit("domains"),"domains","scale",zH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(cKt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function ptn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Tge(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Tge(t,n);if(i)return"unaggregated"}return e}function mtn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=ptn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Rs(r.x2)?Rs(r.x)?fy(Eg(n,i,e,"x"),Eg(n,i,e,"x2"),"domain","scale",zH):Eg(n,i,e,"x2"):t==="y"&&Rs(r.y2)?Rs(r.y)?fy(Eg(n,i,e,"y"),Eg(n,i,e,"y2"),"domain","scale",zH):Eg(n,i,e,"y2"):Eg(n,i,e,t)}function gtn(e,t,n){return e.map(r=>({signal:`{data: ${j4(r,{timeUnit:n,type:t})}}`}))}function GB(e,t,n){var i;const r=(i=ao(n))==null?void 0:i.unit;return t==="temporal"||r?gtn(e,t,r):[e]}function Eg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Rs(i[r]),{type:c}=l,f=l.timeUnit;if(DXt(t)){const p=Eg(e,void 0,n,r),m=GB(t.unionWith,c,f);return Id([...m,...p.value])}else{if(Rt(t))return Id([t]);if(t&&t!=="unaggregated"&&!Z6e(t))return Id(GB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return al([[0,1]]);const p=n.requestDataName(_i.Main);return al([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=og(r)&&Ze(l)?vtn(n,r,e):void 0;if(np(l)){const p=GB([l.datum],c,f);return al(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(_i.Main),{field:m}=l;return al([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ii(h.bin)){if(uo(e))return al(e==="bin-ordinal"?[]:[{data:fI(d)?n.requestDataName(_i.Main):n.requestDataName(_i.Raw),field:n.vgField(r,fR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ii(p)){const m=fre(n,h.field,p);return al([new Xs(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return al([{data:n.requestDataName(_i.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[ep(r)];if(pFe(h,p,s,a)){const m=n.requestDataName(_i.Main),g=cy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=hI(o)&&g!==.5&&ls(r);return al([{data:m,field:n.vgField(r,y?{suffix:q4}:{})},{data:m,field:n.vgField(r,{suffix:y?W4:"end"})}])}}return al(d?[{data:fI(d)?n.requestDataName(_i.Main):n.requestDataName(_i.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(_i.Main),field:n.vgField(r)}])}function YB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":O4),...r?{field:Rc(r)}:{},...i?{order:i}:{}}}function ytn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=Z6e(r)&&r,o=Ub(i)&&C4(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function vtn(e,t,n){if(!uo(n))return;const r=e.fieldDef(t),i=r.sort;if(dFe(i))return{op:"min",field:dx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(fh(i)){const a=s&&!o.has(i.field);return YB(i,a)}else if(fFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Om(c)||Wy(c))return YB({field:at(l),order:u},d);if(pne(c)||!c)return YB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function Tge(e,t){const{aggregate:n,type:r}=e;return n?pt(n)&&!GYt.has(n)?{valid:!1,reason:MKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:LKt(e)}:{valid:!0}:{valid:!1,reason:$Kt(e)}}function zH(e,t,n,r){return e.explicit&&t.explicit&&Je(zKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function btn(e){const t=Xd(e.map(o=>{if(Wp(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=Xd(e.map(o=>{if(Wp(o)){const a=o.sort;return a!==void 0&&!fI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Wp(o)&&n.length>0){let a=n[0];if(n.length>1){Je(Ome);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Xd(n.map(o=>fI(o)||!("op"in o)||pt(o.op)&&o.op in VYt?o:(Je(HKt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Je(Ome),i=!0);const s=Xd(e.map(o=>Wp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function mre(e){if(Wp(e)&&pt(e.field))return e.field;if(YYt(e)){let t;for(const n of e.fields)if(Wp(n)&&pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(qKt),t}return Je(WKt),t}else if(KYt(e)){Je(GKt);const t=e.fields[0];return pt(t)?t:void 0}}function Q4(e,t){const r=e.component.scales[t].get("domains").map(i=>(Wp(i)&&(i.data=e.lookupDataSource(i.data)),i));return btn(r)}function n5e(e){return OS(e)||gre(e)?e.children.reduce((t,n)=>t.concat(n5e(n)),Age(e)):Age(e)}function Age(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=_tn(i.range,s,n,e),h=Q4(e,n),p=a?pZt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function _tn(e,t,n,r){if(ls(n)){if(Gy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&Wp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class r5e extends ug{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ib(this.get("domains"),t=>Fe(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const wtn=["range","scheme"];function Etn(e){const t=e.component.scales;for(const n of A4){const r=t[n];if(!r)continue;const i=xtn(n,e);r.setWithExplicit("range",i)}}function Cge(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Ju(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new Xs(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ii(r)){const a=fre(e,i,r);return new Xs(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function xtn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of wtn)if(n[f]!==void 0){const d=AH(s,f),h=eFe(e,f);if(!d)Je(D6e(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(Fe(p)){if(ls(e))return Id(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Xs.fromName(y,g)}return m}))}else if(mt(p))return Id({data:t.requestDataName(_i.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Id(p)}case"scheme":return Id(Stn(n[f]))}}const o=e===Ti||e==="xOffset"?"width":"height",a=r[o];if(Nh(a)){if(ls(e))if(uo(s)){const f=s5e(a,t,e);if(f)return Id({step:f})}else Je(O6e(o));else if(sR(e)){const f=e===Uy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=o5e(a,s);if(p)return Id(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Ttn(e,t);return(u!==void 0||l!==void 0)&&AH(s,"rangeMin")&&Fe(c)&&c.length===2?Id([u??c[0],l??c[1]]):al(c)}function Stn(e){return PXt(e)?{scheme:e.name,...ju(e,["name"])}:{scheme:e}}function i5e(e,t,n,{center:r}={}){const i=Ju(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===co&&Bl(n)?r?[Xs.fromName(a=>`${o(a)}/2`,s),Xs.fromName(a=>`-${o(a)}/2`,s)]:[Xs.fromName(o,s),0]:r?[Xs.fromName(a=>`-${o(a)}/2`,s),Xs.fromName(a=>`${o(a)}/2`,s)]:[0,Xs.fromName(o,s)]}function Ttn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Rs(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ti:case co:{if(Hn(["point","band"],u)){const f=a5e(e,n,r.view);if(Nh(f))return{step:s5e(f,t,e)}}return i5e(e,t,u)}case Uy:case IS:return Atn(e,t,u);case ig:{const f=t.component.scales[e].get("zero"),d=u5e(i,f,r),h=ktn(i,n,t,r);return sx(u)?Itn(d,h,Ctn(u,r,l,e)):[d,h]}case zc:return[0,Math.PI*2];case jb:return[0,360];case sd:return[0,new Xs(()=>{const f=t.getSignalName(Al(t.parent)?"child_width":"width"),d=t.getSignalName(Al(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Hy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case qy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Qu:return"symbol";case Xu:case Jh:case Zh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case sg:case zy:case Vy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function s5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=cne(n),o=r[s];if(qFe({step:e,offsetIsDiscrete:un(o)&&Y6e(o.type)})==="offset"&&AFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${ZYt(f)})`}}else return e.step}function o5e(e,t){if(qFe({step:e,offsetIsDiscrete:uo(t)})==="offset")return{step:e.step}}function Atn(e,t,n){const r=e===Uy?"x":"y",i=t.getScaleComponent(r);if(!i)return i5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=a5e(r,t.size,t.config.view);if(Nh(l)){const c=o5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=H6e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=cy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return e6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function a5e(e,t,n){const r=e===Ti?"width":"height",i=t[r];return i||fM(n,r)}function Ctn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Fe(n)?n.length+1:(Je(nXt(r)),3)}}function Itn(e,t,n){const r=()=>{const i=Sf(t),s=Sf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Xs(r):{signal:r()}}function u5e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${u5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(I4("size",e))}const Ige=.95;function ktn(e,t,n,r){const i={x:Cge(n,"x"),y:Cge(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=kge(t,i,r.view);return lr(s)?s-1:new Xs(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=kge(t,i,r.view);return lr(s)?Math.pow(Ige*s,2):new Xs(()=>`pow(${Ige} * ${s.signal}, 2)`)}}throw new Error(I4("size",e))}function kge(e,t,n){const r=Nh(e.width)?e.width.step:cM(n,"width"),i=Nh(e.height)?e.height.step:cM(n,"height");return t.x||t.y?new Xs(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function l5e(e,t){Wi(e)?Rtn(e,t):f5e(e,t)}function Rtn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Rs(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=AH(h,t),y=eFe(a,t);if(d!==void 0&&(g?y&&Je(y):Je(D6e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":zb(u[t])||b==="temporal"||v?l.set(t,{signal:j4(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Rge?Rge[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:CFe(i,a),hasSecondaryRangeChannel:!!i[ep(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Rge={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?Ntn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Ptn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Dtn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Otn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>$tn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Mtn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return Ltn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Ftn(e,t,n,r,i,s.scale,o)};function c5e(e){Wi(e)?Etn(e):f5e(e,"range")}function f5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?c5e(r):l5e(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=fy(i,a,t,"scale",i4e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Ntn(e,t){const n=t.bin;if(ii(n)){const r=fre(e,t.field,n);return new Xs(()=>e.getSignalName(r))}else if(Eo(n)&&Ub(n)&&n.step!==void 0)return{step:n.step}}function Ptn(e,t){if(Hn([Xu,Jh,Zh],e)&&t!=="nominal")return"hcl"}function Dtn(e,t,n,r,i,s){var o;if(!((o=Rh(s))!=null&&o.bin||Fe(n)||i!=null||r!=null||Hn([Bu.TIME,Bu.UTC],e)))return ls(t)?!0:void 0}function Otn(e,t,n,r,i,s){if(ls(e)){if(Tf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Bu.POINT)return n.pointPadding}}function $tn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:us(o,n==="bar"?a:u)}else if(sR(t)&&r===Bu.BAND)return i.offsetBandPaddingInner}}function Mtn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Bu.BAND)return us(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(sR(t)){if(n===Bu.POINT)return .5;if(n===Bu.BAND)return i.offsetBandPaddingOuter}}}function Ltn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Bl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Bl(e)&&t==="descending")return!0}function Ftn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Bl(i)){if(Fe(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!sx(i))return!0;if(!(Ze(t)&&t.bin)&&Hn([...tp,...$Yt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function jtn(e,t,n,r,i=!1){const s=Btn(t,n,r,i),{type:o}=e;return og(t)?o!==void 0?jXt(t,o)?Ze(n)&&!FXt(o,n.type)?(Je(BKt(o,s)),s):o:(Je(jKt(t,o,s)),s):s:null}function Btn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(qw(e)||jB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(BB(e,"ordinal")),"ordinal";if(ls(e)||sR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in hne)return"band";const s=n[Ju(e)];return cb(s)||ax(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return qw(e)?"time":jB(e)==="discrete"?(Je(BB(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&ao(t.timeUnit).utc?"utc":"time";case"quantitative":return qw(e)?Ze(t)&&ii(t.bin)?"bin-ordinal":"linear":jB(e)==="discrete"?(Je(BB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(N6e(t.type))}function Utn(e,{ignoreRange:t}={}){d5e(e),t5e(e);for(const n of LXt)l5e(e,n);t||c5e(e)}function d5e(e){Wi(e)?e.component.scales=ztn(e):e.component.scales=Htn(e)}function ztn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of A4){const o=Rs(t[s]);if(o&&n===uFe&&s===Qu&&o.type===kS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=CFe(t,s),l=jtn(a,s,o,r,u);i[s]=new r5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Vtn=i4e((e,t)=>Mme(e)-Mme(t));function Htn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){d5e(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=z4e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?CXt(a.value,u.value)?r[o]=fy(a,u,"type","scale",Vtn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new r5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class KB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Wi(e){return(e==null?void 0:e.type)==="unit"}function Al(e){return(e==null?void 0:e.type)==="facet"}function gre(e){return(e==null?void 0:e.type)==="concat"}function OS(e){return(e==null?void 0:e.type)==="layer"}class yre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Eu(a),this.name=t.name??i,this.title=Ng(t.title)?{text:t.title}:t.title?Eu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new KB,this.projectionNameMap=r?r.projectionNameMap:new KB,this.signalNameMap=r?r.signalNameMap:new KB,this.data=t.data,this.description=t.description,this.transforms=QJt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:tJt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:$4(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ug,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Utn(this)}parseProjection(){J4e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){G4e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=ci(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ci(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Lr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=fen(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of mc)t[r].title&&n.push(sen(this,r));for(const r of are)n=n.concat(oen(this,r));return n}assembleAxes(){return WZt(this.component.axes,this.config)}assembleLegends(){return K4e(this)}assembleProjections(){return Oen(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...E6e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Lr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Al(this.parent)?n5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Si((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(_i[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Al(this.parent)){const n=B4e(t),r=T4(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(uo(s)&&Gy(o)){const a=i.get("name"),u=Q4(this,r),l=mre(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:j4e(a,i,c)}}else return Je(gne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(h6e(t)&&og(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(iKt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class h5e extends yre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return RQt(this.getMapping(),(r,i,s)=>{const o=Rh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Vne(this.getMapping(),(r,i)=>{const s=Rh(r);s&&t(s,i)},n)}}class J4 extends Or{clone(){return new J4(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class Z4 extends Or{clone(){return new Z4(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class mI extends Or{clone(){return new mI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(_r("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=og(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Bl(d)&&l.aggregate!=="count"&&!Hb(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new mI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class e5 extends Or{clone(){return new e5(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class t5 extends Or{clone(){return new t5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Yw extends Or{clone(){return new Yw(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ad,od],[Nc,ud]]){const s=i.map(o=>{const a=Rs(n.encoding[o]);return Ze(a)?a.field:np(a)?{expr:`${a.datum}`}:Gf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Yw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Qu)){const i=n.typedFieldDef(Qu);i.type===kS&&(t=new Yw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class gI extends Or{clone(){return new gI(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ad,od],[Nc,ud]]){const i=r.map(o=>{const a=Rs(n.encoding[o]);return Ze(a)?a.field:np(a)?{expr:`${a.datum}`}:Gf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Nc?"2":"";(i[0]||i[1])&&(t=new gI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ev extends Or{clone(){return new Ev(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ev(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=kFe(n.mark,r);return new Ev(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:PJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class n5 extends Or{clone(){return new n5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class yI extends Or{clone(){return new yI(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(DJt(o)){let u=g5e(o.data,s);u||(u=new hb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Uu(u,l,_i.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(OJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Si(u),u)}catch{throw new Error(uKt(u))}if(a=l.materialized,!a)throw new Error(lKt(u))}return new yI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ht(this.transform.as)}:{}};else{let n=this.transform.as;pt(n)||(Je(yKt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class r5 extends Or{clone(){return new r5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class i5 extends Or{clone(){return new i5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class s5 extends Or{clone(){return new s5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Xd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class o5 extends Or{clone(){return new o5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function p5e(e){let t=0;function n(r,i){if(r instanceof hb&&!r.isGenerator&&!lx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ca&&(r.parent instanceof hb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof PS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof pR||r instanceof mR||r instanceof mI||r instanceof NS||r instanceof fx||r instanceof gI||r instanceof Mf||r instanceof yI||r instanceof DS||r instanceof Gb||r instanceof t5||r instanceof e5||r instanceof J4||r instanceof n5||r instanceof r5||r instanceof i5||r instanceof py||r instanceof o5||r instanceof s5||r instanceof Z4)&&i.transform.push(r.assemble()),(r instanceof hh||r instanceof dh||r instanceof Ev||r instanceof im||r instanceof Yw)&&i.transform.push(...r.assemble()),r instanceof Uu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Uu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Uu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function qtn(e){const t=[],n=p5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Wtn(e,t){const n=[],r=p5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Gtn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function Ytn(e){for(const t of mc)Ktn(e,t);Nge(e,"x"),Nge(e,"y")}function Ktn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=hx("title",null,r,t);let l=Ww(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Fe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=hx("labelOrient",a.header,r,t),f=a.header!==null?us((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[m5e(e,t,f)]}}}function m5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Nge(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=cre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Gtn(a.get("orient"));o[u]??(o[u]=[m5e(e,s,!1)]);const l=CA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Xtn(e){vre(e),mM(e,"width"),mM(e,"height")}function Qtn(e){vre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";mM(e,t),mM(e,n)}function vre(e){for(const t of e.children)t.parseLayoutSize()}function mM(e,t){const n=B4e(t),r=T4(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??z4e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=fy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Jtn(e){const{size:t,component:n}=e;for(const r of tp){const i=Ju(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Nh(s)?"step":s,!0)}else{const s=Ztn(e,i);n.layoutSize.set(i,s,!1)}}}function Ztn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(uo(s)){const a=fM(r.view,t);return Gy(o)||Nh(a)?"step":a}else return kH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return kH(r.view,t);{const s=fM(r.view,t);return Nh(s)?s.step:s}}}function VH(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class IC extends h5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=xre(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!lR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![tm,nm].includes(i)){Je(I4(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(SH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Une(t,n);return r.header?r.header=Eu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=a5(this),this.child.parseData()}parseLayoutSize(){vre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Ytn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of mc)for(const r of ure){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=hx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=K4(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof IC))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof IC?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof IC){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of tp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(uo(o)&&Gy(a)){const u=Q4(this.child,i),l=mre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(gne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of mc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ii(d)&&u.push(at(f,{binSuffix:"end"})),fh(h)){const{field:p,op:m=O4}=h,g=VH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Fe(h)){const p=dx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?fh(r.sort)?[VH(r,r.sort,{expr:"datum"})]:Fe(r.sort)?[dx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(fh(i)?i.order:!Fe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return LH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of are)if(t[s]){const o=hx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return LH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=qtn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:mc.map(u=>this.facetSortFields(u)).flat(),order:mc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(cZt(this,[]))}]}getMapping(){return this.facet}}function enn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(fh(s.sort)){const{field:o,op:a=O4}=s.sort;e=i=new Gb(e,{joinaggregate:[{op:a,field:o,as:VH(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function g5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(pI(e)&&pI(a)){if(El(e.values,a.values))return o}else if(lx(e)&&lx(a)){if(e.url===a.url)return o}else if(s4e(e)&&e.name===o.dataName)return o}}return null}function tnn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new hb({values:[]});return t.push(r),r}const n=g5e(e.data,t);if(n)return C0(e.data)||(n.data.format=t6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new hb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function nnn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(HJt(i))o=e=new fx(e,i),s="derived";else if(ere(i)){const a=Gen(i);o=e=ca.makeWithAncestors(e,{},a,n)??e,e=new NS(e,t,i.filter)}else if(e4e(i))o=e=hh.makeFromTransform(e,i,t),s="number";else if(WJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ca(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=dh.makeFromTransform(e,i);else if(GJt(i))o=e=Mf.makeFromTransform(e,i),s="number",ore(t)&&(e=new py(e));else if(ZFe(i))o=e=yI.make(e,t,i,r++),s="derived";else if(UJt(i))o=e=new DS(e,i),s="number";else if(zJt(i))o=e=new Gb(e,i),s="number";else if(YJt(i))o=e=im.makeFromTransform(e,i),s="derived";else if(KJt(i))o=e=new t5(e,i),s="derived";else if(XJt(i))o=e=new Z4(e,i),s="derived";else if(VJt(i))o=e=new e5(e,i),s="derived";else if($Jt(i))o=e=new s5(e,i),s="derived";else if(BJt(i))e=new o5(e,i);else if(qJt(i))o=e=Ev.makeFromTransform(e,i),s="derived";else if(MJt(i))o=e=new J4(e,i),s="derived";else if(LJt(i))o=e=new r5(e,i),s="derived";else if(FJt(i))o=e=new i5(e,i),s="derived";else if(jJt(i))o=e=new n5(e,i),s="derived";else{Je(gKt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function a5(e){var h;let t=tnn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(C0(i)||lx(i)||pI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new uZt;C0(i)?(o4e(i)?t=new mR(t,i.sequence):tre(i)&&(t=new pR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ca.makeExplicit(t,e,o)??t,t=new py(t);const a=e.parent&&OS(e.parent);(Wi(e)||Al(e))&&a&&(t=hh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=nnn(t,e,o));const u=Ken(e),l=Yen(e);t=ca.makeWithAncestors(t,{},{...u,...l},o)??t,Wi(e)&&(t=Yw.parseAll(t,e),t=gI.parseAll(t,e)),(Wi(e)||Al(e))&&(a||(t=hh.makeFromEncoding(t,e)??t),t=dh.makeFromEncoding(t,e)??t,t=fx.parseAllForSortIndex(t,e));const c=t=Pge(_i.Raw,e,t);if(Wi(e)){const p=Mf.makeFromEncoding(t,e);p&&(t=p,ore(e)&&(t=new py(t))),t=Ev.makeFromEncoding(t,e)??t,t=im.makeFromEncoding(t,e)??t}Wi(e)&&(t=mI.make(t,e)??t);const f=t=Pge(_i.Main,e,t);Wi(e)&&HZt(e,f);let d=null;if(Al(e)){const p=e.getName("facet");t=enn(t,e.facet)??t,d=new PS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Pge(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Uu(n,s,e,i);return r[s]=o,o}class rnn extends yre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(hKt),this.children=this.getChildren(t).map((l,c)=>xre(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=a5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return z4(t)?t.vconcat:Jne(t)?t.hconcat:t.concat}parseLayoutSize(){Qtn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=lre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function inn(e){return e===!1||e===null}const snn={disable:1,gridScale:1,scale:1,...SFe,labelExpr:1,encode:1},y5e=Ye(snn);class bre extends ug{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new bre(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!inn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function onn(e,t,n){const{encoding:r,config:i}=e,s=Rs(r[t])??Rs(r[ep(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(lb(u))return{text:Af({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(ox(s)==="quantitative"){if(ax(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Af({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Af({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(ox(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Af({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function ann(e){return tp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[pnn(n,e)]),t),{})}const unn={bottom:"top",top:"bottom",left:"right",right:"left"};function lnn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=cre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=cnn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of tp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=unn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function cnn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=fnn(i,s)}}}else return t.map(n=>n.clone());return e}function fnn(e,t){for(const n of y5e){const r=fy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return k6e(i,s);case"gridScale":return{explicit:i.explicit,value:us(i.value,s.value)}}return H4(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function dnn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:dI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$4e(r,i))return!0}return e===n[t]}const hnn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function pnn(e,t){var y,v;let n=t.axis(e);const r=new bre,i=Rs(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||een(e),u=t.getScaleComponent(e).get("type"),l=GZt(e,u,a,t.config),c=n!==void 0?!n:$H("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=QZt(i,n,e,o.style,l),d=iFe(n.formatType,i,u),h=rFe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of y5e){const w=b in gge?gge[b](p):Vme(b)?n[b]:void 0,E=w!==void 0,S=dnn(w,b,n,t,e);if(E&&S)r.set(b,w,S);else{const{configValue:T=void 0,configFrom:A=void 0}=Vme(b)&&b!=="values"?$H(b,o.style,n.style,l):{},C=T!==void 0;E&&!C?r.set(b,w,S):(A!=="vgAxisConfig"||hnn.has(b)&&C||dR(T)||Rt(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=xFe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=U4e(m[w]??{},t),S=w==="labels"?onn(t,e,E):E;return S!==void 0&&!Lr(S)&&(b[w]={update:S}),b},{});return Lr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function mnn({encoding:e,size:t}){for(const n of tp){const r=Ju(n);Nh(t[r])&&n0(e[n])&&(delete t[r],Je(O6e(r)))}return t}const gnn={vgMark:"arc",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...dy(e,"radius"),...dy(e,"theta")})},ynn={vgMark:"area",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...dM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...dM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...sre(e)})},vnn={vgMark:"rect",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...dy(e,"x"),...dy(e,"y")})},bnn={vgMark:"shape",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===kS?{field:at(n,{expr:"datum"})}:{}}]}},_nn={vgMark:"image",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...dy(e,"x"),...dy(e,"y"),...rre(e,"url")})},wnn={vgMark:"line",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Js("size",e,{vgChannel:"strokeWidth"}),...sre(e)})},Enn={vgMark:"trail",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Js("size",e),...sre(e)})};function _re(e,t){const{config:n}=e;return{...Vc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...Js("size",e),...Js("angle",e),...xnn(e,n,t)}}function xnn(e,t,n){return n?{shape:{value:n}}:Js("shape",e)}const Snn={vgMark:"symbol",encodeEntry:e=>_re(e)},Tnn={vgMark:"symbol",encodeEntry:e=>_re(e,"circle")},Ann={vgMark:"symbol",encodeEntry:e=>_re(e,"square")},Cnn={vgMark:"rect",encodeEntry:e=>({...Vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...dy(e,"x"),...dy(e,"y")})},Inn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...dM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...dM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Js("size",e,{vgChannel:"strokeWidth"})}}},knn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Vc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...la("x",e,{defaultPos:"mid"}),...la("y",e,{defaultPos:"mid"}),...rre(e),...Js("size",e,{vgChannel:"fontSize"}),...Js("angle",e),...dge("align",Rnn(e.markDef,n,t)),...dge("baseline",Nnn(e.markDef,n,t)),...la("radius",e,{defaultPos:null}),...la("theta",e,{defaultPos:null})}}};function Rnn(e,t,n){if(_r("align",e,n)===void 0)return"center"}function Nnn(e,t,n){if(_r("baseline",e,n)===void 0)return"middle"}const Pnn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Vc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...la("x",e,{defaultPos:"mid",vgChannel:"xc"}),...la("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Js("size",e,{defaultValue:Dnn(e),vgChannel:i}),[s]:ci(_r("thickness",n,t))}}};function Dnn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=_r("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Gy(a)&&lr(a.step)?a.step*3/4:cM(t.view,i)*3/4}}const uP={arc:gnn,area:ynn,bar:vnn,circle:Tnn,geoshape:bnn,image:_nn,line:wnn,point:Snn,rect:Cnn,rule:Inn,square:Ann,text:knn,tick:Pnn,trail:Enn};function Onn(e){if(Hn([P4,R4,KXt],e.mark)){const t=kFe(e.mark,e.encoding);if(t.length>0)return $nn(e,t)}else if(e.mark===N4){const t=xH.some(n=>_r(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Mnn(e)}return wre(e)}const Dge="faceted_path_";function $nn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Dge+e.requestDataName(_i.Main),data:e.requestDataName(_i.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:wre(e,{fromPrefix:Dge})}]}const Oge="stack_group_";function Mnn(e){var l;const[t]=wre(e,{fromPrefix:Oge}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...ex(t.encode.update,["y","yc","y2","height",...xH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ju(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ex(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ju(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of xH){const f=$m(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ci(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=$m(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ci(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(_i.Main),name:Oge+e.requestDataName(_i.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Lnn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Fe(o)&&Gf(o)&&wH(o.value)||!o&&wH(_r("order",i,s)))){if((Fe(o)||Ze(o))&&!n)return A6e(o,{expr:"datum"});if(Hb(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(Fe(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(fh(c))return{field:at({aggregate:zne(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(fFe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function wre(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=us(r.clip,Fnn(e),jnn(e)),a=S6e(r),u=i.key,l=Lnn(e),c=Bnn(e),f=_r("aria",r,s),d=uP[n].postEncodingTransform?uP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:uP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(_i.Main)},encode:{update:uP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Fnn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function jnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Bnn(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class v5e extends h5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,qme(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=kh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=SJt(o,s,{graticule:t.data&&tre(t.data)}));const u=this.encoding=IQt(t.encoding||{},a,o.filled,s);this.markDef=XFe(o,u,s),this.size=mnn({encoding:u,size:qme(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=KFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Xne(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===uFe,r=t&&AYt.some(i=>un(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return A4.reduce((r,i)=>{const s=Rs(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Eu(t);return Fe(n)&&(i.domain=n.map(ml)),Fe(r)&&(i.range=r.map(ml)),i}initAxes(t){return tp.reduce((n,r)=>{const i=t[r];if(un(i)||r===Ti&&un(t.x2)||r===co&&un(t.y2)){const s=un(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=dR(s)?x6e(s):ml(s)}return r}initLegends(t){return MYt.reduce((n,r)=>{const i=Rs(t[r]);if(i&&FYt(r)){const s=i.legend;n[r]=s&&Eu(s)}return n},{})}parseData(){this.component.data=a5(this)}parseLayoutSize(){Jtn(this)}parseSelections(){this.component.selection=VZt(this,this.selection)}parseMarkGroup(){this.component.mark=Onn(this)}parseAxesAndHeaders(){this.component.axes=ann(this)}assembleSelectionTopLevelSignals(t){return fZt(this,t)}assembleSignals(){return[...P4e(this),...lZt(this,[])]}assembleSelectionData(t){return dZt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return lre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!OS(this.parent))&&(t=l4e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return _v(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Rh(n)}typedFieldDef(t){const n=this.fieldDef(t);return Za(n)?n:null}}class Ere extends yre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(V4(a))return new Ere(a,this,this.getName(`layer_${u}`),o,s);if(ag(a))return new v5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(mne(a))})}parseData(){this.component.data=a5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Xtn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){lnn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),P4e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),lre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ht(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return hZt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),K4e(this))}}function xre(e,t,n,r,i){if($4(e))return new IC(e,t,n,i);if(V4(e))return new Ere(e,t,n,r,i);if(ag(e))return new v5e(e,t,n,r,i);if(JQt(e))return new rnn(e,t,n,i);throw new Error(mne(e))}function Unn(e,t={}){t.logger&&rXt(t.logger),t.fieldTitle&&_Fe(t.fieldTitle);try{const n=YFe(gS(t.config,e.config)),r=r4e(e,n),i=xre(r,null,"",void 0,n);return i.parse(),ftn(i.component.data,i),{spec:Vnn(i,znn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&iXt(),t.fieldTitle&&bQt()}}function znn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):pt(t)&&(t={type:t}),i&&s&&sZt(t.type)){if(i==="step"&&s==="step")Je(kme()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(kme(T4(o)));const a=o==="width"?"height":"width";t.type=oZt(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...rge(n,!1),...rge(e,!0)}}function Vnn(e,t,n={},r){const i=e.config?dJt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Wtn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...HFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Hnn=_Yt.version,qnn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:tx,accessPathWithDatum:one,compile:Unn,contains:Hn,deepEqual:El,deleteNestedProperty:eM,duplicate:tn,entries:uy,every:rne,fieldIntersection:sne,flatAccessWithDatum:r6e,getFirstDefined:us,hasIntersection:ine,hash:Vn,internalField:o6e,isBoolean:fI,isEmpty:Lr,isEqual:EYt,isInternalField:a6e,isNullOrFalse:wH,isNumeric:b4,keys:Ye,logicalExpr:AC,mergeDeep:t6e,never:e6e,normalize:r4e,normalizeAngle:dI,omit:ju,pick:ex,prefixGenerator:EH,removePathFromField:CS,replaceAll:sb,replacePathInField:Rc,resetIdCounter:SYt,setEqual:n6e,some:ib,stringify:Fr,titleCase:nR,unique:Xd,uniqueId:s6e,vals:No,varName:Si,version:Hnn},Symbol.toStringTag,{value:"Module"}));function b5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Wnn="vega-themes",Gnn="2.15.0",Ynn="Themes for stylized Vega and Vega-Lite visualizations.",Knn=["vega","vega-lite","themes","style"],Xnn="BSD-3-Clause",Qnn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Jnn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Znn="build/vega-themes.js",Sre="build/vega-themes.module.js",ern="build/vega-themes.min.js",trn="build/vega-themes.min.js",nrn="build/vega-themes.module.d.ts",rrn={type:"git",url:"https://github.com/vega/vega-themes.git"},irn=["src","build"],srn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},orn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},arn={vega:"*","vega-lite":"*"},urn={},lrn={name:Wnn,version:Gnn,description:Ynn,keywords:Knn,license:Xnn,author:Qnn,contributors:Jnn,main:Znn,module:Sre,unpkg:ern,jsdelivr:trn,types:nrn,repository:rrn,files:irn,scripts:srn,devDependencies:orn,peerDependencies:arn,dependencies:urn};const E_="#fff",$ge="#888",crn={background:"#333",view:{stroke:$ge},title:{color:E_,subtitleColor:E_},style:{"guide-label":{fill:E_},"guide-title":{fill:E_}},axis:{domainColor:E_,gridColor:$ge,tickColor:E_}},s1="#4572a7",frn={background:"#fff",arc:{fill:s1},area:{fill:s1},line:{stroke:s1,strokeWidth:2},path:{stroke:s1},rect:{fill:s1},shape:{stroke:s1},symbol:{fill:s1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},o1="#30a2da",XB="#cbcbcb",drn="#999",hrn="#333",Mge="#f0f0f0",Lge="#333",prn={arc:{fill:o1},area:{fill:o1},axis:{domainColor:XB,grid:!0,gridColor:XB,gridWidth:1,labelColor:drn,labelFontSize:10,titleColor:hrn,tickColor:XB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Mge,group:{fill:Mge},legend:{labelColor:Lge,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Lge,titleFontSize:14,titlePadding:10},line:{stroke:o1,strokeWidth:2},path:{stroke:o1,strokeWidth:.5},rect:{fill:o1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:o1},bar:{binSpacing:2,fill:o1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},a1="#000",mrn={group:{fill:"#e5e5e5"},arc:{fill:a1},area:{fill:a1},line:{stroke:a1},path:{stroke:a1},rect:{fill:a1},shape:{stroke:a1},symbol:{fill:a1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},grn=22,yrn="normal",Fge="Benton Gothic, sans-serif",jge=11.5,vrn="normal",u1="#82c6df",QB="Benton Gothic Bold, sans-serif",Bge="normal",Uge=13,$T={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},brn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:QB,fontSize:grn,fontWeight:yrn},arc:{fill:u1},area:{fill:u1},line:{stroke:u1,strokeWidth:2},path:{stroke:u1},rect:{fill:u1},shape:{stroke:u1},symbol:{fill:u1,size:30},axis:{labelFont:Fge,labelFontSize:jge,labelFontWeight:vrn,titleFont:QB,titleFontSize:Uge,titleFontWeight:Bge},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Fge,labelFontSize:jge,symbolType:"square",titleFont:QB,titleFontSize:Uge,titleFontWeight:Bge},range:{category:$T["category-6"],diverging:$T["fireandice-6"],heatmap:$T["fire-7"],ordinal:$T["fire-7"],ramp:$T["fire-7"]}},l1="#ab5787",lP="#979797",_rn={background:"#f9f9f9",arc:{fill:l1},area:{fill:l1},line:{stroke:l1},path:{stroke:l1},rect:{fill:l1},shape:{stroke:l1},symbol:{fill:l1,size:30},axis:{domainColor:lP,domainWidth:.5,gridWidth:.2,labelColor:lP,tickColor:lP,tickWidth:.2,titleColor:lP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},c1="#3e5c69",wrn={background:"#fff",arc:{fill:c1},area:{fill:c1},line:{stroke:c1},path:{stroke:c1},rect:{fill:c1},shape:{stroke:c1},symbol:{fill:c1},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Jl="#1696d2",zge="#000000",Ern="#FFFFFF",cP="Lato",JB="Lato",xrn="Lato",Srn="#DEDDDD",Trn=18,MT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Arn={background:Ern,title:{anchor:"start",fontSize:Trn,font:cP},axisX:{domain:!0,domainColor:zge,domainWidth:1,grid:!1,labelFontSize:12,labelFont:JB,labelAngle:0,tickColor:zge,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:cP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Srn,gridWidth:1,labelFontSize:12,labelFont:JB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:cP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:JB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:cP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:MT["six-groups-cat-1"],diverging:MT["diverging-colors"],heatmap:MT["diverging-colors"],ordinal:MT["six-groups-seq"],ramp:MT["shades-blue"]},area:{fill:Jl},rect:{fill:Jl},line:{color:Jl,stroke:Jl,strokeWidth:5},trail:{color:Jl,stroke:Jl,strokeWidth:0,size:1},path:{stroke:Jl,strokeWidth:.5},point:{filled:!0},text:{font:xrn,color:Jl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Jl,stroke:null}},arc:{fill:Jl},shape:{stroke:Jl},symbol:{fill:Jl,size:30}},f1="#3366CC",Vge="#ccc",fP="Arial, sans-serif",Crn={arc:{fill:f1},area:{fill:f1},path:{stroke:f1},rect:{fill:f1},shape:{stroke:f1},symbol:{stroke:f1},circle:{fill:f1},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:fP,fontSize:12},"guide-title":{font:fP,fontSize:12},"group-title":{font:fP,fontSize:12}},title:{font:fP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Vge,tickColor:Vge,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Tre=e=>e*(1/3+1),Hge=Tre(9),qge=Tre(10),Wge=Tre(12),LT="Segoe UI",Gge="wf_standard-font, helvetica, arial, sans-serif",Yge="#252423",FT="#605E5C",Kge="transparent",Irn="#C8C6C4",tf="#118DFF",krn="#12239E",Rrn="#E66C37",Nrn="#6B007B",Prn="#E044A7",Drn="#744EC2",Orn="#D9B300",$rn="#D64550",_5e=tf,w5e="#DEEFFF",Xge=[w5e,_5e],Mrn=[w5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",_5e],Lrn={view:{stroke:Kge},background:Kge,font:LT,header:{titleFont:Gge,titleFontSize:Wge,titleColor:Yge,labelFont:LT,labelFontSize:qge,labelColor:FT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:FT,labelFontSize:Hge,titleFont:Gge,titleColor:Yge,titleFontSize:Wge,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Irn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:tf},line:{stroke:tf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:LT,fontSize:Hge,fill:FT},arc:{fill:tf},area:{fill:tf,line:!0,opacity:.6},path:{stroke:tf},rect:{fill:tf},point:{fill:tf,filled:!0,size:75},shape:{stroke:tf},symbol:{fill:tf,strokeWidth:1.5,size:50},legend:{titleFont:LT,titleFontWeight:"bold",titleColor:FT,labelFont:LT,labelFontSize:qge,labelColor:FT,symbolType:"circle",symbolSize:75},range:{category:[tf,krn,Rrn,Nrn,Prn,Drn,Orn,$rn],diverging:Xge,heatmap:Xge,ordinal:Mrn}},ZB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Frn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',e9=400,dP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},jrn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Brn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function u5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=dP.gridBg[e],i=dP.textPrimary[e],s=dP.textSecondary[e],o=n==="dark"?jrn:Brn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:ZB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Frn,labelFontWeight:e9,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:dP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:ZB,fill:s,fontWeight:e9},"guide-title":{font:ZB,fill:s,fontWeight:e9}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Urn=u5({theme:"white",background:"#ffffff"}),zrn=u5({theme:"g10",background:"#f4f4f4"}),Vrn=u5({theme:"g90",background:"#262626"}),Hrn=u5({theme:"g100",background:"#161616"}),qrn=lrn.version,Wrn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:zrn,carbong100:Hrn,carbong90:Vrn,carbonwhite:Urn,dark:crn,excel:frn,fivethirtyeight:prn,ggplot2:mrn,googlecharts:Crn,latimes:brn,powerbi:Lrn,quartz:_rn,urbaninstitute:Arn,version:qrn,vox:wrn},Symbol.toStringTag,{value:"Module"}));function Grn(e,t,n,r){if(Fe(e))return`[${e.map(i=>t(pt(i)?i:Qge(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=Qge(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Yrn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Qge(e,t){return JSON.stringify(e,Yrn(t))}var Krn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const E5e="vg-tooltip-element",Xrn={offsetX:10,offsetY:10,id:E5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Qrn,maxDepth:2,formatTooltip:Grn,baseURL:""};function Qrn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Jrn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Krn.toString().replace(E5e,e)}function Zrn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class ein{constructor(t){this.options={...Xrn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Jrn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Zrn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var t9={};function tin(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n9,Jge;function nin(){return Jge||(Jge=1,n9=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),n9}var rin=yr;yr.Node=pb;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)sin(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)oin(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=iin(this,i,n[r]);return s};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function iin(e,t,n){var r=t===e.head?new pb(n,null,t,e):new pb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function sin(e,t){e.tail=new pb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function oin(e,t){e.head=new pb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function pb(e,t,n,r){if(!(this instanceof pb))return new pb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{nin()(yr)}catch{}const ain=rin,j1=Symbol("max"),Ap=Symbol("length"),x_=Symbol("lengthCalculator"),kC=Symbol("allowStale"),sv=Symbol("maxAge"),wp=Symbol("dispose"),Zge=Symbol("noDisposeOnSet"),qs=Symbol("lruList"),nf=Symbol("cache"),x5e=Symbol("updateAgeOnGet"),r9=()=>1;class uin{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[j1]=t.max||1/0;const n=t.length||r9;if(this[x_]=typeof n!="function"?r9:n,this[kC]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[sv]=t.maxAge||0,this[wp]=t.dispose,this[Zge]=t.noDisposeOnSet||!1,this[x5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[j1]=t||1/0,jT(this)}get max(){return this[j1]}set allowStale(t){this[kC]=!!t}get allowStale(){return this[kC]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[sv]=t,jT(this)}get maxAge(){return this[sv]}set lengthCalculator(t){typeof t!="function"&&(t=r9),t!==this[x_]&&(this[x_]=t,this[Ap]=0,this[qs].forEach(n=>{n.length=this[x_](n.value,n.key),this[Ap]+=n.length})),jT(this)}get lengthCalculator(){return this[x_]}get length(){return this[Ap]}get itemCount(){return this[qs].length}rforEach(t,n){n=n||this;for(let r=this[qs].tail;r!==null;){const i=r.prev;e0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[qs].head;r!==null;){const i=r.next;e0e(this,t,r,n),r=i}}keys(){return this[qs].toArray().map(t=>t.key)}values(){return this[qs].toArray().map(t=>t.value)}reset(){this[wp]&&this[qs]&&this[qs].length&&this[qs].forEach(t=>this[wp](t.key,t.value)),this[nf]=new Map,this[qs]=new ain,this[Ap]=0}dump(){return this[qs].map(t=>gM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[qs]}set(t,n,r){if(r=r||this[sv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[x_](n,t);if(this[nf].has(t)){if(s>this[j1])return Kw(this,this[nf].get(t)),!1;const u=this[nf].get(t).value;return this[wp]&&(this[Zge]||this[wp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Ap]+=s-u.length,u.length=s,this.get(t),jT(this),!0}const o=new lin(t,n,s,i,r);return o.length>this[j1]?(this[wp]&&this[wp](t,n),!1):(this[Ap]+=o.length,this[qs].unshift(o),this[nf].set(t,this[qs].head),jT(this),!0)}has(t){if(!this[nf].has(t))return!1;const n=this[nf].get(t).value;return!gM(this,n)}get(t){return i9(this,t,!0)}peek(t){return i9(this,t,!1)}pop(){const t=this[qs].tail;return t?(Kw(this,t),t.value):null}del(t){Kw(this,this[nf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[nf].forEach((t,n)=>i9(this,n,!1))}}const i9=(e,t,n)=>{const r=e[nf].get(t);if(r){const i=r.value;if(gM(e,i)){if(Kw(e,r),!e[kC])return}else n&&(e[x5e]&&(r.value.now=Date.now()),e[qs].unshiftNode(r));return i.value}},gM=(e,t)=>{if(!t||!t.maxAge&&!e[sv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[sv]&&n>e[sv]},jT=e=>{if(e[Ap]>e[j1])for(let t=e[qs].tail;e[Ap]>e[j1]&&t!==null;){const n=t.prev;Kw(e,t),t=n}},Kw=(e,t)=>{if(t){const n=t.value;e[wp]&&e[wp](n.key,n.value),e[Ap]-=n.length,e[nf].delete(n.key),e[qs].removeNode(t)}};class lin{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const e0e=(e,t,n,r)=>{let i=n.value;gM(e,i)&&(Kw(e,n),e[kC]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var cin=uin;const fin=Object.freeze({loose:!0}),din=Object.freeze({}),hin=e=>e?typeof e!="object"?fin:e:din;var Are=hin,HH={exports:{}};const pin="2.0.0",S5e=256,min=Number.MAX_SAFE_INTEGER||9007199254740991,gin=16,yin=S5e-6,vin=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Cre={MAX_LENGTH:S5e,MAX_SAFE_COMPONENT_LENGTH:gin,MAX_SAFE_BUILD_LENGTH:yin,MAX_SAFE_INTEGER:min,RELEASE_TYPES:vin,SEMVER_SPEC_VERSION:pin,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const bin=typeof process=="object"&&t9&&t9.NODE_DEBUG&&/\bsemver\b/i.test(t9.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var l5=bin;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Cre,s=l5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(HH,HH.exports);var Ire=HH.exports;const t0e=/^[0-9]+$/,T5e=(e,t)=>{const n=t0e.test(e),r=t0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},_in=(e,t)=>T5e(t,e);var win={compareIdentifiers:T5e,rcompareIdentifiers:_in};const hP=l5,{MAX_LENGTH:n0e,MAX_SAFE_INTEGER:pP}=Cre,{safeRe:r0e,t:i0e}=Ire,Ein=Are,{compareIdentifiers:S_}=win;let xin=class bd{constructor(t,n){if(n=Ein(n),t instanceof bd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>n0e)throw new TypeError(`version is longer than ${n0e} characters`);hP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?r0e[i0e.LOOSE]:r0e[i0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>pP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>pP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>pP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<pP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(hP("SemVer.compare",this.version,this.options,t),!(t instanceof bd)){if(typeof t=="string"&&t===this.version)return 0;t=new bd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof bd||(t=new bd(t,this.options)),S_(this.major,t.major)||S_(this.minor,t.minor)||S_(this.patch,t.patch)}comparePre(t){if(t instanceof bd||(t=new bd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(hP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S_(r,i)}while(++n)}compareBuild(t){t instanceof bd||(t=new bd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(hP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return S_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),S_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var kre=xin;const s0e=kre,Sin=(e,t,n)=>new s0e(e,n).compare(new s0e(t,n));var $S=Sin;const Tin=$S,Ain=(e,t,n)=>Tin(e,t,n)===0;var Cin=Ain;const Iin=$S,kin=(e,t,n)=>Iin(e,t,n)!==0;var Rin=kin;const Nin=$S,Pin=(e,t,n)=>Nin(e,t,n)>0;var Din=Pin;const Oin=$S,$in=(e,t,n)=>Oin(e,t,n)>=0;var Min=$in;const Lin=$S,Fin=(e,t,n)=>Lin(e,t,n)<0;var jin=Fin;const Bin=$S,Uin=(e,t,n)=>Bin(e,t,n)<=0;var zin=Uin;const Vin=Cin,Hin=Rin,qin=Din,Win=Min,Gin=jin,Yin=zin,Kin=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Vin(e,n,r);case"!=":return Hin(e,n,r);case">":return qin(e,n,r);case">=":return Win(e,n,r);case"<":return Gin(e,n,r);case"<=":return Yin(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Xin=Kin,s9,o0e;function Qin(){if(o0e)return s9;o0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}s9=t;const n=Are,{safeRe:r,t:i}=Ire,s=Xin,o=l5,a=kre,u=A5e();return s9}var o9,a0e;function A5e(){if(a0e)return o9;a0e=1;class e{constructor(O,F){if(F=r(F),O instanceof e)return O.loose===!!F.loose&&O.includePrerelease===!!F.includePrerelease?O:new e(O.raw,F);if(O instanceof i)return this.raw=O.value,this.set=[[O]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map(O=>O.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(O){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+O,B=n.get(L);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];O=O.replace(H,R(this.options.includePrerelease)),s("hyphen replace",O),O=O.replace(a[u.COMPARATORTRIM],l),s("comparator trim",O),O=O.replace(a[u.TILDETRIM],c),s("tilde trim",O),O=O.replace(a[u.CARETTRIM],f),s("caret trim",O);let D=O.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>I(q,this.options));U&&(D=D.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(L,j),j}intersects(O,F){if(!(O instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,F)&&O.set.some(B=>g(B,F)&&L.every(U=>B.every(H=>U.intersects(H,F)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new o(O,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(M(this.set[F],O,this.options))return!0;return!1}}o9=e;const t=cin,n=new t({max:1e3}),r=Are,i=Qin(),s=l5,o=kre,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Ire,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Cre,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,O)=>{let F=!0;const L=P.slice();let B=L.pop();for(;F&&L.length;)F=L.every(U=>B.intersects(U,O)),B=L.pop();return F},y=(P,O)=>(s("comp",P,O),P=E(P,O),s("caret",P),P=b(P,O),s("tildes",P),P=T(P,O),s("xrange",P),P=C(P,O),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,O)=>P.trim().split(/\s+/).map(F=>w(F,O)).join(" "),w=(P,O)=>{const F=O.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(L,B,U,H,D)=>{s("tilde",P,L,B,U,H,D);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${B}.${U}.${H}-${D} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(P,O)=>P.trim().split(/\s+/).map(F=>S(F,O)).join(" "),S=(P,O)=>{s("caret",P,O);const F=O.loose?a[u.CARETLOOSE]:a[u.CARET],L=O.includePrerelease?"-0":"";return P.replace(F,(B,U,H,D,z)=>{s("caret",P,B,U,H,D,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${L} <${+U+1}.0.0-0`:v(D)?U==="0"?W=`>=${U}.${H}.0${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${L} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${D}-${z} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${D}${L} <${U}.${H}.${+D+1}-0`:W=`>=${U}.${H}.${D}${L} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${D} <${+U+1}.0.0-0`),s("caret return",W),W})},T=(P,O)=>(s("replaceXRanges",P,O),P.split(/\s+/).map(F=>A(F,O)).join(" ")),A=(P,O)=>{P=P.trim();const F=O.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(L,B,U,H,D,z)=>{s("xRange",P,L,B,U,H,D,z);const W=v(U),j=W||v(H),q=j||v(D),G=q;return B==="="&&G&&(B=""),z=O.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(j&&(H=0),D=0,B===">"?(B=">=",j?(U=+U+1,H=0,D=0):(H=+H+1,D=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),L=`${B+U}.${H}.${D}${z}`):j?L=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(L=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",L),L})},C=(P,O)=>(s("replaceStars",P,O),P.trim().replace(a[u.STAR],"")),I=(P,O)=>(s("replaceGTE0",P,O),P.trim().replace(a[O.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>(O,F,L,B,U,H,D,z,W,j,q,G,ne)=>(v(L)?F="":v(B)?F=`>=${L}.0.0${P?"-0":""}`:v(U)?F=`>=${L}.${B}.0${P?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:P?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),M=(P,O,F)=>{for(let L=0;L<P.length;L++)if(!P[L].test(O))return!1;if(O.prerelease.length&&!F.includePrerelease){for(let L=0;L<P.length;L++)if(s(P[L].semver),P[L].semver!==i.ANY&&P[L].semver.prerelease.length>0){const B=P[L].semver;if(B.major===O.major&&B.minor===O.minor&&B.patch===O.patch)return!0}return!1}return!0};return o9}const Jin=A5e(),Zin=(e,t,n)=>{try{t=new Jin(t,n)}catch{return!1}return t.test(e)};var esn=Zin,C5e=tin(esn);function tsn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var nsn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function I5e(e,...t){for(const n of t)rsn(e,n);return e}function rsn(e,t){for(const n of Object.keys(t))yS(e,n,t[n],!0)}const sf=BGt;let vI=qnn;const mP=typeof window<"u"?window:void 0;var h0e;vI===void 0&&((h0e=mP==null?void 0:mP.vl)!=null&&h0e.compile)&&(vI=mP.vl);const isn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},ssn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},kA={vega:"Vega","vega-lite":"Vega-Lite"},yM={vega:sf.version,"vega-lite":vI?vI.version:"not available"},osn={vega:e=>e,"vega-lite":(e,t)=>vI.compile(e,{config:t}).spec},asn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,usn="chart-wrapper";function lsn(e){return typeof e=="function"}function u0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${kA[r]} JSON Source`}function csn(e,t){if(e.$schema){const n=b5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${kA[n.library]}, but mode argument sets ${kA[t]??t}.`);const r=n.library;return C5e(yM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${kA[r]} ${n.version}, but the current version of ${kA[r]} is v${yM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function k5e(e){return!!(e&&"load"in e)}function l0e(e){return k5e(e)?e:sf.loader(e)}function fsn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function dsn(e,t,n={}){let r,i;pt(t)?(i=l0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=fsn(r),o=s.loader;(!i||o)&&(i=l0e(n.loader??o));const a=await c0e(s,i),u=await c0e(n,i),l={...I5e(u,a),config:gS(u.config??{},a.config??{})};return await psn(e,r,l,i)}async function c0e(e,t){const n=pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function hsn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function psn(e,t,n={},r){const i=n.theme?gS(Wrn[n.theme],n.config??{}):n.config,s=Fy(n.actions)?n.actions:I5e({},isn,n.actions??{}),o={...ssn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??sf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:T}=hsn(c);if(!S.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?nsn.toString():n.defaultStyle,T.appendChild(A)}}const f=csn(t,n.mode);let d=osn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=b5e(d.$schema);C5e(yM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${yM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(usn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):SF(d,p,!0,!1).newDocument),n.formatLocale&&sf.formatLocale(n.formatLocale),n.timeFormatLocale&&sf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?sf.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&sf.expressionFunction(E,S)}const{ast:m}=n,g=sf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||sf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:sf.expressionInterpreter??n.expr??XGt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,T=E&&!k5e(E)?E==null?void 0:E.baseURL:void 0,A=lsn(S)?S:new ein({baseURL:T,...S===!0?{}:S}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const A=document.createElement("summary");A.innerHTML=asn,T.append(A),b=C=>{T.contains(C.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const A=o[`${T.toUpperCase()}_ACTION`],C=document.createElement("a"),I=mt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${T}`,C.addEventListener("mousedown",async function(R){R.preventDefault();const M=await y.toImageURL(T,I);this.href=M}),S.append(C)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(A){u0e(aB(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(A){u0e(aB(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){tsn(window,T,{config:i,mode:f,renderer:a,spec:aB(t)}),C.preventDefault()}),S.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function msn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function gsn(e,t,n){n&&(msn(n)?n(e.data(t)):e.change(t,sf.changeset().remove(()=>!0).insert(n)))}function ysn(e,t){Object.keys(t).forEach(n=>{gsn(e,n,t[n])})}function R5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const N5e=()=>{};function a9(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function vsn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=R5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!LP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function f0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function u9(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function RA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class P5e extends Ht.PureComponent{constructor(){super(...arguments),RA(this,"containerRef",Ht.createRef()),RA(this,"resultPromise",void 0),RA(this,"handleError",t=>{const{onError:n=N5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),RA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=R5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=vsn(u9(this.props),u9(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!gV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&f0e(a,s),i&&a9(a,i)),a.run()})}else gV(i,s)||this.modifyView(o=>{s&&f0e(o,s),i&&a9(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=u9(this.props);this.resultPromise=dsn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;a9(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Ht.createElement("div",{ref:this.containerRef,className:t,style:n})}}RA(P5e,"propTypes",{className:yhe.string,onError:yhe.func});function qH(){return qH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qH.apply(this,arguments)}function WH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const bsn={};class D5e extends Ht.PureComponent{constructor(){super(...arguments),WH(this,"vegaEmbed",Ht.createRef()),WH(this,"handleNewView",t=>{this.update();const{onNewView:n=N5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){gV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{ysn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Ht.createElement(P5e,qH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}WH(D5e,"defaultProps",{data:bsn});function GH(){return GH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GH.apply(this,arguments)}function _sn(e){return Ht.createElement(D5e,GH({},e,{mode:"vega-lite"}))}function d0e(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function wsn(e){const{studyId:t,allParticipants:n,config:r}=e,i=Hm(),[s,o]=gw(),a=n.filter(y=>y.completed).map(y=>Math.max(...Object.values(y.answers).map(v=>v.endTime).filter(v=>v!==void 0))).filter(y=>Number.isFinite(y)),[u,l]=N.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),c=N.useMemo(()=>n.filter(y=>y.completed&&d0e(y.answers,u)),[n,u]),f=N.useMemo(()=>n.filter(y=>!y.completed&&d0e(y.answers,u)),[n,u]),d=N.useMemo(()=>{var y,v;return c.length>0?[{Date:(y=u[0])==null?void 0:y.getTime(),Participants:0},...c.map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).flat())).sort((b,w)=>b-w).map((b,w)=>({Date:b,Participants:w})),{Date:(v=u[1])==null?void 0:v.getTime(),Participants:c.length}]:[]},[c,u]),h=N.useMemo(()=>{var y,v;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(y=u[0])==null?void 0:y.getTime(),(v=u[1])==null?void 0:v.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[o.width,u,d]),[p,{close:m,open:g}]=yw(!1);return _.jsx(Oh,{children:_.jsxs(xy,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Zt,{align:"center",mb:16,justify:"space-between",children:[_.jsxs(Zt,{direction:"column",children:[_.jsx(oi,{order:5,mb:4,children:t}),_.jsxs(Zt,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[_.jsxs(yc,{size:"sm",color:"orange",children:["Total: ",f.length+c.length]}),_.jsxs(yc,{size:"sm",color:"green",children:["Completed: ",c.length]}),_.jsxs(yc,{size:"sm",color:"cyan",children:["In Progress: ",f.length]})]})]}),_.jsxs($s,{children:[_.jsx(GPe,{allParticipants:n,studyId:t,config:r}),_.jsxs(Jr,{opened:p,children:[_.jsx(Jr.Target,{children:_.jsx(Nn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:g,onMouseLeave:m,px:4,children:_.jsx(ZYe,{})})}),_.jsx(Jr.Dropdown,{children:_.jsx(et,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(HJ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{mt:16,children:"Finished Participants"}),_.jsx(_sn,{spec:h,actions:!1})]}):_.jsx(Ee,{h:293.4,children:_.jsx(hm,{style:{height:"100%"},children:_.jsx(et,{children:"Not enough participants for chart"})})})]})})}function Esn(e){const{globalConfig:t}=e,[n,r]=N.useState(!1),[i,s]=N.useState({}),[o,a]=N.useState({}),{storageEngine:u}=wa();return N.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await cF(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),_.jsxs(Ee,{children:[_.jsx(oi,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(ss,{children:[t.configsList.map(l=>i[l]&&_.jsx(ss.Col,{span:{md:12,xl:6},children:_.jsx(wsn,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),_.jsx(xc,{visible:n})]})]})}function xsn({globalConfig:e}){return _.jsxs(_.Fragment,{children:[_.jsx(bC,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx(Oh,{fluid:!0,children:_.jsx(Esn,{globalConfig:e})})})]})}function Ssn(){const{user:e,triggerAuth:t}=pS(),{storageEngine:n}=wa(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(""),[y,v]=N.useState(null),b=EEe({initialValues:{email:""},validate:{email:Git("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof df){const R=await(n==null?void 0:n.getUserManagementData("authentication"));i(R==null?void 0:R.isEnabled);const M=await(n==null?void 0:n.getUserManagementData("adminUsers"));M&&M.adminUsersList&&o(M==null?void 0:M.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof df){const I=await YPe(n,u);I&&I.email&&v({email:I.email,uid:I.uid}),p(!0)}u(!1)},E=async I=>{u(!0),n instanceof df&&I&&(await n.changeAuth(!0),await n.addAdminUser(I),o([I.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof df){await n.addAdminUser({email:b.values.email,uid:null});const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}u(!1),c(!1),b.setValues({email:""})},T=I=>{d(!0),g(I)},A=async()=>{if(u(!0),n instanceof df){await n.removeAdminUser(m);const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}d(!1),u(!1)},C=N.useMemo(()=>n instanceof df,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Oh,{children:_.jsxs(xy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(oi,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Zt,{children:_.jsx(et,{children:"Authentication is enabled."})}):_.jsxs(Zt,{justify:"space-between",children:[_.jsx(Ee,{children:_.jsx(et,{children:"Authentication is currently disabled."})}),_.jsx(Fa,{label:"You can only enable auth when using Firebase",disabled:C,children:_.jsx(Nn,{onClick:I=>C?w():I.preventDefault(),color:"green","data-disabled":C?void 0:!0,style:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Zt,{mt:40,direction:"column",children:[_.jsxs(Zt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(oi,{order:6,children:"Enabled Users"}),_.jsx(LG,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(I=>{var R;return _.jsxs(Zt,{justify:"space-between",mb:10,children:[_.jsx(et,{children:I}),I===((R=e.user)==null?void 0:R.email)?_.jsx(et,{color:"blue",size:"xs",children:"You"}):_.jsx(P0,{variant:"subtle",onClick:()=>T(I),children:_.jsx(v_e,{color:"red"})})]},I)}):null]}):null]})}),_.jsx(bs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(Ee,{component:"form",onSubmit:b.onSubmit(()=>S()),children:[_.jsx(lv,{leftSection:_.jsx(KYe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(Zt,{mt:30,justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Nn,{type:"submit",children:"Save"})]})]})}),_.jsxs(bs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(et,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(et,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(Zt,{mt:40,justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(Nn,{onClick:()=>A(),children:"Yes, I'm sure."})]})]}),_.jsxs(bs,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(et,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(et,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Zt,{mt:40,justify:"right",children:[_.jsx(Nn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Nn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(xc,{visible:a})]})}class Tsn extends VPe{constructor(){super("localStorage");sl(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await mV.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Uw(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await Uw(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=x$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=mV.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=x$();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await Uw(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function Asn(){let e,t=!1;{const n=new df;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Tsn;await n.connect(),e=n}return e}async function Csn(){const t=await(await fetch(`${Lh}global.json`)).text();return hIt(t)}function Isn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function o(){e&&r(await PMt(e))}o()},[e]),N.useEffect(()=>{e||Csn().then(o=>{t(o)})},[e]);const{storageEngine:i,setStorageEngine:s}=wa();return N.useEffect(()=>{if(i!==void 0)return;async function o(){const a=await Asn();s(a)}o()},[s,i]),e?_.jsx(jYe,{basename:Lh,children:_.jsx(_Mt,{children:_.jsx(qYe,{children:_.jsx(di,{padding:"md",header:{height:70},children:_.jsxs($Ye,{children:[_.jsx(mp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(bC,{studyIds:e.configsList}),_.jsx(Znt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(mp,{path:"/:studyId/*",element:_.jsx(DMt,{globalConfig:e})}),_.jsx(mp,{path:"/analysis/dashboard",element:_.jsx(sB,{children:_.jsx(xsn,{globalConfig:e})})}),_.jsx(mp,{path:"/analysis",element:_.jsx(Bz,{to:"/analysis/dashboard"})}),_.jsx(mp,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(sB,{children:_.jsx(FMt,{globalConfig:e})})}),_.jsx(mp,{path:"/analysis/stats/:studyId",element:_.jsx(Bz,{to:"./table",replace:!0})}),_.jsx(mp,{path:"/settings",element:_.jsxs(sB,{children:[_.jsx(bC,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx(Ssn,{})})]})}),_.jsx(mp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(bC,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx(jMt,{})})]})})]})})})})}):null}l9.createRoot(document.getElementById("root")).render(_.jsx(Ht.StrictMode,{children:_.jsx(qGe,{children:_.jsx(K1e,{children:_.jsx(Isn,{})})})}))});export default ksn();
