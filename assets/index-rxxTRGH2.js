var qWe=Object.defineProperty;var WWe=(e,t,n)=>t in e?qWe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var GWe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ju=(e,t,n)=>(WWe(e,typeof t!="symbol"?t+"":t,n),n);var UAn=GWe((LOn,Qie)=>{function YWe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function KWe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var qwe={exports:{}},x6={},Wwe={exports:{}},Wn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=Symbol.for("react.element"),XWe=Symbol.for("react.portal"),QWe=Symbol.for("react.fragment"),JWe=Symbol.for("react.strict_mode"),ZWe=Symbol.for("react.profiler"),eGe=Symbol.for("react.provider"),tGe=Symbol.for("react.context"),nGe=Symbol.for("react.forward_ref"),rGe=Symbol.for("react.suspense"),iGe=Symbol.for("react.memo"),sGe=Symbol.for("react.lazy"),gse=Symbol.iterator;function oGe(e){return e===null||typeof e!="object"?null:(e=gse&&e[gse]||e["@@iterator"],typeof e=="function"?e:null)}var Gwe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ywe=Object.assign,Kwe={};function sS(e,t,n){this.props=e,this.context=t,this.refs=Kwe,this.updater=n||Gwe}sS.prototype.isReactComponent={};sS.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sS.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xwe(){}Xwe.prototype=sS.prototype;function xG(e,t,n){this.props=e,this.context=t,this.refs=Kwe,this.updater=n||Gwe}var TG=xG.prototype=new Xwe;TG.constructor=xG;Ywe(TG,sS.prototype);TG.isPureReactComponent=!0;var yse=Array.isArray,Qwe=Object.prototype.hasOwnProperty,CG={current:null},Jwe={key:!0,ref:!0,__self:!0,__source:!0};function Zwe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Qwe.call(t,r)&&!Jwe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sI,type:e,key:s,ref:o,props:i,_owner:CG.current}}function aGe(e,t){return{$$typeof:sI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function AG(e){return typeof e=="object"&&e!==null&&e.$$typeof===sI}function uGe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var vse=/\/+/g;function yj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uGe(""+e.key):t.toString(36)}function p$(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case sI:case XWe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+yj(o,0):r,yse(i)?(n="",e!=null&&(n=e.replace(vse,"$&/")+"/"),p$(i,t,n,"",function(l){return l})):i!=null&&(AG(i)&&(i=aGe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(vse,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",yse(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+yj(s,a);o+=p$(s,t,n,u,i)}else if(u=oGe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+yj(s,a++),o+=p$(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function mP(e,t,n){if(e==null)return e;var r=[],i=0;return p$(e,r,"","",function(s){return t.call(n,s,i++)}),r}function lGe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var eu={current:null},m$={transition:null},cGe={ReactCurrentDispatcher:eu,ReactCurrentBatchConfig:m$,ReactCurrentOwner:CG};Wn.Children={map:mP,forEach:function(e,t,n){mP(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return mP(e,function(){t++}),t},toArray:function(e){return mP(e,function(t){return t})||[]},only:function(e){if(!AG(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Wn.Component=sS;Wn.Fragment=QWe;Wn.Profiler=ZWe;Wn.PureComponent=xG;Wn.StrictMode=JWe;Wn.Suspense=rGe;Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cGe;Wn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ywe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=CG.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Qwe.call(t,u)&&!Jwe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:sI,type:e.type,key:i,ref:s,props:r,_owner:o}};Wn.createContext=function(e){return e={$$typeof:tGe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eGe,_context:e},e.Consumer=e};Wn.createElement=Zwe;Wn.createFactory=function(e){var t=Zwe.bind(null,e);return t.type=e,t};Wn.createRef=function(){return{current:null}};Wn.forwardRef=function(e){return{$$typeof:nGe,render:e}};Wn.isValidElement=AG;Wn.lazy=function(e){return{$$typeof:sGe,_payload:{_status:-1,_result:e},_init:lGe}};Wn.memo=function(e,t){return{$$typeof:iGe,type:e,compare:t===void 0?null:t}};Wn.startTransition=function(e){var t=m$.transition;m$.transition={};try{e()}finally{m$.transition=t}};Wn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Wn.useCallback=function(e,t){return eu.current.useCallback(e,t)};Wn.useContext=function(e){return eu.current.useContext(e)};Wn.useDebugValue=function(){};Wn.useDeferredValue=function(e){return eu.current.useDeferredValue(e)};Wn.useEffect=function(e,t){return eu.current.useEffect(e,t)};Wn.useId=function(){return eu.current.useId()};Wn.useImperativeHandle=function(e,t,n){return eu.current.useImperativeHandle(e,t,n)};Wn.useInsertionEffect=function(e,t){return eu.current.useInsertionEffect(e,t)};Wn.useLayoutEffect=function(e,t){return eu.current.useLayoutEffect(e,t)};Wn.useMemo=function(e,t){return eu.current.useMemo(e,t)};Wn.useReducer=function(e,t,n){return eu.current.useReducer(e,t,n)};Wn.useRef=function(e){return eu.current.useRef(e)};Wn.useState=function(e){return eu.current.useState(e)};Wn.useSyncExternalStore=function(e,t,n){return eu.current.useSyncExternalStore(e,t,n)};Wn.useTransition=function(){return eu.current.useTransition()};Wn.version="18.2.0";Wwe.exports=Wn;var I=Wwe.exports;const F=$l(I),h1=YWe({__proto__:null,default:F},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fGe=I,dGe=Symbol.for("react.element"),hGe=Symbol.for("react.fragment"),pGe=Object.prototype.hasOwnProperty,mGe=fGe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gGe={key:!0,ref:!0,__self:!0,__source:!0};function eEe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)pGe.call(t,r)&&!gGe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:dGe,type:e,key:s,ref:o,props:i,_owner:mGe.current}}x6.Fragment=hGe;x6.jsx=eEe;x6.jsxs=eEe;qwe.exports=x6;var k=qwe.exports,Rz={},tEe={exports:{}},Rl={},nEe={exports:{}},rEe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,Y){var q=U.length;U.push(Y);e:for(;0<q;){var D=q-1>>>1,L=U[D];if(0<i(L,Y))U[D]=Y,U[q]=L,q=D;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],q=U.pop();if(q!==Y){U[0]=q;e:for(var D=0,L=U.length,G=L>>>1;D<G;){var V=2*(D+1)-1,H=U[V],te=V+1,le=U[te];if(0>i(H,q))te<L&&0>i(le,H)?(U[D]=le,U[te]=q,D=te):(U[D]=H,U[V]=q,D=V);else if(te<L&&0>i(le,q))U[D]=le,U[te]=q,D=te;else break e}}return Y}function i(U,Y){var q=U.sortIndex-Y.sortIndex;return q!==0?q:U.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var Y=n(l);Y!==null;){if(Y.callback===null)r(l);else if(Y.startTime<=U)r(l),Y.sortIndex=Y.expirationTime,t(u,Y);else break;Y=n(l)}}function w(U){if(m=!1,_(U),!p)if(n(u)!==null)p=!0,z(x);else{var Y=n(l);Y!==null&&W(w,Y.startTime-U)}}function x(U,Y){p=!1,m&&(m=!1,y(T),T=-1),h=!0;var q=d;try{for(_(Y),f=n(u);f!==null&&(!(f.expirationTime>Y)||U&&!P());){var D=f.callback;if(typeof D=="function"){f.callback=null,d=f.priorityLevel;var L=D(f.expirationTime<=Y);Y=e.unstable_now(),typeof L=="function"?f.callback=L:f===n(u)&&r(u),_(Y)}else r(u);f=n(u)}if(f!==null)var G=!0;else{var V=n(l);V!==null&&W(w,V.startTime-Y),G=!1}return G}finally{f=null,d=q,h=!1}}var E=!1,b=null,T=-1,A=5,C=-1;function P(){return!(e.unstable_now()-C<A)}function N(){if(b!==null){var U=e.unstable_now();C=U;var Y=!0;try{Y=b(!0,U)}finally{Y?$():(E=!1,b=null)}}else E=!1}var $;if(typeof v=="function")$=function(){v(N)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,B=M.port2;M.port1.onmessage=N,$=function(){B.postMessage(null)}}else $=function(){g(N,0)};function z(U){b=U,E||(E=!0,$())}function W(U,Y){T=g(function(){U(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,z(x))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var q=d;d=Y;try{return U()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var q=d;d=U;try{return Y()}finally{d=q}},e.unstable_scheduleCallback=function(U,Y,q){var D=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?D+q:D):q=D,U){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=q+L,U={id:c++,callback:Y,priorityLevel:U,startTime:q,expirationTime:L,sortIndex:-1},q>D?(U.sortIndex=q,t(l,U),n(u)===null&&U===n(l)&&(m?(y(T),T=-1):m=!0,W(w,q-D))):(U.sortIndex=L,t(u,U),p||h||(p=!0,z(x))),U},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(U){var Y=d;return function(){var q=d;d=Y;try{return U.apply(this,arguments)}finally{d=q}}}})(rEe);nEe.exports=rEe;var yGe=nEe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iEe=I,El=yGe;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sEe=new Set,bC={};function r_(e,t){zw(e,t),zw(e+"Capture",t)}function zw(e,t){for(bC[e]=t,e=0;e<t.length;e++)sEe.add(t[e])}var Vp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nz=Object.prototype.hasOwnProperty,vGe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_se={},bse={};function _Ge(e){return Nz.call(bse,e)?!0:Nz.call(_se,e)?!1:vGe.test(e)?bse[e]=!0:(_se[e]=!0,!1)}function bGe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wGe(e,t,n,r){if(t===null||typeof t>"u"||bGe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new tu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new tu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new tu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new tu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new tu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new tu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new tu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new tu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new tu(e,5,!1,e.toLowerCase(),null,!1,!1)});var IG=/[\-:]([a-z])/g;function OG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(IG,OG);Lo[t]=new tu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(IG,OG);Lo[t]=new tu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(IG,OG);Lo[t]=new tu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new tu(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new tu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new tu(e,1,!1,e.toLowerCase(),null,!0,!0)});function PG(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wGe(t,n,i,r)&&(n=null),r||i===null?_Ge(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gm=iEe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gP=Symbol.for("react.element"),kb=Symbol.for("react.portal"),$b=Symbol.for("react.fragment"),kG=Symbol.for("react.strict_mode"),Dz=Symbol.for("react.profiler"),oEe=Symbol.for("react.provider"),aEe=Symbol.for("react.context"),$G=Symbol.for("react.forward_ref"),Mz=Symbol.for("react.suspense"),Lz=Symbol.for("react.suspense_list"),RG=Symbol.for("react.memo"),rg=Symbol.for("react.lazy"),uEe=Symbol.for("react.offscreen"),wse=Symbol.iterator;function _x(e){return e===null||typeof e!="object"?null:(e=wse&&e[wse]||e["@@iterator"],typeof e=="function"?e:null)}var Ui=Object.assign,vj;function TT(e){if(vj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vj=t&&t[1]||""}return`
`+vj+e}var _j=!1;function bj(e,t){if(!e||_j)return"";_j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{_j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?TT(e):""}function EGe(e){switch(e.tag){case 5:return TT(e.type);case 16:return TT("Lazy");case 13:return TT("Suspense");case 19:return TT("SuspenseList");case 0:case 2:case 15:return e=bj(e.type,!1),e;case 11:return e=bj(e.type.render,!1),e;case 1:return e=bj(e.type,!0),e;default:return""}}function Fz(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $b:return"Fragment";case kb:return"Portal";case Dz:return"Profiler";case kG:return"StrictMode";case Mz:return"Suspense";case Lz:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aEe:return(e.displayName||"Context")+".Consumer";case oEe:return(e._context.displayName||"Context")+".Provider";case $G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case RG:return t=e.displayName||null,t!==null?t:Fz(e.type)||"Memo";case rg:t=e._payload,e=e._init;try{return Fz(e(t))}catch{}}return null}function SGe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fz(t);case 8:return t===kG?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function h0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lEe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xGe(e){var t=lEe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function yP(e){e._valueTracker||(e._valueTracker=xGe(e))}function cEe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=lEe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function zR(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function jz(e,t){var n=t.checked;return Ui({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ese(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=h0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fEe(e,t){t=t.checked,t!=null&&PG(e,"checked",t,!1)}function Bz(e,t){fEe(e,t);var n=h0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uz(e,t.type,n):t.hasOwnProperty("defaultValue")&&Uz(e,t.type,h0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sse(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Uz(e,t,n){(t!=="number"||zR(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var CT=Array.isArray;function sw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+h0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function zz(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Ui({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xse(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(CT(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:h0(n)}}function dEe(e,t){var n=h0(t.value),r=h0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Tse(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hEe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vz(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hEe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vP,pEe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vP=vP||document.createElement("div"),vP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var v2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TGe=["Webkit","ms","Moz","O"];Object.keys(v2).forEach(function(e){TGe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),v2[t]=v2[e]})});function mEe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||v2.hasOwnProperty(e)&&v2[e]?(""+t).trim():t+"px"}function gEe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mEe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var CGe=Ui({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hz(e,t){if(t){if(CGe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function qz(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wz=null;function NG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gz=null,ow=null,aw=null;function Cse(e){if(e=uI(e)){if(typeof Gz!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=O6(t),Gz(e.stateNode,e.type,t))}}function yEe(e){ow?aw?aw.push(e):aw=[e]:ow=e}function vEe(){if(ow){var e=ow,t=aw;if(aw=ow=null,Cse(e),t)for(e=0;e<t.length;e++)Cse(t[e])}}function _Ee(e,t){return e(t)}function bEe(){}var wj=!1;function wEe(e,t,n){if(wj)return e(t,n);wj=!0;try{return _Ee(e,t,n)}finally{wj=!1,(ow!==null||aw!==null)&&(bEe(),vEe())}}function EC(e,t){var n=e.stateNode;if(n===null)return null;var r=O6(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var Yz=!1;if(Vp)try{var bx={};Object.defineProperty(bx,"passive",{get:function(){Yz=!0}}),window.addEventListener("test",bx,bx),window.removeEventListener("test",bx,bx)}catch{Yz=!1}function AGe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var _2=!1,VR=null,HR=!1,Kz=null,IGe={onError:function(e){_2=!0,VR=e}};function OGe(e,t,n,r,i,s,o,a,u){_2=!1,VR=null,AGe.apply(IGe,arguments)}function PGe(e,t,n,r,i,s,o,a,u){if(OGe.apply(this,arguments),_2){if(_2){var l=VR;_2=!1,VR=null}else throw Error(tt(198));HR||(HR=!0,Kz=l)}}function i_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function EEe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ase(e){if(i_(e)!==e)throw Error(tt(188))}function kGe(e){var t=e.alternate;if(!t){if(t=i_(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ase(i),e;if(s===r)return Ase(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function SEe(e){return e=kGe(e),e!==null?xEe(e):null}function xEe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xEe(e);if(t!==null)return t;e=e.sibling}return null}var TEe=El.unstable_scheduleCallback,Ise=El.unstable_cancelCallback,$Ge=El.unstable_shouldYield,RGe=El.unstable_requestPaint,as=El.unstable_now,NGe=El.unstable_getCurrentPriorityLevel,DG=El.unstable_ImmediatePriority,CEe=El.unstable_UserBlockingPriority,qR=El.unstable_NormalPriority,DGe=El.unstable_LowPriority,AEe=El.unstable_IdlePriority,T6=null,Dd=null;function MGe(e){if(Dd&&typeof Dd.onCommitFiberRoot=="function")try{Dd.onCommitFiberRoot(T6,e,void 0,(e.current.flags&128)===128)}catch{}}var _f=Math.clz32?Math.clz32:jGe,LGe=Math.log,FGe=Math.LN2;function jGe(e){return e>>>=0,e===0?32:31-(LGe(e)/FGe|0)|0}var _P=64,bP=4194304;function AT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function WR(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=AT(a):(s&=o,s!==0&&(r=AT(s)))}else o=n&~i,o!==0?r=AT(o):s!==0&&(r=AT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_f(t),i=1<<n,r|=e[n],t&=~i;return r}function BGe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UGe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-_f(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=BGe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function Xz(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function IEe(){var e=_P;return _P<<=1,!(_P&4194240)&&(_P=64),e}function Ej(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_f(t),e[t]=n}function zGe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-_f(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function MG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_f(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Fr=0;function OEe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var PEe,LG,kEe,$Ee,REe,Qz=!1,wP=[],Bg=null,Ug=null,zg=null,SC=new Map,xC=new Map,hg=[],VGe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ose(e,t){switch(e){case"focusin":case"focusout":Bg=null;break;case"dragenter":case"dragleave":Ug=null;break;case"mouseover":case"mouseout":zg=null;break;case"pointerover":case"pointerout":SC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xC.delete(t.pointerId)}}function wx(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=uI(t),t!==null&&LG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function HGe(e,t,n,r,i){switch(t){case"focusin":return Bg=wx(Bg,e,t,n,r,i),!0;case"dragenter":return Ug=wx(Ug,e,t,n,r,i),!0;case"mouseover":return zg=wx(zg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return SC.set(s,wx(SC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xC.set(s,wx(xC.get(s)||null,e,t,n,r,i)),!0}return!1}function NEe(e){var t=xv(e.target);if(t!==null){var n=i_(t);if(n!==null){if(t=n.tag,t===13){if(t=EEe(n),t!==null){e.blockedOn=t,REe(e.priority,function(){kEe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function g$(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jz(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Wz=r,n.target.dispatchEvent(r),Wz=null}else return t=uI(n),t!==null&&LG(t),e.blockedOn=n,!1;t.shift()}return!0}function Pse(e,t,n){g$(e)&&n.delete(t)}function qGe(){Qz=!1,Bg!==null&&g$(Bg)&&(Bg=null),Ug!==null&&g$(Ug)&&(Ug=null),zg!==null&&g$(zg)&&(zg=null),SC.forEach(Pse),xC.forEach(Pse)}function Ex(e,t){e.blockedOn===t&&(e.blockedOn=null,Qz||(Qz=!0,El.unstable_scheduleCallback(El.unstable_NormalPriority,qGe)))}function TC(e){function t(i){return Ex(i,e)}if(0<wP.length){Ex(wP[0],e);for(var n=1;n<wP.length;n++){var r=wP[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Bg!==null&&Ex(Bg,e),Ug!==null&&Ex(Ug,e),zg!==null&&Ex(zg,e),SC.forEach(t),xC.forEach(t),n=0;n<hg.length;n++)r=hg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<hg.length&&(n=hg[0],n.blockedOn===null);)NEe(n),n.blockedOn===null&&hg.shift()}var uw=gm.ReactCurrentBatchConfig,GR=!0;function WGe(e,t,n,r){var i=Fr,s=uw.transition;uw.transition=null;try{Fr=1,FG(e,t,n,r)}finally{Fr=i,uw.transition=s}}function GGe(e,t,n,r){var i=Fr,s=uw.transition;uw.transition=null;try{Fr=4,FG(e,t,n,r)}finally{Fr=i,uw.transition=s}}function FG(e,t,n,r){if(GR){var i=Jz(e,t,n,r);if(i===null)$j(e,t,r,YR,n),Ose(e,r);else if(HGe(i,e,t,n,r))r.stopPropagation();else if(Ose(e,r),t&4&&-1<VGe.indexOf(e)){for(;i!==null;){var s=uI(i);if(s!==null&&PEe(s),s=Jz(e,t,n,r),s===null&&$j(e,t,r,YR,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else $j(e,t,r,null,n)}}var YR=null;function Jz(e,t,n,r){if(YR=null,e=NG(r),e=xv(e),e!==null)if(t=i_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=EEe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return YR=e,null}function DEe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NGe()){case DG:return 1;case CEe:return 4;case qR:case DGe:return 16;case AEe:return 536870912;default:return 16}default:return 16}}var Sg=null,jG=null,y$=null;function MEe(){if(y$)return y$;var e,t=jG,n=t.length,r,i="value"in Sg?Sg.value:Sg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return y$=i.slice(e,1<r?1-r:void 0)}function v$(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function EP(){return!0}function kse(){return!1}function Nl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?EP:kse,this.isPropagationStopped=kse,this}return Ui(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=EP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=EP)},persist:function(){},isPersistent:EP}),t}var oS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},BG=Nl(oS),aI=Ui({},oS,{view:0,detail:0}),YGe=Nl(aI),Sj,xj,Sx,C6=Ui({},aI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Sx&&(Sx&&e.type==="mousemove"?(Sj=e.screenX-Sx.screenX,xj=e.screenY-Sx.screenY):xj=Sj=0,Sx=e),Sj)},movementY:function(e){return"movementY"in e?e.movementY:xj}}),$se=Nl(C6),KGe=Ui({},C6,{dataTransfer:0}),XGe=Nl(KGe),QGe=Ui({},aI,{relatedTarget:0}),Tj=Nl(QGe),JGe=Ui({},oS,{animationName:0,elapsedTime:0,pseudoElement:0}),ZGe=Nl(JGe),eYe=Ui({},oS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tYe=Nl(eYe),nYe=Ui({},oS,{data:0}),Rse=Nl(nYe),rYe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iYe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sYe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oYe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sYe[e])?!!t[e]:!1}function UG(){return oYe}var aYe=Ui({},aI,{key:function(e){if(e.key){var t=rYe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=v$(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iYe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UG,charCode:function(e){return e.type==="keypress"?v$(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?v$(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uYe=Nl(aYe),lYe=Ui({},C6,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nse=Nl(lYe),cYe=Ui({},aI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UG}),fYe=Nl(cYe),dYe=Ui({},oS,{propertyName:0,elapsedTime:0,pseudoElement:0}),hYe=Nl(dYe),pYe=Ui({},C6,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mYe=Nl(pYe),gYe=[9,13,27,32],zG=Vp&&"CompositionEvent"in window,b2=null;Vp&&"documentMode"in document&&(b2=document.documentMode);var yYe=Vp&&"TextEvent"in window&&!b2,LEe=Vp&&(!zG||b2&&8<b2&&11>=b2),Dse=" ",Mse=!1;function FEe(e,t){switch(e){case"keyup":return gYe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jEe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rb=!1;function vYe(e,t){switch(e){case"compositionend":return jEe(t);case"keypress":return t.which!==32?null:(Mse=!0,Dse);case"textInput":return e=t.data,e===Dse&&Mse?null:e;default:return null}}function _Ye(e,t){if(Rb)return e==="compositionend"||!zG&&FEe(e,t)?(e=MEe(),y$=jG=Sg=null,Rb=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return LEe&&t.locale!=="ko"?null:t.data;default:return null}}var bYe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lse(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bYe[e.type]:t==="textarea"}function BEe(e,t,n,r){yEe(r),t=KR(t,"onChange"),0<t.length&&(n=new BG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var w2=null,CC=null;function wYe(e){QEe(e,0)}function A6(e){var t=Mb(e);if(cEe(t))return e}function EYe(e,t){if(e==="change")return t}var UEe=!1;if(Vp){var Cj;if(Vp){var Aj="oninput"in document;if(!Aj){var Fse=document.createElement("div");Fse.setAttribute("oninput","return;"),Aj=typeof Fse.oninput=="function"}Cj=Aj}else Cj=!1;UEe=Cj&&(!document.documentMode||9<document.documentMode)}function jse(){w2&&(w2.detachEvent("onpropertychange",zEe),CC=w2=null)}function zEe(e){if(e.propertyName==="value"&&A6(CC)){var t=[];BEe(t,CC,e,NG(e)),wEe(wYe,t)}}function SYe(e,t,n){e==="focusin"?(jse(),w2=t,CC=n,w2.attachEvent("onpropertychange",zEe)):e==="focusout"&&jse()}function xYe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return A6(CC)}function TYe(e,t){if(e==="click")return A6(t)}function CYe(e,t){if(e==="input"||e==="change")return A6(t)}function AYe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Af=typeof Object.is=="function"?Object.is:AYe;function AC(e,t){if(Af(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nz.call(t,i)||!Af(e[i],t[i]))return!1}return!0}function Bse(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Use(e,t){var n=Bse(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bse(n)}}function VEe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?VEe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function HEe(){for(var e=window,t=zR();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zR(e.document)}return t}function VG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function IYe(e){var t=HEe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&VEe(n.ownerDocument.documentElement,n)){if(r!==null&&VG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Use(n,s);var o=Use(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var OYe=Vp&&"documentMode"in document&&11>=document.documentMode,Nb=null,Zz=null,E2=null,e7=!1;function zse(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;e7||Nb==null||Nb!==zR(r)||(r=Nb,"selectionStart"in r&&VG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),E2&&AC(E2,r)||(E2=r,r=KR(Zz,"onSelect"),0<r.length&&(t=new BG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Nb)))}function SP(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Db={animationend:SP("Animation","AnimationEnd"),animationiteration:SP("Animation","AnimationIteration"),animationstart:SP("Animation","AnimationStart"),transitionend:SP("Transition","TransitionEnd")},Ij={},qEe={};Vp&&(qEe=document.createElement("div").style,"AnimationEvent"in window||(delete Db.animationend.animation,delete Db.animationiteration.animation,delete Db.animationstart.animation),"TransitionEvent"in window||delete Db.transitionend.transition);function I6(e){if(Ij[e])return Ij[e];if(!Db[e])return e;var t=Db[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qEe)return Ij[e]=t[n];return e}var WEe=I6("animationend"),GEe=I6("animationiteration"),YEe=I6("animationstart"),KEe=I6("transitionend"),XEe=new Map,Vse="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ey(e,t){XEe.set(e,t),r_(t,[e])}for(var Oj=0;Oj<Vse.length;Oj++){var Pj=Vse[Oj],PYe=Pj.toLowerCase(),kYe=Pj[0].toUpperCase()+Pj.slice(1);ey(PYe,"on"+kYe)}ey(WEe,"onAnimationEnd");ey(GEe,"onAnimationIteration");ey(YEe,"onAnimationStart");ey("dblclick","onDoubleClick");ey("focusin","onFocus");ey("focusout","onBlur");ey(KEe,"onTransitionEnd");zw("onMouseEnter",["mouseout","mouseover"]);zw("onMouseLeave",["mouseout","mouseover"]);zw("onPointerEnter",["pointerout","pointerover"]);zw("onPointerLeave",["pointerout","pointerover"]);r_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));r_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));r_("onBeforeInput",["compositionend","keypress","textInput","paste"]);r_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));r_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));r_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var IT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(IT));function Hse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,PGe(r,t,void 0,e),e.currentTarget=null}function QEe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Hse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Hse(i,a,l),s=u}}}if(HR)throw e=Kz,HR=!1,Kz=null,e}function hi(e,t){var n=t[s7];n===void 0&&(n=t[s7]=new Set);var r=e+"__bubble";n.has(r)||(JEe(t,e,2,!1),n.add(r))}function kj(e,t,n){var r=0;t&&(r|=4),JEe(n,e,r,t)}var xP="_reactListening"+Math.random().toString(36).slice(2);function IC(e){if(!e[xP]){e[xP]=!0,sEe.forEach(function(n){n!=="selectionchange"&&($Ye.has(n)||kj(n,!1,e),kj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xP]||(t[xP]=!0,kj("selectionchange",!1,t))}}function JEe(e,t,n,r){switch(DEe(t)){case 1:var i=WGe;break;case 4:i=GGe;break;default:i=FG}n=i.bind(null,t,n,e),i=void 0,!Yz||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $j(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=xv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}wEe(function(){var l=s,c=NG(n),f=[];e:{var d=XEe.get(e);if(d!==void 0){var h=BG,p=e;switch(e){case"keypress":if(v$(n)===0)break e;case"keydown":case"keyup":h=uYe;break;case"focusin":p="focus",h=Tj;break;case"focusout":p="blur",h=Tj;break;case"beforeblur":case"afterblur":h=Tj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=$se;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=XGe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=fYe;break;case WEe:case GEe:case YEe:h=ZGe;break;case KEe:h=hYe;break;case"scroll":h=YGe;break;case"wheel":h=mYe;break;case"copy":case"cut":case"paste":h=tYe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Nse}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=EC(v,y),w!=null&&m.push(OC(v,w,_)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==Wz&&(p=n.relatedTarget||n.fromElement)&&(xv(p)||p[Hp]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?xv(p):null,p!==null&&(g=i_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=$se,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Nse,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Mb(h),_=p==null?d:Mb(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=_,w=null,xv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,_=m;_;_=q_(_))v++;for(_=0,w=y;w;w=q_(w))_++;for(;0<v-_;)m=q_(m),v--;for(;0<_-v;)y=q_(y),_--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=q_(m),y=q_(y)}m=null}else m=null;h!==null&&qse(f,d,h,m,!1),p!==null&&g!==null&&qse(f,g,p,m,!0)}}e:{if(d=l?Mb(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=EYe;else if(Lse(d))if(UEe)x=CYe;else{x=xYe;var E=SYe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=TYe);if(x&&(x=x(e,l))){BEe(f,x,n,c);break e}E&&E(e,d,l),e==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&Uz(d,"number",d.value)}switch(E=l?Mb(l):window,e){case"focusin":(Lse(E)||E.contentEditable==="true")&&(Nb=E,Zz=l,E2=null);break;case"focusout":E2=Zz=Nb=null;break;case"mousedown":e7=!0;break;case"contextmenu":case"mouseup":case"dragend":e7=!1,zse(f,n,c);break;case"selectionchange":if(OYe)break;case"keydown":case"keyup":zse(f,n,c)}var b;if(zG)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Rb?FEe(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(LEe&&n.locale!=="ko"&&(Rb||T!=="onCompositionStart"?T==="onCompositionEnd"&&Rb&&(b=MEe()):(Sg=c,jG="value"in Sg?Sg.value:Sg.textContent,Rb=!0)),E=KR(l,T),0<E.length&&(T=new Rse(T,e,null,n,c),f.push({event:T,listeners:E}),b?T.data=b:(b=jEe(n),b!==null&&(T.data=b)))),(b=yYe?vYe(e,n):_Ye(e,n))&&(l=KR(l,"onBeforeInput"),0<l.length&&(c=new Rse("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=b))}QEe(f,t)})}function OC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function KR(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=EC(e,n),s!=null&&r.unshift(OC(e,s,i)),s=EC(e,t),s!=null&&r.push(OC(e,s,i))),e=e.return}return r}function q_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=EC(n,s),u!=null&&o.unshift(OC(n,u,a))):i||(u=EC(n,s),u!=null&&o.push(OC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var RYe=/\r\n?/g,NYe=/\u0000|\uFFFD/g;function Wse(e){return(typeof e=="string"?e:""+e).replace(RYe,`
`).replace(NYe,"")}function TP(e,t,n){if(t=Wse(t),Wse(e)!==t&&n)throw Error(tt(425))}function XR(){}var t7=null,n7=null;function r7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var i7=typeof setTimeout=="function"?setTimeout:void 0,DYe=typeof clearTimeout=="function"?clearTimeout:void 0,Gse=typeof Promise=="function"?Promise:void 0,MYe=typeof queueMicrotask=="function"?queueMicrotask:typeof Gse<"u"?function(e){return Gse.resolve(null).then(e).catch(LYe)}:i7;function LYe(e){setTimeout(function(){throw e})}function Rj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),TC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);TC(t)}function Vg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var aS=Math.random().toString(36).slice(2),vd="__reactFiber$"+aS,PC="__reactProps$"+aS,Hp="__reactContainer$"+aS,s7="__reactEvents$"+aS,FYe="__reactListeners$"+aS,jYe="__reactHandles$"+aS;function xv(e){var t=e[vd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Hp]||n[vd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yse(e);e!==null;){if(n=e[vd])return n;e=Yse(e)}return t}e=n,n=e.parentNode}return null}function uI(e){return e=e[vd]||e[Hp],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mb(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function O6(e){return e[PC]||null}var o7=[],Lb=-1;function ty(e){return{current:e}}function bi(e){0>Lb||(e.current=o7[Lb],o7[Lb]=null,Lb--)}function li(e,t){Lb++,o7[Lb]=e.current,e.current=t}var p0={},va=ty(p0),ku=ty(!1),p1=p0;function Vw(e,t){var n=e.type.contextTypes;if(!n)return p0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function $u(e){return e=e.childContextTypes,e!=null}function QR(){bi(ku),bi(va)}function Kse(e,t,n){if(va.current!==p0)throw Error(tt(168));li(va,t),li(ku,n)}function ZEe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,SGe(e)||"Unknown",i));return Ui({},n,r)}function JR(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||p0,p1=va.current,li(va,e),li(ku,ku.current),!0}function Xse(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=ZEe(e,t,p1),r.__reactInternalMemoizedMergedChildContext=e,bi(ku),bi(va),li(va,e)):bi(ku),li(ku,n)}var np=null,P6=!1,Nj=!1;function eSe(e){np===null?np=[e]:np.push(e)}function BYe(e){P6=!0,eSe(e)}function ny(){if(!Nj&&np!==null){Nj=!0;var e=0,t=Fr;try{var n=np;for(Fr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}np=null,P6=!1}catch(i){throw np!==null&&(np=np.slice(e+1)),TEe(DG,ny),i}finally{Fr=t,Nj=!1}}return null}var Fb=[],jb=0,ZR=null,eN=0,Gl=[],Yl=0,m1=null,pp=1,mp="";function Xy(e,t){Fb[jb++]=eN,Fb[jb++]=ZR,ZR=e,eN=t}function tSe(e,t,n){Gl[Yl++]=pp,Gl[Yl++]=mp,Gl[Yl++]=m1,m1=e;var r=pp;e=mp;var i=32-_f(r)-1;r&=~(1<<i),n+=1;var s=32-_f(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pp=1<<32-_f(t)+i|n<<i|r,mp=s+e}else pp=1<<s|n<<i|r,mp=e}function HG(e){e.return!==null&&(Xy(e,1),tSe(e,1,0))}function qG(e){for(;e===ZR;)ZR=Fb[--jb],Fb[jb]=null,eN=Fb[--jb],Fb[jb]=null;for(;e===m1;)m1=Gl[--Yl],Gl[Yl]=null,mp=Gl[--Yl],Gl[Yl]=null,pp=Gl[--Yl],Gl[Yl]=null}var gl=null,fl=null,Pi=!1,tf=null;function nSe(e,t){var n=tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qse(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gl=e,fl=Vg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gl=e,fl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=m1!==null?{id:pp,overflow:mp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=tc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gl=e,fl=null,!0):!1;default:return!1}}function a7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function u7(e){if(Pi){var t=fl;if(t){var n=t;if(!Qse(e,t)){if(a7(e))throw Error(tt(418));t=Vg(n.nextSibling);var r=gl;t&&Qse(e,t)?nSe(r,n):(e.flags=e.flags&-4097|2,Pi=!1,gl=e)}}else{if(a7(e))throw Error(tt(418));e.flags=e.flags&-4097|2,Pi=!1,gl=e}}}function Jse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gl=e}function CP(e){if(e!==gl)return!1;if(!Pi)return Jse(e),Pi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!r7(e.type,e.memoizedProps)),t&&(t=fl)){if(a7(e))throw rSe(),Error(tt(418));for(;t;)nSe(e,t),t=Vg(t.nextSibling)}if(Jse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){fl=Vg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}fl=null}}else fl=gl?Vg(e.stateNode.nextSibling):null;return!0}function rSe(){for(var e=fl;e;)e=Vg(e.nextSibling)}function Hw(){fl=gl=null,Pi=!1}function WG(e){tf===null?tf=[e]:tf.push(e)}var UYe=gm.ReactCurrentBatchConfig;function Kc(e,t){if(e&&e.defaultProps){t=Ui({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var tN=ty(null),nN=null,Bb=null,GG=null;function YG(){GG=Bb=nN=null}function KG(e){var t=tN.current;bi(tN),e._currentValue=t}function l7(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function lw(e,t){nN=e,GG=Bb=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Au=!0),e.firstContext=null)}function fc(e){var t=e._currentValue;if(GG!==e)if(e={context:e,memoizedValue:t,next:null},Bb===null){if(nN===null)throw Error(tt(308));Bb=e,nN.dependencies={lanes:0,firstContext:e}}else Bb=Bb.next=e;return t}var Tv=null;function XG(e){Tv===null?Tv=[e]:Tv.push(e)}function iSe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,XG(t)):(n.next=i.next,i.next=n),t.interleaved=n,qp(e,r)}function qp(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ig=!1;function QG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sSe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Op(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,qp(e,n)}return i=r.interleaved,i===null?(t.next=t,XG(r)):(t.next=i.next,i.next=t),r.interleaved=t,qp(e,n)}function _$(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,MG(e,n)}}function Zse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function rN(e,t,n,r){var i=e.updateQueue;ig=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ui({},f,d);break e;case 2:ig=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);y1|=o,e.lanes=o,e.memoizedState=f}}function eoe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var oSe=new iEe.Component().refs;function c7(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ui({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var k6={isMounted:function(e){return(e=e._reactInternals)?i_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ua(),i=Wg(e),s=Op(r,i);s.payload=t,n!=null&&(s.callback=n),t=Hg(e,s,i),t!==null&&(bf(t,e,i,r),_$(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ua(),i=Wg(e),s=Op(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Hg(e,s,i),t!==null&&(bf(t,e,i,r),_$(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ua(),r=Wg(e),i=Op(n,r);i.tag=2,t!=null&&(i.callback=t),t=Hg(e,i,r),t!==null&&(bf(t,e,r,n),_$(t,e,r))}};function toe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!AC(n,r)||!AC(i,s):!0}function aSe(e,t,n){var r=!1,i=p0,s=t.contextType;return typeof s=="object"&&s!==null?s=fc(s):(i=$u(t)?p1:va.current,r=t.contextTypes,s=(r=r!=null)?Vw(e,i):p0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=k6,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function noe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&k6.enqueueReplaceState(t,t.state,null)}function f7(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=oSe,QG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=fc(s):(s=$u(t)?p1:va.current,i.context=Vw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(c7(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&k6.enqueueReplaceState(i,i.state,null),rN(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function xx(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===oSe&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function AP(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function roe(e){var t=e._init;return t(e._payload)}function uSe(e){function t(y,v){if(e){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Gg(y,v),y.index=0,y.sibling=null,y}function s(y,v,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,_,w){return v===null||v.tag!==6?(v=Uj(_,y.mode,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,w){var x=_.type;return x===$b?c(y,v,_.props.children,w,_.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===rg&&roe(x)===v.type)?(w=i(v,_.props),w.ref=xx(y,v,_),w.return=y,w):(w=T$(_.type,_.key,_.props,null,y.mode,w),w.ref=xx(y,v,_),w.return=y,w)}function l(y,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=zj(_,y.mode,w),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function c(y,v,_,w,x){return v===null||v.tag!==7?(v=qv(_,y.mode,w,x),v.return=y,v):(v=i(v,_),v.return=y,v)}function f(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Uj(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case gP:return _=T$(v.type,v.key,v.props,null,y.mode,_),_.ref=xx(y,null,v),_.return=y,_;case kb:return v=zj(v,y.mode,_),v.return=y,v;case rg:var w=v._init;return f(y,w(v._payload),_)}if(CT(v)||_x(v))return v=qv(v,y.mode,_,null),v.return=y,v;AP(y,v)}return null}function d(y,v,_,w){var x=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:a(y,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gP:return _.key===x?u(y,v,_,w):null;case kb:return _.key===x?l(y,v,_,w):null;case rg:return x=_._init,d(y,v,x(_._payload),w)}if(CT(_)||_x(_))return x!==null?null:c(y,v,_,w,null);AP(y,_)}return null}function h(y,v,_,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(v,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gP:return y=y.get(w.key===null?_:w.key)||null,u(v,y,w,x);case kb:return y=y.get(w.key===null?_:w.key)||null,l(v,y,w,x);case rg:var E=w._init;return h(y,v,_,E(w._payload),x)}if(CT(w)||_x(w))return y=y.get(_)||null,c(v,y,w,x,null);AP(v,w)}return null}function p(y,v,_,w){for(var x=null,E=null,b=v,T=v=0,A=null;b!==null&&T<_.length;T++){b.index>T?(A=b,b=null):A=b.sibling;var C=d(y,b,_[T],w);if(C===null){b===null&&(b=A);break}e&&b&&C.alternate===null&&t(y,b),v=s(C,v,T),E===null?x=C:E.sibling=C,E=C,b=A}if(T===_.length)return n(y,b),Pi&&Xy(y,T),x;if(b===null){for(;T<_.length;T++)b=f(y,_[T],w),b!==null&&(v=s(b,v,T),E===null?x=b:E.sibling=b,E=b);return Pi&&Xy(y,T),x}for(b=r(y,b);T<_.length;T++)A=h(b,y,T,_[T],w),A!==null&&(e&&A.alternate!==null&&b.delete(A.key===null?T:A.key),v=s(A,v,T),E===null?x=A:E.sibling=A,E=A);return e&&b.forEach(function(P){return t(y,P)}),Pi&&Xy(y,T),x}function m(y,v,_,w){var x=_x(_);if(typeof x!="function")throw Error(tt(150));if(_=x.call(_),_==null)throw Error(tt(151));for(var E=x=null,b=v,T=v=0,A=null,C=_.next();b!==null&&!C.done;T++,C=_.next()){b.index>T?(A=b,b=null):A=b.sibling;var P=d(y,b,C.value,w);if(P===null){b===null&&(b=A);break}e&&b&&P.alternate===null&&t(y,b),v=s(P,v,T),E===null?x=P:E.sibling=P,E=P,b=A}if(C.done)return n(y,b),Pi&&Xy(y,T),x;if(b===null){for(;!C.done;T++,C=_.next())C=f(y,C.value,w),C!==null&&(v=s(C,v,T),E===null?x=C:E.sibling=C,E=C);return Pi&&Xy(y,T),x}for(b=r(y,b);!C.done;T++,C=_.next())C=h(b,y,T,C.value,w),C!==null&&(e&&C.alternate!==null&&b.delete(C.key===null?T:C.key),v=s(C,v,T),E===null?x=C:E.sibling=C,E=C);return e&&b.forEach(function(N){return t(y,N)}),Pi&&Xy(y,T),x}function g(y,v,_,w){if(typeof _=="object"&&_!==null&&_.type===$b&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case gP:e:{for(var x=_.key,E=v;E!==null;){if(E.key===x){if(x=_.type,x===$b){if(E.tag===7){n(y,E.sibling),v=i(E,_.props.children),v.return=y,y=v;break e}}else if(E.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===rg&&roe(x)===E.type){n(y,E.sibling),v=i(E,_.props),v.ref=xx(y,E,_),v.return=y,y=v;break e}n(y,E);break}else t(y,E);E=E.sibling}_.type===$b?(v=qv(_.props.children,y.mode,w,_.key),v.return=y,y=v):(w=T$(_.type,_.key,_.props,null,y.mode,w),w.ref=xx(y,v,_),w.return=y,y=w)}return o(y);case kb:e:{for(E=_.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=zj(_,y.mode,w),v.return=y,y=v}return o(y);case rg:return E=_._init,g(y,v,E(_._payload),w)}if(CT(_))return p(y,v,_,w);if(_x(_))return m(y,v,_,w);AP(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,_),v.return=y,y=v):(n(y,v),v=Uj(_,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var qw=uSe(!0),lSe=uSe(!1),lI={},Md=ty(lI),kC=ty(lI),$C=ty(lI);function Cv(e){if(e===lI)throw Error(tt(174));return e}function JG(e,t){switch(li($C,t),li(kC,e),li(Md,lI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vz(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vz(t,e)}bi(Md),li(Md,t)}function Ww(){bi(Md),bi(kC),bi($C)}function cSe(e){Cv($C.current);var t=Cv(Md.current),n=Vz(t,e.type);t!==n&&(li(kC,e),li(Md,n))}function ZG(e){kC.current===e&&(bi(Md),bi(kC))}var ji=ty(0);function iN(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dj=[];function eY(){for(var e=0;e<Dj.length;e++)Dj[e]._workInProgressVersionPrimary=null;Dj.length=0}var b$=gm.ReactCurrentDispatcher,Mj=gm.ReactCurrentBatchConfig,g1=0,Bi=null,Ps=null,Js=null,sN=!1,S2=!1,RC=0,zYe=0;function Wo(){throw Error(tt(321))}function tY(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Af(e[n],t[n]))return!1;return!0}function nY(e,t,n,r,i,s){if(g1=s,Bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,b$.current=e===null||e.memoizedState===null?WYe:GYe,e=n(r,i),S2){s=0;do{if(S2=!1,RC=0,25<=s)throw Error(tt(301));s+=1,Js=Ps=null,t.updateQueue=null,b$.current=YYe,e=n(r,i)}while(S2)}if(b$.current=oN,t=Ps!==null&&Ps.next!==null,g1=0,Js=Ps=Bi=null,sN=!1,t)throw Error(tt(300));return e}function rY(){var e=RC!==0;return RC=0,e}function od(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Js===null?Bi.memoizedState=Js=e:Js=Js.next=e,Js}function dc(){if(Ps===null){var e=Bi.alternate;e=e!==null?e.memoizedState:null}else e=Ps.next;var t=Js===null?Bi.memoizedState:Js.next;if(t!==null)Js=t,Ps=e;else{if(e===null)throw Error(tt(310));Ps=e,e={memoizedState:Ps.memoizedState,baseState:Ps.baseState,baseQueue:Ps.baseQueue,queue:Ps.queue,next:null},Js===null?Bi.memoizedState=Js=e:Js=Js.next=e}return Js}function NC(e,t){return typeof t=="function"?t(e):t}function Lj(e){var t=dc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Ps,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((g1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Bi.lanes|=c,y1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Af(r,t.memoizedState)||(Au=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Bi.lanes|=s,y1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fj(e){var t=dc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Af(s,t.memoizedState)||(Au=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function fSe(){}function dSe(e,t){var n=Bi,r=dc(),i=t(),s=!Af(r.memoizedState,i);if(s&&(r.memoizedState=i,Au=!0),r=r.queue,iY(mSe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Js!==null&&Js.memoizedState.tag&1){if(n.flags|=2048,DC(9,pSe.bind(null,n,r,i,t),void 0,null),uo===null)throw Error(tt(349));g1&30||hSe(n,t,i)}return i}function hSe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Bi.updateQueue,t===null?(t={lastEffect:null,stores:null},Bi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pSe(e,t,n,r){t.value=n,t.getSnapshot=r,gSe(t)&&ySe(e)}function mSe(e,t,n){return n(function(){gSe(t)&&ySe(e)})}function gSe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Af(e,n)}catch{return!0}}function ySe(e){var t=qp(e,1);t!==null&&bf(t,e,1,-1)}function ioe(e){var t=od();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:NC,lastRenderedState:e},t.queue=e,e=e.dispatch=qYe.bind(null,Bi,e),[t.memoizedState,e]}function DC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Bi.updateQueue,t===null?(t={lastEffect:null,stores:null},Bi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function vSe(){return dc().memoizedState}function w$(e,t,n,r){var i=od();Bi.flags|=e,i.memoizedState=DC(1|t,n,void 0,r===void 0?null:r)}function $6(e,t,n,r){var i=dc();r=r===void 0?null:r;var s=void 0;if(Ps!==null){var o=Ps.memoizedState;if(s=o.destroy,r!==null&&tY(r,o.deps)){i.memoizedState=DC(t,n,s,r);return}}Bi.flags|=e,i.memoizedState=DC(1|t,n,s,r)}function soe(e,t){return w$(8390656,8,e,t)}function iY(e,t){return $6(2048,8,e,t)}function _Se(e,t){return $6(4,2,e,t)}function bSe(e,t){return $6(4,4,e,t)}function wSe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ESe(e,t,n){return n=n!=null?n.concat([e]):null,$6(4,4,wSe.bind(null,t,e),n)}function sY(){}function SSe(e,t){var n=dc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tY(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xSe(e,t){var n=dc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tY(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function TSe(e,t,n){return g1&21?(Af(n,t)||(n=IEe(),Bi.lanes|=n,y1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Au=!0),e.memoizedState=n)}function VYe(e,t){var n=Fr;Fr=n!==0&&4>n?n:4,e(!0);var r=Mj.transition;Mj.transition={};try{e(!1),t()}finally{Fr=n,Mj.transition=r}}function CSe(){return dc().memoizedState}function HYe(e,t,n){var r=Wg(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ASe(e))ISe(t,n);else if(n=iSe(e,t,n,r),n!==null){var i=Ua();bf(n,e,r,i),OSe(n,t,r)}}function qYe(e,t,n){var r=Wg(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ASe(e))ISe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Af(a,o)){var u=t.interleaved;u===null?(i.next=i,XG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=iSe(e,t,i,r),n!==null&&(i=Ua(),bf(n,e,r,i),OSe(n,t,r))}}function ASe(e){var t=e.alternate;return e===Bi||t!==null&&t===Bi}function ISe(e,t){S2=sN=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OSe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,MG(e,n)}}var oN={readContext:fc,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},WYe={readContext:fc,useCallback:function(e,t){return od().memoizedState=[e,t===void 0?null:t],e},useContext:fc,useEffect:soe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,w$(4194308,4,wSe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return w$(4194308,4,e,t)},useInsertionEffect:function(e,t){return w$(4,2,e,t)},useMemo:function(e,t){var n=od();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=od();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=HYe.bind(null,Bi,e),[r.memoizedState,e]},useRef:function(e){var t=od();return e={current:e},t.memoizedState=e},useState:ioe,useDebugValue:sY,useDeferredValue:function(e){return od().memoizedState=e},useTransition:function(){var e=ioe(!1),t=e[0];return e=VYe.bind(null,e[1]),od().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Bi,i=od();if(Pi){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),uo===null)throw Error(tt(349));g1&30||hSe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,soe(mSe.bind(null,r,s,e),[e]),r.flags|=2048,DC(9,pSe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=od(),t=uo.identifierPrefix;if(Pi){var n=mp,r=pp;n=(r&~(1<<32-_f(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=RC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zYe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},GYe={readContext:fc,useCallback:SSe,useContext:fc,useEffect:iY,useImperativeHandle:ESe,useInsertionEffect:_Se,useLayoutEffect:bSe,useMemo:xSe,useReducer:Lj,useRef:vSe,useState:function(){return Lj(NC)},useDebugValue:sY,useDeferredValue:function(e){var t=dc();return TSe(t,Ps.memoizedState,e)},useTransition:function(){var e=Lj(NC)[0],t=dc().memoizedState;return[e,t]},useMutableSource:fSe,useSyncExternalStore:dSe,useId:CSe,unstable_isNewReconciler:!1},YYe={readContext:fc,useCallback:SSe,useContext:fc,useEffect:iY,useImperativeHandle:ESe,useInsertionEffect:_Se,useLayoutEffect:bSe,useMemo:xSe,useReducer:Fj,useRef:vSe,useState:function(){return Fj(NC)},useDebugValue:sY,useDeferredValue:function(e){var t=dc();return Ps===null?t.memoizedState=e:TSe(t,Ps.memoizedState,e)},useTransition:function(){var e=Fj(NC)[0],t=dc().memoizedState;return[e,t]},useMutableSource:fSe,useSyncExternalStore:dSe,useId:CSe,unstable_isNewReconciler:!1};function Gw(e,t){try{var n="",r=t;do n+=EGe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function jj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function d7(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var KYe=typeof WeakMap=="function"?WeakMap:Map;function PSe(e,t,n){n=Op(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){uN||(uN=!0,E7=r),d7(e,t)},n}function kSe(e,t,n){n=Op(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){d7(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){d7(e,t),typeof r!="function"&&(qg===null?qg=new Set([this]):qg.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function ooe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new KYe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=lKe.bind(null,e,t,n),t.then(e,e))}function aoe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uoe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Op(-1,1),t.tag=2,Hg(n,t,1))),n.lanes|=1),e)}var XYe=gm.ReactCurrentOwner,Au=!1;function $a(e,t,n,r){t.child=e===null?lSe(t,null,n,r):qw(t,e.child,n,r)}function loe(e,t,n,r,i){n=n.render;var s=t.ref;return lw(t,i),r=nY(e,t,n,r,s,i),n=rY(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wp(e,t,i)):(Pi&&n&&HG(t),t.flags|=1,$a(e,t,r,i),t.child)}function coe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!hY(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,$Se(e,t,s,r,i)):(e=T$(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:AC,n(o,r)&&e.ref===t.ref)return Wp(e,t,i)}return t.flags|=1,e=Gg(s,r),e.ref=t.ref,e.return=t,t.child=e}function $Se(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(AC(s,r)&&e.ref===t.ref)if(Au=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Au=!0);else return t.lanes=e.lanes,Wp(e,t,i)}return h7(e,t,n,r,i)}function RSe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},li(zb,rl),rl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,li(zb,rl),rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,li(zb,rl),rl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,li(zb,rl),rl|=r;return $a(e,t,i,n),t.child}function NSe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function h7(e,t,n,r,i){var s=$u(n)?p1:va.current;return s=Vw(t,s),lw(t,i),n=nY(e,t,n,r,s,i),r=rY(),e!==null&&!Au?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wp(e,t,i)):(Pi&&r&&HG(t),t.flags|=1,$a(e,t,n,i),t.child)}function foe(e,t,n,r,i){if($u(n)){var s=!0;JR(t)}else s=!1;if(lw(t,i),t.stateNode===null)E$(e,t),aSe(t,n,r),f7(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=fc(l):(l=$u(n)?p1:va.current,l=Vw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&noe(t,o,r,l),ig=!1;var d=t.memoizedState;o.state=d,rN(t,r,o,i),u=t.memoizedState,a!==r||d!==u||ku.current||ig?(typeof c=="function"&&(c7(t,n,c,r),u=t.memoizedState),(a=ig||toe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,sSe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Kc(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=fc(u):(u=$u(n)?p1:va.current,u=Vw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&noe(t,o,r,u),ig=!1,d=t.memoizedState,o.state=d,rN(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||ku.current||ig?(typeof h=="function"&&(c7(t,n,h,r),p=t.memoizedState),(l=ig||toe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return p7(e,t,n,r,s,i)}function p7(e,t,n,r,i,s){NSe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Xse(t,n,!1),Wp(e,t,s);r=t.stateNode,XYe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=qw(t,e.child,null,s),t.child=qw(t,null,a,s)):$a(e,t,a,s),t.memoizedState=r.state,i&&Xse(t,n,!0),t.child}function DSe(e){var t=e.stateNode;t.pendingContext?Kse(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kse(e,t.context,!1),JG(e,t.containerInfo)}function doe(e,t,n,r,i){return Hw(),WG(i),t.flags|=256,$a(e,t,n,r),t.child}var m7={dehydrated:null,treeContext:null,retryLane:0};function g7(e){return{baseLanes:e,cachePool:null,transitions:null}}function MSe(e,t,n){var r=t.pendingProps,i=ji.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),li(ji,i&1),e===null)return u7(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=D6(o,r,0,null),e=qv(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=g7(n),t.memoizedState=m7,e):oY(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QYe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Gg(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Gg(a,s):(s=qv(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?g7(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=m7,r}return s=e.child,e=s.sibling,r=Gg(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function oY(e,t){return t=D6({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function IP(e,t,n,r){return r!==null&&WG(r),qw(t,e.child,null,n),e=oY(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function QYe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=jj(Error(tt(422))),IP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=D6({mode:"visible",children:r.children},i,0,null),s=qv(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&qw(t,e.child,null,o),t.child.memoizedState=g7(o),t.memoizedState=m7,s);if(!(t.mode&1))return IP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=jj(s,r,void 0),IP(e,t,o,r)}if(a=(o&e.childLanes)!==0,Au||a){if(r=uo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qp(e,i),bf(r,e,i,-1))}return dY(),r=jj(Error(tt(421))),IP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cKe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,fl=Vg(i.nextSibling),gl=t,Pi=!0,tf=null,e!==null&&(Gl[Yl++]=pp,Gl[Yl++]=mp,Gl[Yl++]=m1,pp=e.id,mp=e.overflow,m1=t),t=oY(t,r.children),t.flags|=4096,t)}function hoe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),l7(e.return,t,n)}function Bj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function LSe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if($a(e,t,r.children,n),r=ji.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hoe(e,n,t);else if(e.tag===19)hoe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(ji,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&iN(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&iN(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bj(t,!0,n,null,s);break;case"together":Bj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function E$(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wp(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),y1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=Gg(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Gg(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function JYe(e,t,n){switch(t.tag){case 3:DSe(t),Hw();break;case 5:cSe(t);break;case 1:$u(t.type)&&JR(t);break;case 4:JG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;li(tN,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(li(ji,ji.current&1),t.flags|=128,null):n&t.child.childLanes?MSe(e,t,n):(li(ji,ji.current&1),e=Wp(e,t,n),e!==null?e.sibling:null);li(ji,ji.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return LSe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(ji,ji.current),r)break;return null;case 22:case 23:return t.lanes=0,RSe(e,t,n)}return Wp(e,t,n)}var FSe,y7,jSe,BSe;FSe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};y7=function(){};jSe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Cv(Md.current);var s=null;switch(n){case"input":i=jz(e,i),r=jz(e,r),s=[];break;case"select":i=Ui({},i,{value:void 0}),r=Ui({},r,{value:void 0}),s=[];break;case"textarea":i=zz(e,i),r=zz(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=XR)}Hz(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(bC.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(bC.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&hi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};BSe=function(e,t,n,r){n!==r&&(t.flags|=4)};function Tx(e,t){if(!Pi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ZYe(e,t,n){var r=t.pendingProps;switch(qG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:return $u(t.type)&&QR(),Go(t),null;case 3:return r=t.stateNode,Ww(),bi(ku),bi(va),eY(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(CP(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tf!==null&&(T7(tf),tf=null))),y7(e,t),Go(t),null;case 5:ZG(t);var i=Cv($C.current);if(n=t.type,e!==null&&t.stateNode!=null)jSe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Go(t),null}if(e=Cv(Md.current),CP(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[vd]=t,r[PC]=s,e=(t.mode&1)!==0,n){case"dialog":hi("cancel",r),hi("close",r);break;case"iframe":case"object":case"embed":hi("load",r);break;case"video":case"audio":for(i=0;i<IT.length;i++)hi(IT[i],r);break;case"source":hi("error",r);break;case"img":case"image":case"link":hi("error",r),hi("load",r);break;case"details":hi("toggle",r);break;case"input":Ese(r,s),hi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},hi("invalid",r);break;case"textarea":xse(r,s),hi("invalid",r)}Hz(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&TP(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&TP(r.textContent,a,e),i=["children",""+a]):bC.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&hi("scroll",r)}switch(n){case"input":yP(r),Sse(r,s,!0);break;case"textarea":yP(r),Tse(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=XR)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hEe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[vd]=t,e[PC]=r,FSe(e,t,!1,!1),t.stateNode=e;e:{switch(o=qz(n,r),n){case"dialog":hi("cancel",e),hi("close",e),i=r;break;case"iframe":case"object":case"embed":hi("load",e),i=r;break;case"video":case"audio":for(i=0;i<IT.length;i++)hi(IT[i],e);i=r;break;case"source":hi("error",e),i=r;break;case"img":case"image":case"link":hi("error",e),hi("load",e),i=r;break;case"details":hi("toggle",e),i=r;break;case"input":Ese(e,r),i=jz(e,r),hi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ui({},r,{value:void 0}),hi("invalid",e);break;case"textarea":xse(e,r),i=zz(e,r),hi("invalid",e);break;default:i=r}Hz(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?gEe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pEe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&wC(e,u):typeof u=="number"&&wC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bC.hasOwnProperty(s)?u!=null&&s==="onScroll"&&hi("scroll",e):u!=null&&PG(e,s,u,o))}switch(n){case"input":yP(e),Sse(e,r,!1);break;case"textarea":yP(e),Tse(e);break;case"option":r.value!=null&&e.setAttribute("value",""+h0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?sw(e,!!r.multiple,s,!1):r.defaultValue!=null&&sw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=XR)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&t.stateNode!=null)BSe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=Cv($C.current),Cv(Md.current),CP(t)){if(r=t.stateNode,n=t.memoizedProps,r[vd]=t,(s=r.nodeValue!==n)&&(e=gl,e!==null))switch(e.tag){case 3:TP(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&TP(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vd]=t,t.stateNode=r}return Go(t),null;case 13:if(bi(ji),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pi&&fl!==null&&t.mode&1&&!(t.flags&128))rSe(),Hw(),t.flags|=98560,s=!1;else if(s=CP(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[vd]=t}else Hw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Go(t),s=!1}else tf!==null&&(T7(tf),tf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ji.current&1?Ds===0&&(Ds=3):dY())),t.updateQueue!==null&&(t.flags|=4),Go(t),null);case 4:return Ww(),y7(e,t),e===null&&IC(t.stateNode.containerInfo),Go(t),null;case 10:return KG(t.type._context),Go(t),null;case 17:return $u(t.type)&&QR(),Go(t),null;case 19:if(bi(ji),s=t.memoizedState,s===null)return Go(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)Tx(s,!1);else{if(Ds!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=iN(e),o!==null){for(t.flags|=128,Tx(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(ji,ji.current&1|2),t.child}e=e.sibling}s.tail!==null&&as()>Yw&&(t.flags|=128,r=!0,Tx(s,!1),t.lanes=4194304)}else{if(!r)if(e=iN(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tx(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pi)return Go(t),null}else 2*as()-s.renderingStartTime>Yw&&n!==1073741824&&(t.flags|=128,r=!0,Tx(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=as(),t.sibling=null,n=ji.current,li(ji,r?n&1|2:n&1),t):(Go(t),null);case 22:case 23:return fY(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?rl&1073741824&&(Go(t),t.subtreeFlags&6&&(t.flags|=8192)):Go(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function eKe(e,t){switch(qG(t),t.tag){case 1:return $u(t.type)&&QR(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ww(),bi(ku),bi(va),eY(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ZG(t),null;case 13:if(bi(ji),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));Hw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bi(ji),null;case 4:return Ww(),null;case 10:return KG(t.type._context),null;case 22:case 23:return fY(),null;case 24:return null;default:return null}}var OP=!1,aa=!1,tKe=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function Ub(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gi(e,t,r)}else n.current=null}function v7(e,t,n){try{n()}catch(r){Gi(e,t,r)}}var poe=!1;function nKe(e,t){if(t7=GR,e=HEe(),VG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(n7={focusedElem:e,selectionRange:n},GR=!1,Ot=t;Ot!==null;)if(t=Ot,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ot=e;else for(;Ot!==null;){t=Ot;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Kc(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){Gi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ot=e;break}Ot=t.return}return p=poe,poe=!1,p}function x2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&v7(t,n,s)}i=i.next}while(i!==r)}}function R6(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function _7(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function USe(e){var t=e.alternate;t!==null&&(e.alternate=null,USe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vd],delete t[PC],delete t[s7],delete t[FYe],delete t[jYe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zSe(e){return e.tag===5||e.tag===3||e.tag===4}function moe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zSe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function b7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=XR));else if(r!==4&&(e=e.child,e!==null))for(b7(e,t,n),e=e.sibling;e!==null;)b7(e,t,n),e=e.sibling}function w7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(w7(e,t,n),e=e.sibling;e!==null;)w7(e,t,n),e=e.sibling}var wo=null,Qc=!1;function Um(e,t,n){for(n=n.child;n!==null;)VSe(e,t,n),n=n.sibling}function VSe(e,t,n){if(Dd&&typeof Dd.onCommitFiberUnmount=="function")try{Dd.onCommitFiberUnmount(T6,n)}catch{}switch(n.tag){case 5:aa||Ub(n,t);case 6:var r=wo,i=Qc;wo=null,Um(e,t,n),wo=r,Qc=i,wo!==null&&(Qc?(e=wo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):wo.removeChild(n.stateNode));break;case 18:wo!==null&&(Qc?(e=wo,n=n.stateNode,e.nodeType===8?Rj(e.parentNode,n):e.nodeType===1&&Rj(e,n),TC(e)):Rj(wo,n.stateNode));break;case 4:r=wo,i=Qc,wo=n.stateNode.containerInfo,Qc=!0,Um(e,t,n),wo=r,Qc=i;break;case 0:case 11:case 14:case 15:if(!aa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&v7(n,t,o),i=i.next}while(i!==r)}Um(e,t,n);break;case 1:if(!aa&&(Ub(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gi(n,t,a)}Um(e,t,n);break;case 21:Um(e,t,n);break;case 22:n.mode&1?(aa=(r=aa)||n.memoizedState!==null,Um(e,t,n),aa=r):Um(e,t,n);break;default:Um(e,t,n)}}function goe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new tKe),t.forEach(function(r){var i=fKe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:wo=a.stateNode,Qc=!1;break e;case 3:wo=a.stateNode.containerInfo,Qc=!0;break e;case 4:wo=a.stateNode.containerInfo,Qc=!0;break e}a=a.return}if(wo===null)throw Error(tt(160));VSe(s,o,i),wo=null,Qc=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Gi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)HSe(t,e),t=t.sibling}function HSe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mc(t,e),Jf(e),r&4){try{x2(3,e,e.return),R6(3,e)}catch(m){Gi(e,e.return,m)}try{x2(5,e,e.return)}catch(m){Gi(e,e.return,m)}}break;case 1:Mc(t,e),Jf(e),r&512&&n!==null&&Ub(n,n.return);break;case 5:if(Mc(t,e),Jf(e),r&512&&n!==null&&Ub(n,n.return),e.flags&32){var i=e.stateNode;try{wC(i,"")}catch(m){Gi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fEe(i,s),qz(a,o);var l=qz(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?gEe(i,f):c==="dangerouslySetInnerHTML"?pEe(i,f):c==="children"?wC(i,f):PG(i,c,f,l)}switch(a){case"input":Bz(i,s);break;case"textarea":dEe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?sw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?sw(i,!!s.multiple,s.defaultValue,!0):sw(i,!!s.multiple,s.multiple?[]:"",!1))}i[PC]=s}catch(m){Gi(e,e.return,m)}}break;case 6:if(Mc(t,e),Jf(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Gi(e,e.return,m)}}break;case 3:if(Mc(t,e),Jf(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{TC(t.containerInfo)}catch(m){Gi(e,e.return,m)}break;case 4:Mc(t,e),Jf(e);break;case 13:Mc(t,e),Jf(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lY=as())),r&4&&goe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(aa=(l=aa)||c,Mc(t,e),aa=l):Mc(t,e),Jf(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Ot=e,c=e.child;c!==null;){for(f=Ot=c;Ot!==null;){switch(d=Ot,h=d.child,d.tag){case 0:case 11:case 14:case 15:x2(4,d,d.return);break;case 1:Ub(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Gi(r,n,m)}}break;case 5:Ub(d,d.return);break;case 22:if(d.memoizedState!==null){voe(f);continue}}h!==null?(h.return=d,Ot=h):voe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=mEe("display",o))}catch(m){Gi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Gi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mc(t,e),Jf(e),r&4&&goe(e);break;case 21:break;default:Mc(t,e),Jf(e)}}function Jf(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zSe(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(wC(i,""),r.flags&=-33);var s=moe(e);w7(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=moe(e);b7(e,a,o);break;default:throw Error(tt(161))}}catch(u){Gi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rKe(e,t,n){Ot=e,qSe(e)}function qSe(e,t,n){for(var r=(e.mode&1)!==0;Ot!==null;){var i=Ot,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||OP;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||aa;a=OP;var l=aa;if(OP=o,(aa=u)&&!l)for(Ot=i;Ot!==null;)o=Ot,u=o.child,o.tag===22&&o.memoizedState!==null?_oe(i):u!==null?(u.return=o,Ot=u):_oe(i);for(;s!==null;)Ot=s,qSe(s),s=s.sibling;Ot=i,OP=a,aa=l}yoe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ot=s):yoe(e)}}function yoe(e){for(;Ot!==null;){var t=Ot;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:aa||R6(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!aa)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Kc(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&eoe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}eoe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&TC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}aa||t.flags&512&&_7(t)}catch(d){Gi(t,t.return,d)}}if(t===e){Ot=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function voe(e){for(;Ot!==null;){var t=Ot;if(t===e){Ot=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ot=n;break}Ot=t.return}}function _oe(e){for(;Ot!==null;){var t=Ot;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{R6(4,t)}catch(u){Gi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Gi(t,i,u)}}var s=t.return;try{_7(t)}catch(u){Gi(t,s,u)}break;case 5:var o=t.return;try{_7(t)}catch(u){Gi(t,o,u)}}}catch(u){Gi(t,t.return,u)}if(t===e){Ot=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ot=a;break}Ot=t.return}}var iKe=Math.ceil,aN=gm.ReactCurrentDispatcher,aY=gm.ReactCurrentOwner,oc=gm.ReactCurrentBatchConfig,dr=0,uo=null,Es=null,$o=0,rl=0,zb=ty(0),Ds=0,MC=null,y1=0,N6=0,uY=0,T2=null,vu=null,lY=0,Yw=1/0,Qh=null,uN=!1,E7=null,qg=null,PP=!1,xg=null,lN=0,C2=0,S7=null,S$=-1,x$=0;function Ua(){return dr&6?as():S$!==-1?S$:S$=as()}function Wg(e){return e.mode&1?dr&2&&$o!==0?$o&-$o:UYe.transition!==null?(x$===0&&(x$=IEe()),x$):(e=Fr,e!==0||(e=window.event,e=e===void 0?16:DEe(e.type)),e):1}function bf(e,t,n,r){if(50<C2)throw C2=0,S7=null,Error(tt(185));oI(e,n,r),(!(dr&2)||e!==uo)&&(e===uo&&(!(dr&2)&&(N6|=n),Ds===4&&pg(e,$o)),Ru(e,r),n===1&&dr===0&&!(t.mode&1)&&(Yw=as()+500,P6&&ny()))}function Ru(e,t){var n=e.callbackNode;UGe(e,t);var r=WR(e,e===uo?$o:0);if(r===0)n!==null&&Ise(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ise(n),t===1)e.tag===0?BYe(boe.bind(null,e)):eSe(boe.bind(null,e)),MYe(function(){!(dr&6)&&ny()}),n=null;else{switch(OEe(r)){case 1:n=DG;break;case 4:n=CEe;break;case 16:n=qR;break;case 536870912:n=AEe;break;default:n=qR}n=ZSe(n,WSe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function WSe(e,t){if(S$=-1,x$=0,dr&6)throw Error(tt(327));var n=e.callbackNode;if(cw()&&e.callbackNode!==n)return null;var r=WR(e,e===uo?$o:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=cN(e,r);else{t=r;var i=dr;dr|=2;var s=YSe();(uo!==e||$o!==t)&&(Qh=null,Yw=as()+500,Hv(e,t));do try{aKe();break}catch(a){GSe(e,a)}while(!0);YG(),aN.current=s,dr=i,Es!==null?t=0:(uo=null,$o=0,t=Ds)}if(t!==0){if(t===2&&(i=Xz(e),i!==0&&(r=i,t=x7(e,i))),t===1)throw n=MC,Hv(e,0),pg(e,r),Ru(e,as()),n;if(t===6)pg(e,r);else{if(i=e.current.alternate,!(r&30)&&!sKe(i)&&(t=cN(e,r),t===2&&(s=Xz(e),s!==0&&(r=s,t=x7(e,s))),t===1))throw n=MC,Hv(e,0),pg(e,r),Ru(e,as()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:Qy(e,vu,Qh);break;case 3:if(pg(e,r),(r&130023424)===r&&(t=lY+500-as(),10<t)){if(WR(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ua(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=i7(Qy.bind(null,e,vu,Qh),t);break}Qy(e,vu,Qh);break;case 4:if(pg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-_f(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=as()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iKe(r/1960))-r,10<r){e.timeoutHandle=i7(Qy.bind(null,e,vu,Qh),r);break}Qy(e,vu,Qh);break;case 5:Qy(e,vu,Qh);break;default:throw Error(tt(329))}}}return Ru(e,as()),e.callbackNode===n?WSe.bind(null,e):null}function x7(e,t){var n=T2;return e.current.memoizedState.isDehydrated&&(Hv(e,t).flags|=256),e=cN(e,t),e!==2&&(t=vu,vu=n,t!==null&&T7(t)),e}function T7(e){vu===null?vu=e:vu.push.apply(vu,e)}function sKe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Af(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function pg(e,t){for(t&=~uY,t&=~N6,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_f(t),r=1<<n;e[n]=-1,t&=~r}}function boe(e){if(dr&6)throw Error(tt(327));cw();var t=WR(e,0);if(!(t&1))return Ru(e,as()),null;var n=cN(e,t);if(e.tag!==0&&n===2){var r=Xz(e);r!==0&&(t=r,n=x7(e,r))}if(n===1)throw n=MC,Hv(e,0),pg(e,t),Ru(e,as()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qy(e,vu,Qh),Ru(e,as()),null}function cY(e,t){var n=dr;dr|=1;try{return e(t)}finally{dr=n,dr===0&&(Yw=as()+500,P6&&ny())}}function v1(e){xg!==null&&xg.tag===0&&!(dr&6)&&cw();var t=dr;dr|=1;var n=oc.transition,r=Fr;try{if(oc.transition=null,Fr=1,e)return e()}finally{Fr=r,oc.transition=n,dr=t,!(dr&6)&&ny()}}function fY(){rl=zb.current,bi(zb)}function Hv(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,DYe(n)),Es!==null)for(n=Es.return;n!==null;){var r=n;switch(qG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&QR();break;case 3:Ww(),bi(ku),bi(va),eY();break;case 5:ZG(r);break;case 4:Ww();break;case 13:bi(ji);break;case 19:bi(ji);break;case 10:KG(r.type._context);break;case 22:case 23:fY()}n=n.return}if(uo=e,Es=e=Gg(e.current,null),$o=rl=t,Ds=0,MC=null,uY=N6=y1=0,vu=T2=null,Tv!==null){for(t=0;t<Tv.length;t++)if(n=Tv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Tv=null}return e}function GSe(e,t){do{var n=Es;try{if(YG(),b$.current=oN,sN){for(var r=Bi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}sN=!1}if(g1=0,Js=Ps=Bi=null,S2=!1,RC=0,aY.current=null,n===null||n.return===null){Ds=1,MC=t,Es=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=$o,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=aoe(o);if(h!==null){h.flags&=-257,uoe(h,o,a,s,t),h.mode&1&&ooe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){ooe(s,l,t),dY();break e}u=Error(tt(426))}}else if(Pi&&a.mode&1){var g=aoe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),uoe(g,o,a,s,t),WG(Gw(u,a));break e}}s=u=Gw(u,a),Ds!==4&&(Ds=2),T2===null?T2=[s]:T2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=PSe(s,u,t);Zse(s,y);break e;case 1:a=u;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qg===null||!qg.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=kSe(s,a,t);Zse(s,w);break e}}s=s.return}while(s!==null)}XSe(n)}catch(x){t=x,Es===n&&n!==null&&(Es=n=n.return);continue}break}while(!0)}function YSe(){var e=aN.current;return aN.current=oN,e===null?oN:e}function dY(){(Ds===0||Ds===3||Ds===2)&&(Ds=4),uo===null||!(y1&268435455)&&!(N6&268435455)||pg(uo,$o)}function cN(e,t){var n=dr;dr|=2;var r=YSe();(uo!==e||$o!==t)&&(Qh=null,Hv(e,t));do try{oKe();break}catch(i){GSe(e,i)}while(!0);if(YG(),dr=n,aN.current=r,Es!==null)throw Error(tt(261));return uo=null,$o=0,Ds}function oKe(){for(;Es!==null;)KSe(Es)}function aKe(){for(;Es!==null&&!$Ge();)KSe(Es)}function KSe(e){var t=JSe(e.alternate,e,rl);e.memoizedProps=e.pendingProps,t===null?XSe(e):Es=t,aY.current=null}function XSe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=eKe(n,t),n!==null){n.flags&=32767,Es=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ds=6,Es=null;return}}else if(n=ZYe(n,t,rl),n!==null){Es=n;return}if(t=t.sibling,t!==null){Es=t;return}Es=t=e}while(t!==null);Ds===0&&(Ds=5)}function Qy(e,t,n){var r=Fr,i=oc.transition;try{oc.transition=null,Fr=1,uKe(e,t,n,r)}finally{oc.transition=i,Fr=r}return null}function uKe(e,t,n,r){do cw();while(xg!==null);if(dr&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(zGe(e,s),e===uo&&(Es=uo=null,$o=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||PP||(PP=!0,ZSe(qR,function(){return cw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=oc.transition,oc.transition=null;var o=Fr;Fr=1;var a=dr;dr|=4,aY.current=null,nKe(e,n),HSe(n,e),IYe(n7),GR=!!t7,n7=t7=null,e.current=n,rKe(n),RGe(),dr=a,Fr=o,oc.transition=s}else e.current=n;if(PP&&(PP=!1,xg=e,lN=i),s=e.pendingLanes,s===0&&(qg=null),MGe(n.stateNode),Ru(e,as()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(uN)throw uN=!1,e=E7,E7=null,e;return lN&1&&e.tag!==0&&cw(),s=e.pendingLanes,s&1?e===S7?C2++:(C2=0,S7=e):C2=0,ny(),null}function cw(){if(xg!==null){var e=OEe(lN),t=oc.transition,n=Fr;try{if(oc.transition=null,Fr=16>e?16:e,xg===null)var r=!1;else{if(e=xg,xg=null,lN=0,dr&6)throw Error(tt(331));var i=dr;for(dr|=4,Ot=e.current;Ot!==null;){var s=Ot,o=s.child;if(Ot.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Ot=l;Ot!==null;){var c=Ot;switch(c.tag){case 0:case 11:case 15:x2(8,c,s)}var f=c.child;if(f!==null)f.return=c,Ot=f;else for(;Ot!==null;){c=Ot;var d=c.sibling,h=c.return;if(USe(c),c===l){Ot=null;break}if(d!==null){d.return=h,Ot=d;break}Ot=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ot=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ot=o;else e:for(;Ot!==null;){if(s=Ot,s.flags&2048)switch(s.tag){case 0:case 11:case 15:x2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Ot=y;break e}Ot=s.return}}var v=e.current;for(Ot=v;Ot!==null;){o=Ot;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ot=_;else e:for(o=v;Ot!==null;){if(a=Ot,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:R6(9,a)}}catch(x){Gi(a,a.return,x)}if(a===o){Ot=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ot=w;break e}Ot=a.return}}if(dr=i,ny(),Dd&&typeof Dd.onPostCommitFiberRoot=="function")try{Dd.onPostCommitFiberRoot(T6,e)}catch{}r=!0}return r}finally{Fr=n,oc.transition=t}}return!1}function woe(e,t,n){t=Gw(n,t),t=PSe(e,t,1),e=Hg(e,t,1),t=Ua(),e!==null&&(oI(e,1,t),Ru(e,t))}function Gi(e,t,n){if(e.tag===3)woe(e,e,n);else for(;t!==null;){if(t.tag===3){woe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qg===null||!qg.has(r))){e=Gw(n,e),e=kSe(t,e,1),t=Hg(t,e,1),e=Ua(),t!==null&&(oI(t,1,e),Ru(t,e));break}}t=t.return}}function lKe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ua(),e.pingedLanes|=e.suspendedLanes&n,uo===e&&($o&n)===n&&(Ds===4||Ds===3&&($o&130023424)===$o&&500>as()-lY?Hv(e,0):uY|=n),Ru(e,t)}function QSe(e,t){t===0&&(e.mode&1?(t=bP,bP<<=1,!(bP&130023424)&&(bP=4194304)):t=1);var n=Ua();e=qp(e,t),e!==null&&(oI(e,t,n),Ru(e,n))}function cKe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),QSe(e,n)}function fKe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),QSe(e,n)}var JSe;JSe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ku.current)Au=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Au=!1,JYe(e,t,n);Au=!!(e.flags&131072)}else Au=!1,Pi&&t.flags&1048576&&tSe(t,eN,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;E$(e,t),e=t.pendingProps;var i=Vw(t,va.current);lw(t,n),i=nY(null,t,r,e,i,n);var s=rY();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$u(r)?(s=!0,JR(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,QG(t),i.updater=k6,t.stateNode=i,i._reactInternals=t,f7(t,r,e,n),t=p7(null,t,r,!0,s,n)):(t.tag=0,Pi&&s&&HG(t),$a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(E$(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=hKe(r),e=Kc(r,e),i){case 0:t=h7(null,t,r,e,n);break e;case 1:t=foe(null,t,r,e,n);break e;case 11:t=loe(null,t,r,e,n);break e;case 14:t=coe(null,t,r,Kc(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kc(r,i),h7(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kc(r,i),foe(e,t,r,i,n);case 3:e:{if(DSe(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,sSe(e,t),rN(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Gw(Error(tt(423)),t),t=doe(e,t,r,n,i);break e}else if(r!==i){i=Gw(Error(tt(424)),t),t=doe(e,t,r,n,i);break e}else for(fl=Vg(t.stateNode.containerInfo.firstChild),gl=t,Pi=!0,tf=null,n=lSe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hw(),r===i){t=Wp(e,t,n);break e}$a(e,t,r,n)}t=t.child}return t;case 5:return cSe(t),e===null&&u7(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,r7(r,i)?o=null:s!==null&&r7(r,s)&&(t.flags|=32),NSe(e,t),$a(e,t,o,n),t.child;case 6:return e===null&&u7(t),null;case 13:return MSe(e,t,n);case 4:return JG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qw(t,null,r,n):$a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kc(r,i),loe(e,t,r,i,n);case 7:return $a(e,t,t.pendingProps,n),t.child;case 8:return $a(e,t,t.pendingProps.children,n),t.child;case 12:return $a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,li(tN,r._currentValue),r._currentValue=o,s!==null)if(Af(s.value,o)){if(s.children===i.children&&!ku.current){t=Wp(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Op(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),l7(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),l7(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}$a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,lw(t,n),i=fc(i),r=r(i),t.flags|=1,$a(e,t,r,n),t.child;case 14:return r=t.type,i=Kc(r,t.pendingProps),i=Kc(r.type,i),coe(e,t,r,i,n);case 15:return $Se(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Kc(r,i),E$(e,t),t.tag=1,$u(r)?(e=!0,JR(t)):e=!1,lw(t,n),aSe(t,r,i),f7(t,r,i,n),p7(null,t,r,!0,e,n);case 19:return LSe(e,t,n);case 22:return RSe(e,t,n)}throw Error(tt(156,t.tag))};function ZSe(e,t){return TEe(e,t)}function dKe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tc(e,t,n,r){return new dKe(e,t,n,r)}function hY(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hKe(e){if(typeof e=="function")return hY(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$G)return 11;if(e===RG)return 14}return 2}function Gg(e,t){var n=e.alternate;return n===null?(n=tc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function T$(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")hY(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case $b:return qv(n.children,i,s,t);case kG:o=8,i|=8;break;case Dz:return e=tc(12,n,t,i|2),e.elementType=Dz,e.lanes=s,e;case Mz:return e=tc(13,n,t,i),e.elementType=Mz,e.lanes=s,e;case Lz:return e=tc(19,n,t,i),e.elementType=Lz,e.lanes=s,e;case uEe:return D6(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oEe:o=10;break e;case aEe:o=9;break e;case $G:o=11;break e;case RG:o=14;break e;case rg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=tc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function qv(e,t,n,r){return e=tc(7,e,r,t),e.lanes=n,e}function D6(e,t,n,r){return e=tc(22,e,r,t),e.elementType=uEe,e.lanes=n,e.stateNode={isHidden:!1},e}function Uj(e,t,n){return e=tc(6,e,null,t),e.lanes=n,e}function zj(e,t,n){return t=tc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pKe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ej(0),this.expirationTimes=Ej(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ej(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pY(e,t,n,r,i,s,o,a,u){return e=new pKe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},QG(s),e}function mKe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kb,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function exe(e){if(!e)return p0;e=e._reactInternals;e:{if(i_(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($u(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if($u(n))return ZEe(e,n,t)}return t}function txe(e,t,n,r,i,s,o,a,u){return e=pY(n,r,!0,e,i,s,o,a,u),e.context=exe(null),n=e.current,r=Ua(),i=Wg(n),s=Op(r,i),s.callback=t??null,Hg(n,s,i),e.current.lanes=i,oI(e,i,r),Ru(e,r),e}function M6(e,t,n,r){var i=t.current,s=Ua(),o=Wg(i);return n=exe(n),t.context===null?t.context=n:t.pendingContext=n,t=Op(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hg(i,t,o),e!==null&&(bf(e,i,o,s),_$(e,i,o)),o}function fN(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Eoe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mY(e,t){Eoe(e,t),(e=e.alternate)&&Eoe(e,t)}function gKe(){return null}var nxe=typeof reportError=="function"?reportError:function(e){console.error(e)};function gY(e){this._internalRoot=e}L6.prototype.render=gY.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));M6(e,t,null,null)};L6.prototype.unmount=gY.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;v1(function(){M6(null,e,null,null)}),t[Hp]=null}};function L6(e){this._internalRoot=e}L6.prototype.unstable_scheduleHydration=function(e){if(e){var t=$Ee();e={blockedOn:null,target:e,priority:t};for(var n=0;n<hg.length&&t!==0&&t<hg[n].priority;n++);hg.splice(n,0,e),n===0&&NEe(e)}};function yY(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function F6(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Soe(){}function yKe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=fN(o);s.call(l)}}var o=txe(t,r,e,0,null,!1,!1,"",Soe);return e._reactRootContainer=o,e[Hp]=o.current,IC(e.nodeType===8?e.parentNode:e),v1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=fN(u);a.call(l)}}var u=pY(e,0,!1,null,null,!1,!1,"",Soe);return e._reactRootContainer=u,e[Hp]=u.current,IC(e.nodeType===8?e.parentNode:e),v1(function(){M6(t,u,n,r)}),u}function j6(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=fN(o);a.call(u)}}M6(t,o,e,i)}else o=yKe(n,t,e,i,r);return fN(o)}PEe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=AT(t.pendingLanes);n!==0&&(MG(t,n|1),Ru(t,as()),!(dr&6)&&(Yw=as()+500,ny()))}break;case 13:v1(function(){var r=qp(e,1);if(r!==null){var i=Ua();bf(r,e,1,i)}}),mY(e,1)}};LG=function(e){if(e.tag===13){var t=qp(e,134217728);if(t!==null){var n=Ua();bf(t,e,134217728,n)}mY(e,134217728)}};kEe=function(e){if(e.tag===13){var t=Wg(e),n=qp(e,t);if(n!==null){var r=Ua();bf(n,e,t,r)}mY(e,t)}};$Ee=function(){return Fr};REe=function(e,t){var n=Fr;try{return Fr=e,t()}finally{Fr=n}};Gz=function(e,t,n){switch(t){case"input":if(Bz(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=O6(r);if(!i)throw Error(tt(90));cEe(r),Bz(r,i)}}}break;case"textarea":dEe(e,n);break;case"select":t=n.value,t!=null&&sw(e,!!n.multiple,t,!1)}};_Ee=cY;bEe=v1;var vKe={usingClientEntryPoint:!1,Events:[uI,Mb,O6,yEe,vEe,cY]},Cx={findFiberByHostInstance:xv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_Ke={bundleType:Cx.bundleType,version:Cx.version,rendererPackageName:Cx.rendererPackageName,rendererConfig:Cx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=SEe(e),e===null?null:e.stateNode},findFiberByHostInstance:Cx.findFiberByHostInstance||gKe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kP.isDisabled&&kP.supportsFiber)try{T6=kP.inject(_Ke),Dd=kP}catch{}}Rl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vKe;Rl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yY(t))throw Error(tt(200));return mKe(e,t,null,n)};Rl.createRoot=function(e,t){if(!yY(e))throw Error(tt(299));var n=!1,r="",i=nxe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=pY(e,1,!1,null,null,n,!1,r,i),e[Hp]=t.current,IC(e.nodeType===8?e.parentNode:e),new gY(t)};Rl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=SEe(t),e=e===null?null:e.stateNode,e};Rl.flushSync=function(e){return v1(e)};Rl.hydrate=function(e,t,n){if(!F6(t))throw Error(tt(200));return j6(null,e,t,!0,n)};Rl.hydrateRoot=function(e,t,n){if(!yY(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nxe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=txe(t,null,e,1,n??null,i,!1,s,o),e[Hp]=t.current,IC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new L6(t)};Rl.render=function(e,t,n){if(!F6(t))throw Error(tt(200));return j6(null,e,t,!1,n)};Rl.unmountComponentAtNode=function(e){if(!F6(e))throw Error(tt(40));return e._reactRootContainer?(v1(function(){j6(null,null,e,!1,function(){e._reactRootContainer=null,e[Hp]=null})}),!0):!1};Rl.unstable_batchedUpdates=cY;Rl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!F6(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return j6(e,t,n,!1,r)};Rl.version="18.2.0-next-9e3b772b8-20220608";function rxe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rxe)}catch(e){console.error(e)}}rxe(),tEe.exports=Rl;var s_=tEe.exports,xoe=s_;Rz.createRoot=xoe.createRoot,Rz.hydrateRoot=xoe.hydrateRoot;const ixe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),nu=()=>I.useContext(ixe);function bKe({children:e}){const[t,n]=F.useState(void 0),r=F.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return k.jsx(ixe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function LC(){return LC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LC.apply(this,arguments)}var Tg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Tg||(Tg={}));const Toe="popstate";function wKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return C7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:sxe(i)}return SKe(t,n,null,e)}function xs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function vY(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EKe(){return Math.random().toString(36).substr(2,8)}function Coe(e,t){return{usr:e.state,key:e.key,idx:t}}function C7(e,t,n,r){return n===void 0&&(n=null),LC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?uS(t):t,{state:n,key:t&&t.key||r||EKe()})}function sxe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function uS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function SKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Tg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(LC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Tg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Tg.Push;let v=C7(m.location,g,y);n&&n(v,g),l=c()+1;let _=Coe(v,l),w=m.createHref(v);try{o.pushState(_,"",w)}catch{i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Tg.Replace;let v=C7(m.location,g,y);n&&n(v,g),l=c();let _=Coe(v,l),w=m.createHref(v);o.replaceState(_,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:sxe(g);return xs(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Toe,f),u=g,()=>{i.removeEventListener(Toe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Aoe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Aoe||(Aoe={}));function xKe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?uS(t):t,i=uxe(r.pathname||"/",n);if(i==null)return null;let s=oxe(e);TKe(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=NKe(s[a],LKe(i));return o}function oxe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(xs(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=Yg([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(xs(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),oxe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:$Ke(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of axe(s.path))i(s,o,u)}),t}function axe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=axe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function TKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:RKe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CKe=/^:\w+$/,AKe=3,IKe=2,OKe=1,PKe=10,kKe=-2,Ioe=e=>e==="*";function $Ke(e,t){let n=e.split("/"),r=n.length;return n.some(Ioe)&&(r+=kKe),t&&(r+=IKe),n.filter(i=>!Ioe(i)).reduce((i,s)=>i+(CKe.test(s)?AKe:s===""?OKe:PKe),r)}function RKe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function NKe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=DKe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:Yg([i,c.pathname]),pathnameBase:UKe(Yg([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Yg([i,c.pathnameBase]))}return s}function DKe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=MKe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{if(c==="*"){let d=a[f]||"";o=s.slice(0,s.length-d.length).replace(/(.)\/+$/,"$1")}return l[c]=FKe(a[f]||"",c),l},{}),pathname:s,pathnameBase:o,pattern:e}}function MKe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),vY(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(o,a)=>(r.push(a),"/([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function LKe(e){try{return decodeURI(e)}catch(t){return vY(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function FKe(e,t){try{return decodeURIComponent(e)}catch(n){return vY(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function uxe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function jKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?uS(e):e;return{pathname:n?n.startsWith("/")?n:BKe(n,t):t,search:zKe(r),hash:VKe(i)}}function BKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lxe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cxe(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=uS(e):(i=LC({},e),xs(!i.pathname||!i.pathname.includes("?"),Vj("?","pathname","search",i)),xs(!i.pathname||!i.pathname.includes("#"),Vj("#","pathname","hash",i)),xs(!i.search||!i.search.includes("#"),Vj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(r||o==null)a=n;else{let f=t.length-1;if(o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=jKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const Yg=e=>e.join("/").replace(/\/\/+/g,"/"),UKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VKe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function HKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fxe=["post","put","patch","delete"];new Set(fxe);const qKe=["get",...fxe];new Set(qKe);/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function WKe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const GKe=typeof Object.is=="function"?Object.is:WKe,{useState:YKe,useEffect:KKe,useLayoutEffect:XKe,useDebugValue:QKe}=h1;function JKe(e,t,n){const r=t(),[{inst:i},s]=YKe({inst:{value:r,getSnapshot:t}});return XKe(()=>{i.value=r,i.getSnapshot=t,Hj(i)&&s({inst:i})},[e,r,t]),KKe(()=>(Hj(i)&&s({inst:i}),e(()=>{Hj(i)&&s({inst:i})})),[e]),QKe(r),r}function Hj(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!GKe(n,r)}catch{return!0}}function ZKe(e,t,n){return t()}const eXe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tXe=!eXe,nXe=tXe?ZKe:JKe;"useSyncExternalStore"in h1&&(e=>e.useSyncExternalStore)(h1);const dxe=I.createContext(null),_Y=I.createContext(null),B6=I.createContext(null),U6=I.createContext(null),ry=I.createContext({outlet:null,matches:[]}),hxe=I.createContext(null);function A7(){return A7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A7.apply(this,arguments)}function rXe(e,t){let{relative:n}=t===void 0?{}:t;lS()||xs(!1);let{basename:r,navigator:i}=I.useContext(B6),{hash:s,pathname:o,search:a}=oXe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Yg([r,o])),i.createHref({pathname:u,search:a,hash:s})}function lS(){return I.useContext(U6)!=null}function cS(){return lS()||xs(!1),I.useContext(U6).location}function ym(){lS()||xs(!1);let{basename:e,navigator:t}=I.useContext(B6),{matches:n}=I.useContext(ry),{pathname:r}=cS(),i=JSON.stringify(lxe(n).map(a=>a.pathnameBase)),s=I.useRef(!1);return I.useEffect(()=>{s.current=!0}),I.useCallback(function(a,u){if(u===void 0&&(u={}),!s.current)return;if(typeof a=="number"){t.go(a);return}let l=cxe(a,JSON.parse(i),r,u.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:Yg([e,l.pathname])),(u.replace?t.replace:t.push)(l,u.state,u)},[e,t,i,r])}const iXe=I.createContext(null);function sXe(e){let t=I.useContext(ry).outlet;return t&&I.createElement(iXe.Provider,{value:e},t)}function Kw(){let{matches:e}=I.useContext(ry),t=e[e.length-1];return t?t.params:{}}function oXe(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=I.useContext(ry),{pathname:i}=cS(),s=JSON.stringify(lxe(r).map(o=>o.pathnameBase));return I.useMemo(()=>cxe(e,JSON.parse(s),i,n==="path"),[e,s,i,n])}function pxe(e,t){lS()||xs(!1);let{navigator:n}=I.useContext(B6),r=I.useContext(_Y),{matches:i}=I.useContext(ry),s=i[i.length-1],o=s?s.params:{};s&&s.pathname;let a=s?s.pathnameBase:"/";s&&s.route;let u=cS(),l;if(t){var c;let m=typeof t=="string"?uS(t):t;a==="/"||(c=m.pathname)!=null&&c.startsWith(a)||xs(!1),l=m}else l=u;let f=l.pathname||"/",d=a==="/"?f:f.slice(a.length)||"/",h=xKe(e,{pathname:d}),p=cXe(h&&h.map(m=>Object.assign({},m,{params:Object.assign({},o,m.params),pathname:Yg([a,n.encodeLocation?n.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?a:Yg([a,n.encodeLocation?n.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),i,r||void 0);return t&&p?I.createElement(U6.Provider,{value:{location:A7({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:Tg.Pop}},p):p}function aXe(){let e=pXe(),t=HKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,s)}class uXe extends I.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?I.createElement(ry.Provider,{value:this.props.routeContext},I.createElement(hxe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lXe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(dxe);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(ry.Provider,{value:t},r)}function cXe(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let s=r.findIndex(o=>o.route.id&&(i==null?void 0:i[o.route.id]));s>=0||xs(!1),r=r.slice(0,Math.min(r.length,s+1))}return r.reduceRight((s,o,a)=>{let u=o.route.id?i==null?void 0:i[o.route.id]:null,l=null;n&&(o.route.ErrorBoundary?l=I.createElement(o.route.ErrorBoundary,null):o.route.errorElement?l=o.route.errorElement:l=I.createElement(aXe,null));let c=t.concat(r.slice(0,a+1)),f=()=>{let d=s;return u?d=l:o.route.Component?d=I.createElement(o.route.Component,null):o.route.element&&(d=o.route.element),I.createElement(lXe,{match:o,routeContext:{outlet:s,matches:c},children:d})};return n&&(o.route.ErrorBoundary||o.route.errorElement||a===0)?I.createElement(uXe,{location:n.location,component:l,error:u,children:f(),routeContext:{outlet:null,matches:c}}):f()},null)}var Ooe;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(Ooe||(Ooe={}));var dN;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(dN||(dN={}));function fXe(e){let t=I.useContext(_Y);return t||xs(!1),t}function dXe(e){let t=I.useContext(ry);return t||xs(!1),t}function hXe(e){let t=dXe(),n=t.matches[t.matches.length-1];return n.route.id||xs(!1),n.route.id}function pXe(){var e;let t=I.useContext(hxe),n=fXe(dN.UseRouteError),r=hXe(dN.UseRouteError);return t||((e=n.errors)==null?void 0:e[r])}function bY(e){let{to:t,replace:n,state:r,relative:i}=e;lS()||xs(!1);let s=I.useContext(_Y),o=ym();return I.useEffect(()=>{s&&s.navigation.state!=="idle"||o(t,{replace:n,state:r,relative:i})}),null}function mXe(e){return sXe(e.context)}function Kh(e){xs(!1)}function gXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Tg.Pop,navigator:s,static:o=!1}=e;lS()&&xs(!1);let a=t.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof r=="string"&&(r=uS(r));let{pathname:l="/",search:c="",hash:f="",state:d=null,key:h="default"}=r,p=I.useMemo(()=>{let m=uxe(l,a);return m==null?null:{location:{pathname:m,search:c,hash:f,state:d,key:h},navigationType:i}},[a,l,c,f,d,h,i]);return p==null?null:I.createElement(B6.Provider,{value:u},I.createElement(U6.Provider,{children:n,value:p}))}function yXe(e){let{children:t,location:n}=e,r=I.useContext(dxe),i=r&&!t?r.router.routes:I7(t);return pxe(i,n)}var Poe;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Poe||(Poe={}));new Promise(()=>{});function I7(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,I7(r.props.children,s));return}r.type!==Kh&&xs(!1),!r.props.index||!r.props.children||xs(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=I7(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function O7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function vXe(e,t){let n=O7(e);if(t)for(let r of t.keys())n.has(r)||t.getAll(r).forEach(i=>{n.append(r,i)});return n}function _Xe(e){let{basename:t,children:n,window:r}=e,i=I.useRef();i.current==null&&(i.current=wKe({window:r,v5Compat:!0}));let s=i.current,[o,a]=I.useState({action:s.action,location:s.location});return I.useLayoutEffect(()=>s.listen(a),[s]),I.createElement(gXe,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:s})}var koe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(koe||(koe={}));var $oe;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($oe||($oe={}));function wY(e){let t=I.useRef(O7(e)),n=I.useRef(!1),r=cS(),i=I.useMemo(()=>vXe(r.search,n.current?null:t.current),[r.search]),s=ym(),o=I.useCallback((a,u)=>{const l=O7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}function hN(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function bXe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function wXe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function EXe(e,t,n){return hN(e,n)===hN(t,n)}function mxe({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var u;n==null||n(a);const l=Array.from(((u=hN(a.currentTarget,e))==null?void 0:u.querySelectorAll(t))||[]).filter(m=>EXe(a.currentTarget,m,e)),c=l.findIndex(m=>a.currentTarget===m),f=wXe(c,l,r),d=bXe(c,l,r),h=s==="rtl"?d:f,p=s==="rtl"?f:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[p].focus(),i&&l[p].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}function SXe(e,t,n){var r;return n?Array.from(((r=hN(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function EY(e){const t=I.createContext(null);return[({children:i,value:s})=>F.createElement(t.Provider,{value:s},i),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function m0(e){return Array.isArray(e)?e:[e]}function Roe(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}const xXe=()=>{};function TXe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||xXe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function gp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function CXe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function gxe({data:e}){const t=[],n=[],r=e.reduce((i,s,o)=>(s.group?i[s.group]?i[s.group].push(o):i[s.group]=[o]:n.push(o),i),{});return Object.keys(r).forEach(i=>{t.push(...r[i].map(s=>e[s]))}),t.push(...n.map(i=>e[i])),t}function cI(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==F.Fragment:!1}function yxe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=yxe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function vxe(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=yxe(t))&&(r&&(r+=" "),r+=n);return r}const AXe={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function IXe(e){return()=>({fontFamily:e.fontFamily||"sans-serif"})}var OXe=Object.defineProperty,Noe=Object.getOwnPropertySymbols,PXe=Object.prototype.hasOwnProperty,kXe=Object.prototype.propertyIsEnumerable,Doe=(e,t,n)=>t in e?OXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Moe=(e,t)=>{for(var n in t||(t={}))PXe.call(t,n)&&Doe(e,n,t[n]);if(Noe)for(var n of Noe(t))kXe.call(t,n)&&Doe(e,n,t[n]);return e};function $Xe(e){return t=>({WebkitTapHighlightColor:"transparent",[t||"&:focus"]:Moe({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),[t?t.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:Moe({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)})}function fI(e){return t=>typeof e.primaryShade=="number"?e.primaryShade:e.primaryShade[t||e.colorScheme]}function SY(e){const t=fI(e);return(n,r,i=!0,s=!0)=>{if(typeof n=="string"&&n.includes(".")){const[a,u]=n.split("."),l=parseInt(u,10);if(a in e.colors&&l>=0&&l<10)return e.colors[a][typeof r=="number"&&!s?r:l]}const o=typeof r=="number"?r:t();return n in e.colors?e.colors[n][o]:i?e.colors[e.primaryColor][o]:n}}function _xe(e){let t="";for(let n=1;n<e.length-1;n+=1)t+=`${e[n]} ${n/(e.length-1)*100}%, `;return`${e[0]} 0%, ${t}${e[e.length-1]} 100%`}function RXe(e,...t){return`linear-gradient(${e}deg, ${_xe(t)})`}function NXe(...e){return`radial-gradient(circle, ${_xe(e)})`}function bxe(e){const t=SY(e),n=fI(e);return r=>{const i={from:(r==null?void 0:r.from)||e.defaultGradient.from,to:(r==null?void 0:r.to)||e.defaultGradient.to,deg:(r==null?void 0:r.deg)||e.defaultGradient.deg};return`linear-gradient(${i.deg}deg, ${t(i.from,n(),!1)} 0%, ${t(i.to,n(),!1)} 100%)`}}function xY(e){if(typeof e.size=="number")return e.size;const t=e.sizes[e.size];return t!==void 0?t:e.size||e.sizes.md}function DXe(e){return t=>`@media (min-width: ${xY({size:t,sizes:e.breakpoints})}px)`}function MXe(e){return t=>`@media (max-width: ${xY({size:t,sizes:e.breakpoints})-1}px)`}function LXe(e){return/^#?([0-9A-F]{3}){1,2}$/i.test(e)}function FXe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function jXe(e){const[t,n,r,i]=e.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:t,g:n,b:r,a:i||1}}function TY(e){return LXe(e)?FXe(e):e.startsWith("rgb")?jXe(e):{r:0,g:0,b:0,a:1}}function mb(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";const{r:n,g:r,b:i}=TY(e);return`rgba(${n}, ${r}, ${i}, ${t})`}function BXe(e=0){return{position:"absolute",top:e,right:e,left:e,bottom:e}}function UXe(e,t){const{r:n,g:r,b:i,a:s}=TY(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function zXe(e,t){const{r:n,g:r,b:i,a:s}=TY(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function VXe(e){return t=>{if(typeof t=="number")return t;const n=typeof e.defaultRadius=="number"?e.defaultRadius:e.radius[e.defaultRadius]||e.defaultRadius;return e.radius[t]||t||n}}function HXe(e,t){if(typeof e=="string"&&e.includes(".")){const[n,r]=e.split("."),i=parseInt(r,10);if(n in t.colors&&i>=0&&i<10)return{isSplittedColor:!0,key:n,shade:i}}return{isSplittedColor:!1}}function qXe(e){const t=SY(e),n=fI(e),r=bxe(e);return({variant:i,color:s,gradient:o,primaryFallback:a})=>{const u=HXe(s,e);switch(i){case"light":return{border:"transparent",background:mb(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1),color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:mb(t(s,e.colorScheme==="dark"?7:1,a,!1),e.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),hover:mb(t(s,e.colorScheme==="dark"?8:0,a,!1),e.colorScheme==="dark"?.2:1)};case"outline":return{border:t(s,e.colorScheme==="dark"?5:n("light")),background:"transparent",color:t(s,e.colorScheme==="dark"?5:n("light")),hover:e.colorScheme==="dark"?mb(t(s,5,a,!1),.05):mb(t(s,0,a,!1),.35)};case"default":return{border:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4],background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,color:e.colorScheme==="dark"?e.white:e.black,hover:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]};case"white":return{border:"transparent",background:e.white,color:t(s,n()),hover:null};case"transparent":return{border:"transparent",color:s==="dark"?e.colorScheme==="dark"?e.colors.dark[0]:e.colors.dark[9]:t(s,e.colorScheme==="dark"?2:n("light")),background:"transparent",hover:null};case"gradient":return{background:r(o),color:e.white,border:"transparent",hover:null};default:{const l=n(),c=u.isSplittedColor?u.shade:l,f=u.isSplittedColor?u.key:s;return{border:"transparent",background:t(f,c,a),color:e.white,hover:t(f,c===9?8:c+1)}}}}}function WXe(e){return t=>{const n=fI(e)(t);return e.colors[e.primaryColor][n]}}function GXe(e){return{"@media (hover: hover)":{"&:hover":e},"@media (hover: none)":{"&:active":e}}}const Gs={fontStyles:IXe,themeColor:SY,focusStyles:$Xe,linearGradient:RXe,radialGradient:NXe,smallerThan:MXe,largerThan:DXe,rgba:mb,size:xY,cover:BXe,darken:UXe,lighten:zXe,radius:VXe,variant:qXe,primaryShade:fI,hover:GXe,gradient:bxe,primaryColor:WXe};var YXe=Object.defineProperty,KXe=Object.defineProperties,XXe=Object.getOwnPropertyDescriptors,Loe=Object.getOwnPropertySymbols,QXe=Object.prototype.hasOwnProperty,JXe=Object.prototype.propertyIsEnumerable,Foe=(e,t,n)=>t in e?YXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZXe=(e,t)=>{for(var n in t||(t={}))QXe.call(t,n)&&Foe(e,n,t[n]);if(Loe)for(var n of Loe(t))JXe.call(t,n)&&Foe(e,n,t[n]);return e},eQe=(e,t)=>KXe(e,XXe(t));function tQe(e){return eQe(ZXe({},e),{fn:{fontStyles:Gs.fontStyles(e),themeColor:Gs.themeColor(e),focusStyles:Gs.focusStyles(e),largerThan:Gs.largerThan(e),smallerThan:Gs.smallerThan(e),radialGradient:Gs.radialGradient,linearGradient:Gs.linearGradient,gradient:Gs.gradient(e),rgba:Gs.rgba,size:Gs.size,cover:Gs.cover,lighten:Gs.lighten,darken:Gs.darken,primaryShade:Gs.primaryShade(e),radius:Gs.radius(e),variant:Gs.variant(e),hover:Gs.hover,primaryColor:Gs.primaryColor(e)}})}const nQe=["xs","sm","md","lg","xl"],rQe={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",dateFormat:"MMMM D, YYYY",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:AXe,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 1px 3px rgba(0, 0, 0, 0.05), 0 1px 2px rgba(0, 0, 0, 0.1)",sm:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 10px 15px -5px, rgba(0, 0, 0, 0.04) 0px 7px 7px -5px",md:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 20px 25px -5px, rgba(0, 0, 0, 0.04) 0px 10px 10px -5px",lg:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 28px 23px -7px, rgba(0, 0, 0, 0.04) 0px 12px 12px -7px",xl:"0 1px 3px rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0px 36px 28px -7px, rgba(0, 0, 0, 0.04) 0px 17px 17px -7px"},fontSizes:{xs:12,sm:14,md:16,lg:18,xl:20},radius:{xs:2,sm:4,md:8,lg:16,xl:32},spacing:{xs:10,sm:12,md:16,lg:20,xl:24},breakpoints:{xs:576,sm:768,md:992,lg:1200,xl:1400},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:34,lineHeight:1.3,fontWeight:void 0},h2:{fontSize:26,lineHeight:1.35,fontWeight:void 0},h3:{fontSize:22,lineHeight:1.4,fontWeight:void 0},h4:{fontSize:18,lineHeight:1.45,fontWeight:void 0},h5:{fontSize:16,lineHeight:1.5,fontWeight:void 0},h6:{fontSize:14,lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(1px)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:e=>({outlineOffset:2,outline:`2px solid ${e.colors[e.primaryColor][e.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:e=>({outline:"none",borderColor:e.colors[e.primaryColor][typeof e.primaryShade=="object"?e.primaryShade[e.colorScheme]:e.primaryShade]})}},wxe=tQe(rQe);function iQe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function sQe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var oQe=function(){function e(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(sQe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=iQe(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ea="-ms-",pN="-moz-",Cr="-webkit-",Exe="comm",CY="rule",AY="decl",aQe="@import",Sxe="@keyframes",uQe=Math.abs,z6=String.fromCharCode,lQe=Object.assign;function cQe(e,t){return Co(e,0)^45?(((t<<2^Co(e,0))<<2^Co(e,1))<<2^Co(e,2))<<2^Co(e,3):0}function xxe(e){return e.trim()}function fQe(e,t){return(e=t.exec(e))?e[0]:e}function Rr(e,t,n){return e.replace(t,n)}function P7(e,t){return e.indexOf(t)}function Co(e,t){return e.charCodeAt(t)|0}function FC(e,t,n){return e.slice(t,n)}function md(e){return e.length}function IY(e){return e.length}function $P(e,t){return t.push(e),e}function dQe(e,t){return e.map(t).join("")}var V6=1,Xw=1,Txe=0,Lu=0,bs=0,fS="";function H6(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:V6,column:Xw,length:o,return:""}}function Ax(e,t){return lQe(H6("",null,null,"",null,null,0),e,{length:-e.length},t)}function hQe(){return bs}function pQe(){return bs=Lu>0?Co(fS,--Lu):0,Xw--,bs===10&&(Xw=1,V6--),bs}function yl(){return bs=Lu<Txe?Co(fS,Lu++):0,Xw++,bs===10&&(Xw=1,V6++),bs}function Ld(){return Co(fS,Lu)}function C$(){return Lu}function dI(e,t){return FC(fS,e,t)}function jC(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cxe(e){return V6=Xw=1,Txe=md(fS=e),Lu=0,[]}function Axe(e){return fS="",e}function A$(e){return xxe(dI(Lu-1,k7(e===91?e+2:e===40?e+1:e)))}function mQe(e){for(;(bs=Ld())&&bs<33;)yl();return jC(e)>2||jC(bs)>3?"":" "}function gQe(e,t){for(;--t&&yl()&&!(bs<48||bs>102||bs>57&&bs<65||bs>70&&bs<97););return dI(e,C$()+(t<6&&Ld()==32&&yl()==32))}function k7(e){for(;yl();)switch(bs){case e:return Lu;case 34:case 39:e!==34&&e!==39&&k7(bs);break;case 40:e===41&&k7(e);break;case 92:yl();break}return Lu}function yQe(e,t){for(;yl()&&e+bs!==57;)if(e+bs===84&&Ld()===47)break;return"/*"+dI(t,Lu-1)+"*"+z6(e===47?e:yl())}function vQe(e){for(;!jC(Ld());)yl();return dI(e,Lu)}function _Qe(e){return Axe(I$("",null,null,null,[""],e=Cxe(e),0,[0],e))}function I$(e,t,n,r,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,y=1,v=0,_="",w=i,x=s,E=r,b=_;g;)switch(p=v,v=yl()){case 40:if(p!=108&&Co(b,f-1)==58){P7(b+=Rr(A$(v),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:b+=A$(v);break;case 9:case 10:case 13:case 32:b+=mQe(p);break;case 92:b+=gQe(C$()-1,7);continue;case 47:switch(Ld()){case 42:case 47:$P(bQe(yQe(yl(),C$()),t,n),u);break;default:b+="/"}break;case 123*m:a[l++]=md(b)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+c:h>0&&md(b)-f&&$P(h>32?Boe(b+";",r,n,f-1):Boe(Rr(b," ","")+";",r,n,f-2),u);break;case 59:b+=";";default:if($P(E=joe(b,t,n,l,c,i,a,_,w=[],x=[],f),s),v===123)if(c===0)I$(b,t,E,E,w,s,f,a,x);else switch(d===99&&Co(b,3)===110?100:d){case 100:case 109:case 115:I$(e,E,E,r&&$P(joe(e,E,E,0,0,i,a,_,i,w=[],f),x),i,x,f,a,r?w:x);break;default:I$(b,E,E,E,[""],x,0,a,x)}}l=c=h=0,m=y=1,_=b="",f=o;break;case 58:f=1+md(b),h=p;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&pQe()==125)continue}switch(b+=z6(v),v*m){case 38:y=c>0?1:(b+="\f",-1);break;case 44:a[l++]=(md(b)-1)*y,y=1;break;case 64:Ld()===45&&(b+=A$(yl())),d=Ld(),c=f=md(_=b+=vQe(C$())),v++;break;case 45:p===45&&md(b)==2&&(m=0)}}return s}function joe(e,t,n,r,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=IY(d),p=0,m=0,g=0;p<r;++p)for(var y=0,v=FC(e,f+1,f=uQe(m=o[p])),_=e;y<h;++y)(_=xxe(m>0?d[y]+" "+v:Rr(v,/&\f/g,d[y])))&&(u[g++]=_);return H6(e,t,n,i===0?CY:a,u,l,c)}function bQe(e,t,n){return H6(e,t,n,Exe,z6(hQe()),FC(e,2,-2),0)}function Boe(e,t,n,r){return H6(e,t,n,AY,FC(e,0,r),FC(e,r+1,-1),r)}function fw(e,t){for(var n="",r=IY(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function wQe(e,t,n,r){switch(e.type){case aQe:case AY:return e.return=e.return||e.value;case Exe:return"";case Sxe:return e.return=e.value+"{"+fw(e.children,r)+"}";case CY:e.value=e.props.join(",")}return md(n=fw(e.children,r))?e.return=e.value+"{"+n+"}":""}function EQe(e){var t=IY(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}function SQe(e){return function(t){t.root||(t=t.return)&&e(t)}}function xQe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var TQe=function(t,n,r){for(var i=0,s=0;i=s,s=Ld(),i===38&&s===12&&(n[r]=1),!jC(s);)yl();return dI(t,Lu)},CQe=function(t,n){var r=-1,i=44;do switch(jC(i)){case 0:i===38&&Ld()===12&&(n[r]=1),t[r]+=TQe(Lu-1,n,r);break;case 2:t[r]+=A$(i);break;case 4:if(i===44){t[++r]=Ld()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=z6(i)}while(i=yl());return t},AQe=function(t,n){return Axe(CQe(Cxe(t),n))},Uoe=new WeakMap,IQe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Uoe.get(r))&&!i){Uoe.set(t,!0);for(var s=[],o=AQe(n,s),a=r.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)t.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},OQe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function Ixe(e,t){switch(cQe(e,t)){case 5103:return Cr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Cr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Cr+e+pN+e+ea+e+e;case 6828:case 4268:return Cr+e+ea+e+e;case 6165:return Cr+e+ea+"flex-"+e+e;case 5187:return Cr+e+Rr(e,/(\w+).+(:[^]+)/,Cr+"box-$1$2"+ea+"flex-$1$2")+e;case 5443:return Cr+e+ea+"flex-item-"+Rr(e,/flex-|-self/,"")+e;case 4675:return Cr+e+ea+"flex-line-pack"+Rr(e,/align-content|flex-|-self/,"")+e;case 5548:return Cr+e+ea+Rr(e,"shrink","negative")+e;case 5292:return Cr+e+ea+Rr(e,"basis","preferred-size")+e;case 6060:return Cr+"box-"+Rr(e,"-grow","")+Cr+e+ea+Rr(e,"grow","positive")+e;case 4554:return Cr+Rr(e,/([^-])(transform)/g,"$1"+Cr+"$2")+e;case 6187:return Rr(Rr(Rr(e,/(zoom-|grab)/,Cr+"$1"),/(image-set)/,Cr+"$1"),e,"")+e;case 5495:case 3959:return Rr(e,/(image-set\([^]*)/,Cr+"$1$`$1");case 4968:return Rr(Rr(e,/(.+:)(flex-)?(.*)/,Cr+"box-pack:$3"+ea+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Cr+e+e;case 4095:case 3583:case 4068:case 2532:return Rr(e,/(.+)-inline(.+)/,Cr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(md(e)-1-t>6)switch(Co(e,t+1)){case 109:if(Co(e,t+4)!==45)break;case 102:return Rr(e,/(.+:)(.+)-([^]+)/,"$1"+Cr+"$2-$3$1"+pN+(Co(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~P7(e,"stretch")?Ixe(Rr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Co(e,t+1)!==115)break;case 6444:switch(Co(e,md(e)-3-(~P7(e,"!important")&&10))){case 107:return Rr(e,":",":"+Cr)+e;case 101:return Rr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Cr+(Co(e,14)===45?"inline-":"")+"box$3$1"+Cr+"$2$3$1"+ea+"$2box$3")+e}break;case 5936:switch(Co(e,t+11)){case 114:return Cr+e+ea+Rr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Cr+e+ea+Rr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Cr+e+ea+Rr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Cr+e+ea+e+e}return e}var PQe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case AY:t.return=Ixe(t.value,t.length);break;case Sxe:return fw([Ax(t,{value:Rr(t.value,"@","@"+Cr)})],i);case CY:if(t.length)return dQe(t.props,function(s){switch(fQe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return fw([Ax(t,{props:[Rr(s,/:(read-\w+)/,":"+pN+"$1")]})],i);case"::placeholder":return fw([Ax(t,{props:[Rr(s,/:(plac\w+)/,":"+Cr+"input-$1")]}),Ax(t,{props:[Rr(s,/:(plac\w+)/,":"+pN+"$1")]}),Ax(t,{props:[Rr(s,/:(plac\w+)/,ea+"input-$1")]})],i)}return""})}},kQe=[PQe],$Qe=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||kQe,s={},o,a=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)s[g[y]]=!0;a.push(m)});var u,l=[IQe,OQe];{var c,f=[wQe,SQe(function(m){c.insert(m)})],d=EQe(l.concat(i,f)),h=function(g){return fw(_Qe(g),d)};u=function(g,y,v,_){c=v,h(g?g+"{"+y.styles+"}":y.styles),_&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new oQe({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};const Oxe=$Qe;function $i(){return $i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$i.apply(this,arguments)}var Pxe={exports:{}},jr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho=typeof Symbol=="function"&&Symbol.for,OY=ho?Symbol.for("react.element"):60103,PY=ho?Symbol.for("react.portal"):60106,q6=ho?Symbol.for("react.fragment"):60107,W6=ho?Symbol.for("react.strict_mode"):60108,G6=ho?Symbol.for("react.profiler"):60114,Y6=ho?Symbol.for("react.provider"):60109,K6=ho?Symbol.for("react.context"):60110,kY=ho?Symbol.for("react.async_mode"):60111,X6=ho?Symbol.for("react.concurrent_mode"):60111,Q6=ho?Symbol.for("react.forward_ref"):60112,J6=ho?Symbol.for("react.suspense"):60113,RQe=ho?Symbol.for("react.suspense_list"):60120,Z6=ho?Symbol.for("react.memo"):60115,e4=ho?Symbol.for("react.lazy"):60116,NQe=ho?Symbol.for("react.block"):60121,DQe=ho?Symbol.for("react.fundamental"):60117,MQe=ho?Symbol.for("react.responder"):60118,LQe=ho?Symbol.for("react.scope"):60119;function Dl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case OY:switch(e=e.type,e){case kY:case X6:case q6:case G6:case W6:case J6:return e;default:switch(e=e&&e.$$typeof,e){case K6:case Q6:case e4:case Z6:case Y6:return e;default:return t}}case PY:return t}}}function kxe(e){return Dl(e)===X6}jr.AsyncMode=kY;jr.ConcurrentMode=X6;jr.ContextConsumer=K6;jr.ContextProvider=Y6;jr.Element=OY;jr.ForwardRef=Q6;jr.Fragment=q6;jr.Lazy=e4;jr.Memo=Z6;jr.Portal=PY;jr.Profiler=G6;jr.StrictMode=W6;jr.Suspense=J6;jr.isAsyncMode=function(e){return kxe(e)||Dl(e)===kY};jr.isConcurrentMode=kxe;jr.isContextConsumer=function(e){return Dl(e)===K6};jr.isContextProvider=function(e){return Dl(e)===Y6};jr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===OY};jr.isForwardRef=function(e){return Dl(e)===Q6};jr.isFragment=function(e){return Dl(e)===q6};jr.isLazy=function(e){return Dl(e)===e4};jr.isMemo=function(e){return Dl(e)===Z6};jr.isPortal=function(e){return Dl(e)===PY};jr.isProfiler=function(e){return Dl(e)===G6};jr.isStrictMode=function(e){return Dl(e)===W6};jr.isSuspense=function(e){return Dl(e)===J6};jr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===q6||e===X6||e===G6||e===W6||e===J6||e===RQe||typeof e=="object"&&e!==null&&(e.$$typeof===e4||e.$$typeof===Z6||e.$$typeof===Y6||e.$$typeof===K6||e.$$typeof===Q6||e.$$typeof===DQe||e.$$typeof===MQe||e.$$typeof===LQe||e.$$typeof===NQe)};jr.typeOf=Dl;Pxe.exports=jr;var FQe=Pxe.exports,$xe=FQe,jQe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},BQe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Rxe={};Rxe[$xe.ForwardRef]=jQe;Rxe[$xe.Memo]=BQe;var UQe=!0;function zQe(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var VQe=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||UQe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},Nxe=function(t,n,r){VQe(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var s=n;do t.insert(n===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function HQe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var qQe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},WQe=/[A-Z]|^ms/g,GQe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Dxe=function(t){return t.charCodeAt(1)===45},zoe=function(t){return t!=null&&typeof t!="boolean"},qj=xQe(function(e){return Dxe(e)?e:e.replace(WQe,"-$&").toLowerCase()}),Voe=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(GQe,function(r,i,s){return gd={name:i,styles:s,next:gd},i})}return qQe[t]!==1&&!Dxe(t)&&typeof n=="number"&&n!==0?n+"px":n};function BC(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return gd={name:n.name,styles:n.styles,next:gd},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)gd={name:r.name,styles:r.styles,next:gd},r=r.next;var i=n.styles+";";return i}return YQe(e,t,n)}case"function":{if(e!==void 0){var s=gd,o=n(e);return gd=s,BC(e,t,o)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function YQe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=BC(e,t,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=s+"{"+t[o]+"}":zoe(o)&&(r+=qj(s)+":"+Voe(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var a=0;a<o.length;a++)zoe(o[a])&&(r+=qj(s)+":"+Voe(s,o[a])+";");else{var u=BC(e,t,o);switch(s){case"animation":case"animationName":{r+=qj(s)+":"+u+";";break}default:r+=s+"{"+u+"}"}}}return r}var Hoe=/label:\s*([^\s;\n{]+)\s*(;|$)/g,gd,$Y=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";gd=void 0;var o=t[0];o==null||o.raw===void 0?(i=!1,s+=BC(r,n,o)):s+=o[0];for(var a=1;a<t.length;a++)s+=BC(r,n,t[a]),i&&(s+=o[a]);Hoe.lastIndex=0;for(var u="",l;(l=Hoe.exec(s))!==null;)u+="-"+l[1];var c=HQe(s)+u;return{name:c,styles:s,next:gd}},KQe=h1.useInsertionEffect?h1.useInsertionEffect:!1,qoe=KQe||I.useLayoutEffect,Mxe=I.createContext(typeof HTMLElement<"u"?Oxe({key:"css"}):null);Mxe.Provider;var XQe=function(t){return I.forwardRef(function(n,r){var i=I.useContext(Mxe);return t(n,i,r)})},QQe=I.createContext({}),JQe=XQe(function(e,t){var n=e.styles,r=$Y([n],void 0,I.useContext(QQe)),i=I.useRef();return qoe(function(){var s=t.key+"-global",o=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,u=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return t.sheet.tags.length&&(o.before=t.sheet.tags[0]),u!==null&&(a=!0,u.setAttribute("data-emotion",s),o.hydrate([u])),i.current=[o,a],function(){o.flush()}},[t]),qoe(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&Nxe(t,r.next,!0),o.tags.length){var u=o.tags[o.tags.length-1].nextElementSibling;o.before=u,o.flush()}t.insert("",r,o,!1)},[t,r.name]),null});function Lxe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $Y(t)}var ZQe=function(){var t=Lxe.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function Fxe(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}var eJe=Object.defineProperty,Woe=Object.getOwnPropertySymbols,tJe=Object.prototype.hasOwnProperty,nJe=Object.prototype.propertyIsEnumerable,Goe=(e,t,n)=>t in e?eJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wj=(e,t)=>{for(var n in t||(t={}))tJe.call(t,n)&&Goe(e,n,t[n]);if(Woe)for(var n of Woe(t))nJe.call(t,n)&&Goe(e,n,t[n]);return e};const jxe=I.createContext({theme:wxe});function As(){var e;return((e=I.useContext(jxe))==null?void 0:e.theme)||wxe}function rJe(e){const t=As(),n=r=>{var i,s;return{styles:((i=t.components[r])==null?void 0:i.styles)||{},classNames:((s=t.components[r])==null?void 0:s.classNames)||{}}};return Array.isArray(e)?e.map(n):[n(e)]}function Bxe(){var e;return(e=I.useContext(jxe))==null?void 0:e.emotionCache}function Et(e,t,n){var r;const s=(r=As().components[e])==null?void 0:r.defaultProps;return Wj(Wj(Wj({},t),s),Fxe(n))}const Uxe=I.createContext({classNames:{},styles:{},unstyled:!1});function RY({children:e,classNames:t,unstyled:n,styles:r,staticSelector:i}){return F.createElement(Uxe.Provider,{value:{classNames:t,styles:r,unstyled:n,staticSelector:i}},e)}function iy(){return I.useContext(Uxe)}const iJe={app:100,modal:200,popover:300,overlay:400,max:9999};function xa(e){return iJe[e]}function sJe(e,t){const n=I.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}const oJe=Oxe({key:"mantine",prepend:!0});function aJe(){return Bxe()||oJe}var uJe=Object.defineProperty,Yoe=Object.getOwnPropertySymbols,lJe=Object.prototype.hasOwnProperty,cJe=Object.prototype.propertyIsEnumerable,Koe=(e,t,n)=>t in e?uJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fJe=(e,t)=>{for(var n in t||(t={}))lJe.call(t,n)&&Koe(e,n,t[n]);if(Yoe)for(var n of Yoe(t))cJe.call(t,n)&&Koe(e,n,t[n]);return e};const Gj="ref";function dJe(e){let t;if(e.length!==1)return{args:e,ref:t};const[n]=e;if(!(n instanceof Object))return{args:e,ref:t};if(!(Gj in n))return{args:e,ref:t};t=n[Gj];const r=fJe({},n);return delete r[Gj],{args:[r],ref:t}}const{cssFactory:hJe}=(()=>{function e(n,r,i){const s=[],o=zQe(n,s,i);return s.length<2?i:o+r(s)}function t(n){const{cache:r}=n,i=(...o)=>{const{ref:a,args:u}=dJe(o),l=$Y(u,r.registered);return Nxe(r,l,!1),`${r.key}-${l.name}${a===void 0?"":` ${a}`}`};return{css:i,cx:(...o)=>e(r.registered,i,vxe(o))}}return{cssFactory:t}})();function zxe(){const e=aJe();return sJe(()=>hJe({cache:e}),[e])}function pJe({cx:e,classes:t,context:n,classNames:r,name:i,cache:s}){const o=n.reduce((a,u)=>(Object.keys(u.classNames).forEach(l=>{typeof a[l]!="string"?a[l]=`${u.classNames[l]}`:a[l]=`${a[l]} ${u.classNames[l]}`}),a),{});return Object.keys(t).reduce((a,u)=>(a[u]=e(t[u],o[u],r!=null&&r[u],Array.isArray(i)?i.filter(Boolean).map(l=>`${(s==null?void 0:s.key)||"mantine"}-${l}-${u}`).join(" "):i?`${(s==null?void 0:s.key)||"mantine"}-${i}-${u}`:null),a),{})}var mJe=Object.defineProperty,Xoe=Object.getOwnPropertySymbols,gJe=Object.prototype.hasOwnProperty,yJe=Object.prototype.propertyIsEnumerable,Qoe=(e,t,n)=>t in e?mJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yj=(e,t)=>{for(var n in t||(t={}))gJe.call(t,n)&&Qoe(e,n,t[n]);if(Xoe)for(var n of Xoe(t))yJe.call(t,n)&&Qoe(e,n,t[n]);return e};function vJe(e){return`__mantine-ref-${e||""}`}function Joe(e,t,n){const r=i=>typeof i=="function"?i(t,n||{}):i||{};return Array.isArray(e)?e.map(i=>r(i.styles)).reduce((i,s)=>(Object.keys(s).forEach(o=>{i[o]?i[o]=Yj(Yj({},i[o]),s[o]):i[o]=Yj({},s[o])}),i),{}):r(e)}function yt(e){const t=typeof e=="function"?e:()=>e;function n(r,i){const s=As(),o=rJe(i==null?void 0:i.name),a=Bxe(),{css:u,cx:l}=zxe(),c=t(s,r,vJe),f=Joe(i==null?void 0:i.styles,s,r),d=Joe(o,s,r),h=Object.fromEntries(Object.keys(c).map(p=>{const m=l({[u(c[p])]:!(i!=null&&i.unstyled)},u(d[p]),u(f[p]));return[p,m]}));return{classes:pJe({cx:l,classes:h,context:o,classNames:i==null?void 0:i.classNames,name:i==null?void 0:i.name,cache:a}),cx:l,theme:s}}return n}function Vxe({styles:e}){const t=As();return F.createElement(JQe,{styles:Lxe(typeof e=="function"?e(t):e)})}var _Je=Object.defineProperty,bJe=Object.defineProperties,wJe=Object.getOwnPropertyDescriptors,Zoe=Object.getOwnPropertySymbols,EJe=Object.prototype.hasOwnProperty,SJe=Object.prototype.propertyIsEnumerable,eae=(e,t,n)=>t in e?_Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ix=(e,t)=>{for(var n in t||(t={}))EJe.call(t,n)&&eae(e,n,t[n]);if(Zoe)for(var n of Zoe(t))SJe.call(t,n)&&eae(e,n,t[n]);return e},Ox=(e,t)=>bJe(e,wJe(t));const Px={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(.9) translateY(10px)"},transitionProperty:"transform, opacity"},RP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:Ox(Ix({},Px),{common:{transformOrigin:"center center"}}),"pop-bottom-left":Ox(Ix({},Px),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":Ox(Ix({},Px),{common:{transformOrigin:"bottom right"}}),"pop-top-left":Ox(Ix({},Px),{common:{transformOrigin:"top left"}}),"pop-top-right":Ox(Ix({},Px),{common:{transformOrigin:"top right"}})},tae=["mousedown","touchstart"];function xJe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o);n.every(l=>!!l&&!l.contains(o))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||tae).forEach(s=>document.addEventListener(s,i)),()=>{(t||tae).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function TJe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function CJe(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function AJe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?!1:CJe(e,t)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),TJe(s.current,o=>i(o.matches))},[e]),r}function wf(e,t,n){return Math.min(Math.max(e,t),n)}const NY=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Fs(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function DY({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Fs(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const IJe=/input|select|textarea|button|object/,Hxe="a, input, select, textarea, button, object, [tabindex]";function OJe(e){return e.style.display==="none"}function PJe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&n!==document.body;){if(OJe(n))return!1;n=n.parentNode}return!0}function qxe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function $7(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(qxe(e));return(IJe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&PJe(e)}function Wxe(e){const t=qxe(e);return(Number.isNaN(t)||t>=0)&&$7(e)}function kJe(e){return Array.from(e.querySelectorAll(Hxe)).filter(Wxe)}function $Je(e,t){const n=kJe(e);if(!n.length){t.preventDefault();return}if(!(n[t.shiftKey?0:n.length-1]===document.activeElement||e===document.activeElement))return;t.preventDefault();const s=n[t.shiftKey?n.length-1:0];s&&s.focus()}function RJe(e,t="body > :not(script)"){const n=Array.from(document.querySelectorAll(t)).map(r=>{if(r.contains(e))return;const i=r.getAttribute("aria-hidden");return(i===null||i==="false")&&r.setAttribute("aria-hidden","true"),{node:r,ariaHidden:i}});return()=>{n.forEach(r=>{r&&(r.ariaHidden===null?r.node.removeAttribute("aria-hidden"):r.node.setAttribute("aria-hidden",r.ariaHidden))})}}function MY(e=!0){const t=I.useRef(),n=I.useRef(null),r=I.useCallback(i=>{if(e&&i!==null&&(n.current=RJe(i),t.current!==i))if(i){const s=()=>{let o=i.querySelector("[data-autofocus]");if(!o){const a=Array.from(i.querySelectorAll(Hxe));o=a.find(Wxe)||a.find($7)||null,!o&&$7(i)&&(o=i)}o&&o.focus({preventScroll:!0})};setTimeout(()=>{i.ownerDocument&&s()}),t.current=i}else t.current=null},[e]);return I.useEffect(()=>{if(!e)return;const i=s=>{s.key==="Tab"&&t.current&&$Je(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),n.current&&n.current()}},[e]),r}const NJe=()=>`mantine-${Math.random().toString(36).slice(2,11)}`,DJe=F.useId||(()=>{});function MJe(){const[e,t]=I.useState("");return NY(()=>{t(NJe())},[]),e}function LJe(){const e=DJe();return e?`mantine-${e.replace(/:/g,"")}`:""}function ru(e){return typeof e=="string"?e:LJe()||MJe()}function R7(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function Gxe(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Yxe(...e){return t=>{e.forEach(n=>Gxe(n,t))}}function Hs(...e){return I.useCallback(Yxe(...e),e)}function Kxe(e,t,n="ltr"){const r=I.useRef(),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{const l=({x:v,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const w=r.current.getBoundingClientRect();if(w.width&&w.height){const x=wf((v-w.left)/w.width,0,1);e({x:n==="ltr"?x:1-x,y:wf((_-w.top)/w.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=v=>{d(),m(v)},m=v=>l({x:v.clientX,y:v.clientY}),g=v=>{v.cancelable&&v.preventDefault(),d(),y(v)},y=v=>{v.cancelable&&v.preventDefault(),l({x:v.changedTouches[0].clientX,y:v.changedTouches[0].clientY})};return r.current.addEventListener("mousedown",p),r.current.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function co({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=a=>{s(a),r==null||r(a)};return e!==void 0?[e,r,!0]:[i,o,!1]}function t4(e,t){return AJe("(prefers-reduced-motion: reduce)",e,t)}const FJe=e=>e<.5?2*e*e:-1+(4-2*e)*e,jJe=({axis:e,target:t,parent:n,alignment:r,offset:i,isList:s})=>{if(!t||!n&&typeof document>"u")return 0;const o=!!n,u=(n||document.body).getBoundingClientRect(),l=t.getBoundingClientRect(),c=f=>l[f]-u[f];if(e==="y"){const f=c("top");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.height*(s?0:1)||!s?h:0}const d=o?u.height:window.innerHeight;if(r==="end"){const h=f+i-d+l.height;return h>=-l.height*(s?0:1)||!s?h:0}return r==="center"?f-d/2+l.height/2:0}if(e==="x"){const f=c("left");if(f===0)return 0;if(r==="start"){const h=f-i;return h<=l.width||!s?h:0}const d=o?u.width:window.innerWidth;if(r==="end"){const h=f+i-d+l.width;return h>=-l.width||!s?h:0}return r==="center"?f-d/2+l.width/2:0}return 0},BJe=({axis:e,parent:t})=>{if(!t&&typeof document>"u")return 0;const n=e==="y"?"scrollTop":"scrollLeft";if(t)return t[n];const{body:r,documentElement:i}=document;return r[n]+i[n]},UJe=({axis:e,parent:t,distance:n})=>{if(!t&&typeof document>"u")return;const r=e==="y"?"scrollTop":"scrollLeft";if(t)t[r]=n;else{const{body:i,documentElement:s}=document;i[r]=n,s[r]=n}};function Xxe({duration:e=1250,axis:t="y",onScrollFinish:n,easing:r=FJe,offset:i=0,cancelable:s=!0,isList:o=!1}={}){const a=I.useRef(0),u=I.useRef(0),l=I.useRef(!1),c=I.useRef(null),f=I.useRef(null),d=t4(),h=()=>{a.current&&cancelAnimationFrame(a.current)},p=I.useCallback(({alignment:g="start"}={})=>{var y;l.current=!1,a.current&&h();const v=(y=BJe({parent:c.current,axis:t}))!=null?y:0,_=jJe({parent:c.current,target:f.current,axis:t,alignment:g,offset:i,isList:o})-(c.current?0:v);function w(){u.current===0&&(u.current=performance.now());const E=performance.now()-u.current,b=d||e===0?1:E/e,T=v+_*r(b);UJe({parent:c.current,axis:t,distance:T}),!l.current&&b<1?a.current=requestAnimationFrame(w):(typeof n=="function"&&n(),u.current=0,a.current=0,h())}w()},[t,e,r,o,i,n,d]),m=()=>{s&&(l.current=!0)};return R7("wheel",m,{passive:!0}),R7("touchmove",m,{passive:!0}),I.useEffect(()=>h,[]),{scrollableRef:c,targetRef:f,scrollIntoView:p,cancel:h}}const zJe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Wv(){const e=I.useRef(0),t=I.useRef(null),[n,r]=I.useState(zJe),i=I.useMemo(()=>typeof window<"u"?new ResizeObserver(s=>{const o=s[0];o&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{t.current&&r(o.contentRect)}))}):null,[]);return I.useEffect(()=>(t.current&&i.observe(t.current),()=>{i.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[t.current]),[t,n]}function VJe(){const[e,{width:t,height:n}]=Wv();return{ref:e,width:t,height:n}}function HJe(){if(typeof window>"u"||typeof document>"u")return 0;const e=parseInt(window.getComputedStyle(document.body).paddingRight,10),t=window.innerWidth-document.documentElement.clientWidth;return e+t}const qJe=({disableBodyPadding:e})=>{const t=e?null:HJe();return`body {
        --removed-scroll-width: ${t}px;
        touch-action: none;
        overflow: hidden !important;
        position: relative !important;
        ${t?"padding-right: var(--removed-scroll-width) !important;":""}
        `};function WJe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function GJe(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}function YJe(){const e=document.createElement("style");return e.type="text/css",e.setAttribute("mantine-scroll-lock",""),e}function Qxe(e,t={disableBodyPadding:!1}){const[n,r]=I.useState(e||!1),i=I.useRef(0),{disableBodyPadding:s}=t,o=I.useRef(null),a=()=>{i.current=window.scrollY;const l=qJe({disableBodyPadding:s}),c=YJe();WJe(c,l),GJe(c),o.current=c},u=()=>{o!=null&&o.current&&(o.current.parentNode.removeChild(o.current),o.current=null)};return I.useEffect(()=>(n?a():u(),u),[n]),I.useEffect(()=>{e!==void 0&&r(e)},[e]),I.useEffect(()=>{e===void 0&&typeof window<"u"&&window.document.body.style.overflow==="hidden"&&r(!0)},[r]),[n,r]}var KJe=Object.defineProperty,XJe=Object.defineProperties,QJe=Object.getOwnPropertyDescriptors,nae=Object.getOwnPropertySymbols,JJe=Object.prototype.hasOwnProperty,ZJe=Object.prototype.propertyIsEnumerable,rae=(e,t,n)=>t in e?KJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eZe=(e,t)=>{for(var n in t||(t={}))JJe.call(t,n)&&rae(e,n,t[n]);if(nae)for(var n of nae(t))ZJe.call(t,n)&&rae(e,n,t[n]);return e},tZe=(e,t)=>XJe(e,QJe(t));function nZe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return tZe(eZe({},n),{key:i})}function rZe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function iZe(e){return t=>rZe(nZe(e),t)}function sZe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i])=>{iZe(r)(n)&&(t.preventDefault(),i(n))})}}function oZe(){const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function aZe(){return typeof window<"u"?oZe():"undetermined"}function OT(e,t){const[n,r]=I.useState(e),i=()=>{var a;n||(r(!0),(a=t==null?void 0:t.onOpen)==null||a.call(t))},s=()=>{var a;n&&(r(!1),(a=t==null?void 0:t.onClose)==null||a.call(t))};return[n,{open:i,close:s,toggle:()=>{n?s():i()}}]}function O$(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Cg(e){return typeof e!="string"?"":e.charAt(0).toUpperCase()+e.slice(1)}var iae=Object.getOwnPropertySymbols,uZe=Object.prototype.hasOwnProperty,lZe=Object.prototype.propertyIsEnumerable,cZe=(e,t)=>{var n={};for(var r in e)uZe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iae)for(var r of iae(e))t.indexOf(r)<0&&lZe.call(e,r)&&(n[r]=e[r]);return n};function Ec(e){const t=e,{m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:x,lts:E,ta:b,lh:T,fs:A,tt:C,td:P,w:N,miw:$,maw:M,h:B,mih:z,mah:W,bgsz:U,bgp:Y,bgr:q,bga:D,pos:L,top:G,left:V,bottom:H,right:te,inset:le,display:me}=t,ye=cZe(t,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:Fxe({m:n,mx:r,my:i,mt:s,mb:o,ml:a,mr:u,p:l,px:c,py:f,pt:d,pb:h,pl:p,pr:m,bg:g,c:y,opacity:v,ff:_,fz:w,fw:x,lts:E,ta:b,lh:T,fs:A,tt:C,td:P,w:N,miw:$,maw:M,h:B,mih:z,mah:W,bgsz:U,bgp:Y,bgr:q,bga:D,pos:L,top:G,left:V,bottom:H,right:te,inset:le,display:me}),rest:ye}}function fZe(e,t){const n=Object.keys(e).filter(r=>r!=="base").sort((r,i)=>t.fn.size({size:r,sizes:t.breakpoints})-t.fn.size({size:i,sizes:t.breakpoints}));return"base"in e?["base",...n]:n}function dZe({value:e,theme:t,getValue:n,property:r}){if(e==null)return;if(typeof e=="object")return fZe(e,t).reduce((o,a)=>{if(a==="base"&&e.base!==void 0){const l=n(e.base,t);return Array.isArray(r)?(r.forEach(c=>{o[c]=l}),o):(o[r]=l,o)}const u=n(e[a],t);return Array.isArray(r)?(o[t.fn.largerThan(a)]={},r.forEach(l=>{o[t.fn.largerThan(a)][l]=u}),o):(o[t.fn.largerThan(a)]={[r]:u},o)},{});const i=n(e,t);return Array.isArray(r)?r.reduce((s,o)=>(s[o]=i,s),{}):{[r]:i}}function hZe(e,t){return e==="dimmed"?t.colorScheme==="dark"?t.colors.dark[2]:t.colors.gray[6]:t.fn.variant({variant:"filled",color:e,primaryFallback:!1}).background}function pZe(e){return e}function mZe(e,t){return t.fn.size({size:e,sizes:t.fontSizes})}const gZe=["-xs","-sm","-md","-lg","-xl"];function yZe(e,t){return gZe.includes(e)?t.fn.size({size:e.replace("-",""),sizes:t.spacing})*-1:t.fn.size({size:e,sizes:t.spacing})}const vZe={color:hZe,default:pZe,fontSize:mZe,spacing:yZe},_Ze={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"default",property:"opacity"},ff:{type:"default",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"default",property:"fontWeight"},lts:{type:"default",property:"letterSpacing"},ta:{type:"default",property:"textAlign"},lh:{type:"default",property:"lineHeight"},fs:{type:"default",property:"fontStyle"},tt:{type:"default",property:"textTransform"},td:{type:"default",property:"textDecoration"},w:{type:"default",property:"width"},miw:{type:"default",property:"minWidth"},maw:{type:"default",property:"maxWidth"},h:{type:"default",property:"height"},mih:{type:"default",property:"minHeight"},mah:{type:"default",property:"maxHeight"},bgsz:{type:"default",property:"background-size"},bgp:{type:"default",property:"background-position"},bgr:{type:"default",property:"background-repeat"},bga:{type:"default",property:"background-attachment"},pos:{type:"default",property:"position"},top:{type:"default",property:"top"},left:{type:"default",property:"left"},bottom:{type:"default",property:"bottom"},right:{type:"default",property:"right"},inset:{type:"default",property:"inset"},display:{type:"default",property:"display"}};var bZe=Object.defineProperty,sae=Object.getOwnPropertySymbols,wZe=Object.prototype.hasOwnProperty,EZe=Object.prototype.propertyIsEnumerable,oae=(e,t,n)=>t in e?bZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aae=(e,t)=>{for(var n in t||(t={}))wZe.call(t,n)&&oae(e,n,t[n]);if(sae)for(var n of sae(t))EZe.call(t,n)&&oae(e,n,t[n]);return e};function N7(e,t,n=_Ze){return Object.keys(n).reduce((i,s)=>(s in e&&e[s]!==void 0&&i.push(dZe({value:e[s],getValue:vZe[n[s].type],property:n[s].property,theme:t})),i),[]).reduce((i,s)=>(Object.keys(s).forEach(o=>{typeof s[o]=="object"&&s[o]!==null&&o in i?i[o]=aae(aae({},i[o]),s[o]):i[o]=s[o]}),i),{})}function uae(e,t){return typeof e=="function"?e(t):e}function SZe(e,t,n){const r=As(),{css:i,cx:s}=zxe();return Array.isArray(e)?s(n,i(N7(t,r)),e.map(o=>i(uae(o,r)))):s(n,i(uae(e,r)),i(N7(t,r)))}var xZe=Object.defineProperty,mN=Object.getOwnPropertySymbols,Jxe=Object.prototype.hasOwnProperty,Zxe=Object.prototype.propertyIsEnumerable,lae=(e,t,n)=>t in e?xZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,TZe=(e,t)=>{for(var n in t||(t={}))Jxe.call(t,n)&&lae(e,n,t[n]);if(mN)for(var n of mN(t))Zxe.call(t,n)&&lae(e,n,t[n]);return e},CZe=(e,t)=>{var n={};for(var r in e)Jxe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mN)for(var r of mN(e))t.indexOf(r)<0&&Zxe.call(e,r)&&(n[r]=e[r]);return n};const eTe=I.forwardRef((e,t)=>{var n=e,{className:r,component:i,style:s,sx:o}=n,a=CZe(n,["className","component","style","sx"]);const{systemStyles:u,rest:l}=Ec(a),c=i||"div";return F.createElement(c,TZe({ref:t,className:SZe(o,u,r),style:s},l))});eTe.displayName="@mantine/core/Box";const dt=eTe;var AZe=Object.defineProperty,IZe=Object.defineProperties,OZe=Object.getOwnPropertyDescriptors,cae=Object.getOwnPropertySymbols,PZe=Object.prototype.hasOwnProperty,kZe=Object.prototype.propertyIsEnumerable,fae=(e,t,n)=>t in e?AZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dae=(e,t)=>{for(var n in t||(t={}))PZe.call(t,n)&&fae(e,n,t[n]);if(cae)for(var n of cae(t))kZe.call(t,n)&&fae(e,n,t[n]);return e},$Ze=(e,t)=>IZe(e,OZe(t)),RZe=yt(e=>({root:$Ze(dae(dae({},e.fn.focusStyles()),e.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:e.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,textDecoration:"none",boxSizing:"border-box"})}));const NZe=RZe;var DZe=Object.defineProperty,gN=Object.getOwnPropertySymbols,tTe=Object.prototype.hasOwnProperty,nTe=Object.prototype.propertyIsEnumerable,hae=(e,t,n)=>t in e?DZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MZe=(e,t)=>{for(var n in t||(t={}))tTe.call(t,n)&&hae(e,n,t[n]);if(gN)for(var n of gN(t))nTe.call(t,n)&&hae(e,n,t[n]);return e},LZe=(e,t)=>{var n={};for(var r in e)tTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gN)for(var r of gN(e))t.indexOf(r)<0&&nTe.call(e,r)&&(n[r]=e[r]);return n};const rTe=I.forwardRef((e,t)=>{const n=Et("UnstyledButton",{},e),{className:r,component:i="button",unstyled:s}=n,o=LZe(n,["className","component","unstyled"]),{classes:a,cx:u}=NZe(null,{name:"UnstyledButton",unstyled:s});return F.createElement(dt,MZe({component:i,ref:t,className:u(a.root,r),type:i==="button"?"button":void 0},o))});rTe.displayName="@mantine/core/UnstyledButton";const vm=rTe;var FZe=Object.defineProperty,jZe=Object.defineProperties,BZe=Object.getOwnPropertyDescriptors,yN=Object.getOwnPropertySymbols,iTe=Object.prototype.hasOwnProperty,sTe=Object.prototype.propertyIsEnumerable,pae=(e,t,n)=>t in e?FZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lc=(e,t)=>{for(var n in t||(t={}))iTe.call(t,n)&&pae(e,n,t[n]);if(yN)for(var n of yN(t))sTe.call(t,n)&&pae(e,n,t[n]);return e},kx=(e,t)=>jZe(e,BZe(t)),UZe=(e,t)=>{var n={};for(var r in e)iTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yN)for(var r of yN(e))t.indexOf(r)<0&&sTe.call(e,r)&&(n[r]=e[r]);return n};function zZe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Kj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}function VZe(e){return e!=null&&e.current?e.current.scrollWidth:"auto"}const zh=typeof window<"u"&&window.requestAnimationFrame;function HZe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r,axis:i}){const s=I.useRef(null),o="0px",[a,u]=I.useState({}),l=g=>{s_.flushSync(()=>u(g))},c=g=>{l(y=>Lc(Lc({},y),g))};function f(g){const y=e||zZe(g);return{transitionProperty:`${i==="x"?"width":"height"}`,transitionDuration:`${y}ms`,transitionTimingFunction:`${t}`}}const d=()=>{const g=a;l({});const y={width:VZe(s),height:Kj(s)};return l(g),y},h=()=>{const{height:g}=d();return{x:{height:g,width:"0px",overflow:"hidden"},y:{display:"none",height:"0px",overflow:"hidden"}}};I.useEffect(()=>{zh(()=>{const{x:g,y}=h();i==="x"&&!r?l(Lc({},g)):i==="y"&&!r&&l(Lc({},y))})},[]),Fs(()=>{i!=="x"&&zh(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),zh(()=>{const g=Kj(s);c(kx(Lc({},f(g)),{height:g}))})}:()=>{const g=Kj(s);c(kx(Lc({},f(g)),{willChange:"height",height:g})),zh(()=>c({height:o,overflow:"hidden"}))})},[r]),Fs(()=>{i!=="y"&&zh(r?()=>{const{width:g}=d();c({display:"block",overflow:"hidden",willChange:"width",flexShrink:0}),zh(()=>{c(kx(Lc({},f(g)),{width:g}))})}:()=>{const{width:g,height:y}=d();c(kx(Lc({},f(g)),{flexShrink:0,willChange:"width",width:g,height:y})),zh(()=>c({width:"0px",overflow:"hidden"}))})},[r]);const p=g=>{if(!(g.target!==s.current||!(g.propertyName==="width"||!0)))if(n(),r)l({});else{const{x:y,y:v}=h();l(i==="x"?y:v)}};function m(g={}){var y=g,{style:v={},refKey:_="ref"}=y,w=UZe(y,["style","refKey"]);const x=w[_];return kx(Lc({"aria-hidden":!r},w),{[_]:Yxe(s,x),onTransitionEnd:p,style:Lc(Lc({boxSizing:"border-box"},v),a)})}return m}var qZe=Object.defineProperty,vN=Object.getOwnPropertySymbols,oTe=Object.prototype.hasOwnProperty,aTe=Object.prototype.propertyIsEnumerable,mae=(e,t,n)=>t in e?qZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NP=(e,t)=>{for(var n in t||(t={}))oTe.call(t,n)&&mae(e,n,t[n]);if(vN)for(var n of vN(t))aTe.call(t,n)&&mae(e,n,t[n]);return e},WZe=(e,t)=>{var n={};for(var r in e)oTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vN)for(var r of vN(e))t.indexOf(r)<0&&aTe.call(e,r)&&(n[r]=e[r]);return n};const GZe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0,axis:"y"},uTe=I.forwardRef((e,t)=>{const n=Et("Collapse",GZe,e),{children:r,in:i,transitionDuration:s,transitionTimingFunction:o,style:a,onTransitionEnd:u,animateOpacity:l,axis:c}=n,f=WZe(n,["children","in","transitionDuration","transitionTimingFunction","style","onTransitionEnd","animateOpacity","axis"]),d=As(),h=t4(),m=(d.respectReducedMotion?h:!1)?0:s,{systemStyles:g,rest:y}=Ec(f),v=HZe({opened:i,transitionDuration:m,transitionTimingFunction:o,onTransitionEnd:u,axis:c});return m===0?i?F.createElement(dt,NP({},y),r):null:F.createElement(dt,NP({},v(NP(NP({style:a,ref:t},y),g))),F.createElement("div",{style:{opacity:i||!l?1:0,transition:l?`opacity ${m}ms ${o}`:"none"}},r))});uTe.displayName="@mantine/core/Collapse";var YZe=Object.defineProperty,gae=Object.getOwnPropertySymbols,KZe=Object.prototype.hasOwnProperty,XZe=Object.prototype.propertyIsEnumerable,yae=(e,t,n)=>t in e?YZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,QZe=(e,t)=>{for(var n in t||(t={}))KZe.call(t,n)&&yae(e,n,t[n]);if(gae)for(var n of gae(t))XZe.call(t,n)&&yae(e,n,t[n]);return e};function JZe(e){return F.createElement("svg",QZe({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),F.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var ZZe=Object.defineProperty,eet=Object.defineProperties,tet=Object.getOwnPropertyDescriptors,vae=Object.getOwnPropertySymbols,net=Object.prototype.hasOwnProperty,ret=Object.prototype.propertyIsEnumerable,_ae=(e,t,n)=>t in e?ZZe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lTe=(e,t)=>{for(var n in t||(t={}))net.call(t,n)&&_ae(e,n,t[n]);if(vae)for(var n of vae(t))ret.call(t,n)&&_ae(e,n,t[n]);return e},iet=(e,t)=>eet(e,tet(t));const PT={xs:18,sm:22,md:28,lg:34,xl:44};function set({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:lTe({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var oet=yt((e,{color:t,size:n,radius:r,variant:i,gradient:s})=>({root:iet(lTe({},set({variant:i,theme:e,color:t,gradient:s})),{position:"relative",height:e.fn.size({size:n,sizes:PT}),minHeight:e.fn.size({size:n,sizes:PT}),width:e.fn.size({size:n,sizes:PT}),minWidth:e.fn.size({size:n,sizes:PT}),borderRadius:e.fn.radius(r),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center","&:active":e.activeStyles,"&:disabled, &[data-disabled]":{color:e.colors.gray[e.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),borderColor:i==="transparent"?void 0:e.fn.themeColor("gray",e.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}})}));const aet=oet;var uet=Object.defineProperty,_N=Object.getOwnPropertySymbols,cTe=Object.prototype.hasOwnProperty,fTe=Object.prototype.propertyIsEnumerable,bae=(e,t,n)=>t in e?uet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cet=(e,t)=>{for(var n in t||(t={}))cTe.call(t,n)&&bae(e,n,t[n]);if(_N)for(var n of _N(t))fTe.call(t,n)&&bae(e,n,t[n]);return e},fet=(e,t)=>{var n={};for(var r in e)cTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_N)for(var r of _N(e))t.indexOf(r)<0&&fTe.call(e,r)&&(n[r]=e[r]);return n};function det(e){var t=e,{size:n,color:r}=t,i=fet(t,["size","color"]);return F.createElement("svg",cet({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:r,width:`${n}px`},i),F.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},F.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),F.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},F.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),F.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},F.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),F.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},F.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),F.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},F.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))}var het=Object.defineProperty,bN=Object.getOwnPropertySymbols,dTe=Object.prototype.hasOwnProperty,hTe=Object.prototype.propertyIsEnumerable,wae=(e,t,n)=>t in e?het(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pet=(e,t)=>{for(var n in t||(t={}))dTe.call(t,n)&&wae(e,n,t[n]);if(bN)for(var n of bN(t))hTe.call(t,n)&&wae(e,n,t[n]);return e},met=(e,t)=>{var n={};for(var r in e)dTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bN)for(var r of bN(e))t.indexOf(r)<0&&hTe.call(e,r)&&(n[r]=e[r]);return n};function get(e){var t=e,{size:n,color:r}=t,i=met(t,["size","color"]);return F.createElement("svg",pet({width:`${n}px`,height:`${n}px`,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:r},i),F.createElement("g",{fill:"none",fillRule:"evenodd"},F.createElement("g",{transform:"translate(2.5 2.5)",strokeWidth:"5"},F.createElement("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),F.createElement("path",{d:"M32 16c0-9.94-8.06-16-16-16"},F.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})))))}var yet=Object.defineProperty,wN=Object.getOwnPropertySymbols,pTe=Object.prototype.hasOwnProperty,mTe=Object.prototype.propertyIsEnumerable,Eae=(e,t,n)=>t in e?yet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vet=(e,t)=>{for(var n in t||(t={}))pTe.call(t,n)&&Eae(e,n,t[n]);if(wN)for(var n of wN(t))mTe.call(t,n)&&Eae(e,n,t[n]);return e},_et=(e,t)=>{var n={};for(var r in e)pTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wN)for(var r of wN(e))t.indexOf(r)<0&&mTe.call(e,r)&&(n[r]=e[r]);return n};function bet(e){var t=e,{size:n,color:r}=t,i=_et(t,["size","color"]);return F.createElement("svg",vet({width:`${n}px`,height:`${n/4}px`,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:r},i),F.createElement("circle",{cx:"15",cy:"15",r:"15"},F.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),F.createElement("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3"},F.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),F.createElement("circle",{cx:"105",cy:"15",r:"15"},F.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),F.createElement("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))}var wet=Object.defineProperty,EN=Object.getOwnPropertySymbols,gTe=Object.prototype.hasOwnProperty,yTe=Object.prototype.propertyIsEnumerable,Sae=(e,t,n)=>t in e?wet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Eet=(e,t)=>{for(var n in t||(t={}))gTe.call(t,n)&&Sae(e,n,t[n]);if(EN)for(var n of EN(t))yTe.call(t,n)&&Sae(e,n,t[n]);return e},xet=(e,t)=>{var n={};for(var r in e)gTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&EN)for(var r of EN(e))t.indexOf(r)<0&&yTe.call(e,r)&&(n[r]=e[r]);return n};const Xj={bars:det,oval:get,dots:bet},Tet={xs:18,sm:22,md:36,lg:44,xl:58},Cet={size:"md"};function o_(e){const t=Et("Loader",Cet,e),{size:n,color:r,variant:i}=t,s=xet(t,["size","color","variant"]),o=As(),a=i in Xj?i:o.loader;return F.createElement(dt,Eet({role:"presentation",component:Xj[a]||Xj.bars,size:o.fn.size({size:n,sizes:Tet}),color:o.fn.variant({variant:"filled",primaryFallback:!1,color:r||o.primaryColor}).background},s))}o_.displayName="@mantine/core/Loader";var Aet=Object.defineProperty,SN=Object.getOwnPropertySymbols,vTe=Object.prototype.hasOwnProperty,_Te=Object.prototype.propertyIsEnumerable,xae=(e,t,n)=>t in e?Aet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tae=(e,t)=>{for(var n in t||(t={}))vTe.call(t,n)&&xae(e,n,t[n]);if(SN)for(var n of SN(t))_Te.call(t,n)&&xae(e,n,t[n]);return e},Iet=(e,t)=>{var n={};for(var r in e)vTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SN)for(var r of SN(e))t.indexOf(r)<0&&_Te.call(e,r)&&(n[r]=e[r]);return n};const Oet={color:"gray",size:"md",variant:"subtle",loading:!1},bTe=I.forwardRef((e,t)=>{const n=Et("ActionIcon",Oet,e),{className:r,color:i,children:s,radius:o,size:a,variant:u,gradient:l,disabled:c,loaderProps:f,loading:d,unstyled:h}=n,p=Iet(n,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled"]),{classes:m,cx:g,theme:y}=aet({size:a,radius:o,color:i,variant:u,gradient:l},{name:"ActionIcon",unstyled:h}),v=y.fn.variant({color:i,variant:u}),_=F.createElement(o_,Tae({color:v.color,size:y.fn.size({size:a,sizes:PT})-12},f));return F.createElement(vm,Tae({className:g(m.root,r),ref:t,disabled:c,"data-disabled":c||void 0,"data-loading":d||void 0,unstyled:h},p),d?_:s)});bTe.displayName="@mantine/core/ActionIcon";const g0=bTe;function wTe(e){const{children:t,target:n,className:r}=Et("Portal",{},e),i=As(),[s,o]=I.useState(!1),a=I.useRef();return NY(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:document.createElement("div"),n||document.body.appendChild(a.current),()=>{!n&&document.body.removeChild(a.current)}),[n]),s?s_.createPortal(F.createElement("div",{className:r,dir:i.dir},t),a.current):null}wTe.displayName="@mantine/core/Portal";var Pet=Object.defineProperty,xN=Object.getOwnPropertySymbols,ETe=Object.prototype.hasOwnProperty,STe=Object.prototype.propertyIsEnumerable,Cae=(e,t,n)=>t in e?Pet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ket=(e,t)=>{for(var n in t||(t={}))ETe.call(t,n)&&Cae(e,n,t[n]);if(xN)for(var n of xN(t))STe.call(t,n)&&Cae(e,n,t[n]);return e},$et=(e,t)=>{var n={};for(var r in e)ETe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xN)for(var r of xN(e))t.indexOf(r)<0&&STe.call(e,r)&&(n[r]=e[r]);return n};function dS(e){var t=e,{withinPortal:n=!0,children:r}=t,i=$et(t,["withinPortal","children"]);return n?F.createElement(wTe,ket({},i),r):F.createElement(F.Fragment,null,r)}dS.displayName="@mantine/core/OptionalPortal";var Ret=Object.defineProperty,Net=Object.defineProperties,Det=Object.getOwnPropertyDescriptors,Aae=Object.getOwnPropertySymbols,Met=Object.prototype.hasOwnProperty,Let=Object.prototype.propertyIsEnumerable,Iae=(e,t,n)=>t in e?Ret(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qj=(e,t)=>{for(var n in t||(t={}))Met.call(t,n)&&Iae(e,n,t[n]);if(Aae)for(var n of Aae(t))Let.call(t,n)&&Iae(e,n,t[n]);return e},Oae=(e,t)=>Net(e,Det(t));function Fet({variant:e,color:t,theme:n}){if(e==="filled")return{backgroundColor:n.fn.variant({variant:"filled",color:t}).background,color:n.white};if(e==="outline"){const i=n.fn.variant({variant:"outline",color:t});return{color:i.color,borderColor:i.border,backgroundColor:n.colorScheme==="dark"?n.colors.dark[6]:n.white}}const r=n.fn.variant({variant:"light",color:t});return{backgroundColor:r.background,color:r.color}}var jet=yt((e,{color:t,radius:n,variant:r})=>({root:Qj(Oae(Qj({},e.fn.fontStyles()),{position:"relative",overflow:"hidden",padding:`${e.spacing.sm}px ${e.spacing.md}px`,borderRadius:e.fn.radius(n),border:"1px solid transparent"}),Fet({variant:r,color:t,theme:e})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:7,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:e.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:20,height:20,display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:e.spacing.md,marginTop:1},message:Oae(Qj({},e.fn.fontStyles()),{lineHeight:e.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:e.fontSizes.sm,color:r==="filled"?e.white:e.colorScheme==="dark"?r==="light"?e.white:e.colors.dark[0]:e.black}),closeButton:{position:"absolute",top:e.spacing.sm,right:e.spacing.sm,color:"inherit"}}));const Bet=jet;var Uet=Object.defineProperty,Pae=Object.getOwnPropertySymbols,zet=Object.prototype.hasOwnProperty,Vet=Object.prototype.propertyIsEnumerable,kae=(e,t,n)=>t in e?Uet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Het=(e,t)=>{for(var n in t||(t={}))zet.call(t,n)&&kae(e,n,t[n]);if(Pae)for(var n of Pae(t))Vet.call(t,n)&&kae(e,n,t[n]);return e};function xTe(e){return F.createElement("svg",Het({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),F.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}xTe.displayName="@mantine/core/CloseIcon";var qet=Object.defineProperty,TN=Object.getOwnPropertySymbols,TTe=Object.prototype.hasOwnProperty,CTe=Object.prototype.propertyIsEnumerable,$ae=(e,t,n)=>t in e?qet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wet=(e,t)=>{for(var n in t||(t={}))TTe.call(t,n)&&$ae(e,n,t[n]);if(TN)for(var n of TN(t))CTe.call(t,n)&&$ae(e,n,t[n]);return e},Get=(e,t)=>{var n={};for(var r in e)TTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TN)for(var r of TN(e))t.indexOf(r)<0&&CTe.call(e,r)&&(n[r]=e[r]);return n};const Yet={xs:12,sm:14,md:16,lg:20,xl:24},Ket={size:"md"},ATe=I.forwardRef((e,t)=>{const n=Et("CloseButton",Ket,e),{iconSize:r,size:i="md"}=n,s=Get(n,["iconSize","size"]),o=As(),a=r||o.fn.size({size:i,sizes:Yet});return F.createElement(g0,Wet({size:i,ref:t},s),F.createElement(xTe,{width:a,height:a}))});ATe.displayName="@mantine/core/CloseButton";const _m=ATe;var Xet=Object.defineProperty,CN=Object.getOwnPropertySymbols,ITe=Object.prototype.hasOwnProperty,OTe=Object.prototype.propertyIsEnumerable,Rae=(e,t,n)=>t in e?Xet(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qet=(e,t)=>{for(var n in t||(t={}))ITe.call(t,n)&&Rae(e,n,t[n]);if(CN)for(var n of CN(t))OTe.call(t,n)&&Rae(e,n,t[n]);return e},Jet=(e,t)=>{var n={};for(var r in e)ITe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CN)for(var r of CN(e))t.indexOf(r)<0&&OTe.call(e,r)&&(n[r]=e[r]);return n};const Zet={variant:"light"},PTe=I.forwardRef((e,t)=>{const n=Et("Alert",Zet,e),{id:r,className:i,title:s,variant:o,children:a,color:u,classNames:l,icon:c,styles:f,onClose:d,radius:h,withCloseButton:p,closeButtonLabel:m,unstyled:g}=n,y=Jet(n,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:v,cx:_}=Bet({color:u,radius:h,variant:o},{classNames:l,styles:f,unstyled:g,name:"Alert"}),w=ru(r),x=s&&`${w}-title`,E=`${w}-body`;return F.createElement(dt,Qet({id:w,role:"alert","aria-labelledby":x,"aria-describedby":E,className:_(v.root,v[o],i),ref:t},y),F.createElement("div",{className:v.wrapper},c&&F.createElement("div",{className:v.icon},c),F.createElement("div",{className:v.body},s&&F.createElement("div",{className:v.title,"data-with-close-button":p||void 0},F.createElement("span",{id:x,className:v.label},s)),p&&F.createElement(_m,{className:v.closeButton,onClick:d,variant:"transparent",size:16,iconSize:16,"aria-label":m}),F.createElement("div",{id:E,className:v.message},a))))});PTe.displayName="@mantine/core/Alert";var ett=Object.defineProperty,ttt=Object.defineProperties,ntt=Object.getOwnPropertyDescriptors,Nae=Object.getOwnPropertySymbols,rtt=Object.prototype.hasOwnProperty,itt=Object.prototype.propertyIsEnumerable,Dae=(e,t,n)=>t in e?ett(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,DP=(e,t)=>{for(var n in t||(t={}))rtt.call(t,n)&&Dae(e,n,t[n]);if(Nae)for(var n of Nae(t))itt.call(t,n)&&Dae(e,n,t[n]);return e},stt=(e,t)=>ttt(e,ntt(t));function ott({underline:e,strikethrough:t}){const n=[];return e&&n.push("underline"),t&&n.push("line-through"),n.length>0?n.join(" "):"none"}function att({theme:e,color:t,variant:n}){return t==="dimmed"?e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]:typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?e.fn.variant({variant:"filled",color:t}).background:n==="link"?e.colors[e.primaryColor][e.colorScheme==="dark"?4:7]:t||"inherit"}function utt(e){return typeof e=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical"}:null}var ltt=yt((e,{color:t,variant:n,size:r,lineClamp:i,inline:s,inherit:o,underline:a,gradient:u,weight:l,transform:c,align:f,strikethrough:d,italic:h})=>{const p=e.fn.variant({variant:"gradient",gradient:u});return{root:DP(stt(DP(DP(DP({},e.fn.fontStyles()),e.fn.focusStyles()),utt(i)),{color:att({color:t,theme:e,variant:n}),fontFamily:o?"inherit":e.fontFamily,fontSize:o||r===void 0?"inherit":e.fn.size({size:r,sizes:e.fontSizes}),lineHeight:o?"inherit":s?1:e.lineHeight,textDecoration:ott({underline:a,strikethrough:d}),WebkitTapHighlightColor:"transparent",fontWeight:o?"inherit":l,textTransform:c,textAlign:f,fontStyle:h?"italic":void 0}),e.fn.hover(n==="link"&&a===void 0?{textDecoration:"underline"}:void 0)),gradient:{backgroundImage:p.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const ctt=ltt;var ftt=Object.defineProperty,AN=Object.getOwnPropertySymbols,kTe=Object.prototype.hasOwnProperty,$Te=Object.prototype.propertyIsEnumerable,Mae=(e,t,n)=>t in e?ftt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dtt=(e,t)=>{for(var n in t||(t={}))kTe.call(t,n)&&Mae(e,n,t[n]);if(AN)for(var n of AN(t))$Te.call(t,n)&&Mae(e,n,t[n]);return e},htt=(e,t)=>{var n={};for(var r in e)kTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AN)for(var r of AN(e))t.indexOf(r)<0&&$Te.call(e,r)&&(n[r]=e[r]);return n};const ptt={variant:"text"},RTe=I.forwardRef((e,t)=>{const n=Et("Text",ptt,e),{className:r,size:i,weight:s,transform:o,color:a,align:u,variant:l,lineClamp:c,gradient:f,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,classNames:y,styles:v,unstyled:_,span:w}=n,x=htt(n,["className","size","weight","transform","color","align","variant","lineClamp","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span"]),{classes:E,cx:b}=ctt({variant:l,color:a,size:i,lineClamp:c,inline:d,inherit:h,underline:p,strikethrough:m,italic:g,weight:s,transform:o,align:u,gradient:f},{unstyled:_,name:"Text"});return F.createElement(dt,dtt({ref:t,className:b(E.root,{[E.gradient]:l==="gradient"},r),component:w?"span":"div"},x))});RTe.displayName="@mantine/core/Text";const ze=RTe;var mtt=yt(()=>({root:{backgroundColor:"transparent",cursor:"pointer",padding:0,border:0}}));const gtt=mtt;var ytt=Object.defineProperty,IN=Object.getOwnPropertySymbols,NTe=Object.prototype.hasOwnProperty,DTe=Object.prototype.propertyIsEnumerable,Lae=(e,t,n)=>t in e?ytt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fae=(e,t)=>{for(var n in t||(t={}))NTe.call(t,n)&&Lae(e,n,t[n]);if(IN)for(var n of IN(t))DTe.call(t,n)&&Lae(e,n,t[n]);return e},vtt=(e,t)=>{var n={};for(var r in e)NTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&IN)for(var r of IN(e))t.indexOf(r)<0&&DTe.call(e,r)&&(n[r]=e[r]);return n};const _tt={},MTe=I.forwardRef((e,t)=>{const n=Et("Anchor",_tt,e),{component:r,className:i,unstyled:s}=n,o=vtt(n,["component","className","unstyled"]),{classes:a,cx:u}=gtt(null,{name:"Anchor",unstyled:s}),l=r==="button"?{type:"button"}:null;return F.createElement(ze,Fae(Fae({component:r||"a",variant:"link",ref:t,className:u(a.root,i)},l),o))});MTe.displayName="@mantine/core/Anchor";const n4=MTe,LTe=I.createContext({}),btt=LTe.Provider;function FTe(){return I.useContext(LTe)}function r4(e,t){if(!e)return[];const n=Object.keys(e).filter(r=>r!=="base").map(r=>[t.fn.size({size:r,sizes:t.breakpoints}),e[r]]);return n.sort((r,i)=>r[0]-i[0]),n}var wtt=Object.defineProperty,Ett=Object.defineProperties,Stt=Object.getOwnPropertyDescriptors,jae=Object.getOwnPropertySymbols,xtt=Object.prototype.hasOwnProperty,Ttt=Object.prototype.propertyIsEnumerable,Bae=(e,t,n)=>t in e?wtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,MP=(e,t)=>{for(var n in t||(t={}))xtt.call(t,n)&&Bae(e,n,t[n]);if(jae)for(var n of jae(t))Ttt.call(t,n)&&Bae(e,n,t[n]);return e},Uae=(e,t)=>Ett(e,Stt(t)),Ctt=yt((e,{height:t,width:n,fixed:r,position:i,hiddenBreakpoint:s,zIndex:o,section:a,withBorder:u})=>{const l=typeof n=="object"&&n!==null?r4(n,e).reduce((f,[d,h])=>(f[`@media (min-width: ${d}px)`]={width:h,minWidth:h},f),{}):null,c=u?{[a==="navbar"?"borderRight":"borderLeft"]:`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`}:{};return{root:Uae(MP(MP(Uae(MP(MP({},e.fn.fontStyles()),i),{top:(i==null?void 0:i.top)||"var(--mantine-header-height)",bottom:0,zIndex:o,height:t||"calc(100vh - var(--mantine-header-height, 0px) - var(--mantine-footer-height, 0px))",width:(n==null?void 0:n.base)||"100%",position:r?"fixed":"static",boxSizing:"border-box",display:"flex",flexDirection:"column",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),c),l),{"&[data-hidden]":{[`@media (max-width: ${e.fn.size({size:s,sizes:e.breakpoints})-1}px)`]:{display:"none"}}})}});const Att=Ctt;var Itt=Object.defineProperty,ON=Object.getOwnPropertySymbols,jTe=Object.prototype.hasOwnProperty,BTe=Object.prototype.propertyIsEnumerable,zae=(e,t,n)=>t in e?Itt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vae=(e,t)=>{for(var n in t||(t={}))jTe.call(t,n)&&zae(e,n,t[n]);if(ON)for(var n of ON(t))BTe.call(t,n)&&zae(e,n,t[n]);return e},Ott=(e,t)=>{var n={};for(var r in e)jTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ON)for(var r of ON(e))t.indexOf(r)<0&&BTe.call(e,r)&&(n[r]=e[r]);return n};const LY=I.forwardRef((e,t)=>{var n=e,{width:r,height:i,fixed:s=!1,position:o,zIndex:a=xa("app"),hiddenBreakpoint:u="md",hidden:l=!1,withBorder:c=!0,className:f,classNames:d,styles:h,children:p,section:m,__staticSelector:g,unstyled:y}=n,v=Ott(n,["width","height","fixed","position","zIndex","hiddenBreakpoint","hidden","withBorder","className","classNames","styles","children","section","__staticSelector","unstyled"]);const _=FTe(),{classes:w,cx:x,theme:E}=Att({width:r,height:i,fixed:_.fixed||s,position:o,hiddenBreakpoint:u,zIndex:_.zIndex||a,section:m,withBorder:c},{classNames:d,styles:h,name:g,unstyled:y}),b=r4(r,E).reduce((T,[A,C])=>(T[`@media (min-width: ${A}px)`]={[`--mantine-${m}-width`]:`${C}px`},T),{});return F.createElement(dt,Vae({component:m==="navbar"?"nav":"aside",ref:t,"data-hidden":l||void 0,className:x(w.root,f)},v),p,F.createElement(Vxe,{styles:()=>({":root":Vae({[`--mantine-${m}-width`]:r!=null&&r.base?`${r.base}px`:"0px"},b)})}))});LY.displayName="@mantine/core/HorizontalSection";var Ptt=Object.defineProperty,PN=Object.getOwnPropertySymbols,UTe=Object.prototype.hasOwnProperty,zTe=Object.prototype.propertyIsEnumerable,Hae=(e,t,n)=>t in e?Ptt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ktt=(e,t)=>{for(var n in t||(t={}))UTe.call(t,n)&&Hae(e,n,t[n]);if(PN)for(var n of PN(t))zTe.call(t,n)&&Hae(e,n,t[n]);return e},$tt=(e,t)=>{var n={};for(var r in e)UTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PN)for(var r of PN(e))t.indexOf(r)<0&&zTe.call(e,r)&&(n[r]=e[r]);return n};const VTe=I.forwardRef((e,t)=>{var n=e,{children:r,grow:i=!1,sx:s}=n,o=$tt(n,["children","grow","sx"]);return F.createElement(dt,ktt({ref:t,sx:[{flex:i?1:0,boxSizing:"border-box"},...m0(s)]},o),r)});VTe.displayName="@mantine/core/Section";const HTe=VTe;var Rtt=Object.defineProperty,qae=Object.getOwnPropertySymbols,Ntt=Object.prototype.hasOwnProperty,Dtt=Object.prototype.propertyIsEnumerable,Wae=(e,t,n)=>t in e?Rtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mtt=(e,t)=>{for(var n in t||(t={}))Ntt.call(t,n)&&Wae(e,n,t[n]);if(qae)for(var n of qae(t))Dtt.call(t,n)&&Wae(e,n,t[n]);return e};const Ltt={fixed:!1,position:{top:0,left:0},zIndex:xa("app"),hiddenBreakpoint:"md",hidden:!1},A2=I.forwardRef((e,t)=>{const n=Et("Navbar",Ltt,e);return F.createElement(LY,Mtt({section:"navbar",__staticSelector:"Navbar",ref:t},n))});A2.Section=HTe;A2.displayName="@mantine/core/Navbar";var Ftt=Object.defineProperty,jtt=Object.defineProperties,Btt=Object.getOwnPropertyDescriptors,Gae=Object.getOwnPropertySymbols,Utt=Object.prototype.hasOwnProperty,ztt=Object.prototype.propertyIsEnumerable,Yae=(e,t,n)=>t in e?Ftt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jj=(e,t)=>{for(var n in t||(t={}))Utt.call(t,n)&&Yae(e,n,t[n]);if(Gae)for(var n of Gae(t))ztt.call(t,n)&&Yae(e,n,t[n]);return e},Kae=(e,t)=>jtt(e,Btt(t)),Vtt=yt((e,{height:t,fixed:n,position:r,zIndex:i,borderPosition:s})=>{const o=typeof t=="object"&&t!==null?r4(t,e).reduce((a,[u,l])=>(a[`@media (min-width: ${u}px)`]={height:l,minHeight:l},a),{}):null;return{root:Kae(Jj(Kae(Jj(Jj({},e.fn.fontStyles()),r),{zIndex:i,height:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,maxHeight:typeof t=="object"?(t==null?void 0:t.base)||"100%":t,position:n?"fixed":"static",boxSizing:"border-box",backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white}),o),{borderBottom:s==="bottom"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0,borderTop:s==="top"?`1px solid ${e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[2]}`:void 0})}});const Htt=Vtt;var qtt=Object.defineProperty,kN=Object.getOwnPropertySymbols,qTe=Object.prototype.hasOwnProperty,WTe=Object.prototype.propertyIsEnumerable,Xae=(e,t,n)=>t in e?qtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qae=(e,t)=>{for(var n in t||(t={}))qTe.call(t,n)&&Xae(e,n,t[n]);if(kN)for(var n of kN(t))WTe.call(t,n)&&Xae(e,n,t[n]);return e},Wtt=(e,t)=>{var n={};for(var r in e)qTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kN)for(var r of kN(e))t.indexOf(r)<0&&WTe.call(e,r)&&(n[r]=e[r]);return n};const GTe=I.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,height:a,fixed:u=!1,withBorder:l=!0,position:c,zIndex:f=xa("app"),section:d,unstyled:h,__staticSelector:p}=n,m=Wtt(n,["children","className","classNames","styles","height","fixed","withBorder","position","zIndex","section","unstyled","__staticSelector"]);const g=FTe(),{classes:y,cx:v,theme:_}=Htt({height:a,fixed:g.fixed||u,position:c,zIndex:g.zIndex||f,borderPosition:l?d==="header"?"bottom":"top":"none"},{name:p,classNames:s,styles:o,unstyled:h}),w=typeof a=="object"&&a!==null?r4(a,_).reduce((x,[E,b])=>(x[`@media (min-width: ${E}px)`]={[`--mantine-${d}-height`]:`${b}px`},x),{}):null;return F.createElement(dt,Qae({component:d==="header"?"header":"footer",className:v(y.root,i),ref:t},m),r,F.createElement(Vxe,{styles:()=>({":root":Qae({[`--mantine-${d}-height`]:typeof a=="object"?`${a==null?void 0:a.base}px`||"100%":`${a}px`},w)})}))});GTe.displayName="@mantine/core/VerticalSection";var Gtt=Object.defineProperty,Ytt=Object.defineProperties,Ktt=Object.getOwnPropertyDescriptors,Jae=Object.getOwnPropertySymbols,Xtt=Object.prototype.hasOwnProperty,Qtt=Object.prototype.propertyIsEnumerable,Zae=(e,t,n)=>t in e?Gtt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jtt=(e,t)=>{for(var n in t||(t={}))Xtt.call(t,n)&&Zae(e,n,t[n]);if(Jae)for(var n of Jae(t))Qtt.call(t,n)&&Zae(e,n,t[n]);return e},Ztt=(e,t)=>Ytt(e,Ktt(t));const ent={fixed:!1,position:{top:0,left:0,right:0},zIndex:xa("app")},FY=I.forwardRef((e,t)=>{const n=Et("Header",ent,e);return F.createElement(GTe,Ztt(Jtt({section:"header",__staticSelector:"Header"},n),{ref:t}))});FY.displayName="@mantine/core/Header";var tnt=Object.defineProperty,eue=Object.getOwnPropertySymbols,nnt=Object.prototype.hasOwnProperty,rnt=Object.prototype.propertyIsEnumerable,tue=(e,t,n)=>t in e?tnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,int=(e,t)=>{for(var n in t||(t={}))nnt.call(t,n)&&tue(e,n,t[n]);if(eue)for(var n of eue(t))rnt.call(t,n)&&tue(e,n,t[n]);return e};const snt={fixed:!1,position:{top:0,right:0},zIndex:xa("app"),hiddenBreakpoint:"md",hidden:!1},I2=I.forwardRef((e,t)=>{const n=Et("Aside",snt,e);return F.createElement(LY,int({section:"aside",__staticSelector:"Aside",ref:t},n))});I2.Section=HTe;I2.displayName="@mantine/core/Aside";var ont=Object.defineProperty,nue=Object.getOwnPropertySymbols,ant=Object.prototype.hasOwnProperty,unt=Object.prototype.propertyIsEnumerable,rue=(e,t,n)=>t in e?ont(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lnt=(e,t)=>{for(var n in t||(t={}))ant.call(t,n)&&rue(e,n,t[n]);if(nue)for(var n of nue(t))unt.call(t,n)&&rue(e,n,t[n]);return e};function cnt(e,t){const n=t.fn.size({size:e.padding,sizes:t.spacing}),r=e.navbarOffsetBreakpoint?t.fn.size({size:e.navbarOffsetBreakpoint,sizes:t.breakpoints}):null,i=e.asideOffsetBreakpoint?t.fn.size({size:e.asideOffsetBreakpoint,sizes:t.breakpoints}):null;return e.fixed?{minHeight:"100vh",paddingTop:`calc(var(--mantine-header-height, 0px) + ${n}px)`,paddingBottom:`calc(var(--mantine-footer-height, 0px) + ${n}px)`,paddingLeft:`calc(var(--mantine-navbar-width, 0px) + ${n}px)`,paddingRight:`calc(var(--mantine-aside-width, 0px) + ${n}px)`,[`@media (max-width: ${r-1}px)`]:{paddingLeft:n},[`@media (max-width: ${i-1}px)`]:{paddingRight:n}}:{padding:n}}var fnt=yt((e,t)=>({root:{boxSizing:"border-box"},body:{display:"flex",boxSizing:"border-box"},main:lnt({flex:1,width:"100vw",boxSizing:"border-box"},cnt(t,e))}));const dnt=fnt;var hnt=Object.defineProperty,$N=Object.getOwnPropertySymbols,YTe=Object.prototype.hasOwnProperty,KTe=Object.prototype.propertyIsEnumerable,iue=(e,t,n)=>t in e?hnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pnt=(e,t)=>{for(var n in t||(t={}))YTe.call(t,n)&&iue(e,n,t[n]);if($N)for(var n of $N(t))KTe.call(t,n)&&iue(e,n,t[n]);return e},mnt=(e,t)=>{var n={};for(var r in e)YTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$N)for(var r of $N(e))t.indexOf(r)<0&&KTe.call(e,r)&&(n[r]=e[r]);return n};const gnt={fixed:!0,zIndex:xa("app"),padding:"md"},hI=I.forwardRef((e,t)=>{const n=Et("AppShell",gnt,e),{children:r,navbar:i,header:s,footer:o,aside:a,fixed:u,zIndex:l,padding:c,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d,className:h,styles:p,classNames:m,unstyled:g,hidden:y}=n,v=mnt(n,["children","navbar","header","footer","aside","fixed","zIndex","padding","navbarOffsetBreakpoint","asideOffsetBreakpoint","className","styles","classNames","unstyled","hidden"]),{classes:_,cx:w}=dnt({padding:c,fixed:u,navbarOffsetBreakpoint:f,asideOffsetBreakpoint:d},{styles:p,classNames:m,unstyled:g,name:"AppShell"});return y?F.createElement(F.Fragment,null,r):F.createElement(btt,{value:{fixed:u,zIndex:l}},F.createElement(dt,pnt({className:w(_.root,h),ref:t},v),s,F.createElement("div",{className:_.body},i,F.createElement("main",{className:_.main},r),a),o))});hI.displayName="@mantine/core/AppShell";const LP={xs:1,sm:2,md:3,lg:4,xl:5};function FP(e,t){const n=e.fn.variant({variant:"outline",color:t}).border;return typeof t=="string"&&(t in e.colors||t.split(".")[0]in e.colors)?n:t===void 0?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]:t}var ynt=yt((e,{size:t,variant:n,color:r})=>({root:{},withLabel:{borderTop:"0 !important"},left:{"&::before":{display:"none"}},right:{"&::after":{display:"none"}},label:{display:"flex",alignItems:"center","&::before":{content:'""',flex:1,height:1,borderTop:`${e.fn.size({size:t,sizes:LP})}px ${n} ${FP(e,r)}`,marginRight:e.spacing.xs},"&::after":{content:'""',flex:1,borderTop:`${e.fn.size({size:t,sizes:LP})}px ${n} ${FP(e,r)}`,marginLeft:e.spacing.xs}},labelDefaultStyles:{color:r==="dark"?e.colors.dark[1]:e.fn.themeColor(r,e.colorScheme==="dark"?5:e.fn.primaryShade(),!1)},horizontal:{border:0,borderTopWidth:e.fn.size({size:t,sizes:LP}),borderTopColor:FP(e,r),borderTopStyle:n,margin:0},vertical:{border:0,alignSelf:"stretch",height:"auto",borderLeftWidth:e.fn.size({size:t,sizes:LP}),borderLeftColor:FP(e,r),borderLeftStyle:n}}));const vnt=ynt;var _nt=Object.defineProperty,bnt=Object.defineProperties,wnt=Object.getOwnPropertyDescriptors,RN=Object.getOwnPropertySymbols,XTe=Object.prototype.hasOwnProperty,QTe=Object.prototype.propertyIsEnumerable,sue=(e,t,n)=>t in e?_nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oue=(e,t)=>{for(var n in t||(t={}))XTe.call(t,n)&&sue(e,n,t[n]);if(RN)for(var n of RN(t))QTe.call(t,n)&&sue(e,n,t[n]);return e},Ent=(e,t)=>bnt(e,wnt(t)),Snt=(e,t)=>{var n={};for(var r in e)XTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RN)for(var r of RN(e))t.indexOf(r)<0&&QTe.call(e,r)&&(n[r]=e[r]);return n};const xnt={orientation:"horizontal",size:"xs",labelPosition:"left",variant:"solid"},NN=I.forwardRef((e,t)=>{const n=Et("Divider",xnt,e),{className:r,color:i,orientation:s,size:o,label:a,labelPosition:u,labelProps:l,variant:c,styles:f,classNames:d,unstyled:h}=n,p=Snt(n,["className","color","orientation","size","label","labelPosition","labelProps","variant","styles","classNames","unstyled"]),{classes:m,cx:g}=vnt({color:i,size:o,variant:c},{classNames:d,styles:f,unstyled:h,name:"Divider"}),y=s==="vertical",v=s==="horizontal",_=!!a&&v,w=!(l!=null&&l.color);return F.createElement(dt,oue({ref:t,className:g(m.root,{[m.vertical]:y,[m.horizontal]:v,[m.withLabel]:_},r),role:"separator"},p),_&&F.createElement(ze,Ent(oue({},l),{size:(l==null?void 0:l.size)||"xs",sx:{marginTop:2},className:g(m.label,m[u],{[m.labelDefaultStyles]:w})}),a))});NN.displayName="@mantine/core/Divider";var Tnt=Object.defineProperty,Cnt=Object.defineProperties,Ant=Object.getOwnPropertyDescriptors,aue=Object.getOwnPropertySymbols,Int=Object.prototype.hasOwnProperty,Ont=Object.prototype.propertyIsEnumerable,uue=(e,t,n)=>t in e?Tnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lue=(e,t)=>{for(var n in t||(t={}))Int.call(t,n)&&uue(e,n,t[n]);if(aue)for(var n of aue(t))Ont.call(t,n)&&uue(e,n,t[n]);return e},Pnt=(e,t)=>Cnt(e,Ant(t)),knt=yt((e,{size:t})=>({item:Pnt(lue({},e.fn.fontStyles()),{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`,cursor:"pointer",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,borderRadius:e.radius.sm,"&[data-hovered]":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[1]},"&[data-selected]":lue({backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.fn.variant({variant:"filled"}).color},e.fn.hover({backgroundColor:e.fn.variant({variant:"filled"}).hover})),"&[data-disabled]":{cursor:"default",color:e.colors.dark[2]}}),nothingFound:{boxSizing:"border-box",color:e.colors.gray[6],paddingTop:e.fn.size({size:t,sizes:e.spacing})/2,paddingBottom:e.fn.size({size:t,sizes:e.spacing})/2,textAlign:"center"},separator:{boxSizing:"border-box",textAlign:"left",width:"100%",padding:`${e.fn.size({size:t,sizes:e.spacing})/1.5}px ${e.fn.size({size:t,sizes:e.spacing})}px`},separatorLabel:{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}));const $nt=knt;var Rnt=Object.defineProperty,cue=Object.getOwnPropertySymbols,Nnt=Object.prototype.hasOwnProperty,Dnt=Object.prototype.propertyIsEnumerable,fue=(e,t,n)=>t in e?Rnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mnt=(e,t)=>{for(var n in t||(t={}))Nnt.call(t,n)&&fue(e,n,t[n]);if(cue)for(var n of cue(t))Dnt.call(t,n)&&fue(e,n,t[n]);return e};function jY({data:e,hovered:t,classNames:n,styles:r,isItemSelected:i,uuid:s,__staticSelector:o,onItemHover:a,onItemSelect:u,itemsRefs:l,itemComponent:c,size:f,nothingFound:d,creatable:h,createLabel:p,unstyled:m}){const{classes:g}=$nt({size:f},{classNames:n,styles:r,unstyled:m,name:o}),y=[],v=[];let _=null;const w=(E,b)=>{const T=typeof i=="function"?i(E.value):!1;return F.createElement(c,Mnt({key:E.value,className:g.item,"data-disabled":E.disabled||void 0,"data-hovered":!E.disabled&&t===b||void 0,"data-selected":!E.disabled&&T||void 0,onMouseEnter:()=>a(b),id:`${s}-${b}`,role:"option",tabIndex:-1,"aria-selected":t===b,ref:A=>{l&&l.current&&(l.current[E.value]=A)},onMouseDown:E.disabled?null:A=>{A.preventDefault(),u(E)},disabled:E.disabled},E))};let x=null;if(e.forEach((E,b)=>{E.creatable?_=b:E.group?(x!==E.group&&(x=E.group,v.push(F.createElement("div",{className:g.separator,key:`__mantine-divider-${b}`},F.createElement(NN,{classNames:{label:g.separatorLabel},label:E.group})))),v.push(w(E,b))):y.push(w(E,b))}),h){const E=e[_];y.push(F.createElement("div",{key:O$(),className:g.item,"data-hovered":t===_||void 0,onMouseEnter:()=>a(_),onMouseDown:b=>{b.preventDefault(),u(E)},tabIndex:-1,ref:b=>{l&&l.current&&(l.current[E.value]=b)}},p))}return v.length>0&&y.length>0&&y.unshift(F.createElement("div",{className:g.separator,key:"empty-group-separator"},F.createElement(NN,null))),v.length>0||y.length>0?F.createElement(F.Fragment,null,v,y):F.createElement(ze,{size:f,unstyled:m,className:g.nothingFound},d)}jY.displayName="@mantine/core/SelectItems";var Lnt=Object.defineProperty,DN=Object.getOwnPropertySymbols,JTe=Object.prototype.hasOwnProperty,ZTe=Object.prototype.propertyIsEnumerable,due=(e,t,n)=>t in e?Lnt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fnt=(e,t)=>{for(var n in t||(t={}))JTe.call(t,n)&&due(e,n,t[n]);if(DN)for(var n of DN(t))ZTe.call(t,n)&&due(e,n,t[n]);return e},jnt=(e,t)=>{var n={};for(var r in e)JTe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DN)for(var r of DN(e))t.indexOf(r)<0&&ZTe.call(e,r)&&(n[r]=e[r]);return n};const BY=I.forwardRef((e,t)=>{var n=e,{label:r,value:i}=n,s=jnt(n,["label","value"]);return F.createElement("div",Fnt({ref:t},s),r||i)});BY.displayName="@mantine/core/DefaultItem";function Bnt(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function e2e(...e){return t=>e.forEach(n=>Bnt(n,t))}function a_(...e){return I.useCallback(e2e(...e),e)}const t2e=I.forwardRef((e,t)=>{const{children:n,...r}=e,i=I.Children.toArray(n),s=i.find(znt);if(s){const o=s.props.children,a=i.map(u=>u===s?I.Children.count(o)>1?I.Children.only(null):I.isValidElement(o)?o.props.children:null:u);return I.createElement(D7,$i({},r,{ref:t}),I.isValidElement(o)?I.cloneElement(o,void 0,a):null)}return I.createElement(D7,$i({},r,{ref:t}),n)});t2e.displayName="Slot";const D7=I.forwardRef((e,t)=>{const{children:n,...r}=e;return I.isValidElement(n)?I.cloneElement(n,{...Vnt(r,n.props),ref:e2e(t,n.ref)}):I.Children.count(n)>1?I.Children.only(null):null});D7.displayName="SlotClone";const Unt=({children:e})=>I.createElement(I.Fragment,null,e);function znt(e){return I.isValidElement(e)&&e.type===Unt}function Vnt(e,t){const n={...t};for(const r in t){const i=e[r],s=t[r];/^on[A-Z]/.test(r)?n[r]=(...a)=>{s==null||s(...a),i==null||i(...a)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}const Hnt=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],pI=Hnt.reduce((e,t)=>{const n=I.forwardRef((r,i)=>{const{asChild:s,...o}=r,a=s?t2e:t;return I.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),I.createElement(a,$i({},o,{ref:i}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),M7=globalThis!=null&&globalThis.document?I.useLayoutEffect:()=>{};function qnt(e,t){return I.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const mI=e=>{const{present:t,children:n}=e,r=Wnt(t),i=typeof n=="function"?n({present:r.isPresent}):I.Children.only(n),s=a_(r.ref,i.ref);return typeof n=="function"||r.isPresent?I.cloneElement(i,{ref:s}):null};mI.displayName="Presence";function Wnt(e){const[t,n]=I.useState(),r=I.useRef({}),i=I.useRef(e),s=I.useRef("none"),o=e?"mounted":"unmounted",[a,u]=qnt(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return I.useEffect(()=>{const l=jP(r.current);s.current=a==="mounted"?l:"none"},[a]),M7(()=>{const l=r.current,c=i.current;if(c!==e){const d=s.current,h=jP(l);e?u("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?u("UNMOUNT"):u(c&&d!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,u]),M7(()=>{if(t){const l=f=>{const h=jP(r.current).includes(f.animationName);f.target===t&&h&&s_.flushSync(()=>u("ANIMATION_END"))},c=f=>{f.target===t&&(s.current=jP(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",l),t.addEventListener("animationend",l),()=>{t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",l),t.removeEventListener("animationend",l)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:I.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function jP(e){return(e==null?void 0:e.animationName)||"none"}function Gnt(e,t=[]){let n=[];function r(s,o){const a=I.createContext(o),u=n.length;n=[...n,o];function l(f){const{scope:d,children:h,...p}=f,m=(d==null?void 0:d[e][u])||a,g=I.useMemo(()=>p,Object.values(p));return I.createElement(m.Provider,{value:g},h)}function c(f,d){const h=(d==null?void 0:d[e][u])||a,p=I.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${s}\``)}return l.displayName=s+"Provider",[l,c]}const i=()=>{const s=n.map(o=>I.createContext(o));return function(a){const u=(a==null?void 0:a[e])||s;return I.useMemo(()=>({[`__scope${e}`]:{...a,[e]:u}}),[a,u])}};return i.scopeName=e,[r,Ynt(i,...t)]}function Ynt(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:u,scopeName:l})=>{const f=u(s)[`__scope${l}`];return{...a,...f}},{});return I.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function cv(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)===null||r===void 0?void 0:r.call(t,...n)},[])}const Knt=I.createContext(void 0);function Xnt(e){const t=I.useContext(Knt);return e||t||"ltr"}function Qnt(e,[t,n]){return Math.min(n,Math.max(t,e))}function Gv(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function Jnt(e,t){return I.useReducer((n,r)=>{const i=t[n][r];return i??n},e)}const n2e="ScrollArea",[r2e,VAn]=Gnt(n2e),[Znt,Sc]=r2e(n2e),ert=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:s=600,...o}=e,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[_,w]=I.useState(0),[x,E]=I.useState(!1),[b,T]=I.useState(!1),A=a_(t,P=>u(P)),C=Xnt(i);return I.createElement(Znt,{scope:n,type:r,dir:C,scrollHideDelay:s,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:E,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:b,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:w},I.createElement(pI.div,$i({dir:C},o,{ref:A,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})))}),trt="ScrollAreaViewport",nrt=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,...i}=e,s=Sc(trt,n),o=I.useRef(null),a=a_(t,o,s.onViewportChange);return I.createElement(I.Fragment,null,I.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),I.createElement(pI.div,$i({"data-radix-scroll-area-viewport":""},i,{ref:a,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style}}),I.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},r)))}),bm="ScrollAreaScrollbar",rrt=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Sc(bm,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?I.createElement(irt,$i({},r,{ref:t,forceMount:n})):i.type==="scroll"?I.createElement(srt,$i({},r,{ref:t,forceMount:n})):i.type==="auto"?I.createElement(i2e,$i({},r,{ref:t,forceMount:n})):i.type==="always"?I.createElement(UY,$i({},r,{ref:t})):null}),irt=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Sc(bm,e.__scopeScrollArea),[s,o]=I.useState(!1);return I.useEffect(()=>{const a=i.scrollArea;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),I.createElement(mI,{present:n||s},I.createElement(i2e,$i({"data-state":s?"visible":"hidden"},r,{ref:t})))}),srt=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Sc(bm,e.__scopeScrollArea),s=e.orientation==="horizontal",o=s4(()=>u("SCROLL_END"),100),[a,u]=Jnt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return I.useEffect(()=>{if(a==="idle"){const l=window.setTimeout(()=>u("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[a,i.scrollHideDelay,u]),I.useEffect(()=>{const l=i.viewport,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(u("SCROLL"),o()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u,o]),I.createElement(mI,{present:n||a!=="hidden"},I.createElement(UY,$i({"data-state":a==="hidden"?"hidden":"visible"},r,{ref:t,onPointerEnter:Gv(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Gv(e.onPointerLeave,()=>u("POINTER_LEAVE"))})))}),i2e=I.forwardRef((e,t)=>{const n=Sc(bm,e.__scopeScrollArea),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=s4(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return Qw(n.viewport,u),Qw(n.content,u),I.createElement(mI,{present:r||s},I.createElement(UY,$i({"data-state":s?"visible":"hidden"},i,{ref:t})))}),UY=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Sc(bm,e.__scopeScrollArea),s=I.useRef(null),o=I.useRef(0),[a,u]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),l=u2e(a.viewport,a.content),c={...r,sizes:a,onSizesChange:u,hasThumb:l>0&&l<1,onThumbChange:d=>s.current=d,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:d=>o.current=d};function f(d,h){return hrt(d,o.current,a,h)}return n==="horizontal"?I.createElement(ort,$i({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollLeft,h=hue(d,a,i.dir);s.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollLeft=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollLeft=f(d,i.dir))}})):n==="vertical"?I.createElement(art,$i({},c,{ref:t,onThumbPositionChange:()=>{if(i.viewport&&s.current){const d=i.viewport.scrollTop,h=hue(d,a);s.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:d=>{i.viewport&&(i.viewport.scrollTop=d)},onDragScroll:d=>{i.viewport&&(i.viewport.scrollTop=f(d))}})):null}),ort=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=Sc(bm,e.__scopeScrollArea),[o,a]=I.useState(),u=I.useRef(null),l=a_(t,u,s.onScrollbarXChange);return I.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),I.createElement(o2e,$i({"data-orientation":"horizontal"},i,{ref:l,sizes:n,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":i4(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.x),onDragScroll:c=>e.onDragScroll(c.x),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollLeft+c.deltaX;e.onWheelScroll(d),c2e(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:MN(o.paddingLeft),paddingEnd:MN(o.paddingRight)}})}}))}),art=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,s=Sc(bm,e.__scopeScrollArea),[o,a]=I.useState(),u=I.useRef(null),l=a_(t,u,s.onScrollbarYChange);return I.useEffect(()=>{u.current&&a(getComputedStyle(u.current))},[u]),I.createElement(o2e,$i({"data-orientation":"vertical"},i,{ref:l,sizes:n,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":i4(n)+"px",...e.style},onThumbPointerDown:c=>e.onThumbPointerDown(c.y),onDragScroll:c=>e.onDragScroll(c.y),onWheelScroll:(c,f)=>{if(s.viewport){const d=s.viewport.scrollTop+c.deltaY;e.onWheelScroll(d),c2e(d,f)&&c.preventDefault()}},onResize:()=>{u.current&&s.viewport&&o&&r({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:MN(o.paddingTop),paddingEnd:MN(o.paddingBottom)}})}}))}),[urt,s2e]=r2e(bm),o2e=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:s,onThumbPointerUp:o,onThumbPointerDown:a,onThumbPositionChange:u,onDragScroll:l,onWheelScroll:c,onResize:f,...d}=e,h=Sc(bm,n),[p,m]=I.useState(null),g=a_(t,A=>m(A)),y=I.useRef(null),v=I.useRef(""),_=h.viewport,w=r.content-r.viewport,x=cv(c),E=cv(u),b=s4(f,10);function T(A){if(y.current){const C=A.clientX-y.current.left,P=A.clientY-y.current.top;l({x:C,y:P})}}return I.useEffect(()=>{const A=C=>{const P=C.target;(p==null?void 0:p.contains(P))&&x(C,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[_,p,w,x]),I.useEffect(E,[r,E]),Qw(p,b),Qw(h.content,b),I.createElement(urt,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:cv(s),onThumbPointerUp:cv(o),onThumbPositionChange:E,onThumbPointerDown:cv(a)},I.createElement(pI.div,$i({},d,{ref:g,style:{position:"absolute",...d.style},onPointerDown:Gv(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),y.current=p.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:Gv(e.onPointerMove,T),onPointerUp:Gv(e.onPointerUp,A=>{A.target.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=v.current,y.current=null})})))}),L7="ScrollAreaThumb",lrt=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=s2e(L7,e.__scopeScrollArea);return I.createElement(mI,{present:n||i.hasThumb},I.createElement(crt,$i({ref:t},r)))}),crt=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,s=Sc(L7,n),o=s2e(L7,n),{onThumbPositionChange:a}=o,u=a_(t,f=>o.onThumbChange(f)),l=I.useRef(),c=s4(()=>{l.current&&(l.current(),l.current=void 0)},100);return I.useEffect(()=>{const f=s.viewport;if(f){const d=()=>{if(c(),!l.current){const h=prt(f,a);l.current=h,a()}};return a(),f.addEventListener("scroll",d),()=>f.removeEventListener("scroll",d)}},[s.viewport,c,a]),I.createElement(pI.div,$i({"data-state":o.hasThumb?"visible":"hidden"},i,{ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Gv(e.onPointerDownCapture,f=>{const h=f.target.getBoundingClientRect(),p=f.clientX-h.left,m=f.clientY-h.top;o.onThumbPointerDown({x:p,y:m})}),onPointerUp:Gv(e.onPointerUp,o.onThumbPointerUp)}))}),a2e="ScrollAreaCorner",frt=I.forwardRef((e,t)=>{const n=Sc(a2e,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?I.createElement(drt,$i({},e,{ref:t})):null}),drt=I.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Sc(a2e,n),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return Qw(i.scrollbarX,()=>{var c;const f=((c=i.scrollbarX)===null||c===void 0?void 0:c.offsetHeight)||0;i.onCornerHeightChange(f),u(f)}),Qw(i.scrollbarY,()=>{var c;const f=((c=i.scrollbarY)===null||c===void 0?void 0:c.offsetWidth)||0;i.onCornerWidthChange(f),o(f)}),l?I.createElement(pI.div,$i({},r,{ref:t,style:{width:s,height:a,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}})):null});function MN(e){return e?parseInt(e,10):0}function u2e(e,t){const n=e/t;return isNaN(n)?0:n}function i4(e){const t=u2e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function hrt(e,t,n,r="ltr"){const i=i4(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return l2e([u,l],f)(e)}function hue(e,t,n="ltr"){const r=i4(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Qnt(e,u);return l2e([0,o],[0,a])(l)}function l2e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function c2e(e,t){return e>0&&e<t}const prt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function s4(e,t){const n=cv(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Qw(e,t){const n=cv(t);M7(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const mrt=ert,grt=nrt,pue=rrt,mue=lrt,yrt=frt;var vrt=yt((e,{scrollbarSize:t,offsetScrollbars:n,scrollbarHovered:r,hidden:i},s)=>({root:{overflow:"hidden"},viewport:{width:"100%",height:"100%",paddingRight:n?t:void 0,paddingBottom:n?t:void 0},scrollbar:{display:i?"none":"flex",userSelect:"none",touchAction:"none",boxSizing:"border-box",padding:t/5,transition:"background-color 150ms ease, opacity 150ms ease","&:hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],[`& .${s("thumb")}`]:{backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.5):e.fn.rgba(e.black,.5)}},'&[data-orientation="vertical"]':{width:t},'&[data-orientation="horizontal"]':{flexDirection:"column",height:t},'&[data-state="hidden"]':{display:"none",opacity:0}},thumb:{ref:s("thumb"),flex:1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.white,.4):e.fn.rgba(e.black,.4),borderRadius:t,position:"relative",transition:"background-color 150ms ease",display:i?"none":void 0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%"}},corner:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],transition:"opacity 150ms ease",opacity:r?1:0,display:i?"none":void 0}}));const _rt=vrt;var brt=Object.defineProperty,wrt=Object.defineProperties,Ert=Object.getOwnPropertyDescriptors,LN=Object.getOwnPropertySymbols,f2e=Object.prototype.hasOwnProperty,d2e=Object.prototype.propertyIsEnumerable,gue=(e,t,n)=>t in e?brt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h2e=(e,t)=>{for(var n in t||(t={}))f2e.call(t,n)&&gue(e,n,t[n]);if(LN)for(var n of LN(t))d2e.call(t,n)&&gue(e,n,t[n]);return e},Srt=(e,t)=>wrt(e,Ert(t)),p2e=(e,t)=>{var n={};for(var r in e)f2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LN)for(var r of LN(e))t.indexOf(r)<0&&d2e.call(e,r)&&(n[r]=e[r]);return n};const m2e={scrollbarSize:12,scrollHideDelay:1e3,type:"hover",offsetScrollbars:!1},o4=I.forwardRef((e,t)=>{const n=Et("ScrollArea",m2e,e),{children:r,className:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p}=n,m=p2e(n,["children","className","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled"]),[g,y]=I.useState(!1),v=As(),{classes:_,cx:w}=_rt({scrollbarSize:a,offsetScrollbars:f,scrollbarHovered:g,hidden:l==="never"},{name:"ScrollArea",classNames:s,styles:o,unstyled:p});return F.createElement(mrt,{type:l==="never"?"always":l,scrollHideDelay:u,dir:c||v.dir,ref:t,asChild:!0},F.createElement(dt,h2e({className:w(_.root,i)},m),F.createElement(grt,{className:_.viewport,ref:d,onScroll:typeof h=="function"?({currentTarget:x})=>h({x:x.scrollLeft,y:x.scrollTop}):void 0},r),F.createElement(pue,{orientation:"horizontal",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},F.createElement(mue,{className:_.thumb})),F.createElement(pue,{orientation:"vertical",className:_.scrollbar,forceMount:!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},F.createElement(mue,{className:_.thumb})),F.createElement(yrt,{className:_.corner})))}),g2e=I.forwardRef((e,t)=>{const n=Et("ScrollAreaAutosize",m2e,e),{maxHeight:r,children:i,classNames:s,styles:o,scrollbarSize:a,scrollHideDelay:u,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p,sx:m}=n,g=p2e(n,["maxHeight","children","classNames","styles","scrollbarSize","scrollHideDelay","type","dir","offsetScrollbars","viewportRef","onScrollPositionChange","unstyled","sx"]);return F.createElement(dt,Srt(h2e({},g),{ref:t,sx:[{display:"flex",maxHeight:r},...m0(m)]}),F.createElement(dt,{sx:{display:"flex",flexDirection:"column",flex:1}},F.createElement(o4,{classNames:s,styles:o,scrollHideDelay:u,scrollbarSize:a,type:l,dir:c,offsetScrollbars:f,viewportRef:d,onScrollPositionChange:h,unstyled:p},i)))});g2e.displayName="@mantine/core/ScrollAreaAutosize";o4.displayName="@mantine/core/ScrollArea";o4.Autosize=g2e;const zY=o4;var xrt=Object.defineProperty,Trt=Object.defineProperties,Crt=Object.getOwnPropertyDescriptors,FN=Object.getOwnPropertySymbols,y2e=Object.prototype.hasOwnProperty,v2e=Object.prototype.propertyIsEnumerable,yue=(e,t,n)=>t in e?xrt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vue=(e,t)=>{for(var n in t||(t={}))y2e.call(t,n)&&yue(e,n,t[n]);if(FN)for(var n of FN(t))v2e.call(t,n)&&yue(e,n,t[n]);return e},Art=(e,t)=>Trt(e,Crt(t)),Irt=(e,t)=>{var n={};for(var r in e)y2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FN)for(var r of FN(e))t.indexOf(r)<0&&v2e.call(e,r)&&(n[r]=e[r]);return n};const a4=I.forwardRef((e,t)=>{var n=e,{style:r}=n,i=Irt(n,["style"]);return F.createElement(zY,Art(vue({},i),{style:vue({width:"100%"},r),viewportRef:t}),i.children)});a4.displayName="@mantine/core/SelectScrollArea";var Ort=yt(()=>({dropdown:{},itemsWrapper:{padding:4,display:"flex",width:"100%",boxSizing:"border-box"}}));const Prt=Ort;function Gp(e){return e.split("-")[0]}function gI(e){return e.split("-")[1]}function u_(e){return["top","bottom"].includes(Gp(e))?"x":"y"}function VY(e){return e==="y"?"height":"width"}function _ue(e,t,n){let{reference:r,floating:i}=e;const s=r.x+r.width/2-i.width/2,o=r.y+r.height/2-i.height/2,a=u_(t),u=VY(a),l=r[u]/2-i[u]/2,c=a==="x";let f;switch(Gp(t)){case"top":f={x:s,y:r.y-i.height};break;case"bottom":f={x:s,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:o};break;case"left":f={x:r.x-i.width,y:o};break;default:f={x:r.x,y:r.y}}switch(gI(t)){case"start":f[a]-=l*(n&&c?-1:1);break;case"end":f[a]+=l*(n&&c?-1:1)}return f}const krt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=_ue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:_,data:w,reset:x}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=_??f,h={...h,[g]:{...h[g],...w}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:f}=_ue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};function HY(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function UC(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function qY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=t,p=HY(h),m=a[d?f==="floating"?"reference":"floating":f],g=UC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(m)))==null||n?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=UC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f==="floating"?{...o.floating,x:r,y:i}:o.reference,offsetParent:await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),strategy:u}):o[f]);return{top:g.top-y.top+p.top,bottom:y.bottom-g.bottom+p.bottom,left:g.left-y.left+p.left,right:y.right-g.right+p.right}}const _2e=Math.min,sg=Math.max;function F7(e,t,n){return sg(e,_2e(t,n))}const bue=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e??{},{x:i,y:s,placement:o,rects:a,platform:u}=t;if(n==null)return{};const l=HY(r),c={x:i,y:s},f=u_(o),d=gI(o),h=VY(f),p=await u.getDimensions(n),m=f==="y"?"top":"left",g=f==="y"?"bottom":"right",y=a.reference[h]+a.reference[f]-c[f]-a.floating[h],v=c[f]-a.reference[f],_=await(u.getOffsetParent==null?void 0:u.getOffsetParent(n));let w=_?f==="y"?_.clientHeight||0:_.clientWidth||0:0;w===0&&(w=a.floating[h]);const x=y/2-v/2,E=l[m],b=w-p[h]-l[g],T=w/2-p[h]/2+x,A=F7(E,T,b),C=(d==="start"?l[m]:l[g])>0&&T!==A&&a.reference[h]<=a.floating[h];return{[f]:c[f]-(C?T<E?E-T:b-T:0),data:{[f]:A,centerOffset:T-A}}}}),$rt={left:"right",right:"left",bottom:"top",top:"bottom"};function jN(e){return e.replace(/left|right|bottom|top/g,t=>$rt[t])}function Rrt(e,t,n){n===void 0&&(n=!1);const r=gI(e),i=u_(e),s=VY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=jN(o)),{main:o,cross:jN(o)}}const Nrt={start:"end",end:"start"};function wue(e){return e.replace(/start|end/g,t=>Nrt[t])}const Drt=["top","right","bottom","left"];Drt.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const b2e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:s,initialPlacement:o,platform:a,elements:u}=t,{mainAxis:l=!0,crossAxis:c=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:h=!0,...p}=e,m=Gp(r),g=f||(m===o||!h?[jN(o)]:function(T){const A=jN(T);return[wue(T),A,wue(A)]}(o)),y=[o,...g],v=await qY(t,p),_=[];let w=((n=i.flip)==null?void 0:n.overflows)||[];if(l&&_.push(v[m]),c){const{main:T,cross:A}=Rrt(r,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));_.push(v[T],v[A])}if(w=[...w,{placement:r,overflows:_}],!_.every(T=>T<=0)){var x,E;const T=((x=(E=i.flip)==null?void 0:E.index)!=null?x:0)+1,A=y[T];if(A)return{data:{index:T,overflows:w},reset:{placement:A}};let C="bottom";switch(d){case"bestFit":{var b;const P=(b=w.map(N=>[N,N.overflows.filter($=>$>0).reduce(($,M)=>$+M,0)]).sort((N,$)=>N[1]-$[1])[0])==null?void 0:b[0].placement;P&&(C=P);break}case"initialPlacement":C=o}if(r!==C)return{reset:{placement:C}}}return{}}}},w2e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(s,o){const{placement:a,platform:u,elements:l}=s,c=await(u.isRTL==null?void 0:u.isRTL(l.floating)),f=Gp(a),d=gI(a),h=u_(a)==="x",p=["left","top"].includes(f)?-1:1,m=c&&h?-1:1,g=typeof o=="function"?o(s):o;let{mainAxis:y,crossAxis:v,alignmentAxis:_}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return d&&typeof _=="number"&&(v=d==="end"?-1*_:_),h?{x:v*m,y:y*p}:{x:y*p,y:v*m}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function E2e(e){return e==="x"?"y":"x"}const WY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=e,l={x:n,y:r},c=await qY(t,u),f=u_(Gp(i)),d=E2e(f);let h=l[f],p=l[d];if(s){const g=f==="y"?"bottom":"right";h=F7(h+c[f==="y"?"top":"left"],h,h-c[g])}if(o){const g=d==="y"?"bottom":"right";p=F7(p+c[d==="y"?"top":"left"],p,p-c[g])}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Mrt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=e,c={x:n,y:r},f=u_(i),d=E2e(f);let h=c[f],p=c[d];const m=typeof a=="function"?a(t):a,g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=f==="y"?"height":"width",E=s.reference[f]-s.floating[x]+g.mainAxis,b=s.reference[f]+s.reference[x]-g.mainAxis;h<E?h=E:h>b&&(h=b)}if(l){var y,v,_,w;const x=f==="y"?"width":"height",E=["top","left"].includes(Gp(i)),b=s.reference[d]-s.floating[x]+(E&&(y=(v=o.offset)==null?void 0:v[d])!=null?y:0)+(E?0:g.crossAxis),T=s.reference[d]+s.reference[x]+(E?0:(_=(w=o.offset)==null?void 0:w[d])!=null?_:0)-(E?g.crossAxis:0);p<b?p=b:p>T&&(p=T)}return{[f]:h,[d]:p}}}},Lrt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=e,u=await qY(t,a),l=Gp(n),c=gI(n);let f,d;l==="top"||l==="bottom"?(f=l,d=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(d=l,f=c==="end"?"top":"bottom");const h=sg(u.left,0),p=sg(u.right,0),m=sg(u.top,0),g=sg(u.bottom,0),y={availableHeight:r.floating.height-(["left","right"].includes(n)?2*(m!==0||g!==0?m+g:sg(u.top,u.bottom)):u[f]),availableWidth:r.floating.width-(["top","bottom"].includes(n)?2*(h!==0||p!==0?h+p:sg(u.left,u.right)):u[d])};await o({...t,...y});const v=await i.getDimensions(s.floating);return r.floating.width!==v.width||r.floating.height!==v.height?{reset:{rects:!0}}:{}}}},S2e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){var n;const{placement:r,elements:i,rects:s,platform:o,strategy:a}=t,{padding:u=2,x:l,y:c}=e,f=UC(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:s.reference,offsetParent:await(o.getOffsetParent==null?void 0:o.getOffsetParent(i.floating)),strategy:a}):s.reference),d=(n=await(o.getClientRects==null?void 0:o.getClientRects(i.reference)))!=null?n:[],h=HY(u),p=await o.getElementRects({reference:{getBoundingClientRect:function(){var m;if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return(m=d.find(g=>l>g.left-h.left&&l<g.right+h.right&&c>g.top-h.top&&c<g.bottom+h.bottom))!=null?m:f;if(d.length>=2){if(u_(r)==="x"){const E=d[0],b=d[d.length-1],T=Gp(r)==="top",A=E.top,C=b.bottom,P=T?E.left:b.left,N=T?E.right:b.right;return{top:A,bottom:C,left:P,right:N,width:N-P,height:C-A,x:P,y:A}}const g=Gp(r)==="left",y=sg(...d.map(E=>E.right)),v=_2e(...d.map(E=>E.left)),_=d.filter(E=>g?E.left===v:E.right===y),w=_[0].top,x=_[_.length-1].bottom;return{top:w,bottom:x,left:v,right:y,width:y-v,height:x-w,x:v,y:w}}return f}},floating:i.floating,strategy:a});return s.reference.x!==p.reference.x||s.reference.y!==p.reference.y||s.reference.width!==p.reference.width||s.reference.height!==p.reference.height?{reset:{rects:p}}:{}}}};function x2e(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function wm(e){if(e==null)return window;if(!x2e(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function y0(e){return wm(e).getComputedStyle(e)}function v0(e){return x2e(e)?"":e?(e.nodeName||"").toLowerCase():""}function T2e(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function Yp(e){return e instanceof wm(e).HTMLElement}function Pp(e){return e instanceof wm(e).Element}function Eue(e){return typeof ShadowRoot>"u"?!1:e instanceof wm(e).ShadowRoot||e instanceof ShadowRoot}function u4(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=y0(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(i)}function Frt(e){return["table","td","th"].includes(v0(e))}function j7(e){const t=/firefox/i.test(T2e()),n=y0(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const s=n.contain;return s!=null&&s.includes(i)})}function C2e(){return!/^((?!chrome|android).)*safari/i.test(T2e())}function GY(e){return["html","body","#document"].includes(v0(e))}const Sue=Math.min,O2=Math.max,BN=Math.round;function kp(e,t,n){var r,i,s,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect();let u=1,l=1;t&&Yp(e)&&(u=e.offsetWidth>0&&BN(a.width)/e.offsetWidth||1,l=e.offsetHeight>0&&BN(a.height)/e.offsetHeight||1);const c=Pp(e)?wm(e):window,f=!C2e()&&n,d=(a.left+(f&&(r=(i=c.visualViewport)==null?void 0:i.offsetLeft)!=null?r:0))/u,h=(a.top+(f&&(s=(o=c.visualViewport)==null?void 0:o.offsetTop)!=null?s:0))/l,p=a.width/u,m=a.height/l;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function Kg(e){return(t=e,(t instanceof wm(t).Node?e.ownerDocument:e.document)||window.document).documentElement;var t}function l4(e){return Pp(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function A2e(e){return kp(Kg(e)).left+l4(e).scrollLeft}function jrt(e,t,n){const r=Yp(t),i=Kg(t),s=kp(e,r&&function(u){const l=kp(u);return BN(l.width)!==u.offsetWidth||BN(l.height)!==u.offsetHeight}(t),n==="fixed");let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(r||!r&&n!=="fixed")if((v0(t)!=="body"||u4(i))&&(o=l4(t)),Yp(t)){const u=kp(t,!0);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&(a.x=A2e(i));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}function UN(e){if(v0(e)==="html")return e;const t=e.assignedSlot||e.parentNode||(Eue(e)?e.host:null)||Kg(e);return Eue(t)?t.host:t}function xue(e){return Yp(e)&&y0(e).position!=="fixed"?e.offsetParent:null}function Tue(e){const t=wm(e);let n=xue(e);for(;n&&Frt(n)&&y0(n).position==="static";)n=xue(n);return n&&(v0(n)==="html"||v0(n)==="body"&&y0(n).position==="static"&&!j7(n))?t:n||function(r){let i=UN(r);for(;Yp(i)&&!GY(i);){if(j7(i))return i;i=UN(i)}return null}(e)||t}function Cue(e){if(Yp(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=kp(e);return{width:t.width,height:t.height}}function I2e(e){const t=UN(e);return GY(t)?e.ownerDocument.body:Yp(t)&&u4(t)?t:I2e(t)}function $p(e,t){var n;t===void 0&&(t=[]);const r=I2e(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),s=wm(r),o=i?[s].concat(s.visualViewport||[],u4(r)?r:[]):r,a=t.concat(o);return i?a:a.concat($p(o))}function Aue(e,t,n){return t==="viewport"?UC(function(r,i){const s=wm(r),o=Kg(r),a=s.visualViewport;let u=o.clientWidth,l=o.clientHeight,c=0,f=0;if(a){u=a.width,l=a.height;const d=C2e();(d||!d&&i==="fixed")&&(c=a.offsetLeft,f=a.offsetTop)}return{width:u,height:l,x:c,y:f}}(e,n)):Pp(t)?function(r,i){const s=kp(r,!1,i==="fixed"),o=s.top+r.clientTop,a=s.left+r.clientLeft;return{top:o,left:a,x:a,y:o,right:a+r.clientWidth,bottom:o+r.clientHeight,width:r.clientWidth,height:r.clientHeight}}(t,n):UC(function(r){var i;const s=Kg(r),o=l4(r),a=(i=r.ownerDocument)==null?void 0:i.body,u=O2(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=O2(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0);let c=-o.scrollLeft+A2e(r);const f=-o.scrollTop;return y0(a||s).direction==="rtl"&&(c+=O2(s.clientWidth,a?a.clientWidth:0)-u),{width:u,height:l,x:c,y:f}}(Kg(e)))}const Brt={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=n==="clippingAncestors"?function(l){let c=$p(l).filter(h=>Pp(h)&&v0(h)!=="body"),f=l,d=null;for(;Pp(f)&&!GY(f);){const h=y0(f);h.position==="static"&&d&&["absolute","fixed"].includes(d.position)&&!j7(f)?c=c.filter(p=>p!==f):d=h,f=UN(f)}return c}(t):[].concat(n),o=[...s,r],a=o[0],u=o.reduce((l,c)=>{const f=Aue(t,c,i);return l.top=O2(f.top,l.top),l.right=Sue(f.right,l.right),l.bottom=Sue(f.bottom,l.bottom),l.left=O2(f.left,l.left),l},Aue(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Yp(n),s=Kg(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((i||!i&&r!=="fixed")&&((v0(n)!=="body"||u4(s))&&(o=l4(n)),Yp(n))){const u=kp(n,!0);a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{...t,x:t.x-o.scrollLeft+a.x,y:t.y-o.scrollTop+a.y}},isElement:Pp,getDimensions:Cue,getOffsetParent:Tue,getDocumentElement:Kg,getElementRects:e=>{let{reference:t,floating:n,strategy:r}=e;return{reference:jrt(t,Tue(n),r),floating:{...Cue(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>y0(e).direction==="rtl"};function Urt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=r,u=i&&!a,l=u||s?[...Pp(e)?$p(e):e.contextElement?$p(e.contextElement):[],...$p(t)]:[];l.forEach(h=>{u&&h.addEventListener("scroll",n,{passive:!0}),s&&h.addEventListener("resize",n)});let c,f=null;if(o){let h=!0;f=new ResizeObserver(()=>{h||n(),h=!1}),Pp(e)&&!a&&f.observe(e),Pp(e)||!e.contextElement||a||f.observe(e.contextElement),f.observe(t)}let d=a?kp(e):null;return a&&function h(){const p=kp(e);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(h)}(),n(),()=>{var h;l.forEach(p=>{u&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(h=f)==null||h.disconnect(),f=null,a&&cancelAnimationFrame(c)}}const zrt=(e,t,n)=>krt(e,t,{platform:Brt,...n});var B7=typeof document<"u"?I.useLayoutEffect:I.useEffect;function zN(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!zN(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!zN(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Vrt(e){const t=I.useRef(e);return B7(()=>{t.current=e}),t}function Hrt(e){let{middleware:t=[],placement:n="bottom",strategy:r="absolute",whileElementsMounted:i}=e===void 0?{}:e;const[s,o]=I.useState({x:null,y:null,strategy:r,placement:n,middlewareData:{}}),[a,u]=I.useState(t);zN(a,t)||u(t);const l=I.useRef(null),c=I.useRef(null),f=I.useRef(null),d=I.useRef(s),h=Vrt(i),p=I.useCallback(()=>{!l.current||!c.current||zrt(l.current,c.current,{middleware:a,placement:n,strategy:r}).then(w=>{m.current&&!zN(d.current,w)&&(d.current=w,s_.flushSync(()=>{o(w)}))})},[a,n,r]);B7(()=>{m.current&&p()},[p]);const m=I.useRef(!1);B7(()=>(m.current=!0,()=>{m.current=!1}),[]);const g=I.useCallback(()=>{if(typeof f.current=="function"&&(f.current(),f.current=null),l.current&&c.current)if(h.current){const w=h.current(l.current,c.current,p);f.current=w}else p()},[p,h]),y=I.useCallback(w=>{l.current=w,g()},[g]),v=I.useCallback(w=>{c.current=w,g()},[g]),_=I.useMemo(()=>({reference:l,floating:c}),[]);return I.useMemo(()=>({...s,update:p,refs:_,reference:y,floating:v}),[s,p,_,y,v])}const O2e=e=>{const{element:t,padding:n}=e;function r(i){return Object.prototype.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){return r(t)?t.current!=null?bue({element:t.current,padding:n}).fn(i):{}:t?bue({element:t,padding:n}).fn(i):{}}}};var Jw=typeof document<"u"?I.useLayoutEffect:I.useEffect;function qrt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}let Zj=!1,Wrt=0;const Iue=()=>"floating-ui-"+Wrt++;function Grt(){const[e,t]=I.useState(()=>Zj?Iue():void 0);return Jw(()=>{e==null&&t(Iue())},[]),I.useEffect(()=>{Zj||(Zj=!0)},[]),e}const Oue=h1.useId,Pue=Oue??Grt,Yrt=I.createContext(null),Krt=I.createContext(null),P2e=()=>{var e,t;return(e=(t=I.useContext(Yrt))==null?void 0:t.id)!=null?e:null},YY=()=>I.useContext(Krt);function mg(e){var t;return(t=e==null?void 0:e.ownerDocument)!=null?t:document}function k2e(e){var t;return(t=mg(e).defaultView)!=null?t:window}function Av(e){return e?e instanceof k2e(e).Element:!1}function Xrt(e){return e?e instanceof k2e(e).HTMLElement:!1}const kue=h1.useInsertionEffect;function Qrt(e){const t=I.useRef(()=>{});return kue?kue(()=>{t.current=e}):t.current=e,I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function KY(e){let{open:t=!1,onOpenChange:n,whileElementsMounted:r,placement:i,middleware:s,strategy:o,nodeId:a}=e===void 0?{}:e;const[u,l]=I.useState(null),c=YY(),f=I.useRef(null),d=I.useRef({}),h=I.useState(()=>qrt())[0],p=Hrt({placement:i,middleware:s,strategy:o,whileElementsMounted:r}),m=Qrt(n),g=I.useMemo(()=>({...p.refs,domReference:f}),[p.refs]),y=I.useMemo(()=>({...p,refs:g,dataRef:d,nodeId:a,events:h,open:t,onOpenChange:m,_:{domReference:u}}),[p,a,h,t,m,g,u]);Jw(()=>{const w=c==null?void 0:c.nodesRef.current.find(x=>x.id===a);w&&(w.context=y)});const{reference:v}=p,_=I.useCallback(w=>{(Av(w)||w===null)&&(y.refs.domReference.current=w,l(w)),v(w)},[v,y.refs]);return I.useMemo(()=>({...p,context:y,refs:g,reference:_}),[p,g,y,_])}function eB(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(i=>i?i[n]:null).concat(e).reduce((i,s)=>(s&&Object.entries(s).forEach(o=>{let[a,u]=o;if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof u=="function"){var l;(l=r.get(a))==null||l.push(u),i[a]=function(){for(var c,f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];(c=r.get(a))==null||c.forEach(p=>p(...d))}}}else i[a]=u}),i),{})}}const Jrt=function(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>eB(s,e,"reference"),t),r=I.useCallback(s=>eB(s,e,"floating"),t),i=I.useCallback(s=>eB(s,e,"item"),t);return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])};function tB(e,t){var n;let r=(n=e.filter(o=>{var a;return o.parentId===t&&((a=o.context)==null?void 0:a.open)}))!=null?n:[],i=r;for(;i.length;){var s;i=(s=e.filter(o=>{var a;return(a=i)==null?void 0:a.some(u=>{var l;return o.parentId===u.id&&((l=o.context)==null?void 0:l.open)})}))!=null?s:[],r=r.concat(i)}return r}function Zrt(e){return"composedPath"in e?e.composedPath()[0]:e.target}function $ue(e){const t=I.useRef(e);return Jw(()=>{t.current=e}),t}function eit(e){const t=I.useRef();return Jw(()=>{t.current=e},[e]),t.current}function P$(e,t,n){return n&&n!=="mouse"?0:typeof e=="number"?e:e==null?void 0:e[t]}const tit=function(e,t){let{enabled:n=!0,delay:r=0,handleClose:i=null,mouseOnly:s=!1,restMs:o=0,move:a=!0}=t===void 0?{}:t;const{open:u,onOpenChange:l,dataRef:c,events:f,refs:d,_:h}=e,p=YY(),m=P2e(),g=$ue(i),y=$ue(r),v=eit(u),_=I.useRef(),w=I.useRef(),x=I.useRef(),E=I.useRef(),b=I.useRef(!0),T=I.useRef(!1),A=I.useCallback(()=>{var $;const M=($=c.current.openEvent)==null?void 0:$.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[c]);I.useEffect(()=>{if(!n)return;function $(){clearTimeout(w.current),clearTimeout(E.current),b.current=!0}return f.on("dismiss",$),()=>{f.off("dismiss",$)}},[n,f,d]),I.useEffect(()=>{if(!n||!g.current)return;function $(){A()&&l(!1)}const M=mg(d.floating.current).documentElement;return M.addEventListener("mouseleave",$),()=>{M.removeEventListener("mouseleave",$)}},[d,l,n,g,c,A]);const C=I.useCallback(function($){$===void 0&&($=!0);const M=P$(y.current,"close",_.current);M&&!x.current?(clearTimeout(w.current),w.current=setTimeout(()=>l(!1),M)):$&&(clearTimeout(w.current),l(!1))},[y,l]),P=I.useCallback(()=>{x.current&&(mg(d.floating.current).removeEventListener("pointermove",x.current),x.current=void 0)},[d]),N=I.useCallback(()=>{mg(d.floating.current).body.style.pointerEvents="",T.current=!1},[d]);return I.useEffect(()=>{if(!n)return;function $(){return c.current.openEvent?["click","mousedown"].includes(c.current.openEvent.type):!1}function M(Y){if(clearTimeout(w.current),b.current=!1,s&&_.current!=="mouse"||o>0&&P$(y.current,"open")===0)return;c.current.openEvent=Y;const q=P$(y.current,"open",_.current);q?w.current=setTimeout(()=>{l(!0)},q):l(!0)}function B(Y){if($())return;const q=mg(d.floating.current);if(clearTimeout(E.current),g.current){clearTimeout(w.current),x.current&&q.removeEventListener("pointermove",x.current),x.current=g.current({...e,tree:p,x:Y.clientX,y:Y.clientY,onClose(){N(),P(),C()}}),q.addEventListener("pointermove",x.current);return}C()}function z(Y){$()||g.current==null||g.current({...e,tree:p,x:Y.clientX,y:Y.clientY,leave:!0,onClose(){N(),P(),C()}})(Y)}const W=d.floating.current,U=d.domReference.current;if(Av(U))return u&&U.addEventListener("mouseleave",z),W==null||W.addEventListener("mouseleave",z),a&&U.addEventListener("mousemove",M,{once:!0}),U.addEventListener("mouseenter",M),U.addEventListener("mouseleave",B),()=>{u&&U.removeEventListener("mouseleave",z),W==null||W.removeEventListener("mouseleave",z),a&&U.removeEventListener("mousemove",M),U.removeEventListener("mouseenter",M),U.removeEventListener("mouseleave",B)}},[h.domReference,n,e,s,o,a,C,P,N,l,u,p,d,y,g,c]),Jw(()=>{if(n&&u&&g.current&&g.current.__options.blockPointerEvents&&A()){mg(d.floating.current).body.style.pointerEvents="none",T.current=!0;const B=d.domReference.current,z=d.floating.current;if(Av(B)&&z){var $,M;const W=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||(M=$.context)==null?void 0:M.refs.floating.current;return W&&(W.style.pointerEvents=""),B.style.pointerEvents="auto",z.style.pointerEvents="auto",()=>{B.style.pointerEvents="",z.style.pointerEvents=""}}}},[n,u,m,d,p,g,c,A]),Jw(()=>{v&&!u&&(_.current=void 0,P(),N())}),I.useEffect(()=>()=>{P(),clearTimeout(w.current),clearTimeout(E.current),T.current&&N()},[n,P,N]),I.useMemo(()=>{if(!n)return{};function $(M){_.current=M.pointerType}return{reference:{onPointerDown:$,onPointerEnter:$,onMouseMove(){u||o===0||(clearTimeout(E.current),E.current=setTimeout(()=>{b.current||l(!0)},o))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(){C(!1)}}}},[n,o,u,l,C])},$2e=I.createContext({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),R2e=()=>I.useContext($2e),nit=e=>{let{children:t,delay:n}=e;const[r,i]=I.useState({delay:n,initialDelay:n,currentId:null}),s=I.useCallback(o=>{i(a=>({...a,currentId:o}))},[]);return I.createElement($2e.Provider,{value:I.useMemo(()=>({...r,setState:i,setCurrentId:s}),[r,i,s])},t)},rit=(e,t)=>{let{open:n,onOpenChange:r}=e,{id:i}=t;const{currentId:s,initialDelay:o,setState:a}=R2e();I.useEffect(()=>{s&&(a(u=>({...u,delay:{open:1,close:P$(o,"close")}})),s!==i&&r(!1))},[i,r,a,s,o]),I.useEffect(()=>{!n&&s===i&&(r(!1),a(u=>({...u,delay:o,currentId:null})))},[n,a,s,i,r,o])},iit=function(e,t){let{open:n}=e,{enabled:r=!0,role:i="dialog"}=t===void 0?{}:t;const s=Pue(),o=Pue();return I.useMemo(()=>{const a={id:s,role:i};return r?i==="tooltip"?{reference:{"aria-describedby":n?s:void 0},floating:a}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":i==="alertdialog"?"dialog":i,"aria-controls":n?s:void 0,...i==="listbox"&&{role:"combobox"},...i==="menu"&&{id:o}},floating:{...a,...i==="menu"&&{"aria-labelledby":o}}}:{}},[r,i,n,s,o])};function nB(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}const sit={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},oit={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ait=function(e,t){let{open:n,onOpenChange:r,refs:i,events:s,nodeId:o}=e,{enabled:a=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:c="pointerdown",referencePress:f=!1,referencePressEvent:d="pointerdown",ancestorScroll:h=!1,bubbles:p=!0}=t===void 0?{}:t;const m=YY(),g=P2e()!=null,y=I.useRef(!1);return I.useEffect(()=>{if(!n||!a)return;function v(b){if(b.key==="Escape"){if(!p&&m&&tB(m.nodesRef.current,o).length>0)return;s.emit("dismiss",{preventScroll:!1}),r(!1)}}function _(b){const T=y.current;if(y.current=!1,T)return;const A=Zrt(b);if(Av(A)&&i.floating.current){var C;const N=(C=i.floating.current.ownerDocument.defaultView)!=null?C:window,$=A.scrollWidth>A.clientWidth,M=A.scrollHeight>A.clientHeight;let B=M&&b.offsetX>A.clientWidth;if(M&&N.getComputedStyle(A).direction==="rtl"&&(B=b.offsetX<=A.offsetWidth-A.clientWidth),B||$&&b.offsetY>A.clientHeight)return}const P=m&&tB(m.nodesRef.current,o).some(N=>{var $;return nB(b,($=N.context)==null?void 0:$.refs.floating.current)});nB(b,i.floating.current)||nB(b,i.domReference.current)||P||!p&&m&&tB(m.nodesRef.current,o).length>0||(s.emit("dismiss",g?{preventScroll:!0}:!1),r(!1))}function w(){r(!1)}const x=mg(i.floating.current);u&&x.addEventListener("keydown",v),l&&x.addEventListener(c,_);let E=[];return h&&(Av(i.domReference.current)&&(E=$p(i.domReference.current)),Av(i.floating.current)&&(E=E.concat($p(i.floating.current))),!Av(i.reference.current)&&i.reference.current&&i.reference.current.contextElement&&(E=E.concat($p(i.reference.current.contextElement)))),E=E.filter(b=>{var T;return b!==((T=x.defaultView)==null?void 0:T.visualViewport)}),E.forEach(b=>{b.addEventListener("scroll",w,{passive:!0})}),()=>{u&&x.removeEventListener("keydown",v),l&&x.removeEventListener(c,_),E.forEach(b=>{b.removeEventListener("scroll",w)})}},[u,l,c,s,m,o,n,r,h,a,p,i,g]),I.useEffect(()=>{y.current=!1},[l,c]),I.useMemo(()=>a?{reference:{[sit[d]]:()=>{f&&(s.emit("dismiss"),r(!1))}},floating:{[oit[c]]:()=>{y.current=!0}}}:{},[a,s,f,c,d,r])},uit=function(e,t){let{open:n,onOpenChange:r,dataRef:i,refs:s,events:o}=e,{enabled:a=!0,keyboardOnly:u=!0}=t===void 0?{}:t;const l=I.useRef(""),c=I.useRef(!1),f=I.useRef();return I.useEffect(()=>{var d;if(!a)return;const p=(d=mg(s.floating.current).defaultView)!=null?d:window;function m(){!n&&Xrt(s.domReference.current)&&s.domReference.current.blur()}return p.addEventListener("blur",m),()=>{p.removeEventListener("blur",m)}},[s,n,a]),I.useEffect(()=>{if(!a)return;function d(){c.current=!0}return o.on("dismiss",d),()=>{o.off("dismiss",d)}},[o,a]),I.useEffect(()=>()=>{clearTimeout(f.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){let{pointerType:h}=d;l.current=h,c.current=!!(h&&u)},onPointerLeave(){c.current=!1},onFocus(d){var h,p,m;c.current||d.type==="focus"&&((h=i.current.openEvent)==null?void 0:h.type)==="mousedown"&&(p=s.domReference.current)!=null&&p.contains((m=i.current.openEvent)==null?void 0:m.target)||(i.current.openEvent=d.nativeEvent,r(!0))},onBlur(d){const h=d.relatedTarget;f.current=setTimeout(()=>{var p,m;(p=s.floating.current)!=null&&p.contains(h)||(m=s.domReference.current)!=null&&m.contains(h)||(c.current=!1,r(!1))})}}}:{},[a,u,s,i,r])};function N2e({opened:e,floating:t,positionDependencies:n}){const[r,i]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return Urt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference,t.refs.floating,e,r]),Fs(()=>{t.update()},n),Fs(()=>{i(s=>s+1)},[e])}function lit(e){const t=[w2e(e.offset)];return e.middlewares.shift&&t.push(WY({limiter:Mrt()})),e.middlewares.flip&&t.push(b2e()),e.middlewares.inline&&t.push(S2e()),t.push(O2e({element:e.arrowRef})),t}function cit(e){const[t,n]=co({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;(o=e.onClose)==null||o.call(e),n(!1)},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=KY({placement:e.position,middleware:[...lit(e),...e.width==="target"?[Lrt({apply({rects:o}){var a,u;Object.assign((u=(a=s.refs.floating.current)==null?void 0:a.style)!=null?u:{},{width:`${o.reference.width}px`})}})]:[]]});return N2e({opened:e.opened,positionDependencies:e.positionDependencies,floating:s}),Fs(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const D2e={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[fit,M2e]=EY(D2e.context);var dit=Object.defineProperty,hit=Object.defineProperties,pit=Object.getOwnPropertyDescriptors,VN=Object.getOwnPropertySymbols,L2e=Object.prototype.hasOwnProperty,F2e=Object.prototype.propertyIsEnumerable,Rue=(e,t,n)=>t in e?dit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BP=(e,t)=>{for(var n in t||(t={}))L2e.call(t,n)&&Rue(e,n,t[n]);if(VN)for(var n of VN(t))F2e.call(t,n)&&Rue(e,n,t[n]);return e},mit=(e,t)=>hit(e,pit(t)),git=(e,t)=>{var n={};for(var r in e)L2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VN)for(var r of VN(e))t.indexOf(r)<0&&F2e.call(e,r)&&(n[r]=e[r]);return n};const j2e=I.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref",popupType:s="dialog"}=n,o=git(n,["children","refProp","popupType"]);if(!cI(r))throw new Error(D2e.children);const a=o,u=M2e(),l=Hs(u.reference,r.ref,t),c=u.withRoles?{"aria-haspopup":s,"aria-expanded":u.opened,"aria-controls":u.getDropdownId(),id:u.getTargetId()}:{};return I.cloneElement(r,BP(mit(BP(BP(BP({},a),c),u.targetProps),{className:vxe(u.targetProps.className,a.className,r.props.className),[i]:l}),u.controlled?null:{onClick:u.onToggle}))});j2e.displayName="@mantine/core/PopoverTarget";var yit=yt((e,{radius:t,shadow:n})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm}px ${e.spacing.md}px`,boxShadow:e.shadows[n]||n||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const vit=yit;var _it=Object.defineProperty,Nue=Object.getOwnPropertySymbols,bit=Object.prototype.hasOwnProperty,wit=Object.prototype.propertyIsEnumerable,Due=(e,t,n)=>t in e?_it(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,W_=(e,t)=>{for(var n in t||(t={}))bit.call(t,n)&&Due(e,n,t[n]);if(Nue)for(var n of Nue(t))wit.call(t,n)&&Due(e,n,t[n]);return e};const Mue={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function B2e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in RP?W_(W_(W_({transitionProperty:RP[e].transitionProperty},i),RP[e].common),RP[e][Mue[t]]):null:W_(W_(W_({transitionProperty:e.transitionProperty},i),e.common),e[Mue[t]])}function U2e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=As(),l=t4(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(r?"entered":"exited");let h=c?0:e;const p=I.useRef(-1),m=g=>{const y=g?i:s,v=g?o:a;if(d(g?"pre-entering":"pre-exiting"),window.clearTimeout(p.current),h=c?0:g?e:t,h===0)typeof y=="function"&&y(),typeof v=="function"&&v(),d(g?"entered":"exited");else{const _=window.setTimeout(()=>{typeof y=="function"&&y(),d(g?"entering":"exiting")},10);p.current=window.setTimeout(()=>{window.clearTimeout(_),typeof v=="function"&&v(),d(g?"entered":"exited")},h)}};return Fs(()=>{m(r)},[r]),I.useEffect(()=>()=>window.clearTimeout(p.current),[]),{transitionDuration:h,transitionStatus:f,transitionTimingFunction:n||u.transitionTimingFunction}}function yI({transition:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=U2e({mounted:r,exitDuration:n,duration:t,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});return c===0?r?F.createElement(F.Fragment,null,i({})):null:f==="exited"?null:F.createElement(F.Fragment,null,i(B2e({transition:e,duration:c,state:f,timingFunction:d})))}yI.displayName="@mantine/core/Transition";function z2e({children:e,active:t=!0,refProp:n="ref"}){const r=MY(t),i=Hs(r,e==null?void 0:e.ref);return cI(e)?I.cloneElement(e,{[n]:i}):e}z2e.displayName="@mantine/core/FocusTrap";var Eit=Object.defineProperty,Sit=Object.defineProperties,xit=Object.getOwnPropertyDescriptors,Lue=Object.getOwnPropertySymbols,Tit=Object.prototype.hasOwnProperty,Cit=Object.prototype.propertyIsEnumerable,Fue=(e,t,n)=>t in e?Eit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zm=(e,t)=>{for(var n in t||(t={}))Tit.call(t,n)&&Fue(e,n,t[n]);if(Lue)for(var n of Lue(t))Cit.call(t,n)&&Fue(e,n,t[n]);return e},UP=(e,t)=>Sit(e,xit(t));function jue(e,t,n){return e==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Bue(e,t,n,r){return e==="center"?{[r==="ltr"?"left":"right"]:t}:e==="end"?{[r==="ltr"?"right":"left"]:n}:e==="start"?{[r==="ltr"?"left":"right"]:n}:{}}const Ait={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Iit({position:e,withBorder:t,arrowSize:n,arrowOffset:r,arrowRadius:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:n,height:n,transform:"rotate(45deg)",position:"absolute",[Ait[u]]:i},f=t?-n/2-1:-n/2;return u==="left"?UP(zm(zm({},c),jue(l,o,r)),{right:f,borderLeft:0,borderBottom:0}):u==="right"?UP(zm(zm({},c),jue(l,o,r)),{left:f,borderRight:0,borderTop:0}):u==="top"?UP(zm(zm({},c),Bue(l,s,r,a)),{bottom:f,borderTop:0,[a==="ltr"?"borderLeft":"borderRight"]:0}):u==="bottom"?UP(zm(zm({},c),Bue(l,s,r,a)),{top:f,borderBottom:0,[a==="ltr"?"borderRight":"borderLeft"]:0}):{}}var Oit=Object.defineProperty,Pit=Object.defineProperties,kit=Object.getOwnPropertyDescriptors,HN=Object.getOwnPropertySymbols,V2e=Object.prototype.hasOwnProperty,H2e=Object.prototype.propertyIsEnumerable,Uue=(e,t,n)=>t in e?Oit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$it=(e,t)=>{for(var n in t||(t={}))V2e.call(t,n)&&Uue(e,n,t[n]);if(HN)for(var n of HN(t))H2e.call(t,n)&&Uue(e,n,t[n]);return e},Rit=(e,t)=>Pit(e,kit(t)),Nit=(e,t)=>{var n={};for(var r in e)V2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HN)for(var r of HN(e))t.indexOf(r)<0&&H2e.call(e,r)&&(n[r]=e[r]);return n};const XY=I.forwardRef((e,t)=>{var n=e,{withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,visible:u,arrowX:l,arrowY:c}=n,f=Nit(n,["withBorder","position","arrowSize","arrowOffset","arrowRadius","visible","arrowX","arrowY"]);const d=As();return u?F.createElement("div",Rit($it({},f),{ref:t,style:Iit({withBorder:r,position:i,arrowSize:s,arrowOffset:o,arrowRadius:a,dir:d.dir,arrowX:l,arrowY:c})})):null});XY.displayName="@mantine/core/FloatingArrow";var Dit=Object.defineProperty,Mit=Object.defineProperties,Lit=Object.getOwnPropertyDescriptors,qN=Object.getOwnPropertySymbols,q2e=Object.prototype.hasOwnProperty,W2e=Object.prototype.propertyIsEnumerable,zue=(e,t,n)=>t in e?Dit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zP=(e,t)=>{for(var n in t||(t={}))q2e.call(t,n)&&zue(e,n,t[n]);if(qN)for(var n of qN(t))W2e.call(t,n)&&zue(e,n,t[n]);return e},Vue=(e,t)=>Mit(e,Lit(t)),Fit=(e,t)=>{var n={};for(var r in e)q2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qN)for(var r of qN(e))t.indexOf(r)<0&&W2e.call(e,r)&&(n[r]=e[r]);return n};function G2e(e){var t=e,{style:n,className:r,children:i,onKeyDownCapture:s}=t,o=Fit(t,["style","className","children","onKeyDownCapture"]);const{classNames:a,styles:u,unstyled:l,staticSelector:c}=iy(),f=M2e(),{classes:d,cx:h}=vit({radius:f.radius,shadow:f.shadow},{name:c,classNames:a,styles:u,unstyled:l}),p=DY({opened:f.opened,shouldReturnFocus:f.returnFocus}),m=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog"}:{};return f.disabled?null:F.createElement(dS,{withinPortal:f.withinPortal},F.createElement(yI,{mounted:f.opened,transition:f.transition,duration:f.transitionDuration,exitDuration:typeof f.exitTransitionDuration=="number"?f.exitTransitionDuration:f.transitionDuration},g=>{var y,v;return F.createElement(z2e,{active:f.trapFocus},F.createElement(dt,zP(Vue(zP({},m),{tabIndex:-1,ref:f.floating,style:Vue(zP(zP({},n),g),{zIndex:f.zIndex,top:(y=f.y)!=null?y:0,left:(v=f.x)!=null?v:0,width:f.width==="target"?void 0:f.width}),className:h(d.dropdown,r),onKeyDownCapture:TXe(f.onClose,{active:f.closeOnEscape,onTrigger:p,onKeyDown:s}),"data-position":f.placement}),o),i,F.createElement(XY,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,withBorder:!0,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,className:d.arrow})))}))}G2e.displayName="@mantine/core/PopoverDropdown";function Y2e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}var Hue=Object.getOwnPropertySymbols,jit=Object.prototype.hasOwnProperty,Bit=Object.prototype.propertyIsEnumerable,Uit=(e,t)=>{var n={};for(var r in e)jit.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Hue)for(var r of Hue(e))t.indexOf(r)<0&&Bit.call(e,r)&&(n[r]=e[r]);return n};const zit={position:"bottom",offset:8,positionDependencies:[],transition:"fade",transitionDuration:150,middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:xa("popover"),__staticSelector:"Popover",width:"max-content"};function Oi(e){var t,n,r,i,s,o;const a=I.useRef(null),u=Et("Popover",zit,e),{children:l,position:c,offset:f,onPositionChange:d,positionDependencies:h,opened:p,transition:m,transitionDuration:g,width:y,middlewares:v,withArrow:_,arrowSize:w,arrowOffset:x,arrowRadius:E,unstyled:b,classNames:T,styles:A,closeOnClickOutside:C,withinPortal:P,closeOnEscape:N,clickOutsideEvents:$,trapFocus:M,onClose:B,onOpen:z,onChange:W,zIndex:U,radius:Y,shadow:q,id:D,defaultOpened:L,exitTransitionDuration:G,__staticSelector:V,withRoles:H,disabled:te,returnFocus:le}=u,me=Uit(u,["children","position","offset","onPositionChange","positionDependencies","opened","transition","transitionDuration","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","unstyled","classNames","styles","closeOnClickOutside","withinPortal","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","exitTransitionDuration","__staticSelector","withRoles","disabled","returnFocus"]),[ye,de]=I.useState(null),[we,he]=I.useState(null),He=ru(D),Me=As(),Ke=cit({middlewares:v,width:y,position:Y2e(Me.dir,c),offset:f+(_?w/2:0),arrowRef:a,onPositionChange:d,positionDependencies:h,opened:p,defaultOpened:L,onChange:W,onOpen:z,onClose:B});xJe(()=>C&&Ke.onClose(),$,[ye,we]);const je=I.useCallback(qe=>{de(qe),Ke.floating.reference(qe)},[Ke.floating.reference]),De=I.useCallback(qe=>{he(qe),Ke.floating.floating(qe)},[Ke.floating.floating]);return F.createElement(RY,{classNames:T,styles:A,unstyled:b,staticSelector:V},F.createElement(fit,{value:{returnFocus:le,disabled:te,controlled:Ke.controlled,reference:je,floating:De,x:Ke.floating.x,y:Ke.floating.y,arrowX:(r=(n=(t=Ke.floating)==null?void 0:t.middlewareData)==null?void 0:n.arrow)==null?void 0:r.x,arrowY:(o=(s=(i=Ke.floating)==null?void 0:i.middlewareData)==null?void 0:s.arrow)==null?void 0:o.y,opened:Ke.opened,arrowRef:a,transition:m,transitionDuration:g,exitTransitionDuration:G,width:y,withArrow:_,arrowSize:w,arrowOffset:x,arrowRadius:E,placement:Ke.floating.placement,trapFocus:M,withinPortal:P,zIndex:U,radius:Y,shadow:q,closeOnEscape:N,onClose:Ke.onClose,onToggle:Ke.onToggle,getTargetId:()=>`${He}-target`,getDropdownId:()=>`${He}-dropdown`,withRoles:H,targetProps:me}},l))}Oi.Target=j2e;Oi.Dropdown=G2e;Oi.displayName="@mantine/core/Popover";var Vit=Object.defineProperty,WN=Object.getOwnPropertySymbols,K2e=Object.prototype.hasOwnProperty,X2e=Object.prototype.propertyIsEnumerable,que=(e,t,n)=>t in e?Vit(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hit=(e,t)=>{for(var n in t||(t={}))K2e.call(t,n)&&que(e,n,t[n]);if(WN)for(var n of WN(t))X2e.call(t,n)&&que(e,n,t[n]);return e},qit=(e,t)=>{var n={};for(var r in e)K2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WN)for(var r of WN(e))t.indexOf(r)<0&&X2e.call(e,r)&&(n[r]=e[r]);return n};function Wit(e){var t=e,{children:n,component:r="div",maxHeight:i=220,direction:s="column",id:o,innerRef:a,__staticSelector:u,styles:l,classNames:c,unstyled:f}=t,d=qit(t,["children","component","maxHeight","direction","id","innerRef","__staticSelector","styles","classNames","unstyled"]);const{classes:h}=Prt(null,{name:u,styles:l,classNames:c,unstyled:f});return F.createElement(Oi.Dropdown,Hit({p:0,onMouseDown:p=>p.preventDefault()},d),F.createElement("div",{style:{maxHeight:i,display:"flex"}},F.createElement(dt,{component:r||"div",id:`${o}-items`,"aria-labelledby":`${o}-label`,role:"listbox",onMouseDown:p=>p.preventDefault(),style:{flex:1,overflowY:r!==a4?"auto":void 0},"data-combobox-popover":!0,ref:a},F.createElement("div",{className:h.itemsWrapper,style:{flexDirection:s}},n))))}function Xg({opened:e,transition:t="fade",transitionDuration:n=0,shadow:r,withinPortal:i,children:s,__staticSelector:o,onDirectionChange:a,switchDirectionOnFlip:u,zIndex:l,dropdownPosition:c,positionDependencies:f=[],classNames:d,styles:h,unstyled:p,readOnly:m}){return F.createElement(Oi,{unstyled:p,classNames:d,styles:h,width:"target",withRoles:!1,opened:e,middlewares:{flip:c==="flip",shift:!1},position:c==="flip"?"bottom":c,positionDependencies:f,zIndex:l,__staticSelector:o,withinPortal:i,transition:t,transitionDuration:n,shadow:r,disabled:m,onPositionChange:g=>u&&(a==null?void 0:a(g==="top"?"column-reverse":"column"))},s)}Xg.Target=Oi.Target;Xg.Dropdown=Wit;var Git=Object.defineProperty,Yit=Object.defineProperties,Kit=Object.getOwnPropertyDescriptors,GN=Object.getOwnPropertySymbols,Q2e=Object.prototype.hasOwnProperty,J2e=Object.prototype.propertyIsEnumerable,Wue=(e,t,n)=>t in e?Git(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rB=(e,t)=>{for(var n in t||(t={}))Q2e.call(t,n)&&Wue(e,n,t[n]);if(GN)for(var n of GN(t))J2e.call(t,n)&&Wue(e,n,t[n]);return e},Xit=(e,t)=>Yit(e,Kit(t)),Qit=(e,t)=>{var n={};for(var r in e)Q2e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GN)for(var r of GN(e))t.indexOf(r)<0&&J2e.call(e,r)&&(n[r]=e[r]);return n};function Z2e(e,t,n){const r=Et(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:_,style:w,inputContainer:x,inputWrapperOrder:E,withAsterisk:b}=r,T=Qit(r,["label","description","error","required","classNames","styles","className","unstyled","__staticSelector","sx","errorProps","labelProps","descriptionProps","wrapperProps","id","size","style","inputContainer","inputWrapperOrder","withAsterisk"]),A=ru(v),{systemStyles:C,rest:P}=Ec(T);return Xit(rB({},P),{classNames:u,styles:l,unstyled:f,wrapperProps:rB(rB({label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,sx:h,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,id:A,size:_,style:w,inputContainer:x,inputWrapperOrder:E,withAsterisk:b},y),C),inputProps:{required:a,classNames:u,styles:l,unstyled:f,id:A,size:_,__staticSelector:d,invalid:!!o}})}var Jit=yt((e,{size:t})=>({label:{display:"inline-block",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),fontWeight:500,color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:e.fn.variant({variant:"filled",color:"red"}).background}}));const Zit=Jit;var est=Object.defineProperty,YN=Object.getOwnPropertySymbols,eCe=Object.prototype.hasOwnProperty,tCe=Object.prototype.propertyIsEnumerable,Gue=(e,t,n)=>t in e?est(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tst=(e,t)=>{for(var n in t||(t={}))eCe.call(t,n)&&Gue(e,n,t[n]);if(YN)for(var n of YN(t))tCe.call(t,n)&&Gue(e,n,t[n]);return e},nst=(e,t)=>{var n={};for(var r in e)eCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YN)for(var r of YN(e))t.indexOf(r)<0&&tCe.call(e,r)&&(n[r]=e[r]);return n};const QY=I.forwardRef((e,t)=>{var n=e,{labelElement:r="label",children:i,required:s,size:o="sm",classNames:a,styles:u,unstyled:l,className:c,htmlFor:f,__staticSelector:d}=n,h=nst(n,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector"]);const{classes:p,cx:m}=Zit({size:o},{name:["InputWrapper",d],classNames:a,styles:u,unstyled:l});return F.createElement(dt,tst({component:r,ref:t,className:m(p.label,c),htmlFor:r==="label"?f:void 0},h),i,s&&F.createElement("span",{className:p.required,"aria-hidden":!0}," *"))});QY.displayName="@mantine/core/InputLabel";var rst=yt((e,{size:t})=>({error:{wordBreak:"break-word",color:e.fn.variant({variant:"filled",color:"red"}).background,fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const ist=rst;var sst=Object.defineProperty,KN=Object.getOwnPropertySymbols,nCe=Object.prototype.hasOwnProperty,rCe=Object.prototype.propertyIsEnumerable,Yue=(e,t,n)=>t in e?sst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ost=(e,t)=>{for(var n in t||(t={}))nCe.call(t,n)&&Yue(e,n,t[n]);if(KN)for(var n of KN(t))rCe.call(t,n)&&Yue(e,n,t[n]);return e},ast=(e,t)=>{var n={};for(var r in e)nCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KN)for(var r of KN(e))t.indexOf(r)<0&&rCe.call(e,r)&&(n[r]=e[r]);return n};const JY=I.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=ast(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=ist({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return F.createElement(ze,ost({className:d(f.error,i),ref:t,role:"alert"},c),r)});JY.displayName="@mantine/core/InputError";var ust=yt((e,{size:t})=>({description:{wordBreak:"break-word",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontSize:e.fn.size({size:t,sizes:e.fontSizes})-2,lineHeight:1.2,display:"block"}}));const lst=ust;var cst=Object.defineProperty,XN=Object.getOwnPropertySymbols,iCe=Object.prototype.hasOwnProperty,sCe=Object.prototype.propertyIsEnumerable,Kue=(e,t,n)=>t in e?cst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fst=(e,t)=>{for(var n in t||(t={}))iCe.call(t,n)&&Kue(e,n,t[n]);if(XN)for(var n of XN(t))sCe.call(t,n)&&Kue(e,n,t[n]);return e},dst=(e,t)=>{var n={};for(var r in e)iCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XN)for(var r of XN(e))t.indexOf(r)<0&&sCe.call(e,r)&&(n[r]=e[r]);return n};const ZY=I.forwardRef((e,t)=>{var n=e,{children:r,className:i,classNames:s,styles:o,unstyled:a,size:u="sm",__staticSelector:l}=n,c=dst(n,["children","className","classNames","styles","unstyled","size","__staticSelector"]);const{classes:f,cx:d}=lst({size:u},{name:["InputWrapper",l],classNames:s,styles:o,unstyled:a});return F.createElement(ze,fst({color:"dimmed",className:d(f.description,i),ref:t,unstyled:a},c),r)});ZY.displayName="@mantine/core/InputDescription";const oCe=I.createContext({offsetBottom:!1,offsetTop:!1}),hst=oCe.Provider,pst=()=>I.useContext(oCe);function mst(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e[r-1],s=e[r+1];return{offsetBottom:t&&s==="description"||n&&s==="error",offsetTop:t&&i==="description"||n&&i==="error"}}var gst=Object.defineProperty,yst=Object.defineProperties,vst=Object.getOwnPropertyDescriptors,Xue=Object.getOwnPropertySymbols,_st=Object.prototype.hasOwnProperty,bst=Object.prototype.propertyIsEnumerable,Que=(e,t,n)=>t in e?gst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wst=(e,t)=>{for(var n in t||(t={}))_st.call(t,n)&&Que(e,n,t[n]);if(Xue)for(var n of Xue(t))bst.call(t,n)&&Que(e,n,t[n]);return e},Est=(e,t)=>yst(e,vst(t)),Sst=yt(e=>({root:Est(wst({},e.fn.fontStyles()),{lineHeight:e.lineHeight})}));const xst=Sst;var Tst=Object.defineProperty,Cst=Object.defineProperties,Ast=Object.getOwnPropertyDescriptors,QN=Object.getOwnPropertySymbols,aCe=Object.prototype.hasOwnProperty,uCe=Object.prototype.propertyIsEnumerable,Jue=(e,t,n)=>t in e?Tst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ly=(e,t)=>{for(var n in t||(t={}))aCe.call(t,n)&&Jue(e,n,t[n]);if(QN)for(var n of QN(t))uCe.call(t,n)&&Jue(e,n,t[n]);return e},Zue=(e,t)=>Cst(e,Ast(t)),Ist=(e,t)=>{var n={};for(var r in e)aCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QN)for(var r of QN(e))t.indexOf(r)<0&&uCe.call(e,r)&&(n[r]=e[r]);return n};const Ost={labelElement:"label",size:"sm",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},lCe=I.forwardRef((e,t)=>{const n=Et("InputWrapper",Ost,e),{className:r,label:i,children:s,required:o,id:a,error:u,description:l,labelElement:c,labelProps:f,descriptionProps:d,errorProps:h,classNames:p,styles:m,size:g,inputContainer:y,__staticSelector:v,unstyled:_,inputWrapperOrder:w,withAsterisk:x}=n,E=Ist(n,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk"]),{classes:b,cx:T}=xst(null,{classNames:p,styles:m,name:["InputWrapper",v],unstyled:_}),A={classNames:p,styles:m,unstyled:_,size:g,__staticSelector:v},C=typeof x=="boolean"?x:o,P=i&&F.createElement(QY,Ly(Ly({key:"label",labelElement:c,id:a?`${a}-label`:void 0,htmlFor:a,required:C},A),f),i),N=l&&F.createElement(ZY,Zue(Ly(Ly({key:"description"},d),A),{size:(d==null?void 0:d.size)||A.size}),l),$=F.createElement(I.Fragment,{key:"input"},y(s)),M=typeof u!="boolean"&&u&&F.createElement(JY,Zue(Ly(Ly({},h),A),{size:(h==null?void 0:h.size)||A.size,key:"error"}),u),B=w.map(z=>{switch(z){case"label":return P;case"input":return $;case"description":return N;case"error":return M;default:return null}});return F.createElement(hst,{value:mst(w,{hasDescription:!!N,hasError:!!M})},F.createElement(dt,Ly({className:T(b.root,r),ref:t},E),B))});lCe.displayName="@mantine/core/InputWrapper";var Pst=Object.defineProperty,kst=Object.defineProperties,$st=Object.getOwnPropertyDescriptors,ele=Object.getOwnPropertySymbols,Rst=Object.prototype.hasOwnProperty,Nst=Object.prototype.propertyIsEnumerable,tle=(e,t,n)=>t in e?Pst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iB=(e,t)=>{for(var n in t||(t={}))Rst.call(t,n)&&tle(e,n,t[n]);if(ele)for(var n of ele(t))Nst.call(t,n)&&tle(e,n,t[n]);return e},nle=(e,t)=>kst(e,$st(t));const sa={xs:30,sm:36,md:42,lg:50,xl:60};function Dst({theme:e,variant:t}){return t==="default"?{border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,transition:"border-color 100ms ease","&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:t==="filled"?{border:"1px solid transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],"&:focus, &:focus-within":e.focusRingStyles.inputStyles(e)}:{borderWidth:0,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:"transparent",minHeight:28,outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}}var Mst=yt((e,{size:t,multiline:n,radius:r,variant:i,invalid:s,rightSectionWidth:o,withRightSection:a,iconWidth:u,offsetBottom:l,offsetTop:c,pointer:f})=>{const d=e.fn.variant({variant:"filled",color:"red"}).background,h=i==="default"||i==="filled"?{minHeight:e.fn.size({size:t,sizes:sa}),paddingLeft:e.fn.size({size:t,sizes:sa})/3,paddingRight:a?o:e.fn.size({size:t,sizes:sa})/3,borderRadius:e.fn.radius(r)}:null;return{wrapper:{position:"relative",marginTop:c?`calc(${e.spacing.xs}px / 2)`:void 0,marginBottom:l?`calc(${e.spacing.xs}px / 2)`:void 0},input:iB(nle(iB(nle(iB({},e.fn.fontStyles()),{height:n?i==="unstyled"?void 0:"auto":e.fn.size({size:t,sizes:sa}),WebkitTapHighlightColor:"transparent",lineHeight:n?e.lineHeight:`${e.fn.size({size:t,sizes:sa})-2}px`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),width:"100%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"block",textAlign:"left",cursor:f?"pointer":void 0}),h),{"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},"&::placeholder":{opacity:1,userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),Dst({theme:e,variant:i})),withIcon:{paddingLeft:typeof u=="number"?u:e.fn.size({size:t,sizes:sa})},invalid:{color:d,borderColor:d,"&::placeholder":{opacity:1,color:d}},disabled:{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[1],color:e.colors.dark[2],opacity:.6,cursor:"not-allowed","&::placeholder":{color:e.colors.dark[2]}},icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:typeof u=="number"?u:e.fn.size({size:t,sizes:sa}),color:s?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:o}}});const Lst=Mst;var Fst=Object.defineProperty,jst=Object.defineProperties,Bst=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,cCe=Object.prototype.hasOwnProperty,fCe=Object.prototype.propertyIsEnumerable,rle=(e,t,n)=>t in e?Fst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,VP=(e,t)=>{for(var n in t||(t={}))cCe.call(t,n)&&rle(e,n,t[n]);if(JN)for(var n of JN(t))fCe.call(t,n)&&rle(e,n,t[n]);return e},ile=(e,t)=>jst(e,Bst(t)),Ust=(e,t)=>{var n={};for(var r in e)cCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JN)for(var r of JN(e))t.indexOf(r)<0&&fCe.call(e,r)&&(n[r]=e[r]);return n};const zst={rightSectionWidth:36,size:"sm",variant:"default"},hS=I.forwardRef((e,t)=>{const n=Et("Input",zst,e),{className:r,invalid:i,required:s,disabled:o,variant:a,icon:u,style:l,rightSectionWidth:c,iconWidth:f,rightSection:d,rightSectionProps:h,radius:p,size:m,wrapperProps:g,classNames:y,styles:v,__staticSelector:_,multiline:w,sx:x,unstyled:E,pointer:b}=n,T=Ust(n,["className","invalid","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:A,offsetTop:C}=pst(),{classes:P,cx:N}=Lst({radius:p,size:m,multiline:w,variant:a,invalid:i,rightSectionWidth:c,iconWidth:f,withRightSection:!!d,offsetBottom:A,offsetTop:C,pointer:b},{classNames:y,styles:v,name:["Input",_],unstyled:E}),{systemStyles:$,rest:M}=Ec(T);return F.createElement(dt,VP(VP({className:N(P.wrapper,r),sx:x,style:l},$),g),u&&F.createElement("div",{className:P.icon},u),F.createElement(dt,ile(VP({component:"input"},M),{ref:t,required:s,"aria-invalid":i,disabled:o,className:N(P[`${a}Variant`],P.input,{[P.withIcon]:u,[P.invalid]:i,[P.disabled]:o})})),d&&F.createElement("div",ile(VP({},h),{className:P.rightSection}),d))});hS.displayName="@mantine/core/Input";hS.Wrapper=lCe;hS.Label=QY;hS.Description=ZY;hS.Error=JY;const ls=hS;var Vst=Object.defineProperty,Hst=Object.defineProperties,qst=Object.getOwnPropertyDescriptors,sle=Object.getOwnPropertySymbols,Wst=Object.prototype.hasOwnProperty,Gst=Object.prototype.propertyIsEnumerable,ole=(e,t,n)=>t in e?Vst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sB=(e,t)=>{for(var n in t||(t={}))Wst.call(t,n)&&ole(e,n,t[n]);if(sle)for(var n of sle(t))Gst.call(t,n)&&ole(e,n,t[n]);return e},Yst=(e,t)=>Hst(e,qst(t));const oB={xs:{fontSize:9,height:16},sm:{fontSize:10,height:18},md:{fontSize:11,height:20},lg:{fontSize:13,height:26},xl:{fontSize:16,height:32}},Kst={xs:4,sm:4,md:6,lg:8,xl:10};function Xst({theme:e,variant:t,color:n,size:r,gradient:i}){if(t==="dot"){const o=e.fn.size({size:r,sizes:Kst});return{backgroundColor:"transparent",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],border:`1px solid ${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[3]}`,paddingLeft:e.fn.size({size:r,sizes:e.spacing})/1.5-o/2,"&::before":{content:'""',display:"block",width:o,height:o,borderRadius:o,backgroundColor:e.fn.themeColor(n,e.colorScheme==="dark"?4:e.fn.primaryShade("light"),!0),marginRight:o}}}const s=e.fn.variant({color:n,variant:t,gradient:i});return{background:s.background,color:s.color,border:`${t==="gradient"?0:1}px solid ${s.border}`}}var Qst=yt((e,{color:t,size:n,radius:r,gradient:i,fullWidth:s,variant:o})=>{const{fontSize:a,height:u}=n in oB?oB[n]:oB.md;return{leftSection:{marginRight:`calc(${e.spacing.xs}px / 2)`},rightSection:{marginLeft:`calc(${e.spacing.xs}px / 2)`},inner:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},root:sB(Yst(sB(sB({},e.fn.focusStyles()),e.fn.fontStyles()),{fontSize:a,height:u,WebkitTapHighlightColor:"transparent",lineHeight:`${u-2}px`,textDecoration:"none",padding:`0 ${e.fn.size({size:n,sizes:e.spacing})/1.5}px`,boxSizing:"border-box",display:s?"flex":"inline-flex",alignItems:"center",justifyContent:"center",width:s?"100%":"auto",textTransform:"uppercase",borderRadius:e.fn.radius(r),fontWeight:700,letterSpacing:.25,cursor:"inherit",textOverflow:"ellipsis",overflow:"hidden"}),Xst({theme:e,variant:o,color:t,size:n,gradient:i}))}});const Jst=Qst;var Zst=Object.defineProperty,ZN=Object.getOwnPropertySymbols,dCe=Object.prototype.hasOwnProperty,hCe=Object.prototype.propertyIsEnumerable,ale=(e,t,n)=>t in e?Zst(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eot=(e,t)=>{for(var n in t||(t={}))dCe.call(t,n)&&ale(e,n,t[n]);if(ZN)for(var n of ZN(t))hCe.call(t,n)&&ale(e,n,t[n]);return e},tot=(e,t)=>{var n={};for(var r in e)dCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZN)for(var r of ZN(e))t.indexOf(r)<0&&hCe.call(e,r)&&(n[r]=e[r]);return n};const not={variant:"light",size:"md",radius:"xl"},pCe=I.forwardRef((e,t)=>{const n=Et("Badge",not,e),{className:r,color:i,variant:s,fullWidth:o,children:a,size:u,leftSection:l,rightSection:c,radius:f,gradient:d,classNames:h,styles:p,unstyled:m}=n,g=tot(n,["className","color","variant","fullWidth","children","size","leftSection","rightSection","radius","gradient","classNames","styles","unstyled"]),{classes:y,cx:v}=Jst({size:u,fullWidth:o,color:i,radius:f,variant:s,gradient:d},{classNames:h,styles:p,name:"Badge",unstyled:m});return F.createElement(dt,eot({className:v(y.root,r),ref:t},g),l&&F.createElement("span",{className:y.leftSection},l),F.createElement("span",{className:y.inner},a),c&&F.createElement("span",{className:y.rightSection},c))});pCe.displayName="@mantine/core/Badge";const Yv=pCe,rot={xs:12,sm:18,md:24,lg:34,xl:42};var iot=yt((e,{size:t,color:n,transitionDuration:r})=>{const i=e.fn.size({size:t,sizes:rot}),s=n||(e.colorScheme==="dark"?e.white:e.black);return{root:{borderRadius:e.radius.sm,width:`calc(${i}px + ${e.spacing.xs}px)`,height:`calc(${i}px + ${e.spacing.xs}px)`,padding:`calc(${e.spacing.xs}px / 2)`,cursor:"pointer"},burger:{position:"relative",userSelect:"none",boxSizing:"border-box","&, &::before, &::after":{display:"block",width:i,height:Math.ceil(i/12),backgroundColor:s,outline:"1px solid transparent",transitionProperty:"background-color, transform",transitionDuration:`${r}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},"&::before, &::after":{position:"absolute",content:'""',left:0},"&::before":{top:i/3*-1},"&::after":{top:i/3},"&[data-opened]":{backgroundColor:"transparent","&::before":{transform:`translateY(${i/3}px) rotate(45deg)`},"&::after":{transform:`translateY(-${i/3}px) rotate(-45deg)`}}}}});const sot=iot;var oot=Object.defineProperty,eD=Object.getOwnPropertySymbols,mCe=Object.prototype.hasOwnProperty,gCe=Object.prototype.propertyIsEnumerable,ule=(e,t,n)=>t in e?oot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aot=(e,t)=>{for(var n in t||(t={}))mCe.call(t,n)&&ule(e,n,t[n]);if(eD)for(var n of eD(t))gCe.call(t,n)&&ule(e,n,t[n]);return e},uot=(e,t)=>{var n={};for(var r in e)mCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eD)for(var r of eD(e))t.indexOf(r)<0&&gCe.call(e,r)&&(n[r]=e[r]);return n};const lot={size:"md",transitionDuration:300},yCe=I.forwardRef((e,t)=>{const n=Et("Burger",lot,e),{className:r,opened:i,color:s,size:o,classNames:a,styles:u,transitionDuration:l}=n,c=uot(n,["className","opened","color","size","classNames","styles","transitionDuration"]),{classes:f,cx:d}=sot({color:s,size:o,transitionDuration:l},{classNames:a,styles:u,name:"Burger"});return F.createElement(vm,aot({className:d(f.root,r),ref:t},c),F.createElement("div",{"data-opened":i||void 0,className:f.burger}))});yCe.displayName="@mantine/core/Burger";var cot=yt((e,{orientation:t,buttonBorderWidth:n})=>({root:{display:"flex",flexDirection:t==="vertical"?"column":"row","& [data-button]":{"&:first-of-type":{borderBottomRightRadius:0,[t==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"&:last-of-type":{borderTopLeftRadius:0,[t==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[t==="vertical"?"borderTopWidth":"borderLeftWidth"]:n/2,[t==="vertical"?"borderBottomWidth":"borderRightWidth"]:n/2},"& + [data-button]":{[t==="vertical"?"marginTop":"marginLeft"]:-n,"@media (min-resolution: 192dpi)":{[t==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const fot=cot;var dot=Object.defineProperty,tD=Object.getOwnPropertySymbols,vCe=Object.prototype.hasOwnProperty,_Ce=Object.prototype.propertyIsEnumerable,lle=(e,t,n)=>t in e?dot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hot=(e,t)=>{for(var n in t||(t={}))vCe.call(t,n)&&lle(e,n,t[n]);if(tD)for(var n of tD(t))_Ce.call(t,n)&&lle(e,n,t[n]);return e},pot=(e,t)=>{var n={};for(var r in e)vCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tD)for(var r of tD(e))t.indexOf(r)<0&&_Ce.call(e,r)&&(n[r]=e[r]);return n};const mot={orientation:"horizontal",buttonBorderWidth:1},bCe=I.forwardRef((e,t)=>{const n=Et("ButtonGroup",mot,e),{className:r,orientation:i,buttonBorderWidth:s,unstyled:o}=n,a=pot(n,["className","orientation","buttonBorderWidth","unstyled"]),{classes:u,cx:l}=fot({orientation:i,buttonBorderWidth:s},{name:"ButtonGroup",unstyled:o});return F.createElement(dt,hot({className:l(u.root,r),ref:t},a))});bCe.displayName="@mantine/core/ButtonGroup";var got=Object.defineProperty,yot=Object.defineProperties,vot=Object.getOwnPropertyDescriptors,cle=Object.getOwnPropertySymbols,_ot=Object.prototype.hasOwnProperty,bot=Object.prototype.propertyIsEnumerable,fle=(e,t,n)=>t in e?got(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fv=(e,t)=>{for(var n in t||(t={}))_ot.call(t,n)&&fle(e,n,t[n]);if(cle)for(var n of cle(t))bot.call(t,n)&&fle(e,n,t[n]);return e},U7=(e,t)=>yot(e,vot(t));const z7={xs:{height:sa.xs,paddingLeft:14,paddingRight:14},sm:{height:sa.sm,paddingLeft:18,paddingRight:18},md:{height:sa.md,paddingLeft:22,paddingRight:22},lg:{height:sa.lg,paddingLeft:26,paddingRight:26},xl:{height:sa.xl,paddingLeft:32,paddingRight:32},"compact-xs":{height:22,paddingLeft:7,paddingRight:7},"compact-sm":{height:26,paddingLeft:8,paddingRight:8},"compact-md":{height:30,paddingLeft:10,paddingRight:10},"compact-lg":{height:34,paddingLeft:12,paddingRight:12},"compact-xl":{height:40,paddingLeft:14,paddingRight:14}};function wot({compact:e,size:t,withLeftIcon:n,withRightIcon:r}){if(e)return z7[`compact-${t}`];const i=z7[t];return U7(fv({},i),{paddingLeft:n?i.paddingLeft/1.5:i.paddingLeft,paddingRight:r?i.paddingRight/1.5:i.paddingRight})}const Eot=e=>({display:e?"block":"inline-block",width:e?"100%":"auto"});function Sot({variant:e,theme:t,color:n,gradient:r}){const i=t.fn.variant({color:n,variant:e,gradient:r});return e==="gradient"?{border:0,backgroundImage:i.background,color:i.color,"&:hover":t.fn.hover({backgroundSize:"200%"})}:fv({border:`1px solid ${i.border}`,backgroundColor:i.background,color:i.color},t.fn.hover({backgroundColor:i.hover}))}var xot=yt((e,{color:t,size:n,radius:r,fullWidth:i,compact:s,gradient:o,variant:a,withLeftIcon:u,withRightIcon:l})=>({root:U7(fv(U7(fv(fv(fv(fv({},wot({compact:s,size:n,withLeftIcon:u,withRightIcon:l})),e.fn.fontStyles()),e.fn.focusStyles()),Eot(i)),{borderRadius:e.fn.radius(r),fontWeight:600,position:"relative",lineHeight:1,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),userSelect:"none",cursor:"pointer"}),Sot({variant:a,theme:e,color:t,gradient:o})),{"&:active":e.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":{content:'""',position:"absolute",top:-1,left:-1,right:-1,bottom:-1,backgroundColor:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:e.fn.radius(r),cursor:"not-allowed"}}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:10},rightIcon:{marginLeft:10},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const Tot=xot;var Cot=Object.defineProperty,nD=Object.getOwnPropertySymbols,wCe=Object.prototype.hasOwnProperty,ECe=Object.prototype.propertyIsEnumerable,dle=(e,t,n)=>t in e?Cot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hle=(e,t)=>{for(var n in t||(t={}))wCe.call(t,n)&&dle(e,n,t[n]);if(nD)for(var n of nD(t))ECe.call(t,n)&&dle(e,n,t[n]);return e},Aot=(e,t)=>{var n={};for(var r in e)wCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nD)for(var r of nD(e))t.indexOf(r)<0&&ECe.call(e,r)&&(n[r]=e[r]);return n};const Iot={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},eK=I.forwardRef((e,t)=>{const n=Et("Button",Iot,e),{className:r,size:i,color:s,type:o,disabled:a,children:u,leftIcon:l,rightIcon:c,fullWidth:f,variant:d,radius:h,uppercase:p,compact:m,loading:g,loaderPosition:y,loaderProps:v,gradient:_,classNames:w,styles:x,unstyled:E}=n,b=Aot(n,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:T,cx:A,theme:C}=Tot({radius:h,color:s,size:i,fullWidth:f,compact:m,gradient:_,variant:d,withLeftIcon:!!l,withRightIcon:!!c},{name:"Button",unstyled:E,classNames:w,styles:x}),P=C.fn.variant({color:s,variant:d}),N=F.createElement(o_,hle({color:P.color,size:C.fn.size({size:i,sizes:z7}).height/2},v));return F.createElement(vm,hle({className:A(T.root,r),type:o,disabled:a,"data-button":!0,"data-disabled":a||void 0,"data-loading":g||void 0,ref:t,unstyled:E},b),F.createElement("div",{className:T.inner},(l||g&&y==="left")&&F.createElement("span",{className:A(T.icon,T.leftIcon)},g&&y==="left"?N:l),g&&y==="center"&&F.createElement("span",{className:T.centerLoader},N),F.createElement("span",{className:T.label,style:{textTransform:p?"uppercase":void 0}},u),(c||g&&y==="right")&&F.createElement("span",{className:A(T.icon,T.rightIcon)},g&&y==="right"?N:c)))});eK.displayName="@mantine/core/Button";eK.Group=bCe;const ur=eK;var Oot=yt((e,{radius:t,shadow:n,withBorder:r})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,boxSizing:"border-box",borderRadius:e.fn.radius(t),boxShadow:e.shadows[n]||n||"none",border:r?`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`:void 0}}));const Pot=Oot;var kot=Object.defineProperty,rD=Object.getOwnPropertySymbols,SCe=Object.prototype.hasOwnProperty,xCe=Object.prototype.propertyIsEnumerable,ple=(e,t,n)=>t in e?kot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$ot=(e,t)=>{for(var n in t||(t={}))SCe.call(t,n)&&ple(e,n,t[n]);if(rD)for(var n of rD(t))xCe.call(t,n)&&ple(e,n,t[n]);return e},Rot=(e,t)=>{var n={};for(var r in e)SCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rD)for(var r of rD(e))t.indexOf(r)<0&&xCe.call(e,r)&&(n[r]=e[r]);return n};const Not={},TCe=I.forwardRef((e,t)=>{const n=Et("Paper",Not,e),{className:r,children:i,radius:s,withBorder:o,shadow:a,unstyled:u}=n,l=Rot(n,["className","children","radius","withBorder","shadow","unstyled"]),{classes:c,cx:f}=Pot({radius:s,shadow:a,withBorder:o},{name:"Paper",unstyled:u});return F.createElement(dt,$ot({className:f(c.root,r),ref:t},l),i)});TCe.displayName="@mantine/core/Paper";const tK=TCe,CCe=I.createContext({padding:0}),Dot=CCe.Provider,Mot=()=>I.useContext(CCe).padding;var Lot=yt((e,{padding:t,withBorder:n,inheritPadding:r})=>{const i=e.fn.size({size:t,sizes:e.spacing}),s=-1*i,o=e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3];return{cardSection:{display:"block",marginLeft:s,marginRight:s,paddingLeft:r?i:void 0,paddingRight:r?i:void 0,borderTop:n&&`1px solid ${o}`,borderBottom:n&&`1px solid ${o}`,"& + &":{borderTop:0},"&[data-first]":{marginTop:s,borderTop:0,borderBottom:n&&`1px solid ${o}`},"&[data-last]":{marginBottom:s,borderBottom:0}}}});const Fot=Lot;var jot=Object.defineProperty,iD=Object.getOwnPropertySymbols,ACe=Object.prototype.hasOwnProperty,ICe=Object.prototype.propertyIsEnumerable,mle=(e,t,n)=>t in e?jot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bot=(e,t)=>{for(var n in t||(t={}))ACe.call(t,n)&&mle(e,n,t[n]);if(iD)for(var n of iD(t))ICe.call(t,n)&&mle(e,n,t[n]);return e},Uot=(e,t)=>{var n={};for(var r in e)ACe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iD)for(var r of iD(e))t.indexOf(r)<0&&ICe.call(e,r)&&(n[r]=e[r]);return n};const OCe=I.forwardRef((e,t)=>{var n=e,{className:r,withBorder:i=!1,inheritPadding:s=!1,unstyled:o}=n,a=Uot(n,["className","withBorder","inheritPadding","unstyled"]);const{classes:u,cx:l}=Fot({padding:Mot(),withBorder:i,inheritPadding:s},{name:"Card",unstyled:o});return F.createElement(dt,Bot({className:l(u.cardSection,r),ref:t},a))});OCe.displayName="@mantine/core/CardSection";const PCe=OCe;var zot=yt(e=>({root:{position:"relative",overflow:"hidden",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white}}));const Vot=zot;var Hot=Object.defineProperty,sD=Object.getOwnPropertySymbols,kCe=Object.prototype.hasOwnProperty,$Ce=Object.prototype.propertyIsEnumerable,gle=(e,t,n)=>t in e?Hot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qot=(e,t)=>{for(var n in t||(t={}))kCe.call(t,n)&&gle(e,n,t[n]);if(sD)for(var n of sD(t))$Ce.call(t,n)&&gle(e,n,t[n]);return e},Wot=(e,t)=>{var n={};for(var r in e)kCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&sD)for(var r of sD(e))t.indexOf(r)<0&&$Ce.call(e,r)&&(n[r]=e[r]);return n};const Got={p:"md"},nK=I.forwardRef((e,t)=>{const n=Et("Card",Got,e),{className:r,p:i,radius:s,children:o,unstyled:a}=n,u=Wot(n,["className","p","radius","children","unstyled"]),{classes:l,cx:c}=Vot(null,{name:"Card",unstyled:a}),f=I.Children.toArray(o),d=f.map((h,p)=>typeof h=="object"&&h&&"type"in h&&h.type===PCe?I.cloneElement(h,{padding:i,"data-first":p===0||void 0,"data-last":p===f.length-1||void 0}):h);return F.createElement(Dot,{value:{padding:i}},F.createElement(tK,qot({className:c(l.root,r),radius:s,p:i,ref:t},u),d))});nK.Section=PCe;nK.displayName="@mantine/core/Card";const vI=nK;var Yot=Object.defineProperty,oD=Object.getOwnPropertySymbols,RCe=Object.prototype.hasOwnProperty,NCe=Object.prototype.propertyIsEnumerable,yle=(e,t,n)=>t in e?Yot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kot=(e,t)=>{for(var n in t||(t={}))RCe.call(t,n)&&yle(e,n,t[n]);if(oD)for(var n of oD(t))NCe.call(t,n)&&yle(e,n,t[n]);return e},Xot=(e,t)=>{var n={};for(var r in e)RCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&oD)for(var r of oD(e))t.indexOf(r)<0&&NCe.call(e,r)&&(n[r]=e[r]);return n};const DCe=I.forwardRef((e,t)=>{const n=Et("Center",{},e),{inline:r,sx:i}=n,s=Xot(n,["inline","sx"]);return F.createElement(dt,Kot({ref:t,sx:[{display:r?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...m0(i)]},s))});DCe.displayName="@mantine/core/Center";const _1=DCe,MCe=I.createContext(null),Qot=MCe.Provider,Jot=()=>I.useContext(MCe);function Zot(e){return I.Children.toArray(e).filter(Boolean)}const LCe={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var eat=yt((e,{spacing:t,position:n,noWrap:r,grow:i,align:s,count:o})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:s||"center",flexWrap:r?"nowrap":"wrap",justifyContent:LCe[n],gap:e.fn.size({size:t,sizes:e.spacing}),"& > *":{boxSizing:"border-box",maxWidth:i?`calc(${100/o}% - ${e.fn.size({size:t,sizes:e.spacing})-e.fn.size({size:t,sizes:e.spacing})/o}px)`:void 0,flexGrow:i?1:0}}}));const tat=eat;var nat=Object.defineProperty,aD=Object.getOwnPropertySymbols,FCe=Object.prototype.hasOwnProperty,jCe=Object.prototype.propertyIsEnumerable,vle=(e,t,n)=>t in e?nat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rat=(e,t)=>{for(var n in t||(t={}))FCe.call(t,n)&&vle(e,n,t[n]);if(aD)for(var n of aD(t))jCe.call(t,n)&&vle(e,n,t[n]);return e},iat=(e,t)=>{var n={};for(var r in e)FCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&aD)for(var r of aD(e))t.indexOf(r)<0&&jCe.call(e,r)&&(n[r]=e[r]);return n};const sat={position:"left",spacing:"md"},Wa=I.forwardRef((e,t)=>{const n=Et("Group",sat,e),{className:r,position:i,align:s,children:o,noWrap:a,grow:u,spacing:l,unstyled:c}=n,f=iat(n,["className","position","align","children","noWrap","grow","spacing","unstyled"]),d=Zot(o),{classes:h,cx:p}=tat({align:s,grow:u,noWrap:a,spacing:l,position:i,count:d.length},{unstyled:c,name:"Group"});return F.createElement(dt,rat({className:p(h.root,r),ref:t},f),d)});Wa.displayName="@mantine/core/Group";var oat=yt((e,{spacing:t,align:n,justify:r})=>({root:{display:"flex",flexDirection:"column",alignItems:n,justifyContent:r,gap:e.fn.size({size:t,sizes:e.spacing})}}));const aat=oat;var uat=Object.defineProperty,uD=Object.getOwnPropertySymbols,BCe=Object.prototype.hasOwnProperty,UCe=Object.prototype.propertyIsEnumerable,_le=(e,t,n)=>t in e?uat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lat=(e,t)=>{for(var n in t||(t={}))BCe.call(t,n)&&_le(e,n,t[n]);if(uD)for(var n of uD(t))UCe.call(t,n)&&_le(e,n,t[n]);return e},cat=(e,t)=>{var n={};for(var r in e)BCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&uD)for(var r of uD(e))t.indexOf(r)<0&&UCe.call(e,r)&&(n[r]=e[r]);return n};const fat={spacing:"md",align:"stretch",justify:"top"},yp=I.forwardRef((e,t)=>{const n=Et("Stack",fat,e),{spacing:r,className:i,align:s,justify:o,unstyled:a}=n,u=cat(n,["spacing","className","align","justify","unstyled"]),{classes:l,cx:c}=aat({spacing:r,align:s,justify:o},{name:"Stack",unstyled:a});return F.createElement(dt,lat({className:c(l.root,i),ref:t},u))});yp.displayName="@mantine/core/Stack";function rK({spacing:e,offset:t,orientation:n,children:r,role:i,unstyled:s}){return n==="horizontal"?F.createElement(Wa,{pt:t,spacing:e,role:i,unstyled:s},r):F.createElement(yp,{pt:t,spacing:e,role:i,unstyled:s},r)}var dat=Object.defineProperty,lD=Object.getOwnPropertySymbols,zCe=Object.prototype.hasOwnProperty,VCe=Object.prototype.propertyIsEnumerable,ble=(e,t,n)=>t in e?dat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wle=(e,t)=>{for(var n in t||(t={}))zCe.call(t,n)&&ble(e,n,t[n]);if(lD)for(var n of lD(t))VCe.call(t,n)&&ble(e,n,t[n]);return e},hat=(e,t)=>{var n={};for(var r in e)zCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&lD)for(var r of lD(e))t.indexOf(r)<0&&VCe.call(e,r)&&(n[r]=e[r]);return n};const pat={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},HCe=I.forwardRef((e,t)=>{const n=Et("CheckboxGroup",pat,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=hat(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=co({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return F.createElement(Qot,{value:{value:h,onChange:m,size:l}},F.createElement(ls.Wrapper,wle(wle({labelElement:"div",size:l,__staticSelector:"CheckboxGroup",ref:t},c),d),F.createElement(rK,{spacing:u,orientation:a,offset:f},r)))});HCe.displayName="@mantine/core/CheckboxGroup";var mat=Object.defineProperty,cD=Object.getOwnPropertySymbols,qCe=Object.prototype.hasOwnProperty,WCe=Object.prototype.propertyIsEnumerable,Ele=(e,t,n)=>t in e?mat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,V7=(e,t)=>{for(var n in t||(t={}))qCe.call(t,n)&&Ele(e,n,t[n]);if(cD)for(var n of cD(t))WCe.call(t,n)&&Ele(e,n,t[n]);return e},gat=(e,t)=>{var n={};for(var r in e)qCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&cD)for(var r of cD(e))t.indexOf(r)<0&&WCe.call(e,r)&&(n[r]=e[r]);return n};function yat(e){return F.createElement("svg",V7({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),F.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function vat(e){var t=e,{indeterminate:n}=t,r=gat(t,["indeterminate"]);return n?F.createElement("svg",V7({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6"},r),F.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):F.createElement(yat,V7({},r))}var _at=Object.defineProperty,bat=Object.defineProperties,wat=Object.getOwnPropertyDescriptors,Sle=Object.getOwnPropertySymbols,Eat=Object.prototype.hasOwnProperty,Sat=Object.prototype.propertyIsEnumerable,xle=(e,t,n)=>t in e?_at(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xat=(e,t)=>{for(var n in t||(t={}))Eat.call(t,n)&&xle(e,n,t[n]);if(Sle)for(var n of Sle(t))Sat.call(t,n)&&xle(e,n,t[n]);return e},Tat=(e,t)=>bat(e,wat(t));const Cat={xs:16,sm:20,md:24,lg:30,xl:36},Aat={xs:8,sm:10,md:14,lg:16,xl:20};var Iat=yt((e,{size:t,radius:n,color:r,transitionDuration:i,labelPosition:s,error:o,indeterminate:a},u)=>{const l=e.fn.size({size:t,sizes:Cat}),c=e.fn.variant({variant:"filled",color:r}),f=e.fn.variant({variant:"filled",color:"red"}).background;return{icon:{ref:u("icon"),color:a?"inherit":e.white,transform:a?"none":"translateY(5px) scale(0.5)",opacity:a?1:0,transitionProperty:"opacity, transform",transitionTimingFunction:"ease",transitionDuration:`${i}ms`,pointerEvents:"none",width:e.fn.size({size:t,sizes:Aat}),position:"absolute",zIndex:1,top:0,bottom:0,left:0,right:0,margin:"auto","@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},inner:{position:"relative",width:l,height:l,order:s==="left"?2:1},input:Tat(xat({},e.fn.focusStyles()),{appearance:"none",backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${o?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,width:l,height:l,borderRadius:e.fn.radius(n),padding:0,display:"block",margin:0,transition:`border-color ${i}ms ease, background-color ${i}ms ease`,cursor:e.cursorType,"&:checked":{backgroundColor:c.background,borderColor:c.background,[`& + .${u("icon")}`]:{opacity:1,color:e.white,transform:"translateY(0) scale(1)"}},"&:disabled":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[3],cursor:"not-allowed",[`& + .${u("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[5]}}})}});const Oat=Iat;var Pat=Object.defineProperty,kat=Object.defineProperties,$at=Object.getOwnPropertyDescriptors,Tle=Object.getOwnPropertySymbols,Rat=Object.prototype.hasOwnProperty,Nat=Object.prototype.propertyIsEnumerable,Cle=(e,t,n)=>t in e?Pat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dat=(e,t)=>{for(var n in t||(t={}))Rat.call(t,n)&&Cle(e,n,t[n]);if(Tle)for(var n of Tle(t))Nat.call(t,n)&&Cle(e,n,t[n]);return e},Mat=(e,t)=>kat(e,$at(t));const Lat={xs:16,sm:20,md:24,lg:30,xl:36};var Fat=yt((e,{labelPosition:t,size:n})=>({root:{},body:{display:"inline-flex"},labelWrapper:Mat(Dat({},e.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:`${e.fn.size({size:n,sizes:Lat})}px`,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,cursor:e.cursorType,order:t==="left"?1:2}),description:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},error:{marginTop:`calc(${e.spacing.xs}px / 2)`,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm},label:{cursor:e.cursorType,[t==="left"?"paddingRight":"paddingLeft"]:e.spacing.sm,"&[data-disabled]":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]}}}));const jat=Fat;var Bat=Object.defineProperty,fD=Object.getOwnPropertySymbols,GCe=Object.prototype.hasOwnProperty,YCe=Object.prototype.propertyIsEnumerable,Ale=(e,t,n)=>t in e?Bat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Uat=(e,t)=>{for(var n in t||(t={}))GCe.call(t,n)&&Ale(e,n,t[n]);if(fD)for(var n of fD(t))YCe.call(t,n)&&Ale(e,n,t[n]);return e},zat=(e,t)=>{var n={};for(var r in e)GCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&fD)for(var r of fD(e))t.indexOf(r)<0&&YCe.call(e,r)&&(n[r]=e[r]);return n};function c4(e){var t=e,{__staticSelector:n,className:r,classNames:i,styles:s,unstyled:o,children:a,label:u,description:l,id:c,disabled:f,error:d,size:h,labelPosition:p}=t,m=zat(t,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition"]);const{classes:g,cx:y}=jat({size:h,labelPosition:p},{name:n,styles:s,classNames:i,unstyled:o});return F.createElement(dt,Uat({className:y(g.root,r)},m),F.createElement("div",{className:y(g.body)},a,F.createElement("div",{className:g.labelWrapper},u&&F.createElement("label",{className:g.label,"data-disabled":f||void 0,htmlFor:c},u),l&&F.createElement(ls.Description,{className:g.description},l),d&&d!=="boolean"&&F.createElement(ls.Error,{className:g.error},d))))}c4.displayName="@mantine/core/InlineInput";var Vat=Object.defineProperty,dD=Object.getOwnPropertySymbols,KCe=Object.prototype.hasOwnProperty,XCe=Object.prototype.propertyIsEnumerable,Ile=(e,t,n)=>t in e?Vat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,HP=(e,t)=>{for(var n in t||(t={}))KCe.call(t,n)&&Ile(e,n,t[n]);if(dD)for(var n of dD(t))XCe.call(t,n)&&Ile(e,n,t[n]);return e},Hat=(e,t)=>{var n={};for(var r in e)KCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&dD)for(var r of dD(e))t.indexOf(r)<0&&XCe.call(e,r)&&(n[r]=e[r]);return n};const qat={size:"sm",transitionDuration:100,icon:vat,labelPosition:"right"},Zw=I.forwardRef((e,t)=>{const n=Et("Checkbox",qat,e),{className:r,style:i,sx:s,checked:o,disabled:a,color:u,label:l,indeterminate:c,id:f,size:d,radius:h,wrapperProps:p,children:m,classNames:g,styles:y,transitionDuration:v,icon:_,unstyled:w,labelPosition:x,description:E,error:b}=n,T=Hat(n,["className","style","sx","checked","disabled","color","label","indeterminate","id","size","radius","wrapperProps","children","classNames","styles","transitionDuration","icon","unstyled","labelPosition","description","error"]),A=Jot(),C=ru(f),{systemStyles:P,rest:N}=Ec(T),{classes:$}=Oat({size:(A==null?void 0:A.size)||d,radius:h,color:u,transitionDuration:v,labelPosition:x,error:!!b,indeterminate:c},{name:"Checkbox",classNames:g,styles:y,unstyled:w}),M=A?{checked:A.value.includes(N.value),onChange:A.onChange}:{};return F.createElement(c4,HP(HP({className:r,sx:s,style:i,id:C,size:(A==null?void 0:A.size)||d,labelPosition:x,label:l,description:E,error:b,disabled:a,__staticSelector:"Checkbox",classNames:g,styles:y,unstyled:w,"data-checked":M.checked||void 0},P),p),F.createElement("div",{className:$.inner},F.createElement("input",HP(HP({id:C,ref:t,type:"checkbox",className:$.input,checked:o,disabled:a},N),M)),F.createElement(_,{indeterminate:c,className:$.icon})))});Zw.displayName="@mantine/core/Checkbox";Zw.Group=HCe;var Wat=yt((e,{fluid:t,size:n,sizes:r})=>({root:{paddingLeft:e.spacing.md,paddingRight:e.spacing.md,maxWidth:t?"100%":e.fn.size({size:n,sizes:r}),marginLeft:"auto",marginRight:"auto"}}));const Gat=Wat;var Yat=Object.defineProperty,hD=Object.getOwnPropertySymbols,QCe=Object.prototype.hasOwnProperty,JCe=Object.prototype.propertyIsEnumerable,Ole=(e,t,n)=>t in e?Yat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kat=(e,t)=>{for(var n in t||(t={}))QCe.call(t,n)&&Ole(e,n,t[n]);if(hD)for(var n of hD(t))JCe.call(t,n)&&Ole(e,n,t[n]);return e},Xat=(e,t)=>{var n={};for(var r in e)QCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&hD)for(var r of hD(e))t.indexOf(r)<0&&JCe.call(e,r)&&(n[r]=e[r]);return n};const Qat={sizes:{xs:540,sm:720,md:960,lg:1140,xl:1320}},Em=I.forwardRef((e,t)=>{const n=Et("Container",Qat,e),{className:r,fluid:i,size:s,unstyled:o,sizes:a}=n,u=Xat(n,["className","fluid","size","unstyled","sizes"]),{classes:l,cx:c}=Gat({fluid:i,size:s,sizes:a},{unstyled:o,name:"Container"});return F.createElement(dt,Kat({className:c(l.root,r),ref:t},u))});Em.displayName="@mantine/core/Container";var Jat=Object.defineProperty,Zat=Object.defineProperties,eut=Object.getOwnPropertyDescriptors,Ple=Object.getOwnPropertySymbols,tut=Object.prototype.hasOwnProperty,nut=Object.prototype.propertyIsEnumerable,kle=(e,t,n)=>t in e?Jat(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rut=(e,t)=>{for(var n in t||(t={}))tut.call(t,n)&&kle(e,n,t[n]);if(Ple)for(var n of Ple(t))nut.call(t,n)&&kle(e,n,t[n]);return e},iut=(e,t)=>Zat(e,eut(t));const qP={xs:180,sm:240,md:320,lg:360,xl:500,full:"100%"};function sut({position:e,size:t,theme:n}){switch(e){case"top":return{top:0,left:0,right:0,height:n.fn.size({size:t,sizes:qP})};case"bottom":return{bottom:0,left:0,right:0,height:n.fn.size({size:t,sizes:qP})};case"right":return{bottom:0,top:0,right:0,width:n.fn.size({size:t,sizes:qP})};case"left":return{bottom:0,top:0,left:0,width:n.fn.size({size:t,sizes:qP})};default:return null}}var out=yt((e,{position:t,size:n,zIndex:r,withOverlay:i})=>({closeButton:{},overlay:{},root:{position:"fixed",zIndex:r,top:0,left:0,right:0,bottom:0,pointerEvents:i===!1?"none":void 0},drawer:iut(rut({},sut({position:t,size:n,theme:e})),{maxWidth:"100%",maxHeight:"100vh",position:"fixed",outline:0,zIndex:1,pointerEvents:i===!1?"auto":void 0}),title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md}}));const aut=out;function iK({transitions:e,duration:t=250,exitDuration:n=t,mounted:r,children:i,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l}){const{transitionDuration:c,transitionStatus:f,transitionTimingFunction:d}=U2e({mounted:r,duration:t,exitDuration:n,timingFunction:s,onExit:o,onEntered:a,onEnter:u,onExited:l});if(c===0)return r?F.createElement(F.Fragment,null,i({})):null;if(f==="exited")return null;const h=Object.keys(e).reduce((p,m)=>(p[m]=B2e({duration:e[m].duration,transition:e[m].transition,timingFunction:e[m].timingFunction||d,state:f}),p),{});return F.createElement(F.Fragment,null,i(h))}iK.displayName="@mantine/core/GroupedTransition";var uut=yt((e,{zIndex:t})=>({root:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:t}}));const lut=uut;var cut=Object.defineProperty,fut=Object.defineProperties,dut=Object.getOwnPropertyDescriptors,pD=Object.getOwnPropertySymbols,ZCe=Object.prototype.hasOwnProperty,eAe=Object.prototype.propertyIsEnumerable,$le=(e,t,n)=>t in e?cut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,aB=(e,t)=>{for(var n in t||(t={}))ZCe.call(t,n)&&$le(e,n,t[n]);if(pD)for(var n of pD(t))eAe.call(t,n)&&$le(e,n,t[n]);return e},hut=(e,t)=>fut(e,dut(t)),put=(e,t)=>{var n={};for(var r in e)ZCe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&pD)for(var r of pD(e))t.indexOf(r)<0&&eAe.call(e,r)&&(n[r]=e[r]);return n};const mut={opacity:.6,color:"#fff",zIndex:xa("modal"),radius:0,blur:0},tAe=I.forwardRef((e,t)=>{const n=Et("Overlay",mut,e),{opacity:r,blur:i,color:s,gradient:o,zIndex:a,radius:u,sx:l,unstyled:c,className:f}=n,d=put(n,["opacity","blur","color","gradient","zIndex","radius","sx","unstyled","className"]),{classes:h,cx:p}=lut({zIndex:a},{name:"Overlay",unstyled:c}),m=o?{backgroundImage:o}:{backgroundColor:s},g=y=>F.createElement(dt,aB({ref:t,className:p(h.root,f),sx:[v=>hut(aB({},m),{opacity:r,borderRadius:v.fn.size({size:u,sizes:v.radius})}),...m0(l)]},y));return i?F.createElement(dt,aB({className:p(h.root,f),sx:[{backdropFilter:`blur(${i}px)`},...m0(l)]},d),g()):g(d)});tAe.displayName="@mantine/core/Overlay";const sK=tAe;var gut=Object.defineProperty,mD=Object.getOwnPropertySymbols,nAe=Object.prototype.hasOwnProperty,rAe=Object.prototype.propertyIsEnumerable,Rle=(e,t,n)=>t in e?gut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yut=(e,t)=>{for(var n in t||(t={}))nAe.call(t,n)&&Rle(e,n,t[n]);if(mD)for(var n of mD(t))rAe.call(t,n)&&Rle(e,n,t[n]);return e},vut=(e,t)=>{var n={};for(var r in e)nAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mD)for(var r of mD(e))t.indexOf(r)<0&&rAe.call(e,r)&&(n[r]=e[r]);return n};const _ut={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},but={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},wut={position:"left",size:"md",transitionDuration:250,transitionTimingFunction:"ease",zIndex:xa("modal"),shadow:"md",padding:0,lockScroll:!0,closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withOverlay:!0,withCloseButton:!0,withinPortal:!0,withFocusReturn:!0,overlayBlur:0};function iAe(e){const t=Et("Drawer",wut,e),{className:n,opened:r,onClose:i,position:s,size:o,trapFocus:a,lockScroll:u,closeOnClickOutside:l,closeOnEscape:c,transition:f,transitionDuration:d,transitionTimingFunction:h,zIndex:p,overlayColor:m,overlayOpacity:g,children:y,withOverlay:v,shadow:_,padding:w,title:x,withCloseButton:E,closeButtonLabel:b,classNames:T,styles:A,target:C,withinPortal:P,overlayBlur:N,unstyled:$,withFocusReturn:M}=t,B=vut(t,["className","opened","onClose","position","size","trapFocus","lockScroll","closeOnClickOutside","closeOnEscape","transition","transitionDuration","transitionTimingFunction","zIndex","overlayColor","overlayOpacity","children","withOverlay","shadow","padding","title","withCloseButton","closeButtonLabel","classNames","styles","target","withinPortal","overlayBlur","unstyled","withFocusReturn"]),{classes:z,cx:W,theme:U}=aut({size:o,position:s,zIndex:p,withOverlay:v},{classNames:T,styles:A,unstyled:$,name:"Drawer"}),Y=MY(a&&r),[,q]=Qxe(),D=f||(U.dir==="rtl"?but:_ut)[s],L=typeof g=="number"?g:U.colorScheme==="dark"?.85:.75,G=V=>{V.key==="Escape"&&c&&i()};return I.useEffect(()=>{if(!a)return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[a]),DY({opened:r,shouldReturnFocus:a&&M}),F.createElement(dS,{withinPortal:P,target:C},F.createElement(iK,{onExited:()=>q(!1),onEntered:()=>q(u&&!0),mounted:r,duration:d,timingFunction:h,transitions:{overlay:{duration:d/2,transition:"fade",timingFunction:"ease"},drawer:{duration:d,transition:D,timingFunction:h}}},V=>F.createElement(dt,yut({className:W(z.root,n),role:"dialog","aria-modal":!0},B),F.createElement(tK,{className:W(z.drawer,n),ref:Y,style:V.drawer,radius:0,tabIndex:-1,onKeyDownCapture:H=>{var te;((te=H.target)==null?void 0:te.getAttribute("data-mantine-stop-propagation"))!=="true"&&H.key==="Escape"&&c&&i()},shadow:_,p:w,unstyled:$},(x||E)&&F.createElement("div",{className:z.header},F.createElement(ze,{className:z.title,unstyled:$},x),E&&F.createElement(_m,{iconSize:16,onClick:i,"aria-label":b,className:z.closeButton,unstyled:$})),y),v&&F.createElement("div",{style:V.overlay},F.createElement(sK,{unstyled:$,blur:N,onMouseDown:()=>l&&i(),className:z.overlay,opacity:L,zIndex:0,color:m||(U.colorScheme==="dark"?U.colors.dark[9]:U.black)})))))}iAe.displayName="@mantine/core/Drawer";const Eut={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"default",property:"alignItems"},justify:{type:"default",property:"justifyContent"},wrap:{type:"default",property:"flexWrap"},direction:{type:"default",property:"flexDirection"}};var Sut=Object.defineProperty,xut=Object.defineProperties,Tut=Object.getOwnPropertyDescriptors,gD=Object.getOwnPropertySymbols,sAe=Object.prototype.hasOwnProperty,oAe=Object.prototype.propertyIsEnumerable,Nle=(e,t,n)=>t in e?Sut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cut=(e,t)=>{for(var n in t||(t={}))sAe.call(t,n)&&Nle(e,n,t[n]);if(gD)for(var n of gD(t))oAe.call(t,n)&&Nle(e,n,t[n]);return e},Aut=(e,t)=>xut(e,Tut(t)),Iut=(e,t)=>{var n={};for(var r in e)sAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gD)for(var r of gD(e))t.indexOf(r)<0&&oAe.call(e,r)&&(n[r]=e[r]);return n};const Out={},jn=I.forwardRef((e,t)=>{const n=Et("Flex",Out,e),{gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l,sx:c}=n,f=Iut(n,["gap","rowGap","columnGap","align","justify","wrap","direction","sx"]);return F.createElement(dt,Aut(Cut({},f),{sx:[{display:"flex"},d=>N7({gap:r,rowGap:i,columnGap:s,align:o,justify:a,wrap:u,direction:l},d,Eut),...m0(c)],ref:t}))});jn.displayName="@mantine/core/Flex";const aAe=I.createContext(null),Put=aAe.Provider,kut=()=>I.useContext(aAe);var $ut=Object.defineProperty,Dle=Object.getOwnPropertySymbols,Rut=Object.prototype.hasOwnProperty,Nut=Object.prototype.propertyIsEnumerable,Mle=(e,t,n)=>t in e?$ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dut=(e,t)=>{for(var n in t||(t={}))Rut.call(t,n)&&Mle(e,n,t[n]);if(Dle)for(var n of Dle(t))Nut.call(t,n)&&Mle(e,n,t[n]);return e};const oK=(e,t)=>e==="content"?"auto":e==="auto"?"0px":e?`${100/(t/e)}%`:void 0,uAe=(e,t,n)=>n||e==="auto"||e==="content"?"unset":oK(e,t),lAe=(e,t)=>{if(e)return e==="auto"||t?1:0},cAe=(e,t)=>e===0?0:e?`${100/(t/e)}%`:void 0;function Mut({sizes:e,offsets:t,orders:n,theme:r,columns:i,grow:s}){return nQe.reduce((o,a)=>(o[`@media (min-width: ${r.breakpoints[a]}px)`]={order:n[a],flexBasis:oK(e[a],i),flexShrink:0,width:e[a]==="content"?"auto":void 0,maxWidth:uAe(e[a],i,s),marginLeft:cAe(t[a],i),flexGrow:lAe(e[a],s)},o),{})}var Lut=yt((e,{gutter:t,grow:n,offset:r,offsetXs:i,offsetSm:s,offsetMd:o,offsetLg:a,offsetXl:u,columns:l,span:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:x})=>({root:Dut({boxSizing:"border-box",flexGrow:lAe(c,n),order:g,padding:e.fn.size({size:t,sizes:e.spacing})/2,marginLeft:cAe(r,l),flexBasis:oK(c,l),flexShrink:0,width:c==="content"?"auto":void 0,maxWidth:uAe(c,l,n)},Mut({sizes:{xs:f,sm:d,md:h,lg:p,xl:m},offsets:{xs:i,sm:s,md:o,lg:a,xl:u},orders:{xs:y,sm:v,md:_,lg:w,xl:x},theme:e,columns:l,grow:n}))}));const Fut=Lut;var jut=Object.defineProperty,yD=Object.getOwnPropertySymbols,fAe=Object.prototype.hasOwnProperty,dAe=Object.prototype.propertyIsEnumerable,Lle=(e,t,n)=>t in e?jut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,But=(e,t)=>{for(var n in t||(t={}))fAe.call(t,n)&&Lle(e,n,t[n]);if(yD)for(var n of yD(t))dAe.call(t,n)&&Lle(e,n,t[n]);return e},Uut=(e,t)=>{var n={};for(var r in e)fAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yD)for(var r of yD(e))t.indexOf(r)<0&&dAe.call(e,r)&&(n[r]=e[r]);return n};const zut={};function Vut(e){return e==="auto"||e==="content"?!0:typeof e=="number"&&e>0&&e%1===0}const hAe=I.forwardRef((e,t)=>{const n=Et("Grid.Col",zut,e),{children:r,span:i,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:x,className:E,id:b,unstyled:T}=n,A=Uut(n,["children","span","offset","offsetXs","offsetSm","offsetMd","offsetLg","offsetXl","xs","sm","md","lg","xl","order","orderXs","orderSm","orderMd","orderLg","orderXl","className","id","unstyled"]),C=kut();if(!C)throw new Error("[@mantine/core] Grid.Col was used outside of Grid context");const P=i||C.columns,{classes:N,cx:$}=Fut({gutter:C.gutter,offset:s,offsetXs:o,offsetSm:a,offsetMd:u,offsetLg:l,offsetXl:c,xs:f,sm:d,md:h,lg:p,xl:m,order:g,orderXs:y,orderSm:v,orderMd:_,orderLg:w,orderXl:x,grow:C.grow,columns:C.columns,span:P},{unstyled:T,name:"Col"});return!Vut(P)||P>C.columns?null:F.createElement(dt,But({className:$(N.root,E),ref:t},A),r)});hAe.displayName="@mantine/core/Col";var Hut=yt((e,{justify:t,align:n,gutter:r})=>({root:{margin:-e.fn.size({size:r,sizes:e.spacing})/2,display:"flex",flexWrap:"wrap",justifyContent:t,alignItems:n}}));const qut=Hut;var Wut=Object.defineProperty,vD=Object.getOwnPropertySymbols,pAe=Object.prototype.hasOwnProperty,mAe=Object.prototype.propertyIsEnumerable,Fle=(e,t,n)=>t in e?Wut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gut=(e,t)=>{for(var n in t||(t={}))pAe.call(t,n)&&Fle(e,n,t[n]);if(vD)for(var n of vD(t))mAe.call(t,n)&&Fle(e,n,t[n]);return e},Yut=(e,t)=>{var n={};for(var r in e)pAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vD)for(var r of vD(e))t.indexOf(r)<0&&mAe.call(e,r)&&(n[r]=e[r]);return n};const Kut={gutter:"md",justify:"flex-start",align:"stretch",columns:12},Oo=I.forwardRef((e,t)=>{const n=Et("Grid",Kut,e),{gutter:r,children:i,grow:s,justify:o,align:a,columns:u,className:l,id:c,unstyled:f}=n,d=Yut(n,["gutter","children","grow","justify","align","columns","className","id","unstyled"]),{classes:h,cx:p}=qut({gutter:r,justify:o,align:a},{unstyled:f,name:"Grid"});return F.createElement(Put,{value:{gutter:r,grow:s,columns:u}},F.createElement(dt,Gut({className:p(h.root,l),ref:t},d),i))});Oo.Col=hAe;Oo.displayName="@mantine/core/Grid";function Xut({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}var Qut=Object.defineProperty,jle=Object.getOwnPropertySymbols,Jut=Object.prototype.hasOwnProperty,Zut=Object.prototype.propertyIsEnumerable,Ble=(e,t,n)=>t in e?Qut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,elt=(e,t)=>{for(var n in t||(t={}))Jut.call(t,n)&&Ble(e,n,t[n]);if(jle)for(var n of jle(t))Zut.call(t,n)&&Ble(e,n,t[n]);return e};function tlt(e){return F.createElement("svg",elt({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),F.createElement("path",{d:"M2.5 1H12.5C13.3284 1 14 1.67157 14 2.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V2.5C1 1.67157 1.67157 1 2.5 1ZM2.5 2C2.22386 2 2 2.22386 2 2.5V8.3636L3.6818 6.6818C3.76809 6.59551 3.88572 6.54797 4.00774 6.55007C4.12975 6.55216 4.24568 6.60372 4.32895 6.69293L7.87355 10.4901L10.6818 7.6818C10.8575 7.50607 11.1425 7.50607 11.3182 7.6818L13 9.3636V2.5C13 2.22386 12.7761 2 12.5 2H2.5ZM2 12.5V9.6364L3.98887 7.64753L7.5311 11.4421L8.94113 13H2.5C2.22386 13 2 12.7761 2 12.5ZM12.5 13H10.155L8.48336 11.153L11 8.6364L13 10.6364V12.5C13 12.7761 12.7761 13 12.5 13ZM6.64922 5.5C6.64922 5.03013 7.03013 4.64922 7.5 4.64922C7.96987 4.64922 8.35078 5.03013 8.35078 5.5C8.35078 5.96987 7.96987 6.35078 7.5 6.35078C7.03013 6.35078 6.64922 5.96987 6.64922 5.5ZM7.5 3.74922C6.53307 3.74922 5.74922 4.53307 5.74922 5.5C5.74922 6.46693 6.53307 7.25078 7.5 7.25078C8.46693 7.25078 9.25078 6.46693 9.25078 5.5C9.25078 4.53307 8.46693 3.74922 7.5 3.74922Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}var nlt=Object.defineProperty,rlt=Object.defineProperties,ilt=Object.getOwnPropertyDescriptors,Ule=Object.getOwnPropertySymbols,slt=Object.prototype.hasOwnProperty,olt=Object.prototype.propertyIsEnumerable,zle=(e,t,n)=>t in e?nlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vle=(e,t)=>{for(var n in t||(t={}))slt.call(t,n)&&zle(e,n,t[n]);if(Ule)for(var n of Ule(t))olt.call(t,n)&&zle(e,n,t[n]);return e},Hle=(e,t)=>rlt(e,ilt(t)),alt=yt((e,{radius:t})=>({root:{},imageWrapper:{position:"relative"},figure:{margin:0},image:Hle(Vle({},e.fn.fontStyles()),{display:"block",width:"100%",height:"100%",border:0,borderRadius:e.fn.size({size:t,sizes:e.radius})}),caption:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],marginTop:e.spacing.xs},placeholder:Hle(Vle({},e.fn.cover()),{display:"flex",alignItems:"center",justifyContent:"center",color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0],borderRadius:e.fn.size({size:t,sizes:e.radius})})}));const ult=alt;var llt=Object.defineProperty,_D=Object.getOwnPropertySymbols,gAe=Object.prototype.hasOwnProperty,yAe=Object.prototype.propertyIsEnumerable,qle=(e,t,n)=>t in e?llt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,uB=(e,t)=>{for(var n in t||(t={}))gAe.call(t,n)&&qle(e,n,t[n]);if(_D)for(var n of _D(t))yAe.call(t,n)&&qle(e,n,t[n]);return e},clt=(e,t)=>{var n={};for(var r in e)gAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&_D)for(var r of _D(e))t.indexOf(r)<0&&yAe.call(e,r)&&(n[r]=e[r]);return n};const flt={fit:"cover",width:"100%",height:"auto",radius:0},l_=I.forwardRef((e,t)=>{const n=Et("Image",flt,e),{className:r,alt:i,src:s,fit:o,width:a,height:u,radius:l,imageProps:c,withPlaceholder:f,placeholder:d,imageRef:h,classNames:p,styles:m,caption:g,unstyled:y,style:v}=n,_=clt(n,["className","alt","src","fit","width","height","radius","imageProps","withPlaceholder","placeholder","imageRef","classNames","styles","caption","unstyled","style"]),{classes:w,cx:x}=ult({radius:l},{classNames:p,styles:m,unstyled:y,name:"Image"}),[E,b]=I.useState(!s),T=f&&E;return Fs(()=>{b(!1)},[s]),F.createElement(dt,uB({className:x(w.root,r),ref:t,style:uB({width:a},v)},_),F.createElement("figure",{className:w.figure},F.createElement("div",{className:w.imageWrapper},F.createElement("img",uB({className:w.image,src:s,alt:i,style:{objectFit:o,width:a,height:u},ref:h,onError:A=>{b(!0),typeof(c==null?void 0:c.onError)=="function"&&c.onError(A)}},c)),T&&F.createElement("div",{className:w.placeholder,title:i},d||F.createElement("div",null,F.createElement(tlt,{style:{width:40,height:40}})))),!!g&&F.createElement(ze,{component:"figcaption",size:"sm",align:"center",className:w.caption},g)))});l_.displayName="@mantine/core/Image";function dlt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var hlt=I.useLayoutEffect,plt=function(t){var n=I.useRef(t);return hlt(function(){n.current=t}),n},Wle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},mlt=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&Wle(r.current,null),r.current=n,n&&Wle(n,i)},[n])},Gle={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Yle=function(t){Object.keys(Gle).forEach(function(n){t.style.setProperty(n,Gle[n],"important")})},Zu=null,glt=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function ylt(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Zu||(Zu=document.createElement("textarea"),Zu.setAttribute("tabindex","-1"),Zu.setAttribute("aria-hidden","true"),Yle(Zu)),Zu.parentNode===null&&document.body.appendChild(Zu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Zu.style[h]=o[h]}),Yle(Zu),Zu.value=t;var u=glt(Zu,e);Zu.value="x";var l=Zu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Kle=function(){},vlt=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},_lt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],blt=!!document.documentElement.currentStyle,wlt=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=vlt(_lt,n),i=r.boxSizing;if(i==="")return null;blt&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Elt=function(t){var n=plt(t);I.useLayoutEffect(function(){var r=function(s){n.current(s)};return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}},[])},Slt=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Kle:o,u=t.onHeightChange,l=u===void 0?Kle:u,c=dlt(t,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),f=c.value!==void 0,d=I.useRef(null),h=mlt(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var _=d.current,w=r&&m.current?m.current:wlt(_);if(w){m.current=w;var x=ylt(w,_.value||_.placeholder||"x",s,i),E=x[0],b=x[1];p.current!==E&&(p.current=E,_.style.setProperty("height",E+"px","important"),l(E,{rowHeight:b}))}},y=function(_){f||g(),a(_)};return I.useLayoutEffect(g),Elt(g),I.createElement("textarea",$i({},c,{onChange:y,ref:h}))},xlt=I.forwardRef(Slt);const Tlt=xlt;var Clt=yt(e=>({input:{paddingTop:e.spacing.xs,paddingBottom:e.spacing.xs}}));const Alt=Clt;var Ilt=Object.defineProperty,Olt=Object.defineProperties,Plt=Object.getOwnPropertyDescriptors,bD=Object.getOwnPropertySymbols,vAe=Object.prototype.hasOwnProperty,_Ae=Object.prototype.propertyIsEnumerable,Xle=(e,t,n)=>t in e?Ilt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,G_=(e,t)=>{for(var n in t||(t={}))vAe.call(t,n)&&Xle(e,n,t[n]);if(bD)for(var n of bD(t))_Ae.call(t,n)&&Xle(e,n,t[n]);return e},lB=(e,t)=>Olt(e,Plt(t)),klt=(e,t)=>{var n={};for(var r in e)vAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&bD)for(var r of bD(e))t.indexOf(r)<0&&_Ae.call(e,r)&&(n[r]=e[r]);return n};const $lt={autosize:!1,size:"sm",__staticSelector:"Textarea"},bAe=I.forwardRef((e,t)=>{const n=Et("Textarea",$lt,e),{autosize:r,maxRows:i,minRows:s,label:o,error:a,description:u,id:l,className:c,required:f,style:d,wrapperProps:h,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,descriptionProps:w,labelProps:x,inputWrapperOrder:E,inputContainer:b,unstyled:T,withAsterisk:A}=n,C=klt(n,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk"]),P=ru(l),{classes:N,cx:$}=Alt(),{systemStyles:M,rest:B}=Ec(C),z=G_({required:f,ref:t,invalid:!!a,id:P,classNames:lB(G_({},p),{input:$(N.input,p==null?void 0:p.input)}),styles:m,__staticSelector:y,size:g,multiline:!0,unstyled:T},B);return F.createElement(ls.Wrapper,G_(G_({label:o,error:a,id:P,description:u,required:f,style:d,className:c,classNames:p,styles:m,size:g,__staticSelector:y,sx:v,errorProps:_,labelProps:x,descriptionProps:w,inputContainer:b,inputWrapperOrder:E,unstyled:T,withAsterisk:A},M),h),r?F.createElement(ls,lB(G_({},z),{component:Tlt,maxRows:i,minRows:s})):F.createElement(ls,lB(G_({},z),{component:"textarea",rows:s})))});bAe.displayName="@mantine/core/Textarea";const wAe=I.createContext(null);function Rlt(){return I.useContext(wAe)||{}}var Nlt=yt((e,{spacing:t,center:n},r)=>({itemWrapper:{ref:r("itemWrapper"),display:"inline-flex",flexDirection:"column",whiteSpace:"normal"},item:{whiteSpace:"nowrap",lineHeight:n?1:e.lineHeight,"&:not(:first-of-type)":{marginTop:e.fn.size({size:t,sizes:e.spacing})}},withIcon:{listStyle:"none",[`& .${r("itemWrapper")}`]:{display:"inline-flex",alignItems:n?"center":"flex-start",flexDirection:"row"}},itemIcon:{display:"inline-block",verticalAlign:"middle",marginRight:e.spacing.sm}}));const Dlt=Nlt;var Mlt=Object.defineProperty,wD=Object.getOwnPropertySymbols,EAe=Object.prototype.hasOwnProperty,SAe=Object.prototype.propertyIsEnumerable,Qle=(e,t,n)=>t in e?Mlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Llt=(e,t)=>{for(var n in t||(t={}))EAe.call(t,n)&&Qle(e,n,t[n]);if(wD)for(var n of wD(t))SAe.call(t,n)&&Qle(e,n,t[n]);return e},Flt=(e,t)=>{var n={};for(var r in e)EAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&wD)for(var r of wD(e))t.indexOf(r)<0&&SAe.call(e,r)&&(n[r]=e[r]);return n};function xAe(e){var t=e,{className:n,children:r,icon:i}=t,s=Flt(t,["className","children","icon"]);const{icon:o,spacing:a,center:u,listStyleType:l,size:c,withPadding:f}=Rlt(),{classNames:d,styles:h,unstyled:p}=iy(),m=i||o,{classes:g,cx:y}=Dlt({withPadding:f,size:c,listStyleType:l,center:u,spacing:a},{classNames:d,styles:h,unstyled:p,name:"List"});return F.createElement(dt,Llt({component:"li",className:y(g.item,{[g.withIcon]:m},n)},s),F.createElement("div",{className:g.itemWrapper},m&&F.createElement("span",{className:g.itemIcon},m),F.createElement("span",null,r)))}xAe.displayName="@mantine/core/ListItem";var jlt=Object.defineProperty,Blt=Object.defineProperties,Ult=Object.getOwnPropertyDescriptors,Jle=Object.getOwnPropertySymbols,zlt=Object.prototype.hasOwnProperty,Vlt=Object.prototype.propertyIsEnumerable,Zle=(e,t,n)=>t in e?jlt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hlt=(e,t)=>{for(var n in t||(t={}))zlt.call(t,n)&&Zle(e,n,t[n]);if(Jle)for(var n of Jle(t))Vlt.call(t,n)&&Zle(e,n,t[n]);return e},qlt=(e,t)=>Blt(e,Ult(t)),Wlt=yt((e,{withPadding:t,size:n,listStyleType:r})=>({root:qlt(Hlt({},e.fn.fontStyles()),{listStyleType:r,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,fontSize:e.fn.size({size:n,sizes:e.fontSizes}),lineHeight:e.lineHeight,margin:0,paddingLeft:t?e.spacing.xl:0,listStylePosition:"inside"})}));const Glt=Wlt;var Ylt=Object.defineProperty,ED=Object.getOwnPropertySymbols,TAe=Object.prototype.hasOwnProperty,CAe=Object.prototype.propertyIsEnumerable,ece=(e,t,n)=>t in e?Ylt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Klt=(e,t)=>{for(var n in t||(t={}))TAe.call(t,n)&&ece(e,n,t[n]);if(ED)for(var n of ED(t))CAe.call(t,n)&&ece(e,n,t[n]);return e},Xlt=(e,t)=>{var n={};for(var r in e)TAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ED)for(var r of ED(e))t.indexOf(r)<0&&CAe.call(e,r)&&(n[r]=e[r]);return n};const Qlt={type:"unordered",size:"md",spacing:0},Fd=I.forwardRef((e,t)=>{const n=Et("List",Qlt,e),{children:r,type:i,size:s,listStyleType:o,withPadding:a,center:u,spacing:l,icon:c,className:f,styles:d,classNames:h,unstyled:p}=n,m=Xlt(n,["children","type","size","listStyleType","withPadding","center","spacing","icon","className","styles","classNames","unstyled"]),{classes:g,cx:y}=Glt({withPadding:a,size:s,listStyleType:o,center:u,spacing:l},{classNames:h,styles:d,name:"List",unstyled:p});return F.createElement(RY,{classNames:h,styles:d,unstyled:p},F.createElement(wAe.Provider,{value:{spacing:l,center:u,icon:c,listStyleType:o,size:s,withPadding:a}},F.createElement(dt,Klt({component:i==="unordered"?"ul":"ol",className:y(g.root,f),ref:t},m),r)))});Fd.Item=xAe;Fd.displayName="@mantine/core/List";var Jlt=yt({root:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}});const Zlt=Jlt;var ect=Object.defineProperty,tct=Object.defineProperties,nct=Object.getOwnPropertyDescriptors,SD=Object.getOwnPropertySymbols,AAe=Object.prototype.hasOwnProperty,IAe=Object.prototype.propertyIsEnumerable,tce=(e,t,n)=>t in e?ect(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,WP=(e,t)=>{for(var n in t||(t={}))AAe.call(t,n)&&tce(e,n,t[n]);if(SD)for(var n of SD(t))IAe.call(t,n)&&tce(e,n,t[n]);return e},rct=(e,t)=>tct(e,nct(t)),ict=(e,t)=>{var n={};for(var r in e)AAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&SD)for(var r of SD(e))t.indexOf(r)<0&&IAe.call(e,r)&&(n[r]=e[r]);return n};const sct={overlayOpacity:.75,transitionDuration:0,zIndex:xa("overlay")},If=I.forwardRef((e,t)=>{const n=Et("LoadingOverlay",sct,e),{className:r,visible:i,loaderProps:s,overlayOpacity:o,overlayColor:a,transitionDuration:u,exitTransitionDuration:l,zIndex:c,style:f,loader:d,radius:h,overlayBlur:p,unstyled:m}=n,g=ict(n,["className","visible","loaderProps","overlayOpacity","overlayColor","transitionDuration","exitTransitionDuration","zIndex","style","loader","radius","overlayBlur","unstyled"]),{classes:y,cx:v,theme:_}=Zlt(null,{name:"LoadingOverlay",unstyled:m}),w=`calc(${c} + 1)`;return F.createElement(yI,{duration:u,exitDuration:l,mounted:i,transition:"fade"},x=>F.createElement(dt,WP({className:v(y.root,r),style:rct(WP(WP({},x),f),{zIndex:c}),ref:t},g),d?F.createElement("div",{style:{zIndex:w}},d):F.createElement(o_,WP({style:{zIndex:w}},s)),F.createElement(sK,{opacity:o,zIndex:c,radius:h,blur:p,unstyled:m,color:a||(_.colorScheme==="dark"?_.colors.dark[5]:_.white)})))});If.displayName="@mantine/core/LoadingOverlay";var oct=yt(e=>({divider:{margin:`calc(${e.spacing.xs}px / 2) -5px`,borderTop:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`}}));const act=oct;var uct=Object.defineProperty,xD=Object.getOwnPropertySymbols,OAe=Object.prototype.hasOwnProperty,PAe=Object.prototype.propertyIsEnumerable,nce=(e,t,n)=>t in e?uct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lct=(e,t)=>{for(var n in t||(t={}))OAe.call(t,n)&&nce(e,n,t[n]);if(xD)for(var n of xD(t))PAe.call(t,n)&&nce(e,n,t[n]);return e},cct=(e,t)=>{var n={};for(var r in e)OAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&xD)for(var r of xD(e))t.indexOf(r)<0&&PAe.call(e,r)&&(n[r]=e[r]);return n};function kAe(e){var t=e,{children:n,className:r}=t,i=cct(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=iy(),{classes:u,cx:l}=act(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return F.createElement(dt,lct({className:l(u.divider,r)},i))}kAe.displayName="@mantine/core/MenuDivider";const $Ae={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"},[fct,aK]=EY($Ae.context);var dct=Object.defineProperty,TD=Object.getOwnPropertySymbols,RAe=Object.prototype.hasOwnProperty,NAe=Object.prototype.propertyIsEnumerable,rce=(e,t,n)=>t in e?dct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hct=(e,t)=>{for(var n in t||(t={}))RAe.call(t,n)&&rce(e,n,t[n]);if(TD)for(var n of TD(t))NAe.call(t,n)&&rce(e,n,t[n]);return e},pct=(e,t)=>{var n={};for(var r in e)RAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&TD)for(var r of TD(e))t.indexOf(r)<0&&NAe.call(e,r)&&(n[r]=e[r]);return n};function DAe(e){var t=e,{children:n,onMouseEnter:r,onMouseLeave:i}=t,s=pct(t,["children","onMouseEnter","onMouseLeave"]);const o=I.useRef(),a=aK(),u=f=>{(f.key==="ArrowUp"||f.key==="ArrowDown")&&(f.preventDefault(),o.current.querySelectorAll("[data-menu-item]")[0].focus())},l=gp(r,()=>a.trigger==="hover"&&a.openDropdown()),c=gp(i,()=>a.trigger==="hover"&&a.closeDropdown());return F.createElement(Oi.Dropdown,hct({onMouseEnter:l,onMouseLeave:c,role:"menu","aria-orientation":"vertical"},s),F.createElement("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:u,ref:o,style:{outline:0}},n))}DAe.displayName="@mantine/core/MenuDropdown";var mct=Object.defineProperty,gct=Object.defineProperties,yct=Object.getOwnPropertyDescriptors,ice=Object.getOwnPropertySymbols,vct=Object.prototype.hasOwnProperty,_ct=Object.prototype.propertyIsEnumerable,sce=(e,t,n)=>t in e?mct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bct=(e,t)=>{for(var n in t||(t={}))vct.call(t,n)&&sce(e,n,t[n]);if(ice)for(var n of ice(t))_ct.call(t,n)&&sce(e,n,t[n]);return e},wct=(e,t)=>gct(e,yct(t)),Ect=yt((e,{color:t,radius:n})=>({item:wct(bct({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:e.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${e.spacing.xs}px ${e.spacing.sm}px`,cursor:"pointer",borderRadius:e.fn.radius(n),color:t?e.fn.variant({variant:"filled",primaryFallback:!1,color:t}).background:e.colorScheme==="dark"?e.colors.dark[0]:e.black,display:"flex",alignItems:"center","&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:t?e.fn.variant({variant:"light",color:t}).background:e.colorScheme==="dark"?e.fn.rgba(e.colors.dark[3],.35):e.colors.gray[0]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:e.spacing.xs},itemRightSection:{}}));const Sct=Ect;var xct=Object.defineProperty,Tct=Object.defineProperties,Cct=Object.getOwnPropertyDescriptors,CD=Object.getOwnPropertySymbols,MAe=Object.prototype.hasOwnProperty,LAe=Object.prototype.propertyIsEnumerable,oce=(e,t,n)=>t in e?xct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Act=(e,t)=>{for(var n in t||(t={}))MAe.call(t,n)&&oce(e,n,t[n]);if(CD)for(var n of CD(t))LAe.call(t,n)&&oce(e,n,t[n]);return e},Ict=(e,t)=>Tct(e,Cct(t)),Oct=(e,t)=>{var n={};for(var r in e)MAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&CD)for(var r of CD(e))t.indexOf(r)<0&&LAe.call(e,r)&&(n[r]=e[r]);return n};const FAe=I.forwardRef((e,t)=>{var n=e,{children:r,className:i,color:s,closeMenuOnClick:o,icon:a,rightSection:u}=n,l=Oct(n,["children","className","color","closeMenuOnClick","icon","rightSection"]);const c=aK(),{classNames:f,styles:d,unstyled:h}=iy(),{classes:p,cx:m,theme:g}=Sct({radius:c.radius,color:s},{name:"Menu",classNames:f,styles:d,unstyled:h}),y=I.useRef(),v=c.getItemIndex(y.current),_=l,w=gp(_.onMouseLeave,()=>c.setHovered(-1)),x=gp(_.onMouseEnter,()=>c.setHovered(c.getItemIndex(y.current))),E=gp(_.onClick,()=>{typeof o=="boolean"?o&&c.closeDropdownImmediately():c.closeOnItemClick&&c.closeDropdownImmediately()}),b=gp(_.onFocus,()=>c.setHovered(c.getItemIndex(y.current)));return F.createElement(dt,Ict(Act({component:"button",type:"button"},l),{tabIndex:-1,onFocus:b,className:m(p.item,i),ref:Hs(y,t),role:"menuitem","data-menu-item":!0,"data-hovered":c.hovered===v?!0:void 0,onMouseEnter:x,onMouseLeave:w,onClick:E,onKeyDown:mxe({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:c.loop,dir:g.dir,orientation:"vertical",onKeyDown:_.onKeydown})}),a&&F.createElement("div",{className:p.itemIcon},a),r&&F.createElement("div",{className:p.itemLabel},r),u&&F.createElement("div",{className:p.itemRightSection},u))});FAe.displayName="@mantine/core/MenuItem";const Pct=FAe;var kct=yt(e=>({label:{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],fontWeight:500,fontSize:e.fontSizes.xs,padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.sm}px`,cursor:"default"}}));const $ct=kct;var Rct=Object.defineProperty,AD=Object.getOwnPropertySymbols,jAe=Object.prototype.hasOwnProperty,BAe=Object.prototype.propertyIsEnumerable,ace=(e,t,n)=>t in e?Rct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nct=(e,t)=>{for(var n in t||(t={}))jAe.call(t,n)&&ace(e,n,t[n]);if(AD)for(var n of AD(t))BAe.call(t,n)&&ace(e,n,t[n]);return e},Dct=(e,t)=>{var n={};for(var r in e)jAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&AD)for(var r of AD(e))t.indexOf(r)<0&&BAe.call(e,r)&&(n[r]=e[r]);return n};function UAe(e){var t=e,{children:n,className:r}=t,i=Dct(t,["children","className"]);const{classNames:s,styles:o,unstyled:a}=iy(),{classes:u,cx:l}=$ct(null,{name:"Menu",classNames:s,styles:o,unstyled:a});return F.createElement(ze,Nct({className:l(u.label,r)},i),n)}UAe.displayName="@mantine/core/MenuLabel";var Mct=Object.defineProperty,ID=Object.getOwnPropertySymbols,zAe=Object.prototype.hasOwnProperty,VAe=Object.prototype.propertyIsEnumerable,uce=(e,t,n)=>t in e?Mct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lct=(e,t)=>{for(var n in t||(t={}))zAe.call(t,n)&&uce(e,n,t[n]);if(ID)for(var n of ID(t))VAe.call(t,n)&&uce(e,n,t[n]);return e},Fct=(e,t)=>{var n={};for(var r in e)zAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ID)for(var r of ID(e))t.indexOf(r)<0&&VAe.call(e,r)&&(n[r]=e[r]);return n};const HAe=I.forwardRef((e,t)=>{var n=e,{children:r,refProp:i="ref"}=n,s=Fct(n,["children","refProp"]);if(!cI(r))throw new Error($Ae.children);const o=aK(),a=gp(r.props.onClick,()=>o.trigger==="click"&&o.toggleDropdown()),u=gp(r.props.onMouseEnter,()=>o.trigger==="hover"&&o.openDropdown()),l=gp(r.props.onMouseLeave,()=>o.trigger==="hover"&&o.closeDropdown());return F.createElement(Oi.Target,Lct({refProp:i,popupType:"menu",ref:t},s),I.cloneElement(r,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":o.opened?!0:void 0}))});HAe.displayName="@mantine/core/MenuTarget";var jct=yt({dropdown:{padding:4}});const Bct=jct;var Uct=Object.defineProperty,zct=Object.defineProperties,Vct=Object.getOwnPropertyDescriptors,OD=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,WAe=Object.prototype.propertyIsEnumerable,lce=(e,t,n)=>t in e?Uct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cce=(e,t)=>{for(var n in t||(t={}))qAe.call(t,n)&&lce(e,n,t[n]);if(OD)for(var n of OD(t))WAe.call(t,n)&&lce(e,n,t[n]);return e},fce=(e,t)=>zct(e,Vct(t)),Hct=(e,t)=>{var n={};for(var r in e)qAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&OD)for(var r of OD(e))t.indexOf(r)<0&&WAe.call(e,r)&&(n[r]=e[r]);return n};const qct={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function Kl(e){const t=Et("Menu",qct,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,onChange:a,closeOnItemClick:u,loop:l,closeOnEscape:c,trigger:f,openDelay:d,closeDelay:h,classNames:p,styles:m,unstyled:g,radius:y}=t,v=Hct(t,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius"]),{classes:_,cx:w}=Bct(),[x,{setHovered:E,resetHovered:b}]=CXe(),[T,A]=co({value:s,defaultValue:o,finalValue:!1,onChange:a}),C=()=>{A(!1),T&&(i==null||i())},P=()=>{A(!0),!T&&(r==null||r())},N=()=>T?C():P(),{openDropdown:$,closeDropdown:M}=Xut({open:P,close:C,closeDelay:h,openDelay:d}),B=z=>SXe("[data-menu-item]","[data-menu-dropdown]",z);return Fs(()=>{b()},[T]),F.createElement(fct,{value:{opened:T,toggleDropdown:N,getItemIndex:B,hovered:x,setHovered:E,closeOnItemClick:u,closeDropdown:f==="click"?C:M,openDropdown:f==="click"?P:$,closeDropdownImmediately:C,loop:l,trigger:f,radius:y}},F.createElement(Oi,fce(cce({},v),{radius:y,opened:T,onChange:A,defaultOpened:o,trapFocus:f==="click",closeOnEscape:c&&f==="click",__staticSelector:"Menu",classNames:fce(cce({},p),{dropdown:w(_.dropdown,p==null?void 0:p.dropdown)}),styles:m,unstyled:g,onClose:C,onOpen:P}),n))}Kl.displayName="@mantine/core/Menu";Kl.Item=Pct;Kl.Label=UAe;Kl.Dropdown=DAe;Kl.Target=HAe;Kl.Divider=kAe;var Wct=Object.defineProperty,dce=Object.getOwnPropertySymbols,Gct=Object.prototype.hasOwnProperty,Yct=Object.prototype.propertyIsEnumerable,hce=(e,t,n)=>t in e?Wct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kct=(e,t)=>{for(var n in t||(t={}))Gct.call(t,n)&&hce(e,n,t[n]);if(dce)for(var n of dce(t))Yct.call(t,n)&&hce(e,n,t[n]);return e};const Xct={xs:320,sm:380,md:440,lg:620,xl:780};function Qct(e){return e?{position:"absolute",top:0,left:0,right:0,bottom:0,maxHeight:"100vh",overflowY:"auto"}:{}}var Jct=yt((e,{overflow:t,size:n,centered:r,zIndex:i,fullScreen:s})=>({close:{},overlay:{display:s?"none":void 0},root:{position:"fixed",zIndex:i,top:0,left:0,right:0,bottom:0},inner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto",padding:s?0:`${e.spacing.xl*2}px ${e.spacing.md}px`,display:"flex",justifyContent:"center",alignItems:r?"center":"flex-start"},title:{marginRight:e.spacing.md,textOverflow:"ellipsis",display:"block",wordBreak:"break-word"},modal:Kct({position:"relative",width:s?"100vw":e.fn.size({sizes:Xct,size:n}),borderRadius:s?0:void 0,outline:0,backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,marginTop:r?"auto":void 0,marginBottom:r?"auto":void 0,zIndex:1},Qct(s)),header:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing.md,marginRight:-9},body:{maxHeight:t==="inside"?"calc(100vh - 185px)":null,overflowY:t==="inside"?"auto":null,wordBreak:"break-word"}}));const Zct=Jct;var eft=Object.defineProperty,PD=Object.getOwnPropertySymbols,GAe=Object.prototype.hasOwnProperty,YAe=Object.prototype.propertyIsEnumerable,pce=(e,t,n)=>t in e?eft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tft=(e,t)=>{for(var n in t||(t={}))GAe.call(t,n)&&pce(e,n,t[n]);if(PD)for(var n of PD(t))YAe.call(t,n)&&pce(e,n,t[n]);return e},nft=(e,t)=>{var n={};for(var r in e)GAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&PD)for(var r of PD(e))t.indexOf(r)<0&&YAe.call(e,r)&&(n[r]=e[r]);return n};const rft={size:"md",transitionDuration:250,overflow:"outside",padding:"lg",shadow:"lg",closeOnClickOutside:!0,closeOnEscape:!0,trapFocus:!0,withCloseButton:!0,withinPortal:!0,lockScroll:!0,withFocusReturn:!0,overlayBlur:0,zIndex:xa("modal"),exitTransitionDuration:0};function ac(e){const t=Et("Modal",rft,e),{className:n,opened:r,title:i,onClose:s,children:o,withCloseButton:a,overlayOpacity:u,size:l,transitionDuration:c,exitTransitionDuration:f,closeButtonLabel:d,overlayColor:h,overflow:p,transition:m,padding:g,shadow:y,radius:v,id:_,classNames:w,styles:x,closeOnClickOutside:E,trapFocus:b,closeOnEscape:T,centered:A,target:C,withinPortal:P,zIndex:N,overlayBlur:$,transitionTimingFunction:M,fullScreen:B,unstyled:z,lockScroll:W,withFocusReturn:U}=t,Y=nft(t,["className","opened","title","onClose","children","withCloseButton","overlayOpacity","size","transitionDuration","exitTransitionDuration","closeButtonLabel","overlayColor","overflow","transition","padding","shadow","radius","id","classNames","styles","closeOnClickOutside","trapFocus","closeOnEscape","centered","target","withinPortal","zIndex","overlayBlur","transitionTimingFunction","fullScreen","unstyled","lockScroll","withFocusReturn"]),q=ru(_),D=`${q}-title`,L=`${q}-body`,{classes:G,cx:V,theme:H}=Zct({size:l,overflow:p,centered:A,zIndex:N,fullScreen:B},{unstyled:z,classNames:w,styles:x,name:"Modal"}),te=MY(b&&r),le=I.useRef(null),me=Hs(te,le),ye=typeof u=="number"?u:H.colorScheme==="dark"?.85:.75;Qxe(W&&r);const de=He=>{!b&&He.key==="Escape"&&T&&s()};I.useEffect(()=>{if(!b)return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[b]),DY({opened:r,shouldReturnFocus:b&&U});const we=I.useRef(null);R7("mousedown",He=>{we.current=He.target});const he=()=>{we.current===le.current&&E&&s()};return F.createElement(dS,{withinPortal:P,target:C},F.createElement(iK,{mounted:r,duration:c,exitDuration:f,timingFunction:M,transitions:{modal:{duration:c,transition:m||(B?"fade":"pop")},overlay:{duration:c/2,transition:"fade",timingFunction:"ease"}}},He=>F.createElement(F.Fragment,null,F.createElement(dt,tft({id:q,className:V(G.root,n)},Y),F.createElement("div",{style:He.overlay},F.createElement(sK,{className:G.overlay,sx:{position:"fixed"},zIndex:0,blur:$,color:h||(H.colorScheme==="dark"?H.colors.dark[9]:H.black),opacity:ye,unstyled:z})),F.createElement("div",{role:"presentation",className:G.inner,onClick:he,onKeyDown:Me=>{var Ke;((Ke=Me.target)==null?void 0:Ke.getAttribute("data-mantine-stop-propagation"))!=="true"&&Me.key==="Escape"&&T&&s()},ref:me},F.createElement(tK,{className:G.modal,shadow:y,p:g,radius:v,role:"dialog","aria-labelledby":D,"aria-describedby":L,"aria-modal":!0,tabIndex:-1,style:He.modal,unstyled:z,onClick:Me=>Me.stopPropagation()},(i||a)&&F.createElement("div",{className:G.header},F.createElement(ze,{id:D,className:G.title},i),a&&F.createElement(_m,{iconSize:16,onClick:s,"aria-label":d,className:G.close})),F.createElement("div",{id:L,className:G.body},o)))))))}ac.displayName="@mantine/core/Modal";const ift={xs:16,sm:22,md:26,lg:30,xl:36},sft={xs:10,sm:12,md:14,lg:16,xl:18};var oft=yt((e,{size:t,disabled:n,radius:r,readOnly:i,variant:s})=>({defaultValue:{display:"flex",alignItems:"center",backgroundColor:n?e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[3]:e.colorScheme==="dark"?e.colors.dark[7]:s==="filled"?e.white:e.colors.gray[1],color:n?e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7]:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],height:e.fn.size({size:t,sizes:ift}),paddingLeft:e.fn.size({size:t,sizes:e.spacing}),paddingRight:n||i?e.fn.size({size:t,sizes:e.spacing}):0,fontWeight:500,fontSize:e.fn.size({size:t,sizes:sft}),borderRadius:e.fn.size({size:r,sizes:e.radius}),cursor:n?"not-allowed":"default",userSelect:"none",maxWidth:"calc(100% - 20px)"},defaultValueRemove:{color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],marginLeft:e.fn.size({size:t,sizes:e.spacing})/6},defaultValueLabel:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}));const aft=oft;var uft=Object.defineProperty,kD=Object.getOwnPropertySymbols,KAe=Object.prototype.hasOwnProperty,XAe=Object.prototype.propertyIsEnumerable,mce=(e,t,n)=>t in e?uft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lft=(e,t)=>{for(var n in t||(t={}))KAe.call(t,n)&&mce(e,n,t[n]);if(kD)for(var n of kD(t))XAe.call(t,n)&&mce(e,n,t[n]);return e},cft=(e,t)=>{var n={};for(var r in e)KAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kD)for(var r of kD(e))t.indexOf(r)<0&&XAe.call(e,r)&&(n[r]=e[r]);return n};const gce={xs:16,sm:22,md:24,lg:26,xl:30};function QAe(e){var t=e,{label:n,classNames:r,styles:i,className:s,onRemove:o,disabled:a,readOnly:u,size:l,radius:c="sm",variant:f}=t,d=cft(t,["label","classNames","styles","className","onRemove","disabled","readOnly","size","radius","variant"]);const{classes:h,cx:p}=aft({size:l,disabled:a,readOnly:u,radius:c,variant:f},{classNames:r,styles:i,name:"MultiSelect"});return F.createElement("div",lft({className:p(h.defaultValue,s)},d),F.createElement("span",{className:h.defaultValueLabel},n),!a&&!u&&F.createElement(_m,{"aria-hidden":!0,onMouseDown:o,size:gce[l],radius:2,color:"blue",variant:"transparent",iconSize:gce[l]/2,className:h.defaultValueRemove,tabIndex:-1}))}QAe.displayName="@mantine/core/MultiSelect/DefaultValue";function fft({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s}){if(!t&&s.length===0)return e;if(!t){const a=[];for(let u=0;u<e.length;u+=1)s.some(l=>l===e[u].value&&!e[u].disabled)||a.push(e[u]);return a}const o=[];for(let a=0;a<e.length&&(i(r,s.some(u=>u===e[a].value&&!e[a].disabled),e[a])&&o.push(e[a]),!(o.length>=n));a+=1);return o}var dft=Object.defineProperty,$D=Object.getOwnPropertySymbols,JAe=Object.prototype.hasOwnProperty,ZAe=Object.prototype.propertyIsEnumerable,yce=(e,t,n)=>t in e?dft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vce=(e,t)=>{for(var n in t||(t={}))JAe.call(t,n)&&yce(e,n,t[n]);if($D)for(var n of $D(t))ZAe.call(t,n)&&yce(e,n,t[n]);return e},hft=(e,t)=>{var n={};for(var r in e)JAe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&$D)for(var r of $D(e))t.indexOf(r)<0&&ZAe.call(e,r)&&(n[r]=e[r]);return n};const pft={xs:14,sm:18,md:20,lg:24,xl:28};function eIe(e){var t=e,{size:n,error:r,style:i}=t,s=hft(t,["size","error","style"]);const o=As(),a=o.fn.size({size:n,sizes:pft});return F.createElement("svg",vce({width:a,height:a,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:vce({color:r?o.colors.red[6]:o.colors.gray[6]},i),"data-chevron":!0},s),F.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function tIe({shouldClear:e,clearButtonLabel:t,onClear:n,size:r,error:i,clearButtonTabIndex:s}){return e?F.createElement(_m,{variant:"transparent","aria-label":t,onClick:n,size:r,tabIndex:s,onMouseDown:o=>o.preventDefault()}):F.createElement(eIe,{error:i,size:r})}tIe.displayName="@mantine/core/SelectRightSection";var mft=Object.defineProperty,gft=Object.defineProperties,yft=Object.getOwnPropertyDescriptors,RD=Object.getOwnPropertySymbols,nIe=Object.prototype.hasOwnProperty,rIe=Object.prototype.propertyIsEnumerable,_ce=(e,t,n)=>t in e?mft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cB=(e,t)=>{for(var n in t||(t={}))nIe.call(t,n)&&_ce(e,n,t[n]);if(RD)for(var n of RD(t))rIe.call(t,n)&&_ce(e,n,t[n]);return e},bce=(e,t)=>gft(e,yft(t)),vft=(e,t)=>{var n={};for(var r in e)nIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&RD)for(var r of RD(e))t.indexOf(r)<0&&rIe.call(e,r)&&(n[r]=e[r]);return n};const _ft={xs:24,sm:30,md:34,lg:44,xl:54};function iIe(e){var t=e,{styles:n,rightSection:r,rightSectionWidth:i,theme:s}=t,o=vft(t,["styles","rightSection","rightSectionWidth","theme"]);if(r)return{rightSection:r,rightSectionWidth:i,styles:n};const a=typeof n=="function"?n(s):n;return{rightSectionWidth:s.fn.size({size:o.size,sizes:_ft}),rightSection:!o.readOnly&&!(o.disabled&&o.shouldClear)&&F.createElement(tIe,cB({},o)),styles:bce(cB({},a),{rightSection:bce(cB({},a==null?void 0:a.rightSection),{pointerEvents:o.shouldClear?void 0:"none"})})}}var bft=Object.defineProperty,wft=Object.defineProperties,Eft=Object.getOwnPropertyDescriptors,wce=Object.getOwnPropertySymbols,Sft=Object.prototype.hasOwnProperty,xft=Object.prototype.propertyIsEnumerable,Ece=(e,t,n)=>t in e?bft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tft=(e,t)=>{for(var n in t||(t={}))Sft.call(t,n)&&Ece(e,n,t[n]);if(wce)for(var n of wce(t))xft.call(t,n)&&Ece(e,n,t[n]);return e},Cft=(e,t)=>wft(e,Eft(t)),Aft=yt((e,{size:t,invalid:n})=>({wrapper:{position:"relative"},values:{minHeight:e.fn.size({size:t,sizes:sa})-2,display:"flex",alignItems:"center",flexWrap:"wrap",marginLeft:`calc(${-e.spacing.xs}px / 2)`,boxSizing:"border-box"},value:{margin:`calc(${e.spacing.xs}px / 2 - 2px) calc(${e.spacing.xs}px / 2)`},searchInput:Cft(Tft({},e.fn.fontStyles()),{flex:1,minWidth:60,backgroundColor:"transparent",border:0,outline:0,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,marginLeft:`calc(${e.spacing.xs}px / 2)`,appearance:"none",color:"inherit",lineHeight:`${e.fn.size({size:t,sizes:sa})-2}px`,"&::placeholder":{opacity:1,color:n?e.colors.red[e.colorScheme==="dark"?6:7]:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5]},"&:disabled":{cursor:"not-allowed"}}),searchInputEmpty:{width:"100%"},searchInputInputHidden:{width:0,height:0,margin:0,overflow:"hidden"},searchInputPointer:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}},input:{cursor:"pointer","&:disabled":{cursor:"not-allowed"}}}));const Ift=Aft;var Oft=Object.defineProperty,Pft=Object.defineProperties,kft=Object.getOwnPropertyDescriptors,ND=Object.getOwnPropertySymbols,sIe=Object.prototype.hasOwnProperty,oIe=Object.prototype.propertyIsEnumerable,Sce=(e,t,n)=>t in e?Oft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y_=(e,t)=>{for(var n in t||(t={}))sIe.call(t,n)&&Sce(e,n,t[n]);if(ND)for(var n of ND(t))oIe.call(t,n)&&Sce(e,n,t[n]);return e},xce=(e,t)=>Pft(e,kft(t)),$ft=(e,t)=>{var n={};for(var r in e)sIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ND)for(var r of ND(e))t.indexOf(r)<0&&oIe.call(e,r)&&(n[r]=e[r]);return n};function Rft(e,t,n){return t?!1:n.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function Nft(e,t){return!!e&&!t.some(n=>n.value.toLowerCase()===e.toLowerCase())}function Tce(e,t){if(!Array.isArray(e))return;if(t.length===0)return[];const n=typeof t[0]=="object"?t.map(r=>r.value):t;return e.filter(r=>n.includes(r))}const Dft={size:"sm",valueComponent:QAe,itemComponent:BY,transition:"pop-top-left",transitionDuration:0,maxDropdownHeight:220,shadow:"sm",searchable:!1,filter:Rft,limit:1/0,clearSearchOnChange:!0,clearable:!1,clearSearchOnBlur:!1,disabled:!1,initiallyOpened:!1,creatable:!1,shouldCreate:Nft,switchDirectionOnFlip:!1,zIndex:xa("popover"),selectOnBlur:!1,clearButtonTabIndex:0,positionDependencies:[]},aIe=I.forwardRef((e,t)=>{const n=Et("MultiSelect",Dft,e),{className:r,style:i,required:s,label:o,description:a,size:u,error:l,classNames:c,styles:f,wrapperProps:d,value:h,defaultValue:p,data:m,onChange:g,valueComponent:y,itemComponent:v,id:_,transition:w,transitionDuration:x,transitionTimingFunction:E,maxDropdownHeight:b,shadow:T,nothingFound:A,onFocus:C,onBlur:P,searchable:N,placeholder:$,filter:M,limit:B,clearSearchOnChange:z,clearable:W,clearSearchOnBlur:U,clearButtonLabel:Y,variant:q,onSearchChange:D,searchValue:L,disabled:G,initiallyOpened:V,radius:H,icon:te,rightSection:le,rightSectionWidth:me,creatable:ye,getCreateLabel:de,shouldCreate:we,onCreate:he,sx:He,dropdownComponent:Me,onDropdownClose:Ke,onDropdownOpen:je,maxSelectedValues:De,withinPortal:qe,switchDirectionOnFlip:Qt,zIndex:rt,selectOnBlur:We,name:Pt,dropdownPosition:ut,errorProps:mt,labelProps:vt,descriptionProps:Ht,clearButtonTabIndex:Xt,form:fe,positionDependencies:xe,onKeyDown:Le,unstyled:ft,inputContainer:Ze,inputWrapperOrder:ct,readOnly:ot,withAsterisk:At}=n,Tn=$ft(n,["className","style","required","label","description","size","error","classNames","styles","wrapperProps","value","defaultValue","data","onChange","valueComponent","itemComponent","id","transition","transitionDuration","transitionTimingFunction","maxDropdownHeight","shadow","nothingFound","onFocus","onBlur","searchable","placeholder","filter","limit","clearSearchOnChange","clearable","clearSearchOnBlur","clearButtonLabel","variant","onSearchChange","searchValue","disabled","initiallyOpened","radius","icon","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","onCreate","sx","dropdownComponent","onDropdownClose","onDropdownOpen","maxSelectedValues","withinPortal","switchDirectionOnFlip","zIndex","selectOnBlur","name","dropdownPosition","errorProps","labelProps","descriptionProps","clearButtonTabIndex","form","positionDependencies","onKeyDown","unstyled","inputContainer","inputWrapperOrder","readOnly","withAsterisk"]),{classes:Zt,cx:Jt,theme:rr}=Ift({size:u,invalid:!!l},{classNames:c,styles:f,unstyled:ft,name:"MultiSelect"}),{systemStyles:Bn,rest:zo}=Ec(Tn),mr=I.useRef(),Di=I.useRef(),zr=I.useRef({}),Pr=ru(_),[Vr,ir]=I.useState(V),[St,gr]=I.useState(-1),[di,Un]=I.useState("column"),[hs,ps]=co({value:L,defaultValue:"",finalValue:void 0,onChange:D}),[oe,ne]=I.useState(!1),{scrollIntoView:ue,targetRef:Ee,scrollableRef:Se}=Xxe({duration:0,offset:5,cancelable:!1,isList:!0}),xt=ye&&typeof de=="function";let ke=null;const bt=m.map(wt=>typeof wt=="string"?{label:wt,value:wt}:wt),Ft=gxe({data:bt}),[It,jt]=co({value:Tce(h,m),defaultValue:Tce(p,m),finalValue:[],onChange:g}),un=I.useRef(!!De&&De<It.length),xr=wt=>{if(!ot){const Cn=It.filter(Dr=>Dr!==wt);jt(Cn),De&&Cn.length<De&&(un.current=!1)}},qt=wt=>{ps(wt.currentTarget.value),!G&&!un.current&&N&&ir(!0)},sr=wt=>{typeof C=="function"&&C(wt),!G&&!un.current&&N&&ir(!0)},en=fft({data:Ft,searchable:N,searchValue:hs,limit:B,filter:M,value:It}),Yn=(wt,Cn,Dr)=>{let rs=wt;for(;Dr(rs);)if(rs=Cn(rs),!en[rs].disabled)return rs;return wt};Fs(()=>{gr(-1)},[hs]),Fs(()=>{!G&&It.length>m.length&&ir(!1),De&&It.length<De&&(un.current=!1),De&&It.length>=De&&(un.current=!0,ir(!1))},[It]);const oi=wt=>{if(!ot)if(z&&ps(""),It.includes(wt.value))xr(wt.value);else{if(wt.creatable&&typeof he=="function"){const Cn=he(wt.value);typeof Cn<"u"&&Cn!==null&&jt(typeof Cn=="string"?[...It,Cn]:[...It,Cn.value])}else jt([...It,wt.value]);It.length===De-1&&(un.current=!0,ir(!1)),St===en.length-1&&gr(en.length-2),en.length===1&&ir(!1)}},Si=wt=>{typeof P=="function"&&P(wt),We&&en[St]&&Vr&&oi(en[St]),U&&ps(""),ir(!1)},xi=wt=>{if(oe||(Le==null||Le(wt),ot)||wt.key!=="Backspace"&&De&&un.current)return;const Cn=di==="column",Dr=()=>{gr(go=>{var K;const se=Yn(go,Z=>Z+1,Z=>Z<en.length-1);return Vr&&(Ee.current=zr.current[(K=en[se])==null?void 0:K.value],ue({alignment:Cn?"end":"start"})),se})},rs=()=>{gr(go=>{var K;const se=Yn(go,Z=>Z-1,Z=>Z>0);return Vr&&(Ee.current=zr.current[(K=en[se])==null?void 0:K.value],ue({alignment:Cn?"start":"end"})),se})};switch(wt.key){case"ArrowUp":{wt.preventDefault(),ir(!0),Cn?rs():Dr();break}case"ArrowDown":{wt.preventDefault(),ir(!0),Cn?Dr():rs();break}case"Enter":{wt.preventDefault(),en[St]&&Vr?oi(en[St]):ir(!0);break}case" ":{N||(wt.preventDefault(),en[St]&&Vr?oi(en[St]):ir(!0));break}case"Backspace":{It.length>0&&hs.length===0&&(jt(It.slice(0,-1)),ir(!0),De&&(un.current=!1));break}case"Home":{if(!N){wt.preventDefault(),Vr||ir(!0);const go=en.findIndex(K=>!K.disabled);gr(go),ue({alignment:Cn?"end":"start"})}break}case"End":{if(!N){wt.preventDefault(),Vr||ir(!0);const go=en.map(K=>!!K.disabled).lastIndexOf(!1);gr(go),ue({alignment:Cn?"end":"start"})}break}case"Escape":ir(!1)}},Is=It.map(wt=>{let Cn=Ft.find(Dr=>Dr.value===wt&&!Dr.disabled);return!Cn&&xt&&(Cn={value:wt,label:wt}),Cn}).filter(wt=>!!wt).map(wt=>F.createElement(y,xce(Y_({},wt),{variant:q,disabled:G,className:Zt.value,readOnly:ot,onRemove:Cn=>{Cn.preventDefault(),Cn.stopPropagation(),xr(wt.value)},key:wt.value,size:u,styles:f,classNames:c,radius:H}))),Mi=()=>{var wt;ps(""),jt([]),(wt=mr.current)==null||wt.focus(),De&&(un.current=!1)};xt&&we(hs,Ft)&&(ke=de(hs),en.push({label:hs,value:hs,creatable:!0}));const Tr=!ot&&(en.length>0?Vr:Vr&&!!A);return Fs(()=>{const wt=Tr?je:Ke;typeof wt=="function"&&wt()},[Tr]),F.createElement(ls.Wrapper,Y_(Y_({required:s,id:Pr,label:o,error:l,description:a,size:u,className:r,style:i,classNames:c,styles:f,__staticSelector:"MultiSelect",sx:He,errorProps:mt,descriptionProps:Ht,labelProps:vt,inputContainer:Ze,inputWrapperOrder:ct,unstyled:ft,withAsterisk:At},Bn),d),F.createElement(Xg,{opened:Tr,transition:w,transitionDuration:x,shadow:"sm",withinPortal:qe,__staticSelector:"MultiSelect",onDirectionChange:Un,switchDirectionOnFlip:Qt,zIndex:rt,dropdownPosition:ut,positionDependencies:xe,classNames:c,styles:f,unstyled:ft},F.createElement(Xg.Target,null,F.createElement("div",{className:Zt.wrapper,role:"combobox","aria-haspopup":"listbox","aria-owns":Vr&&Tr?`${Pr}-items`:null,"aria-controls":Pr,"aria-expanded":Vr,onMouseLeave:()=>gr(-1),tabIndex:-1,ref:Di},F.createElement("input",{type:"hidden",name:Pt,value:It.join(","),form:fe,disabled:G}),F.createElement(ls,Y_({__staticSelector:"MultiSelect",style:{overflow:"hidden"},component:"div",multiline:!0,size:u,variant:q,disabled:G,invalid:!!l,required:s,radius:H,icon:te,unstyled:ft,onMouseDown:wt=>{var Cn;wt.preventDefault(),!G&&!un.current&&ir(!Vr),(Cn=mr.current)==null||Cn.focus()},classNames:xce(Y_({},c),{input:Jt({[Zt.input]:!N},c==null?void 0:c.input)})},iIe({theme:rr,rightSection:le,rightSectionWidth:me,styles:f,size:u,shouldClear:W&&It.length>0,clearButtonLabel:Y,onClear:Mi,error:l,disabled:G,clearButtonTabIndex:Xt,readOnly:ot})),F.createElement("div",{className:Zt.values},Is,F.createElement("input",Y_({ref:Hs(t,mr),type:"search",id:Pr,className:Jt(Zt.searchInput,{[Zt.searchInputPointer]:!N,[Zt.searchInputInputHidden]:!Vr&&It.length>0||!N&&It.length>0,[Zt.searchInputEmpty]:It.length===0}),onKeyDown:xi,value:hs,onChange:qt,onFocus:sr,onBlur:Si,readOnly:!N||un.current||ot,placeholder:It.length===0?$:void 0,disabled:G,"data-mantine-stop-propagation":Vr,autoComplete:"off",onCompositionStart:()=>ne(!0),onCompositionEnd:()=>ne(!1)},zo)))))),F.createElement(Xg.Dropdown,{component:Me||a4,maxHeight:b,direction:di,id:Pr,innerRef:Se,__staticSelector:"MultiSelect",classNames:c,styles:f},F.createElement(jY,{data:en,hovered:St,classNames:c,styles:f,uuid:Pr,__staticSelector:"MultiSelect",onItemHover:gr,onItemSelect:oi,itemsRefs:zr,itemComponent:v,size:u,nothingFound:A,creatable:ye&&!!ke,createLabel:ke,unstyled:ft}))))});aIe.displayName="@mantine/core/MultiSelect";var Mft=Object.defineProperty,Lft=Object.defineProperties,Fft=Object.getOwnPropertyDescriptors,Cce=Object.getOwnPropertySymbols,jft=Object.prototype.hasOwnProperty,Bft=Object.prototype.propertyIsEnumerable,Ace=(e,t,n)=>t in e?Mft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ice=(e,t)=>{for(var n in t||(t={}))jft.call(t,n)&&Ace(e,n,t[n]);if(Cce)for(var n of Cce(t))Bft.call(t,n)&&Ace(e,n,t[n]);return e},Uft=(e,t)=>Lft(e,Fft(t)),zft=yt((e,{color:t,variant:n,noWrap:r,childrenOffset:i,alignIcon:s})=>{const o=e.fn.variant({variant:n,color:t});return{root:Uft(Ice({display:"flex",alignItems:"center",width:"100%",padding:`8px ${e.spacing.sm}px`,userSelect:"none"},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Ice({backgroundColor:o.background,color:o.color},e.fn.hover({backgroundColor:o.hover})),"&[data-disabled]":{opacity:.4,pointerEvents:"none"}}),icon:{marginRight:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",alignSelf:s==="center"?"center":"flex-start",paddingTop:s==="center"?void 0:4},rightSection:{marginLeft:e.spacing.sm,display:"flex",justifyContent:"center",alignItems:"center",transition:`transform 150ms ${e.transitionTimingFunction}`,"&[data-rotate]":{transform:"rotate(90deg)"}},body:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:r?"nowrap":void 0},label:{},description:{display:"block","&[data-active]":{color:"inherit"}},children:{paddingLeft:e.fn.size({size:i,sizes:e.spacing})}}});const Vft=zft;var Hft=Object.defineProperty,DD=Object.getOwnPropertySymbols,uIe=Object.prototype.hasOwnProperty,lIe=Object.prototype.propertyIsEnumerable,Oce=(e,t,n)=>t in e?Hft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qft=(e,t)=>{for(var n in t||(t={}))uIe.call(t,n)&&Oce(e,n,t[n]);if(DD)for(var n of DD(t))lIe.call(t,n)&&Oce(e,n,t[n]);return e},Wft=(e,t)=>{var n={};for(var r in e)uIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&DD)for(var r of DD(e))t.indexOf(r)<0&&lIe.call(e,r)&&(n[r]=e[r]);return n};const Gft={variant:"light",childrenOffset:"lg"},cIe=I.forwardRef((e,t)=>{const n=Et("NavLink",Gft,e),{label:r,description:i,icon:s,rightSection:o,className:a,classNames:u,styles:l,unstyled:c,active:f,color:d,variant:h,noWrap:p,children:m,opened:g,defaultOpened:y,onChange:v,disableRightSectionRotation:_,childrenOffset:w,disabled:x,onClick:E}=n,b=Wft(n,["label","description","icon","rightSection","className","classNames","styles","unstyled","active","color","variant","noWrap","children","opened","defaultOpened","onChange","disableRightSectionRotation","childrenOffset","disabled","onClick"]),{classes:T,cx:A}=Vft({color:d,variant:h,noWrap:p,childrenOffset:w,alignIcon:i?"top":"center"},{name:"NavLink",classNames:u,styles:l,unstyled:c}),[C,P]=co({value:g,defaultValue:y,finalValue:!1,onChange:v}),N=!!m,$=M=>{N?(M.preventDefault(),E==null||E(M),P(!C)):E==null||E(M)};return F.createElement(F.Fragment,null,F.createElement(vm,qft({ref:t,className:A(T.root,a),"data-active":f||void 0,onClick:$,unstyled:c,"data-expanded":C||void 0,"data-disabled":x||void 0,disabled:x},b),s&&F.createElement("span",{className:T.icon},s),F.createElement("span",{className:T.body},F.createElement(ze,{component:"span",size:"sm",className:T.label},r),F.createElement(ze,{component:"span",color:"dimmed",size:"xs","data-active":f||void 0,className:T.description},i)),(N||o)&&F.createElement("span",{className:T.rightSection,"data-rotate":C&&!_||void 0},N?o||F.createElement(JZe,{width:14,height:14,style:{transform:"rotate(-90deg)"}}):o)),F.createElement(uTe,{in:C},F.createElement("div",{className:T.children},m)))});cIe.displayName="@mantine/core/NavLink";const fIe=cIe,Yft=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function Pce({direction:e,size:t}){return F.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:t,height:t,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},F.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const dIe={xs:20,sm:24,md:30,lg:34,xl:36};var Kft=yt((e,{radius:t,size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:"calc(100% - 2px)",margin:1,marginRight:1,overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:e.fn.size({size:n,sizes:dIe}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:1,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const Xft=Kft;var Qft=Object.defineProperty,Jft=Object.defineProperties,Zft=Object.getOwnPropertyDescriptors,MD=Object.getOwnPropertySymbols,hIe=Object.prototype.hasOwnProperty,pIe=Object.prototype.propertyIsEnumerable,kce=(e,t,n)=>t in e?Qft(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fB=(e,t)=>{for(var n in t||(t={}))hIe.call(t,n)&&kce(e,n,t[n]);if(MD)for(var n of MD(t))pIe.call(t,n)&&kce(e,n,t[n]);return e},edt=(e,t)=>Jft(e,Zft(t)),tdt=(e,t)=>{var n={};for(var r in e)hIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&MD)for(var r of MD(e))t.indexOf(r)<0&&pIe.call(e,r)&&(n[r]=e[r]);return n};const ndt={type:"text",size:"sm",__staticSelector:"TextInput"},Kv=I.forwardRef((e,t)=>{const n=Z2e("TextInput",ndt,e),{inputProps:r,wrapperProps:i}=n,s=tdt(n,["inputProps","wrapperProps"]);return F.createElement(ls.Wrapper,fB({},i),F.createElement(ls,edt(fB(fB({},r),s),{ref:t})))});Kv.displayName="@mantine/core/TextInput";var rdt=Object.defineProperty,idt=Object.defineProperties,sdt=Object.getOwnPropertyDescriptors,LD=Object.getOwnPropertySymbols,mIe=Object.prototype.hasOwnProperty,gIe=Object.prototype.propertyIsEnumerable,$ce=(e,t,n)=>t in e?rdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,odt=(e,t)=>{for(var n in t||(t={}))mIe.call(t,n)&&$ce(e,n,t[n]);if(LD)for(var n of LD(t))gIe.call(t,n)&&$ce(e,n,t[n]);return e},adt=(e,t)=>idt(e,sdt(t)),udt=(e,t)=>{var n={};for(var r in e)mIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&LD)for(var r of LD(e))t.indexOf(r)<0&&gIe.call(e,r)&&(n[r]=e[r]);return n};const ldt=e=>e||"",cdt=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);if(!Number.isNaN(n))return e},Rce={xs:10,sm:14,md:16,lg:18,xl:20},fdt={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,formatter:ldt,parser:cdt,type:"text"},yIe=I.forwardRef((e,t)=>{const n=Et("NumberInput",fdt,e),{disabled:r,value:i,onChange:s,decimalSeparator:o,min:a,max:u,startValue:l,step:c,stepHoldInterval:f,stepHoldDelay:d,onBlur:h,onFocus:p,onKeyDown:m,onKeyUp:g,hideControls:y,radius:v,variant:_,precision:w,removeTrailingZeros:x,defaultValue:E,noClampOnBlur:b,handlersRef:T,classNames:A,styles:C,size:P,rightSection:N,rightSectionWidth:$,formatter:M,parser:B,inputMode:z,unstyled:W,type:U}=n,Y=udt(n,["disabled","value","onChange","decimalSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onBlur","onFocus","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:q,cx:D,theme:L}=Xft({radius:v,size:P},{classNames:A,styles:C,unstyled:W,name:"NumberInput"}),G=Ze=>{if(Ze===void 0)return;let ct=Ze.toFixed(w);return x&&w>0&&(ct=ct.replace(new RegExp(`[0]{0,${w}}$`),""),(ct.endsWith(".")||ct.endsWith(o))&&(ct=ct.slice(0,-1))),ct},[V,H]=I.useState(!1),[te,le]=I.useState(typeof i=="number"?i:typeof E=="number"?E:void 0),me=typeof i=="number"?i:te,[ye,de]=I.useState(typeof me=="number"?G(me):""),we=I.useRef(),he=Ze=>{Ze!==te&&!Number.isNaN(Ze)&&(typeof s=="function"&&s(Ze),le(Ze))},He=(Ze="")=>{let ct=typeof Ze=="number"?String(Ze):Ze;return o&&(ct=ct.replace(/\./g,o)),M(ct)},Me=Ze=>{let ct=Ze;return o&&(ct=ct.replace(new RegExp(`\\${o}`,"g"),".")),B(ct)},Ke=typeof a=="number"?a:-1/0,je=typeof u=="number"?u:1/0,De=I.useRef();De.current=()=>{var Ze,ct,ot;if(te===void 0)he((Ze=l??a)!=null?Ze:0),de((ot=(ct=G(l))!=null?ct:G(a))!=null?ot:"0");else{const At=G(wf(te+c,Ke,je));he(parseFloat(At)),de(At)}};const qe=I.useRef();qe.current=()=>{var Ze,ct,ot;if(te===void 0)he((Ze=l??a)!=null?Ze:0),de((ot=(ct=G(l))!=null?ct:G(a))!=null?ot:"0");else{const At=G(wf(te-c,Ke,je));he(parseFloat(At)),de(At)}},Gxe(T,{increment:De.current,decrement:qe.current}),I.useEffect(()=>{typeof i=="number"&&!V&&(le(i),de(G(i))),E===void 0&&i===void 0&&!V&&(le(i),de(""))},[i]);const Qt=d!==void 0&&f!==void 0,rt=I.useRef(null),We=I.useRef(0),Pt=()=>{rt.current&&window.clearTimeout(rt.current),rt.current=null,We.current=0},ut=Ze=>{Ze?De.current():qe.current(),We.current+=1},mt=Ze=>{if(ut(Ze),Qt){const ct=typeof f=="number"?f:f(We.current);rt.current=window.setTimeout(()=>mt(Ze),ct)}},vt=(Ze,ct)=>{Ze.preventDefault(),we.current.focus(),ut(ct),Qt&&(rt.current=window.setTimeout(()=>mt(ct),d))};I.useEffect(()=>(Pt(),Pt),[]);const Ht=F.createElement("div",{className:q.rightSection},F.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:me>=u,className:D(q.control,q.controlUp),onPointerDown:Ze=>{vt(Ze,!0)},onPointerUp:Pt,onPointerLeave:Pt},F.createElement(Pce,{size:L.fn.size({size:P,sizes:Rce}),direction:"up"})),F.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:me<=a,className:D(q.control,q.controlDown),onPointerDown:Ze=>{vt(Ze,!1)},onPointerUp:Pt,onPointerLeave:Pt},F.createElement(Pce,{size:L.fn.size({size:P,sizes:Rce}),direction:"down"}))),Xt=Ze=>{if(Ze.nativeEvent.isComposing)return;const ot=Ze.target.value,At=Me(ot);de(At),ot===""||ot==="-"?he(void 0):ot.trim()!==""&&!Number.isNaN(At)&&he(parseFloat(At))},fe=Ze=>{var ct;if(Ze.target.value==="")de(""),he(void 0);else{let ot=Ze.target.value;(ot[0]===`${o}`||ot[0]===".")&&(ot=`0${ot}`);const At=Me(ot),Tn=wf(parseFloat(At),Ke,je);Number.isNaN(Tn)?de((ct=G(me))!=null?ct:""):b||(de(G(Tn)),he(parseFloat(G(Tn))))}H(!1),typeof h=="function"&&h(Ze)},xe=Ze=>{H(!0),typeof p=="function"&&p(Ze)},Le=Ze=>{if(typeof m=="function"&&m(Ze),Ze.repeat&&Qt&&(Ze.key==="ArrowUp"||Ze.key==="ArrowDown")){Ze.preventDefault();return}Ze.key==="ArrowUp"?vt(Ze,!0):Ze.key==="ArrowDown"&&vt(Ze,!1)},ft=Ze=>{typeof g=="function"&&g(Ze),(Ze.key==="ArrowUp"||Ze.key==="ArrowDown")&&Pt()};return F.createElement(Kv,adt(odt({},Y),{type:U,variant:_,value:He(ye),disabled:r,ref:Hs(we,t),onChange:Xt,onBlur:fe,onFocus:xe,onKeyDown:Le,onKeyUp:ft,rightSection:N||(r||y||_==="unstyled"?null:Ht),rightSectionWidth:$||L.fn.size({size:P,sizes:dIe})+1,radius:v,max:u,min:a,step:c,size:P,styles:C,classNames:A,inputMode:z||Yft(c,w,aZe()),__staticSelector:"NumberInput",unstyled:W}))});yIe.displayName="@mantine/core/NumberInput";const Nce={xs:3,sm:5,md:8,lg:12,xl:16},ddt=ZQe({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"40px 0"}});var hdt=yt((e,{color:t,radius:n,size:r,striped:i,animate:s})=>({root:{position:"relative",height:e.fn.size({size:r,sizes:Nce}),backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderRadius:e.fn.size({size:n,sizes:e.radius}),overflow:"hidden"},bar:{position:"absolute",top:0,bottom:0,left:0,height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.fn.variant({variant:"filled",primaryFallback:!1,color:t||e.primaryColor}).background,transition:"width 100ms linear",animation:s?`${ddt} 1000ms linear infinite`:"none",backgroundSize:"20px 20px",backgroundImage:i?"linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent)":"none","&:last-of-type":{borderTopRightRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomRightRadius:e.fn.size({size:n,sizes:e.radius})},"&:first-of-type":{borderTopLeftRadius:e.fn.size({size:n,sizes:e.radius}),borderBottomLeftRadius:e.fn.size({size:n,sizes:e.radius})},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}},label:{color:e.white,fontSize:e.fn.size({size:r,sizes:Nce})*.65,fontWeight:700,userSelect:"none",overflow:"hidden",whiteSpace:"nowrap"}}));const pdt=hdt,vIe=I.createContext(!1),mdt=vIe.Provider,gdt=()=>I.useContext(vIe);function _Ie({children:e,openDelay:t=0,closeDelay:n=0}){return F.createElement(mdt,{value:!0},F.createElement(nit,{delay:{open:t,close:n}},e))}_Ie.displayName="@mantine/core/TooltipGroup";var ydt=Object.defineProperty,vdt=Object.defineProperties,_dt=Object.getOwnPropertyDescriptors,Dce=Object.getOwnPropertySymbols,bdt=Object.prototype.hasOwnProperty,wdt=Object.prototype.propertyIsEnumerable,Mce=(e,t,n)=>t in e?ydt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Lce=(e,t)=>{for(var n in t||(t={}))bdt.call(t,n)&&Mce(e,n,t[n]);if(Dce)for(var n of Dce(t))wdt.call(t,n)&&Mce(e,n,t[n]);return e},Edt=(e,t)=>vdt(e,_dt(t));function Sdt(e,t){if(!t)return{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[9],color:e.white};const n=e.fn.variant({variant:"filled",color:t,primaryFallback:!1});return{backgroundColor:n.background,color:n.color}}var xdt=yt((e,{color:t,radius:n,width:r,multiline:i})=>({tooltip:Edt(Lce(Lce({},e.fn.fontStyles()),Sdt(e,t)),{lineHeight:e.lineHeight,fontSize:e.fontSizes.sm,borderRadius:e.fn.radius(n),padding:`calc(${e.spacing.xs}px / 2) ${e.spacing.xs}px`,position:"absolute",whiteSpace:i?"unset":"nowrap",pointerEvents:"none",width:r}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const bIe=xdt,wIe={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function Tdt({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,reference:a,floating:u,refs:l,update:c,placement:f}=KY({placement:t,middleware:[WY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=I.useCallback(({clientX:m,clientY:g})=>{a({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[a]);return I.useEffect(()=>{if(l.floating.current){const m=i.current;m.addEventListener("mousemove",p);const g=$p(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[a,l.floating,c,p,n]),{handleMouseMove:p,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u}}var Cdt=Object.defineProperty,Adt=Object.defineProperties,Idt=Object.getOwnPropertyDescriptors,FD=Object.getOwnPropertySymbols,EIe=Object.prototype.hasOwnProperty,SIe=Object.prototype.propertyIsEnumerable,Fce=(e,t,n)=>t in e?Cdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dB=(e,t)=>{for(var n in t||(t={}))EIe.call(t,n)&&Fce(e,n,t[n]);if(FD)for(var n of FD(t))SIe.call(t,n)&&Fce(e,n,t[n]);return e},hB=(e,t)=>Adt(e,Idt(t)),Odt=(e,t)=>{var n={};for(var r in e)EIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&FD)for(var r of FD(e))t.indexOf(r)<0&&SIe.call(e,r)&&(n[r]=e[r]);return n};const Pdt={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:xa("popover")};function xIe(e){var t;const n=Et("TooltipFloating",Pdt,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,width:y,zIndex:v,disabled:_}=n,w=Odt(n,["children","refProp","withinPortal","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled"]),{handleMouseMove:x,x:E,y:b,opened:T,boundaryRef:A,floating:C,setOpened:P}=Tdt({offset:p,position:m}),{classes:N,cx:$}=bIe({radius:f,color:d,multiline:g,width:y},{name:"Tooltip",classNames:u,styles:l,unstyled:c});if(!cI(r))throw new Error(wIe.children);const M=Hs(A,r.ref),B=W=>{var U,Y;(Y=(U=r.props).onMouseEnter)==null||Y.call(U,W),x(W),P(!0)},z=W=>{var U,Y;(Y=(U=r.props).onMouseLeave)==null||Y.call(U,W),P(!1)};return _?F.createElement(F.Fragment,null,r):F.createElement(F.Fragment,null,F.createElement(dS,{withinPortal:s},F.createElement(dt,hB(dB({},w),{ref:C,className:$(N.tooltip,a),style:hB(dB({},o),{zIndex:v,display:T?"block":"none",top:b??"",left:(t=Math.round(E))!=null?t:""})}),h)),I.cloneElement(r,hB(dB({},r.props),{[i]:M,onMouseEnter:B,onMouseLeave:z})))}xIe.displayName="@mantine/core/TooltipFloating";function kdt(e){const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=gdt(),o=ru(),{delay:a,currentId:u,setCurrentId:l}=R2e(),c=I.useCallback(T=>{n(T),T&&l(o)},[l,o]),{x:f,y:d,reference:h,floating:p,context:m,refs:g,update:y,placement:v,middlewareData:{arrow:{x:_,y:w}={}}}=KY({placement:e.position,open:i,onOpenChange:c,middleware:[w2e(e.offset),WY({padding:8}),b2e(),O2e({element:e.arrowRef}),...e.inline?[S2e()]:[]]}),{getReferenceProps:x,getFloatingProps:E}=Jrt([tit(m,{enabled:e.events.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events.touch}),uit(m,{enabled:e.events.focus,keyboardOnly:!0}),iit(m,{role:"tooltip"}),ait(m,{enabled:typeof e.opened===void 0}),rit(m,{id:o})]);return N2e({opened:i,positionDependencies:e.positionDependencies,floating:{refs:g,update:y}}),Fs(()=>{var T;(T=e.onPositionChange)==null||T.call(e,v)},[v]),{x:f,y:d,arrowX:_,arrowY:w,reference:h,floating:p,getFloatingProps:E,getReferenceProps:x,isGroupPhase:i&&u&&u!==o,opened:i,placement:v}}var $dt=Object.defineProperty,Rdt=Object.defineProperties,Ndt=Object.getOwnPropertyDescriptors,jD=Object.getOwnPropertySymbols,TIe=Object.prototype.hasOwnProperty,CIe=Object.prototype.propertyIsEnumerable,jce=(e,t,n)=>t in e?$dt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$x=(e,t)=>{for(var n in t||(t={}))TIe.call(t,n)&&jce(e,n,t[n]);if(jD)for(var n of jD(t))CIe.call(t,n)&&jce(e,n,t[n]);return e},Ddt=(e,t)=>Rdt(e,Ndt(t)),Mdt=(e,t)=>{var n={};for(var r in e)TIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&jD)for(var r of jD(e))t.indexOf(r)<0&&CIe.call(e,r)&&(n[r]=e[r]);return n};const Ldt={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,offset:5,transition:"fade",transitionDuration:100,width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:xa("popover"),positionDependencies:[]},f4=I.forwardRef((e,t)=>{const n=I.useRef(null),r=Et("Tooltip",Ldt,e),{children:i,position:s,refProp:o,label:a,openDelay:u,closeDelay:l,onPositionChange:c,opened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:_,withArrow:w,arrowSize:x,arrowOffset:E,arrowRadius:b,offset:T,transition:A,transitionDuration:C,multiline:P,width:N,events:$,zIndex:M,disabled:B,positionDependencies:z,onClick:W,onMouseEnter:U,onMouseLeave:Y,inline:q}=r,D=Mdt(r,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","offset","transition","transitionDuration","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline"]),{classes:L,cx:G,theme:V}=bIe({radius:h,color:p,width:N,multiline:P},{name:"Tooltip",classNames:m,styles:g,unstyled:y}),H=kdt({position:Y2e(V.dir,s),closeDelay:l,openDelay:u,onPositionChange:c,opened:f,events:$,arrowRef:n,offset:T+(w?x/2:0),positionDependencies:[...z,i],inline:q});if(!cI(i))throw new Error(wIe.children);const te=Hs(H.reference,i.ref,t);return F.createElement(F.Fragment,null,F.createElement(dS,{withinPortal:d},F.createElement(yI,{mounted:!B&&H.opened,transition:A,duration:H.isGroupPhase?10:C},le=>{var me,ye;return F.createElement(dt,$x($x({},D),H.getFloatingProps({ref:H.floating,className:L.tooltip,style:Ddt($x($x({},v),le),{zIndex:M,top:(me=H.y)!=null?me:0,left:(ye=H.x)!=null?ye:0})})),a,F.createElement(XY,{ref:n,arrowX:H.arrowX,arrowY:H.arrowY,visible:w,withBorder:!1,position:H.placement,arrowSize:x,arrowOffset:E,arrowRadius:b,className:L.arrow}))})),I.cloneElement(i,H.getReferenceProps($x({onClick:W,onMouseEnter:U,onMouseLeave:Y,onMouseMove:e.onMouseMove,onPointerDown:e.onPointerDown,onPointerEnter:e.onPointerEnter,[o]:te,className:G(_,i.props.className)},i.props))))});f4.Group=_Ie;f4.Floating=xIe;f4.displayName="@mantine/core/Tooltip";const of=f4;var Fdt=Object.defineProperty,jdt=Object.defineProperties,Bdt=Object.getOwnPropertyDescriptors,BD=Object.getOwnPropertySymbols,AIe=Object.prototype.hasOwnProperty,IIe=Object.prototype.propertyIsEnumerable,Bce=(e,t,n)=>t in e?Fdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H7=(e,t)=>{for(var n in t||(t={}))AIe.call(t,n)&&Bce(e,n,t[n]);if(BD)for(var n of BD(t))IIe.call(t,n)&&Bce(e,n,t[n]);return e},OIe=(e,t)=>jdt(e,Bdt(t)),Uce=(e,t)=>{var n={};for(var r in e)AIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&BD)for(var r of BD(e))t.indexOf(r)<0&&IIe.call(e,r)&&(n[r]=e[r]);return n};function Udt(e){return e.reduce((t,n)=>(t.sections.push(OIe(H7({},n),{accumulated:t.accumulated})),t.accumulated+=n.value,t),{accumulated:0,sections:[]}).sections}const zdt={size:"md",radius:"sm",striped:!1,animate:!1,label:""},PIe=I.forwardRef((e,t)=>{const n=Et("Progress",zdt,e),{className:r,value:i,color:s,size:o,radius:a,striped:u,animate:l,label:c,"aria-label":f,classNames:d,styles:h,sections:p,unstyled:m}=n,g=Uce(n,["className","value","color","size","radius","striped","animate","label","aria-label","classNames","styles","sections","unstyled"]),{classes:y,cx:v,theme:_}=pdt({color:s,size:o,radius:a,striped:u||l,animate:l},{classNames:d,styles:h,unstyled:m,name:"Progress"}),w=Array.isArray(p)?Udt(p).map((x,E)=>{var b=x,{tooltip:T,accumulated:A,value:C,label:P,color:N}=b,$=Uce(b,["tooltip","accumulated","value","label","color"]);return F.createElement(of.Floating,{label:T,disabled:!T,key:E},F.createElement(dt,OIe(H7({},$),{className:v(y.bar,$.className),sx:{width:`${C}%`,left:`${A}%`,backgroundColor:_.fn.variant({variant:"filled",primaryFallback:!1,color:N||_.primaryColor}).background}}),P&&F.createElement(ze,{className:y.label},P)))}):null;return F.createElement(dt,H7({className:v(y.root,r),ref:t},g),w||F.createElement("div",{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":i,"aria-label":f,className:y.bar,style:{width:`${i}%`}},c?F.createElement(ze,{className:y.label},c):""))});PIe.displayName="@mantine/core/Progress";var Vdt=Object.defineProperty,zce=Object.getOwnPropertySymbols,Hdt=Object.prototype.hasOwnProperty,qdt=Object.prototype.propertyIsEnumerable,Vce=(e,t,n)=>t in e?Vdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wdt=(e,t)=>{for(var n in t||(t={}))Hdt.call(t,n)&&Vce(e,n,t[n]);if(zce)for(var n of zce(t))qdt.call(t,n)&&Vce(e,n,t[n]);return e};function Gdt(e){return F.createElement("svg",Wdt({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5"},e),F.createElement("path",{fill:"currentColor",d:"M0 2.5a2.5 2.5 0 115 0 2.5 2.5 0 01-5 0z"}))}const kIe=I.createContext(null),Ydt=kIe.Provider,Kdt=()=>I.useContext(kIe);var Xdt=Object.defineProperty,UD=Object.getOwnPropertySymbols,$Ie=Object.prototype.hasOwnProperty,RIe=Object.prototype.propertyIsEnumerable,Hce=(e,t,n)=>t in e?Xdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qce=(e,t)=>{for(var n in t||(t={}))$Ie.call(t,n)&&Hce(e,n,t[n]);if(UD)for(var n of UD(t))RIe.call(t,n)&&Hce(e,n,t[n]);return e},Qdt=(e,t)=>{var n={};for(var r in e)$Ie.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&UD)for(var r of UD(e))t.indexOf(r)<0&&RIe.call(e,r)&&(n[r]=e[r]);return n};const Jdt={orientation:"horizontal",spacing:"lg",offset:"xs",size:"sm"},NIe=I.forwardRef((e,t)=>{const n=Et("RadioGroup",Jdt,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,unstyled:f,offset:d,name:h}=n,p=Qdt(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","unstyled","offset","name"]),[m,g]=co({value:i,defaultValue:s,finalValue:"",onChange:o}),y=v=>g(v.currentTarget.value);return F.createElement(Ydt,{value:{value:m,onChange:y,size:l,name:h}},F.createElement(ls.Wrapper,qce(qce({labelElement:"div",size:l,__staticSelector:"RadioGroup",ref:t,unstyled:f},c),p),F.createElement(rK,{spacing:u,orientation:a,unstyled:f,role:"radiogroup",offset:d},r)))});NIe.displayName="@mantine/core/RadioGroup";var Zdt=Object.defineProperty,eht=Object.defineProperties,tht=Object.getOwnPropertyDescriptors,Wce=Object.getOwnPropertySymbols,nht=Object.prototype.hasOwnProperty,rht=Object.prototype.propertyIsEnumerable,Gce=(e,t,n)=>t in e?Zdt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iht=(e,t)=>{for(var n in t||(t={}))nht.call(t,n)&&Gce(e,n,t[n]);if(Wce)for(var n of Wce(t))rht.call(t,n)&&Gce(e,n,t[n]);return e},sht=(e,t)=>eht(e,tht(t));const pB={xs:16,sm:20,md:24,lg:30,xl:36},GP={xs:6,sm:8,md:10,lg:14,xl:16};var oht=yt((e,{size:t,color:n,transitionDuration:r,labelPosition:i,error:s},o)=>{const a=e.fn.variant({variant:"filled",color:n}),u=e.fn.variant({variant:"filled",color:"red"}).background;return{inner:{order:i==="left"?2:1,position:"relative",alignSelf:"flex-start"},icon:{ref:o("icon"),color:e.white,opacity:0,transform:"scale(0.75) translateY(2px)",transition:`opacity ${r}ms ${e.transitionTimingFunction}`,pointerEvents:"none",width:e.fn.size({sizes:GP,size:t}),height:e.fn.size({sizes:GP,size:t}),position:"absolute",top:`calc(50% - ${e.fn.size({sizes:GP,size:t})/2}px)`,left:`calc(50% - ${e.fn.size({sizes:GP,size:t})/2}px)`},radio:sht(iht({},e.fn.focusStyles()),{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`1px solid ${s?u:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,position:"relative",appearance:"none",width:e.fn.size({sizes:pB,size:t}),height:e.fn.size({sizes:pB,size:t}),borderRadius:e.fn.size({sizes:pB,size:t}),margin:0,display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${r}ms`,cursor:e.cursorType,"&:checked":{background:a.background,borderColor:a.background,[`& + .${o("icon")}`]:{opacity:1,transform:"scale(1)"}},"&:disabled":{borderColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[4],backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1],[`& + .${o("icon")}`]:{color:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[4]}}})}});const aht=oht;var uht=Object.defineProperty,zD=Object.getOwnPropertySymbols,DIe=Object.prototype.hasOwnProperty,MIe=Object.prototype.propertyIsEnumerable,Yce=(e,t,n)=>t in e?uht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YP=(e,t)=>{for(var n in t||(t={}))DIe.call(t,n)&&Yce(e,n,t[n]);if(zD)for(var n of zD(t))MIe.call(t,n)&&Yce(e,n,t[n]);return e},lht=(e,t)=>{var n={};for(var r in e)DIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zD)for(var r of zD(e))t.indexOf(r)<0&&MIe.call(e,r)&&(n[r]=e[r]);return n};const cht={icon:Gdt,transitionDuration:100,size:"sm",labelPosition:"right"},VD=I.forwardRef((e,t)=>{var n,r;const i=Et("Radio",cht,e),{className:s,style:o,id:a,label:u,size:l,title:c,disabled:f,color:d,classNames:h,styles:p,sx:m,icon:g,transitionDuration:y,wrapperProps:v,unstyled:_,labelPosition:w,description:x,error:E}=i,b=lht(i,["className","style","id","label","size","title","disabled","color","classNames","styles","sx","icon","transitionDuration","wrapperProps","unstyled","labelPosition","description","error"]),T=Kdt(),A=(n=T==null?void 0:T.size)!=null?n:l,C=e.size?l:A,{classes:P}=aht({color:d,size:C,transitionDuration:y,labelPosition:w,error:!!E},{classNames:h,styles:p,unstyled:_,name:"Radio"}),{systemStyles:N,rest:$}=Ec(b),M=ru(a),B=T?{checked:T.value===$.value,name:(r=$.name)!=null?r:T.name,onChange:T.onChange}:{};return F.createElement(c4,YP(YP({className:s,sx:m,style:o,id:M,size:C,labelPosition:w,label:u,description:x,error:E,disabled:f,__staticSelector:"Radio",classNames:h,styles:p,unstyled:_,"data-checked":B.checked||void 0},N),v),F.createElement("div",{className:P.inner},F.createElement("input",YP(YP({ref:t,className:P.radio,type:"radio",id:M,disabled:f},$),B)),F.createElement(g,{className:P.icon,"aria-hidden":!0})))});VD.displayName="@mantine/core/Radio";VD.Group=NIe;var fht=Object.defineProperty,dht=Object.defineProperties,hht=Object.getOwnPropertyDescriptors,Kce=Object.getOwnPropertySymbols,pht=Object.prototype.hasOwnProperty,mht=Object.prototype.propertyIsEnumerable,Xce=(e,t,n)=>t in e?fht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,KP=(e,t)=>{for(var n in t||(t={}))pht.call(t,n)&&Xce(e,n,t[n]);if(Kce)for(var n of Kce(t))mht.call(t,n)&&Xce(e,n,t[n]);return e},ght=(e,t)=>dht(e,hht(t));const k$=4,Qce={xs:"3px 6px",sm:"5px 10px",md:"7px 14px",lg:"9px 16px",xl:"12px 20px"};var yht=yt((e,{fullWidth:t,color:n,radius:r,shouldAnimate:i,transitionDuration:s,transitionTimingFunction:o,size:a,orientation:u},l)=>{const c=u==="vertical",f=e.fn.variant({variant:"filled",color:n});return{label:ght(KP(KP({ref:l("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(r),fontWeight:500,fontSize:a in e.fontSizes?e.fontSizes[a]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:Qce[a in Qce?a:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black}}),control:{ref:l("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${i?0:s}ms ${o||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:c?"1px 0 0 0":"0 0 0 1px",borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${l("label")}`]:KP({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${l("label")}`]:KP({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}}},root:{position:"relative",display:t||c?"flex":"inline-flex",width:c&&!t?"max-content":"auto",flexDirection:c?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(r),overflow:"hidden",padding:k$},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${l("control")}`]:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important"},borderRadius:e.fn.radius(r),boxShadow:i?n||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:i?n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},labelActive:{"&, &:hover":{color:n||e.colorScheme==="dark"?e.white:e.black}},disabled:{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed"}},active:{boxSizing:"border-box",borderRadius:e.fn.radius(r),position:"absolute",zIndex:1,boxShadow:n||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${i?0:s}ms ${e.transitionTimingFunction}, width ${i?0:s/2}ms ${o||e.transitionTimingFunction}`,backgroundColor:n?f.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const vht=yht;var _ht=Object.defineProperty,HD=Object.getOwnPropertySymbols,LIe=Object.prototype.hasOwnProperty,FIe=Object.prototype.propertyIsEnumerable,Jce=(e,t,n)=>t in e?_ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bht=(e,t)=>{for(var n in t||(t={}))LIe.call(t,n)&&Jce(e,n,t[n]);if(HD)for(var n of HD(t))FIe.call(t,n)&&Jce(e,n,t[n]);return e},wht=(e,t)=>{var n={};for(var r in e)LIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HD)for(var r of HD(e))t.indexOf(r)<0&&FIe.call(e,r)&&(n[r]=e[r]);return n};const Eht={disabled:!1,size:"sm",transitionDuration:200},jIe=I.forwardRef((e,t)=>{var n,r,i,s;const o=Et("SegmentedControl",Eht,e),{className:a,disabled:u,data:l,name:c,value:f,onChange:d,color:h,fullWidth:p,radius:m,size:g,transitionDuration:y,transitionTimingFunction:v,classNames:_,styles:w,defaultValue:x,orientation:E,unstyled:b}=o,T=wht(o,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled"]),A=As(),C=t4(),P=A.respectReducedMotion?C:!1,N=l.map(me=>typeof me=="string"?{label:me,value:me}:me),$=I.useRef(),[M,B]=I.useState(!1),[z,W]=co({value:f,defaultValue:x,finalValue:Array.isArray(N)&&(s=(i=(n=N.find(me=>!me.disabled))==null?void 0:n.value)!=null?i:(r=N[0])==null?void 0:r.value)!=null?s:null,onChange:d}),{classes:U,cx:Y}=vht({size:g,fullWidth:p,color:h,radius:m,shouldAnimate:P||!M,transitionDuration:y,transitionTimingFunction:v,orientation:E},{classNames:_,styles:w,unstyled:b,name:"SegmentedControl"}),[q,D]=I.useState({width:0,height:0,translate:[0,0]}),L=ru(c),G=I.useRef({}),[V,H]=Wv();NY(()=>{$.current?B(!0):($.current=!0,B(!1))}),I.useEffect(()=>{if(z in G.current&&V.current){const me=G.current[z],ye=me.getBoundingClientRect(),de=me.offsetWidth/ye.width,we=ye.width*de||0,he=ye.height*de||0,He=H.width-me.parentElement.offsetLeft+k$-we,Me=me.parentElement.offsetLeft-k$;D({width:we,height:he,translate:[A.dir==="rtl"?He:Me,me.parentElement.offsetTop-k$]})}},[z,H]);const te=N.map(me=>F.createElement("div",{className:Y(U.control,{[U.controlActive]:z===me.value}),key:me.value},F.createElement("input",{className:U.input,disabled:u||me.disabled,type:"radio",name:L,value:me.value,id:`${L}-${me.value}`,checked:z===me.value,onChange:()=>W(me.value)}),F.createElement("label",{className:Y(U.label,{[U.labelActive]:z===me.value,[U.disabled]:u||me.disabled}),htmlFor:`${L}-${me.value}`,ref:ye=>{G.current[me.value]=ye}},me.label))),le=Hs(V,t);return N.length===0?null:F.createElement(dt,bht({className:Y(U.root,a),ref:le},T),typeof z=="string"&&M&&F.createElement(dt,{component:"span",className:U.active,sx:{width:q.width,height:q.height,transform:`translate(${q.translate[0]}px, ${q.translate[1]}px )`}}),te)});jIe.displayName="@mantine/core/SegmentedControl";function Sht({data:e,searchable:t,limit:n,searchValue:r,filter:i,value:s,filterDataOnExactSearchMatch:o}){if(!t)return e;const a=s!=null&&e.find(l=>l.value===s)||null;if(a&&!o&&(a==null?void 0:a.label)===r)return e;const u=[];for(let l=0;l<e.length&&(i(r,e[l])&&u.push(e[l]),!(u.length>=n));l+=1);return u}var xht=yt(()=>({input:{"&:not(:disabled)":{cursor:"pointer","&::selection":{backgroundColor:"transparent"}}}}));const Tht=xht;var Cht=Object.defineProperty,Aht=Object.defineProperties,Iht=Object.getOwnPropertyDescriptors,qD=Object.getOwnPropertySymbols,BIe=Object.prototype.hasOwnProperty,UIe=Object.prototype.propertyIsEnumerable,Zce=(e,t,n)=>t in e?Cht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rx=(e,t)=>{for(var n in t||(t={}))BIe.call(t,n)&&Zce(e,n,t[n]);if(qD)for(var n of qD(t))UIe.call(t,n)&&Zce(e,n,t[n]);return e},mB=(e,t)=>Aht(e,Iht(t)),Oht=(e,t)=>{var n={};for(var r in e)BIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qD)for(var r of qD(e))t.indexOf(r)<0&&UIe.call(e,r)&&(n[r]=e[r]);return n};function Pht(e,t){return t.label.toLowerCase().trim().includes(e.toLowerCase().trim())}function kht(e,t){return!!e&&!t.some(n=>n.label.toLowerCase()===e.toLowerCase())}const $ht={required:!1,size:"sm",shadow:"sm",itemComponent:BY,transition:"fade",transitionDuration:0,initiallyOpened:!1,filter:Pht,maxDropdownHeight:220,searchable:!1,clearable:!1,limit:1/0,disabled:!1,creatable:!1,shouldCreate:kht,selectOnBlur:!1,switchDirectionOnFlip:!1,filterDataOnExactSearchMatch:!1,zIndex:xa("popover"),clearButtonTabIndex:0,positionDependencies:[],dropdownPosition:"flip"},d4=I.forwardRef((e,t)=>{const n=Z2e("Select",$ht,e),{inputProps:r,wrapperProps:i,shadow:s,data:o,value:a,defaultValue:u,onChange:l,itemComponent:c,onKeyDown:f,onBlur:d,onFocus:h,transition:p,transitionDuration:m,initiallyOpened:g,transitionTimingFunction:y,unstyled:v,classNames:_,styles:w,filter:x,maxDropdownHeight:E,searchable:b,clearable:T,nothingFound:A,clearButtonLabel:C,limit:P,disabled:N,onSearchChange:$,searchValue:M,rightSection:B,rightSectionWidth:z,creatable:W,getCreateLabel:U,shouldCreate:Y,selectOnBlur:q,onCreate:D,dropdownComponent:L,onDropdownClose:G,onDropdownOpen:V,withinPortal:H,switchDirectionOnFlip:te,zIndex:le,name:me,dropdownPosition:ye,allowDeselect:de,placeholder:we,filterDataOnExactSearchMatch:he,clearButtonTabIndex:He,form:Me,positionDependencies:Ke,readOnly:je}=n,De=Oht(n,["inputProps","wrapperProps","shadow","data","value","defaultValue","onChange","itemComponent","onKeyDown","onBlur","onFocus","transition","transitionDuration","initiallyOpened","transitionTimingFunction","unstyled","classNames","styles","filter","maxDropdownHeight","searchable","clearable","nothingFound","clearButtonLabel","limit","disabled","onSearchChange","searchValue","rightSection","rightSectionWidth","creatable","getCreateLabel","shouldCreate","selectOnBlur","onCreate","dropdownComponent","onDropdownClose","onDropdownOpen","withinPortal","switchDirectionOnFlip","zIndex","name","dropdownPosition","allowDeselect","placeholder","filterDataOnExactSearchMatch","clearButtonTabIndex","form","positionDependencies","readOnly"]),{classes:qe,cx:Qt,theme:rt}=Tht(),[We,Pt]=I.useState(g),[ut,mt]=I.useState(-1),vt=I.useRef(),Ht=I.useRef({}),[Xt,fe]=I.useState("column"),xe=Xt==="column",{scrollIntoView:Le,targetRef:ft,scrollableRef:Ze}=Xxe({duration:0,offset:5,cancelable:!1,isList:!0}),ct=de===void 0?T:de,ot=ke=>{if(We!==ke){Pt(ke);const bt=ke?V:G;typeof bt=="function"&&bt()}},At=W&&typeof U=="function";let Tn=null;const Zt=o.map(ke=>typeof ke=="string"?{label:ke,value:ke}:ke),Jt=gxe({data:Zt}),[rr,Bn,zo]=co({value:a,defaultValue:u,finalValue:null,onChange:l}),mr=Jt.find(ke=>ke.value===rr),[Di,zr]=co({value:M,defaultValue:(mr==null?void 0:mr.label)||"",finalValue:void 0,onChange:$}),Pr=ke=>{zr(ke),b&&typeof $=="function"&&$(ke)},Vr=()=>{var ke;je||(Bn(null),zo||Pr(""),(ke=vt.current)==null||ke.focus())};I.useEffect(()=>{const ke=Jt.find(bt=>bt.value===rr);ke?Pr(ke.label):(!At||!rr)&&Pr("")},[rr]),I.useEffect(()=>{mr&&(!b||!We)&&Pr(mr.label)},[mr==null?void 0:mr.label]);const ir=ke=>{if(!je)if(ct&&(mr==null?void 0:mr.value)===ke.value)Bn(null),ot(!1);else{if(ke.creatable&&typeof D=="function"){const bt=D(ke.value);typeof bt<"u"&&bt!==null&&Bn(typeof bt=="string"?bt:bt.value)}else Bn(ke.value);zo||Pr(ke.label),mt(-1),ot(!1),vt.current.focus()}},St=Sht({data:Jt,searchable:b,limit:P,searchValue:Di,filter:x,filterDataOnExactSearchMatch:he,value:rr});At&&Y(Di,St)&&(Tn=U(Di),St.push({label:Di,value:Di,creatable:!0}));const gr=(ke,bt,Ft)=>{let It=ke;for(;Ft(It);)if(It=bt(It),!St[It].disabled)return It;return ke};Fs(()=>{mt(-1)},[Di]);const di=rr?St.findIndex(ke=>ke.value===rr):0,Un=!je&&(St.length>0?We:We&&!!A),hs=()=>{mt(ke=>{var bt;const Ft=gr(ke,It=>It-1,It=>It>0);return ft.current=Ht.current[(bt=St[Ft])==null?void 0:bt.value],Un&&Le({alignment:xe?"start":"end"}),Ft})},ps=()=>{mt(ke=>{var bt;const Ft=gr(ke,It=>It+1,It=>It<St.length-1);return ft.current=Ht.current[(bt=St[Ft])==null?void 0:bt.value],Un&&Le({alignment:xe?"end":"start"}),Ft})},oe=()=>window.setTimeout(()=>{var ke;ft.current=Ht.current[(ke=St[di])==null?void 0:ke.value],Le({alignment:xe?"end":"start"})},0);Fs(()=>{Un&&oe()},[Un]);const ne=ke=>{switch(typeof f=="function"&&f(ke),ke.key){case"ArrowUp":{ke.preventDefault(),We?xe?hs():ps():(mt(di),ot(!0),oe());break}case"ArrowDown":{ke.preventDefault(),We?xe?ps():hs():(mt(di),ot(!0),oe());break}case"Home":{if(!b){ke.preventDefault(),We||ot(!0);const bt=St.findIndex(Ft=>!Ft.disabled);mt(bt),Un&&Le({alignment:xe?"end":"start"})}break}case"End":{if(!b){ke.preventDefault(),We||ot(!0);const bt=St.map(Ft=>!!Ft.disabled).lastIndexOf(!1);mt(bt),Un&&Le({alignment:xe?"end":"start"})}break}case"Escape":{ke.preventDefault(),ot(!1),mt(-1);break}case" ":{b||(ke.preventDefault(),St[ut]&&We?ir(St[ut]):(ot(!0),mt(di),oe()));break}case"Enter":b||ke.preventDefault(),St[ut]&&We&&(ke.preventDefault(),ir(St[ut]))}},ue=ke=>{typeof d=="function"&&d(ke);const bt=Jt.find(Ft=>Ft.value===rr);q&&St[ut]&&We&&ir(St[ut]),Pr((bt==null?void 0:bt.label)||""),ot(!1)},Ee=ke=>{typeof h=="function"&&h(ke),b&&ot(!0)},Se=ke=>{je||(Pr(ke.currentTarget.value),T&&ke.currentTarget.value===""&&Bn(null),mt(-1),ot(!0))},xt=()=>{je||(ot(!We),rr&&!We&&mt(di))};return F.createElement(ls.Wrapper,mB(Rx({},i),{__staticSelector:"Select"}),F.createElement(Xg,{opened:Un,transition:p,transitionDuration:m,shadow:"sm",withinPortal:H,__staticSelector:"Select",onDirectionChange:fe,switchDirectionOnFlip:te,zIndex:le,dropdownPosition:ye,positionDependencies:Ke,classNames:_,styles:w,unstyled:v},F.createElement(Xg.Target,null,F.createElement("div",{role:"combobox","aria-haspopup":"listbox","aria-owns":Un?`${r.id}-items`:null,"aria-controls":r.id,"aria-expanded":Un,onMouseLeave:()=>mt(-1),tabIndex:-1},F.createElement("input",{type:"hidden",name:me,value:rr||"",form:Me,disabled:N}),F.createElement(ls,Rx(mB(Rx(Rx({autoComplete:"off",type:"search"},r),De),{ref:Hs(t,vt),onKeyDown:ne,__staticSelector:"Select",value:Di,placeholder:we,onChange:Se,"aria-autocomplete":"list","aria-controls":Un?`${r.id}-items`:null,"aria-activedescendant":ut>=0?`${r.id}-${ut}`:null,onMouseDown:xt,onBlur:ue,onFocus:Ee,readOnly:!b||je,disabled:N,"data-mantine-stop-propagation":Un,name:null,classNames:mB(Rx({},_),{input:Qt({[qe.input]:!b},_==null?void 0:_.input)})}),iIe({theme:rt,rightSection:B,rightSectionWidth:z,styles:w,size:r.size,shouldClear:T&&!!mr,clearButtonLabel:C,onClear:Vr,error:i.error,clearButtonTabIndex:He,disabled:N,readOnly:je}))))),F.createElement(Xg.Dropdown,{component:L||a4,maxHeight:E,direction:Xt,id:r.id,innerRef:Ze,__staticSelector:"Select",classNames:_,styles:w},F.createElement(jY,{data:St,hovered:ut,classNames:_,styles:w,isItemSelected:ke=>ke===rr,uuid:r.id,__staticSelector:"Select",onItemHover:mt,onItemSelect:ir,itemsRefs:Ht,itemComponent:c,size:r.size,nothingFound:A,creatable:At&&!!Tn,createLabel:Tn,"aria-label":i.label,unstyled:v}))))});d4.displayName="@mantine/core/Select";function WD({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function q7({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}var Rht=Object.defineProperty,Nht=Object.defineProperties,Dht=Object.getOwnPropertyDescriptors,efe=Object.getOwnPropertySymbols,Mht=Object.prototype.hasOwnProperty,Lht=Object.prototype.propertyIsEnumerable,tfe=(e,t,n)=>t in e?Rht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fht=(e,t)=>{for(var n in t||(t={}))Mht.call(t,n)&&tfe(e,n,t[n]);if(efe)for(var n of efe(t))Lht.call(t,n)&&tfe(e,n,t[n]);return e},jht=(e,t)=>Nht(e,Dht(t));const Eu={xs:4,sm:6,md:8,lg:10,xl:12};var Bht=yt((e,{size:t,disabled:n})=>({root:jht(Fht({},e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",outline:0,height:e.fn.size({sizes:Eu,size:t})*2,display:"flex",alignItems:"center",cursor:n?"not-allowed":"pointer",touchAction:"none"})}));const Uht=Bht;var zht=Object.defineProperty,Vht=Object.defineProperties,Hht=Object.getOwnPropertyDescriptors,nfe=Object.getOwnPropertySymbols,qht=Object.prototype.hasOwnProperty,Wht=Object.prototype.propertyIsEnumerable,rfe=(e,t,n)=>t in e?zht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ght=(e,t)=>{for(var n in t||(t={}))qht.call(t,n)&&rfe(e,n,t[n]);if(nfe)for(var n of nfe(t))Wht.call(t,n)&&rfe(e,n,t[n]);return e},Yht=(e,t)=>Vht(e,Hht(t)),Kht=yt((e,{color:t,size:n,disabled:r,thumbSize:i})=>({label:{position:"absolute",top:-36,backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[9],fontSize:e.fontSizes.xs,color:e.white,padding:`calc(${e.spacing.xs}px / 2)`,borderRadius:e.radius.sm,whiteSpace:"nowrap",pointerEvents:"none",userSelect:"none",touchAction:"none"},thumb:Yht(Ght({},e.fn.focusStyles()),{boxSizing:"border-box",position:"absolute",display:r?"none":"flex",height:i||e.fn.size({sizes:Eu,size:n})*2,width:i||e.fn.size({sizes:Eu,size:n})*2,backgroundColor:e.colorScheme==="dark"?e.fn.themeColor(t,e.fn.primaryShade()):e.white,border:`4px solid ${e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade())}`,color:e.colorScheme==="dark"?e.white:e.fn.themeColor(t,e.fn.primaryShade()),transform:"translate(-50%, -50%)",top:"50%",cursor:"pointer",borderRadius:1e3,alignItems:"center",justifyContent:"center",transitionDuration:"100ms",transitionProperty:"box-shadow, transform",transitionTimingFunction:e.transitionTimingFunction,zIndex:3,userSelect:"none",touchAction:"none"}),dragging:{transform:"translate(-50%, -50%) scale(1.05)",boxShadow:e.shadows.sm}}));const Xht=Kht,GD=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,color:a,classNames:u,styles:l,size:c,labelTransition:f,labelTransitionDuration:d,labelTransitionTimingFunction:h,labelAlwaysOn:p,thumbLabel:m,onFocus:g,onBlur:y,showLabelOnHover:v,children:_=null,disabled:w,unstyled:x,thumbSize:E},b)=>{const{classes:T,cx:A,theme:C}=Xht({color:a,size:c,disabled:w,thumbSize:E},{classNames:u,styles:l,unstyled:x,name:"Slider"}),[P,N]=I.useState(!1),$=p||s||P||v;return F.createElement(dt,{tabIndex:0,role:"slider","aria-label":m,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,className:A(T.thumb,{[T.dragging]:s}),onFocus:()=>{N(!0),typeof g=="function"&&g()},onBlur:()=>{N(!1),typeof y=="function"&&y()},onTouchStart:o,onMouseDown:o,onClick:M=>M.stopPropagation(),style:{[C.dir==="rtl"?"right":"left"]:`${r}%`}},_,F.createElement(yI,{mounted:i!=null&&$,duration:d,transition:f,timingFunction:h||C.transitionTimingFunction},M=>F.createElement("div",{style:M,className:T.label},i)))});GD.displayName="@mantine/core/SliderThumb";function Qht({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}var Jht=yt((e,{size:t,color:n,disabled:r})=>({markWrapper:{position:"absolute",top:0,zIndex:2},mark:{boxSizing:"border-box",border:`${e.fn.size({size:t,sizes:Eu})>=8?"2px":"1px"} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,height:e.fn.size({sizes:Eu,size:t}),width:e.fn.size({sizes:Eu,size:t}),borderRadius:1e3,transform:`translateX(-${e.fn.size({sizes:Eu,size:t})/2}px)`,backgroundColor:e.white},markFilled:{borderColor:r?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:n}).background},markLabel:{transform:"translate(-50%, 0)",fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6],marginTop:`calc(${e.spacing.xs}px / 2)`,whiteSpace:"nowrap"}}));const Zht=Jht;function zIe({marks:e,color:t,size:n,min:r,max:i,value:s,classNames:o,styles:a,offset:u,onChange:l,disabled:c,unstyled:f,inverted:d}){const{classes:h,cx:p}=Zht({size:n,color:t,disabled:c},{classNames:o,styles:a,unstyled:f,name:"Slider"}),m=e.map((g,y)=>F.createElement(dt,{className:h.markWrapper,sx:{left:`${WD({value:g.value,min:r,max:i})}%`},key:y},F.createElement("div",{className:p(h.mark,{[h.markFilled]:Qht({mark:g,value:s,offset:u,inverted:d})})}),g.label&&F.createElement("div",{className:h.markLabel,onMouseDown:v=>{v.stopPropagation(),l(g.value)},onTouchStart:v=>{v.stopPropagation(),l(g.value)}},g.label)));return F.createElement("div",null,m)}zIe.displayName="@mantine/core/SliderMarks";var ept=yt((e,{radius:t,size:n,color:r,disabled:i,inverted:s})=>({track:{position:"relative",height:e.fn.size({sizes:Eu,size:n}),width:"100%",marginRight:e.fn.size({size:n,sizes:Eu}),marginLeft:e.fn.size({size:n,sizes:Eu}),"&::before":{content:'""',position:"absolute",top:0,bottom:0,borderRadius:e.fn.size({size:t,sizes:e.radius}),right:-e.fn.size({size:n,sizes:Eu}),left:-e.fn.size({size:n,sizes:Eu}),backgroundColor:s?i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],zIndex:0}},bar:{position:"absolute",zIndex:1,top:0,bottom:0,backgroundColor:s?e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]:i?e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]:e.fn.variant({variant:"filled",color:r}).background,borderRadius:e.fn.size({size:t,sizes:e.radius})}}));const tpt=ept;var npt=Object.defineProperty,rpt=Object.defineProperties,ipt=Object.getOwnPropertyDescriptors,YD=Object.getOwnPropertySymbols,VIe=Object.prototype.hasOwnProperty,HIe=Object.prototype.propertyIsEnumerable,ife=(e,t,n)=>t in e?npt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,spt=(e,t)=>{for(var n in t||(t={}))VIe.call(t,n)&&ife(e,n,t[n]);if(YD)for(var n of YD(t))HIe.call(t,n)&&ife(e,n,t[n]);return e},opt=(e,t)=>rpt(e,ipt(t)),apt=(e,t)=>{var n={};for(var r in e)VIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YD)for(var r of YD(e))t.indexOf(r)<0&&HIe.call(e,r)&&(n[r]=e[r]);return n};function uK(e){var t=e,{filled:n,size:r,color:i,classNames:s,styles:o,radius:a,children:u,offset:l,onMouseLeave:c,onMouseEnter:f,disabled:d,marksOffset:h,unstyled:p,inverted:m}=t,g=apt(t,["filled","size","color","classNames","styles","radius","children","offset","onMouseLeave","onMouseEnter","disabled","marksOffset","unstyled","inverted"]);const{classes:y}=tpt({color:i,size:r,radius:a,disabled:d,inverted:m},{classNames:s,styles:o,unstyled:p,name:"Slider"});return F.createElement("div",{className:y.track,onMouseLeave:c,onMouseEnter:f},F.createElement(dt,{className:y.bar,sx:v=>({left:`calc(${l}% - ${v.fn.size({size:r,sizes:Eu})}px)`,width:`calc(${n}% + ${v.fn.size({size:r,sizes:Eu})}px)`})}),u,F.createElement(zIe,opt(spt({},g),{size:r,color:i,offset:h,classNames:s,styles:o,disabled:d,unstyled:p,inverted:m})))}uK.displayName="@mantine/core/SliderTrack";var upt=Object.defineProperty,lpt=Object.defineProperties,cpt=Object.getOwnPropertyDescriptors,KD=Object.getOwnPropertySymbols,qIe=Object.prototype.hasOwnProperty,WIe=Object.prototype.propertyIsEnumerable,sfe=(e,t,n)=>t in e?upt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fpt=(e,t)=>{for(var n in t||(t={}))qIe.call(t,n)&&sfe(e,n,t[n]);if(KD)for(var n of KD(t))WIe.call(t,n)&&sfe(e,n,t[n]);return e},dpt=(e,t)=>lpt(e,cpt(t)),hpt=(e,t)=>{var n={};for(var r in e)qIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KD)for(var r of KD(e))t.indexOf(r)<0&&WIe.call(e,r)&&(n[r]=e[r]);return n};const lK=I.forwardRef((e,t)=>{var n=e,{className:r,size:i,classNames:s,styles:o,disabled:a,unstyled:u}=n,l=hpt(n,["className","size","classNames","styles","disabled","unstyled"]);const{classes:c,cx:f}=Uht({size:i,disabled:a},{classNames:s,styles:o,unstyled:u,name:"Slider"});return F.createElement(dt,dpt(fpt({},l),{tabIndex:-1,className:f(c.root,r),ref:t}))});lK.displayName="@mantine/core/SliderRoot";var ppt=Object.defineProperty,mpt=Object.defineProperties,gpt=Object.getOwnPropertyDescriptors,XD=Object.getOwnPropertySymbols,GIe=Object.prototype.hasOwnProperty,YIe=Object.prototype.propertyIsEnumerable,ofe=(e,t,n)=>t in e?ppt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ypt=(e,t)=>{for(var n in t||(t={}))GIe.call(t,n)&&ofe(e,n,t[n]);if(XD)for(var n of XD(t))YIe.call(t,n)&&ofe(e,n,t[n]);return e},vpt=(e,t)=>mpt(e,gpt(t)),_pt=(e,t)=>{var n={};for(var r in e)GIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XD)for(var r of XD(e))t.indexOf(r)<0&&YIe.call(e,r)&&(n[r]=e[r]);return n};const bpt={size:"md",radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},cK=I.forwardRef((e,t)=>{const n=Et("Slider",bpt,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:x,labelAlwaysOn:E,thumbLabel:b,showLabelOnHover:T,thumbChildren:A,disabled:C,unstyled:P,thumbSize:N,scale:$,inverted:M}=n,B=_pt(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),z=As(),[W,U]=I.useState(!1),[Y,q]=co({value:typeof o=="number"?wf(o,f,d):o,defaultValue:typeof m=="number"?wf(m,f,d):m,finalValue:wf(0,f,d),onChange:a}),D=I.useRef(Y),L=I.useRef(),G=WD({value:Y,min:f,max:d}),V=$(Y),H=typeof v=="function"?v(V):v,te=I.useCallback(({x:we})=>{if(!C){const he=q7({value:we,min:f,max:d,step:h,precision:p});q(he),D.current=he}},[C,f,d,h,p]),{ref:le,active:me}=Kxe(te,{onScrubEnd:()=>u==null?void 0:u(D.current)},z.dir),ye=we=>{we.stopPropagation()},de=we=>{if(!C)switch(we.key){case"ArrowUp":{we.preventDefault(),L.current.focus();const he=Math.min(Math.max(Y+h,f),d);u==null||u(he),q(he);break}case"ArrowRight":{we.preventDefault(),L.current.focus();const he=Math.min(Math.max(z.dir==="rtl"?Y-h:Y+h,f),d);u==null||u(he),q(he);break}case"ArrowDown":{we.preventDefault(),L.current.focus();const he=Math.min(Math.max(Y-h,f),d);u==null||u(he),q(he);break}case"ArrowLeft":{we.preventDefault(),L.current.focus();const he=Math.min(Math.max(z.dir==="rtl"?Y+h:Y-h,f),d);u==null||u(he),q(he);break}case"Home":{we.preventDefault(),L.current.focus(),u==null||u(f),q(f);break}case"End":{we.preventDefault(),L.current.focus(),u==null||u(d),q(d);break}}};return F.createElement(lK,vpt(ypt({},B),{size:l,ref:Hs(le,t),onKeyDownCapture:de,onMouseDownCapture:()=>{var we;return(we=le.current)==null?void 0:we.focus()},classNames:r,styles:i,disabled:C,unstyled:P}),F.createElement(uK,{inverted:M,offset:0,filled:G,marks:y,size:l,radius:c,color:s,min:f,max:d,value:V,onChange:q,onMouseEnter:T?()=>U(!0):void 0,onMouseLeave:T?()=>U(!1):void 0,classNames:r,styles:i,disabled:C,unstyled:P},F.createElement(GD,{max:d,min:f,value:V,position:G,dragging:me,color:s,size:l,label:H,ref:L,onMouseDown:ye,labelTransition:_,labelTransitionDuration:w,labelTransitionTimingFunction:x,labelAlwaysOn:E,classNames:r,styles:i,thumbLabel:b,showLabelOnHover:T&&W,disabled:C,unstyled:P,thumbSize:N},A)),F.createElement("input",{type:"hidden",name:g,value:V}))});cK.displayName="@mantine/core/Slider";function wpt(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}var Ept=Object.defineProperty,Spt=Object.defineProperties,xpt=Object.getOwnPropertyDescriptors,QD=Object.getOwnPropertySymbols,KIe=Object.prototype.hasOwnProperty,XIe=Object.prototype.propertyIsEnumerable,afe=(e,t,n)=>t in e?Ept(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gB=(e,t)=>{for(var n in t||(t={}))KIe.call(t,n)&&afe(e,n,t[n]);if(QD)for(var n of QD(t))XIe.call(t,n)&&afe(e,n,t[n]);return e},yB=(e,t)=>Spt(e,xpt(t)),Tpt=(e,t)=>{var n={};for(var r in e)KIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QD)for(var r of QD(e))t.indexOf(r)<0&&XIe.call(e,r)&&(n[r]=e[r]);return n};const Cpt={size:"md",radius:"xl",min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransition:"skew-down",labelTransitionDuration:0,labelAlwaysOn:!1,thumbFromLabel:"",thumbToLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},W7=I.forwardRef((e,t)=>{const n=Et("RangeSlider",Cpt,e),{classNames:r,styles:i,color:s,value:o,onChange:a,onChangeEnd:u,size:l,radius:c,min:f,max:d,minRange:h,step:p,precision:m,defaultValue:g,name:y,marks:v,label:_,labelTransition:w,labelTransitionDuration:x,labelTransitionTimingFunction:E,labelAlwaysOn:b,thumbFromLabel:T,thumbToLabel:A,showLabelOnHover:C,thumbChildren:P,disabled:N,unstyled:$,thumbSize:M,scale:B,inverted:z}=n,W=Tpt(n,["classNames","styles","color","value","onChange","onChangeEnd","size","radius","min","max","minRange","step","precision","defaultValue","name","marks","label","labelTransition","labelTransitionDuration","labelTransitionTimingFunction","labelAlwaysOn","thumbFromLabel","thumbToLabel","showLabelOnHover","thumbChildren","disabled","unstyled","thumbSize","scale","inverted"]),U=As(),[Y,q]=I.useState(-1),[D,L]=I.useState(!1),[G,V]=co({value:o,defaultValue:g,finalValue:[f,d],onChange:a}),H=I.useRef(G),te=I.useRef([]),le=I.useRef(void 0),me=[WD({value:G[0],min:f,max:d}),WD({value:G[1],min:f,max:d})],ye=rt=>{V(rt),H.current=rt};I.useEffect(()=>{Array.isArray(o)&&(H.current=o)},Array.isArray(o)?[o[0],o[1]]:[null,null]);const de=(rt,We,Pt)=>{const ut=[...H.current];ut[We]=rt,We===0&&(rt>ut[1]-(h-1e-9)&&(ut[1]=Math.min(rt+h,d)),rt>(d-(h-1e-9)||f)&&(ut[We]=H.current[We])),We===1&&(rt<ut[0]+h&&(ut[0]=Math.max(rt-h,f)),rt<ut[0]+h&&(ut[We]=H.current[We])),ye(ut),Pt&&(u==null||u(H.current))},we=rt=>{if(!N){const We=q7({value:rt,min:f,max:d,step:p,precision:m});de(We,le.current,!1)}},{ref:he,active:He}=Kxe(({x:rt})=>we(rt),{onScrubEnd:()=>u==null?void 0:u(H.current)},U.dir);function Me(rt,We){rt.stopPropagation(),le.current=We}const Ke=rt=>{he.current.focus();const We=he.current.getBoundingClientRect(),Pt=wpt(rt.nativeEvent),ut=q7({value:Pt-We.left,max:d,min:f,step:p,containerWidth:We.width}),mt=Math.abs(G[0]-ut)>Math.abs(G[1]-ut)?1:0,vt=U.dir==="ltr"?mt:mt===1?0:1;le.current=vt},je=()=>Y!==1&&Y!==0?(q(0),0):Y,De=rt=>{if(!N)switch(rt.key){case"ArrowUp":{rt.preventDefault();const We=je();te.current[We].focus(),de(Math.min(Math.max(H.current[We]+p,f),d),We,!0);break}case"ArrowRight":{rt.preventDefault();const We=je();te.current[We].focus(),de(Math.min(Math.max(U.dir==="rtl"?H.current[We]-p:H.current[We]+p,f),d),We,!0);break}case"ArrowDown":{rt.preventDefault();const We=je();te.current[We].focus(),de(Math.min(Math.max(H.current[We]-p,f),d),We,!0);break}case"ArrowLeft":{rt.preventDefault();const We=je();te.current[We].focus(),de(Math.min(Math.max(U.dir==="rtl"?H.current[We]+p:H.current[We]-p,f),d),We,!0);break}}},qe={max:d,min:f,color:s,size:l,labelTransition:w,labelTransitionDuration:x,labelTransitionTimingFunction:E,labelAlwaysOn:b,onBlur:()=>q(-1),classNames:r,styles:i},Qt=Array.isArray(P);return F.createElement(lK,yB(gB({},W),{size:l,ref:Hs(he,t),onTouchStartCapture:Ke,onTouchEndCapture:()=>{le.current=-1},onMouseDownCapture:Ke,onMouseUpCapture:()=>{le.current=-1},onKeyDownCapture:De,styles:i,classNames:r,disabled:N,unstyled:$}),F.createElement(uK,{offset:me[0],marksOffset:G[0],filled:me[1]-me[0],marks:v,inverted:z,size:l,radius:c,color:s,min:f,max:d,value:G[1],styles:i,classNames:r,onMouseEnter:C?()=>L(!0):void 0,onMouseLeave:C?()=>L(!1):void 0,onChange:rt=>{const We=Math.abs(G[0]-rt)>Math.abs(G[1]-rt)?1:0,Pt=[...G];Pt[We]=rt,ye(Pt)},disabled:N,unstyled:$},F.createElement(GD,yB(gB({},qe),{value:B(G[0]),position:me[0],dragging:He,label:typeof _=="function"?_(B(G[0])):_,ref:rt=>{te.current[0]=rt},thumbLabel:T,onMouseDown:rt=>Me(rt,0),onFocus:()=>q(0),showLabelOnHover:C&&D,disabled:N,unstyled:$,thumbSize:M}),Qt?P[0]:P),F.createElement(GD,yB(gB({},qe),{thumbLabel:A,value:B(G[1]),position:me[1],dragging:He,label:typeof _=="function"?_(B(G[1])):_,ref:rt=>{te.current[1]=rt},onMouseDown:rt=>Me(rt,1),onFocus:()=>q(1),showLabelOnHover:C&&D,disabled:N,unstyled:$,thumbSize:M}),Qt?P[1]:P)),F.createElement("input",{type:"hidden",name:`${y}_from`,value:G[0]}),F.createElement("input",{type:"hidden",name:`${y}_to`,value:G[1]}))});W7.displayName="@mantine/core/RangeSlider";var Apt=Object.defineProperty,JD=Object.getOwnPropertySymbols,QIe=Object.prototype.hasOwnProperty,JIe=Object.prototype.propertyIsEnumerable,ufe=(e,t,n)=>t in e?Apt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ipt=(e,t)=>{for(var n in t||(t={}))QIe.call(t,n)&&ufe(e,n,t[n]);if(JD)for(var n of JD(t))JIe.call(t,n)&&ufe(e,n,t[n]);return e},Opt=(e,t)=>{var n={};for(var r in e)QIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JD)for(var r of JD(e))t.indexOf(r)<0&&JIe.call(e,r)&&(n[r]=e[r]);return n};const Ppt={w:0,h:0},Ef=I.forwardRef((e,t)=>{const n=Et("Space",Ppt,e),{w:r,h:i,sx:s}=n,o=Opt(n,["w","h","sx"]);return F.createElement(dt,Ipt({ref:t,sx:[a=>{const u=a.fn.size({size:r,sizes:a.spacing}),l=a.fn.size({size:i,sizes:a.spacing});return{width:u,height:l,minWidth:u,minHeight:l}},...m0(s)]},o))});Ef.displayName="@mantine/core/Space";var kpt=yt((e,{transitionDuration:t})=>({control:{},root:{position:"relative"},content:{display:"flex",flexDirection:"column",overflow:"hidden",transitionProperty:"max-height",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:`${t}ms`,"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":void 0}}}));const $pt=kpt;var Rpt=Object.defineProperty,ZD=Object.getOwnPropertySymbols,ZIe=Object.prototype.hasOwnProperty,eOe=Object.prototype.propertyIsEnumerable,lfe=(e,t,n)=>t in e?Rpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Npt=(e,t)=>{for(var n in t||(t={}))ZIe.call(t,n)&&lfe(e,n,t[n]);if(ZD)for(var n of ZD(t))eOe.call(t,n)&&lfe(e,n,t[n]);return e},Dpt=(e,t)=>{var n={};for(var r in e)ZIe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZD)for(var r of ZD(e))t.indexOf(r)<0&&eOe.call(e,r)&&(n[r]=e[r]);return n};const Mpt={maxHeight:100,transitionDuration:200,initialState:!1},tOe=I.forwardRef((e,t)=>{const n=Et("Spoiler",Mpt,e),{className:r,children:i,maxHeight:s,hideLabel:o,showLabel:a,transitionDuration:u,controlRef:l,initialState:c,classNames:f,styles:d,unstyled:h}=n,p=Dpt(n,["className","children","maxHeight","hideLabel","showLabel","transitionDuration","controlRef","initialState","classNames","styles","unstyled"]),{classes:m,cx:g}=$pt({transitionDuration:u},{classNames:f,styles:d,unstyled:h,name:"Spoiler"}),[y,v]=I.useState(c),[_,w]=I.useState(c),{ref:x,height:E}=VJe(),b=y?o:a;return I.useEffect(()=>{w(s<E)},[E,s,i]),F.createElement(dt,Npt({className:g(m.root,r),ref:t},p),F.createElement("div",{className:m.content,style:{maxHeight:y?E||void 0:s}},F.createElement("div",{ref:x},i)),_&&F.createElement(n4,{component:"button",ref:l,onClick:()=>v(T=>!T),className:m.control},b))});tOe.displayName="@mantine/core/Spoiler";const nOe=I.createContext(null),Lpt=nOe.Provider,Fpt=()=>I.useContext(nOe);var jpt=Object.defineProperty,e3=Object.getOwnPropertySymbols,rOe=Object.prototype.hasOwnProperty,iOe=Object.prototype.propertyIsEnumerable,cfe=(e,t,n)=>t in e?jpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ffe=(e,t)=>{for(var n in t||(t={}))rOe.call(t,n)&&cfe(e,n,t[n]);if(e3)for(var n of e3(t))iOe.call(t,n)&&cfe(e,n,t[n]);return e},Bpt=(e,t)=>{var n={};for(var r in e)rOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&e3)for(var r of e3(e))t.indexOf(r)<0&&iOe.call(e,r)&&(n[r]=e[r]);return n};const Upt={orientation:"horizontal",spacing:"lg",size:"sm",offset:"xs"},sOe=I.forwardRef((e,t)=>{const n=Et("SwitchGroup",Upt,e),{children:r,value:i,defaultValue:s,onChange:o,orientation:a,spacing:u,size:l,wrapperProps:c,offset:f}=n,d=Bpt(n,["children","value","defaultValue","onChange","orientation","spacing","size","wrapperProps","offset"]),[h,p]=co({value:i,defaultValue:s,finalValue:[],onChange:o}),m=g=>{const y=g.currentTarget.value;p(h.includes(y)?h.filter(v=>v!==y):[...h,y])};return F.createElement(Lpt,{value:{value:h,onChange:m,size:l}},F.createElement(ls.Wrapper,ffe(ffe({labelElement:"div",size:l,__staticSelector:"SwitchGroup",ref:t},c),d),F.createElement(rK,{spacing:u,orientation:a,offset:f},r)))});sOe.displayName="@mantine/core/SwitchGroup";var zpt=Object.defineProperty,Vpt=Object.defineProperties,Hpt=Object.getOwnPropertyDescriptors,dfe=Object.getOwnPropertySymbols,qpt=Object.prototype.hasOwnProperty,Wpt=Object.prototype.propertyIsEnumerable,hfe=(e,t,n)=>t in e?zpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gpt=(e,t)=>{for(var n in t||(t={}))qpt.call(t,n)&&hfe(e,n,t[n]);if(dfe)for(var n of dfe(t))Wpt.call(t,n)&&hfe(e,n,t[n]);return e},Ypt=(e,t)=>Vpt(e,Hpt(t));const Kpt={xs:16,sm:20,md:24,lg:30,xl:36},Xpt={xs:32,sm:38,md:46,lg:56,xl:72},Qpt={xs:12,sm:14,md:18,lg:22,xl:28},Jpt={xs:5,sm:6,md:7,lg:9,xl:11},Zpt={xs:4,sm:5,md:6,lg:8,xl:10};var emt=yt((e,{size:t,radius:n,color:r,labelPosition:i,error:s})=>{const o=e.fn.size({size:t,sizes:Qpt}),a=e.fn.size({size:n,sizes:e.radius}),u=e.fn.variant({variant:"filled",color:r}),l=e.fn.size({size:t,sizes:Xpt}),c=t==="xs"?1:2,f=e.fn.variant({variant:"filled",color:"red"}).background;return{input:{clip:"rect(1px, 1px, 1px, 1px)",height:"1px",overflow:"hidden",width:"1px",whiteSpace:"nowrap",padding:"0",WebkitClipPath:"inset(50%)",clipPath:"inset(50%)"},track:Ypt(Gpt({},e.fn.focusStyles("input:focus + &")),{cursor:e.cursorType,overflow:"hidden",WebkitTapHighlightColor:"transparent",position:"relative",borderRadius:a,backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[2],border:`1px solid ${s?f:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`,height:e.fn.size({size:t,sizes:Kpt}),minWidth:l,margin:0,transitionProperty:"background-color, border-color",transitionTimingFunction:e.transitionTimingFunction,transitionDuration:"150ms",boxSizing:"border-box",appearance:"none",display:"flex",alignItems:"center",fontSize:e.fn.size({size:t,sizes:Jpt}),fontWeight:600,order:i==="left"?2:1,userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none",zIndex:0,lineHeight:0,color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[6],transition:`color 150ms ${e.transitionTimingFunction}`,"input:checked + &":{backgroundColor:u.background,borderColor:u.background,color:e.white,transition:`color 150ms ${e.transitionTimingFunction}`},"input:disabled + &":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],cursor:"not-allowed"}}),thumb:{position:"absolute",zIndex:1,borderRadius:a,boxSizing:"border-box",display:"flex",backgroundColor:e.white,height:o,width:o,border:`1px solid ${e.colorScheme==="dark"?e.white:e.colors.gray[3]}`,left:`${c}px`,transition:`left 150ms ${e.transitionTimingFunction}`,"& > *":{margin:"auto"},"@media (prefers-reduced-motion)":{transitionDuration:e.respectReducedMotion?"0ms":""},"input:checked + * > &":{left:`calc(100% - ${o}px - ${c}px)`,borderColor:e.white},"input:disabled + * > &":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2],backgroundColor:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[0]}},trackLabel:{height:"100%",display:"grid",placeContent:"center",minWidth:l-o,paddingInline:e.fn.size({size:t,sizes:Zpt}),margin:`0 0 0 ${o+c}px`,transition:`margin 150ms ${e.transitionTimingFunction}`,"input:checked + * > &":{margin:`0 ${o+c}px 0 0`}}}});const tmt=emt;var nmt=Object.defineProperty,rmt=Object.defineProperties,imt=Object.getOwnPropertyDescriptors,t3=Object.getOwnPropertySymbols,oOe=Object.prototype.hasOwnProperty,aOe=Object.prototype.propertyIsEnumerable,pfe=(e,t,n)=>t in e?nmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vB=(e,t)=>{for(var n in t||(t={}))oOe.call(t,n)&&pfe(e,n,t[n]);if(t3)for(var n of t3(t))aOe.call(t,n)&&pfe(e,n,t[n]);return e},smt=(e,t)=>rmt(e,imt(t)),omt=(e,t)=>{var n={};for(var r in e)oOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&t3)for(var r of t3(e))t.indexOf(r)<0&&aOe.call(e,r)&&(n[r]=e[r]);return n};const amt={offLabel:"",onLabel:"",size:"sm",radius:"xl",error:!1},fK=I.forwardRef((e,t)=>{var n;const r=Et("Switch",amt,e),{className:i,color:s,label:o,offLabel:a,onLabel:u,id:l,style:c,size:f,radius:d,wrapperProps:h,children:p,unstyled:m,styles:g,classNames:y,thumbIcon:v,sx:_,checked:w,defaultChecked:x,onChange:E,labelPosition:b,description:T,error:A,disabled:C}=r,P=omt(r,["className","color","label","offLabel","onLabel","id","style","size","radius","wrapperProps","children","unstyled","styles","classNames","thumbIcon","sx","checked","defaultChecked","onChange","labelPosition","description","error","disabled"]),N=Fpt(),{classes:$}=tmt({size:(N==null?void 0:N.size)||f,color:s,radius:d,labelPosition:b,error:!!A},{unstyled:m,styles:g,classNames:y,name:"Switch"}),{systemStyles:M,rest:B}=Ec(P),z=ru(l),W=N?{checked:N.value.includes(B.value),onChange:N.onChange}:{},[U,Y]=co({value:(n=W.checked)!=null?n:w,defaultValue:x,finalValue:!1});return F.createElement(c4,vB(vB({className:i,sx:_,style:c,id:z,size:(N==null?void 0:N.size)||f,labelPosition:b,label:o,description:T,error:A,disabled:C,__staticSelector:"Switch",classNames:y,styles:g,unstyled:m,"data-checked":W.checked||void 0},M),h),F.createElement("input",smt(vB({},B),{disabled:C,checked:U,onChange:q=>{N?W.onChange(q):E==null||E(q),Y(q.currentTarget.checked)},id:z,ref:t,type:"checkbox",className:$.input})),F.createElement("label",{htmlFor:z,className:$.track},F.createElement("div",{className:$.thumb},v),F.createElement("div",{className:$.trackLabel},U?u:a)))});fK.displayName="@mantine/core/Switch";fK.Group=sOe;var umt=Object.defineProperty,lmt=Object.defineProperties,cmt=Object.getOwnPropertyDescriptors,mfe=Object.getOwnPropertySymbols,fmt=Object.prototype.hasOwnProperty,dmt=Object.prototype.propertyIsEnumerable,gfe=(e,t,n)=>t in e?umt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hmt=(e,t)=>{for(var n in t||(t={}))fmt.call(t,n)&&gfe(e,n,t[n]);if(mfe)for(var n of mfe(t))dmt.call(t,n)&&gfe(e,n,t[n]);return e},pmt=(e,t)=>lmt(e,cmt(t)),mmt=yt((e,{captionSide:t,horizontalSpacing:n,verticalSpacing:r,fontSize:i,withBorder:s,withColumnBorders:o})=>{const a=`1px solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}`;return{root:pmt(hmt({},e.fn.fontStyles()),{width:"100%",borderCollapse:"collapse",captionSide:t,color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,lineHeight:e.lineHeight,border:s?a:"","& caption":{marginTop:t==="top"?0:e.spacing.xs,marginBottom:t==="bottom"?0:e.spacing.xs,fontSize:e.fontSizes.sm,color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[6]},"& thead tr th, & tfoot tr th":{textAlign:"left",fontWeight:"bold",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],fontSize:e.fn.size({size:i,sizes:e.fontSizes}),padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`},"& thead tr th":{borderBottom:a},"& tfoot tr th":{borderTop:a},"& tbody tr td":{padding:`${e.fn.size({size:r,sizes:e.spacing})}px ${e.fn.size({size:n,sizes:e.spacing})}px`,borderBottom:a,fontSize:e.fn.size({size:i,sizes:e.fontSizes})},"& tbody tr:last-of-type td":{borderBottom:"none"},"& th + th, & td + td":{borderLeft:o?a:""},"&[data-striped] tbody tr:nth-of-type(odd)":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]},"&[data-hover] tbody tr":e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[1]})})}});const gmt=mmt;var ymt=Object.defineProperty,vmt=Object.defineProperties,_mt=Object.getOwnPropertyDescriptors,n3=Object.getOwnPropertySymbols,uOe=Object.prototype.hasOwnProperty,lOe=Object.prototype.propertyIsEnumerable,yfe=(e,t,n)=>t in e?ymt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bmt=(e,t)=>{for(var n in t||(t={}))uOe.call(t,n)&&yfe(e,n,t[n]);if(n3)for(var n of n3(t))lOe.call(t,n)&&yfe(e,n,t[n]);return e},wmt=(e,t)=>vmt(e,_mt(t)),Emt=(e,t)=>{var n={};for(var r in e)uOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&n3)for(var r of n3(e))t.indexOf(r)<0&&lOe.call(e,r)&&(n[r]=e[r]);return n};const Smt={striped:!1,highlightOnHover:!1,captionSide:"top",horizontalSpacing:"xs",fontSize:"sm",verticalSpacing:7,withBorder:!1,withColumnBorders:!1},dK=I.forwardRef((e,t)=>{const n=Et("Table",Smt,e),{className:r,children:i,striped:s,highlightOnHover:o,captionSide:a,horizontalSpacing:u,verticalSpacing:l,fontSize:c,unstyled:f,withBorder:d,withColumnBorders:h}=n,p=Emt(n,["className","children","striped","highlightOnHover","captionSide","horizontalSpacing","verticalSpacing","fontSize","unstyled","withBorder","withColumnBorders"]),{classes:m,cx:g}=gmt({captionSide:a,verticalSpacing:l,horizontalSpacing:u,fontSize:c,withBorder:d,withColumnBorders:h},{unstyled:f,name:"Table"});return F.createElement(dt,wmt(bmt({},p),{component:"table",ref:t,className:g(m.root,r),"data-striped":s||void 0,"data-hover":o||void 0}),i)});dK.displayName="@mantine/core/Table";const G7={context:"Tabs component was not found in the tree",value:"Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value"},[xmt,hK]=EY(G7.context);var Tmt=Object.defineProperty,vfe=Object.getOwnPropertySymbols,Cmt=Object.prototype.hasOwnProperty,Amt=Object.prototype.propertyIsEnumerable,_fe=(e,t,n)=>t in e?Tmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Imt=(e,t)=>{for(var n in t||(t={}))Cmt.call(t,n)&&_fe(e,n,t[n]);if(vfe)for(var n of vfe(t))Amt.call(t,n)&&_fe(e,n,t[n]);return e};function Omt({variant:e,orientation:t,inverted:n,placement:r},i){const s=t==="vertical";return e==="default"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`2px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="outline"?{[s?r==="left"?"borderRight":"borderLeft":n?"borderTop":"borderBottom"]:`1px solid ${i.colorScheme==="dark"?i.colors.dark[4]:i.colors.gray[3]}`}:e==="pills"?{gap:`calc(${i.spacing.sm}px / 2)`}:{}}var Pmt=yt((e,t)=>{const n=t.orientation==="vertical";return{tabsList:Imt({display:"flex",flexWrap:"wrap",flexDirection:n?"column":"row",justifyContent:LCe[t.position],'& [role="tab"]':{flex:t.grow?1:void 0}},Omt(t,e))}});const kmt=Pmt;var $mt=Object.defineProperty,Rmt=Object.defineProperties,Nmt=Object.getOwnPropertyDescriptors,r3=Object.getOwnPropertySymbols,cOe=Object.prototype.hasOwnProperty,fOe=Object.prototype.propertyIsEnumerable,bfe=(e,t,n)=>t in e?$mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Dmt=(e,t)=>{for(var n in t||(t={}))cOe.call(t,n)&&bfe(e,n,t[n]);if(r3)for(var n of r3(t))fOe.call(t,n)&&bfe(e,n,t[n]);return e},Mmt=(e,t)=>Rmt(e,Nmt(t)),Lmt=(e,t)=>{var n={};for(var r in e)cOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&r3)for(var r of r3(e))t.indexOf(r)<0&&fOe.call(e,r)&&(n[r]=e[r]);return n};const dOe=I.forwardRef((e,t)=>{var n=e,{children:r,className:i,grow:s=!1,position:o="left"}=n,a=Lmt(n,["children","className","grow","position"]);const{orientation:u,variant:l,color:c,radius:f,inverted:d,placement:h}=hK(),{classNames:p,styles:m,unstyled:g}=iy(),{classes:y,cx:v}=kmt({orientation:u,grow:s,variant:l,color:c,position:o,radius:f,inverted:d,placement:h},{name:"Tabs",unstyled:g,classNames:p,styles:m});return F.createElement(dt,Mmt(Dmt({},a),{className:v(y.tabsList,i),ref:t,role:"tablist","aria-orientation":u}),r)});dOe.displayName="@mantine/core/TabsList";var Fmt=yt((e,{orientation:t})=>({panel:{flex:t==="vertical"?1:void 0}}));const jmt=Fmt;var Bmt=Object.defineProperty,Umt=Object.defineProperties,zmt=Object.getOwnPropertyDescriptors,i3=Object.getOwnPropertySymbols,hOe=Object.prototype.hasOwnProperty,pOe=Object.prototype.propertyIsEnumerable,wfe=(e,t,n)=>t in e?Bmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vmt=(e,t)=>{for(var n in t||(t={}))hOe.call(t,n)&&wfe(e,n,t[n]);if(i3)for(var n of i3(t))pOe.call(t,n)&&wfe(e,n,t[n]);return e},Hmt=(e,t)=>Umt(e,zmt(t)),qmt=(e,t)=>{var n={};for(var r in e)hOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&i3)for(var r of i3(e))t.indexOf(r)<0&&pOe.call(e,r)&&(n[r]=e[r]);return n};const mOe=I.forwardRef((e,t)=>{var n=e,{value:r,children:i,sx:s,className:o}=n,a=qmt(n,["value","children","sx","className"]);const u=hK(),{classNames:l,styles:c,unstyled:f}=iy(),{classes:d,cx:h}=jmt({orientation:u.orientation,variant:u.variant,color:u.color,radius:u.radius,inverted:u.inverted,placement:u.placement},{name:"Tabs",unstyled:f,classNames:l,styles:c}),p=u.value===r,m=u.keepMounted||p?i:null;return F.createElement(dt,Hmt(Vmt({},a),{ref:t,sx:[{display:p?void 0:"none"},...m0(s)],className:h(d.panel,o),role:"tabpanel",id:u.getPanelId(r),"aria-labelledby":u.getTabId(r)}),m)});mOe.displayName="@mantine/core/TabsPanel";var Wmt=Object.defineProperty,Gmt=Object.defineProperties,Ymt=Object.getOwnPropertyDescriptors,Efe=Object.getOwnPropertySymbols,Kmt=Object.prototype.hasOwnProperty,Xmt=Object.prototype.propertyIsEnumerable,Sfe=(e,t,n)=>t in e?Wmt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vb=(e,t)=>{for(var n in t||(t={}))Kmt.call(t,n)&&Sfe(e,n,t[n]);if(Efe)for(var n of Efe(t))Xmt.call(t,n)&&Sfe(e,n,t[n]);return e},xfe=(e,t)=>Gmt(e,Ymt(t));function Qmt(e,{variant:t,orientation:n,color:r,radius:i,inverted:s,placement:o}){const a=n==="vertical",u=e.fn.variant({color:r,variant:"filled"}),l=e.fn.radius(i),c=n==="vertical"?o==="left"?`${l}px 0 0 ${l}px`:` 0 ${l}px ${l}px 0`:s?`0 0 ${l}px ${l}px`:`${l}px ${l}px 0 0`;return t==="default"?xfe(Vb({[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"2px solid transparent",[a?o==="left"?"marginRight":"marginLeft":s?"marginTop":"marginBottom"]:-2,borderRadius:c},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0],borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]})),{"&[data-active]":Vb({borderColor:u.background,color:e.colorScheme==="dark"?e.white:e.black},e.fn.hover({borderColor:u.background}))}):t==="outline"?{borderRadius:c,border:"1px solid transparent",[a?o==="left"?"borderRight":"borderLeft":s?"borderTop":"borderBottom"]:"none","&[data-active]":{borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3],"&::before":{content:'""',backgroundColor:e.colorScheme==="dark"?e.colors.dark[7]:e.white,position:"absolute",bottom:a?0:s?"unset":-1,top:a?0:s?-1:"unset",[a?"width":"height"]:1,right:a?o==="left"?-1:"unset":0,left:a?o==="left"?"unset":-1:0}}}:t==="pills"?xfe(Vb({borderRadius:e.fn.radius(i)},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[6]:e.colors.gray[0]})),{"&[data-active]":Vb({backgroundColor:u.background,color:e.white},e.fn.hover({backgroundColor:u.background}))}):{}}var Jmt=yt((e,t)=>({tabLabel:{},tab:Vb({position:"relative",padding:`${e.spacing.xs}px ${e.spacing.md}px`,paddingLeft:t.withIcon?e.spacing.xs:void 0,paddingRight:t.withRightSection?e.spacing.xs:void 0,fontSize:e.fontSizes.sm,whiteSpace:"nowrap",zIndex:0,display:"flex",alignItems:"center",justifyContent:t.orientation==="horizontal"?"center":void 0,lineHeight:1,"&:disabled":Vb({opacity:.5,cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"})),"&:focus":{zIndex:1}},Qmt(e,t)),tabRightSection:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginLeft:7}},tabIcon:{display:"flex",justifyContent:"center",alignItems:"center","&:not(:only-child)":{marginRight:7}}}));const Zmt=Jmt;var egt=Object.defineProperty,tgt=Object.defineProperties,ngt=Object.getOwnPropertyDescriptors,s3=Object.getOwnPropertySymbols,gOe=Object.prototype.hasOwnProperty,yOe=Object.prototype.propertyIsEnumerable,Tfe=(e,t,n)=>t in e?egt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rgt=(e,t)=>{for(var n in t||(t={}))gOe.call(t,n)&&Tfe(e,n,t[n]);if(s3)for(var n of s3(t))yOe.call(t,n)&&Tfe(e,n,t[n]);return e},igt=(e,t)=>tgt(e,ngt(t)),sgt=(e,t)=>{var n={};for(var r in e)gOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&s3)for(var r of s3(e))t.indexOf(r)<0&&yOe.call(e,r)&&(n[r]=e[r]);return n};const vOe=I.forwardRef((e,t)=>{var n=e,{value:r,children:i,onKeyDown:s,onClick:o,className:a,icon:u,rightSection:l,color:c}=n,f=sgt(n,["value","children","onKeyDown","onClick","className","icon","rightSection","color"]);const d=hK(),{classNames:h,styles:p,unstyled:m}=iy(),g=!!u,y=!!l,{theme:v,classes:_,cx:w}=Zmt({withIcon:g||y&&!i,withRightSection:y||g&&!i,orientation:d.orientation,color:c||d.color,variant:d.variant,radius:d.radius,inverted:d.inverted,placement:d.placement},{name:"Tabs",unstyled:m,classNames:h,styles:p}),x=r===d.value,E=b=>{d.onTabChange(d.allowTabDeactivation&&r===d.value?null:r),o==null||o(b)};return F.createElement(vm,igt(rgt({},f),{unstyled:m,className:w(_.tab,a),"data-active":x||void 0,ref:t,type:"button",role:"tab",id:d.getTabId(r),"aria-selected":x,tabIndex:x||d.value===null?0:-1,"aria-controls":d.getPanelId(r),onClick:E,onKeyDown:mxe({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:d.activateTabWithKeyboard,loop:d.loop,dir:v.dir,orientation:d.orientation,onKeyDown:s})}),u&&F.createElement("div",{className:_.tabIcon},u),i&&F.createElement("div",{className:_.tabLabel},i),l&&F.createElement("div",{className:_.tabRightSection},l))});vOe.displayName="@mantine/core/Tab";function _Oe({defaultValue:e,value:t,onTabChange:n,orientation:r,children:i,loop:s,id:o,activateTabWithKeyboard:a,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,placement:h,keepMounted:p=!0}){const m=ru(o),[g,y]=co({value:t,defaultValue:e,finalValue:null,onChange:n});return F.createElement(xmt,{value:{placement:h,value:g,orientation:r,id:m,loop:s,activateTabWithKeyboard:a,getTabId:Roe(`${m}-tab`,G7.value),getPanelId:Roe(`${m}-panel`,G7.value),onTabChange:y,allowTabDeactivation:u,variant:l,color:c,radius:f,inverted:d,keepMounted:p}},i)}_Oe.displayName="@mantine/core/TabsProvider";var ogt=yt((e,{orientation:t,placement:n})=>({root:{display:t==="vertical"?"flex":void 0,flexDirection:n==="right"?"row-reverse":"row"}}));const agt=ogt;var ugt=Object.defineProperty,lgt=Object.defineProperties,cgt=Object.getOwnPropertyDescriptors,o3=Object.getOwnPropertySymbols,bOe=Object.prototype.hasOwnProperty,wOe=Object.prototype.propertyIsEnumerable,Cfe=(e,t,n)=>t in e?ugt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fgt=(e,t)=>{for(var n in t||(t={}))bOe.call(t,n)&&Cfe(e,n,t[n]);if(o3)for(var n of o3(t))wOe.call(t,n)&&Cfe(e,n,t[n]);return e},dgt=(e,t)=>lgt(e,cgt(t)),hgt=(e,t)=>{var n={};for(var r in e)bOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&o3)for(var r of o3(e))t.indexOf(r)<0&&wOe.call(e,r)&&(n[r]=e[r]);return n};const pgt={orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},du=I.forwardRef((e,t)=>{const n=Et("Tabs",pgt,e),{defaultValue:r,value:i,orientation:s,loop:o,activateTabWithKeyboard:a,allowTabDeactivation:u,children:l,id:c,onTabChange:f,variant:d,color:h,className:p,unstyled:m,classNames:g,styles:y,radius:v,inverted:_,keepMounted:w,placement:x}=n,E=hgt(n,["defaultValue","value","orientation","loop","activateTabWithKeyboard","allowTabDeactivation","children","id","onTabChange","variant","color","className","unstyled","classNames","styles","radius","inverted","keepMounted","placement"]),{classes:b,cx:T}=agt({orientation:s,color:h,variant:d,radius:v,inverted:_,placement:x},{unstyled:m,name:"Tabs",classNames:g,styles:y});return F.createElement(RY,{classNames:g,styles:y,unstyled:m},F.createElement(_Oe,{activateTabWithKeyboard:a,defaultValue:r,orientation:s,onTabChange:f,value:i,id:c,loop:o,allowTabDeactivation:u,color:h,variant:d,radius:v,inverted:_,keepMounted:w,placement:x},F.createElement(dt,dgt(fgt({},E),{className:T(b.root,p),id:c,ref:t}),l)))});du.List=dOe;du.Tab=vOe;du.Panel=mOe;du.displayName="@mantine/core/Tabs";var mgt=Object.defineProperty,ggt=Object.defineProperties,ygt=Object.getOwnPropertyDescriptors,Afe=Object.getOwnPropertySymbols,vgt=Object.prototype.hasOwnProperty,_gt=Object.prototype.propertyIsEnumerable,Ife=(e,t,n)=>t in e?mgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bgt=(e,t)=>{for(var n in t||(t={}))vgt.call(t,n)&&Ife(e,n,t[n]);if(Afe)for(var n of Afe(t))_gt.call(t,n)&&Ife(e,n,t[n]);return e},wgt=(e,t)=>ggt(e,ygt(t));function Egt(e,t,n){return typeof e<"u"?e in n.headings.sizes?n.headings.sizes[e].fontSize:e:n.headings.sizes[t].fontSize}function Sgt(e,t,n){return typeof e<"u"&&e in n.headings.sizes?n.headings.sizes[e].lineHeight:n.headings.sizes[t].lineHeight}var xgt=yt((e,{element:t,weight:n,size:r,inline:i})=>({root:wgt(bgt({},e.fn.fontStyles()),{fontFamily:e.headings.fontFamily,fontWeight:n||e.headings.sizes[t].fontWeight||e.headings.fontWeight,fontSize:Egt(r,t,e),lineHeight:i?1:Sgt(r,t,e),margin:0})}));const Tgt=xgt;var Cgt=Object.defineProperty,a3=Object.getOwnPropertySymbols,EOe=Object.prototype.hasOwnProperty,SOe=Object.prototype.propertyIsEnumerable,Ofe=(e,t,n)=>t in e?Cgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Agt=(e,t)=>{for(var n in t||(t={}))EOe.call(t,n)&&Ofe(e,n,t[n]);if(a3)for(var n of a3(t))SOe.call(t,n)&&Ofe(e,n,t[n]);return e},Igt=(e,t)=>{var n={};for(var r in e)EOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&a3)for(var r of a3(e))t.indexOf(r)<0&&SOe.call(e,r)&&(n[r]=e[r]);return n};const Ogt={order:1},Qi=I.forwardRef((e,t)=>{const n=Et("Title",Ogt,e),{className:r,order:i,children:s,unstyled:o,size:a,weight:u,inline:l}=n,c=Igt(n,["className","order","children","unstyled","size","weight","inline"]),{classes:f,cx:d}=Tgt({element:`h${i}`,weight:u,size:a,inline:l},{name:"Title",unstyled:o});return[1,2,3,4,5,6].includes(i)?F.createElement(ze,Agt({component:`h${i}`,ref:t,className:d(f.root,r)},c),s):null});Qi.displayName="@mantine/core/Title";const pK=I.createContext(null);pK.displayName="@mantine/modals/ModalsContext";function Pgt(){const e=I.useContext(pK);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}var kgt=Object.defineProperty,$gt=Object.defineProperties,Rgt=Object.getOwnPropertyDescriptors,Pfe=Object.getOwnPropertySymbols,Ngt=Object.prototype.hasOwnProperty,Dgt=Object.prototype.propertyIsEnumerable,kfe=(e,t,n)=>t in e?kgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_B=(e,t)=>{for(var n in t||(t={}))Ngt.call(t,n)&&kfe(e,n,t[n]);if(Pfe)for(var n of Pfe(t))Dgt.call(t,n)&&kfe(e,n,t[n]);return e},$fe=(e,t)=>$gt(e,Rgt(t));function Mgt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Pgt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return F.createElement(F.Fragment,null,l&&F.createElement(dt,{mb:"md"},l),F.createElement(Wa,_B({position:"right"},o),F.createElement(ur,$fe(_B({variant:"default"},t),{onClick:h}),(t==null?void 0:t.children)||c),F.createElement(ur,$fe(_B({},n),{onClick:p}),(n==null?void 0:n.children)||f)))}function Lgt(e,t){switch(t.type){case"OPEN":return{current:t.payload,modals:[...e.modals,t.payload]};case"CLOSE":{const n=e.modals.filter(r=>r.id!==t.payload);return{current:n[n.length-1]||e.current,modals:n}}case"CLOSE_ALL":return{current:e.current,modals:[]};default:return e}}function Fgt(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}const jgt=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Bgt(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});jgt(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Fgt(`${e}:${String(r)}`,i[0])}return[t,n]}const[Ugt,_I]=Bgt("mantine-modals");_I("openModal");_I("closeModal");_I("closeAllModals");const Y7=_I("openConfirmModal");_I("openContextModal");var zgt=Object.defineProperty,Vgt=Object.defineProperties,Hgt=Object.getOwnPropertyDescriptors,u3=Object.getOwnPropertySymbols,xOe=Object.prototype.hasOwnProperty,TOe=Object.prototype.propertyIsEnumerable,Rfe=(e,t,n)=>t in e?zgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$$=(e,t)=>{for(var n in t||(t={}))xOe.call(t,n)&&Rfe(e,n,t[n]);if(u3)for(var n of u3(t))TOe.call(t,n)&&Rfe(e,n,t[n]);return e},Nfe=(e,t)=>Vgt(e,Hgt(t)),Jy=(e,t)=>{var n={};for(var r in e)xOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&u3)for(var r of u3(e))t.indexOf(r)<0&&TOe.call(e,r)&&(n[r]=e[r]);return n};function qgt(e){if(!e)return{confirmProps:{},modalProps:{}};const t=e,{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f}=t,d=Jy(t,["id","children","onCancel","onConfirm","closeOnConfirm","closeOnCancel","cancelProps","confirmProps","groupProps","labels"]);return{confirmProps:{id:n,children:r,onCancel:i,onConfirm:s,closeOnConfirm:o,closeOnCancel:a,cancelProps:u,confirmProps:l,groupProps:c,labels:f},modalProps:$$({id:n},d)}}function Wgt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(Lgt,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{o.current.modals.forEach(y=>{var v,_,w,x;y.type==="confirm"&&g&&((_=(v=y.props).onCancel)==null||_.call(v)),(x=(w=y.props).onClose)==null||x.call(w)}),s({type:"CLOSE_ALL"})},[o,s]),u=I.useCallback(g=>{var y=g,{modalId:v}=y,_=Jy(y,["modalId"]);const w=v||O$();return s({type:"OPEN",payload:{id:w,type:"content",props:_}}),w},[s]),l=I.useCallback(g=>{var y=g,{modalId:v}=y,_=Jy(y,["modalId"]);const w=v||O$();return s({type:"OPEN",payload:{id:w,type:"confirm",props:_}}),w},[s]),c=I.useCallback((g,y)=>{var v=y,{modalId:_}=v,w=Jy(v,["modalId"]);const x=_||O$();return s({type:"OPEN",payload:{id:x,type:"context",props:w,ctx:g}}),x},[s]),f=I.useCallback((g,y)=>{var v,_,w,x;const E=o.current.modals.find(b=>b.id===g);E&&(E.type==="confirm"&&y&&((_=(v=E.props).onCancel)==null||_.call(v)),(x=(w=E.props).onClose)==null||x.call(w),s({type:"CLOSE",payload:E.id}))},[o,s]);Ugt({openModal:u,openConfirmModal:l,openContextModal:g=>{var y=g,{modal:v}=y,_=Jy(y,["modal"]);return c(v,_)},closeModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const y=g.props,{innerProps:v}=y,_=Jy(y,["innerProps"]),w=r[g.ctx];return{modalProps:_,content:F.createElement(w,{innerProps:v,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=qgt(g.props);return{modalProps:y,content:F.createElement(Mgt,Nfe($$({},v),{id:g.id,labels:g.props.labels||n}))}}case"content":{const y=g.props,{children:v}=y;return{modalProps:Jy(y,["children"]),content:F.createElement(F.Fragment,null,v)}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return F.createElement(pK.Provider,{value:d},F.createElement(ac,Nfe($$($$({zIndex:xa("modal")+1},t),p),{opened:i.modals.length>0,onClose:()=>f(i.current.id)}),m),e)}var COe={exports:{}},Ggt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ygt=Ggt,Kgt=Ygt;function AOe(){}function IOe(){}IOe.resetWarningCache=AOe;var Xgt=function(){function e(r,i,s,o,a,u){if(u!==Kgt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:IOe,resetWarningCache:AOe};return n.PropTypes=n,n};COe.exports=Xgt();var Qgt=COe.exports;const Yt=$l(Qgt);var Jgt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Zgt=Object.defineProperty,e0t=Object.defineProperties,t0t=Object.getOwnPropertyDescriptors,l3=Object.getOwnPropertySymbols,OOe=Object.prototype.hasOwnProperty,POe=Object.prototype.propertyIsEnumerable,Dfe=(e,t,n)=>t in e?Zgt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mfe=(e,t)=>{for(var n in t||(t={}))OOe.call(t,n)&&Dfe(e,n,t[n]);if(l3)for(var n of l3(t))POe.call(t,n)&&Dfe(e,n,t[n]);return e},n0t=(e,t)=>e0t(e,t0t(t)),r0t=(e,t)=>{var n={};for(var r in e)OOe.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&l3)for(var r of l3(e))t.indexOf(r)<0&&POe.call(e,r)&&(n[r]=e[r]);return n},ii=(e,t,n)=>{const r=I.forwardRef((i,s)=>{var o=i,{color:a="currentColor",size:u=24,stroke:l=2,children:c}=o,f=r0t(o,["color","size","stroke","children"]);return I.createElement("svg",Mfe(n0t(Mfe({ref:s},Jgt),{width:u,height:u,stroke:a,strokeWidth:l,className:`tabler-icon tabler-icon-${e}`}),f),[...n.map(([d,h])=>I.createElement(d,h)),...c||[]])});return r.propTypes={color:Yt.string,size:Yt.oneOfType([Yt.string,Yt.number]),stroke:Yt.oneOfType([Yt.string,Yt.number])},r.displayName=`${t}`,r},i0t=ii("alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]),Lfe=ii("alert-triangle","IconAlertTriangle",[["path",{d:"M10.24 3.957l-8.422 14.06a1.989 1.989 0 0 0 1.7 2.983h16.845a1.989 1.989 0 0 0 1.7 -2.983l-8.423 -14.06a1.989 1.989 0 0 0 -3.4 0z",key:"svg-0"}],["path",{d:"M12 9v4",key:"svg-1"}],["path",{d:"M12 17h.01",key:"svg-2"}]]),s0t=ii("arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]),o0t=ii("at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]),a0t=ii("brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]),u0t=ii("brand-google","IconBrandGoogle",[["path",{d:"M17.788 5.108a9 9 0 1 0 3.212 6.892h-8",key:"svg-0"}]]),l0t=ii("chart-bar","IconChartBar",[["path",{d:"M3 12m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 8m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M15 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20l14 0",key:"svg-3"}]]),c0t=ii("chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]),f0t=ii("chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]),d0t=ii("check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]),Ffe=ii("circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]),h0t=ii("database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]),p0t=ii("dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]),m0t=ii("file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]),g0t=ii("layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]),y0t=ii("mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]),v0t=ii("player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]),_0t=ii("progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]),b0t=ii("refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),w0t=ii("schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]),E0t=ii("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]),kOe=ii("settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]),$Oe=ii("table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]),S0t=ii("table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]),ROe=ii("trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]),NOe=ii("user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]),DOe=ii("x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);function MOe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const bh="/sumsifter/",jfe=["http","https","mailto","tel"];function x0t(e){const t=(e||"").trim(),n=t.charAt(0);if(n==="#"||n==="/")return t;const r=t.indexOf(":");if(r===-1)return t;let i=-1;for(;++i<jfe.length;){const s=jfe[i];if(r===s.length&&t.slice(0,s.length).toLowerCase()===s)return t}return i=t.indexOf("?"),i!==-1&&r>i||(i=t.indexOf("#"),i!==-1&&r>i)?t:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var T0t=function(t){return t!=null&&t.constructor!=null&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)};const mK=$l(T0t);function dw(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Bfe(e.position):"start"in e||"end"in e?Bfe(e):"line"in e||"column"in e?K7(e):""}function K7(e){return Ufe(e&&e.line)+":"+Ufe(e&&e.column)}function Bfe(e){return K7(e&&e.start)+"-"+K7(e&&e.end)}function Ufe(e){return e&&typeof e=="number"?e:1}let xc=class extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=dw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}};xc.prototype.file="";xc.prototype.name="";xc.prototype.reason="";xc.prototype.message="";xc.prototype.stack="";xc.prototype.fatal=null;xc.prototype.column=null;xc.prototype.line=null;xc.prototype.source=null;xc.prototype.ruleId=null;xc.prototype.position=null;const ad={basename:C0t,dirname:A0t,extname:I0t,join:O0t,sep:"/"};function C0t(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');bI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function A0t(e){if(bI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function I0t(e){bI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function O0t(...e){let t=-1,n;for(;++t<e.length;)bI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":P0t(n)}function P0t(e){bI(e);const t=e.charCodeAt(0)===47;let n=k0t(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function k0t(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function bI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const $0t={cwd:R0t};function R0t(){return"/"}function X7(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function N0t(e){if(typeof e=="string")e=new URL(e);else if(!X7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return D0t(e)}function D0t(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const bB=["history","path","basename","stem","extname","dirname"];let M0t=class{constructor(t){let n;t?typeof t=="string"||mK(t)?n={value:t}:X7(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=$0t.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<bB.length;){const s=bB[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)bB.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){X7(t)&&(t=N0t(t)),EB(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?ad.dirname(this.path):void 0}set dirname(t){zfe(this.basename,"dirname"),this.path=ad.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?ad.basename(this.path):void 0}set basename(t){EB(t,"basename"),wB(t,"basename"),this.path=ad.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?ad.extname(this.path):void 0}set extname(t){if(wB(t,"extname"),zfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ad.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?ad.basename(this.path,this.extname):void 0}set stem(t){EB(t,"stem"),wB(t,"stem"),this.path=ad.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new xc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}};function wB(e,t){if(e&&e.includes(ad.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ad.sep+"`")}function EB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function zfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Vfe(e){if(e)throw e}var R$=Object.prototype.hasOwnProperty,LOe=Object.prototype.toString,Hfe=Object.defineProperty,qfe=Object.getOwnPropertyDescriptor,Wfe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):LOe.call(t)==="[object Array]"},Gfe=function(t){if(!t||LOe.call(t)!=="[object Object]")return!1;var n=R$.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&R$.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||R$.call(t,i)},Yfe=function(t,n){Hfe&&n.name==="__proto__"?Hfe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Kfe=function(t,n){if(n==="__proto__")if(R$.call(t,n)){if(qfe)return qfe(t,n).value}else return;return t[n]},L0t=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Kfe(a,n),i=Kfe(t,n),a!==i&&(c&&i&&(Gfe(i)||(s=Wfe(i)))?(s?(s=!1,o=r&&Wfe(r)?r:[]):o=r&&Gfe(r)?r:{},Yfe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Yfe(a,{name:n,newValue:i}));return a};const Xfe=$l(L0t);function Q7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function F0t(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?j0t(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function j0t(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u instanceof Promise?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}class Tc extends Error{constructor(t,n,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof n=="string"&&(r=n,n=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}n&&("type"in n||"position"in n?n.position&&(s=n.position):"start"in n||"end"in n?s=n:("line"in n||"column"in n)&&(s.start=n)),this.name=dw(n)||"1:1",this.message=typeof t=="object"?t.message:t,this.stack="",typeof t=="object"&&t.stack&&(this.stack=t.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}Tc.prototype.file="";Tc.prototype.name="";Tc.prototype.reason="";Tc.prototype.message="";Tc.prototype.stack="";Tc.prototype.fatal=null;Tc.prototype.column=null;Tc.prototype.line=null;Tc.prototype.source=null;Tc.prototype.ruleId=null;Tc.prototype.position=null;const ud={basename:B0t,dirname:U0t,extname:z0t,join:V0t,sep:"/"};function B0t(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');wI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.charCodeAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.charCodeAt(i)===t.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function U0t(e){if(wI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.charCodeAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.charCodeAt(0)===47?"/":".":t===1&&e.charCodeAt(0)===47?"//":e.slice(0,t)}function z0t(e){wI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.charCodeAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function V0t(...e){let t=-1,n;for(;++t<e.length;)wI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":H0t(n)}function H0t(e){wI(e);const t=e.charCodeAt(0)===47;let n=q0t(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.charCodeAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function q0t(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function wI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const W0t={cwd:G0t};function G0t(){return"/"}function J7(e){return e!==null&&typeof e=="object"&&e.href&&e.origin}function Y0t(e){if(typeof e=="string")e=new URL(e);else if(!J7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return K0t(e)}function K0t(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.charCodeAt(n)===37&&t.charCodeAt(n+1)===50){const r=t.charCodeAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const SB=["history","path","basename","stem","extname","dirname"];class X0t{constructor(t){let n;t?typeof t=="string"||mK(t)?n={value:t}:J7(t)?n={path:t}:n=t:n={},this.data={},this.messages=[],this.history=[],this.cwd=W0t.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<SB.length;){const s=SB[r];s in n&&n[s]!==void 0&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)SB.includes(i)||(this[i]=n[i])}get path(){return this.history[this.history.length-1]}set path(t){J7(t)&&(t=Y0t(t)),TB(t,"path"),this.path!==t&&this.history.push(t)}get dirname(){return typeof this.path=="string"?ud.dirname(this.path):void 0}set dirname(t){Qfe(this.basename,"dirname"),this.path=ud.join(t||"",this.basename)}get basename(){return typeof this.path=="string"?ud.basename(this.path):void 0}set basename(t){TB(t,"basename"),xB(t,"basename"),this.path=ud.join(this.dirname||"",t)}get extname(){return typeof this.path=="string"?ud.extname(this.path):void 0}set extname(t){if(xB(t,"extname"),Qfe(this.dirname,"extname"),t){if(t.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ud.join(this.dirname,this.stem+(t||""))}get stem(){return typeof this.path=="string"?ud.basename(this.path,this.extname):void 0}set stem(t){TB(t,"stem"),xB(t,"stem"),this.path=ud.join(this.dirname||"",t+(this.extname||""))}toString(t){return(this.value||"").toString(t)}message(t,n,r){const i=new Tc(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=null,i}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}}function xB(e,t){if(e&&e.includes(ud.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ud.sep+"`")}function TB(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Qfe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Q0t=jOe().freeze(),FOe={}.hasOwnProperty;function jOe(){const e=F0t(),t=[];let n={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=t,s.use=u,s.parse=l,s.stringify=c,s.run=f,s.runSync=d,s.process=h,s.processSync=p,s;function s(){const m=jOe();let g=-1;for(;++g<t.length;)m.use(...t[g]);return m.data(Xfe(!0,{},n)),m}function o(m,g){return typeof m=="string"?arguments.length===2?(IB("data",r),n[m]=g,s):FOe.call(n,m)&&n[m]||null:m?(IB("data",r),n=m,s):n}function a(){if(r)return s;for(;++i<t.length;){const[m,...g]=t[i];if(g[0]===!1)continue;g[0]===!0&&(g[0]=void 0);const y=m.call(s,...g);typeof y=="function"&&e.use(y)}return r=!0,i=Number.POSITIVE_INFINITY,s}function u(m,...g){let y;if(IB("use",r),m!=null)if(typeof m=="function")x(m,...g);else if(typeof m=="object")Array.isArray(m)?w(m):_(m);else throw new TypeError("Expected usable value, not `"+m+"`");return y&&(n.settings=Object.assign(n.settings||{},y)),s;function v(E){if(typeof E=="function")x(E);else if(typeof E=="object")if(Array.isArray(E)){const[b,...T]=E;x(b,...T)}else _(E);else throw new TypeError("Expected usable value, not `"+E+"`")}function _(E){w(E.plugins),E.settings&&(y=Object.assign(y||{},E.settings))}function w(E){let b=-1;if(E!=null)if(Array.isArray(E))for(;++b<E.length;){const T=E[b];v(T)}else throw new TypeError("Expected a list of plugins, not `"+E+"`")}function x(E,b){let T=-1,A;for(;++T<t.length;)if(t[T][0]===E){A=t[T];break}A?(Q7(A[1])&&Q7(b)&&(b=Xfe(!0,A[1],b)),A[1]=b):t.push([...arguments])}}function l(m){s.freeze();const g=Nx(m),y=s.Parser;return CB("parse",y),Jfe(y,"parse")?new y(String(g),g).parse():y(String(g),g)}function c(m,g){s.freeze();const y=Nx(g),v=s.Compiler;return AB("stringify",v),Zfe(m),Jfe(v,"compile")?new v(m,y).compile():v(m,y)}function f(m,g,y){if(Zfe(m),s.freeze(),!y&&typeof g=="function"&&(y=g,g=void 0),!y)return new Promise(v);v(null,y);function v(_,w){e.run(m,Nx(g),x);function x(E,b,T){b=b||m,E?w(E):_?_(b):y(null,b,T)}}}function d(m,g){let y,v;return s.run(m,g,_),ede("runSync","run",v),y;function _(w,x){Vfe(w),y=x,v=!0}}function h(m,g){if(s.freeze(),CB("process",s.Parser),AB("process",s.Compiler),!g)return new Promise(y);y(null,g);function y(v,_){const w=Nx(m);s.run(s.parse(w),w,(E,b,T)=>{if(E||!b||!T)x(E);else{const A=s.stringify(b,T);A==null||(eyt(A)?T.value=A:T.result=A),x(E,T)}});function x(E,b){E||!b?_(E):v?v(b):g(null,b)}}}function p(m){let g;s.freeze(),CB("processSync",s.Parser),AB("processSync",s.Compiler);const y=Nx(m);return s.process(y,v),ede("processSync","process",g),y;function v(_){g=!0,Vfe(_)}}}function Jfe(e,t){return typeof e=="function"&&e.prototype&&(J0t(e.prototype)||t in e.prototype)}function J0t(e){let t;for(t in e)if(FOe.call(e,t))return!0;return!1}function CB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Parser`")}function AB(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `Compiler`")}function IB(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Zfe(e){if(!Q7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ede(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Nx(e){return Z0t(e)?e:new X0t(e)}function Z0t(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function eyt(e){return typeof e=="string"||mK(e)}function tyt(e,t){var{includeImageAlt:n=!0}=t||{};return BOe(e,n)}function BOe(e,t){return e&&typeof e=="object"&&(e.value||(t?e.alt:"")||"children"in e&&tde(e.children,t)||Array.isArray(e)&&tde(e,t))||""}function tde(e,t){for(var n=[],r=-1;++r<e.length;)n[r]=BOe(e[r],t);return n.join("")}function nh(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),[].splice.apply(e,o);else for(n&&[].splice.apply(e,[t,n]);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),[].splice.apply(e,o),s+=1e4,t+=1e4}function Xl(e,t){return e.length>0?(nh(e,e.length,0,t),e):t}const nde={}.hasOwnProperty;function nyt(e){const t={};let n=-1;for(;++n<e.length;)ryt(t,e[n]);return t}function ryt(e,t){let n;for(n in t){const i=(nde.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;for(o in s){nde.call(i,o)||(i[o]=[]);const a=s[o];iyt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function iyt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);nh(e,0,0,r)}const syt=/[!-/:-@[-`{-~\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,_d=sy(/[A-Za-z]/),Z7=sy(/\d/),oyt=sy(/[\dA-Fa-f]/),dl=sy(/[\dA-Za-z]/),ayt=sy(/[!-/:-@[-`{-~]/),rde=sy(/[#-'*+\--9=?A-Z^-~]/);function eV(e){return e!==null&&(e<32||e===127)}function uc(e){return e!==null&&(e<0||e===32)}function cn(e){return e!==null&&e<-2}function ws(e){return e===-2||e===-1||e===32}const uyt=sy(/\s/),lyt=sy(syt);function sy(e){return t;function t(n){return n!==null&&e.test(String.fromCharCode(n))}}function ni(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return ws(u)?(e.enter(n),a(u)):t(u)}function a(u){return ws(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const cyt={tokenize:fyt};function fyt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ni(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return cn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const dyt={tokenize:hyt},ide={tokenize:pyt};function hyt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(_)}return l(_)}function u(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let x=w,E;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){E=t.events[x][1].end;break}y(r);let b=w;for(;b<t.events.length;)t.events[b][1].end=Object.assign({},E),b++;return nh(t.events,x+1,0,t.events.slice(w)),t.events.length=b,l(_)}return a(_)}function l(_){if(r===n.length){if(!i)return d(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(ide,c,f)(_)}function c(_){return i&&v(),y(r),d(_)}function f(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function d(_){return t.containerState={},e.attempt(ide,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),d(_)}function p(_){if(_===null){i&&v(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return cn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const x=t.sliceStream(_);if(w&&x.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(x),t.parser.lazy[_.start.line]){let E=i.events.length;for(;E--;)if(i.events[E][1].start.offset<o&&(!i.events[E][1].end||i.events[E][1].end.offset>o))return;const b=t.events.length;let T=b,A,C;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){if(A){C=t.events[T][1].end;break}A=!0}for(y(r),E=b;E<t.events.length;)t.events[E][1].end=Object.assign({},C),E++;nh(t.events,T+1,0,t.events.slice(b)),t.events.length=E}}function y(_){let w=n.length;for(;w-- >_;){const x=n[w];t.containerState=x[1],x[0].exit.call(t,e)}n.length=_}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function pyt(e,t,n){return ni(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function sde(e){if(e===null||uc(e)||uyt(e))return 1;if(lyt(e))return 2}function gK(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const tV={name:"attention",tokenize:gyt,resolveAll:myt};function myt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);ode(f,-u),ode(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Xl(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Xl(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Xl(l,gK(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Xl(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Xl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,nh(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function gyt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=sde(r);let s;return o;function o(u){return e.enter("attentionSequence"),s=u,a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=sde(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function ode(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const yyt={name:"autolink",tokenize:vyt};function vyt(e,t,n){let r=1;return i;function i(p){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(p){return _d(p)?(e.consume(p),o):rde(p)?l(p):n(p)}function o(p){return p===43||p===45||p===46||dl(p)?a(p):l(p)}function a(p){return p===58?(e.consume(p),u):(p===43||p===45||p===46||dl(p))&&r++<32?(e.consume(p),a):l(p)}function u(p){return p===62?(e.exit("autolinkProtocol"),h(p)):p===null||p===32||p===60||eV(p)?n(p):(e.consume(p),u)}function l(p){return p===64?(e.consume(p),r=0,c):rde(p)?(e.consume(p),l):n(p)}function c(p){return dl(p)?f(p):n(p)}function f(p){return p===46?(e.consume(p),r=0,c):p===62?(e.exit("autolinkProtocol").type="autolinkEmail",h(p)):d(p)}function d(p){return(p===45||dl(p))&&r++<63?(e.consume(p),p===45?d:f):n(p)}function h(p){return e.enter("autolinkMarker"),e.consume(p),e.exit("autolinkMarker"),e.exit("autolink"),t}}const h4={tokenize:_yt,partial:!0};function _yt(e,t,n){return ni(e,r,"linePrefix");function r(i){return i===null||cn(i)?t(i):n(i)}}const UOe={name:"blockQuote",tokenize:byt,continuation:{tokenize:wyt},exit:Eyt};function byt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return ws(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function wyt(e,t,n){return ni(e,e.attempt(UOe,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Eyt(e){e.exit("blockQuote")}const zOe={name:"characterEscape",tokenize:Syt};function Syt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return ayt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const ade=document.createElement("i");function yK(e){const t="&"+e+";";ade.innerHTML=t;const n=ade.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}const VOe={name:"characterReference",tokenize:xyt};function xyt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=dl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=oyt,c):(e.enter("characterReferenceValue"),s=7,o=Z7,c(f))}function c(f){let d;return f===59&&i?(d=e.exit("characterReferenceValue"),o===dl&&!yK(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)):o(f)&&i++<s?(e.consume(f),c):n(f)}}const ude={name:"codeFenced",tokenize:Tyt,concrete:!0};function Tyt(e,t,n){const r=this,i={tokenize:x,partial:!0},s={tokenize:w,partial:!0},o=this.events[this.events.length-1],a=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let u=0,l;return c;function c(E){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l=E,f(E)}function f(E){return E===l?(e.consume(E),u++,f):(e.exit("codeFencedFenceSequence"),u<3?n(E):ni(e,d,"whitespace")(E))}function d(E){return E===null||cn(E)?g(E):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),h(E))}function h(E){return E===null||uc(E)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ni(e,p,"whitespace")(E)):E===96&&E===l?n(E):(e.consume(E),h)}function p(E){return E===null||cn(E)?g(E):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),m(E))}function m(E){return E===null||cn(E)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),g(E)):E===96&&E===l?n(E):(e.consume(E),m)}function g(E){return e.exit("codeFencedFence"),r.interrupt?t(E):y(E)}function y(E){return E===null?_(E):cn(E)?e.attempt(s,e.attempt(i,_,a?ni(e,y,"linePrefix",a+1):y),_)(E):(e.enter("codeFlowValue"),v(E))}function v(E){return E===null||cn(E)?(e.exit("codeFlowValue"),y(E)):(e.consume(E),v)}function _(E){return e.exit("codeFenced"),t(E)}function w(E,b,T){const A=this;return C;function C(N){return E.enter("lineEnding"),E.consume(N),E.exit("lineEnding"),P}function P(N){return A.parser.lazy[A.now().line]?T(N):b(N)}}function x(E,b,T){let A=0;return ni(E,C,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function C($){return E.enter("codeFencedFence"),E.enter("codeFencedFenceSequence"),P($)}function P($){return $===l?(E.consume($),A++,P):A<u?T($):(E.exit("codeFencedFenceSequence"),ni(E,N,"whitespace")($))}function N($){return $===null||cn($)?(E.exit("codeFencedFence"),b($)):T($)}}}const OB={name:"codeIndented",tokenize:Ayt},Cyt={tokenize:Iyt,partial:!0};function Ayt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ni(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):cn(l)?e.attempt(Cyt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||cn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Iyt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ni(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):cn(o)?i(o):n(o)}}const Oyt={name:"codeText",tokenize:$yt,resolve:Pyt,previous:kyt};function Pyt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function kyt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function $yt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):cn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||cn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}function HOe(e){const t={};let n=-1,r,i,s,o,a,u,l;for(;++n<e.length;){for(;n in t;)n=t[n];if(r=e[n],n&&r[1].type==="chunkFlow"&&e[n-1][1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Ryt(e,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=e[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(e[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},e[i][1].start),a=e.slice(i,n),a.unshift(r),nh(e,i,n-i+1,a))}}return!l}function Ryt(e,t){const n=e[t][1],r=e[t][2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e[++i][1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.unshift([v,v+y.length-1]),nh(e,v,2,y)}for(d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Nyt={tokenize:Lyt,resolve:Myt},Dyt={tokenize:Fyt,partial:!0};function Myt(e){return HOe(e),e}function Lyt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):cn(a)?e.check(Dyt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Fyt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ni(e,s,"linePrefix")}function s(o){if(o===null||cn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function qOe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===41||eV(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||cn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return y===40?++c>l?n(y):(e.consume(y),m):y===41?c--?(e.consume(y),m):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):y===null||uc(y)?c?n(y):(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):eV(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function WOe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs||a>999?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):cn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||cn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u=u||!ws(h),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function GOe(e,t,n,r,i,s){let o;return a;function a(d){return e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):cn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ni(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||cn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function P2(e,t){let n;return r;function r(i){return cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):ws(i)?ni(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}function hw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const jyt={name:"definition",tokenize:Uyt},Byt={tokenize:zyt,partial:!0};function Uyt(e,t,n){const r=this;let i;return s;function s(u){return e.enter("definition"),WOe.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=hw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(e.enter("definitionMarker"),e.consume(u),e.exit("definitionMarker"),P2(e,qOe(e,e.attempt(Byt,ni(e,a,"whitespace"),ni(e,a,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(u)}function a(u){return u===null||cn(u)?(e.exit("definition"),r.parser.defined.includes(i)||r.parser.defined.push(i),t(u)):n(u)}}function zyt(e,t,n){return r;function r(o){return uc(o)?P2(e,i)(o):n(o)}function i(o){return o===34||o===39||o===40?GOe(e,ni(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(o):n(o)}function s(o){return o===null||cn(o)?t(o):n(o)}}const Vyt={name:"hardBreakEscape",tokenize:Hyt};function Hyt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(s),i}function i(s){return cn(s)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(s)):n(s)}}const qyt={name:"headingAtx",tokenize:Gyt,resolve:Wyt};function Wyt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},nh(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Gyt(e,t,n){const r=this;let i=0;return s;function s(c){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(e.consume(c),o):c===null||uc(c)?(e.exit("atxHeadingSequence"),r.interrupt?t(c):a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||cn(c)?(e.exit("atxHeading"),t(c)):ws(c)?ni(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||uc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Yyt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lde=["pre","script","style","textarea"],Kyt={name:"htmlFlow",tokenize:Jyt,resolveTo:Qyt,concrete:!0},Xyt={tokenize:Zyt,partial:!0};function Qyt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Jyt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(L){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(L),c}function c(L){return L===33?(e.consume(L),f):L===47?(e.consume(L),p):L===63?(e.consume(L),i=3,r.interrupt?t:Y):_d(L)?(e.consume(L),o=String.fromCharCode(L),s=!0,m):n(L)}function f(L){return L===45?(e.consume(L),i=2,d):L===91?(e.consume(L),i=5,o="CDATA[",a=0,h):_d(L)?(e.consume(L),i=4,r.interrupt?t:Y):n(L)}function d(L){return L===45?(e.consume(L),r.interrupt?t:Y):n(L)}function h(L){return L===o.charCodeAt(a++)?(e.consume(L),a===o.length?r.interrupt?t:P:h):n(L)}function p(L){return _d(L)?(e.consume(L),o=String.fromCharCode(L),m):n(L)}function m(L){return L===null||L===47||L===62||uc(L)?L!==47&&s&&lde.includes(o.toLowerCase())?(i=1,r.interrupt?t(L):P(L)):Yyt.includes(o.toLowerCase())?(i=6,L===47?(e.consume(L),g):r.interrupt?t(L):P(L)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(L):s?v(L):y(L)):L===45||dl(L)?(e.consume(L),o+=String.fromCharCode(L),m):n(L)}function g(L){return L===62?(e.consume(L),r.interrupt?t:P):n(L)}function y(L){return ws(L)?(e.consume(L),y):A(L)}function v(L){return L===47?(e.consume(L),A):L===58||L===95||_d(L)?(e.consume(L),_):ws(L)?(e.consume(L),v):A(L)}function _(L){return L===45||L===46||L===58||L===95||dl(L)?(e.consume(L),_):w(L)}function w(L){return L===61?(e.consume(L),x):ws(L)?(e.consume(L),w):v(L)}function x(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),u=L,E):ws(L)?(e.consume(L),x):(u=null,b(L))}function E(L){return L===null||cn(L)?n(L):L===u?(e.consume(L),T):(e.consume(L),E)}function b(L){return L===null||L===34||L===39||L===60||L===61||L===62||L===96||uc(L)?w(L):(e.consume(L),b)}function T(L){return L===47||L===62||ws(L)?v(L):n(L)}function A(L){return L===62?(e.consume(L),C):n(L)}function C(L){return ws(L)?(e.consume(L),C):L===null||cn(L)?P(L):n(L)}function P(L){return L===45&&i===2?(e.consume(L),B):L===60&&i===1?(e.consume(L),z):L===62&&i===4?(e.consume(L),q):L===63&&i===3?(e.consume(L),Y):L===93&&i===5?(e.consume(L),U):cn(L)&&(i===6||i===7)?e.check(Xyt,q,N)(L):L===null||cn(L)?N(L):(e.consume(L),P)}function N(L){return e.exit("htmlFlowData"),$(L)}function $(L){return L===null?D(L):cn(L)?e.attempt({tokenize:M,partial:!0},$,D)(L):(e.enter("htmlFlowData"),P(L))}function M(L,G,V){return H;function H(le){return L.enter("lineEnding"),L.consume(le),L.exit("lineEnding"),te}function te(le){return r.parser.lazy[r.now().line]?V(le):G(le)}}function B(L){return L===45?(e.consume(L),Y):P(L)}function z(L){return L===47?(e.consume(L),o="",W):P(L)}function W(L){return L===62&&lde.includes(o.toLowerCase())?(e.consume(L),q):_d(L)&&o.length<8?(e.consume(L),o+=String.fromCharCode(L),W):P(L)}function U(L){return L===93?(e.consume(L),Y):P(L)}function Y(L){return L===62?(e.consume(L),q):L===45&&i===2?(e.consume(L),Y):P(L)}function q(L){return L===null||cn(L)?(e.exit("htmlFlowData"),D(L)):(e.consume(L),q)}function D(L){return e.exit("htmlFlow"),t(L)}}function Zyt(e,t,n){return r;function r(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(h4,t,n)}}const evt={name:"htmlText",tokenize:tvt};function tvt(e,t,n){const r=this;let i,s,o,a;return u;function u(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),l}function l(D){return D===33?(e.consume(D),c):D===47?(e.consume(D),b):D===63?(e.consume(D),x):_d(D)?(e.consume(D),C):n(D)}function c(D){return D===45?(e.consume(D),f):D===91?(e.consume(D),s="CDATA[",o=0,g):_d(D)?(e.consume(D),w):n(D)}function f(D){return D===45?(e.consume(D),d):n(D)}function d(D){return D===null||D===62?n(D):D===45?(e.consume(D),h):p(D)}function h(D){return D===null||D===62?n(D):p(D)}function p(D){return D===null?n(D):D===45?(e.consume(D),m):cn(D)?(a=p,U(D)):(e.consume(D),p)}function m(D){return D===45?(e.consume(D),q):p(D)}function g(D){return D===s.charCodeAt(o++)?(e.consume(D),o===s.length?y:g):n(D)}function y(D){return D===null?n(D):D===93?(e.consume(D),v):cn(D)?(a=y,U(D)):(e.consume(D),y)}function v(D){return D===93?(e.consume(D),_):y(D)}function _(D){return D===62?q(D):D===93?(e.consume(D),_):y(D)}function w(D){return D===null||D===62?q(D):cn(D)?(a=w,U(D)):(e.consume(D),w)}function x(D){return D===null?n(D):D===63?(e.consume(D),E):cn(D)?(a=x,U(D)):(e.consume(D),x)}function E(D){return D===62?q(D):x(D)}function b(D){return _d(D)?(e.consume(D),T):n(D)}function T(D){return D===45||dl(D)?(e.consume(D),T):A(D)}function A(D){return cn(D)?(a=A,U(D)):ws(D)?(e.consume(D),A):q(D)}function C(D){return D===45||dl(D)?(e.consume(D),C):D===47||D===62||uc(D)?P(D):n(D)}function P(D){return D===47?(e.consume(D),q):D===58||D===95||_d(D)?(e.consume(D),N):cn(D)?(a=P,U(D)):ws(D)?(e.consume(D),P):q(D)}function N(D){return D===45||D===46||D===58||D===95||dl(D)?(e.consume(D),N):$(D)}function $(D){return D===61?(e.consume(D),M):cn(D)?(a=$,U(D)):ws(D)?(e.consume(D),$):P(D)}function M(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,B):cn(D)?(a=M,U(D)):ws(D)?(e.consume(D),M):(e.consume(D),i=void 0,W)}function B(D){return D===i?(e.consume(D),z):D===null?n(D):cn(D)?(a=B,U(D)):(e.consume(D),B)}function z(D){return D===62||D===47||uc(D)?P(D):n(D)}function W(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===62||uc(D)?P(D):(e.consume(D),W)}function U(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),ni(e,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Y(D){return e.enter("htmlTextData"),a(D)}function q(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}}const vK={name:"labelEnd",tokenize:avt,resolveTo:ovt,resolveAll:svt},nvt={tokenize:uvt},rvt={tokenize:lvt},ivt={tokenize:cvt};function svt(e){let t=-1,n;for(;++t<e.length;)n=e[t][1],(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++);return e}function ovt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Xl(a,e.slice(s+1,s+r+3)),a=Xl(a,[["enter",c,t]]),a=Xl(a,gK(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Xl(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Xl(a,e.slice(o+1)),a=Xl(a,[["exit",u,t]]),nh(e,s,e.length,a),e}function avt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(c){return s?s._inactive?l(c):(o=r.parser.defined.includes(hw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelEnd"),u):n(c)}function u(c){return c===40?e.attempt(nvt,t,o?t:l)(c):c===91?e.attempt(rvt,t,o?e.attempt(ivt,t,l):l)(c):o?t(c):l(c)}function l(c){return s._balanced=!0,n(c)}}function uvt(e,t,n){return r;function r(u){return e.enter("resource"),e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),P2(e,i)}function i(u){return u===41?a(u):qOe(e,s,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(u)}function s(u){return uc(u)?P2(e,o)(u):a(u)}function o(u){return u===34||u===39||u===40?GOe(e,P2(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(u):a(u)}function a(u){return u===41?(e.enter("resourceMarker"),e.consume(u),e.exit("resourceMarker"),e.exit("resource"),t):n(u)}}function lvt(e,t,n){const r=this;return i;function i(o){return WOe.call(r,e,s,n,"reference","referenceMarker","referenceString")(o)}function s(o){return r.parser.defined.includes(hw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(o):n(o)}}function cvt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const fvt={name:"labelStartImage",tokenize:dvt,resolveAll:vK.resolveAll};function dvt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const hvt={name:"labelStartLink",tokenize:pvt,resolveAll:vK.resolveAll};function pvt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const PB={name:"lineEnding",tokenize:mvt};function mvt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ni(e,t,"linePrefix")}}const N$={name:"thematicBreak",tokenize:gvt};function gvt(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),i=u,o(u)}function o(u){return u===i?(e.enter("thematicBreakSequence"),a(u)):ws(u)?ni(e,o,"whitespace")(u):r<3||u!==null&&!cn(u)?n(u):(e.exit("thematicBreak"),t(u))}function a(u){return u===i?(e.consume(u),r++,a):(e.exit("thematicBreakSequence"),o(u))}}const cu={name:"list",tokenize:_vt,continuation:{tokenize:bvt},exit:Evt},yvt={tokenize:Svt,partial:!0},vvt={tokenize:wvt,partial:!0};function _vt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Z7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(N$,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Z7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(h4,r.interrupt?n:c,e.attempt(yvt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return ws(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function bvt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(h4,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ni(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!ws(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(vvt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ni(e,e.attempt(cu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function wvt(e,t,n){const r=this;return ni(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Evt(e){e.exit(this.containerState.type)}function Svt(e,t,n){const r=this;return ni(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!ws(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const cde={name:"setextUnderline",tokenize:Tvt,resolveTo:xvt};function xvt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Tvt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if(r.events[i][1].type!=="lineEnding"&&r.events[i][1].type!=="linePrefix"&&r.events[i][1].type!=="content"){o=r.events[i][1].type==="paragraph";break}return a;function a(c){return!r.parser.lazy[r.now().line]&&(r.interrupt||o)?(e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),s=c,u(c)):n(c)}function u(c){return c===s?(e.consume(c),u):(e.exit("setextHeadingLineSequence"),ni(e,l,"lineSuffix")(c))}function l(c){return c===null||cn(c)?(e.exit("setextHeadingLine"),t(c)):n(c)}}const Cvt={tokenize:Avt};function Avt(e){const t=this,n=e.attempt(h4,r,e.attempt(this.parser.constructs.flowInitial,i,ni(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Nyt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Ivt={resolveAll:KOe()},Ovt=YOe("string"),Pvt=YOe("text");function YOe(e){return{tokenize:t,resolveAll:KOe(e==="text"?kvt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function KOe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function kvt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function $vt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:_,exit:w,attempt:b(x),check:b(E),interrupt:b(E,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(P){return o=Xl(o,P),g(),o[o.length-1]!==null?[]:(T(t,0),l.events=gK(s,l.events,l),l.events)}function d(P,N){return Nvt(h(P),N)}function h(P){return Rvt(o,P)}function p(){return Object.assign({},r)}function m(P){i[P.line]=P.column,C()}function g(){let P;for(;r._index<o.length;){const N=o[r._index];if(typeof N=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<N.length;)y(N.charCodeAt(r._bufferIndex));else y(N)}}function y(P){c=c(P)}function v(P){cn(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,C()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=P}function _(P,N){const $=N||{};return $.type=P,$.start=p(),l.events.push(["enter",$,l]),a.push($),$}function w(P){const N=a.pop();return N.end=p(),l.events.push(["exit",N,l]),N}function x(P,N){T(P,N.from)}function E(P,N){N.restore()}function b(P,N){return $;function $(M,B,z){let W,U,Y,q;return Array.isArray(M)?L(M):"tokenize"in M?L([M]):D(M);function D(te){return le;function le(me){const ye=me!==null&&te[me],de=me!==null&&te.null,we=[...Array.isArray(ye)?ye:ye?[ye]:[],...Array.isArray(de)?de:de?[de]:[]];return L(we)(me)}}function L(te){return W=te,U=0,te.length===0?z:G(te[U])}function G(te){return le;function le(me){return q=A(),Y=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?H():te.tokenize.call(N?Object.assign(Object.create(l),N):l,u,V,H)(me)}}function V(te){return P(Y,q),B}function H(te){return q.restore(),++U<W.length?G(W[U]):z}}}function T(P,N){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&nh(l.events,N,l.events.length-N,P.resolve(l.events.slice(N),l)),P.resolveTo&&(l.events=P.resolveTo(l.events,l))}function A(){const P=p(),N=l.previous,$=l.currentConstruct,M=l.events.length,B=Array.from(a);return{restore:z,from:M};function z(){r=P,l.previous=N,l.currentConstruct=$,l.events.length=M,a=B,C()}}function C(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Rvt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;return n===i?o=[e[n].slice(r,s)]:(o=e.slice(n,i),r>-1&&(o[0]=o[0].slice(r)),s>0&&o.push(e[i].slice(0,s))),o}function Nvt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Dvt={42:cu,43:cu,45:cu,48:cu,49:cu,50:cu,51:cu,52:cu,53:cu,54:cu,55:cu,56:cu,57:cu,62:UOe},Mvt={91:jyt},Lvt={[-2]:OB,[-1]:OB,32:OB},Fvt={35:qyt,42:N$,45:[cde,N$],60:Kyt,61:cde,95:N$,96:ude,126:ude},jvt={38:VOe,92:zOe},Bvt={[-5]:PB,[-4]:PB,[-3]:PB,33:fvt,38:VOe,42:tV,60:[yyt,evt],91:hvt,92:[Vyt,zOe],93:vK,95:tV,96:Oyt},Uvt={null:[tV,Ivt]},zvt={null:[42,95]},Vvt={null:[]},Hvt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zvt,contentInitial:Mvt,disable:Vvt,document:Dvt,flow:Fvt,flowInitial:Lvt,insideSpan:Uvt,string:jvt,text:Bvt},Symbol.toStringTag,{value:"Module"}));function qvt(e={}){const t=nyt([Hvt].concat(e.extensions||[])),n={defined:[],lazy:{},constructs:t,content:r(cyt),document:r(dyt),flow:r(Cvt),string:r(Ovt),text:r(Pvt)};return n;function r(i){return s;function s(o){return $vt(n,i,o)}}}const fde=/[\0\t\n\r]/g;function Wvt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+s.toString(o),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(fde.lastIndex=f,l=fde.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}function Gvt(e){for(;!HOe(e););return e}function XOe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCharCode(n)}const Yvt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Kvt(e){return e.replace(Yvt,Xvt)}function Xvt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return XOe(n.slice(s?2:1),s?16:10)}return yK(n)||e}const nV={}.hasOwnProperty,Qvt=function(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Jvt(n)(Gvt(qvt(n).document().write(Wvt()(e,t,!0))))};function Jvt(e={}){const t=QOe({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(We),autolinkProtocol:N,autolinkEmail:N,atxHeading:u(De),blockQuote:u(he),characterEscape:N,characterReference:N,codeFenced:u(He),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:u(He,l),codeText:u(Me,l),codeTextData:N,data:N,codeFlowValue:N,definition:u(Ke),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:u(je),hardBreakEscape:u(qe),hardBreakTrailing:u(qe),htmlFlow:u(Qt,l),htmlFlowData:N,htmlText:u(Qt,l),htmlTextData:N,image:u(rt),label:l,link:u(We),listItem:u(ut),listItemValue:m,listOrdered:u(Pt,p),listUnordered:u(Pt),paragraph:u(mt),reference:te,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:u(De),strong:u(vt),thematicBreak:u(Xt)},exit:{atxHeading:f(),atxHeadingSequence:T,autolink:f(),autolinkEmail:we,autolinkProtocol:de,blockQuote:f(),characterEscapeValue:$,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:ye,codeFenced:f(_),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:y,codeFlowValue:$,codeIndented:f(w),codeText:f(U),codeTextData:$,data:$,definition:f(),definitionDestinationString:b,definitionLabelString:x,definitionTitleString:E,emphasis:f(),hardBreakEscape:f(B),hardBreakTrailing:f(B),htmlFlow:f(z),htmlFlowData:$,htmlText:f(W),htmlTextData:$,image:f(q),label:L,labelText:D,lineEnding:M,link:f(Y),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:le,resourceDestinationString:G,resourceTitleString:V,resource:H,setextHeading:f(P),setextHeadingLineSequence:C,setextHeadingText:A,strong:f(),thematicBreak:f()}},e.mdastExtensions||[]),n={};return r;function r(fe){let xe={type:"root",children:[]};const Le=[xe],ft=[],Ze=[],ct={stack:Le,tokenStack:ft,config:t,enter:c,exit:d,buffer:l,resume:h,setData:s,getData:o};let ot=-1;for(;++ot<fe.length;)if(fe[ot][1].type==="listOrdered"||fe[ot][1].type==="listUnordered")if(fe[ot][0]==="enter")Ze.push(ot);else{const At=Ze.pop();ot=i(fe,At,ot)}for(ot=-1;++ot<fe.length;){const At=t[fe[ot][0]];nV.call(At,fe[ot][1].type)&&At[fe[ot][1].type].call(Object.assign({sliceSerialize:fe[ot][2].sliceSerialize},ct),fe[ot][1])}if(ft.length>0){const At=ft[ft.length-1];(At[1]||dde).call(ct,void 0,At[0])}for(xe.position={start:a(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:a(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},ot=-1;++ot<t.transforms.length;)xe=t.transforms[ot](xe)||xe;return xe}function i(fe,xe,Le){let ft=xe-1,Ze=-1,ct=!1,ot,At,Tn,Zt;for(;++ft<=Le;){const Jt=fe[ft];if(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered"||Jt[1].type==="blockQuote"?(Jt[0]==="enter"?Ze++:Ze--,Zt=void 0):Jt[1].type==="lineEndingBlank"?Jt[0]==="enter"&&(ot&&!Zt&&!Ze&&!Tn&&(Tn=ft),Zt=void 0):Jt[1].type==="linePrefix"||Jt[1].type==="listItemValue"||Jt[1].type==="listItemMarker"||Jt[1].type==="listItemPrefix"||Jt[1].type==="listItemPrefixWhitespace"||(Zt=void 0),!Ze&&Jt[0]==="enter"&&Jt[1].type==="listItemPrefix"||Ze===-1&&Jt[0]==="exit"&&(Jt[1].type==="listUnordered"||Jt[1].type==="listOrdered")){if(ot){let rr=ft;for(At=void 0;rr--;){const Bn=fe[rr];if(Bn[1].type==="lineEnding"||Bn[1].type==="lineEndingBlank"){if(Bn[0]==="exit")continue;At&&(fe[At][1].type="lineEndingBlank",ct=!0),Bn[1].type="lineEnding",At=rr}else if(!(Bn[1].type==="linePrefix"||Bn[1].type==="blockQuotePrefix"||Bn[1].type==="blockQuotePrefixWhitespace"||Bn[1].type==="blockQuoteMarker"||Bn[1].type==="listItemIndent"))break}Tn&&(!At||Tn<At)&&(ot._spread=!0),ot.end=Object.assign({},At?fe[At][1].start:Jt[1].end),fe.splice(At||ft,0,["exit",ot,Jt[2]]),ft++,Le++}Jt[1].type==="listItemPrefix"&&(ot={type:"listItem",_spread:!1,start:Object.assign({},Jt[1].start)},fe.splice(ft,0,["enter",ot,Jt[2]]),ft++,Le++,Tn=void 0,Zt=!0)}}return fe[xe][1]._spread=ct,Le}function s(fe,xe){n[fe]=xe}function o(fe){return n[fe]}function a(fe){return{line:fe.line,column:fe.column,offset:fe.offset}}function u(fe,xe){return Le;function Le(ft){c.call(this,fe(ft),ft),xe&&xe.call(this,ft)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(fe,xe,Le){return this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([xe,Le]),fe.position={start:a(xe.start)},fe}function f(fe){return xe;function xe(Le){fe&&fe.call(this,Le),d.call(this,Le)}}function d(fe,xe){const Le=this.stack.pop(),ft=this.tokenStack.pop();if(ft)ft[0].type!==fe.type&&(xe?xe.call(this,fe,ft[0]):(ft[1]||dde).call(this,fe,ft[0]));else throw new Error("Cannot close `"+fe.type+"` ("+dw({start:fe.start,end:fe.end})+"): its not open");return Le.position.end=a(fe.end),Le}function h(){return tyt(this.stack.pop())}function p(){s("expectingFirstListItemValue",!0)}function m(fe){if(o("expectingFirstListItemValue")){const xe=this.stack[this.stack.length-2];xe.start=Number.parseInt(this.sliceSerialize(fe),10),s("expectingFirstListItemValue")}}function g(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.lang=fe}function y(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.meta=fe}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function _(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function w(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe.replace(/(\r?\n|\r)$/g,"")}function x(fe){const xe=this.resume(),Le=this.stack[this.stack.length-1];Le.label=xe,Le.identifier=hw(this.sliceSerialize(fe)).toLowerCase()}function E(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function b(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function T(fe){const xe=this.stack[this.stack.length-1];if(!xe.depth){const Le=this.sliceSerialize(fe).length;xe.depth=Le}}function A(){s("setextHeadingSlurpLineEnding",!0)}function C(fe){const xe=this.stack[this.stack.length-1];xe.depth=this.sliceSerialize(fe).charCodeAt(0)===61?1:2}function P(){s("setextHeadingSlurpLineEnding")}function N(fe){const xe=this.stack[this.stack.length-1];let Le=xe.children[xe.children.length-1];(!Le||Le.type!=="text")&&(Le=Ht(),Le.position={start:a(fe.start)},xe.children.push(Le)),this.stack.push(Le)}function $(fe){const xe=this.stack.pop();xe.value+=this.sliceSerialize(fe),xe.position.end=a(fe.end)}function M(fe){const xe=this.stack[this.stack.length-1];if(o("atHardBreak")){const Le=xe.children[xe.children.length-1];Le.position.end=a(fe.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&t.canContainEols.includes(xe.type)&&(N.call(this,fe),$.call(this,fe))}function B(){s("atHardBreak",!0)}function z(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function W(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function U(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.value=fe}function Y(){const fe=this.stack[this.stack.length-1];o("inReference")?(fe.type+="Reference",fe.referenceType=o("referenceType")||"shortcut",delete fe.url,delete fe.title):(delete fe.identifier,delete fe.label),s("referenceType")}function q(){const fe=this.stack[this.stack.length-1];o("inReference")?(fe.type+="Reference",fe.referenceType=o("referenceType")||"shortcut",delete fe.url,delete fe.title):(delete fe.identifier,delete fe.label),s("referenceType")}function D(fe){const xe=this.stack[this.stack.length-2],Le=this.sliceSerialize(fe);xe.label=Kvt(Le),xe.identifier=hw(Le).toLowerCase()}function L(){const fe=this.stack[this.stack.length-1],xe=this.resume(),Le=this.stack[this.stack.length-1];s("inReference",!0),Le.type==="link"?Le.children=fe.children:Le.alt=xe}function G(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.url=fe}function V(){const fe=this.resume(),xe=this.stack[this.stack.length-1];xe.title=fe}function H(){s("inReference")}function te(){s("referenceType","collapsed")}function le(fe){const xe=this.resume(),Le=this.stack[this.stack.length-1];Le.label=xe,Le.identifier=hw(this.sliceSerialize(fe)).toLowerCase(),s("referenceType","full")}function me(fe){s("characterReferenceType",fe.type)}function ye(fe){const xe=this.sliceSerialize(fe),Le=o("characterReferenceType");let ft;Le?(ft=XOe(xe,Le==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):ft=yK(xe);const Ze=this.stack.pop();Ze.value+=ft,Ze.position.end=a(fe.end)}function de(fe){$.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url=this.sliceSerialize(fe)}function we(fe){$.call(this,fe);const xe=this.stack[this.stack.length-1];xe.url="mailto:"+this.sliceSerialize(fe)}function he(){return{type:"blockquote",children:[]}}function He(){return{type:"code",lang:null,meta:null,value:""}}function Me(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function je(){return{type:"emphasis",children:[]}}function De(){return{type:"heading",depth:void 0,children:[]}}function qe(){return{type:"break"}}function Qt(){return{type:"html",value:""}}function rt(){return{type:"image",title:null,url:"",alt:null}}function We(){return{type:"link",title:null,url:"",children:[]}}function Pt(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function ut(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function mt(){return{type:"paragraph",children:[]}}function vt(){return{type:"strong",children:[]}}function Ht(){return{type:"text",value:""}}function Xt(){return{type:"thematicBreak"}}}function QOe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?QOe(e,r):Zvt(e,r)}return e}function Zvt(e,t){let n;for(n in t)if(nV.call(t,n)){const r=n==="canContainEols"||n==="transforms",s=(nV.call(e,n)?e[n]:void 0)||(e[n]=r?[]:{}),o=t[n];o&&(r?e[n]=[...s,...o]:Object.assign(s,o))}}function dde(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+dw({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+dw({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+dw({start:t.start,end:t.end})+") is still open")}function e1t(e){Object.assign(this,{Parser:n=>{const r=this.data("settings");return Qvt(n,Object.assign({},r,e,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}var js=function(e,t,n){var r={type:String(e)};return n==null&&(typeof t=="string"||Array.isArray(t))?n=t:Object.assign(r,t),Array.isArray(n)?r.children=n:n!=null&&(r.value=String(n)),r};const D$={}.hasOwnProperty;function t1t(e,t){const n=t.data||{};return"value"in t&&!(D$.call(n,"hName")||D$.call(n,"hProperties")||D$.call(n,"hChildren"))?e.augment(t,js("text",t.value)):e(t,"div",Ta(e,t))}function JOe(e,t,n){const r=t&&t.type;let i;if(!r)throw new Error("Expected node, got `"+t+"`");return D$.call(e.handlers,r)?i=e.handlers[r]:e.passThrough&&e.passThrough.includes(r)?i=n1t:i=e.unknownHandler,(typeof i=="function"?i:t1t)(e,t,n)}function n1t(e,t){return"children"in t?{...t,children:Ta(e,t)}:t}function Ta(e,t){const n=[];if("children"in t){const r=t.children;let i=-1;for(;++i<r.length;){const s=JOe(e,r[i],t);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?n.push(...s):n.push(s)}}}return n}const ZOe=function(e){if(e==null)return o1t;if(typeof e=="string")return s1t(e);if(typeof e=="object")return Array.isArray(e)?r1t(e):i1t(e);if(typeof e=="function")return p4(e);throw new Error("Expected function, string, or object as test")};function r1t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ZOe(e[n]);return p4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].call(this,...i))return!0;return!1}}function i1t(e){return p4(t);function t(n){let r;for(r in e)if(n[r]!==e[r])return!1;return!0}}function s1t(e){return p4(t);function t(n){return n&&n.type===e}}function p4(e){return t;function t(...n){return!!e.call(this,...n)}}function o1t(){return!0}const a1t=!0,u1t="skip",hde=!1,l1t=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null);const i=ZOe(t),s=r?-1:1;o(e,null,[])();function o(a,u,l){const c=typeof a=="object"&&a!==null?a:{};let f;return typeof c.type=="string"&&(f=typeof c.tagName=="string"?c.tagName:typeof c.name=="string"?c.name:void 0,Object.defineProperty(d,"name",{value:"node ("+(c.type+(f?"<"+f+">":""))+")"})),d;function d(){let h=[],p,m,g;if((!t||i(a,u,l[l.length-1]||null))&&(h=c1t(n(a,l)),h[0]===hde))return h;if(a.children&&h[0]!==u1t)for(m=(r?a.children.length:-1)+s,g=l.concat(a);m>-1&&m<a.children.length;){if(p=o(a.children[m],m,g)(),p[0]===hde)return p;m=typeof p[1]=="number"?p[1]:m+s}return h}}};function c1t(e){return Array.isArray(e)?e:typeof e=="number"?[a1t,e]:[e]}const _K=function(e,t,n,r){typeof t=="function"&&typeof n!="function"&&(r=n,n=t,t=null),l1t(e,t,i,r);function i(s,o){const a=o[o.length-1];return n(s,a?a.children.indexOf(s):null,a)}},ePe=nPe("start"),tPe=nPe("end");function nPe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function f1t(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}const pde={}.hasOwnProperty;function d1t(e){const t=Object.create(null);if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return _K(e,"definition",r=>{const i=mde(r.identifier);i&&!pde.call(t,i)&&(t[i]=r)}),n;function n(r){const i=mde(r);return i&&pde.call(t,i)?t[i]:null}}function mde(e){return String(e||"").toUpperCase()}function pS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&dl(e.charCodeAt(n+1))&&dl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function vp(e,t){const n=[];let r=-1;for(t&&n.push(js("text",`
`));++r<e.length;)r&&n.push(js("text",`
`)),n.push(e[r]);return t&&e.length>0&&n.push(js("text",`
`)),n}function h1t(e){let t=-1;const n=[];for(;++t<e.footnoteOrder.length;){const r=e.footnoteById[e.footnoteOrder[t].toUpperCase()];if(!r)continue;const i=Ta(e,r),s=String(r.identifier),o=pS(s.toLowerCase());let a=0;const u=[];for(;++a<=e.footnoteCounts[s];){const f={type:"element",tagName:"a",properties:{href:"#"+e.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:e.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),u.length>0&&u.push({type:"text",value:" "}),u.push(f)}const l=i[i.length-1];if(l&&l.type==="element"&&l.tagName==="p"){const f=l.children[l.children.length-1];f&&f.type==="text"?f.value+=" ":l.children.push({type:"text",value:" "}),l.children.push(...u)}else i.push(...u);const c={type:"element",tagName:"li",properties:{id:e.clobberPrefix+"fn-"+o},children:vp(i,!0)};r.position&&(c.position=r.position),n.push(c)}return n.length===0?null:{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:e.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(e.footnoteLabelProperties)),id:"footnote-label"},children:[js("text",e.footnoteLabel)]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:vp(n,!0)},{type:"text",value:`
`}]}}function p1t(e,t){return e(t,"blockquote",vp(Ta(e,t),!0))}function m1t(e,t){return[e(t,"br"),js("text",`
`)]}function g1t(e,t){const n=t.value?t.value+`
`:"",r=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),i={};r&&(i.className=["language-"+r]);const s=e(t,"code",i,[js("text",n)]);return t.meta&&(s.data={meta:t.meta}),e(t.position,"pre",[s])}function y1t(e,t){return e(t,"del",Ta(e,t))}function v1t(e,t){return e(t,"em",Ta(e,t))}function rPe(e,t){const n=String(t.identifier),r=pS(n.toLowerCase()),i=e.footnoteOrder.indexOf(n);let s;i===-1?(e.footnoteOrder.push(n),e.footnoteCounts[n]=1,s=e.footnoteOrder.length):(e.footnoteCounts[n]++,s=i+1);const o=e.footnoteCounts[n];return e(t,"sup",[e(t.position,"a",{href:"#"+e.clobberPrefix+"fn-"+r,id:e.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:"footnote-label"},[js("text",String(s))])])}function _1t(e,t){const n=e.footnoteById;let r=1;for(;r in n;)r++;const i=String(r);return n[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:t.children}],position:t.position},rPe(e,{type:"footnoteReference",identifier:i,position:t.position})}function b1t(e,t){return e(t,"h"+t.depth,Ta(e,t))}function w1t(e,t){return e.dangerous?e.augment(t,js("raw",t.value)):null}function iPe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return js("text","!["+t.alt+r);const i=Ta(e,t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift(js("text","["));const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push(js("text",r)),i}function E1t(e,t){const n=e.definition(t.identifier);if(!n)return iPe(e,t);const r={src:pS(n.url||""),alt:t.alt};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"img",r)}function S1t(e,t){const n={src:pS(t.url),alt:t.alt};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"img",n)}function x1t(e,t){return e(t,"code",[js("text",t.value.replace(/\r?\n|\r/g," "))])}function T1t(e,t){const n=e.definition(t.identifier);if(!n)return iPe(e,t);const r={href:pS(n.url||"")};return n.title!==null&&n.title!==void 0&&(r.title=n.title),e(t,"a",r,Ta(e,t))}function C1t(e,t){const n={href:pS(t.url)};return t.title!==null&&t.title!==void 0&&(n.title=t.title),e(t,"a",n,Ta(e,t))}function A1t(e,t,n){const r=Ta(e,t),i=n?I1t(n):sPe(t),s={},o=[];if(typeof t.checked=="boolean"){let l;r[0]&&r[0].type==="element"&&r[0].tagName==="p"?l=r[0]:(l=e(null,"p",[]),r.unshift(l)),l.children.length>0&&l.children.unshift(js("text"," ")),l.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const l=r[a];(i||a!==0||l.type!=="element"||l.tagName!=="p")&&o.push(js("text",`
`)),l.type==="element"&&l.tagName==="p"&&!i?o.push(...l.children):o.push(l)}const u=r[r.length-1];return u&&(i||!("tagName"in u)||u.tagName!=="p")&&o.push(js("text",`
`)),e(t,"li",s,o)}function I1t(e){let t=e.spread;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=sPe(n[r]);return!!t}function sPe(e){const t=e.spread;return t??e.children.length>1}function O1t(e,t){const n={},r=t.ordered?"ol":"ul",i=Ta(e,t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<i.length;){const o=i[s];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}return e(t,r,n,vp(i,!0))}function P1t(e,t){return e(t,"p",Ta(e,t))}function k1t(e,t){return e.augment(t,js("root",vp(Ta(e,t))))}function $1t(e,t){return e(t,"strong",Ta(e,t))}function R1t(e,t){const n=t.children;let r=-1;const i=t.align||[],s=[];for(;++r<n.length;){const o=n[r].children,a=r===0?"th":"td",u=[];let l=-1;const c=t.align?i.length:o.length;for(;++l<c;){const f=o[l];u.push(e(f,a,{align:i[l]},f?Ta(e,f):[]))}s[r]=e(n[r],"tr",vp(u,!0))}return e(t,"table",vp([e(s[0].position,"thead",vp([s[0]],!0))].concat(s[1]?e({start:ePe(s[1]),end:tPe(s[s.length-1])},"tbody",vp(s.slice(1),!0)):[]),!0))}const gde=9,yde=32;function N1t(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(vde(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(vde(t.slice(i),i>0,!1)),s.join("")}function vde(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===gde||s===yde;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===gde||s===yde;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function D1t(e,t){return e.augment(t,js("text",N1t(String(t.value))))}function M1t(e,t){return e(t,"hr")}const L1t={blockquote:p1t,break:m1t,code:g1t,delete:y1t,emphasis:v1t,footnoteReference:rPe,footnote:_1t,heading:b1t,html:w1t,imageReference:E1t,image:S1t,inlineCode:x1t,linkReference:T1t,link:C1t,listItem:A1t,list:O1t,paragraph:P1t,root:k1t,strong:$1t,table:R1t,text:D1t,thematicBreak:M1t,toml:XP,yaml:XP,definition:XP,footnoteDefinition:XP};function XP(){return null}const F1t={}.hasOwnProperty;function j1t(e,t){const n=t||{},r=n.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=n.clobberPrefix===void 0||n.clobberPrefix===null?"user-content-":n.clobberPrefix,o.footnoteLabel=n.footnoteLabel||"Footnotes",o.footnoteLabelTagName=n.footnoteLabelTagName||"h2",o.footnoteLabelProperties=n.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=n.footnoteBackLabel||"Back to content",o.definition=d1t(e),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.augment=s,o.handlers={...L1t,...n.handlers},o.unknownHandler=n.unknownHandler,o.passThrough=n.passThrough,_K(e,"footnoteDefinition",a=>{const u=String(a.identifier).toUpperCase();F1t.call(i,u)||(i[u]=a)}),o;function s(a,u){if(a&&"data"in a&&a.data){const l=a.data;l.hName&&(u.type!=="element"&&(u={type:"element",tagName:"",properties:{},children:[]}),u.tagName=l.hName),u.type==="element"&&l.hProperties&&(u.properties={...u.properties,...l.hProperties}),"children"in u&&u.children&&l.hChildren&&(u.children=l.hChildren)}if(a){const l="type"in a?a:{position:a};f1t(l)||(u.position={start:ePe(l),end:tPe(l)})}return u}function o(a,u,l,c){return Array.isArray(l)&&(c=l,l={}),s(a,{type:"element",tagName:u,properties:l||{},children:c||[]})}}function oPe(e,t){const n=j1t(e,t),r=JOe(n,e,null),i=h1t(n);return i&&r.children.push(js("text",`
`),i),Array.isArray(r)?{type:"root",children:r}:r}const B1t=function(e,t){return e&&"run"in e?z1t(e,t):V1t(e||t)},U1t=B1t;function z1t(e,t){return(n,r,i)=>{e.run(oPe(n,t),r,s=>{i(s)})}}function V1t(e){return t=>oPe(t,e)}let EI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};EI.prototype.property={};EI.prototype.normal={};EI.prototype.space=null;function aPe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new EI(n,r,t)}function zC(e){return e.toLowerCase()}let Cc=class{constructor(t,n){this.property=t,this.attribute=n}};Cc.prototype.space=null;Cc.prototype.boolean=!1;Cc.prototype.booleanish=!1;Cc.prototype.overloadedBoolean=!1;Cc.prototype.number=!1;Cc.prototype.commaSeparated=!1;Cc.prototype.spaceSeparated=!1;Cc.prototype.commaOrSpaceSeparated=!1;Cc.prototype.mustUseProperty=!1;Cc.prototype.defined=!1;let H1t=0;const Pn=c_(),ys=c_(),uPe=c_(),it=c_(),pi=c_(),pw=c_(),el=c_();function c_(){return 2**++H1t}const rV=Object.freeze(Object.defineProperty({__proto__:null,boolean:Pn,booleanish:ys,commaOrSpaceSeparated:el,commaSeparated:pw,number:it,overloadedBoolean:uPe,spaceSeparated:pi},Symbol.toStringTag,{value:"Module"})),kB=Object.keys(rV);class bK extends Cc{constructor(t,n,r,i){let s=-1;if(super(t,n),_de(this,"space",i),typeof r=="number")for(;++s<kB.length;){const o=kB[s];_de(this,kB[s],(r&rV[o])===rV[o])}}}bK.prototype.defined=!0;function _de(e,t,n){n&&(e[t]=n)}const q1t={}.hasOwnProperty;function mS(e){const t={},n={};let r;for(r in e.properties)if(q1t.call(e.properties,r)){const i=e.properties[r],s=new bK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[zC(r)]=r,n[zC(s.attribute)]=r}return new EI(t,n,e.space)}const lPe=mS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),cPe=mS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function fPe(e,t){return t in e?e[t]:t}function dPe(e,t){return fPe(e,t.toLowerCase())}const hPe=mS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:dPe,properties:{xmlns:null,xmlnsXLink:null}}),pPe=mS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ys,ariaAutoComplete:null,ariaBusy:ys,ariaChecked:ys,ariaColCount:it,ariaColIndex:it,ariaColSpan:it,ariaControls:pi,ariaCurrent:null,ariaDescribedBy:pi,ariaDetails:null,ariaDisabled:ys,ariaDropEffect:pi,ariaErrorMessage:null,ariaExpanded:ys,ariaFlowTo:pi,ariaGrabbed:ys,ariaHasPopup:null,ariaHidden:ys,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:pi,ariaLevel:it,ariaLive:null,ariaModal:ys,ariaMultiLine:ys,ariaMultiSelectable:ys,ariaOrientation:null,ariaOwns:pi,ariaPlaceholder:null,ariaPosInSet:it,ariaPressed:ys,ariaReadOnly:ys,ariaRelevant:null,ariaRequired:ys,ariaRoleDescription:pi,ariaRowCount:it,ariaRowIndex:it,ariaRowSpan:it,ariaSelected:ys,ariaSetSize:it,ariaSort:null,ariaValueMax:it,ariaValueMin:it,ariaValueNow:it,ariaValueText:null,role:null}}),W1t=mS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:dPe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:pw,acceptCharset:pi,accessKey:pi,action:null,allow:null,allowFullScreen:Pn,allowPaymentRequest:Pn,allowUserMedia:Pn,alt:null,as:null,async:Pn,autoCapitalize:null,autoComplete:pi,autoFocus:Pn,autoPlay:Pn,capture:Pn,charSet:null,checked:Pn,cite:null,className:pi,cols:it,colSpan:null,content:null,contentEditable:ys,controls:Pn,controlsList:pi,coords:it|pw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Pn,defer:Pn,dir:null,dirName:null,disabled:Pn,download:uPe,draggable:ys,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Pn,formTarget:null,headers:pi,height:it,hidden:Pn,high:it,href:null,hrefLang:null,htmlFor:pi,httpEquiv:pi,id:null,imageSizes:null,imageSrcSet:null,inputMode:null,integrity:null,is:null,isMap:Pn,itemId:null,itemProp:pi,itemRef:pi,itemScope:Pn,itemType:pi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Pn,low:it,manifest:null,max:null,maxLength:it,media:null,method:null,min:null,minLength:it,multiple:Pn,muted:Pn,name:null,nonce:null,noModule:Pn,noValidate:Pn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Pn,optimum:it,pattern:null,ping:pi,placeholder:null,playsInline:Pn,poster:null,preload:null,readOnly:Pn,referrerPolicy:null,rel:pi,required:Pn,reversed:Pn,rows:it,rowSpan:it,sandbox:pi,scope:null,scoped:Pn,seamless:Pn,selected:Pn,shape:null,size:it,sizes:null,slot:null,span:it,spellCheck:ys,src:null,srcDoc:null,srcLang:null,srcSet:null,start:it,step:null,style:null,tabIndex:it,target:null,title:null,translate:null,type:null,typeMustMatch:Pn,useMap:null,value:ys,width:it,wrap:null,align:null,aLink:null,archive:pi,axis:null,background:null,bgColor:null,border:it,borderColor:null,bottomMargin:it,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Pn,declare:Pn,event:null,face:null,frame:null,frameBorder:null,hSpace:it,leftMargin:it,link:null,longDesc:null,lowSrc:null,marginHeight:it,marginWidth:it,noResize:Pn,noHref:Pn,noShade:Pn,noWrap:Pn,object:null,profile:null,prompt:null,rev:null,rightMargin:it,rules:null,scheme:null,scrolling:ys,standby:null,summary:null,text:null,topMargin:it,valueType:null,version:null,vAlign:null,vLink:null,vSpace:it,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Pn,disableRemotePlayback:Pn,prefix:null,property:null,results:it,security:null,unselectable:null}}),G1t=mS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:fPe,properties:{about:el,accentHeight:it,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:it,amplitude:it,arabicForm:null,ascent:it,attributeName:null,attributeType:null,azimuth:it,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:it,by:null,calcMode:null,capHeight:it,className:pi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:it,diffuseConstant:it,direction:null,display:null,dur:null,divisor:it,dominantBaseline:null,download:Pn,dx:null,dy:null,edgeMode:null,editable:null,elevation:it,enableBackground:null,end:null,event:null,exponent:it,externalResourcesRequired:null,fill:null,fillOpacity:it,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:pw,g2:pw,glyphName:pw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:it,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:it,horizOriginX:it,horizOriginY:it,id:null,ideographic:it,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:it,k:it,k1:it,k2:it,k3:it,k4:it,kernelMatrix:el,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:it,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:it,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:it,overlineThickness:it,paintOrder:null,panose1:null,path:null,pathLength:it,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:pi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:it,pointsAtY:it,pointsAtZ:it,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:el,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:el,rev:el,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:el,requiredFeatures:el,requiredFonts:el,requiredFormats:el,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:it,specularExponent:it,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:it,strikethroughThickness:it,string:null,stroke:null,strokeDashArray:el,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:it,strokeOpacity:it,strokeWidth:null,style:null,surfaceScale:it,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:el,tabIndex:it,tableValues:null,target:null,targetX:it,targetY:it,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:el,to:null,transform:null,u1:null,u2:null,underlinePosition:it,underlineThickness:it,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:it,values:null,vAlphabetic:it,vMathematical:it,vectorEffect:null,vHanging:it,vIdeographic:it,version:null,vertAdvY:it,vertOriginX:it,vertOriginY:it,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:it,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Y1t=/^data[-\w.:]+$/i,bde=/-[a-z]/g,K1t=/[A-Z]/g;function m4(e,t){const n=zC(t);let r=t,i=Cc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Y1t.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(bde,Q1t);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!bde.test(s)){let o=s.replace(K1t,X1t);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=bK}return new i(r,t)}function X1t(e){return"-"+e.toLowerCase()}function Q1t(e){return e.charAt(1).toUpperCase()}const wde={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},SI=aPe([cPe,lPe,hPe,pPe,W1t],"html"),gS=aPe([cPe,lPe,hPe,pPe,G1t],"svg");function J1t(e){if(e.allowedElements&&e.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(e.allowedElements||e.disallowedElements||e.allowElement)return t=>{_K(t,"element",(n,r,i)=>{const s=i;let o;if(e.allowedElements?o=!e.allowedElements.includes(n.tagName):e.disallowedElements&&(o=e.disallowedElements.includes(n.tagName)),!o&&e.allowElement&&typeof r=="number"&&(o=!e.allowElement(n,r,s)),o&&typeof r=="number")return e.unwrapDisallowed&&n.children?s.children.splice(r,1,...n.children):s.children.splice(r,1),r})}}var mPe={exports:{}},Br={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wK=Symbol.for("react.element"),EK=Symbol.for("react.portal"),g4=Symbol.for("react.fragment"),y4=Symbol.for("react.strict_mode"),v4=Symbol.for("react.profiler"),_4=Symbol.for("react.provider"),b4=Symbol.for("react.context"),Z1t=Symbol.for("react.server_context"),w4=Symbol.for("react.forward_ref"),E4=Symbol.for("react.suspense"),S4=Symbol.for("react.suspense_list"),x4=Symbol.for("react.memo"),T4=Symbol.for("react.lazy"),e_t=Symbol.for("react.offscreen"),gPe;gPe=Symbol.for("react.module.reference");function Ac(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case wK:switch(e=e.type,e){case g4:case v4:case y4:case E4:case S4:return e;default:switch(e=e&&e.$$typeof,e){case Z1t:case b4:case w4:case T4:case x4:case _4:return e;default:return t}}case EK:return t}}}Br.ContextConsumer=b4;Br.ContextProvider=_4;Br.Element=wK;Br.ForwardRef=w4;Br.Fragment=g4;Br.Lazy=T4;Br.Memo=x4;Br.Portal=EK;Br.Profiler=v4;Br.StrictMode=y4;Br.Suspense=E4;Br.SuspenseList=S4;Br.isAsyncMode=function(){return!1};Br.isConcurrentMode=function(){return!1};Br.isContextConsumer=function(e){return Ac(e)===b4};Br.isContextProvider=function(e){return Ac(e)===_4};Br.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===wK};Br.isForwardRef=function(e){return Ac(e)===w4};Br.isFragment=function(e){return Ac(e)===g4};Br.isLazy=function(e){return Ac(e)===T4};Br.isMemo=function(e){return Ac(e)===x4};Br.isPortal=function(e){return Ac(e)===EK};Br.isProfiler=function(e){return Ac(e)===v4};Br.isStrictMode=function(e){return Ac(e)===y4};Br.isSuspense=function(e){return Ac(e)===E4};Br.isSuspenseList=function(e){return Ac(e)===S4};Br.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===g4||e===v4||e===y4||e===E4||e===S4||e===e_t||typeof e=="object"&&e!==null&&(e.$$typeof===T4||e.$$typeof===x4||e.$$typeof===_4||e.$$typeof===b4||e.$$typeof===w4||e.$$typeof===gPe||e.getModuleId!==void 0)};Br.typeOf=Ac;mPe.exports=Br;var t_t=mPe.exports;const n_t=$l(t_t);function r_t(e){const t=e&&typeof e=="object"&&e.type==="text"?e.value||"":e;return typeof t=="string"&&t.replace(/[ \t\n\f\r]/g,"")===""}function Ede(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function yPe(e){return e.join(" ").trim()}function Sde(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function vPe(e,t){const n=t||{};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}var SK={exports:{}},xde=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,i_t=/\n/g,s_t=/^\s*/,o_t=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a_t=/^:\s*/,u_t=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,l_t=/^[;\s]*/,c_t=/^\s+|\s+$/g,f_t=`
`,Tde="/",Cde="*",dv="",d_t="comment",h_t="declaration",p_t=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(i_t);m&&(n+=m.length);var g=p.lastIndexOf(f_t);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(s_t)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Tde!=e.charAt(0)||Cde!=e.charAt(1))){for(var m=2;dv!=e.charAt(m)&&(Cde!=e.charAt(m)||Tde!=e.charAt(m+1));)++m;if(m+=2,dv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:d_t,comment:g})}}function d(){var p=s(),m=u(o_t);if(m){if(f(),!u(a_t))return a("property missing ':'");var g=u(u_t),y=p({type:h_t,property:Ade(m[0].replace(xde,dv)),value:g?Ade(g[0].replace(xde,dv)):dv});return u(l_t),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Ade(e){return e?e.replace(c_t,dv):dv}var m_t=p_t;function _Pe(e,t){var n=null;if(!e||typeof e!="string")return n;for(var r,i=m_t(e),s=typeof t=="function",o,a,u=0,l=i.length;u<l;u++)r=i[u],o=r.property,a=r.value,s?t(o,a,r):a&&(n||(n={}),n[o]=a);return n}SK.exports=_Pe;SK.exports.default=_Pe;var g_t=SK.exports;const y_t=$l(g_t),iV={}.hasOwnProperty,v_t=new Set(["table","thead","tbody","tfoot","tr"]);function bPe(e,t){const n=[];let r=-1,i;for(;++r<t.children.length;)i=t.children[r],i.type==="element"?n.push(__t(e,i,r,t)):i.type==="text"?(t.type!=="element"||!v_t.has(t.tagName)||!r_t(i))&&n.push(i.value):i.type==="raw"&&!e.options.skipHtml&&n.push(i.value);return n}function __t(e,t,n,r){const i=e.options,s=i.transformLinkUri===void 0?x0t:i.transformLinkUri,o=e.schema,a=t.tagName,u={};let l=o,c;if(o.space==="html"&&a==="svg"&&(l=gS,e.schema=l),t.properties)for(c in t.properties)iV.call(t.properties,c)&&w_t(u,c,t.properties[c],e);(a==="ol"||a==="ul")&&e.listDepth++;const f=bPe(e,t);(a==="ol"||a==="ul")&&e.listDepth--,e.schema=o;const d=t.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},h=i.components&&iV.call(i.components,a)?i.components[a]:a,p=typeof h=="string"||h===F.Fragment;if(!n_t.isValidElementType(h))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(u.key=[a,d.start.line,d.start.column,n].join("-"),a==="a"&&i.linkTarget&&(u.target=typeof i.linkTarget=="function"?i.linkTarget(String(u.href||""),t.children,typeof u.title=="string"?u.title:null):i.linkTarget),a==="a"&&s&&(u.href=s(String(u.href||""),t.children,typeof u.title=="string"?u.title:null)),!p&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(u.inline=!0),!p&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(u.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(u.src=i.transformImageUri(String(u.src||""),String(u.alt||""),typeof u.title=="string"?u.title:null)),!p&&a==="li"&&r.type==="element"){const m=b_t(t);u.checked=m&&m.properties?!!m.properties.checked:null,u.index=$B(r,t),u.ordered=r.tagName==="ol"}return!p&&(a==="ol"||a==="ul")&&(u.ordered=a==="ol",u.depth=e.listDepth),(a==="td"||a==="th")&&(u.align&&(u.style||(u.style={}),u.style.textAlign=u.align,delete u.align),p||(u.isHeader=a==="th")),!p&&a==="tr"&&r.type==="element"&&(u.isHeader=r.tagName==="thead"),i.sourcePos&&(u["data-sourcepos"]=x_t(d)),!p&&i.rawSourcePos&&(u.sourcePosition=t.position),!p&&i.includeElementIndex&&(u.index=$B(r,t),u.siblingCount=$B(r)),p||(u.node=t),f.length>0?F.createElement(h,u,f):F.createElement(h,u)}function b_t(e){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n.type==="element"&&n.tagName==="input")return n}return null}function $B(e,t){let n=-1,r=0;for(;++n<e.children.length&&e.children[n]!==t;)e.children[n].type==="element"&&r++;return r}function w_t(e,t,n,r){const i=m4(r.schema,t);let s=n;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?vPe(s):yPe(s)),i.property==="style"&&typeof s=="string"&&(s=E_t(s)),i.space&&i.property?e[iV.call(wde,i.property)?wde[i.property]:i.property]=s:i.attribute&&(e[i.attribute]=s))}function E_t(e){const t={};try{y_t(e,n)}catch{}return t;function n(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;t[s.replace(/-([a-z])/g,S_t)]=i}}function S_t(e,t){return t.toUpperCase()}function x_t(e){return[e.start.line,":",e.start.column,"-",e.end.line,":",e.end.column].map(String).join("")}const Ide={}.hasOwnProperty,T_t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",QP={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function wPe(e){for(const s in QP)if(Ide.call(QP,s)&&Ide.call(e,s)){const o=QP[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${T_t}#${o.id}> for more info)`),delete QP[s]}const t=Q0t().use(e1t).use(e.remarkPlugins||[]).use(U1t,{...e.remarkRehypeOptions,allowDangerousHtml:!0}).use(e.rehypePlugins||[]).use(J1t,e),n=new M0t;typeof e.children=="string"?n.value=e.children:e.children!==void 0&&e.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${e.children}\`)`);const r=t.runSync(t.parse(n),n);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=F.createElement(F.Fragment,{},bPe({options:e,schema:SI,listDepth:0},r));return e.className&&(i=F.createElement("div",{className:e.className},i)),i}wPe.propTypes={children:Yt.string,className:Yt.string,allowElement:Yt.func,allowedElements:Yt.arrayOf(Yt.string),disallowedElements:Yt.arrayOf(Yt.string),unwrapDisallowed:Yt.bool,remarkPlugins:Yt.arrayOf(Yt.oneOfType([Yt.object,Yt.func,Yt.arrayOf(Yt.oneOfType([Yt.bool,Yt.string,Yt.object,Yt.func,Yt.arrayOf(Yt.any)]))])),rehypePlugins:Yt.arrayOf(Yt.oneOfType([Yt.object,Yt.func,Yt.arrayOf(Yt.oneOfType([Yt.bool,Yt.string,Yt.object,Yt.func,Yt.arrayOf(Yt.any)]))])),sourcePos:Yt.bool,rawSourcePos:Yt.bool,skipHtml:Yt.bool,includeElementIndex:Yt.bool,transformLinkUri:Yt.oneOfType([Yt.func,Yt.bool]),linkTarget:Yt.oneOfType([Yt.func,Yt.string]),transformImageUri:Yt.func,components:Yt.object};const EPe=-1,C4=0,c3=1,f3=2,xK=3,TK=4,CK=5,AK=6,SPe=7,xPe=8,Ode=typeof self=="object"?self:globalThis,C_t=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case C4:case EPe:return n(o,i);case c3:{const a=n([],i);for(const u of o)a.push(r(u));return a}case f3:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case xK:return n(new Date(o),i);case TK:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case CK:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case AK:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case SPe:{const{name:a,message:u}=o;return n(new Ode[a](u),i)}case xPe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Ode[s](o),i)};return r},Pde=e=>C_t(new Map,e)(0),K_="",{toString:A_t}={},{keys:I_t}=Object,Dx=e=>{const t=typeof e;if(t!=="object"||!e)return[C4,t];const n=A_t.call(e).slice(8,-1);switch(n){case"Array":return[c3,K_];case"Object":return[f3,K_];case"Date":return[xK,K_];case"RegExp":return[TK,K_];case"Map":return[CK,K_];case"Set":return[AK,K_]}return n.includes("Array")?[c3,n]:n.includes("Error")?[SPe,n]:[f3,n]},JP=([e,t])=>e===C4&&(t==="function"||t==="symbol"),O_t=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Dx(o);switch(a){case C4:{let c=o;switch(u){case"bigint":a=xPe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([EPe],o)}return i([a,c],o)}case c3:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case f3:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of I_t(o))(e||!JP(Dx(o[d])))&&c.push([s(d),s(o[d])]);return f}case xK:return i([a,o.toISOString()],o);case TK:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case CK:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(JP(Dx(d))||JP(Dx(h))))&&c.push([s(d),s(h)]);return f}case AK:{const c=[],f=i([a,c],o);for(const d of o)(e||!JP(Dx(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},kde=(e,{json:t,lossy:n}={})=>{const r=[];return O_t(!(t||n),!!t,new Map,r)(e),r},$de=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Pde(kde(e,t)):structuredClone(e):(e,t)=>Pde(kde(e,t)),Rde=/[#.]/g;function P_t(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Rde.lastIndex=i;const a=Rde.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const k_t=new Set(["button","menu","reset","submit"]),sV={}.hasOwnProperty;function TPe(e,t,n){const r=n&&D_t(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=P_t(s,t),l.tagName=l.tagName.toLowerCase(),r&&sV.call(r,l.tagName)&&(l.tagName=r[l.tagName]),$_t(o,l.tagName)){let c;for(c in o)sV.call(o,c)&&R_t(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)oV(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function $_t(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?k_t.has(e.type.toLowerCase()):!("value"in e)}function R_t(e,t,n,r){const i=m4(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Ede(r):i.commaSeparated?o=Sde(r):i.commaOrSpaceSeparated?o=Ede(Sde(r).join(" ")):o=Nde(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?N_t(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Nde(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function oV(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)oV(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?oV(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Nde(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||zC(n)===zC(t)))return!0}return n}function N_t(e){const t=[];let n;for(n in e)sV.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function D_t(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const M_t=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],L_t=TPe(SI,"div"),F_t=TPe(gS,"g",M_t),RB=/\r?\n|\r/g;function j_t(e){const t=String(e),n=[];for(RB.lastIndex=0;RB.test(t);)n.push(RB.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Iv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},CPe={}.hasOwnProperty,B_t=Object.prototype;function U_t(e,t){const n=t||{};return IK({file:n.file||void 0,location:!1,schema:n.space==="svg"?gS:SI,verbose:n.verbose||!1},e)}function IK(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},M$(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:APe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=j_t(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},M$(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},M$(e,r,n),n}default:return n=z_t(e,t),n}}function APe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=IK(e,t[n]);r.push(i)}return r}function z_t(e,t){const n=e.schema;e.schema=t.namespaceURI===Iv.svg?gS:SI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;CPe.call(B_t,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?F_t:L_t)(t.tagName,i,APe(e,t.childNodes));if(M$(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Hb(u.startTag),c=u&&u.endTag&&Hb(u.endTag),f=IK(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function M$(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=V_t(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function V_t(e,t,n){const r=Hb(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)CPe.call(n.attrs,o)&&(s[m4(e.schema,o).property]=Hb(n.attrs[o]));n.startTag;const a=Hb(n.startTag),u=n.endTag?Hb(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Hb(e){const t=Dde({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Dde({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Dde(e){return e.line&&e.column?e:void 0}const Mde={}.hasOwnProperty;function IPe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Mde.call(i,e)){const u=String(i[e]);o=Mde.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const H_t={},q_t={}.hasOwnProperty,OPe=IPe("type",{handlers:{root:G_t,element:J_t,text:X_t,comment:Q_t,doctype:K_t}});function W_t(e,t){const r=(t||H_t).space;return OPe(e,r==="svg"?gS:SI)}function G_t(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=OK(e.children,n,t),yS(e,n),n}function Y_t(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=OK(e.children,n,t),yS(e,n),n}function K_t(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return yS(e,t),t}function X_t(e){const t={nodeName:"#text",value:e.value,parentNode:null};return yS(e,t),t}function Q_t(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return yS(e,t),t}function J_t(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=gS);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&q_t.call(e.properties,s)){const u=Z_t(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Iv[o],childNodes:[],parentNode:null};return a.childNodes=OK(e.children,a,r),yS(e,a),e.tagName==="template"&&e.content&&(a.content=Y_t(e.content,r)),a}function Z_t(e,t,n){const r=m4(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?vPe(n):yPe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Iv[r.space]}return i}function OK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=OPe(e[r],n);s.parentNode=t,i.push(s)}return i}function yS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const ebt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],tbt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ci="";var J;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(J=J||(J={}));const uu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function PPe(e){return e>=55296&&e<=57343}function nbt(e){return e>=56320&&e<=57343}function rbt(e,t){return(e-55296)*1024+9216+t}function kPe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function $Pe(e){return e>=64976&&e<=65007||tbt.has(e)}var Ae;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ae=Ae||(Ae={}));const ibt=65536;class sbt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=ibt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(nbt(n))return this.pos++,this._addGap(),rbt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,J.EOF;return this._err(Ae.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,J.EOF;const r=this.html.charCodeAt(n);return r===J.CARRIAGE_RETURN?J.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,J.EOF;let t=this.html.charCodeAt(this.pos);return t===J.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,J.LINE_FEED):t===J.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,PPe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===J.LINE_FEED||t===J.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){kPe(t)?this._err(Ae.controlCharacterInInputStream):$Pe(t)&&this._err(Ae.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var $n;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})($n=$n||($n={}));function RPe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Qm=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),obt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var NB;const abt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ubt=(NB=String.fromCodePoint)!==null&&NB!==void 0?NB:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function lbt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=abt.get(e))!==null&&t!==void 0?t:e}var to;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(to||(to={}));const cbt=32;var Pd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Pd||(Pd={}));function aV(e){return e>=to.ZERO&&e<=to.NINE}function fbt(e){return e>=to.UPPER_A&&e<=to.UPPER_F||e>=to.LOWER_A&&e<=to.LOWER_F}function dbt(e){return e>=to.UPPER_A&&e<=to.UPPER_Z||e>=to.LOWER_A&&e<=to.LOWER_Z||aV(e)}function hbt(e){return e===to.EQUALS||dbt(e)}var Ks;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ks||(Ks={}));var hv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(hv||(hv={}));class pbt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ks.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=hv.Strict}startEntity(t){this.decodeMode=t,this.state=Ks.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ks.EntityStart:return t.charCodeAt(n)===to.NUM?(this.state=Ks.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ks.NamedEntity,this.stateNamedEntity(t,n));case Ks.NumericStart:return this.stateNumericStart(t,n);case Ks.NumericDecimal:return this.stateNumericDecimal(t,n);case Ks.NumericHex:return this.stateNumericHex(t,n);case Ks.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|cbt)===to.LOWER_X?(this.state=Ks.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ks.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(aV(i)||fbt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(aV(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===to.SEMI)this.consumed+=1;else if(this.decodeMode===hv.Strict)return 0;return this.emitCodePoint(lbt(this.result),this.consumed),this.errors&&(t!==to.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Pd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=DPe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===hv.Attribute&&(s===0||hbt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Pd.VALUE_LENGTH)>>14,s!==0){if(o===to.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==hv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Pd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Pd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ks.NamedEntity:return this.result!==0&&(this.decodeMode!==hv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ks.NumericDecimal:return this.emitNumericEntity(0,2);case Ks.NumericHex:return this.emitNumericEntity(0,3);case Ks.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ks.EntityStart:return 0}}}function NPe(e){let t="";const n=new pbt(e,r=>t+=ubt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function DPe(e,t,n,r){const i=(t&Pd.BRANCH_LENGTH)>>7,s=t&Pd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}NPe(Qm);NPe(obt);var Re;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Re=Re||(Re={}));var Qg;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Qg=Qg||(Qg={}));var sl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(sl=sl||(sl={}));var be;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(be=be||(be={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(O=O||(O={}));const mbt=new Map([[be.A,O.A],[be.ADDRESS,O.ADDRESS],[be.ANNOTATION_XML,O.ANNOTATION_XML],[be.APPLET,O.APPLET],[be.AREA,O.AREA],[be.ARTICLE,O.ARTICLE],[be.ASIDE,O.ASIDE],[be.B,O.B],[be.BASE,O.BASE],[be.BASEFONT,O.BASEFONT],[be.BGSOUND,O.BGSOUND],[be.BIG,O.BIG],[be.BLOCKQUOTE,O.BLOCKQUOTE],[be.BODY,O.BODY],[be.BR,O.BR],[be.BUTTON,O.BUTTON],[be.CAPTION,O.CAPTION],[be.CENTER,O.CENTER],[be.CODE,O.CODE],[be.COL,O.COL],[be.COLGROUP,O.COLGROUP],[be.DD,O.DD],[be.DESC,O.DESC],[be.DETAILS,O.DETAILS],[be.DIALOG,O.DIALOG],[be.DIR,O.DIR],[be.DIV,O.DIV],[be.DL,O.DL],[be.DT,O.DT],[be.EM,O.EM],[be.EMBED,O.EMBED],[be.FIELDSET,O.FIELDSET],[be.FIGCAPTION,O.FIGCAPTION],[be.FIGURE,O.FIGURE],[be.FONT,O.FONT],[be.FOOTER,O.FOOTER],[be.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[be.FORM,O.FORM],[be.FRAME,O.FRAME],[be.FRAMESET,O.FRAMESET],[be.H1,O.H1],[be.H2,O.H2],[be.H3,O.H3],[be.H4,O.H4],[be.H5,O.H5],[be.H6,O.H6],[be.HEAD,O.HEAD],[be.HEADER,O.HEADER],[be.HGROUP,O.HGROUP],[be.HR,O.HR],[be.HTML,O.HTML],[be.I,O.I],[be.IMG,O.IMG],[be.IMAGE,O.IMAGE],[be.INPUT,O.INPUT],[be.IFRAME,O.IFRAME],[be.KEYGEN,O.KEYGEN],[be.LABEL,O.LABEL],[be.LI,O.LI],[be.LINK,O.LINK],[be.LISTING,O.LISTING],[be.MAIN,O.MAIN],[be.MALIGNMARK,O.MALIGNMARK],[be.MARQUEE,O.MARQUEE],[be.MATH,O.MATH],[be.MENU,O.MENU],[be.META,O.META],[be.MGLYPH,O.MGLYPH],[be.MI,O.MI],[be.MO,O.MO],[be.MN,O.MN],[be.MS,O.MS],[be.MTEXT,O.MTEXT],[be.NAV,O.NAV],[be.NOBR,O.NOBR],[be.NOFRAMES,O.NOFRAMES],[be.NOEMBED,O.NOEMBED],[be.NOSCRIPT,O.NOSCRIPT],[be.OBJECT,O.OBJECT],[be.OL,O.OL],[be.OPTGROUP,O.OPTGROUP],[be.OPTION,O.OPTION],[be.P,O.P],[be.PARAM,O.PARAM],[be.PLAINTEXT,O.PLAINTEXT],[be.PRE,O.PRE],[be.RB,O.RB],[be.RP,O.RP],[be.RT,O.RT],[be.RTC,O.RTC],[be.RUBY,O.RUBY],[be.S,O.S],[be.SCRIPT,O.SCRIPT],[be.SECTION,O.SECTION],[be.SELECT,O.SELECT],[be.SOURCE,O.SOURCE],[be.SMALL,O.SMALL],[be.SPAN,O.SPAN],[be.STRIKE,O.STRIKE],[be.STRONG,O.STRONG],[be.STYLE,O.STYLE],[be.SUB,O.SUB],[be.SUMMARY,O.SUMMARY],[be.SUP,O.SUP],[be.TABLE,O.TABLE],[be.TBODY,O.TBODY],[be.TEMPLATE,O.TEMPLATE],[be.TEXTAREA,O.TEXTAREA],[be.TFOOT,O.TFOOT],[be.TD,O.TD],[be.TH,O.TH],[be.THEAD,O.THEAD],[be.TITLE,O.TITLE],[be.TR,O.TR],[be.TRACK,O.TRACK],[be.TT,O.TT],[be.U,O.U],[be.UL,O.UL],[be.SVG,O.SVG],[be.VAR,O.VAR],[be.WBR,O.WBR],[be.XMP,O.XMP]]);function vS(e){var t;return(t=mbt.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const Xe=O,gbt={[Re.HTML]:new Set([Xe.ADDRESS,Xe.APPLET,Xe.AREA,Xe.ARTICLE,Xe.ASIDE,Xe.BASE,Xe.BASEFONT,Xe.BGSOUND,Xe.BLOCKQUOTE,Xe.BODY,Xe.BR,Xe.BUTTON,Xe.CAPTION,Xe.CENTER,Xe.COL,Xe.COLGROUP,Xe.DD,Xe.DETAILS,Xe.DIR,Xe.DIV,Xe.DL,Xe.DT,Xe.EMBED,Xe.FIELDSET,Xe.FIGCAPTION,Xe.FIGURE,Xe.FOOTER,Xe.FORM,Xe.FRAME,Xe.FRAMESET,Xe.H1,Xe.H2,Xe.H3,Xe.H4,Xe.H5,Xe.H6,Xe.HEAD,Xe.HEADER,Xe.HGROUP,Xe.HR,Xe.HTML,Xe.IFRAME,Xe.IMG,Xe.INPUT,Xe.LI,Xe.LINK,Xe.LISTING,Xe.MAIN,Xe.MARQUEE,Xe.MENU,Xe.META,Xe.NAV,Xe.NOEMBED,Xe.NOFRAMES,Xe.NOSCRIPT,Xe.OBJECT,Xe.OL,Xe.P,Xe.PARAM,Xe.PLAINTEXT,Xe.PRE,Xe.SCRIPT,Xe.SECTION,Xe.SELECT,Xe.SOURCE,Xe.STYLE,Xe.SUMMARY,Xe.TABLE,Xe.TBODY,Xe.TD,Xe.TEMPLATE,Xe.TEXTAREA,Xe.TFOOT,Xe.TH,Xe.THEAD,Xe.TITLE,Xe.TR,Xe.TRACK,Xe.UL,Xe.WBR,Xe.XMP]),[Re.MATHML]:new Set([Xe.MI,Xe.MO,Xe.MN,Xe.MS,Xe.MTEXT,Xe.ANNOTATION_XML]),[Re.SVG]:new Set([Xe.TITLE,Xe.FOREIGN_OBJECT,Xe.DESC]),[Re.XLINK]:new Set,[Re.XML]:new Set,[Re.XMLNS]:new Set};function MPe(e){return e===Xe.H1||e===Xe.H2||e===Xe.H3||e===Xe.H4||e===Xe.H5||e===Xe.H6}be.STYLE,be.SCRIPT,be.XMP,be.IFRAME,be.NOEMBED,be.NOFRAMES,be.PLAINTEXT;const ybt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var ee;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(ee||(ee={}));const us={DATA:ee.DATA,RCDATA:ee.RCDATA,RAWTEXT:ee.RAWTEXT,SCRIPT_DATA:ee.SCRIPT_DATA,PLAINTEXT:ee.PLAINTEXT,CDATA_SECTION:ee.CDATA_SECTION};function k2(e){return e>=J.DIGIT_0&&e<=J.DIGIT_9}function kT(e){return e>=J.LATIN_CAPITAL_A&&e<=J.LATIN_CAPITAL_Z}function vbt(e){return e>=J.LATIN_SMALL_A&&e<=J.LATIN_SMALL_Z}function Jm(e){return vbt(e)||kT(e)}function uV(e){return Jm(e)||k2(e)}function LPe(e){return e>=J.LATIN_CAPITAL_A&&e<=J.LATIN_CAPITAL_F}function FPe(e){return e>=J.LATIN_SMALL_A&&e<=J.LATIN_SMALL_F}function _bt(e){return k2(e)||LPe(e)||FPe(e)}function ZP(e){return e+32}function jPe(e){return e===J.SPACE||e===J.LINE_FEED||e===J.TABULATION||e===J.FORM_FEED}function bbt(e){return e===J.EQUALS_SIGN||uV(e)}function Lde(e){return jPe(e)||e===J.SOLIDUS||e===J.GREATER_THAN_SIGN}class wbt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=ee.DATA,this.returnState=ee.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new sbt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:$n.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:$n.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:$n.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:$n.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(RPe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ae.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=vS(t.tagName),t.type===$n.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ae.endTagWithAttributes),t.selfClosing&&this._err(Ae.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case $n.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case $n.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case $n.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:$n.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=jPe(t)?$n.WHITESPACE_CHARACTER:t===J.NULL?$n.NULL_CHARACTER:$n.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken($n.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Qm[0];s>=0&&(s=DPe(Qm,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Qm[s];const a=o&Pd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==J.SEMICOLON&&this._isCharacterReferenceInAttribute()&&bbt(this.preprocessor.peek(1))?(n=[J.AMPERSAND],s+=u):(n=u===0?[Qm[s]&~Pd.VALUE_LENGTH]:u===1?[Qm[++s]]:[Qm[++s],Qm[++s]],r=0,i=t!==J.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ae.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===ee.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case ee.DATA:{this._stateData(t);break}case ee.RCDATA:{this._stateRcdata(t);break}case ee.RAWTEXT:{this._stateRawtext(t);break}case ee.SCRIPT_DATA:{this._stateScriptData(t);break}case ee.PLAINTEXT:{this._statePlaintext(t);break}case ee.TAG_OPEN:{this._stateTagOpen(t);break}case ee.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case ee.TAG_NAME:{this._stateTagName(t);break}case ee.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case ee.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case ee.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case ee.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case ee.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case ee.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case ee.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case ee.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case ee.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case ee.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case ee.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case ee.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case ee.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case ee.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case ee.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case ee.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case ee.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case ee.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case ee.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case ee.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case ee.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case ee.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case ee.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case ee.BOGUS_COMMENT:{this._stateBogusComment(t);break}case ee.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case ee.COMMENT_START:{this._stateCommentStart(t);break}case ee.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case ee.COMMENT:{this._stateComment(t);break}case ee.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case ee.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case ee.COMMENT_END:{this._stateCommentEnd(t);break}case ee.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case ee.DOCTYPE:{this._stateDoctype(t);break}case ee.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case ee.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case ee.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case ee.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case ee.CDATA_SECTION:{this._stateCdataSection(t);break}case ee.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case ee.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case ee.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case ee.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case ee.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case ee.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case ee.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case ee.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case ee.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case J.LESS_THAN_SIGN:{this.state=ee.TAG_OPEN;break}case J.AMPERSAND:{this.returnState=ee.DATA,this.state=ee.CHARACTER_REFERENCE;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitCodePoint(t);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case J.AMPERSAND:{this.returnState=ee.RCDATA,this.state=ee.CHARACTER_REFERENCE;break}case J.LESS_THAN_SIGN:{this.state=ee.RCDATA_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Ci);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case J.LESS_THAN_SIGN:{this.state=ee.RAWTEXT_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Ci);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Ci);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Ci);break}case J.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Jm(t))this._createStartTagToken(),this.state=ee.TAG_NAME,this._stateTagName(t);else switch(t){case J.EXCLAMATION_MARK:{this.state=ee.MARKUP_DECLARATION_OPEN;break}case J.SOLIDUS:{this.state=ee.END_TAG_OPEN;break}case J.QUESTION_MARK:{this._err(Ae.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t);break}case J.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=ee.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Jm(t))this._createEndTagToken(),this.state=ee.TAG_NAME,this._stateTagName(t);else switch(t){case J.GREATER_THAN_SIGN:{this._err(Ae.missingEndTagName),this.state=ee.DATA;break}case J.EOF:{this._err(Ae.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ae.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case J.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.tagName+=Ci;break}case J.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(kT(t)?ZP(t):t)}}_stateRcdataLessThanSign(t){t===J.SOLIDUS?this.state=ee.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Jm(t)?(this.state=ee.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=ee.BEFORE_ATTRIBUTE_NAME,!1;case J.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=ee.SELF_CLOSING_START_TAG,!1;case J.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=ee.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===J.SOLIDUS?this.state=ee.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Jm(t)?(this.state=ee.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case J.SOLIDUS:{this.state=ee.SCRIPT_DATA_END_TAG_OPEN;break}case J.EXCLAMATION_MARK:{this.state=ee.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Jm(t)?(this.state=ee.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===J.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===J.HYPHEN_MINUS?(this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Ci);break}case J.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(Ci);break}case J.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case J.HYPHEN_MINUS:{this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case J.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_ESCAPED,this._emitChars(Ci);break}case J.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===J.SOLIDUS?this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Jm(t)?(this._emitChars("<"),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Jm(t)?(this.state=ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(uu.SCRIPT,!1)&&Lde(this.preprocessor.peek(uu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<uu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._emitChars(Ci);break}case J.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ci);break}case J.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case J.HYPHEN_MINUS:{this._emitChars("-");break}case J.LESS_THAN_SIGN:{this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case J.GREATER_THAN_SIGN:{this.state=ee.SCRIPT_DATA,this._emitChars(">");break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ci);break}case J.EOF:{this._err(Ae.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===J.SOLIDUS?(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(uu.SCRIPT,!1)&&Lde(this.preprocessor.peek(uu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<uu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=ee.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.SOLIDUS:case J.GREATER_THAN_SIGN:case J.EOF:{this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case J.EQUALS_SIGN:{this._err(Ae.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=ee.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:case J.SOLIDUS:case J.GREATER_THAN_SIGN:case J.EOF:{this._leaveAttrName(),this.state=ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case J.EQUALS_SIGN:{this._leaveAttrName(),this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case J.QUOTATION_MARK:case J.APOSTROPHE:case J.LESS_THAN_SIGN:{this._err(Ae.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.name+=Ci;break}default:this.currentAttr.name+=String.fromCodePoint(kT(t)?ZP(t):t)}}_stateAfterAttributeName(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.SOLIDUS:{this.state=ee.SELF_CLOSING_START_TAG;break}case J.EQUALS_SIGN:{this.state=ee.BEFORE_ATTRIBUTE_VALUE;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{this.state=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this.state=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ae.missingAttributeValue),this.state=ee.DATA,this.emitCurrentTagToken();break}default:this.state=ee.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case J.QUOTATION_MARK:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case J.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=Ci;break}case J.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case J.APOSTROPHE:{this.state=ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case J.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=ee.CHARACTER_REFERENCE;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=Ci;break}case J.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case J.AMPERSAND:{this.returnState=ee.ATTRIBUTE_VALUE_UNQUOTED,this.state=ee.CHARACTER_REFERENCE;break}case J.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),this.currentAttr.value+=Ci;break}case J.QUOTATION_MARK:case J.APOSTROPHE:case J.LESS_THAN_SIGN:case J.EQUALS_SIGN:case J.GRAVE_ACCENT:{this._err(Ae.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case J.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this._leaveAttrValue(),this.state=ee.BEFORE_ATTRIBUTE_NAME;break}case J.SOLIDUS:{this._leaveAttrValue(),this.state=ee.SELF_CLOSING_START_TAG;break}case J.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=ee.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBetweenAttributes),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case J.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=ee.DATA,this.emitCurrentTagToken();break}case J.EOF:{this._err(Ae.eofInTag),this._emitEOFToken();break}default:this._err(Ae.unexpectedSolidusInTag),this.state=ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.data+=Ci;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(uu.DASH_DASH,!0)?(this._createCommentToken(uu.DASH_DASH.length+1),this.state=ee.COMMENT_START):this._consumeSequenceIfMatch(uu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(uu.DOCTYPE.length+1),this.state=ee.DOCTYPE):this._consumeSequenceIfMatch(uu.CDATA_START,!0)?this.inForeignNode?this.state=ee.CDATA_SECTION:(this._err(Ae.cdataInHtmlContent),this._createCommentToken(uu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=ee.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ae.incorrectlyOpenedComment),this._createCommentToken(2),this.state=ee.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_START_DASH;break}case J.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=ee.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case J.GREATER_THAN_SIGN:{this._err(Ae.abruptClosingOfEmptyComment),this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ee.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_END_DASH;break}case J.LESS_THAN_SIGN:{n.data+="<",this.state=ee.COMMENT_LESS_THAN_SIGN;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.data+=Ci;break}case J.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case J.EXCLAMATION_MARK:{n.data+="!",this.state=ee.COMMENT_LESS_THAN_SIGN_BANG;break}case J.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===J.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=ee.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===J.HYPHEN_MINUS?this.state=ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=ee.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==J.GREATER_THAN_SIGN&&t!==J.EOF&&this._err(Ae.nestedComment),this.state=ee.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{this.state=ee.COMMENT_END;break}case J.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EXCLAMATION_MARK:{this.state=ee.COMMENT_END_BANG;break}case J.HYPHEN_MINUS:{n.data+="-";break}case J.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=ee.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case J.HYPHEN_MINUS:{n.data+="--!",this.state=ee.COMMENT_END_DASH;break}case J.GREATER_THAN_SIGN:{this._err(Ae.incorrectlyClosedComment),this.state=ee.DATA,this.emitCurrentComment(n);break}case J.EOF:{this._err(Ae.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=ee.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case J.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingWhitespaceBeforeDoctypeName),this.state=ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(kT(t))this._createDoctypeToken(String.fromCharCode(ZP(t))),this.state=ee.DOCTYPE_NAME;else switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.NULL:{this._err(Ae.unexpectedNullCharacter),this._createDoctypeToken(Ci),this.state=ee.DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ae.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=ee.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.AFTER_DOCTYPE_NAME;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.name+=Ci;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(kT(t)?ZP(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(uu.PUBLIC,!1)?this.state=ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(uu.SYSTEM,!1)?this.state=ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ae.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.publicId="",this.state=ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case J.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.publicId+=Ci;break}case J.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case J.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.publicId+=Ci;break}case J.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case J.GREATER_THAN_SIGN:{this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.QUOTATION_MARK:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(Ae.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.QUOTATION_MARK:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:{this.state=ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.QUOTATION_MARK:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{this._err(Ae.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.QUOTATION_MARK:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case J.APOSTROPHE:{n.systemId="",this.state=ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case J.GREATER_THAN_SIGN:{this._err(Ae.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.DATA,this.emitCurrentDoctype(n);break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case J.QUOTATION_MARK:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.systemId+=Ci;break}case J.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case J.APOSTROPHE:{this.state=ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter),n.systemId+=Ci;break}case J.GREATER_THAN_SIGN:{this._err(Ae.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case J.SPACE:case J.LINE_FEED:case J.TABULATION:case J.FORM_FEED:break;case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.EOF:{this._err(Ae.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ae.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case J.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=ee.DATA;break}case J.NULL:{this._err(Ae.unexpectedNullCharacter);break}case J.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case J.RIGHT_SQUARE_BRACKET:{this.state=ee.CDATA_SECTION_BRACKET;break}case J.EOF:{this._err(Ae.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===J.RIGHT_SQUARE_BRACKET?this.state=ee.CDATA_SECTION_END:(this._emitChars("]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case J.GREATER_THAN_SIGN:{this.state=ee.DATA;break}case J.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=ee.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===J.NUMBER_SIGN?this.state=ee.NUMERIC_CHARACTER_REFERENCE:uV(t)?(this.state=ee.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this.state=ee.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){uV(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===J.SEMICOLON&&this._err(Ae.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===J.LATIN_SMALL_X||t===J.LATIN_CAPITAL_X?this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE_START:k2(t)?(this.state=ee.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(J.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){_bt(t)?(this.state=ee.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ae.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(J.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(J.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){LPe(t)?this.charRefCode=this.charRefCode*16+t-55:FPe(t)?this.charRefCode=this.charRefCode*16+t-87:k2(t)?this.charRefCode=this.charRefCode*16+t-48:t===J.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ae.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){k2(t)?this.charRefCode=this.charRefCode*10+t-48:t===J.SEMICOLON?this.state=ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ae.missingSemicolonAfterCharacterReference),this.state=ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===J.NULL)this._err(Ae.nullCharacterReference),this.charRefCode=J.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ae.characterReferenceOutsideUnicodeRange),this.charRefCode=J.REPLACEMENT_CHARACTER;else if(PPe(this.charRefCode))this._err(Ae.surrogateCharacterReference),this.charRefCode=J.REPLACEMENT_CHARACTER;else if($Pe(this.charRefCode))this._err(Ae.noncharacterCharacterReference);else if(kPe(this.charRefCode)||this.charRefCode===J.CARRIAGE_RETURN){this._err(Ae.controlCharacterReference);const n=ybt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const BPe=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),Fde=new Set([...BPe,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),ek=new Map([[O.APPLET,Re.HTML],[O.CAPTION,Re.HTML],[O.HTML,Re.HTML],[O.MARQUEE,Re.HTML],[O.OBJECT,Re.HTML],[O.TABLE,Re.HTML],[O.TD,Re.HTML],[O.TEMPLATE,Re.HTML],[O.TH,Re.HTML],[O.ANNOTATION_XML,Re.MATHML],[O.MI,Re.MATHML],[O.MN,Re.MATHML],[O.MO,Re.MATHML],[O.MS,Re.MATHML],[O.MTEXT,Re.MATHML],[O.DESC,Re.SVG],[O.FOREIGN_OBJECT,Re.SVG],[O.TITLE,Re.SVG]]),Ebt=[O.H1,O.H2,O.H3,O.H4,O.H5,O.H6],Sbt=[O.TR,O.TEMPLATE,O.HTML],xbt=[O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML],Tbt=[O.TABLE,O.TEMPLATE,O.HTML],Cbt=[O.TD,O.TH];class Abt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Re.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Re.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Ebt,Re.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Cbt,Re.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Tbt,Re.HTML)}clearBackToTableBodyContext(){this.clearBackTo(xbt,Re.HTML)}clearBackToTableRowContext(){this.clearBackTo(Sbt,Re.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Re.HTML)return!0;if(ek.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(MPe(n)&&r===Re.HTML)return!0;if(ek.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Re.HTML)return!0;if((r===O.UL||r===O.OL)&&i===Re.HTML||ek.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Re.HTML)return!0;if(r===O.BUTTON&&i===Re.HTML||ek.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Re.HTML){if(r===t)return!0;if(r===O.TABLE||r===O.TEMPLATE||r===O.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Re.HTML){if(n===O.TBODY||n===O.THEAD||n===O.TFOOT)return!0;if(n===O.TABLE||n===O.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Re.HTML){if(r===t)return!0;if(r!==O.OPTION&&r!==O.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;BPe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Fde.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Fde.has(this.currentTagId);)this.pop()}}const DB=3;var nf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(nf=nf||(nf={}));const jde={type:nf.Marker};class Ibt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===nf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<DB)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<DB)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=DB&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(jde)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:nf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:nf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(jde);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===nf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===nf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===nf.Element&&n.element===t)}}function Bde(e){return{nodeName:"#text",value:e,parentNode:null}}const gb={createDocument(){return{nodeName:"#document",mode:sl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};gb.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(gb.isTextNode(n)){n.value+=t;return}}gb.appendChild(e,Bde(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&gb.isTextNode(r)?r.value+=t:gb.insertBefore(e,Bde(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},UPe="html",Obt="about:legacy-compat",Pbt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",zPe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],kbt=[...zPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],$bt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),VPe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Rbt=[...VPe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Ude(e,t){return t.some(n=>e.startsWith(n))}function Nbt(e){return e.name===UPe&&e.publicId===null&&(e.systemId===null||e.systemId===Obt)}function Dbt(e){if(e.name!==UPe)return sl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Pbt)return sl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),$bt.has(n))return sl.QUIRKS;let r=t===null?kbt:zPe;if(Ude(n,r))return sl.QUIRKS;if(r=t===null?VPe:Rbt,Ude(n,r))return sl.LIMITED_QUIRKS}return sl.NO_QUIRKS}const zde={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Mbt="definitionurl",Lbt="definitionURL",Fbt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),jbt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Re.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Re.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Re.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Re.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Re.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Re.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Re.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Re.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Re.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Re.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Re.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Re.XMLNS}]]),Bbt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Ubt=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function zbt(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===Qg.COLOR||r===Qg.SIZE||r===Qg.FACE)||Ubt.has(t)}function HPe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Mbt){e.attrs[t].name=Lbt;break}}function qPe(e){for(let t=0;t<e.attrs.length;t++){const n=Fbt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function PK(e){for(let t=0;t<e.attrs.length;t++){const n=jbt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Vbt(e){const t=Bbt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=vS(e.tagName))}function Hbt(e,t){return t===Re.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function qbt(e,t,n){if(t===Re.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Qg.ENCODING){const i=n[r].value.toLowerCase();return i===zde.TEXT_HTML||i===zde.APPLICATION_XML}}return t===Re.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function Wbt(e,t,n,r){return(!r||r===Re.HTML)&&qbt(e,t,n)||(!r||r===Re.MATHML)&&Hbt(e,t)}const Gbt="hidden",Ybt=8,Kbt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Xbt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},WPe=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),Vde={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:gb,onParseError:null};let Hde=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Vde,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new wbt(this.options,this),this.activeFormattingElements=new Ibt(this.treeAdapter),this.fragmentContextID=r?vS(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Abt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Vde,...n};t??(t=r.treeAdapter.createElement(be.TEMPLATE,Re.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Re.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Xbt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Re.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Re.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=us.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===be.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Re.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=us.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=us.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=us.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=us.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Re.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Re.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(be.HTML,Re.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===$n.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===be.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Re.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Re.HTML)}_processToken(t){switch(t.type){case $n.CHARACTER:{this.onCharacter(t);break}case $n.NULL_CHARACTER:{this.onNullCharacter(t);break}case $n.COMMENT:{this.onComment(t);break}case $n.DOCTYPE:{this.onDoctype(t);break}case $n.START_TAG:{this._processStartTag(t);break}case $n.END_TAG:{this.onEndTag(t);break}case $n.EOF:{this.onEof(t);break}case $n.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Wbt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===nf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=ie.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=ie.IN_TABLE;return}case O.BODY:{this.insertionMode=ie.IN_BODY;return}case O.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return WPe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Re.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return gbt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){CEt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{Mx(this,t);break}case ie.BEFORE_HTML:{$2(this,t);break}case ie.BEFORE_HEAD:{R2(this,t);break}case ie.IN_HEAD:{N2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{D2(this,t);break}case ie.AFTER_HEAD:{M2(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{YPe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{MB(this,t);break}case ie.IN_TABLE_TEXT:{eke(this,t);break}case ie.IN_COLUMN_GROUP:{d3(this,t);break}case ie.AFTER_BODY:{h3(this,t);break}case ie.AFTER_AFTER_BODY:{L$(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){TEt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{Mx(this,t);break}case ie.BEFORE_HTML:{$2(this,t);break}case ie.BEFORE_HEAD:{R2(this,t);break}case ie.IN_HEAD:{N2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{D2(this,t);break}case ie.AFTER_HEAD:{M2(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{MB(this,t);break}case ie.IN_COLUMN_GROUP:{d3(this,t);break}case ie.AFTER_BODY:{h3(this,t);break}case ie.AFTER_AFTER_BODY:{L$(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){lV(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{lV(this,t);break}case ie.IN_TABLE_TEXT:{Lx(this,t);break}case ie.AFTER_BODY:{rwt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{iwt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{swt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ae.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{Lx(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ae.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?AEt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{Mx(this,t);break}case ie.BEFORE_HTML:{owt(this,t);break}case ie.BEFORE_HEAD:{uwt(this,t);break}case ie.IN_HEAD:{jf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{fwt(this,t);break}case ie.AFTER_HEAD:{hwt(this,t);break}case ie.IN_BODY:{Ca(this,t);break}case ie.IN_TABLE:{eE(this,t);break}case ie.IN_TABLE_TEXT:{Lx(this,t);break}case ie.IN_CAPTION:{lEt(this,t);break}case ie.IN_COLUMN_GROUP:{RK(this,t);break}case ie.IN_TABLE_BODY:{O4(this,t);break}case ie.IN_ROW:{P4(this,t);break}case ie.IN_CELL:{dEt(this,t);break}case ie.IN_SELECT:{rke(this,t);break}case ie.IN_SELECT_IN_TABLE:{pEt(this,t);break}case ie.IN_TEMPLATE:{gEt(this,t);break}case ie.AFTER_BODY:{vEt(this,t);break}case ie.IN_FRAMESET:{_Et(this,t);break}case ie.AFTER_FRAMESET:{wEt(this,t);break}case ie.AFTER_AFTER_BODY:{SEt(this,t);break}case ie.AFTER_AFTER_FRAMESET:{xEt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?IEt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{Mx(this,t);break}case ie.BEFORE_HTML:{awt(this,t);break}case ie.BEFORE_HEAD:{lwt(this,t);break}case ie.IN_HEAD:{cwt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{dwt(this,t);break}case ie.AFTER_HEAD:{pwt(this,t);break}case ie.IN_BODY:{I4(this,t);break}case ie.TEXT:{Zwt(this,t);break}case ie.IN_TABLE:{VC(this,t);break}case ie.IN_TABLE_TEXT:{Lx(this,t);break}case ie.IN_CAPTION:{cEt(this,t);break}case ie.IN_COLUMN_GROUP:{fEt(this,t);break}case ie.IN_TABLE_BODY:{cV(this,t);break}case ie.IN_ROW:{nke(this,t);break}case ie.IN_CELL:{hEt(this,t);break}case ie.IN_SELECT:{ike(this,t);break}case ie.IN_SELECT_IN_TABLE:{mEt(this,t);break}case ie.IN_TEMPLATE:{yEt(this,t);break}case ie.AFTER_BODY:{oke(this,t);break}case ie.IN_FRAMESET:{bEt(this,t);break}case ie.AFTER_FRAMESET:{EEt(this,t);break}case ie.AFTER_AFTER_BODY:{L$(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{Mx(this,t);break}case ie.BEFORE_HTML:{$2(this,t);break}case ie.BEFORE_HEAD:{R2(this,t);break}case ie.IN_HEAD:{N2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{D2(this,t);break}case ie.AFTER_HEAD:{M2(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{JPe(this,t);break}case ie.TEXT:{eEt(this,t);break}case ie.IN_TABLE_TEXT:{Lx(this,t);break}case ie.IN_TEMPLATE:{ske(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{$K(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===J.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{GPe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{MB(this,t);break}case ie.IN_TABLE_TEXT:{ZPe(this,t);break}}}};function Qbt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):QPe(e,t),n}function Jbt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Zbt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Kbt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=ewt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function ewt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function twt(e,t,n){const r=e.treeAdapter.getTagName(t),i=vS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===O.TEMPLATE&&s===Re.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function nwt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function kK(e,t){for(let n=0;n<Ybt;n++){const r=Qbt(e,t);if(!r)break;const i=Jbt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Zbt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&twt(e,o,s),nwt(e,i,r)}}function lV(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function rwt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function iwt(e,t){e._appendCommentNode(t,e.document)}function $K(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function swt(e,t){e._setDocumentType(t);const n=t.forceQuirks?sl.QUIRKS:Dbt(t);Nbt(t)||e._err(t,Ae.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function Mx(e,t){e._err(t,Ae.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,sl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function owt(e,t){t.tagID===O.HTML?(e._insertElement(t,Re.HTML),e.insertionMode=ie.BEFORE_HEAD):$2(e,t)}function awt(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&$2(e,t)}function $2(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function uwt(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.HEAD:{e._insertElement(t,Re.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:R2(e,t)}}function lwt(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?R2(e,t):e._err(t,Ae.endTagWithoutMatchingOpenElement)}function R2(e,t){e._insertFakeElement(be.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function jf(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,Re.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,us.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,us.RAWTEXT):(e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,us.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,us.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case O.HEAD:{e._err(t,Ae.misplacedStartTagForHeadElement);break}default:N2(e,t)}}function cwt(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{N2(e,t);break}case O.TEMPLATE:{f_(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function f_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,Ae.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ae.endTagWithoutMatchingOpenElement)}function N2(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function fwt(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{jf(e,t);break}case O.NOSCRIPT:{e._err(t,Ae.nestedNoscriptInHead);break}default:D2(e,t)}}function dwt(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case O.BR:{D2(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function D2(e,t){const n=t.type===$n.EOF?Ae.openElementsLeftAfterEof:Ae.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function hwt(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.BODY:{e._insertElement(t,Re.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,Ae.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),jf(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,Ae.misplacedStartTagForHeadElement);break}default:M2(e,t)}}function pwt(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{M2(e,t);break}case O.TEMPLATE:{f_(e,t);break}default:e._err(t,Ae.endTagWithoutMatchingOpenElement)}}function M2(e,t){e._insertFakeElement(be.BODY,O.BODY),e.insertionMode=ie.IN_BODY,A4(e,t)}function A4(e,t){switch(t.type){case $n.CHARACTER:{YPe(e,t);break}case $n.WHITESPACE_CHARACTER:{GPe(e,t);break}case $n.COMMENT:{lV(e,t);break}case $n.START_TAG:{Ca(e,t);break}case $n.END_TAG:{I4(e,t);break}case $n.EOF:{JPe(e,t);break}}}function GPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function YPe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function mwt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function gwt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function ywt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_FRAMESET)}function vwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Re.HTML)}function _wt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),MPe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Re.HTML)}function bwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Re.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function wwt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Re.HTML),n||(e.formElement=e.openElements.current))}function Ewt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===O.LI&&i===O.LI||(n===O.DD||n===O.DT)&&(i===O.DD||i===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==O.ADDRESS&&i!==O.DIV&&i!==O.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Re.HTML)}function Swt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Re.HTML),e.tokenizer.state=us.PLAINTEXT}function xwt(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.framesetOk=!1}function Twt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(be.A);n&&(kK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Cwt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Awt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(kK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Re.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Iwt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Owt(e,t){e.treeAdapter.getDocumentMode(e.document)!==sl.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Re.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function KPe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Re.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function XPe(e){const t=RPe(e,Qg.TYPE);return t!=null&&t.toLowerCase()===Gbt}function Pwt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Re.HTML),XPe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function kwt(e,t){e._appendElement(t,Re.HTML),t.ackSelfClosing=!0}function $wt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,Re.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Rwt(e,t){t.tagName=be.IMG,t.tagID=O.IMG,KPe(e,t)}function Nwt(e,t){e._insertElement(t,Re.HTML),e.skipNextNewLine=!0,e.tokenizer.state=us.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function Dwt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function Mwt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,us.RAWTEXT)}function qde(e,t){e._switchToTextParsing(t,us.RAWTEXT)}function Lwt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Fwt(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML)}function jwt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Re.HTML)}function Bwt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,Re.HTML)}function Uwt(e,t){e._reconstructActiveFormattingElements(),HPe(t),PK(t),t.selfClosing?e._appendElement(t,Re.MATHML):e._insertElement(t,Re.MATHML),t.ackSelfClosing=!0}function zwt(e,t){e._reconstructActiveFormattingElements(),qPe(t),PK(t),t.selfClosing?e._appendElement(t,Re.SVG):e._insertElement(t,Re.SVG),t.ackSelfClosing=!0}function Wde(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Re.HTML)}function Ca(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{Cwt(e,t);break}case O.A:{Twt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{_wt(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{vwt(e,t);break}case O.LI:case O.DD:case O.DT:{Ewt(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{KPe(e,t);break}case O.HR:{$wt(e,t);break}case O.RB:case O.RTC:{jwt(e,t);break}case O.RT:case O.RP:{Bwt(e,t);break}case O.PRE:case O.LISTING:{bwt(e,t);break}case O.XMP:{Dwt(e,t);break}case O.SVG:{zwt(e,t);break}case O.HTML:{mwt(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{jf(e,t);break}case O.BODY:{gwt(e,t);break}case O.FORM:{wwt(e,t);break}case O.NOBR:{Awt(e,t);break}case O.MATH:{Uwt(e,t);break}case O.TABLE:{Owt(e,t);break}case O.INPUT:{Pwt(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{kwt(e,t);break}case O.IMAGE:{Rwt(e,t);break}case O.BUTTON:{xwt(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{Iwt(e,t);break}case O.IFRAME:{Mwt(e,t);break}case O.SELECT:{Lwt(e,t);break}case O.OPTION:case O.OPTGROUP:{Fwt(e,t);break}case O.NOEMBED:{qde(e,t);break}case O.FRAMESET:{ywt(e,t);break}case O.TEXTAREA:{Nwt(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?qde(e,t):Wde(e,t);break}case O.PLAINTEXT:{Swt(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:Wde(e,t)}}function Vwt(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Hwt(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=ie.AFTER_BODY,oke(e,t))}function qwt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Wwt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function Gwt(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(be.P,O.P),e._closePElement()}function Ywt(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function Kwt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Xwt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Qwt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Jwt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(be.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function QPe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function I4(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{kK(e,t);break}case O.P:{Gwt(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{qwt(e,t);break}case O.LI:{Ywt(e);break}case O.DD:case O.DT:{Kwt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{Xwt(e);break}case O.BR:{Jwt(e);break}case O.BODY:{Vwt(e,t);break}case O.HTML:{Hwt(e,t);break}case O.FORM:{Wwt(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{Qwt(e,t);break}case O.TEMPLATE:{f_(e,t);break}default:QPe(e,t)}}function JPe(e,t){e.tmplInsertionModeStack.length>0?ske(e,t):$K(e,t)}function Zwt(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function eEt(e,t){e._err(t,Ae.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function MB(e,t){if(WPe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case $n.CHARACTER:{eke(e,t);break}case $n.WHITESPACE_CHARACTER:{ZPe(e,t);break}}else xI(e,t)}function tEt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_CAPTION}function nEt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function rEt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(be.COLGROUP,O.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,RK(e,t)}function iEt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_TABLE_BODY}function sEt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(be.TBODY,O.TBODY),e.insertionMode=ie.IN_TABLE_BODY,O4(e,t)}function oEt(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function aEt(e,t){XPe(t)?e._appendElement(t,Re.HTML):xI(e,t),t.ackSelfClosing=!0}function uEt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Re.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function eE(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{sEt(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{jf(e,t);break}case O.COL:{rEt(e,t);break}case O.FORM:{uEt(e,t);break}case O.TABLE:{oEt(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{iEt(e,t);break}case O.INPUT:{aEt(e,t);break}case O.CAPTION:{tEt(e,t);break}case O.COLGROUP:{nEt(e,t);break}default:xI(e,t)}}function VC(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{f_(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:xI(e,t)}}function xI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,A4(e,t),e.fosterParentingEnabled=n}function ZPe(e,t){e.pendingCharacterTokens.push(t)}function eke(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Lx(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)xI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const tke=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function lEt(e,t){const n=t.tagID;tke.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,eE(e,t)):Ca(e,t)}function cEt(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===O.TABLE&&VC(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:I4(e,t)}}function RK(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.COL:{e._appendElement(t,Re.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{jf(e,t);break}default:d3(e,t)}}function fEt(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case O.TEMPLATE:{f_(e,t);break}case O.COL:break;default:d3(e,t)}}function d3(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function O4(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(be.TR,O.TR),e.insertionMode=ie.IN_ROW,P4(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,eE(e,t));break}default:eE(e,t)}}function cV(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,VC(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:VC(e,t)}}function P4(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Re.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,O4(e,t));break}default:eE(e,t)}}function nke(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,cV(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,cV(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:VC(e,t)}}function dEt(e,t){const n=t.tagID;tke.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),P4(e,t)):Ca(e,t)}function hEt(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),nke(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:I4(e,t)}}function rke(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,Re.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Re.HTML);break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{jf(e,t);break}}}function ike(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{f_(e,t);break}}}function pEt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):rke(e,t)}function mEt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):ike(e,t)}function gEt(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{jf(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,eE(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,RK(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,O4(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,P4(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Ca(e,t)}}function yEt(e,t){t.tagID===O.TEMPLATE&&f_(e,t)}function ske(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):$K(e,t)}function vEt(e,t){t.tagID===O.HTML?Ca(e,t):h3(e,t)}function oke(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else h3(e,t)}function h3(e,t){e.insertionMode=ie.IN_BODY,A4(e,t)}function _Et(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.FRAMESET:{e._insertElement(t,Re.HTML);break}case O.FRAME:{e._appendElement(t,Re.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{jf(e,t);break}}}function bEt(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function wEt(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.NOFRAMES:{jf(e,t);break}}}function EEt(e,t){t.tagID===O.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function SEt(e,t){t.tagID===O.HTML?Ca(e,t):L$(e,t)}function L$(e,t){e.insertionMode=ie.IN_BODY,A4(e,t)}function xEt(e,t){switch(t.tagID){case O.HTML:{Ca(e,t);break}case O.NOFRAMES:{jf(e,t);break}}}function TEt(e,t){t.chars=Ci,e._insertCharacters(t)}function CEt(e,t){e._insertCharacters(t),e.framesetOk=!1}function ake(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Re.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function AEt(e,t){if(zbt(t))ake(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Re.MATHML?HPe(t):r===Re.SVG&&(Vbt(t),qPe(t)),PK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function IEt(e,t){if(t.tagID===O.P||t.tagID===O.BR){ake(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Re.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}be.AREA,be.BASE,be.BASEFONT,be.BGSOUND,be.BR,be.COL,be.EMBED,be.FRAME,be.HR,be.IMG,be.INPUT,be.KEYGEN,be.LINK,be.META,be.PARAM,be.SOURCE,be.TRACK,be.WBR;const uke=lke("end"),d_=lke("start");function lke(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}const cke=function(e){if(e==null)return $Et;if(typeof e=="function")return k4(e);if(typeof e=="object")return Array.isArray(e)?OEt(e):PEt(e);if(typeof e=="string")return kEt(e);throw new Error("Expected function, string, or object as test")};function OEt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=cke(e[n]);return k4(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function PEt(e){const t=e;return k4(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function kEt(e){return k4(t);function t(n){return n&&n.type===e}}function k4(e){return t;function t(n,r,i){return!!(REt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function $Et(){return!0}function REt(e){return e!==null&&typeof e=="object"&&"type"in e}const fke=[],NEt=!0,Gde=!1,DEt="skip";function MEt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=cke(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=fke,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=LEt(n(u,c)),h[0]===Gde))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==DEt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Gde)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function LEt(e){return Array.isArray(e)?e:typeof e=="number"?[NEt,e]:e==null?fke:[e]}function FEt(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),MEt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const jEt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Yde={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function dke(e,t){const n=KEt(e),r=IPe("type",{handlers:{root:BEt,element:UEt,text:zEt,comment:pke,doctype:VEt,raw:qEt},unknown:WEt}),i={parser:n?new Hde(Yde):Hde.getFragmentParser(void 0,Yde),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),_S(i,d_());const s=n?i.parser.document:i.parser.getFragment(),o=U_t(s,{file:i.options.file});return i.stitches&&FEt(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function hke(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function BEt(e,t){hke(e.children,t)}function UEt(e,t){GEt(e,t),hke(e.children,t),YEt(e,t)}function zEt(e,t){const n={type:$n.CHARACTER,chars:e.value,location:TI(e)};_S(t,d_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function VEt(e,t){const n={type:$n.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:TI(e)};_S(t,d_(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function HEt(e,t){t.stitches=!0;const n=XEt(e);if("children"in e&&"children"in n){const r=dke({type:"root",children:e.children},t.options);n.children=r.children}pke({type:"comment",value:{stitch:n}},t)}function pke(e,t){const n=e.value,r={type:$n.COMMENT,data:n,location:TI(e)};_S(t,d_(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function qEt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,mke(t,d_(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function WEt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))HEt(n,t);else{let r="";throw jEt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function _S(e,t){mke(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=us.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function mke(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function GEt(e,t){if(t.parser.tokenizer.state===us.PLAINTEXT)return;_S(t,d_(e));const n=t.parser.openElements.current;let r="namespaceURI"in n?n.namespaceURI:Iv.html;r===Iv.html&&e.tagName==="svg"&&(r=Iv.svg);const i=W_t({...e,children:[]},{space:r===Iv.svg?"svg":"html"}),s="attrs"in i?i.attrs:[],o={type:$n.START_TAG,tagName:e.tagName,tagID:vS(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:s,location:TI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=e.tagName}function YEt(e,t){if(!t.parser.tokenizer.inForeignNode&&ebt.includes(e.tagName)||t.parser.tokenizer.state===us.PLAINTEXT)return;_S(t,uke(e));const n={type:$n.END_TAG,tagName:e.tagName,tagID:vS(e.tagName),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:TI(e)};t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken),n.tagName===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===us.RCDATA||t.parser.tokenizer.state===us.RAWTEXT||t.parser.tokenizer.state===us.SCRIPT_DATA)&&(t.parser.tokenizer.state=us.DATA)}function KEt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName==="html"))}function TI(e){const t=d_(e)||{line:void 0,column:void 0,offset:void 0},n=uke(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function XEt(e){return"children"in e?$de({...e,children:[]}):$de(e)}function QEt(e){return function(t,n){return dke(t,{...e,file:n})}}function Ga({text:e,required:t}){const n={img:({node:i,...s})=>k.jsx(l_,{...s}),p:({node:i,...s})=>k.jsx(ze,{...s,pb:8}),h1:({node:i,...s})=>k.jsx(Qi,{order:1,...s,pb:12}),h2:({node:i,...s})=>k.jsx(Qi,{order:2,...s,pb:12}),h3:({node:i,...s})=>k.jsx(Qi,{order:3,...s,pb:12}),h4:({node:i,...s})=>k.jsx(Qi,{order:4,...s,pb:12}),h5:({node:i,...s})=>k.jsx(Qi,{order:5,...s,pb:12}),h6:({node:i,...s})=>k.jsx(Qi,{order:6,...s,pb:12}),a:({node:i,...s})=>k.jsx(n4,{...s}),ul:({node:i,...s})=>k.jsx(Fd,{withPadding:!0,...s,pb:8}),ol:({node:i,...s})=>k.jsx(Fd,{type:"ordered",withPadding:!0,...s,pb:8})},r='<span style="color: #fa5252">*</span>';return k.jsx(wPe,{components:n,rehypePlugins:[QEt],children:e+(t?` ${r}`:"")})}function fV({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return k.jsx(Ga,{text:n})}const JEt="https://github.com/revisit-studies/study/tree/main/public/";function ZEt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=ym();return k.jsxs(Em,{size:"xs",px:"xs",style:{marginTop:60,marginBottom:60},children:[k.jsx(l_,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${bh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),k.jsx(ze,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=MOe(i);return k.jsx(vm,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:k.jsxs(vI,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?k.jsxs(k.Fragment,{children:[k.jsx(ze,{fw:"bold",children:i}),k.jsxs(jn,{align:"center",direction:"row",children:[k.jsx(Lfe,{color:"red"}),k.jsx(ze,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),k.jsx(fV,{issues:s.errors,type:"error"})]}):k.jsxs(k.Fragment,{children:[k.jsx(ze,{fw:"bold",children:s.studyMetadata.title}),k.jsx(ze,{c:"dimmed",children:`Authors: ${s.studyMetadata.authors}`}),k.jsx(ze,{c:"dimmed",children:s.studyMetadata.description}),k.jsx(ze,{c:"dimmed",ta:"right",style:{paddingRight:5},children:k.jsxs(n4,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${JEt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&k.jsxs(k.Fragment,{children:[k.jsxs(jn,{align:"center",direction:"row",children:[k.jsx(Lfe,{color:"orange"}),k.jsx(ze,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),k.jsx(fV,{issues:s.warnings,type:"warning"})]})]})},i)})]})}var gke={exports:{}},yke={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tE=I;function eSt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tSt=typeof Object.is=="function"?Object.is:eSt,nSt=tE.useState,rSt=tE.useEffect,iSt=tE.useLayoutEffect,sSt=tE.useDebugValue;function oSt(e,t){var n=t(),r=nSt({inst:{value:n,getSnapshot:t}}),i=r[0].inst,s=r[1];return iSt(function(){i.value=n,i.getSnapshot=t,LB(i)&&s({inst:i})},[e,n,t]),rSt(function(){return LB(i)&&s({inst:i}),e(function(){LB(i)&&s({inst:i})})},[e]),sSt(n),n}function LB(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tSt(e,n)}catch{return!0}}function aSt(e,t){return t()}var uSt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?aSt:oSt;yke.useSyncExternalStore=tE.useSyncExternalStore!==void 0?tE.useSyncExternalStore:uSt;gke.exports=yke;var lSt=gke.exports,vke={exports:{}},_ke={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $4=I,cSt=lSt;function fSt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dSt=typeof Object.is=="function"?Object.is:fSt,hSt=cSt.useSyncExternalStore,pSt=$4.useRef,mSt=$4.useEffect,gSt=$4.useMemo,ySt=$4.useDebugValue;_ke.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=pSt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=gSt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,dSt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=hSt(e,s[0],s[1]);return mSt(function(){o.hasValue=!0,o.value=a},[a]),ySt(a),a};vke.exports=_ke;var vSt=vke.exports;function _St(e){e()}let bke=_St;const bSt=e=>bke=e,wSt=()=>bke,_0=I.createContext(null);function wke(){return I.useContext(_0)}const ESt=()=>{throw new Error("uSES not initialized!")};let Eke=ESt;const SSt=e=>{Eke=e},xSt=(e,t)=>e===t;function TSt(e=_0){const t=e===_0?wke:()=>I.useContext(e);return function(r,i=xSt){const{store:s,subscription:o,getServerState:a}=t(),u=Eke(o.addNestedSub,s.getState,a||s.getState,r,i);return I.useDebugValue(u),u}}const CSt=TSt();var Kr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NK=Symbol.for("react.element"),DK=Symbol.for("react.portal"),R4=Symbol.for("react.fragment"),N4=Symbol.for("react.strict_mode"),D4=Symbol.for("react.profiler"),M4=Symbol.for("react.provider"),L4=Symbol.for("react.context"),ASt=Symbol.for("react.server_context"),F4=Symbol.for("react.forward_ref"),j4=Symbol.for("react.suspense"),B4=Symbol.for("react.suspense_list"),U4=Symbol.for("react.memo"),z4=Symbol.for("react.lazy"),ISt=Symbol.for("react.offscreen"),Ske;Ske=Symbol.for("react.module.reference");function Ic(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case NK:switch(e=e.type,e){case R4:case D4:case N4:case j4:case B4:return e;default:switch(e=e&&e.$$typeof,e){case ASt:case L4:case F4:case z4:case U4:case M4:return e;default:return t}}case DK:return t}}}Kr.ContextConsumer=L4;Kr.ContextProvider=M4;Kr.Element=NK;Kr.ForwardRef=F4;Kr.Fragment=R4;Kr.Lazy=z4;Kr.Memo=U4;Kr.Portal=DK;Kr.Profiler=D4;Kr.StrictMode=N4;Kr.Suspense=j4;Kr.SuspenseList=B4;Kr.isAsyncMode=function(){return!1};Kr.isConcurrentMode=function(){return!1};Kr.isContextConsumer=function(e){return Ic(e)===L4};Kr.isContextProvider=function(e){return Ic(e)===M4};Kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===NK};Kr.isForwardRef=function(e){return Ic(e)===F4};Kr.isFragment=function(e){return Ic(e)===R4};Kr.isLazy=function(e){return Ic(e)===z4};Kr.isMemo=function(e){return Ic(e)===U4};Kr.isPortal=function(e){return Ic(e)===DK};Kr.isProfiler=function(e){return Ic(e)===D4};Kr.isStrictMode=function(e){return Ic(e)===N4};Kr.isSuspense=function(e){return Ic(e)===j4};Kr.isSuspenseList=function(e){return Ic(e)===B4};Kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===R4||e===D4||e===N4||e===j4||e===B4||e===ISt||typeof e=="object"&&e!==null&&(e.$$typeof===z4||e.$$typeof===U4||e.$$typeof===M4||e.$$typeof===L4||e.$$typeof===F4||e.$$typeof===Ske||e.getModuleId!==void 0)};Kr.typeOf=Ic;function OSt(){const e=wSt();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let r=t;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=t;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:t=s,function(){!i||t===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}const Kde={notify(){},get:()=>[]};function PSt(e,t){let n,r=Kde;function i(f){return u(),r.subscribe(f)}function s(){r.notify()}function o(){c.onStateChange&&c.onStateChange()}function a(){return!!n}function u(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=OSt())}function l(){n&&(n(),n=void 0,r.clear(),r=Kde)}const c={addNestedSub:i,notifyNestedSubs:s,handleChangeWrapper:o,isSubscribed:a,trySubscribe:u,tryUnsubscribe:l,getListeners:()=>r};return c}const kSt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$St=kSt?I.useLayoutEffect:I.useEffect;function RSt({store:e,context:t,children:n,serverState:r}){const i=I.useMemo(()=>{const a=PSt(e);return{store:e,subscription:a,getServerState:r?()=>r:void 0}},[e,r]),s=I.useMemo(()=>e.getState(),[e]);$St(()=>{const{subscription:a}=i;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),s!==e.getState()&&a.notifyNestedSubs(),()=>{a.tryUnsubscribe(),a.onStateChange=void 0}},[i,s]);const o=t||_0;return F.createElement(o.Provider,{value:i},n)}function xke(e=_0){const t=e===_0?wke:()=>I.useContext(e);return function(){const{store:r}=t();return r}}const NSt=xke();function DSt(e=_0){const t=e===_0?NSt:xke(e);return function(){return t().dispatch}}const Tke=DSt();SSt(vSt.useSyncExternalStoreWithSelector);bSt(s_.unstable_batchedUpdates);function af(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function b0(e){return!!e&&!!e[Ii]}function Kp(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===HSt}(e)||Array.isArray(e)||!!e[nhe]||!!(!((t=e.constructor)===null||t===void 0)&&t[nhe])||MK(e)||LK(e))}function b1(e,t,n){n===void 0&&(n=!1),bS(e)===0?(n?Object.keys:gw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function bS(e){var t=e[Ii];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:MK(e)?2:LK(e)?3:0}function mw(e,t){return bS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function MSt(e,t){return bS(e)===2?e.get(t):e[t]}function Cke(e,t,n){var r=bS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Ake(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function MK(e){return zSt&&e instanceof Map}function LK(e){return VSt&&e instanceof Set}function Zy(e){return e.o||e.t}function FK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Oke(e);delete t[Ii];for(var n=gw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function jK(e,t){return t===void 0&&(t=!1),BK(e)||b0(e)||!Kp(e)||(bS(e)>1&&(e.set=e.add=e.clear=e.delete=LSt),Object.freeze(e),t&&b1(e,function(n,r){return jK(r,!0)},!0)),e}function LSt(){af(2)}function BK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function jd(e){var t=mV[e];return t||af(18,e),t}function FSt(e,t){mV[e]||(mV[e]=t)}function dV(){return HC}function FB(e,t){t&&(jd("Patches"),e.u=[],e.s=[],e.v=t)}function p3(e){hV(e),e.p.forEach(jSt),e.p=null}function hV(e){e===HC&&(HC=e.l)}function Xde(e){return HC={p:[],l:HC,h:e,m:!0,_:0}}function jSt(e){var t=e[Ii];t.i===0||t.i===1?t.j():t.O=!0}function jB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||jd("ES5").S(t,e,r),r?(n[Ii].P&&(p3(t),af(4)),Kp(e)&&(e=m3(t,e),t.l||g3(t,e)),t.u&&jd("Patches").M(n[Ii].t,e,t.u,t.s)):e=m3(t,n,[]),p3(t),t.u&&t.v(t.u,t.s),e!==Ike?e:void 0}function m3(e,t,n){if(BK(t))return t;var r=t[Ii];if(!r)return b1(t,function(a,u){return Qde(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return g3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=FK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),b1(s,function(a,u){return Qde(e,r,i,a,u,n,o)}),g3(e,i,!1),n&&e.u&&jd("Patches").N(r,n,e.u,e.s)}return r.o}function Qde(e,t,n,r,i,s,o){if(b0(i)){var a=m3(e,i,s&&t&&t.i!==3&&!mw(t.R,r)?s.concat(r):void 0);if(Cke(n,r,a),!b0(a))return;e.m=!1}else o&&n.add(i);if(Kp(i)&&!BK(i)){if(!e.h.D&&e._<1)return;m3(e,i),t&&t.A.l||g3(e,i)}}function g3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&jK(t,n)}function BB(e,t){var n=e[Ii];return(n?Zy(n):e)[t]}function Jde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function gg(e){e.P||(e.P=!0,e.l&&gg(e.l))}function UB(e){e.o||(e.o=FK(e.t))}function pV(e,t,n){var r=MK(t)?jd("MapSet").F(t,n):LK(t)?jd("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:dV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=qC;o&&(u=[a],l=$T);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):jd("ES5").J(t,n);return(n?n.A:dV()).p.push(r),r}function BSt(e){return b0(e)||af(22,e),function t(n){if(!Kp(n))return n;var r,i=n[Ii],s=bS(n);if(i){if(!i.P&&(i.i<4||!jd("ES5").K(i)))return i.t;i.I=!0,r=Zde(n,s),i.I=!1}else r=Zde(n,s);return b1(r,function(o,a){i&&MSt(i.t,o)===a||Cke(r,o,t(a))}),s===3?new Set(r):r}(e)}function Zde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return FK(e)}function USt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Ii];return qC.get(u,s)},set:function(u){var l=this[Ii];qC.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ii];if(!a.P)switch(a.i){case 5:r(a)&&gg(a);break;case 4:n(a)&&gg(a)}}}function n(s){for(var o=s.t,a=s.k,u=gw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Ii){var f=o[c];if(f===void 0&&!mw(o,c))return!0;var d=a[c],h=d&&d[Ii];if(h?h.t!==f:!Ake(d,f))return!0}}var p=!!o[Ii];return u.length!==gw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};FSt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Oke(f);delete p[Ii];for(var m=gw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:dV(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,O:!1,C:!1};return Object.defineProperty(u,Ii,{value:l,writable:!0}),u},S:function(s,o,a){a?b0(o)&&o[Ii].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Ii];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)b1(d,function(_){_!==Ii&&(f[_]!==void 0||mw(f,_)?h[_]||u(d[_]):(h[_]=!0,gg(c)))}),b1(f,function(_){d[_]!==void 0||mw(d,_)||(h[_]=!1,gg(c))});else if(p===5){if(r(c)&&(gg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var ehe,HC,UK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",zSt=typeof Map<"u",VSt=typeof Set<"u",the=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ike=UK?Symbol.for("immer-nothing"):((ehe={})["immer-nothing"]=!0,ehe),nhe=UK?Symbol.for("immer-draftable"):"__$immer_draftable",Ii=UK?Symbol.for("immer-state"):"__$immer_state",HSt=""+Object.prototype.constructor,gw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Oke=Object.getOwnPropertyDescriptors||function(e){var t={};return gw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},mV={},qC={get:function(e,t){if(t===Ii)return e;var n=Zy(e);if(!mw(n,t))return function(i,s,o){var a,u=Jde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Kp(r)?r:r===BB(e.t,t)?(UB(e),e.o[t]=pV(e.A.h,r,e)):r},has:function(e,t){return t in Zy(e)},ownKeys:function(e){return Reflect.ownKeys(Zy(e))},set:function(e,t,n){var r=Jde(Zy(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=BB(Zy(e),t),s=i==null?void 0:i[Ii];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Ake(n,i)&&(n!==void 0||mw(e.t,t)))return!0;UB(e),gg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return BB(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,UB(e),gg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Zy(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){af(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){af(12)}},$T={};b1(qC,function(e,t){$T[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),$T.deleteProperty=function(e,t){return $T.set.call(this,e,t,void 0)},$T.set=function(e,t,n){return qC.set.call(this,e[0],t,n,e[0])};var qSt=function(){function e(n){var r=this;this.g=the,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&af(6),o!==void 0&&typeof o!="function"&&af(7),Kp(i)){var c=Xde(r),f=pV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?p3(c):hV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return FB(c,o),jB(m,c)},function(m){throw p3(c),m}):(FB(c,o),jB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Ike&&(l=void 0),r.D&&jK(l,!0),o){var h=[],p=[];jd("Patches").M(i,l,h,p),o(h,p)}return l}af(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Kp(n)||af(8),b0(n)&&(n=BSt(n));var r=Xde(this),i=pV(this,n,void 0);return i[Ii].C=!0,hV(r),i},t.finishDraft=function(n,r){var i=n&&n[Ii],s=i.A;return FB(s,r),jB(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!the&&af(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=jd("Patches").$;return b0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Sl=new qSt,Pke=Sl.produce;Sl.produceWithPatches.bind(Sl);Sl.setAutoFreeze.bind(Sl);Sl.setUseProxies.bind(Sl);Sl.applyPatches.bind(Sl);Sl.createDraft.bind(Sl);Sl.finishDraft.bind(Sl);function WC(e){"@babel/helpers - typeof";return WC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WC(e)}function WSt(e,t){if(WC(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(WC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GSt(e){var t=WSt(e,"string");return WC(t)=="symbol"?t:String(t)}function YSt(e,t,n){return t=GSt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ihe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rhe(Object(n),!0).forEach(function(r){YSt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rhe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ra(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var she=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),zB=function(){return Math.random().toString(36).substring(7).split("").join(".")},y3={INIT:"@@redux/INIT"+zB(),REPLACE:"@@redux/REPLACE"+zB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+zB()}};function KSt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function kke(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ra(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ra(1));return n(kke)(e,t)}if(typeof e!="function")throw new Error(ra(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ra(3));return s}function f(m){if(typeof m!="function")throw new Error(ra(4));if(u)throw new Error(ra(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ra(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!KSt(m))throw new Error(ra(7));if(typeof m.type>"u")throw new Error(ra(8));if(u)throw new Error(ra(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ra(10));i=m,d({type:y3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ra(11));function _(){v.next&&v.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[she]=function(){return this},m}return d({type:y3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[she]=p,r}function XSt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:y3.INIT});if(typeof r>"u")throw new Error(ra(12));if(typeof n(void 0,{type:y3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ra(13))})}function QSt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{XSt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ra(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function v3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function JSt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ra(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=v3.apply(void 0,a)(i.dispatch),ihe(ihe({},i),{},{dispatch:s})}}}function $ke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var Rke=$ke();Rke.withExtraArgument=$ke;const ohe=Rke;var ZSt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),CI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},GC=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ext=Object.defineProperty,txt=Object.defineProperties,nxt=Object.getOwnPropertyDescriptors,ahe=Object.getOwnPropertySymbols,rxt=Object.prototype.hasOwnProperty,ixt=Object.prototype.propertyIsEnumerable,uhe=function(e,t,n){return t in e?ext(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Jg=function(e,t){for(var n in t||(t={}))rxt.call(t,n)&&uhe(e,n,t[n]);if(ahe)for(var r=0,i=ahe(t);r<i.length;r++){var n=i[r];ixt.call(t,n)&&uhe(e,n,t[n])}return e},VB=function(e,t){return txt(e,nxt(t))},AI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},sxt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?v3:v3.apply(null,arguments)};function oxt(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var axt=function(e){ZSt(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,GC([void 0],n[0].concat(this)))):new(t.bind.apply(t,GC([void 0],n.concat(this))))},t}(Array);function gV(e){return Kp(e)?Pke(e,function(){}):e}function uxt(e){return typeof e=="boolean"}function lxt(){return function(t){return cxt(t)}}function cxt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var r=new axt;return n&&(uxt(n)?r.push(ohe):r.push(ohe.withExtraArgument(n.extraArgument))),r}var fxt=!0;function Nke(e){var t=lxt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(oxt(i))h=QSt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=JSt.apply(void 0,p),g=v3;u&&(g=sxt(Jg({trace:!fxt},typeof u=="object"&&u)));var y=[m];Array.isArray(d)?y=GC([m],d):typeof d=="function"&&(y=d(y));var v=g.apply(void 0,y);return kke(h,c,v)}function Bd(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Jg(Jg({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Dke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(a in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function dxt(e){return typeof e=="function"}function hxt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Dke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(dxt(e))u=function(){return gV(e())};else{var l=gV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=GC([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(b0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Kp(p))return Pke(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function pxt(e,t){return e+"/"+t}function Mke(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:gV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=pxt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Bd(d,p):Bd(d)});function u(){var c=typeof e.extraReducers=="function"?Dke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=Jg(Jg({},d),o);return hxt(n,function(v){for(var _ in y)v.addCase(_,y[_]);for(var w=0,x=p;w<x.length;w++){var E=x[w];v.addMatcher(E.matcher,E.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var mxt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Lke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=mxt[Math.random()*64|0];return t},gxt=["name","message","stack","code"],HB=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),lhe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),yxt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=gxt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Bd(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:VB(Jg({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Bd(t+"/pending",function(l,c,f){return{payload:void 0,meta:VB(Jg({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Bd(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||yxt)(l||"Rejected"),meta:VB(Jg({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Lke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return AI(this,null,function(){var v,_,w,x,E,b,T;return CI(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),x=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),_xt(x)?[4,x]:[3,2];case 1:x=A.sent(),A.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return E=new Promise(function(C,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([E,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(C,P){return new HB(C,P)},fulfillWithValue:function(C,P){return new lhe(C,P)}})).then(function(C){if(C instanceof HB)throw C;return C instanceof lhe?i(C.payload,h,l,C.meta):i(C,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return b=A.sent(),w=b instanceof HB?o(null,h,l,b.payload,b.meta):o(b,h,l),[3,5];case 5:return T=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,T||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(vxt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function vxt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function _xt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var bxt=function(e){return e&&typeof e.match=="function"},wxt=function(e,t){return bxt(e)?e.match(t):e(t)};function che(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return wxt(r,n)})}}var zK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},yV=function(){},Fke=function(e,t){return t===void 0&&(t=yV),e.catch(t),e},jke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},yw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ext="task",Bke="listener",Uke="completed",VK="cancelled",Sxt="task-"+VK,xxt="task-"+Uke,zke=Bke+"-"+VK,Txt=Bke+"-"+Uke,V4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Ext+" "+VK+" (reason: "+t+")"}return e}(),vw=function(e){if(e.aborted)throw new V4(e.reason)};function Vke(e,t){var n=yV;return new Promise(function(r,i){var s=function(){return i(new V4(e.reason))};if(e.aborted){s();return}n=jke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=yV})}var Cxt=function(e,t){return AI(void 0,null,function(){var n,r;return CI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof V4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},_3=function(e){return function(t){return Fke(Vke(e,t).then(function(n){return vw(e),n}))}},Hke=function(e){var t=_3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Axt=Object.assign,fhe={},II="listenerMiddleware",Ixt=function(e){var t=function(n){return jke(e,function(){return yw(n,e.reason)})};return function(n){zK(n,"taskExecutor");var r=new AbortController;t(r);var i=Cxt(function(){return AI(void 0,null,function(){var s;return CI(this,function(o){switch(o.label){case 0:return vw(e),vw(r.signal),[4,n({pause:_3(r.signal),delay:Hke(r.signal),signal:r.signal})];case 1:return s=o.sent(),vw(r.signal),[2,s]}})})},function(){return yw(r,xxt)});return{result:_3(e)(i),cancel:function(){yw(r,Sxt)}}}},Oxt=function(e,t){var n=function(r,i){return AI(void 0,null,function(){var s,o,a,u;return CI(this,function(l){switch(l.label){case 0:vw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Vke(t,Promise.race(a))];case 2:return u=l.sent(),vw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return Fke(n(r,i))}},qke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Bd(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return zK(s,"options.listener"),{predicate:i,type:t,effect:s}},Pxt=function(e){var t=qke(e),n=t.type,r=t.predicate,i=t.effect,s=Lke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},vV=function(e){e.pending.forEach(function(t){yw(t,zke)})},kxt=function(e){return function(){e.forEach(vV),e.clear()}},dhe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},$xt=Bd(II+"/add"),Rxt=Bd(II+"/removeAll"),Nxt=Bd(II+"/remove"),Dxt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,GC([II+"/error"],e))};function Mxt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?Dxt:i;zK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&vV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Pxt(h)),o(p)},l=function(h){var p=qke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&vV(v)),!!v},c=function(h,p,m,g){return AI(t,null,function(){var y,v,_;return CI(this,function(w){switch(w.label){case 0:y=new AbortController,v=Oxt(u,y.signal),w.label=1;case 1:return w.trys.push([1,3,4,5]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Axt({},m,{getOriginalState:g,condition:function(x,E){return v(x,E).then(Boolean)},take:v,delay:Hke(y.signal),pause:_3(y.signal),extra:r,signal:y.signal,fork:Ixt(y.signal),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(x,E,b){x!==y&&(yw(x,zke),b.delete(x))})}})))];case 2:return w.sent(),[3,5];case 3:return _=w.sent(),_ instanceof V4||dhe(s,_,{raisedBy:"effect"}),[3,5];case 4:return yw(y,Txt),h.pending.delete(y),[7];case 5:return[2]}})})},f=kxt(n),d=function(h){return function(p){return function(m){if($xt.match(m))return u(m.payload);if(Rxt.match(m)){f();return}if(Nxt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===fhe)throw new Error(II+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),x=0,E=w;x<E.length;x++){var b=E[x],T=!1;try{T=b.predicate(m,_,g)}catch(A){T=!1,dhe(s,A,{raisedBy:"predicate"})}T&&c(b,m,h,y)}}finally{g=fhe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var hhe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);USt();function Xp(e){return e.components.flatMap(t=>typeof t=="string"?t:Xp(t))}function Wke(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:Wke(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Gke(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Xp(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Xp(e).length-1}];r+=1}else{const o=Gke(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function Yke(e,t){const n=Gke(e,t,0);return typeof n=="number"?null:n}function Kke(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Kke(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Lxt(e,t){const n=Kke(e,t,0);return n.found?n.distance:-1}function Xke(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...Xke(i,`${t}-${s}`))}),n}async function Fxt(e,t,n,r,i,s){const o=Xp(n),a=Object.fromEntries(o.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:Object.keys(i).length>0?i:a,sequence:n,config:t,showStudyBrowser:s,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=Mke({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:_,windowEvents:w}}}});return{store:Nke({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const Qke=I.createContext(null);function wh(){return I.useContext(Qke).actions}const Eh=Tke,Bf=CSt;function jxt(e){return Bf(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function HK(){return Bf(e=>Xp(e.sequence))}function H4(){const{studyId:e}=Kw();return`${e}`}function Sm(){const{index:e}=Kw(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function xm(){const e=Sm(),t=HK();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var b3={exports:{}};b3.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",_="[object Proxy]",w="[object RegExp]",x="[object Set]",E="[object String]",b="[object Undefined]",T="[object WeakMap]",A="[object ArrayBuffer]",C="[object DataView]",P="[object Float32Array]",N="[object Float64Array]",$="[object Int8Array]",M="[object Int16Array]",B="[object Int32Array]",z="[object Uint8Array]",W="[object Uint8ClampedArray]",U="[object Uint16Array]",Y="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,L=/^(?:0|[1-9]\d*)$/,G={};G[P]=G[N]=G[$]=G[M]=G[B]=G[z]=G[W]=G[U]=G[Y]=!0,G[a]=G[u]=G[A]=G[c]=G[C]=G[f]=G[d]=G[h]=G[m]=G[g]=G[v]=G[w]=G[x]=G[E]=G[T]=!1;var V=typeof Cu=="object"&&Cu&&Cu.Object===Object&&Cu,H=typeof self=="object"&&self&&self.Object===Object&&self,te=V||H||Function("return this")(),le=t&&!t.nodeType&&t,me=le&&!0&&e&&!e.nodeType&&e,ye=me&&me.exports===le,de=ye&&V.process,we=function(){try{var re=me&&me.require&&me.require("util").types;return re||de&&de.binding&&de.binding("util")}catch{}}(),he=we&&we.isTypedArray;function He(re,ce,Te){switch(Te.length){case 0:return re.call(ce);case 1:return re.call(ce,Te[0]);case 2:return re.call(ce,Te[0],Te[1]);case 3:return re.call(ce,Te[0],Te[1],Te[2])}return re.apply(ce,Te)}function Me(re,ce){for(var Te=-1,Ct=Array(re);++Te<re;)Ct[Te]=ce(Te);return Ct}function Ke(re){return function(ce){return re(ce)}}function je(re,ce){return re==null?void 0:re[ce]}function De(re,ce){return function(Te){return re(ce(Te))}}var qe=Array.prototype,Qt=Function.prototype,rt=Object.prototype,We=te["__core-js_shared__"],Pt=Qt.toString,ut=rt.hasOwnProperty,mt=function(){var re=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}(),vt=rt.toString,Ht=Pt.call(Object),Xt=RegExp("^"+Pt.call(ut).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fe=ye?te.Buffer:void 0,xe=te.Symbol,Le=te.Uint8Array,ft=fe?fe.allocUnsafe:void 0,Ze=De(Object.getPrototypeOf,Object),ct=Object.create,ot=rt.propertyIsEnumerable,At=qe.splice,Tn=xe?xe.toStringTag:void 0,Zt=function(){try{var re=Ue(Object,"defineProperty");return re({},"",{}),re}catch{}}(),Jt=fe?fe.isBuffer:void 0,rr=Math.max,Bn=Date.now,zo=Ue(te,"Map"),mr=Ue(Object,"create"),Di=function(){function re(){}return function(ce){if(!Bh(ce))return{};if(ct)return ct(ce);re.prototype=ce;var Te=new re;return re.prototype=void 0,Te}}();function zr(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var Ct=re[ce];this.set(Ct[0],Ct[1])}}function Pr(){this.__data__=mr?mr(null):{},this.size=0}function Vr(re){var ce=this.has(re)&&delete this.__data__[re];return this.size-=ce?1:0,ce}function ir(re){var ce=this.__data__;if(mr){var Te=ce[re];return Te===r?void 0:Te}return ut.call(ce,re)?ce[re]:void 0}function St(re){var ce=this.__data__;return mr?ce[re]!==void 0:ut.call(ce,re)}function gr(re,ce){var Te=this.__data__;return this.size+=this.has(re)?0:1,Te[re]=mr&&ce===void 0?r:ce,this}zr.prototype.clear=Pr,zr.prototype.delete=Vr,zr.prototype.get=ir,zr.prototype.has=St,zr.prototype.set=gr;function di(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var Ct=re[ce];this.set(Ct[0],Ct[1])}}function Un(){this.__data__=[],this.size=0}function hs(re){var ce=this.__data__,Te=oi(ce,re);if(Te<0)return!1;var Ct=ce.length-1;return Te==Ct?ce.pop():At.call(ce,Te,1),--this.size,!0}function ps(re){var ce=this.__data__,Te=oi(ce,re);return Te<0?void 0:ce[Te][1]}function oe(re){return oi(this.__data__,re)>-1}function ne(re,ce){var Te=this.__data__,Ct=oi(Te,re);return Ct<0?(++this.size,Te.push([re,ce])):Te[Ct][1]=ce,this}di.prototype.clear=Un,di.prototype.delete=hs,di.prototype.get=ps,di.prototype.has=oe,di.prototype.set=ne;function ue(re){var ce=-1,Te=re==null?0:re.length;for(this.clear();++ce<Te;){var Ct=re[ce];this.set(Ct[0],Ct[1])}}function Ee(){this.size=0,this.__data__={hash:new zr,map:new(zo||di),string:new zr}}function Se(re){var ce=Ge(this,re).delete(re);return this.size-=ce?1:0,ce}function xt(re){return Ge(this,re).get(re)}function ke(re){return Ge(this,re).has(re)}function bt(re,ce){var Te=Ge(this,re),Ct=Te.size;return Te.set(re,ce),this.size+=Te.size==Ct?0:1,this}ue.prototype.clear=Ee,ue.prototype.delete=Se,ue.prototype.get=xt,ue.prototype.has=ke,ue.prototype.set=bt;function Ft(re){var ce=this.__data__=new di(re);this.size=ce.size}function It(){this.__data__=new di,this.size=0}function jt(re){var ce=this.__data__,Te=ce.delete(re);return this.size=ce.size,Te}function un(re){return this.__data__.get(re)}function xr(re){return this.__data__.has(re)}function qt(re,ce){var Te=this.__data__;if(Te instanceof di){var Ct=Te.__data__;if(!zo||Ct.length<n-1)return Ct.push([re,ce]),this.size=++Te.size,this;Te=this.__data__=new ue(Ct)}return Te.set(re,ce),this.size=Te.size,this}Ft.prototype.clear=It,Ft.prototype.delete=jt,Ft.prototype.get=un,Ft.prototype.has=xr,Ft.prototype.set=qt;function sr(re,ce){var Te=j_(re),Ct=!Te&&Aa(re),Fn=!Te&&!Ct&&jh(re),$r=!Te&&!Ct&&!Fn&&aP(re),Jr=Te||Ct||Fn||$r,On=Jr?Me(re.length,String):[],Zr=On.length;for(var Vi in re)(ce||ut.call(re,Vi))&&!(Jr&&(Vi=="length"||Fn&&(Vi=="offset"||Vi=="parent")||$r&&(Vi=="buffer"||Vi=="byteLength"||Vi=="byteOffset")||nn(Vi,Zr)))&&On.push(Vi);return On}function en(re,ce,Te){(Te!==void 0&&!Fl(re[ce],Te)||Te===void 0&&!(ce in re))&&Si(re,ce,Te)}function Yn(re,ce,Te){var Ct=re[ce];(!(ut.call(re,ce)&&Fl(Ct,Te))||Te===void 0&&!(ce in re))&&Si(re,ce,Te)}function oi(re,ce){for(var Te=re.length;Te--;)if(Fl(re[Te][0],ce))return Te;return-1}function Si(re,ce,Te){ce=="__proto__"&&Zt?Zt(re,ce,{configurable:!0,enumerable:!0,value:Te,writable:!0}):re[ce]=Te}var xi=Be();function Is(re){return re==null?re===void 0?b:y:Tn&&Tn in Object(re)?Qe(re):Fh(re)}function Mi(re){return au(re)&&Is(re)==a}function Tr(re){if(!Bh(re)||Qr(re))return!1;var ce=yx(re)?Xt:D;return ce.test(gx(re))}function wt(re){return au(re)&&oP(re.length)&&!!G[Is(re)]}function Cn(re){if(!Bh(re))return ms(re);var ce=kr(re),Te=[];for(var Ct in re)Ct=="constructor"&&(ce||!ut.call(re,Ct))||Te.push(Ct);return Te}function Dr(re,ce,Te,Ct,Fn){re!==ce&&xi(ce,function($r,Jr){if(Fn||(Fn=new Ft),Bh($r))rs(re,ce,Jr,Te,Dr,Ct,Fn);else{var On=Ct?Ct(Py(re,Jr),$r,Jr+"",re,ce,Fn):void 0;On===void 0&&(On=$r),en(re,Jr,On)}},Ry)}function rs(re,ce,Te,Ct,Fn,$r,Jr){var On=Py(re,Te),Zr=Py(ce,Te),Vi=Jr.get(Zr);if(Vi){en(re,Te,Vi);return}var Vo=$r?$r(On,Zr,Te+"",re,ce,Jr):void 0,Dy=Vo===void 0;if(Dy){var Uh=j_(Zr),U_=!Uh&&jh(Zr),z_=!Uh&&!U_&&aP(Zr);Vo=Zr,Uh||U_||z_?j_(On)?Vo=On:sP(On)?Vo=ve(On):U_?(Dy=!1,Vo=se(Zr,!0)):z_?(Dy=!1,Vo=ge(Zr,!0)):Vo=[]:hj(Zr)||Aa(Zr)?(Vo=On,Aa(On)?Vo=$y(On):(!Bh(On)||yx(On))&&(Vo=Tt(Zr))):Dy=!1}Dy&&(Jr.set(Zr,Vo),Fn(Vo,Zr,Ct,$r,Jr),Jr.delete(Zr)),en(re,Te,Vo)}function go(re,ce){return ky(jm(re,ce,Bm),re+"")}var K=Zt?function(re,ce){return Zt(re,"toString",{configurable:!0,enumerable:!1,value:Ny(ce),writable:!0})}:Bm;function se(re,ce){if(ce)return re.slice();var Te=re.length,Ct=ft?ft(Te):new re.constructor(Te);return re.copy(Ct),Ct}function Z(re){var ce=new re.constructor(re.byteLength);return new Le(ce).set(new Le(re)),ce}function ge(re,ce){var Te=ce?Z(re.buffer):re.buffer;return new re.constructor(Te,re.byteOffset,re.length)}function ve(re,ce){var Te=-1,Ct=re.length;for(ce||(ce=Array(Ct));++Te<Ct;)ce[Te]=re[Te];return ce}function pe(re,ce,Te,Ct){var Fn=!Te;Te||(Te={});for(var $r=-1,Jr=ce.length;++$r<Jr;){var On=ce[$r],Zr=Ct?Ct(Te[On],re[On],On,Te,re):void 0;Zr===void 0&&(Zr=re[On]),Fn?Si(Te,On,Zr):Yn(Te,On,Zr)}return Te}function Oe(re){return go(function(ce,Te){var Ct=-1,Fn=Te.length,$r=Fn>1?Te[Fn-1]:void 0,Jr=Fn>2?Te[2]:void 0;for($r=re.length>3&&typeof $r=="function"?(Fn--,$r):void 0,Jr&&Kn(Te[0],Te[1],Jr)&&($r=Fn<3?void 0:$r,Fn=1),ce=Object(ce);++Ct<Fn;){var On=Te[Ct];On&&re(ce,On,Ct,$r)}return ce})}function Be(re){return function(ce,Te,Ct){for(var Fn=-1,$r=Object(ce),Jr=Ct(ce),On=Jr.length;On--;){var Zr=Jr[re?On:++Fn];if(Te($r[Zr],Zr,$r)===!1)break}return ce}}function Ge(re,ce){var Te=re.__data__;return Mt(ce)?Te[typeof ce=="string"?"string":"hash"]:Te.map}function Ue(re,ce){var Te=je(re,ce);return Tr(Te)?Te:void 0}function Qe(re){var ce=ut.call(re,Tn),Te=re[Tn];try{re[Tn]=void 0;var Ct=!0}catch{}var Fn=vt.call(re);return Ct&&(ce?re[Tn]=Te:delete re[Tn]),Fn}function Tt(re){return typeof re.constructor=="function"&&!kr(re)?Di(Ze(re)):{}}function nn(re,ce){var Te=typeof re;return ce=ce??o,!!ce&&(Te=="number"||Te!="symbol"&&L.test(re))&&re>-1&&re%1==0&&re<ce}function Kn(re,ce,Te){if(!Bh(Te))return!1;var Ct=typeof ce;return(Ct=="number"?B_(Te)&&nn(ce,Te.length):Ct=="string"&&ce in Te)?Fl(Te[ce],re):!1}function Mt(re){var ce=typeof re;return ce=="string"||ce=="number"||ce=="symbol"||ce=="boolean"?re!=="__proto__":re===null}function Qr(re){return!!mt&&mt in re}function kr(re){var ce=re&&re.constructor,Te=typeof ce=="function"&&ce.prototype||rt;return re===Te}function ms(re){var ce=[];if(re!=null)for(var Te in Object(re))ce.push(Te);return ce}function Fh(re){return vt.call(re)}function jm(re,ce,Te){return ce=rr(ce===void 0?re.length-1:ce,0),function(){for(var Ct=arguments,Fn=-1,$r=rr(Ct.length-ce,0),Jr=Array($r);++Fn<$r;)Jr[Fn]=Ct[ce+Fn];Fn=-1;for(var On=Array(ce+1);++Fn<ce;)On[Fn]=Ct[Fn];return On[ce]=Te(Jr),He(re,this,On)}}function Py(re,ce){if(!(ce==="constructor"&&typeof re[ce]=="function")&&ce!="__proto__")return re[ce]}var ky=iP(K);function iP(re){var ce=0,Te=0;return function(){var Ct=Bn(),Fn=s-(Ct-Te);if(Te=Ct,Fn>0){if(++ce>=i)return arguments[0]}else ce=0;return re.apply(void 0,arguments)}}function gx(re){if(re!=null){try{return Pt.call(re)}catch{}try{return re+""}catch{}}return""}function Fl(re,ce){return re===ce||re!==re&&ce!==ce}var Aa=Mi(function(){return arguments}())?Mi:function(re){return au(re)&&ut.call(re,"callee")&&!ot.call(re,"callee")},j_=Array.isArray;function B_(re){return re!=null&&oP(re.length)&&!yx(re)}function sP(re){return au(re)&&B_(re)}var jh=Jt||lP;function yx(re){if(!Bh(re))return!1;var ce=Is(re);return ce==h||ce==p||ce==l||ce==_}function oP(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=o}function Bh(re){var ce=typeof re;return re!=null&&(ce=="object"||ce=="function")}function au(re){return re!=null&&typeof re=="object"}function hj(re){if(!au(re)||Is(re)!=v)return!1;var ce=Ze(re);if(ce===null)return!0;var Te=ut.call(ce,"constructor")&&ce.constructor;return typeof Te=="function"&&Te instanceof Te&&Pt.call(Te)==Ht}var aP=he?Ke(he):wt;function $y(re){return pe(re,Ry(re))}function Ry(re){return B_(re)?sr(re,!0):Cn(re)}var uP=Oe(function(re,ce,Te){Dr(re,ce,Te)});function Ny(re){return function(){return re}}function Bm(re){return re}function lP(){return!1}e.exports=uP})(b3,b3.exports);var Bxt=b3.exports;const qK=$l(Bxt);function Xv(e){return structuredClone(e)}function WK(){const{answers:e}=Bf(i=>i),t=Sm(),r=`${xm()}_${t}`;return e[r]}const Jke=I.createContext(null);function Uxt(){const e=I.useContext(Jke);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function w0(){return Bf(e=>e.config)}function phe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Zke(){const e=Sm(),t=HK(),r=`${xm()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Bf(w=>w),a=Eh(),{saveTrialAnswer:u,setIframeAnswers:l}=wh(),{storageEngine:c}=nu(),f=jxt(r),d=typeof e!="number"||!f,h=WK(),p=ym(),m=w0(),g=H4(),y=I.useMemo(()=>Date.now(),[]),v=Uxt(),_=I.useCallback(()=>{if(typeof e!="number")return;const w=Xv(i[r]),x=Object.values(w).reduce(($,M)=>Object.hasOwn(M,"values")?{...$,...M.values}:$,{}),{provenanceGraph:E}=w,b=Date.now(),T=v&&"current"in v&&v.current?v.current.splice(0,v.current.length):[];h.endTime||(a(u({identifier:r,answer:x,startTime:y,endTime:b,provenanceGraph:E,windowEvents:T})),c&&c.saveAnswers({...o,[r]:{answer:x,startTime:y,endTime:b,provenanceGraph:E,windowEvents:T}}),a(l({})));let A=e+1;const C=Yke(s,e),P=C!==null&&C.some($=>Object.hasOwn($.currentBlock,"skip")&&$.currentBlock.skip!==void 0),N={...o,[r]:{answer:x,startTime:y,endTime:b,provenanceGraph:E,windowEvents:T}};P&&[...C.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const z=Object.fromEntries(Object.entries(N).filter(([U])=>{const Y=parseInt(U.slice(U.lastIndexOf("_")+1),10);return Y>=M.firstIndex&&Y<=e})),W=M.check!=="block"?Object.entries(z).filter(([U])=>U.slice(0,U.lastIndexOf("_"))===M.name):Object.entries(z);if(W.length===0)return!1;if(W.some(([U,Y])=>!Y))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[U,Y]=W[0];M.check==="response"?B=M.value!==Y.answer[M.responseId]:B=!phe(Y.answer,U,m.components[U.slice(0,U.lastIndexOf("_"))],m)}else if(M.check==="block"||M.check==="repeatedComponent"){if(W.length<M.value)return!1;const U=W.map(([D,L])=>phe(L.answer,D,m.components[D.slice(0,D.lastIndexOf("_"))],m)),Y=U.filter(D=>D).length,q=U.length-Y;B=M.condition==="numCorrect"&&Y===M.value||M.condition==="numIncorrect"&&q===M.value}if(B){const U=t.indexOf(M.to),Y=U===-1?Lxt(s,M.to):-1;return A=U===-1?Y:U,!0}return!1}),p(`/${g}/${A}${window.location.search}`)},[i,r,v,h,e,s,o,y,p,g,a,u,c,l,m,t]);return{isNextDisabled:d,goToNextStep:_}}function zxt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=Zke(),o=I.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return k.jsx(ur,{type:"submit",disabled:t||i,onClick:o,children:e})}var GK=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const _V=$l(GK);function bV(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var Vxt=Object.defineProperty,mhe=Object.getOwnPropertySymbols,Hxt=Object.prototype.hasOwnProperty,qxt=Object.prototype.propertyIsEnumerable,ghe=(e,t,n)=>t in e?Vxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Wxt=(e,t)=>{for(var n in t||(t={}))Hxt.call(t,n)&&ghe(e,n,t[n]);if(mhe)for(var n of mhe(t))qxt.call(t,n)&&ghe(e,n,t[n]);return e};function e$e(e,t){if(t===null||typeof t!="object")return{};const n=Wxt({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const Gxt="__MANTINE_FORM_INDEX__";function yhe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Gxt}`)):!1:!1}function vhe(e,t,n){typeof n.value=="object"&&(n.value=qb(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function qb(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(qb(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(qb(a),qb(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(qb(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)vhe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||vhe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function t$e(e){return typeof e!="string"?[]:e.split(".")}function q4(e,t,n){const r=t$e(e);if(r.length===0)return n;const i=qb(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function ap(e,t){const n=t$e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function _he(e){const t=bV(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function wV(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=ap(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>wV(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||wV(o,t,a,i)),i},r)}function EV(e,t){return _he(typeof e=="function"?e(t):wV(e,t))}function tk(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=EV(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}function Yxt(e,{from:t,to:n},r){const i=ap(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),q4(e,s,r)}var Kxt=Object.defineProperty,bhe=Object.getOwnPropertySymbols,Xxt=Object.prototype.hasOwnProperty,Qxt=Object.prototype.propertyIsEnumerable,whe=(e,t,n)=>t in e?Kxt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jxt=(e,t)=>{for(var n in t||(t={}))Xxt.call(t,n)&&whe(e,n,t[n]);if(bhe)for(var n of bhe(t))Qxt.call(t,n)&&whe(e,n,t[n]);return e};function Zxt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o=Jxt({},r);return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function eTt(e,t,n){const r=ap(e,n);return Array.isArray(r)?q4(e,r.filter((i,s)=>s!==t),n):n}var tTt=Object.defineProperty,Ehe=Object.getOwnPropertySymbols,nTt=Object.prototype.hasOwnProperty,rTt=Object.prototype.propertyIsEnumerable,She=(e,t,n)=>t in e?tTt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iTt=(e,t)=>{for(var n in t||(t={}))nTt.call(t,n)&&She(e,n,t[n]);if(Ehe)for(var n of Ehe(t))rTt.call(t,n)&&She(e,n,t[n]);return e};function xhe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function The(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=e$e(`${i}.${t}`,s));const o=iTt({},s),a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=xhe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=xhe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function sTt(e,t,n,r){const i=ap(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),q4(e,s,r)}function Che(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function oTt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var aTt=Object.defineProperty,uTt=Object.defineProperties,lTt=Object.getOwnPropertyDescriptors,Ahe=Object.getOwnPropertySymbols,cTt=Object.prototype.hasOwnProperty,fTt=Object.prototype.propertyIsEnumerable,Ihe=(e,t,n)=>t in e?aTt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vm=(e,t)=>{for(var n in t||(t={}))cTt.call(t,n)&&Ihe(e,n,t[n]);if(Ahe)for(var n of Ahe(t))fTt.call(t,n)&&Ihe(e,n,t[n]);return e},qB=(e,t)=>uTt(e,lTt(t));function n$e({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:i=!0,validateInputOnChange:s=!1,validateInputOnBlur:o=!1,transformValues:a=l=>l,validate:u}={}){const[l,c]=I.useState(r),[f,d]=I.useState(n),[h,p]=I.useState(e),[m,g]=I.useState(bV(t)),y=I.useRef(e),v=H=>{y.current=H},_=I.useCallback(()=>c({}),[]),w=H=>{const te=H?Vm(Vm({},h),H):h;v(te),d({})},x=I.useCallback(H=>g(te=>bV(typeof H=="function"?H(te):H)),[]),E=I.useCallback(()=>g({}),[]),b=I.useCallback(()=>{p(e),E(),v(e),d({}),_()},[]),T=I.useCallback((H,te)=>x(le=>qB(Vm({},le),{[H]:te})),[]),A=I.useCallback(H=>x(te=>{if(typeof H!="string")return te;const le=Vm({},te);return delete le[H],le}),[]),C=I.useCallback(H=>d(te=>{if(typeof H!="string")return te;const le=e$e(H,te);return delete le[H],le}),[]),P=I.useCallback((H,te)=>{const le=yhe(H,s);C(H),c(me=>qB(Vm({},me),{[H]:!0})),p(me=>{const ye=q4(H,te,me);if(le){const de=tk(H,u,ye);de.hasError?T(H,de.error):A(H)}return ye}),!le&&i&&T(H,null)},[]),N=I.useCallback(H=>{p(te=>{const le=typeof H=="function"?H(te):H;return Vm(Vm({},te),le)}),i&&E()},[]),$=I.useCallback((H,te)=>{C(H),p(le=>Yxt(H,te,le)),g(le=>Zxt(H,te,le))},[]),M=I.useCallback((H,te)=>{C(H),p(le=>eTt(H,te,le)),g(le=>The(H,te,le,-1))},[]),B=I.useCallback((H,te,le)=>{C(H),p(me=>sTt(H,te,le,me)),g(me=>The(H,le,me,1))},[]),z=I.useCallback(()=>{const H=EV(u,h);return g(H.errors),H},[h,u]),W=I.useCallback(H=>{const te=tk(H,u,h);return te.hasError?T(H,te.error):A(H),te},[h,u]),U=(H,{type:te="input",withError:le=!0,withFocus:me=!0}={})=>{const de={onChange:oTt(we=>P(H,we))};return le&&(de.error=m[H]),te==="checkbox"?de.checked=ap(H,h):de.value=ap(H,h),me&&(de.onFocus=()=>c(we=>qB(Vm({},we),{[H]:!0})),de.onBlur=()=>{if(yhe(H,o)){const we=tk(H,u,h);we.hasError?T(H,we.error):A(H)}}),de},Y=(H,te)=>le=>{le==null||le.preventDefault();const me=z();me.hasErrors?te==null||te(me.errors,h,le):H==null||H(a(h),le)},q=H=>a(H||h),D=I.useCallback(H=>{H.preventDefault(),b()},[]),L=H=>{if(H){const le=ap(H,f);if(typeof le=="boolean")return le;const me=ap(H,h),ye=ap(H,y.current);return!_V(me,ye)}return Object.keys(f).length>0?Che(f):!_V(h,y.current)},G=I.useCallback(H=>Che(l,H),[l]),V=I.useCallback(H=>H?!tk(H,u,h).hasError:!EV(u,h).hasErrors,[h,u]);return{values:h,errors:m,setValues:N,setErrors:x,setFieldValue:P,setFieldError:T,clearFieldError:A,clearErrors:E,reset:b,validate:z,validateField:W,reorderListItem:$,removeListItem:M,insertListItem:B,getInputProps:U,onSubmit:Y,onReset:D,isDirty:L,isTouched:G,setTouched:c,setDirty:d,resetTouched:_,resetDirty:w,isValid:V,getTransformedValues:q}}function dTt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function hTt(e){return dTt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const pTt=new URLSearchParams(window.location.search),mTt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?pTt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},gTt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function yTt(e,t,n){const[r,i]=I.useState(null),s=n$e({initialValues:mTt(e,n),validate:gTt(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function h_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function vTt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e;return k.jsx(Zw.Group,{label:k.jsx(Ga,{text:r,required:i}),...n,error:h_(e,n,s),size:"md",children:s.map(o=>k.jsx(Zw,{disabled:t,value:o.value,label:o.label},o.value))})}function _Tt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s,options:o}=e;return k.jsx(d4,{disabled:t,label:k.jsx(Ga,{text:i,required:s}),placeholder:r,data:o,radius:"md",size:"md",...n,error:h_(e,n,o)})}function bTt({response:e,answer:t}){const{prompt:n}=e;return k.jsxs(k.Fragment,{children:[k.jsx(ze,{fz:"md",fw:500,children:k.jsx(Ga,{text:n})}),k.jsx(Fd,{children:Array.isArray(t.value)?t.value.map(r=>k.jsx(Fd.Item,{children:r},r)):k.jsx(Fd.Item,{children:t.value})})]})}function r$e({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s,leftLabel:o,rightLabel:a}=e;return k.jsxs(VD.Group,{name:`radioInput${e.id}`,label:k.jsx(Ga,{text:r,required:i}),size:"md",...n,error:h_(e,n,s),children:[o?k.jsx(ze,{mt:-7,children:o}):null,s.map(u=>k.jsx(VD,{disabled:t,value:u.value,label:u.label},u.label)),k.jsx(ze,{mt:-7,children:a})]},e.id)}function wTt({response:e,disabled:t,answer:n}){const{preset:r}=e,i=[];for(let o=1;o<=+r;o+=1)i.push({label:`${o}`,value:`${o}`});const s={...e,type:"radio",options:i};return k.jsx(r$e,{disabled:t,response:s,answer:n})}function ETt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,min:s,max:o,placeholder:a}=e;return k.jsx(yIe,{disabled:t,placeholder:a,label:k.jsx(Ga,{text:r,required:i}),radius:"md",size:"md",min:s,max:o,...n,error:h_(e,n)})}function STt({response:e,disabled:t,answer:n}){const{prompt:r,required:i,options:s}=e,o=h_(e,n);return k.jsx(ls.Wrapper,{label:k.jsx(Ga,{text:r,required:i}),error:o,size:"md",children:k.jsx(cK,{disabled:t,labelAlwaysOn:!0,sx:{marginTop:"5px",marginBottom:"30px"},marks:s,...n,styles:a=>({mark:{width:12,height:12,borderRadius:6,transform:"translateX(-3px) translateY(-2px)"},markFilled:{borderColor:a.colors.blue[6]},markLabel:{fontSize:a.fontSizes.sm,marginBottom:5,marginTop:0},thumb:{height:24,width:24,backgroundColor:a.white,borderWidth:1,boxShadow:a.shadows.sm},label:{top:-4,height:28,lineHeight:28,width:28,padding:0,display:"flex",justifyContent:"center",alignItems:"center",fontWeight:700,color:"orange",backgroundColor:"transparent"}})})})}function xTt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return k.jsx(Kv,{disabled:t,placeholder:r,label:k.jsx(Ga,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:h_(e,n)})}function TTt({response:e,disabled:t,answer:n}){const{placeholder:r,prompt:i,required:s}=e;return k.jsx(bAe,{disabled:t,placeholder:r,label:k.jsx(Ga,{text:i,required:s}),radius:"md",size:"md",...n,value:n.value||"",error:h_(e,n)})}function CTt({response:e,answer:t,storedAnswer:n}){const r=(n?{value:n}:t)||{value:void 0},i=!!n,[s]=wY(),o=I.useMemo(()=>{if(e.paramCapture){const a=s.get(e.paramCapture);return i||!!a}return i},[i,e.paramCapture,s]);return k.jsxs(dt,{sx:{margin:10,padding:5},children:[e.type==="numerical"&&k.jsx(ETt,{response:e,disabled:o,answer:r}),e.type==="shortText"&&k.jsx(xTt,{response:e,disabled:o,answer:r}),e.type==="longText"&&k.jsx(TTt,{response:e,disabled:o,answer:r}),e.type==="likert"&&k.jsx(wTt,{response:e,disabled:o,answer:r}),e.type==="dropdown"&&k.jsx(_Tt,{response:e,disabled:o,answer:r}),e.type==="slider"&&k.jsx(STt,{response:e,disabled:o,answer:r}),e.type==="radio"&&k.jsx(r$e,{response:e,disabled:o,answer:r}),e.type==="checkbox"&&k.jsx(vTt,{response:e,disabled:o,answer:r}),e.type==="iframe"&&k.jsx(bTt,{response:e,answer:r})]})}function w3({config:e,location:t,status:n,style:r}){var w;const i=Sm(),s=xm(),o=n==null?void 0:n.answer,a=e,u=I.useMemo(()=>{var x;return((x=a==null?void 0:a.response)==null?void 0:x.filter(E=>E.location?E.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Eh(),{updateResponseBlockValidation:c}=wh(),f=yTt(u,i,o||{}),[d,h]=I.useState(void 0),[p,m]=I.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Bf(x=>x),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return I.useEffect(()=>{const x=u.find(E=>E.type==="iframe");if(g&&x){const E=x.id;f.setValues({...f.values,[E]:g[E]})}},[g]),I.useEffect(()=>{y&&h(y)},[y]),I.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:Xv(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),k.jsxs("div",{style:r,children:[u.map(x=>{var E,b;return k.jsx(F.Fragment,{children:x.hidden?"":k.jsxs(k.Fragment,{children:[k.jsx(CTt,{storedAnswer:o?o[x.id]:void 0,answer:{...f.getInputProps(x.id,{type:x.type==="checkbox"?"checkbox":"input"})},response:x}),v&&p&&k.jsx(ze,{children:`The correct answer is: ${(b=(E=a.correctAnswer)==null?void 0:E.find(T=>T.id===x.id))==null?void 0:b.answer}`})]})},`${x.id}-${i}`)}),k.jsxs(Wa,{position:"right",spacing:"xs",mt:"xl",children:[v&&_&&k.jsx(ur,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),_&&k.jsx(zxt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const Fx="@REVISIT_COMMS",ATt={minHeight:"500px",width:"100%",border:0};function ITt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=wh(),r=Eh(),i=Tke(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=xm(),u=ym(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${Fx}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${Fx}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${Fx}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${Fx}/ANSWERS`:r(t(d.message));break;case`${Fx}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),k.jsx("iframe",{ref:s,src:`${bh}${e.path}?trialid=${a}&id=${o}`,style:ATt})}async function YK(e){const n=await(await fetch(`${bh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function w1({email:e,path:t}){const n=cS();return k.jsxs(Em,{fluid:!0,my:50,maw:800,mx:"auto",children:[k.jsx(Qi,{order:2,children:k.jsx(ze,{span:!0,c:"orange",children:"404"})}),k.jsxs(ze,{children:[k.jsx(ze,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),k.jsx(Ef,{h:"lg"}),k.jsxs(Fd,{children:[k.jsx(Fd.Item,{children:k.jsx(ze,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),k.jsx(Fd.Item,{children:k.jsxs(ze,{children:["If you're a participant, please contact the study administrator"," ",e&&k.jsxs(k.Fragment,{children:["at"," ",k.jsxs(n4,{span:!0,c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const OTt={maxWidth:"100%"};function PTt({currentConfig:e}){const t={...OTt,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await YK(e.path);s(!!a),r(!1)}o()},[e]),n||i?k.jsx(l_,{mx:"auto",src:`${bh}${e.path}`,style:t}):k.jsx(w1,{path:e.path})}function Ohe(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}class Phe extends Map{constructor(t,n=o$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(SV(this,t))}has(t){return super.has(SV(this,t))}set(t,n){return super.set(i$e(this,t),n)}delete(t){return super.delete(s$e(this,t))}}class E3 extends Set{constructor(t,n=o$e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(SV(this,t))}add(t){return super.add(i$e(this,t))}delete(t){return super.delete(s$e(this,t))}}function SV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function i$e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function s$e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function o$e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kTt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var $Tt={value:()=>{}};function W4(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new F$(n)}function F$(e){this._=e}function RTt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}F$.prototype=W4.prototype={constructor:F$,on:function(e,t){var n=this._,r=RTt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=NTt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=khe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=khe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new F$(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function NTt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function khe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=$Tt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xV="http://www.w3.org/1999/xhtml";const $he={svg:"http://www.w3.org/2000/svg",xhtml:xV,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function G4(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),$he.hasOwnProperty(t)?{space:$he[t],local:e}:e}function DTt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xV&&t.documentElement.namespaceURI===xV?t.createElement(e):t.createElementNS(n,e)}}function MTt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function a$e(e){var t=G4(e);return(t.local?MTt:DTt)(t)}function LTt(){}function KK(e){return e==null?LTt:function(){return this.querySelector(e)}}function FTt(e){typeof e!="function"&&(e=KK(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ya(r,this._parents)}function u$e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jTt(){return[]}function l$e(e){return e==null?jTt:function(){return this.querySelectorAll(e)}}function BTt(e){return function(){return u$e(e.apply(this,arguments))}}function UTt(e){typeof e=="function"?e=BTt(e):e=l$e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ya(r,i)}function c$e(e){return function(){return this.matches(e)}}function f$e(e){return function(t){return t.matches(e)}}var zTt=Array.prototype.find;function VTt(e){return function(){return zTt.call(this.children,e)}}function HTt(){return this.firstElementChild}function qTt(e){return this.select(e==null?HTt:VTt(typeof e=="function"?e:f$e(e)))}var WTt=Array.prototype.filter;function GTt(){return Array.from(this.children)}function YTt(e){return function(){return WTt.call(this.children,e)}}function KTt(e){return this.selectAll(e==null?GTt:YTt(typeof e=="function"?e:f$e(e)))}function XTt(e){typeof e!="function"&&(e=c$e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ya(r,this._parents)}function d$e(e){return new Array(e.length)}function QTt(){return new Ya(this._enter||this._groups.map(d$e),this._parents)}function S3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}S3.prototype={constructor:S3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function JTt(e){return function(){return e}}function ZTt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new S3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function e2t(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new S3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function t2t(e){return e.__data__}function n2t(e,t){if(!arguments.length)return Array.from(this,t2t);var n=t?e2t:ZTt,r=this._parents,i=this._groups;typeof e!="function"&&(e=JTt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=r2t(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,_=0,w,x;v<p;++v)if(w=m[v]){for(v>=_&&(_=v+1);!(x=g[_])&&++_<p;);w._next=x||null}}return o=new Ya(o,r),o._enter=a,o._exit=u,o}function r2t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i2t(){return new Ya(this._exit||this._groups.map(d$e),this._parents)}function s2t(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function o2t(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ya(a,this._parents)}function a2t(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function u2t(e){e||(e=l2t);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ya(i,this._parents).order()}function l2t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function c2t(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function f2t(){return Array.from(this)}function d2t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function h2t(){let e=0;for(const t of this)++e;return e}function p2t(){return!this.node()}function m2t(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function g2t(e){return function(){this.removeAttribute(e)}}function y2t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function v2t(e,t){return function(){this.setAttribute(e,t)}}function _2t(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function b2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function w2t(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function E2t(e,t){var n=G4(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?y2t:g2t:typeof t=="function"?n.local?w2t:b2t:n.local?_2t:v2t)(n,t))}function h$e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function S2t(e){return function(){this.style.removeProperty(e)}}function x2t(e,t,n){return function(){this.style.setProperty(e,t,n)}}function T2t(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function C2t(e,t,n){return arguments.length>1?this.each((t==null?S2t:typeof t=="function"?T2t:x2t)(e,t,n??"")):nE(this.node(),e)}function nE(e,t){return e.style.getPropertyValue(t)||h$e(e).getComputedStyle(e,null).getPropertyValue(t)}function A2t(e){return function(){delete this[e]}}function I2t(e,t){return function(){this[e]=t}}function O2t(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function P2t(e,t){return arguments.length>1?this.each((t==null?A2t:typeof t=="function"?O2t:I2t)(e,t)):this.node()[e]}function p$e(e){return e.trim().split(/^|\s+/)}function XK(e){return e.classList||new m$e(e)}function m$e(e){this._node=e,this._names=p$e(e.getAttribute("class")||"")}m$e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function g$e(e,t){for(var n=XK(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function y$e(e,t){for(var n=XK(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function k2t(e){return function(){g$e(this,e)}}function $2t(e){return function(){y$e(this,e)}}function R2t(e,t){return function(){(t.apply(this,arguments)?g$e:y$e)(this,e)}}function N2t(e,t){var n=p$e(e+"");if(arguments.length<2){for(var r=XK(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?R2t:t?k2t:$2t)(n,t))}function D2t(){this.textContent=""}function M2t(e){return function(){this.textContent=e}}function L2t(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function F2t(e){return arguments.length?this.each(e==null?D2t:(typeof e=="function"?L2t:M2t)(e)):this.node().textContent}function j2t(){this.innerHTML=""}function B2t(e){return function(){this.innerHTML=e}}function U2t(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function z2t(e){return arguments.length?this.each(e==null?j2t:(typeof e=="function"?U2t:B2t)(e)):this.node().innerHTML}function V2t(){this.nextSibling&&this.parentNode.appendChild(this)}function H2t(){return this.each(V2t)}function q2t(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function W2t(){return this.each(q2t)}function G2t(e){var t=typeof e=="function"?e:a$e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Y2t(){return null}function K2t(e,t){var n=typeof e=="function"?e:a$e(e),r=t==null?Y2t:typeof t=="function"?t:KK(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function X2t(){var e=this.parentNode;e&&e.removeChild(this)}function Q2t(){return this.each(X2t)}function J2t(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Z2t(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function eCt(e){return this.select(e?Z2t:J2t)}function tCt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nCt(e){return function(t){e.call(this,t,this.__data__)}}function rCt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function iCt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function sCt(e,t,n){return function(){var r=this.__on,i,s=nCt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function oCt(e,t,n){var r=rCt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?sCt:iCt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function v$e(e,t,n){var r=h$e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function aCt(e,t){return function(){return v$e(this,e,t)}}function uCt(e,t){return function(){return v$e(this,e,t.apply(this,arguments))}}function lCt(e,t){return this.each((typeof t=="function"?uCt:aCt)(e,t))}function*cCt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var QK=[null];function Ya(e,t){this._groups=e,this._parents=t}function OI(){return new Ya([[document.documentElement]],QK)}function fCt(){return this}Ya.prototype=OI.prototype={constructor:Ya,select:FTt,selectAll:UTt,selectChild:qTt,selectChildren:KTt,filter:XTt,data:n2t,enter:QTt,exit:i2t,join:s2t,merge:o2t,selection:fCt,order:a2t,sort:u2t,call:c2t,nodes:f2t,node:d2t,size:h2t,empty:p2t,each:m2t,attr:E2t,style:C2t,property:P2t,classed:N2t,text:F2t,html:z2t,raise:H2t,lower:W2t,append:G2t,insert:K2t,remove:Q2t,clone:eCt,datum:tCt,on:oCt,dispatch:lCt,[Symbol.iterator]:cCt};function vs(e){return typeof e=="string"?new Ya([[document.querySelector(e)]],[document.documentElement]):new Ya([[e]],QK)}function dCt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function TV(e,t){if(e=dCt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function hCt(e){return typeof e=="string"?new Ya([document.querySelectorAll(e)],[document.documentElement]):new Ya([u$e(e)],QK)}const CV={capture:!0,passive:!1};function AV(e){e.preventDefault(),e.stopImmediatePropagation()}function pCt(e){var t=e.document.documentElement,n=vs(e).on("dragstart.drag",AV,CV);"onselectstart"in t?n.on("selectstart.drag",AV,CV):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function mCt(e,t){var n=e.document.documentElement,r=vs(e).on("dragstart.drag",null);t&&(r.on("click.drag",AV,CV),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function wS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function PI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function oy(){}var E1=.7,rE=1/E1,_w="\\s*([+-]?\\d+)\\s*",YC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ud="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gCt=/^#([0-9a-f]{3,8})$/,yCt=new RegExp(`^rgb\\(${_w},${_w},${_w}\\)$`),vCt=new RegExp(`^rgb\\(${Ud},${Ud},${Ud}\\)$`),_Ct=new RegExp(`^rgba\\(${_w},${_w},${_w},${YC}\\)$`),bCt=new RegExp(`^rgba\\(${Ud},${Ud},${Ud},${YC}\\)$`),wCt=new RegExp(`^hsl\\(${YC},${Ud},${Ud}\\)$`),ECt=new RegExp(`^hsla\\(${YC},${Ud},${Ud},${YC}\\)$`),Rhe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};wS(oy,S1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Nhe,formatHex:Nhe,formatHex8:SCt,formatHsl:xCt,formatRgb:Dhe,toString:Dhe});function Nhe(){return this.rgb().formatHex()}function SCt(){return this.rgb().formatHex8()}function xCt(){return _$e(this).formatHsl()}function Dhe(){return this.rgb().formatRgb()}function S1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gCt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mhe(t):n===3?new ro(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nk(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nk(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yCt.exec(e))?new ro(t[1],t[2],t[3],1):(t=vCt.exec(e))?new ro(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_Ct.exec(e))?nk(t[1],t[2],t[3],t[4]):(t=bCt.exec(e))?nk(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wCt.exec(e))?jhe(t[1],t[2]/100,t[3]/100,1):(t=ECt.exec(e))?jhe(t[1],t[2]/100,t[3]/100,t[4]):Rhe.hasOwnProperty(e)?Mhe(Rhe[e]):e==="transparent"?new ro(NaN,NaN,NaN,0):null}function Mhe(e){return new ro(e>>16&255,e>>8&255,e&255,1)}function nk(e,t,n,r){return r<=0&&(e=t=n=NaN),new ro(e,t,n,r)}function JK(e){return e instanceof oy||(e=S1(e)),e?(e=e.rgb(),new ro(e.r,e.g,e.b,e.opacity)):new ro}function E0(e,t,n,r){return arguments.length===1?JK(e):new ro(e,t,n,r??1)}function ro(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}wS(ro,E0,PI(oy,{brighter(e){return e=e==null?rE:Math.pow(rE,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?E1:Math.pow(E1,e),new ro(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ro(Qv(this.r),Qv(this.g),Qv(this.b),x3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lhe,formatHex:Lhe,formatHex8:TCt,formatRgb:Fhe,toString:Fhe}));function Lhe(){return`#${Ov(this.r)}${Ov(this.g)}${Ov(this.b)}`}function TCt(){return`#${Ov(this.r)}${Ov(this.g)}${Ov(this.b)}${Ov((isNaN(this.opacity)?1:this.opacity)*255)}`}function Fhe(){const e=x3(this.opacity);return`${e===1?"rgb(":"rgba("}${Qv(this.r)}, ${Qv(this.g)}, ${Qv(this.b)}${e===1?")":`, ${e})`}`}function x3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Qv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ov(e){return e=Qv(e),(e<16?"0":"")+e.toString(16)}function jhe(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new uf(e,t,n,r)}function _$e(e){if(e instanceof uf)return new uf(e.h,e.s,e.l,e.opacity);if(e instanceof oy||(e=S1(e)),!e)return new uf;if(e instanceof uf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new uf(o,a,u,e.opacity)}function T3(e,t,n,r){return arguments.length===1?_$e(e):new uf(e,t,n,r??1)}function uf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}wS(uf,T3,PI(oy,{brighter(e){return e=e==null?rE:Math.pow(rE,e),new uf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?E1:Math.pow(E1,e),new uf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ro(WB(e>=240?e-240:e+120,i,r),WB(e,i,r),WB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new uf(Bhe(this.h),rk(this.s),rk(this.l),x3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=x3(this.opacity);return`${e===1?"hsl(":"hsla("}${Bhe(this.h)}, ${rk(this.s)*100}%, ${rk(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Bhe(e){return e=(e||0)%360,e<0?e+360:e}function rk(e){return Math.max(0,Math.min(1,e||0))}function WB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const b$e=Math.PI/180,w$e=180/Math.PI,C3=18,E$e=.96422,S$e=1,x$e=.82521,T$e=4/29,bw=6/29,C$e=3*bw*bw,CCt=bw*bw*bw;function A$e(e){if(e instanceof zd)return new zd(e.l,e.a,e.b,e.opacity);if(e instanceof _p)return I$e(e);e instanceof ro||(e=JK(e));var t=XB(e.r),n=XB(e.g),r=XB(e.b),i=GB((.2225045*t+.7168786*n+.0606169*r)/S$e),s,o;return t===n&&n===r?s=o=i:(s=GB((.4360747*t+.3850649*n+.1430804*r)/E$e),o=GB((.0139322*t+.0971045*n+.7141733*r)/x$e)),new zd(116*i-16,500*(s-i),200*(i-o),e.opacity)}function A3(e,t,n,r){return arguments.length===1?A$e(e):new zd(e,t,n,r??1)}function zd(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}wS(zd,A3,PI(oy,{brighter(e){return new zd(this.l+C3*(e??1),this.a,this.b,this.opacity)},darker(e){return new zd(this.l-C3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=E$e*YB(t),e=S$e*YB(e),n=x$e*YB(n),new ro(KB(3.1338561*t-1.6168667*e-.4906146*n),KB(-.9787684*t+1.9161415*e+.033454*n),KB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function GB(e){return e>CCt?Math.pow(e,1/3):e/C$e+T$e}function YB(e){return e>bw?e*e*e:C$e*(e-T$e)}function KB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function XB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function ACt(e){if(e instanceof _p)return new _p(e.h,e.c,e.l,e.opacity);if(e instanceof zd||(e=A$e(e)),e.a===0&&e.b===0)return new _p(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*w$e;return new _p(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function I3(e,t,n,r){return arguments.length===1?ACt(e):new _p(e,t,n,r??1)}function _p(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function I$e(e){if(isNaN(e.h))return new zd(e.l,0,0,e.opacity);var t=e.h*b$e;return new zd(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}wS(_p,I3,PI(oy,{brighter(e){return new _p(this.h,this.c,this.l+C3*(e??1),this.opacity)},darker(e){return new _p(this.h,this.c,this.l-C3*(e??1),this.opacity)},rgb(){return I$e(this).rgb()}}));var O$e=-.14861,ZK=1.78277,eX=-.29227,Y4=-.90649,KC=1.97294,Uhe=KC*Y4,zhe=KC*ZK,Vhe=ZK*eX-Y4*O$e;function ICt(e){if(e instanceof Jv)return new Jv(e.h,e.s,e.l,e.opacity);e instanceof ro||(e=JK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Vhe*r+Uhe*t-zhe*n)/(Vhe+Uhe-zhe),s=r-i,o=(KC*(n-i)-eX*s)/Y4,a=Math.sqrt(o*o+s*s)/(KC*i*(1-i)),u=a?Math.atan2(o,s)*w$e-120:NaN;return new Jv(u<0?u+360:u,a,i,e.opacity)}function IV(e,t,n,r){return arguments.length===1?ICt(e):new Jv(e,t,n,r??1)}function Jv(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}wS(Jv,IV,PI(oy,{brighter(e){return e=e==null?rE:Math.pow(rE,e),new Jv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?E1:Math.pow(E1,e),new Jv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*b$e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ro(255*(t+n*(O$e*r+ZK*i)),255*(t+n*(eX*r+Y4*i)),255*(t+n*(KC*r)),this.opacity)}}));function P$e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function k$e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return P$e((n-r/t)*t,o,i,s,a)}}function $$e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return P$e((n-r/t)*t,i,s,o,a)}}const K4=e=>()=>e;function R$e(e,t){return function(n){return e+n*t}}function OCt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function X4(e,t){var n=t-e;return n?R$e(e,n>180||n<-180?n-360*Math.round(n/360):n):K4(isNaN(e)?t:e)}function PCt(e){return(e=+e)==1?io:function(t,n){return n-t?OCt(t,n,e):K4(isNaN(t)?n:t)}}function io(e,t){var n=t-e;return n?R$e(e,n):K4(isNaN(e)?t:e)}const XC=function e(t){var n=PCt(t);function r(i,s){var o=n((i=E0(i)).r,(s=E0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=io(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function N$e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=E0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var kCt=N$e(k$e),$Ct=N$e($$e);function tX(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function D$e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function RCt(e,t){return(D$e(t)?tX:M$e)(e,t)}function M$e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Tm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function L$e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ql(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function F$e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Tm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var OV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,QB=new RegExp(OV.source,"g");function NCt(e){return function(){return e}}function DCt(e){return function(t){return e(t)+""}}function nX(e,t){var n=OV.lastIndex=QB.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=OV.exec(e))&&(i=QB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Ql(r,i)})),n=QB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?DCt(u[0].x):NCt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Tm(e,t){var n=typeof t,r;return t==null||n==="boolean"?K4(t):(n==="number"?Ql:n==="string"?(r=S1(t))?(t=r,XC):nX:t instanceof S1?XC:t instanceof Date?L$e:D$e(t)?tX:Array.isArray(t)?M$e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?F$e:Ql)(e,t)}function MCt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function LCt(e,t){var n=X4(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function kI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Hhe=180/Math.PI,PV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function j$e(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Hhe,skewX:Math.atan(u)*Hhe,scaleX:o,scaleY:a}}var ik;function FCt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?PV:j$e(t.a,t.b,t.c,t.d,t.e,t.f)}function jCt(e){return e==null||(ik||(ik=document.createElementNS("http://www.w3.org/2000/svg","g")),ik.setAttribute("transform",e),!(e=ik.transform.baseVal.consolidate()))?PV:(e=e.matrix,j$e(e.a,e.b,e.c,e.d,e.e,e.f))}function B$e(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Ql(l,f)},{i:m-2,x:Ql(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ql(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ql(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Ql(l,f)},{i:m-2,x:Ql(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var U$e=B$e(FCt,"px, ","px)","deg)"),z$e=B$e(jCt,", ",")",")"),BCt=1e-12;function qhe(e){return((e=Math.exp(e))+1/e)/2}function UCt(e){return((e=Math.exp(e))-1/e)/2}function zCt(e){return((e=Math.exp(2*e))-1)/(e+1)}const VCt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<BCt)y=Math.log(d/l)/t,g=function(b){return[a+b*h,u+b*p,l*Math.exp(t*b*y)]};else{var v=Math.sqrt(m),_=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),x=Math.log(Math.sqrt(_*_+1)-_),E=Math.log(Math.sqrt(w*w+1)-w);y=(E-x)/t,g=function(b){var T=b*y,A=qhe(x),C=l/(n*v)*(A*zCt(t*T+x)-UCt(x));return[a+C*h,u+C*p,l*A/qhe(t*T+x)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function V$e(e){return function(t,n){var r=e((t=T3(t)).h,(n=T3(n)).h),i=io(t.s,n.s),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const HCt=V$e(X4);var qCt=V$e(io);function WCt(e,t){var n=io((e=A3(e)).l,(t=A3(t)).l),r=io(e.a,t.a),i=io(e.b,t.b),s=io(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function H$e(e){return function(t,n){var r=e((t=I3(t)).h,(n=I3(n)).h),i=io(t.c,n.c),s=io(t.l,n.l),o=io(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const GCt=H$e(X4);var YCt=H$e(io);function q$e(e){return function t(n){n=+n;function r(i,s){var o=e((i=IV(i)).h,(s=IV(s)).h),a=io(i.s,s.s),u=io(i.l,s.l),l=io(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const KCt=q$e(X4);var XCt=q$e(io);function rX(e,t){t===void 0&&(t=e,e=Tm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function QCt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const JCt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Tm,interpolateArray:RCt,interpolateBasis:k$e,interpolateBasisClosed:$$e,interpolateCubehelix:KCt,interpolateCubehelixLong:XCt,interpolateDate:L$e,interpolateDiscrete:MCt,interpolateHcl:GCt,interpolateHclLong:YCt,interpolateHsl:HCt,interpolateHslLong:qCt,interpolateHue:LCt,interpolateLab:WCt,interpolateNumber:Ql,interpolateNumberArray:tX,interpolateObject:F$e,interpolateRgb:XC,interpolateRgbBasis:kCt,interpolateRgbBasisClosed:$Ct,interpolateRound:kI,interpolateString:nX,interpolateTransformCss:U$e,interpolateTransformSvg:z$e,interpolateZoom:VCt,piecewise:rX,quantize:QCt},Symbol.toStringTag,{value:"Module"}));var iE=0,RT=0,jx=0,W$e=1e3,O3,NT,P3=0,x1=0,Q4=0,QC=typeof performance=="object"&&performance.now?performance:Date,G$e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function J4(){return x1||(G$e(ZCt),x1=QC.now()+Q4)}function ZCt(){x1=0}function JC(){this._call=this._time=this._next=null}JC.prototype=iX.prototype={constructor:JC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?J4():+n)+(t==null?0:+t),!this._next&&NT!==this&&(NT?NT._next=this:O3=this,NT=this),this._call=e,this._time=n,kV()},stop:function(){this._call&&(this._call=null,this._time=1/0,kV())}};function iX(e,t,n){var r=new JC;return r.restart(e,t,n),r}function eAt(){J4(),++iE;for(var e=O3,t;e;)(t=x1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--iE}function Whe(){x1=(P3=QC.now())+Q4,iE=RT=0;try{eAt()}finally{iE=0,nAt(),x1=0}}function tAt(){var e=QC.now(),t=e-P3;t>W$e&&(Q4-=t,P3=e)}function nAt(){for(var e,t=O3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:O3=n);NT=e,kV(r)}function kV(e){if(!iE){RT&&(RT=clearTimeout(RT));var t=e-x1;t>24?(e<1/0&&(RT=setTimeout(Whe,e-QC.now()-Q4)),jx&&(jx=clearInterval(jx))):(jx||(P3=QC.now(),jx=setInterval(tAt,W$e)),iE=1,G$e(Whe))}}function Ghe(e,t,n){var r=new JC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function rAt(e,t,n){var r=new JC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?J4():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var iAt=W4("start","end","cancel","interrupt"),sAt=[],Y$e=0,Yhe=1,$V=2,j$=3,Khe=4,RV=5,B$=6;function Z4(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;oAt(e,n,{name:t,index:r,group:i,on:iAt,tween:sAt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Y$e})}function sX(e,t){var n=Uf(e,t);if(n.state>Y$e)throw new Error("too late; already scheduled");return n}function Sh(e,t){var n=Uf(e,t);if(n.state>j$)throw new Error("too late; already running");return n}function Uf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function oAt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=iX(s,0,n.time);function s(l){n.state=Yhe,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Yhe)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===j$)return Ghe(o);h.state===Khe?(h.state=B$,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=B$,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Ghe(function(){n.state===j$&&(n.state=Khe,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=$V,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$V){for(n.state=j$,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=RV,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===RV&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=B$,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function NV(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>$V&&r.state<RV,r.state=B$,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function aAt(e){return this.each(function(){NV(this,e)})}function uAt(e,t){var n,r;return function(){var i=Sh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function lAt(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Sh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function cAt(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Uf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?uAt:lAt)(n,e,t))}function oX(e,t,n){var r=e._id;return e.each(function(){var i=Sh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Uf(i,r).value[t]}}function K$e(e,t){var n;return(typeof t=="number"?Ql:t instanceof S1?XC:(n=S1(t))?(t=n,XC):nX)(e,t)}function fAt(e){return function(){this.removeAttribute(e)}}function dAt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hAt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function pAt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function mAt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function gAt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function yAt(e,t){var n=G4(e),r=n==="transform"?z$e:K$e;return this.attrTween(e,typeof t=="function"?(n.local?gAt:mAt)(n,r,oX(this,"attr."+e,t)):t==null?(n.local?dAt:fAt)(n):(n.local?pAt:hAt)(n,r,t))}function vAt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _At(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function bAt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_At(e,s)),n}return i._value=t,i}function wAt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&vAt(e,s)),n}return i._value=t,i}function EAt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=G4(e);return this.tween(n,(r.local?bAt:wAt)(r,t))}function SAt(e,t){return function(){sX(this,e).delay=+t.apply(this,arguments)}}function xAt(e,t){return t=+t,function(){sX(this,e).delay=t}}function TAt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?SAt:xAt)(t,e)):Uf(this.node(),t).delay}function CAt(e,t){return function(){Sh(this,e).duration=+t.apply(this,arguments)}}function AAt(e,t){return t=+t,function(){Sh(this,e).duration=t}}function IAt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?CAt:AAt)(t,e)):Uf(this.node(),t).duration}function OAt(e,t){if(typeof t!="function")throw new Error;return function(){Sh(this,e).ease=t}}function PAt(e){var t=this._id;return arguments.length?this.each(OAt(t,e)):Uf(this.node(),t).ease}function kAt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Sh(this,e).ease=n}}function $At(e){if(typeof e!="function")throw new Error;return this.each(kAt(this._id,e))}function RAt(e){typeof e!="function"&&(e=c$e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Qp(r,this._parents,this._name,this._id)}function NAt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Qp(o,this._parents,this._name,this._id)}function DAt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function MAt(e,t,n){var r,i,s=DAt(t)?sX:Sh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function LAt(e,t){var n=this._id;return arguments.length<2?Uf(this.node(),n).on.on(e):this.each(MAt(n,e,t))}function FAt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function jAt(){return this.on("end.remove",FAt(this._id))}function BAt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=KK(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,Z4(l[d],t,n,d,l,Uf(c,n)));return new Qp(s,this._parents,t,n)}function UAt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=l$e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Uf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&Z4(h,t,n,m,d,p);s.push(d),o.push(c)}return new Qp(s,o,t,n)}var zAt=OI.prototype.constructor;function VAt(){return new zAt(this._groups,this._parents)}function HAt(e,t){var n,r,i;return function(){var s=nE(this,e),o=(this.style.removeProperty(e),nE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function X$e(e){return function(){this.style.removeProperty(e)}}function qAt(e,t,n){var r,i=n+"",s;return function(){var o=nE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function WAt(e,t,n){var r,i,s;return function(){var o=nE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),nE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function GAt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Sh(this,e),l=u.on,c=u.value[s]==null?a||(a=X$e(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function YAt(e,t,n){var r=(e+="")=="transform"?U$e:K$e;return t==null?this.styleTween(e,HAt(e,r)).on("end.style."+e,X$e(e)):typeof t=="function"?this.styleTween(e,WAt(e,r,oX(this,"style."+e,t))).each(GAt(this._id,e)):this.styleTween(e,qAt(e,r,t),n).on("end.style."+e,null)}function KAt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function XAt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&KAt(e,o,n)),r}return s._value=t,s}function QAt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,XAt(e,t,n??""))}function JAt(e){return function(){this.textContent=e}}function ZAt(e){return function(){var t=e(this);this.textContent=t??""}}function eIt(e){return this.tween("text",typeof e=="function"?ZAt(oX(this,"text",e)):JAt(e==null?"":e+""))}function tIt(e){return function(t){this.textContent=e.call(this,t)}}function nIt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&tIt(i)),t}return r._value=e,r}function rIt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,nIt(e))}function iIt(){for(var e=this._name,t=this._id,n=Q$e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Uf(u,t);Z4(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Qp(r,this._parents,e,n)}function sIt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Sh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var oIt=0;function Qp(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Q$e(){return++oIt}var Vh=OI.prototype;Qp.prototype={constructor:Qp,select:BAt,selectAll:UAt,selectChild:Vh.selectChild,selectChildren:Vh.selectChildren,filter:RAt,merge:NAt,selection:VAt,transition:iIt,call:Vh.call,nodes:Vh.nodes,node:Vh.node,size:Vh.size,empty:Vh.empty,each:Vh.each,on:LAt,attr:yAt,attrTween:EAt,style:YAt,styleTween:QAt,text:eIt,textTween:rIt,remove:jAt,tween:cAt,delay:TAt,duration:IAt,ease:PAt,easeVarying:$At,end:sIt,[Symbol.iterator]:Vh[Symbol.iterator]};const aIt=e=>+e;function uIt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var lIt={time:null,delay:0,duration:250,ease:uIt};function cIt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function fIt(e){var t,n;e instanceof Qp?(t=e._id,e=e._name):(t=Q$e(),(n=lIt).time=J4(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&Z4(u,e,t,l,o,n||cIt(u,t));return new Qp(r,this._parents,e,t)}OI.prototype.interrupt=aAt;OI.prototype.transition=fIt;const JB=e=>()=>e;function dIt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function hIt(e){e.stopImmediatePropagation()}function ZB(e){e.preventDefault(),e.stopImmediatePropagation()}var Xhe={name:"drag"},e9={name:"space"},X_={name:"handle"},Q_={name:"center"};const{abs:Qhe,max:Yo,min:Ko}=Math;function Jhe(e){return[+e[0],+e[1]]}function DV(e){return[Jhe(e[0]),Jhe(e[1])]}var U$={name:"x",handles:["w","e"].map(ZC),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},z$={name:"y",handles:["n","s"].map(ZC),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},pIt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(ZC),input:function(e){return e==null?null:DV(e)},output:function(e){return e}},Hh={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Zhe={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},epe={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mIt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},gIt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ZC(e){return{type:e}}function yIt(e){return!e.ctrlKey&&!e.button}function vIt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function _It(){return navigator.maxTouchPoints||"ontouchstart"in this}function t9(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function bIt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function wIt(){return aX(U$)}function EIt(){return aX(z$)}function SIt(){return aX(pIt)}function aX(e){var t=vIt,n=yIt,r=_It,i=!0,s=W4("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([ZC("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Hh.overlay).merge(y).each(function(){var _=t9(this).extent;vs(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([ZC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Hh.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Hh[_.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(_){c(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){c(this,arguments).end(_)}).tween("brush",function(){var _=this,w=_.__brush,x=c(_,arguments),E=w.selection,b=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),T=Tm(E,b);function A(C){w.selection=C===1&&b===null?null:T(C),l.call(_),x.brush()}return E!==null&&b!==null?A:A(1)}):g.each(function(){var _=this,w=arguments,x=_.__brush,E=e.input(typeof y=="function"?y.apply(_,w):y,x.extent),b=c(_,w).beforestart();NV(_),x.selection=E===null?null:E,l.call(_),b.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=vs(this),y=t9(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var _=g.__brush.emitter;return _&&(!v||!_.clean)?_:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var _=vs(this.that).datum();s.call(g,this.that,new dIt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),_)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,_=(i&&g.metaKey?v="overlay":v)==="selection"?Xhe:i&&g.altKey?Q_:X_,w=e===z$?null:mIt[v],x=e===U$?null:gIt[v],E=t9(y),b=E.extent,T=E.selection,A=b[0][0],C,P,N=b[0][1],$,M,B=b[1][0],z,W,U=b[1][1],Y,q,D=0,L=0,G,V=w&&x&&i&&g.shiftKey,H,te,le=Array.from(g.touches||[g],De=>{const qe=De.identifier;return De=TV(De,y),De.point0=De.slice(),De.identifier=qe,De});NV(y);var me=c(y,arguments,!0).beforestart();if(v==="overlay"){T&&(G=!0);const De=[le[0],le[1]||le[0]];E.selection=T=[[C=e===z$?A:Ko(De[0][0],De[1][0]),$=e===U$?N:Ko(De[0][1],De[1][1])],[z=e===z$?B:Yo(De[0][0],De[1][0]),Y=e===U$?U:Yo(De[0][1],De[1][1])]],le.length>1&&He(g)}else C=T[0][0],$=T[0][1],z=T[1][0],Y=T[1][1];P=C,M=$,W=z,q=Y;var ye=vs(y).attr("pointer-events","none"),de=ye.selectAll(".overlay").attr("cursor",Hh[v]);if(g.touches)me.moved=he,me.ended=Me;else{var we=vs(g.view).on("mousemove.brush",he,!0).on("mouseup.brush",Me,!0);i&&we.on("keydown.brush",Ke,!0).on("keyup.brush",je,!0),pCt(g.view)}l.call(y),me.start(g,_.name);function he(De){for(const qe of De.changedTouches||[De])for(const Qt of le)Qt.identifier===qe.identifier&&(Qt.cur=TV(qe,y));if(V&&!H&&!te&&le.length===1){const qe=le[0];Qhe(qe.cur[0]-qe[0])>Qhe(qe.cur[1]-qe[1])?te=!0:H=!0}for(const qe of le)qe.cur&&(qe[0]=qe.cur[0],qe[1]=qe.cur[1]);G=!0,ZB(De),He(De)}function He(De){const qe=le[0],Qt=qe.point0;var rt;switch(D=qe[0]-Qt[0],L=qe[1]-Qt[1],_){case e9:case Xhe:{w&&(D=Yo(A-C,Ko(B-z,D)),P=C+D,W=z+D),x&&(L=Yo(N-$,Ko(U-Y,L)),M=$+L,q=Y+L);break}case X_:{le[1]?(w&&(P=Yo(A,Ko(B,le[0][0])),W=Yo(A,Ko(B,le[1][0])),w=1),x&&(M=Yo(N,Ko(U,le[0][1])),q=Yo(N,Ko(U,le[1][1])),x=1)):(w<0?(D=Yo(A-C,Ko(B-C,D)),P=C+D,W=z):w>0&&(D=Yo(A-z,Ko(B-z,D)),P=C,W=z+D),x<0?(L=Yo(N-$,Ko(U-$,L)),M=$+L,q=Y):x>0&&(L=Yo(N-Y,Ko(U-Y,L)),M=$,q=Y+L));break}case Q_:{w&&(P=Yo(A,Ko(B,C-D*w)),W=Yo(A,Ko(B,z+D*w))),x&&(M=Yo(N,Ko(U,$-L*x)),q=Yo(N,Ko(U,Y+L*x)));break}}W<P&&(w*=-1,rt=C,C=z,z=rt,rt=P,P=W,W=rt,v in Zhe&&de.attr("cursor",Hh[v=Zhe[v]])),q<M&&(x*=-1,rt=$,$=Y,Y=rt,rt=M,M=q,q=rt,v in epe&&de.attr("cursor",Hh[v=epe[v]])),E.selection&&(T=E.selection),H&&(P=T[0][0],W=T[1][0]),te&&(M=T[0][1],q=T[1][1]),(T[0][0]!==P||T[0][1]!==M||T[1][0]!==W||T[1][1]!==q)&&(E.selection=[[P,M],[W,q]],l.call(y),me.brush(De,_.name))}function Me(De){if(hIt(De),De.touches){if(De.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else mCt(De.view,G),we.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ye.attr("pointer-events","all"),de.attr("cursor",Hh.overlay),E.selection&&(T=E.selection),bIt(T)&&(E.selection=null,l.call(y)),me.end(De,_.name)}function Ke(De){switch(De.keyCode){case 16:{V=w&&x;break}case 18:{_===X_&&(w&&(z=W-D*w,C=P+D*w),x&&(Y=q-L*x,$=M+L*x),_=Q_,He(De));break}case 32:{(_===X_||_===Q_)&&(w<0?z=W-D:w>0&&(C=P-D),x<0?Y=q-L:x>0&&($=M-L),_=e9,de.attr("cursor",Hh.selection),He(De));break}default:return}ZB(De)}function je(De){switch(De.keyCode){case 16:{V&&(H=te=V=!1,He(De));break}case 18:{_===Q_&&(w<0?z=W:w>0&&(C=P),x<0?Y=q:x>0&&($=M),_=X_,He(De));break}case 32:{_===e9&&(De.altKey?(w&&(z=W-D*w,C=P+D*w),x&&(Y=q-L*x,$=M+L*x),_=Q_):(w<0?z=W:w>0&&(C=P),x<0?Y=q:x>0&&($=M),_=X_),de.attr("cursor",Hh[v]),He(De));break}default:return}ZB(De)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=DV(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:JB(DV(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:JB(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:JB(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const MV=Math.PI,LV=2*MV,ev=1e-6,xIt=LV-ev;function J$e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function TIt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return J$e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let uX=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?J$e:TIt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>ev)if(!(Math.abs(f*u-l*c)>ev)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),_=s*Math.tan((MV-Math.acos((m+d-g)/(2*y*v)))/2),w=_/v,x=_/y;Math.abs(w-1)>ev&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+x*u},${this._y1=n+x*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>ev||Math.abs(this._y1-c)>ev)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%LV+LV),d>xIt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>ev&&this._append`A${r},${r},0,${+(d>=MV)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function eF(){return new uX}eF.prototype=uX.prototype;const Rp=11102230246251565e-32,Xo=134217729,CIt=(3+8*Rp)*Rp;function n9(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function AIt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function $I(e){return new Float64Array(e)}const IIt=(3+16*Rp)*Rp,OIt=(2+12*Rp)*Rp,PIt=(9+64*Rp)*Rp*Rp,J_=$I(4),tpe=$I(8),npe=$I(12),rpe=$I(16),Ia=$I(4);function kIt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,_,w,x,E,b,T;const A=e-i,C=n-i,P=t-s,N=r-s;w=A*N,d=Xo*A,h=d-(d-A),p=A-h,d=Xo*N,m=d-(d-N),g=N-m,x=p*g-(w-h*m-p*m-h*g),E=P*C,d=Xo*P,h=d-(d-P),p=P-h,d=Xo*C,m=d-(d-C),g=C-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,J_[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,J_[1]=_-(y+f)+(f-E),T=v+y,f=T-v,J_[2]=v-(T-f)+(y-f),J_[3]=T;let $=AIt(4,J_),M=OIt*o;if($>=M||-$>=M||(f=e-A,a=e-(A+f)+(f-i),f=n-C,l=n-(C+f)+(f-i),f=t-P,u=t-(P+f)+(f-s),f=r-N,c=r-(N+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(M=PIt*o+CIt*Math.abs($),$+=A*c+N*a-(P*l+C*u),$>=M||-$>=M))return $;w=a*N,d=Xo*a,h=d-(d-a),p=a-h,d=Xo*N,m=d-(d-N),g=N-m,x=p*g-(w-h*m-p*m-h*g),E=u*C,d=Xo*u,h=d-(d-u),p=u-h,d=Xo*C,m=d-(d-C),g=C-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,Ia[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,Ia[1]=_-(y+f)+(f-E),T=v+y,f=T-v,Ia[2]=v-(T-f)+(y-f),Ia[3]=T;const B=n9(4,J_,4,Ia,tpe);w=A*c,d=Xo*A,h=d-(d-A),p=A-h,d=Xo*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),E=P*l,d=Xo*P,h=d-(d-P),p=P-h,d=Xo*l,m=d-(d-l),g=l-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,Ia[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,Ia[1]=_-(y+f)+(f-E),T=v+y,f=T-v,Ia[2]=v-(T-f)+(y-f),Ia[3]=T;const z=n9(B,tpe,4,Ia,npe);w=a*c,d=Xo*a,h=d-(d-a),p=a-h,d=Xo*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),E=u*l,d=Xo*u,h=d-(d-u),p=u-h,d=Xo*l,m=d-(d-l),g=l-m,b=p*g-(E-h*m-p*m-h*g),y=x-b,f=x-y,Ia[0]=x-(y+f)+(f-b),v=w+y,f=v-w,_=w-(v-f)+(y-f),y=_-E,f=_-y,Ia[1]=_-(y+f)+(f-E),T=v+y,f=T-v,Ia[2]=v-(T-f)+(y-f),Ia[3]=T;const W=n9(z,npe,4,Ia,rpe);return rpe[W-1]}function sk(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a;if(o===0||a===0||o>0!=a>0)return u;const l=Math.abs(o+a);return Math.abs(u)>=IIt*l?u:-kIt(e,t,n,r,i,s,l)}const ipe=Math.pow(2,-52),ok=new Uint32Array(512);class k3{static from(t,n=MIt,r=LIt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new k3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const P=t[2*C],N=t[2*C+1];P<a&&(a=P),N<u&&(u=N),P>l&&(l=P),N>c&&(c=N),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h=1/0,p,m,g;for(let C=0;C<o;C++){const P=r9(f,d,t[2*C],t[2*C+1]);P<h&&(p=C,h=P)}const y=t[2*p],v=t[2*p+1];h=1/0;for(let C=0;C<o;C++){if(C===p)continue;const P=r9(y,v,t[2*C],t[2*C+1]);P<h&&P>0&&(m=C,h=P)}let _=t[2*m],w=t[2*m+1],x=1/0;for(let C=0;C<o;C++){if(C===p||C===m)continue;const P=NIt(y,v,_,w,t[2*C],t[2*C+1]);P<x&&(g=C,x=P)}let E=t[2*g],b=t[2*g+1];if(x===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Wb(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let P=0;for(let N=0,$=-1/0;N<o;N++){const M=this._ids[N];this._dists[M]>$&&(C[P++]=M,$=this._dists[M])}this.hull=C.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(sk(y,v,_,w,E,b)<0){const C=m,P=_,N=w;m=g,_=E,w=b,g=C,E=P,b=N}const T=DIt(y,v,_,w,E,b);this._cx=T.x,this._cy=T.y;for(let C=0;C<o;C++)this._dists[C]=r9(t[2*C],t[2*C+1],T.x,T.y);Wb(this._ids,this._dists,0,o-1),this._hullStart=p;let A=3;r[p]=n[g]=m,r[m]=n[p]=g,r[g]=n[m]=p,i[p]=0,i[m]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,v)]=p,s[this._hashKey(_,w)]=m,s[this._hashKey(E,b)]=g,this.trianglesLen=0,this._addTriangle(p,m,g,-1,-1,-1);for(let C=0,P,N;C<this._ids.length;C++){const $=this._ids[C],M=t[2*$],B=t[2*$+1];if(C>0&&Math.abs(M-P)<=ipe&&Math.abs(B-N)<=ipe||(P=M,N=B,$===p||$===m||$===g))continue;let z=0;for(let D=0,L=this._hashKey(M,B);D<this._hashSize&&(z=s[(L+D)%this._hashSize],!(z!==-1&&z!==r[z]));D++);z=n[z];let W=z,U;for(;U=r[W],sk(M,B,t[2*W],t[2*W+1],t[2*U],t[2*U+1])>=0;)if(W=U,W===z){W=-1;break}if(W===-1)continue;let Y=this._addTriangle(W,$,r[W],-1,-1,i[W]);i[$]=this._legalize(Y+2),i[W]=Y,A++;let q=r[W];for(;U=r[q],sk(M,B,t[2*q],t[2*q+1],t[2*U],t[2*U+1])<0;)Y=this._addTriangle(q,$,U,i[$],-1,i[q]),i[$]=this._legalize(Y+2),r[q]=q,A--,q=U;if(W===z)for(;U=n[W],sk(M,B,t[2*U],t[2*U+1],t[2*W],t[2*W+1])<0;)Y=this._addTriangle(U,$,W,-1,i[W],i[U]),this._legalize(Y+2),i[U]=Y,r[W]=W,A--,W=U;this._hullStart=n[$]=W,r[W]=n[q]=$,r[$]=q,s[this._hashKey(M,B)]=$,s[this._hashKey(t[2*W],t[2*W+1])]=W}this.hull=new Uint32Array(A);for(let C=0,P=this._hullStart;C<A;C++)this.hull[C]=P,P=r[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor($It(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=ok[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(RIt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===f){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<ok.length&&(ok[s++]=v)}else{if(s===0)break;t=ok[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function $It(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function r9(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function RIt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function NIt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function DIt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Wb(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;Bx(e,i,s),t[e[n]]>t[e[r]]&&Bx(e,n,r),t[e[s]]>t[e[r]]&&Bx(e,s,r),t[e[n]]>t[e[s]]&&Bx(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;Bx(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Wb(e,t,s,r),Wb(e,t,n,o-1)):(Wb(e,t,n,o-1),Wb(e,t,s,r))}}function Bx(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function MIt(e){return e[0]}function LIt(e){return e[1]}var spe={},i9={},s9=34,Ux=10,o9=13;function Z$e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function FIt(e,t){var n=Z$e(e);return function(r,i){return t(n(r),i,e)}}function ope(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function fu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function jIt(e){return e<0?"-"+fu(-e,6):e>9999?"+"+fu(e,6):fu(e,4)}function BIt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":jIt(e.getUTCFullYear())+"-"+fu(e.getUTCMonth()+1,2)+"-"+fu(e.getUTCDate(),2)+(i?"T"+fu(t,2)+":"+fu(n,2)+":"+fu(r,2)+"."+fu(i,3)+"Z":r?"T"+fu(t,2)+":"+fu(n,2)+":"+fu(r,2)+"Z":n||t?"T"+fu(t,2)+":"+fu(n,2)+"Z":"")}function eRe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?FIt(g,d):Z$e(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,_=!1;f.charCodeAt(p-1)===Ux&&--p,f.charCodeAt(p-1)===o9&&--p;function w(){if(v)return i9;if(_)return _=!1,spe;var E,b=m,T;if(f.charCodeAt(b)===s9){for(;m++<p&&f.charCodeAt(m)!==s9||f.charCodeAt(++m)===s9;);return(E=m)>=p?v=!0:(T=f.charCodeAt(m++))===Ux?_=!0:T===o9&&(_=!0,f.charCodeAt(m)===Ux&&++m),f.slice(b+1,E-1).replace(/""/g,'"')}for(;m<p;){if((T=f.charCodeAt(E=m++))===Ux)_=!0;else if(T===o9)_=!0,f.charCodeAt(m)===Ux&&++m;else if(T!==n)continue;return f.slice(b,E)}return v=!0,f.slice(b,p)}for(;(y=w())!==i9;){for(var x=[];y!==spe&&y!==i9;)x.push(y),y=w();d&&(x=d(x,g++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=ope(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=ope(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?BIt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var UIt=eRe(","),zIt=UIt.parse;function VIt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function HIt(e,t){return fetch(e,t).then(VIt)}function qIt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),HIt(t,n).then(function(i){return e(i,r)})}}var FV=qIt(zIt);function WIt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function GIt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return tRe(this.cover(t,n),t,n,e)}function tRe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function YIt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)tRe(this,o[n],a[n],e[n]);return this}function KIt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function XIt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function QIt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Fa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function JIt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Fa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Fa(h[3],g,y,u,l),new Fa(h[2],o,y,g,l),new Fa(h[1],g,a,u,y),new Fa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=v*v+_*_;if(w<n){var x=Math.sqrt(n=w);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function ZIt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function eOt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tOt(){return this._root}function nOt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function rOt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Fa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Fa(i,l,c,a,u)),(i=r[2])&&t.push(new Fa(i,s,c,l,u)),(i=r[1])&&t.push(new Fa(i,l,o,a,c)),(i=r[0])&&t.push(new Fa(i,s,o,l,c))}return this}function iOt(e){var t=[],n=[],r;for(this._root&&t.push(new Fa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Fa(s,o,a,c,f)),(s=i[1])&&t.push(new Fa(s,c,a,u,f)),(s=i[2])&&t.push(new Fa(s,o,f,c,l)),(s=i[3])&&t.push(new Fa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function sOt(e){return e[0]}function oOt(e){return arguments.length?(this._x=e,this):this._x}function aOt(e){return e[1]}function uOt(e){return arguments.length?(this._y=e,this):this._y}function lX(e,t,n){var r=new cX(t??sOt,n??aOt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function cX(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ape(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var iu=lX.prototype=cX.prototype;iu.copy=function(){var e=new cX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=ape(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=ape(r));return e};iu.add=GIt;iu.addAll=YIt;iu.cover=KIt;iu.data=XIt;iu.extent=QIt;iu.find=JIt;iu.remove=ZIt;iu.removeAll=eOt;iu.root=tOt;iu.size=nOt;iu.visit=rOt;iu.visitAfter=iOt;iu.x=oOt;iu.y=uOt;function ja(e){return function(){return e}}function Ag(e){return(e()-.5)*1e-6}function lOt(e){return e.x+e.vx}function cOt(e){return e.y+e.vy}function fOt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ja(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=lX(t,lOt,cOt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(_,w,x,E,b){var T=_.data,A=_.r,C=m+A;if(T){if(T.index>d.index){var P=h-T.x-T.vx,N=p-T.y-T.vy,$=P*P+N*N;$<C*C&&(P===0&&(P=Ag(r),$+=P*P),N===0&&(N=Ag(r),$+=N*N),$=(C-($=Math.sqrt($)))/$*i,d.vx+=(P*=$)*(C=(A*=A)/(g+A)),d.vy+=(N*=$)*C,T.vx-=P*(C=1-C),T.vy-=N*C)}return}return w>h+C||E<h-C||x>p+C||b<p-C}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ja(+l),u(),o):e},o}function dOt(e){return e.index}function upe(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function hOt(e){var t=dOt,n=f,r,i=ja(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var _=0,w,x,E,b,T,A,C;_<v;++_)w=e[_],x=w.source,E=w.target,b=E.x+E.vx-x.x-x.vx||Ag(l),T=E.y+E.vy-x.y-x.vy||Ag(l),A=Math.sqrt(b*b+T*T),A=(A-s[_])/A*g*r[_],b*=A,T*=A,E.vx-=b*(C=u[_]),E.vy-=T*C,x.vx+=b*(C=1-C),x.vy+=T*C}function h(){if(o){var g,y=o.length,v=e.length,_=new Map(o.map((x,E)=>[t(x,E,o),x])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=upe(_,w.source)),typeof w.target!="object"&&(w.target=upe(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ja(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ja(+g),m(),d):i},d}const pOt=1664525,mOt=1013904223,lpe=4294967296;function gOt(){let e=1;return()=>(e=(pOt*e+mOt)%lpe)/lpe}function yOt(e){return e.x}function vOt(e){return e.y}var _Ot=10,bOt=Math.PI*(3-Math.sqrt(5));function wOt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=iX(f),l=W4("tick","end"),c=gOt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=_Ot*Math.sqrt(.5+m),_=m*bOt;y.x=v*Math.cos(_),y.y=v*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,_=e.length,w,x,E,b,T;for(y==null?y=1/0:y*=y,v=0;v<_;++v)b=e[v],w=m-b.x,x=g-b.y,E=w*w+x*x,E<y&&(T=b,y=E);return T},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function EOt(){var e,t,n,r,i=ja(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=lX(e,yOt,vOt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,_,w;if(h.length){for(v=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,_+=g*m.y);h.x=v/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,_=g-p,w=y*y+v*v;if(_*_/u<w)return w<a&&(y===0&&(y=Ag(n),w+=y*y),v===0&&(v=Ag(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Ag(n),w+=y*y),v===0&&(v=Ag(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=v*_);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ja(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function SOt(e){var t=ja(.1),n,r,i;typeof e!="function"&&(e=ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ja(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ja(+a),o(),s):e},s}function xOt(e){var t=ja(.1),n,r,i;typeof e!="function"&&(e=ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ja(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ja(+a),o(),s):e},s}function TOt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function $3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function sE(e){return e=$3(Math.abs(e)),e?e[1]:NaN}function COt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function AOt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var IOt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function T1(e){if(!(t=IOt.exec(e)))throw new Error("invalid format: "+e);var t;return new fX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}T1.prototype=fX.prototype;function fX(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}fX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function OOt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var nRe;function POt(e,t){var n=$3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(nRe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+$3(e,Math.max(0,t+s-1))[0]}function cpe(e,t){var n=$3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const fpe={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:TOt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>cpe(e*100,t),r:cpe,s:POt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dpe(e){return e}var hpe=Array.prototype.map,ppe=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function rRe(e){var t=e.grouping===void 0||e.thousands===void 0?dpe:COt(hpe.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?dpe:AOt(hpe.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=T1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,_=f.precision,w=f.trim,x=f.type;x==="n"?(v=!0,x="g"):fpe[x]||(_===void 0&&(_=12),w=!0,x="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var E=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",b=m==="$"?r:/[%p]/.test(x)?o:"",T=fpe[x],A=/[defgprs%]/.test(x);_=_===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function C(P){var N=E,$=b,M,B,z;if(x==="c")$=T(P)+$,P="";else{P=+P;var W=P<0||1/P<0;if(P=isNaN(P)?u:T(Math.abs(P),_),w&&(P=OOt(P)),W&&+P==0&&p!=="+"&&(W=!1),N=(W?p==="("?p:a:p==="-"||p==="("?"":p)+N,$=(x==="s"?ppe[8+nRe/3]:"")+$+(W&&p==="("?")":""),A){for(M=-1,B=P.length;++M<B;)if(z=P.charCodeAt(M),48>z||z>57){$=(z===46?i+P.slice(M+1):P.slice(M))+$,P=P.slice(0,M);break}}}v&&!g&&(P=t(P,1/0));var U=N.length+P.length+$.length,Y=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(P=t(Y+P,Y.length?y-$.length:1/0),Y=""),h){case"<":P=N+P+$+Y;break;case"=":P=N+Y+P+$;break;case"^":P=Y.slice(0,U=Y.length>>1)+N+P+$+Y.slice(U);break;default:P=Y+N+P+$;break}return s(P)}return C.toString=function(){return f+""},C}function c(f,d){var h=l((f=T1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(sE(d)/3)))*3,m=Math.pow(10,-p),g=ppe[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var ak,ES,dX;kOt({thousands:",",grouping:[3],currency:["$",""]});function kOt(e){return ak=rRe(e),ES=ak.format,dX=ak.formatPrefix,ak}function iRe(e){return Math.max(0,-sE(Math.abs(e)))}function sRe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sE(t)/3)))*3-sE(Math.abs(e)))}function oRe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sE(t)-sE(e))+1}function $Ot(e,t){return e.parent===t.parent?1:2}function ROt(e){return e.reduce(NOt,0)/e.length}function NOt(e,t){return e+t.x}function DOt(e){return 1+e.reduce(MOt,0)}function MOt(e,t){return Math.max(e,t.y)}function LOt(e){for(var t;t=e.children;)e=t[0];return e}function FOt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function jOt(){var e=$Ot,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=ROt(h),d.y=DOt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=LOt(s),l=FOt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function BOt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function UOt(){return this.eachAfter(BOt)}function zOt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function VOt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function HOt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function qOt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function WOt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function GOt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function YOt(e){for(var t=this,n=KOt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function KOt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function XOt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function QOt(){return Array.from(this)}function JOt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function ZOt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*ePt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function tF(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=rPt)):t===void 0&&(t=nPt);for(var n=new oE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new oE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(aRe)}function tPt(){return tF(this).eachBefore(iPt)}function nPt(e){return e.children}function rPt(e){return Array.isArray(e)?e[1]:null}function iPt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function aRe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function oE(e){this.data=e,this.depth=this.height=0,this.parent=null}oE.prototype=tF.prototype={constructor:oE,count:UOt,each:zOt,eachAfter:HOt,eachBefore:VOt,find:qOt,sum:WOt,sort:GOt,path:YOt,ancestors:XOt,descendants:QOt,leaves:JOt,links:ZOt,copy:tPt,[Symbol.iterator]:ePt};function V$(e){return e==null?null:uRe(e)}function uRe(e){if(typeof e!="function")throw new Error;return e}function pv(){return 0}function yb(e){return function(){return e}}const sPt=1664525,oPt=1013904223,mpe=4294967296;function aPt(){let e=1;return()=>(e=(sPt*e+oPt)%mpe)/mpe}function uPt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function lPt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function cPt(e,t){for(var n=0,r=(e=lPt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&lRe(o,s)?++n:(o=dPt(i=fPt(i,s)),n=0);return o}function fPt(e,t){var n,r;if(a9(t,e))return[t];for(n=0;n<e.length;++n)if(uk(t,e[n])&&a9(DT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(uk(DT(e[n],e[r]),t)&&uk(DT(e[n],t),e[r])&&uk(DT(e[r],t),e[n])&&a9(cRe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function uk(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function lRe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function a9(e,t){for(var n=0;n<t.length;++n)if(!lRe(e,t[n]))return!1;return!0}function dPt(e){switch(e.length){case 1:return hPt(e[0]);case 2:return DT(e[0],e[1]);case 3:return cRe(e[0],e[1],e[2])}}function hPt(e){return{x:e.x,y:e.y,r:e.r}}function DT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function cRe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,_=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,x=h*p-d*m,E=(p*w-m*_)/(x*2)-r,b=(m*g-p*y)/x,T=(h*_-d*w)/(x*2)-i,A=(d*y-h*g)/x,C=b*b+A*A-1,P=2*(s+E*b+T*A),N=E*E+T*T-s*s,$=-(Math.abs(C)>1e-6?(P+Math.sqrt(P*P-4*C*N))/(2*C):N/P);return{x:r+E+b*$,y:i+T+A*$,r:$}}function gpe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ype(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function vpe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function lk(e){this._=e,this.next=null,this.previous=null}function pPt(e,t){if(!(s=(e=uPt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;gpe(r,n,i=e[2]),n=new lk(n),r=new lk(r),i=new lk(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){gpe(n._,r._,i=e[u]),i=new lk(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(ype(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(ype(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=vpe(n);(i=i.next)!==r;)(a=vpe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=cPt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function mPt(e){return Math.sqrt(e.value)}function fRe(){var e=null,t=1,n=1,r=pv;function i(s){const o=aPt();return s.x=t/2,s.y=n/2,e?s.eachBefore(_pe(e)).eachAfter(u9(r,.5,o)).eachBefore(bpe(1)):s.eachBefore(_pe(mPt)).eachAfter(u9(pv,1,o)).eachAfter(u9(r,s.r/Math.min(t,n),o)).eachBefore(bpe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=V$(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:yb(+s),i):r},i}function _pe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function u9(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=pPt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function bpe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function dRe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function RI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function gPt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(dRe),o}function s(o,a){return function(u){u.children&&RI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var yPt={depth:-1},wpe={},l9={};function vPt(e){return e.id}function _Pt(e){return e.parentId}function Epe(){var e=vPt,t=_Pt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,x)=>bPt(n(w,x,i))),v=y.map(Spe),_=new Set(y).add("");for(const w of v)_.has(w)||(_.add(w),y.push(w),v.push(Spe(w)),s.push(l9));o=(w,x)=>y[x],a=(w,x)=>v[x]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new oE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?wpe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===wpe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===l9&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===l9);--y)h.data=null}if(f.parent=yPt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(aRe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=V$(i),r):e},r.parentId=function(i){return arguments.length?(t=V$(i),r):t},r.path=function(i){return arguments.length?(n=V$(i),r):n},r}function bPt(e){e=`${e}`;let t=e.length;return jV(e,t-1)&&!jV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Spe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!jV(e,t););return e.slice(0,t)}function jV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function wPt(e,t){return e.parent===t.parent?1:2}function c9(e){var t=e.children;return t?t[0]:e.t}function f9(e){var t=e.children;return t?t[t.length-1]:e.t}function EPt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function SPt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function xPt(e,t,n){return e.a.parent===t.parent?e.a:n}function H$(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}H$.prototype=Object.create(oE.prototype);function TPt(e){for(var t=new H$(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new H$(s[o],o)),i.parent=n;return(t.parent=new H$(null,0)).children=[t],t}function CPt(){var e=wPt,t=1,n=1,r=null;function i(l){var c=TPt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){SPt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,_=m.m,w;p=f9(p),d=c9(d),p&&d;)m=c9(m),h=f9(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(EPt(xPt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,_+=m.m,y+=h.m;p&&!f9(h)&&(h.t=p,h.m+=v-y),d&&!c9(m)&&(m.t=d,m.m+=g-_,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function nF(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var hRe=(1+Math.sqrt(5))/2;function pRe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,_,w,x,E;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,x=Math.max(p/h,h/p)/(m*e),E=g*g*x,w=Math.max(v/E,E/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),E=g*g*x,_=Math.max(v/E,E/y),_>w){g-=l;break}w=_}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?RI(u,n,r,i,m?r+=p*g/m:s):nF(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const mRe=function e(t){function n(r,i,s,o,a){pRe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(hRe);function APt(){var e=mRe,t=!1,n=1,r=1,i=[0],s=pv,o=pv,a=pv,u=pv,l=pv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(dRe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=uRe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:yb(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:yb(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:yb(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:yb(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:yb(+d),c):l},c}function IPt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var _=l[f],w=h/2+_,x=f+1,E=d-1;x<E;){var b=x+E>>>1;l[b]<w?x=b+1:E=b}w-l[x-1]<l[x]-w&&f+1<x&&--x;var T=l[x]-_,A=h-T;if(g-p>y-m){var C=h?(p*A+g*T)/h:g;c(f,x,T,p,m,C,y),c(x,d,A,C,m,g,y)}else{var P=h?(m*A+y*T)/h:y;c(f,x,T,p,m,g,P),c(x,d,A,p,P,g,y)}}}function OPt(e,t,n,r,i){(e.depth&1?nF:RI)(e,t,n,r,i)}const PPt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?RI(l,i,s,o,m?s+=(a-s)*l.value/m:a):nF(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=pRe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(hRe);function L2(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kPt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function gRe(e){let t,n,r;e.length!==2?(t=L2,n=(a,u)=>L2(e(a),u),r=(a,u)=>e(a)-u):(t=e===L2||e===kPt?e:$Pt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function $Pt(){return 0}function yRe(e){return e===null?NaN:+e}const RPt=gRe(L2),NPt=RPt.right;gRe(yRe).center;const rF=NPt,DPt=Math.sqrt(50),MPt=Math.sqrt(10),LPt=Math.sqrt(2);function R3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=DPt?10:s>=MPt?5:s>=LPt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?R3(e,t,n*2):[a,u,l]}function BV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?R3(t,e,n):R3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function UV(e,t,n){return t=+t,e=+e,n=+n,R3(e,t,n)[2]}function FPt(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?UV(t,e,n):UV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function jPt(e,t,n=yRe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function BPt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function zf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ay(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const zV=Symbol("implicit");function SS(){var e=new Phe,t=[],n=[],r=zV;function i(s){let o=e.get(s);if(o===void 0){if(r!==zV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Phe;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return SS(t,n).unknown(r)},zf.apply(i,arguments),i}function NI(){var e=SS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=BPt(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return NI(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},zf.apply(f(),arguments)}function UPt(e){return function(){return e}}function VV(e){return+e}var xpe=[0,1];function Iu(e){return e}function HV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:UPt(isNaN(t)?NaN:.5)}function zPt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function VPt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=HV(i,r),s=n(o,s)):(r=HV(r,i),s=n(s,o)),function(a){return s(r(a))}}function HPt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=HV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=rF(e,a,1,r)-1;return s[u](i[u](a))}}function DI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function iF(){var e=xpe,t=xpe,n=Tm,r,i,s,o=Iu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Iu&&(o=zPt(e[0],e[d-1])),a=d>2?HPt:VPt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Ql)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,VV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=kI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Iu,c()):o!==Iu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function vRe(){return iF()(Iu,Iu)}function _Re(e,t,n,r){var i=FPt(e,t,n),s;switch(r=T1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=sRe(i,o))&&(r.precision=s),dX(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=oRe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=iRe(i))&&(r.precision=s-(r.type==="%")*2);break}}return ES(r)}function p_(e){var t=e.domain;return e.ticks=function(n){var r=t();return BV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return _Re(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=UV(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Jp(){var e=vRe();return e.copy=function(){return DI(e,Jp())},zf.apply(e,arguments),p_(e)}function bRe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,VV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return bRe(e).unknown(t)},e=arguments.length?Array.from(e,VV):[0,1],p_(n)}function wRe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Tpe(e){return Math.log(e)}function Cpe(e){return Math.exp(e)}function qPt(e){return-Math.log(-e)}function WPt(e){return-Math.exp(-e)}function GPt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function YPt(e){return e===10?GPt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function KPt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Ape(e){return(t,n)=>-e(-t,n)}function hX(e){const t=e(Tpe,Cpe),n=t.domain;let r=10,i,s;function o(){return i=KPt(r),s=YPt(r),n()[0]<0?(i=Ape(i),s=Ape(s),e(qPt,WPt)):e(Tpe,Cpe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=BV(l,c,g))}else y=BV(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=T1(u)).precision==null&&(u.trim=!0),u=ES(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(wRe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function ERe(){const e=hX(iF()).domain([1,10]);return e.copy=()=>DI(e,ERe()).base(e.base()),zf.apply(e,arguments),e}function Ipe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ope(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pX(e){var t=1,n=e(Ipe(t),Ope(t));return n.constant=function(r){return arguments.length?e(Ipe(t=+r),Ope(t)):t},p_(n)}function SRe(){var e=pX(iF());return e.copy=function(){return DI(e,SRe()).constant(e.constant())},zf.apply(e,arguments)}function Ppe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XPt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function QPt(e){return e<0?-e*e:e*e}function mX(e){var t=e(Iu,Iu),n=1;function r(){return n===1?e(Iu,Iu):n===.5?e(XPt,QPt):e(Ppe(n),Ppe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},p_(t)}function gX(){var e=mX(iF());return e.copy=function(){return DI(e,gX()).exponent(e.exponent())},zf.apply(e,arguments),e}function JPt(){return gX.apply(null,arguments).exponent(.5)}function xRe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=jPt(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[rF(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(L2),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return xRe().domain(e).range(t).unknown(r)},zf.apply(s,arguments)}function TRe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[rF(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return TRe().domain([e,t]).range(i).unknown(s)},zf.apply(p_(o),arguments)}function CRe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[rF(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return CRe().domain(e).range(t).unknown(n)},zf.apply(i,arguments)}const d9=new Date,h9=new Date;function qs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>qs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(d9.setTime(+s),h9.setTime(+o),e(d9),e(h9),Math.floor(n(d9,h9))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const aE=qs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);aE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):aE);aE.range;const bp=1e3,nc=bp*60,wp=nc*60,Zp=wp*24,yX=Zp*7,kpe=Zp*30,p9=Zp*365,Ep=qs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bp)},(e,t)=>(t-e)/bp,e=>e.getUTCSeconds());Ep.range;const sF=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bp)},(e,t)=>{e.setTime(+e+t*nc)},(e,t)=>(t-e)/nc,e=>e.getMinutes());sF.range;const oF=qs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*nc)},(e,t)=>(t-e)/nc,e=>e.getUTCMinutes());oF.range;const aF=qs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bp-e.getMinutes()*nc)},(e,t)=>{e.setTime(+e+t*wp)},(e,t)=>(t-e)/wp,e=>e.getHours());aF.range;const uF=qs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*wp)},(e,t)=>(t-e)/wp,e=>e.getUTCHours());uF.range;const Np=qs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nc)/Zp,e=>e.getDate()-1);Np.range;const Zg=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zp,e=>e.getUTCDate()-1);Zg.range;const ARe=qs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Zp,e=>Math.floor(e/Zp));ARe.range;function m_(e){return qs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*nc)/yX)}const xS=m_(0),N3=m_(1),ZPt=m_(2),ekt=m_(3),uE=m_(4),tkt=m_(5),nkt=m_(6);xS.range;N3.range;ZPt.range;ekt.range;uE.range;tkt.range;nkt.range;function g_(e){return qs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/yX)}const TS=g_(0),D3=g_(1),rkt=g_(2),ikt=g_(3),lE=g_(4),skt=g_(5),okt=g_(6);TS.range;D3.range;rkt.range;ikt.range;lE.range;skt.range;okt.range;const eA=qs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());eA.range;const tA=qs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());tA.range;const rh=qs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());rh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});rh.range;const ih=qs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ih.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ih.range;function m9(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function akt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ukt(e){let t,n,r;e.length!==2?(t=m9,n=(a,u)=>m9(e(a),u),r=(a,u)=>e(a)-u):(t=e===m9||e===akt?e:lkt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function lkt(){return 0}const ckt=Math.sqrt(50),fkt=Math.sqrt(10),dkt=Math.sqrt(2);function IRe(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=ckt?10:s>=fkt?5:s>=dkt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?IRe(e,t,n*2):[a,u,l]}function $pe(e,t,n){return t=+t,e=+e,n=+n,IRe(e,t,n)[2]}function Rpe(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?$pe(t,e,n):$pe(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ORe(e,t,n,r,i,s){const o=[[Ep,1,bp],[Ep,5,5*bp],[Ep,15,15*bp],[Ep,30,30*bp],[s,1,nc],[s,5,5*nc],[s,15,15*nc],[s,30,30*nc],[i,1,wp],[i,3,3*wp],[i,6,6*wp],[i,12,12*wp],[r,1,Zp],[r,2,2*Zp],[n,1,yX],[t,1,kpe],[t,3,3*kpe],[e,1,p9]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=ukt(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Rpe(l/p9,c/p9,f));if(h===0)return aE.every(Math.max(Rpe(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[hkt,pkt]=ORe(ih,tA,TS,ARe,uF,oF),[mkt,gkt]=ORe(rh,eA,xS,Np,aF,sF);function g9(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function y9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zx(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function PRe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=Vx(i),c=Hx(i),f=Vx(s),d=Hx(s),h=Vx(o),p=Hx(o),m=Vx(a),g=Hx(a),y=Vx(u),v=Hx(u),_={a:W,A:U,b:Y,B:q,c:null,d:jpe,e:jpe,f:jkt,g:Kkt,G:Qkt,H:Mkt,I:Lkt,j:Fkt,L:kRe,m:Bkt,M:Ukt,p:D,q:L,Q:zpe,s:Vpe,S:zkt,u:Vkt,U:Hkt,V:qkt,w:Wkt,W:Gkt,x:null,X:null,y:Ykt,Y:Xkt,Z:Jkt,"%":Upe},w={a:G,A:V,b:H,B:te,c:null,d:Bpe,e:Bpe,f:n$t,g:d$t,G:p$t,H:Zkt,I:e$t,j:t$t,L:RRe,m:r$t,M:i$t,p:le,q:me,Q:zpe,s:Vpe,S:s$t,u:o$t,U:a$t,V:u$t,w:l$t,W:c$t,x:null,X:null,y:f$t,Y:h$t,Z:m$t,"%":Upe},x={a:C,A:P,b:N,B:$,c:M,d:Lpe,e:Lpe,f:$kt,g:Mpe,G:Dpe,H:Fpe,I:Fpe,j:Ikt,L:kkt,m:Akt,M:Okt,p:A,q:Ckt,Q:Nkt,s:Dkt,S:Pkt,u:wkt,U:Ekt,V:Skt,w:bkt,W:xkt,x:B,X:z,y:Mpe,Y:Dpe,Z:Tkt,"%":Rkt};_.x=E(n,_),_.X=E(r,_),_.c=E(t,_),w.x=E(n,w),w.X=E(r,w),w.c=E(t,w);function E(ye,de){return function(we){var he=[],He=-1,Me=0,Ke=ye.length,je,De,qe;for(we instanceof Date||(we=new Date(+we));++He<Ke;)ye.charCodeAt(He)===37&&(he.push(ye.slice(Me,He)),(De=Npe[je=ye.charAt(++He)])!=null?je=ye.charAt(++He):De=je==="e"?" ":"0",(qe=de[je])&&(je=qe(we,De)),he.push(je),Me=He+1);return he.push(ye.slice(Me,He)),he.join("")}}function b(ye,de){return function(we){var he=zx(1900,void 0,1),He=T(he,ye,we+="",0),Me,Ke;if(He!=we.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(de&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(Me=y9(zx(he.y,0,1)),Ke=Me.getUTCDay(),Me=Ke>4||Ke===0?D3.ceil(Me):D3(Me),Me=Zg.offset(Me,(he.V-1)*7),he.y=Me.getUTCFullYear(),he.m=Me.getUTCMonth(),he.d=Me.getUTCDate()+(he.w+6)%7):(Me=g9(zx(he.y,0,1)),Ke=Me.getDay(),Me=Ke>4||Ke===0?N3.ceil(Me):N3(Me),Me=Np.offset(Me,(he.V-1)*7),he.y=Me.getFullYear(),he.m=Me.getMonth(),he.d=Me.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),Ke="Z"in he?y9(zx(he.y,0,1)).getUTCDay():g9(zx(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(Ke+5)%7:he.w+he.U*7-(Ke+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,y9(he)):g9(he)}}function T(ye,de,we,he){for(var He=0,Me=de.length,Ke=we.length,je,De;He<Me;){if(he>=Ke)return-1;if(je=de.charCodeAt(He++),je===37){if(je=de.charAt(He++),De=x[je in Npe?de.charAt(He++):je],!De||(he=De(ye,we,he))<0)return-1}else if(je!=we.charCodeAt(he++))return-1}return he}function A(ye,de,we){var he=l.exec(de.slice(we));return he?(ye.p=c.get(he[0].toLowerCase()),we+he[0].length):-1}function C(ye,de,we){var he=h.exec(de.slice(we));return he?(ye.w=p.get(he[0].toLowerCase()),we+he[0].length):-1}function P(ye,de,we){var he=f.exec(de.slice(we));return he?(ye.w=d.get(he[0].toLowerCase()),we+he[0].length):-1}function N(ye,de,we){var he=y.exec(de.slice(we));return he?(ye.m=v.get(he[0].toLowerCase()),we+he[0].length):-1}function $(ye,de,we){var he=m.exec(de.slice(we));return he?(ye.m=g.get(he[0].toLowerCase()),we+he[0].length):-1}function M(ye,de,we){return T(ye,t,de,we)}function B(ye,de,we){return T(ye,n,de,we)}function z(ye,de,we){return T(ye,r,de,we)}function W(ye){return o[ye.getDay()]}function U(ye){return s[ye.getDay()]}function Y(ye){return u[ye.getMonth()]}function q(ye){return a[ye.getMonth()]}function D(ye){return i[+(ye.getHours()>=12)]}function L(ye){return 1+~~(ye.getMonth()/3)}function G(ye){return o[ye.getUTCDay()]}function V(ye){return s[ye.getUTCDay()]}function H(ye){return u[ye.getUTCMonth()]}function te(ye){return a[ye.getUTCMonth()]}function le(ye){return i[+(ye.getUTCHours()>=12)]}function me(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var de=E(ye+="",_);return de.toString=function(){return ye},de},parse:function(ye){var de=b(ye+="",!1);return de.toString=function(){return ye},de},utcFormat:function(ye){var de=E(ye+="",w);return de.toString=function(){return ye},de},utcParse:function(ye){var de=b(ye+="",!0);return de.toString=function(){return ye},de}}}var Npe={"-":"",_:" ",0:"0"},po=/^\s*\d+/,ykt=/^%/,vkt=/[\\^$*+?|[\]().{}]/g;function wr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function _kt(e){return e.replace(vkt,"\\$&")}function Vx(e){return new RegExp("^(?:"+e.map(_kt).join("|")+")","i")}function Hx(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function bkt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function wkt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Ekt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Skt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function xkt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Dpe(e,t,n){var r=po.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Mpe(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Tkt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ckt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Akt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Lpe(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ikt(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Fpe(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Okt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Pkt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function kkt(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $kt(e,t,n){var r=po.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Rkt(e,t,n){var r=ykt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Nkt(e,t,n){var r=po.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Dkt(e,t,n){var r=po.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function jpe(e,t){return wr(e.getDate(),t,2)}function Mkt(e,t){return wr(e.getHours(),t,2)}function Lkt(e,t){return wr(e.getHours()%12||12,t,2)}function Fkt(e,t){return wr(1+Np.count(rh(e),e),t,3)}function kRe(e,t){return wr(e.getMilliseconds(),t,3)}function jkt(e,t){return kRe(e,t)+"000"}function Bkt(e,t){return wr(e.getMonth()+1,t,2)}function Ukt(e,t){return wr(e.getMinutes(),t,2)}function zkt(e,t){return wr(e.getSeconds(),t,2)}function Vkt(e){var t=e.getDay();return t===0?7:t}function Hkt(e,t){return wr(xS.count(rh(e)-1,e),t,2)}function $Re(e){var t=e.getDay();return t>=4||t===0?uE(e):uE.ceil(e)}function qkt(e,t){return e=$Re(e),wr(uE.count(rh(e),e)+(rh(e).getDay()===4),t,2)}function Wkt(e){return e.getDay()}function Gkt(e,t){return wr(N3.count(rh(e)-1,e),t,2)}function Ykt(e,t){return wr(e.getFullYear()%100,t,2)}function Kkt(e,t){return e=$Re(e),wr(e.getFullYear()%100,t,2)}function Xkt(e,t){return wr(e.getFullYear()%1e4,t,4)}function Qkt(e,t){var n=e.getDay();return e=n>=4||n===0?uE(e):uE.ceil(e),wr(e.getFullYear()%1e4,t,4)}function Jkt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wr(t/60|0,"0",2)+wr(t%60,"0",2)}function Bpe(e,t){return wr(e.getUTCDate(),t,2)}function Zkt(e,t){return wr(e.getUTCHours(),t,2)}function e$t(e,t){return wr(e.getUTCHours()%12||12,t,2)}function t$t(e,t){return wr(1+Zg.count(ih(e),e),t,3)}function RRe(e,t){return wr(e.getUTCMilliseconds(),t,3)}function n$t(e,t){return RRe(e,t)+"000"}function r$t(e,t){return wr(e.getUTCMonth()+1,t,2)}function i$t(e,t){return wr(e.getUTCMinutes(),t,2)}function s$t(e,t){return wr(e.getUTCSeconds(),t,2)}function o$t(e){var t=e.getUTCDay();return t===0?7:t}function a$t(e,t){return wr(TS.count(ih(e)-1,e),t,2)}function NRe(e){var t=e.getUTCDay();return t>=4||t===0?lE(e):lE.ceil(e)}function u$t(e,t){return e=NRe(e),wr(lE.count(ih(e),e)+(ih(e).getUTCDay()===4),t,2)}function l$t(e){return e.getUTCDay()}function c$t(e,t){return wr(D3.count(ih(e)-1,e),t,2)}function f$t(e,t){return wr(e.getUTCFullYear()%100,t,2)}function d$t(e,t){return e=NRe(e),wr(e.getUTCFullYear()%100,t,2)}function h$t(e,t){return wr(e.getUTCFullYear()%1e4,t,4)}function p$t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?lE(e):lE.ceil(e),wr(e.getUTCFullYear()%1e4,t,4)}function m$t(){return"+0000"}function Upe(){return"%"}function zpe(e){return+e}function Vpe(e){return Math.floor(+e/1e3)}var Z_,vX,DRe,lF,MRe;g$t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function g$t(e){return Z_=PRe(e),vX=Z_.format,DRe=Z_.parse,lF=Z_.utcFormat,MRe=Z_.utcParse,Z_}function y$t(e){return new Date(e)}function v$t(e){return e instanceof Date?+e:+new Date(+e)}function _X(e,t,n,r,i,s,o,a,u,l){var c=vRe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),_=l("%B"),w=l("%Y");function x(E){return(u(E)<E?h:a(E)<E?p:o(E)<E?m:s(E)<E?g:r(E)<E?i(E)<E?y:v:n(E)<E?_:w)(E)}return c.invert=function(E){return new Date(f(E))},c.domain=function(E){return arguments.length?d(Array.from(E,v$t)):d().map(y$t)},c.ticks=function(E){var b=d();return e(b[0],b[b.length-1],E??10)},c.tickFormat=function(E,b){return b==null?x:l(b)},c.nice=function(E){var b=d();return(!E||typeof E.range!="function")&&(E=t(b[0],b[b.length-1],E??10)),E?d(wRe(b,E)):c},c.copy=function(){return DI(c,_X(e,t,n,r,i,s,o,a,u,l))},c}function LRe(){return zf.apply(_X(mkt,gkt,rh,eA,xS,Np,aF,sF,Ep,vX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _$t(){return zf.apply(_X(hkt,pkt,ih,tA,TS,Zg,uF,oF,Ep,lF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function cF(){var e=0,t=1,n,r,i,s,o=Iu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Tm),l.rangeRound=c(kI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function uy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function bX(){var e=p_(cF()(Iu));return e.copy=function(){return uy(e,bX())},ay.apply(e,arguments)}function FRe(){var e=hX(cF()).domain([1,10]);return e.copy=function(){return uy(e,FRe()).base(e.base())},ay.apply(e,arguments)}function jRe(){var e=pX(cF());return e.copy=function(){return uy(e,jRe()).constant(e.constant())},ay.apply(e,arguments)}function wX(){var e=mX(cF());return e.copy=function(){return uy(e,wX()).exponent(e.exponent())},ay.apply(e,arguments)}function b$t(){return wX.apply(null,arguments).exponent(.5)}function fF(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Iu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,_;return arguments.length?([y,v,_]=g,l=rX(m,[y,v,_]),h):[l(0),l(.5),l(1)]}}return h.range=p(Tm),h.rangeRound=p(kI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function BRe(){var e=p_(fF()(Iu));return e.copy=function(){return uy(e,BRe())},ay.apply(e,arguments)}function URe(){var e=hX(fF()).domain([.1,1,10]);return e.copy=function(){return uy(e,URe()).base(e.base())},ay.apply(e,arguments)}function zRe(){var e=pX(fF());return e.copy=function(){return uy(e,zRe()).constant(e.constant())},ay.apply(e,arguments)}function EX(){var e=mX(fF());return e.copy=function(){return uy(e,EX()).exponent(e.exponent())},ay.apply(e,arguments)}function w$t(){return EX.apply(null,arguments).exponent(.5)}function E$t(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const VRe=E$t("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function An(e){return function(){return e}}const Hpe=Math.abs,Qo=Math.atan2,Fy=Math.cos,S$t=Math.max,v9=Math.min,Zf=Math.sin,Pv=Math.sqrt,ta=1e-12,cE=Math.PI,M3=cE/2,F2=2*cE;function x$t(e){return e>1?0:e<-1?cE:Math.acos(e)}function qpe(e){return e>=1?M3:e<=-1?-M3:Math.asin(e)}function dF(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new uX(t)}function T$t(e){return e.innerRadius}function C$t(e){return e.outerRadius}function A$t(e){return e.startAngle}function I$t(e){return e.endAngle}function O$t(e){return e&&e.padAngle}function P$t(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ta))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function ck(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Pv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,_=m-h,w=v*v+_*_,x=i-s,E=d*m-p*h,b=(_<0?-1:1)*Pv(S$t(0,x*x*w-E*E)),T=(E*_-v*b)/w,A=(-E*v-_*b)/w,C=(E*_+v*b)/w,P=(-E*v+_*b)/w,N=T-g,$=A-y,M=C-g,B=P-y;return N*N+$*$>M*M+B*B&&(T=C,A=P),{cx:T,cy:A,x01:-c,y01:-f,x11:T*(i/x-1),y11:A*(i/x-1)}}function qV(){var e=T$t,t=C$t,n=An(0),r=null,i=A$t,s=I$t,o=O$t,a=null,u=dF(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-M3,m=s.apply(this,arguments)-M3,g=Hpe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ta))a.moveTo(0,0);else if(g>F2-ta)a.moveTo(h*Fy(p),h*Zf(p)),a.arc(0,0,h,p,m,!y),d>ta&&(a.moveTo(d*Fy(m),d*Zf(m)),a.arc(0,0,d,m,p,y));else{var v=p,_=m,w=p,x=m,E=g,b=g,T=o.apply(this,arguments)/2,A=T>ta&&(r?+r.apply(this,arguments):Pv(d*d+h*h)),C=v9(Hpe(h-d)/2,+n.apply(this,arguments)),P=C,N=C,$,M;if(A>ta){var B=qpe(A/d*Zf(T)),z=qpe(A/h*Zf(T));(E-=B*2)>ta?(B*=y?1:-1,w+=B,x-=B):(E=0,w=x=(p+m)/2),(b-=z*2)>ta?(z*=y?1:-1,v+=z,_-=z):(b=0,v=_=(p+m)/2)}var W=h*Fy(v),U=h*Zf(v),Y=d*Fy(x),q=d*Zf(x);if(C>ta){var D=h*Fy(_),L=h*Zf(_),G=d*Fy(w),V=d*Zf(w),H;if(g<cE)if(H=P$t(W,U,G,V,D,L,Y,q)){var te=W-H[0],le=U-H[1],me=D-H[0],ye=L-H[1],de=1/Zf(x$t((te*me+le*ye)/(Pv(te*te+le*le)*Pv(me*me+ye*ye)))/2),we=Pv(H[0]*H[0]+H[1]*H[1]);P=v9(C,(d-we)/(de-1)),N=v9(C,(h-we)/(de+1))}else P=N=0}b>ta?N>ta?($=ck(G,V,W,U,h,N,y),M=ck(D,L,Y,q,h,N,y),a.moveTo($.cx+$.x01,$.cy+$.y01),N<C?a.arc($.cx,$.cy,N,Qo($.y01,$.x01),Qo(M.y01,M.x01),!y):(a.arc($.cx,$.cy,N,Qo($.y01,$.x01),Qo($.y11,$.x11),!y),a.arc(0,0,h,Qo($.cy+$.y11,$.cx+$.x11),Qo(M.cy+M.y11,M.cx+M.x11),!y),a.arc(M.cx,M.cy,N,Qo(M.y11,M.x11),Qo(M.y01,M.x01),!y))):(a.moveTo(W,U),a.arc(0,0,h,v,_,!y)):a.moveTo(W,U),!(d>ta)||!(E>ta)?a.lineTo(Y,q):P>ta?($=ck(Y,q,D,L,d,-P,y),M=ck(W,U,G,V,d,-P,y),a.lineTo($.cx+$.x01,$.cy+$.y01),P<C?a.arc($.cx,$.cy,P,Qo($.y01,$.x01),Qo(M.y01,M.x01),!y):(a.arc($.cx,$.cy,P,Qo($.y01,$.x01),Qo($.y11,$.x11),!y),a.arc(0,0,d,Qo($.cy+$.y11,$.cx+$.x11),Qo(M.cy+M.y11,M.cx+M.x11),y),a.arc(M.cx,M.cy,P,Qo(M.y11,M.x11),Qo(M.y01,M.x01),!y))):a.arc(0,0,d,x,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-cE/2;return[Fy(f)*c,Zf(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:An(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:An(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:An(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:An(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:An(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:An(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:An(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function hF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HRe(e){this._context=e}HRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function SX(e){return new HRe(e)}function qRe(e){return e[0]}function WRe(e){return e[1]}function GRe(e,t){var n=An(!0),r=null,i=SX,s=null,o=dF(a);e=typeof e=="function"?e:e===void 0?qRe:An(e),t=typeof t=="function"?t:t===void 0?WRe:An(t);function a(u){var l,c=(u=hF(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:An(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:An(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:An(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function YRe(e,t,n){var r=null,i=An(!0),s=null,o=SX,a=null,u=dF(l);e=typeof e=="function"?e:e===void 0?qRe:An(+e),t=typeof t=="function"?t:An(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?WRe:An(+n);function l(f){var d,h,p,m=(f=hF(f)).length,g,y=!1,v,_=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):_[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return GRe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:An(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:An(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:An(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:An(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:An(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:An(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:An(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function k$t(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function $$t(e){return e}function R$t(){var e=$$t,t=k$t,n=null,r=An(0),i=An(F2),s=An(0);function o(a){var u,l=(a=hF(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(F2,Math.max(-F2,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),_=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(x,E){return t(p[x],p[E])}):n!=null&&h.sort(function(x,E){return n(a[x],a[E])}),u=0,f=d?(g-l*_)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+_,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:An(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:An(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:An(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:An(+a),o):s},o}const N$t={draw(e,t){const n=Pv(t/cE);e.moveTo(n,0),e.arc(0,0,n,0,F2)}};function D$t(e,t){let n=null,r=dF(i);e=typeof e=="function"?e:An(e||N$t),t=typeof t=="function"?t:An(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:An(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:An(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function S0(){}function L3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function pF(e){this._context=e}pF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:L3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:L3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function M$t(e){return new pF(e)}function KRe(e){this._context=e}KRe.prototype={areaStart:S0,areaEnd:S0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:L3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function L$t(e){return new KRe(e)}function XRe(e){this._context=e}XRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:L3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function F$t(e){return new XRe(e)}function QRe(e,t){this._basis=new pF(e),this._beta=t}QRe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const j$t=function e(t){function n(r){return t===1?new pF(r):new QRe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function F3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function xX(e,t){this._context=e,this._k=(1-t)/6}xX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:F3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:F3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const B$t=function e(t){function n(r){return new xX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function TX(e,t){this._context=e,this._k=(1-t)/6}TX.prototype={areaStart:S0,areaEnd:S0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:F3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const U$t=function e(t){function n(r){return new TX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function CX(e,t){this._context=e,this._k=(1-t)/6}CX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:F3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const z$t=function e(t){function n(r){return new CX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function AX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ta){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ta){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function JRe(e,t){this._context=e,this._alpha=t}JRe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:AX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const V$t=function e(t){function n(r){return t?new JRe(r,t):new xX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function ZRe(e,t){this._context=e,this._alpha=t}ZRe.prototype={areaStart:S0,areaEnd:S0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:AX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const H$t=function e(t){function n(r){return t?new ZRe(r,t):new TX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function eNe(e,t){this._context=e,this._alpha=t}eNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:AX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const q$t=function e(t){function n(r){return t?new eNe(r,t):new CX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function tNe(e){this._context=e}tNe.prototype={areaStart:S0,areaEnd:S0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function W$t(e){return new tNe(e)}function Wpe(e){return e<0?-1:1}function Gpe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Wpe(s)+Wpe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ype(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function _9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function j3(e){this._context=e}j3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_9(this,this._t0,Ype(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_9(this,Ype(this,n=Gpe(this,e,t)),n);break;default:_9(this,this._t0,n=Gpe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function nNe(e){this._context=new rNe(e)}(nNe.prototype=Object.create(j3.prototype)).point=function(e,t){j3.prototype.point.call(this,t,e)};function rNe(e){this._context=e}rNe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function G$t(e){return new j3(e)}function Y$t(e){return new nNe(e)}function iNe(e){this._context=e}iNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Kpe(e),i=Kpe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Kpe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function K$t(e){return new iNe(e)}function mF(e,t){this._context=e,this._t=t}mF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function X$t(e){return new mF(e,.5)}function Q$t(e){return new mF(e,0)}function J$t(e){return new mF(e,1)}function Xpe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Qpe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Z$t(e,t){return e[t]}function eRt(e){const t=[];return t.key=e,t}function tRt(){var e=An([]),t=Qpe,n=Xpe,r=Z$t;function i(s){var o=Array.from(e.apply(this,arguments),eRt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=hF(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:An(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:An(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Qpe:typeof s=="function"?s:An(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Xpe,i):n},i}function MT(e,t,n){this.k=e,this.x=t,this.y=n}MT.prototype={constructor:MT,scale:function(e){return e===1?this:new MT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new MT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};MT.prototype;function IX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?lF("%B"):ES(".2s"))(c),[s]);return k.jsxs(k.Fragment,{children:[k.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:k.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:k.jsx(_1,{children:k.jsx(Wa,{spacing:3,children:k.jsx(ze,{size:a?10:14,style:{color:"#878E95"},children:r})})})})}),k.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?k.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>k.jsxs("g",{transform:`translate(${f}, ${n})`,children:[k.jsx("line",{y2:"6",stroke:"currentColor"}),o?k.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,k.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:k.jsx(_1,{children:k.jsx(of,{withinPortal:!0,label:c,children:k.jsx(ze,{px:2,size:10,style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const nRt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:IX},Symbol.toStringTag,{value:"Module"}));function sNe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return k.jsxs(k.Fragment,{children:[k.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:k.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:k.jsx(_1,{children:k.jsx(Wa,{spacing:3,children:k.jsx(ze,{size:o?10:14,style:{color:"#878E95"},children:r})})})})}),k.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?k.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>k.jsxs("g",{transform:`translate(${n}, ${l})`,children:[k.jsx("line",{x2:"-6",stroke:"currentColor"}),s?k.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,k.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:k.jsx("foreignObject",{width:a,height:20,children:k.jsx(Wa,{style:{width:"100%",height:"100%"},position:"right",children:k.jsx(ze,{sx:{textOverflow:"ellipsis",overflow:"hidden"},size:10,children:u})})})},u)]},u))]})}const rRt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:sNe},Symbol.toStringTag,{value:"Module"})),jl={top:15,left:100,right:50,bottom:50};function WV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Wv(),o=I.useMemo(()=>s-jl.left-jl.right,[s]),a=I.useMemo(()=>i-jl.top-jl.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return SS(VRe).domain(d)},[n,t.category]),l=I.useMemo(()=>e?Jp([jl.left,o+jl.left]).domain([0,kTt(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?NI([jl.top,a+jl.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:k.jsxs("g",{children:[k.jsx("rect",{x:jl.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-jl.left},h),k.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?k.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[k.jsx(IX,{xScale:l,yRange:c.range(),vertPosition:a+jl.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?k.jsx(sNe,{yScale:c,horizontalPosition:jl.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):k.jsx(o_,{})}const iRt=Object.freeze(Object.defineProperty({__proto__:null,Bar:WV,default:WV},Symbol.toStringTag,{value:"Module"})),vr=Array.isArray;function Fu(e){return e!=null?vr(e)?e:[e]:[]}function sRt(e=0,t=1/0){return`${Jpe(e)} < row_number() && row_number() <= ${Jpe(t)}`}function Jpe(e){return e<0?`count() + ${e}`:e}class oNe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(sRt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Fu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function In(e){throw Error(e)}function Ka(e){return typeof e=="number"}function wi(e){return typeof e=="function"}function gF(e,t){const n=Array(e);if(wi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let oRt=class extends oNe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){In("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){In("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){In("Not implemented")}getter(t){In("Not implemented")}objects(t){In("Not implemented")}object(t){In("Not implemented")}[Symbol.iterator](){In("Not implemented")}print(t={}){Ka(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=gF(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},aRt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},uRt=function(e){return e&&wi(e.get)?e:new aRt(e)};function em(e){return e instanceof Date}function _a(e){return e===Object(e)}function B3(e){return e instanceof RegExp}function Bo(e){return typeof e=="string"}function lRt(e,t){const n=r=>In(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Zpe(e.entries(),t):em(e)?n("Date"):B3(e)?n("RegExp"):Bo(e)?n():vr(e)?cRt(e,t):wi(e[Symbol.iterator])?fRt(e,t):_a(e)?Zpe(Object.entries(e),t):n()}function Zpe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function cRt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function fRt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:dRt}=Object.prototype;function Of(e,t){return dRt.call(e,t)}function Ml(e){return e?new eme({...e.data()},e.columnNames()):new eme}class eme{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Of(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const fr=void 0,hRt=Object.getPrototypeOf(Int8Array);function MI(e){return e instanceof hRt}function kv(e){return vr(e)||MI(e)}function hf(e){return e!=null&&e===e}const qx=e=>kv(e)||Bo(e),pRt={compact:e=>kv(e)?e.filter(t=>hf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>qx(e)?e.includes(t,n):!1,indexof:(e,t)=>qx(e)?e.indexOf(t):-1,join:(e,t)=>kv(e)?e.join(t):fr,lastindexof:(e,t)=>qx(e)?e.lastIndexOf(t):-1,length:e=>qx(e)?e.length:0,pluck:(e,t)=>kv(e)?e.map(n=>hf(n)?n[t]:fr):fr,reverse:e=>kv(e)?e.slice().reverse():Bo(e)?e.split("").reverse().join(""):fr,slice:(e,t,n)=>qx(e)?e.slice(t,n):fr};function mRt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function q$(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const ed=e=>(e<10?"0":"")+e,gRt=e=>e<0?"-"+q$(-e,6):e>9999?"+"+q$(e,6):q$(e,4);function aNe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return gRt(e)+"-"+ed(t+1)+"-"+ed(n)+(!u||o?"T"+ed(r)+":"+ed(i)+":"+ed(s)+"."+q$(o,3)+l:s?"T"+ed(r)+":"+ed(i)+":"+ed(s)+l:i||r||!a?"T"+ed(r)+":"+ed(i)+l:"")}function uNe(e,t){return isNaN(e)?"Invalid Date":aNe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function yF(e,t){return isNaN(e)?"Invalid Date":aNe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const yRt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function vRt(e){return e.match(yRt)}function _Rt(e,t=Date.parse){return vRt(e)?t(e):e}const lNe=6e4,cNe=864e5,fNe=6048e5,Yi=new Date,Ki=new Date,is=e=>(Yi.setTime(typeof e=="string"?_Rt(e):e),Yi);function bRt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function wRt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function ERt(e){Ki.setTime(+e),Ki.setHours(0,0,0,0),Yi.setTime(+Ki),Yi.setMonth(0),Yi.setDate(1);const t=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*lNe;return Math.floor(1+(Ki-Yi-t)/cNe)}function SRt(e){Ki.setTime(+e),Ki.setUTCHours(0,0,0,0);const t=Date.UTC(Ki.getUTCFullYear(),0,1);return Math.floor(1+(Ki-t)/cNe)}function xRt(e,t){const n=t||0;Ki.setTime(+e),Ki.setDate(Ki.getDate()-(Ki.getDay()+7-n)%7),Ki.setHours(0,0,0,0),Yi.setTime(+e),Yi.setMonth(0),Yi.setDate(1),Yi.setDate(1-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0);const r=(Ki.getTimezoneOffset()-Yi.getTimezoneOffset())*lNe;return Math.floor((1+(Ki-Yi)-r)/fNe)}function TRt(e,t){const n=t||0;return Ki.setTime(+e),Ki.setUTCDate(Ki.getUTCDate()-(Ki.getUTCDay()+7-n)%7),Ki.setUTCHours(0,0,0,0),Yi.setTime(+e),Yi.setUTCMonth(0),Yi.setUTCDate(1),Yi.setUTCDate(1-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Math.floor((1+(Ki-Yi))/fNe)}const CRt={format_date:(e,t)=>uNe(is(e),!t),format_utcdate:(e,t)=>yF(is(e),!t),timestamp:e=>+is(e),year:e=>is(e).getFullYear(),quarter:e=>Math.floor(is(e).getMonth()/3),month:e=>is(e).getMonth(),date:e=>is(e).getDate(),dayofweek:e=>is(e).getDay(),hours:e=>is(e).getHours(),minutes:e=>is(e).getMinutes(),seconds:e=>is(e).getSeconds(),milliseconds:e=>is(e).getMilliseconds(),utcyear:e=>is(e).getUTCFullYear(),utcquarter:e=>Math.floor(is(e).getUTCMonth()/3),utcmonth:e=>is(e).getUTCMonth(),utcdate:e=>is(e).getUTCDate(),utcdayofweek:e=>is(e).getUTCDay(),utchours:e=>is(e).getUTCHours(),utcminutes:e=>is(e).getUTCMinutes(),utcseconds:e=>is(e).getUTCSeconds(),utcmilliseconds:e=>is(e).getUTCMilliseconds(),datetime:bRt,dayofyear:ERt,week:xRt,utcdatetime:wRt,utcdayofyear:SRt,utcweek:TRt,now:Date.now};function OX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:em(e)||em(t)?+e==+t:B3(e)&&B3(t)?e+""==t+"":_a(e)&&_a(t)?ARt(e,t):!1}function ARt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return tme(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!tme(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!OX(e[o],t[o]))return!1}return!0}function tme(e,t,n=OX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const IRt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let ORt=Math.random;function CS(){return ORt()}const PRt={random:CS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function PX(e){return e instanceof Map}function kRt(e){return e instanceof Set}function W$(e){return PX(e)||kRt(e)}function b9(e){return Array.from(e)}const $Rt={has:(e,t)=>W$(e)?e.has(t):e!=null?Of(e,t):!1,keys:e=>PX(e)?b9(e.keys()):e!=null?Object.keys(e):[],values:e=>W$(e)?b9(e.values()):e!=null?Object.values(e):[],entries:e=>W$(e)?b9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):fr};function RRt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Of(t,e))return t[e];return n!==void 0?n:e}function NRt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const DRt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Gb={bin:mRt,equal:OX,recode:RRt,sequence:NRt,...pRt,...CRt,...IRt,...PRt,...$Rt,...DRt};function nA(e){return typeof e=="bigint"}function sh(e){return e===void 0?e+"":nA(e)?e+"n":JSON.stringify(e)}function wn(e,t=[],n=[]){return new MRt(e,Fu(t),Fu(n))}let MRt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${sh(n)}]`),...this.params.map(sh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const dNe=e=>wn("any",e),hNe=()=>wn("count"),pNe=e=>wn("array_agg",e),mNe=e=>wn("array_agg_distinct",e),gNe=(e,t)=>wn("map_agg",[e,t]),yNe=(e,t)=>wn("object_agg",[e,t]),vNe=(e,t)=>wn("entries_agg",[e,t]);({...Gb});function LRt(e,t){e=W$(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function FRt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function jRt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function BRt(e,t,n,r){const i=r==="map"||r===!0?gNe:r==="entries"?vNe:r==="object"?yNe:In('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=LRt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:pNe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const URt="ArrayPattern",zRt="ArrowFunctionExpression",VRt="FunctionExpression",e0="Identifier",AS="Literal",_Ne="MemberExpression",HRt="ObjectExpression",bNe="ObjectPattern",wNe="Property",LI="Column",qRt="Constant",WRt="Dictionary",GRt="Function",YRt="Parameter",ENe="Op",ai=(e,t)=>{const n=KRt[e.type];return n?n(e,t):In(`Unsupported expression construct: ${e.type}`)},w9=(e,t)=>"("+ai(e.left,t)+" "+e.operator+" "+ai(e.right,t)+")",E9=(e,t)=>"("+ld(e.params,t)+")=>"+ai(e.body,t),nme=(e,t)=>ai(e.callee,t)+"("+ld(e.arguments,t)+")",ld=(e,t,n=",")=>e.map(r=>ai(r,t)).join(n),SNe=e=>e.computed?`[${sh(e.name)}]`:`.${e.name}`,rme=(e,t,n)=>{const r=e.table||"";return`data${r}${SNe(e)}.${n}(${t.index}${r})`},KRt={Constant:e=>e.raw,Column:(e,t)=>rme(e,t,"get"),Dictionary:(e,t)=>rme(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${SNe(e)}`,Op:(e,t)=>`op(${sh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ai(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ai(e.object,t),i=ai(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:nme,NewExpression:(e,t)=>"new "+nme(e,t),ArrayExpression:(e,t)=>"["+ld(e.elements,t)+"]",AssignmentExpression:w9,BinaryExpression:w9,LogicalExpression:w9,UnaryExpression:(e,t)=>"("+e.operator+ai(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ai(e.test,t)+"?"+ai(e.consequent,t)+":"+ai(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+ld(e.properties,t)+"})",Property:(e,t)=>{const n=ai(e.key,t);return(e.computed?`[${n}]`:n)+":"+ai(e.value,t)},ArrowFunctionExpression:E9,FunctionExpression:E9,FunctionDeclaration:E9,ArrayPattern:(e,t)=>"["+ld(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+ld(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+ld(e.declarations,t,","),VariableDeclarator:(e,t)=>ai(e.id,t)+"="+ai(e.init,t),SpreadElement:(e,t)=>"..."+ai(e.argument,t),BlockStatement:(e,t)=>"{"+ld(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ai(e.expression,t),IfStatement:(e,t)=>"if ("+ai(e.test,t)+")"+ai(e.consequent,t)+(e.alternate?" else "+ai(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ai(e.discriminant,t)+") {"+ld(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ai(e.test,t):"default")+": "+ld(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ai(e.argument,t),Program:(e,t)=>ai(e.body[0],t)};function U3(e,t={index:"row"}){return ai(e,t)}function XRt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function fE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:em(e)?+e:vr(e)||MI(e)?`[${e.map(fE)}]`:B3(e)?e+"":QRt(e)}function QRt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${fE(e[r])}`;return t+="}",t}function z3(e,t){const n=e.length;return n===1?(r,i)=>fE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=fE(a)}return s}}function JRt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=fE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=fE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function rp(){}function ZRt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Os(e){return e.init=e.init||rp,e.add=e.add||rp,e.rem=e.rem||rp,e}function ime(e,t){return e.product_v=!1,e.product=t}const xNe={count:{create:()=>Os({value:e=>e.count}),param:[]},array_agg:{create:()=>Os({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Os({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Os({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Os({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Os({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:fr}),param:[1]},valid:{create:()=>Os({value:e=>e.valid}),param:[1]},invalid:{create:()=>Os({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=JRt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Os({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Os({value:e=>{let t=fr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:fr,add:(e,t)=>nA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>ime(e,1),value:e=>e.valid?e.product_v?ime(e,ZRt(e.list.values())):e.product:void 0,add:(e,t)=>nA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:fr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Os({value:e=>e.valid?e.mean:fr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):fr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Os({value:e=>e.valid>1?e.dev/e.valid:fr}),param:[1],req:["variance"]},stdev:{create:()=>Os({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):fr}),param:[1],req:["variance"]},stdevp:{create:()=>Os({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):fr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=fr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===fr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=fr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===fr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Os({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Os({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):fr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Os({value:e=>e.valid>1?e.cov/e.valid:fr}),param:[2],req:["covariance"]},corr:{create:()=>Os({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):fr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Os({value:i=>XRt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},sme={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},ome={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},TNe={row_number:{create(){return{init:rp,value:e=>e.index+1}},param:[]},rank:sme,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=sme.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:ome,ntile:{create(e){e=+e,e>0||In("ntile num must be greater than zero.");const{init:t,value:n}=ome.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=fr){return e=+e||1,{init:rp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=fr){return e=+e||1,{init:rp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:rp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:rp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||In("nth_value nth must be greater than zero."),{init:rp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):fr}}},param:[1,1]},fill_down:{create(e=fr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return hf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=fr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=eNt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function eNt(e,t,n){for(const r=e.size;n<r;++n)if(hf(e.value(n,t)))return n;return-1}function kX(e){return Of(xNe,e)}function $X(e){return Of(TNe,e)}function CNe(e){return Of(Gb,e)||e==="row_object"}function ANe(e){return kX(e)&&xNe[e]}function INe(e){return $X(e)&&TNe[e]}function Wx(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const RX={escape:(e,t,n)=>Wx(e,t,n),expr:(e,t)=>Wx(`(row,data,op)=>${e}`,Gb,t),expr2:(e,t)=>Wx(`(row0,data0,row,data)=>${e}`,Gb,t),join:(e,t)=>Wx(`(row1,data1,row2,data2)=>${e}`,Gb,t),param:(e,t)=>Wx(e,Gb,t)},tNt={"==":1,"!=":1,"===":1,"!==":1};function ONe(e,t,n=0,r,i){if(e.type=LI,e.name=t,e.table=n,i&&r&&wi(r.keyFor)){const s=tNt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===AS&&nNt(i,e,s,r.keyFor(s.value))}return e}function nNt(e,t,n,r){return r<0?(e.type=AS,e.value=!1,e.raw="false"):(t.type=WRt,n.value=r,n.raw=r+""),!0}function vF(e){return vr(e)?e:PX(e)?e.entries():e?Object.entries(e):[]}const PNe="row_object";function kNe(e,t){e.type=HRt;const n=e.properties=[];for(const r of vF(t)){const[i,s]=vr(r)?r:[r,r];n.push({type:wNe,key:{type:AS,raw:sh(s)},value:ONe({computed:!0},i)})}return e}function $Ne(e){return U3(kNe({},e))}function RNe(e){return RX.expr($Ne(e))}function IS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function up(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function ame(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jn(e){return this instanceof Jn?(this.v=e,this):new Jn(e)}function $v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(d){r[d]&&(i[d]=function(h){return new Promise(function(p,m){s.push([d,h,p,m])>1||a(d,h)})})}function a(d,h){try{u(r[d](h))}catch(p){f(s[0][3],p)}}function u(d){d.value instanceof Jn?Promise.resolve(d.value.v).then(l,c):f(s[0][2],d)}function l(d){a("next",d)}function c(d){a("throw",d)}function f(d,h){d(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function S9(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Jn(e[i](o)),done:!1}:s?s(o):o}:s}}function j2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof ame=="function"?ame(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}const rNt=new TextDecoder("utf-8"),GV=e=>rNt.decode(e),iNt=new TextEncoder,NX=e=>iNt.encode(e),[ZAn,NNe]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[y_,eIn]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[v_,tIn]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),sNt=e=>typeof e=="boolean",mu=e=>typeof e=="function",ly=e=>e!=null&&Object(e)===e,_F=e=>ly(e)&&mu(e.then),DX=e=>ly(e)&&mu(e[Symbol.iterator]),bF=e=>ly(e)&&mu(e[Symbol.asyncIterator]),oNt=e=>ly(e)&&"done"in e&&"value"in e,DNe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,aNt=e=>ly(e)&&mu(e.abort)&&mu(e.getWriter)&&!DNe(e),uNt=e=>ly(e)&&mu(e.end)&&mu(e.write)&&sNt(e.writable)&&!DNe(e),lNt=e=>ly(e)&&mu(e.clear)&&mu(e.bytes)&&mu(e.position)&&mu(e.setPosition)&&mu(e.capacity)&&mu(e.getBufferIdentifier)&&mu(e.createLong),MX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function cNt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function V3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function oh(e,t){const n=cNt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?V3(o,s,a):o=s;break}V3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function So(e,t){let n=oNt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=NX(n)),n instanceof ArrayBuffer?new e(n):n instanceof MX?new e(n):lNt(n)?So(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const Gx=e=>So(Int32Array,e),Mr=e=>So(Uint8Array,e),YV=e=>(e.next(),e);function*fNt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof MX?n(t):DX(t)?t:n(t);return yield*YV(function*(i){let s=null;do s=i.next(yield So(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const dNt=e=>fNt(Uint8Array,e);function MNe(e,t){return $v(this,arguments,function*(){if(_F(t))return yield Jn(yield Jn(yield*S9(j2(MNe(e,yield Jn(t))))));const r=function(o){return $v(this,arguments,function*(){yield yield Jn(yield Jn(o))})},i=function(o){return $v(this,arguments,function*(){yield Jn(yield*S9(j2(YV(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof MX?r(t):DX(t)?i(t):bF(t)?t:r(t);return yield Jn(yield*S9(j2(YV(function(o){return $v(this,arguments,function*(){let a=null;do a=yield Jn(o.next(yield yield Jn(So(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Jn(new e)})}const hNt=e=>MNe(Uint8Array,e);function LX(e,t,n){if(e!==0){n=n.slice(0,t+1);for(let r=-1;++r<=t;)n[r]+=e}return n}function pNt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const ume={fromIterable(e){return fk(mNt(e))},fromAsyncIterable(e){return fk(gNt(e))},fromDOMStream(e){return fk(yNt(e))},fromNodeStream(e){return fk(_Nt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},fk=e=>(e.next(),e);function*mNt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?oh(r,o)[0]:([i,r,a]=oh(r,o),i)}({cmd:s,size:o}=yield null);const l=dNt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function gNt(e){return $v(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?oh(i,a)[0]:([s,i,u]=oh(i,a),s)}({cmd:o,size:a}=yield yield Jn(null));const c=hNt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Jn(c.next()):yield Jn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Jn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Jn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Jn(c.return(new Uint8Array(0))))}return yield Jn(null)})}function yNt(e){return $v(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?oh(i,a)[0]:([s,i,u]=oh(i,a),s)}({cmd:o,size:a}=yield yield Jn(null));const c=new vNt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Jn(c.read()):yield Jn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Mr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Jn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Jn(c.cancel(f)))}finally{r===!1?yield Jn(c.cancel()):e.locked&&c.releaseLock()}return yield Jn(null)})}class vNt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return up(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return up(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Mr(n)),n})}}const x9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function _Nt(e){return $v(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?oh(l,a)[0]:([c,l,u]=oh(l,a),c)}if({cmd:o,size:a}=yield yield Jn(null),e.isTTY)return yield yield Jn(new Uint8Array(0)),yield Jn(null);try{n[0]=x9(e,"end"),n[1]=x9(e,"error");do{if(n[2]=x9(e,"readable"),[r,s]=yield Jn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Mr(e.read(a-u)),c.byteLength<a-u&&(c=Mr(e.read()))):c=Mr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Jn(f()));while(a<u)}while(!i)}finally{yield Jn(d(n,r==="error"?s:null))}return yield Jn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var ll;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ll||(ll={}));var hc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(hc||(hc={}));var Ro;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ro||(Ro={}));var ah;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ah||(ah={}));var Zn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Zn||(Zn={}));var uh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(uh||(uh={}));var Zs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Zs||(Zs={}));var ae;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"})(ae||(ae={}));var Jh;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Jh||(Jh={}));const bNt=void 0;function t0(e){if(e===null)return"null";if(e===bNt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof y_||e instanceof v_?`[${[...e].map(t=>t0(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const wNt=Symbol.for("isArrowBigNum");function Vf(e,...t){return t.length===0?Object.setPrototypeOf(So(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Vf.prototype[wNt]=!0;Vf.prototype.toJSON=function(){return`"${Zv(this)}"`};Vf.prototype.valueOf=function(){return LNe(this)};Vf.prototype.toString=function(){return Zv(this)};Vf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return LNe(this);case"string":return Zv(this);case"default":return KV(this)}return Zv(this)};function ww(...e){return Vf.apply(this,e)}function Ew(...e){return Vf.apply(this,e)}function rA(...e){return Vf.apply(this,e)}Object.setPrototypeOf(ww.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Ew.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(rA.prototype,Object.create(Uint32Array.prototype));Object.assign(ww.prototype,Vf.prototype,{constructor:ww,signed:!0,TypedArray:Int32Array,BigIntArray:y_});Object.assign(Ew.prototype,Vf.prototype,{constructor:Ew,signed:!1,TypedArray:Uint32Array,BigIntArray:v_});Object.assign(rA.prototype,Vf.prototype,{constructor:rA,signed:!0,TypedArray:Uint32Array,BigIntArray:v_});function LNe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new v_(t,n,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}let Zv,KV;NNe?(KV=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:T9(e),Zv=e=>e.byteLength===8?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:T9(e)):(Zv=T9,KV=Zv);function T9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class FX{static new(t,n){switch(n){case!0:return new ww(t);case!1:return new Ew(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case y_:return new ww(t)}return t.byteLength===16?new rA(t):new Ew(t)}static signed(t){return new ww(t)}static unsigned(t){return new Ew(t)}static decimal(t){return new rA(t)}constructor(t,n){return FX.new(t,n)}}var FNe,jNe,BNe,UNe,zNe,VNe,HNe,qNe,WNe,GNe,YNe,KNe,XNe,QNe,JNe,ZNe,eDe,tDe,nDe;class Vn{static isNull(t){return(t==null?void 0:t.typeId)===ae.Null}static isInt(t){return(t==null?void 0:t.typeId)===ae.Int}static isFloat(t){return(t==null?void 0:t.typeId)===ae.Float}static isBinary(t){return(t==null?void 0:t.typeId)===ae.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===ae.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===ae.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===ae.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===ae.Date}static isTime(t){return(t==null?void 0:t.typeId)===ae.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===ae.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===ae.Interval}static isList(t){return(t==null?void 0:t.typeId)===ae.List}static isStruct(t){return(t==null?void 0:t.typeId)===ae.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===ae.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===ae.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===ae.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===ae.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===ae.Dictionary}static isDenseUnion(t){return Vn.isUnion(t)&&t.mode===hc.Dense}static isSparseUnion(t){return Vn.isUnion(t)&&t.mode===hc.Sparse}get typeId(){return ae.NONE}}FNe=Symbol.toStringTag;Vn[FNe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Vn.prototype);let tm=class extends Vn{toString(){return"Null"}get typeId(){return ae.Null}};jNe=Symbol.toStringTag;tm[jNe]=(e=>e[Symbol.toStringTag]="Null")(tm.prototype);class Xa extends Vn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return ae.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?y_:v_}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}BNe=Symbol.toStringTag;Xa[BNe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Xa.prototype);class jX extends Xa{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class BX extends Xa{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class x0 extends Xa{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class UX extends Xa{constructor(){super(!0,64)}get ArrayType(){return y_}}class zX extends Xa{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class VX extends Xa{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class HX extends Xa{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class qX extends Xa{constructor(){super(!1,64)}get ArrayType(){return v_}}Object.defineProperty(jX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(BX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(x0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(UX.prototype,"ArrayType",{value:y_});Object.defineProperty(zX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(VX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(HX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(qX.prototype,"ArrayType",{value:v_});class T0 extends Vn{constructor(t){super(),this.precision=t}get typeId(){return ae.Float}get ArrayType(){switch(this.precision){case Ro.HALF:return Uint16Array;case Ro.SINGLE:return Float32Array;case Ro.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}UNe=Symbol.toStringTag;T0[UNe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(T0.prototype);class rDe extends T0{constructor(){super(Ro.HALF)}}class WX extends T0{constructor(){super(Ro.SINGLE)}}class GX extends T0{constructor(){super(Ro.DOUBLE)}}Object.defineProperty(rDe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(WX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(GX.prototype,"ArrayType",{value:Float64Array});let iA=class extends Vn{constructor(){super()}get typeId(){return ae.Binary}toString(){return"Binary"}};zNe=Symbol.toStringTag;iA[zNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(iA.prototype);let dE=class extends Vn{constructor(){super()}get typeId(){return ae.Utf8}toString(){return"Utf8"}};VNe=Symbol.toStringTag;dE[VNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(dE.prototype);let sA=class extends Vn{constructor(){super()}get typeId(){return ae.Bool}toString(){return"Bool"}};HNe=Symbol.toStringTag;sA[HNe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(sA.prototype);let H3=class extends Vn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return ae.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};qNe=Symbol.toStringTag;H3[qNe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(H3.prototype);class hE extends Vn{constructor(t){super(),this.unit=t}get typeId(){return ae.Date}toString(){return`Date${(this.unit+1)*32}<${ah[this.unit]}>`}}WNe=Symbol.toStringTag;hE[WNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(hE.prototype);class ENt extends hE{constructor(){super(ah.DAY)}}class SNt extends hE{constructor(){super(ah.MILLISECOND)}}class nm extends Vn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return ae.Time}toString(){return`Time${this.bitWidth}<${Zn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return y_}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}GNe=Symbol.toStringTag;nm[GNe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(nm.prototype);class xNt extends nm{constructor(){super(Zn.SECOND,32)}}class TNt extends nm{constructor(){super(Zn.MILLISECOND,32)}}class CNt extends nm{constructor(){super(Zn.MICROSECOND,64)}}class ANt extends nm{constructor(){super(Zn.NANOSECOND,64)}}class q3 extends Vn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return ae.Timestamp}toString(){return`Timestamp<${Zn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}YNe=Symbol.toStringTag;q3[YNe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(q3.prototype);class pE extends Vn{constructor(t){super(),this.unit=t}get typeId(){return ae.Interval}toString(){return`Interval<${uh[this.unit]}>`}}KNe=Symbol.toStringTag;pE[KNe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(pE.prototype);class INt extends pE{constructor(){super(uh.DAY_TIME)}}class ONt extends pE{constructor(){super(uh.YEAR_MONTH)}}let mE=class extends Vn{constructor(t){super(),this.children=[t]}get typeId(){return ae.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};XNe=Symbol.toStringTag;mE[XNe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(mE.prototype);class la extends Vn{constructor(t){super(),this.children=t}get typeId(){return ae.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}QNe=Symbol.toStringTag;la[QNe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(la.prototype);class oA extends Vn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return ae.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}JNe=Symbol.toStringTag;oA[JNe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(oA.prototype);let W3=class extends Vn{constructor(t){super(),this.byteWidth=t}get typeId(){return ae.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};ZNe=Symbol.toStringTag;W3[ZNe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(W3.prototype);let gE=class extends Vn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return ae.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};eDe=Symbol.toStringTag;gE[eDe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(gE.prototype);class aA extends Vn{constructor(t,n=!1){super(),this.children=[t],this.keysSorted=n}get typeId(){return ae.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}tDe=Symbol.toStringTag;aA[tDe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(aA.prototype);const PNt=(e=>()=>++e)(-1);class C0 extends Vn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?PNt():typeof r=="number"?r:r.low}get typeId(){return ae.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}nDe=Symbol.toStringTag;C0[nDe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(C0.prototype);function dd(e){const t=e;switch(e.typeId){case ae.Decimal:return e.bitWidth/32;case ae.Timestamp:return 2;case ae.Date:return 1+t.unit;case ae.Interval:return 1+t.unit;case ae.FixedSizeList:return t.listSize;case ae.FixedSizeBinary:return t.byteWidth;default:return 1}}class nr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return kNt(this,t,n)}getVisitFnByTypeId(t,n=!0){return vb(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function kNt(e,t,n=!0){return typeof t=="number"?vb(e,t,n):typeof t=="string"&&t in ae?vb(e,ae[t],n):t&&t instanceof Vn?vb(e,lme(t),n):t!=null&&t.type&&t.type instanceof Vn?vb(e,lme(t.type),n):vb(e,ae.NONE,n)}function vb(e,t,n=!0){let r=null;switch(t){case ae.Null:r=e.visitNull;break;case ae.Bool:r=e.visitBool;break;case ae.Int:r=e.visitInt;break;case ae.Int8:r=e.visitInt8||e.visitInt;break;case ae.Int16:r=e.visitInt16||e.visitInt;break;case ae.Int32:r=e.visitInt32||e.visitInt;break;case ae.Int64:r=e.visitInt64||e.visitInt;break;case ae.Uint8:r=e.visitUint8||e.visitInt;break;case ae.Uint16:r=e.visitUint16||e.visitInt;break;case ae.Uint32:r=e.visitUint32||e.visitInt;break;case ae.Uint64:r=e.visitUint64||e.visitInt;break;case ae.Float:r=e.visitFloat;break;case ae.Float16:r=e.visitFloat16||e.visitFloat;break;case ae.Float32:r=e.visitFloat32||e.visitFloat;break;case ae.Float64:r=e.visitFloat64||e.visitFloat;break;case ae.Utf8:r=e.visitUtf8;break;case ae.Binary:r=e.visitBinary;break;case ae.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case ae.Date:r=e.visitDate;break;case ae.DateDay:r=e.visitDateDay||e.visitDate;break;case ae.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case ae.Timestamp:r=e.visitTimestamp;break;case ae.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case ae.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case ae.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case ae.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case ae.Time:r=e.visitTime;break;case ae.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case ae.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case ae.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case ae.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case ae.Decimal:r=e.visitDecimal;break;case ae.List:r=e.visitList;break;case ae.Struct:r=e.visitStruct;break;case ae.Union:r=e.visitUnion;break;case ae.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case ae.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case ae.Dictionary:r=e.visitDictionary;break;case ae.Interval:r=e.visitInterval;break;case ae.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case ae.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case ae.FixedSizeList:r=e.visitFixedSizeList;break;case ae.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${ae[t]}'`)}function lme(e){switch(e.typeId){case ae.Null:return ae.Null;case ae.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?ae.Int8:ae.Uint8;case 16:return n?ae.Int16:ae.Uint16;case 32:return n?ae.Int32:ae.Uint32;case 64:return n?ae.Int64:ae.Uint64}return ae.Int}case ae.Float:switch(e.precision){case Ro.HALF:return ae.Float16;case Ro.SINGLE:return ae.Float32;case Ro.DOUBLE:return ae.Float64}return ae.Float;case ae.Binary:return ae.Binary;case ae.Utf8:return ae.Utf8;case ae.Bool:return ae.Bool;case ae.Decimal:return ae.Decimal;case ae.Time:switch(e.unit){case Zn.SECOND:return ae.TimeSecond;case Zn.MILLISECOND:return ae.TimeMillisecond;case Zn.MICROSECOND:return ae.TimeMicrosecond;case Zn.NANOSECOND:return ae.TimeNanosecond}return ae.Time;case ae.Timestamp:switch(e.unit){case Zn.SECOND:return ae.TimestampSecond;case Zn.MILLISECOND:return ae.TimestampMillisecond;case Zn.MICROSECOND:return ae.TimestampMicrosecond;case Zn.NANOSECOND:return ae.TimestampNanosecond}return ae.Timestamp;case ae.Date:switch(e.unit){case ah.DAY:return ae.DateDay;case ah.MILLISECOND:return ae.DateMillisecond}return ae.Date;case ae.Interval:switch(e.unit){case uh.DAY_TIME:return ae.IntervalDayTime;case uh.YEAR_MONTH:return ae.IntervalYearMonth}return ae.Interval;case ae.Map:return ae.Map;case ae.List:return ae.List;case ae.Struct:return ae.Struct;case ae.Union:switch(e.mode){case hc.Dense:return ae.DenseUnion;case hc.Sparse:return ae.SparseUnion}return ae.Union;case ae.FixedSizeBinary:return ae.FixedSizeBinary;case ae.FixedSizeList:return ae.FixedSizeList;case ae.Dictionary:return ae.Dictionary}throw new Error(`Unrecognized type '${ae[e.typeId]}'`)}nr.prototype.visitInt8=null;nr.prototype.visitInt16=null;nr.prototype.visitInt32=null;nr.prototype.visitInt64=null;nr.prototype.visitUint8=null;nr.prototype.visitUint16=null;nr.prototype.visitUint32=null;nr.prototype.visitUint64=null;nr.prototype.visitFloat16=null;nr.prototype.visitFloat32=null;nr.prototype.visitFloat64=null;nr.prototype.visitDateDay=null;nr.prototype.visitDateMillisecond=null;nr.prototype.visitTimestampSecond=null;nr.prototype.visitTimestampMillisecond=null;nr.prototype.visitTimestampMicrosecond=null;nr.prototype.visitTimestampNanosecond=null;nr.prototype.visitTimeSecond=null;nr.prototype.visitTimeMillisecond=null;nr.prototype.visitTimeMicrosecond=null;nr.prototype.visitTimeNanosecond=null;nr.prototype.visitDenseUnion=null;nr.prototype.visitSparseUnion=null;nr.prototype.visitIntervalDayTime=null;nr.prototype.visitIntervalYearMonth=null;const iDe=new Float64Array(1),eb=new Uint32Array(iDe.buffer);function sDe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function oDe(e){if(e!==e)return 32256;iDe[0]=e;const t=(eb[1]&2147483648)>>16&65535;let n=eb[1]&2146435072,r=0;return n>=1089470464?eb[0]>0?n=31744:(n=(n&2080374784)>>16,r=(eb[1]&1048575)>>10):n<=1056964608?(r=1048576+(eb[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(eb[1]&1048575)+512>>10),t|n|r&65535}class vn extends nr{}function xn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const $Nt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},YX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},RNt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},NNt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},aDe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},DNt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Cm=({values:e},t,n)=>{e[t]=n},KX=({values:e},t,n)=>{e[t]=n},uDe=({values:e},t,n)=>{e[t]=oDe(n)},MNt=(e,t,n)=>{switch(e.type.precision){case Ro.HALF:return uDe(e,t,n);case Ro.SINGLE:case Ro.DOUBLE:return KX(e,t,n)}},XX=({values:e},t,n)=>{$Nt(e,t,n.valueOf())},QX=({values:e},t,n)=>{YX(e,t*2,n.valueOf())},lDe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},LNt=({values:e,valueOffsets:t},n,r)=>aDe(e,t,n,r),FNt=({values:e,valueOffsets:t},n,r)=>{aDe(e,t,n,NX(r))},cDe=(e,t,n)=>{e.type.unit===ah.DAY?XX(e,t,n):QX(e,t,n)},JX=({values:e},t,n)=>YX(e,t*2,n/1e3),ZX=({values:e},t,n)=>YX(e,t*2,n),eQ=({values:e},t,n)=>RNt(e,t*2,n),tQ=({values:e},t,n)=>NNt(e,t*2,n),fDe=(e,t,n)=>{switch(e.type.unit){case Zn.SECOND:return JX(e,t,n);case Zn.MILLISECOND:return ZX(e,t,n);case Zn.MICROSECOND:return eQ(e,t,n);case Zn.NANOSECOND:return tQ(e,t,n)}},nQ=({values:e},t,n)=>{e[t]=n},rQ=({values:e},t,n)=>{e[t]=n},iQ=({values:e},t,n)=>{e[t]=n},sQ=({values:e},t,n)=>{e[t]=n},dDe=(e,t,n)=>{switch(e.type.unit){case Zn.SECOND:return nQ(e,t,n);case Zn.MILLISECOND:return rQ(e,t,n);case Zn.MICROSECOND:return iQ(e,t,n);case Zn.NANOSECOND:return sQ(e,t,n)}},hDe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},jNt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=pc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},BNt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=pc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},UNt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),zNt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),VNt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),HNt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),qNt=(e,t,n)=>{const r=e.type.children.map(s=>pc.getVisitFn(s.type)),i=n instanceof Map?VNt(t,n):n instanceof _r?zNt(t,n):Array.isArray(n)?UNt(t,n):HNt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},WNt=(e,t,n)=>{e.type.mode===hc.Dense?pDe(e,t,n):mDe(e,t,n)},pDe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];pc.visit(i,e.valueOffsets[t],n)},mDe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];pc.visit(i,t,n)},GNt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},gDe=(e,t,n)=>{e.type.unit===uh.DAY_TIME?oQ(e,t,n):aQ(e,t,n)},oQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},aQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},YNt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=pc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};vn.prototype.visitBool=xn(DNt);vn.prototype.visitInt=xn(Cm);vn.prototype.visitInt8=xn(Cm);vn.prototype.visitInt16=xn(Cm);vn.prototype.visitInt32=xn(Cm);vn.prototype.visitInt64=xn(Cm);vn.prototype.visitUint8=xn(Cm);vn.prototype.visitUint16=xn(Cm);vn.prototype.visitUint32=xn(Cm);vn.prototype.visitUint64=xn(Cm);vn.prototype.visitFloat=xn(MNt);vn.prototype.visitFloat16=xn(uDe);vn.prototype.visitFloat32=xn(KX);vn.prototype.visitFloat64=xn(KX);vn.prototype.visitUtf8=xn(FNt);vn.prototype.visitBinary=xn(LNt);vn.prototype.visitFixedSizeBinary=xn(lDe);vn.prototype.visitDate=xn(cDe);vn.prototype.visitDateDay=xn(XX);vn.prototype.visitDateMillisecond=xn(QX);vn.prototype.visitTimestamp=xn(fDe);vn.prototype.visitTimestampSecond=xn(JX);vn.prototype.visitTimestampMillisecond=xn(ZX);vn.prototype.visitTimestampMicrosecond=xn(eQ);vn.prototype.visitTimestampNanosecond=xn(tQ);vn.prototype.visitTime=xn(dDe);vn.prototype.visitTimeSecond=xn(nQ);vn.prototype.visitTimeMillisecond=xn(rQ);vn.prototype.visitTimeMicrosecond=xn(iQ);vn.prototype.visitTimeNanosecond=xn(sQ);vn.prototype.visitDecimal=xn(hDe);vn.prototype.visitList=xn(jNt);vn.prototype.visitStruct=xn(qNt);vn.prototype.visitUnion=xn(WNt);vn.prototype.visitDenseUnion=xn(pDe);vn.prototype.visitSparseUnion=xn(mDe);vn.prototype.visitDictionary=xn(GNt);vn.prototype.visitInterval=xn(gDe);vn.prototype.visitIntervalDayTime=xn(oQ);vn.prototype.visitIntervalYearMonth=xn(aQ);vn.prototype.visitFixedSizeList=xn(YNt);vn.prototype.visitMap=xn(BNt);const pc=new vn,Jc=Symbol.for("parent"),Sw=Symbol.for("rowIndex");class uQ{constructor(t,n){return this[Jc]=t,this[Sw]=n,new Proxy(this,new XNt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Sw],n=this[Jc],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=ju.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${t0(t)}: ${t0(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new KNt(this[Jc],this[Sw])}}class KNt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,ju.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(uQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Jc]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Sw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class XNt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Jc].type.children.map(n=>n.name)}has(t,n){return t[Jc].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Jc].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Jc].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=ju.visit(t[Jc].children[r],t[Sw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Jc].type.children.findIndex(s=>s.name===n);return i!==-1?(pc.visit(t[Jc].children[i],t[Sw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class pn extends nr{}function _n(e){return(t,n)=>t.getValid(n)?e(t,n):null}const QNt=(e,t)=>864e5*e[t],lQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),JNt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,ZNt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,yDe=e=>new Date(e),eDt=(e,t)=>yDe(QNt(e,t)),tDt=(e,t)=>yDe(lQ(e,t)),nDt=(e,t)=>null,vDe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},rDt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},_De=({values:e},t)=>eDt(e,t),bDe=({values:e},t)=>tDt(e,t*2),cy=({stride:e,values:t},n)=>t[e*n],iDt=({stride:e,values:t},n)=>sDe(t[e*n]),wDe=({values:e},t)=>e[t],sDt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),oDt=({values:e,valueOffsets:t},n)=>vDe(e,t,n),aDt=({values:e,valueOffsets:t},n)=>{const r=vDe(e,t,n);return r!==null?GV(r):null},uDt=({values:e},t)=>e[t],lDt=({type:e,values:t},n)=>e.precision!==Ro.HALF?t[n]:sDe(t[n]),cDt=(e,t)=>e.type.unit===ah.DAY?_De(e,t):bDe(e,t),EDe=({values:e},t)=>1e3*lQ(e,t*2),SDe=({values:e},t)=>lQ(e,t*2),xDe=({values:e},t)=>JNt(e,t*2),TDe=({values:e},t)=>ZNt(e,t*2),fDt=(e,t)=>{switch(e.type.unit){case Zn.SECOND:return EDe(e,t);case Zn.MILLISECOND:return SDe(e,t);case Zn.MICROSECOND:return xDe(e,t);case Zn.NANOSECOND:return TDe(e,t)}},CDe=({values:e},t)=>e[t],ADe=({values:e},t)=>e[t],IDe=({values:e},t)=>e[t],ODe=({values:e},t)=>e[t],dDt=(e,t)=>{switch(e.type.unit){case Zn.SECOND:return CDe(e,t);case Zn.MILLISECOND:return ADe(e,t);case Zn.MICROSECOND:return IDe(e,t);case Zn.NANOSECOND:return ODe(e,t)}},hDt=({values:e,stride:t},n)=>FX.decimal(e.subarray(t*n,t*(n+1))),pDt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new _r([u])},mDt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new wF(o.slice(i,s-i))},gDt=(e,t)=>new uQ(e,t),yDt=(e,t)=>e.type.mode===hc.Dense?PDe(e,t):kDe(e,t),PDe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return ju.visit(r,e.valueOffsets[t])},kDe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return ju.visit(r,t)},vDt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},_Dt=(e,t)=>e.type.unit===uh.DAY_TIME?$De(e,t):RDe(e,t),$De=({values:e},t)=>e.subarray(2*t,2*(t+1)),RDe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},bDt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new _r([s])};pn.prototype.visitNull=_n(nDt);pn.prototype.visitBool=_n(rDt);pn.prototype.visitInt=_n(uDt);pn.prototype.visitInt8=_n(cy);pn.prototype.visitInt16=_n(cy);pn.prototype.visitInt32=_n(cy);pn.prototype.visitInt64=_n(wDe);pn.prototype.visitUint8=_n(cy);pn.prototype.visitUint16=_n(cy);pn.prototype.visitUint32=_n(cy);pn.prototype.visitUint64=_n(wDe);pn.prototype.visitFloat=_n(lDt);pn.prototype.visitFloat16=_n(iDt);pn.prototype.visitFloat32=_n(cy);pn.prototype.visitFloat64=_n(cy);pn.prototype.visitUtf8=_n(aDt);pn.prototype.visitBinary=_n(oDt);pn.prototype.visitFixedSizeBinary=_n(sDt);pn.prototype.visitDate=_n(cDt);pn.prototype.visitDateDay=_n(_De);pn.prototype.visitDateMillisecond=_n(bDe);pn.prototype.visitTimestamp=_n(fDt);pn.prototype.visitTimestampSecond=_n(EDe);pn.prototype.visitTimestampMillisecond=_n(SDe);pn.prototype.visitTimestampMicrosecond=_n(xDe);pn.prototype.visitTimestampNanosecond=_n(TDe);pn.prototype.visitTime=_n(dDt);pn.prototype.visitTimeSecond=_n(CDe);pn.prototype.visitTimeMillisecond=_n(ADe);pn.prototype.visitTimeMicrosecond=_n(IDe);pn.prototype.visitTimeNanosecond=_n(ODe);pn.prototype.visitDecimal=_n(hDt);pn.prototype.visitList=_n(pDt);pn.prototype.visitStruct=_n(gDt);pn.prototype.visitUnion=_n(yDt);pn.prototype.visitDenseUnion=_n(PDe);pn.prototype.visitSparseUnion=_n(kDe);pn.prototype.visitDictionary=_n(vDt);pn.prototype.visitInterval=_n(_Dt);pn.prototype.visitIntervalDayTime=_n($De);pn.prototype.visitIntervalYearMonth=_n(RDe);pn.prototype.visitFixedSizeList=_n(bDt);pn.prototype.visitMap=_n(mDt);const ju=new pn,lf=Symbol.for("keys"),xw=Symbol.for("vals");class wF{constructor(t){return this[lf]=new _r([t.children[0]]).memoize(),this[xw]=t.children[1],new Proxy(this,new EDt)}[Symbol.iterator](){return new wDt(this[lf],this[xw])}get size(){return this[lf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[lf],n=this[xw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=ju.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${t0(t)}: ${t0(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class wDt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),ju.visit(this.vals,t)]})}}class EDt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[lf].toArray().map(String)}has(t,n){return t[lf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[lf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[lf].indexOf(n);if(r!==-1){const i=ju.visit(Reflect.get(t,xw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[lf].indexOf(n);return i!==-1?(pc.visit(Reflect.get(t,xw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(wF.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[lf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[xw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let cme;function NDe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(cme=s,s=o,o=cme),o>i&&(o=i),r?r(e,s,o):[s,o]}const fme=e=>e!==e;function OS(e){if(typeof e!=="object"||e===null)return fme(e)?fme:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?pNt(e,n):!1:e instanceof Map?xDt(e):Array.isArray(e)?SDt(e):e instanceof _r?TDt(e):CDt(e,!0)}function SDt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=OS(e[n]);return EF(t)}function xDt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=OS(r);return EF(n)}function TDt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=OS(e.get(n));return EF(t)}function CDt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=OS(e[n[i]]);return EF(r,n)}function EF(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return ADt(e,n);case Map:return dme(e,n,n.keys());case wF:case uQ:case Object:case void 0:return dme(e,n,t||Object.keys(n))}return n instanceof _r?IDt(e,n):!1}}function ADt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function IDt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function dme(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function DDe(e,t,n,r){return(n&1<<r)!==0}function ODt(e,t,n,r){return(n&1<<r)>>r}function cQ(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):MDe(new fQ(n,e,t,null,DDe)).subarray(0,r)),i}return n}function MDe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class fQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function XV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new fQ(e,t,n-t,e,ODt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return XV(e,t,i)+XV(e,r,n)+PDt(e,i>>3,r-i>>3)}function PDt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=C9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=C9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=C9(s.getUint8(i)),i+=1;return r}function C9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const kDt=-1;class qr{constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof qr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=dd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,n;return t<=kDt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-XV(n,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const n=this.offset+t;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(t,n){if(!this.nullable)return n;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return n?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new qr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===ae.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(cQ(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Jh.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Jh.TYPE])&&(o[Jh.TYPE]=s.subarray(t,t+n)),(s=o[Jh.OFFSET])&&(o[Jh.OFFSET]=s.subarray(t,t+n+1))||(s=o[Jh.DATA])&&(o[Jh.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}qr.prototype.children=Object.freeze([]);class B2 extends nr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new qr(n,r,i,0)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.data),s=Mr(t.nullBitmap),o=Gx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new qr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.data),s=Mr(t.nullBitmap),o=Gx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new qr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length/dd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length/dd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length/dd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length/dd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length/dd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Mr(t.nullBitmap),o=Gx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new qr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Mr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Mr(t.nullBitmap),o=So(n.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;if(Vn.isSparseUnion(n))return new qr(n,r,a,u,[void 0,void 0,s,o],i);const l=Gx(t.valueOffsets);return new qr(n,r,a,u,[l,void 0,s,o],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.indices.ArrayType,t.data),{["dictionary"]:o=new _r([new B2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new qr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Mr(t.nullBitmap),s=So(n.ArrayType,t.data),{["length"]:o=s.length/dd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new B2().visit({type:n.valueType})}=t,s=Mr(t.nullBitmap),{["length"]:o=i.length/dd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new qr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new B2().visit({type:n.childType})}=t,s=Mr(t.nullBitmap),o=Gx(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new qr(n,r,a,u,[o,void 0,s],[i])}}function oa(e){return new B2().visit(e)}class hme{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function LDe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function FDe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function jDe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function dQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function hQ(e,t){return e.getValid(t)}function Tw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return dQ(r,this._offsets,n,t)}}function BDe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=dQ(s,this._offsets,r,n);return t=void 0,o}}function UDe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):dQ(s,this._offsets,i,n);return t=void 0,o}}class mn extends nr{}function $Dt(e,t){return t===null&&e.length>0?0:-1}function RDt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new fQ(n,e.offset+(t||0),e.length,n,DDe)){if(!i)return r;++r}return-1}function kn(e,t,n){if(t===void 0)return-1;if(t===null)return RDt(e,n);const r=ju.getVisitFn(e),i=OS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function zDe(e,t,n){const r=ju.getVisitFn(e),i=OS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}mn.prototype.visitNull=$Dt;mn.prototype.visitBool=kn;mn.prototype.visitInt=kn;mn.prototype.visitInt8=kn;mn.prototype.visitInt16=kn;mn.prototype.visitInt32=kn;mn.prototype.visitInt64=kn;mn.prototype.visitUint8=kn;mn.prototype.visitUint16=kn;mn.prototype.visitUint32=kn;mn.prototype.visitUint64=kn;mn.prototype.visitFloat=kn;mn.prototype.visitFloat16=kn;mn.prototype.visitFloat32=kn;mn.prototype.visitFloat64=kn;mn.prototype.visitUtf8=kn;mn.prototype.visitBinary=kn;mn.prototype.visitFixedSizeBinary=kn;mn.prototype.visitDate=kn;mn.prototype.visitDateDay=kn;mn.prototype.visitDateMillisecond=kn;mn.prototype.visitTimestamp=kn;mn.prototype.visitTimestampSecond=kn;mn.prototype.visitTimestampMillisecond=kn;mn.prototype.visitTimestampMicrosecond=kn;mn.prototype.visitTimestampNanosecond=kn;mn.prototype.visitTime=kn;mn.prototype.visitTimeSecond=kn;mn.prototype.visitTimeMillisecond=kn;mn.prototype.visitTimeMicrosecond=kn;mn.prototype.visitTimeNanosecond=kn;mn.prototype.visitDecimal=kn;mn.prototype.visitList=kn;mn.prototype.visitStruct=kn;mn.prototype.visitUnion=kn;mn.prototype.visitDenseUnion=zDe;mn.prototype.visitSparseUnion=zDe;mn.prototype.visitDictionary=kn;mn.prototype.visitInterval=kn;mn.prototype.visitIntervalDayTime=kn;mn.prototype.visitIntervalYearMonth=kn;mn.prototype.visitFixedSizeList=kn;mn.prototype.visitMap=kn;const G3=new mn;class gn extends nr{}function bn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===ae.Timestamp||t instanceof Xa&&t.bitWidth!==64||t instanceof nm&&t.bitWidth!==64||t instanceof T0&&t.precision!==Ro.HALF))return new hme(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new hme(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new NDt(o)})}class NDt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}gn.prototype.visitNull=bn;gn.prototype.visitBool=bn;gn.prototype.visitInt=bn;gn.prototype.visitInt8=bn;gn.prototype.visitInt16=bn;gn.prototype.visitInt32=bn;gn.prototype.visitInt64=bn;gn.prototype.visitUint8=bn;gn.prototype.visitUint16=bn;gn.prototype.visitUint32=bn;gn.prototype.visitUint64=bn;gn.prototype.visitFloat=bn;gn.prototype.visitFloat16=bn;gn.prototype.visitFloat32=bn;gn.prototype.visitFloat64=bn;gn.prototype.visitUtf8=bn;gn.prototype.visitBinary=bn;gn.prototype.visitFixedSizeBinary=bn;gn.prototype.visitDate=bn;gn.prototype.visitDateDay=bn;gn.prototype.visitDateMillisecond=bn;gn.prototype.visitTimestamp=bn;gn.prototype.visitTimestampSecond=bn;gn.prototype.visitTimestampMillisecond=bn;gn.prototype.visitTimestampMicrosecond=bn;gn.prototype.visitTimestampNanosecond=bn;gn.prototype.visitTime=bn;gn.prototype.visitTimeSecond=bn;gn.prototype.visitTimeMillisecond=bn;gn.prototype.visitTimeMicrosecond=bn;gn.prototype.visitTimeNanosecond=bn;gn.prototype.visitDecimal=bn;gn.prototype.visitList=bn;gn.prototype.visitStruct=bn;gn.prototype.visitUnion=bn;gn.prototype.visitDenseUnion=bn;gn.prototype.visitSparseUnion=bn;gn.prototype.visitDictionary=bn;gn.prototype.visitInterval=bn;gn.prototype.visitIntervalDayTime=bn;gn.prototype.visitIntervalYearMonth=bn;gn.prototype.visitFixedSizeList=bn;gn.prototype.visitMap=bn;const pQ=new gn,DDt=(e,t)=>e+t;class fy extends nr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Zn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitStruct(t,n){return t.children.reduce((r,i)=>r+lh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+lh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const MDt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),LDt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),FDt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=lh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},jDt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=lh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},BDt=(e,t)=>e.type.mode===hc.Dense?VDe(e,t):HDe(e,t),VDe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+lh.visit(t[s],r[i])},HDe=({children:e},t)=>4+lh.visitMany(e,e.map(()=>t)).reduce(DDt,0);fy.prototype.visitUtf8=MDt;fy.prototype.visitBinary=LDt;fy.prototype.visitList=FDt;fy.prototype.visitFixedSizeList=jDt;fy.prototype.visitUnion=BDt;fy.prototype.visitDenseUnion=VDe;fy.prototype.visitSparseUnion=HDe;const lh=new fy;var qDe;const WDe={},GDe={};class _r{constructor(t){var n,r,i;const s=t[0]instanceof _r?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof qr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=WDe[o.typeId],f=s[0];this.isValid=d=>hQ(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,GDe[o.typeId]),this._offsets=FDe(s);break}this.data=s,this.type=o,this.stride=dd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,n)=>t+n.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=LDe(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${ae[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>0}getByteLength(t){return 0}[Symbol.iterator](){return pQ.visit(this)}concat(...t){return new _r(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new _r(NDe(this,t,n,({data:r,_offsets:i},s,o)=>jDe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case ae.Int:case ae.Float:case ae.Decimal:case ae.Time:case ae.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new _r(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Vn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Vn.isDictionary(this.type)){const t=new Y3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new _r(n)}return new Y3(this)}unmemoize(){if(Vn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new _r(n)}return this}}qDe=Symbol.toStringTag;_r[qDe]=(e=>{e.type=Vn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(ae).map(n=>ae[n]).filter(n=>typeof n=="number"&&n!==ae.NONE);for(const n of t){const r=ju.getVisitFnByTypeId(n),i=pc.getVisitFnByTypeId(n),s=G3.getVisitFnByTypeId(n),o=lh.getVisitFnByTypeId(n);WDe[n]={get:r,set:i,indexOf:s,byteLength:o},GDe[n]=Object.create(e,{isValid:{value:Tw(hQ)},get:{value:Tw(ju.getVisitFnByTypeId(n))},set:{value:BDe(pc.getVisitFnByTypeId(n))},indexOf:{value:UDe(G3.getVisitFnByTypeId(n))},getByteLength:{value:Tw(lh.getVisitFnByTypeId(n))}})}return"Vector"})(_r.prototype);class Y3 extends _r{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new Y3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new _r(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function UDt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${zDt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function zDt(e){return typeof e!="bigint"?t0(e):NNe?`${t0(e)}n`:`"${t0(e)}"`}const A9=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,VDt=(e,t=0)=>e.length>=t?e.subarray(0,t):V3(new e.constructor(t),e,0);class SF{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?A9(r*1,this.BYTES_PER_ELEMENT):A9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=A9(t*this.stride,this.BYTES_PER_ELEMENT);const n=VDt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=V3(new this.ArrayType(t),this.buffer)}}SF.prototype.offset=0;class FI extends SF{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class YDe extends FI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class KDe extends FI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Gu=class{constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=dd(t),this._nulls=new YDe,n&&n.length>0&&(this._isValid=UDt(n))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new _r([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),oa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Gu.prototype.length=1;Gu.prototype.stride=1;Gu.prototype.children=null;Gu.prototype.finished=!1;Gu.prototype.nullValues=null;Gu.prototype._isValid=()=>!0;class dy extends Gu{constructor(t){super(t),this._values=new FI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class xF extends Gu{constructor(t){super(t),this._pendingLength=0,this._offsets=new KDe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof wF?n[lf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class QV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(n),t.offset()}}const I9=2,bd=4,lp=4,si=4,og=new Int32Array(2),pme=new Float32Array(og.buffer),mme=new Float64Array(og.buffer),dk=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let Dp=class JV{constructor(t,n){this.low=t|0,this.high=n|0}static create(t,n){return t==0&&n==0?JV.ZERO:new JV(t,n)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};Dp.ZERO=new Dp(0,0);var ZV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(ZV||(ZV={}));let K3=class XDe{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new XDe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Dp(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Dp(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return og[0]=this.readInt32(t),pme[0]}readFloat64(t){return og[dk?0:1]=this.readInt32(t),og[dk?1:0]=this.readInt32(t+4),mme[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,n.low),this.writeInt32(t+4,n.high)}writeUint64(t,n){this.writeUint32(t,n.low),this.writeUint32(t+4,n.high)}writeFloat32(t,n){pme[0]=n,this.writeInt32(t,og[0])}writeFloat64(t,n){mme[0]=n,this.writeInt32(t,og[dk?0:1]),this.writeInt32(t+4,og[dk?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+bd+lp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<lp;n++)t+=String.fromCharCode(this.readInt8(this.position_+bd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=bd,n===ZV.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const u=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|u&63;else{const l=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(t+s++);o=(a&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+bd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=lp)throw new Error("FlatBuffers: file identifier must be length "+lp);for(let n=0;n<lp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+bd+n))return!1;return!0}createLong(t,n){return Dp.create(t,n)}createScalarList(t,n){const r=[];for(let i=0;i<n;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},QDe=class JDe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let n;t?n=t:n=1024,this.bb=K3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=JDe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||!n.equals(r))&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=K3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(bd,0),this.writeInt32(this.offset()-t+bd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*I9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=I9;l<s;l+=I9)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?si:0;if(n){const s=n;if(this.prep(this.minalign,bd+lp+i),s.length!=lp)throw new Error("FlatBuffers: file identifier must be length "+lp);for(let o=lp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,bd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+n)!=0))throw new Error("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(bd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(!t)return 0;let n;if(t instanceof Uint8Array)n=t;else{n=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?n.push(i):(i<2048?n.push(i>>6&31|192):(i<65536?n.push(i>>12&15|224):n.push(i>>18&7|240,i>>12&63|128),n.push(i>>6&63|128)),n.push(i&63|128))}}this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createLong(t,n){return Dp.create(t,n)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ks{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ks).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+si),(n||new ks).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ks.startKeyValue(t),ks.addKey(t,n),ks.addValue(t,r),ks.endKeyValue(t)}}var yE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(yE||(yE={}));var vE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(vE||(vE={}));var X3;(function(e){e[e.DenseArray=0]="DenseArray"})(X3||(X3={}));class ol{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new ol).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+si),(n||new ol).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return ol.startInt(t),ol.addBitWidth(t,n),ol.addIsSigned(t,r),ol.endInt(t)}}class cp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new cp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+si),(n||new cp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ol).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):X3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,X3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Rv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+si),(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Rv.startBinary(t),Rv.endBinary(t)}}class Nv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+si),(n||new Nv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Nv.startBool(t),Nv.endBool(t)}}var Q3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Q3||(Q3={}));let G$=class _b{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new _b).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+si),(n||new _b).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Q3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return _b.startDate(t),_b.addUnit(t,n),_b.endDate(t)}};class gu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+si),(n||new gu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return gu.startDecimal(t),gu.addPrecision(t,n),gu.addScale(t,r),gu.addBitWidth(t,i),gu.endDecimal(t)}}var _E;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(_E||(_E={}));class wd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new wd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+si),(n||new wd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return wd.startFixedSizeBinary(t),wd.addByteWidth(t,n),wd.endFixedSizeBinary(t)}}class Ed{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Ed).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+si),(n||new Ed).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Ed.startFixedSizeList(t),Ed.addListSize(t,n),Ed.endFixedSizeList(t)}}var J3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(J3||(J3={}));class Sd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Sd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+si),(n||new Sd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):J3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,J3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Sd.startFloatingPoint(t),Sd.addPrecision(t,n),Sd.endFloatingPoint(t)}}var Z3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Z3||(Z3={}));class xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+si),(n||new xd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Z3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Z3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return xd.startInterval(t),xd.addUnit(t,n),xd.endInterval(t)}}class Dv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Dv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+si),(n||new Dv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Dv.startList(t),Dv.endList(t)}}let Y$=class bb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new bb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+si),(n||new bb).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return bb.startMap(t),bb.addKeysSorted(t,n),bb.endMap(t)}};class Mv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Mv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+si),(n||new Mv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Mv.startNull(t),Mv.endNull(t)}}class Lv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Lv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+si),(n||new Lv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Lv.startStruct_(t),Lv.endStruct_(t)}}let LT=class tv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+si),(n||new tv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_E.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_E.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return tv.startTime(t),tv.addUnit(t,n),tv.addBitWidth(t,r),tv.endTime(t)}},FT=class nv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new nv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+si),(n||new nv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):_E.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,_E.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return nv.startTimestamp(t),nv.addUnit(t,n),nv.addTimezone(t,r),nv.endTimestamp(t)}};var eM;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(eM||(eM={}));let rv=class iv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new iv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+si),(n||new iv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):eM.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,eM.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return iv.startUnion(t),iv.addMode(t,n),iv.addTypeIds(t,r),iv.endUnion(t)}};class Fv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Fv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+si),(n||new Fv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Fv.startUtf8(t),Fv.endUtf8(t)}}var Li;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"})(Li||(Li={}));let Hl=class K${constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new K$).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+si),(n||new K$).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Li.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new cp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new K$).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Li.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},cd=class Xh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Xh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+si),(n||new Xh).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):vE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Hl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,vE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Xh.startSchema(t),Xh.addEndianness(t,n),Xh.addFields(t,r),Xh.addCustomMetadata(t,i),Xh.addFeatures(t,s),Xh.endSchema(t)}};class nl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new nl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+si),(n||new nl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new cd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new QV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new QV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,yE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Nr{constructor(t=[],n,r){this.fields=t||[],this.metadata=n||new Map,r||(r=tH(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Nr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Nr(n,this.metadata)}assign(...t){const n=t[0]instanceof Nr?t[0]:Array.isArray(t[0])?new Nr(t[0]):new Nr(t),r=[...this.fields],i=hk(hk(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:hk(hk(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=tH(s,new Map);return new Nr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Nr.prototype.fields=null;Nr.prototype.metadata=null;Nr.prototype.dictionaries=null;let Wr=class eH{constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new eH(`${n}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],eH.new(n,r,i,s)}};Wr.prototype.type=null;Wr.prototype.name=null;Wr.prototype.nullable=null;Wr.prototype.metadata=null;function hk(e,t){return new Map([...e||new Map,...t||new Map])}function tH(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Vn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&tH(s.children,t)}return t}var gme=Dp,HDt=QDe,qDt=K3;class nH{constructor(t,n=ll.V4,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new qDt(Mr(t));const n=nl.getRootAsFooter(t),r=Nr.decode(n.schema());return new WDt(r,n)}static encode(t){const n=new HDt,r=Nr.encode(n,t.schema);nl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())A0.encode(n,o);const i=n.endVector();nl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())A0.encode(n,o);const s=n.endVector();return nl.startFooter(n),nl.addSchema(n,r),nl.addVersion(n,ll.V4),nl.addRecordBatches(n,i),nl.addDictionaries(n,s),nl.finishFooterBuffer(n,nl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class WDt extends nH{constructor(t,n){super(t,n.version()),this._footer=n}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return A0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return A0.decode(n)}return null}}class A0{constructor(t,n,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof n=="number"?n:n.low}static decode(t){return new A0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=new gme(n.offset,0),s=new gme(n.bodyLength,0);return QV.createBlock(t,i,r,s)}}const pk=Object.freeze({done:!0,value:void 0});class ZDe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class GDt extends ZDe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return up(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(pk);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ume.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ume.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return up(this,void 0,void 0,function*(){return yield this.abort(t),pk})}return(t){return up(this,void 0,void 0,function*(){return yield this.close(),pk})}read(t){return up(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return up(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(pk)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class O9 extends GDt{write(t){if((t=Mr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?GV(this.toUint8Array(!0)):this.toUint8Array(!1).then(GV)}toUint8Array(t=!1){return t?oh(this._values)[0]:up(this,void 0,void 0,function*(){var n,r;const i=[];let s=0;try{for(var o=j2(this),a;a=yield o.next(),!a.done;){const u=a.value;i.push(u),s+=u.byteLength}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(n)throw n.error}}return oh(i,s)[0]})}}class e3e extends xF{constructor(t){super(t),this._values=new SF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Mr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class YDt extends Gu{constructor(t){super(t),this._values=new YDe}setValue(t,n){this._values.set(t,+n)}}class TF extends dy{}TF.prototype._setValue=cDe;class t3e extends TF{}t3e.prototype._setValue=XX;class n3e extends TF{}n3e.prototype._setValue=QX;class r3e extends dy{}r3e.prototype._setValue=hDe;class KDt extends Gu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new C0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=tM({type:this.type.indices,nullValues:n}),this.dictionary=tM({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class i3e extends dy{}i3e.prototype._setValue=lDe;class XDt extends Gu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new gE(this.type.listSize,new Wr(n,t.type,!0)),r}}class CF extends dy{setValue(t,n){this._values.set(t,n)}}class QDt extends CF{setValue(t,n){super.setValue(t,oDe(n))}}class JDt extends CF{}class ZDt extends CF{}class AF extends dy{}AF.prototype._setValue=gDe;class s3e extends AF{}s3e.prototype._setValue=oQ;class o3e extends AF{}o3e.prototype._setValue=aQ;class Am extends dy{setValue(t,n){this._values.set(t,n)}}class e3t extends Am{}class t3t extends Am{}class n3t extends Am{}class r3t extends Am{}class i3t extends Am{}class s3t extends Am{}class o3t extends Am{}class a3t extends Am{}class u3t extends xF{constructor(t){super(t),this._offsets=new KDe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new mE(new Wr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s.length,a=n.set(i,o).buffer[i];for(let u=-1;++u<o;)r.set(a+u,s[u])}}}class l3t extends xF{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new aA(new Wr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class c3t extends Gu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class f3t extends Gu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new la([...this.type.children,new Wr(n,t.type,!0)]),r}}class PS extends dy{}PS.prototype._setValue=fDe;class a3e extends PS{}a3e.prototype._setValue=JX;class u3e extends PS{}u3e.prototype._setValue=ZX;class l3e extends PS{}l3e.prototype._setValue=eQ;class c3e extends PS{}c3e.prototype._setValue=tQ;class kS extends dy{}kS.prototype._setValue=dDe;class f3e extends kS{}f3e.prototype._setValue=nQ;class d3e extends kS{}d3e.prototype._setValue=rQ;class h3e extends kS{}h3e.prototype._setValue=iQ;class p3e extends kS{}p3e.prototype._setValue=sQ;class mQ extends Gu{constructor(t){super(t),this._typeIds=new FI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValid(t,this.isValid(n))&&this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Wr(n,t.type)];return this.type=new oA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class d3t extends mQ{}class h3t extends mQ{constructor(t){super(t),this._offsets=new FI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class m3e extends xF{constructor(t){super(t),this._values=new SF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,NX(n))}_flushPending(t,n){}}m3e.prototype._flushPending=e3e.prototype._flushPending;class p3t extends nr{visitNull(){return c3t}visitBool(){return YDt}visitInt(){return Am}visitInt8(){return e3t}visitInt16(){return t3t}visitInt32(){return n3t}visitInt64(){return r3t}visitUint8(){return i3t}visitUint16(){return s3t}visitUint32(){return o3t}visitUint64(){return a3t}visitFloat(){return CF}visitFloat16(){return QDt}visitFloat32(){return JDt}visitFloat64(){return ZDt}visitUtf8(){return m3e}visitBinary(){return e3e}visitFixedSizeBinary(){return i3e}visitDate(){return TF}visitDateDay(){return t3e}visitDateMillisecond(){return n3e}visitTimestamp(){return PS}visitTimestampSecond(){return a3e}visitTimestampMillisecond(){return u3e}visitTimestampMicrosecond(){return l3e}visitTimestampNanosecond(){return c3e}visitTime(){return kS}visitTimeSecond(){return f3e}visitTimeMillisecond(){return d3e}visitTimeMicrosecond(){return h3e}visitTimeNanosecond(){return p3e}visitDecimal(){return r3e}visitList(){return u3t}visitStruct(){return f3t}visitUnion(){return mQ}visitDenseUnion(){return h3t}visitSparseUnion(){return d3t}visitDictionary(){return KDt}visitInterval(){return AF}visitIntervalDayTime(){return s3e}visitIntervalYearMonth(){return o3e}visitFixedSizeList(){return XDt}visitMap(){return l3t}}const m3t=new p3t;class yn extends nr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Yu(e,t){return t instanceof e.constructor}function jI(e,t){return e===t||Yu(e,t)}function Im(e,t){return e===t||Yu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function IF(e,t){return e===t||Yu(e,t)&&e.precision===t.precision}function g3t(e,t){return e===t||Yu(e,t)&&e.byteWidth===t.byteWidth}function gQ(e,t){return e===t||Yu(e,t)&&e.unit===t.unit}function BI(e,t){return e===t||Yu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function UI(e,t){return e===t||Yu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function y3t(e,t){return e===t||Yu(e,t)&&e.children.length===t.children.length&&I0.compareManyFields(e.children,t.children)}function v3t(e,t){return e===t||Yu(e,t)&&e.children.length===t.children.length&&I0.compareManyFields(e.children,t.children)}function yQ(e,t){return e===t||Yu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&I0.compareManyFields(e.children,t.children)}function _3t(e,t){return e===t||Yu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&I0.visit(e.indices,t.indices)&&I0.visit(e.dictionary,t.dictionary)}function vQ(e,t){return e===t||Yu(e,t)&&e.unit===t.unit}function b3t(e,t){return e===t||Yu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&I0.compareManyFields(e.children,t.children)}function w3t(e,t){return e===t||Yu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&I0.compareManyFields(e.children,t.children)}yn.prototype.visitNull=jI;yn.prototype.visitBool=jI;yn.prototype.visitInt=Im;yn.prototype.visitInt8=Im;yn.prototype.visitInt16=Im;yn.prototype.visitInt32=Im;yn.prototype.visitInt64=Im;yn.prototype.visitUint8=Im;yn.prototype.visitUint16=Im;yn.prototype.visitUint32=Im;yn.prototype.visitUint64=Im;yn.prototype.visitFloat=IF;yn.prototype.visitFloat16=IF;yn.prototype.visitFloat32=IF;yn.prototype.visitFloat64=IF;yn.prototype.visitUtf8=jI;yn.prototype.visitBinary=jI;yn.prototype.visitFixedSizeBinary=g3t;yn.prototype.visitDate=gQ;yn.prototype.visitDateDay=gQ;yn.prototype.visitDateMillisecond=gQ;yn.prototype.visitTimestamp=BI;yn.prototype.visitTimestampSecond=BI;yn.prototype.visitTimestampMillisecond=BI;yn.prototype.visitTimestampMicrosecond=BI;yn.prototype.visitTimestampNanosecond=BI;yn.prototype.visitTime=UI;yn.prototype.visitTimeSecond=UI;yn.prototype.visitTimeMillisecond=UI;yn.prototype.visitTimeMicrosecond=UI;yn.prototype.visitTimeNanosecond=UI;yn.prototype.visitDecimal=jI;yn.prototype.visitList=y3t;yn.prototype.visitStruct=v3t;yn.prototype.visitUnion=yQ;yn.prototype.visitDenseUnion=yQ;yn.prototype.visitSparseUnion=yQ;yn.prototype.visitDictionary=_3t;yn.prototype.visitInterval=vQ;yn.prototype.visitIntervalDayTime=vQ;yn.prototype.visitIntervalYearMonth=vQ;yn.prototype.visitFixedSizeList=b3t;yn.prototype.visitMap=w3t;const I0=new yn;function rH(e,t){return I0.compareSchemas(e,t)}function tM(e){const t=e.type,n=new(m3t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(tM(Object.assign(Object.assign({},l),{type:u})))}}return n}function P9(e,t){return E3t(e,t.map(n=>n.data.concat()))}function E3t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=S3t(n,o,c,t,i),o>0&&(r[s++]=oa({type:new la(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new al(e,f))]}function S3t(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:oa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var g3e;class _u{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Nr([]),this._offsets=[0],this;let i,s;t[0]instanceof Nr&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof al)return[u];if(u instanceof _u)return u.batches;if(u instanceof qr){if(u.type instanceof la)return[new al(new Nr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new _r([u[h]])),f=new Nr(l.map((h,p)=>new Wr(String(h),c[p].type))),[,d]=P9(f,c);return d.length===0?[new al(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Nr([]),!(i instanceof Nr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof al))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!rH(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??FDe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=LDe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?pQ.visit(new _r(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new _u(n,r.map(i=>new al(n,i)))}slice(t,n){const r=this.schema;[t,n]=NDe({length:this.numRows},t,n);const i=jDe(this.data,this._offsets,t,n);return new _u(r,i.map(s=>new al(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=oa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new _r(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new _r([oa({type:new tm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=P9(r,a)}return new _u(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new _u(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new _u(...P9(s,o))}}g3e=Symbol.toStringTag;_u[g3e]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Tw(hQ),e.get=Tw(ju.getVisitFn(ae.Struct)),e.set=BDe(pc.getVisitFn(ae.Struct)),e.indexOf=UDe(G3.getVisitFn(ae.Struct)),e.getByteLength=Tw(lh.getVisitFn(ae.Struct)),"Table"))(_u.prototype);var y3e;let al=class jT{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Nr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=oa({nullCount:0,type:new la(this.schema.fields),children:this.schema.fields.map(n=>oa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof qr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=yme(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Wr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Nr(r),a=oa({type:new la(r),length:s,children:i,nullCount:0});[this.schema,this.data]=yme(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=v3e(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return ju.visit(this.data,t)}set(t,n){return pc.visit(this.data,t,n)}indexOf(t,n){return G3.visit(this.data,t,n)}getByteLength(t){return lh.visit(this.data,t)}[Symbol.iterator](){return pQ.visit(new _r([this.data]))}toArray(){return[...this]}concat(...t){return new _u(this.schema,[this,...t])}slice(t,n){const[r]=new _r([this.data]).slice(t,n).data;return new jT(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new _r([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new _r([oa({type:new tm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Nr(s,new Map(this.schema.metadata)),i=oa({type:new la(s),children:o})}return new jT(r,i)}select(t){const n=this.schema.select(t),r=new la(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new jT(n,oa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=oa({type:new la(n.fields),length:this.numRows,children:r});return new jT(n,i)}};y3e=Symbol.toStringTag;al[y3e]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(al.prototype);function yme(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:oa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),oa({type:new la(i),length:n,children:s})]}function v3e(e,t,n=new Map){for(let r=-1,i=e.length;++r<i;){const o=e[r].type,a=t[r];if(Vn.isDictionary(o)){if(!n.has(o.id))a.dictionary&&n.set(o.id,a.dictionary);else if(n.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&v3e(o.children,a.children,n)}return n}class x3t extends al{constructor(t){const n=t.fields.map(i=>oa({type:i.type})),r=oa({type:new la(t.fields),nullCount:0,children:n});super(t,r)}}var nM;(function(e){e[e.BUFFER=0]="BUFFER"})(nM||(nM={}));var rM;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(rM||(rM={}));class ag{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new ag).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+si),(n||new ag).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):rM.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):nM.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,rM.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,nM.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return ag.startBodyCompression(t),ag.addCodec(t,n),ag.addMethod(t,r),ag.endBodyCompression(t)}}let _3e=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},b3e=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(n),t.offset()}},Zh=class iH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new iH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+si),(n||new iH).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new b3e).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new _3e).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new ag).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},wb=class sH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new sH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+si),(n||new sH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Zh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,t.createLong(0,0))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var iM;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(iM||(iM={}));let Hm=class nd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new nd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+si),(n||new nd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):yE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):iM.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ks).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,yE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,iM.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,t.createLong(0,0))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return nd.startMessage(t),nd.addVersion(t,n),nd.addHeaderType(t,r),nd.addHeader(t,i),nd.addBodyLength(t,s),nd.addCustomMetadata(t,o),nd.endMessage(t)}};var T3t=Dp;class C3t extends nr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Mv.startNull(n),Mv.endNull(n)}visitInt(t,n){return ol.startInt(n),ol.addBitWidth(n,t.bitWidth),ol.addIsSigned(n,t.isSigned),ol.endInt(n)}visitFloat(t,n){return Sd.startFloatingPoint(n),Sd.addPrecision(n,t.precision),Sd.endFloatingPoint(n)}visitBinary(t,n){return Rv.startBinary(n),Rv.endBinary(n)}visitBool(t,n){return Nv.startBool(n),Nv.endBool(n)}visitUtf8(t,n){return Fv.startUtf8(n),Fv.endUtf8(n)}visitDecimal(t,n){return gu.startDecimal(n),gu.addScale(n,t.scale),gu.addPrecision(n,t.precision),gu.addBitWidth(n,t.bitWidth),gu.endDecimal(n)}visitDate(t,n){return G$.startDate(n),G$.addUnit(n,t.unit),G$.endDate(n)}visitTime(t,n){return LT.startTime(n),LT.addUnit(n,t.unit),LT.addBitWidth(n,t.bitWidth),LT.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return FT.startTimestamp(n),FT.addUnit(n,t.unit),r!==void 0&&FT.addTimezone(n,r),FT.endTimestamp(n)}visitInterval(t,n){return xd.startInterval(n),xd.addUnit(n,t.unit),xd.endInterval(n)}visitList(t,n){return Dv.startList(n),Dv.endList(n)}visitStruct(t,n){return Lv.startStruct_(n),Lv.endStruct_(n)}visitUnion(t,n){rv.startTypeIdsVector(n,t.typeIds.length);const r=rv.createTypeIdsVector(n,t.typeIds);return rv.startUnion(n),rv.addMode(n,t.mode),rv.addTypeIds(n,r),rv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return cp.startDictionaryEncoding(n),cp.addId(n,new T3t(t.id,0)),cp.addIsOrdered(n,t.isOrdered),r!==void 0&&cp.addIndexType(n,r),cp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return wd.startFixedSizeBinary(n),wd.addByteWidth(n,t.byteWidth),wd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Ed.startFixedSizeList(n),Ed.addListSize(n,t.listSize),Ed.endFixedSizeList(n)}visitMap(t,n){return Y$.startMap(n),Y$.addKeysSorted(n,t.keysSorted),Y$.endMap(n)}}const k9=new C3t;function A3t(e,t=new Map){return new Nr(O3t(e,t),X$(e.customMetadata),t)}function w3e(e){return new xl(e.count,E3e(e.columns),S3e(e.columns))}function I3t(e){return new ch(w3e(e.data),e.id,e.isDelta)}function O3t(e,t){return(e.fields||[]).filter(Boolean).map(n=>Wr.fromJSON(n,t))}function vme(e,t){return(e.children||[]).filter(Boolean).map(n=>Wr.fromJSON(n,t))}function E3e(e){return(e||[]).reduce((t,n)=>[...t,new __(n.count,P3t(n.VALIDITY)),...E3e(n.children)],[])}function S3e(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new kd(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new kd(t.length,i.TYPE.length)),i.OFFSET&&t.push(new kd(t.length,i.OFFSET.length)),i.DATA&&t.push(new kd(t.length,i.DATA.length)),t=S3e(i.children,t)}return t}function P3t(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function k3t(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=bme(e,vme(e,t)),i=new Wr(e.name,o,e.nullable,X$(e.customMetadata))):t.has(n=s.id)?(r=(r=s.indexType)?_me(r):new x0,a=new C0(t.get(n),r,n,s.isOrdered),i=new Wr(e.name,a,e.nullable,X$(e.customMetadata))):(r=(r=s.indexType)?_me(r):new x0,t.set(n,o=bme(e,vme(e,t))),a=new C0(o,r,n,s.isOrdered),i=new Wr(e.name,a,e.nullable,X$(e.customMetadata))),i||null}function X$(e){return new Map(Object.entries(e||{}))}function _me(e){return new Xa(e.isSigned,e.bitWidth)}function bme(e,t){const n=e.type.name;switch(n){case"NONE":return new tm;case"null":return new tm;case"binary":return new iA;case"utf8":return new dE;case"bool":return new sA;case"list":return new mE((t||[])[0]);case"struct":return new la(t||[]);case"struct_":return new la(t||[])}switch(n){case"int":{const r=e.type;return new Xa(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new T0(Ro[r.precision])}case"decimal":{const r=e.type;return new H3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new hE(ah[r.unit])}case"time":{const r=e.type;return new nm(Zn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new q3(Zn[r.unit],r.timezone)}case"interval":{const r=e.type;return new pE(uh[r.unit])}case"union":{const r=e.type;return new oA(hc[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new W3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new gE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new aA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var C1=Dp,$3t=QDe,R3t=K3;class Td{constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,n){const r=new Td(0,ll.V4,n);return r._createHeader=N3t(t,n),r}static decode(t){t=new R3t(Mr(t));const n=Hm.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Td(r,i,s);return o._createHeader=D3t(n,s),o}static encode(t){const n=new $3t;let r=-1;return t.isSchema()?r=Nr.encode(n,t.header()):t.isRecordBatch()?r=xl.encode(n,t.header()):t.isDictionaryBatch()&&(r=ch.encode(n,t.header())),Hm.startMessage(n),Hm.addVersion(n,ll.V4),Hm.addHeader(n,r),Hm.addHeaderType(n,t.headerType),Hm.addBodyLength(n,new C1(t.bodyLength,0)),Hm.finishMessageBuffer(n,Hm.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Nr)return new Td(0,ll.V4,Zs.Schema,t);if(t instanceof xl)return new Td(n,ll.V4,Zs.RecordBatch,t);if(t instanceof ch)return new Td(n,ll.V4,Zs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Zs.Schema}isRecordBatch(){return this.headerType===Zs.RecordBatch}isDictionaryBatch(){return this.headerType===Zs.DictionaryBatch}}class xl{constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class ch{constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=typeof n=="number"?n:n.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class kd{constructor(t,n){this.offset=typeof t=="number"?t:t.low,this.length=typeof n=="number"?n:n.low}}class __{constructor(t,n){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof n=="number"?n:n.low}}function N3t(e,t){return()=>{switch(t){case Zs.Schema:return Nr.fromJSON(e);case Zs.RecordBatch:return xl.fromJSON(e);case Zs.DictionaryBatch:return ch.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Zs[t]}, type: ${t} }`)}}function D3t(e,t){return()=>{switch(t){case Zs.Schema:return Nr.decode(e.header(new cd));case Zs.RecordBatch:return xl.decode(e.header(new Zh),e.version());case Zs.DictionaryBatch:return ch.decode(e.header(new wb),e.version())}throw new Error(`Unrecognized Message type: { name: ${Zs[t]}, type: ${t} }`)}}Wr.encode=W3t;Wr.decode=H3t;Wr.fromJSON=k3t;Nr.encode=q3t;Nr.decode=M3t;Nr.fromJSON=A3t;xl.encode=G3t;xl.decode=L3t;xl.fromJSON=w3e;ch.encode=Y3t;ch.decode=F3t;ch.fromJSON=I3t;__.encode=K3t;__.decode=B3t;kd.encode=X3t;kd.decode=j3t;function M3t(e,t=new Map){const n=V3t(e,t);return new Nr(n,Q$(e),t)}function L3t(e,t=ll.V4){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new xl(e.length(),U3t(e),z3t(e,t))}function F3t(e,t=ll.V4){return new ch(xl.decode(e.data(),t),e.id(),e.isDelta())}function j3t(e){return new kd(e.offset(),e.length())}function B3t(e){return new __(e.length(),e.nullCount())}function U3t(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=__.decode(n));return t}function z3t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<ll.V4&&(r.bb_pos+=8*(i+1)),n[++s]=kd.decode(r));return n}function V3t(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Wr.decode(r,t));return n}function wme(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Wr.decode(r,t));return n}function H3t(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Sme(e,wme(e,t)),r=new Wr(e.name(),i,e.nullable(),Q$(e))):t.has(n=a.id().low)?(s=(s=a.indexType())?Eme(s):new x0,o=new C0(t.get(n),s,n,a.isOrdered()),r=new Wr(e.name(),o,e.nullable(),Q$(e))):(s=(s=a.indexType())?Eme(s):new x0,t.set(n,i=Sme(e,wme(e,t))),o=new C0(i,s,n,a.isOrdered()),r=new Wr(e.name(),o,e.nullable(),Q$(e))),r||null}function Q$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Eme(e){return new Xa(e.isSigned(),e.bitWidth())}function Sme(e,t){const n=e.typeType();switch(n){case Li.NONE:return new tm;case Li.Null:return new tm;case Li.Binary:return new iA;case Li.Utf8:return new dE;case Li.Bool:return new sA;case Li.List:return new mE((t||[])[0]);case Li.Struct_:return new la(t||[])}switch(n){case Li.Int:{const r=e.type(new ol);return new Xa(r.isSigned(),r.bitWidth())}case Li.FloatingPoint:{const r=e.type(new Sd);return new T0(r.precision())}case Li.Decimal:{const r=e.type(new gu);return new H3(r.scale(),r.precision(),r.bitWidth())}case Li.Date:{const r=e.type(new G$);return new hE(r.unit())}case Li.Time:{const r=e.type(new LT);return new nm(r.unit(),r.bitWidth())}case Li.Timestamp:{const r=e.type(new FT);return new q3(r.unit(),r.timezone())}case Li.Interval:{const r=e.type(new xd);return new pE(r.unit())}case Li.Union:{const r=e.type(new rv);return new oA(r.mode(),r.typeIdsArray()||[],t||[])}case Li.FixedSizeBinary:{const r=e.type(new wd);return new W3(r.byteWidth())}case Li.FixedSizeList:{const r=e.type(new Ed);return new gE(r.listSize(),(t||[])[0])}case Li.Map:{const r=e.type(new Y$);return new aA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Li[n]}" (${n})`)}function q3t(e,t){const n=t.fields.map(s=>Wr.encode(e,s));cd.startFieldsVector(e,n.length);const r=cd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?cd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ks.startKeyValue(e),ks.addKey(e,a),ks.addValue(e,u),ks.endKeyValue(e)})):-1;return cd.startSchema(e),cd.addFields(e,r),cd.addEndianness(e,Q3t?vE.Little:vE.Big),i!==-1&&cd.addCustomMetadata(e,i),cd.endSchema(e)}function W3t(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Vn.isDictionary(s)?(o=s.dictionary.typeId,i=k9.visit(s,e),r=k9.visit(s.dictionary,e)):r=k9.visit(s,e);const a=(s.children||[]).map(c=>Wr.encode(e,c)),u=Hl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Hl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ks.startKeyValue(e),ks.addKey(e,d),ks.addValue(e,h),ks.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Hl.startField(e),Hl.addType(e,r),Hl.addTypeType(e,o),Hl.addChildren(e,u),Hl.addNullable(e,!!t.nullable),n!==-1&&Hl.addName(e,n),i!==-1&&Hl.addDictionary(e,i),l!==-1&&Hl.addCustomMetadata(e,l),Hl.endField(e)}function G3t(e,t){const n=t.nodes||[],r=t.buffers||[];Zh.startNodesVector(e,n.length);for(const o of n.slice().reverse())__.encode(e,o);const i=e.endVector();Zh.startBuffersVector(e,r.length);for(const o of r.slice().reverse())kd.encode(e,o);const s=e.endVector();return Zh.startRecordBatch(e),Zh.addLength(e,new C1(t.length,0)),Zh.addNodes(e,i),Zh.addBuffers(e,s),Zh.endRecordBatch(e)}function Y3t(e,t){const n=xl.encode(e,t.data);return wb.startDictionaryBatch(e),wb.addId(e,new C1(t.id,0)),wb.addIsDelta(e,t.isDelta),wb.addData(e,n),wb.endDictionaryBatch(e)}function K3t(e,t){return b3e.createFieldNode(e,new C1(t.length,0),new C1(t.nullCount,0))}function X3t(e,t){return _3e.createBuffer(e,new C1(t.offset,0),new C1(t.length,0))}const Q3t=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),oH="ARROW1",_Q=new Uint8Array(oH.length);for(let e=0;e<oH.length;e+=1)_Q[e]=oH.codePointAt(e);_Q.length;class Ts extends nr{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof al?s.data.children:s.data),r=new Ts;return r.visitMany(n(t)),r}visit(t){if(t instanceof _r)return this.visitMany(t.data),this;const{type:n}=t;if(!Vn.isDictionary(n)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Vn.isNull(n)||Sf.call(this,i<=0?new Uint8Array(0):cQ(t.offset,r,t.nullBitmap)),this.nodes.push(new __(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Sf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new kd(this._byteLength,t)),this._byteLength+=t,this}function J3t(e){const{type:t,length:n,typeIds:r,valueOffsets:i}=e;if(Sf.call(this,r),t.mode===hc.Sparse)return aH.call(this,e);if(t.mode===hc.Dense){if(e.offset<=0)return Sf.call(this,i),aH.call(this,e);{const s=r.reduce((c,f)=>Math.max(c,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),u=new Int32Array(n),l=LX(-i[0],n,i);for(let c,f,d=-1;++d<n;)(f=a[c=r[d]])===-1&&(f=a[c]=l[c]),u[d]=l[d]-f,++o[c];Sf.call(this,u);for(let c,f=-1,d=t.children.length;++f<d;)if(c=e.children[f]){const h=t.typeIds[f],p=Math.min(n,o[h]);this.visit(c.slice(a[h],p))}}}return this}function Z3t(e){let t;return e.nullCount>=e.length?Sf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Sf.call(this,cQ(e.offset,e.length,t)):Sf.call(this,MDe(e.values))}function hy(e){return Sf.call(this,e.values.subarray(0,e.length*e.stride))}function x3e(e){const{length:t,values:n,valueOffsets:r}=e,i=r[0],s=r[t],o=Math.min(s-i,n.byteLength-i);return Sf.call(this,LX(-r[0],t,r)),Sf.call(this,n.subarray(i,i+o)),this}function bQ(e){const{length:t,valueOffsets:n}=e;return n&&Sf.call(this,LX(n[0],t,n)),this.visit(e.children[0])}function aH(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ts.prototype.visitBool=Z3t;Ts.prototype.visitInt=hy;Ts.prototype.visitFloat=hy;Ts.prototype.visitUtf8=x3e;Ts.prototype.visitBinary=x3e;Ts.prototype.visitFixedSizeBinary=hy;Ts.prototype.visitDate=hy;Ts.prototype.visitTimestamp=hy;Ts.prototype.visitTime=hy;Ts.prototype.visitDecimal=hy;Ts.prototype.visitList=bQ;Ts.prototype.visitStruct=aH;Ts.prototype.visitUnion=J3t;Ts.prototype.visitInterval=hy;Ts.prototype.visitFixedSizeList=bQ;Ts.prototype.visitMap=bQ;class T3e extends ZDe{constructor(t){super(),this._position=0,this._started=!1,this._sink=new O9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ly(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return _F(t)?t.then(n=>this.writeAll(n)):bF(t)?xQ(this,t):SQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof O9?this._sink=t:(this._sink=new O9,t&&aNt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&uNt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!rH(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof _u&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof al&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!rH(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof al?t instanceof x3t||this._writeRecordBatch(t):t instanceof _u?this.writeAll(t.batches):DX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Td.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Zs.RecordBatch?this._recordBatchBlocks.push(new A0(a,t.bodyLength,this._position)):t.headerType===Zs.DictionaryBatch&&this._dictionaryBlocks.push(new A0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Mr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Td.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(_Q)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ts.assemble(t),o=new xl(t.numRows,r,i),a=Td.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ts.assemble(new _r([t])),u=new xl(t.length,s,o),l=new ch(u,n,r),c=Td.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class wQ extends T3e{static writeAll(t,n){const r=new wQ(n);return _F(t)?t.then(i=>r.writeAll(i)):bF(t)?xQ(r,t):SQ(r,t)}}class EQ extends T3e{static writeAll(t){const n=new EQ;return _F(t)?t.then(r=>n.writeAll(r)):bF(t)?xQ(n,t):SQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=nH.encode(new nH(t,ll.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function SQ(e,t){let n=t;t instanceof _u&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function xQ(e,t){var n,r,i,s;return up(this,void 0,void 0,function*(){try{for(n=j2(t);r=yield n.next(),!r.done;){const o=r.value;e.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}return e.finish()})}function eMt(e,t="stream"){return(t==="stream"?wQ:EQ).writeAll(e).toUint8Array(!0)}function TQ(e,t=1){return(e*t+63&-64||64)/t}function O0(e,t,n=e.BYTES_PER_ELEMENT){return new e(TQ(t,n))}function CQ(e){return e instanceof qr?e:new qr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function tMt(e){return new _r([CQ(e)])}const AQ=new TextEncoder;function nMt(e,t,n){const r=AQ.encode(n);return e.set(r,t),r.length}function rMt(e,t,n){return AQ.encodeInto(n,e.subarray(t)).written}const iMt=AQ.encodeInto?rMt:nMt;function xme(e,t){const n=O0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function sMt(e,t){const n=O0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function oMt(e,t){const n=O0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function aMt(e,t){const n=O0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function uMt(e){const t=tM({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function lMt(e,t,n){const r=O0(Int32Array,t+1),i=O0(Uint8Array,3*n);let s=0;return{set(o,a){s+=iMt(i,s,o),r[a+1]=s},data:()=>{const o=TQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function cMt(e,t){const n=[],r=O0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:fMt(e.dictionary,n,o)})}}function fMt(e,t,n){const r=lMt(e,t.length,n);return t.forEach(r.set),tMt(r.data())}function dMt(e,t){const n=O0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function hMt(e,t,n=!0){let r;switch(e.typeId){case ae.Int:r=e.bitWidth<64?xme:null;break;case ae.Float:r=e.precision>0?xme:null;break;case ae.Dictionary:r=e.dictionary.typeId===ae.Utf8&&e.indices.typeId===ae.Int&&e.indices.bitWidth<64?cMt:null;break;case ae.Bool:r=sMt;break;case ae.Date:r=e.unit?aMt:oMt;break}return r==null?uMt(e):n?dMt(r(e,t),t):r(e,t)}function pMt(e,t){const n=e.length,r=TQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),CQ({type:t,length:n,buffers:[null,i]})}function C3e(e,t,n,r,i=!0){const s=hMt(r,e,i);return t(n,s.set),CQ(s.data())}function IQ(e){if(e instanceof Vn||e==null)return e;switch(e){case ae.Binary:return new iA;case ae.Bool:return new sA;case ae.DateDay:return new ENt;case ae.DateMillisecond:case ae.Date:return new SNt;case ae.Dictionary:return new C0(new dE,new x0);case ae.Float16:return new rDe;case ae.Float32:return new WX;case ae.Float64:case ae.Float:return new GX;case ae.Int8:return new jX;case ae.Int16:return new BX;case ae.Int32:case ae.Int:return new x0;case ae.Int64:return new UX;case ae.IntervalDayTime:return new INt;case ae.Interval:case ae.IntervalYearMonth:return new ONt;case ae.Null:return new tm;case ae.TimeMicrosecond:return new CNt;case ae.TimeMillisecond:case ae.Time:return new TNt;case ae.TimeNanosecond:return new ANt;case ae.TimeSecond:return new xNt;case ae.Uint8:return new zX;case ae.Uint16:return new VX;case ae.Uint32:return new HX;case ae.Uint64:return new qX;case ae.Utf8:return new dE;default:In(`Unsupported type code: ${sh(e)}. Use a data type constructor instead?`)}}function mMt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function A3e(e,t){const n=uH();return e(t,n.add),n}function uH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(em(t))++e.dates,mMt(t)&&++e.utcdays;else if(kv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=uH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=uH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return IQ(gMt(e))}};return e}function gMt(e){const t=e.count-e.nulls;if(t===0)return ae.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?ae.Float64:n<128?ae.Int8:n<32768?ae.Int16:ae.Int32:n>=2**32?ae.Float64:n<256?ae.Uint8:n<65536?ae.Uint16:ae.Uint32}else{if(e.nums===t)return ae.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?ae.Int64:In(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?ae.Uint64:In(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return ae.Bool;if(e.utcdays===t)return ae.DateDay;if(e.dates===t)return ae.DateMillisecond;if(e.arrays===t){const n=Wr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new gE(e.minlen,n):new mE(n)}else if(e.structs===t){const n=e.struct_prof;return new la(Object.keys(n).map(r=>Wr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return ae.Dictionary;In("Type inference failure")}}}}function yMt(e,t,n,r,i,s=!0){if(i=IQ(i),!i){const o=A3e(r,t);s=o.nulls>0,i=o.type()}return C3e(n,r,t,i,s)}function vMt(e,t,n,r,i,s=!0){i=IQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=_Mt(o);if(u&&a&&Tme(u.type,i))return u;const l=o.data;if(MI(l)){const c=bMt(l);if(a&&c&&Tme(c,i))return pMt(l,c);i=i||c,s=!1}if(!i){const c=A3e(r,o);s=c.nulls>0,i=c.type()}return C3e(n,r,o,i,s)}function _Mt(e){return e instanceof _r?e:e.vector instanceof _r?e.vector:null}function bMt(e){const n={Float32Array:WX,Float64Array:GX,Int8Array:jX,Int16Array:BX,Int32Array:x0,Uint8Array:zX,Uint16Array:VX,Uint32Array:HX,BigInt64Array:UX,BigUint64Array:qX}[e.constructor.name];return n?new n:null}function Tme(e,t){return!e||!t?!0:e.compareTo(t)}function wMt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function EMt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&kv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const SMt=()=>In("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function xMt(){try{return _u}catch{SMt()}}function I3e(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=TMt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&In("Column length mismatch"),a[l]=c});const u=xMt();return new u(a)}function TMt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=wi(n)?n(e):vr(n)?n:null;if(vr(e))return{dataFrom:yMt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:wMt(e,r,i)};if(CMt(e))return{dataFrom:vMt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:EMt(e,r,i)};In("Unsupported input data type")}function CMt(e){return e&&wi(e.reify)}function AMt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return eMt(I3e(e,r),n)}function IMt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function OMt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&em(u))++i,IMt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function OF(e,t){return wi(t)?t(e):t||e.columnNames()}function O3e(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=OMt(PMt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function PMt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function OQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function kMt(e,t={}){const n=OF(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":em(l)?yF(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return OQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function P3e(e,t={}){if(wi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(em(e))return t.utc?yF(e):uNe(e);{const r=JSON.stringify(e,(s,o)=>MI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function PF(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function $Mt(e,t={}){const n=OF(e,t.columns),{align:r,format:i}=O3e(e,n,t),s=RMt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(P3e(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",_=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return OQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function RMt(e){return PF(e.style,t=>wi(t)?t:()=>t)}function NMt(e,t=!0,n=!1){return e===void 0||e?t:n}const DMt=e=>em(e)?yF(e,!0):e;function MMt(e,t={}){const n=NMt(t.schema),r=t.format||{},i=OF(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||DMt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function LMt(e,t={}){const n=OF(e,t.columns),{align:r,format:i}=O3e(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return OQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(P3e(u,i[l]))+"|"}}),a+`
`}function k3e(e,t){for(const[n,r]of vF(t))e.set(n,r);return e}function FMt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function rm(e,t,n=new Map){return t=Ka(t)?e.columnName(t):t,Bo(t)?n.set(t,t):vr(t)?t.forEach(r=>rm(e,r,n)):wi(t)?rm(e,t(e),n):_a(t)?k3e(n,t):In(`Invalid column selection: ${sh(t)}`),n}function kF(e,t){return e.toObject=t,e}function $3e(e){return vr(e)?e.map($3e):e&&e.toObject?e.toObject():e}function bE(){return kF(e=>e.columnNames(),()=>({all:[]}))}function R3e(...e){return e=e.flat(),kF(t=>{const n=rm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:$3e(e)}))}function jMt(e,t){return kF(n=>{let r=Ka(e)?e:n.columnIndex(e),i=Ka(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function BMt(e){return Bo(e)&&(e=RegExp(FMt(e))),kF(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function UMt(e){return MI(e.data)?e.data.constructor:Array}class fp extends oRt{static from(t,n){return new fp(lRt(t,n),n)}static new(t,n){if(t instanceof fp)return t;const r={},i=[];for(const[s,o]of vF(t))r[s]=o,i.push(s);return new fp(r,n||i)}constructor(t,n,r,i,s,o){PF(t,uRt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new fp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:FRt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Ml(r).groupby(r.groups());return t.forEach(s=>{s=fp.new(s),s.numRows()!==n&&In("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):In(`Unrecognized column: ${t}`)}object(t=0){return Cme(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=rm(this,t.columns||bE()),o=RNe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),BRt(this,u,a,n)}return a}*[Symbol.iterator](){const t=Cme(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(UMt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=jRt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return I3e(this,t)}toArrowBuffer(t){return AMt(this,t)}toCSV(t){return kMt(this,t)}toHTML(t){return $Mt(this,t)}toJSON(t){return MMt(this,t)}toMarkdown(t){return LMt(this,t)}}function Cme(e){let t=e._builder;if(!t){const n=RNe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class zMt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function ar(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=VMt[e.type];s&&s(e,t,n)}const mk=(e,t,n)=>{ar(e.argument,t,n,e)},$9=(e,t,n)=>{ar(e.left,t,n,e),ar(e.right,t,n,e)},Ame=(e,t,n)=>{ar(e.test,t,n,e),ar(e.consequent,t,n,e),e.alternate&&ar(e.alternate,t,n,e)},R9=(e,t,n)=>{fd(e.params,t,n,e),ar(e.body,t,n,e)},Ime=(e,t,n)=>{ar(e.callee,t,n,e),fd(e.arguments,t,n,e)},fd=(e,t,n,r)=>{e.forEach(i=>ar(i,t,n,r))},VMt={TemplateLiteral:(e,t,n)=>{fd(e.expressions,t,n,e),fd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{ar(e.object,t,n,e),ar(e.property,t,n,e)},CallExpression:Ime,NewExpression:Ime,ArrayExpression:(e,t,n)=>{fd(e.elements,t,n,e)},AssignmentExpression:$9,AwaitExpression:mk,BinaryExpression:$9,LogicalExpression:$9,UnaryExpression:mk,UpdateExpression:mk,ConditionalExpression:Ame,ObjectExpression:(e,t,n)=>{fd(e.properties,t,n,e)},Property:(e,t,n)=>{ar(e.key,t,n,e),ar(e.value,t,n,e)},ArrowFunctionExpression:R9,FunctionExpression:R9,FunctionDeclaration:R9,VariableDeclaration:(e,t,n)=>{fd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{ar(e.id,t,n,e),ar(e.init,t,n,e)},SpreadElement:(e,t,n)=>{ar(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{fd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{ar(e.expression,t,n,e)},IfStatement:Ame,ForStatement:(e,t,n)=>{ar(e.init,t,n,e),ar(e.test,t,n,e),ar(e.update,t,n,e),ar(e.body,t,n,e)},WhileStatement:(e,t,n)=>{ar(e.test,t,n,e),ar(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{ar(e.body,t,n,e),ar(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{ar(e.discriminant,t,n,e),fd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&ar(e.test,t,n,e),fd(e.consequent,t,n,e)},ReturnStatement:mk,Program:(e,t,n)=>{ar(e.body[0],t,n,e)}};function N3e(e){delete e.start,delete e.end,delete e.optional}function Ome(e){N3e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function HMt(e){return ar(e,null,{Column:Ome,Constant:Ome,Default:N3e}),e}function Rs(e,t){return t&&t.type===e}function qMt(e){return Rs(VRt,e)||Rs(zRt,e)}function WMt(e){return wi(e)?e:()=>e}const GMt="Escaped functions are not valid as rollup or pivot values.";function YMt(e,t,n){e.aggronly&&In(GMt);const r="(row,data)=>fn("+$Ne(e.table.columnNames())+",$)";return{escape:RX.escape(r,WMt(t.expr),n)}}var KMt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],D3e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],XMt="-----------------------------------------------------------------------------------------------------------------------------------------------------",M3e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",N9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},D9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",QMt={5:D9,"5module":D9+" export import",6:D9+" const class extends export import super"},JMt=/^in(stanceof)?$/,ZMt=new RegExp("["+M3e+"]"),eLt=new RegExp("["+M3e+XMt+"]");function lH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function im(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&ZMt.test(String.fromCharCode(e)):t===!1?!1:lH(e,D3e)}function wE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&eLt.test(String.fromCharCode(e)):t===!1?!1:lH(e,D3e)||lH(e,KMt)}var cr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Bl(e,t){return new cr(e,{beforeExpr:!0,binop:t})}var Ul={beforeExpr:!0},lu={startsExpr:!0},PQ={};function Xn(e,t){return t===void 0&&(t={}),t.keyword=e,PQ[e]=new cr(e,t)}var X={num:new cr("num",lu),regexp:new cr("regexp",lu),string:new cr("string",lu),name:new cr("name",lu),privateId:new cr("privateId",lu),eof:new cr("eof"),bracketL:new cr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new cr("]"),braceL:new cr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new cr("}"),parenL:new cr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new cr(")"),comma:new cr(",",Ul),semi:new cr(";",Ul),colon:new cr(":",Ul),dot:new cr("."),question:new cr("?",Ul),questionDot:new cr("?."),arrow:new cr("=>",Ul),template:new cr("template"),invalidTemplate:new cr("invalidTemplate"),ellipsis:new cr("...",Ul),backQuote:new cr("`",lu),dollarBraceL:new cr("${",{beforeExpr:!0,startsExpr:!0}),eq:new cr("=",{beforeExpr:!0,isAssign:!0}),assign:new cr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new cr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new cr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Bl("||",1),logicalAND:Bl("&&",2),bitwiseOR:Bl("|",3),bitwiseXOR:Bl("^",4),bitwiseAND:Bl("&",5),equality:Bl("==/!=/===/!==",6),relational:Bl("</>/<=/>=",7),bitShift:Bl("<</>>/>>>",8),plusMin:new cr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Bl("%",10),star:Bl("*",10),slash:Bl("/",10),starstar:new cr("**",{beforeExpr:!0}),coalesce:Bl("??",1),_break:Xn("break"),_case:Xn("case",Ul),_catch:Xn("catch"),_continue:Xn("continue"),_debugger:Xn("debugger"),_default:Xn("default",Ul),_do:Xn("do",{isLoop:!0,beforeExpr:!0}),_else:Xn("else",Ul),_finally:Xn("finally"),_for:Xn("for",{isLoop:!0}),_function:Xn("function",lu),_if:Xn("if"),_return:Xn("return",Ul),_switch:Xn("switch"),_throw:Xn("throw",Ul),_try:Xn("try"),_var:Xn("var"),_const:Xn("const"),_while:Xn("while",{isLoop:!0}),_with:Xn("with"),_new:Xn("new",{beforeExpr:!0,startsExpr:!0}),_this:Xn("this",lu),_super:Xn("super",lu),_class:Xn("class",lu),_extends:Xn("extends",Ul),_export:Xn("export"),_import:Xn("import",lu),_null:Xn("null",lu),_true:Xn("true",lu),_false:Xn("false",lu),_in:Xn("in",{beforeExpr:!0,binop:7}),_instanceof:Xn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Xn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Xn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Xn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Oc=/\r\n?|\n|\u2028|\u2029/,tLt=new RegExp(Oc.source,"g");function $S(e){return e===10||e===13||e===8232||e===8233}function L3e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if($S(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var F3e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Jl=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,j3e=Object.prototype,nLt=j3e.hasOwnProperty,rLt=j3e.toString,zI=Object.hasOwn||function(e,t){return nLt.call(e,t)},Pme=Array.isArray||function(e){return rLt.call(e)==="[object Array]"},kme=Object.create(null);function Ig(e){return kme[e]||(kme[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function P0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var iLt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,uA=function(t,n){this.line=t,this.column=n};uA.prototype.offset=function(t){return new uA(this.line,this.column+t)};var $F=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function B3e(e,t){for(var n=1,r=0;;){var i=L3e(e,r,t);if(i<0)return new uA(n,t-r);++n,r=i}}var cH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},$me=!1;function sLt(e){var t={};for(var n in cH)t[n]=e&&zI(e,n)?e[n]:cH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!$me&&typeof console=="object"&&console.warn&&($me=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Pme(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Pme(t.onComment)&&(t.onComment=oLt(t,t.onComment)),t}function oLt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new $F(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var lA=1,RS=2,kQ=4,U3e=8,z3e=16,V3e=32,$Q=64,H3e=128,VI=256,RQ=lA|RS|VI;function NQ(e,t){return RS|(e?kQ:0)|(t?U3e:0)}var sM=0,DQ=1,Om=2,q3e=3,W3e=4,G3e=5,Vs=function(t,n,r){this.options=t=sLt(t),this.sourceFile=t.sourceFile,this.keywords=Ig(QMt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=N9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Ig(i);var s=(i?i+" ":"")+N9.strict;this.reservedWordsStrict=Ig(s),this.reservedWordsStrictBind=Ig(s+" "+N9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Oc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=X.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(lA),this.regexpState=null,this.privateNameStack=[]},xh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Vs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};xh.inFunction.get=function(){return(this.currentVarScope().flags&RS)>0};xh.inGenerator.get=function(){return(this.currentVarScope().flags&U3e)>0&&!this.currentVarScope().inClassFieldInit};xh.inAsync.get=function(){return(this.currentVarScope().flags&kQ)>0&&!this.currentVarScope().inClassFieldInit};xh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&VI)return!1;if(t.flags&RS)return(t.flags&kQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};xh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&$Q)>0||n||this.options.allowSuperOutsideMethod};xh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&H3e)>0};xh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};xh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(RS|VI))>0||n};xh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&VI)>0};Vs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Vs.parse=function(t,n){return new this(n,t).parse()};Vs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Vs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Vs.prototype,xh);var su=Vs.prototype,aLt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;su.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Jl.lastIndex=e,e+=Jl.exec(this.input)[0].length;var t=aLt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Jl.lastIndex=e+t[0].length;var n=Jl.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Oc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Jl.lastIndex=e,e+=Jl.exec(this.input)[0].length,this.input[e]===";"&&e++}};su.eat=function(e){return this.type===e?(this.next(),!0):!1};su.isContextual=function(e){return this.type===X.name&&this.value===e&&!this.containsEsc};su.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};su.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};su.canInsertSemicolon=function(){return this.type===X.eof||this.type===X.braceR||Oc.test(this.input.slice(this.lastTokEnd,this.start))};su.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};su.semicolon=function(){!this.eat(X.semi)&&!this.insertSemicolon()&&this.unexpected()};su.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};su.expect=function(e){this.eat(e)||this.unexpected()};su.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var RF=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};su.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};su.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};su.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};su.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Lt=Vs.prototype;Lt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==X.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var MQ={kind:"loop"},uLt={kind:"switch"};Lt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Jl.lastIndex=this.pos;var t=Jl.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(im(r,!0)){for(var i=n+1;wE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!JMt.test(s))return!0}return!1};Lt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Jl.lastIndex=this.pos;var e=Jl.exec(this.input),t=this.pos+e[0].length,n;return!Oc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(wE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Lt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=X._var,s="let"),r){case X._break:case X._continue:return this.parseBreakContinueStatement(i,r.keyword);case X._debugger:return this.parseDebuggerStatement(i);case X._do:return this.parseDoStatement(i);case X._for:return this.parseForStatement(i);case X._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case X._class:return e&&this.unexpected(),this.parseClass(i,!0);case X._if:return this.parseIfStatement(i);case X._return:return this.parseReturnStatement(i);case X._switch:return this.parseSwitchStatement(i);case X._throw:return this.parseThrowStatement(i);case X._try:return this.parseTryStatement(i);case X._const:case X._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case X._while:return this.parseWhileStatement(i);case X._with:return this.parseWithStatement(i);case X.braceL:return this.parseBlock(!0,i);case X.semi:return this.parseEmptyStatement(i);case X._export:case X._import:if(this.options.ecmaVersion>10&&r===X._import){Jl.lastIndex=this.pos;var o=Jl.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===X._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===X.name&&c.type==="Identifier"&&this.eat(X.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Lt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(X.semi)||this.insertSemicolon()?e.label=null:this.type!==X.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Lt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Lt.parseDoStatement=function(e){return this.next(),this.labels.push(MQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(X._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(X.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Lt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(MQ),this.enterScope(0),this.expect(X.parenL),this.type===X.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===X._var||this.type===X._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new RF,u=this.parseExpression(t>-1?"await":!0,a);return this.type===X._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===X._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Lt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,U2|(n?0:fH),!1,t)};Lt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(X._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Lt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(X.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Lt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(X.braceL),this.labels.push(uLt),this.enterScope(0);for(var t,n=!1;this.type!==X.braceR;)if(this.type===X._case||this.type===X._default){var r=this.type===X._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(X.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Lt.parseThrowStatement=function(e){return this.next(),Oc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var lLt=[];Lt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?V3e:0),this.checkLValPattern(e,t?W3e:Om),this.expect(X.parenR),e};Lt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===X._catch){var t=this.startNode();this.next(),this.eat(X.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(X._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Lt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Lt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(MQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Lt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Lt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Lt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===X._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Lt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Lt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(X.braceL),e&&this.enterScope(0);this.type!==X.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Lt.parseFor=function(e,t){return e.init=t,this.expect(X.semi),e.test=this.type===X.semi?null:this.parseExpression(),this.expect(X.semi),e.update=this.type===X.parenR?null:this.parseExpression(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Lt.parseForIn=function(e,t){var n=this.type===X._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(X.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Lt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(X.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===X._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===X._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(X.comma))break}return e};Lt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?DQ:Om,!1)};var U2=1,fH=2,Y3e=4;Lt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===X.star&&t&fH&&this.unexpected(),e.generator=this.eat(X.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&U2&&(e.id=t&Y3e&&this.type!==X.name?null:this.parseIdent(),e.id&&!(t&fH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?DQ:Om:q3e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(NQ(e.async,e.generator)),t&U2||(e.id=this.type===X.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&U2?"FunctionDeclaration":"FunctionExpression")};Lt.parseFunctionParams=function(e){this.expect(X.parenL),e.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Lt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(X.braceL);this.type!==X.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&cLt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Lt.parseClassElement=function(e){if(this.eat(X.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(X.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===X.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===X.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(X.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===X.parenL||o!=="method"||i||s){var l=!n.static&&oM(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Lt.isClassElementNameStart=function(){return this.type===X.name||this.type===X.privateId||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword};Lt.parseClassElementName=function(e){this.type===X.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Lt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&oM(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Lt.parseClassField=function(e){if(oM(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&oM(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(X.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Lt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(VI|$Q);this.type!==X.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Lt.parseClassId=function(e,t){this.type===X.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Om,!1)):(t===!0&&this.unexpected(),e.id=null)};Lt.parseClassSuper=function(e){e.superClass=this.eat(X._extends)?this.parseExprSubscripts(null,!1):null};Lt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Lt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];zI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function cLt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function oM(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Lt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Lt.parseExport=function(e,t){if(this.next(),this.eat(X.star))return this.parseExportAllDeclaration(e,t);if(this.eat(X._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==X.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Lt.parseExportDeclaration=function(e){return this.parseStatement(null)};Lt.parseExportDefaultDeclaration=function(){var e;if(this.type===X._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,U2|Y3e,!1,e)}else if(this.type===X._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Lt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),zI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Lt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Lt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Lt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Lt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Lt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(X.braceL);!this.eat(X.braceR);){if(n)n=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Lt.parseImport=function(e){return this.next(),this.type===X.string?(e.specifiers=lLt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===X.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Lt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Om),this.finishNode(e,"ImportSpecifier")};Lt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Om),this.finishNode(e,"ImportDefaultSpecifier")};Lt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Om),this.finishNode(e,"ImportNamespaceSpecifier")};Lt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===X.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(X.comma)))return e;if(this.type===X.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(X.braceL);!this.eat(X.braceR);){if(t)t=!1;else if(this.expect(X.comma),this.afterTrailingComma(X.braceR))break;e.push(this.parseImportSpecifier())}return e};Lt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===X.string){var e=this.parseLiteral(this.value);return iLt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Lt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Lt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Pc=Vs.prototype;Pc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Pc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Pc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Pc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==X.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Pc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case X.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(X.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case X.braceL:return this.parseObj(!0)}return this.parseIdent()};Pc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(X.comma),t&&this.type===X.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===X.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Pc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Pc.parseBindingListItem=function(e){return e};Pc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(X.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Pc.checkLValSimple=function(e,t,n){t===void 0&&(t=sM);var r=t!==sM;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Om&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(zI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==G3e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Pc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=sM),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Pc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=sM),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Vc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},ki={b_stat:new Vc("{",!1),b_expr:new Vc("{",!0),b_tmpl:new Vc("${",!1),p_stat:new Vc("(",!1),p_expr:new Vc("(",!0),q_tmpl:new Vc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Vc("function",!1),f_expr:new Vc("function",!0),f_expr_gen:new Vc("function",!0,!1,null,!0),f_gen:new Vc("function",!1,!1,null,!0)},NS=Vs.prototype;NS.initialContext=function(){return[ki.b_stat]};NS.curContext=function(){return this.context[this.context.length-1]};NS.braceIsBlock=function(e){var t=this.curContext();return t===ki.f_expr||t===ki.f_stat?!0:e===X.colon&&(t===ki.b_stat||t===ki.b_expr)?!t.isExpr:e===X._return||e===X.name&&this.exprAllowed?Oc.test(this.input.slice(this.lastTokEnd,this.start)):e===X._else||e===X.semi||e===X.eof||e===X.parenR||e===X.arrow?!0:e===X.braceL?t===ki.b_stat:e===X._var||e===X._const||e===X.name?!1:!this.exprAllowed};NS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};NS.updateContext=function(e){var t,n=this.type;n.keyword&&e===X.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};NS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};X.parenR.updateContext=X.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===ki.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};X.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ki.b_stat:ki.b_expr),this.exprAllowed=!0};X.dollarBraceL.updateContext=function(){this.context.push(ki.b_tmpl),this.exprAllowed=!0};X.parenL.updateContext=function(e){var t=e===X._if||e===X._for||e===X._with||e===X._while;this.context.push(t?ki.p_stat:ki.p_expr),this.exprAllowed=!0};X.incDec.updateContext=function(){};X._function.updateContext=X._class.updateContext=function(e){e.beforeExpr&&e!==X._else&&!(e===X.semi&&this.curContext()!==ki.p_stat)&&!(e===X._return&&Oc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===X.colon||e===X.braceL)&&this.curContext()===ki.b_stat)?this.context.push(ki.f_expr):this.context.push(ki.f_stat),this.exprAllowed=!1};X.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};X.backQuote.updateContext=function(){this.curContext()===ki.q_tmpl?this.context.pop():this.context.push(ki.q_tmpl),this.exprAllowed=!1};X.star.updateContext=function(e){if(e===X._function){var t=this.context.length-1;this.context[t]===ki.f_expr?this.context[t]=ki.f_expr_gen:this.context[t]=ki.f_gen}this.exprAllowed=!0};X.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==X.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var an=Vs.prototype;an.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};an.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===X.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(X.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};an.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new RF,r=!0);var a=this.start,u=this.startLoc;(this.type===X.parenL||this.type===X.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===X.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===X.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};an.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(X.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(X.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};an.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};an.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==X._in)&&s>r){var o=this.type===X.logicalOR||this.type===X.logicalAND,a=this.type===X.coalesce;a&&(s=X.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===X.coalesce||a&&(this.type===X.logicalOR||this.type===X.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};an.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};an.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===X.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&K3e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===X.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==X._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(X.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function K3e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&K3e(e.expression)}an.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};an.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};an.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(X.arrow)};an.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};an.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(X.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(X.bracketL);if(l||u&&this.type!==X.parenL&&this.type!==X.backQuote||this.eat(X.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(X.bracketR)):this.type===X.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(X.parenL)){var f=new RF,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===X.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};an.parseExprAtom=function(e,t,n){this.type===X.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case X._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===X.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==X.dot&&this.type!==X.bracketL&&this.type!==X.parenL&&this.unexpected(),this.finishNode(r,"Super");case X._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case X.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(X._function))return this.overrideContext(ki.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(X.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===X.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(X.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case X.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case X.num:case X.string:return this.parseLiteral(this.value);case X._null:case X._true:case X._false:return r=this.startNode(),r.value=this.type===X._null?null:this.type===X._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case X.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case X.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(X.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case X.braceL:return this.overrideContext(ki.b_expr),this.parseObj(!1,e);case X._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case X._class:return this.parseClass(this.startNode(),!1);case X._new:return this.parseNew();case X.backQuote:return this.parseTemplate();case X._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};an.parseExprAtomDefault=function(){this.unexpected()};an.parseExprImport=function(e){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var n=this.parseIdent(!0);if(this.type===X.parenL&&!e)return this.parseDynamicImport(t);if(this.type===X.dot)return t.meta=n,this.parseImportMeta(t);this.unexpected()};an.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(X.parenR)){var t=this.start;this.eat(X.comma)&&this.eat(X.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};an.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};an.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};an.parseParenExpression=function(){this.expect(X.parenL);var e=this.parseExpression();return this.expect(X.parenR),e};an.shouldParseArrow=function(e){return!this.canInsertSemicolon()};an.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new RF,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==X.parenR;)if(l?l=!1:this.expect(X.comma),s&&this.afterTrailingComma(X.parenR,!0)){c=!0;break}else if(this.type===X.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(X.parenR),e&&this.shouldParseArrow(u)&&this.eat(X.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};an.parseParenItem=function(e){return e};an.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var fLt=[];an.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===X.dot){var t=this.startNodeAt(e.start,e.startLoc);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(X.parenL)?e.arguments=this.parseExprList(X.parenR,this.options.ecmaVersion>=8,!1):e.arguments=fLt,this.finishNode(e,"NewExpression")};an.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===X.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===X.backQuote,this.finishNode(n,"TemplateElement")};an.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===X.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(X.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(X.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};an.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===X.name||this.type===X.num||this.type===X.string||this.type===X.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===X.star)&&!Oc.test(this.input.slice(this.lastTokEnd,this.start))};an.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(X.braceR);){if(r)r=!1;else if(this.expect(X.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(X.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};an.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(X.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===X.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===X.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(X.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(X.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};an.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};an.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===X.colon&&this.unexpected(),this.eat(X.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===X.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==X.comma&&this.type!==X.braceR&&this.type!==X.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===X.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};an.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(X.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(X.bracketR),e.key;e.computed=!1}return e.key=this.type===X.num||this.type===X.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};an.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};an.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(NQ(t,r.generator)|$Q|(n?H3e:0)),this.expect(X.parenL),r.params=this.parseBindingList(X.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};an.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(NQ(n,!1)|z3e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};an.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==X.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,G3e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};an.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};an.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,DQ,t?null:n)}};an.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(X.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===X.comma?o=null:this.type===X.ellipsis?(o=this.parseSpread(r),r&&this.type===X.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};an.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};an.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};an.parseIdentNode=function(){var e=this.startNode();return this.type===X.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=X.name):this.unexpected(),e};an.parsePrivateIdent=function(){var e=this.startNode();return this.type===X.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};an.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===X.semi||this.canInsertSemicolon()||this.type!==X.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(X.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};an.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var aM=Vs.prototype;aM.raise=function(e,t){var n=B3e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};aM.raiseRecoverable=aM.raise;aM.curPosition=function(){if(this.options.locations)return new uA(this.curLine,this.pos-this.lineStart)};var py=Vs.prototype,dLt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};py.enterScope=function(e){this.scopeStack.push(new dLt(e))};py.exitScope=function(){this.scopeStack.pop()};py.treatFunctionsAsVarInScope=function(e){return e.flags&RS||!this.inModule&&e.flags&lA};py.declareName=function(e,t,n){var r=!1;if(t===Om){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&lA&&delete this.undefinedExports[e]}else if(t===W3e){var s=this.currentScope();s.lexical.push(e)}else if(t===q3e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&V3e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&lA&&delete this.undefinedExports[e],u.flags&RQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};py.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};py.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};py.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&RQ)return t}};py.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&RQ&&!(t.flags&z3e))return t}};var NF=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new $F(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},HI=Vs.prototype;HI.startNode=function(){return new NF(this,this.start,this.startLoc)};HI.startNodeAt=function(e,t){return new NF(this,e,t)};function X3e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}HI.finishNode=function(e,t){return X3e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};HI.finishNodeAt=function(e,t,n,r){return X3e.call(this,e,t,n,r)};HI.copyNode=function(e){var t=new NF(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Q3e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",J3e=Q3e+" Extended_Pictographic",Z3e=J3e,eMe=Z3e+" EBase EComp EMod EPres ExtPict",tMe=eMe,hLt=tMe,pLt={9:Q3e,10:J3e,11:Z3e,12:eMe,13:tMe,14:hLt},mLt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",gLt={9:"",10:"",11:"",12:"",13:"",14:mLt},Rme="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",nMe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",rMe=nMe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",iMe=rMe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",sMe=iMe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",oMe=sMe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",yLt=oMe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",vLt={9:nMe,10:rMe,11:iMe,12:sMe,13:oMe,14:yLt},aMe={};function _Lt(e){var t=aMe[e]={binary:Ig(pLt[e]+" "+Rme),binaryOfStrings:Ig(gLt[e]),nonBinary:{General_Category:Ig(Rme),Script:Ig(vLt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var M9=0,Nme=[9,10,11,12,13,14];M9<Nme.length;M9+=1){var bLt=Nme[M9];_Lt(bLt)}var kt=Vs.prototype,Th=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=aMe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Th.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Th.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Th.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Th.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Th.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Th.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Th.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Th.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Th.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};kt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};kt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};kt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};kt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};kt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};kt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};kt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};kt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};kt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};kt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};kt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};kt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};kt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};kt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};kt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};kt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};kt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return uMe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function uMe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}kt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!uMe(n);)e.advance();return e.pos!==t};kt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};kt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};kt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};kt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=P0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=P0(e.lastIntValue);return!0}return!1};kt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),wLt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function wLt(e){return im(e,!0)||e===36||e===95}kt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),ELt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function ELt(e){return wE(e,!0)||e===36||e===95||e===8204||e===8205}kt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};kt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};kt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};kt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};kt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};kt.regexp_eatZero=function(e){return e.current()===48&&!DF(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};kt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};kt.regexp_eatControlLetter=function(e){var t=e.current();return lMe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function lMe(e){return e>=65&&e<=90||e>=97&&e<=122}kt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&SLt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function SLt(e){return e>=0&&e<=1114111}kt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};kt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var cMe=0,sm=1,ec=2;kt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(xLt(t))return e.lastIntValue=-1,e.advance(),sm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===ec&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return cMe};function xLt(e){return e===100||e===68||e===115||e===83||e===119||e===87}kt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),sm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return cMe};kt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){zI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};kt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return sm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return ec;e.raise("Invalid property name")};kt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";fMe(t=e.current());)e.lastStringValue+=P0(t),e.advance();return e.lastStringValue!==""};function fMe(e){return lMe(e)||e===95}kt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";TLt(t=e.current());)e.lastStringValue+=P0(t),e.advance();return e.lastStringValue!==""};function TLt(e){return fMe(e)||DF(e)}kt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};kt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===ec&&e.raise("Negated character class may contain strings"),!0}return!1};kt.regexp_classContents=function(e){return e.current()===93?sm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),sm)};kt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};kt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||pMe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};kt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};kt.regexp_classSetExpression=function(e){var t=sm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===ec&&(t=ec);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==ec&&(t=sm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===ec&&(t=ec)}};kt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};kt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?sm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};kt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===ec&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};kt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};kt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===ec&&(t=ec);return t};kt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?sm:ec};kt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&CLt(n)||ALt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function CLt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function ALt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}kt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return ILt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function ILt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}kt.regexp_eatClassControlLetter=function(e){var t=e.current();return DF(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};kt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};kt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;DF(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function DF(e){return e>=48&&e<=57}kt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;dMe(n=e.current());)e.lastIntValue=16*e.lastIntValue+hMe(n),e.advance();return e.pos!==t};function dMe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function hMe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}kt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};kt.regexp_eatOctalDigit=function(e){var t=e.current();return pMe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function pMe(e){return e>=48&&e<=55}kt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!dMe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+hMe(i),e.advance()}return!0};var LQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new $F(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Gn=Vs.prototype;Gn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new LQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Gn.getToken=function(){return this.next(),new LQ(this)};typeof Symbol<"u"&&(Gn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===X.eof,value:t}}}});Gn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(X.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Gn.readToken=function(e){return im(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Gn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Gn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=L3e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Gn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!$S(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Gn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&F3e.test(String.fromCharCode(e)))++this.pos;else break e}}};Gn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Gn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(X.ellipsis)):(++this.pos,this.finishToken(X.dot))};Gn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(X.assign,2):this.finishOp(X.slash,1)};Gn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?X.star:X.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=X.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(X.assign,n+1):this.finishOp(r,n)};Gn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(X.assign,3)}return this.finishOp(e===124?X.logicalOR:X.logicalAND,2)}return t===61?this.finishOp(X.assign,2):this.finishOp(e===124?X.bitwiseOR:X.bitwiseAND,1)};Gn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(X.assign,2):this.finishOp(X.bitwiseXOR,1)};Gn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Oc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(X.incDec,2):t===61?this.finishOp(X.assign,2):this.finishOp(X.plusMin,1)};Gn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(X.assign,n+1):this.finishOp(X.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(X.relational,n))};Gn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(X.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(X.arrow)):this.finishOp(e===61?X.eq:X.prefix,1)};Gn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(X.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(X.assign,3)}return this.finishOp(X.coalesce,2)}}return this.finishOp(X.question,1)};Gn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),im(t,!0)||t===92))return this.finishToken(X.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+P0(t)+"'")};Gn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(X.parenL);case 41:return++this.pos,this.finishToken(X.parenR);case 59:return++this.pos,this.finishToken(X.semi);case 44:return++this.pos,this.finishToken(X.comma);case 91:return++this.pos,this.finishToken(X.bracketL);case 93:return++this.pos,this.finishToken(X.bracketR);case 123:return++this.pos,this.finishToken(X.braceL);case 125:return++this.pos,this.finishToken(X.braceR);case 58:return++this.pos,this.finishToken(X.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(X.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(X.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+P0(e)+"'")};Gn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Gn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Oc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Th(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(X.regexp,{pattern:i,flags:o,value:u})};Gn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function OLt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function mMe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Gn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=mMe(this.input.slice(t,this.pos)),++this.pos):im(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,n)};Gn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=mMe(this.input.slice(t,this.pos));return++this.pos,im(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(X.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),im(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=OLt(this.input.slice(t,this.pos),n);return this.finishToken(X.num,s)};Gn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Gn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):($S(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(X.string,t)};var gMe={};Gn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===gMe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Gn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw gMe;this.raise(e,t)};Gn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===X.template||this.type===X.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(X.dollarBraceL)):(++this.pos,this.finishToken(X.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(X.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if($S(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Gn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(X.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Gn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return P0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return $S(t)?"":String.fromCharCode(t)}};Gn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Gn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(wE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?im:wE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=P0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Gn.readWord=function(){var e=this.readWord1(),t=X.name;return this.keywords.test(e)&&(t=PQ[e]),this.finishToken(t,e)};var PLt="8.11.2";Vs.acorn={Parser:Vs,version:PLt,defaultOptions:cH,Position:uA,SourceLocation:$F,getLineInfo:B3e,Node:NF,TokenType:cr,tokTypes:X,keywordTypes:PQ,TokContext:Vc,tokContexts:ki,isIdentifierChar:wE,isIdentifierStart:im,Token:LQ,isNewLine:$S,lineBreak:Oc,lineBreakG:tLt,nonASCIIwhitespace:F3e};function kLt(e,t){return Vs.parse(e,t)}const FQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},$Lt={ecmaVersion:11},Dme="$",RLt="d",NLt="d1",DLt="d2",Eo=e=>(t,n)=>n.error(t,e+" not allowed"),MLt=Eo("Aggregate function"),LLt=Eo("Window function"),FLt="Invalid argument",jQ="Invalid column reference",jLt=jQ+" (must be input to an aggregate function)",yMe="Invalid function call",BLt="Invalid member expression",ULt="Invalid operator parameter",zLt="Invalid param reference",VLt="Invalid variable reference",HLt="Variable not accessible in operator call",qLt="Unsupported variable declaration",WLt="Unsupported destructuring pattern",vMe="Table expressions do not support closures",_Me="Use aq.escape(fn) to use a function as-is (including closures)",GLt="use table.params({ name: value }) to define dynamic parameters",YLt="use aq.addFunction(name, fn) to add new op functions",KLt=`
Note: ${vMe}. ${_Me}, or ${GLt}.`,bMe=`
Note: ${vMe}. ${_Me}, or ${YLt}.`,XLt=`The ${PNe} method is not valid in multi-table expressions.`;function QLt(e,t){const n=JLt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,qMt(r)?(e6t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=NLt),e.scope.add(e.tuple2=DLt),e.scope.add(e.$param=Dme)):(e.scope.add(e.tuple=RLt),e.scope.add(e.$param=Dme)),ar(r,e,BQ),e.root}function JLt(e){try{const t=e.field?ZLt(e):vr(e)?sh(e):e;return kLt(`expr=(${t})`,$Lt).body[0].expression.right}catch{In(`Expression parse error: ${e+""}`)}}function ZLt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const BQ={FunctionDeclaration:Eo("Function definitions"),ForStatement:Eo("For loops"),ForOfStatement:Eo("For-of loops"),ForInStatement:Eo("For-in loops"),WhileStatement:Eo("While loops"),DoWhileStatement:Eo("Do-while loops"),AwaitExpression:Eo("Await expressions"),ArrowFunctionExpression:Eo("Function definitions"),AssignmentExpression:Eo("Assignments"),FunctionExpression:Eo("Function definitions"),NewExpression:Eo('Use of "new"'),UpdateExpression:Eo("Update expressions"),VariableDeclarator(e,t){pH(e.id,t)},Identifier(e,t,n){SMe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,VLt,KLt)},CallExpression(e,t){const n=wMe(e.callee),r=ANe(n)||INe(n);if(r){if((t.join||t.aggregate===!1)&&kX(n)&&MLt(e,t),(t.join||t.window===!1)&&$X(n)&&LLt(e,t),t.$op=1,t.ast)hH(e,n,t),e.arguments.forEach(i=>ar(i,t,dH));else{const i=t.op(t6t(t,r,n,e.arguments));Object.assign(e,{type:ENe,name:i.id})}return t.$op=0,!1}else CNe(n)?hH(e,n,t):t.error(e,yMe,bMe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Rs(e0,r))return;const{name:s}=r;if(EMe(e)&&Rs(e0,i)&&Of(FQ,i.name)){CMe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Mme(e,o,t,xMe,n);if(s===t.$param)return Mme(e,o,t,r6t);t.paramsRef.has(s)?cA(e,t.paramsRef.get(s)):t.columnRef.has(s)?TMe(r,s,t,e):Of(t.params,s)&&cA(r,s)}};function Mme(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Rs(AS,s))a=s.value;else try{ar(s,n,BQ,e),a=n.param(s)}catch{n.error(e,BLt)}return r(e,a,t,n,i),!1}const dH={...BQ,VariableDeclarator:Eo("Variable declaration in operator call"),Identifier(e,t,n){SMe(e,t,n)&&t.error(e,HLt)},CallExpression(e,t){const n=wMe(e.callee);CNe(n)?hH(e,n,t):t.error(e,yMe,bMe)}};function e6t(e,t){e.generator&&Eo("Generator functions")(e,t),e.async&&Eo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(Yx(t,n[0],"tuple1",i(1)),r>1&&Yx(t,n[1],"tuple2",i(2)),r>2&&Yx(t,n[2],"$param",s)):(Yx(t,n[0],"tuple",i(0)),r>1&&Yx(t,n[1],"$param",s))),t.root=e.body}function Yx(e,t,n,r){Rs(e0,t)?(e.scope.add(t.name),e[n]=t.name):Rs(bNe,t)&&t.properties.forEach(i=>{const s=Rs(e0,i.key)?i.key.name:Rs(AS,i.key)?i.key.value:e.error(i,FLt);Rs(e0,i.value)||e.error(i.value,WLt),r(i.value.name,s)})}function t6t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(ar(u,e,dH),i.push(e.field(u))):l<a?(ar(u,e,dH),s.push(e.param(u))):e.error(u,ULt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function wMe(e){return Rs(e0,e)?e.name:Rs(_Ne,e)?EMe(e)?n6t(e.property.name):e.property.name:null}function EMe(e){return Rs(e0,e.object)&&e.object.name==="Math"}function n6t(e){return e==="max"?"greatest":e==="min"?"least":e}function SMe(e,t,n){const{name:r}=e;if(!(Rs(_Ne,n)&&n.property===e)){if(!(Rs(wNe,n)&&n.key===e))if(t.paramsRef.has(r))cA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))TMe(e,r,t,n);else if(Of(t.params,r))cA(e,r);else if(Of(FQ,r))CMe(e,r);else return!0}}function xMe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,jQ),r.aggronly&&!r.$op&&r.error(e,jLt),ONe(e,t,n,o,i)}function TMe(e,t,n,r){const[i,s]=n.columnRef.get(t);xMe(e,i,s,n,r)}function r6t(e,t,n,r){r.params&&!Of(r.params,t)&&r.error(e,zLt),cA(e,t)}function cA(e,t){e.type=YRt,e.name=t}function CMe(e,t){e.type=qRt,e.name=t,e.raw=FQ[t]}function hH(e,t,n){if(t===PNe){const r=n.table;r||n.error(e,XLt),kNe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ka(s)?r.columnName(s):s;return r.column(o)||n.error(i,jQ),o}):r.columnNames())}else e.callee={type:GRt,name:t}}function pH(e,t){Rs(e0,e)?t.scope.add(e.name):Rs(URt,e)?e.elements.forEach(n=>pH(n,t)):Rs(bNe,e)?e.properties.forEach(n=>pH(n.value,t)):t.error(e.id,qLt)}const i6t={[LI]:1,[ENe]:1};function Bu(e,t={}){const n=t.generate||U3,r=t.compiler||RX,i=o6t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=s6t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Rs(AS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?HMt(g):f(n(g),i));u.push(y),i6t[g.type]&&y!==g&&_a(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,_=m.end-6,w=String(d.spec).slice(v,_);In(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of vF(e))d.value(m+"",g.escape?YMt(d,g,i):QLt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function s6t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function o6t(e){return(e.table?L9(e.table):e.join?{...L9(e.join[1]),...L9(e.join[0])}:{})||{}}function L9(e){return e&&wi(e.params)?e.params():{}}const AMe="Expr",Hc="ExprList",IMe="ExprNumber",BT="ExprObject",Yb="JoinKeys",uM="JoinValues",ql="Options",UQ="OrderKeys",Zm="SelectionList",mv="TableRef",Kb="TableRefList",a6t="Descending",u6t="Query",l6t="Selection",c6t="Verb",f6t="Window";function MF(e,t){return e&&e.expr?new Lme({...e,...t}):new Lme(t,e)}class Lme{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...wi(this.expr)?{func:!0}:{}}}}function d6t(e){return MF(e,{desc:!0})}function A1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return MF(e,t?{expr:t,...r}:r)}function h6t(e,t,n){return MF(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function p6t(e){const t=n=>n;return t.toString=()=>e,t}function Fme(e,t){return t=t&&wi(t.query)?t.query():t,t&&wi(t.evaluate)?t.evaluate(null,e):e(t)}function OMe(e){return _a(e)&&(vr(e.all)||vr(e.matches)||vr(e.not)||vr(e.range))}function fA(e){return e&&wi(e.toObject)?e.toObject():wi(e)?{expr:String(e),func:!0}:vr(e)?e.map(fA):_a(e)?PF(e,t=>fA(t)):e}function zQ(e){return vr(e)?e.map(zQ):_a(e)?vr(e.verbs)?HQ.from(e):vr(e.all)?bE():vr(e.range)?jMt(...e.range):vr(e.match)?BMt(RegExp(...e.match)):vr(e.not)?R3e(e.not.map(fA)):m6t(e):e}function m6t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=A1(n):e.func===!0&&(t=n=p6t(n)),_a(e.window)){const{frame:r,peers:i}=e.window;t=n=h6t(n,r,i)}e.desc===!0&&(t=d6t(n))}return e===t?PF(e,r=>zQ(r)):t}function g6t(e){return vr(e)?e.map(y6t):e}function y6t(e){const t=[];return Fu(e).forEach(n=>{Ka(n)?t.push(n):Bo(n)?t.push(A1(n,null)):_a(n)&&n.expr||wi(n)?t.push(n):In(`Invalid key value: ${n+""}`)}),t}function v6t(e){return vr(e)?e.map(_6t):e}function _6t(e,t){return t<2?Fu(e):e}function b6t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(_a(r)&&!wi(r))for(const i in r)t.push(r[i]);else n=Ka(r)?r:Bo(r)?A1(n):wi(r)?n:In(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const w6t={[AMe]:RMe,[Hc]:EE,[IMe]:A6t,[BT]:k0,[Yb]:I6t,[uM]:O6t,[UQ]:EE,[Zm]:T6t};function E6t(e,t,n){return t===mv?jme(e):t===Kb?e.map(jme):PMe(fA(e),t,n)}function PMe(e,t,n){return t===ql?e&&S6t(e,n):w6t[t](e)}function S6t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?PMe(i,t[r]):i}return n}function x6t(e,t){return Bu({expr:e},{...t,ast:!0}).exprs[0]}function VQ(e){return{type:LI,name:e}}function kMe(e){return{type:LI,index:e}}function k0(e,t){if(Bo(e))return x6t(e,t);if(e.expr){let n;if(e.field===!0?n=VQ(e.expr):e.func===!0&&(n=k0(e.expr,t)),n)return e.desc&&(n={type:a6t,expr:n}),e.window&&(n={type:f6t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...k0(e[n],t),as:n}))}function $Me(e){const t=l6t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:EE(e.not)}:e.range?{type:t,operator:"range",arguments:EE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:In("Invalid input")}function T6t(e){return Fu(e).map(C6t).flat()}function C6t(e){return OMe(e)?$Me(e):Ka(e)?kMe(e):Bo(e)?VQ(e):_a(e)?Object.keys(e).map(t=>({type:LI,name:t,as:e[t]})):In("Invalid input")}function RMe(e){return OMe(e)?$Me(e):Ka(e)?kMe(e):Bo(e)?VQ(e):_a(e)?k0(e):In("Invalid input")}function EE(e){return Fu(e).map(RMe).flat()}function A6t(e){return Ka(e)?e:k0(e)}function I6t(e){return vr(e)?e.map(EE):k0(e,{join:!0})}function O6t(e){return vr(e)?e.map((t,n)=>n<2?EE(t):k0(t,{join:!0})):k0(e,{join:!0})}function jme(e){return e&&wi(e.toAST)?e.toAST():e}class NMe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Yb?g6t(a):o===uM?v6t(a):o===UQ?b6t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=mH[t.verb],r=(n.schema||[]).map(({name:i})=>zQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===mv?Fme(n,o):s===Kb?o.map(a=>Fme(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=fA(this[n])}),t}toAST(){const t={type:c6t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=E6t(this[n],r,i)}),t}}function Hr(e,t){return Object.assign((...n)=>new NMe(e,t,n),{schema:t})}const mH={count:Hr("count",[{name:"options",type:ql}]),derive:Hr("derive",[{name:"values",type:BT},{name:"options",type:ql,props:{before:Zm,after:Zm}}]),filter:Hr("filter",[{name:"criteria",type:BT}]),groupby:Hr("groupby",[{name:"keys",type:Hc}]),orderby:Hr("orderby",[{name:"keys",type:UQ}]),relocate:Hr("relocate",[{name:"columns",type:Zm},{name:"options",type:ql,props:{before:Zm,after:Zm}}]),rename:Hr("rename",[{name:"columns",type:Zm}]),rollup:Hr("rollup",[{name:"values",type:BT}]),sample:Hr("sample",[{name:"size",type:IMe},{name:"options",type:ql,props:{weight:AMe}}]),select:Hr("select",[{name:"columns",type:Zm}]),ungroup:Hr("ungroup"),unorder:Hr("unorder"),reify:Hr("reify"),dedupe:Hr("dedupe",[{name:"keys",type:Hc,default:[]}]),impute:Hr("impute",[{name:"values",type:BT},{name:"options",type:ql,props:{expand:Hc}}]),fold:Hr("fold",[{name:"values",type:Hc},{name:"options",type:ql}]),pivot:Hr("pivot",[{name:"keys",type:Hc},{name:"values",type:Hc},{name:"options",type:ql}]),spread:Hr("spread",[{name:"values",type:Hc},{name:"options",type:ql}]),unroll:Hr("unroll",[{name:"values",type:Hc},{name:"options",type:ql,props:{drop:Hc}}]),lookup:Hr("lookup",[{name:"table",type:mv},{name:"on",type:Yb},{name:"values",type:Hc}]),join:Hr("join",[{name:"table",type:mv},{name:"on",type:Yb},{name:"values",type:uM},{name:"options",type:ql}]),cross:Hr("cross",[{name:"table",type:mv},{name:"values",type:uM},{name:"options",type:ql}]),semijoin:Hr("semijoin",[{name:"table",type:mv},{name:"on",type:Yb}]),antijoin:Hr("antijoin",[{name:"table",type:mv},{name:"on",type:Yb}]),concat:Hr("concat",[{name:"tables",type:Kb}]),union:Hr("union",[{name:"tables",type:Kb}]),intersect:Hr("intersect",[{name:"tables",type:Kb}]),except:Hr("except",[{name:"tables",type:Kb}])};let HQ=class DMe extends oNe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new DMe(t.map(NMe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Bme(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Bme(this,"toAST",{type:u6t})}};function Bme(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function P6t(e,t){return new HQ(e._verbs.concat(t),e._params,e._table)}for(const e in mH){const t=mH[e];HQ.prototype["__"+e]=function(n,...r){return P6t(n,t(...r))}}function DS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function k6t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function qQ(e,t){const n=Ml();return t.forEach((r,i)=>{const s=Bo(r)?r:i;if(s){const o=e.column(i)||In(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function MMe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||In("relocate requires a before or after option."),i&&s&&In("relocate accepts only one of the before or after options."),t=rm(e,t);const o=[...rm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),qQ(e,u)}function qI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function WQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $6t(e,t=0,n=e.length){let r=n?e[t++]:fr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function R6t(e,t=0,n=e.length){let r=n?e[t++]:fr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function gk(e){return nA(e)?e:+e}function N6t(e,t){const n=e.length;if(!n)return fr;if((t=+t)<=0||n<2)return gk(e[0]);if(t>=1)return gk(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=gk(e[i]);return nA(s)?s:s+(gk(e[i+1])-s)*(r-i)}class D6t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:$6t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:R6t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(WQ)),N6t(this._sorted,t)}}const lM=(e,t,n)=>DS(t,"{"+qI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function M6t(e,t){const{ops:n,output:r}=L6t(e,t),i=e[0].fields,s=i.length,o=s===0?GQ:s===1?F6t:s===2?j6t:In("Unsupported field count: "+s);return new o(i,n,r,t)}function L6t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=ANe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class GQ extends zMt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new D6t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class F6t extends GQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=lM(n,s,"add"),this._rem=lM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,hf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,hf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class j6t extends GQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=lM(n,s,"add"),this._rem=lM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,hf(i)&&hf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,hf(i)&&hf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function b_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=MS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function MS(e,t,n){if(!t.length)return n;const r=LMe(t),i=e.groups(),s=i?i.size:1;return n=n||gF(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=jMe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=FMe(e,o);o.write(a,n,0)}),n}function LMe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(M6t(r[i],t));return n}function FMe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function jMe(e,t,n){const{keys:r,size:i}=n,s=gF(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function BMe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function UMe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Ume=UMe(WQ);function B6t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?DS(["w","r","k"],"{"+qI(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(_=>_.init()):null;for(let _=0;_<f;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Ume.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Ume.right(o,o[p.i1-1])));for(let x=0;x<d;++x){const E=i[x],b=a[x];for(let T=_;T<p.i0;++T)E.rem(b,s[T],e);for(let T=w;T<p.i1;++T)E.add(b,s[T],e);E.write(b,u,l)}return h(p,u,l),u}};return p}const U6t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),z6t=e=>!!e.peers;function V6t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=INe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function H6t(e,t,n,r={},i){const s=e.data(),o=q6t(i,s),a=o.length,u=DS(["r","d","op"],"{"+qI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=W6t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function q6t(e,t){const n={};return e.forEach(r=>{const i=U6t(r),s=z6t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});kX(r.name)?a.push(r):u.push(V6t(r))}),Object.values(n).map(r=>B6t(t,r.frame,r.peers,r.winOps,LMe(r.aggOps,r.frame[0]!=null?-1:1)))}function W6t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function G6t(e){return $X(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function YQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Ml(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=Y6t(r),c=e.isGrouped()?e.groups().size:1,f=MS(e,u,gF(r.length,()=>Array(c)));return l.length?H6t(e,a,n,f,l):K6t(e,a,n,f),e.create(o)}function Y6t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(G6t(s)?n:t).push(s)}return[t,n]}function K6t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function X6t(e,t,n={}){const r=YQ(e,Bu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:MMe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function Q6t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const yk=2147483648,J6t=4294967295;class zMe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&yk>>>t}set(t){this._bits[t>>5]|=yk>>>t}clear(t){this._bits[t>>5]&=~(yk>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&J6t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=yk>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function Z6t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new zMe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function e4t(e,t){const n=Bu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=YQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return Z6t(e,r)}function VMe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=b_(e,r,n),l=Ml(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const x=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(x))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,x)=>{for(let E=0;E<g;++E)d[E].length=m+x,d[E].fill(f[E].get(w),m,m+x)},_=p?(w,x)=>{for(let E=0;E<x;++E)p[w+E]=E}:()=>{};if(y===1){const w=u[0],x=h[0];e.scan((E,b)=>{const T=Fu(w(E,b)),A=Math.min(T.length,s);v(E,A);for(let C=0;C<A;++C)x[m+C]=T[C];_(m,A),m+=A})}else e.scan((w,x)=>{let E=0;const b=u.map(T=>{const A=Fu(T(w,x));return E=Math.min(Math.max(E,A.length),s),A});v(w,E);for(let T=0;T<y;++T){const A=h[T],C=b[T];for(let P=0;P<E;++P)A[m+P]=C[P]}_(m,E),m+=E});return e.create(l.new())}function t4t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=b_(e,r,n);return VMe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Pf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ka(o)?t.columnName(o):o,Bo(o)?i.set(o,A1(o)):wi(o)?rm(t,o).forEach(s):_a(o)?k3e(i,o):In(`Invalid ${e} value: ${o+""}`)};return Fu(n).forEach(s),r.preparse&&r.preparse(i),Bu(i,{table:t,...r})}function n4t(e,t,n){return t4t(e,Pf("fold",e,t),n)}function zme(e,t,n,r){const i=n&&n.length;return r4t(i?i4t(e,n,r):e,t,i)}function r4t(e,{names:t,exprs:n,ops:r},i){const s=b_(e,r,n),o=i?null:Ml(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=hf(p)?p:d(h)})}),i?e:e.create(o)}function i4t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=z3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Ml(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=z3(o.map((p,m)=>g=>g[m])),h=DS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Vme(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Vme(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Vme(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function KQ(e,{names:t,exprs:n,ops:r}){const i=Ml(),s=e.groups();return s&&BMe(i,s),s4t(t,n,s,MS(e,r),i),e.create(i.new())}function s4t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function o4t(e,t,n={}){if(t=Bu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:In(`Invalid impute column ${sh(r)}`)),n.expand){const r={preparse:a4t,aggronly:!0},i=Pf("impute",e,n.expand,r),s=KQ(e.ungroup(),i);return zme(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return zme(e,t)}function a4t(e){e.forEach((t,n)=>t.field?e.set(n,mNe(t+"")):0)}function u4t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function HMe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function l4t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function c4t(e,t){const n=["i","a","j","b"];return DS(n,"{"+qI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function f4t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Ml(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=c4t(g,y);if((vr(n)?h4t:d4t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function d4t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function h4t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,_=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,_=(E,b,T,A)=>e(T,A,E,b));const w=l4t(v,m,g),x=p.length;for(let E=0;E<x;++E){const b=p[E],T=w.get(d(b,f));if(T){const A=T.length;for(let C=0;C<A;++C){const P=T[C];_(b,f,v[P],m),y[P]=1}h[E]=1}}}function cM(e,t,n){const r=new Map;Fu(n).forEach((s,o)=>{s=Ka(s)?t.columnName(s):s,Bo(s)?r.set(o,A1(s)):wi(s)||_a(s)&&s.expr?r.set(o,s):In(`Invalid ${e} key value: ${s+""}`)});const i=Bu(r,{table:t,aggregate:!1,window:!1});return z3(i.exprs,!0)}function p4t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function XQ(e,t,n){if(n)Bo(n)?n=[n,n]:vr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=p4t(e.columnNames(),t.columnNames());r.length||In("Natural join requires shared column names."),n=[r,r]}return n}function qMe(e,t,n,r){return n.length!==r.length&&In("Mismatched number of join keys"),[cM("join",e,n),cM("join",t,r)]}const m4t={aggregate:!1,window:!1},g4t={...m4t,index:1};function Hme(e,t,n,r,i={}){n=XQ(e,t,n);const s={join:[e,t]};let o;if(vr(n)){const[a,u]=n.map(Fu);o=qMe(e,t,a,u),r||(r=y4t(e,a,u,i))}else o=Bu({on:n},s).exprs[0],r||(r=[bE(),bE()]);return f4t(e,t,o,v4t(e,t,r,s,i&&i.suffix),i)}function y4t(e,t,n,r){const i=[];t.forEach((o,a)=>Bo(o)&&o===n[a]?i.push(o):0);const s=R3e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${sh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,bE()]:[bE(),s]}function v4t(e,t,n,r,i=[]){if(vr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Pf("join",e,n[0],r)),u--&&(o=Pf("join",t,n[1],g4t)),u--&&(a=Bu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(qme(s.names,l,i[0]||"_1"),qme(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Bu(n,r)}function qme(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function _4t(e,t,n,r={}){const i=new zMe(e.totalRows());return(vr(n)?b4t:w4t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function b4t(e,t,n,[r,i]){const s=HMe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function w4t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Wme(e,t,n,r){n=XQ(e,t,n);const i=vr(n)?qMe(e,t,...n.map(Fu)):Bu({on:n},{join:[e,t]}).exprs[0];return _4t(e,t,i,r)}function E4t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Ml(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(fr)));const l=HMe(t,r),c=DS(["lr","rr","data"],"{"+qI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),b_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function S4t(e,t,n,r){return n=XQ(e,t,n),E4t(e,t,[cM("lookup",e,n[0]),cM("lookup",t,n[1])],Pf("lookup",t,r))}const gH=(e,t)=>e??t;function x4t(e,t,n,r={}){const{keys:i,keyColumn:s}=T4t(e,t,r),o=gH(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>MS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(C4t(n,a,e.groups(),u))}function T4t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=gH(n.sort,!0),s=gH(n.keySeparator,"_"),o=b_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=MS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function C4t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Ml(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&BMe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function A4t(e,t,n,r){return x4t(e,Pf("fold",e,t),Pf("fold",e,n,{preparse:I4t,aggronly:!0}),r)}function I4t(e){e.forEach((t,n)=>t.field?e.set(n,dNe(t+"")):0)}function O4t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),qQ(e,rm(e,t,n))}function Gme(e,t){return KQ(e,Bu(t,{table:e,aggronly:!0,window:!1}))}function P4t(e,t,n,r){return(t?r?$4t:k4t:r?N4t:R4t)(e.length,e,n,r)}function k4t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*CS()|0];return t}function $4t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=UMe(WQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*CS())];return t}function R4t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*CS();s<e&&(t[s|0]=n[i])}return t}function N4t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(CS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function D4t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=CS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function M4t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):P4t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&D4t(u),e.reify(u)}function L4t(e,t,n={}){return M4t(e,F4t(e,t),j4t(e,n.weight),n)}const WMe=e=>t=>e.get(t)||0;function F4t(e,t){return Ka(t)?()=>t:WMe(KQ(e,Bu({size:t},{table:e,window:!1})).column("size"))}function j4t(e,t){return t==null?null:(t=Ka(t)?e.columnName(t):t,WMe(Bo(t)?e.column(t):YQ(e,Bu({w:t},{table:e}),{drop:!0}).column("w")))}function B4t(e,t){return qQ(e,rm(e,t))}function U4t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=b_(e,r,n),l=Ml(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=z4t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function z4t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Fu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(fr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function V4t(e,t,n){return U4t(e,Pf("spread",e,t),n)}function H4t(e,t){return e.concat(t).dedupe()}function q4t(e,t,n){return VMe(e,Pf("unroll",e,t),n&&n.drop?{...n,drop:Pf("unroll",e,n.drop).names}:n)}function W4t(e,t){return e.create({groups:G4t(e,t)})}function G4t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=b_(e,r,n);const o=z3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Y4t(e,t){return W4t(e,Pf("groupby",e,t))}function K4t(e,t){return e.create({order:t})}const X4t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Q4t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Bu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([U3(p,{index:"a",op:o}),U3(p,{index:"b",op:a})])},window:!1}),l=MS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=X4t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function J4t(e,t){return K4t(e,Z4t(e,t))}function Z4t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(_a(o)&&!wi(o))for(const a in o)i(o[a]);else i(Ka(o)?A1(s,e.columnName(o)):Bo(o)?A1(s):wi(o)?s:In(`Invalid orderby field: ${s+""}`))}),Q4t(e,r)}function eFt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Ml();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>fr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function tFt(e,t){const n=Ml(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?jMe(e,t,r):[FMe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function nFt(e){return e.isGrouped()?e.create({groups:null}):e}function rFt(e){return e.isOrdered()?e.create({order:null}):e}const iFt={__antijoin:(e,t,n)=>Wme(e,t,n,{anti:!0}),__count:(e,t={})=>Gme(e,{[t.as||"count"]:hNe()}),__cross:(e,t,n,r)=>Hme(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:eFt,__dedupe:k6t,__derive:X6t,__except:Q6t,__filter:e4t,__fold:n4t,__impute:o4t,__intersect:u4t,__join:Hme,__lookup:S4t,__pivot:A4t,__relocate:MMe,__rename:O4t,__rollup:Gme,__sample:L4t,__select:B4t,__semijoin:Wme,__spread:V4t,__union:H4t,__unroll:q4t,__groupby:Y4t,__orderby:J4t,__ungroup:nFt,__unorder:rFt,__reduce:tFt};Object.assign(fp.prototype,iFt);function sFt(e,t){return fp.from(e,t)}function F9(e){return MF(e,{escape:!0,toString(){In("Escaped values can not be serialized.")}})}fp.prototype;function oFt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let vk;const aFt=new Uint8Array(16);function uFt(){if(!vk&&(vk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vk(aFt)}const vo=[];for(let e=0;e<256;++e)vo.push((e+256).toString(16).slice(1));function lFt(e,t=0){return(vo[e[t+0]]+vo[e[t+1]]+vo[e[t+2]]+vo[e[t+3]]+"-"+vo[e[t+4]]+vo[e[t+5]]+"-"+vo[e[t+6]]+vo[e[t+7]]+"-"+vo[e[t+8]]+vo[e[t+9]]+"-"+vo[e[t+10]]+vo[e[t+11]]+vo[e[t+12]]+vo[e[t+13]]+vo[e[t+14]]+vo[e[t+15]]).toLowerCase()}const cFt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Yme={randomUUID:cFt};function Kme(e,t,n){if(Yme.randomUUID&&!t&&!e)return Yme.randomUUID();e=e||{};const r=e.random||(e.rng||uFt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return lFt(r)}class Vd{static get(){let t=Kme();for(;this.ids.has(t);)t=Kme();return this.ids.set(t,!0),t}}Vd.ids=new Map;function Hd(e){return"parent"in e}function fFt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Vd.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Vd.get(),createdOn:Date.now(),val:r}]:[];return{id:Vd.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function dFt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Vd.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Vd.get(),createdOn:Date.now(),val:s}]:[];return{id:Vd.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Xi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=wFt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function I1(e){return!!e&&!!e[Tl]}function $0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===EFt}(e)||Array.isArray(e)||!!e[z2]||!!(!((t=e.constructor)===null||t===void 0)&&t[z2])||LF(e)||FF(e))}function SE(e,t,n){n===void 0&&(n=!1),R0(e)===0?(n?Object.keys:nJ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function R0(e){var t=e[Tl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:LF(e)?2:FF(e)?3:0}function dA(e,t){return R0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function J$(e,t){return R0(e)===2?e.get(t):e[t]}function GMe(e,t,n){var r=R0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function hFt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function LF(e){return _Ft&&e instanceof Map}function FF(e){return bFt&&e instanceof Set}function sv(e){return e.o||e.t}function QQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=SFt(e);delete t[Tl];for(var n=nJ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function JQ(e,t){return t===void 0&&(t=!1),ZQ(e)||I1(e)||!$0(e)||(R0(e)>1&&(e.set=e.add=e.clear=e.delete=pFt),Object.freeze(e),t&&SE(e,function(n,r){return JQ(r,!0)},!0)),e}function pFt(){Xi(2)}function ZQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function qd(e){var t=bH[e];return t||Xi(18,e),t}function mFt(e,t){bH[e]||(bH[e]=t)}function Xme(){return{}.NODE_ENV==="production"||xE||Xi(0),xE}function j9(e,t){t&&(qd("Patches"),e.u=[],e.s=[],e.v=t)}function fM(e){yH(e),e.p.forEach(gFt),e.p=null}function yH(e){e===xE&&(xE=e.l)}function Qme(e){return xE={p:[],l:xE,h:e,m:!0,_:0}}function gFt(e){var t=e[Tl];t.i===0||t.i===1?t.j():t.O=!0}function B9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||qd("ES5").S(t,e,r),r?(n[Tl].P&&(fM(t),Xi(4)),$0(e)&&(e=dM(t,e),t.l||hM(t,e)),t.u&&qd("Patches").M(n[Tl].t,e,t.u,t.s)):e=dM(t,n,[]),fM(t),t.u&&t.v(t.u,t.s),e!==tJ?e:void 0}function dM(e,t,n){if(ZQ(t))return t;var r=t[Tl];if(!r)return SE(t,function(s,o){return Jme(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return hM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=QQ(r.k):r.o;SE(r.i===3?new Set(i):i,function(s,o){return Jme(e,r,i,s,o,n)}),hM(e,i,!1),n&&e.u&&qd("Patches").R(r,n,e.u,e.s)}return r.o}function Jme(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Xi(5),I1(i)){var o=dM(e,i,s&&t&&t.i!==3&&!dA(t.D,r)?s.concat(r):void 0);if(GMe(n,r,o),!I1(o))return;e.m=!1}if($0(i)&&!ZQ(i)){if(!e.h.F&&e._<1)return;dM(e,i),t&&t.A.l||hM(e,i)}}function hM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&JQ(t,n)}function U9(e,t){var n=e[Tl];return(n?sv(n):e)[t]}function Zme(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function vH(e){e.P||(e.P=!0,e.l&&vH(e.l))}function z9(e){e.o||(e.o=QQ(e.t))}function _H(e,t,n){var r=LF(t)?qd("MapSet").N(t,n):FF(t)?qd("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Xme(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=wH;o&&(u=[a],l=UT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):qd("ES5").J(t,n);return(n?n.A:Xme()).p.push(r),r}function yFt(e){return I1(e)||Xi(22,e),function t(n){if(!$0(n))return n;var r,i=n[Tl],s=R0(n);if(i){if(!i.P&&(i.i<4||!qd("ES5").K(i)))return i.t;i.I=!0,r=ege(n,s),i.I=!1}else r=ege(n,s);return SE(r,function(o,a){i&&J$(i.t,o)===a||GMe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ege(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return QQ(e)}function vFt(){function e(r){if(!$0(r))return r;if(Array.isArray(r))return r.map(e);if(LF(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(FF(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return dA(r,z2)&&(i[z2]=r[z2]),i}function t(r){return I1(r)?e(r):r}var n="add";mFt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=R0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Xi(24),typeof u=="function"&&f==="prototype"&&Xi(24),typeof(u=J$(u,f))!="object"&&Xi(15,o.join("/"))}var d=R0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Xi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Xi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;SE(a.D,function(h,p){var m=J$(f,h),g=J$(d,h),y=p?dA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var _=u.concat([v]);l.push({op:n,path:_,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===tJ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var tge,xE,eJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",_Ft=typeof Map<"u",bFt=typeof Set<"u",nge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",tJ=eJ?Symbol.for("immer-nothing"):((tge={})["immer-nothing"]=!0,tge),z2=eJ?Symbol.for("immer-draftable"):"__$immer_draftable",Tl=eJ?Symbol.for("immer-state"):"__$immer_state",wFt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},EFt=""+Object.prototype.constructor,nJ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,SFt=Object.getOwnPropertyDescriptors||function(e){var t={};return nJ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},bH={},wH={get:function(e,t){if(t===Tl)return e;var n=sv(e);if(!dA(n,t))return function(i,s,o){var a,u=Zme(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!$0(r)?r:r===U9(e.t,t)?(z9(e),e.o[t]=_H(e.A.h,r,e)):r},has:function(e,t){return t in sv(e)},ownKeys:function(e){return Reflect.ownKeys(sv(e))},set:function(e,t,n){var r=Zme(sv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=U9(sv(e),t),s=i==null?void 0:i[Tl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(hFt(n,i)&&(n!==void 0||dA(e.t,t)))return!0;z9(e),vH(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return U9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,z9(e),vH(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=sv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Xi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Xi(12)}},UT={};SE(wH,function(e,t){UT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),UT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Xi(13),UT.set.call(this,e,t,void 0)},UT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Xi(14),wH.set.call(this,e[0],t,n,e[0])};var xFt=function(){function e(n){var r=this;this.g=nge,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),_=1;_<y;_++)v[_-1]=arguments[_];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Xi(6),o!==void 0&&typeof o!="function"&&Xi(7),$0(i)){var c=Qme(r),f=_H(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?fM(c):yH(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return j9(c,o),B9(m,c)},function(m){throw fM(c),m}):(j9(c,o),B9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===tJ&&(l=void 0),r.F&&JQ(l,!0),o){var h=[],p=[];qd("Patches").M(i,l,h,p),o(h,p)}return l}Xi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){$0(n)||Xi(8),I1(n)&&(n=yFt(n));var r=Qme(this),i=_H(this,n,void 0);return i[Tl].C=!0,yH(r),i},t.finishDraft=function(n,r){var i=n&&n[Tl];({}).NODE_ENV!=="production"&&(i&&i.C||Xi(9),i.I&&Xi(10));var s=i.A;return j9(s,r),B9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!nge&&Xi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=qd("Patches").$;return I1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Cl=new xFt,TFt=Cl.produce;Cl.produceWithPatches.bind(Cl);Cl.setAutoFreeze.bind(Cl);Cl.setUseProxies.bind(Cl);Cl.applyPatches.bind(Cl);Cl.createDraft.bind(Cl);Cl.finishDraft.bind(Cl);function CFt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=fFt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Mke({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Vd.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Vd.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function AFt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=CFt(e),s=Mxt();s.startListening({matcher:che(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=che(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Nke({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Vd.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var IFt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),OFt=Object.prototype.hasOwnProperty;function EH(e,t){return OFt.call(e,t)}function SH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)EH(e,i)&&r.push(i);return r}function Ou(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function xH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function ov(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function YMe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function TH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(TH(e[t]))return!0}else if(typeof e=="object"){for(var r=SH(e),i=r.length,s=0;s<i;s++)if(TH(e[r[s]]))return!0}}return!1}function rge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var KMe=function(e){IFt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,rge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=rge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=KMe,PFt=Ou,Xb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=pM(n,this.path);r&&(r=Ou(r));var i=e1(n,{op:"remove",path:this.from}).removed;return e1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=pM(n,this.from);return e1(n,{op:"add",path:this.path,value:Ou(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:hA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},kFt={add:function(e,t,n){return xH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Xb.move,copy:Xb.copy,test:Xb.test,_get:Xb._get};function pM(e,t){if(t=="")return e;var n={op:"_get",path:t};return e1(e,n),n.value}function e1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):mM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=pM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=hA(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ou(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=mM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=YMe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!xH(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);xH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=kFt[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Xb[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function jF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ou(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=e1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function $Ft(e,t,n){var r=e1(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function mM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Xb[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&TH(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=XMe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function XMe(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)jF(Ou(t),Ou(e),n||!0);else{n=n||mM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function hA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!hA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!hA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const RFt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:hA,applyOperation:e1,applyPatch:jF,applyReducer:$Ft,deepClone:PFt,getValueByPointer:pM,validate:XMe,validator:mM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var rJ=new WeakMap,NFt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),DFt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function MFt(e){return rJ.get(e)}function LFt(e,t){return e.observers.get(t)}function FFt(e,t){e.observers.delete(t.callback)}function jFt(e,t){t.unobserve()}function BFt(e,t){var n=[],r,i=MFt(e);if(!i)i=new NFt(e),rJ.set(e,i);else{var s=LFt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ou(e),t){r.callback=t,r.next=null;var o=function(){CH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){CH(r),clearTimeout(r.next),FFt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new DFt(t,r)),r}function CH(e,t){t===void 0&&(t=!1);var n=rJ.get(e.object);iJ(n.value,e.object,e.patches,"",t),e.patches.length&&jF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function iJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=SH(t),o=SH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(EH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?iJ(c,f,n,r+"/"+ov(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+ov(l),value:Ou(c)}),n.push({op:"replace",path:r+"/"+ov(l),value:Ou(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+ov(l),value:Ou(c)}),n.push({op:"remove",path:r+"/"+ov(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!EH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+ov(l),value:Ou(t[l])})}}}function QMe(e,t,n){n===void 0&&(n=!1);var r=[];return iJ(e,t,r,"",n),r}const UFt=Object.freeze(Object.defineProperty({__proto__:null,compare:QMe,generate:CH,observe:BFt,unobserve:jFt},Symbol.toStringTag,{value:"Module"}));Object.assign({},RFt,UFt,{JsonPatchError:KMe,deepClone:Ou,escapePathComponent:ov,unescapePathComponent:YMe});var zT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(zT||{});function Z$(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=JMe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=Z$(i,t);return jF(a,Ou(o),!0,!1).newDocument}function zFt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function sJ({registry:e,initialState:t}){let n=!1;const r=oFt(),i=AFt(t);function s(c){return i.backend.nodes[c]}r.listen(zT.TRAVERSAL_START,()=>{n=!0}),r.listen(zT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return Z$(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=Z$(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=QMe(y,f);if(zFt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=dFt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=Z$(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(zT.TRAVERSAL_START);const f=JMe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);HFt(p,m)?Hd(p)&&d.push(...p.sideEffects.undo):Hd(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(zT.TRAVERSAL_END)},undo(){const{current:c}=i;return Hd(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return ZMe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function VFt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Hd(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Hd(r)&&(r=n[r.parent]),Hd(i)&&(i=n[i.parent]);return r.id}function JMe(e,t,n){const r=VFt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Hd(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Hd(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function HFt(e,t){if(Hd(e)&&e.parent===t.id)return!0;if(Hd(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function ZMe(e,t){return{...e,children:e.children.map(n=>ZMe(t[n],t)),name:`${e.label}`}}vFt();function qFt(e){return e.length===2?TFt(e):e}class WI{static create(){return new WI}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:qFt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Bd(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var WFt="Expected a function",ige=NaN,GFt="[object Symbol]",YFt=/^\s+|\s+$/g,KFt=/^[-+]0x[0-9a-f]+$/i,XFt=/^0b[01]+$/i,QFt=/^0o[0-7]+$/i,JFt=parseInt,ZFt=typeof Cu=="object"&&Cu&&Cu.Object===Object&&Cu,e5t=typeof self=="object"&&self&&self.Object===Object&&self,t5t=ZFt||e5t||Function("return this")(),n5t=Object.prototype,r5t=n5t.toString,i5t=Math.max,s5t=Math.min,V9=function(){return t5t.Date.now()};function o5t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(WFt);t=sge(t)||0,AH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?i5t(sge(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(E){var b=r,T=i;return r=i=void 0,l=E,o=e.apply(T,b),o}function p(E){return l=E,a=setTimeout(y,t),c?h(E):o}function m(E){var b=E-u,T=E-l,A=t-b;return f?s5t(A,s-T):A}function g(E){var b=E-u,T=E-l;return u===void 0||b>=t||b<0||f&&T>=s}function y(){var E=V9();if(g(E))return v(E);a=setTimeout(y,m(E))}function v(E){return a=void 0,d&&r?h(E):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(V9())}function x(){var E=V9(),b=g(E);if(r=arguments,i=this,u=E,b){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=_,x.flush=w,x}function AH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function a5t(e){return!!e&&typeof e=="object"}function u5t(e){return typeof e=="symbol"||a5t(e)&&r5t.call(e)==GFt}function sge(e){if(typeof e=="number")return e;if(u5t(e))return ige;if(AH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=AH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(YFt,"");var n=XFt.test(e);return n||QFt.test(e)?JFt(e.slice(2),n?2:8):KFt.test(e)?ige:+e}var l5t=o5t;const rd=$l(l5t);function eLe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>ES(".2s"),[]);return k.jsxs(k.Fragment,{children:[k.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:k.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:k.jsx(_1,{children:k.jsx(Wa,{spacing:3,children:k.jsx(ze,{size:14,style:{color:"#878E95"},children:r})})})})}),k.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),k.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>k.jsxs("g",{transform:`translate(${n}, ${a})`,children:[k.jsx("line",{x2:"-6",stroke:"currentColor"}),k.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),k.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const c5t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:eLe},Symbol.toStringTag,{value:"Module"})),H9=15;function tLe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=vs("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<H9&&Math.abs(t(g[r.y])-p[1])<H9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),k.jsx("circle",{style:{cursor:l?"pointer":"default"},r:H9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const f5t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:tLe},Symbol.toStringTag,{value:"Module"})),Ti={top:15,left:100,right:15,bottom:70};function IH({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Wv(),[c]=Wv(),[f]=Wv(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-Ti.left-Ti.right,[l]),m=I.useMemo(()=>u-Ti.top-Ti.bottom,[u]),g=I.useMemo(()=>{const C=Array.from(new Set(s.map(P=>P[i.category])));return SS(VRe).domain(C)},[s,i.category]),{xMin:y,yMin:v,xMax:_,yMax:w}=I.useMemo(()=>{const C=s.map(z=>+z[i.x]).filter(z=>z!==null),[P,N]=Ohe(C),$=s.map(z=>+z[i.y]).filter(z=>z!==null),[M,B]=Ohe($);return{xMin:P,xMax:N,yMin:M,yMax:B}},[s,i.x,i.y]),x=I.useMemo(()=>{const C=_-y;return p<=0?null:i.dataType==="date"?LRe([Ti.left,p+Ti.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Jp([Ti.left,p+Ti.left]).domain([y-C/10,_+C/10]).nice()},[i.dataType,p,_,y]),E=I.useMemo(()=>{const C=w-v;return m<=0?null:Jp([m+Ti.top,Ti.top]).domain([v-C/10,w+C/10]).nice()},[m,w,v]),b=I.useMemo(()=>{if(!x||!E)return()=>null;if(r==="Axis Selection"){const C=wIt().extent([[Ti.left,Ti.top+m-5],[Ti.left+p,Ti.top+m+5]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[N.selection[0],null],[N.selection[1],null]],x,E,N.mode)}),P=EIt().extent([[Ti.left-5,Ti.top],[Ti.left+5,Ti.top+m]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[null,N.selection[0]],[null,N.selection[1]]],x,E,N.mode)});return c.current&&f.current&&(vs(f.current).call(P),vs(c.current).call(C),t.hasBrush||(vs(f.current).call(P.move,[E(w),E(v)]),vs(c.current).call(C.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),E(w)],[x(new Date("2015-12-31")),E(v)]],x,E,"drag"))),()=>{vs(f.current).call(P.move,[E(w),E(v)]),vs(c.current).call(C.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),E(w)],[x(new Date("2015-12-31")),E(v)]],x,E,"clear")}}if(r==="Rectangular Selection"){const C=SIt().extent([[Ti.left,Ti.top],[Ti.left+p,Ti.top+m]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],x,E,P.mode)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(vs(a.current).call(C.move,null),e(null))});return vs(a.current).call(C),()=>{vs(a.current).call(C.move,null),n([[null,null],[null,null]],x,E,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[x(y),E(w)],[x(_),E(v)]],x,E,null),()=>n([[x(y),E(w)],[x(_),E(v)]],x,E,"clear")):r==="Paintbrush Selection"?()=>n([[x(y),E(w)],[x(_),E(v)]],x,E,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,_,y,x,w,v,E]),T=I.useMemo(()=>o.length===0?null:new Set(o),[o]),A=I.useMemo(()=>!x||!E?null:s.map((C,P)=>{if(C[i.x]===null||C[i.y]===null)return null;const N=i.dataType==="date"?x(new Date(C[i.x])):x(C[i.x]);return k.jsx("circle",{opacity:T&&!T.has(C[i.ids])?.3:1,r:3,fill:T&&!T.has(C[i.ids])?"lightgray":g(C[i.category]),cx:N,cy:E(C[i.y])},P)}),[T,g,s,i.category,i.dataType,i.ids,i.x,i.y,x,E]);return I.useEffect(()=>{r==="Axis Selection"&&hCt(".handle").style("fill","darkgrey")},[t,r]),k.jsxs(yp,{children:[k.jsxs(Wa,{children:[k.jsx(ur,{ml:60,compact:!0,style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),b==null||b()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?k.jsx(jIe,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:C=>h(C==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),k.jsxs(Wa,{style:{width:"100%",height:"100%"},noWrap:!0,children:[k.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[x&&E?k.jsxs("g",{children:[k.jsx(eLe,{yScale:E,label:i.y,horizontalPosition:Ti.left,xRange:x.range()}),k.jsx(IX,{xScale:x,yRange:E.range(),isDate:i.dataType==="date",vertPosition:m+Ti.top,label:i.x,ticks:x.ticks(i.brushType==="Axis Selection"?12:5).map(C=>({value:C.toString(),offset:x(C)}))})]}):null,A,k.jsx("g",{id:"brushXRef",ref:c}),k.jsx("g",{id:"brushYRef",ref:f}),x&&E&&r==="Paintbrush Selection"?k.jsx(tLe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:x,yScale:E}):null]}),r==="Slider Selection"&&x&&E?k.jsxs(yp,{style:{flexGrow:1},spacing:50,children:[k.jsxs(yp,{spacing:0,children:[k.jsx(ze,{children:i.x}),k.jsx(W7,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],labelAlwaysOn:!1,onChange:C=>{n([[x(C[0]),t.y1],[x(C[1]),t.y2]],x,E,"drag")},style:{width:"300px"},marks:x.ticks(5).map(C=>({value:C,label:C})),value:[x.invert(t.x1),x.invert(t.x2)]})]}),k.jsxs(yp,{spacing:0,children:[k.jsx(ze,{children:i.y}),k.jsx(W7,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],onChange:C=>{n([[t.x1,E(C[1])],[t.x2,E(C[0])]],x,E,"drag")},style:{width:"300px"},marks:E.ticks(5).map(C=>({value:C,label:C})),value:[E.invert(t.y2),E.invert(t.y1)]})]})]}):null]})]})}const d5t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:IH,default:IH},Symbol.toStringTag,{value:"Module"}));function oge({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{FV(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?sFt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=WI.create(),y=g.register("brush",(E,b)=>(E.all={brush:b},E)),v=g.register("brushMove",(E,b)=>(E.all={brush:b},E)),_=g.register("brushResize",(E,b)=>(E.all={brush:b},E)),w=g.register("brushClear",(E,b)=>(E.all={brush:b},E)),x=sJ({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:_,clearBrush:w},trrack:x}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>rd(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,_,w)=>{if(!y||!v)return;const x=y.invert(g[0][0]||i.x1),E=y.invert(g[1][0]||i.x2),b=v.invert(g[1][1]||i.y2),T=v.invert(g[0][1]||i.y1);let A=null;if(_==="clear")A=u;else if(w){const P=new Set(w);A=u.filter(F9(N=>P.has(N[e.ids])))}else e.brushType==="Axis Selection"?A=u.filter(F9(P=>new Date(P[e.x])>=new Date(x)&&new Date(P[e.x])<=new Date(E)&&P[e.y]>=b&&P[e.y]<=T)):A=u.filter(F9(P=>P[e.x]>=x&&P[e.x]<=E&&P[e.y]>=b&&P[e.y]<=T));const C={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:_!=="clear",ids:_!=="clear"?A==null?void 0:A.array("id"):[]};s(C),_==="drag"||_==="handle"?d(_,C):_==="clear"&&c.apply("Clear Brush",l.clearBrush(C)),r(A),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?k.jsxs(yp,{spacing:"xs",children:[k.jsx(IH,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),k.jsx(WV,{data:o,parameters:e,barsTable:p})]}):k.jsx(o_,{})}const h5t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:oge,default:oge},Symbol.toStringTag,{value:"Module"})),p5t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),age=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},LS=e=>{const t=I.useRef(null),n=age(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=age({...n,width:n.width||r,height:n.height||s});return[t,a]},m5t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:LS},Symbol.toStringTag,{value:"Module"}));function nLe({data:e,xScale:t,yScale:n,height:r}){return k.jsx("g",{children:e.map((i,s)=>k.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const g5t=Object.freeze(Object.defineProperty({__proto__:null,Bars:nLe},Symbol.toStringTag,{value:"Module"}));function oJ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Jp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return k.jsxs("g",{children:[k.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>k.jsxs("g",{transform:`translate(0,${a})`,children:[k.jsx("line",{x2:`${r}`,stroke:"currentColor"}),k.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const y5t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:oJ},Symbol.toStringTag,{value:"Module"}));function rLe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=NI().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return k.jsxs("g",{children:[k.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>k.jsx("g",{transform:`translate(${a}, 10)`,children:k.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const v5t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:rLe},Symbol.toStringTag,{value:"Module"})),_5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function b5t({parameters:e}){const[n,r]=LS(_5t),i=NI().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Jp().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return k.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:k.jsx("svg",{width:r.width,height:r.height,children:k.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[k.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:k.jsx(rLe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),k.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:k.jsx(oJ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),k.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:k.jsx(nLe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const w5t=Object.freeze(Object.defineProperty({__proto__:null,default:b5t},Symbol.toStringTag,{value:"Module"}));function iLe({data:e}){return k.jsx("g",{children:e.map(({bubble:t},n)=>k.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const E5t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:iLe},Symbol.toStringTag,{value:"Module"}));function aJ({positions:e}){return k.jsx("g",{children:e.map((t,n)=>k.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const S5t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:aJ},Symbol.toStringTag,{value:"Module"})),x5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},T5t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=fRe().size([t-10,n-10]).padding(1.5),o=tF(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},C5t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function A5t({parameters:e}){const[t,n]=LS(x5t),r=T5t(e,n.width,n.height),i=C5t(r,e.selectedIndices);return k.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:k.jsx("svg",{width:n.width,height:n.height,children:k.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[k.jsx(iLe,{data:r}),k.jsx(aJ,{positions:i})]})})})}const I5t=Object.freeze(Object.defineProperty({__proto__:null,default:A5t},Symbol.toStringTag,{value:"Module"}));function sLe({arcs:e}){return k.jsx("g",{children:e.map((t,n)=>k.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const O5t=Object.freeze(Object.defineProperty({__proto__:null,Slices:sLe},Symbol.toStringTag,{value:"Module"}));function oLe({positions:e}){return k.jsx("g",{children:e.map((t,n)=>k.jsx("g",{transform:`translate(${t.centroid()})`,children:k.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const P5t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:oLe},Symbol.toStringTag,{value:"Module"})),k5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},$5t=R$t().value(e=>e.value),Kx=150;function R5t({parameters:e}){const[t,n]=LS(k5t),r=$5t(e.data),i=r.map(o=>qV().innerRadius(0).outerRadius(Kx).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>qV().outerRadius(Kx+10).innerRadius(Kx+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return k.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:k.jsx("svg",{width:n.width,height:n.height,children:k.jsxs("g",{transform:`translate(${[n.marginLeft+Kx,n.marginTop+Kx].join(",")})`,children:[k.jsx(sLe,{arcs:i}),k.jsx(oLe,{positions:s})]})})})}const N5t=Object.freeze(Object.defineProperty({__proto__:null,default:R5t},Symbol.toStringTag,{value:"Module"}));function aLe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Jp().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return k.jsxs("g",{children:[k.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>k.jsxs("g",{transform:`translate(${a}, 0)`,children:[k.jsx("line",{y2:`${r}`,stroke:"currentColor"}),k.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const D5t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:aLe},Symbol.toStringTag,{value:"Module"}));function uLe({data:e,barWidth:t,yScale:n}){return k.jsx("g",{children:e.map((r,i)=>k.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const M5t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:uLe},Symbol.toStringTag,{value:"Module"})),L5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function F5t({parameters:e}){const[n,r]=LS(L5t),i=NI().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Jp().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(_=>+_.value),g=p.reduce((_,w)=>Number(_)+Number(w))/100,y={};p.forEach((_,w)=>{y[String.fromCharCode(w+65)]=_/g});const v=[y];return tRt().keys(e.data.map(_=>_.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return k.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:k.jsx("svg",{width:r.width,height:r.height,children:k.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[k.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:k.jsx(aLe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),k.jsx("g",{transform:"translate(0, 0)",children:k.jsx(oJ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),k.jsxs("g",{transform:"translate(0, 0)",children:[k.jsx(uLe,{data:c,barWidth:f,yScale:s}),k.jsx(aJ,{positions:d})]})]})})})}const j5t=Object.freeze(Object.defineProperty({__proto__:null,default:F5t},Symbol.toStringTag,{value:"Module"})),B5t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function U5t({parameters:e,setAnswer:t}){const[n,r]=LS(B5t),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=WI.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=sJ({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=vs("#movingCircle"),g=vs("#clickAccuracySvg"),y=TV(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],_=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+_,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:_}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;vs(n.current).select("circle").transition().duration(y).ease(aIt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:k.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:k.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[k.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),k.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),k.jsxs(dt,{children:["Adjust speed (px/s):",k.jsx(cK,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const z5t=Object.freeze(Object.defineProperty({__proto__:null,default:U5t},Symbol.toStringTag,{value:"Module"}));function uge({rankings:e}){return k.jsx("div",{style:{fontFamily:"sans-serif"},children:k.jsx("div",{children:e.map((t,n)=>k.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function V5t({parameters:e,setAnswer:t}){const n=xm(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=Zke(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=sZe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),k.jsxs("div",{children:[k.jsxs(Oo,{children:[k.jsxs(Oo.Col,{span:2,children:[k.jsx(uge,{rankings:a==="r1"?e.data.r1:e.data.r2}),k.jsx(ur,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?k.jsx(Ffe,{}):"Select this ranking"}),l&&r&&k.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),k.jsxs(Oo.Col,{span:2,children:[k.jsx(uge,{rankings:a==="r1"?e.data.r2:e.data.r1}),k.jsx(ur,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?k.jsx(Ffe,{}):"Select this ranking"}),l&&r&&k.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&k.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const H5t=Object.freeze(Object.defineProperty({__proto__:null,default:V5t},Symbol.toStringTag,{value:"Module"}));function q5t({source:e,activeSourceId:t}){const n=F.useRef(null);return I.useEffect(()=>{var r;e.id===t&&((r=n.current)==null||r.scrollIntoView({behavior:"smooth",block:"center"}))},[e.id,t]),k.jsx(ze,{ref:n,component:"span",bg:e.id===t?"blue.1":"transparent",px:5,dangerouslySetInnerHTML:{__html:e.text}})}function lLe({sourceList:e,activeSourceId:t}){const n=e.map((r,i)=>k.jsx(F.Fragment,{children:k.jsx(q5t,{source:r,activeSourceId:t})},i));return k.jsxs(zY,{style:{height:"800px"},children:[k.jsx(Qi,{order:2,children:"Source"}),k.jsx(ze,{children:n})]})}const W5t=Object.freeze(Object.defineProperty({__proto__:null,default:lLe},Symbol.toStringTag,{value:"Module"}));function cLe({sentences:e,onSourceClick:t}){const n=e.map((r,i)=>{const s=/^(.*?)([.?!])?$/,o=r.text.match(s),a=o?o[1]:r.text,u=o?o[2]:"";return k.jsxs(F.Fragment,{children:[a," ",r.sources.length>0&&k.jsxs("span",{children:["[",r.sources.map((l,c)=>k.jsxs(F.Fragment,{children:[k.jsx(Yv,{onMouseEnter:()=>t(r.id,l),onMouseLeave:()=>t(null,null),style:{cursor:"pointer"},children:l}),c<r.sources.length-1&&", "]},c)),"]"]}),u," "]},i)});return k.jsxs(ze,{children:[k.jsx(Qi,{order:2,children:"Summary"}),n]})}const G5t=Object.freeze(Object.defineProperty({__proto__:null,default:cLe},Symbol.toStringTag,{value:"Module"}));function Y5t({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState([]),[o,a]=I.useState([]),{actions:u,trrack:l}=I.useMemo(()=>{const f=WI.create(),d=f.register("mouseHover",(p,m)=>(p.activeSummaryId=m.summaryId,p.activeSourceId=m.sourceId,p)),h=sJ({registry:f,initialState:{activeSummaryId:null,activeSourceId:null}});return{actions:{mouseHoverAction:d},trrack:h}},[]);I.useEffect(()=>{FV(`./data/${e.datasetSummary}.csv`).then(f=>{const d=f.map(h=>({id:String(h.id),text:h.text??"",sources:(h.sources??"").split(",").map(p=>p.trim())}));s(d)})},[e]),I.useEffect(()=>{FV(`./data/${e.datasetSource}.csv`).then(f=>{const d=f.map(h=>({id:String(h.id),text:h.text??"",sources:(h.sources??"").split(",").map(p=>p.trim())}));a(d)})},[e]),I.useEffect(()=>{},[]);const c=(f,d)=>{l.apply("Clicked",u.mouseHoverAction({summaryId:f,sourceId:d})),t({status:!0,provenanceGraph:l.graph.backend,answers:{}}),r(d)};return k.jsxs(Oo,{children:[k.jsx(Oo.Col,{span:6,children:k.jsx(cLe,{sentences:i,onSourceClick:c})}),k.jsx(Oo.Col,{span:6,children:k.jsx(lLe,{sourceList:o,activeSourceId:n})})]})}const K5t=Object.freeze(Object.defineProperty({__proto__:null,default:Y5t},Symbol.toStringTag,{value:"Module"})),X5t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),lge=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":iRt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":h5t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":f5t,"../public/demo-brush-interactions/assets/Scatter.tsx":d5t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":nRt,"../public/demo-brush-interactions/assets/YAxis.tsx":c5t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":rRt,"../public/demo-brush-interactions/assets/types.ts":p5t,"../public/demo-cleveland/assets/BarChart.tsx":w5t,"../public/demo-cleveland/assets/BubbleChart.tsx":I5t,"../public/demo-cleveland/assets/PieChart.tsx":N5t,"../public/demo-cleveland/assets/StackedBarChart.tsx":j5t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":g5t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":E5t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":S5t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":D5t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":y5t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":v5t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":O5t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":P5t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":M5t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":m5t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":z5t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":H5t,"../public/sumsifter/Source.tsx":W5t,"../public/sumsifter/Summary.tsx":G5t,"../public/sumsifter/SummaryApp.tsx":K5t,"../public/sumsifter/types.ts":X5t});function Q5t({currentConfig:e}){const t=Sm(),n=xm(),r=`../public/${e.path}`,i=r in lge?lge[r].default:null,s=Eh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=wh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return k.jsx(I.Suspense,{fallback:k.jsx("div",{children:"Loading..."}),children:i?k.jsx(i,{parameters:e.parameters,setAnswer:u}):k.jsx(w1,{path:e.path})})}function J5t({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await YK(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?k.jsx(Ga,{text:t}):k.jsx(w1,{path:e.path})}const Z5t={},e8t=Object.freeze(Object.defineProperty({__proto__:null,default:Z5t},Symbol.toStringTag,{value:"Module"})),t8t=KWe(e8t);var n8t=t8t;function r8t(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function i8t(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function s8t(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function o8t(e){return e.__COMMENTS__}function a8t(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var BF={EOL:n8t.EOL||`
`,tryParseNumber:r8t,createComment:i8t,removeComment:s8t,getComment:o8t,forceComment:a8t},u8t="3.2.1";function l8t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return cge}else if(e.length===0)return cge;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return f8t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),c8t.bind(null,n)}function c8t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function cge(){}function f8t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function fLe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}fLe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function dLe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}dLe.description="parse hexadecimal numbers prefixed with 0x";function hLe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}hLe.description="support ISO dates";var uJ={loadDsf:l8t,std:{math:fLe,hex:dLe,date:hLe}},d8t=function(e,t){var n=BF,r=uJ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(M){return M==="{"||M==="}"||M==="["||M==="]"||M===","||M===":"}function d(M){var B,z=0,W=1;for(B=s-1;B>0&&i[B]!==`
`;B--,z++);for(;B>0;B--)i[B]===`
`&&W++;throw new Error(M+" at line "+W+","+z+" >>>"+i.substr(s-z,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(M){return i.charAt(s+M)}function m(M){for(var B="",z=o;h();){if(o===z)return h(),M&&z==="'"&&o==="'"&&B.length===0?(h(),g()):B;if(o==="\\")if(h(),o==="u"){for(var W=0,U=0;U<4;U++){h();var Y=o.charCodeAt(0),q;o>="0"&&o<="9"?q=Y-48:o>="a"&&o<="f"?q=Y-97+10:o>="A"&&o<="F"?q=Y-65+10:d("Bad \\u char "+o),W=W*16+q}B+=String.fromCharCode(W)}else if(typeof a[o]=="string")B+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):B+=o}d("Bad string")}function g(){for(var M="",B=0,z=0;;){var W=p(-z-5);if(!W||W===`
`)break;z++}function U(){for(var Y=z;o&&o<=" "&&o!==`
`&&Y-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(B++,h(),B===3)return M.slice(-1)===`
`&&(M=M.slice(0,-1)),M;continue}else for(;B>0;)M+="'",B--;o===`
`?(M+=`
`,h(),U()):(o!=="\r"&&(M+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var M="",B=s,z=-1;;){if(o===":")return M?z>=0&&z!==M.length&&(s=B+z,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),M;o<=" "?o?z<0&&(z=M.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):M+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var M=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var B=o==="\r"||o===`
`||o==="";if(B||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var z=M[0];switch(z){case"f":if(M.trim()==="false")return!1;break;case"n":if(M.trim()==="null")return null;break;case"t":if(M.trim()==="true")return!0;break;default:if(z==="-"||z>="0"&&z<="9"){var W=n.tryParseNumber(M);if(W!==void 0)return W}}if(B){M=M.trim();var U=l(M);return U!==void 0?U:M}}M+=o}}function w(M,B){var z;for(M--,z=s-2;z>M&&i[z]<=" "&&i[z]!==`
`;z--);i[z]===`
`&&z--,i[z]==="\r"&&z--;var W=i.substr(M,z-M+1);for(z=0;z<W.length;z++)if(W[z]>" "){var U=W.indexOf(`
`);if(U>=0){var Y=[W.substr(0,U),W.substr(U+1)];return B&&Y[0].trim().length===0&&Y.shift(),Y}else return[W]}return[]}function x(M){function B(W,U){var Y,q,D,L;switch(typeof W){case"string":W.indexOf(U)>=0&&(L=W);break;case"object":if(Object.prototype.toString.apply(W)==="[object Array]")for(Y=0,D=W.length;Y<D;Y++)L=B(W[Y],U)||L;else for(q in W)Object.prototype.hasOwnProperty.call(W,q)&&(L=B(W[q],U)||L)}return L}function z(W){var U=B(M,W);return U?"found '"+W+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return z("}")||z("]")}function E(){var M=[],B,z,W;try{if(u&&(B=n.createComment(M,{a:[]})),h(),z=s,v(),B&&(W=w(z,!0).join(`
`)),o==="]")return h(),B&&(B.e=[W]),M;for(;o;){if(M.push(T()),z=s,v(),o===","&&(h(),z=s,v()),B){var U=w(z);B.a.push([W||"",U[0]||""]),W=U[1]}if(o==="]")return h(),B&&(B.a[B.a.length-1][1]+=W||""),M;v()}d("End of input while parsing an array (missing ']')")}catch(Y){throw Y.hint=Y.hint||x(M),Y}}function b(M){var B="",z={},W,U,Y;try{if(u&&(W=n.createComment(z,{c:{},o:[]})),M?U=1:(h(),U=s),v(),W&&(Y=w(U,!0).join(`
`)),o==="}"&&!M)return W&&(W.e=[Y]),h(),z;for(;o;){if(B=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),z[B]=T(),U=s,v(),o===","&&(h(),U=s,v()),W){var q=w(U);W.c[B]=[Y||"",q[0]||""],Y=q[1],W.o.push(B)}if(o==="}"&&!M)return h(),W&&(W.c[B][1]+=Y||""),z;v()}if(M)return z;d("End of input while parsing an object (missing '}')")}catch(D){throw D.hint=D.hint||x(z),D}}function T(){switch(v(),o){case"{":return b();case"[":return E();case"'":case'"':return m(!0);default:return _()}}function A(M,B){var z=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var W=B.join(`
`),U=w(z).join(`
`);if(U||W){var Y=n.createComment(M,n.getComment(M));Y.r=[W,U]}}return M}function C(){v();var M=u?w(1):null;switch(o){case"{":return A(b(),M);case"[":return A(E(),M);default:return A(T(),M)}}function P(){v();var M=u?w(1):null;switch(o){case"{":return A(b(),M);case"[":return A(E(),M)}try{return A(b(!0),M)}catch(B){c();try{return A(T(),M)}catch{throw B}}}if(typeof e!="string")throw new Error("source is not a string");var N=null,$=!0;return t&&typeof t=="object"&&(u=t.keepWsc,N=t.dsf,$=t.legacyRoot!==!1),l=r.loadDsf(N,"parse"),i=e,c(),$?P():C()},h8t=function(e,t){var n=BF,r=uJ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var _=v[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,x="---\u2028--\uFEFF-",E=new RegExp('[\\\\\\"\0-'+x+"]","g"),b=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),T=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+x+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),C={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},P=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,N="",$=0;function M(L,G){return $+=L[0].length+L[1].length-L[2]-L[3],L[0]+G+L[1]}function B(L){return L.replace(E,function(G){var V=C[G];return typeof V=="string"?M(g.esc,V):M(g.uni,("0000"+G.charCodeAt(0).toString(16)).slice(-4))})}function z(L,G,V,H){return L?(b.lastIndex=0,A.lastIndex=0,c||V||b.test(L)||n.tryParseNumber(L,!0)!==void 0||A.test(L)?(E.lastIndex=0,T.lastIndex=0,E.test(L)?!T.test(L)&&!H&&d?W(L,G):M(g.qstr,B(L)):M(g.qstr,L)):M(g.str,L)):M(g.qstr,"")}function W(L,G){var V,H=L.replace(/\r/g,"").split(`
`);if(G+=o,H.length===1)return M(g.mstr,H[0]);var te=s+G+g.mstr[0];for(V=0;V<H.length;V++)te+=s,H[V]&&(te+=G+H[V]);return te+s+G+g.mstr[1]}function U(L){return L?l||P.test(L)?(E.lastIndex=0,M(g.qkey,E.test(L)?B(L):L)):M(g.key,L):'""'}function Y(L,G,V,H){function te(At){return At&&At[At[0]==="\r"?1:0]===`
`}function le(At){return At&&!te(At)}function me(At,Tn,Zt){if(!At)return"";At=n.forceComment(At);var Jt,rr=At.length;for(Jt=0;Jt<rr&&At[Jt]<=" ";Jt++);return Zt&&Jt>0&&(At=At.substr(Jt)),Jt<rr?Tn+M(g.rem,At):At}var ye=w(L);if(ye!==void 0)return M(g.dsf,ye);switch(typeof L){case"string":return z(L,N,G,H);case"number":return isFinite(L)?M(g.num,String(L)):M(g.lit,"null");case"boolean":return M(g.lit,String(L));case"object":if(!L)return M(g.lit,"null");var de;a&&(de=n.getComment(L));var we=Object.prototype.toString.apply(L)==="[object Array]",he=N;N+=o;var He=s+he,Me=s+N,Ke=V||u?"":He,je=[],De,qe=f?[]:null,Qt=c,rt=d,We=h?"":g.com[0],Pt=0,ut,mt,vt,Ht,Xt,fe,xe,Le,ft;if(we){for(ut=0,mt=L.length;ut<mt;ut++){if(De=ut<mt-1,de?(fe=de.a[ut]||[],xe=le(fe[1]),je.push(me(fe[0],`
`)+Me),qe&&(fe[0]||fe[1]||xe)&&(qe=null)):je.push(Me),$=0,Ht=L[ut],je.push(Y(Ht,de?xe:!1,!0)+(De?h:"")),qe){switch(typeof Ht){case"string":$=0,c=!0,d=0,qe.push(Y(Ht,!1,!0)+(De?g.com[0]:"")),c=Qt,d=rt;break;case"object":if(Ht){qe=null;break}default:qe.push(je[je.length-1]+(De?We:""));break}De&&($+=g.com[0].length-g.com[2]),Pt+=$}de&&fe[1]&&je.push(me(fe[1],xe?" ":`
`,xe))}mt===0?de&&de.e&&je.push(me(de.e[0],`
`)+He):je.push(He),je.length===0?Le=M(g.arr,""):(Le=Ke+M(g.arr,je.join("")),qe&&(ft=qe.join(" "),ft.length-Pt<=f&&(Le=M(g.arr,ft))))}else{var Ze=de?de.o.slice():[],ct=[];for(vt in L)Object.prototype.hasOwnProperty.call(L,vt)&&Ze.indexOf(vt)<0&&ct.push(vt);m&&ct.sort();var ot=Ze.concat(ct);for(ut=0,mt=ot.length;ut<mt;ut++)if(De=ut<mt-1,vt=ot[ut],de?(fe=de.c[vt]||[],xe=le(fe[1]),je.push(me(fe[0],`
`)+Me),qe&&(fe[0]||fe[1]||xe)&&(qe=null)):je.push(Me),$=0,Ht=L[vt],Xt=Y(Ht,de&&xe),je.push(U(vt)+g.col[0]+(te(Xt)?"":" ")+Xt+(De?h:"")),de&&fe[1]&&je.push(me(fe[1],xe?" ":`
`,xe)),qe){switch(typeof Ht){case"string":$=0,c=!0,d=0,Xt=Y(Ht,!1),c=Qt,d=rt,qe.push(U(vt)+g.col[0]+" "+Xt+(De?g.com[0]:""));break;case"object":if(Ht){qe=null;break}default:qe.push(je[je.length-1]+(De?We:""));break}$+=g.col[0].length-g.col[2],De&&($+=g.com[0].length-g.com[2]),Pt+=$}mt===0?de&&de.e&&je.push(me(de.e[0],`
`)+He):je.push(He),je.length===0?Le=M(g.obj,""):(Le=Ke+M(g.obj,je.join("")),qe&&(ft=qe.join(" "),ft.length-Pt<=f&&(Le=M(g.obj,ft))))}return N=he,Le}}w=r.loadDsf(p,"stringify");var q="",D=a?D=(n.getComment(e)||{}).r:null;return D&&D[0]&&(q=D[0]+`
`),q+=Y(e,null,!0,!0),D&&(q+=D[1]||""),q},Cw=BF;function V2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function OH(e,t){if(!(e===null||typeof e!="object")){var n=Cw.getComment(e);n&&Cw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)fge(o.a,r,n.a[r],OH(e[r]))&&(s=!0);!s&&n.e&&(o.e=V2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];fge(o.s,l,n.c[l],OH(e[l]))&&(s=!0)}!s&&n.e&&(o.e=V2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=V2(n.r[0],n.r[1])),s?o:void 0}}function p8t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function m8t(e,t){var n=[];if(PH(e,t,n,[]),n.length>0){var r=gM(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+p8t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),gM(t,r,1)}}function fge(e,t,n,r){var i=V2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function H2(e,t){var n=V2(t.b,t.a);return n.path=e,n}function q2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(H2(s,o)),q2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(H2(u,l)),q2(l.x,t,u))});e.e&&t.push(H2(n,e.e))}}function PH(e,t,n,r){if(e){if(t===null||typeof t!="object"){q2(e,n,r);return}var i,s=Cw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],PH(u.x,t[i],n,l)):(n.push(H2(l,u)),q2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],PH(d.x,t[c],n,f))):d&&(n.push(H2(f,d)),q2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function gM(e,t,n){var r=Cw.createComment(e,Cw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Cw.forceComment(t)),r.r[n]||""}var g8t={extract:function(e){return OH(e,!0)},merge:m8t,header:function(e,t){return gM(e,t,0)},footer:function(e,t){return gM(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var dge=BF,y8t=u8t,hge=d8t,pge=h8t,v8t=g8t,_8t=uJ,lJ={parse:hge,stringify:pge,endOfLine:function(){return dge.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(dge.EOL=e)},version:y8t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,hge(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,pge(e,t)}},comments:v8t,dsf:_8t.std},kH={exports:{}},pLe={},xf={},TE={},GI={},Ln={},pA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const _=[y[0]];let w=0;for(;w<v.length;)a(_,v[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...v){const _=[h(y[0])];let w=0;for(;w<v.length;)_.push(s),a(_,v[w]),_.push(s,h(y[++w]));return u(_),new r(_)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const _=l(y[v-1],y[v+1]);if(_!==void 0){y.splice(v-1,3,_);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(pA);var $H={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=pA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})($H);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=pA,n=$H;var r=pA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=$H;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(V,H){return this}}class o extends s{constructor(V,H,te){super(),this.varKind=V,this.name=H,this.rhs=te}render({es5:V,_n:H}){const te=V?n.varKinds.var:this.varKind,le=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${le};`+H}optimizeNames(V,H){if(V[this.name.str])return this.rhs&&(this.rhs=M(this.rhs,V,H)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(V,H,te){super(),this.lhs=V,this.rhs=H,this.sideEffects=te}render({_n:V}){return`${this.lhs} = ${this.rhs};`+V}optimizeNames(V,H){if(!(this.lhs instanceof t.Name&&!V[this.lhs.str]&&!this.sideEffects))return this.rhs=M(this.rhs,V,H),this}get names(){const V=this.lhs instanceof t.Name?{}:{...this.lhs.names};return $(V,this.rhs)}}class u extends a{constructor(V,H,te,le){super(V,te,le),this.op=H}render({_n:V}){return`${this.lhs} ${this.op}= ${this.rhs};`+V}}class l extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`${this.label}:`+V}}class c extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`break${this.label?` ${this.label}`:""};`+V}}class f extends s{constructor(V){super(),this.error=V}render({_n:V}){return`throw ${this.error};`+V}get names(){return this.error.names}}class d extends s{constructor(V){super(),this.code=V}render({_n:V}){return`${this.code};`+V}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(V,H){return this.code=M(this.code,V,H),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(V=[]){super(),this.nodes=V}render(V){return this.nodes.reduce((H,te)=>H+te.render(V),"")}optimizeNodes(){const{nodes:V}=this;let H=V.length;for(;H--;){const te=V[H].optimizeNodes();Array.isArray(te)?V.splice(H,1,...te):te?V[H]=te:V.splice(H,1)}return V.length>0?this:void 0}optimizeNames(V,H){const{nodes:te}=this;let le=te.length;for(;le--;){const me=te[le];me.optimizeNames(V,H)||(B(V,me.names),te.splice(le,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((V,H)=>N(V,H.names),{})}}class p extends h{render(V){return"{"+V._n+super.render(V)+"}"+V._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(V,H){super(H),this.condition=V}render(V){let H=`if(${this.condition})`+super.render(V);return this.else&&(H+="else "+this.else.render(V)),H}optimizeNodes(){super.optimizeNodes();const V=this.condition;if(V===!0)return this.nodes;let H=this.else;if(H){const te=H.optimizeNodes();H=this.else=Array.isArray(te)?new g(te):te}if(H)return V===!1?H instanceof y?H:H.nodes:this.nodes.length?this:new y(z(V),H instanceof y?[H]:H.nodes);if(!(V===!1||!this.nodes.length))return this}optimizeNames(V,H){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(V,H),!!(super.optimizeNames(V,H)||this.else))return this.condition=M(this.condition,V,H),this}get names(){const V=super.names;return $(V,this.condition),this.else&&N(V,this.else.names),V}}y.kind="if";class v extends p{}v.kind="for";class _ extends v{constructor(V){super(),this.iteration=V}render(V){return`for(${this.iteration})`+super.render(V)}optimizeNames(V,H){if(super.optimizeNames(V,H))return this.iteration=M(this.iteration,V,H),this}get names(){return N(super.names,this.iteration.names)}}class w extends v{constructor(V,H,te,le){super(),this.varKind=V,this.name=H,this.from=te,this.to=le}render(V){const H=V.es5?n.varKinds.var:this.varKind,{name:te,from:le,to:me}=this;return`for(${H} ${te}=${le}; ${te}<${me}; ${te}++)`+super.render(V)}get names(){const V=$(super.names,this.from);return $(V,this.to)}}class x extends v{constructor(V,H,te,le){super(),this.loop=V,this.varKind=H,this.name=te,this.iterable=le}render(V){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(V)}optimizeNames(V,H){if(super.optimizeNames(V,H))return this.iterable=M(this.iterable,V,H),this}get names(){return N(super.names,this.iterable.names)}}class E extends p{constructor(V,H,te){super(),this.name=V,this.args=H,this.async=te}render(V){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(V)}}E.kind="func";class b extends h{render(V){return"return "+super.render(V)}}b.kind="return";class T extends p{render(V){let H="try"+super.render(V);return this.catch&&(H+=this.catch.render(V)),this.finally&&(H+=this.finally.render(V)),H}optimizeNodes(){var V,H;return super.optimizeNodes(),(V=this.catch)===null||V===void 0||V.optimizeNodes(),(H=this.finally)===null||H===void 0||H.optimizeNodes(),this}optimizeNames(V,H){var te,le;return super.optimizeNames(V,H),(te=this.catch)===null||te===void 0||te.optimizeNames(V,H),(le=this.finally)===null||le===void 0||le.optimizeNames(V,H),this}get names(){const V=super.names;return this.catch&&N(V,this.catch.names),this.finally&&N(V,this.finally.names),V}}class A extends p{constructor(V){super(),this.error=V}render(V){return`catch(${this.error})`+super.render(V)}}A.kind="catch";class C extends p{render(V){return"finally"+super.render(V)}}C.kind="finally";class P{constructor(V,H={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...H,_n:H.lines?`
`:""},this._extScope=V,this._scope=new n.Scope({parent:V}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(V){return this._scope.name(V)}scopeName(V){return this._extScope.name(V)}scopeValue(V,H){const te=this._extScope.value(V,H);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(V,H){return this._extScope.getValue(V,H)}scopeRefs(V){return this._extScope.scopeRefs(V,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(V,H,te,le){const me=this._scope.toName(H);return te!==void 0&&le&&(this._constants[me.str]=te),this._leafNode(new o(V,me,te)),me}const(V,H,te){return this._def(n.varKinds.const,V,H,te)}let(V,H,te){return this._def(n.varKinds.let,V,H,te)}var(V,H,te){return this._def(n.varKinds.var,V,H,te)}assign(V,H,te){return this._leafNode(new a(V,H,te))}add(V,H){return this._leafNode(new u(V,e.operators.ADD,H))}code(V){return typeof V=="function"?V():V!==t.nil&&this._leafNode(new d(V)),this}object(...V){const H=["{"];for(const[te,le]of V)H.length>1&&H.push(","),H.push(te),(te!==le||this.opts.es5)&&(H.push(":"),(0,t.addCodeArg)(H,le));return H.push("}"),new t._Code(H)}if(V,H,te){if(this._blockNode(new y(V)),H&&te)this.code(H).else().code(te).endIf();else if(H)this.code(H).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(V){return this._elseNode(new y(V))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(V,H){return this._blockNode(V),H&&this.code(H).endFor(),this}for(V,H){return this._for(new _(V),H)}forRange(V,H,te,le,me=this.opts.es5?n.varKinds.var:n.varKinds.let){const ye=this._scope.toName(V);return this._for(new w(me,ye,H,te),()=>le(ye))}forOf(V,H,te,le=n.varKinds.const){const me=this._scope.toName(V);if(this.opts.es5){const ye=H instanceof t.Name?H:this.var("_arr",H);return this.forRange("_i",0,(0,t._)`${ye}.length`,de=>{this.var(me,(0,t._)`${ye}[${de}]`),te(me)})}return this._for(new x("of",le,me,H),()=>te(me))}forIn(V,H,te,le=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(V,(0,t._)`Object.keys(${H})`,te);const me=this._scope.toName(V);return this._for(new x("in",le,me,H),()=>te(me))}endFor(){return this._endBlockNode(v)}label(V){return this._leafNode(new l(V))}break(V){return this._leafNode(new c(V))}return(V){const H=new b;if(this._blockNode(H),this.code(V),H.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(b)}try(V,H,te){if(!H&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const le=new T;if(this._blockNode(le),this.code(V),H){const me=this.name("e");this._currNode=le.catch=new A(me),H(me)}return te&&(this._currNode=le.finally=new C,this.code(te)),this._endBlockNode(A,C)}throw(V){return this._leafNode(new f(V))}block(V,H){return this._blockStarts.push(this._nodes.length),V&&this.code(V).endBlock(H),this}endBlock(V){const H=this._blockStarts.pop();if(H===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-H;if(te<0||V!==void 0&&te!==V)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${V} expected`);return this._nodes.length=H,this}func(V,H=t.nil,te,le){return this._blockNode(new E(V,H,te)),le&&this.code(le).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(V=1){for(;V-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(V){return this._currNode.nodes.push(V),this}_blockNode(V){this._currNode.nodes.push(V),this._nodes.push(V)}_endBlockNode(V,H){const te=this._currNode;if(te instanceof V||H&&te instanceof H)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${H?`${V.kind}/${H.kind}`:V.kind}"`)}_elseNode(V){const H=this._currNode;if(!(H instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=H.else=V,this}get _root(){return this._nodes[0]}get _currNode(){const V=this._nodes;return V[V.length-1]}set _currNode(V){const H=this._nodes;H[H.length-1]=V}}e.CodeGen=P;function N(G,V){for(const H in V)G[H]=(G[H]||0)+(V[H]||0);return G}function $(G,V){return V instanceof t._CodeOrName?N(G,V.names):G}function M(G,V,H){if(G instanceof t.Name)return te(G);if(!le(G))return G;return new t._Code(G._items.reduce((me,ye)=>(ye instanceof t.Name&&(ye=te(ye)),ye instanceof t._Code?me.push(...ye._items):me.push(ye),me),[]));function te(me){const ye=H[me.str];return ye===void 0||V[me.str]!==1?me:(delete V[me.str],ye)}function le(me){return me instanceof t._Code&&me._items.some(ye=>ye instanceof t.Name&&V[ye.str]===1&&H[ye.str]!==void 0)}}function B(G,V){for(const H in V)G[H]=(G[H]||0)-(V[H]||0)}function z(G){return typeof G=="boolean"||typeof G=="number"||G===null?!G:(0,t._)`!${L(G)}`}e.not=z;const W=D(e.operators.AND);function U(...G){return G.reduce(W)}e.and=U;const Y=D(e.operators.OR);function q(...G){return G.reduce(Y)}e.or=q;function D(G){return(V,H)=>V===t.nil?H:H===t.nil?V:(0,t._)`${L(V)} ${G} ${L(H)}`}function L(G){return G instanceof t.Name?G:(0,t._)`(${G})`}})(Ln);var pr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=Ln,n=pA;function r(E){const b={};for(const T of E)b[T]=!0;return b}e.toHash=r;function i(E,b){return typeof b=="boolean"?b:Object.keys(b).length===0?!0:(s(E,b),!o(b,E.self.RULES.all))}e.alwaysValidSchema=i;function s(E,b=E.schema){const{opts:T,self:A}=E;if(!T.strictSchema||typeof b=="boolean")return;const C=A.RULES.keywords;for(const P in b)C[P]||x(E,`unknown keyword: "${P}"`)}e.checkUnknownRules=s;function o(E,b){if(typeof E=="boolean")return!E;for(const T in E)if(b[T])return!0;return!1}e.schemaHasRules=o;function a(E,b){if(typeof E=="boolean")return!E;for(const T in E)if(T!=="$ref"&&b.all[T])return!0;return!1}e.schemaHasRulesButRef=a;function u({topSchemaRef:E,schemaPath:b},T,A,C){if(!C){if(typeof T=="number"||typeof T=="boolean")return T;if(typeof T=="string")return(0,t._)`${T}`}return(0,t._)`${E}${b}${(0,t.getProperty)(A)}`}e.schemaRefOrVal=u;function l(E){return d(decodeURIComponent(E))}e.unescapeFragment=l;function c(E){return encodeURIComponent(f(E))}e.escapeFragment=c;function f(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=f;function d(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=d;function h(E,b){if(Array.isArray(E))for(const T of E)b(T);else b(E)}e.eachItem=h;function p({mergeNames:E,mergeToName:b,mergeValues:T,resultToName:A}){return(C,P,N,$)=>{const M=N===void 0?P:N instanceof t.Name?(P instanceof t.Name?E(C,P,N):b(C,P,N),N):P instanceof t.Name?(b(C,N,P),P):T(P,N);return $===t.Name&&!(M instanceof t.Name)?A(C,M):M}}e.mergeEvaluated={props:p({mergeNames:(E,b,T)=>E.if((0,t._)`${T} !== true && ${b} !== undefined`,()=>{E.if((0,t._)`${b} === true`,()=>E.assign(T,!0),()=>E.assign(T,(0,t._)`${T} || {}`).code((0,t._)`Object.assign(${T}, ${b})`))}),mergeToName:(E,b,T)=>E.if((0,t._)`${T} !== true`,()=>{b===!0?E.assign(T,!0):(E.assign(T,(0,t._)`${T} || {}`),g(E,T,b))}),mergeValues:(E,b)=>E===!0?!0:{...E,...b},resultToName:m}),items:p({mergeNames:(E,b,T)=>E.if((0,t._)`${T} !== true && ${b} !== undefined`,()=>E.assign(T,(0,t._)`${b} === true ? true : ${T} > ${b} ? ${T} : ${b}`)),mergeToName:(E,b,T)=>E.if((0,t._)`${T} !== true`,()=>E.assign(T,b===!0?!0:(0,t._)`${T} > ${b} ? ${T} : ${b}`)),mergeValues:(E,b)=>E===!0?!0:Math.max(E,b),resultToName:(E,b)=>E.var("items",b)})};function m(E,b){if(b===!0)return E.var("props",!0);const T=E.var("props",(0,t._)`{}`);return b!==void 0&&g(E,T,b),T}e.evaluatedPropsToName=m;function g(E,b,T){Object.keys(T).forEach(A=>E.assign((0,t._)`${b}${(0,t.getProperty)(A)}`,!0))}e.setEvaluated=g;const y={};function v(E,b){return E.scopeValue("func",{ref:b,code:y[b.code]||(y[b.code]=new n._Code(b.code))})}e.useFunc=v;var _;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(_=e.Type||(e.Type={}));function w(E,b,T){if(E instanceof t.Name){const A=b===_.Num;return T?A?(0,t._)`"[" + ${E} + "]"`:(0,t._)`"['" + ${E} + "']"`:A?(0,t._)`"/" + ${E}`:(0,t._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return T?(0,t.getProperty)(E).toString():"/"+f(E)}e.getErrorPath=w;function x(E,b,T=E.opts.strictSchema){if(T){if(b=`strict mode: ${b}`,T===!0)throw new Error(b);E.self.logger.warn(b)}}e.checkStrictMode=x})(pr);var Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});const Jo=Ln,b8t={data:new Jo.Name("data"),valCxt:new Jo.Name("valCxt"),instancePath:new Jo.Name("instancePath"),parentData:new Jo.Name("parentData"),parentDataProperty:new Jo.Name("parentDataProperty"),rootData:new Jo.Name("rootData"),dynamicAnchors:new Jo.Name("dynamicAnchors"),vErrors:new Jo.Name("vErrors"),errors:new Jo.Name("errors"),this:new Jo.Name("this"),self:new Jo.Name("self"),scope:new Jo.Name("scope"),json:new Jo.Name("json"),jsonPos:new Jo.Name("jsonPos"),jsonLen:new Jo.Name("jsonLen"),jsonPart:new Jo.Name("jsonPart")};Ch.default=b8t;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Ln,n=pr,r=Ch;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,_){const{it:w}=g,{gen:x,compositeRule:E,allErrors:b}=w,T=f(g,y,v);_??(E||b)?u(x,T):l(w,(0,t._)`[${T}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:_}=g,{gen:w,compositeRule:x,allErrors:E}=_,b=f(g,y,v);u(w,b),x||E||l(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:_,errsCount:w,it:x}){if(w===void 0)throw new Error("ajv implementation error");const E=g.name("err");g.forRange("i",w,r.default.errors,b=>{g.const(E,(0,t._)`${r.default.vErrors}[${b}]`),g.if((0,t._)`${E}.instancePath === undefined`,()=>g.assign((0,t._)`${E}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),g.assign((0,t._)`${E}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${y}`),x.opts.verbose&&(g.assign((0,t._)`${E}.schema`,v),g.assign((0,t._)`${E}.data`,_))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:_,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${_}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:_,it:w}=g,x=[h(w,v),p(g,v)];return m(g,y,x),_.object(...x)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},_){const{keyword:w,data:x,schemaValue:E,it:b}=g,{opts:T,propertyName:A,topSchemaRef:C,schemaPath:P}=b;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),T.messages&&_.push([c.message,typeof v=="function"?v(g):v]),T.verbose&&_.push([c.schema,E],[c.parentSchema,(0,t._)`${C}${P}`],[r.default.data,x]),A&&_.push([c.propertyName,A])}})(GI);Object.defineProperty(TE,"__esModule",{value:!0});TE.boolOrEmptySchema=TE.topBoolOrEmptySchema=void 0;const w8t=GI,E8t=Ln,S8t=Ch,x8t={message:"boolean schema is false"};function T8t(e){const{gen:t,schema:n,validateName:r}=e;n===!1?mLe(e,!1):typeof n=="object"&&n.$async===!0?t.return(S8t.default.data):(t.assign((0,E8t._)`${r}.errors`,null),t.return(!0))}TE.topBoolOrEmptySchema=T8t;function C8t(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),mLe(e)):n.var(t,!0)}TE.boolOrEmptySchema=C8t;function mLe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,w8t.reportError)(i,x8t,void 0,t)}var YI={},O1={};Object.defineProperty(O1,"__esModule",{value:!0});O1.getRules=O1.isJSONType=void 0;const A8t=["string","number","integer","boolean","null","object","array"],I8t=new Set(A8t);function O8t(e){return typeof e=="string"&&I8t.has(e)}O1.isJSONType=O8t;function P8t(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}O1.getRules=P8t;var Mp={};Object.defineProperty(Mp,"__esModule",{value:!0});Mp.shouldUseRule=Mp.shouldUseGroup=Mp.schemaHasRulesForType=void 0;function k8t({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&gLe(e,r)}Mp.schemaHasRulesForType=k8t;function gLe(e,t){return t.rules.some(n=>yLe(e,n))}Mp.shouldUseGroup=gLe;function yLe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Mp.shouldUseRule=yLe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=O1,n=Mp,r=GI,i=Ln,s=pr;var o;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(o=e.DataType||(e.DataType={}));function a(_){const w=u(_.type);if(w.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&w.push("null")}return w}e.getSchemaTypes=a;function u(_){const w=Array.isArray(_)?_:_?[_]:[];if(w.every(t.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}e.getJSONTypes=u;function l(_,w){const{gen:x,data:E,opts:b}=_,T=f(w,b.coerceTypes),A=w.length>0&&!(T.length===0&&w.length===1&&(0,n.schemaHasRulesForType)(_,w[0]));if(A){const C=m(w,E,b.strictNumbers,o.Wrong);x.if(C,()=>{T.length?d(_,w,T):y(_)})}return A}e.coerceAndCheckDataType=l;const c=new Set(["string","number","integer","boolean","null"]);function f(_,w){return w?_.filter(x=>c.has(x)||w==="array"&&x==="array"):[]}function d(_,w,x){const{gen:E,data:b,opts:T}=_,A=E.let("dataType",(0,i._)`typeof ${b}`),C=E.let("coerced",(0,i._)`undefined`);T.coerceTypes==="array"&&E.if((0,i._)`${A} == 'object' && Array.isArray(${b}) && ${b}.length == 1`,()=>E.assign(b,(0,i._)`${b}[0]`).assign(A,(0,i._)`typeof ${b}`).if(m(w,b,T.strictNumbers),()=>E.assign(C,b))),E.if((0,i._)`${C} !== undefined`);for(const N of x)(c.has(N)||N==="array"&&T.coerceTypes==="array")&&P(N);E.else(),y(_),E.endIf(),E.if((0,i._)`${C} !== undefined`,()=>{E.assign(b,C),h(_,C)});function P(N){switch(N){case"string":E.elseIf((0,i._)`${A} == "number" || ${A} == "boolean"`).assign(C,(0,i._)`"" + ${b}`).elseIf((0,i._)`${b} === null`).assign(C,(0,i._)`""`);return;case"number":E.elseIf((0,i._)`${A} == "boolean" || ${b} === null
              || (${A} == "string" && ${b} && ${b} == +${b})`).assign(C,(0,i._)`+${b}`);return;case"integer":E.elseIf((0,i._)`${A} === "boolean" || ${b} === null
              || (${A} === "string" && ${b} && ${b} == +${b} && !(${b} % 1))`).assign(C,(0,i._)`+${b}`);return;case"boolean":E.elseIf((0,i._)`${b} === "false" || ${b} === 0 || ${b} === null`).assign(C,!1).elseIf((0,i._)`${b} === "true" || ${b} === 1`).assign(C,!0);return;case"null":E.elseIf((0,i._)`${b} === "" || ${b} === 0 || ${b} === false`),E.assign(C,null);return;case"array":E.elseIf((0,i._)`${A} === "string" || ${A} === "number"
              || ${A} === "boolean" || ${b} === null`).assign(C,(0,i._)`[${b}]`)}}}function h({gen:_,parentData:w,parentDataProperty:x},E){_.if((0,i._)`${w} !== undefined`,()=>_.assign((0,i._)`${w}[${x}]`,E))}function p(_,w,x,E=o.Correct){const b=E===o.Correct?i.operators.EQ:i.operators.NEQ;let T;switch(_){case"null":return(0,i._)`${w} ${b} null`;case"array":T=(0,i._)`Array.isArray(${w})`;break;case"object":T=(0,i._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":T=A((0,i._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":T=A();break;default:return(0,i._)`typeof ${w} ${b} ${_}`}return E===o.Correct?T:(0,i.not)(T);function A(C=i.nil){return(0,i.and)((0,i._)`typeof ${w} == "number"`,C,x?(0,i._)`isFinite(${w})`:i.nil)}}e.checkDataType=p;function m(_,w,x,E){if(_.length===1)return p(_[0],w,x,E);let b;const T=(0,s.toHash)(_);if(T.array&&T.object){const A=(0,i._)`typeof ${w} != "object"`;b=T.null?A:(0,i._)`!${w} || ${A}`,delete T.null,delete T.array,delete T.object}else b=i.nil;T.number&&delete T.integer;for(const A in T)b=(0,i.and)(b,p(A,w,x,E));return b}e.checkDataTypes=m;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:w})=>typeof _=="string"?(0,i._)`{type: ${_}}`:(0,i._)`{type: ${w}}`};function y(_){const w=v(_);(0,r.reportError)(w,g)}e.reportTypeError=y;function v(_){const{gen:w,data:x,schema:E}=_,b=(0,s.schemaRefOrVal)(_,E,"type");return{gen:w,keyword:"type",data:x,schema:E.type,schemaCode:b,schemaValue:b,parentSchema:E,params:{},it:_}}})(YI);var UF={};Object.defineProperty(UF,"__esModule",{value:!0});UF.assignDefaults=void 0;const tb=Ln,$8t=pr;function R8t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)mge(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>mge(e,s,i.default))}UF.assignDefaults=R8t;function mge(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,tb._)`${s}${(0,tb.getProperty)(t)}`;if(i){(0,$8t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,tb._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,tb._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,tb._)`${a} = ${(0,tb.stringify)(n)}`)}var $d={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.validateUnion=Dn.validateArray=Dn.usePattern=Dn.callValidateCode=Dn.schemaProperties=Dn.allSchemaProperties=Dn.noPropertyInData=Dn.propertyInData=Dn.isOwnProperty=Dn.hasPropFunc=Dn.reportMissingProp=Dn.checkMissingProp=Dn.checkReportMissingProp=void 0;const gi=Ln,cJ=pr,qm=Ch,N8t=pr;function D8t(e,t){const{gen:n,data:r,it:i}=e;n.if(dJ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,gi._)`${t}`},!0),e.error()})}Dn.checkReportMissingProp=D8t;function M8t({gen:e,data:t,it:{opts:n}},r,i){return(0,gi.or)(...r.map(s=>(0,gi.and)(dJ(e,t,s,n.ownProperties),(0,gi._)`${i} = ${s}`)))}Dn.checkMissingProp=M8t;function L8t(e,t){e.setParams({missingProperty:t},!0),e.error()}Dn.reportMissingProp=L8t;function vLe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,gi._)`Object.prototype.hasOwnProperty`})}Dn.hasPropFunc=vLe;function fJ(e,t,n){return(0,gi._)`${vLe(e)}.call(${t}, ${n})`}Dn.isOwnProperty=fJ;function F8t(e,t,n,r){const i=(0,gi._)`${t}${(0,gi.getProperty)(n)} !== undefined`;return r?(0,gi._)`${i} && ${fJ(e,t,n)}`:i}Dn.propertyInData=F8t;function dJ(e,t,n,r){const i=(0,gi._)`${t}${(0,gi.getProperty)(n)} === undefined`;return r?(0,gi.or)(i,(0,gi.not)(fJ(e,t,n))):i}Dn.noPropertyInData=dJ;function _Le(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Dn.allSchemaProperties=_Le;function j8t(e,t){return _Le(t).filter(n=>!(0,cJ.alwaysValidSchema)(e,t[n]))}Dn.schemaProperties=j8t;function B8t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,gi._)`${e}, ${t}, ${r}${i}`:t,f=[[qm.default.instancePath,(0,gi.strConcat)(qm.default.instancePath,s)],[qm.default.parentData,o.parentData],[qm.default.parentDataProperty,o.parentDataProperty],[qm.default.rootData,qm.default.rootData]];o.opts.dynamicRef&&f.push([qm.default.dynamicAnchors,qm.default.dynamicAnchors]);const d=(0,gi._)`${c}, ${n.object(...f)}`;return u!==gi.nil?(0,gi._)`${a}.call(${u}, ${d})`:(0,gi._)`${a}(${d})`}Dn.callValidateCode=B8t;const U8t=(0,gi._)`new RegExp`;function z8t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,gi._)`${i.code==="new RegExp"?U8t:(0,N8t.useFunc)(e,i)}(${n}, ${r})`})}Dn.usePattern=z8t;function V8t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,gi._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:cJ.Type.Num},s),t.if((0,gi.not)(s),a)})}}Dn.validateArray=V8t;function H8t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,cJ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,gi._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,gi.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Dn.validateUnion=H8t;Object.defineProperty($d,"__esModule",{value:!0});$d.validateKeywordUsage=$d.validSchemaType=$d.funcKeywordCode=$d.macroKeywordCode=void 0;const Ra=Ln,gv=Ch,q8t=Dn,W8t=GI;function G8t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=bLe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Ra.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}$d.macroKeywordCode=G8t;function Y8t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;X8t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=bLe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&gge(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&gge(e),g(()=>K8t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Ra._)`await `),v=>r.assign(f,!1).if((0,Ra._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Ra._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Ra._)`${c}.errors`;return r.assign(y,null),m(Ra.nil),y}function m(y=t.async?(0,Ra._)`await `:Ra.nil){const v=u.opts.passContext?gv.default.this:gv.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Ra._)`${y}${(0,q8t.callValidateCode)(e,c,v,_)}`,t.modifying)}function g(y){var v;r.if((0,Ra.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}$d.funcKeywordCode=Y8t;function gge(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Ra._)`${r.parentData}[${r.parentDataProperty}]`))}function K8t(e,t){const{gen:n}=e;n.if((0,Ra._)`Array.isArray(${t})`,()=>{n.assign(gv.default.vErrors,(0,Ra._)`${gv.default.vErrors} === null ? ${t} : ${gv.default.vErrors}.concat(${t})`).assign(gv.default.errors,(0,Ra._)`${gv.default.vErrors}.length`),(0,W8t.extendErrors)(e)},()=>e.error())}function X8t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function bLe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ra.stringify)(n)})}function Q8t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}$d.validSchemaType=Q8t;function J8t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}$d.validateKeywordUsage=J8t;var n0={};Object.defineProperty(n0,"__esModule",{value:!0});n0.extendSubschemaMode=n0.extendSubschemaData=n0.getSubschema=void 0;const Cd=Ln,wLe=pr;function Z8t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Cd._)`${e.schemaPath}${(0,Cd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Cd._)`${e.schemaPath}${(0,Cd.getProperty)(t)}${(0,Cd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,wLe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}n0.getSubschema=Z8t;function ejt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Cd._)`${t.data}${(0,Cd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Cd.str)`${l}${(0,wLe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Cd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Cd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}n0.extendSubschemaData=ejt;function tjt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}n0.extendSubschemaMode=tjt;var Ao={},ELe={exports:{}},Og=ELe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};eR(t,r,i,e,"",e)};Og.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Og.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Og.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Og.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function eR(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Og.arrayKeywords)for(var d=0;d<f.length;d++)eR(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Og.propsKeywords){if(f&&typeof f=="object")for(var h in f)eR(e,t,n,f[h],i+"/"+c+"/"+njt(h),s,i,c,r,h)}else(c in Og.keywords||e.allKeys&&!(c in Og.skipKeywords))&&eR(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function njt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var rjt=ELe.exports;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getSchemaRefs=Ao.resolveUrl=Ao.normalizeId=Ao._getFullPath=Ao.getFullPath=Ao.inlineRef=void 0;const ijt=pr,sjt=GK,ojt=rjt,ajt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ujt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!RH(e):t?SLe(e)<=t:!1}Ao.inlineRef=ujt;const ljt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function RH(e){for(const t in e){if(ljt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(RH)||typeof n=="object"&&RH(n))return!0}return!1}function SLe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!ajt.has(n)&&(typeof e[n]=="object"&&(0,ijt.eachItem)(e[n],r=>t+=SLe(r)),t===1/0))return 1/0}return t}function xLe(e,t="",n){n!==!1&&(t=Aw(t));const r=e.parse(t);return TLe(e,r)}Ao.getFullPath=xLe;function TLe(e,t){return e.serialize(t).split("#")[0]+"#"}Ao._getFullPath=TLe;const cjt=/#\/?$/;function Aw(e){return e?e.replace(cjt,""):""}Ao.normalizeId=Aw;function fjt(e,t,n){return n=Aw(n),e.resolve(t,n)}Ao.resolveUrl=fjt;const djt=/^[a-z_][-a-z0-9._]*$/i;function hjt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Aw(e[n]||t),s={"":i},o=xLe(r,i,!1),a={},u=new Set;return ojt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=Aw(g?w(g,_):_),u.has(_))throw c(_);u.add(_);let x=this.refs[_];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?l(f,x.schema,_):_!==Aw(m)&&(_[0]==="#"?(l(f,a[_],_),a[_]=f):this.refs[_]=m),_}function v(_){if(typeof _=="string"){if(!djt.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function l(f,d,h){if(d!==void 0&&!sjt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ao.getSchemaRefs=hjt;Object.defineProperty(xf,"__esModule",{value:!0});xf.getData=xf.KeywordCxt=xf.validateFunctionCode=void 0;const CLe=TE,yge=YI,hJ=Mp,yM=YI,pjt=UF,W2=$d,q9=n0,Dt=Ln,rn=Ch,mjt=Ao,Lp=pr,Xx=GI;function gjt(e){if(OLe(e)&&(PLe(e),ILe(e))){_jt(e);return}ALe(e,()=>(0,CLe.topBoolOrEmptySchema)(e))}xf.validateFunctionCode=gjt;function ALe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${rn.default.data}, ${rn.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${vge(n,i)}`),vjt(e,i),e.code(s)}):e.func(t,(0,Dt._)`${rn.default.data}, ${yjt(i)}`,r.$async,()=>e.code(vge(n,i)).code(s))}function yjt(e){return(0,Dt._)`{${rn.default.instancePath}="", ${rn.default.parentData}, ${rn.default.parentDataProperty}, ${rn.default.rootData}=${rn.default.data}${e.dynamicRef?(0,Dt._)`, ${rn.default.dynamicAnchors}={}`:Dt.nil}}={}`}function vjt(e,t){e.if(rn.default.valCxt,()=>{e.var(rn.default.instancePath,(0,Dt._)`${rn.default.valCxt}.${rn.default.instancePath}`),e.var(rn.default.parentData,(0,Dt._)`${rn.default.valCxt}.${rn.default.parentData}`),e.var(rn.default.parentDataProperty,(0,Dt._)`${rn.default.valCxt}.${rn.default.parentDataProperty}`),e.var(rn.default.rootData,(0,Dt._)`${rn.default.valCxt}.${rn.default.rootData}`),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Dt._)`${rn.default.valCxt}.${rn.default.dynamicAnchors}`)},()=>{e.var(rn.default.instancePath,(0,Dt._)`""`),e.var(rn.default.parentData,(0,Dt._)`undefined`),e.var(rn.default.parentDataProperty,(0,Dt._)`undefined`),e.var(rn.default.rootData,rn.default.data),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Dt._)`{}`)})}function _jt(e){const{schema:t,opts:n,gen:r}=e;ALe(e,()=>{n.$comment&&t.$comment&&$Le(e),xjt(e),r.let(rn.default.vErrors,null),r.let(rn.default.errors,0),n.unevaluated&&bjt(e),kLe(e),Ajt(e)})}function bjt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function vge(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function wjt(e,t){if(OLe(e)&&(PLe(e),ILe(e))){Ejt(e,t);return}(0,CLe.boolOrEmptySchema)(e,t)}function ILe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function OLe(e){return typeof e.schema!="boolean"}function Ejt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&$Le(e),Tjt(e),Cjt(e);const s=r.const("_errs",rn.default.errors);kLe(e,s),r.var(t,(0,Dt._)`${s} === ${rn.default.errors}`)}function PLe(e){(0,Lp.checkUnknownRules)(e),Sjt(e)}function kLe(e,t){if(e.opts.jtd)return _ge(e,[],!1,t);const n=(0,yge.getSchemaTypes)(e.schema),r=(0,yge.coerceAndCheckDataType)(e,n);_ge(e,n,!r,t)}function Sjt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Lp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function xjt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Lp.checkStrictMode)(e,"default is ignored in the schema root")}function Tjt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,mjt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Cjt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function $Le({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${rn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${rn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function Ajt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${rn.default.errors} === 0`,()=>t.return(rn.default.data),()=>t.throw((0,Dt._)`new ${i}(${rn.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,rn.default.vErrors),s.unevaluated&&Ijt(e),t.return((0,Dt._)`${rn.default.errors} === 0`))}function Ijt({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function _ge(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Lp.schemaHasRulesButRef)(s,c))){i.block(()=>DLe(e,"$ref",c.all.$ref.definition));return}u.jtd||Ojt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,hJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,yM.checkDataType)(d.type,o,u.strictNumbers)),bge(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,yM.reportTypeError)(e)),i.endIf()):bge(e,d),a||i.if((0,Dt._)`${rn.default.errors} === ${r||0}`))}}function bge(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,pjt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,hJ.shouldUseRule)(r,s)&&DLe(e,s.keyword,s.definition,t.type)})}function Ojt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Pjt(e,t),e.opts.allowUnionTypes||kjt(e,t),$jt(e,e.dataTypes))}function Pjt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{RLe(e.dataTypes,n)||pJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Njt(e,t)}}function kjt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&pJ(e,"use allowUnionTypes to allow union type keyword")}function $jt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,hJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Rjt(t,o))&&pJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Rjt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function RLe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Njt(e,t){const n=[];for(const r of e.dataTypes)RLe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function pJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Lp.checkStrictMode)(e,t,e.opts.strictTypes)}class NLe{constructor(t,n,r){if((0,W2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Lp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",MLe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,W2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",rn.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?Xx.reportExtraError:Xx.reportError)(this,this.def.error,n)}$dataError(){(0,Xx.reportError)(this,this.def.$dataError||Xx.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Xx.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,yM.checkDataTypes)(u,n,s.opts.strictNumbers,yM.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,q9.getSubschema)(this.it,t);(0,q9.extendSubschemaData)(r,this.it,t),(0,q9.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return wjt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Lp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Lp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}xf.KeywordCxt=NLe;function DLe(e,t,n,r){const i=new NLe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,W2.funcKeywordCode)(i,n):"macro"in n?(0,W2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,W2.funcKeywordCode)(i,n)}const Djt=/^\/(?:[^~]|~0|~1)*$/,Mjt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function MLe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return rn.default.rootData;if(e[0]==="/"){if(!Djt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=rn.default.rootData}else{const l=Mjt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,Lp.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}xf.getData=MLe;var KI={};Object.defineProperty(KI,"__esModule",{value:!0});class Ljt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}KI.default=Ljt;var XI={};Object.defineProperty(XI,"__esModule",{value:!0});const W9=Ao;class Fjt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,W9.resolveUrl)(t,n,r),this.missingSchema=(0,W9.normalizeId)((0,W9.getFullPath)(t,this.missingRef))}}XI.default=Fjt;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.resolveSchema=Su.getCompilingSchema=Su.resolveRef=Su.compileSchema=Su.SchemaEnv=void 0;const Fc=Ln,jjt=KI,jy=Ch,cf=Ao,wge=pr,Bjt=xf;class zF{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,cf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Su.SchemaEnv=zF;function mJ(e){const t=LLe.call(this,e);if(t)return t;const n=(0,cf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Fc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:jjt.default,code:(0,Fc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:jy.default.data,parentData:jy.default.parentData,parentDataProperty:jy.default.parentDataProperty,dataNames:[jy.default.data],dataPathArr:[Fc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Fc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Fc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Fc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Bjt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(jy.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${jy.default.self}`,`${jy.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Fc.Name?void 0:p,items:m instanceof Fc.Name?void 0:m,dynamicProps:p instanceof Fc.Name,dynamicItems:m instanceof Fc.Name},h.source&&(h.source.evaluated=(0,Fc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Su.compileSchema=mJ;function Ujt(e,t,n){var r;n=(0,cf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Hjt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new zF({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=zjt.call(this,s)}Su.resolveRef=Ujt;function zjt(e){return(0,cf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:mJ.call(this,e)}function LLe(e){for(const t of this._compilations)if(Vjt(t,e))return t}Su.getCompilingSchema=LLe;function Vjt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Hjt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||VF.call(this,e,t)}function VF(e,t){const n=this.opts.uriResolver.parse(t),r=(0,cf._getFullPath)(this.opts.uriResolver,n);let i=(0,cf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return G9.call(this,n,e);const s=(0,cf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=VF.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:G9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||mJ.call(this,o),s===(0,cf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,cf.resolveUrl)(this.opts.uriResolver,i,l)),new zF({schema:a,schemaId:u,root:e,baseId:i})}return G9.call(this,n,o)}}Su.resolveSchema=VF;const qjt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function G9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,wge.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!qjt.has(a)&&l&&(t=(0,cf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,wge.schemaHasRulesButRef)(n,this.RULES)){const a=(0,cf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=VF.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new zF({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Wjt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Gjt="Meta-schema for $data reference (JSON AnySchema extension proposal)",Yjt="object",Kjt=["$data"],Xjt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Qjt=!1,Jjt={$id:Wjt,description:Gjt,type:Yjt,required:Kjt,properties:Xjt,additionalProperties:Qjt};var gJ={},NH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Cu,function(n){function r(){for(var oe=arguments.length,ne=Array(oe),ue=0;ue<oe;ue++)ne[ue]=arguments[ue];if(ne.length>1){ne[0]=ne[0].slice(0,-1);for(var Ee=ne.length-1,Se=1;Se<Ee;++Se)ne[Se]=ne[Se].slice(1,-1);return ne[Ee]=ne[Ee].slice(1),ne.join("")}else return ne[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ne){var ue=oe;if(ne)for(var Ee in ne)ue[Ee]=ne[Ee];return ue}function l(oe){var ne="[A-Za-z]",ue="[0-9]",Ee=r(ue,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ee+"%"+Ee+Ee+"%"+Ee+Ee)+"|"+i("%[89A-Fa-f]"+Ee+"%"+Ee+Ee)+"|"+i("%"+Ee+Ee)),xt="[\\:\\/\\?\\#\\[\\]\\@]",ke="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",bt=r(xt,ke),Ft=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",It=oe?"[\\uE000-\\uF8FF]":"[]",jt=r(ne,ue,"[\\-\\.\\_\\~]",Ft);i(ne+r(ne,ue,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(jt,ke,"[\\:]"))+"*");var un=i(i("25[0-5]")+"|"+i("2[0-4]"+ue)+"|"+i("1"+ue+ue)+"|"+i("0?[1-9]"+ue)+"|0?0?"+ue),xr=i(un+"\\."+un+"\\."+un+"\\."+un),qt=i(Ee+"{1,4}"),sr=i(i(qt+"\\:"+qt)+"|"+xr),en=i(i(qt+"\\:")+"{6}"+sr),Yn=i("\\:\\:"+i(qt+"\\:")+"{5}"+sr),oi=i(i(qt)+"?\\:\\:"+i(qt+"\\:")+"{4}"+sr),Si=i(i(i(qt+"\\:")+"{0,1}"+qt)+"?\\:\\:"+i(qt+"\\:")+"{3}"+sr),xi=i(i(i(qt+"\\:")+"{0,2}"+qt)+"?\\:\\:"+i(qt+"\\:")+"{2}"+sr),Is=i(i(i(qt+"\\:")+"{0,3}"+qt)+"?\\:\\:"+qt+"\\:"+sr),Mi=i(i(i(qt+"\\:")+"{0,4}"+qt)+"?\\:\\:"+sr),Tr=i(i(i(qt+"\\:")+"{0,5}"+qt)+"?\\:\\:"+qt),wt=i(i(i(qt+"\\:")+"{0,6}"+qt)+"?\\:\\:"),Cn=i([en,Yn,oi,Si,xi,Is,Mi,Tr,wt].join("|")),Dr=i(i(jt+"|"+Se)+"+");i("[vV]"+Ee+"+\\."+r(jt,ke,"[\\:]")+"+"),i(i(Se+"|"+r(jt,ke))+"*");var rs=i(Se+"|"+r(jt,ke,"[\\:\\@]"));return i(i(Se+"|"+r(jt,ke,"[\\@]"))+"+"),i(i(rs+"|"+r("[\\/\\?]",It))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ne,ue,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",jt,ke),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",jt,ke),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",jt,ke),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",jt,ke),"g"),NOT_QUERY:new RegExp(r("[^\\%]",jt,ke,"[\\:\\@\\/\\?]",It),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",jt,ke,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",jt,ke),"g"),UNRESERVED:new RegExp(jt,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",jt,bt),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+xr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Cn+")"+i(i("\\%25|\\%(?!"+Ee+"{2})")+"("+Dr+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ne,ue){var Ee=[],Se=!0,xt=!1,ke=void 0;try{for(var bt=ne[Symbol.iterator](),Ft;!(Se=(Ft=bt.next()).done)&&(Ee.push(Ft.value),!(ue&&Ee.length===ue));Se=!0);}catch(It){xt=!0,ke=It}finally{try{!Se&&bt.return&&bt.return()}finally{if(xt)throw ke}}return Ee}return function(ne,ue){if(Array.isArray(ne))return ne;if(Symbol.iterator in Object(ne))return oe(ne,ue);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ne=0,ue=Array(oe.length);ne<oe.length;ne++)ue[ne]=oe[ne];return ue}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,_=700,w=72,x=128,E="-",b=/^xn--/,T=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=m-g,N=Math.floor,$=String.fromCharCode;function M(oe){throw new RangeError(C[oe])}function B(oe,ne){for(var ue=[],Ee=oe.length;Ee--;)ue[Ee]=ne(oe[Ee]);return ue}function z(oe,ne){var ue=oe.split("@"),Ee="";ue.length>1&&(Ee=ue[0]+"@",oe=ue[1]),oe=oe.replace(A,".");var Se=oe.split("."),xt=B(Se,ne).join(".");return Ee+xt}function W(oe){for(var ne=[],ue=0,Ee=oe.length;ue<Ee;){var Se=oe.charCodeAt(ue++);if(Se>=55296&&Se<=56319&&ue<Ee){var xt=oe.charCodeAt(ue++);(xt&64512)==56320?ne.push(((Se&1023)<<10)+(xt&1023)+65536):(ne.push(Se),ue--)}else ne.push(Se)}return ne}var U=function(ne){return String.fromCodePoint.apply(String,h(ne))},Y=function(ne){return ne-48<10?ne-22:ne-65<26?ne-65:ne-97<26?ne-97:m},q=function(ne,ue){return ne+22+75*(ne<26)-((ue!=0)<<5)},D=function(ne,ue,Ee){var Se=0;for(ne=Ee?N(ne/_):ne>>1,ne+=N(ne/ue);ne>P*y>>1;Se+=m)ne=N(ne/P);return N(Se+(P+1)*ne/(ne+v))},L=function(ne){var ue=[],Ee=ne.length,Se=0,xt=x,ke=w,bt=ne.lastIndexOf(E);bt<0&&(bt=0);for(var Ft=0;Ft<bt;++Ft)ne.charCodeAt(Ft)>=128&&M("not-basic"),ue.push(ne.charCodeAt(Ft));for(var It=bt>0?bt+1:0;It<Ee;){for(var jt=Se,un=1,xr=m;;xr+=m){It>=Ee&&M("invalid-input");var qt=Y(ne.charCodeAt(It++));(qt>=m||qt>N((p-Se)/un))&&M("overflow"),Se+=qt*un;var sr=xr<=ke?g:xr>=ke+y?y:xr-ke;if(qt<sr)break;var en=m-sr;un>N(p/en)&&M("overflow"),un*=en}var Yn=ue.length+1;ke=D(Se-jt,Yn,jt==0),N(Se/Yn)>p-xt&&M("overflow"),xt+=N(Se/Yn),Se%=Yn,ue.splice(Se++,0,xt)}return String.fromCodePoint.apply(String,ue)},G=function(ne){var ue=[];ne=W(ne);var Ee=ne.length,Se=x,xt=0,ke=w,bt=!0,Ft=!1,It=void 0;try{for(var jt=ne[Symbol.iterator](),un;!(bt=(un=jt.next()).done);bt=!0){var xr=un.value;xr<128&&ue.push($(xr))}}catch(Oe){Ft=!0,It=Oe}finally{try{!bt&&jt.return&&jt.return()}finally{if(Ft)throw It}}var qt=ue.length,sr=qt;for(qt&&ue.push(E);sr<Ee;){var en=p,Yn=!0,oi=!1,Si=void 0;try{for(var xi=ne[Symbol.iterator](),Is;!(Yn=(Is=xi.next()).done);Yn=!0){var Mi=Is.value;Mi>=Se&&Mi<en&&(en=Mi)}}catch(Oe){oi=!0,Si=Oe}finally{try{!Yn&&xi.return&&xi.return()}finally{if(oi)throw Si}}var Tr=sr+1;en-Se>N((p-xt)/Tr)&&M("overflow"),xt+=(en-Se)*Tr,Se=en;var wt=!0,Cn=!1,Dr=void 0;try{for(var rs=ne[Symbol.iterator](),go;!(wt=(go=rs.next()).done);wt=!0){var K=go.value;if(K<Se&&++xt>p&&M("overflow"),K==Se){for(var se=xt,Z=m;;Z+=m){var ge=Z<=ke?g:Z>=ke+y?y:Z-ke;if(se<ge)break;var ve=se-ge,pe=m-ge;ue.push($(q(ge+ve%pe,0))),se=N(ve/pe)}ue.push($(q(se,0))),ke=D(xt,Tr,sr==qt),xt=0,++sr}}}catch(Oe){Cn=!0,Dr=Oe}finally{try{!wt&&rs.return&&rs.return()}finally{if(Cn)throw Dr}}++xt,++Se}return ue.join("")},V=function(ne){return z(ne,function(ue){return b.test(ue)?L(ue.slice(4).toLowerCase()):ue})},H=function(ne){return z(ne,function(ue){return T.test(ue)?"xn--"+G(ue):ue})},te={version:"2.1.0",ucs2:{decode:W,encode:U},decode:L,encode:G,toASCII:H,toUnicode:V},le={};function me(oe){var ne=oe.charCodeAt(0),ue=void 0;return ne<16?ue="%0"+ne.toString(16).toUpperCase():ne<128?ue="%"+ne.toString(16).toUpperCase():ne<2048?ue="%"+(ne>>6|192).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase():ue="%"+(ne>>12|224).toString(16).toUpperCase()+"%"+(ne>>6&63|128).toString(16).toUpperCase()+"%"+(ne&63|128).toString(16).toUpperCase(),ue}function ye(oe){for(var ne="",ue=0,Ee=oe.length;ue<Ee;){var Se=parseInt(oe.substr(ue+1,2),16);if(Se<128)ne+=String.fromCharCode(Se),ue+=3;else if(Se>=194&&Se<224){if(Ee-ue>=6){var xt=parseInt(oe.substr(ue+4,2),16);ne+=String.fromCharCode((Se&31)<<6|xt&63)}else ne+=oe.substr(ue,6);ue+=6}else if(Se>=224){if(Ee-ue>=9){var ke=parseInt(oe.substr(ue+4,2),16),bt=parseInt(oe.substr(ue+7,2),16);ne+=String.fromCharCode((Se&15)<<12|(ke&63)<<6|bt&63)}else ne+=oe.substr(ue,9);ue+=9}else ne+=oe.substr(ue,3),ue+=3}return ne}function de(oe,ne){function ue(Ee){var Se=ye(Ee);return Se.match(ne.UNRESERVED)?Se:Ee}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ne.PCT_ENCODED,ue).toLowerCase().replace(ne.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ne.PCT_ENCODED,ue).replace(ne.NOT_USERINFO,me).replace(ne.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ne.PCT_ENCODED,ue).toLowerCase().replace(ne.NOT_HOST,me).replace(ne.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ne.PCT_ENCODED,ue).replace(oe.scheme?ne.NOT_PATH:ne.NOT_PATH_NOSCHEME,me).replace(ne.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ne.PCT_ENCODED,ue).replace(ne.NOT_QUERY,me).replace(ne.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ne.PCT_ENCODED,ue).replace(ne.NOT_FRAGMENT,me).replace(ne.PCT_ENCODED,o)),oe}function we(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function he(oe,ne){var ue=oe.match(ne.IPV4ADDRESS)||[],Ee=d(ue,2),Se=Ee[1];return Se?Se.split(".").map(we).join("."):oe}function He(oe,ne){var ue=oe.match(ne.IPV6ADDRESS)||[],Ee=d(ue,3),Se=Ee[1],xt=Ee[2];if(Se){for(var ke=Se.toLowerCase().split("::").reverse(),bt=d(ke,2),Ft=bt[0],It=bt[1],jt=It?It.split(":").map(we):[],un=Ft.split(":").map(we),xr=ne.IPV4ADDRESS.test(un[un.length-1]),qt=xr?7:8,sr=un.length-qt,en=Array(qt),Yn=0;Yn<qt;++Yn)en[Yn]=jt[Yn]||un[sr+Yn]||"";xr&&(en[qt-1]=he(en[qt-1],ne));var oi=en.reduce(function(Tr,wt,Cn){if(!wt||wt==="0"){var Dr=Tr[Tr.length-1];Dr&&Dr.index+Dr.length===Cn?Dr.length++:Tr.push({index:Cn,length:1})}return Tr},[]),Si=oi.sort(function(Tr,wt){return wt.length-Tr.length})[0],xi=void 0;if(Si&&Si.length>1){var Is=en.slice(0,Si.index),Mi=en.slice(Si.index+Si.length);xi=Is.join(":")+"::"+Mi.join(":")}else xi=en.join(":");return xt&&(xi+="%"+xt),xi}else return oe}var Me=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ke="".match(/(){0}/)[1]===void 0;function je(oe){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue={},Ee=ne.iri!==!1?f:c;ne.reference==="suffix"&&(oe=(ne.scheme?ne.scheme+":":"")+"//"+oe);var Se=oe.match(Me);if(Se){Ke?(ue.scheme=Se[1],ue.userinfo=Se[3],ue.host=Se[4],ue.port=parseInt(Se[5],10),ue.path=Se[6]||"",ue.query=Se[7],ue.fragment=Se[8],isNaN(ue.port)&&(ue.port=Se[5])):(ue.scheme=Se[1]||void 0,ue.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ue.host=oe.indexOf("//")!==-1?Se[4]:void 0,ue.port=parseInt(Se[5],10),ue.path=Se[6]||"",ue.query=oe.indexOf("?")!==-1?Se[7]:void 0,ue.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ue.port)&&(ue.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ue.host&&(ue.host=He(he(ue.host,Ee),Ee)),ue.scheme===void 0&&ue.userinfo===void 0&&ue.host===void 0&&ue.port===void 0&&!ue.path&&ue.query===void 0?ue.reference="same-document":ue.scheme===void 0?ue.reference="relative":ue.fragment===void 0?ue.reference="absolute":ue.reference="uri",ne.reference&&ne.reference!=="suffix"&&ne.reference!==ue.reference&&(ue.error=ue.error||"URI is not a "+ne.reference+" reference.");var xt=le[(ne.scheme||ue.scheme||"").toLowerCase()];if(!ne.unicodeSupport&&(!xt||!xt.unicodeSupport)){if(ue.host&&(ne.domainHost||xt&&xt.domainHost))try{ue.host=te.toASCII(ue.host.replace(Ee.PCT_ENCODED,ye).toLowerCase())}catch(ke){ue.error=ue.error||"Host's domain name can not be converted to ASCII via punycode: "+ke}de(ue,c)}else de(ue,Ee);xt&&xt.parse&&xt.parse(ue,ne)}else ue.error=ue.error||"URI can not be parsed.";return ue}function De(oe,ne){var ue=ne.iri!==!1?f:c,Ee=[];return oe.userinfo!==void 0&&(Ee.push(oe.userinfo),Ee.push("@")),oe.host!==void 0&&Ee.push(He(he(String(oe.host),ue),ue).replace(ue.IPV6ADDRESS,function(Se,xt,ke){return"["+xt+(ke?"%25"+ke:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ee.push(":"),Ee.push(String(oe.port))),Ee.length?Ee.join(""):void 0}var qe=/^\.\.?\//,Qt=/^\/\.(\/|$)/,rt=/^\/\.\.(\/|$)/,We=/^\/?(?:.|\n)*?(?=\/|$)/;function Pt(oe){for(var ne=[];oe.length;)if(oe.match(qe))oe=oe.replace(qe,"");else if(oe.match(Qt))oe=oe.replace(Qt,"/");else if(oe.match(rt))oe=oe.replace(rt,"/"),ne.pop();else if(oe==="."||oe==="..")oe="";else{var ue=oe.match(We);if(ue){var Ee=ue[0];oe=oe.slice(Ee.length),ne.push(Ee)}else throw new Error("Unexpected dot segment condition")}return ne.join("")}function ut(oe){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ue=ne.iri?f:c,Ee=[],Se=le[(ne.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ne),oe.host&&!ue.IPV6ADDRESS.test(oe.host)){if(ne.domainHost||Se&&Se.domainHost)try{oe.host=ne.iri?te.toUnicode(oe.host):te.toASCII(oe.host.replace(ue.PCT_ENCODED,ye).toLowerCase())}catch(bt){oe.error=oe.error||"Host's domain name can not be converted to "+(ne.iri?"Unicode":"ASCII")+" via punycode: "+bt}}de(oe,ue),ne.reference!=="suffix"&&oe.scheme&&(Ee.push(oe.scheme),Ee.push(":"));var xt=De(oe,ne);if(xt!==void 0&&(ne.reference!=="suffix"&&Ee.push("//"),Ee.push(xt),oe.path&&oe.path.charAt(0)!=="/"&&Ee.push("/")),oe.path!==void 0){var ke=oe.path;!ne.absolutePath&&(!Se||!Se.absolutePath)&&(ke=Pt(ke)),xt===void 0&&(ke=ke.replace(/^\/\//,"/%2F")),Ee.push(ke)}return oe.query!==void 0&&(Ee.push("?"),Ee.push(oe.query)),oe.fragment!==void 0&&(Ee.push("#"),Ee.push(oe.fragment)),Ee.join("")}function mt(oe,ne){var ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ee=arguments[3],Se={};return Ee||(oe=je(ut(oe,ue),ue),ne=je(ut(ne,ue),ue)),ue=ue||{},!ue.tolerant&&ne.scheme?(Se.scheme=ne.scheme,Se.userinfo=ne.userinfo,Se.host=ne.host,Se.port=ne.port,Se.path=Pt(ne.path||""),Se.query=ne.query):(ne.userinfo!==void 0||ne.host!==void 0||ne.port!==void 0?(Se.userinfo=ne.userinfo,Se.host=ne.host,Se.port=ne.port,Se.path=Pt(ne.path||""),Se.query=ne.query):(ne.path?(ne.path.charAt(0)==="/"?Se.path=Pt(ne.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ne.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ne.path:Se.path=ne.path,Se.path=Pt(Se.path)),Se.query=ne.query):(Se.path=oe.path,ne.query!==void 0?Se.query=ne.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ne.fragment,Se}function vt(oe,ne,ue){var Ee=u({scheme:"null"},ue);return ut(mt(je(oe,Ee),je(ne,Ee),Ee,!0),Ee)}function Ht(oe,ne){return typeof oe=="string"?oe=ut(je(oe,ne),ne):s(oe)==="object"&&(oe=je(ut(oe,ne),ne)),oe}function Xt(oe,ne,ue){return typeof oe=="string"?oe=ut(je(oe,ue),ue):s(oe)==="object"&&(oe=ut(oe,ue)),typeof ne=="string"?ne=ut(je(ne,ue),ue):s(ne)==="object"&&(ne=ut(ne,ue)),oe===ne}function fe(oe,ne){return oe&&oe.toString().replace(!ne||!ne.iri?c.ESCAPE:f.ESCAPE,me)}function xe(oe,ne){return oe&&oe.toString().replace(!ne||!ne.iri?c.PCT_ENCODED:f.PCT_ENCODED,ye)}var Le={scheme:"http",domainHost:!0,parse:function(ne,ue){return ne.host||(ne.error=ne.error||"HTTP URIs must have a host."),ne},serialize:function(ne,ue){var Ee=String(ne.scheme).toLowerCase()==="https";return(ne.port===(Ee?443:80)||ne.port==="")&&(ne.port=void 0),ne.path||(ne.path="/"),ne}},ft={scheme:"https",domainHost:Le.domainHost,parse:Le.parse,serialize:Le.serialize};function Ze(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var ct={scheme:"ws",domainHost:!0,parse:function(ne,ue){var Ee=ne;return Ee.secure=Ze(Ee),Ee.resourceName=(Ee.path||"/")+(Ee.query?"?"+Ee.query:""),Ee.path=void 0,Ee.query=void 0,Ee},serialize:function(ne,ue){if((ne.port===(Ze(ne)?443:80)||ne.port==="")&&(ne.port=void 0),typeof ne.secure=="boolean"&&(ne.scheme=ne.secure?"wss":"ws",ne.secure=void 0),ne.resourceName){var Ee=ne.resourceName.split("?"),Se=d(Ee,2),xt=Se[0],ke=Se[1];ne.path=xt&&xt!=="/"?xt:void 0,ne.query=ke,ne.resourceName=void 0}return ne.fragment=void 0,ne}},ot={scheme:"wss",domainHost:ct.domainHost,parse:ct.parse,serialize:ct.serialize},At={},Tn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Zt="[0-9A-Fa-f]",Jt=i(i("%[EFef]"+Zt+"%"+Zt+Zt+"%"+Zt+Zt)+"|"+i("%[89A-Fa-f]"+Zt+"%"+Zt+Zt)+"|"+i("%"+Zt+Zt)),rr="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Bn="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",zo=r(Bn,'[\\"\\\\]'),mr="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Di=new RegExp(Tn,"g"),zr=new RegExp(Jt,"g"),Pr=new RegExp(r("[^]",rr,"[\\.]",'[\\"]',zo),"g"),Vr=new RegExp(r("[^]",Tn,mr),"g"),ir=Vr;function St(oe){var ne=ye(oe);return ne.match(Di)?ne:oe}var gr={scheme:"mailto",parse:function(ne,ue){var Ee=ne,Se=Ee.to=Ee.path?Ee.path.split(","):[];if(Ee.path=void 0,Ee.query){for(var xt=!1,ke={},bt=Ee.query.split("&"),Ft=0,It=bt.length;Ft<It;++Ft){var jt=bt[Ft].split("=");switch(jt[0]){case"to":for(var un=jt[1].split(","),xr=0,qt=un.length;xr<qt;++xr)Se.push(un[xr]);break;case"subject":Ee.subject=xe(jt[1],ue);break;case"body":Ee.body=xe(jt[1],ue);break;default:xt=!0,ke[xe(jt[0],ue)]=xe(jt[1],ue);break}}xt&&(Ee.headers=ke)}Ee.query=void 0;for(var sr=0,en=Se.length;sr<en;++sr){var Yn=Se[sr].split("@");if(Yn[0]=xe(Yn[0]),ue.unicodeSupport)Yn[1]=xe(Yn[1],ue).toLowerCase();else try{Yn[1]=te.toASCII(xe(Yn[1],ue).toLowerCase())}catch(oi){Ee.error=Ee.error||"Email address's domain name can not be converted to ASCII via punycode: "+oi}Se[sr]=Yn.join("@")}return Ee},serialize:function(ne,ue){var Ee=ne,Se=a(ne.to);if(Se){for(var xt=0,ke=Se.length;xt<ke;++xt){var bt=String(Se[xt]),Ft=bt.lastIndexOf("@"),It=bt.slice(0,Ft).replace(zr,St).replace(zr,o).replace(Pr,me),jt=bt.slice(Ft+1);try{jt=ue.iri?te.toUnicode(jt):te.toASCII(xe(jt,ue).toLowerCase())}catch(sr){Ee.error=Ee.error||"Email address's domain name can not be converted to "+(ue.iri?"Unicode":"ASCII")+" via punycode: "+sr}Se[xt]=It+"@"+jt}Ee.path=Se.join(",")}var un=ne.headers=ne.headers||{};ne.subject&&(un.subject=ne.subject),ne.body&&(un.body=ne.body);var xr=[];for(var qt in un)un[qt]!==At[qt]&&xr.push(qt.replace(zr,St).replace(zr,o).replace(Vr,me)+"="+un[qt].replace(zr,St).replace(zr,o).replace(ir,me));return xr.length&&(Ee.query=xr.join("&")),Ee}},di=/^([^\:]+)\:(.*)/,Un={scheme:"urn",parse:function(ne,ue){var Ee=ne.path&&ne.path.match(di),Se=ne;if(Ee){var xt=ue.scheme||Se.scheme||"urn",ke=Ee[1].toLowerCase(),bt=Ee[2],Ft=xt+":"+(ue.nid||ke),It=le[Ft];Se.nid=ke,Se.nss=bt,Se.path=void 0,It&&(Se=It.parse(Se,ue))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ne,ue){var Ee=ue.scheme||ne.scheme||"urn",Se=ne.nid,xt=Ee+":"+(ue.nid||Se),ke=le[xt];ke&&(ne=ke.serialize(ne,ue));var bt=ne,Ft=ne.nss;return bt.path=(Se||ue.nid)+":"+Ft,bt}},hs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ps={scheme:"urn:uuid",parse:function(ne,ue){var Ee=ne;return Ee.uuid=Ee.nss,Ee.nss=void 0,!ue.tolerant&&(!Ee.uuid||!Ee.uuid.match(hs))&&(Ee.error=Ee.error||"UUID is not valid."),Ee},serialize:function(ne,ue){var Ee=ne;return Ee.nss=(ne.uuid||"").toLowerCase(),Ee}};le[Le.scheme]=Le,le[ft.scheme]=ft,le[ct.scheme]=ct,le[ot.scheme]=ot,le[gr.scheme]=gr,le[Un.scheme]=Un,le[ps.scheme]=ps,n.SCHEMES=le,n.pctEncChar=me,n.pctDecChars=ye,n.parse=je,n.removeDotSegments=Pt,n.serialize=ut,n.resolveComponents=mt,n.resolve=vt,n.normalize=Ht,n.equal=Xt,n.escapeComponent=fe,n.unescapeComponent=xe,Object.defineProperty(n,"__esModule",{value:!0})})})(NH,NH.exports);var Zjt=NH.exports;Object.defineProperty(gJ,"__esModule",{value:!0});const FLe=Zjt;FLe.code='require("ajv/dist/runtime/uri").default';gJ.default=FLe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=xf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Ln;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=KI,i=XI,s=O1,o=Su,a=Ln,u=Ao,l=YI,c=pr,f=Jjt,d=gJ,h=(q,D)=>new RegExp(q,D);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function _(q){var D,L,G,V,H,te,le,me,ye,de,we,he,He,Me,Ke,je,De,qe,Qt,rt,We,Pt,ut,mt,vt;const Ht=q.strict,Xt=(D=q.code)===null||D===void 0?void 0:D.optimize,fe=Xt===!0||Xt===void 0?1:Xt||0,xe=(G=(L=q.code)===null||L===void 0?void 0:L.regExp)!==null&&G!==void 0?G:h,Le=(V=q.uriResolver)!==null&&V!==void 0?V:d.default;return{strictSchema:(te=(H=q.strictSchema)!==null&&H!==void 0?H:Ht)!==null&&te!==void 0?te:!0,strictNumbers:(me=(le=q.strictNumbers)!==null&&le!==void 0?le:Ht)!==null&&me!==void 0?me:!0,strictTypes:(de=(ye=q.strictTypes)!==null&&ye!==void 0?ye:Ht)!==null&&de!==void 0?de:"log",strictTuples:(he=(we=q.strictTuples)!==null&&we!==void 0?we:Ht)!==null&&he!==void 0?he:"log",strictRequired:(Me=(He=q.strictRequired)!==null&&He!==void 0?He:Ht)!==null&&Me!==void 0?Me:!1,code:q.code?{...q.code,optimize:fe,regExp:xe}:{optimize:fe,regExp:xe},loopRequired:(Ke=q.loopRequired)!==null&&Ke!==void 0?Ke:v,loopEnum:(je=q.loopEnum)!==null&&je!==void 0?je:v,meta:(De=q.meta)!==null&&De!==void 0?De:!0,messages:(qe=q.messages)!==null&&qe!==void 0?qe:!0,inlineRefs:(Qt=q.inlineRefs)!==null&&Qt!==void 0?Qt:!0,schemaId:(rt=q.schemaId)!==null&&rt!==void 0?rt:"$id",addUsedSchema:(We=q.addUsedSchema)!==null&&We!==void 0?We:!0,validateSchema:(Pt=q.validateSchema)!==null&&Pt!==void 0?Pt:!0,validateFormats:(ut=q.validateFormats)!==null&&ut!==void 0?ut:!0,unicodeRegExp:(mt=q.unicodeRegExp)!==null&&mt!==void 0?mt:!0,int32range:(vt=q.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:Le}}class w{constructor(D={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,D=this.opts={...D,..._(D)};const{es5:L,lines:G}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:L,lines:G}),this.logger=N(D.logger);const V=D.validateFormats;D.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,D,"NOT SUPPORTED"),x.call(this,y,D,"DEPRECATED","warn"),this._metaOpts=C.call(this),D.formats&&T.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),D.keywords&&A.call(this,D.keywords),typeof D.meta=="object"&&this.addMetaSchema(D.meta),b.call(this),D.validateFormats=V}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:D,meta:L,schemaId:G}=this.opts;let V=f;G==="id"&&(V={...f},V.id=V.$id,delete V.$id),L&&D&&this.addMetaSchema(V,V[G],!1)}defaultMeta(){const{meta:D,schemaId:L}=this.opts;return this.opts.defaultMeta=typeof D=="object"?D[L]||D:void 0}validate(D,L){let G;if(typeof D=="string"){if(G=this.getSchema(D),!G)throw new Error(`no schema with key or ref "${D}"`)}else G=this.compile(D);const V=G(L);return"$async"in G||(this.errors=G.errors),V}compile(D,L){const G=this._addSchema(D,L);return G.validate||this._compileSchemaEnv(G)}compileAsync(D,L){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:G}=this.opts;return V.call(this,D,L);async function V(de,we){await H.call(this,de.$schema);const he=this._addSchema(de,we);return he.validate||te.call(this,he)}async function H(de){de&&!this.getSchema(de)&&await V.call(this,{$ref:de},!0)}async function te(de){try{return this._compileSchemaEnv(de)}catch(we){if(!(we instanceof i.default))throw we;return le.call(this,we),await me.call(this,we.missingSchema),te.call(this,de)}}function le({missingSchema:de,missingRef:we}){if(this.refs[de])throw new Error(`AnySchema ${de} is loaded but ${we} cannot be resolved`)}async function me(de){const we=await ye.call(this,de);this.refs[de]||await H.call(this,we.$schema),this.refs[de]||this.addSchema(we,de,L)}async function ye(de){const we=this._loading[de];if(we)return we;try{return await(this._loading[de]=G(de))}finally{delete this._loading[de]}}}addSchema(D,L,G,V=this.opts.validateSchema){if(Array.isArray(D)){for(const te of D)this.addSchema(te,void 0,G,V);return this}let H;if(typeof D=="object"){const{schemaId:te}=this.opts;if(H=D[te],H!==void 0&&typeof H!="string")throw new Error(`schema ${te} must be string`)}return L=(0,u.normalizeId)(L||H),this._checkUnique(L),this.schemas[L]=this._addSchema(D,G,L,V,!0),this}addMetaSchema(D,L,G=this.opts.validateSchema){return this.addSchema(D,L,!0,G),this}validateSchema(D,L){if(typeof D=="boolean")return!0;let G;if(G=D.$schema,G!==void 0&&typeof G!="string")throw new Error("$schema must be a string");if(G=G||this.opts.defaultMeta||this.defaultMeta(),!G)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const V=this.validate(G,D);if(!V&&L){const H="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(H);else throw new Error(H)}return V}getSchema(D){let L;for(;typeof(L=E.call(this,D))=="string";)D=L;if(L===void 0){const{schemaId:G}=this.opts,V=new o.SchemaEnv({schema:{},schemaId:G});if(L=o.resolveSchema.call(this,V,D),!L)return;this.refs[D]=L}return L.validate||this._compileSchemaEnv(L)}removeSchema(D){if(D instanceof RegExp)return this._removeAllSchemas(this.schemas,D),this._removeAllSchemas(this.refs,D),this;switch(typeof D){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const L=E.call(this,D);return typeof L=="object"&&this._cache.delete(L.schema),delete this.schemas[D],delete this.refs[D],this}case"object":{const L=D;this._cache.delete(L);let G=D[this.opts.schemaId];return G&&(G=(0,u.normalizeId)(G),delete this.schemas[G],delete this.refs[G]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(D){for(const L of D)this.addKeyword(L);return this}addKeyword(D,L){let G;if(typeof D=="string")G=D,typeof L=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),L.keyword=G);else if(typeof D=="object"&&L===void 0){if(L=D,G=L.keyword,Array.isArray(G)&&!G.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(M.call(this,G,L),!L)return(0,c.eachItem)(G,H=>B.call(this,H)),this;W.call(this,L);const V={...L,type:(0,l.getJSONTypes)(L.type),schemaType:(0,l.getJSONTypes)(L.schemaType)};return(0,c.eachItem)(G,V.type.length===0?H=>B.call(this,H,V):H=>V.type.forEach(te=>B.call(this,H,V,te))),this}getKeyword(D){const L=this.RULES.all[D];return typeof L=="object"?L.definition:!!L}removeKeyword(D){const{RULES:L}=this;delete L.keywords[D],delete L.all[D];for(const G of L.rules){const V=G.rules.findIndex(H=>H.keyword===D);V>=0&&G.rules.splice(V,1)}return this}addFormat(D,L){return typeof L=="string"&&(L=new RegExp(L)),this.formats[D]=L,this}errorsText(D=this.errors,{separator:L=", ",dataVar:G="data"}={}){return!D||D.length===0?"No errors":D.map(V=>`${G}${V.instancePath} ${V.message}`).reduce((V,H)=>V+L+H)}$dataMetaSchema(D,L){const G=this.RULES.all;D=JSON.parse(JSON.stringify(D));for(const V of L){const H=V.split("/").slice(1);let te=D;for(const le of H)te=te[le];for(const le in G){const me=G[le];if(typeof me!="object")continue;const{$data:ye}=me.definition,de=te[le];ye&&de&&(te[le]=Y(de))}}return D}_removeAllSchemas(D,L){for(const G in D){const V=D[G];(!L||L.test(G))&&(typeof V=="string"?delete D[G]:V&&!V.meta&&(this._cache.delete(V.schema),delete D[G]))}}_addSchema(D,L,G,V=this.opts.validateSchema,H=this.opts.addUsedSchema){let te;const{schemaId:le}=this.opts;if(typeof D=="object")te=D[le];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof D!="boolean")throw new Error("schema must be object or boolean")}let me=this._cache.get(D);if(me!==void 0)return me;G=(0,u.normalizeId)(te||G);const ye=u.getSchemaRefs.call(this,D,G);return me=new o.SchemaEnv({schema:D,schemaId:le,meta:L,baseId:G,localRefs:ye}),this._cache.set(me.schema,me),H&&!G.startsWith("#")&&(G&&this._checkUnique(G),this.refs[G]=me),V&&this.validateSchema(D,!0),me}_checkUnique(D){if(this.schemas[D]||this.refs[D])throw new Error(`schema with key or id "${D}" already exists`)}_compileSchemaEnv(D){if(D.meta?this._compileMetaSchema(D):o.compileSchema.call(this,D),!D.validate)throw new Error("ajv implementation error");return D.validate}_compileMetaSchema(D){const L=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,D)}finally{this.opts=L}}}e.default=w,w.ValidationError=r.default,w.MissingRefError=i.default;function x(q,D,L,G="error"){for(const V in q){const H=V;H in D&&this.logger[G](`${L}: option ${V}. ${q[H]}`)}}function E(q){return q=(0,u.normalizeId)(q),this.schemas[q]||this.refs[q]}function b(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const D in q)this.addSchema(q[D],D)}function T(){for(const q in this.opts.formats){const D=this.opts.formats[q];D&&this.addFormat(q,D)}}function A(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const D in q){const L=q[D];L.keyword||(L.keyword=D),this.addKeyword(L)}}function C(){const q={...this.opts};for(const D of p)delete q[D];return q}const P={log(){},warn(){},error(){}};function N(q){if(q===!1)return P;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const $=/^[a-z_$][a-z0-9_$:-]*$/i;function M(q,D){const{RULES:L}=this;if((0,c.eachItem)(q,G=>{if(L.keywords[G])throw new Error(`Keyword ${G} is already defined`);if(!$.test(G))throw new Error(`Keyword ${G} has invalid name`)}),!!D&&D.$data&&!("code"in D||"validate"in D))throw new Error('$data keyword must have "code" or "validate" function')}function B(q,D,L){var G;const V=D==null?void 0:D.post;if(L&&V)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:H}=this;let te=V?H.post:H.rules.find(({type:me})=>me===L);if(te||(te={type:L,rules:[]},H.rules.push(te)),H.keywords[q]=!0,!D)return;const le={keyword:q,definition:{...D,type:(0,l.getJSONTypes)(D.type),schemaType:(0,l.getJSONTypes)(D.schemaType)}};D.before?z.call(this,te,le,D.before):te.rules.push(le),H.all[q]=le,(G=D.implements)===null||G===void 0||G.forEach(me=>this.addKeyword(me))}function z(q,D,L){const G=q.rules.findIndex(V=>V.keyword===L);G>=0?q.rules.splice(G,0,D):(q.rules.push(D),this.logger.warn(`rule ${L} is not defined`))}function W(q){let{metaSchema:D}=q;D!==void 0&&(q.$data&&this.opts.$data&&(D=Y(D)),q.validateSchema=this.compile(D,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Y(q){return{anyOf:[q,U]}}})(pLe);var yJ={},vJ={},_J={};Object.defineProperty(_J,"__esModule",{value:!0});const eBt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};_J.default=eBt;var P1={};Object.defineProperty(P1,"__esModule",{value:!0});P1.callRef=P1.getValidate=void 0;const tBt=XI,Ege=Dn,hu=Ln,nb=Ch,Sge=Su,_k=pr,nBt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Sge.resolveRef.call(u,l,i,n);if(c===void 0)throw new tBt.default(r.opts.uriResolver,i,n);if(c instanceof Sge.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return tR(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return tR(e,(0,hu._)`${p}.validate`,l,l.$async)}function d(p){const m=jLe(e,p);tR(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,hu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:hu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function jLe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,hu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}P1.getValidate=jLe;function tR(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?nb.default.this:hu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,hu._)`await ${(0,Ege.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,hu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Ege.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,hu._)`${p}.errors`;i.assign(nb.default.vErrors,(0,hu._)`${nb.default.vErrors} === null ? ${m} : ${nb.default.vErrors}.concat(${m})`),i.assign(nb.default.errors,(0,hu._)`${nb.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=_k.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,hu._)`${p}.evaluated.props`);s.props=_k.mergeEvaluated.props(i,y,s.props,hu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=_k.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,hu._)`${p}.evaluated.items`);s.items=_k.mergeEvaluated.items(i,y,s.items,hu.Name)}}}P1.callRef=tR;P1.default=nBt;Object.defineProperty(vJ,"__esModule",{value:!0});const rBt=_J,iBt=P1,sBt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",rBt.default,iBt.default];vJ.default=sBt;var bJ={},wJ={};Object.defineProperty(wJ,"__esModule",{value:!0});const vM=Ln,Wm=vM.operators,_M={maximum:{okStr:"<=",ok:Wm.LTE,fail:Wm.GT},minimum:{okStr:">=",ok:Wm.GTE,fail:Wm.LT},exclusiveMaximum:{okStr:"<",ok:Wm.LT,fail:Wm.GTE},exclusiveMinimum:{okStr:">",ok:Wm.GT,fail:Wm.LTE}},oBt={message:({keyword:e,schemaCode:t})=>(0,vM.str)`must be ${_M[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,vM._)`{comparison: ${_M[e].okStr}, limit: ${t}}`},aBt={keyword:Object.keys(_M),type:"number",schemaType:"number",$data:!0,error:oBt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,vM._)`${n} ${_M[t].fail} ${r} || isNaN(${n})`)}};wJ.default=aBt;var EJ={};Object.defineProperty(EJ,"__esModule",{value:!0});const G2=Ln,uBt={message:({schemaCode:e})=>(0,G2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,G2._)`{multipleOf: ${e}}`},lBt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:uBt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,G2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,G2._)`${o} !== parseInt(${o})`;e.fail$data((0,G2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};EJ.default=lBt;var SJ={},xJ={};Object.defineProperty(xJ,"__esModule",{value:!0});function BLe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}xJ.default=BLe;BLe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(SJ,"__esModule",{value:!0});const yv=Ln,cBt=pr,fBt=xJ,dBt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,yv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,yv._)`{limit: ${e}}`},hBt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:dBt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?yv.operators.GT:yv.operators.LT,o=i.opts.unicode===!1?(0,yv._)`${n}.length`:(0,yv._)`${(0,cBt.useFunc)(e.gen,fBt.default)}(${n})`;e.fail$data((0,yv._)`${o} ${s} ${r}`)}};SJ.default=hBt;var TJ={};Object.defineProperty(TJ,"__esModule",{value:!0});const pBt=Dn,bM=Ln,mBt={message:({schemaCode:e})=>(0,bM.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,bM._)`{pattern: ${e}}`},gBt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:mBt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,bM._)`(new RegExp(${i}, ${o}))`:(0,pBt.usePattern)(e,r);e.fail$data((0,bM._)`!${a}.test(${t})`)}};TJ.default=gBt;var CJ={};Object.defineProperty(CJ,"__esModule",{value:!0});const Y2=Ln,yBt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Y2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Y2._)`{limit: ${e}}`},vBt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:yBt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Y2.operators.GT:Y2.operators.LT;e.fail$data((0,Y2._)`Object.keys(${n}).length ${i} ${r}`)}};CJ.default=vBt;var AJ={};Object.defineProperty(AJ,"__esModule",{value:!0});const Qx=Dn,K2=Ln,_Bt=pr,bBt={message:({params:{missingProperty:e}})=>(0,K2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,K2._)`{missingProperty: ${e}}`},wBt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:bBt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,_Bt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(K2.nil,f);else for(const h of n)(0,Qx.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,Qx.checkMissingProp)(e,n,h)),(0,Qx.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,Qx.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,Qx.propertyInData)(t,i,h,a.ownProperties)),t.if((0,K2.not)(p),()=>{e.error(),t.break()})},K2.nil)}}};AJ.default=wBt;var IJ={};Object.defineProperty(IJ,"__esModule",{value:!0});const X2=Ln,EBt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,X2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,X2._)`{limit: ${e}}`},SBt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:EBt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?X2.operators.GT:X2.operators.LT;e.fail$data((0,X2._)`${n}.length ${i} ${r}`)}};IJ.default=SBt;var OJ={},QI={};Object.defineProperty(QI,"__esModule",{value:!0});const ULe=GK;ULe.code='require("ajv/dist/runtime/equal").default';QI.default=ULe;Object.defineProperty(OJ,"__esModule",{value:!0});const Y9=YI,bo=Ln,xBt=pr,TBt=QI,CBt={message:({params:{i:e,j:t}})=>(0,bo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,bo._)`{i: ${e}, j: ${t}}`},ABt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:CBt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Y9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,bo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,bo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,bo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Y9.checkDataTypes)(l,g,a.opts.strictNumbers,Y9.DataType.Wrong),v=t.const("indices",(0,bo._)`{}`);t.for((0,bo._)`;${p}--;`,()=>{t.let(g,(0,bo._)`${n}[${p}]`),t.if(y,(0,bo._)`continue`),l.length>1&&t.if((0,bo._)`typeof ${g} == "string"`,(0,bo._)`${g} += "_"`),t.if((0,bo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,bo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,bo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,xBt.useFunc)(t,TBt.default),y=t.name("outer");t.label(y).for((0,bo._)`;${p}--;`,()=>t.for((0,bo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,bo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};OJ.default=ABt;var PJ={};Object.defineProperty(PJ,"__esModule",{value:!0});const DH=Ln,IBt=pr,OBt=QI,PBt={message:"must be equal to constant",params:({schemaCode:e})=>(0,DH._)`{allowedValue: ${e}}`},kBt={keyword:"const",$data:!0,error:PBt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,DH._)`!${(0,IBt.useFunc)(t,OBt.default)}(${n}, ${i})`):e.fail((0,DH._)`${s} !== ${n}`)}};PJ.default=kBt;var kJ={};Object.defineProperty(kJ,"__esModule",{value:!0});const VT=Ln,$Bt=pr,RBt=QI,NBt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,VT._)`{allowedValues: ${e}}`},DBt={keyword:"enum",schemaType:"array",$data:!0,error:NBt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,$Bt.useFunc)(t,RBt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,VT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,VT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,VT._)`${l()}(${n}, ${h}[${p}])`:(0,VT._)`${n} === ${m}`}}};kJ.default=DBt;Object.defineProperty(bJ,"__esModule",{value:!0});const MBt=wJ,LBt=EJ,FBt=SJ,jBt=TJ,BBt=CJ,UBt=AJ,zBt=IJ,VBt=OJ,HBt=PJ,qBt=kJ,WBt=[MBt.default,LBt.default,FBt.default,jBt.default,BBt.default,UBt.default,zBt.default,VBt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},HBt.default,qBt.default];bJ.default=WBt;var $J={},FS={};Object.defineProperty(FS,"__esModule",{value:!0});FS.validateAdditionalItems=void 0;const vv=Ln,MH=pr,GBt={message:({params:{len:e}})=>(0,vv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,vv._)`{limit: ${e}}`},YBt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:GBt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,MH.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}zLe(e,r)}};function zLe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,vv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,vv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,MH.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,vv._)`${a} <= ${t.length}`);n.if((0,vv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:MH.Type.Num},l),o.allErrors||n.if((0,vv.not)(l),()=>n.break())})}}FS.validateAdditionalItems=zLe;FS.default=YBt;var RJ={},jS={};Object.defineProperty(jS,"__esModule",{value:!0});jS.validateTuple=void 0;const xge=Ln,nR=pr,KBt=Dn,XBt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return VLe(e,"additionalItems",t);n.items=!0,!(0,nR.alwaysValidSchema)(n,t)&&e.ok((0,KBt.validateArray)(e))}};function VLe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=nR.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,xge._)`${s}.length`);n.forEach((f,d)=>{(0,nR.alwaysValidSchema)(a,f)||(r.if((0,xge._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,nR.checkStrictMode)(a,g,d.strictTuples)}}}jS.validateTuple=VLe;jS.default=XBt;Object.defineProperty(RJ,"__esModule",{value:!0});const QBt=jS,JBt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,QBt.validateTuple)(e,"items")};RJ.default=JBt;var NJ={};Object.defineProperty(NJ,"__esModule",{value:!0});const Tge=Ln,ZBt=pr,e9t=Dn,t9t=FS,n9t={message:({params:{len:e}})=>(0,Tge.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Tge._)`{limit: ${e}}`},r9t={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:n9t,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,ZBt.alwaysValidSchema)(r,t)&&(i?(0,t9t.validateAdditionalItems)(e,i):e.ok((0,e9t.validateArray)(e)))}};NJ.default=r9t;var DJ={};Object.defineProperty(DJ,"__esModule",{value:!0});const Wl=Ln,bk=pr,i9t={message:({params:{min:e,max:t}})=>t===void 0?(0,Wl.str)`must contain at least ${e} valid item(s)`:(0,Wl.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Wl._)`{minContains: ${e}}`:(0,Wl._)`{minContains: ${e}, maxContains: ${t}}`},s9t={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:i9t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Wl._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,bk.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,bk.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,bk.alwaysValidSchema)(s,n)){let m=(0,Wl._)`${c} >= ${o}`;a!==void 0&&(m=(0,Wl._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Wl._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:bk.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Wl._)`${m}++`),a===void 0?t.if((0,Wl._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Wl._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Wl._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};DJ.default=s9t;var HLe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Ln,n=pr,r=Dn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(HLe);var MJ={};Object.defineProperty(MJ,"__esModule",{value:!0});const qLe=Ln,o9t=pr,a9t={message:"property name must be valid",params:({params:e})=>(0,qLe._)`{propertyName: ${e.propertyName}}`},u9t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:a9t,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,o9t.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,qLe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};MJ.default=u9t;var HF={};Object.defineProperty(HF,"__esModule",{value:!0});const wk=Dn,qc=Ln,l9t=Ch,Ek=pr,c9t={message:"must NOT have additional properties",params:({params:e})=>(0,qc._)`{additionalProperty: ${e.additionalProperty}}`},f9t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:c9t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Ek.alwaysValidSchema)(o,n))return;const l=(0,wk.allSchemaProperties)(r.properties),c=(0,wk.allSchemaProperties)(r.patternProperties);f(),e.ok((0,qc._)`${s} === ${l9t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,Ek.schemaRefOrVal)(o,r.properties,"properties");y=(0,wk.isOwnProperty)(t,v,g)}else l.length?y=(0,qc.or)(...l.map(v=>(0,qc._)`${g} === ${v}`)):y=qc.nil;return c.length&&(y=(0,qc.or)(y,...c.map(v=>(0,qc._)`${(0,wk.usePattern)(e,v)}.test(${g})`))),(0,qc.not)(y)}function h(g){t.code((0,qc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,Ek.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,qc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,qc.not)(y),()=>t.break()))}}function m(g,y,v){const _={keyword:"additionalProperties",dataProp:g,dataPropType:Ek.Type.Str};v===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};HF.default=f9t;var LJ={};Object.defineProperty(LJ,"__esModule",{value:!0});const d9t=xf,Cge=Dn,K9=pr,Age=HF,h9t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Age.default.code(new d9t.KeywordCxt(s,Age.default,"additionalProperties"));const o=(0,Cge.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=K9.mergeEvaluated.props(t,(0,K9.toHash)(o),s.props));const a=o.filter(f=>!(0,K9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Cge.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};LJ.default=h9t;var FJ={};Object.defineProperty(FJ,"__esModule",{value:!0});const Ige=Dn,Sk=Ln,Oge=pr,Pge=pr,p9t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Ige.allSchemaProperties)(n),u=a.filter(m=>(0,Oge.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof Sk.Name)&&(s.props=(0,Pge.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Oge.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,Sk._)`${(0,Ige.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Pge.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,Sk._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,Sk.not)(c),()=>t.break())})})}}};FJ.default=p9t;var jJ={};Object.defineProperty(jJ,"__esModule",{value:!0});const m9t=pr,g9t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,m9t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};jJ.default=g9t;var BJ={};Object.defineProperty(BJ,"__esModule",{value:!0});const y9t=Dn,v9t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:y9t.validateUnion,error:{message:"must match a schema in anyOf"}};BJ.default=v9t;var UJ={};Object.defineProperty(UJ,"__esModule",{value:!0});const rR=Ln,_9t=pr,b9t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,rR._)`{passingSchemas: ${e.passing}}`},w9t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:b9t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,_9t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,rR._)`${u} && ${o}`).assign(o,!1).assign(a,(0,rR._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,rR.Name)})})}}};UJ.default=w9t;var zJ={};Object.defineProperty(zJ,"__esModule",{value:!0});const E9t=pr,S9t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,E9t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};zJ.default=S9t;var VJ={};Object.defineProperty(VJ,"__esModule",{value:!0});const wM=Ln,WLe=pr,x9t={message:({params:e})=>(0,wM.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,wM._)`{failingKeyword: ${e.ifClause}}`},T9t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:x9t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,WLe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=kge(r,"then"),s=kge(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,wM.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,wM._)`${c}`):e.setParams({ifClause:c})}}}};function kge(e,t){const n=e.schema[t];return n!==void 0&&!(0,WLe.alwaysValidSchema)(e,n)}VJ.default=T9t;var HJ={};Object.defineProperty(HJ,"__esModule",{value:!0});const C9t=pr,A9t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,C9t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};HJ.default=A9t;Object.defineProperty($J,"__esModule",{value:!0});const I9t=FS,O9t=RJ,P9t=jS,k9t=NJ,$9t=DJ,R9t=HLe,N9t=MJ,D9t=HF,M9t=LJ,L9t=FJ,F9t=jJ,j9t=BJ,B9t=UJ,U9t=zJ,z9t=VJ,V9t=HJ;function H9t(e=!1){const t=[F9t.default,j9t.default,B9t.default,U9t.default,z9t.default,V9t.default,N9t.default,D9t.default,R9t.default,M9t.default,L9t.default];return e?t.push(O9t.default,k9t.default):t.push(I9t.default,P9t.default),t.push($9t.default),t}$J.default=H9t;var qJ={},WJ={};Object.defineProperty(WJ,"__esModule",{value:!0});const ss=Ln,q9t={message:({schemaCode:e})=>(0,ss.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ss._)`{format: ${e}}`},W9t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:q9t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ss._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ss._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ss._)`${m}.type || "string"`).assign(y,(0,ss._)`${m}.validate`),()=>n.assign(g,(0,ss._)`"string"`).assign(y,m)),e.fail$data((0,ss.or)(v(),_()));function v(){return u.strictSchema===!1?ss.nil:(0,ss._)`${o} && !${y}`}function _(){const w=c.$async?(0,ss._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ss._)`${y}(${r})`,x=(0,ss._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ss._)`${y} && ${y} !== true && ${g} === ${t} && !${x}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function _(x){const E=x instanceof RegExp?(0,ss.regexpCode)(x):u.code.formats?(0,ss._)`${u.code.formats}${(0,ss.getProperty)(s)}`:void 0,b=n.scopeValue("formats",{key:s,ref:x,code:E});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,ss._)`${b}.validate`]:["string",x,b]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ss._)`await ${y}(${r})`}return typeof g=="function"?(0,ss._)`${y}(${r})`:(0,ss._)`${y}.test(${r})`}}}};WJ.default=W9t;Object.defineProperty(qJ,"__esModule",{value:!0});const G9t=WJ,Y9t=[G9t.default];qJ.default=Y9t;var CE={};Object.defineProperty(CE,"__esModule",{value:!0});CE.contentVocabulary=CE.metadataVocabulary=void 0;CE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];CE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(yJ,"__esModule",{value:!0});const K9t=vJ,X9t=bJ,Q9t=$J,J9t=qJ,$ge=CE,Z9t=[K9t.default,X9t.default,(0,Q9t.default)(),J9t.default,$ge.metadataVocabulary,$ge.contentVocabulary];yJ.default=Z9t;var GJ={},GLe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(GLe);Object.defineProperty(GJ,"__esModule",{value:!0});const Eb=Ln,LH=GLe,Rge=Su,eUt=pr,tUt={message:({params:{discrError:e,tagName:t}})=>e===LH.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,Eb._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},nUt={keyword:"discriminator",type:"object",schemaType:"object",error:tUt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,Eb._)`${n}${(0,Eb.getProperty)(a)}`);t.if((0,Eb._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:LH.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,Eb._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:LH.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,Eb.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let x=o[w];x!=null&&x.$ref&&!(0,eUt.schemaHasRulesButRef)(x,s.self.RULES)&&(x=Rge.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,x==null?void 0:x.$ref),x instanceof Rge.SchemaEnv&&(x=x.schema));const E=(h=x==null?void 0:x.properties)===null||h===void 0?void 0:h[a];if(typeof E!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(x)),v(E,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,x){if(w.const)_(w.const,x);else if(w.enum)for(const E of w.enum)_(E,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,x){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=x}}}};GJ.default=nUt;const rUt="http://json-schema.org/draft-07/schema#",iUt="http://json-schema.org/draft-07/schema#",sUt="Core schema meta-schema",oUt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},aUt=["object","boolean"],uUt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},lUt={$schema:rUt,$id:iUt,title:sUt,definitions:oUt,type:aUt,properties:uUt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const n=pLe,r=yJ,i=GJ,s=lUt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=xf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Ln;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=KI;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=XI;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(kH,kH.exports);var cUt=kH.exports;const YLe=$l(cUt),fUt="#/definitions/StudyConfig",dUt="http://json-schema.org/draft-07/schema#",hUt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},CheckboxResponse:{additionalProperties:!1,description:"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed as checkboxes.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"checkbox",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](./Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"dropdown",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"iframe",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the preset. For example, preset: 5 will render 5 radio buttons, and preset: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.",properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},preset:{description:"The number of options to render.",type:"number"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},type:{const:"likert",type:"string"}},required:["id","location","preset","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"longText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumericalResponse:{additionalProperties:!1,description:"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"numerical",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},Option:{additionalProperties:!1,description:"The Option interface is used to define the options for a dropdown, slider, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file. The Option interface is used in the Response interface.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:["string","number"]}},required:["label","value"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:"The RadioResponse interface is used to define the properties of a radio response. RadioResponses render as a radio input with user specified options, and optionally left and right labels.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{type:"string"},type:{const:"radio",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta12/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta12/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](./ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"shortText",type:"string"}},required:["id","location","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses."},options:{description:"This define the steps in the slider and the extent of the slider.",items:{$ref:"#/definitions/Option"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},type:{const:"slider",type:"string"}},required:["id","location","options","prompt","required","type"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta12/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"}]},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\nUsing baseComponents:\n\n```js "baseComponents": { "my-image-component": {   "instructionLocation": "sidebar",   "nextButtonLocation": "sidebar",   "path": "<study-name>/assets/my-image.jpg",   "response": [       {           "id": "my-image-id",           "options": [               {                   "label": "Europe",                   "value": "Europe"               },               {                   "label": "Japan",                   "value": "Japan"               },               {                   "label": "USA",                   "value": "USA"               }           ],           "prompt": "Your Selected Answer:",           "type": "dropdown"       }   ],   "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {   "baseComponent": "my-image-component",   "description": "Choosing section with largest GDP",   "instruction": "Which region has the largest GDP?" }, "q2": {   "baseComponent": "my-image-component",   "description": "Choosing section with lowest GDP",   "instruction": "Which region has the lowest GDP?" }, "q3": {   "baseComponent": "my-image-component",   "description": "Choosing section with highest exports of Wheat",   "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "test@test.com",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},pUt={$ref:fUt,$schema:dUt,definitions:hUt},mUt="#/definitions/GlobalConfig",gUt="http://json-schema.org/draft-07/schema#",yUt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},vUt={$ref:mUt,$schema:gUt,definitions:yUt},KLe=new YLe;KLe.addSchema(vUt);const Nge=KLe.getSchema("#/definitions/GlobalConfig"),XLe=new YLe;XLe.addSchema(pUt);const X9=XLe.getSchema("#/definitions/StudyConfig");function _Ut(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function qF(e){return e.baseComponent!==void 0}function bUt(e){const t=lJ.parse(e),n=Nge(t),r=_Ut(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Nge.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function QLe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):QLe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function wUt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;qF(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=Wke(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return QLe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function EUt(e){let t=!1,n;try{n=lJ.parse(e),t=X9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=wUt(n);r=[...X9.errors||[],...s],i=o}else r=X9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function JLe(){const e=Sm(),{setAlertModal:t}=wh(),n=Eh();I.useEffect(()=>{(new URLSearchParams(window.location.search).get("admin")||"f")==="t"||(window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))})},[e,t,n])}const Dge=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],Mge=["participantId","trialId","trialOrder","responseId"];function YJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function SUt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Xp(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=qF(u)&&u.baseComponent&&t.baseComponents?qK({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(_=>_.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function xUt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=I.useState([...Dge].filter(c=>c!=="meta")),a=I.useMemo(()=>{const c=[...Mge,...s],f=c,d=i.map(h=>SUt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=I.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);YJ(c,n)},[n,a.header,a.rows]),l=I.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return k.jsxs(ac,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[k.jsx(aIe,{searchable:!0,nothingFound:"Property not found",data:[...Dge],value:s,onChange:c=>o(c),label:"Included optional columns:",icon:k.jsx(g0t,{}),variant:"filled"}),k.jsx(Ef,{h:"md"}),k.jsx(dt,{mih:300,style:{width:"100%",overflow:"scroll"},children:k.jsxs(dK,{striped:!0,captionSide:"bottom",withBorder:!0,children:[k.jsx("thead",{children:k.jsx("tr",{children:a.header.map(c=>k.jsx("th",{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:k.jsxs(jn,{direction:"row",justify:"space-between",align:"center",children:[c,!Mge.includes(c)&&k.jsx(g0,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},children:k.jsx(DOe,{size:16})})]})},c))})}),k.jsx("tbody",{children:a.rows.slice(0,5).map((c,f)=>k.jsx("tr",{children:a.header.map(d=>k.jsx("td",{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),k.jsx(Ef,{h:"sm"}),k.jsx(jn,{justify:"center",fz:"sm",c:"dimmed",children:k.jsx(ze,{children:l})}),k.jsx(Ef,{h:"md"}),k.jsxs(Wa,{position:"right",children:[k.jsx(ur,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),k.jsx(ur,{leftIcon:k.jsx($Oe,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function TUt(){const e=w0(),{storageEngine:t}=nu(),{answers:n}=Bf(m=>m),[r,i]=I.useState(!1);I.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),JLe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=I.useCallback(async()=>{YJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));return I.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),k.jsx(_1,{style:{height:"100%"},children:k.jsx(jn,{direction:"column",children:r?k.jsx(ze,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?k.jsx(Ga,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):k.jsxs(k.Fragment,{children:[k.jsx(ze,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),k.jsx(Ef,{h:"lg"}),k.jsx(_1,{children:k.jsx(o_,{color:"blue"})})]})})})}function CUt(){var d;const e=w0(),t=Sm(),n=xm()||"Notfound",r=e.components[n],i=WK();JLe();const{storageEngine:s}=nu(),o=Eh(),{setAlertModal:a}=wh();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return k.jsx(TUt,{});if(n==="Notfound")return k.jsx(w1,{email:e.uiConfig.contactEmail});const u=qF(r)&&e.baseComponents?qK({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return k.jsxs(k.Fragment,{children:[c==="aboveStimulus"&&k.jsx(Ga,{text:l}),k.jsx(w3,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),k.jsxs(I.Suspense,{fallback:k.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&k.jsx(J5t,{currentConfig:u}),u.type==="website"&&k.jsx(ITt,{currentConfig:u}),u.type==="image"&&k.jsx(PTt,{currentConfig:u}),u.type==="react-component"&&k.jsx(Q5t,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&k.jsx(Ga,{text:l}),k.jsx(w3,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function FH(e){const[t]=wY();return k.jsx(bY,{...e,to:{pathname:e.to,search:t.toString()}})}function ZLe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=ZLe(o,t,n,r),r.includes(o.orderPath))break}return i}function e6e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=e6e(s,r)}}),n}function AUt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function IUt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=H4(),u=ym(),l=Sm(),c=w0(),[f,{close:d,open:h}]=OT(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?ZLe(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return k.jsxs(Oi,{position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[k.jsx(Oi.Target,{children:k.jsx("div",{onMouseEnter:h,onMouseLeave:d,children:k.jsx(fIe,{active:g,style:{lineHeight:"32px",height:"32px"},label:k.jsxs("div",{children:[i&&k.jsx(a0t,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?k.jsx("strong",{children:e}):e]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&s_.createPortal(k.jsx(Oi.Dropdown,{onMouseLeave:d,children:k.jsx(ze,{size:"sm",children:k.jsxs("div",{children:[p.description&&k.jsxs("div",{children:[k.jsx(ze,{fw:900,display:"inline-block",mr:2,children:"Description:"}),k.jsx(ze,{fw:400,component:"span",children:p.description})]}),p.meta&&k.jsxs(ze,{children:[k.jsx(ze,{fw:"900",component:"span",children:"Task Meta: "}),k.jsx("pre",{style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})}),document.body)]})}function t6e({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=Xv(e.components);return n&&r&&(i=AUt(Xv(e.components),Xv(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),k.jsx(k.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return k.jsx(IUt,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?Xp(u).length-e6e(o,u):0,c=Xp(o);return k.jsx(fIe,{label:k.jsxs("div",{style:{opacity:l>0?1:.5},children:[k.jsx(ze,{display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?k.jsx(s0t,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&k.jsxs(Yv,{ml:5,children:[l,"/",c.length]}),r&&o.interruptions&&k.jsx(Yv,{ml:5,color:"orange",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px",position:"sticky",backgroundColor:"#fff"},children:k.jsx("div",{style:{borderLeft:"1px solid #e9ecef"},children:k.jsx(t6e,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function n6e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>n6e(n,`${t}-${r}`))}}function OUt(){const{showStudyBrowser:e,sequence:t}=Bf(l=>l),{toggleStudyBrowser:n}=wh(),r=xm(),i=w0(),s=Eh(),[o,a]=F.useState(!0),u=I.useMemo(()=>{let l=Xv(i.sequence);return l=n6e(l,"root"),l.components.push("end"),l},[i.sequence]);return e||r==="end"&&i.uiConfig.autoDownloadStudy?k.jsxs(I2,{p:"0",width:{base:360},style:{zIndex:0},children:[k.jsxs(I2.Section,{sx:l=>({borderBottom:`1px solid ${l.colorScheme==="dark"?l.colors.dark[4]:l.colors.gray[2]}`}),children:[k.jsx(_m,{style:{position:"absolute",right:"10px",top:"10px",zIndex:5},onClick:()=>s(n())}),k.jsx(ze,{size:"md",p:"sm",pb:2,weight:"bold",children:"Study Browser"}),k.jsx(fK,{checked:o,onChange:l=>a(l.currentTarget.checked),size:"xs",pt:0,pb:"sm",label:"Participant View"})]}),k.jsx(I2.Section,{grow:!0,component:zY,p:"xs",children:k.jsx(t6e,{configSequence:u,participantSequence:t,fullSequence:t,participantView:o})})]}):null}var Lge={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},PUt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},i6e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r6e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):PUt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new kUt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};let kUt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const $Ut=function(e){const t=r6e(e);return i6e.encodeByteArray(t,!0)},EM=function(e){return $Ut(e).replace(/\./g,"")},s6e=function(e){try{return i6e.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RUt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NUt=()=>RUt().__FIREBASE_DEFAULTS__,DUt=()=>{if(typeof process>"u"||typeof Lge>"u")return;const e=Lge.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},MUt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&s6e(e[1]);return t&&JSON.parse(t)},WF=()=>{try{return NUt()||DUt()||MUt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},o6e=e=>{var t,n;return(n=(t=WF())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},LUt=e=>{const t=o6e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},a6e=()=>{var e;return(e=WF())===null||e===void 0?void 0:e.config},u6e=e=>{var t;return(t=WF())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FUt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jUt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[EM(JSON.stringify(n)),EM(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BUt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fo())}function UUt(){var e;const t=(e=WF())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zUt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function VUt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HUt(){const e=Fo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function qUt(){return!UUt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WUt(){try{return typeof indexedDB=="object"}catch{return!1}}function GUt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YUt="FirebaseError";let my=class l6e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=YUt,Object.setPrototypeOf(this,l6e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,JI.prototype.create)}},JI=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?KUt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new my(i,a,r)}};function KUt(e,t){return e.replace(XUt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const XUt=/\{\$([^}]+)}/g;function QUt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function mA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Fge(s)&&Fge(o)){if(!mA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fge(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function JUt(e,t){const n=new ZUt(e,t);return n.subscribe.bind(n)}let ZUt=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ezt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Q9),i.error===void 0&&(i.error=Q9),i.complete===void 0&&(i.complete=Q9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ezt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Q9(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(e){return e&&e._delegate?e._delegate:e}let N0=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tzt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new FUt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rzt(t))try{this.getOrInitializeService({instanceIdentifier:av})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=av){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=av){return this.instances.has(t)}getOptions(t=av){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nzt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=av){return this.component?this.component.multipleInstances?t:av:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nzt(e){return e===av?void 0:e}function rzt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class izt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new tzt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Qn||(Qn={}));const szt={debug:Qn.DEBUG,verbose:Qn.VERBOSE,info:Qn.INFO,warn:Qn.WARN,error:Qn.ERROR,silent:Qn.SILENT},ozt=Qn.INFO,azt={[Qn.DEBUG]:"log",[Qn.VERBOSE]:"log",[Qn.INFO]:"info",[Qn.WARN]:"warn",[Qn.ERROR]:"error"},uzt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=azt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let KJ=class{constructor(t){this.name=t,this._logLevel=ozt,this._logHandler=uzt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Qn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?szt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Qn.DEBUG,...t),this._logHandler(this,Qn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Qn.VERBOSE,...t),this._logHandler(this,Qn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Qn.INFO,...t),this._logHandler(this,Qn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Qn.WARN,...t),this._logHandler(this,Qn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Qn.ERROR,...t),this._logHandler(this,Qn.ERROR,...t)}};const lzt=(e,t)=>t.some(n=>e instanceof n);let jge,Bge;function czt(){return jge||(jge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fzt(){return Bge||(Bge=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c6e=new WeakMap,jH=new WeakMap,f6e=new WeakMap,J9=new WeakMap,XJ=new WeakMap;function dzt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(r0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&c6e.set(n,e)}).catch(()=>{}),XJ.set(t,e),t}function hzt(e){if(jH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});jH.set(e,t)}let BH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return jH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||f6e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return r0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function pzt(e){BH=e(BH)}function mzt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Z9(this),t,...n);return f6e.set(r,t.sort?t.sort():[t]),r0(r)}:fzt().includes(e)?function(...t){return e.apply(Z9(this),t),r0(c6e.get(this))}:function(...t){return r0(e.apply(Z9(this),t))}}function gzt(e){return typeof e=="function"?mzt(e):(e instanceof IDBTransaction&&hzt(e),lzt(e,czt())?new Proxy(e,BH):e)}function r0(e){if(e instanceof IDBRequest)return dzt(e);if(J9.has(e))return J9.get(e);const t=gzt(e);return t!==e&&(J9.set(e,t),XJ.set(t,e)),t}const Z9=e=>XJ.get(e);function yzt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=r0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(r0(o.result),u.oldVersion,u.newVersion,r0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const vzt=["get","getKey","getAll","getAllKeys","count"],_zt=["put","add","delete","clear"],eU=new Map;function Uge(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(eU.get(t))return eU.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_zt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vzt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return eU.set(t,s),s}pzt(e=>({...e,get:(t,n,r)=>Uge(t,n)||e.get(t,n,r),has:(t,n)=>!!Uge(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bzt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wzt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wzt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const UH="@firebase/app",zge="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new KJ("@firebase/app"),Ezt="@firebase/app-compat",Szt="@firebase/analytics-compat",xzt="@firebase/analytics",Tzt="@firebase/app-check-compat",Czt="@firebase/app-check",Azt="@firebase/auth",Izt="@firebase/auth-compat",Ozt="@firebase/database",Pzt="@firebase/database-compat",kzt="@firebase/functions",$zt="@firebase/functions-compat",Rzt="@firebase/installations",Nzt="@firebase/installations-compat",Dzt="@firebase/messaging",Mzt="@firebase/messaging-compat",Lzt="@firebase/performance",Fzt="@firebase/performance-compat",jzt="@firebase/remote-config",Bzt="@firebase/remote-config-compat",Uzt="@firebase/storage",zzt="@firebase/storage-compat",Vzt="@firebase/firestore",Hzt="@firebase/vertexai-preview",qzt="@firebase/firestore-compat",Wzt="firebase",Gzt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH="[DEFAULT]",Yzt={[UH]:"fire-core",[Ezt]:"fire-core-compat",[xzt]:"fire-analytics",[Szt]:"fire-analytics-compat",[Czt]:"fire-app-check",[Tzt]:"fire-app-check-compat",[Azt]:"fire-auth",[Izt]:"fire-auth-compat",[Ozt]:"fire-rtdb",[Pzt]:"fire-rtdb-compat",[kzt]:"fire-fn",[$zt]:"fire-fn-compat",[Rzt]:"fire-iid",[Nzt]:"fire-iid-compat",[Dzt]:"fire-fcm",[Mzt]:"fire-fcm-compat",[Lzt]:"fire-perf",[Fzt]:"fire-perf-compat",[jzt]:"fire-rc",[Bzt]:"fire-rc-compat",[Uzt]:"fire-gcs",[zzt]:"fire-gcs-compat",[Vzt]:"fire-fst",[qzt]:"fire-fst-compat",[Hzt]:"fire-vertex","fire-js":"fire-js",[Wzt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=new Map,Kzt=new Map,VH=new Map;function Vge(e,t){try{e.container.addComponent(t)}catch(n){k1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function kf(e){const t=e.name;if(VH.has(t))return k1.debug(`There were multiple attempts to register component ${t}.`),!1;VH.set(t,e);for(const n of SM.values())Vge(n,e);for(const n of Kzt.values())Vge(n,e);return!0}function gy(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Pg(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xzt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},i0=new JI("app","Firebase",Xzt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qzt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new N0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw i0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=Gzt;function d6e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:zH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw i0.create("bad-app-name",{appName:String(i)});if(n||(n=a6e()),!n)throw i0.create("no-options");const s=SM.get(i);if(s){if(mA(n,s.options)&&mA(r,s.config))return s;throw i0.create("duplicate-app",{appName:i})}const o=new izt(i);for(const u of VH.values())o.addComponent(u);const a=new Qzt(n,r,o);return SM.set(i,a),a}function GF(e=zH){const t=SM.get(e);if(!t&&e===zH&&a6e())return d6e();if(!t)throw i0.create("no-app",{appName:e});return t}function vl(e,t,n){var r;let i=(r=Yzt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),k1.warn(a.join(" "));return}kf(new N0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jzt="firebase-heartbeat-database",Zzt=1,gA="firebase-heartbeat-store";let tU=null;function h6e(){return tU||(tU=yzt(Jzt,Zzt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(gA)}catch(n){console.warn(n)}}}}).catch(e=>{throw i0.create("idb-open",{originalErrorMessage:e.message})})),tU}async function e7t(e){try{const n=(await h6e()).transaction(gA),r=await n.objectStore(gA).get(p6e(e));return await n.done,r}catch(t){if(t instanceof my)k1.warn(t.message);else{const n=i0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});k1.warn(n.message)}}}async function Hge(e,t){try{const r=(await h6e()).transaction(gA,"readwrite");await r.objectStore(gA).put(t,p6e(e)),await r.done}catch(n){if(n instanceof my)k1.warn(n.message);else{const r=i0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});k1.warn(r.message)}}}function p6e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7t=1024,n7t=30*24*60*60*1e3;class r7t{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new s7t(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qge();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=n7t}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qge(),{heartbeatsToSend:r,unsentEntries:i}=i7t(this._heartbeatsCache.heartbeats),s=EM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qge(){return new Date().toISOString().substring(0,10)}function i7t(e,t=t7t){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wge(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wge(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class s7t{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WUt()?GUt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await e7t(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hge(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Wge(e){return EM(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o7t(e){kf(new N0("platform-logger",t=>new bzt(t),"PRIVATE")),kf(new N0("heartbeat",t=>new r7t(t),"PRIVATE")),vl(UH,zge,e),vl(UH,zge,"esm2017"),vl("fire-js","")}o7t("");function m6e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const a7t=m6e,g6e=new JI("auth","Firebase",m6e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=new KJ("@firebase/auth");function u7t(e,...t){xM.logLevel<=Qn.WARN&&xM.warn(`Auth (${kc}): ${e}`,...t)}function iR(e,...t){xM.logLevel<=Qn.ERROR&&xM.error(`Auth (${kc}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(e,...t){throw QJ(e,...t)}function Wd(e,...t){return QJ(e,...t)}function y6e(e,t,n){const r=Object.assign(Object.assign({},a7t()),{[t]:n});return new JI("auth","Firebase",r).create(t,{appName:e.name})}function t1(e){return y6e(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return g6e.create(e,...t)}function sn(e,t,...n){if(!e)throw QJ(t,...n)}function Sp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw iR(t),new Error(t)}function am(e,t){e||Sp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function l7t(){return Gge()==="http:"||Gge()==="https:"}function Gge(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c7t(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l7t()||zUt()||"connection"in navigator)?navigator.onLine:!0}function f7t(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eO=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,am(n>t,"Short delay should be less than long delay!"),this.isMobile=BUt()||VUt()}get(){return c7t()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JJ(e,t){am(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v6e=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7t=new eO(3e4,6e4);function ZJ(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function BS(e,t,n,r,i={}){return _6e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=ZI(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),v6e.fetch()(b6e(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function _6e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},d7t),t);try{const i=new m7t(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw xk(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xk(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xk(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw xk(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw y6e(e,c,l);om(e,c)}}catch(i){if(i instanceof my)throw i;om(e,"network-request-failed",{message:String(i)})}}async function p7t(e,t,n,r,i={}){const s=await BS(e,t,n,r,i);return"mfaPendingCredential"in s&&om(e,"multi-factor-auth-required",{_serverResponse:s}),s}function b6e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?JJ(e.config,i):`${e.config.apiScheme}://${i}`}let m7t=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wd(this.auth,"network-request-failed")),h7t.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function xk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Wd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g7t(e,t){return BS(e,"POST","/v1/accounts:delete",t)}async function w6e(e,t){return BS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function y7t(e,t=!1){const n=Ei(e),r=await n.getIdToken(t),i=eZ(r);sn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Q2(nU(i.auth_time)),issuedAtTime:Q2(nU(i.iat)),expirationTime:Q2(nU(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function nU(e){return Number(e)*1e3}function eZ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return iR("JWT malformed, contained fewer than 3 sections"),null;try{const i=s6e(n);return i?JSON.parse(i):(iR("Failed to decode base64 JWT payload"),null)}catch(i){return iR("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Yge(e){const t=eZ(e);return sn(t,"internal-error"),sn(typeof t.exp<"u","internal-error"),sn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof my&&v7t(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function v7t({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _7t=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qH=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Q2(this.lastLoginAt),this.creationTime=Q2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await yA(e,w6e(n,{idToken:r}));sn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?E6e(s.providerUserInfo):[],a=w7t(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function b7t(e){const t=Ei(e);await TM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function w7t(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function E6e(e){return e.map(t=>{var{providerId:n}=t,r=IS(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E7t(e,t){const n=await _6e(e,{},async()=>{const r=ZI({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=b6e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",v6e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function S7t(e,t){return BS(e,"POST","/v2/accounts:revokeToken",ZJ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rU=class WH{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){sn(t.idToken,"internal-error"),sn(typeof t.idToken<"u","internal-error"),sn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Yge(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){sn(t.length!==0,"internal-error");const n=Yge(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(sn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await E7t(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new WH;return r&&(sn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(sn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(sn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new WH,this.toJSON())}_performRefresh(){return Sp("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(e,t){sn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}let CM=class HT{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=IS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _7t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await yA(this,this.stsTokenManager.getToken(this.auth,t));return sn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return y7t(this,t)}reload(){return b7t(this)}_assign(t){this!==t&&(sn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new HT(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){sn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await TM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pg(this.auth.app))return Promise.reject(t1(this.auth));const t=await this.getIdToken();return await yA(this,g7t(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:b}=n;sn(_&&b,t,"internal-error");const T=rU.fromJSON(this.name,b);sn(typeof _=="string",t,"internal-error"),Gm(f,t.name),Gm(d,t.name),sn(typeof w=="boolean",t,"internal-error"),sn(typeof x=="boolean",t,"internal-error"),Gm(h,t.name),Gm(p,t.name),Gm(m,t.name),Gm(g,t.name),Gm(y,t.name),Gm(v,t.name);const A=new HT({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(A.providerData=E.map(C=>Object.assign({},C))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new rU;i.updateFromServerResponse(n);const s=new HT({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await TM(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];sn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?E6e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new rU;a.updateFromIdToken(r);const u=new HT({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kge=new Map;function xp(e){am(e instanceof Function,"Expected a class definition");let t=Kge.get(e);return t?(am(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kge.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S6e=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}};S6e.type="NONE";const Xge=S6e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(e,t,n){return`firebase:${e}:${t}:${n}`}let Qge=class oR{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=sR(this.userKey,i.apiKey,s),this.fullPersistenceKey=sR("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?CM._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new oR(xp(Xge),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||xp(Xge);const o=sR(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=CM._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new oR(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new oR(s,t,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jge(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(C6e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(x6e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(I6e(t))return"Blackberry";if(O6e(t))return"Webos";if(tZ(t))return"Safari";if((t.includes("chrome/")||T6e(t))&&!t.includes("edge/"))return"Chrome";if(A6e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function x6e(e=Fo()){return/firefox\//i.test(e)}function tZ(e=Fo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function T6e(e=Fo()){return/crios\//i.test(e)}function C6e(e=Fo()){return/iemobile/i.test(e)}function A6e(e=Fo()){return/android/i.test(e)}function I6e(e=Fo()){return/blackberry/i.test(e)}function O6e(e=Fo()){return/webos/i.test(e)}function YF(e=Fo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function x7t(e=Fo()){var t;return YF(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function T7t(){return HUt()&&document.documentMode===10}function P6e(e=Fo()){return YF(e)||A6e(e)||O6e(e)||I6e(e)||/windows phone/i.test(e)||C6e(e)}function C7t(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6e(e,t=[]){let n;switch(e){case"Browser":n=Jge(Fo());break;case"Worker":n=`${Jge(Fo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A7t=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I7t(e,t={}){return BS(e,"GET","/v2/passwordPolicy",ZJ(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7t=6;let P7t=class{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:O7t,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k7t=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zge(this),this.idTokenSubscription=new Zge(this),this.beforeStateQueue=new A7t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g6e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=xp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qge.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await w6e(this,{idToken:t}),r=await CM._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Pg(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return sn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await TM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=f7t()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Pg(this.app))return Promise.reject(t1(this));const n=t?Ei(t):null;return n&&sn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&sn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Pg(this.app)?Promise.reject(t1(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Pg(this.app)?Promise.reject(t1(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await I7t(this),n=new P7t(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new JI("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await S7t(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&xp(t)||this._popupRedirectResolver;sn(n,this,"argument-error"),this.redirectPersistenceManager=await Qge.create(this,[xp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(sn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return sn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=k6e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&u7t(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}};function nZ(e){return Ei(e)}let Zge=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=JUt(n=>this.observer=n)}get next(){return sn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rZ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $7t(e){rZ=e}function R7t(e){return rZ.loadJS(e)}function N7t(){return rZ.gapiScript}function D7t(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M7t(e,t){const n=gy(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(mA(s,t??{}))return i;om(i,"already-initialized")}return n.initialize({options:t})}function L7t(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function F7t(e,t,n){const r=nZ(e);sn(r._canInitEmulator,r,"emulator-config-failed"),sn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=$6e(t),{host:o,port:a}=j7t(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||B7t()}function $6e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function j7t(e){const t=$6e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:e0e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:e0e(o)}}}function e0e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function B7t(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R6e=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Sp("not implemented")}_getIdTokenResponse(t){return Sp("not implemented")}_linkToIdToken(t,n){return Sp("not implemented")}_getReauthenticationResolver(t){return Sp("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(e,t){return p7t(e,"POST","/v1/accounts:signInWithIdp",ZJ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7t="http://localhost";let KF=class GH extends R6e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new GH(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):om("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=IS(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new GH(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Iw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Iw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Iw(t,n)}buildRequest(){const t={requestUri:U7t,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ZI(n)}return t}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N6e=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tO=class extends N6e{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let D6e=class Sb extends tO{constructor(){super("facebook.com")}static credential(t){return KF._fromParams({providerId:Sb.PROVIDER_ID,signInMethod:Sb.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Sb.credentialFromTaggedObject(t)}static credentialFromError(t){return Sb.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Sb.credential(t.oauthAccessToken)}catch{return null}}};D6e.FACEBOOK_SIGN_IN_METHOD="facebook.com";D6e.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M6e=class xb extends tO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return KF._fromParams({providerId:xb.PROVIDER_ID,signInMethod:xb.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return xb.credentialFromTaggedObject(t)}static credentialFromError(t){return xb.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return xb.credential(n,r)}catch{return null}}};M6e.GOOGLE_SIGN_IN_METHOD="google.com";M6e.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L6e=class Tb extends tO{constructor(){super("github.com")}static credential(t){return KF._fromParams({providerId:Tb.PROVIDER_ID,signInMethod:Tb.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Tb.credentialFromTaggedObject(t)}static credentialFromError(t){return Tb.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Tb.credential(t.oauthAccessToken)}catch{return null}}};L6e.GITHUB_SIGN_IN_METHOD="github.com";L6e.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F6e=class Cb extends tO{constructor(){super("twitter.com")}static credential(t,n){return KF._fromParams({providerId:Cb.PROVIDER_ID,signInMethod:Cb.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Cb.credentialFromTaggedObject(t)}static credentialFromError(t){return Cb.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Cb.credential(n,r)}catch{return null}}};F6e.TWITTER_SIGN_IN_METHOD="twitter.com";F6e.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iZ=class YH{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await CM._fromIdTokenResponse(t,r,i),o=t0e(r);return new YH({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=t0e(r);return new YH({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function t0e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z7t=class KH extends my{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,KH.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new KH(t,n,r,i)}};function j6e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?z7t._fromErrorAndOperation(e,s,t,r):s})}async function V7t(e,t,n=!1){const r=await yA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return iZ._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H7t(e,t,n=!1){const{auth:r}=e;if(Pg(r.app))return Promise.reject(t1(r));const i="reauthenticate";try{const s=await yA(e,j6e(r,i,t,e),n);sn(s.idToken,r,"internal-error");const o=eZ(s.idToken);sn(o,r,"internal-error");const{sub:a}=o;return sn(e.uid===a,r,"user-mismatch"),iZ._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&om(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q7t(e,t,n=!1){if(Pg(e.app))return Promise.reject(t1(e));const r="signIn",i=await j6e(e,r,t),s=await iZ._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function W7t(e,t,n,r){return Ei(e).onIdTokenChanged(t,n,r)}function G7t(e,t,n){return Ei(e).beforeAuthStateChanged(t,n)}function Y7t(e,t,n,r){return Ei(e).onAuthStateChanged(t,n,r)}function K7t(e){return Ei(e).signOut()}const AM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B6e=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(AM,"1"),this.storage.removeItem(AM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7t(){const e=Fo();return tZ(e)||YF(e)}const Q7t=1e3,J7t=10;let U6e=class extends B6e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=X7t()&&C7t(),this.fallbackToPolling=P6e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);T7t()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,J7t):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Q7t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}};U6e.type="LOCAL";const Z7t=U6e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z6e=class extends B6e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}};z6e.type="SESSION";const V6e=z6e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eVt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H6e=class q6e{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new q6e(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await eVt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};H6e.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sZ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tVt=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=sZ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(){return window}function nVt(e){Gd().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6e(){return typeof Gd().WorkerGlobalScope<"u"&&typeof Gd().importScripts=="function"}async function rVt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iVt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function sVt(){return W6e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6e="firebaseLocalStorageDb",oVt=1,IM="firebaseLocalStorage",Y6e="fbase_key";let nO=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function XF(e,t){return e.transaction([IM],t?"readwrite":"readonly").objectStore(IM)}function aVt(){const e=indexedDB.deleteDatabase(G6e);return new nO(e).toPromise()}function XH(){const e=indexedDB.open(G6e,oVt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(IM,{keyPath:Y6e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(IM)?t(r):(r.close(),await aVt(),t(await XH()))})})}async function n0e(e,t,n){const r=XF(e,!0).put({[Y6e]:t,value:n});return new nO(r).toPromise()}async function uVt(e,t){const n=XF(e,!1).get(t),r=await new nO(n).toPromise();return r===void 0?null:r.value}function r0e(e,t){const n=XF(e,!0).delete(t);return new nO(n).toPromise()}const lVt=800,cVt=3;let K6e=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await XH(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>cVt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return W6e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=H6e._getInstance(sVt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await rVt(),!this.activeServiceWorker)return;this.sender=new tVt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||iVt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await XH();return await n0e(t,AM,"1"),await r0e(t,AM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>n0e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>uVt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>r0e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=XF(i,!1).getAll();return new nO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lVt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}};K6e.type="LOCAL";const fVt=K6e;new eO(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dVt(e,t){return t?xp(t):(sn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oZ=class extends R6e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Iw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Iw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Iw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function hVt(e){return q7t(e.auth,new oZ(e),e.bypassAuthState)}function pVt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),H7t(n,new oZ(e),e.bypassAuthState)}async function mVt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),V7t(n,new oZ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X6e=class{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return hVt;case"linkViaPopup":case"linkViaRedirect":return mVt;case"reauthViaPopup":case"reauthViaRedirect":return pVt;default:om(this.auth,"internal-error")}}resolve(t){am(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){am(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gVt=new eO(2e3,1e4);let yVt=class qT extends X6e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,qT.currentPopupAction&&qT.currentPopupAction.cancel(),qT.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return sn(t,this.auth,"internal-error"),t}async onExecution(){am(this.filter.length===1,"Popup operations only handle one event");const t=sZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Wd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qT.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,gVt.get())};t()}};yVt.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vVt="pendingRedirect",aR=new Map;let _Vt=class extends X6e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=aR.get(this.auth._key());if(!t){try{const r=await bVt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}aR.set(this.auth._key(),t)}return this.bypassAuthState||aR.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function bVt(e,t){const n=SVt(t),r=EVt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function wVt(e,t){aR.set(e._key(),t)}function EVt(e){return xp(e._redirectPersistence)}function SVt(e){return sR(vVt,e.config.apiKey,e.name)}async function xVt(e,t,n=!1){if(Pg(e.app))return Promise.reject(t1(e));const r=nZ(e),i=dVt(r,t),o=await new _Vt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TVt=10*60*1e3;let CVt=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!AVt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Q6e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=TVt&&this.cachedEventUids.clear(),this.cachedEventUids.has(i0e(t))}saveEventToCache(t){this.cachedEventUids.add(i0e(t)),this.lastProcessedEventTime=Date.now()}};function i0e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Q6e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function AVt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q6e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IVt(e,t={}){return BS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OVt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PVt=/^https?/;async function kVt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await IVt(e);for(const n of t)try{if($Vt(n))return}catch{}om(e,"unauthorized-domain")}function $Vt(e){const t=HH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PVt.test(n))return!1;if(OVt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RVt=new eO(3e4,6e4);function s0e(){const e=Gd().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function NVt(e){return new Promise((t,n)=>{var r,i,s;function o(){s0e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{s0e(),n(Wd(e,"network-request-failed"))},timeout:RVt.get()})}if(!((i=(r=Gd().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Gd().gapi)===null||s===void 0)&&s.load)o();else{const a=D7t("iframefcb");return Gd()[a]=()=>{gapi.load?o():n(Wd(e,"network-request-failed"))},R7t(`${N7t()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw uR=null,t})}let uR=null;function DVt(e){return uR=uR||NVt(e),uR}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MVt=new eO(5e3,15e3),LVt="__/auth/iframe",FVt="emulator/auth/iframe",jVt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BVt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UVt(e){const t=e.config;sn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?JJ(t,FVt):`https://${e.config.authDomain}/${LVt}`,r={apiKey:t.apiKey,appName:e.name,v:kc},i=BVt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ZI(r).slice(1)}`}async function zVt(e){const t=await DVt(e),n=Gd().gapi;return sn(n,e,"internal-error"),t.open({where:document.body,url:UVt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jVt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Wd(e,"network-request-failed"),a=Gd().setTimeout(()=>{s(o)},MVt.get());function u(){Gd().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VVt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HVt=500,qVt=600,WVt="_blank",GVt="http://localhost";let o0e=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function YVt(e,t,n,r=HVt,i=qVt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},VVt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Fo().toLowerCase();n&&(a=T6e(l)?WVt:n),x6e(l)&&(t=t||GVt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(x7t(l)&&a!=="_self")return KVt(t||"",a),new o0e(null);const f=window.open(t||"",a,c);sn(f,e,"popup-blocked");try{f.focus()}catch{}return new o0e(f)}function KVt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XVt="__/auth/handler",QVt="emulator/auth/handler",JVt=encodeURIComponent("fac");async function a0e(e,t,n,r,i,s){sn(e.config.authDomain,e,"auth-domain-config-required"),sn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kc,eventId:i};if(t instanceof N6e){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",QUt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof tO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${JVt}=${encodeURIComponent(u)}`:"";return`${ZVt(e)}?${ZI(a).slice(1)}${l}`}function ZVt({config:e}){return e.emulator?JJ(e,QVt):`https://${e.authDomain}/${XVt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="webStorageSupport";let eHt=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V6e,this._completeRedirectFn=xVt,this._overrideRedirectResult=wVt}async _openPopup(t,n,r,i){var s;am((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await a0e(t,n,r,HH(),i);return YVt(t,o,sZ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await a0e(t,n,r,HH(),i);return nVt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(am(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await zVt(t),r=new CVt(t);return n.register("authEvent",i=>(sn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(iU,{type:iU},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[iU];o!==void 0&&n(!!o),om(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kVt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return P6e()||tZ()||YF()}};const tHt=eHt;var u0e="@firebase/auth",l0e="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nHt=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){sn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rHt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function iHt(e){kf(new N0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;sn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k6e(e)},l=new k7t(r,i,s,u);return L7t(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),kf(new N0("auth-internal",t=>{const n=nZ(t.getProvider("auth").getImmediate());return(r=>new nHt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vl(u0e,l0e,rHt(e)),vl(u0e,l0e,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sHt=5*60,oHt=u6e("authIdTokenMaxAge")||sHt;let c0e=null;const aHt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oHt)return;const i=n==null?void 0:n.token;c0e!==i&&(c0e=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function f0e(e=GF()){const t=gy(e,"auth");if(t.isInitialized())return t.getImmediate();const n=M7t(e,{popupRedirectResolver:tHt,persistence:[fVt,Z7t,V6e]}),r=u6e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=aHt(s.toString());G7t(n,o,()=>o(n.currentUser)),W7t(n,a=>o(a))}}const i=o6e("auth");return i&&F7t(n,`http://${i}`),n}function uHt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}$7t({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Wd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",uHt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});iHt("Browser");var lHt="firebase",cHt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vl(lHt,cHt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6e="firebasestorage.googleapis.com",Z6e="storageBucket",fHt=2*60*1e3,dHt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends my{constructor(t,n,r=0){super(sU(t),`Firebase Storage: ${n} (${sU(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return sU(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function sU(e){return"storage/"+e}function aZ(){const e="An unknown error occurred, please check the error payload for server response.";return new ns(ts.UNKNOWN,e)}function hHt(e){return new ns(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function pHt(e){return new ns(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mHt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ns(ts.UNAUTHENTICATED,e)}function gHt(){return new ns(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function yHt(e){return new ns(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function vHt(){return new ns(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _Ht(){return new ns(ts.CANCELED,"User canceled the upload/download.")}function bHt(e){return new ns(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function wHt(e){return new ns(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function EHt(){return new ns(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Z6e+"' property when initializing the app?")}function SHt(){return new ns(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function xHt(){return new ns(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function THt(e){return new ns(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function QH(e){return new ns(ts.INVALID_ARGUMENT,e)}function e4e(){return new ns(ts.APP_DELETED,"The Firebase app was deleted.")}function CHt(e){return new ns(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function J2(e,t){return new ns(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Jx(e){throw new ns(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ba.makeFromUrl(t,n)}catch{return new Ba(t,"")}if(r.path==="")return r;throw wHt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===J6e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<_.length;w++){const x=_[w],E=x.regex.exec(t);if(E){const b=E[x.indices.bucket];let T=E[x.indices.path];T||(T=""),r=new Ba(b,T),x.postModify(r);break}}if(r==null)throw bHt(t);return r}}class AHt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IHt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,f(_)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function OHt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PHt(e){return e!==void 0}function kHt(e){return typeof e=="object"&&!Array.isArray(e)}function uZ(e){return typeof e=="string"||e instanceof String}function d0e(e){return lZ()&&e instanceof Blob}function lZ(){return typeof Blob<"u"}function JH(e,t,n,r){if(r<t)throw QH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw QH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function t4e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(n1||(n1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Ht(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RHt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new Tk(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===n1.NO_ERROR,u=s.getStatus();if(!a||$Ht(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===n1.ABORT;r(!1,new Tk(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new Tk(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());PHt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=aZ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?e4e():_Ht();o(u)}else{const u=vHt();o(u)}};this.canceled_?n(!1,new Tk(!1,null,!0)):this.backoffId_=IHt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&OHt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Tk{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function NHt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function DHt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function MHt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function LHt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function FHt(e,t,n,r,i,s,o=!0){const a=t4e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return MHt(l,t),NHt(l,n),DHt(l,s),LHt(l,r),new RHt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jHt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BHt(...e){const t=jHt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(lZ())return new Blob(e);throw new ns(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UHt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zHt(e){if(typeof atob>"u")throw THt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class oU{constructor(t,n){this.data=t,this.contentType=n||null}}function VHt(e,t){switch(e){case Rd.RAW:return new oU(n4e(t));case Rd.BASE64:case Rd.BASE64URL:return new oU(r4e(e,t));case Rd.DATA_URL:return new oU(qHt(t),WHt(t))}throw aZ()}function n4e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function HHt(e){let t;try{t=decodeURIComponent(e)}catch{throw J2(Rd.DATA_URL,"Malformed data URL.")}return n4e(t)}function r4e(e,t){switch(e){case Rd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw J2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Rd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw J2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zHt(t)}catch(i){throw i.message.includes("polyfill")?i:J2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class i4e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw J2(Rd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=GHt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function qHt(e){const t=new i4e(e);return t.base64?r4e(Rd.BASE64,t.rest):HHt(t.rest)}function WHt(e){return new i4e(e).contentType}function GHt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,n){let r=0,i="";d0e(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(d0e(this.data_)){const r=this.data_,i=UHt(r,t,n);return i===null?null:new yg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new yg(r,!0)}}static getBlob(...t){if(lZ()){const n=t.map(r=>r instanceof yg?r.data_:r);return new yg(BHt.apply(null,n))}else{const n=t.map(o=>uZ(o)?VHt(Rd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new yg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cZ(e){let t;try{t=JSON.parse(e)}catch{return null}return kHt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YHt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function KHt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function s4e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XHt(e,t){return t}class Oa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||XHt}}let Ck=null;function QHt(e){return!uZ(e)||e.length<2?e:s4e(e)}function o4e(){if(Ck)return Ck;const e=[];e.push(new Oa("bucket")),e.push(new Oa("generation")),e.push(new Oa("metageneration")),e.push(new Oa("name","fullPath",!0));function t(s,o){return QHt(o)}const n=new Oa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Oa("size");return i.xform=r,e.push(i),e.push(new Oa("timeCreated")),e.push(new Oa("updated")),e.push(new Oa("md5Hash",null,!0)),e.push(new Oa("cacheControl",null,!0)),e.push(new Oa("contentDisposition",null,!0)),e.push(new Oa("contentEncoding",null,!0)),e.push(new Oa("contentLanguage",null,!0)),e.push(new Oa("contentType",null,!0)),e.push(new Oa("metadata","customMetadata",!0)),Ck=e,Ck}function JHt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ba(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function ZHt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return JHt(r,e),r}function a4e(e,t,n){const r=cZ(t);return r===null?null:ZHt(e,r,n)}function eqt(e,t,n,r){const i=cZ(t);if(i===null||!uZ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=rO(d,n,r),p=t4e({alt:"media",token:l});return h+p})[0]}function tqt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0e="prefixes",p0e="items";function nqt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[h0e])for(const i of n[h0e]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ba(t,s));r.prefixes.push(o)}if(n[p0e])for(const i of n[p0e]){const s=e._makeStorageReference(new Ba(t,i.name));r.items.push(s)}return r}function rqt(e,t,n){const r=cZ(n);return r===null?null:nqt(e,t,r)}class QF{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fZ(e){if(!e)throw aZ()}function iqt(e,t){function n(r,i){const s=a4e(e,i,t);return fZ(s!==null),s}return n}function sqt(e,t){function n(r,i){const s=rqt(e,t,i);return fZ(s!==null),s}return n}function oqt(e,t){function n(r,i){const s=a4e(e,i,t);return fZ(s!==null),eqt(s,i,e.host,e._protocol)}return n}function dZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=gHt():i=mHt():n.getStatus()===402?i=pHt(e.bucket):n.getStatus()===403?i=yHt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function u4e(e){const t=dZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=hHt(e.path)),s.serverResponse=i.serverResponse,s}return n}function aqt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=rO(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new QF(a,u,sqt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=dZ(t),c}function uqt(e,t,n){const r=t.fullServerUrl(),i=rO(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new QF(i,s,oqt(e,n),o);return a.errorHandler=u4e(t),a}function lqt(e,t){const n=t.fullServerUrl(),r=rO(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new QF(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=u4e(t),a}function cqt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function fqt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=cqt(null,t)),r}function dqt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=fqt(t,r,i),c=tqt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=yg.getBlob(f,r,d);if(h===null)throw SHt();const p={name:l.fullPath},m=rO(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new QF(m,g,iqt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=dZ(t),v}class hqt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=n1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=n1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=n1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw Jx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Jx("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Jx("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Jx("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Jx("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class pqt extends hqt{initXhr(){this.xhr_.responseType="text"}}function JF(){return new pqt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(t,n){this._service=t,n instanceof Ba?this._location=n:this._location=Ba.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new $1(t,n)}get root(){const t=new Ba(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s4e(this._location.path)}get storage(){return this._service}get parent(){const t=YHt(this._location.path);if(t===null)return null;const n=new Ba(this._location.bucket,t);return new $1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw CHt(t)}}function mqt(e,t,n){e._throwIfRoot("uploadBytes");const r=dqt(e.storage,e._location,o4e(),new yg(t,!0),n);return e.storage.makeRequestWithTokens(r,JF).then(i=>({metadata:i,ref:e}))}function gqt(e){const t={prefixes:[],items:[]};return l4e(e,t).then(()=>t)}async function l4e(e,t,n){const i=await yqt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await l4e(e,t,i.nextPageToken)}function yqt(e,t){t!=null&&typeof t.maxResults=="number"&&JH("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=aqt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,JF)}function vqt(e){e._throwIfRoot("getDownloadURL");const t=uqt(e.storage,e._location,o4e());return e.storage.makeRequestWithTokens(t,JF).then(n=>{if(n===null)throw xHt();return n})}function _qt(e){e._throwIfRoot("deleteObject");const t=lqt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,JF)}function bqt(e,t){const n=KHt(e._location.path,t),r=new Ba(e._location.bucket,n);return new $1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wqt(e){return/^[A-Za-z]+:\/\//.test(e)}function Eqt(e,t){return new $1(e,t)}function c4e(e,t){if(e instanceof hZ){const n=e;if(n._bucket==null)throw EHt();const r=new $1(n,n._bucket);return t!=null?c4e(r,t):r}else return t!==void 0?bqt(e,t):e}function Sqt(e,t){if(t&&wqt(t)){if(e instanceof hZ)return Eqt(e,t);throw QH("To use ref(service, url), the first argument must be a Storage instance.")}else return c4e(e,t)}function m0e(e,t){const n=t==null?void 0:t[Z6e];return n==null?null:Ba.makeFromBucketSpec(n,e)}function xqt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:jUt(i,e.app.options.projectId))}class hZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=J6e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fHt,this._maxUploadRetryTime=dHt,this._requests=new Set,i!=null?this._bucket=Ba.makeFromBucketSpec(i,this._host):this._bucket=m0e(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ba.makeFromBucketSpec(this._url,t):this._bucket=m0e(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){JH("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){JH("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new $1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new AHt(e4e());{const o=FHt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const g0e="@firebase/storage",y0e="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4e="storage";function aU(e,t,n){return e=Ei(e),mqt(e,t,n)}function Zx(e){return e=Ei(e),gqt(e)}function uU(e){return e=Ei(e),vqt(e)}function v0e(e){return e=Ei(e),_qt(e)}function jc(e,t){return e=Ei(e),Sqt(e,t)}function Tqt(e=GF(),t){e=Ei(e);const r=gy(e,f4e).getImmediate({identifier:t}),i=LUt("storage");return i&&Cqt(r,...i),r}function Cqt(e,t,n,r={}){xqt(e,t,n,r)}function Aqt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new hZ(n,r,i,t,kc)}function Iqt(){kf(new N0(f4e,Aqt,"PUBLIC").setMultipleInstances(!0)),vl(g0e,y0e,""),vl(g0e,y0e,"esm2017")}Iqt();var _0e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var r1,d4e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,T){function A(){}A.prototype=T.prototype,b.D=T.prototype,b.prototype=new A,b.prototype.constructor=b,b.C=function(C,P,N){for(var $=Array(arguments.length-2),M=2;M<arguments.length;M++)$[M-2]=arguments[M];return T.prototype[P].apply(C,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,T,A){A||(A=0);var C=Array(16);if(typeof T=="string")for(var P=0;16>P;++P)C[P]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(P=0;16>P;++P)C[P]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=b.g[0],A=b.g[1],P=b.g[2];var N=b.g[3],$=T+(N^A&(P^N))+C[0]+3614090360&4294967295;T=A+($<<7&4294967295|$>>>25),$=N+(P^T&(A^P))+C[1]+3905402710&4294967295,N=T+($<<12&4294967295|$>>>20),$=P+(A^N&(T^A))+C[2]+606105819&4294967295,P=N+($<<17&4294967295|$>>>15),$=A+(T^P&(N^T))+C[3]+3250441966&4294967295,A=P+($<<22&4294967295|$>>>10),$=T+(N^A&(P^N))+C[4]+4118548399&4294967295,T=A+($<<7&4294967295|$>>>25),$=N+(P^T&(A^P))+C[5]+1200080426&4294967295,N=T+($<<12&4294967295|$>>>20),$=P+(A^N&(T^A))+C[6]+2821735955&4294967295,P=N+($<<17&4294967295|$>>>15),$=A+(T^P&(N^T))+C[7]+4249261313&4294967295,A=P+($<<22&4294967295|$>>>10),$=T+(N^A&(P^N))+C[8]+1770035416&4294967295,T=A+($<<7&4294967295|$>>>25),$=N+(P^T&(A^P))+C[9]+2336552879&4294967295,N=T+($<<12&4294967295|$>>>20),$=P+(A^N&(T^A))+C[10]+4294925233&4294967295,P=N+($<<17&4294967295|$>>>15),$=A+(T^P&(N^T))+C[11]+2304563134&4294967295,A=P+($<<22&4294967295|$>>>10),$=T+(N^A&(P^N))+C[12]+1804603682&4294967295,T=A+($<<7&4294967295|$>>>25),$=N+(P^T&(A^P))+C[13]+4254626195&4294967295,N=T+($<<12&4294967295|$>>>20),$=P+(A^N&(T^A))+C[14]+2792965006&4294967295,P=N+($<<17&4294967295|$>>>15),$=A+(T^P&(N^T))+C[15]+1236535329&4294967295,A=P+($<<22&4294967295|$>>>10),$=T+(P^N&(A^P))+C[1]+4129170786&4294967295,T=A+($<<5&4294967295|$>>>27),$=N+(A^P&(T^A))+C[6]+3225465664&4294967295,N=T+($<<9&4294967295|$>>>23),$=P+(T^A&(N^T))+C[11]+643717713&4294967295,P=N+($<<14&4294967295|$>>>18),$=A+(N^T&(P^N))+C[0]+3921069994&4294967295,A=P+($<<20&4294967295|$>>>12),$=T+(P^N&(A^P))+C[5]+3593408605&4294967295,T=A+($<<5&4294967295|$>>>27),$=N+(A^P&(T^A))+C[10]+38016083&4294967295,N=T+($<<9&4294967295|$>>>23),$=P+(T^A&(N^T))+C[15]+3634488961&4294967295,P=N+($<<14&4294967295|$>>>18),$=A+(N^T&(P^N))+C[4]+3889429448&4294967295,A=P+($<<20&4294967295|$>>>12),$=T+(P^N&(A^P))+C[9]+568446438&4294967295,T=A+($<<5&4294967295|$>>>27),$=N+(A^P&(T^A))+C[14]+3275163606&4294967295,N=T+($<<9&4294967295|$>>>23),$=P+(T^A&(N^T))+C[3]+4107603335&4294967295,P=N+($<<14&4294967295|$>>>18),$=A+(N^T&(P^N))+C[8]+1163531501&4294967295,A=P+($<<20&4294967295|$>>>12),$=T+(P^N&(A^P))+C[13]+2850285829&4294967295,T=A+($<<5&4294967295|$>>>27),$=N+(A^P&(T^A))+C[2]+4243563512&4294967295,N=T+($<<9&4294967295|$>>>23),$=P+(T^A&(N^T))+C[7]+1735328473&4294967295,P=N+($<<14&4294967295|$>>>18),$=A+(N^T&(P^N))+C[12]+2368359562&4294967295,A=P+($<<20&4294967295|$>>>12),$=T+(A^P^N)+C[5]+4294588738&4294967295,T=A+($<<4&4294967295|$>>>28),$=N+(T^A^P)+C[8]+2272392833&4294967295,N=T+($<<11&4294967295|$>>>21),$=P+(N^T^A)+C[11]+1839030562&4294967295,P=N+($<<16&4294967295|$>>>16),$=A+(P^N^T)+C[14]+4259657740&4294967295,A=P+($<<23&4294967295|$>>>9),$=T+(A^P^N)+C[1]+2763975236&4294967295,T=A+($<<4&4294967295|$>>>28),$=N+(T^A^P)+C[4]+1272893353&4294967295,N=T+($<<11&4294967295|$>>>21),$=P+(N^T^A)+C[7]+4139469664&4294967295,P=N+($<<16&4294967295|$>>>16),$=A+(P^N^T)+C[10]+3200236656&4294967295,A=P+($<<23&4294967295|$>>>9),$=T+(A^P^N)+C[13]+681279174&4294967295,T=A+($<<4&4294967295|$>>>28),$=N+(T^A^P)+C[0]+3936430074&4294967295,N=T+($<<11&4294967295|$>>>21),$=P+(N^T^A)+C[3]+3572445317&4294967295,P=N+($<<16&4294967295|$>>>16),$=A+(P^N^T)+C[6]+76029189&4294967295,A=P+($<<23&4294967295|$>>>9),$=T+(A^P^N)+C[9]+3654602809&4294967295,T=A+($<<4&4294967295|$>>>28),$=N+(T^A^P)+C[12]+3873151461&4294967295,N=T+($<<11&4294967295|$>>>21),$=P+(N^T^A)+C[15]+530742520&4294967295,P=N+($<<16&4294967295|$>>>16),$=A+(P^N^T)+C[2]+3299628645&4294967295,A=P+($<<23&4294967295|$>>>9),$=T+(P^(A|~N))+C[0]+4096336452&4294967295,T=A+($<<6&4294967295|$>>>26),$=N+(A^(T|~P))+C[7]+1126891415&4294967295,N=T+($<<10&4294967295|$>>>22),$=P+(T^(N|~A))+C[14]+2878612391&4294967295,P=N+($<<15&4294967295|$>>>17),$=A+(N^(P|~T))+C[5]+4237533241&4294967295,A=P+($<<21&4294967295|$>>>11),$=T+(P^(A|~N))+C[12]+1700485571&4294967295,T=A+($<<6&4294967295|$>>>26),$=N+(A^(T|~P))+C[3]+2399980690&4294967295,N=T+($<<10&4294967295|$>>>22),$=P+(T^(N|~A))+C[10]+4293915773&4294967295,P=N+($<<15&4294967295|$>>>17),$=A+(N^(P|~T))+C[1]+2240044497&4294967295,A=P+($<<21&4294967295|$>>>11),$=T+(P^(A|~N))+C[8]+1873313359&4294967295,T=A+($<<6&4294967295|$>>>26),$=N+(A^(T|~P))+C[15]+4264355552&4294967295,N=T+($<<10&4294967295|$>>>22),$=P+(T^(N|~A))+C[6]+2734768916&4294967295,P=N+($<<15&4294967295|$>>>17),$=A+(N^(P|~T))+C[13]+1309151649&4294967295,A=P+($<<21&4294967295|$>>>11),$=T+(P^(A|~N))+C[4]+4149444226&4294967295,T=A+($<<6&4294967295|$>>>26),$=N+(A^(T|~P))+C[11]+3174756917&4294967295,N=T+($<<10&4294967295|$>>>22),$=P+(T^(N|~A))+C[2]+718787259&4294967295,P=N+($<<15&4294967295|$>>>17),$=A+(N^(P|~T))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+T&4294967295,b.g[1]=b.g[1]+(P+($<<21&4294967295|$>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,T){T===void 0&&(T=b.length);for(var A=T-this.blockSize,C=this.B,P=this.h,N=0;N<T;){if(P==0)for(;N<=A;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<T;)if(C[P++]=b.charCodeAt(N++),P==this.blockSize){i(this,C),P=0;break}}else for(;N<T;)if(C[P++]=b[N++],P==this.blockSize){i(this,C),P=0;break}}this.h=P,this.o+=T},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var T=1;T<b.length-8;++T)b[T]=0;var A=8*this.o;for(T=b.length-8;T<b.length;++T)b[T]=A&255,A/=256;for(this.u(b),b=Array(16),T=A=0;4>T;++T)for(var C=0;32>C;C+=8)b[A++]=this.g[T]>>>C&255;return b};function s(b,T){var A=a;return Object.prototype.hasOwnProperty.call(A,b)?A[b]:A[b]=T(b)}function o(b,T){this.h=T;for(var A=[],C=!0,P=b.length-1;0<=P;P--){var N=b[P]|0;C&&N==T||(A[P]=N,C=!1)}this.g=A}var a={};function u(b){return-128<=b&&128>b?s(b,function(T){return new o([T|0],0>T?-1:0)}):new o([b|0],0>b?-1:0)}function l(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return g(l(-b));for(var T=[],A=1,C=0;b>=A;C++)T[C]=b/A|0,A*=4294967296;return new o(T,0)}function c(b,T){if(b.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b.charAt(0)=="-")return g(c(b.substring(1),T));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(T,8)),C=f,P=0;P<b.length;P+=8){var N=Math.min(8,b.length-P),$=parseInt(b.substring(P,P+N),T);8>N?(N=l(Math.pow(T,N)),C=C.j(N).add(l($))):(C=C.j(A),C=C.add(l($)))}return C}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var b=0,T=1,A=0;A<this.g.length;A++){var C=this.i(A);b+=(0<=C?C:4294967296+C)*T,T*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(p(this))return"0";if(m(this))return"-"+g(this).toString(b);for(var T=l(Math.pow(b,6)),A=this,C="";;){var P=w(A,T).g;A=y(A,P.j(T));var N=((0<A.g.length?A.g[0]:A.h)>>>0).toString(b);if(A=P,p(A))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function p(b){if(b.h!=0)return!1;for(var T=0;T<b.g.length;T++)if(b.g[T]!=0)return!1;return!0}function m(b){return b.h==-1}e.l=function(b){return b=y(this,b),m(b)?-1:p(b)?0:1};function g(b){for(var T=b.g.length,A=[],C=0;C<T;C++)A[C]=~b.g[C];return new o(A,~b.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],C=0,P=0;P<=T;P++){var N=C+(this.i(P)&65535)+(b.i(P)&65535),$=(N>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);C=$>>>16,N&=65535,$&=65535,A[P]=$<<16|N}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(b,T){return b.add(g(T))}e.j=function(b){if(p(this)||p(b))return f;if(m(this))return m(b)?g(this).j(g(b)):g(g(this).j(b));if(m(b))return g(this.j(g(b)));if(0>this.l(h)&&0>b.l(h))return l(this.m()*b.m());for(var T=this.g.length+b.g.length,A=[],C=0;C<2*T;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<b.g.length;P++){var N=this.i(C)>>>16,$=this.i(C)&65535,M=b.i(P)>>>16,B=b.i(P)&65535;A[2*C+2*P]+=$*B,v(A,2*C+2*P),A[2*C+2*P+1]+=N*B,v(A,2*C+2*P+1),A[2*C+2*P+1]+=$*M,v(A,2*C+2*P+1),A[2*C+2*P+2]+=N*M,v(A,2*C+2*P+2)}for(C=0;C<T;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=T;C<2*T;C++)A[C]=0;return new o(A,0)};function v(b,T){for(;(b[T]&65535)!=b[T];)b[T+1]+=b[T]>>>16,b[T]&=65535,T++}function _(b,T){this.g=b,this.h=T}function w(b,T){if(p(T))throw Error("division by zero");if(p(b))return new _(f,f);if(m(b))return T=w(g(b),T),new _(g(T.g),g(T.h));if(m(T))return T=w(b,g(T)),new _(g(T.g),T.h);if(30<b.g.length){if(m(b)||m(T))throw Error("slowDivide_ only works with positive integers.");for(var A=d,C=T;0>=C.l(b);)A=x(A),C=x(C);var P=E(A,1),N=E(C,1);for(C=E(C,2),A=E(A,2);!p(C);){var $=N.add(C);0>=$.l(b)&&(P=P.add(A),N=$),C=E(C,1),A=E(A,1)}return T=y(b,P.j(T)),new _(P,T)}for(P=f;0<=b.l(T);){for(A=Math.max(1,Math.floor(b.m()/T.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=l(A),$=N.j(T);m($)||0<$.l(b);)A-=C,N=l(A),$=N.j(T);p(N)&&(N=d),P=P.add(N),b=y(b,$)}return new _(P,b)}e.A=function(b){return w(this,b).h},e.and=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)&b.i(C);return new o(A,this.h&b.h)},e.or=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)|b.i(C);return new o(A,this.h|b.h)},e.xor=function(b){for(var T=Math.max(this.g.length,b.g.length),A=[],C=0;C<T;C++)A[C]=this.i(C)^b.i(C);return new o(A,this.h^b.h)};function x(b){for(var T=b.g.length+1,A=[],C=0;C<T;C++)A[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(A,b.h)}function E(b,T){var A=T>>5;T%=32;for(var C=b.g.length-A,P=[],N=0;N<C;N++)P[N]=0<T?b.i(N+A)>>>T|b.i(N+A+1)<<32-T:b.i(N+A);return new o(P,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,d4e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,r1=o}).apply(typeof _0e<"u"?_0e:typeof self<"u"?self:typeof window<"u"?window:{});var Ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h4e,p4e,WT,m4e,lR,ZH,g4e,y4e,v4e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(S,R,j){return S==Array.prototype||S==Object.prototype||(S[R]=j.value),S};function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ak=="object"&&Ak];for(var R=0;R<S.length;++R){var j=S[R];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var r=n(this);function i(S,R){if(R)e:{var j=r;S=S.split(".");for(var Q=0;Q<S.length-1;Q++){var _e=S[Q];if(!(_e in j))break e;j=j[_e]}S=S[S.length-1],Q=j[S],R=R(Q),R!=Q&&R!=null&&t(j,S,{configurable:!0,writable:!0,value:R})}}function s(S,R){S instanceof String&&(S+="");var j=0,Q=!1,_e={next:function(){if(!Q&&j<S.length){var Ce=j++;return{value:R(Ce,S[Ce]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(S){return S||function(){return s(this,function(R,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(S){var R=typeof S;return R=R!="object"?R:S?Array.isArray(S)?"array":R:"null",R=="array"||R=="object"&&typeof S.length=="number"}function l(S){var R=typeof S;return R=="object"&&S!=null||R=="function"}function c(S,R,j){return S.call.apply(S.bind,arguments)}function f(S,R,j){if(!S)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),S.apply(R,_e)}}return function(){return S.apply(R,arguments)}}function d(S,R,j){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(S,R){var j=Array.prototype.slice.call(arguments,1);return function(){var Q=j.slice();return Q.push.apply(Q,arguments),S.apply(this,Q)}}function p(S,R){function j(){}j.prototype=R.prototype,S.aa=R.prototype,S.prototype=new j,S.prototype.constructor=S,S.Qb=function(Q,_e,Ce){for(var lt=Array(arguments.length-2),ei=2;ei<arguments.length;ei++)lt[ei-2]=arguments[ei];return R.prototype[_e].apply(Q,lt)}}function m(S){const R=S.length;if(0<R){const j=Array(R);for(let Q=0;Q<R;Q++)j[Q]=S[Q];return j}return[]}function g(S,R){for(let j=1;j<arguments.length;j++){const Q=arguments[j];if(u(Q)){const _e=S.length||0,Ce=Q.length||0;S.length=_e+Ce;for(let lt=0;lt<Ce;lt++)S[_e+lt]=Q[lt]}else S.push(Q)}}class y{constructor(R,j){this.i=R,this.j=j,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function v(S){return/^[\s\xa0]*$/.test(S)}function _(){var S=a.navigator;return S&&(S=S.userAgent)?S:""}function w(S){return w[" "](S),S}w[" "]=function(){};var x=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function E(S,R,j){for(const Q in S)R.call(j,S[Q],Q,S)}function b(S,R){for(const j in S)R.call(void 0,S[j],j,S)}function T(S){const R={};for(const j in S)R[j]=S[j];return R}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(S,R){let j,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(j in Q)S[j]=Q[j];for(let Ce=0;Ce<A.length;Ce++)j=A[Ce],Object.prototype.hasOwnProperty.call(Q,j)&&(S[j]=Q[j])}}function P(S){var R=1;S=S.split(":");const j=[];for(;0<R&&S.length;)j.push(S.shift()),R--;return S.length&&j.push(S.join(":")),j}function N(S){a.setTimeout(()=>{throw S},0)}function $(){var S=Y;let R=null;return S.g&&(R=S.g,S.g=S.g.next,S.g||(S.h=null),R.next=null),R}class M{constructor(){this.h=this.g=null}add(R,j){const Q=B.get();Q.set(R,j),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var B=new y(()=>new z,S=>S.reset());class z{constructor(){this.next=this.g=this.h=null}set(R,j){this.h=R,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let W,U=!1,Y=new M,q=()=>{const S=a.Promise.resolve(void 0);W=()=>{S.then(D)}};var D=()=>{for(var S;S=$();){try{S.h.call(S.g)}catch(j){N(j)}var R=B;R.j(S),100>R.h&&(R.h++,S.next=R.g,R.g=S)}U=!1};function L(){this.s=this.s,this.C=this.C}L.prototype.s=!1,L.prototype.ma=function(){this.s||(this.s=!0,this.N())},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(S,R){this.type=S,this.g=this.target=R,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var S=!1,R=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const j=()=>{};a.addEventListener("test",j,R),a.removeEventListener("test",j,R)}catch{}return S}();function H(S,R){if(G.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S){var j=this.type=S.type,Q=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;if(this.target=S.target||S.srcElement,this.g=R,R=S.relatedTarget){if(x){e:{try{w(R.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(R=null)}}else j=="mouseover"?R=S.fromElement:j=="mouseout"&&(R=S.toElement);this.relatedTarget=R,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=typeof S.pointerType=="string"?S.pointerType:te[S.pointerType]||"",this.state=S.state,this.i=S,S.defaultPrevented&&H.aa.h.call(this)}}p(H,G);var te={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),me=0;function ye(S,R,j,Q,_e){this.listener=S,this.proxy=null,this.src=R,this.type=j,this.capture=!!Q,this.ha=_e,this.key=++me,this.da=this.fa=!1}function de(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function we(S){this.src=S,this.g={},this.h=0}we.prototype.add=function(S,R,j,Q,_e){var Ce=S.toString();S=this.g[Ce],S||(S=this.g[Ce]=[],this.h++);var lt=He(S,R,Q,_e);return-1<lt?(R=S[lt],j||(R.fa=!1)):(R=new ye(R,this.src,Ce,!!Q,_e),R.fa=j,S.push(R)),R};function he(S,R){var j=R.type;if(j in S.g){var Q=S.g[j],_e=Array.prototype.indexOf.call(Q,R,void 0),Ce;(Ce=0<=_e)&&Array.prototype.splice.call(Q,_e,1),Ce&&(de(R),S.g[j].length==0&&(delete S.g[j],S.h--))}}function He(S,R,j,Q){for(var _e=0;_e<S.length;++_e){var Ce=S[_e];if(!Ce.da&&Ce.listener==R&&Ce.capture==!!j&&Ce.ha==Q)return _e}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),Ke={};function je(S,R,j,Q,_e){if(Q&&Q.once)return Qt(S,R,j,Q,_e);if(Array.isArray(R)){for(var Ce=0;Ce<R.length;Ce++)je(S,R[Ce],j,Q,_e);return null}return j=Ht(j),S&&S[le]?S.K(R,j,l(Q)?!!Q.capture:!!Q,_e):De(S,R,j,!1,Q,_e)}function De(S,R,j,Q,_e,Ce){if(!R)throw Error("Invalid event type");var lt=l(_e)?!!_e.capture:!!_e,ei=mt(S);if(ei||(S[Me]=ei=new we(S)),j=ei.add(R,j,Q,lt,Ce),j.proxy)return j;if(Q=qe(),j.proxy=Q,Q.src=S,Q.listener=j,S.addEventListener)V||(_e=lt),_e===void 0&&(_e=!1),S.addEventListener(R.toString(),Q,_e);else if(S.attachEvent)S.attachEvent(Pt(R.toString()),Q);else if(S.addListener&&S.removeListener)S.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return j}function qe(){function S(j){return R.call(S.src,S.listener,j)}const R=ut;return S}function Qt(S,R,j,Q,_e){if(Array.isArray(R)){for(var Ce=0;Ce<R.length;Ce++)Qt(S,R[Ce],j,Q,_e);return null}return j=Ht(j),S&&S[le]?S.L(R,j,l(Q)?!!Q.capture:!!Q,_e):De(S,R,j,!0,Q,_e)}function rt(S,R,j,Q,_e){if(Array.isArray(R))for(var Ce=0;Ce<R.length;Ce++)rt(S,R[Ce],j,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,j=Ht(j),S&&S[le]?(S=S.i,R=String(R).toString(),R in S.g&&(Ce=S.g[R],j=He(Ce,j,Q,_e),-1<j&&(de(Ce[j]),Array.prototype.splice.call(Ce,j,1),Ce.length==0&&(delete S.g[R],S.h--)))):S&&(S=mt(S))&&(R=S.g[R.toString()],S=-1,R&&(S=He(R,j,Q,_e)),(j=-1<S?R[S]:null)&&We(j))}function We(S){if(typeof S!="number"&&S&&!S.da){var R=S.src;if(R&&R[le])he(R.i,S);else{var j=S.type,Q=S.proxy;R.removeEventListener?R.removeEventListener(j,Q,S.capture):R.detachEvent?R.detachEvent(Pt(j),Q):R.addListener&&R.removeListener&&R.removeListener(Q),(j=mt(R))?(he(j,S),j.h==0&&(j.src=null,R[Me]=null)):de(S)}}}function Pt(S){return S in Ke?Ke[S]:Ke[S]="on"+S}function ut(S,R){if(S.da)S=!0;else{R=new H(R,this);var j=S.listener,Q=S.ha||S.src;S.fa&&We(S),S=j.call(Q,R)}return S}function mt(S){return S=S[Me],S instanceof we?S:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(S){return typeof S=="function"?S:(S[vt]||(S[vt]=function(R){return S.handleEvent(R)}),S[vt])}function Xt(){L.call(this),this.i=new we(this),this.M=this,this.F=null}p(Xt,L),Xt.prototype[le]=!0,Xt.prototype.removeEventListener=function(S,R,j,Q){rt(this,S,R,j,Q)};function fe(S,R){var j,Q=S.F;if(Q)for(j=[];Q;Q=Q.F)j.push(Q);if(S=S.M,Q=R.type||R,typeof R=="string")R=new G(R,S);else if(R instanceof G)R.target=R.target||S;else{var _e=R;R=new G(Q,S),C(R,_e)}if(_e=!0,j)for(var Ce=j.length-1;0<=Ce;Ce--){var lt=R.g=j[Ce];_e=xe(lt,Q,!0,R)&&_e}if(lt=R.g=S,_e=xe(lt,Q,!0,R)&&_e,_e=xe(lt,Q,!1,R)&&_e,j)for(Ce=0;Ce<j.length;Ce++)lt=R.g=j[Ce],_e=xe(lt,Q,!1,R)&&_e}Xt.prototype.N=function(){if(Xt.aa.N.call(this),this.i){var S=this.i,R;for(R in S.g){for(var j=S.g[R],Q=0;Q<j.length;Q++)de(j[Q]);delete S.g[R],S.h--}}this.F=null},Xt.prototype.K=function(S,R,j,Q){return this.i.add(String(S),R,!1,j,Q)},Xt.prototype.L=function(S,R,j,Q){return this.i.add(String(S),R,!0,j,Q)};function xe(S,R,j,Q){if(R=S.i.g[String(R)],!R)return!0;R=R.concat();for(var _e=!0,Ce=0;Ce<R.length;++Ce){var lt=R[Ce];if(lt&&!lt.da&&lt.capture==j){var ei=lt.listener,yo=lt.ha||lt.src;lt.fa&&he(S.i,lt),_e=ei.call(yo,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function Le(S,R,j){if(typeof S=="function")j&&(S=d(S,j));else if(S&&typeof S.handleEvent=="function")S=d(S.handleEvent,S);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:a.setTimeout(S,R||0)}function ft(S){S.g=Le(()=>{S.g=null,S.i&&(S.i=!1,ft(S))},S.l);const R=S.h;S.h=null,S.m.apply(null,R)}class Ze extends L{constructor(R,j){super(),this.m=R,this.l=j,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:ft(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ct(S){L.call(this),this.h=S,this.g={}}p(ct,L);var ot=[];function At(S){E(S.g,function(R,j){this.g.hasOwnProperty(j)&&We(R)},S),S.g={}}ct.prototype.N=function(){ct.aa.N.call(this),At(this)},ct.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=a.JSON.stringify,Zt=a.JSON.parse,Jt=class{stringify(S){return a.JSON.stringify(S,void 0)}parse(S){return a.JSON.parse(S,void 0)}};function rr(){}rr.prototype.h=null;function Bn(S){return S.h||(S.h=S.i())}function zo(){}var mr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Di(){G.call(this,"d")}p(Di,G);function zr(){G.call(this,"c")}p(zr,G);var Pr={},Vr=null;function ir(){return Vr=Vr||new Xt}Pr.La="serverreachability";function St(S){G.call(this,Pr.La,S)}p(St,G);function gr(S){const R=ir();fe(R,new St(R))}Pr.STAT_EVENT="statevent";function di(S,R){G.call(this,Pr.STAT_EVENT,S),this.stat=R}p(di,G);function Un(S){const R=ir();fe(R,new di(R,S))}Pr.Ma="timingevent";function hs(S,R){G.call(this,Pr.Ma,S),this.size=R}p(hs,G);function ps(S,R){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){S()},R)}function oe(){this.g=!0}oe.prototype.xa=function(){this.g=!1};function ne(S,R,j,Q,_e,Ce){S.info(function(){if(S.g)if(Ce)for(var lt="",ei=Ce.split("&"),yo=0;yo<ei.length;yo++){var yr=ei[yo].split("=");if(1<yr.length){var Ho=yr[0];yr=yr[1];var qo=Ho.split("_");lt=2<=qo.length&&qo[1]=="type"?lt+(Ho+"="+yr+"&"):lt+(Ho+"=redacted&")}}else lt=null;else lt=Ce;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+R+`
`+j+`
`+lt})}function ue(S,R,j,Q,_e,Ce,lt){S.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+R+`
`+j+`
`+Ce+" "+lt})}function Ee(S,R,j,Q){S.info(function(){return"XMLHTTP TEXT ("+R+"): "+xt(S,j)+(Q?" "+Q:"")})}function Se(S,R){S.info(function(){return"TIMEOUT: "+R})}oe.prototype.info=function(){};function xt(S,R){if(!S.g)return R;if(!R)return null;try{var j=JSON.parse(R);if(j){for(S=0;S<j.length;S++)if(Array.isArray(j[S])){var Q=j[S];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var Ce=_e[0];if(Ce!="noop"&&Ce!="stop"&&Ce!="close")for(var lt=1;lt<_e.length;lt++)_e[lt]=""}}}}return Tn(j)}catch{return R}}var ke={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ft;function It(){}p(It,rr),It.prototype.g=function(){return new XMLHttpRequest},It.prototype.i=function(){return{}},Ft=new It;function jt(S,R,j,Q){this.j=S,this.i=R,this.l=j,this.R=Q||1,this.U=new ct(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new un}function un(){this.i=null,this.g="",this.h=!1}var xr={},qt={};function sr(S,R,j){S.L=1,S.v=Qr(Qe(R)),S.m=j,S.P=!0,en(S,null)}function en(S,R){S.F=Date.now(),Si(S),S.A=Qe(S.v);var j=S.A,Q=S.R;Array.isArray(Q)||(Q=[String(Q)]),sP(j.i,"t",Q),S.C=0,j=S.j.J,S.h=new un,S.g=dse(S.j,j?R:null,!S.m),0<S.O&&(S.M=new Ze(d(S.Y,S,S.g),S.O)),R=S.U,j=S.g,Q=S.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(ot[0]=_e.toString()),_e=ot);for(var Ce=0;Ce<_e.length;Ce++){var lt=je(j,_e[Ce],Q||R.handleEvent,!1,R.h||R);if(!lt)break;R.g[lt.key]=lt}R=S.H?T(S.H):{},S.m?(S.u||(S.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.A,S.u,S.m,R)):(S.u="GET",S.g.ea(S.A,S.u,null,R)),gr(),ne(S.i,S.u,S.A,S.l,S.R,S.m)}jt.prototype.ca=function(S){S=S.target;const R=this.M;R&&Vi(S)==3?R.j():this.Y(S)},jt.prototype.Y=function(S){try{if(S==this.g)e:{const qo=Vi(this.g);var R=this.g.Ba();const H_=this.g.Z();if(!(3>qo)&&(qo!=3||this.g&&(this.h.h||this.g.oa()||Vo(this.g)))){this.J||qo!=4||R==7||(R==8||0>=H_?gr(3):gr(2)),Is(this);var j=this.g.Z();this.X=j;t:if(Yn(this)){var Q=Vo(this.g);S="";var _e=Q.length,Ce=Vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tr(this),Mi(this);var lt="";break t}this.h.i=new a.TextDecoder}for(R=0;R<_e;R++)this.h.h=!0,S+=this.h.i.decode(Q[R],{stream:!(Ce&&R==_e-1)});Q.length=0,this.h.g+=S,this.C=0,lt=this.h.g}else lt=this.g.oa();if(this.o=j==200,ue(this.i,this.u,this.A,this.l,this.R,qo,j),this.o){if(this.T&&!this.K){t:{if(this.g){var ei,yo=this.g;if((ei=yo.g?yo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ei)){var yr=ei;break t}}yr=null}if(j=yr)Ee(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wt(this,j);else{this.o=!1,this.s=3,Un(12),Tr(this),Mi(this);break e}}if(this.P){j=!0;let Dc;for(;!this.J&&this.C<lt.length;)if(Dc=oi(this,lt),Dc==qt){qo==4&&(this.s=4,Un(14),j=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}else if(Dc==xr){this.s=4,Un(15),Ee(this.i,this.l,lt,"[Invalid Chunk]"),j=!1;break}else Ee(this.i,this.l,Dc,null),wt(this,Dc);if(Yn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qo!=4||lt.length!=0||this.h.h||(this.s=1,Un(16),j=!1),this.o=this.o&&j,!j)Ee(this.i,this.l,lt,"[Invalid Chunked Response]"),Tr(this),Mi(this);else if(0<lt.length&&!this.W){this.W=!0;var Ho=this.j;Ho.g==this&&Ho.ba&&!Ho.M&&(Ho.j.info("Great, no buffering proxy detected. Bytes received: "+lt.length),mj(Ho),Ho.M=!0,Un(11))}}else Ee(this.i,this.l,lt,null),wt(this,lt);qo==4&&Tr(this),this.o&&!this.J&&(qo==4?use(this.j,this):(this.o=!1,Si(this)))}else Dy(this.g),j==400&&0<lt.indexOf("Unknown SID")?(this.s=3,Un(12)):(this.s=0,Un(13)),Tr(this),Mi(this)}}}catch{}finally{}};function Yn(S){return S.g?S.u=="GET"&&S.L!=2&&S.j.Ca:!1}function oi(S,R){var j=S.C,Q=R.indexOf(`
`,j);return Q==-1?qt:(j=Number(R.substring(j,Q)),isNaN(j)?xr:(Q+=1,Q+j>R.length?qt:(R=R.slice(Q,Q+j),S.C=Q+j,R)))}jt.prototype.cancel=function(){this.J=!0,Tr(this)};function Si(S){S.S=Date.now()+S.I,xi(S,S.I)}function xi(S,R){if(S.B!=null)throw Error("WatchDog timer not null");S.B=ps(d(S.ba,S),R)}function Is(S){S.B&&(a.clearTimeout(S.B),S.B=null)}jt.prototype.ba=function(){this.B=null;const S=Date.now();0<=S-this.S?(Se(this.i,this.A),this.L!=2&&(gr(),Un(17)),Tr(this),this.s=2,Mi(this)):xi(this,this.S-S)};function Mi(S){S.j.G==0||S.J||use(S.j,S)}function Tr(S){Is(S);var R=S.M;R&&typeof R.ma=="function"&&R.ma(),S.M=null,At(S.U),S.g&&(R=S.g,S.g=null,R.abort(),R.ma())}function wt(S,R){try{var j=S.j;if(j.G!=0&&(j.g==S||K(j.h,S))){if(!S.K&&K(j.h,S)&&j.G==3){try{var Q=j.Da.g.parse(R)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<S.F)dP(j),cP(j);else break e;pj(j),Un(18)}}else j.za=_e[1],0<j.za-j.T&&37500>_e[2]&&j.F&&j.v==0&&!j.C&&(j.C=ps(d(j.Za,j),6e3));if(1>=go(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else My(j,11)}else if((S.K||j.g==S)&&dP(j),!v(R))for(_e=j.Da.g.parse(R),R=0;R<_e.length;R++){let yr=_e[R];if(j.T=yr[0],yr=yr[1],j.G==2)if(yr[0]=="c"){j.K=yr[1],j.ia=yr[2];const Ho=yr[3];Ho!=null&&(j.la=Ho,j.j.info("VER="+j.la));const qo=yr[4];qo!=null&&(j.Aa=qo,j.j.info("SVER="+j.Aa));const H_=yr[5];H_!=null&&typeof H_=="number"&&0<H_&&(Q=1.5*H_,j.L=Q,j.j.info("backChannelRequestTimeoutMs_="+Q)),Q=j;const Dc=S.g;if(Dc){const pP=Dc.g?Dc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pP){var Ce=Q.h;Ce.g||pP.indexOf("spdy")==-1&&pP.indexOf("quic")==-1&&pP.indexOf("h2")==-1||(Ce.j=Ce.l,Ce.g=new Set,Ce.h&&(se(Ce,Ce.h),Ce.h=null))}if(Q.D){const gj=Dc.g?Dc.g.getResponseHeader("X-HTTP-Session-Id"):null;gj&&(Q.ya=gj,Mt(Q.I,Q.D,gj))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-S.F,j.j.info("Handshake RTT: "+j.R+"ms")),Q=j;var lt=S;if(Q.qa=fse(Q,Q.J?Q.ia:null,Q.W),lt.K){Z(Q.h,lt);var ei=lt,yo=Q.L;yo&&(ei.I=yo),ei.B&&(Is(ei),Si(ei)),Q.g=lt}else ose(Q);0<j.i.length&&fP(j)}else yr[0]!="stop"&&yr[0]!="close"||My(j,7);else j.G==3&&(yr[0]=="stop"||yr[0]=="close"?yr[0]=="stop"?My(j,7):z_(j):yr[0]!="noop"&&j.l&&j.l.ta(yr),j.v=0)}}gr(4)}catch{}}var Cn=class{constructor(S,R){this.g=S,this.map=R}};function Dr(S){this.l=S||10,a.PerformanceNavigationTiming?(S=a.performance.getEntriesByType("navigation"),S=0<S.length&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rs(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function go(S){return S.h?1:S.g?S.g.size:0}function K(S,R){return S.h?S.h==R:S.g?S.g.has(R):!1}function se(S,R){S.g?S.g.add(R):S.h=R}function Z(S,R){S.h&&S.h==R?S.h=null:S.g&&S.g.has(R)&&S.g.delete(R)}Dr.prototype.cancel=function(){if(this.i=ge(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ge(S){if(S.h!=null)return S.i.concat(S.h.D);if(S.g!=null&&S.g.size!==0){let R=S.i;for(const j of S.g.values())R=R.concat(j.D);return R}return m(S.i)}function ve(S){if(S.V&&typeof S.V=="function")return S.V();if(typeof Map<"u"&&S instanceof Map||typeof Set<"u"&&S instanceof Set)return Array.from(S.values());if(typeof S=="string")return S.split("");if(u(S)){for(var R=[],j=S.length,Q=0;Q<j;Q++)R.push(S[Q]);return R}R=[],j=0;for(Q in S)R[j++]=S[Q];return R}function pe(S){if(S.na&&typeof S.na=="function")return S.na();if(!S.V||typeof S.V!="function"){if(typeof Map<"u"&&S instanceof Map)return Array.from(S.keys());if(!(typeof Set<"u"&&S instanceof Set)){if(u(S)||typeof S=="string"){var R=[];S=S.length;for(var j=0;j<S;j++)R.push(j);return R}R=[],j=0;for(const Q in S)R[j++]=Q;return R}}}function Oe(S,R){if(S.forEach&&typeof S.forEach=="function")S.forEach(R,void 0);else if(u(S)||typeof S=="string")Array.prototype.forEach.call(S,R,void 0);else for(var j=pe(S),Q=ve(S),_e=Q.length,Ce=0;Ce<_e;Ce++)R.call(void 0,Q[Ce],j&&j[Ce],S)}var Be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ge(S,R){if(S){S=S.split("&");for(var j=0;j<S.length;j++){var Q=S[j].indexOf("="),_e=null;if(0<=Q){var Ce=S[j].substring(0,Q);_e=S[j].substring(Q+1)}else Ce=S[j];R(Ce,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function Ue(S){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,S instanceof Ue){this.h=S.h,Tt(this,S.j),this.o=S.o,this.g=S.g,nn(this,S.s),this.l=S.l;var R=S.i,j=new Fl;j.i=R.i,R.g&&(j.g=new Map(R.g),j.h=R.h),Kn(this,j),this.m=S.m}else S&&(R=String(S).match(Be))?(this.h=!1,Tt(this,R[1]||"",!0),this.o=kr(R[2]||""),this.g=kr(R[3]||"",!0),nn(this,R[4]),this.l=kr(R[5]||"",!0),Kn(this,R[6]||"",!0),this.m=kr(R[7]||"")):(this.h=!1,this.i=new Fl(null,this.h))}Ue.prototype.toString=function(){var S=[],R=this.j;R&&S.push(ms(R,jm,!0),":");var j=this.g;return(j||R=="file")&&(S.push("//"),(R=this.o)&&S.push(ms(R,jm,!0),"@"),S.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&S.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&S.push("/"),S.push(ms(j,j.charAt(0)=="/"?ky:Py,!0))),(j=this.i.toString())&&S.push("?",j),(j=this.m)&&S.push("#",ms(j,gx)),S.join("")};function Qe(S){return new Ue(S)}function Tt(S,R,j){S.j=j?kr(R,!0):R,S.j&&(S.j=S.j.replace(/:$/,""))}function nn(S,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);S.s=R}else S.s=null}function Kn(S,R,j){R instanceof Fl?(S.i=R,yx(S.i,S.h)):(j||(R=ms(R,iP)),S.i=new Fl(R,S.h))}function Mt(S,R,j){S.i.set(R,j)}function Qr(S){return Mt(S,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),S}function kr(S,R){return S?R?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function ms(S,R,j){return typeof S=="string"?(S=encodeURI(S).replace(R,Fh),j&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Fh(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var jm=/[#\/\?@]/g,Py=/[#\?:]/g,ky=/[#\?]/g,iP=/[#\?@]/g,gx=/#/g;function Fl(S,R){this.h=this.g=null,this.i=S||null,this.j=!!R}function Aa(S){S.g||(S.g=new Map,S.h=0,S.i&&Ge(S.i,function(R,j){S.add(decodeURIComponent(R.replace(/\+/g," ")),j)}))}e=Fl.prototype,e.add=function(S,R){Aa(this),this.i=null,S=jh(this,S);var j=this.g.get(S);return j||this.g.set(S,j=[]),j.push(R),this.h+=1,this};function j_(S,R){Aa(S),R=jh(S,R),S.g.has(R)&&(S.i=null,S.h-=S.g.get(R).length,S.g.delete(R))}function B_(S,R){return Aa(S),R=jh(S,R),S.g.has(R)}e.forEach=function(S,R){Aa(this),this.g.forEach(function(j,Q){j.forEach(function(_e){S.call(R,_e,Q,this)},this)},this)},e.na=function(){Aa(this);const S=Array.from(this.g.values()),R=Array.from(this.g.keys()),j=[];for(let Q=0;Q<R.length;Q++){const _e=S[Q];for(let Ce=0;Ce<_e.length;Ce++)j.push(R[Q])}return j},e.V=function(S){Aa(this);let R=[];if(typeof S=="string")B_(this,S)&&(R=R.concat(this.g.get(jh(this,S))));else{S=Array.from(this.g.values());for(let j=0;j<S.length;j++)R=R.concat(S[j])}return R},e.set=function(S,R){return Aa(this),this.i=null,S=jh(this,S),B_(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[R]),this.h+=1,this},e.get=function(S,R){return S?(S=this.V(S),0<S.length?String(S[0]):R):R};function sP(S,R,j){j_(S,R),0<j.length&&(S.i=null,S.g.set(jh(S,R),m(j)),S.h+=j.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],R=Array.from(this.g.keys());for(var j=0;j<R.length;j++){var Q=R[j];const Ce=encodeURIComponent(String(Q)),lt=this.V(Q);for(Q=0;Q<lt.length;Q++){var _e=Ce;lt[Q]!==""&&(_e+="="+encodeURIComponent(String(lt[Q]))),S.push(_e)}}return this.i=S.join("&")};function jh(S,R){return R=String(R),S.j&&(R=R.toLowerCase()),R}function yx(S,R){R&&!S.j&&(Aa(S),S.i=null,S.g.forEach(function(j,Q){var _e=Q.toLowerCase();Q!=_e&&(j_(this,Q),sP(this,_e,j))},S)),S.j=R}function oP(S,R){const j=new oe;if(a.Image){const Q=new Image;Q.onload=h(au,j,"TestLoadImage: loaded",!0,R,Q),Q.onerror=h(au,j,"TestLoadImage: error",!1,R,Q),Q.onabort=h(au,j,"TestLoadImage: abort",!1,R,Q),Q.ontimeout=h(au,j,"TestLoadImage: timeout",!1,R,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=S}else R(!1)}function Bh(S,R){const j=new oe,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),au(j,"TestPingServer: timeout",!1,R)},1e4);fetch(S,{signal:Q.signal}).then(Ce=>{clearTimeout(_e),Ce.ok?au(j,"TestPingServer: ok",!0,R):au(j,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(_e),au(j,"TestPingServer: error",!1,R)})}function au(S,R,j,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(j)}catch{}}function hj(){this.g=new Jt}function aP(S,R,j){const Q=j||"";try{Oe(S,function(_e,Ce){let lt=_e;l(_e)&&(lt=Tn(_e)),R.push(Q+Ce+"="+encodeURIComponent(lt))})}catch(_e){throw R.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function $y(S){this.l=S.Ub||null,this.j=S.eb||!1}p($y,rr),$y.prototype.g=function(){return new Ry(this.l,this.j)},$y.prototype.i=function(S){return function(){return S}}({});function Ry(S,R){Xt.call(this),this.D=S,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ry,Xt),e=Ry.prototype,e.open=function(S,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=S,this.A=R,this.readyState=1,Bm(this)},e.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};S&&(R.body=S),(this.D||a).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ny(this)),this.readyState=0},e.Sa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Bm(this)),this.g&&(this.readyState=3,Bm(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uP(this)}else S.text().then(this.Ra.bind(this),this.ga.bind(this))};function uP(S){S.j.read().then(S.Pa.bind(S)).catch(S.ga.bind(S))}e.Pa=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var R=S.value?S.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!S.done}))&&(this.response=this.responseText+=R)}S.done?Ny(this):Bm(this),this.readyState==3&&uP(this)}},e.Ra=function(S){this.g&&(this.response=this.responseText=S,Ny(this))},e.Qa=function(S){this.g&&(this.response=S,Ny(this))},e.ga=function(){this.g&&Ny(this)};function Ny(S){S.readyState=4,S.l=null,S.j=null,S.v=null,Bm(S)}e.setRequestHeader=function(S,R){this.u.append(S,R)},e.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],R=this.h.entries();for(var j=R.next();!j.done;)j=j.value,S.push(j[0]+": "+j[1]),j=R.next();return S.join(`\r
`)};function Bm(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Ry.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function lP(S){let R="";return E(S,function(j,Q){R+=Q,R+=":",R+=j,R+=`\r
`}),R}function re(S,R,j){e:{for(Q in j){var Q=!1;break e}Q=!0}Q||(j=lP(j),typeof S=="string"?j!=null&&encodeURIComponent(String(j)):Mt(S,R,j))}function ce(S){Xt.call(this),this.headers=new Map,this.o=S||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ce,Xt);var Te=/^https?$/i,Ct=["POST","PUT"];e=ce.prototype,e.Ha=function(S){this.J=S},e.ea=function(S,R,j,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);R=R?R.toUpperCase():"GET",this.D=S,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ft.g(),this.v=this.o?Bn(this.o):Bn(Ft),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(R,String(S),!0),this.B=!1}catch(Ce){Fn(this,Ce);return}if(S=j||"",j=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)j.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Ce of Q.keys())j.set(Ce,Q.get(Ce));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(j.keys()).find(Ce=>Ce.toLowerCase()=="content-type"),_e=a.FormData&&S instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ct,R,void 0))||Q||_e||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ce,lt]of j)this.g.setRequestHeader(Ce,lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zr(this),this.u=!0,this.g.send(S),this.u=!1}catch(Ce){Fn(this,Ce)}};function Fn(S,R){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=R,S.m=5,$r(S),On(S)}function $r(S){S.A||(S.A=!0,fe(S,"complete"),fe(S,"error"))}e.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=S||7,fe(this,"complete"),fe(this,"abort"),On(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),On(this,!0)),ce.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jr(this):this.bb())},e.bb=function(){Jr(this)};function Jr(S){if(S.h&&typeof o<"u"&&(!S.v[1]||Vi(S)!=4||S.Z()!=2)){if(S.u&&Vi(S)==4)Le(S.Ea,0,S);else if(fe(S,"readystatechange"),Vi(S)==4){S.h=!1;try{const lt=S.Z();e:switch(lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var j;if(!(j=R)){var Q;if(Q=lt===0){var _e=String(S.D).match(Be)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!Te.test(_e?_e.toLowerCase():"")}j=Q}if(j)fe(S,"complete"),fe(S,"success");else{S.m=6;try{var Ce=2<Vi(S)?S.g.statusText:""}catch{Ce=""}S.l=Ce+" ["+S.Z()+"]",$r(S)}}finally{On(S)}}}}function On(S,R){if(S.g){Zr(S);const j=S.g,Q=S.v[0]?()=>{}:null;S.g=null,S.v=null,R||fe(S,"ready");try{j.onreadystatechange=Q}catch{}}}function Zr(S){S.I&&(a.clearTimeout(S.I),S.I=null)}e.isActive=function(){return!!this.g};function Vi(S){return S.g?S.g.readyState:0}e.Z=function(){try{return 2<Vi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(S){if(this.g){var R=this.g.responseText;return S&&R.indexOf(S)==0&&(R=R.substring(S.length)),Zt(R)}};function Vo(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.H){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Dy(S){const R={};S=(S.g&&2<=Vi(S)&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<S.length;Q++){if(v(S[Q]))continue;var j=P(S[Q]);const _e=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const Ce=R[_e]||[];R[_e]=Ce,Ce.push(j)}b(R,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Uh(S,R,j){return j&&j.internalChannelParams&&j.internalChannelParams[S]||R}function U_(S){this.Aa=0,this.i=[],this.j=new oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Uh("failFast",!1,S),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Uh("baseRetryDelayMs",5e3,S),this.cb=Uh("retryDelaySeedMs",1e4,S),this.Wa=Uh("forwardChannelMaxRetries",2,S),this.wa=Uh("forwardChannelRequestTimeoutMs",2e4,S),this.pa=S&&S.xmlHttpFactory||void 0,this.Xa=S&&S.Tb||void 0,this.Ca=S&&S.useFetchStreams||!1,this.L=void 0,this.J=S&&S.supportsCrossDomainXhr||!1,this.K="",this.h=new Dr(S&&S.concurrentRequestLimit),this.Da=new hj,this.P=S&&S.fastHandshake||!1,this.O=S&&S.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=S&&S.Rb||!1,S&&S.xa&&this.j.xa(),S&&S.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&S&&S.detectBufferingProxy||!1,this.ja=void 0,S&&S.longPollingTimeout&&0<S.longPollingTimeout&&(this.ja=S.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=U_.prototype,e.la=8,e.G=1,e.connect=function(S,R,j,Q){Un(0),this.W=S,this.H=R||{},j&&Q!==void 0&&(this.H.OSID=j,this.H.OAID=Q),this.F=this.X,this.I=fse(this,null,this.W),fP(this)};function z_(S){if(rse(S),S.G==3){var R=S.U++,j=Qe(S.I);if(Mt(j,"SID",S.K),Mt(j,"RID",R),Mt(j,"TYPE","terminate"),vx(S,j),R=new jt(S,S.j,R),R.L=2,R.v=Qr(Qe(j)),j=!1,a.navigator&&a.navigator.sendBeacon)try{j=a.navigator.sendBeacon(R.v.toString(),"")}catch{}!j&&a.Image&&(new Image().src=R.v,j=!0),j||(R.g=dse(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Si(R)}cse(S)}function cP(S){S.g&&(mj(S),S.g.cancel(),S.g=null)}function rse(S){cP(S),S.u&&(a.clearTimeout(S.u),S.u=null),dP(S),S.h.cancel(),S.s&&(typeof S.s=="number"&&a.clearTimeout(S.s),S.s=null)}function fP(S){if(!rs(S.h)&&!S.s){S.s=!0;var R=S.Ga;W||q(),U||(W(),U=!0),Y.add(R,S),S.B=0}}function HWe(S,R){return go(S.h)>=S.h.j-(S.s?1:0)?!1:S.s?(S.i=R.D.concat(S.i),!0):S.G==1||S.G==2||S.B>=(S.Va?0:S.Wa)?!1:(S.s=ps(d(S.Ga,S,R),lse(S,S.B)),S.B++,!0)}e.Ga=function(S){if(this.s)if(this.s=null,this.G==1){if(!S){this.U=Math.floor(1e5*Math.random()),S=this.U++;const _e=new jt(this,this.j,S);let Ce=this.o;if(this.S&&(Ce?(Ce=T(Ce),C(Ce,this.S)):Ce=this.S),this.m!==null||this.O||(_e.H=Ce,Ce=null),this.P)e:{for(var R=0,j=0;j<this.i.length;j++){t:{var Q=this.i[j];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(R+=Q,4096<R){R=j;break e}if(R===4096||j===this.i.length-1){R=j+1;break e}}R=1e3}else R=1e3;R=sse(this,_e,R),j=Qe(this.I),Mt(j,"RID",S),Mt(j,"CVER",22),this.D&&Mt(j,"X-HTTP-Session-Id",this.D),vx(this,j),Ce&&(this.O?R="headers="+encodeURIComponent(String(lP(Ce)))+"&"+R:this.m&&re(j,this.m,Ce)),se(this.h,_e),this.Ua&&Mt(j,"TYPE","init"),this.P?(Mt(j,"$req",R),Mt(j,"SID","null"),_e.T=!0,sr(_e,j,null)):sr(_e,j,R),this.G=2}}else this.G==3&&(S?ise(this,S):this.i.length==0||rs(this.h)||ise(this))};function ise(S,R){var j;R?j=R.l:j=S.U++;const Q=Qe(S.I);Mt(Q,"SID",S.K),Mt(Q,"RID",j),Mt(Q,"AID",S.T),vx(S,Q),S.m&&S.o&&re(Q,S.m,S.o),j=new jt(S,S.j,j,S.B+1),S.m===null&&(j.H=S.o),R&&(S.i=R.D.concat(S.i)),R=sse(S,j,1e3),j.I=Math.round(.5*S.wa)+Math.round(.5*S.wa*Math.random()),se(S.h,j),sr(j,Q,R)}function vx(S,R){S.H&&E(S.H,function(j,Q){Mt(R,Q,j)}),S.l&&Oe({},function(j,Q){Mt(R,Q,j)})}function sse(S,R,j){j=Math.min(S.i.length,j);var Q=S.l?d(S.l.Na,S.l,S):null;e:{var _e=S.i;let Ce=-1;for(;;){const lt=["count="+j];Ce==-1?0<j?(Ce=_e[0].g,lt.push("ofs="+Ce)):Ce=0:lt.push("ofs="+Ce);let ei=!0;for(let yo=0;yo<j;yo++){let yr=_e[yo].g;const Ho=_e[yo].map;if(yr-=Ce,0>yr)Ce=Math.max(0,_e[yo].g-100),ei=!1;else try{aP(Ho,lt,"req"+yr+"_")}catch{Q&&Q(Ho)}}if(ei){Q=lt.join("&");break e}}}return S=S.i.splice(0,j),R.D=S,Q}function ose(S){if(!S.g&&!S.u){S.Y=1;var R=S.Fa;W||q(),U||(W(),U=!0),Y.add(R,S),S.v=0}}function pj(S){return S.g||S.u||3<=S.v?!1:(S.Y++,S.u=ps(d(S.Fa,S),lse(S,S.v)),S.v++,!0)}e.Fa=function(){if(this.u=null,ase(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var S=2*this.R;this.j.info("BP detection timer enabled: "+S),this.A=ps(d(this.ab,this),S)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Un(10),cP(this),ase(this))};function mj(S){S.A!=null&&(a.clearTimeout(S.A),S.A=null)}function ase(S){S.g=new jt(S,S.j,"rpc",S.Y),S.m===null&&(S.g.H=S.o),S.g.O=0;var R=Qe(S.qa);Mt(R,"RID","rpc"),Mt(R,"SID",S.K),Mt(R,"AID",S.T),Mt(R,"CI",S.F?"0":"1"),!S.F&&S.ja&&Mt(R,"TO",S.ja),Mt(R,"TYPE","xmlhttp"),vx(S,R),S.m&&S.o&&re(R,S.m,S.o),S.L&&(S.g.I=S.L);var j=S.g;S=S.ia,j.L=1,j.v=Qr(Qe(R)),j.m=null,j.P=!0,en(j,S)}e.Za=function(){this.C!=null&&(this.C=null,cP(this),pj(this),Un(19))};function dP(S){S.C!=null&&(a.clearTimeout(S.C),S.C=null)}function use(S,R){var j=null;if(S.g==R){dP(S),mj(S),S.g=null;var Q=2}else if(K(S.h,R))j=R.D,Z(S.h,R),Q=1;else return;if(S.G!=0){if(R.o)if(Q==1){j=R.m?R.m.length:0,R=Date.now()-R.F;var _e=S.B;Q=ir(),fe(Q,new hs(Q,j)),fP(S)}else ose(S);else if(_e=R.s,_e==3||_e==0&&0<R.X||!(Q==1&&HWe(S,R)||Q==2&&pj(S)))switch(j&&0<j.length&&(R=S.h,R.i=R.i.concat(j)),_e){case 1:My(S,5);break;case 4:My(S,10);break;case 3:My(S,6);break;default:My(S,2)}}}function lse(S,R){let j=S.Ta+Math.floor(Math.random()*S.cb);return S.isActive()||(j*=2),j*R}function My(S,R){if(S.j.info("Error code "+R),R==2){var j=d(S.fb,S),Q=S.Xa;const _e=!Q;Q=new Ue(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tt(Q,"https"),Qr(Q),_e?oP(Q.toString(),j):Bh(Q.toString(),j)}else Un(2);S.G=0,S.l&&S.l.sa(R),cse(S),rse(S)}e.fb=function(S){S?(this.j.info("Successfully pinged google.com"),Un(2)):(this.j.info("Failed to ping google.com"),Un(1))};function cse(S){if(S.G=0,S.ka=[],S.l){const R=ge(S.h);(R.length!=0||S.i.length!=0)&&(g(S.ka,R),g(S.ka,S.i),S.h.i.length=0,m(S.i),S.i.length=0),S.l.ra()}}function fse(S,R,j){var Q=j instanceof Ue?Qe(j):new Ue(j);if(Q.g!="")R&&(Q.g=R+"."+Q.g),nn(Q,Q.s);else{var _e=a.location;Q=_e.protocol,R=R?R+"."+_e.hostname:_e.hostname,_e=+_e.port;var Ce=new Ue(null);Q&&Tt(Ce,Q),R&&(Ce.g=R),_e&&nn(Ce,_e),j&&(Ce.l=j),Q=Ce}return j=S.D,R=S.ya,j&&R&&Mt(Q,j,R),Mt(Q,"VER",S.la),vx(S,Q),Q}function dse(S,R,j){if(R&&!S.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=S.Ca&&!S.pa?new ce(new $y({eb:j})):new ce(S.pa),R.Ha(S.J),R}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function hse(){}e=hse.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function hP(){}hP.prototype.g=function(S,R){return new Qu(S,R)};function Qu(S,R){Xt.call(this),this.g=new U_(R),this.l=S,this.h=R&&R.messageUrlParams||null,S=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(S?S["X-WebChannel-Content-Type"]=R.messageContentType:S={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(S?S["X-WebChannel-Client-Profile"]=R.va:S={"X-WebChannel-Client-Profile":R.va}),this.g.S=S,(S=R&&R.Sb)&&!v(S)&&(this.g.m=S),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!v(R)&&(this.g.D=R,S=this.h,S!==null&&R in S&&(S=this.h,R in S&&delete S[R])),this.j=new V_(this)}p(Qu,Xt),Qu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qu.prototype.close=function(){z_(this.g)},Qu.prototype.o=function(S){var R=this.g;if(typeof S=="string"){var j={};j.__data__=S,S=j}else this.u&&(j={},j.__data__=Tn(S),S=j);R.i.push(new Cn(R.Ya++,S)),R.G==3&&fP(R)},Qu.prototype.N=function(){this.g.l=null,delete this.j,z_(this.g),delete this.g,Qu.aa.N.call(this)};function pse(S){Di.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var R=S.__sm__;if(R){e:{for(const j in R){S=j;break e}S=void 0}(this.i=S)&&(S=this.i,R=R!==null&&S in R?R[S]:void 0),this.data=R}else this.data=S}p(pse,Di);function mse(){zr.call(this),this.status=1}p(mse,zr);function V_(S){this.g=S}p(V_,hse),V_.prototype.ua=function(){fe(this.g,"a")},V_.prototype.ta=function(S){fe(this.g,new pse(S))},V_.prototype.sa=function(S){fe(this.g,new mse)},V_.prototype.ra=function(){fe(this.g,"b")},hP.prototype.createWebChannel=hP.prototype.g,Qu.prototype.send=Qu.prototype.o,Qu.prototype.open=Qu.prototype.m,Qu.prototype.close=Qu.prototype.close,v4e=function(){return new hP},y4e=function(){return ir()},g4e=Pr,ZH={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,lR=ke,bt.COMPLETE="complete",m4e=bt,zo.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",Xt.prototype.listen=Xt.prototype.K,WT=zo,p4e=$y,ce.prototype.listenOnce=ce.prototype.L,ce.prototype.getLastError=ce.prototype.Ka,ce.prototype.getLastErrorCode=ce.prototype.Ba,ce.prototype.getStatus=ce.prototype.Z,ce.prototype.getResponseJson=ce.prototype.Oa,ce.prototype.getResponseText=ce.prototype.oa,ce.prototype.send=ce.prototype.ea,ce.prototype.setWithCredentials=ce.prototype.Ha,h4e=ce}).apply(typeof Ak<"u"?Ak:typeof self<"u"?self:typeof window<"u"?window:{});const b0e="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}pu.UNAUTHENTICATED=new pu(null),pu.GOOGLE_CREDENTIALS=new pu("google-credentials-uid"),pu.FIRST_PARTY=new pu("first-party-uid"),pu.MOCK_USER=new pu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let US="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new KJ("@firebase/firestore");function eT(){return R1.logLevel}function $t(e,...t){if(R1.logLevel<=Qn.DEBUG){const n=t.map(pZ);R1.debug(`Firestore (${US}): ${e}`,...n)}}function um(e,...t){if(R1.logLevel<=Qn.ERROR){const n=t.map(pZ);R1.error(`Firestore (${US}): ${e}`,...n)}}function vA(e,...t){if(R1.logLevel<=Qn.WARN){const n=t.map(pZ);R1.warn(`Firestore (${US}): ${e}`,...n)}}function pZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e="Unexpected state"){const t=`FIRESTORE (${US}) INTERNAL ASSERTION FAILED: `+e;throw um(t),new Error(t)}function ci(e,t){e||on()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends my{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oqt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Pqt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(pu.UNAUTHENTICATED))}shutdown(){}}class kqt{constructor(t){this.t=t,this.currentUser=pu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Fp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ci(typeof r.accessToken=="string"),new Oqt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ci(t===null||typeof t=="string"),new pu(t)}}class $qt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=pu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Rqt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new $qt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(pu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Nqt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dqt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,$t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ci(typeof n.token=="string"),this.R=n.token,new Nqt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mqt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Mqt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Ar(e,t){return e<t?-1:e>t?1:0}function AE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new _t(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _t(Fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new _t(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new _t(Fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Bs.fromMillis(Date.now())}static fromDate(t){return Bs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Bs(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Ar(this.nanoseconds,t.nanoseconds):Ar(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new fn(t)}static min(){return new fn(new Bs(0,0))}static max(){return new fn(new Bs(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t,n,r){n===void 0?n=0:n>t.length&&on(),r===void 0?r=t.length-n:r>t.length-n&&on(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return _A.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof _A?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class yi extends _A{construct(t,n,r){return new yi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new _t(Fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new yi(n)}static emptyPath(){return new yi([])}}const Lqt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Io extends _A{construct(t,n,r){return new Io(t,n,r)}static isValidIdentifier(t){return Lqt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Io.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Io(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _t(Fe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new _t(Fe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new _t(Fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _t(Fe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Io(n)}static emptyPath(){return new Io([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.path=t}static fromPath(t){return new Gt(yi.fromString(t))}static fromName(t){return new Gt(yi.fromString(t).popFirst(5))}static empty(){return new Gt(yi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&yi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return yi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Gt(new yi(t.slice()))}}function Fqt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=fn.fromTimestamp(r===1e9?new Bs(n+1,0):new Bs(n,r));return new D0(i,Gt.empty(),t)}function jqt(e){return new D0(e.readTime,e.key,-1)}class D0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new D0(fn.min(),Gt.empty(),-1)}static max(){return new D0(fn.max(),Gt.empty(),-1)}}function Bqt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Gt.comparator(e.documentKey,t.documentKey),n!==0?n:Ar(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uqt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zqt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(e){if(e.code!==Fe.FAILED_PRECONDITION||e.message!==Uqt)throw e;$t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ye((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ye?n:Ye.resolve(n)}catch(n){return Ye.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ye.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ye.reject(n)}static resolve(t){return new Ye((n,r)=>{n(t)})}static reject(t){return new Ye((n,r)=>{r(t)})}static waitFor(t){return new Ye((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Ye.resolve(!1);for(const r of t)n=n.next(i=>i?Ye.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Ye((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Ye((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Vqt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sO(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}mZ.oe=-1;function ZF(e){return e==null}function OM(e){return e===0&&1/e==-1/0}function Hqt(e){return typeof e=="number"&&Number.isInteger(e)&&!OM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0e(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function w_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function b4e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,n){this.comparator=t,this.root=n||xo.EMPTY}insert(t,n){return new zi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,xo.BLACK,null,null))}remove(t){return new zi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ik(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ik(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ik(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ik(this.root,t,this.comparator,!0)}}class Ik{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??xo.RED,this.left=i??xo.EMPTY,this.right=s??xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new xo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return xo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return xo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const t=this.left.check();if(t!==this.right.check())throw on();return t+(this.isRed()?0:1)}}xo.EMPTY=null,xo.RED=!0,xo.BLACK=!1;xo.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(t,n,r,i,s){return this}insert(t,n,r){return new xo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t){this.comparator=t,this.data=new zi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new E0e(this.data.getIterator())}getIteratorFrom(t){return new E0e(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof No)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new No(this.comparator);return n.data=t,n}}class E0e{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t){this.fields=t,t.sort(Io.comparator)}static empty(){return new hl([])}unionWith(t){let n=new No(Io.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new hl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return AE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4e extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new w4e("Invalid base64 string: "+s):s}}(t);return new ba(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ba(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ar(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ba.EMPTY_BYTE_STRING=new ba("");const qqt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function M0(e){if(ci(!!e),typeof e=="string"){let t=0;const n=qqt.exec(e);if(ci(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_s(e.seconds),nanos:_s(e.nanos)}}function _s(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function N1(e){return typeof e=="string"?ba.fromBase64String(e):ba.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function yZ(e){const t=e.mapValue.fields.__previous_value__;return gZ(t)?yZ(t):t}function bA(e){const t=M0(e.mapValue.fields.__local_write_time__.timestampValue);return new Bs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wqt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class wA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new wA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof wA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function D1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?gZ(e)?4:Gqt(e)?9007199254740991:10:on()}function fh(e,t){if(e===t)return!0;const n=D1(e);if(n!==D1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bA(e).isEqual(bA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=M0(i.timestampValue),a=M0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return N1(i.bytesValue).isEqual(N1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return _s(i.geoPointValue.latitude)===_s(s.geoPointValue.latitude)&&_s(i.geoPointValue.longitude)===_s(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _s(i.integerValue)===_s(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=_s(i.doubleValue),a=_s(s.doubleValue);return o===a?OM(o)===OM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return AE(e.arrayValue.values||[],t.arrayValue.values||[],fh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(w0e(o)!==w0e(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!fh(o[u],a[u])))return!1;return!0}(e,t);default:return on()}}function EA(e,t){return(e.values||[]).find(n=>fh(n,t))!==void 0}function IE(e,t){if(e===t)return 0;const n=D1(e),r=D1(t);if(n!==r)return Ar(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ar(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=_s(s.integerValue||s.doubleValue),u=_s(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return S0e(e.timestampValue,t.timestampValue);case 4:return S0e(bA(e),bA(t));case 5:return Ar(e.stringValue,t.stringValue);case 6:return function(s,o){const a=N1(s),u=N1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Ar(a[l],u[l]);if(c!==0)return c}return Ar(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Ar(_s(s.latitude),_s(o.latitude));return a!==0?a:Ar(_s(s.longitude),_s(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=IE(a[l],u[l]);if(c)return c}return Ar(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Ok.mapValue&&o===Ok.mapValue)return 0;if(s===Ok.mapValue)return 1;if(o===Ok.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Ar(u[f],c[f]);if(d!==0)return d;const h=IE(a[u[f]],l[c[f]]);if(h!==0)return h}return Ar(u.length,c.length)}(e.mapValue,t.mapValue);default:throw on()}}function S0e(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ar(e,t);const n=M0(e),r=M0(t),i=Ar(n.seconds,r.seconds);return i!==0?i:Ar(n.nanos,r.nanos)}function OE(e){return eq(e)}function eq(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=M0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return N1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Gt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=eq(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${eq(n.fields[o])}`;return i+"}"}(e.mapValue):on()}function x0e(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function tq(e){return!!e&&"integerValue"in e}function vZ(e){return!!e&&"arrayValue"in e}function T0e(e){return!!e&&"nullValue"in e}function C0e(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cR(e){return!!e&&"mapValue"in e}function Z2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return w_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Z2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Z2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Gqt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this.value=t}static empty(){return new xu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!cR(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Z2(n)}setAll(t){let n=Io.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Z2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());cR(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return fh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];cR(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){w_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new xu(Z2(this.value))}}function E4e(e){const t=[];return w_(e.fields,(n,r)=>{const i=new Io([n]);if(cR(r)){const s=E4e(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new hl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ua(t,0,fn.min(),fn.min(),fn.min(),xu.empty(),0)}static newFoundDocument(t,n,r,i){return new ua(t,1,n,fn.min(),r,i,0)}static newNoDocument(t,n){return new ua(t,2,n,fn.min(),fn.min(),xu.empty(),0)}static newUnknownDocument(t,n){return new ua(t,3,n,fn.min(),fn.min(),xu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(fn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=xu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=xu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ua&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ua(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PM=class{constructor(t,n){this.position=t,this.inclusive=n}};function A0e(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Gt.comparator(Gt.fromName(o.referenceValue),n.key):r=IE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function I0e(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!fh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(t,n="asc"){this.field=t,this.dir=n}}function Yqt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S4e=class{};class Ss extends S4e{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Xqt(t,n,r):n==="array-contains"?new Zqt(t,r):n==="in"?new eWt(t,r):n==="not-in"?new tWt(t,r):n==="array-contains-any"?new nWt(t,r):new Ss(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Qqt(t,r):new Jqt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(IE(n,this.value)):n!==null&&D1(this.value)===D1(n)&&this.matchesComparison(IE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $f extends S4e{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new $f(t,n)}matches(t){return x4e(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function x4e(e){return e.op==="and"}function T4e(e){return Kqt(e)&&x4e(e)}function Kqt(e){for(const t of e.filters)if(t instanceof $f)return!1;return!0}function nq(e){if(e instanceof Ss)return e.field.canonicalString()+e.op.toString()+OE(e.value);if(T4e(e))return e.filters.map(t=>nq(t)).join(",");{const t=e.filters.map(n=>nq(n)).join(",");return`${e.op}(${t})`}}function C4e(e,t){return e instanceof Ss?function(r,i){return i instanceof Ss&&r.op===i.op&&r.field.isEqual(i.field)&&fh(r.value,i.value)}(e,t):e instanceof $f?function(r,i){return i instanceof $f&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&C4e(o,i.filters[a]),!0):!1}(e,t):void on()}function A4e(e){return e instanceof Ss?function(n){return`${n.field.canonicalString()} ${n.op} ${OE(n.value)}`}(e):e instanceof $f?function(n){return n.op.toString()+" {"+n.getFilters().map(A4e).join(" ,")+"}"}(e):"Filter"}class Xqt extends Ss{constructor(t,n,r){super(t,n,r),this.key=Gt.fromName(r.referenceValue)}matches(t){const n=Gt.comparator(t.key,this.key);return this.matchesComparison(n)}}class Qqt extends Ss{constructor(t,n){super(t,"in",n),this.keys=I4e("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Jqt extends Ss{constructor(t,n){super(t,"not-in",n),this.keys=I4e("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function I4e(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Gt.fromName(r.referenceValue))}class Zqt extends Ss{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return vZ(n)&&EA(n.arrayValue,this.value)}}class eWt extends Ss{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&EA(this.value.arrayValue,n)}}class tWt extends Ss{constructor(t,n){super(t,"not-in",n)}matches(t){if(EA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!EA(this.value.arrayValue,n)}}class nWt extends Ss{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!vZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>EA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rWt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function O0e(e,t=null,n=[],r=[],i=null,s=null,o=null){return new rWt(e,t,n,r,i,s,o)}function _Z(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>nq(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ZF(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>OE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>OE(r)).join(",")),t.ue=n}return t.ue}function bZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yqt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!C4e(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!I0e(e.startAt,t.startAt)&&I0e(e.endAt,t.endAt)}function rq(e){return Gt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function iWt(e,t,n,r,i,s,o,a){return new zS(e,t,n,r,i,s,o,a)}function wZ(e){return new zS(e)}function P0e(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function O4e(e){return e.collectionGroup!==null}function eC(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new No(Io.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new SA(s,r))}),n.has(Io.keyField().canonicalString())||t.ce.push(new SA(Io.keyField(),r))}return t.ce}function Yd(e){const t=hn(e);return t.le||(t.le=sWt(t,eC(e))),t.le}function sWt(e,t){if(e.limitType==="F")return O0e(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new SA(i.field,s)});const n=e.endAt?new PM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new PM(e.startAt.position,e.startAt.inclusive):null;return O0e(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function iq(e,t){const n=e.filters.concat([t]);return new zS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function sq(e,t,n){return new zS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function e5(e,t){return bZ(Yd(e),Yd(t))&&e.limitType===t.limitType}function P4e(e){return`${_Z(Yd(e))}|lt:${e.limitType}`}function Ab(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>A4e(i)).join(", ")}]`),ZF(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>OE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>OE(i)).join(",")),`Target(${r})`}(Yd(e))}; limitType=${e.limitType})`}function t5(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Gt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of eC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=A0e(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,eC(r),i)||r.endAt&&!function(o,a,u){const l=A0e(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,eC(r),i))}(e,t)}function oWt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function k4e(e){return(t,n)=>{let r=!1;for(const i of eC(e)){const s=aWt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aWt(e,t,n){const r=e.field.isKeyField()?Gt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?IE(u,l):on()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return on()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){w_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return b4e(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uWt=new zi(Gt.comparator);function lm(){return uWt}const $4e=new zi(Gt.comparator);function GT(...e){let t=$4e;for(const n of e)t=t.insert(n.key,n);return t}function R4e(e){let t=$4e;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function jv(){return tC()}function N4e(){return tC()}function tC(){return new VS(e=>e.toString(),(e,t)=>e.isEqual(t))}const lWt=new zi(Gt.comparator),cWt=new No(Gt.comparator);function zn(...e){let t=cWt;for(const n of e)t=t.add(n);return t}const fWt=new No(Ar);function dWt(){return fWt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D4e(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:OM(t)?"-0":t}}function M4e(e){return{integerValue:""+e}}function hWt(e,t){return Hqt(t)?M4e(t):D4e(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(){this._=void 0}}function pWt(e,t,n){return e instanceof xA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gZ(s)&&(s=yZ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof TA?F4e(e,t):e instanceof CA?j4e(e,t):function(i,s){const o=L4e(i,s),a=k0e(o)+k0e(i.Pe);return tq(o)&&tq(i.Pe)?M4e(a):D4e(i.serializer,a)}(e,t)}function mWt(e,t,n){return e instanceof TA?F4e(e,t):e instanceof CA?j4e(e,t):n}function L4e(e,t){return e instanceof kM?function(r){return tq(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class xA extends n5{}class TA extends n5{constructor(t){super(),this.elements=t}}function F4e(e,t){const n=B4e(t);for(const r of e.elements)n.some(i=>fh(i,r))||n.push(r);return{arrayValue:{values:n}}}class CA extends n5{constructor(t){super(),this.elements=t}}function j4e(e,t){let n=B4e(t);for(const r of e.elements)n=n.filter(i=>!fh(i,r));return{arrayValue:{values:n}}}class kM extends n5{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function k0e(e){return _s(e.integerValue||e.doubleValue)}function B4e(e){return vZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gWt{constructor(t,n){this.field=t,this.transform=n}}function yWt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof TA&&i instanceof TA||r instanceof CA&&i instanceof CA?AE(r.elements,i.elements,fh):r instanceof kM&&i instanceof kM?fh(r.Pe,i.Pe):r instanceof xA&&i instanceof xA}(e.transform,t.transform)}class vWt{constructor(t,n){this.version=t,this.transformResults=n}}class Nu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Nu}static exists(t){return new Nu(void 0,t)}static updateTime(t){return new Nu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fR(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class r5{}function U4e(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new i5(e.key,Nu.none()):new oO(e.key,e.data,Nu.none());{const n=e.data,r=xu.empty();let i=new No(Io.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new yy(e.key,r,new hl(i.toArray()),Nu.none())}}function _Wt(e,t,n){e instanceof oO?function(i,s,o){const a=i.value.clone(),u=R0e(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof yy?function(i,s,o){if(!fR(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=R0e(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(z4e(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function nC(e,t,n,r){return e instanceof oO?function(s,o,a,u){if(!fR(s.precondition,o))return a;const l=s.value.clone(),c=N0e(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof yy?function(s,o,a,u){if(!fR(s.precondition,o))return a;const l=N0e(s.fieldTransforms,u,o),c=o.data;return c.setAll(z4e(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return fR(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function bWt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=L4e(r.transform,i||null);s!=null&&(n===null&&(n=xu.empty()),n.set(r.field,s))}return n||null}function $0e(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&AE(r,i,(s,o)=>yWt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class oO extends r5{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yy extends r5{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function z4e(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function R0e(e,t,n){const r=new Map;ci(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,mWt(o,a,n[i]))}return r}function N0e(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,pWt(s,o,t))}return r}class i5 extends r5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wWt extends r5{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EWt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&_Wt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=nC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=nC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=N4e();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=U4e(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(fn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&AE(this.mutations,t.mutations,(n,r)=>$0e(n,r))&&AE(this.baseMutations,t.baseMutations,(n,r)=>$0e(n,r))}}class EZ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ci(t.mutations.length===r.length);let i=function(){return lWt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new EZ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SWt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xWt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gs,or;function TWt(e){switch(e){default:return on();case Fe.CANCELLED:case Fe.UNKNOWN:case Fe.DEADLINE_EXCEEDED:case Fe.RESOURCE_EXHAUSTED:case Fe.INTERNAL:case Fe.UNAVAILABLE:case Fe.UNAUTHENTICATED:return!1;case Fe.INVALID_ARGUMENT:case Fe.NOT_FOUND:case Fe.ALREADY_EXISTS:case Fe.PERMISSION_DENIED:case Fe.FAILED_PRECONDITION:case Fe.ABORTED:case Fe.OUT_OF_RANGE:case Fe.UNIMPLEMENTED:case Fe.DATA_LOSS:return!0}}function V4e(e){if(e===void 0)return um("GRPC error has no .code"),Fe.UNKNOWN;switch(e){case gs.OK:return Fe.OK;case gs.CANCELLED:return Fe.CANCELLED;case gs.UNKNOWN:return Fe.UNKNOWN;case gs.DEADLINE_EXCEEDED:return Fe.DEADLINE_EXCEEDED;case gs.RESOURCE_EXHAUSTED:return Fe.RESOURCE_EXHAUSTED;case gs.INTERNAL:return Fe.INTERNAL;case gs.UNAVAILABLE:return Fe.UNAVAILABLE;case gs.UNAUTHENTICATED:return Fe.UNAUTHENTICATED;case gs.INVALID_ARGUMENT:return Fe.INVALID_ARGUMENT;case gs.NOT_FOUND:return Fe.NOT_FOUND;case gs.ALREADY_EXISTS:return Fe.ALREADY_EXISTS;case gs.PERMISSION_DENIED:return Fe.PERMISSION_DENIED;case gs.FAILED_PRECONDITION:return Fe.FAILED_PRECONDITION;case gs.ABORTED:return Fe.ABORTED;case gs.OUT_OF_RANGE:return Fe.OUT_OF_RANGE;case gs.UNIMPLEMENTED:return Fe.UNIMPLEMENTED;case gs.DATA_LOSS:return Fe.DATA_LOSS;default:return on()}}(or=gs||(gs={}))[or.OK=0]="OK",or[or.CANCELLED=1]="CANCELLED",or[or.UNKNOWN=2]="UNKNOWN",or[or.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",or[or.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",or[or.NOT_FOUND=5]="NOT_FOUND",or[or.ALREADY_EXISTS=6]="ALREADY_EXISTS",or[or.PERMISSION_DENIED=7]="PERMISSION_DENIED",or[or.UNAUTHENTICATED=16]="UNAUTHENTICATED",or[or.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",or[or.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",or[or.ABORTED=10]="ABORTED",or[or.OUT_OF_RANGE=11]="OUT_OF_RANGE",or[or.UNIMPLEMENTED=12]="UNIMPLEMENTED",or[or.INTERNAL=13]="INTERNAL",or[or.UNAVAILABLE=14]="UNAVAILABLE",or[or.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CWt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AWt=new r1([4294967295,4294967295],0);function D0e(e){const t=CWt().encode(e),n=new d4e;return n.update(t),new Uint8Array(n.digest())}function M0e(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new r1([n,r],0),new r1([i,s],0)]}class SZ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new YT(`Invalid padding: ${n}`);if(r<0)throw new YT(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new YT(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new YT(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=r1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(r1.fromNumber(r)));return i.compare(AWt)===1&&(i=new r1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=D0e(t),[r,i]=M0e(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new SZ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=D0e(t),[r,i]=M0e(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class YT extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,aO.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new s5(fn.min(),i,new zi(Ar),lm(),zn())}}class aO{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new aO(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class H4e{constructor(t,n){this.targetId=t,this.me=n}}class q4e{constructor(t,n,r=ba.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class L0e{constructor(){this.fe=0,this.ge=j0e(),this.pe=ba.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:on()}}),new aO(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=j0e()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ci(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class IWt{constructor(t){this.Le=t,this.Be=new Map,this.ke=lm(),this.qe=F0e(),this.Qe=new zi(Ar)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:on()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(rq(s))if(r===0){const o=new Gt(s.path);this.Ue(n,o,ua.newNoDocument(o,fn.min()))}else ci(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=N1(r).toUint8Array()}catch(u){if(u instanceof w4e)return vA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new SZ(o,i,s)}catch(u){return vA(u instanceof YT?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&rq(a.target)){const u=new Gt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ua.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new s5(t,n,this.Qe,this.ke,r);return this.ke=lm(),this.qe=F0e(),this.Qe=new zi(Ar),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new L0e,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new No(Ar),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||$t("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new L0e),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function F0e(){return new zi(Gt.comparator)}function j0e(){return new zi(Gt.comparator)}const OWt={asc:"ASCENDING",desc:"DESCENDING"},PWt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kWt={and:"AND",or:"OR"};class $Wt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function oq(e,t){return e.useProto3Json||ZF(t)?t:{value:t}}function $M(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function W4e(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function RWt(e,t){return $M(e,t.toTimestamp())}function Kd(e){return ci(!!e),fn.fromTimestamp(function(n){const r=M0(n);return new Bs(r.seconds,r.nanos)}(e))}function xZ(e,t){return aq(e,t).canonicalString()}function aq(e,t){const n=function(i){return new yi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function G4e(e){const t=yi.fromString(e);return ci(J4e(t)),t}function uq(e,t){return xZ(e.databaseId,t.path)}function lU(e,t){const n=G4e(t);if(n.get(1)!==e.databaseId.projectId)throw new _t(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _t(Fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Gt(K4e(n))}function Y4e(e,t){return xZ(e.databaseId,t)}function NWt(e){const t=G4e(e);return t.length===4?yi.emptyPath():K4e(t)}function lq(e){return new yi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function K4e(e){return ci(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function B0e(e,t,n){return{name:uq(e,t),fields:n.value.mapValue.fields}}function DWt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:on()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ci(c===void 0||typeof c=="string"),ba.fromBase64String(c||"")):(ci(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ba.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Fe.UNKNOWN:V4e(l.code);return new _t(c,l.message||"")}(o);n=new q4e(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=lU(e,r.document.name),s=Kd(r.document.updateTime),o=r.document.createTime?Kd(r.document.createTime):fn.min(),a=new xu({mapValue:{fields:r.document.fields}}),u=ua.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new dR(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=lU(e,r.document),s=r.readTime?Kd(r.readTime):fn.min(),o=ua.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dR([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=lU(e,r.document),s=r.removedTargetIds||[];n=new dR([],s,i,null)}else{if(!("filter"in t))return on();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new xWt(i,s),a=r.targetId;n=new H4e(a,o)}}return n}function MWt(e,t){let n;if(t instanceof oO)n={update:B0e(e,t.key,t.value)};else if(t instanceof i5)n={delete:uq(e,t.key)};else if(t instanceof yy)n={update:B0e(e,t.key,t.data),updateMask:qWt(t.fieldMask)};else{if(!(t instanceof wWt))return on();n={verify:uq(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof xA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof TA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof CA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof kM)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw on()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RWt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:on()}(e,t.precondition)),n}function LWt(e,t){return e&&e.length>0?(ci(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Kd(i.updateTime):Kd(s);return o.isEqual(fn.min())&&(o=Kd(s)),new vWt(o,i.transformResults||[])}(n,t))):[]}function FWt(e,t){return{documents:[Y4e(e,t.path)]}}function jWt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Y4e(e,i);const s=function(l){if(l.length!==0)return Q4e($f.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Ib(d.field),direction:zWt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=oq(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function BWt(e){let t=NWt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ci(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=X4e(f);return d instanceof $f&&T4e(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new SA(Ob(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,ZF(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new PM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new PM(h,d)}(n.endAt)),iWt(t,i,o,s,a,"F",u,l)}function UWt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function X4e(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ob(n.unaryFilter.field);return Ss.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ob(n.unaryFilter.field);return Ss.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ob(n.unaryFilter.field);return Ss.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ob(n.unaryFilter.field);return Ss.create(o,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(e):e.fieldFilter!==void 0?function(n){return Ss.create(Ob(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return $f.create(n.compositeFilter.filters.map(r=>X4e(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(e):on()}function zWt(e){return OWt[e]}function VWt(e){return PWt[e]}function HWt(e){return kWt[e]}function Ib(e){return{fieldPath:e.canonicalString()}}function Ob(e){return Io.fromServerFormat(e.fieldPath)}function Q4e(e){return e instanceof Ss?function(n){if(n.op==="=="){if(C0e(n.value))return{unaryFilter:{field:Ib(n.field),op:"IS_NAN"}};if(T0e(n.value))return{unaryFilter:{field:Ib(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(C0e(n.value))return{unaryFilter:{field:Ib(n.field),op:"IS_NOT_NAN"}};if(T0e(n.value))return{unaryFilter:{field:Ib(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ib(n.field),op:VWt(n.op),value:n.value}}}(e):e instanceof $f?function(n){const r=n.getFilters().map(i=>Q4e(i));return r.length===1?r[0]:{compositeFilter:{op:HWt(n.op),filters:r}}}(e):on()}function qWt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function J4e(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t,n,r,i,s=fn.min(),o=fn.min(),a=ba.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new kg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new kg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new kg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WWt{constructor(t){this.ct=t}}function GWt(e){const t=BWt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?sq(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YWt{constructor(){this._n=new KWt}addToCollectionParentIndex(t,n){return this._n.add(n),Ye.resolve()}getCollectionParents(t,n){return Ye.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Ye.resolve()}deleteFieldIndex(t,n){return Ye.resolve()}deleteAllFieldIndexes(t){return Ye.resolve()}createTargetIndexes(t,n){return Ye.resolve()}getDocumentsMatchingTarget(t,n){return Ye.resolve(null)}getIndexType(t,n){return Ye.resolve(0)}getFieldIndexes(t,n){return Ye.resolve([])}getNextCollectionGroupToUpdate(t){return Ye.resolve(null)}getMinOffset(t,n){return Ye.resolve(D0.min())}getMinOffsetFromCollectionGroup(t,n){return Ye.resolve(D0.min())}updateCollectionGroup(t,n,r){return Ye.resolve()}updateIndexEntries(t,n){return Ye.resolve()}}class KWt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new No(yi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new No(yi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new PE(0)}static Ln(){return new PE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XWt{constructor(){this.changes=new VS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ua.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ye.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QWt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JWt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&nC(r.mutation,i,hl.empty(),Bs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=jv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=GT();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=jv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=lm();const o=tC(),a=function(){return tC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof yy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),nC(c.mutation,l,c.mutation.getFieldMask(),Bs.now())):o.set(l.key,hl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new QWt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=tC();let i=new zi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||hl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=N4e();c.forEach(d=>{if(!s.has(d)){const h=U4e(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ye.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Gt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):O4e(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Ye.resolve(jv());let a=-1,u=s;return o.next(l=>Ye.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Ye.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:R4e(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Gt(n)).next(r=>{let i=GT();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=GT();return this.indexManager.getCollectionParents(t,s).next(a=>Ye.forEach(a,u=>{const l=function(f,d){return new zS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ua.newInvalidDocument(c)))});let a=GT();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&nC(c.mutation,l,hl.empty(),Bs.now()),t5(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZWt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Ye.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Kd(i.createTime)}}(n)),Ye.resolve()}getNamedQuery(t,n){return Ye.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:GWt(i.bundledQuery),readTime:Kd(i.readTime)}}(n)),Ye.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eGt{constructor(){this.overlays=new zi(Gt.comparator),this.hr=new Map}getOverlay(t,n){return Ye.resolve(this.overlays.get(n))}getOverlays(t,n){const r=jv();return Ye.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Ye.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Ye.resolve()}getOverlaysForCollection(t,n,r){const i=jv(),s=n.length+1,o=new Gt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ye.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new zi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=jv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=jv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ye.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SWt(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(){this.Pr=new No(Qs.Ir),this.Tr=new No(Qs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Qs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Qs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Gt(new yi([])),r=new Qs(n,t),i=new Qs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Gt(new yi([])),r=new Qs(n,t),i=new Qs(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Qs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Qs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Gt.comparator(t.key,n.key)||Ar(t.pr,n.pr)}static Er(t,n){return Ar(t.pr,n.pr)||Gt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tGt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new No(Qs.Ir)}checkEmpty(t){return Ye.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new EWt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Qs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ye.resolve(o)}lookupMutationBatch(t,n){return Ye.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Ye.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ye.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Qs(n,0),i=new Qs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Ye.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new No(Ar);return n.forEach(i=>{const s=new Qs(i,0),o=new Qs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Ye.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Gt.isDocumentKey(s)||(s=s.child(""));const o=new Qs(new Gt(s),0);let a=new No(Ar);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Ye.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ci(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ye.forEach(n.mutations,i=>{const s=new Qs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Qs(n,0),i=this.wr.firstAfterOrEqual(r);return Ye.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ye.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nGt{constructor(t){this.vr=t,this.docs=function(){return new zi(Gt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ye.resolve(r?r.document.mutableCopy():ua.newInvalidDocument(n))}getEntries(t,n){let r=lm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ua.newInvalidDocument(i))}),Ye.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=lm();const o=n.path,a=new Gt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Bqt(jqt(c),r)<=0||(i.has(c.key)||t5(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ye.resolve(s)}getAllFromCollectionGroup(t,n,r,i){on()}Fr(t,n){return Ye.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new rGt(this)}getSize(t){return Ye.resolve(this.size)}}class rGt extends XWt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Ye.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iGt{constructor(t){this.persistence=t,this.Mr=new VS(n=>_Z(n),bZ),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new TZ,this.targetCount=0,this.Lr=PE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Ye.resolve()}getLastRemoteSnapshotVersion(t){return Ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ye.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ye.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ye.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new PE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Ye.resolve()}updateTargetData(t,n){return this.qn(n),Ye.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ye.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ye.waitFor(s).next(()=>i)}getTargetCount(t){return Ye.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Ye.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Ye.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Ye.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Ye.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Ye.resolve(r)}containsKey(t,n){return Ye.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sGt{constructor(t,n){this.Br={},this.overlays={},this.kr=new mZ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new iGt(this),this.indexManager=new YWt,this.remoteDocumentCache=function(i){return new nGt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new WWt(n),this.$r=new ZWt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new eGt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new tGt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){$t("MemoryPersistence","Starting transaction:",t);const i=new oGt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Ye.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class oGt extends zqt{constructor(t){super(),this.currentSequenceNumber=t}}class CZ{constructor(t){this.persistence=t,this.zr=new TZ,this.jr=null}static Hr(t){return new CZ(t)}get Jr(){if(this.jr)return this.jr;throw on()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ye.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ye.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Ye.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ye.forEach(this.Jr,r=>{const i=Gt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,fn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Ye.or([()=>Ye.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AZ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new AZ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aGt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uGt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return qUt()?8:Vqt(Fo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new aGt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(eT()<=Qn.DEBUG&&$t("QueryEngine","SDK will not create cache indexes for query:",Ab(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ye.resolve()):(eT()<=Qn.DEBUG&&$t("QueryEngine","Query:",Ab(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(eT()<=Qn.DEBUG&&$t("QueryEngine","The SDK decides to create cache indexes for query:",Ab(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Yd(n))):Ye.resolve())}ji(t,n){if(P0e(n))return Ye.resolve(null);let r=Yd(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sq(n,null,"F"),r=Yd(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,sq(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return P0e(n)||i.isEqual(fn.min())?Ye.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Ye.resolve(null):(eT()<=Qn.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ab(n)),this.es(t,o,n,Fqt(i,-1)).next(a=>a))})}Zi(t,n){let r=new No(k4e(t));return n.forEach((i,s)=>{t5(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return eT()<=Qn.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",Ab(n)),this.zi.getDocumentsMatchingQuery(t,n,D0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lGt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new zi(Ar),this.rs=new VS(s=>_Z(s),bZ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new JWt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function cGt(e,t,n,r){return new lGt(e,t,n,r)}async function Z4e(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function fGt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ye.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ci(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function eFe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function dGt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ba.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=lm(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(hGt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(fn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Ye.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function hGt(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=lm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(fn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):$t("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function pGt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function mGt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Ye.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new kg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function cq(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!sO(o))throw o;$t("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function U0e(e,t,n){const r=hn(e);let i=fn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Ye.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Yd(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:fn.min(),n?s:zn())).next(a=>(gGt(r,oWt(t),a),{documents:a,hs:s})))}function gGt(e,t,n){let r=e.ss.get(t)||fn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class z0e{constructor(){this.activeTargetIds=dWt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class yGt{constructor(){this.no=new z0e,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new z0e,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vGt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0e{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){$t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){$t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pk=null;function cU(){return Pk===null?Pk=function(){return 268435456+Math.round(2147483648*Math.random())}():Pk++,"0x"+Pk.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Gt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bGt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="WebChannelConnection";class wGt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=cU(),u=this.vo(n,r.toUriEncodedString());$t("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>($t("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw vA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+US}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=_Gt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=cU();return new Promise((o,a)=>{const u=new h4e;u.setWithCredentials(!0),u.listenOnce(m4e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case lR.NO_ERROR:const c=u.getResponseJson();$t(Zo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case lR.TIMEOUT:$t(Zo,`RPC '${t}' ${s} timed out`),a(new _t(Fe.DEADLINE_EXCEEDED,"Request time out"));break;case lR.HTTP_ERROR:const f=u.getStatus();if($t(Zo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Fe).indexOf(y)>=0?y:Fe.UNKNOWN}(h.status);a(new _t(p,h.message))}else a(new _t(Fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new _t(Fe.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{$t(Zo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);$t(Zo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=cU(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=v4e(),a=y4e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new p4e({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");$t(Zo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new bGt({lo:g=>{h?$t(Zo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||($t(Zo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),$t(Zo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,_=>{try{v(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,WT.EventType.OPEN,()=>{h||($t(Zo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,WT.EventType.CLOSE,()=>{h||(h=!0,$t(Zo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,WT.EventType.ERROR,g=>{h||(h=!0,vA(Zo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new _t(Fe.UNAVAILABLE,"The operation could not be completed")))}),m(f,WT.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ci(!!v);const _=v,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){$t(Zo,`RPC '${t}' stream ${i} received error:`,w);const x=w.status;let E=function(A){const C=gs[A];if(C!==void 0)return V4e(C)}(x),b=w.message;E===void 0&&(E=Fe.INTERNAL,b="Unknown error status: "+x+" with message "+w.message),h=!0,p.po(new _t(E,b)),f.close()}else $t(Zo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,g4e.STAT_EVENT,g=>{g.stat===ZH.PROXY?$t(Zo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===ZH.NOPROXY&&$t(Zo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function fU(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(e){return new $Wt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tFe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&$t("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nFe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new tFe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Fe.RESOURCE_EXHAUSTED?(um(n.toString()),um("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new _t(Fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return $t("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():($t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EGt extends nFe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=DWt(this.serializer,t),r=function(s){if(!("targetChange"in s))return fn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?fn.min():o.readTime?Kd(o.readTime):fn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=lq(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=rq(u)?{documents:FWt(s,u)}:{query:jWt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=W4e(s,o.resumeToken);const l=oq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(fn.min())>0){a.readTime=$M(s,o.snapshotVersion.toTimestamp());const l=oq(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=UWt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=lq(this.serializer),n.removeTarget=t,this.i_(n)}}class SGt extends nFe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ci(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=LWt(t.writeResults,t.commitTime),r=Kd(t.commitTime);return this.listener.A_(r,n)}return ci(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=lq(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>MWt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xGt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new _t(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,aq(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _t(Fe.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,aq(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _t(Fe.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class TGt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(um(n),this.y_=!1):$t("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CGt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{E_(this)&&($t("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await lO(l),l.N_.set("Unknown"),l.M_.delete(4),await uO(l)}(this))})}),this.N_=new TGt(r,i)}}async function uO(e){if(E_(e))for(const t of e.x_)await t(!0)}async function lO(e){for(const t of e.x_)await t(!1)}function rFe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),kZ(n)?PZ(n):HS(n).Xo()&&OZ(n,t))}function IZ(e,t){const n=hn(e),r=HS(n);n.F_.delete(t),r.Xo()&&iFe(n,t),n.F_.size===0&&(r.Xo()?r.n_():E_(n)&&n.N_.set("Unknown"))}function OZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(fn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}HS(e).P_(t)}function iFe(e,t){e.L_.xe(t),HS(e).I_(t)}function PZ(e){e.L_=new IWt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),HS(e).start(),e.N_.w_()}function kZ(e){return E_(e)&&!HS(e).Zo()&&e.F_.size>0}function E_(e){return hn(e).M_.size===0}function sFe(e){e.L_=void 0}async function AGt(e){e.N_.set("Online")}async function IGt(e){e.F_.forEach((t,n)=>{OZ(e,t)})}async function OGt(e,t){sFe(e),kZ(e)?(e.N_.D_(t),PZ(e)):e.N_.set("Unknown")}async function PGt(e,t,n){if(e.N_.set("Online"),t instanceof q4e&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){$t("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await RM(e,r)}else if(t instanceof dR?e.L_.Ke(t):t instanceof H4e?e.L_.He(t):e.L_.We(t),!n.isEqual(fn.min()))try{const r=await eFe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ba.EMPTY_BYTE_STRING,c.snapshotVersion)),iFe(s,u);const f=new kg(c.target,u,l,c.sequenceNumber);OZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){$t("RemoteStore","Failed to raise snapshot:",r),await RM(e,r)}}async function RM(e,t,n){if(!sO(t))throw t;e.M_.add(1),await lO(e),e.N_.set("Offline"),n||(n=()=>eFe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{$t("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await uO(e)})}function oFe(e,t){return t().catch(n=>RM(e,n,t))}async function a5(e){const t=hn(e),n=L0(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;kGt(t);)try{const i=await pGt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,$Gt(t,i)}catch(i){await RM(t,i)}aFe(t)&&uFe(t)}function kGt(e){return E_(e)&&e.v_.length<10}function $Gt(e,t){e.v_.push(t);const n=L0(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function aFe(e){return E_(e)&&!L0(e).Zo()&&e.v_.length>0}function uFe(e){L0(e).start()}async function RGt(e){L0(e).V_()}async function NGt(e){const t=L0(e);for(const n of e.v_)t.d_(n.mutations)}async function DGt(e,t,n){const r=e.v_.shift(),i=EZ.from(r,t,n);await oFe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await a5(e)}async function MGt(e,t){t&&L0(e).E_&&await async function(r,i){if(function(o){return TWt(o)&&o!==Fe.ABORTED}(i.code)){const s=r.v_.shift();L0(r).t_(),await oFe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await a5(r)}}(e,t),aFe(e)&&uFe(e)}async function H0e(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),$t("RemoteStore","RemoteStore received new credentials");const r=E_(n);n.M_.add(3),await lO(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await uO(n)}async function LGt(e,t){const n=hn(e);t?(n.M_.delete(2),await uO(n)):t||(n.M_.add(2),await lO(n),n.N_.set("Unknown"))}function HS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new EGt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:AGt.bind(null,e),To:IGt.bind(null,e),Ao:OGt.bind(null,e),h_:PGt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),kZ(e)?PZ(e):e.N_.set("Unknown")):(await e.B_.stop(),sFe(e))})),e.B_}function L0(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new SGt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:RGt.bind(null,e),Ao:MGt.bind(null,e),R_:NGt.bind(null,e),A_:DGt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await a5(e)):(await e.k_.stop(),e.v_.length>0&&($t("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new $Z(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(Fe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function RZ(e,t){if(um("AsyncQueue",`${t}: ${e}`),sO(e))return new _t(Fe.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Gt.comparator(n.key,r.key):(n,r)=>Gt.comparator(n.key,r.key),this.keyedMap=GT(),this.sortedSet=new zi(this.comparator)}static emptySet(t){return new Ow(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ow)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Ow;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0e{constructor(){this.q_=new zi(Gt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):on():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class kE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new kE(t,n,Ow.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&e5(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FGt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class jGt{constructor(){this.queries=new VS(t=>P4e(t),e5),this.onlineState="Unknown",this.z_=new Set}}async function lFe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new FGt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=RZ(o,`Initialization of query '${Ab(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&NZ(n)}async function cFe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function BGt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&NZ(n)}function UGt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function NZ(e){e.z_.forEach(t=>{t.next()})}var fq,W0e;(W0e=fq||(fq={})).J_="default",W0e.Cache="cache";class fFe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new kE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=kE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==fq.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dFe{constructor(t){this.key=t}}class hFe{constructor(t){this.key=t}}class zGt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=k4e(t),this.Ta=new Ow(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new q0e,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=t5(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new kE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new q0e,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new hFe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new dFe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return kE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class VGt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class HGt{constructor(t){this.key=t,this.wa=!1}}class qGt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new VS(a=>P4e(a),e5),this.Da=new Map,this.Ca=new Set,this.va=new zi(Gt.comparator),this.Fa=new Map,this.Ma=new TZ,this.xa={},this.Oa=new Map,this.Na=PE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function WGt(e,t,n=!0){const r=_Fe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await pFe(r,t,n,!0),i}async function GGt(e,t){const n=_Fe(e);await pFe(n,t,!0,!1)}async function pFe(e,t,n,r){const i=await mGt(e.localStore,Yd(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await YGt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&rFe(e.remoteStore,i),a}async function YGt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let _=g.view.da(y);_.Xi&&(_=await U0e(m.localStore,g.query,!1).then(({documents:b})=>g.view.da(b,_)));const w=v&&v.targetChanges.get(g.targetId),x=v&&v.targetMismatches.get(g.targetId)!=null,E=g.view.applyChanges(_,m.isPrimaryClient,w,x);return Y0e(m,g.targetId,E.fa),E.snapshot}(e,f,d,h);const s=await U0e(e.localStore,t,!0),o=new zGt(t,s.hs),a=o.da(s.documents),u=aO.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Y0e(e,n,l.fa);const c=new VGt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function KGt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!e5(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cq(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&IZ(r.remoteStore,i.targetId),dq(r,i.targetId)}).catch(iO)):(dq(r,i.targetId),await cq(r.localStore,i.targetId,!0))}async function XGt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),IZ(n.remoteStore,r.targetId))}async function QGt(e,t,n){const r=iYt(e);try{const i=await function(o,a){const u=hn(o),l=Bs.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=lm(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const _=bWt(v,f.get(v.key).overlayedDocument);_!=null&&y.push(new yy(v.key,_,E4e(_.value.mapValue),Nu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:R4e(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new zi(Ar)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await cO(r,i.changes),await a5(r.remoteStore)}catch(i){const s=RZ(i,"Failed to persist write");n.reject(s)}}async function mFe(e,t){const n=hn(e);try{const r=await dGt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ci(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ci(o.wa):i.removedDocuments.size>0&&(ci(o.wa),o.wa=!1))}),await cO(n,r,t)}catch(r){await iO(r)}}function G0e(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&NZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function JGt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new zi(Gt.comparator);o=o.insert(s,ua.newNoDocument(s,fn.min()));const a=zn().add(s),u=new s5(fn.min(),new Map,new zi(Ar),o,a);await mFe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),DZ(r)}else await cq(r.localStore,t,!1).then(()=>dq(r,t,n)).catch(iO)}async function ZGt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await fGt(n.localStore,t);yFe(n,r,null),gFe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cO(n,i)}catch(i){await iO(i)}}async function eYt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ci(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);yFe(r,t,n),gFe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await cO(r,i)}catch(i){await iO(i)}}function gFe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function yFe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function dq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||vFe(e,r)})}function vFe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(IZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),DZ(e))}function Y0e(e,t,n){for(const r of n)r instanceof dFe?(e.Ma.addReference(r.key,t),tYt(e,r)):r instanceof hFe?($t("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||vFe(e,r.key)):on()}function tYt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||($t("SyncEngine","New document in limbo: "+n),e.Ca.add(r),DZ(e))}function DZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Gt(yi.fromString(t)),r=e.Na.next();e.Fa.set(r,new HGt(n)),e.va=e.va.insert(n,r),rFe(e.remoteStore,new kg(Yd(wZ(n.path)),r,"TargetPurposeLimboResolution",mZ.oe))}}async function cO(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=AZ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ye.forEach(l,d=>Ye.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ye.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!sO(f))throw f;$t("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function nYt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){$t("SyncEngine","User change. New user:",t.toKey());const r=await Z4e(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new _t(Fe.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await cO(n,r.us)}}function rYt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function _Fe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=mFe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=rYt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=JGt.bind(null,t),t.Sa.h_=BGt.bind(null,t.eventManager),t.Sa.ka=UGt.bind(null,t.eventManager),t}function iYt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZGt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=eYt.bind(null,t),t}class K0e{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=o5(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return cGt(this.persistence,new uGt,t.initialUser,this.serializer)}createPersistence(t){return new sGt(CZ.Hr,this.serializer)}createSharedClientState(t){return new yGt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sYt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>G0e(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nYt.bind(null,this.syncEngine),await LGt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new jGt}()}createDatastore(t){const n=o5(t.databaseInfo.databaseId),r=function(s){return new wGt(s)}(t.databaseInfo);return function(s,o,a,u){return new xGt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new CGt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>G0e(this.syncEngine,n,0),function(){return V0e.D()?new V0e:new vGt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new qGt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);$t("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await lO(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bFe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):um("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oYt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pu.UNAUTHENTICATED,this.clientId=_4e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{$t("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($t("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(Fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=RZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function dU(e,t){e.asyncQueue.verifyOperationInProgress(),$t("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Z4e(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function X0e(e,t){e.asyncQueue.verifyOperationInProgress();const n=await wFe(e);$t("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>H0e(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>H0e(t.remoteStore,i)),e._onlineComponents=t}function aYt(e){return e.name==="FirebaseError"?e.code===Fe.FAILED_PRECONDITION||e.code===Fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function wFe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){$t("FirestoreClient","Using user provided OfflineComponentProvider");try{await dU(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!aYt(n))throw n;vA("Error using user provided cache. Falling back to memory cache: "+n),await dU(e,new K0e)}}else $t("FirestoreClient","Using default OfflineComponentProvider"),await dU(e,new K0e);return e._offlineComponents}async function MZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?($t("FirestoreClient","Using user provided OnlineComponentProvider"),await X0e(e,e._uninitializedComponentsProvider._online)):($t("FirestoreClient","Using default OnlineComponentProvider"),await X0e(e,new sYt))),e._onlineComponents}function uYt(e){return wFe(e).then(t=>t.persistence)}function lYt(e){return MZ(e).then(t=>t.remoteStore)}function cYt(e){return MZ(e).then(t=>t.syncEngine)}async function EFe(e){const t=await MZ(e),n=t.eventManager;return n.onListen=WGt.bind(null,t.syncEngine),n.onUnlisten=KGt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=GGt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=XGt.bind(null,t.syncEngine),n}function fYt(e){return e.asyncQueue.enqueue(async()=>{const t=await uYt(e),n=await lYt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),uO(s)}(n)})}function dYt(e,t,n={}){const r=new Fp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new bFe({next:d=>{o.enqueueAndForget(()=>cFe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new _t(Fe.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new _t(Fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new fFe(wZ(a.path),c,{includeMetadataChanges:!0,ra:!0});return lFe(s,f)}(await EFe(e),e.asyncQueue,t,n,r)),r.promise}function hYt(e,t,n={}){const r=new Fp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new bFe({next:d=>{o.enqueueAndForget(()=>cFe(s,f)),d.fromCache&&u.source==="server"?l.reject(new _t(Fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new fFe(a,c,{includeMetadataChanges:!0,ra:!0});return lFe(s,f)}(await EFe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SFe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0e=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xFe(e,t,n){if(!n)throw new _t(Fe.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pYt(e,t,n,r){if(t===!0&&r===!0)throw new _t(Fe.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function J0e(e){if(!Gt.isDocumentKey(e))throw new _t(Fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Z0e(e){if(Gt.isDocumentKey(e))throw new _t(Fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function u5(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":on()}function Rf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _t(Fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=u5(e);throw new _t(Fe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eye{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new _t(Fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}pYt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SFe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _t(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _t(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _t(Fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class LZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eye({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(Fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new _t(Fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eye(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Pqt;switch(r.type){case"firstParty":return new Rqt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _t(Fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Q0e.get(n);r&&($t("ComponentProvider","Removing Datastore"),Q0e.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new S_(this.firestore,t,this._query)}}class za{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new s0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new za(this.firestore,t,this._key)}}class s0 extends S_{constructor(t,n,r){super(t,n,wZ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new za(this.firestore,null,new Gt(t))}withConverter(t){return new s0(this.firestore,t,this._path)}}function Bc(e,t,...n){if(e=Ei(e),xFe("collection","path",t),e instanceof LZ){const r=yi.fromString(t,...n);return Z0e(r),new s0(e,null,r)}{if(!(e instanceof za||e instanceof s0))throw new _t(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(yi.fromString(t,...n));return Z0e(r),new s0(e.firestore,null,r)}}function Ys(e,t,...n){if(e=Ei(e),arguments.length===1&&(t=_4e.newId()),xFe("doc","path",t),e instanceof LZ){const r=yi.fromString(t,...n);return J0e(r),new za(e,null,new Gt(r))}{if(!(e instanceof za||e instanceof s0))throw new _t(Fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(yi.fromString(t,...n));return J0e(r),new za(e.firestore,e instanceof s0?e.converter:null,new Gt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mYt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new tFe(this,"async_queue_retry"),this.hu=()=>{const n=fU();n&&$t("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=fU();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=fU();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Fp;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!sO(t))throw t;$t("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw um("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=$Z.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&on()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class vy extends LZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new mYt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||TFe(this),this._firestoreClient.terminate()}}function gYt(e,t,n){n||(n="(default)");const r=gy(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(mA(s,t))return i;throw new _t(Fe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new _t(Fe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new _t(Fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function fO(e){return e._firestoreClient||TFe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function TFe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Wqt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,SFe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new oYt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function yYt(e){return fYt(fO(e=Rf(e,vy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t){this._byteString=t}static fromBase64String(t){try{return new $E(ba.fromBase64String(t))}catch(n){throw new _t(Fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new $E(ba.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new _t(Fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Io(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new _t(Fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new _t(Fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ar(this._lat,t._lat)||Ar(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vYt=/^__.*__$/;class _Yt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new yy(t,this.data,this.fieldMask,n,this.fieldTransforms):new oO(t,this.data,n,this.fieldTransforms)}}class CFe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new yy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function AFe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class jZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new jZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return NM(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(AFe(this.fu)&&vYt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class bYt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||o5(t)}Fu(t,n,r,i=!1){return new jZ({fu:t,methodName:n,vu:r,path:Io.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c5(e){const t=e._freezeSettings(),n=o5(e._databaseId);return new bYt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function IFe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);UZ("Data must be an object, but it was:",o,r);const a=kFe(r,o);let u,l;if(s.merge)u=new hl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=hq(t,f,n);if(!o.contains(d))throw new _t(Fe.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);RFe(c,d)||c.push(d)}u=new hl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new _Yt(new xu(a),u,l)}class f5 extends l5{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof f5}}class BZ extends l5{_toFieldTransform(t){return new gWt(t.path,new xA)}isEqual(t){return t instanceof BZ}}function OFe(e,t,n,r){const i=e.Fu(1,t,n);UZ("Data must be an object, but it was:",i,r);const s=[],o=xu.empty();w_(r,(u,l)=>{const c=zZ(t,u,n);l=Ei(l);const f=i.Su(c);if(l instanceof f5)s.push(c);else{const d=hO(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new hl(s);return new CFe(o,a,i.fieldTransforms)}function PFe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[hq(t,r,n)],u=[i];if(s.length%2!=0)throw new _t(Fe.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(hq(t,s[d])),u.push(s[d+1]);const l=[],c=xu.empty();for(let d=a.length-1;d>=0;--d)if(!RFe(l,a[d])){const h=a[d];let p=u[d];p=Ei(p);const m=o.Su(h);if(p instanceof f5)l.push(h);else{const g=hO(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new hl(l);return new CFe(c,f,o.fieldTransforms)}function wYt(e,t,n,r=!1){return hO(n,e.Fu(r?4:3,t))}function hO(e,t){if($Fe(e=Ei(e)))return UZ("Unsupported field value:",t,e),kFe(e,t);if(e instanceof l5)return function(r,i){if(!AFe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=hO(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Ei(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hWt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Bs.fromDate(r);return{timestampValue:$M(i.serializer,s)}}if(r instanceof Bs){const s=new Bs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$M(i.serializer,s)}}if(r instanceof FZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $E)return{bytesValue:W4e(i.serializer,r._byteString)};if(r instanceof za){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xZ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${u5(r)}`)}(e,t)}function kFe(e,t){const n={};return b4e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):w_(e,(r,i)=>{const s=hO(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $Fe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Bs||e instanceof FZ||e instanceof $E||e instanceof za||e instanceof l5)}function UZ(e,t,n){if(!$Fe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=u5(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function hq(e,t,n){if((t=Ei(t))instanceof dO)return t._internalPath;if(typeof t=="string")return zZ(e,t);throw NM("Field path arguments must be of type string or ",e,!1,void 0,n)}const EYt=new RegExp("[~\\*/\\[\\]]");function zZ(e,t,n){if(t.search(EYt)>=0)throw NM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dO(...t.split("."))._internalPath}catch{throw NM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function NM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new _t(Fe.INVALID_ARGUMENT,a+e+u)}function RFe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NFe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new za(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new SYt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(d5("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SYt extends NFe{data(){return super.data()}}function d5(e,t){return typeof t=="string"?zZ(e,t):t instanceof dO?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xYt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new _t(Fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VZ{}class DFe extends VZ{}function tye(e,t,...n){let r=[];t instanceof VZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof HZ).length,a=s.filter(u=>u instanceof h5).length;if(o>1||o>0&&a>0)throw new _t(Fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class h5 extends DFe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new h5(t,n,r)}_apply(t){const n=this._parse(t);return MFe(t._query,n),new S_(t.firestore,t.converter,iq(t._query,n))}_parse(t){const n=c5(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new _t(Fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){rye(f,c);const h=[];for(const p of f)h.push(nye(u,s,p));d={arrayValue:{values:h}}}else d=nye(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||rye(f,c),d=wYt(a,o,f,c==="in"||c==="not-in");return Ss.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function TYt(e,t,n){const r=t,i=d5("where",e);return h5._create(i,r,n)}class HZ extends VZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new HZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$f.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)MFe(o,u),o=iq(o,u)}(t._query,n),new S_(t.firestore,t.converter,iq(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class qZ extends DFe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new qZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new _t(Fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _t(Fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new SA(s,o)}(t._query,this._field,this._direction);return new S_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new zS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function CYt(e,t="asc"){const n=t,r=d5("orderBy",e);return qZ._create(r,n)}function nye(e,t,n){if(typeof(n=Ei(n))=="string"){if(n==="")throw new _t(Fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O4e(t)&&n.indexOf("/")!==-1)throw new _t(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(yi.fromString(n));if(!Gt.isDocumentKey(r))throw new _t(Fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return x0e(e,new Gt(r))}if(n instanceof za)return x0e(e,n._key);throw new _t(Fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${u5(n)}.`)}function rye(e,t){if(!Array.isArray(e)||e.length===0)throw new _t(Fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function MFe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new _t(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _t(Fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class AYt{convertValue(t,n="none"){switch(D1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return _s(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(N1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw on()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return w_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new FZ(_s(t.latitude),_s(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=yZ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bA(t));default:return null}}convertTimestamp(t){const n=M0(t);return new Bs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=yi.fromString(t);ci(J4e(r));const i=new wA(r.get(1),r.get(3)),s=new Gt(r.popFirst(5));return i.isEqual(n)||um(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LFe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class FFe extends NFe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new hR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(d5("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class hR extends FFe{data(t={}){return super.data(t)}}class IYt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new KT(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new hR(this._firestore,this._userDataWriter,r.key,r,new KT(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _t(Fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new hR(i._firestore,i._userDataWriter,a.doc.key,a.doc,new KT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new hR(i._firestore,i._userDataWriter,a.doc.key,a.doc,new KT(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:OYt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function OYt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(e){e=Rf(e,za);const t=Rf(e.firestore,vy);return dYt(fO(t),e._key).then(n=>$Yt(t,e,n))}class jFe extends AYt{constructor(t){super(),this.firestore=t}convertBytes(t){return new $E(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new za(this.firestore,null,n)}}function tT(e){e=Rf(e,S_);const t=Rf(e.firestore,vy),n=fO(t),r=new jFe(t);return xYt(e._query),hYt(n,e._query).then(i=>new IYt(t,r,e,i))}function Uc(e,t,n){e=Rf(e,za);const r=Rf(e.firestore,vy),i=LFe(e.converter,t,n);return p5(r,[IFe(c5(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Nu.none())])}function PYt(e,t,n,...r){e=Rf(e,za);const i=Rf(e.firestore,vy),s=c5(i);let o;return o=typeof(t=Ei(t))=="string"||t instanceof dO?PFe(s,"updateDoc",e._key,t,n,r):OFe(s,"updateDoc",e._key,t),p5(i,[o.toMutation(e._key,Nu.exists(!0))])}function kYt(e){return p5(Rf(e.firestore,vy),[new i5(e._key,Nu.none())])}function p5(e,t){return function(r,i){const s=new Fp;return r.asyncQueue.enqueueAndForget(async()=>QGt(await cYt(r),i,s)),s.promise}(fO(e),t)}function $Yt(e,t,n){const r=n.docs.get(t._key),i=new jFe(e);return new FFe(e,i,t._key,r,new KT(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RYt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=c5(t)}set(t,n,r){this._verifyNotCommitted();const i=pU(t,this._firestore),s=LFe(i.converter,n,r),o=IFe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Nu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=pU(t,this._firestore);let o;return o=typeof(n=Ei(n))=="string"||n instanceof dO?PFe(this._dataReader,"WriteBatch.update",s._key,n,r,i):OFe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Nu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=pU(t,this._firestore);return this._mutations=this._mutations.concat(new i5(n._key,Nu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _t(Fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pU(e,t){if((e=Ei(e)).firestore!==t)throw new _t(Fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function NYt(){return new BZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iye(e){return fO(e=Rf(e,vy)),new RYt(e,t=>p5(e,t))}(function(t,n=!0){(function(i){US=i})(kc),kf(new N0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new vy(new kqt(r.getProvider("auth-internal")),new Dqt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new _t(Fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),vl(b0e,"4.6.3",t),vl(b0e,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DYt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},MYt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},LYt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(DYt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):MYt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new FYt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};let FYt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jYt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function BFe(){try{return typeof indexedDB=="object"}catch{return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BYt="FirebaseError";let UYt=class UFe extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=BYt,Object.setPrototypeOf(this,UFe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zFe.prototype.create)}},zFe=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?zYt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new UYt(i,a,r)}};function zYt(e,t){return e.replace(VYt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const VYt=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HYt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qYt=1e3,WYt=2,GYt=4*60*60*1e3,YYt=.5;function KYt(e,t=qYt,n=WYt){const r=t*Math.pow(n,e),i=Math.round(YYt*r*(Math.random()-.5)*2);return Math.min(GYt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XYt(e){return e&&e._delegate?e._delegate:e}let sye=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mi;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(mi||(mi={}));const QYt={debug:mi.DEBUG,verbose:mi.VERBOSE,info:mi.INFO,warn:mi.WARN,error:mi.ERROR,silent:mi.SILENT},JYt=mi.INFO,ZYt={[mi.DEBUG]:"log",[mi.VERBOSE]:"log",[mi.INFO]:"info",[mi.WARN]:"warn",[mi.ERROR]:"error"},eKt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=ZYt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let tKt=class{constructor(t){this.name=t,this._logLevel=JYt,this._logHandler=eKt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in mi))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?QYt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,mi.DEBUG,...t),this._logHandler(this,mi.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,mi.VERBOSE,...t),this._logHandler(this,mi.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,mi.INFO,...t),this._logHandler(this,mi.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,mi.WARN,...t),this._logHandler(this,mi.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,mi.ERROR,...t),this._logHandler(this,mi.ERROR,...t)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq=new Map,VFe={activated:!1,tokenObservers:[]},nKt={initialized:!1,enabled:!1};function Us(e){return pq.get(e)||Object.assign({},VFe)}function rKt(e,t){return pq.set(e,t),pq.get(e)}function m5(){return nKt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HFe="https://content-firebaseappcheck.googleapis.com/v1",iKt="exchangeRecaptchaV3Token",sKt="exchangeDebugToken",oye={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},oKt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aKt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new DM,await uKt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new DM,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function uKt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lKt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Pu=new zFe("appCheck","AppCheck",lKt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aye(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function WZ(e){if(!Us(e).activated)throw Pu.create("use-before-activation",{appName:e.name})}function qFe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=kk(n)+"d:"),r&&(o+=kk(r)+"h:"),o+=kk(i)+"m:"+kk(s)+"s",o}function kk(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Pu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Pu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Pu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Pu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function cKt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${HFe}/projects/${n}/apps/${r}:${iKt}?key=${i}`,body:{recaptcha_v3_token:t}}}function WFe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${HFe}/projects/${n}/apps/${r}:${sKt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fKt="firebase-app-check-database",dKt=1,AA="firebase-app-check-store",GFe="debug-token";let $k=null;function YFe(){return $k||($k=new Promise((e,t)=>{try{const n=indexedDB.open(fKt,dKt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Pu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(AA,{keyPath:"compositeKey"})}}}catch(n){t(Pu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),$k)}function hKt(e){return XFe(QFe(e))}function pKt(e,t){return KFe(QFe(e),t)}function mKt(e){return KFe(GFe,e)}function gKt(){return XFe(GFe)}async function KFe(e,t){const r=(await YFe()).transaction(AA,"readwrite"),s=r.objectStore(AA).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Pu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function XFe(e){const n=(await YFe()).transaction(AA,"readonly"),i=n.objectStore(AA).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Pu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function QFe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA=new tKt("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yKt(e){if(BFe()){let t;try{t=await hKt(e)}catch(n){IA.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function mU(e,t){return BFe()?pKt(e,t).catch(n=>{IA.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function vKt(){let e;try{e=await gKt()}catch{}if(e)return e;{const t=HYt();return mKt(t).catch(n=>IA.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YZ(){return m5().enabled}async function KZ(){const e=m5();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function _Kt(){const e=jYt(),t=m5();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new DM;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(vKt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bKt={error:"UNKNOWN_ERROR"};function wKt(e){return LYt.encodeString(JSON.stringify(e),!1)}async function mq(e,t=!1){const n=e.app;WZ(n);const r=Us(n);let i=r.token,s;if(i&&!Qb(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Qb(u)?i=u:await mU(n,void 0))}if(!t&&i&&Qb(i))return{token:i.token};let o=!1;if(YZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=GZ(WFe(n,await KZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await mU(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Us(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?IA.warn(u.message):IA.error(u),s=u}let a;return i?s?Qb(i)?a={token:i.token,internalError:s}:a=lye(s):(a={token:i.token},r.token=i,await mU(n,i)):a=lye(s),o&&e5e(n,a),a}async function EKt(e){const t=e.app;WZ(t);const{provider:n}=Us(t);if(YZ()){const r=await KZ(),{token:i}=await GZ(WFe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function JFe(e,t,n,r){const{app:i}=e,s=Us(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Qb(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),uye(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>uye(e))}function ZFe(e,t){const n=Us(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function uye(e){const{app:t}=e,n=Us(t);let r=n.tokenRefresher;r||(r=SKt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function SKt(e){const{app:t}=e;return new aKt(async()=>{const n=Us(t);let r;if(n.token?r=await mq(e,!0):r=await mq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Us(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},oye.RETRIAL_MIN_WAIT,oye.RETRIAL_MAX_WAIT)}function e5e(e,t){const n=Us(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Qb(e){return e.expireTimeMillis-Date.now()>0}function lye(e){return{token:wKt(bKt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xKt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Us(this.app);for(const n of t)ZFe(this.app,n.next);return Promise.resolve()}}function TKt(e,t){return new xKt(e,t)}function CKt(e){return{getToken:t=>mq(e,t),getLimitedUseToken:()=>EKt(e),addTokenListener:t=>JFe(e,"INTERNAL",t),removeTokenListener:t=>ZFe(e.app,t)}}const AKt="@firebase/app-check",IKt="0.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OKt="https://www.google.com/recaptcha/api.js";function PKt(e,t){const n=new DM,r=Us(e);r.reCAPTCHAState={initialized:n};const i=kKt(e),s=aye(!1);return s?cye(e,t,s,i,n):NKt(()=>{const o=aye(!1);if(!o)throw new Error("no recaptcha");cye(e,t,o,i,n)}),n.promise}function cye(e,t,n,r,i){n.ready(()=>{RKt(e,t,n,r),i.resolve(n)})}function kKt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function $Kt(e){WZ(e);const n=await Us(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Us(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function RKt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Us(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Us(e).reCAPTCHAState.succeeded=!1}}),s=Us(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function NKt(e){const t=document.createElement("script");t.src=OKt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;MKt(this._throttleData);const i=await $Kt(this._app).catch(o=>{throw Pu.create("recaptcha-error")});if(!(!((t=Us(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Pu.create("recaptcha-error");let s;try{s=await GZ(cKt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=DKt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Pu.create("throttled",{time:qFe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=gy(t,"heartbeat"),PKt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof XZ?this._siteKey===t._siteKey:!1}}function DKt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+oKt,httpStatus:e};{const n=t?t.backoffCount:0,r=KYt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function MKt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Pu.create("throttled",{time:qFe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LKt(e=GF(),t){e=XYt(e);const n=gy(e,"app-check");if(m5().initialized||_Kt(),YZ()&&KZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Pu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return FKt(e,t.provider,t.isTokenAutoRefreshEnabled),Us(e).isTokenAutoRefreshEnabled&&JFe(r,"INTERNAL",()=>{}),r}function FKt(e,t,n){const r=rKt(e,Object.assign({},VFe));r.activated=!0,r.provider=t,r.cachedTokenPromise=yKt(e).then(i=>(i&&Qb(i)&&(r.token=i,e5e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const jKt="app-check",fye="app-check-internal";function BKt(){kf(new sye(jKt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return TKt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(fye).initialize()})),kf(new sye(fye,e=>{const t=e.getProvider("app-check").getImmediate();return CKt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),vl(AKt,IKt)}BKt();var dye={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UKt=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},zKt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},VKt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(UKt(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):zKt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new HKt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class HKt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const t5e=function(e){try{return VKt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qKt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WKt=()=>qKt().__FIREBASE_DEFAULTS__,GKt=()=>{if(typeof process>"u"||typeof dye>"u")return;const e=dye.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},YKt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&t5e(e[1]);return t&&JSON.parse(t)},n5e=()=>{try{return WKt()||GKt()||YKt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},KKt=e=>{var t,n;return(n=(t=n5e())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},r5e=e=>{var t;return(t=n5e())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XKt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wa())}function QKt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function JKt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZKt(){const e=wa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eXt="FirebaseError";class qS extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=eXt,Object.setPrototypeOf(this,qS.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,g5.prototype.create)}}class g5{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?tXt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qS(i,a,r)}}function tXt(e,t){return e.replace(nXt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const nXt=/\{\$([^}]+)}/g;function rXt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function i5e(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(hye(s)&&hye(o)){if(!i5e(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hye(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function iXt(e,t){const n=new sXt(e,t);return n.subscribe.bind(n)}class sXt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oXt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=gU),i.error===void 0&&(i.error=gU),i.complete===void 0&&(i.complete=gU);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oXt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function gU(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ti;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ti||(ti={}));const aXt={debug:ti.DEBUG,verbose:ti.VERBOSE,info:ti.INFO,warn:ti.WARN,error:ti.ERROR,silent:ti.SILENT},uXt=ti.INFO,lXt={[ti.DEBUG]:"log",[ti.VERBOSE]:"log",[ti.INFO]:"info",[ti.WARN]:"warn",[ti.ERROR]:"error"},cXt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=lXt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class fXt{constructor(t){this.name=t,this._logLevel=uXt,this._logHandler=cXt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ti))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?aXt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ti.DEBUG,...t),this._logHandler(this,ti.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ti.VERBOSE,...t),this._logHandler(this,ti.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ti.INFO,...t),this._logHandler(this,ti.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ti.WARN,...t),this._logHandler(this,ti.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ti.ERROR,...t),this._logHandler(this,ti.ERROR,...t)}}class pye{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}function s5e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dXt=s5e,o5e=new g5("auth","Firebase",s5e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new fXt("@firebase/auth");function hXt(e,...t){MM.logLevel<=ti.WARN&&MM.warn(`Auth (${kc}): ${e}`,...t)}function pR(e,...t){MM.logLevel<=ti.ERROR&&MM.error(`Auth (${kc}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(e,...t){throw QZ(e,...t)}function Xd(e,...t){return QZ(e,...t)}function a5e(e,t,n){const r=Object.assign(Object.assign({},dXt()),{[t]:n});return new g5("auth","Firebase",r).create(t,{appName:e.name})}function pXt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&dh(e,"argument-error"),a5e(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function QZ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return o5e.create(e,...t)}function dn(e,t,...n){if(!e)throw QZ(t,...n)}function Tp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pR(t),new Error(t)}function cm(e,t){e||Tp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gq(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function mXt(){return mye()==="http:"||mye()==="https:"}function mye(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gXt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mXt()||QKt()||"connection"in navigator)?navigator.onLine:!0}function yXt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(t,n){this.shortDelay=t,this.longDelay=n,cm(n>t,"Short delay should be less than long delay!"),this.isMobile=XKt()||JKt()}get(){return gXt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JZ(e,t){cm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vXt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Xt=new mO(3e4,6e4);function y5(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function GS(e,t,n,r,i={}){return l5e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=pO(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),u5e.fetch()(f5e(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function l5e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},vXt),t);try{const i=new bXt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Rk(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rk(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Rk(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw Rk(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw a5e(e,c,l);dh(e,c)}}catch(i){if(i instanceof qS)throw i;dh(e,"network-request-failed",{message:String(i)})}}async function c5e(e,t,n,r,i={}){const s=await GS(e,t,n,r,i);return"mfaPendingCredential"in s&&dh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function f5e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?JZ(e.config,i):`${e.config.apiScheme}://${i}`}class bXt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xd(this.auth,"network-request-failed")),_Xt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wXt(e,t){return GS(e,"POST","/v1/accounts:delete",t)}async function EXt(e,t){return GS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function SXt(e,t=!1){const n=WS(e),r=await n.getIdToken(t),i=ZZ(r);dn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:rC(yU(i.auth_time)),issuedAtTime:rC(yU(i.iat)),expirationTime:rC(yU(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function yU(e){return Number(e)*1e3}function ZZ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return pR("JWT malformed, contained fewer than 3 sections"),null;try{const i=t5e(n);return i?JSON.parse(i):(pR("Failed to decode base64 JWT payload"),null)}catch(i){return pR("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xXt(e){const t=ZZ(e);return dn(t,"internal-error"),dn(typeof t.exp<"u","internal-error"),dn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof qS&&TXt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function TXt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CXt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5e{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rC(this.lastLoginAt),this.creationTime=rC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await OA(e,EXt(n,{idToken:r}));dn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?OXt(s.providerUserInfo):[],a=IXt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new d5e(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function AXt(e){const t=WS(e);await LM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function IXt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function OXt(e){return e.map(t=>{var{providerId:n}=t,r=IS(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PXt(e,t){const n=await l5e(e,{},async()=>{const r=pO({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=f5e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",u5e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kXt(e,t){return GS(e,"POST","/v2/accounts:revokeToken",y5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){dn(t.idToken,"internal-error"),dn(typeof t.idToken<"u","internal-error"),dn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):xXt(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return dn(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await PXt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new PA;return r&&(dn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(dn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(dn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new PA,this.toJSON())}_performRefresh(){return Tp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(e,t){dn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class i1{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=IS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new CXt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new d5e(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await OA(this,this.stsTokenManager.getToken(this.auth,t));return dn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return SXt(this,t)}reload(){return AXt(this)}_assign(t){this!==t&&(dn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new i1(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){dn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await LM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await OA(this,wXt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:b}=n;dn(_&&b,t,"internal-error");const T=PA.fromJSON(this.name,b);dn(typeof _=="string",t,"internal-error"),Ym(f,t.name),Ym(d,t.name),dn(typeof w=="boolean",t,"internal-error"),dn(typeof x=="boolean",t,"internal-error"),Ym(h,t.name),Ym(p,t.name),Ym(m,t.name),Ym(g,t.name),Ym(y,t.name),Ym(v,t.name);const A=new i1({uid:_,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:T,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(A.providerData=E.map(C=>Object.assign({},C))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new PA;i.updateFromServerResponse(n);const s=new i1({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await LM(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gye=new Map;function Cp(e){cm(e instanceof Function,"Expected a class definition");let t=gye.get(e);return t?(cm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,gye.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}h5e.type="NONE";const yye=h5e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(e,t,n){return`firebase:${e}:${t}:${n}`}class Pw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mR(this.userKey,i.apiKey,s),this.fullPersistenceKey=mR("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?i1._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Pw(Cp(yye),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Cp(yye);const o=mR(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=i1._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Pw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Pw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vye(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(g5e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(p5e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(v5e(t))return"Blackberry";if(_5e(t))return"Webos";if(eee(t))return"Safari";if((t.includes("chrome/")||m5e(t))&&!t.includes("edge/"))return"Chrome";if(y5e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function p5e(e=wa()){return/firefox\//i.test(e)}function eee(e=wa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function m5e(e=wa()){return/crios\//i.test(e)}function g5e(e=wa()){return/iemobile/i.test(e)}function y5e(e=wa()){return/android/i.test(e)}function v5e(e=wa()){return/blackberry/i.test(e)}function _5e(e=wa()){return/webos/i.test(e)}function v5(e=wa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $Xt(e=wa()){var t;return v5(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function RXt(){return ZKt()&&document.documentMode===10}function b5e(e=wa()){return v5(e)||y5e(e)||_5e(e)||v5e(e)||/windows phone/i.test(e)||g5e(e)}function NXt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5e(e,t=[]){let n;switch(e){case"Browser":n=vye(wa());break;case"Worker":n=`${vye(wa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DXt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MXt(e,t={}){return GS(e,"GET","/v2/passwordPolicy",y5(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LXt=6;class FXt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LXt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jXt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _ye(this),this.idTokenSubscription=new _ye(this),this.beforeStateQueue=new DXt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o5e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Cp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Pw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return dn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await LM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=yXt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?WS(t):null;return n&&dn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&dn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Cp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await MXt(this),n=new FXt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new g5("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kXt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Cp(t)||this._popupRedirectResolver;dn(n,this,"argument-error"),this.redirectPersistenceManager=await Pw.create(this,[Cp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(dn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return dn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=w5e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&hXt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gO(e){return WS(e)}class _ye{constructor(t){this.auth=t,this.observer=null,this.addObserver=iXt(n=>this.observer=n)}get next(){return dn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BXt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}function UXt(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Xd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",BXt().appendChild(r)})}function zXt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VXt(e,t){const n=gy(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(i5e(s,t??{}))return i;dh(i,"already-initialized")}return n.initialize({options:t})}function HXt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function qXt(e,t,n){const r=gO(e);dn(r._canInitEmulator,r,"emulator-config-failed"),dn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=E5e(t),{host:o,port:a}=WXt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||GXt()}function E5e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function WXt(e){const t=E5e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:bye(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:bye(o)}}}function bye(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function GXt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Tp("not implemented")}_getIdTokenResponse(t){return Tp("not implemented")}_linkToIdToken(t,n){return Tp("not implemented")}_getReauthenticationResolver(t){return Tp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(e,t){return c5e(e,"POST","/v1/accounts:signInWithIdp",y5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YXt="http://localhost";class M1 extends S5e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new M1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):dh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=IS(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new M1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return kw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,kw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,kw(t,n)}buildRequest(){const t={requestUri:YXt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=pO(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO extends tee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg extends yO{constructor(){super("facebook.com")}static credential(t){return M1._fromParams({providerId:vg.PROVIDER_ID,signInMethod:vg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return vg.credentialFromTaggedObject(t)}static credentialFromError(t){return vg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return vg.credential(t.oauthAccessToken)}catch{return null}}}vg.FACEBOOK_SIGN_IN_METHOD="facebook.com";vg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp extends yO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return M1._fromParams({providerId:dp.PROVIDER_ID,signInMethod:dp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return dp.credentialFromTaggedObject(t)}static credentialFromError(t){return dp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return dp.credential(n,r)}catch{return null}}}dp.GOOGLE_SIGN_IN_METHOD="google.com";dp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends yO{constructor(){super("github.com")}static credential(t){return M1._fromParams({providerId:_g.PROVIDER_ID,signInMethod:_g.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _g.credentialFromTaggedObject(t)}static credentialFromError(t){return _g.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _g.credential(t.oauthAccessToken)}catch{return null}}}_g.GITHUB_SIGN_IN_METHOD="github.com";_g.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg extends yO{constructor(){super("twitter.com")}static credential(t,n){return M1._fromParams({providerId:bg.PROVIDER_ID,signInMethod:bg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return bg.credentialFromTaggedObject(t)}static credentialFromError(t){return bg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return bg.credential(n,r)}catch{return null}}}bg.TWITTER_SIGN_IN_METHOD="twitter.com";bg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KXt(e,t){return c5e(e,"POST","/v1/accounts:signUp",y5(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await i1._fromIdTokenResponse(t,r,i),o=wye(r);return new F0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=wye(r);return new F0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function wye(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XXt(e){var t;const n=gO(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new F0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await KXt(n,{returnSecureToken:!0}),i=await F0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM extends qS{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,FM.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new FM(t,n,r,i)}}function x5e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?FM._fromErrorAndOperation(e,s,t,r):s})}async function QXt(e,t,n=!1){const r=await OA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return F0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JXt(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await OA(e,x5e(r,i,t,e),n);dn(s.idToken,r,"internal-error");const o=ZZ(s.idToken);dn(o,r,"internal-error");const{sub:a}=o;return dn(e.uid===a,r,"user-mismatch"),F0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&dh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZXt(e,t,n=!1){const r="signIn",i=await x5e(e,r,t),s=await F0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function eQt(e,t,n,r){return WS(e).onIdTokenChanged(t,n,r)}function tQt(e,t,n){return WS(e).beforeAuthStateChanged(t,n)}const jM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jM,"1"),this.storage.removeItem(jM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nQt(){const e=wa();return eee(e)||v5(e)}const rQt=1e3,iQt=10;class C5e extends T5e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=nQt()&&NXt(),this.fallbackToPolling=b5e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);RXt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,iQt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},rQt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}C5e.type="LOCAL";const sQt=C5e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5e extends T5e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}A5e.type="SESSION";const I5e=A5e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new _5(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await oQt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_5.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aQt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=nee("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(){return window}function uQt(e){Qd().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O5e(){return typeof Qd().WorkerGlobalScope<"u"&&typeof Qd().importScripts=="function"}async function lQt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cQt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function fQt(){return O5e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5e="firebaseLocalStorageDb",dQt=1,BM="firebaseLocalStorage",k5e="fbase_key";class vO{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function b5(e,t){return e.transaction([BM],t?"readwrite":"readonly").objectStore(BM)}function hQt(){const e=indexedDB.deleteDatabase(P5e);return new vO(e).toPromise()}function yq(){const e=indexedDB.open(P5e,dQt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(BM,{keyPath:k5e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(BM)?t(r):(r.close(),await hQt(),t(await yq()))})})}async function Eye(e,t,n){const r=b5(e,!0).put({[k5e]:t,value:n});return new vO(r).toPromise()}async function pQt(e,t){const n=b5(e,!1).get(t),r=await new vO(n).toPromise();return r===void 0?null:r.value}function Sye(e,t){const n=b5(e,!0).delete(t);return new vO(n).toPromise()}const mQt=800,gQt=3;class $5e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yq(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>gQt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O5e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_5._getInstance(fQt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await lQt(),!this.activeServiceWorker)return;this.sender=new aQt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||cQt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await yq();return await Eye(t,jM,"1"),await Sye(t,jM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Eye(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>pQt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sye(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=b5(i,!1).getAll();return new vO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mQt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$5e.type="LOCAL";const yQt=$5e;new mO(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5e(e,t){return t?Cp(t):(dn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree extends S5e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return kw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return kw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return kw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function vQt(e){return ZXt(e.auth,new ree(e),e.bypassAuthState)}function _Qt(e){const{auth:t,user:n}=e;return dn(n,t,"internal-error"),JXt(n,new ree(e),e.bypassAuthState)}async function bQt(e){const{auth:t,user:n}=e;return dn(n,t,"internal-error"),QXt(n,new ree(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vQt;case"linkViaPopup":case"linkViaRedirect":return bQt;case"reauthViaPopup":case"reauthViaRedirect":return _Qt;default:dh(this.auth,"internal-error")}}resolve(t){cm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){cm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wQt=new mO(2e3,1e4);async function EQt(e,t,n){const r=gO(e);pXt(e,t,tee);const i=R5e(r,n);return new Bv(r,"signInViaPopup",t,i).executeNotNull()}class Bv extends N5e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Bv.currentPopupAction&&Bv.currentPopupAction.cancel(),Bv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return dn(t,this.auth,"internal-error"),t}async onExecution(){cm(this.filter.length===1,"Popup operations only handle one event");const t=nee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Xd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Bv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,wQt.get())};t()}}Bv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SQt="pendingRedirect",gR=new Map;class xQt extends N5e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=gR.get(this.auth._key());if(!t){try{const r=await TQt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}gR.set(this.auth._key(),t)}return this.bypassAuthState||gR.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TQt(e,t){const n=IQt(t),r=AQt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function CQt(e,t){gR.set(e._key(),t)}function AQt(e){return Cp(e._redirectPersistence)}function IQt(e){return mR(SQt,e.config.apiKey,e.name)}async function OQt(e,t,n=!1){const r=gO(e),i=R5e(r,t),o=await new xQt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PQt=10*60*1e3;class kQt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!$Qt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!D5e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=PQt&&this.cachedEventUids.clear(),this.cachedEventUids.has(xye(t))}saveEventToCache(t){this.cachedEventUids.add(xye(t)),this.lastProcessedEventTime=Date.now()}}function xye(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function D5e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function $Qt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D5e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RQt(e,t={}){return GS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DQt=/^https?/;async function MQt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await RQt(e);for(const n of t)try{if(LQt(n))return}catch{}dh(e,"unauthorized-domain")}function LQt(e){const t=gq(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!DQt.test(n))return!1;if(NQt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FQt=new mO(3e4,6e4);function Tye(){const e=Qd().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function jQt(e){return new Promise((t,n)=>{var r,i,s;function o(){Tye(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Tye(),n(Xd(e,"network-request-failed"))},timeout:FQt.get()})}if(!((i=(r=Qd().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Qd().gapi)===null||s===void 0)&&s.load)o();else{const a=zXt("iframefcb");return Qd()[a]=()=>{gapi.load?o():n(Xd(e,"network-request-failed"))},UXt(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw yR=null,t})}let yR=null;function BQt(e){return yR=yR||jQt(e),yR}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UQt=new mO(5e3,15e3),zQt="__/auth/iframe",VQt="emulator/auth/iframe",HQt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qQt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WQt(e){const t=e.config;dn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?JZ(t,VQt):`https://${e.config.authDomain}/${zQt}`,r={apiKey:t.apiKey,appName:e.name,v:kc},i=qQt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pO(r).slice(1)}`}async function GQt(e){const t=await BQt(e),n=Qd().gapi;return dn(n,e,"internal-error"),t.open({where:document.body,url:WQt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HQt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Xd(e,"network-request-failed"),a=Qd().setTimeout(()=>{s(o)},UQt.get());function u(){Qd().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KQt=500,XQt=600,QQt="_blank",JQt="http://localhost";class Cye{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZQt(e,t,n,r=KQt,i=XQt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},YQt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=wa().toLowerCase();n&&(a=m5e(l)?QQt:n),p5e(l)&&(t=t||JQt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if($Xt(l)&&a!=="_self")return eJt(t||"",a),new Cye(null);const f=window.open(t||"",a,c);dn(f,e,"popup-blocked");try{f.focus()}catch{}return new Cye(f)}function eJt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tJt="__/auth/handler",nJt="emulator/auth/handler",rJt=encodeURIComponent("fac");async function Aye(e,t,n,r,i,s){dn(e.config.authDomain,e,"auth-domain-config-required"),dn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kc,eventId:i};if(t instanceof tee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",rXt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries(s||{}))o[c]=f}if(t instanceof yO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${rJt}=${encodeURIComponent(u)}`:"";return`${iJt(e)}?${pO(a).slice(1)}${l}`}function iJt({config:e}){return e.emulator?JZ(e,nJt):`https://${e.authDomain}/${tJt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="webStorageSupport";class sJt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=I5e,this._completeRedirectFn=OQt,this._overrideRedirectResult=CQt}async _openPopup(t,n,r,i){var s;cm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Aye(t,n,r,gq(),i);return ZQt(t,o,nee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Aye(t,n,r,gq(),i);return uQt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(cm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await GQt(t),r=new kQt(t);return n.register("authEvent",i=>(dn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(vU,{type:vU},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[vU];o!==void 0&&n(!!o),dh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MQt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return b5e()||eee()||v5()}}const M5e=sJt;var Iye="@firebase/auth",Oye="1.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){dn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aJt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function uJt(e){kf(new pye("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;dn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w5e(e)},l=new jXt(r,i,s,u);return HXt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),kf(new pye("auth-internal",t=>{const n=gO(t.getProvider("auth").getImmediate());return(r=>new oJt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vl(Iye,Oye,aJt(e)),vl(Iye,Oye,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lJt=5*60,cJt=r5e("authIdTokenMaxAge")||lJt;let Pye=null;const fJt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cJt)return;const i=n==null?void 0:n.token;Pye!==i&&(Pye=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function L5e(e=GF()){const t=gy(e,"auth");if(t.isInitialized())return t.getImmediate();const n=VXt(e,{popupRedirectResolver:M5e,persistence:[yQt,sQt,I5e]}),r=r5e("authTokenSyncURL");if(r){const s=fJt(r);tQt(n,s,()=>s(n.currentUser)),eQt(n,o=>s(o))}const i=KKt("auth");return i&&qXt(n,`http://${i}`),n}uJt("Browser");function Nk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var F5e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof Nk=="function"&&Nk;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof Nk=="function"&&Nk,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Cu<"u"?Cu:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,E){if(typeof x!="function"&&this.state===l||typeof E!="function"&&this.state===u)return this;var b=new this.constructor(o);if(this.state!==c){var T=this.state===l?x:E;h(b,T,this.outcome)}else this.queue.push(new d(b,x,E));return b};function d(x,E,b){this.promise=x,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,E,b){s(function(){var T;try{T=E(b)}catch(A){return a.reject(x,A)}T===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,T)})}a.resolve=function(x,E){var b=g(p,E);if(b.status==="error")return a.reject(x,b.value);var T=b.value;if(T)m(x,T);else{x.state=l,x.outcome=E;for(var A=-1,C=x.queue.length;++A<C;)x.queue[A].callFulfilled(E)}return x},a.reject=function(x,E){x.state=u,x.outcome=E;for(var b=-1,T=x.queue.length;++b<T;)x.queue[b].callRejected(E);return x};function p(x){var E=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof E=="function")return function(){E.apply(x,arguments)}}function m(x,E){var b=!1;function T(N){b||(b=!0,a.reject(x,N))}function A(N){b||(b=!0,a.resolve(x,N))}function C(){E(A,T)}var P=g(C);P.status==="error"&&T(P.value)}function g(x,E){var b={};try{b.value=x(E),b.status="success"}catch(T){b.status="error",b.value=T}return b}f.resolve=y;function y(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=v;function v(x){var E=new this(o);return a.reject(E,x)}f.all=_;function _(x){var E=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=x.length,T=!1;if(!b)return this.resolve([]);for(var A=new Array(b),C=0,P=-1,N=new this(o);++P<b;)$(x[P],P);return N;function $(M,B){E.resolve(M).then(z,function(W){T||(T=!0,a.reject(N,W))});function z(W){A[B]=W,++C===b&&!T&&(T=!0,a.resolve(N,A))}}}f.race=w;function w(x){var E=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=x.length,T=!1;if(!b)return this.resolve([]);for(var A=-1,C=new this(o);++A<b;)P(x[A]);return C;function P(N){E.resolve(N).then(function($){T||(T=!0,a.resolve(C,$))},function($){T||(T=!0,a.reject(C,$))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Cu<"u"?Cu:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K};function o(K,se){if(!(K instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var K=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!K||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(K,se){K=K||[],se=se||{};try{return new Blob(K,se)}catch(pe){if(pe.name!=="TypeError")throw pe;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ge=new Z,ve=0;ve<K.length;ve+=1)ge.append(K[ve]);return ge.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(K,se){se&&K.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(K,se,Z){typeof se=="function"&&K.then(se),typeof Z=="function"&&K.catch(Z)}function p(K){return typeof K!="string"&&(console.warn(K+" used as a key, but it is not a string."),K=String(K)),K}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},_=Object.prototype.toString,w="readonly",x="readwrite";function E(K){for(var se=K.length,Z=new ArrayBuffer(se),ge=new Uint8Array(Z),ve=0;ve<se;ve++)ge[ve]=K.charCodeAt(ve);return Z}function b(K){return new f(function(se){var Z=K.transaction(g,x),ge=c([""]);Z.objectStore(g).put(ge,"key"),Z.onabort=function(ve){ve.preventDefault(),ve.stopPropagation(),se(!1)},Z.oncomplete=function(){var ve=navigator.userAgent.match(/Chrome\/(\d+)/),pe=navigator.userAgent.match(/Edge\//);se(pe||!ve||parseInt(ve[1],10)>=43)}}).catch(function(){return!1})}function T(K){return typeof y=="boolean"?f.resolve(y):b(K).then(function(se){return y=se,y})}function A(K){var se=v[K.name],Z={};Z.promise=new f(function(ge,ve){Z.resolve=ge,Z.reject=ve}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function C(K){var se=v[K.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function P(K,se){var Z=v[K.name],ge=Z.deferredOperations.pop();if(ge)return ge.reject(se),ge.promise}function N(K,se){return new f(function(Z,ge){if(v[K.name]=v[K.name]||L(),K.db)if(se)A(K),K.db.close();else return Z(K.db);var ve=[K.name];se&&ve.push(K.version);var pe=u.open.apply(u,ve);se&&(pe.onupgradeneeded=function(Oe){var Be=pe.result;try{Be.createObjectStore(K.storeName),Oe.oldVersion<=1&&Be.createObjectStore(g)}catch(Ge){if(Ge.name==="ConstraintError")console.warn('The database "'+K.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+K.storeName+'" already exists.');else throw Ge}}),pe.onerror=function(Oe){Oe.preventDefault(),ge(pe.error)},pe.onsuccess=function(){var Oe=pe.result;Oe.onversionchange=function(Be){Be.target.close()},Z(Oe),C(K)}})}function $(K){return N(K,!1)}function M(K){return N(K,!0)}function B(K,se){if(!K.db)return!0;var Z=!K.db.objectStoreNames.contains(K.storeName),ge=K.version<K.db.version,ve=K.version>K.db.version;if(ge&&(K.version!==se&&console.warn('The database "'+K.name+`" can't be downgraded from version `+K.db.version+" to version "+K.version+"."),K.version=K.db.version),ve||Z){if(Z){var pe=K.db.version+1;pe>K.version&&(K.version=pe)}return!0}return!1}function z(K){return new f(function(se,Z){var ge=new FileReader;ge.onerror=Z,ge.onloadend=function(ve){var pe=btoa(ve.target.result||"");se({__local_forage_encoded_blob:!0,data:pe,type:K.type})},ge.readAsBinaryString(K)})}function W(K){var se=E(atob(K.data));return c([se],{type:K.type})}function U(K){return K&&K.__local_forage_encoded_blob}function Y(K){var se=this,Z=se._initReady().then(function(){var ge=v[se._dbInfo.name];if(ge&&ge.dbReady)return ge.dbReady});return h(Z,K,K),Z}function q(K){A(K);for(var se=v[K.name],Z=se.forages,ge=0;ge<Z.length;ge++){var ve=Z[ge];ve._dbInfo.db&&(ve._dbInfo.db.close(),ve._dbInfo.db=null)}return K.db=null,$(K).then(function(pe){return K.db=pe,B(K)?M(K):pe}).then(function(pe){K.db=se.db=pe;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=pe}).catch(function(pe){throw P(K,pe),pe})}function D(K,se,Z,ge){ge===void 0&&(ge=1);try{var ve=K.db.transaction(K.storeName,se);Z(null,ve)}catch(pe){if(ge>0&&(!K.db||pe.name==="InvalidStateError"||pe.name==="NotFoundError"))return f.resolve().then(function(){if(!K.db||pe.name==="NotFoundError"&&!K.db.objectStoreNames.contains(K.storeName)&&K.version<=K.db.version)return K.db&&(K.version=K.db.version+1),M(K)}).then(function(){return q(K).then(function(){D(K,se,Z,ge-1)})}).catch(Z);Z(pe)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function G(K){var se=this,Z={db:null};if(K)for(var ge in K)Z[ge]=K[ge];var ve=v[Z.name];ve||(ve=L(),v[Z.name]=ve),ve.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=Y);var pe=[];function Oe(){return f.resolve()}for(var Be=0;Be<ve.forages.length;Be++){var Ge=ve.forages[Be];Ge!==se&&pe.push(Ge._initReady().catch(Oe))}var Ue=ve.forages.slice(0);return f.all(pe).then(function(){return Z.db=ve.db,$(Z)}).then(function(Qe){return Z.db=Qe,B(Z,se._defaultConfig.version)?M(Z):Qe}).then(function(Qe){Z.db=ve.db=Qe,se._dbInfo=Z;for(var Tt=0;Tt<Ue.length;Tt++){var nn=Ue[Tt];nn!==se&&(nn._dbInfo.db=Z.db,nn._dbInfo.version=Z.version)}})}function V(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){D(Z._dbInfo,w,function(Oe,Be){if(Oe)return pe(Oe);try{var Ge=Be.objectStore(Z._dbInfo.storeName),Ue=Ge.get(K);Ue.onsuccess=function(){var Qe=Ue.result;Qe===void 0&&(Qe=null),U(Qe)&&(Qe=W(Qe)),ve(Qe)},Ue.onerror=function(){pe(Ue.error)}}catch(Qe){pe(Qe)}})}).catch(pe)});return d(ge,se),ge}function H(K,se){var Z=this,ge=new f(function(ve,pe){Z.ready().then(function(){D(Z._dbInfo,w,function(Oe,Be){if(Oe)return pe(Oe);try{var Ge=Be.objectStore(Z._dbInfo.storeName),Ue=Ge.openCursor(),Qe=1;Ue.onsuccess=function(){var Tt=Ue.result;if(Tt){var nn=Tt.value;U(nn)&&(nn=W(nn));var Kn=K(nn,Tt.key,Qe++);Kn!==void 0?ve(Kn):Tt.continue()}else ve()},Ue.onerror=function(){pe(Ue.error)}}catch(Tt){pe(Tt)}})}).catch(pe)});return d(ge,se),ge}function te(K,se,Z){var ge=this;K=p(K);var ve=new f(function(pe,Oe){var Be;ge.ready().then(function(){return Be=ge._dbInfo,_.call(se)==="[object Blob]"?T(Be.db).then(function(Ge){return Ge?se:z(se)}):se}).then(function(Ge){D(ge._dbInfo,x,function(Ue,Qe){if(Ue)return Oe(Ue);try{var Tt=Qe.objectStore(ge._dbInfo.storeName);Ge===null&&(Ge=void 0);var nn=Tt.put(Ge,K);Qe.oncomplete=function(){Ge===void 0&&(Ge=null),pe(Ge)},Qe.onabort=Qe.onerror=function(){var Kn=nn.error?nn.error:nn.transaction.error;Oe(Kn)}}catch(Kn){Oe(Kn)}})}).catch(Oe)});return d(ve,Z),ve}function le(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){D(Z._dbInfo,x,function(Oe,Be){if(Oe)return pe(Oe);try{var Ge=Be.objectStore(Z._dbInfo.storeName),Ue=Ge.delete(K);Be.oncomplete=function(){ve()},Be.onerror=function(){pe(Ue.error)},Be.onabort=function(){var Qe=Ue.error?Ue.error:Ue.transaction.error;pe(Qe)}}catch(Qe){pe(Qe)}})}).catch(pe)});return d(ge,se),ge}function me(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){D(se._dbInfo,x,function(pe,Oe){if(pe)return ve(pe);try{var Be=Oe.objectStore(se._dbInfo.storeName),Ge=Be.clear();Oe.oncomplete=function(){ge()},Oe.onabort=Oe.onerror=function(){var Ue=Ge.error?Ge.error:Ge.transaction.error;ve(Ue)}}catch(Ue){ve(Ue)}})}).catch(ve)});return d(Z,K),Z}function ye(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){D(se._dbInfo,w,function(pe,Oe){if(pe)return ve(pe);try{var Be=Oe.objectStore(se._dbInfo.storeName),Ge=Be.count();Ge.onsuccess=function(){ge(Ge.result)},Ge.onerror=function(){ve(Ge.error)}}catch(Ue){ve(Ue)}})}).catch(ve)});return d(Z,K),Z}function de(K,se){var Z=this,ge=new f(function(ve,pe){if(K<0){ve(null);return}Z.ready().then(function(){D(Z._dbInfo,w,function(Oe,Be){if(Oe)return pe(Oe);try{var Ge=Be.objectStore(Z._dbInfo.storeName),Ue=!1,Qe=Ge.openKeyCursor();Qe.onsuccess=function(){var Tt=Qe.result;if(!Tt){ve(null);return}K===0||Ue?ve(Tt.key):(Ue=!0,Tt.advance(K))},Qe.onerror=function(){pe(Qe.error)}}catch(Tt){pe(Tt)}})}).catch(pe)});return d(ge,se),ge}function we(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){D(se._dbInfo,w,function(pe,Oe){if(pe)return ve(pe);try{var Be=Oe.objectStore(se._dbInfo.storeName),Ge=Be.openKeyCursor(),Ue=[];Ge.onsuccess=function(){var Qe=Ge.result;if(!Qe){ge(Ue);return}Ue.push(Qe.key),Qe.continue()},Ge.onerror=function(){ve(Ge.error)}}catch(Qe){ve(Qe)}})}).catch(ve)});return d(Z,K),Z}function he(K,se){se=m.apply(this,arguments);var Z=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||Z.name,K.storeName=K.storeName||Z.storeName);var ge=this,ve;if(!K.name)ve=f.reject("Invalid arguments");else{var pe=K.name===Z.name&&ge._dbInfo.db,Oe=pe?f.resolve(ge._dbInfo.db):$(K).then(function(Be){var Ge=v[K.name],Ue=Ge.forages;Ge.db=Be;for(var Qe=0;Qe<Ue.length;Qe++)Ue[Qe]._dbInfo.db=Be;return Be});K.storeName?ve=Oe.then(function(Be){if(Be.objectStoreNames.contains(K.storeName)){var Ge=Be.version+1;A(K);var Ue=v[K.name],Qe=Ue.forages;Be.close();for(var Tt=0;Tt<Qe.length;Tt++){var nn=Qe[Tt];nn._dbInfo.db=null,nn._dbInfo.version=Ge}var Kn=new f(function(Mt,Qr){var kr=u.open(K.name,Ge);kr.onerror=function(ms){var Fh=kr.result;Fh.close(),Qr(ms)},kr.onupgradeneeded=function(){var ms=kr.result;ms.deleteObjectStore(K.storeName)},kr.onsuccess=function(){var ms=kr.result;ms.close(),Mt(ms)}});return Kn.then(function(Mt){Ue.db=Mt;for(var Qr=0;Qr<Qe.length;Qr++){var kr=Qe[Qr];kr._dbInfo.db=Mt,C(kr._dbInfo)}}).catch(function(Mt){throw(P(K,Mt)||f.resolve()).catch(function(){}),Mt})}}):ve=Oe.then(function(Be){A(K);var Ge=v[K.name],Ue=Ge.forages;Be.close();for(var Qe=0;Qe<Ue.length;Qe++){var Tt=Ue[Qe];Tt._dbInfo.db=null}var nn=new f(function(Kn,Mt){var Qr=u.deleteDatabase(K.name);Qr.onerror=function(){var kr=Qr.result;kr&&kr.close(),Mt(Qr.error)},Qr.onblocked=function(){console.warn('dropInstance blocked for database "'+K.name+'" until all open connections are closed')},Qr.onsuccess=function(){var kr=Qr.result;kr&&kr.close(),Kn(kr)}});return nn.then(function(Kn){Ge.db=Kn;for(var Mt=0;Mt<Ue.length;Mt++){var Qr=Ue[Mt];C(Qr._dbInfo)}}).catch(function(Kn){throw(P(K,Kn)||f.resolve()).catch(function(){}),Kn})})}return d(ve,se),ve}var He={_driver:"asyncStorage",_initStorage:G,_support:l(),iterate:H,getItem:V,setItem:te,removeItem:le,clear:me,length:ye,key:de,keys:we,dropInstance:he};function Me(){return typeof openDatabase=="function"}var Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",je="~~local_forage_type~",De=/^~~local_forage_type~([^~]+)~/,qe="__lfsc__:",Qt=qe.length,rt="arbf",We="blob",Pt="si08",ut="ui08",mt="uic8",vt="si16",Ht="si32",Xt="ur16",fe="ui32",xe="fl32",Le="fl64",ft=Qt+rt.length,Ze=Object.prototype.toString;function ct(K){var se=K.length*.75,Z=K.length,ge,ve=0,pe,Oe,Be,Ge;K[K.length-1]==="="&&(se--,K[K.length-2]==="="&&se--);var Ue=new ArrayBuffer(se),Qe=new Uint8Array(Ue);for(ge=0;ge<Z;ge+=4)pe=Ke.indexOf(K[ge]),Oe=Ke.indexOf(K[ge+1]),Be=Ke.indexOf(K[ge+2]),Ge=Ke.indexOf(K[ge+3]),Qe[ve++]=pe<<2|Oe>>4,Qe[ve++]=(Oe&15)<<4|Be>>2,Qe[ve++]=(Be&3)<<6|Ge&63;return Ue}function ot(K){var se=new Uint8Array(K),Z="",ge;for(ge=0;ge<se.length;ge+=3)Z+=Ke[se[ge]>>2],Z+=Ke[(se[ge]&3)<<4|se[ge+1]>>4],Z+=Ke[(se[ge+1]&15)<<2|se[ge+2]>>6],Z+=Ke[se[ge+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function At(K,se){var Z="";if(K&&(Z=Ze.call(K)),K&&(Z==="[object ArrayBuffer]"||K.buffer&&Ze.call(K.buffer)==="[object ArrayBuffer]")){var ge,ve=qe;K instanceof ArrayBuffer?(ge=K,ve+=rt):(ge=K.buffer,Z==="[object Int8Array]"?ve+=Pt:Z==="[object Uint8Array]"?ve+=ut:Z==="[object Uint8ClampedArray]"?ve+=mt:Z==="[object Int16Array]"?ve+=vt:Z==="[object Uint16Array]"?ve+=Xt:Z==="[object Int32Array]"?ve+=Ht:Z==="[object Uint32Array]"?ve+=fe:Z==="[object Float32Array]"?ve+=xe:Z==="[object Float64Array]"?ve+=Le:se(new Error("Failed to get type for BinaryArray"))),se(ve+ot(ge))}else if(Z==="[object Blob]"){var pe=new FileReader;pe.onload=function(){var Oe=je+K.type+"~"+ot(this.result);se(qe+We+Oe)},pe.readAsArrayBuffer(K)}else try{se(JSON.stringify(K))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",K),se(null,Oe)}}function Tn(K){if(K.substring(0,Qt)!==qe)return JSON.parse(K);var se=K.substring(ft),Z=K.substring(Qt,ft),ge;if(Z===We&&De.test(se)){var ve=se.match(De);ge=ve[1],se=se.substring(ve[0].length)}var pe=ct(se);switch(Z){case rt:return pe;case We:return c([pe],{type:ge});case Pt:return new Int8Array(pe);case ut:return new Uint8Array(pe);case mt:return new Uint8ClampedArray(pe);case vt:return new Int16Array(pe);case Xt:return new Uint16Array(pe);case Ht:return new Int32Array(pe);case fe:return new Uint32Array(pe);case xe:return new Float32Array(pe);case Le:return new Float64Array(pe);default:throw new Error("Unkown type: "+Z)}}var Zt={serialize:At,deserialize:Tn,stringToBuffer:ct,bufferToString:ot};function Jt(K,se,Z,ge){K.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,ge)}function rr(K){var se=this,Z={db:null};if(K)for(var ge in K)Z[ge]=typeof K[ge]!="string"?K[ge].toString():K[ge];var ve=new f(function(pe,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Be){return Oe(Be)}Z.db.transaction(function(Be){Jt(Be,Z,function(){se._dbInfo=Z,pe()},function(Ge,Ue){Oe(Ue)})},Oe)});return Z.serializer=Zt,ve}function Bn(K,se,Z,ge,ve,pe){K.executeSql(Z,ge,ve,function(Oe,Be){Be.code===Be.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(Ge,Ue){Ue.rows.length?pe(Ge,Be):Jt(Ge,se,function(){Ge.executeSql(Z,ge,ve,pe)},pe)},pe):pe(Oe,Be)},pe)}function zo(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Be){Bn(Be,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[K],function(Ge,Ue){var Qe=Ue.rows.length?Ue.rows.item(0).value:null;Qe&&(Qe=Oe.serializer.deserialize(Qe)),ve(Qe)},function(Ge,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function mr(K,se){var Z=this,ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Be){Bn(Be,Oe,"SELECT * FROM "+Oe.storeName,[],function(Ge,Ue){for(var Qe=Ue.rows,Tt=Qe.length,nn=0;nn<Tt;nn++){var Kn=Qe.item(nn),Mt=Kn.value;if(Mt&&(Mt=Oe.serializer.deserialize(Mt)),Mt=K(Mt,Kn.key,nn+1),Mt!==void 0){ve(Mt);return}}ve()},function(Ge,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function Di(K,se,Z,ge){var ve=this;K=p(K);var pe=new f(function(Oe,Be){ve.ready().then(function(){se===void 0&&(se=null);var Ge=se,Ue=ve._dbInfo;Ue.serializer.serialize(se,function(Qe,Tt){Tt?Be(Tt):Ue.db.transaction(function(nn){Bn(nn,Ue,"INSERT OR REPLACE INTO "+Ue.storeName+" (key, value) VALUES (?, ?)",[K,Qe],function(){Oe(Ge)},function(Kn,Mt){Be(Mt)})},function(nn){if(nn.code===nn.QUOTA_ERR){if(ge>0){Oe(Di.apply(ve,[K,Ge,Z,ge-1]));return}Be(nn)}})})}).catch(Be)});return d(pe,Z),pe}function zr(K,se,Z){return Di.apply(this,[K,se,Z,1])}function Pr(K,se){var Z=this;K=p(K);var ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Be){Bn(Be,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[K],function(){ve()},function(Ge,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function Vr(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){var pe=se._dbInfo;pe.db.transaction(function(Oe){Bn(Oe,pe,"DELETE FROM "+pe.storeName,[],function(){ge()},function(Be,Ge){ve(Ge)})})}).catch(ve)});return d(Z,K),Z}function ir(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){var pe=se._dbInfo;pe.db.transaction(function(Oe){Bn(Oe,pe,"SELECT COUNT(key) as c FROM "+pe.storeName,[],function(Be,Ge){var Ue=Ge.rows.item(0).c;ge(Ue)},function(Be,Ge){ve(Ge)})})}).catch(ve)});return d(Z,K),Z}function St(K,se){var Z=this,ge=new f(function(ve,pe){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Be){Bn(Be,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[K+1],function(Ge,Ue){var Qe=Ue.rows.length?Ue.rows.item(0).key:null;ve(Qe)},function(Ge,Ue){pe(Ue)})})}).catch(pe)});return d(ge,se),ge}function gr(K){var se=this,Z=new f(function(ge,ve){se.ready().then(function(){var pe=se._dbInfo;pe.db.transaction(function(Oe){Bn(Oe,pe,"SELECT key FROM "+pe.storeName,[],function(Be,Ge){for(var Ue=[],Qe=0;Qe<Ge.rows.length;Qe++)Ue.push(Ge.rows.item(Qe).key);ge(Ue)},function(Be,Ge){ve(Ge)})})}).catch(ve)});return d(Z,K),Z}function di(K){return new f(function(se,Z){K.transaction(function(ge){ge.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ve,pe){for(var Oe=[],Be=0;Be<pe.rows.length;Be++)Oe.push(pe.rows.item(Be).name);se({db:K,storeNames:Oe})},function(ve,pe){Z(pe)})},function(ge){Z(ge)})})}function Un(K,se){se=m.apply(this,arguments);var Z=this.config();K=typeof K!="function"&&K||{},K.name||(K.name=K.name||Z.name,K.storeName=K.storeName||Z.storeName);var ge=this,ve;return K.name?ve=new f(function(pe){var Oe;K.name===Z.name?Oe=ge._dbInfo.db:Oe=openDatabase(K.name,"","",0),K.storeName?pe({db:Oe,storeNames:[K.storeName]}):pe(di(Oe))}).then(function(pe){return new f(function(Oe,Be){pe.db.transaction(function(Ge){function Ue(Kn){return new f(function(Mt,Qr){Ge.executeSql("DROP TABLE IF EXISTS "+Kn,[],function(){Mt()},function(kr,ms){Qr(ms)})})}for(var Qe=[],Tt=0,nn=pe.storeNames.length;Tt<nn;Tt++)Qe.push(Ue(pe.storeNames[Tt]));f.all(Qe).then(function(){Oe()}).catch(function(Kn){Be(Kn)})},function(Ge){Be(Ge)})})}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var hs={_driver:"webSQLStorage",_initStorage:rr,_support:Me(),iterate:mr,getItem:zo,setItem:zr,removeItem:Pr,clear:Vr,length:ir,key:St,keys:gr,dropInstance:Un};function ps(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(K,se){var Z=K.name+"/";return K.storeName!==se.storeName&&(Z+=K.storeName+"/"),Z}function ne(){var K="_localforage_support_test";try{return localStorage.setItem(K,!0),localStorage.removeItem(K),!1}catch{return!0}}function ue(){return!ne()||localStorage.length>0}function Ee(K){var se=this,Z={};if(K)for(var ge in K)Z[ge]=K[ge];return Z.keyPrefix=oe(K,se._defaultConfig),ue()?(se._dbInfo=Z,Z.serializer=Zt,f.resolve()):f.reject()}function Se(K){var se=this,Z=se.ready().then(function(){for(var ge=se._dbInfo.keyPrefix,ve=localStorage.length-1;ve>=0;ve--){var pe=localStorage.key(ve);pe.indexOf(ge)===0&&localStorage.removeItem(pe)}});return d(Z,K),Z}function xt(K,se){var Z=this;K=p(K);var ge=Z.ready().then(function(){var ve=Z._dbInfo,pe=localStorage.getItem(ve.keyPrefix+K);return pe&&(pe=ve.serializer.deserialize(pe)),pe});return d(ge,se),ge}function ke(K,se){var Z=this,ge=Z.ready().then(function(){for(var ve=Z._dbInfo,pe=ve.keyPrefix,Oe=pe.length,Be=localStorage.length,Ge=1,Ue=0;Ue<Be;Ue++){var Qe=localStorage.key(Ue);if(Qe.indexOf(pe)===0){var Tt=localStorage.getItem(Qe);if(Tt&&(Tt=ve.serializer.deserialize(Tt)),Tt=K(Tt,Qe.substring(Oe),Ge++),Tt!==void 0)return Tt}}});return d(ge,se),ge}function bt(K,se){var Z=this,ge=Z.ready().then(function(){var ve=Z._dbInfo,pe;try{pe=localStorage.key(K)}catch{pe=null}return pe&&(pe=pe.substring(ve.keyPrefix.length)),pe});return d(ge,se),ge}function Ft(K){var se=this,Z=se.ready().then(function(){for(var ge=se._dbInfo,ve=localStorage.length,pe=[],Oe=0;Oe<ve;Oe++){var Be=localStorage.key(Oe);Be.indexOf(ge.keyPrefix)===0&&pe.push(Be.substring(ge.keyPrefix.length))}return pe});return d(Z,K),Z}function It(K){var se=this,Z=se.keys().then(function(ge){return ge.length});return d(Z,K),Z}function jt(K,se){var Z=this;K=p(K);var ge=Z.ready().then(function(){var ve=Z._dbInfo;localStorage.removeItem(ve.keyPrefix+K)});return d(ge,se),ge}function un(K,se,Z){var ge=this;K=p(K);var ve=ge.ready().then(function(){se===void 0&&(se=null);var pe=se;return new f(function(Oe,Be){var Ge=ge._dbInfo;Ge.serializer.serialize(se,function(Ue,Qe){if(Qe)Be(Qe);else try{localStorage.setItem(Ge.keyPrefix+K,Ue),Oe(pe)}catch(Tt){(Tt.name==="QuotaExceededError"||Tt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Be(Tt),Be(Tt)}})})});return d(ve,Z),ve}function xr(K,se){if(se=m.apply(this,arguments),K=typeof K!="function"&&K||{},!K.name){var Z=this.config();K.name=K.name||Z.name,K.storeName=K.storeName||Z.storeName}var ge=this,ve;return K.name?ve=new f(function(pe){K.storeName?pe(oe(K,ge._defaultConfig)):pe(K.name+"/")}).then(function(pe){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Be=localStorage.key(Oe);Be.indexOf(pe)===0&&localStorage.removeItem(Be)}}):ve=f.reject("Invalid arguments"),d(ve,se),ve}var qt={_driver:"localStorageWrapper",_initStorage:Ee,_support:ps(),iterate:ke,getItem:xt,setItem:un,removeItem:jt,clear:Se,length:It,key:bt,keys:Ft,dropInstance:xr},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},en=function(se,Z){for(var ge=se.length,ve=0;ve<ge;){if(sr(se[ve],Z))return!0;ve++}return!1},Yn=Array.isArray||function(K){return Object.prototype.toString.call(K)==="[object Array]"},oi={},Si={},xi={INDEXEDDB:He,WEBSQL:hs,LOCALSTORAGE:qt},Is=[xi.INDEXEDDB._driver,xi.WEBSQL._driver,xi.LOCALSTORAGE._driver],Mi=["dropInstance"],Tr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Mi),wt={description:"",driver:Is.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Cn(K,se){K[se]=function(){var Z=arguments;return K.ready().then(function(){return K[se].apply(K,Z)})}}function Dr(){for(var K=1;K<arguments.length;K++){var se=arguments[K];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Yn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var rs=function(){function K(se){o(this,K);for(var Z in xi)if(xi.hasOwnProperty(Z)){var ge=xi[Z],ve=ge._driver;this[Z]=ve,oi[ve]||this.defineDriver(ge)}this._defaultConfig=Dr({},wt),this._config=Dr({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return K.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ge in Z){if(ge==="storeName"&&(Z[ge]=Z[ge].replace(/\W/g,"_")),ge==="version"&&typeof Z[ge]!="number")return new Error("Database version must be a number.");this._config[ge]=Z[ge]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},K.prototype.defineDriver=function(Z,ge,ve){var pe=new f(function(Oe,Be){try{var Ge=Z._driver,Ue=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Be(Ue);return}for(var Qe=Tr.concat("_initStorage"),Tt=0,nn=Qe.length;Tt<nn;Tt++){var Kn=Qe[Tt],Mt=!en(Mi,Kn);if((Mt||Z[Kn])&&typeof Z[Kn]!="function"){Be(Ue);return}}var Qr=function(){for(var Fh=function(gx){return function(){var Fl=new Error("Method "+gx+" is not implemented by the current driver"),Aa=f.reject(Fl);return d(Aa,arguments[arguments.length-1]),Aa}},jm=0,Py=Mi.length;jm<Py;jm++){var ky=Mi[jm];Z[ky]||(Z[ky]=Fh(ky))}};Qr();var kr=function(Fh){oi[Ge]&&console.info("Redefining LocalForage driver: "+Ge),oi[Ge]=Z,Si[Ge]=Fh,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(kr,Be):kr(!!Z._support):kr(!0)}catch(ms){Be(ms)}});return h(pe,ge,ve),pe},K.prototype.driver=function(){return this._driver||null},K.prototype.getDriver=function(Z,ge,ve){var pe=oi[Z]?f.resolve(oi[Z]):f.reject(new Error("Driver not found."));return h(pe,ge,ve),pe},K.prototype.getSerializer=function(Z){var ge=f.resolve(Zt);return h(ge,Z),ge},K.prototype.ready=function(Z){var ge=this,ve=ge._driverSet.then(function(){return ge._ready===null&&(ge._ready=ge._initDriver()),ge._ready});return h(ve,Z,Z),ve},K.prototype.setDriver=function(Z,ge,ve){var pe=this;Yn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Be(){pe._config.driver=pe.driver()}function Ge(Tt){return pe._extend(Tt),Be(),pe._ready=pe._initStorage(pe._config),pe._ready}function Ue(Tt){return function(){var nn=0;function Kn(){for(;nn<Tt.length;){var Mt=Tt[nn];return nn++,pe._dbInfo=null,pe._ready=null,pe.getDriver(Mt).then(Ge).catch(Kn)}Be();var Qr=new Error("No available storage method found.");return pe._driverSet=f.reject(Qr),pe._driverSet}return Kn()}}var Qe=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Qe.then(function(){var Tt=Oe[0];return pe._dbInfo=null,pe._ready=null,pe.getDriver(Tt).then(function(nn){pe._driver=nn._driver,Be(),pe._wrapLibraryMethodsWithReady(),pe._initDriver=Ue(Oe)})}).catch(function(){Be();var Tt=new Error("No available storage method found.");return pe._driverSet=f.reject(Tt),pe._driverSet}),h(this._driverSet,ge,ve),this._driverSet},K.prototype.supports=function(Z){return!!Si[Z]},K.prototype._extend=function(Z){Dr(this,Z)},K.prototype._getSupportedDrivers=function(Z){for(var ge=[],ve=0,pe=Z.length;ve<pe;ve++){var Oe=Z[ve];this.supports(Oe)&&ge.push(Oe)}return ge},K.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,ge=Tr.length;Z<ge;Z++)Cn(this,Tr[Z])},K.prototype.createInstance=function(Z){return new K(Z)},K}(),go=new rs;r.exports=go},{3:3}]},{},[4])(4)})})(F5e);var dJt=F5e.exports;const vq=$l(dJt);let Dk;const hJt=new Uint8Array(16);function pJt(){if(!Dk&&(Dk=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Dk))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Dk(hJt)}const _o=[];for(let e=0;e<256;++e)_o.push((e+256).toString(16).slice(1));function mJt(e,t=0){return _o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]}const gJt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),kye={randomUUID:gJt};function UM(e,t,n){if(kye.randomUUID&&!t&&!e)return kye.randomUUID();e=e||{};const r=e.random||(e.rng||pJt)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return mJt(r)}class j5e{constructor(t){Ju(this,"engine");Ju(this,"connected",!1);Ju(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function $w(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function nT(e){return e.participantId!==void 0}class rf extends j5e{constructor(){super("firebase");Ju(this,"RECAPTCHAV3TOKEN","6LfZFvgpAAAAAASYVKyTVe7V0at6zdqBt8L1kI3I");Ju(this,"firestore");Ju(this,"collectionPrefix","prod-");Ju(this,"studyCollection");Ju(this,"storage");Ju(this,"studyId","");Ju(this,"localForage",vq.createInstance({name:"currentParticipantId"}));Ju(this,"participantData",null);const n=lJ.parse(`
{
  apiKey: "AIzaSyAt0JPT7QXK5N4Oc-n6gnEJEDtfUYQqpeU",
  authDomain: "sumsifterdemo.firebaseapp.com",
  projectId: "sumsifterdemo",
  storageBucket: "sumsifterdemo.appspot.com",
  messagingSenderId: "529083000336",
  appId: "1:529083000336:web:3af6cc2f15933822af0c95"
}
`),r=d6e(n);this.firestore=gYt(r,{}),this.storage=Tqt();try{LKt(r,{provider:new XZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await yYt(this.firestore);const n=await Ys(this.firestore,".info/connected");await hU(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=L5e();if(!i.currentUser&&(await XXt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await $w(JSON.stringify(r));if(this.studyCollection=Bc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");if(nT(o))return this.participantData=o,o;const a=await $w(JSON.stringify(r));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=UM(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=Ys(this.studyCollection,"sequenceAssignment");await Uc(r,{});const i=Bc(r,"sequenceAssignment"),s=Ys(i,this.currentParticipantId),o=tye(i,TYt("participantId","==","")),a=await tT(o);if(a.docs.length>0){const h=a.docs[0],p=h.data().timestamp;await kYt(h.ref),await Uc(s,{participantId:this.currentParticipantId,timestamp:p})}else await Uc(s,{participantId:this.currentParticipantId,timestamp:NYt()});const u=tye(i,CYt("timestamp","asc")),f=(await tT(u)).docs.map(h=>h.data()).findIndex(h=>h.participantId===this.currentParticipantId),d=n[f%n.length];if(!d)throw new Error("Latin square is empty");return d}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=jc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await Zx(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");nT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return nT(n)?n:null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=UM();await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;const s=await $w(JSON.stringify(n)),o={participantId:i,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};return await this._pushToFirebaseStorage(`participants/${i}`,"participantData",o),o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");return this.participantData.completed=!0,await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Bc(this.firestore,"user-management"),i=await tT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await Uc(Ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Uc(Ys(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Uc(Ys(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Uc(Ys(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Uc(Ys(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=jc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await Zx(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");nT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Bc(this.firestore,`${this.collectionPrefix}${n}`),s=jc(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!nT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Ys(i,"sequenceAssignment"),u=Bc(a,"sequenceAssignment"),l=Ys(u,r);await PYt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Ys(this.firestore,"metadata","collections"),i=await hU(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Ys(this.firestore,"metadata","collections");await Uc(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Ys(this.firestore,"metadata","collections"),i=await hU(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Uc(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=jc(this.storage,n),s=(await Zx(r)).items.map(o=>v0e(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=jc(this.storage,n),o=(await Zx(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=jc(this.storage,n),s=jc(this.storage,r),o=await uU(i),u=await(await fetch(o)).blob();await aU(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Bc(this.firestore,n),s=Ys(i,"sequenceAssignment"),o=Bc(s,"sequenceAssignment"),a=Bc(this.firestore,r),u=Ys(a,"sequenceAssignment");await Uc(u,{});const l=Bc(u,"sequenceAssignment"),c=await tT(o),f=iye(this.firestore);c.docs.forEach(d=>{const h=Ys(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Bc(this.firestore,n),i=Ys(r,"sequenceAssignment"),s=Bc(i,"sequenceAssignment"),o=await tT(s),a=iye(this.firestore);o.forEach(u=>{const l=Ys(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=jc(this.storage,n);return(await Zx(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=jc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await uU(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await uU(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=jc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await aU(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await aU(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=jc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await v0e(i)}}const B5e=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),YS=()=>I.useContext(B5e);function yJt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=nu(),l=async()=>{const h=f0e();try{await K7t(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof rf)try{h=f0e()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await f(v);v.isAdmin=!!_,s(v)}else l()},g=(async()=>{if(u instanceof rf){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=Y7t(h,async _=>await p(_));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return k.jsx(B5e.Provider,{value:d,children:i.determiningStatus?k.jsx(If,{visible:!0}):e})}function vJt(){const{config:e,metadata:t}=Bf(x=>x),n=HK(),r=Eh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=wh(),{storageEngine:o}=nu(),a=Sm(),u=YS(),l=n.length-1,c=typeof a=="number"?a/l*100:0,[f,d]=I.useState(!1),h=e==null?void 0:e.uiConfig.logoPath,p=e==null?void 0:e.uiConfig.withProgressBar,m=H4(),g=rXe(`/${m}`);function y(){o==null||o.nextParticipant(e,t).then(()=>{window.location.href=g}).catch(x=>{console.error(x)})}const v=I.useRef(null),[_,w]=I.useState(!1);return I.useEffect(()=>{const x=v.current;x&&w(x.scrollWidth>x.offsetWidth)},[e]),k.jsx(FY,{height:"70",p:"md",children:k.jsxs(Oo,{mt:-7,align:"center",children:[k.jsx(Oo.Col,{span:4,children:k.jsxs(jn,{align:"center",children:[k.jsx(l_,{maw:40,src:`${bh}${h}`,alt:"Study Logo"}),k.jsx(Ef,{w:"md"}),k.jsx(Qi,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:_?e==null?void 0:e.studyMetadata.title:void 0,children:e==null?void 0:e.studyMetadata.title})]})}),k.jsx(Oo.Col,{span:4,children:p&&k.jsx(PIe,{radius:"md",size:"lg",value:c})}),k.jsx(Oo.Col,{span:4,children:k.jsxs(Wa,{noWrap:!0,position:"right",children:[null,(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&k.jsx(ur,{variant:"outline",onClick:()=>r(i()),children:"Help"}),u.user.isAdmin&&k.jsxs(Kl,{shadow:"md",width:200,zIndex:1,opened:f,onChange:d,children:[k.jsx(Kl.Target,{children:k.jsx(g0,{size:"lg",className:"studyBrowserMenuDropdown",children:k.jsx(p0t,{})})}),k.jsxs(Kl.Dropdown,{children:[k.jsx(Kl.Item,{icon:k.jsx(w0t,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),k.jsx(Kl.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,icon:k.jsx(y0t,{size:14}),children:"Contact"}),k.jsx(Kl.Item,{icon:k.jsx(NOe,{size:14}),onClick:()=>y(),children:"Next Participant"})]})]})]})})]})})}function _Jt(){var u;const e=(u=w0())==null?void 0:u.uiConfig.sidebar,t=w0(),n=xm(),r=t.components[n],i=I.useMemo(()=>{var l;return r?qF(r)&&t.baseComponents?qK({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=WK(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?k.jsxs(A2,{bg:"gray.1",display:"block",width:{base:300},style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&k.jsx(A2.Section,{bg:"gray.3",p:"xl",children:k.jsxs(ze,{c:"gray.9",children:[k.jsx(ze,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),k.jsx(Ga,{text:o})]})}),k.jsx(A2.Section,{p:"sm",children:k.jsx(w3,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):k.jsx(w3,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)}function bJt(){const{showHelpText:e,config:t}=Bf(u=>u),n=Eh(),{toggleShowHelpText:r}=wh(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await YK(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),k.jsx(ac,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?k.jsx(Ga,{text:i}):k.jsx(w1,{path:t.uiConfig.helpTextPath})})}function wJt(){const{alertModal:e}=Bf(o=>o),{setAlertModal:t}=wh(),n=Eh(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),k.jsx(ac,{opened:r,centered:!0,size:"lg",withCloseButton:!1,styles:{modal:{padding:"0 !important"}},onClose:s,children:k.jsxs(PTe,{color:"red",radius:"xs",p:"lg",title:"Alert",icon:k.jsx(i0t,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[k.jsx(ze,{my:"md",children:e.message}),k.jsx(dt,{style:{float:"right"},color:"red",children:k.jsx(ur,{onClick:s,color:"red",variant:"filled",children:"Continue Study"})})]})})}function EJt(){const e=I.useRef([]),n=w0().uiConfig.windowEventDebounceTime??100;return I.useEffect(()=>{const r=rd(d=>{e.current.push([Date.now(),"focus",d.target instanceof HTMLElement?d.target.tagName:""])},n,{maxWait:n}),i=rd(d=>{e.current.push([Date.now(),"input",d.data??""])},n,{maxWait:n}),s=rd(d=>{e.current.push([Date.now(),"keypress",d.key])},n,{maxWait:n}),o=rd(d=>{e.current.push([Date.now(),"mousedown",[d.clientX,d.clientY]])},n,{maxWait:n}),a=rd(d=>{e.current.push([Date.now(),"mouseup",[d.clientX,d.clientY]])},n,{maxWait:n}),u=rd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),l=rd(d=>{e.current.push([Date.now(),"mousemove",[d.clientX,d.clientY]])},n,{maxWait:n}),c=rd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),f=rd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",r,!0),window.addEventListener("input",i),window.addEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.addEventListener("resize",u),window.addEventListener("mousemove",l),window.addEventListener("scroll",c),document.addEventListener("visibilitychange",f),()=>{window.removeEventListener("focus",r,!0),window.removeEventListener("input",i),window.removeEventListener("keypress",s),window.addEventListener("mousedown",o),window.addEventListener("mouseup",a),window.removeEventListener("resize",u),window.removeEventListener("mousemove",l),window.removeEventListener("scroll",c),document.removeEventListener("visibilitychange",f)}},[]),k.jsx(Jke.Provider,{value:e,children:k.jsxs(hI,{navbar:k.jsx(_Jt,{}),aside:k.jsx(OUt,{}),header:k.jsx(vJt,{}),children:[k.jsx(bJt,{}),k.jsx(wJt,{}),k.jsx(mXe,{})]})})}function SJt(e,t=!1){return typeof e=="number"?$ye(e,t):$ye(e.length,t).map(r=>r.map(i=>e[i]))}function $ye(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function U5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=U5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function xJt(e,t){const n=Xv(e);return U5e(n,t,"root")}function z5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&z5e(s,t,i,o)})}function TJt(e){const t=[];return z5e(e,t,"",0),t}function Rye(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return SJt(i.sort(()=>.5-Math.random()),!0)}function CJt(e){const n=TJt(e.sequence).map(s=>({[s]:Rye(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=xJt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Rye(e,o))})}),i}var AJt={VITE_BASE_PATH:"/sumsifter/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAt0JPT7QXK5N4Oc-n6gnEJEDtfUYQqpeU",
  authDomain: "sumsifterdemo.firebaseapp.com",
  projectId: "sumsifterdemo",
  storageBucket: "sumsifterdemo.appspot.com",
  messagingSenderId: "529083000336",
  appId: "1:529083000336:web:3af6cc2f15933822af0c95"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LfZFvgpAAAAAASYVKyTVe7V0at6zdqBt8L1kI3I",VITE_REVISIT_MODE:"private",BASE_URL:"/sumsifter/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function IJt(e){const t=await(await fetch(`${bh}${e}`)).text();return EUt(t)}async function w5(e,t){const n=t.configsList.find(r=>MOe(r)===e);if(n){const r=t.configs[n];return await IJt(`${r.path}`)}return null}async function OJt(e){const t={},n=e.configsList.filter(i=>AJt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>w5(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function PJt({globalConfig:e}){const t=H4(),[n,r]=I.useState(null),i=e.configsList.includes(t),s=YS();I.useEffect(()=>{w5(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=I.useState([]),[u,l]=I.useState(null),{storageEngine:c}=nu(),[f]=wY();I.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await CJt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(b=>""),_=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:_.ip},x=await c.initializeParticipantSession(y,n,w,g),E=await Fxt(t,n,x.sequence,w,x.answers,s.user.isAdmin);l(E),a([{element:k.jsx(EJt,{}),children:[{path:"/",element:k.jsx(FH,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?k.jsxs(k.Fragment,{children:[k.jsx(Qi,{order:2,mb:8,children:"Error loading config"}),k.jsx(fV,{issues:n.errors,type:"error"})]}):k.jsx(CUt,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=pxe(o);let h=null;return i?o.length===0?h=k.jsx(If,{visible:!0}):h=d&&u?k.jsx(Qke.Provider,{value:u,children:k.jsx(RSt,{store:u.store,children:d})}):k.jsx(w1,{}):h=k.jsx(w1,{}),h}function iC({studyIds:e}){const t=ym(),{studyId:n}=Kw(),r=cS(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=nu(),{user:o,logout:a}=YS(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:k.jsx(m0t,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:k.jsx(l0t,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:k.jsx(kOe,{}),href:"/settings",needAdmin:!0}];return k.jsx(FY,{height:70,p:"md",children:k.jsxs(Oo,{mt:-7,align:"center",children:[k.jsx(Oo.Col,{span:6,children:k.jsxs(jn,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),sx:{cursor:"pointer"},children:[k.jsx(l_,{maw:40,src:`${bh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),k.jsx(Ef,{w:"md"}),k.jsx(Qi,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),k.jsx(Oo.Col,{span:6,children:k.jsxs(jn,{justify:"flex-end",direction:"row",children:[c&&k.jsx(d4,{placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),k.jsx(yCe,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),k.jsx(iAe,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:k.jsxs(jn,{direction:"column",mt:20,children:[k.jsx(ze,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?k.jsx(ur,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:k.jsx(ur,{leftIcon:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),k.jsxs(dt,{ml:10,children:[k.jsx(NN,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?k.jsx(ze,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):k.jsx(ze,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function kJt({cellData:e}){return k.jsx("td",{children:k.jsx(yp,{miw:100,children:Object.entries(e.answer).map(([t,n])=>k.jsxs(dt,{children:[k.jsxs(ze,{fw:700,span:!0,children:[" ",`${t}: `]}),k.jsx(ze,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Nye({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return k.jsxs("td",{children:[t.toFixed(1)," ","s"]})}function $Jt(e){const{metaData:t}=e;return k.jsx("td",{children:k.jsx(tOe,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:k.jsxs(yp,{spacing:"xs",children:[k.jsxs(dt,{children:["IP:"," ",t.ip]}),k.jsxs(dt,{children:["Language:"," ",t.language]}),k.jsxs(dt,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),k.jsxs(dt,{children:["User Agent:"," ",t.userAgent]})]})})})}function RJt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=nu(),{studyId:s}=Kw(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),await r())},[a,u]=I.useState([]),[l,c]=I.useState(!1),f=()=>Y7({title:"Confirm rejecting participants",children:k.jsxs(ze,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",k.jsx(ze,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),await r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=Xke(n.sequence),p=[k.jsx("th",{children:k.jsx(jn,{justify:"center",children:k.jsx(Zw,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),k.jsx("th",{children:"ID"},"ID"),k.jsx("th",{children:"Status"},"status"),k.jsx("th",{children:"Meta"},"meta"),...h.flatMap(g=>[k.jsx("th",{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),k.jsxs("th",{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),k.jsx("th",{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>k.jsxs("tr",{children:[k.jsx("td",{children:k.jsx(jn,{justify:"center",children:k.jsx(Zw,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),k.jsx("td",{style:{whiteSpace:"nowrap"},children:g.participantId}),k.jsx("td",{children:k.jsxs(jn,{direction:"row",align:"center",children:[g.rejected?k.jsx(of,{label:"Rejected",children:k.jsx(DOe,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?k.jsx(of,{label:"Completed",children:k.jsx(d0t,{size:16,color:"teal",style:{marginBottom:-3}})}):k.jsx(of,{label:"In Progress",children:k.jsx(_0t,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&k.jsxs(ze,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(Xp(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?k.jsx($Jt,{metaData:g.metadata}):k.jsx("td",{children:"N/A"}),h.map(y=>{const v=Yke(g.sequence,y.orderPath),_=v&&Object.entries(g.answers).sort((w,x)=>{const E=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),b=parseInt(x[0].slice(x[0].lastIndexOf("_")+1),10);return E-b}).filter(([w])=>{const x=w.slice(0,w.lastIndexOf("_")),E=parseInt(w.slice(w.lastIndexOf("_")+1),10);return x===y.componentName&&E<=v[0].lastIndex&&E>=v[0].firstIndex});return _!==null&&_.length>=y.timesSeenInBlock+1?k.jsxs(F.Fragment,{children:[k.jsx(kJt,{cellData:_[y.timesSeenInBlock][1]}),k.jsx(Nye,{cellData:_[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):k.jsxs(F.Fragment,{children:[k.jsx("td",{children:"N/A"}),k.jsx("td",{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),k.jsx(Nye,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?k.jsxs(k.Fragment,{children:[k.jsx(If,{visible:l,overlayBlur:2}),k.jsxs(jn,{justify:"space-between",mb:8,p:8,children:[k.jsx(Wa,{children:k.jsx(d4,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,icon:k.jsx(E0t,{size:14}),onChange:g=>g&&d(g)})}),k.jsx(Wa,{children:k.jsx(ur,{disabled:a.length===0,onClick:f,color:"red",size:"xs",children:"Reject Participants"})})]}),k.jsxs(dK,{striped:!0,withBorder:!0,children:[k.jsx("thead",{children:k.jsx("tr",{children:p})}),k.jsx("tbody",{children:m})]})]}):k.jsx(jn,{justify:"center",align:"center",style:{height:"100%"},children:k.jsx(ze,{children:"No data available"})})}function NJt({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(""),[c,f]=I.useState([]),[d,h]=I.useState(""),[p,m]=I.useState(!1),[g,y]=I.useState(!1),{storageEngine:v}=nu(),_=v,w=I.useCallback(async()=>{y(!0);const N=await _.getSnapshots(e);f(N),y(!1)},[_,e]);I.useEffect(()=>{w()},[w]);const x=async()=>{m(!0),await _.createSnapshot(e,!1),w(),m(!1),await t()},E=async()=>{m(!0),h(""),r(!1),await _.createSnapshot(e,!0),w(),m(!1),await t()},b=async N=>{m(!0),await _.restoreSnapshot(e,N),w(),m(!1),await t()},T=async()=>{m(!0),h(""),s(!1),await _.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await _.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},C=()=>Y7({title:"Create a Snapshot",children:k.jsx(ze,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>x()}),P=N=>Y7({title:"Restore Snapshot",children:k.jsx(ze,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>b(N)});return k.jsxs(k.Fragment,{children:[k.jsx(If,{visible:p}),k.jsx(Em,{children:k.jsxs(vI,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[k.jsx(Qi,{mb:"lg",order:4,children:"Data Management"}),k.jsxs(jn,{justify:"space-between",align:"center",children:[k.jsxs(dt,{style:{width:"70%"},children:[k.jsx(Qi,{order:5,children:"Create a Snapshot"}),k.jsxs(ze,{children:["This will create a snapshot of the live"," ",k.jsx(ze,{span:!0,fw:700,children:e})," ","database. It will"," ",k.jsx(ze,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),k.jsx(of,{label:"Create a snapshot",children:k.jsx(ur,{onClick:C,children:"Snapshot"})})]}),k.jsx(Ef,{h:"lg"}),k.jsxs(jn,{justify:"space-between",align:"center",children:[k.jsxs(dt,{style:{width:"70%"},children:[k.jsx(Qi,{order:5,children:"Archive Data"}),k.jsxs(ze,{children:["This will create a snapshot of the live"," ",k.jsx(ze,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),k.jsx(of,{label:"Snapshot and Delete Data",children:k.jsx(ur,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),k.jsx(Ef,{h:"lg"}),k.jsxs(jn,{justify:"space-between",align:"center",children:[k.jsxs(dt,{style:{width:"70%"},children:[k.jsx(Qi,{order:5,children:"Delete Data"}),k.jsxs(ze,{children:["This will delete the live"," ",k.jsx(ze,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),k.jsx(of,{label:"Delete Data",children:k.jsx(ur,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),k.jsx(Ef,{h:"xl"}),k.jsxs(jn,{direction:"column",children:[k.jsx(jn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:k.jsx(Qi,{order:5,children:"Snapshots"})}),k.jsxs(dt,{style:{position:"relative"},children:[k.jsx(If,{visible:g}),c.length>0?c.map(N=>k.jsxs(jn,{justify:"space-between",mb:"xs",children:[k.jsx(ze,{children:N}),k.jsxs(jn,{direction:"row",gap:"xs",children:[k.jsx(of,{label:"Restore Snapshot",children:k.jsx(g0,{color:"blue",variant:"subtle",onClick:()=>{P(N)},children:k.jsx(b0t,{})})}),k.jsx(of,{label:"Delete Snapshot",children:k.jsx(g0,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(N)},children:k.jsx(ROe,{})})})]})]},N)):k.jsx(ze,{children:"No snapshots."})]})]})]})}),k.jsxs(ac,{opened:n,onClose:()=>{r(!1),h("")},title:k.jsx(ze,{children:"Archive Data"}),children:[k.jsx(ze,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),k.jsx(Kv,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:N=>h(N.target.value)}),k.jsxs(jn,{mt:"sm",justify:"right",children:[k.jsx(ur,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),k.jsx(ur,{color:"red",onClick:E,disabled:d!==e,children:"Archive"})]})]}),k.jsxs(ac,{opened:i,onClose:()=>{s(!1),h("")},title:k.jsx(ze,{children:"Delete Snapshot"}),children:[k.jsxs(ze,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",k.jsx(ze,{span:!0,fw:700,children:"irreversible"}),"."]}),k.jsx(Kv,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:N=>h(N.target.value)}),k.jsxs(jn,{mt:"sm",justify:"right",children:[k.jsx(ur,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),k.jsx(ur,{color:"red",onClick:T,disabled:d!==e,children:"Delete"})]})]}),k.jsxs(ac,{opened:o,onClose:()=>{a(!1),h("")},title:k.jsx(ze,{children:"Delete Live Data"}),children:[k.jsxs(ze,{mb:"sm",children:["This will permanently delete the live"," ",k.jsx(ze,{span:!0,fw:700,children:e})," ","data. This action is"," ",k.jsx(ze,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),k.jsx(Kv,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:N=>h(N.target.value)}),k.jsxs(jn,{mt:"sm",justify:"right",children:[k.jsx(ur,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),k.jsx(ur,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function DJt(e){const{globalConfig:t}=e,{studyId:n}=Kw(),[r,i]=I.useState([]),[s,o]=I.useState(void 0),[a,u]=I.useState(!1),{storageEngine:l}=nu(),c=ym(),{tab:f}=Kw(),d=I.useCallback(async()=>{if(u(!0),n){const g=await w5(n,t);if(!g||!l)return;await l.initializeStudyDb(n,g);const y=await l.getAllParticipantsData();i(y),o(g),u(!1)}},[t,l,n]);I.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=I.useMemo(()=>{const g=r.filter(v=>v.completed),y=r.filter(v=>!v.completed);return[g,y]},[r]),m=l instanceof rf;return k.jsxs(hI,{children:[k.jsx(iC,{studyIds:e.globalConfig.configsList}),k.jsxs(Em,{fluid:!0,style:{height:"100%"},children:[k.jsx(If,{visible:a}),k.jsxs(du,{variant:"outline",value:f,onTabChange:g=>c(`./../${g}`),style:{height:"100%"},children:[k.jsxs(du.List,{children:[k.jsx(du.Tab,{value:"table",icon:k.jsx(S0t,{size:16}),children:"Table View"}),k.jsx(du.Tab,{value:"stats",icon:k.jsx(c0t,{size:16}),children:"Trial Stats"}),k.jsx(du.Tab,{value:"replay",icon:k.jsx(v0t,{size:16}),children:"Individual Replay"}),k.jsx(du.Tab,{value:"manage",icon:k.jsx(kOe,{size:16}),disabled:!m,children:"Manage"})]}),k.jsx(du.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&k.jsx(RJt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),k.jsx(du.Panel,{value:"stats",pt:"xs",children:"statsboard"}),k.jsx(du.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),k.jsx(du.Panel,{value:"manage",pt:"xs",children:n&&m&&k.jsx(NJt,{studyId:n,refresh:d})})]})]})]})}function _U({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=YS(),{storageEngine:i}=nu();return I.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?k.jsx(If,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?k.jsx(bY,{to:"/login"}):k.jsx(k.Fragment,{children:e})}async function V5e(e,t,n){if(e instanceof rf){t(!0);const r=new dp,i=L5e();try{await EQt(i,r,M5e)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function MJt(){const{user:e}=YS(),[t,n]=I.useState(null),[r,i]=I.useState(!1),{storageEngine:s}=nu();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?k.jsx(bY,{to:"/"}):k.jsx(Em,{children:k.jsx(vI,{p:"lg",children:k.jsxs(jn,{align:"center",direction:"column",justify:"center",children:[k.jsx(l_,{maw:200,mt:50,mb:100,src:`${bh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),k.jsxs(k.Fragment,{children:[k.jsx(ze,{mb:20,children:"To access admin settings, please sign in using your Google account."}),k.jsx(ur,{onClick:()=>V5e(s,i,n),leftIcon:k.jsx(u0t,{}),variant:"filled",children:"Sign In With Google"})]}),t?k.jsx(Yv,{size:"lg",color:"red",mt:30,children:t}):null,k.jsx(If,{visible:r})]})})})}function LJt(e,t="monday"){const n=new Date(e),r=n.getDay(),i=t==="sunday",s=7-(i?r+1:r);return(i&&r!==6||r!==0)&&n.setDate(n.getDate()+s),n}function H5e(e,t="monday"){const n=new Date(e),r=n.getDay()||7,i=t==="sunday",s=i?r:r-1;return(i&&r!==0||r!==1)&&n.setHours(-24*s),n}function FJt(e,t="monday"){const n=e.getMonth(),r=new Date(e.getFullYear(),n,1),i=new Date(e.getFullYear(),e.getMonth()+1,0),s=LJt(i,t),o=H5e(r,t),a=[];for(;o<=s;){const u=[];for(let l=0;l<7;l+=1)u.push(new Date(o)),o.setDate(o.getDate()+1);a.push(u)}return a}var q5e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Cu,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var B=["th","st","nd","rd"],z=M%100;return"["+M+(B[(z-20)%10]||B[z]||B[0])+"]"}},_=function(M,B,z){var W=String(M);return!W||W.length>=B?M:""+Array(B+1-W.length).join(z)+M},w={s:_,z:function(M){var B=-M.utcOffset(),z=Math.abs(B),W=Math.floor(z/60),U=z%60;return(B<=0?"+":"-")+_(W,2,"0")+":"+_(U,2,"0")},m:function M(B,z){if(B.date()<z.date())return-M(z,B);var W=12*(z.year()-B.year())+(z.month()-B.month()),U=B.clone().add(W,f),Y=z-U<0,q=B.clone().add(W+(Y?-1:1),f);return+(-(W+(z-U)/(Y?U-q:q-U))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},x="en",E={};E[x]=v;var b="$isDayjsObject",T=function(M){return M instanceof N||!(!M||!M[b])},A=function M(B,z,W){var U;if(!B)return x;if(typeof B=="string"){var Y=B.toLowerCase();E[Y]&&(U=Y),z&&(E[Y]=z,U=Y);var q=B.split("-");if(!U&&q.length>1)return M(q[0])}else{var D=B.name;E[D]=B,U=D}return!W&&U&&(x=U),U||!W&&x},C=function(M,B){if(T(M))return M.clone();var z=typeof B=="object"?B:{};return z.date=M,z.args=arguments,new N(z)},P=w;P.l=A,P.i=T,P.w=function(M,B){return C(M,{locale:B.$L,utc:B.$u,x:B.$x,$offset:B.$offset})};var N=function(){function M(z){this.$L=A(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[b]=!0}var B=M.prototype;return B.parse=function(z){this.$d=function(W){var U=W.date,Y=W.utc;if(U===null)return new Date(NaN);if(P.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var q=U.match(g);if(q){var D=q[2]-1||0,L=(q[7]||"0").substring(0,3);return Y?new Date(Date.UTC(q[1],D,q[3]||1,q[4]||0,q[5]||0,q[6]||0,L)):new Date(q[1],D,q[3]||1,q[4]||0,q[5]||0,q[6]||0,L)}}return new Date(U)}(z),this.init()},B.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},B.$utils=function(){return P},B.isValid=function(){return this.$d.toString()!==m},B.isSame=function(z,W){var U=C(z);return this.startOf(W)<=U&&U<=this.endOf(W)},B.isAfter=function(z,W){return C(z)<this.startOf(W)},B.isBefore=function(z,W){return this.endOf(W)<C(z)},B.$g=function(z,W,U){return P.u(z)?this[W]:this.set(U,z)},B.unix=function(){return Math.floor(this.valueOf()/1e3)},B.valueOf=function(){return this.$d.getTime()},B.startOf=function(z,W){var U=this,Y=!!P.u(W)||W,q=P.p(z),D=function(ye,de){var we=P.w(U.$u?Date.UTC(U.$y,de,ye):new Date(U.$y,de,ye),U);return Y?we:we.endOf(l)},L=function(ye,de){return P.w(U.toDate()[ye].apply(U.toDate("s"),(Y?[0,0,0,0]:[23,59,59,999]).slice(de)),U)},G=this.$W,V=this.$M,H=this.$D,te="set"+(this.$u?"UTC":"");switch(q){case h:return Y?D(1,0):D(31,11);case f:return Y?D(1,V):D(0,V+1);case c:var le=this.$locale().weekStart||0,me=(G<le?G+7:G)-le;return D(Y?H-me:H+(6-me),V);case l:case p:return L(te+"Hours",0);case u:return L(te+"Minutes",1);case a:return L(te+"Seconds",2);case o:return L(te+"Milliseconds",3);default:return this.clone()}},B.endOf=function(z){return this.startOf(z,!1)},B.$set=function(z,W){var U,Y=P.p(z),q="set"+(this.$u?"UTC":""),D=(U={},U[l]=q+"Date",U[p]=q+"Date",U[f]=q+"Month",U[h]=q+"FullYear",U[u]=q+"Hours",U[a]=q+"Minutes",U[o]=q+"Seconds",U[s]=q+"Milliseconds",U)[Y],L=Y===l?this.$D+(W-this.$W):W;if(Y===f||Y===h){var G=this.clone().set(p,1);G.$d[D](L),G.init(),this.$d=G.set(p,Math.min(this.$D,G.daysInMonth())).$d}else D&&this.$d[D](L);return this.init(),this},B.set=function(z,W){return this.clone().$set(z,W)},B.get=function(z){return this[P.p(z)]()},B.add=function(z,W){var U,Y=this;z=Number(z);var q=P.p(W),D=function(V){var H=C(Y);return P.w(H.date(H.date()+Math.round(V*z)),Y)};if(q===f)return this.set(f,this.$M+z);if(q===h)return this.set(h,this.$y+z);if(q===l)return D(1);if(q===c)return D(7);var L=(U={},U[a]=r,U[u]=i,U[o]=n,U)[q]||1,G=this.$d.getTime()+z*L;return P.w(G,this)},B.subtract=function(z,W){return this.add(-1*z,W)},B.format=function(z){var W=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var Y=z||"YYYY-MM-DDTHH:mm:ssZ",q=P.z(this),D=this.$H,L=this.$m,G=this.$M,V=U.weekdays,H=U.months,te=U.meridiem,le=function(de,we,he,He){return de&&(de[we]||de(W,Y))||he[we].slice(0,He)},me=function(de){return P.s(D%12||12,de,"0")},ye=te||function(de,we,he){var He=de<12?"AM":"PM";return he?He.toLowerCase():He};return Y.replace(y,function(de,we){return we||function(he){switch(he){case"YY":return String(W.$y).slice(-2);case"YYYY":return P.s(W.$y,4,"0");case"M":return G+1;case"MM":return P.s(G+1,2,"0");case"MMM":return le(U.monthsShort,G,H,3);case"MMMM":return le(H,G);case"D":return W.$D;case"DD":return P.s(W.$D,2,"0");case"d":return String(W.$W);case"dd":return le(U.weekdaysMin,W.$W,V,2);case"ddd":return le(U.weekdaysShort,W.$W,V,3);case"dddd":return V[W.$W];case"H":return String(D);case"HH":return P.s(D,2,"0");case"h":return me(1);case"hh":return me(2);case"a":return ye(D,L,!0);case"A":return ye(D,L,!1);case"m":return String(L);case"mm":return P.s(L,2,"0");case"s":return String(W.$s);case"ss":return P.s(W.$s,2,"0");case"SSS":return P.s(W.$ms,3,"0");case"Z":return q}return null}(de)||q.replace(":","")})},B.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},B.diff=function(z,W,U){var Y,q=this,D=P.p(W),L=C(z),G=(L.utcOffset()-this.utcOffset())*r,V=this-L,H=function(){return P.m(q,L)};switch(D){case h:Y=H()/12;break;case f:Y=H();break;case d:Y=H()/3;break;case c:Y=(V-G)/6048e5;break;case l:Y=(V-G)/864e5;break;case u:Y=V/i;break;case a:Y=V/r;break;case o:Y=V/n;break;default:Y=V}return U?Y:P.a(Y)},B.daysInMonth=function(){return this.endOf(f).$D},B.$locale=function(){return E[this.$L]},B.locale=function(z,W){if(!z)return this.$L;var U=this.clone(),Y=A(z,W,!0);return Y&&(U.$L=Y),U},B.clone=function(){return P.w(this.$d,this)},B.toDate=function(){return new Date(this.valueOf())},B.toJSON=function(){return this.isValid()?this.toISOString():null},B.toISOString=function(){return this.$d.toISOString()},B.toString=function(){return this.$d.toUTCString()},M}(),$=N.prototype;return C.prototype=$,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(M){$[M[1]]=function(B){return this.$g(B,M[0],M[1])}}),C.extend=function(M,B){return M.$i||(M(B,N,C),M.$i=!0),C},C.locale=A,C.isDayjs=T,C.unix=function(M){return C(1e3*M)},C.en=E[x],C.Ls=E,C.p={},C})})(q5e);var jJt=q5e.exports;const Rn=$l(jJt);function BJt(e,t="MMM"){const n=[],r=new Date(2021,0,1);for(let i=0;i<12;i+=1)n.push(Rn(r).locale(e).format(t)),r.setMonth(r.getMonth()+1);return n}function UJt(e,t="monday",n="dd"){const r=[],i=H5e(new Date,t);for(let s=0;s<7;s+=1)r.push(Rn(i).locale(e).format(n)),i.setDate(i.getDate()+1);return r}function W5e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function fm(e,t){return W5e(e,t)&&e.getDate()===t.getDate()}function zJt(e){const t=e-e%10-1,n=[];for(let r=0;r<12;r+=1){const i=t+r;n.push(i)}return n}var VJt=Object.defineProperty,HJt=Object.defineProperties,qJt=Object.getOwnPropertyDescriptors,zM=Object.getOwnPropertySymbols,G5e=Object.prototype.hasOwnProperty,Y5e=Object.prototype.propertyIsEnumerable,Dye=(e,t,n)=>t in e?VJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Mye=(e,t)=>{for(var n in t||(t={}))G5e.call(t,n)&&Dye(e,n,t[n]);if(zM)for(var n of zM(t))Y5e.call(t,n)&&Dye(e,n,t[n]);return e},WJt=(e,t)=>HJt(e,qJt(t)),GJt=(e,t)=>{var n={};for(var r in e)G5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&zM)for(var r of zM(e))t.indexOf(r)<0&&Y5e.call(e,r)&&(n[r]=e[r]);return n};function _q(e){var t=e,{direction:n,style:r}=t,i=GJt(t,["direction","style"]);const s=As();return F.createElement("svg",Mye({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:WJt(Mye({},r),{transform:n==="right"&&s.dir==="ltr"||n==="left"&&s.dir==="rtl"?"rotate(180deg)":"none"})},i),F.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}_q.displayName="@mantine/dates/ArrowIcon";var YJt=Object.defineProperty,KJt=Object.defineProperties,XJt=Object.getOwnPropertyDescriptors,Lye=Object.getOwnPropertySymbols,QJt=Object.prototype.hasOwnProperty,JJt=Object.prototype.propertyIsEnumerable,Fye=(e,t,n)=>t in e?YJt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ZJt=(e,t)=>{for(var n in t||(t={}))QJt.call(t,n)&&Fye(e,n,t[n]);if(Lye)for(var n of Lye(t))JJt.call(t,n)&&Fye(e,n,t[n]);return e},eZt=(e,t)=>KJt(e,XJt(t));const bU={xs:32,sm:40,md:44,lg:50,xl:54};var tZt=yt((e,{size:t})=>({calendarHeader:{display:"flex",justifyContent:"space-between",align:"center",marginBottom:e.fn.size({size:t,sizes:e.spacing})},calendarHeaderControl:{width:e.fn.size({size:t,sizes:bU}),height:e.fn.size({size:t,sizes:bU}),"&:disabled":{opacity:0,cursor:"default"}},calendarHeaderLevel:eZt(ZJt({display:"flex",alignItems:"center",justifyContent:"center",height:e.fn.size({size:t,sizes:bU}),fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:`0 ${e.fn.size({size:t,sizes:e.spacing})}px`,borderRadius:e.radius.sm,fontWeight:500,flex:1,textAlign:"center",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":e.fn.hover({backgroundColor:"transparent",cursor:"default"})}),calendarHeaderLevelIcon:{marginLeft:4}})),nZt=Object.defineProperty,VM=Object.getOwnPropertySymbols,K5e=Object.prototype.hasOwnProperty,X5e=Object.prototype.propertyIsEnumerable,jye=(e,t,n)=>t in e?nZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rZt=(e,t)=>{for(var n in t||(t={}))K5e.call(t,n)&&jye(e,n,t[n]);if(VM)for(var n of VM(t))X5e.call(t,n)&&jye(e,n,t[n]);return e},iZt=(e,t)=>{var n={};for(var r in e)K5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&VM)for(var r of VM(e))t.indexOf(r)<0&&X5e.call(e,r)&&(n[r]=e[r]);return n};const sZt={xs:12,sm:14,md:18,lg:22,xl:28};function E5(e){var t=e,{hasNext:n,hasPrevious:r,onNext:i,onPrevious:s,onNextLevel:o,className:a,label:u,nextLevelDisabled:l,size:c,classNames:f,styles:d,__staticSelector:h="CalendarHeader",nextLabel:p,previousLabel:m,preventLevelFocus:g=!1,preventFocus:y,unstyled:v,__stopPropagation:_}=t,w=iZt(t,["hasNext","hasPrevious","onNext","onPrevious","onNextLevel","className","label","nextLevelDisabled","size","classNames","styles","__staticSelector","nextLabel","previousLabel","preventLevelFocus","preventFocus","unstyled","__stopPropagation"]);const{classes:x,cx:E,theme:b}=tZt({size:c},{classNames:f,styles:d,unstyled:v,name:h}),T=b.fn.size({size:c,sizes:sZt});return F.createElement("div",rZt({className:E(x.calendarHeader,a)},w),F.createElement(g0,{className:x.calendarHeaderControl,disabled:!r,onClick:s,"aria-label":m,onMouseDown:A=>y&&A.preventDefault(),unstyled:v,"data-mantine-stop-propagation":_||void 0},F.createElement(_q,{direction:"left",width:T,height:T})),F.createElement(vm,{unstyled:v,className:x.calendarHeaderLevel,disabled:l,onClick:o,tabIndex:g?-1:0,onMouseDown:A=>y&&A.preventDefault(),"data-mantine-stop-propagation":_||void 0},u,!l&&F.createElement(eIe,{error:!1,size:c,className:x.calendarHeaderLevelIcon})),F.createElement(g0,{className:x.calendarHeaderControl,disabled:!n,onClick:i,"aria-label":p,unstyled:v,onMouseDown:A=>y&&A.preventDefault(),"data-mantine-stop-propagation":_||void 0},F.createElement(_q,{direction:"right",width:T,height:T})))}E5.displayName="@mantine/dates/CalendarHeader";function vR(e,t){return Rn(new Date(e,1,1)).format(t)}var oZt=Object.defineProperty,aZt=Object.defineProperties,uZt=Object.getOwnPropertyDescriptors,Bye=Object.getOwnPropertySymbols,lZt=Object.prototype.hasOwnProperty,cZt=Object.prototype.propertyIsEnumerable,Uye=(e,t,n)=>t in e?oZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wU=(e,t)=>{for(var n in t||(t={}))lZt.call(t,n)&&Uye(e,n,t[n]);if(Bye)for(var n of Bye(t))cZt.call(t,n)&&Uye(e,n,t[n]);return e},fZt=(e,t)=>aZt(e,uZt(t));const dZt={xs:32,sm:40,md:46,lg:52,xl:56};var hZt=yt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{yearPicker:{width:"100%"},yearPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},yearPickerControl:fZt(wU({flex:"0 0 25%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:dZt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":wU({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),yearPickerControlActive:wU({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),pZt=Object.defineProperty,HM=Object.getOwnPropertySymbols,Q5e=Object.prototype.hasOwnProperty,J5e=Object.prototype.propertyIsEnumerable,zye=(e,t,n)=>t in e?pZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mZt=(e,t)=>{for(var n in t||(t={}))Q5e.call(t,n)&&zye(e,n,t[n]);if(HM)for(var n of HM(t))J5e.call(t,n)&&zye(e,n,t[n]);return e},gZt=(e,t)=>{var n={};for(var r in e)Q5e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&HM)for(var r of HM(e))t.indexOf(r)<0&&J5e.call(e,r)&&(n[r]=e[r]);return n};function Z5e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,size:a,minYear:u,maxYear:l,__staticSelector:c="YearPicker",nextDecadeLabel:f,previousDecadeLabel:d,preventFocus:h,unstyled:p,yearLabelFormat:m="YYYY",__stopPropagation:g}=t,y=gZt(t,["className","styles","classNames","value","onChange","size","minYear","maxYear","__staticSelector","nextDecadeLabel","previousDecadeLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:v,cx:_}=hZt({size:a},{classNames:i,styles:r,unstyled:p,name:c}),[w,x]=I.useState(s),E=zJt(w),b=E.map(T=>F.createElement(vm,{key:T,unstyled:p,onClick:()=>o(T),disabled:T<u||T>l,onMouseDown:A=>h&&A.preventDefault(),"data-mantine-stop-propagation":g||void 0,className:_(v.yearPickerControl,{[v.yearPickerControlActive]:T===s})},vR(T,m)));return F.createElement("div",mZt({className:_(v.yearPicker,n)},y),F.createElement(E5,{unstyled:p,label:`${vR(E[0],m)}  ${vR(E[E.length-1],m)}`,hasPrevious:typeof u=="number"?u<E[0]:!0,hasNext:typeof l=="number"?l>E[E.length-1]:!0,onNext:()=>x(T=>T+10),onPrevious:()=>x(T=>T-10),nextLevelDisabled:!0,size:a,nextLabel:f,previousLabel:d,styles:r,classNames:i,__staticSelector:c,preventFocus:h,__stopPropagation:g}),F.createElement("div",{className:v.yearPickerControls},b))}Z5e.displayName="@mantine/dates/YearPicker";function bq({date:e,minDate:t,maxDate:n}){const r=t instanceof Date,i=n instanceof Date;if(!i&&!r)return!0;const s=Rn(e).endOf("month"),o=Rn(e).startOf("month"),a=i?o.isBefore(n):!0,u=r?s.isAfter(t):!0;return a&&u}var yZt=Object.defineProperty,vZt=Object.defineProperties,_Zt=Object.getOwnPropertyDescriptors,Vye=Object.getOwnPropertySymbols,bZt=Object.prototype.hasOwnProperty,wZt=Object.prototype.propertyIsEnumerable,Hye=(e,t,n)=>t in e?yZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EU=(e,t)=>{for(var n in t||(t={}))bZt.call(t,n)&&Hye(e,n,t[n]);if(Vye)for(var n of Vye(t))wZt.call(t,n)&&Hye(e,n,t[n]);return e},EZt=(e,t)=>vZt(e,_Zt(t));const SZt={xs:32,sm:40,md:46,lg:52,xl:56};var xZt=yt((e,{size:t})=>{const n=e.fn.variant({color:e.primaryColor,variant:"filled"});return{monthPicker:{width:"100%"},monthPickerControls:{display:"flex",flexWrap:"wrap",justifyContent:"center"},monthPickerControl:EZt(EU({flex:"0 0 33.3333%",color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,height:e.fn.size({size:t,sizes:SZt}),textAlign:"center",borderRadius:e.radius.sm,fontSize:e.fn.size({size:t,sizes:e.fontSizes})},e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[0]})),{"&:disabled":EU({color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4],cursor:"not-allowed"},e.fn.hover({backgroundColor:"transparent"}))}),monthPickerControlActive:EU({backgroundColor:n.background,color:n.color},e.fn.hover({backgroundColor:n.hover}))}}),TZt=Object.defineProperty,qM=Object.getOwnPropertySymbols,e8e=Object.prototype.hasOwnProperty,t8e=Object.prototype.propertyIsEnumerable,qye=(e,t,n)=>t in e?TZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CZt=(e,t)=>{for(var n in t||(t={}))e8e.call(t,n)&&qye(e,n,t[n]);if(qM)for(var n of qM(t))t8e.call(t,n)&&qye(e,n,t[n]);return e},AZt=(e,t)=>{var n={};for(var r in e)e8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&qM)for(var r of qM(e))t.indexOf(r)<0&&t8e.call(e,r)&&(n[r]=e[r]);return n};function n8e(e){var t=e,{className:n,styles:r,classNames:i,value:s,onChange:o,locale:a,year:u,onYearChange:l,onNextLevel:c,size:f,minDate:d,maxDate:h,__staticSelector:p="MonthPicker",nextYearLabel:m,previousYearLabel:g,preventFocus:y,unstyled:v,yearLabelFormat:_="YYYY",__stopPropagation:w}=t,x=AZt(t,["className","styles","classNames","value","onChange","locale","year","onYearChange","onNextLevel","size","minDate","maxDate","__staticSelector","nextYearLabel","previousYearLabel","preventFocus","unstyled","yearLabelFormat","__stopPropagation"]);const{classes:E,cx:b}=xZt({size:f},{classNames:i,styles:r,unstyled:v,name:p}),T=BJt(a),A=d instanceof Date?d.getFullYear():void 0,C=h instanceof Date?h.getFullYear():void 0,P=T.map((N,$)=>F.createElement(vm,{key:N,unstyled:v,onClick:()=>o($),className:b(E.monthPickerControl,{[E.monthPickerControlActive]:$===s.month&&u===s.year}),disabled:!bq({date:new Date(u,$),minDate:d,maxDate:h}),onMouseDown:M=>y&&M.preventDefault(),"data-mantine-stop-propagation":w||void 0},N));return F.createElement("div",CZt({className:b(E.monthPicker,n)},x),F.createElement(E5,{label:vR(u,_),hasNext:typeof C=="number"?u<C:!0,hasPrevious:typeof A=="number"?u>A:!0,onNext:()=>l(u+1),onPrevious:()=>l(u-1),onNextLevel:c,size:f,classNames:i,styles:r,__staticSelector:p,nextLabel:m,previousLabel:g,preventFocus:y,unstyled:v,__stopPropagation:w}),F.createElement("div",{className:E.monthPickerControls},P))}n8e.displayName="@mantine/dates/MonthPicker";function IZt({month:e,locale:t,format:n}){return Cg(Rn(e).locale(t).format(n))}function OZt({focusable:e,hasValue:t,selected:n,firstInMonth:r}){return e?t?n?0:-1:r?0:-1:-1}function PZt({hasValue:e,selected:t,firstInMonth:n}){return e?t?!0:void 0:n?!0:void 0}var kZt=Object.defineProperty,$Zt=Object.defineProperties,RZt=Object.getOwnPropertyDescriptors,Wye=Object.getOwnPropertySymbols,NZt=Object.prototype.hasOwnProperty,DZt=Object.prototype.propertyIsEnumerable,Gye=(e,t,n)=>t in e?kZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,SU=(e,t)=>{for(var n in t||(t={}))NZt.call(t,n)&&Gye(e,n,t[n]);if(Wye)for(var n of Wye(t))DZt.call(t,n)&&Gye(e,n,t[n]);return e},Yye=(e,t)=>$Zt(e,RZt(t));const _R={xs:34,sm:38,md:46,lg:58,xl:66};var MZt=yt((e,{size:t,fullWidth:n,hideOutsideDates:r})=>({day:Yye(SU(Yye(SU(SU({},e.fn.fontStyles()),e.fn.focusStyles()),{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",width:n?"100%":e.fn.size({size:t,sizes:_R}),height:e.fn.size({size:t,sizes:_R}),lineHeight:`${e.fn.size({size:t,sizes:_R})}px`,fontSize:e.fn.size({size:t,sizes:e.fontSizes}),padding:0,borderRadius:e.radius.sm,border:"none",cursor:"pointer",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[0]:e.colors.gray[7],"&:disabled":{pointerEvents:"none",color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}}),e.fn.hover({backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]})),{"&[data-weekend]":{color:e.colorScheme==="dark"?e.colors.red[5]:e.colors.red[7]},"&[data-outside]":{display:r?"none":void 0,color:`${e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}`},"&[data-in-range]":{backgroundColor:e.fn.variant({variant:"light"}).background,borderRadius:0},"&[data-selected]":{backgroundColor:e.fn.variant({variant:"filled"}).background,color:e.white},"&[data-first-in-range]":{borderTopLeftRadius:e.radius.sm,borderBottomLeftRadius:e.radius.sm},"&[data-last-in-range]":{borderTopRightRadius:e.radius.sm,borderBottomRightRadius:e.radius.sm}})})),LZt=Object.defineProperty,FZt=Object.defineProperties,jZt=Object.getOwnPropertyDescriptors,WM=Object.getOwnPropertySymbols,r8e=Object.prototype.hasOwnProperty,i8e=Object.prototype.propertyIsEnumerable,Kye=(e,t,n)=>t in e?LZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,BZt=(e,t)=>{for(var n in t||(t={}))r8e.call(t,n)&&Kye(e,n,t[n]);if(WM)for(var n of WM(t))i8e.call(t,n)&&Kye(e,n,t[n]);return e},UZt=(e,t)=>FZt(e,jZt(t)),zZt=(e,t)=>{var n={};for(var r in e)r8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&WM)for(var r of WM(e))t.indexOf(r)<0&&i8e.call(e,r)&&(n[r]=e[r]);return n};const s8e=I.forwardRef((e,t)=>{var n=e,{className:r,value:i,selected:s,weekend:o,outside:a,onMouseEnter:u,classNames:l,styles:c,hasValue:f,firstInRange:d,lastInRange:h,__staticSelector:p="Month",inRange:m,size:g,fullWidth:y,firstInMonth:v,focusable:_,hideOutsideDates:w,renderDay:x,unstyled:E,disabled:b,stopPropagation:T}=n,A=zZt(n,["className","value","selected","weekend","outside","onMouseEnter","classNames","styles","hasValue","firstInRange","lastInRange","__staticSelector","inRange","size","fullWidth","firstInMonth","focusable","hideOutsideDates","renderDay","unstyled","disabled","stopPropagation"]);const{classes:C,cx:P}=MZt({size:g,fullWidth:y,hideOutsideDates:w},{classNames:l,styles:c,unstyled:E,name:p});return F.createElement("button",UZt(BZt({},A),{type:"button",ref:t,disabled:b,onMouseEnter:N=>u(i,N),tabIndex:OZt({focusable:_,hasValue:f,selected:s,firstInMonth:v}),"data-autofocus":PZt({hasValue:f,selected:s,firstInMonth:v}),"data-mantine-stop-propagation":T||void 0,"data-outside":a&&!b||void 0,"data-weekend":o&&!b||void 0,"data-selected":s&&!b||void 0,"data-in-range":m&&!b||void 0,"data-first-in-range":d&&!b||void 0,"data-last-in-range":h&&!b||void 0,className:P(C.day,r)}),typeof x=="function"?x(i):i.getDate())});s8e.displayName="@mantine/core/Day";function VZt(e,t=[0,6]){return t.includes(e.getDay())}function HZt(e,t){return!W5e(e,t)}function qZt({minDate:e,maxDate:t,excludeDate:n,disableOutsideEvents:r,date:i,outside:s}){const o=t instanceof Date&&Rn(t).isBefore(i,"day"),a=e instanceof Date&&Rn(e).isAfter(i,"day"),u=typeof n=="function"&&n(i);return o||a||u||!!r&&!!s}function WZt(e,t){const n=Array.isArray(t)&&t.every(a=>a instanceof Date),r=n&&[Rn(t[0]).subtract(1,"day"),Rn(t[1]).add(1,"day")],i=n&&fm(e,t[0]),s=n&&fm(e,t[1]),o=n&&Rn(e).isAfter(r[0],"day")&&Rn(e).isBefore(r[1],"day");return{firstInRange:i,lastInRange:s,inRange:o,selectedInRange:i||s}}function Xye({date:e,month:t,hasValue:n,minDate:r,maxDate:i,value:s,excludeDate:o,disableOutsideEvents:a,range:u,weekendDays:l}){const c=HZt(e,t),f=n&&(Array.isArray(s)?s.some(g=>fm(g,e)):fm(e,s)),{inRange:d,lastInRange:h,firstInRange:p,selectedInRange:m}=WZt(e,u);return{disabled:qZt({minDate:r,maxDate:i,excludeDate:o,disableOutsideEvents:a,date:e,outside:c}),weekend:VZt(e,l),selectedInRange:m,selected:f,inRange:d,firstInRange:p,lastInRange:h,outside:c}}var GZt=Object.defineProperty,YZt=Object.defineProperties,KZt=Object.getOwnPropertyDescriptors,Qye=Object.getOwnPropertySymbols,XZt=Object.prototype.hasOwnProperty,QZt=Object.prototype.propertyIsEnumerable,Jye=(e,t,n)=>t in e?GZt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,JZt=(e,t)=>{for(var n in t||(t={}))XZt.call(t,n)&&Jye(e,n,t[n]);if(Qye)for(var n of Qye(t))QZt.call(t,n)&&Jye(e,n,t[n]);return e},ZZt=(e,t)=>YZt(e,KZt(t)),een=yt((e,{fullWidth:t})=>({weekday:{color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[5]},month:ZZt(JZt({},e.fn.fontStyles()),{borderCollapse:"collapse",width:t?"100%":"auto",tableLayout:"fixed"}),cell:{boxSizing:"border-box",padding:0,borderTop:"1px solid transparent"},weekdayCell:{boxSizing:"border-box",padding:0,fontWeight:"normal",paddingBottom:`calc(${e.spacing.xs}px / 2)`,textAlign:"center",cursor:"default",userSelect:"none"}})),ten=Object.defineProperty,GM=Object.getOwnPropertySymbols,o8e=Object.prototype.hasOwnProperty,a8e=Object.prototype.propertyIsEnumerable,Zye=(e,t,n)=>t in e?ten(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,nen=(e,t)=>{for(var n in t||(t={}))o8e.call(t,n)&&Zye(e,n,t[n]);if(GM)for(var n of GM(t))a8e.call(t,n)&&Zye(e,n,t[n]);return e},ren=(e,t)=>{var n={};for(var r in e)o8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&GM)for(var r of GM(e))t.indexOf(r)<0&&a8e.call(e,r)&&(n[r]=e[r]);return n};const Mk=()=>!1,ien={disableOutsideEvents:!1,hideWeekdays:!1,__staticSelector:"Month",size:"sm",fullWidth:!1,preventFocus:!1,focusable:!0,firstDayOfWeek:"monday",hideOutsideDates:!1,weekendDays:[0,6],__stopPropagation:!0},u8e=I.forwardRef((e,t)=>{const n=Et("Month",ien,e),{className:r,month:i,value:s,onChange:o,disableOutsideEvents:a,locale:u,dayClassName:l,dayStyle:c,classNames:f,styles:d,minDate:h,maxDate:p,excludeDate:m,onDayMouseEnter:g,range:y,hideWeekdays:v,__staticSelector:_,size:w,fullWidth:x,preventFocus:E,focusable:b,firstDayOfWeek:T,onDayKeyDown:A,daysRefs:C,hideOutsideDates:P,isDateInRange:N=Mk,isDateFirstInRange:$=Mk,isDateLastInRange:M=Mk,renderDay:B,weekdayLabelFormat:z,unstyled:W,weekendDays:U,__stopPropagation:Y}=n,q=ren(n,["className","month","value","onChange","disableOutsideEvents","locale","dayClassName","dayStyle","classNames","styles","minDate","maxDate","excludeDate","onDayMouseEnter","range","hideWeekdays","__staticSelector","size","fullWidth","preventFocus","focusable","firstDayOfWeek","onDayKeyDown","daysRefs","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","weekdayLabelFormat","unstyled","weekendDays","__stopPropagation"]),{classes:D,cx:L,theme:G}=een({fullWidth:x},{classNames:f,styles:d,unstyled:W,name:_}),V=u||G.datesLocale,H=FJt(i,T),te=UJt(V,T,z).map(we=>F.createElement("th",{className:D.weekdayCell,key:we},F.createElement(ze,{size:w,className:D.weekday},we.length>=2?Cg(we):we))),le=Array.isArray(s)?s.every(we=>we instanceof Date):s instanceof Date,me=s instanceof Date&&Rn(s).isAfter(Rn(i).startOf("month"))&&Rn(s).isBefore(Rn(i).endOf("month")),ye=I.useMemo(()=>H.flatMap(we=>we).find(we=>{const he=Xye({date:we,month:i,hasValue:le,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:U});return!he.disabled&&!he.outside})||Rn(i).startOf("month").toDate(),[]),de=H.map((we,he)=>{const He=we.map((Me,Ke)=>{const je=Xye({date:Me,month:i,hasValue:le,minDate:h,maxDate:p,value:s,excludeDate:m,disableOutsideEvents:a,range:y,weekendDays:U}),De={rowIndex:he,cellIndex:Ke,date:Me};return F.createElement("td",{className:D.cell,key:Ke},F.createElement(s8e,{unstyled:W,ref:qe=>{C&&(Array.isArray(C[he])||(C[he]=[]),C[he][Ke]=qe)},onClick:()=>typeof o=="function"&&o(Me),onMouseDown:qe=>E&&qe.preventDefault(),value:Me,outside:je.outside,weekend:je.weekend,inRange:je.inRange||N(Me,je),firstInRange:je.firstInRange||$(Me,je),lastInRange:je.lastInRange||M(Me,je),firstInMonth:fm(Me,ye),selected:je.selected||je.selectedInRange,hasValue:me,onKeyDown:qe=>typeof A=="function"&&A(De,qe),className:typeof l=="function"?l(Me,je):null,style:typeof c=="function"?c(Me,je):null,disabled:je.disabled,onMouseEnter:typeof g=="function"?g:Mk,size:w,fullWidth:x,focusable:b,hideOutsideDates:P,__staticSelector:_,styles:d,classNames:f,renderDay:B,stopPropagation:Y}))});return F.createElement("tr",{key:he},He)});return F.createElement(dt,nen({component:"table",className:L(D.month,r),ref:t},q),!v&&F.createElement("thead",null,F.createElement("tr",null,te)),F.createElement("tbody",null,de))});u8e.displayName="@mantine/dates/Month";var sen=Object.defineProperty,YM=Object.getOwnPropertySymbols,l8e=Object.prototype.hasOwnProperty,c8e=Object.prototype.propertyIsEnumerable,eve=(e,t,n)=>t in e?sen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oen=(e,t)=>{for(var n in t||(t={}))l8e.call(t,n)&&eve(e,n,t[n]);if(YM)for(var n of YM(t))c8e.call(t,n)&&eve(e,n,t[n]);return e},aen=(e,t)=>{var n={};for(var r in e)l8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&YM)for(var r of YM(e))t.indexOf(r)<0&&c8e.call(e,r)&&(n[r]=e[r]);return n};function f8e(e){var t=e,{amountOfMonths:n,paginateBy:r,month:i,locale:s,minDate:o,maxDate:a,allowLevelChange:u,size:l,daysRefs:c,onMonthChange:f,onNextLevel:d,onDayKeyDown:h,classNames:p,styles:m,__staticSelector:g="MonthsList",nextMonthLabel:y,previousMonthLabel:v,labelFormat:_,weekdayLabelFormat:w,preventFocus:x,renderDay:E,unstyled:b,__stopPropagation:T}=t,A=aen(t,["amountOfMonths","paginateBy","month","locale","minDate","maxDate","allowLevelChange","size","daysRefs","onMonthChange","onNextLevel","onDayKeyDown","classNames","styles","__staticSelector","nextMonthLabel","previousMonthLabel","labelFormat","weekdayLabelFormat","preventFocus","renderDay","unstyled","__stopPropagation"]);const C=Rn(i).add(n,"months").toDate(),P=Rn(i).subtract(1,"months").toDate(),N=Array(n).fill(0).map(($,M)=>{const B=Rn(i).add(M,"months").toDate();return F.createElement("div",{key:M},F.createElement(E5,{hasNext:M+1===n&&bq({date:C,minDate:o,maxDate:a}),hasPrevious:M===0&&bq({date:P,minDate:o,maxDate:a}),label:IZt({month:B,locale:s,format:_}),onNext:()=>f(Rn(i).add(r,"months").toDate()),onPrevious:()=>f(Rn(i).subtract(r,"months").toDate()),onNextLevel:d,nextLevelDisabled:!u,size:l,classNames:p,styles:m,__staticSelector:g,nextLabel:y,previousLabel:v,preventLevelFocus:M>0,preventFocus:x,unstyled:b,__stopPropagation:T}),F.createElement(u8e,oen({month:B,daysRefs:c.current[M],onDayKeyDown:(...z)=>h(M,...z),size:l,minDate:o,maxDate:a,classNames:p,styles:m,__staticSelector:g,locale:s,focusable:M===0,preventFocus:x,renderDay:E,weekdayLabelFormat:w,unstyled:b,__stopPropagation:T},A)))});return F.createElement(F.Fragment,null,N)}f8e.displayName="@mantine/dates/MonthsList";var uen=yt((e,{size:t,amountOfMonths:n,fullWidth:r})=>{const i=e.fn.size({size:t,sizes:_R})*7,s=n>1?i*n+(n-1)*e.spacing.md:i;return{calendarBase:{boxSizing:"border-box",display:"flex",gap:e.spacing.md,maxWidth:r?"100%":s}}}),len=Object.defineProperty,KM=Object.getOwnPropertySymbols,d8e=Object.prototype.hasOwnProperty,h8e=Object.prototype.propertyIsEnumerable,tve=(e,t,n)=>t in e?len(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,cen=(e,t)=>{for(var n in t||(t={}))d8e.call(t,n)&&tve(e,n,t[n]);if(KM)for(var n of KM(t))h8e.call(t,n)&&tve(e,n,t[n]);return e},fen=(e,t)=>{var n={};for(var r in e)d8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&KM)for(var r of KM(e))t.indexOf(r)<0&&h8e.call(e,r)&&(n[r]=e[r]);return n};const iee=I.forwardRef((e,t)=>{var n=e,{className:r,classNames:i,styles:s,month:o,initialMonth:a,onMonthChange:u,locale:l,amountOfMonths:c=1,paginateBy:f=c,size:d="sm",allowLevelChange:h=!0,initialLevel:p="date",minDate:m,maxDate:g,__staticSelector:y="CalendarBase",dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:x,hideWeekdays:E,fullWidth:b,preventFocus:T,firstDayOfWeek:A="monday",value:C,onChange:P,onDayMouseEnter:N,range:$,nextDecadeLabel:M,nextMonthLabel:B,nextYearLabel:z,previousDecadeLabel:W,previousMonthLabel:U,previousYearLabel:Y,labelFormat:q="MMMM YYYY",weekdayLabelFormat:D,hideOutsideDates:L,isDateInRange:G,isDateFirstInRange:V,isDateLastInRange:H,renderDay:te,unstyled:le,weekendDays:me,__stopPropagation:ye,yearLabelFormat:de="YYYY"}=n,we=fen(n,["className","classNames","styles","month","initialMonth","onMonthChange","locale","amountOfMonths","paginateBy","size","allowLevelChange","initialLevel","minDate","maxDate","__staticSelector","dayClassName","dayStyle","disableOutsideEvents","excludeDate","hideWeekdays","fullWidth","preventFocus","firstDayOfWeek","value","onChange","onDayMouseEnter","range","nextDecadeLabel","nextMonthLabel","nextYearLabel","previousDecadeLabel","previousMonthLabel","previousYearLabel","labelFormat","weekdayLabelFormat","hideOutsideDates","isDateInRange","isDateFirstInRange","isDateLastInRange","renderDay","unstyled","weekendDays","__stopPropagation","yearLabelFormat"]);const[he,He]=I.useState(p),{classes:Me,cx:Ke,theme:je}=uen({size:d,fullWidth:b,amountOfMonths:he==="date"?c:1},{name:y,styles:s,classNames:i,unstyled:le}),De=l||je.datesLocale,qe=I.useRef(Array(c).fill(0).map(()=>[])),[Qt,rt]=co({value:o,defaultValue:a,finalValue:new Date,onChange:u}),[We,Pt]=I.useState(Qt.getFullYear()),ut=m instanceof Date?m.getFullYear():100,mt=g instanceof Date?g.getFullYear():1e4,vt=6,Ht=(fe,xe,Le,ft=1)=>{var Ze;const ct=["down","up"].includes(fe),ot=ct?Le.rowIndex+(fe==="down"?ft:-ft):Le.rowIndex,At=ct?Le.cellIndex:Le.cellIndex+(fe==="right"?ft:-ft),Tn=(Ze=qe.current[xe][ot])==null?void 0:Ze[At];Tn&&(Tn.disabled?Ht(fe,xe,Le,ft+1):Tn.focus())},Xt=(fe,xe,Le)=>{var ft;switch(Le.key){case"ArrowDown":{Le.preventDefault(),xe.rowIndex+1<qe.current[fe].length&&Ht("down",fe,xe);break}case"ArrowUp":{Le.preventDefault(),xe.rowIndex>0&&Ht("up",fe,xe);break}case"ArrowRight":{Le.preventDefault(),xe.cellIndex!==vt?Ht("right",fe,xe):fe+1<c&&qe.current[fe+1][xe.rowIndex]&&((ft=qe.current[fe+1][xe.rowIndex][0])==null||ft.focus());break}case"ArrowLeft":Le.preventDefault(),xe.cellIndex!==0?Ht("left",fe,xe):fe>0&&qe.current[fe-1][xe.rowIndex]&&qe.current[fe-1][xe.rowIndex][vt].focus()}};return F.createElement(dt,cen({className:Ke(Me.calendarBase,r),ref:t},we),he==="year"&&F.createElement(Z5e,{size:d,value:We,minYear:ut,maxYear:mt,onChange:fe=>{Pt(fe),He("month")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ye,nextDecadeLabel:M,previousDecadeLabel:W,preventFocus:T,unstyled:le,yearLabelFormat:de}),he==="month"&&F.createElement(n8e,{size:d,value:{month:Qt.getMonth(),year:Qt.getFullYear()},year:We,onYearChange:Pt,onNextLevel:()=>He("year"),locale:De,minDate:m,maxDate:g,onChange:fe=>{rt(new Date(We,fe,1)),He("date")},classNames:i,styles:s,__staticSelector:y,__stopPropagation:ye,nextYearLabel:z,previousYearLabel:Y,preventFocus:T,unstyled:le,yearLabelFormat:de}),he==="date"&&F.createElement(f8e,{amountOfMonths:c,paginateBy:f,month:Qt,locale:De,minDate:m,maxDate:g,allowLevelChange:h,size:d,daysRefs:qe,onMonthChange:rt,onNextLevel:()=>He("month"),onDayKeyDown:Xt,classNames:i,styles:s,__staticSelector:y,dayClassName:v,dayStyle:_,disableOutsideEvents:w,excludeDate:x,hideWeekdays:E,fullWidth:b,preventFocus:T,firstDayOfWeek:A,value:C,range:$,onChange:P,nextMonthLabel:B,previousMonthLabel:U,labelFormat:q,weekdayLabelFormat:D,onDayMouseEnter:N,renderDay:te,hideOutsideDates:L,isDateInRange:G,isDateFirstInRange:V,isDateLastInRange:H,unstyled:le,weekendDays:me,__stopPropagation:ye}))});iee.displayName="@mantine/dates/CalendarBase";var den=Object.defineProperty,XM=Object.getOwnPropertySymbols,p8e=Object.prototype.hasOwnProperty,m8e=Object.prototype.propertyIsEnumerable,nve=(e,t,n)=>t in e?den(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hen=(e,t)=>{for(var n in t||(t={}))p8e.call(t,n)&&nve(e,n,t[n]);if(XM)for(var n of XM(t))m8e.call(t,n)&&nve(e,n,t[n]);return e},pen=(e,t)=>{var n={};for(var r in e)p8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&XM)for(var r of XM(e))t.indexOf(r)<0&&m8e.call(e,r)&&(n[r]=e[r]);return n};const men={__staticSelector:"Calendar"};function g8e(e){const t=Et("Calendar",men,e),{__staticSelector:n="Calendar",multiple:r,value:i,onChange:s}=t,o=pen(t,["__staticSelector","multiple","value","onChange"]),a=u=>{if(!r)return s(u);const l=i.some(c=>fm(c,u));return s(l?i.filter(c=>!fm(c,u)):[...i,u])};return F.createElement(iee,hen({__staticSelector:n,onChange:a,value:i},o))}g8e.displayName="@mantine/dates/Calendar";var gen=Object.defineProperty,yen=Object.defineProperties,ven=Object.getOwnPropertyDescriptors,rve=Object.getOwnPropertySymbols,_en=Object.prototype.hasOwnProperty,ben=Object.prototype.propertyIsEnumerable,ive=(e,t,n)=>t in e?gen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wen=(e,t)=>{for(var n in t||(t={}))_en.call(t,n)&&ive(e,n,t[n]);if(rve)for(var n of rve(t))ben.call(t,n)&&ive(e,n,t[n]);return e},Een=(e,t)=>yen(e,ven(t)),Sen=yt(e=>({wrapper:Een(wen({},e.fn.fontStyles()),{position:"relative",cursor:"pointer"}),input:{cursor:"pointer",whiteSpace:"nowrap","&:not([data-free-input])::selection":{backgroundColor:"transparent"},"&[data-free-input]":{cursor:"text"}}})),xen=Object.defineProperty,Ten=Object.defineProperties,Cen=Object.getOwnPropertyDescriptors,QM=Object.getOwnPropertySymbols,y8e=Object.prototype.hasOwnProperty,v8e=Object.prototype.propertyIsEnumerable,sve=(e,t,n)=>t in e?xen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rT=(e,t)=>{for(var n in t||(t={}))y8e.call(t,n)&&sve(e,n,t[n]);if(QM)for(var n of QM(t))v8e.call(t,n)&&sve(e,n,t[n]);return e},ove=(e,t)=>Ten(e,Cen(t)),Aen=(e,t)=>{var n={};for(var r in e)y8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&QM)for(var r of QM(e))t.indexOf(r)<0&&v8e.call(e,r)&&(n[r]=e[r]);return n};const Ien={xs:24,sm:30,md:34,lg:40,xl:44},Oen={in:{opacity:1,transform:"translateY(0) scale(1)"},out:{opacity:0,transform:"translateY(-25px) scale(0.93)"},common:{transformOrigin:"top left"},transitionProperty:"opacity, transform"},see=I.forwardRef((e,t)=>{var n=e,{classNames:r,className:i,style:s,styles:o,wrapperProps:a,required:u,allowFreeInput:l=!1,label:c,error:f,id:d,description:h,placeholder:p,shadow:m,transition:g=Oen,transitionDuration:y=100,transitionTimingFunction:v,size:_="sm",children:w,inputLabel:x,__staticSelector:E="DatePickerBase",dropdownOpened:b,setDropdownOpened:T,dropdownType:A="popover",dropdownPosition:C="flip",clearable:P=!0,clearButtonLabel:N,onClear:$,positionDependencies:M=[],zIndex:B,withinPortal:z=!1,onBlur:W,onFocus:U,onChange:Y,onKeyDown:q,name:D="date",sx:L,amountOfMonths:G=1,onDropdownClose:V,onDropdownOpen:H,clickOutsideEvents:te=["mousedown","touchstart"],modalZIndex:le,errorProps:me,labelProps:ye,descriptionProps:de,clearButtonTabIndex:we=0,unstyled:he,inputContainer:He,inputWrapperOrder:Me,modalProps:Ke,withAsterisk:je}=n,De=Aen(n,["classNames","className","style","styles","wrapperProps","required","allowFreeInput","label","error","id","description","placeholder","shadow","transition","transitionDuration","transitionTimingFunction","size","children","inputLabel","__staticSelector","dropdownOpened","setDropdownOpened","dropdownType","dropdownPosition","clearable","clearButtonLabel","onClear","positionDependencies","zIndex","withinPortal","onBlur","onFocus","onChange","onKeyDown","name","sx","amountOfMonths","onDropdownClose","onDropdownOpen","clickOutsideEvents","modalZIndex","errorProps","labelProps","descriptionProps","clearButtonTabIndex","unstyled","inputContainer","inputWrapperOrder","modalProps","withAsterisk"]);const{classes:qe,cx:Qt,theme:rt}=Sen(null,{classNames:r,styles:o,unstyled:he,name:E}),{systemStyles:We,rest:Pt}=Ec(De),ut=ru(d),mt=I.useRef(),vt=()=>{T(!1),V==null||V()},Ht=()=>{T(!0),H==null||H()},Xt=()=>{T(!b),b?V==null||V():H==null||H()},fe=ct=>{ct.key==="Escape"&&(vt(),window.setTimeout(()=>{var ot;return(ot=mt.current)==null?void 0:ot.focus()},0))},xe=P?F.createElement(_m,{variant:"transparent","aria-label":N,onClick:$,size:_,tabIndex:we,unstyled:he}):null,Le=ct=>{typeof W=="function"&&W(ct),l&&vt()},ft=ct=>{typeof U=="function"&&U(ct),l&&Ht()},Ze=ct=>{typeof q=="function"&&q(ct),(ct.key==="Space"||ct.key==="Enter")&&!l&&(ct.preventDefault(),Ht())};return F.createElement(ls.Wrapper,rT(rT({required:u,id:ut,label:c,error:f,description:h,className:i,style:s,classNames:r,styles:o,size:_,__staticSelector:E,sx:L,errorProps:me,descriptionProps:de,labelProps:ye,inputContainer:He,inputWrapperOrder:Me,unstyled:he,withAsterisk:je},We),a),F.createElement(Oi,{__staticSelector:E,withinPortal:z,offset:10,opened:b,transitionDuration:y,transition:g,positionDependencies:M,middlewares:{flip:C==="flip",shift:!1},position:C==="flip"?"bottom-start":C,shadow:m,onClose:vt,trapFocus:!l,withRoles:!1,clickOutsideEvents:te,zIndex:B,classNames:r,styles:o,unstyled:he},F.createElement(Oi.Target,null,F.createElement("div",{className:qe.wrapper},F.createElement(ls,rT({classNames:ove(rT({},r),{input:Qt(qe.input,r==null?void 0:r.input)}),"data-free-input":l||void 0,styles:o,onClick:()=>l?Ht():Xt(),onKeyDown:Ze,id:ut,ref:Hs(t,mt),__staticSelector:E,size:_,name:D,placeholder:p,value:x,required:u,invalid:!!f,readOnly:!l,rightSection:xe,rightSectionWidth:rt.fn.size({size:_,sizes:Ien}),onBlur:Le,onFocus:ft,onChange:Y,autoComplete:"off",unstyled:he},Pt)))),A==="popover"?F.createElement(Oi.Dropdown,null,F.createElement("div",{"data-mantine-stop-propagation":b,onKeyDownCapture:fe,"aria-hidden":l||void 0},w)):F.createElement(ac,ove(rT({},Ke),{opened:b,onClose:vt,withCloseButton:!1,size:G*400,zIndex:le,unstyled:he}),w)))});see.displayName="@mantine/dates/DatePickerBase";var Pen=Object.defineProperty,JM=Object.getOwnPropertySymbols,_8e=Object.prototype.hasOwnProperty,b8e=Object.prototype.propertyIsEnumerable,ave=(e,t,n)=>t in e?Pen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ken=(e,t)=>{for(var n in t||(t={}))_8e.call(t,n)&&ave(e,n,t[n]);if(JM)for(var n of JM(t))b8e.call(t,n)&&ave(e,n,t[n]);return e},$en=(e,t)=>{var n={};for(var r in e)_8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&JM)for(var r of JM(e))t.indexOf(r)<0&&b8e.call(e,r)&&(n[r]=e[r]);return n};const Ren={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,name:"date",size:"sm",dropdownType:"popover",dropdownPosition:"flip",clearable:!0,disabled:!1,fixOnBlur:!0,withinPortal:!1,firstDayOfWeek:"monday",openDropdownOnClear:!1},Nen=I.forwardRef((e,t)=>{const n=Et("DatePicker",Ren,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,initialMonth:b,initiallyOpened:T,name:A,size:C,dropdownType:P,dropdownPosition:N,clearable:$,disabled:M,clearButtonLabel:B,fixOnBlur:z,allowFreeInput:W,withinPortal:U,dateParser:Y,firstDayOfWeek:q,onFocus:D,onBlur:L,amountOfMonths:G,allowLevelChange:V,initialLevel:H,onDropdownClose:te,onDropdownOpen:le,hideOutsideDates:me,hideWeekdays:ye,renderDay:de,type:we,openDropdownOnClear:he,unstyled:He,weekendDays:Me,yearLabelFormat:Ke,nextDecadeLabel:je,nextYearLabel:De,previousDecadeLabel:qe,previousYearLabel:Qt}=n,rt=$en(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","name","size","dropdownType","dropdownPosition","clearable","disabled","clearButtonLabel","fixOnBlur","allowFreeInput","withinPortal","dateParser","firstDayOfWeek","onFocus","onBlur","amountOfMonths","allowLevelChange","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","type","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),We=As(),Pt=l||We.datesLocale,ut=we==="date"?"YYYY-MM-DD":c||We.dateFormat,[mt,vt]=I.useState(T),Ht=C==="lg"||C==="xl"?"md":"sm",Xt=I.useRef(),[fe,xe]=I.useState(s??null),[Le,ft]=co({value:r,defaultValue:s,finalValue:null,onChange:i}),[Ze,ct]=I.useState(Le||b||new Date),[ot,At]=I.useState(!1),[Tn,Zt]=I.useState(Le instanceof Date?Cg(Rn(Le).locale(Pt).format(ut)):""),Jt=()=>{vt(!1),te==null||te()},rr=()=>{vt(!0),le==null||le()};I.useEffect(()=>{r===null&&!ot&&Zt(""),r instanceof Date&&!ot&&Zt(Cg(Rn(r).locale(Pt).format(ut)))},[r,ot]);const Bn=St=>{ft(St),Zt(Cg(Rn(St).locale(Pt).format(ut))),m&&Jt(),window.setTimeout(()=>{var gr;return(gr=Xt.current)==null?void 0:gr.focus()},0)},zo=()=>{var St;ft(null),xe(null),Zt(""),he&&rr(),(St=Xt.current)==null||St.focus()},mr=St=>Y?Y(St):Rn(St,ut,Pt).toDate(),Di=()=>{let St=typeof Le=="string"?mr(Le):Le;x&&Rn(St).isAfter(x)&&(St=x),w&&Rn(St).isBefore(w)&&(St=w),Rn(St).isValid()?(ft(St),xe(St),Zt(Cg(Rn(St).locale(Pt).format(ut))),ct(St)):z&&ft(fe)},zr=St=>{typeof L=="function"&&L(St),At(!1),W&&Di()},Pr=St=>{St.key==="Enter"&&W&&(Jt(),Di())},Vr=St=>{typeof D=="function"&&D(St),At(!0)},ir=St=>{rr();const gr=mr(St.target.value);Rn(gr).isValid()?(ft(gr),xe(gr),Zt(St.target.value),ct(gr)):Zt(St.target.value)};return F.createElement(see,ken({allowFreeInput:W,dropdownOpened:mt,setDropdownOpened:vt,shadow:u,transitionDuration:f,ref:Hs(t,Xt),size:C,styles:a,classNames:o,onChange:ir,onBlur:zr,onFocus:Vr,onKeyDown:Pr,name:A,inputLabel:Tn,__staticSelector:"DatePicker",dropdownType:P,dropdownPosition:N,clearable:we==="date"?!1:$&&!!Le&&!M,clearButtonLabel:B,onClear:zo,disabled:M,withinPortal:U,amountOfMonths:G,onDropdownClose:te,onDropdownOpen:le,type:we,unstyled:He},rt),F.createElement(g8e,{classNames:o,styles:a,locale:Pt,nextMonthLabel:h,previousMonthLabel:p,month:W?Ze:void 0,initialMonth:b||(Le instanceof Date?Le:new Date),onMonthChange:ct,value:Le instanceof Date?Le:Rn(Le).toDate(),onChange:Bn,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,__staticSelector:"DatePicker",fullWidth:P==="modal",__stopPropagation:P!=="modal",size:P==="modal"?"lg":Ht,firstDayOfWeek:q,preventFocus:W,amountOfMonths:G,allowLevelChange:V,initialLevel:H,hideOutsideDates:me,hideWeekdays:ye,renderDay:de,unstyled:He,weekendDays:Me,yearLabelFormat:Ke,nextDecadeLabel:je,nextYearLabel:De,previousDecadeLabel:qe,previousYearLabel:Qt}))});Nen.displayName="@mantine/dates/DatePicker";var Den=Object.defineProperty,ZM=Object.getOwnPropertySymbols,w8e=Object.prototype.hasOwnProperty,E8e=Object.prototype.propertyIsEnumerable,uve=(e,t,n)=>t in e?Den(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Men=(e,t)=>{for(var n in t||(t={}))w8e.call(t,n)&&uve(e,n,t[n]);if(ZM)for(var n of ZM(t))E8e.call(t,n)&&uve(e,n,t[n]);return e},Len=(e,t)=>{var n={};for(var r in e)w8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ZM)for(var r of ZM(e))t.indexOf(r)<0&&E8e.call(e,r)&&(n[r]=e[r]);return n};const Fen={__staticSelector:"RangeCalendar",allowSingleDateInRange:!1,amountOfMonths:1},S8e=I.forwardRef((e,t)=>{const n=Et("RangeCalendar",Fen,e),{value:r,onChange:i,dayStyle:s,onMouseLeave:o,__staticSelector:a,allowSingleDateInRange:u,amountOfMonths:l,paginateBy:c}=n,f=Len(n,["value","onChange","dayStyle","onMouseLeave","__staticSelector","allowSingleDateInRange","amountOfMonths","paginateBy"]),[d,h]=I.useState(null),[p,m]=I.useState(null),g=x=>{if(p instanceof Date){if(fm(x,p)&&!u)return m(null),h(null),null;const E=[x,p];return E.sort((b,T)=>b.getTime()-T.getTime()),i(E),m(null),null}return r[0]&&fm(x,r[0])&&!u?(m(null),h(null),i([null,null]),null):(i([x,null]),m(x),null)},y=x=>{typeof o=="function"&&o(x),h(null)},v=(x,E)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),!E.selected&&Rn(x).subtract(1,"day").isBefore(b[1])&&Rn(x).add(1,"day").isAfter(b[0])}return!1},_=(x,E)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),E.selected&&Rn(x).isBefore(b[1])}return!1},w=(x,E)=>{if(p instanceof Date&&d instanceof Date){const b=[d,p];return b.sort((T,A)=>T.getTime()-A.getTime()),E.selected&&Rn(x).isAfter(b[0])}return!1};return F.createElement(iee,Men({dayStyle:s,onMouseLeave:y,onDayMouseEnter:x=>h(x),onChange:g,value:p,range:r,ref:t,__staticSelector:a,amountOfMonths:l,paginateBy:c||l,hideOutsideDates:l>1,isDateInRange:v,isDateFirstInRange:_,isDateLastInRange:w},f))});S8e.displayName="@mantine/dates/RangeCalendar";var jen=Object.defineProperty,eL=Object.getOwnPropertySymbols,x8e=Object.prototype.hasOwnProperty,T8e=Object.prototype.propertyIsEnumerable,lve=(e,t,n)=>t in e?jen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ben=(e,t)=>{for(var n in t||(t={}))x8e.call(t,n)&&lve(e,n,t[n]);if(eL)for(var n of eL(t))T8e.call(t,n)&&lve(e,n,t[n]);return e},Uen=(e,t)=>{var n={};for(var r in e)x8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&eL)for(var r of eL(e))t.indexOf(r)<0&&T8e.call(e,r)&&(n[r]=e[r]);return n};const cve=e=>Array.isArray(e)&&e.length===2&&e.every(t=>t instanceof Date),zen=e=>Array.isArray(e)&&e.length===2&&e[0]instanceof Date,Ven={shadow:"sm",transitionDuration:200,closeCalendarOnChange:!0,labelFormat:"MMMM YYYY",initiallyOpened:!1,size:"sm",dropdownType:"popover",labelSeparator:"",clearable:!0,firstDayOfWeek:"monday",allowSingleDateInRange:!1,amountOfMonths:1,withinPortal:!1,openDropdownOnClear:!1},C8e=I.forwardRef((e,t)=>{const n=Et("DateRangePicker",Ven,e),{value:r,onChange:i,defaultValue:s,classNames:o,styles:a,shadow:u,locale:l,inputFormat:c,transitionDuration:f,transitionTimingFunction:d,nextMonthLabel:h,previousMonthLabel:p,closeCalendarOnChange:m,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,initialMonth:b,initiallyOpened:T,size:A,dropdownType:C,labelSeparator:P,clearable:N,clearButtonLabel:$,firstDayOfWeek:M,allowLevelChange:B,allowSingleDateInRange:z,amountOfMonths:W,withinPortal:U,initialLevel:Y,onDropdownClose:q,onDropdownOpen:D,hideOutsideDates:L,hideWeekdays:G,renderDay:V,openDropdownOnClear:H,unstyled:te,weekendDays:le,yearLabelFormat:me,nextDecadeLabel:ye,nextYearLabel:de,previousDecadeLabel:we,previousYearLabel:he}=n,He=Uen(n,["value","onChange","defaultValue","classNames","styles","shadow","locale","inputFormat","transitionDuration","transitionTimingFunction","nextMonthLabel","previousMonthLabel","closeCalendarOnChange","labelFormat","dayClassName","dayStyle","disableOutsideEvents","minDate","maxDate","excludeDate","initialMonth","initiallyOpened","size","dropdownType","labelSeparator","clearable","clearButtonLabel","firstDayOfWeek","allowLevelChange","allowSingleDateInRange","amountOfMonths","withinPortal","initialLevel","onDropdownClose","onDropdownOpen","hideOutsideDates","hideWeekdays","renderDay","openDropdownOnClear","unstyled","weekendDays","yearLabelFormat","nextDecadeLabel","nextYearLabel","previousDecadeLabel","previousYearLabel"]),Me=As(),Ke=l||Me.datesLocale,je=c||Me.dateFormat,[De,qe]=I.useState(T),Qt=A==="lg"||A==="xl"?"md":"sm",rt=I.useRef(),[We,Pt]=co({value:r,defaultValue:s,finalValue:[null,null],onChange:i}),ut=Le=>{Pt(Le),m&&cve(Le)&&(qe(!1),q==null||q(),window.setTimeout(()=>{var ft;return(ft=rt.current)==null?void 0:ft.focus()},0))},mt=cve(We),vt=zen(We),Ht=We[0]?Cg(Rn(We[0]).locale(Ke).format(je)):"",Xt=We[1]?Cg(Rn(We[1]).locale(Ke).format(je)):"",fe=()=>{var Le;Pt([null,null]),qe(!0),H&&(D==null||D()),(Le=rt.current)==null||Le.focus()},xe=Le=>{!Le&&vt&&We[1]===null&&fe(),qe(Le)};return F.createElement(see,Ben({dropdownOpened:De,setDropdownOpened:xe,shadow:u,transitionDuration:f,ref:Hs(t,rt),size:A,styles:a,classNames:o,inputLabel:vt?`${Ht} ${P} ${Xt}`:"",__staticSelector:"DateRangePicker",dropdownType:C,clearable:N&&vt,clearButtonLabel:$,onClear:fe,withinPortal:U,amountOfMonths:W,onDropdownClose:q,onDropdownOpen:D,unstyled:te},He),F.createElement(S8e,{classNames:o,styles:a,locale:Ke,nextMonthLabel:h,previousMonthLabel:p,initialMonth:mt?We[0]:b,value:We,onChange:ut,labelFormat:g,dayClassName:y,dayStyle:v,disableOutsideEvents:_,minDate:w,maxDate:x,excludeDate:E,__staticSelector:"DateRangePicker",fullWidth:C==="modal",firstDayOfWeek:M,size:C==="modal"?"lg":Qt,allowLevelChange:B,allowSingleDateInRange:z,amountOfMonths:W,initialLevel:Y,hideOutsideDates:L,hideWeekdays:G,renderDay:V,unstyled:te,weekendDays:le,yearLabelFormat:me,nextDecadeLabel:ye,nextYearLabel:de,previousDecadeLabel:we,previousYearLabel:he}))});C8e.displayName="@mantine/dates/DateRangePicker";function o0(e){const t=parseInt(e,10);return t>=10?t.toString():`0${t}`}var Hen=Object.defineProperty,qen=Object.defineProperties,Wen=Object.getOwnPropertyDescriptors,fve=Object.getOwnPropertySymbols,Gen=Object.prototype.hasOwnProperty,Yen=Object.prototype.propertyIsEnumerable,dve=(e,t,n)=>t in e?Hen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ken=(e,t)=>{for(var n in t||(t={}))Gen.call(t,n)&&dve(e,n,t[n]);if(fve)for(var n of fve(t))Yen.call(t,n)&&dve(e,n,t[n]);return e},Xen=(e,t)=>qen(e,Wen(t));const Qen={xs:20,sm:23,md:25,lg:27,xl:29};var A8e=yt((e,{size:t,hasValue:n})=>({timeInput:Xen(Ken({},e.fn.fontStyles()),{width:e.fn.size({size:t,sizes:Qen}),appearance:"none",backgroundColor:"transparent",color:"inherit",padding:0,textAlign:"center",border:"1px solid transparent",fontSize:e.fn.size({size:t,sizes:e.fontSizes}),lineHeight:1,outline:0,"&:focus":{textAlign:n?void 0:"start"},"&::placeholder":{width:"auto",textAlign:"left"},"&[disabled]":{color:e.colorScheme==="dark"?e.colors.dark[2]:e.colors.gray[7],cursor:"not-allowed"}}),amPmInput:{textAlign:"left"}})),Jen=Object.defineProperty,tL=Object.getOwnPropertySymbols,I8e=Object.prototype.hasOwnProperty,O8e=Object.prototype.propertyIsEnumerable,hve=(e,t,n)=>t in e?Jen(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zen=(e,t)=>{for(var n in t||(t={}))I8e.call(t,n)&&hve(e,n,t[n]);if(tL)for(var n of tL(t))O8e.call(t,n)&&hve(e,n,t[n]);return e},etn=(e,t)=>{var n={};for(var r in e)I8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tL)for(var r of tL(e))t.indexOf(r)<0&&O8e.call(e,r)&&(n[r]=e[r]);return n};const bR=I.forwardRef((e,t)=>{var n=e,{className:r,onFocus:i,onBlur:s,onChange:o,setValue:a,withSeparator:u=!1,size:l="sm",max:c,min:f=0,value:d,unstyled:h}=n,p=etn(n,["className","onFocus","onBlur","onChange","setValue","withSeparator","size","max","min","value","unstyled"]);const[m,g]=I.useState(0),{classes:y,cx:v,theme:_}=A8e({size:l,hasValue:!!d},{name:"TimeField",unstyled:h}),w=I.useRef(),x=C=>{typeof i=="function"&&i(C),w.current.select(),g(0)},E=C=>{typeof s=="function"&&s(C),m===1&&typeof o=="function"&&o(C.currentTarget.value,!1)},b=C=>{C.stopPropagation(),w.current.select()},T=C=>{if(C.key==="ArrowUp"){C.preventDefault();const P=o0(wf(parseInt(C.currentTarget.value,10)+1,f,c).toString());d!==P&&o(P,!1)}if(C.key==="ArrowDown"){C.preventDefault();const P=o0(wf(parseInt(C.currentTarget.value,10)-1,f,c).toString());d!==P&&o(P,!1)}},A=C=>{g(m+1);const P=parseInt(C.currentTarget.value,10).toString();if(P==="0"&&m===0){a("00");return}o(P,!0,m>0)};return F.createElement(F.Fragment,null,F.createElement("input",Zen({type:"text",inputMode:"numeric",ref:Hs(w,t),onChange:A,onClick:b,onFocus:x,onBlur:E,onKeyDown:T,value:d,className:v(y.timeInput,r)},p)),u&&F.createElement(ze,{size:l,unstyled:h,style:{lineHeight:1,color:d?"inherit":_.colorScheme==="dark"?_.colors.dark[2]:_.colors.gray[7]}},":"))});bR.displayName="@mantine/dates/TimeField";function xU(e){return Math.floor(e/10)}function TU({onChange:e,nextRef:t,min:n,max:r,nextMax:i}){return(s,o,a=!1)=>{var u,l;const c=parseInt(s,10);if(!Number.isNaN(c)){if(c>xU(r)||a){const f=c%10;let d,h;c>r&&i&&f<=xU(i)?(d=o0(xU(c).toString()),h=o0(f.toString())):d=o0(wf(c,n,r).toString()),e(d,h),o&&((u=t==null?void 0:t.current)==null||u.focus()),o&&((l=t==null?void 0:t.current)==null||l.select());return}e(c.toString())}}}var ttn=yt((e,{size:t})=>({timeInput:{},amPmInput:{},disabled:{cursor:"not-allowed"},controls:{display:"flex",alignItems:"center",height:e.fn.size({size:t,sizes:sa})-2}})),ntn=Object.defineProperty,nL=Object.getOwnPropertySymbols,P8e=Object.prototype.hasOwnProperty,k8e=Object.prototype.propertyIsEnumerable,pve=(e,t,n)=>t in e?ntn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rtn=(e,t)=>{for(var n in t||(t={}))P8e.call(t,n)&&pve(e,n,t[n]);if(nL)for(var n of nL(t))k8e.call(t,n)&&pve(e,n,t[n]);return e},itn=(e,t)=>{var n={};for(var r in e)P8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nL)for(var r of nL(e))t.indexOf(r)<0&&k8e.call(e,r)&&(n[r]=e[r]);return n};const $8e=I.forwardRef((e,t)=>{var n=e,{className:r,onChange:i,onFocus:s,size:o="sm",value:a,unstyled:u,amLabel:l,pmLabel:c}=n,f=itn(n,["className","onChange","onFocus","size","value","unstyled","amLabel","pmLabel"]);const{classes:d,cx:h}=A8e({size:o,hasValue:!!a},{name:"AmPmInput",unstyled:u}),p=I.useRef(),m=_=>{typeof s=="function"&&s(_),p.current.select()},g=_=>{_.stopPropagation(),p.current.select()},y=_=>{(_.key==="ArrowUp"||_.key==="ArrowDown")&&(_.preventDefault(),i(a===l?c:l,!0))},v=_=>{const w=_.target.value.slice(-1).toLowerCase();if(w==="p"){_.preventDefault(),i(c,!0);return}if(w==="a"){_.preventDefault(),i(l,!0);return}i(a.toString(),!0)};return F.createElement("input",rtn({type:"text",ref:Hs(p,t),onClick:g,onFocus:m,onKeyDown:y,onChange:v,value:a,className:h(d.timeInput,d.amPmInput)},f))});$8e.displayName="@mantine/dates/AmPmInput";function stn({amLabel:e,pmLabel:t,onChange:n,nextRef:r}){return(i,s)=>{var o,a;const u=new RegExp(`(^(${e}|${t})?$)`),l=i.toLowerCase();if(l===e||l===t){n(l),s&&((o=r==null?void 0:r.current)==null||o.focus()),s&&((a=r==null?void 0:r.current)==null||a.select());return}u.test(l)&&n(l)}}function otn(e,t,n,r,i,s){const o=Rn();let a=parseInt(e,10);const u=parseInt(t,10),l=parseInt(n,10);return Number.isNaN(a)&&(a=0),r==="12"&&(a%=12,s===i&&(a+=12)),o.hour(a).minute(Number.isNaN(u)?0:u).second(Number.isNaN(l)?0:l).millisecond(0).toDate()}function mve(e,t,n,r){if(!(e instanceof Date))return{hours:"",minutes:"",seconds:"",amPm:""};let i=e.getHours();const s=i>=12;return t==="12"&&(i%=12,i===0&&(i+=12)),{hours:o0(i.toString()),minutes:o0(e.getMinutes().toString()),seconds:o0(e.getSeconds().toString()),amPm:s?r:n}}var atn=Object.defineProperty,utn=Object.defineProperties,ltn=Object.getOwnPropertyDescriptors,rL=Object.getOwnPropertySymbols,R8e=Object.prototype.hasOwnProperty,N8e=Object.prototype.propertyIsEnumerable,gve=(e,t,n)=>t in e?atn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Km=(e,t)=>{for(var n in t||(t={}))R8e.call(t,n)&&gve(e,n,t[n]);if(rL)for(var n of rL(t))N8e.call(t,n)&&gve(e,n,t[n]);return e},CU=(e,t)=>utn(e,ltn(t)),ctn=(e,t)=>{var n={};for(var r in e)R8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&rL)for(var r of rL(e))t.indexOf(r)<0&&N8e.call(e,r)&&(n[r]=e[r]);return n};const ftn={xs:24,sm:30,md:34,lg:40,xl:44},dtn={size:"sm",withSeconds:!1,clearable:!1,format:"24",amLabel:"am",pmLabel:"pm",timePlaceholder:"--",amPmPlaceholder:"am",disabled:!1},wq=I.forwardRef((e,t)=>{const n=Et("TimeInput",dtn,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,amLabel:x,pmLabel:E,name:b,hoursLabel:T,minutesLabel:A,secondsLabel:C,amPmLabel:P,timePlaceholder:N,amPmPlaceholder:$,disabled:M,sx:B,nextRef:z,labelProps:W,descriptionProps:U,errorProps:Y,unstyled:q,withAsterisk:D}=n,L=ctn(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","amLabel","pmLabel","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","disabled","sx","nextRef","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:G,cx:V,theme:H}=ttn({size:l},{classNames:f,styles:d,unstyled:q,name:"TimeInput"}),{systemStyles:te,rest:le}=Ec(L),me=ru(h),ye=I.useRef(),de=I.useRef(),we=I.useRef(),he=I.useRef(),[He,Me]=I.useState(mve(p||m,w,x,E)),[Ke,je]=I.useState(p||m);Fs(()=>{Me(mve(Ke,w,x,E))},[Ke,w,x,E]),Fs(()=>{(p==null?void 0:p.getTime())!==(Ke==null?void 0:Ke.getTime())&&je(p)},[p]);const De=mt=>{const vt=Km(Km({},He),mt),Ht=otn(vt.hours,vt.minutes,vt.seconds,w,E,vt.amPm);je(Ht),typeof g=="function"&&g(Ht)},qe=TU({onChange:(mt,vt)=>{De({hours:mt,minutes:vt??He.minutes})},min:w==="12"?1:0,max:w==="12"?12:23,nextRef:de,nextMax:59}),Qt=TU({onChange:(mt,vt)=>{De({minutes:mt,seconds:vt??He.seconds})},min:0,max:59,nextRef:y?we:w==="12"?he:z,nextMax:y?59:void 0}),rt=TU({onChange:mt=>{De({seconds:mt})},min:0,max:59,nextRef:w==="12"?he:z}),We=stn({amLabel:x,pmLabel:E,onChange:mt=>{De({amPm:mt})},nextRef:z}),Pt=()=>{Me({hours:"",minutes:"",seconds:"",amPm:""}),je(null),g==null||g(null),ye.current.focus()},ut=v&&Ke&&!M?F.createElement(_m,{variant:"transparent","aria-label":_,onClick:Pt,size:l,unstyled:q}):null;return F.createElement(ls.Wrapper,Km(Km({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeInput",id:me,sx:B,errorProps:Y,descriptionProps:U,labelProps:W,unstyled:q,withAsterisk:D},te),c),F.createElement(ls,Km({component:"div",__staticSelector:"TimeInput",required:r,invalid:!!s,onClick:()=>ye.current.focus(),size:l,className:V({[G.disabled]:M}),classNames:f,styles:d,disabled:M,rightSection:ut,rightSectionWidth:H.fn.size({size:l,sizes:ftn}),unstyled:q},le),F.createElement("div",{className:G.controls},F.createElement(bR,{ref:Hs(ye,t),value:He.hours,onChange:qe,setValue:mt=>Me(vt=>CU(Km({},vt),{hours:mt})),id:me,className:G.timeInput,withSeparator:!0,size:l,max:w==="12"?12:23,placeholder:N,"aria-label":T,disabled:M,name:b,unstyled:q}),F.createElement(bR,{ref:de,value:He.minutes,onChange:Qt,setValue:mt=>Me(vt=>CU(Km({},vt),{minutes:mt})),className:G.timeInput,withSeparator:y,size:l,max:59,placeholder:N,"aria-label":A,disabled:M,unstyled:q}),y&&F.createElement(bR,{ref:we,value:He.seconds,onChange:rt,setValue:mt=>Me(vt=>CU(Km({},vt),{seconds:mt})),className:G.timeInput,size:l,max:59,placeholder:N,"aria-label":C,disabled:M,unstyled:q}),w==="12"&&F.createElement($8e,{ref:he,value:He.amPm,onChange:We,placeholder:$,amLabel:x,pmLabel:E,size:l,"aria-label":P,disabled:M,unstyled:q}))))});wq.displayName="@mantine/dates/TimeInput";var htn=yt((e,{size:t})=>({timeField:{},disabled:{opacity:.6,cursor:"not-allowed"},inputWrapper:{display:"inline-flex",alignItems:"center",height:e.fn.size({size:t,sizes:sa})-2},separator:{paddingLeft:e.fn.size({size:t,sizes:e.spacing})/2,paddingRight:e.fn.size({size:t,sizes:e.spacing})/2,lineHeight:1}})),ptn=Object.defineProperty,iL=Object.getOwnPropertySymbols,D8e=Object.prototype.hasOwnProperty,M8e=Object.prototype.propertyIsEnumerable,yve=(e,t,n)=>t in e?ptn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,iT=(e,t)=>{for(var n in t||(t={}))D8e.call(t,n)&&yve(e,n,t[n]);if(iL)for(var n of iL(t))M8e.call(t,n)&&yve(e,n,t[n]);return e},mtn=(e,t)=>{var n={};for(var r in e)D8e.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&iL)for(var r of iL(e))t.indexOf(r)<0&&M8e.call(e,r)&&(n[r]=e[r]);return n};const gtn={xs:24,sm:30,md:34,lg:40,xl:44},ytn={size:"sm",defaultValue:[null,null],withSeconds:!1,clearable:!1,format:"24",timePlaceholder:"--",amPmPlaceholder:"am",labelSeparator:"",disabled:!1},vtn=I.forwardRef((e,t)=>{const n=Et("TimeRangeInput",ytn,e),{required:r,label:i,error:s,description:o,className:a,style:u,size:l,wrapperProps:c,classNames:f,styles:d,id:h,value:p,defaultValue:m,onChange:g,withSeconds:y,clearable:v,clearButtonLabel:_,format:w,name:x,hoursLabel:E,minutesLabel:b,secondsLabel:T,amPmLabel:A,timePlaceholder:C,amPmPlaceholder:P,labelSeparator:N,disabled:$,sx:M,labelProps:B,descriptionProps:z,errorProps:W,unstyled:U,withAsterisk:Y}=n,q=mtn(n,["required","label","error","description","className","style","size","wrapperProps","classNames","styles","id","value","defaultValue","onChange","withSeconds","clearable","clearButtonLabel","format","name","hoursLabel","minutesLabel","secondsLabel","amPmLabel","timePlaceholder","amPmPlaceholder","labelSeparator","disabled","sx","labelProps","descriptionProps","errorProps","unstyled","withAsterisk"]),{classes:D,cx:L,theme:G}=htn({size:l},{classNames:f,styles:d,unstyled:U,name:"TimeRangeInput"}),{systemStyles:V,rest:H}=Ec(q),te=ru(h),le=I.useRef(),me=I.useRef(),[ye,de]=I.useState(p??m);Fs(()=>{typeof g=="function"&&g(ye)},[ye]),Fs(()=>{var Me,Ke,je,De;(((Me=p[0])==null?void 0:Me.getTime())!==((Ke=ye[0])==null?void 0:Ke.getTime())||((je=p[1])==null?void 0:je.getTime())!==((De=ye[1])==null?void 0:De.getTime()))&&de(p)},[p]);const we=()=>{var Me;de([null,null]),(Me=le.current)==null||Me.focus()},he=v&&ye.filter(Me=>!!Me).length>0?F.createElement(_m,{variant:"transparent","aria-label":_,onClick:we,size:l,unstyled:U}):null,He={amPmLabel:A,amPmPlaceholder:P,disabled:$,format:w,hoursLabel:E,minutesLabel:b,secondsLabel:T,size:l,timePlaceholder:C,withSeconds:y};return F.createElement(ls.Wrapper,iT(iT({required:r,label:i,error:s,description:o,className:a,style:u,classNames:f,styles:d,size:l,__staticSelector:"TimeRangeInput",id:te,sx:M,errorProps:W,descriptionProps:z,labelProps:B,unstyled:U,withAsterisk:Y},V),c),F.createElement(ls,iT({component:"div",__staticSelector:"TimeRangeInput",required:r,invalid:!!s,onClick:()=>{var Me;(Me=le.current)==null||Me.focus()},size:l,className:L({[D.disabled]:$}),classNames:f,styles:d,disabled:$,rightSection:he,rightSectionWidth:G.fn.size({size:l,sizes:gtn}),unstyled:U},H),F.createElement("div",{className:D.inputWrapper},F.createElement(wq,iT({ref:Hs(le,t),variant:"unstyled",value:ye[0],onChange:Me=>de([Me,ye[1]]),name:x,nextRef:me,id:te,unstyled:U},He)),F.createElement("span",{className:D.separator,style:{color:G.colorScheme==="dark"?G.colors.dark[2]:G.colors.gray[7]}},N),F.createElement(wq,iT({ref:me,variant:"unstyled",value:ye[1],onChange:Me=>de([ye[0],Me]),unstyled:U},He)))))});vtn.displayName="@mantine/dates/TimeRangeInput";const vve={};function Eq(e,t){e===void 0&&(e=vve),t===void 0&&(t=vve);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var _tn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),btn=Object.prototype.hasOwnProperty;function Sq(e,t){return btn.call(e,t)}function xq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Sq(e,i)&&r.push(i);return r}function pl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Tq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function uv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function L8e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Cq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Cq(e[t]))return!0}else if(typeof e=="object"){for(var r=xq(e),i=r.length,s=0;s<i;s++)if(Cq(e[r[s]]))return!0}}return!1}function _ve(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var F8e=function(e){_tn(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,_ve(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=_ve(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Wi=F8e,wtn=pl,Jb={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=sL(n,this.path);r&&(r=pl(r));var i=s1(n,{op:"remove",path:this.from}).removed;return s1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=sL(n,this.from);return s1(n,{op:"add",path:this.path,value:pl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:kA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Etn={add:function(e,t,n){return Tq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Jb.move,copy:Jb.copy,test:Jb.test,_get:Jb._get};function sL(e,t){if(t=="")return e;var n={op:"_get",path:t};return s1(e,n),n.value}function s1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):oL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=sL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=kA(e,t.value),o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=pl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=oL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=L8e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Tq(h))throw new Wi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Tq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Wi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Etn[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Jb[t.op].call(t,l,h,e);if(o.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Wi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function S5(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=pl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=s1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Stn(e,t,n){var r=s1(e,t);if(r.test===!1)throw new Wi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function oL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Wi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Jb[e.op]){if(typeof e.path!="string")throw new Wi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Wi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Wi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Cq(e.value))throw new Wi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Wi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Wi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=j8e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Wi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Wi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function j8e(e,t,n){try{if(!Array.isArray(e))throw new Wi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)S5(pl(t),pl(e),n||!0);else{n=n||oL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Wi)return i;throw i}}function kA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!kA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!kA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const xtn=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Wi,_areEquals:kA,applyOperation:s1,applyPatch:S5,applyReducer:Stn,deepClone:wtn,getValueByPointer:sL,validate:j8e,validator:oL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var oee=new WeakMap,Ttn=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Ctn=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Atn(e){return oee.get(e)}function Itn(e,t){return e.observers.get(t)}function Otn(e,t){e.observers.delete(t.callback)}function Ptn(e,t){t.unobserve()}function ktn(e,t){var n=[],r,i=Atn(e);if(!i)i=new Ttn(e),oee.set(e,i);else{var s=Itn(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=pl(e),t){r.callback=t,r.next=null;var o=function(){Aq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Aq(r),clearTimeout(r.next),Otn(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Ctn(t,r)),r}function Aq(e,t){t===void 0&&(t=!1);var n=oee.get(e.object);aee(n.value,e.object,e.patches,"",t),e.patches.length&&S5(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function aee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=xq(t),o=xq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Sq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?aee(c,f,n,r+"/"+uv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+uv(l),value:pl(c)}),n.push({op:"replace",path:r+"/"+uv(l),value:pl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+uv(l),value:pl(c)}),n.push({op:"remove",path:r+"/"+uv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Sq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+uv(l),value:pl(t[l])})}}}function $tn(e,t,n){n===void 0&&(n=!1);var r=[];return aee(e,t,r,"",n),r}const Rtn=Object.freeze(Object.defineProperty({__proto__:null,compare:$tn,generate:Aq,observe:ktn,unobserve:Ptn},Symbol.toStringTag,{value:"Module"}));Object.assign({},xtn,Rtn,{JsonPatchError:F8e,deepClone:pl,escapePathComponent:uv,unescapePathComponent:L8e});var Ntn=/("(?:[^\\"]|\\.)*")|[:,]/g,Dtn=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,_,w,x;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(Ntn,function(E,b){return b||E+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(_="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",x=o(a[h],y,p.length+(f===g-1?0:1)),x!==void 0&&d.push(p+x);if(d.length>0)return[_,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const AU=$l(Dtn);function Ku(e,t,n){return e.fields=t||[],e.fname=n,e}function es(e){return e==null?null:e.fname}function pa(e){return e==null?null:e.fields}function B8e(e){return e.length===1?Mtn(e[0]):Ltn(e)}const Mtn=e=>function(t){return t[e]},Ltn=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function $e(e){throw Error(e)}function Ah(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||$e("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&$e("Access path missing closing bracket: "+e),r&&$e("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function mc(e,t,n){const r=Ah(e);return e=r.length===1?r[0]:e,Ku((n&&n.get||B8e)(r),[e],t||e)}const _O=mc("id"),Ea=Ku(e=>e,[],"identity"),wg=Ku(()=>0,[],"zero"),KS=Ku(()=>1,[],"one"),gc=Ku(()=>!0,[],"true"),eg=Ku(()=>!1,[],"false");function Ftn(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const U8e=0,uee=1,lee=2,z8e=3,V8e=4;function cee(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ftn,r=e||U8e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=uee&&n(t||"error","ERROR",arguments),this},warn(){return r>=lee&&n(t||"warn","WARN",arguments),this},info(){return r>=z8e&&n(t||"log","INFO",arguments),this},debug(){return r>=V8e&&n(t||"log","DEBUG",arguments),this}}}var Ne=Array.isArray;function gt(e){return e===Object(e)}const bve=e=>e!=="__proto__";function XS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=jtn(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;QS(r,s,i[s],o)}return r},{})}function QS(e,t,n,r){if(!bve(t))return;let i,s;if(gt(n)&&!Ne(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?QS(s,i,n[i]):bve(i)&&(s[i]=n[i])}else e[t]=n}function jtn(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function tr(e){return e[e.length-1]}function fa(e){return e==null||e===""?null:+e}const H8e=e=>t=>e*Math.exp(t),q8e=e=>t=>Math.log(e*t),W8e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),G8e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,aL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function x5(e,t,n,r){const i=n(e[0]),s=n(tr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function Y8e(e,t){return x5(e,t,fa,Ea)}function K8e(e,t){var n=Math.sign(e[0]);return x5(e,t,q8e(n),H8e(n))}function X8e(e,t,n){return x5(e,t,aL(n),aL(1/n))}function Q8e(e,t,n){return x5(e,t,W8e(n),G8e(n))}function T5(e,t,n,r,i){const s=r(e[0]),o=r(tr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function fee(e,t,n){return T5(e,t,n,fa,Ea)}function dee(e,t,n){const r=Math.sign(e[0]);return T5(e,t,n,q8e(r),H8e(r))}function uL(e,t,n,r){return T5(e,t,n,aL(r),aL(1/r))}function hee(e,t,n,r){return T5(e,t,n,W8e(r),G8e(r))}function J8e(e){return 1+~~(new Date(e).getMonth()/3)}function Z8e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ht(e){return e!=null?Ne(e)?e:[e]:[]}function eje(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Sn(e){return typeof e=="function"}const Btn="descending";function pee(e,t,n){n=n||{},t=ht(t)||[];const r=[],i=[],s={},o=n.comparator||Utn;return ht(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Btn?-1:1),i.push(a=Sn(a)?a:mc(a,null,n)),(pa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Ku(o(i,r),Object.keys(s))}const C5=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Utn=(e,t)=>e.length===1?ztn(e[0],t[0]):Vtn(e,t,e.length),ztn=(e,t)=>function(n,r){return C5(e(n),e(r))*t},Vtn=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=C5(s(r),s(i));return o*t[a]});function Sa(e){return Sn(e)?e:()=>e}function mee(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function En(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function hh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function tje(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Htn=Object.prototype.hasOwnProperty;function Vt(e,t){return Htn.call(e,t)}const Lk={};function JS(e){let t={},n;function r(s){return Vt(t,s)&&t[s]!==Lk}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===Lk&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=Lk),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==Lk&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function nje(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=tr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function nt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),En(r,n)}function Zb(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function _y(e){return typeof e=="boolean"}function a0(e){return Object.prototype.toString.call(e)==="[object Date]"}function rje(e){return e&&Sn(e[Symbol.iterator])}function hr(e){return typeof e=="number"}function ije(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function pt(e){return typeof e=="string"}function gee(e,t,n){e&&(e=t?ht(e).map(a=>a.replace(/\\(.)/g,"$1")):ht(e));const r=e&&e.length,i=n&&n.get||B8e,s=a=>i(t?[a]:Ah(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Ku(o,e,"key")}function sje(e,t){const n=e[0],r=tr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const qtn=1e4;function oje(e){e=+e||qtn;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Vt(t,o)||Vt(n,o),get:o=>Vt(t,o)?t[o]:Vt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Vt(t,o)?t[o]=a:s(o,a)}}function aje(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function XT(e,t){let n="";for(;--t>=0;)n+=e;return n}function uje(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?XT(i,o)+s:r==="center"?XT(i,~~(o/2))+s+XT(i,Math.ceil(o/2)):s+XT(i,o)}function bO(e){return e&&tr(e)-e[0]||0}function st(e){return Ne(e)?"["+e.map(st)+"]":gt(e)||pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function yee(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const Wtn=e=>hr(e)||a0(e)?e:Date.parse(e);function vee(e,t){return t=t||Wtn,e==null||e===""?null:t(e)}function _ee(e){return e==null||e===""?null:e+""}function Nf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function lje(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function ug(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Gtn(e){return e}function Ytn(e){if(e==null)return Gtn;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Ktn(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Xtn(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return wve(e,n)})}:wve(e,t)}function wve(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=cje(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function cje(e,t){var n=Ytn(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Ktn(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function Qtn(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Jtn(e){return cje(e,Ztn.apply(this,arguments))}function Ztn(e,t,n){var r,i,s;if(arguments.length>1)r=enn(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Qtn(e,r)}}function enn(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}function u0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tnn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wO(e){let t,n,r;e.length!==2?(t=u0,n=(a,u)=>u0(e(a),u),r=(a,u)=>e(a)-u):(t=e===u0||e===tnn?e:nnn,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function nnn(){return 0}function fje(e){return e===null?NaN:+e}function*rnn(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const dje=wO(u0),lL=dje.right,inn=dje.left;wO(fje).center;const snn=lL;function onn(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function ann(e,t){const n=onn(e,t);return n&&Math.sqrt(n)}function unn(e,t){return Array.from(t,n=>e[n])}function lnn(e=u0){if(e===u0)return hje;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function hje(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cnn=Math.sqrt(50),fnn=Math.sqrt(10),dnn=Math.sqrt(2);function pje(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=cnn?10:s>=fnn?5:s>=dnn?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?pje(e,t,n*2):[a,u,l]}function Eve(e,t,n){return t=+t,e=+e,n=+n,pje(e,t,n)[2]}function $A(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Eve(t,e,n):Eve(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function o1(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Iq(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function mje(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?hje:lnn(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));mje(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(sT(e,n,t),i(e[r],s)>0&&sT(e,n,r);o<a;){for(sT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?sT(e,n,a):(++a,sT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function sT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Oq(e,t,n){if(e=Float64Array.from(rnn(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Iq(e);if(t>=1)return o1(e);var r,i=(r-1)*t,s=Math.floor(i),o=o1(mje(e,s).subarray(0,s+1)),a=Iq(e.subarray(s+1));return o+(a-o)*(i-s)}}function hnn(e,t,n=fje){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function pnn(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function gje(e,t){return Oq(e,.5,t)}function x_(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function yje(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function mnn(e,...t){e=new E3(e),t=t.map(gnn);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function gnn(e){return e instanceof E3?e:new E3(e)}function ynn(...e){const t=new E3;for(const n of e)for(const r of n)t.add(r);return t}const Do="year",Uu="quarter",ma="month",Ms="week",zu="date",ca="day",ph="dayofyear",Al="hours",Il="minutes",yc="seconds",Df="milliseconds",bee=[Do,Uu,ma,Ms,zu,ca,ph,Al,Il,yc,Df],IU=bee.reduce((e,t,n)=>(e[t]=1+n,e),{});function wee(e){const t=ht(e).slice(),n={};return t.length||$e("Missing time unit."),t.forEach(i=>{Vt(IU,i)?n[i]=1:$e(`Invalid time unit: ${i}.`)}),(n[Ms]||n[ca]?1:0)+(n[Uu]||n[ma]||n[zu]?1:0)+(n[ph]?1:0)>1&&$e(`Incompatible time units: ${e}`),t.sort((i,s)=>IU[i]-IU[s]),t}const vnn={[Do]:"%Y ",[Uu]:"Q%q ",[ma]:"%b ",[zu]:"%d ",[Ms]:"W%U ",[ca]:"%a ",[ph]:"%j ",[Al]:"%H:00",[Il]:"00:%M",[yc]:":%S",[Df]:".%L",[`${Do}-${ma}`]:"%Y-%m ",[`${Do}-${ma}-${zu}`]:"%Y-%m-%d ",[`${Al}-${Il}`]:"%H:%M"};function vje(e,t){const n=En({},vnn,t),r=wee(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const _v=new Date;function Eee(e){return _v.setFullYear(e),_v.setMonth(0),_v.setDate(1),_v.setHours(0,0,0,0),_v}function _je(e){return wje(new Date(e))}function bje(e){return Pq(new Date(e))}function wje(e){return Np.count(Eee(e.getFullYear())-1,e)}function Pq(e){return xS.count(Eee(e.getFullYear())-1,e)}function kq(e){return Eee(e).getDay()}function _nn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function Eje(e){return xje(new Date(e))}function Sje(e){return $q(new Date(e))}function xje(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Zg.count(t-1,e)}function $q(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return TS.count(t-1,e)}function Rq(e){return _v.setTime(Date.UTC(e,0,1)),_v.getUTCDay()}function bnn(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function Tje(e,t,n,r,i){const s=t||1,o=tr(e),a=(y,v,_)=>(_=_||y,wnn(n[_],r[_],y===o&&s,v)),u=new Date,l=Nf(e),c=l[Do]?a(Do):Sa(2012),f=l[ma]?a(ma):l[Uu]?a(Uu):wg,d=l[Ms]&&l[ca]?a(ca,1,Ms+ca):l[Ms]?a(Ms,1):l[ca]?a(ca,1):l[zu]?a(zu,1):l[ph]?a(ph,1):KS,h=l[Al]?a(Al):wg,p=l[Il]?a(Il):wg,m=l[yc]?a(yc):wg,g=l[Df]?a(Df):wg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function wnn(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function RE(e,t,n){return t+e*7-(n+6)%7}const Enn={[Do]:e=>e.getFullYear(),[Uu]:e=>Math.floor(e.getMonth()/3),[ma]:e=>e.getMonth(),[zu]:e=>e.getDate(),[Al]:e=>e.getHours(),[Il]:e=>e.getMinutes(),[yc]:e=>e.getSeconds(),[Df]:e=>e.getMilliseconds(),[ph]:e=>wje(e),[Ms]:e=>Pq(e),[Ms+ca]:(e,t)=>RE(Pq(e),e.getDay(),kq(t)),[ca]:(e,t)=>RE(1,e.getDay(),kq(t))},Snn={[Uu]:e=>3*e,[Ms]:(e,t)=>RE(e,0,kq(t))};function Cje(e,t){return Tje(e,t||1,Enn,Snn,_nn)}const xnn={[Do]:e=>e.getUTCFullYear(),[Uu]:e=>Math.floor(e.getUTCMonth()/3),[ma]:e=>e.getUTCMonth(),[zu]:e=>e.getUTCDate(),[Al]:e=>e.getUTCHours(),[Il]:e=>e.getUTCMinutes(),[yc]:e=>e.getUTCSeconds(),[Df]:e=>e.getUTCMilliseconds(),[ph]:e=>xje(e),[Ms]:e=>$q(e),[ca]:(e,t)=>RE(1,e.getUTCDay(),Rq(t)),[Ms+ca]:(e,t)=>RE($q(e),e.getUTCDay(),Rq(t))},Tnn={[Uu]:e=>3*e,[Ms]:(e,t)=>RE(e,0,Rq(t))};function Aje(e,t){return Tje(e,t||1,xnn,Tnn,bnn)}const Cnn={[Do]:rh,[Uu]:eA.every(3),[ma]:eA,[Ms]:xS,[zu]:Np,[ca]:Np,[ph]:Np,[Al]:aF,[Il]:sF,[yc]:Ep,[Df]:aE},Ann={[Do]:ih,[Uu]:tA.every(3),[ma]:tA,[Ms]:TS,[zu]:Zg,[ca]:Zg,[ph]:Zg,[Al]:uF,[Il]:oF,[yc]:Ep,[Df]:aE};function ZS(e){return Cnn[e]}function ex(e){return Ann[e]}function Ije(e,t,n){return e?e.offset(t,n):void 0}function Oje(e,t,n){return Ije(ZS(e),t,n)}function Pje(e,t,n){return Ije(ex(e),t,n)}function kje(e,t,n,r){return e?e.range(t,n,r):void 0}function $je(e,t,n,r){return kje(ZS(e),t,n,r)}function Rje(e,t,n,r){return kje(ex(e),t,n,r)}const QT=1e3,JT=QT*60,ZT=JT*60,A5=ZT*24,Inn=A5*7,Sve=A5*30,Nq=A5*365,Nje=[Do,ma,zu,Al,Il,yc,Df],e2=Nje.slice(0,-1),t2=e2.slice(0,-1),n2=t2.slice(0,-1),Onn=n2.slice(0,-1),Pnn=[Do,Ms],xve=[Do,ma],Dje=[Do],oT=[[e2,1,QT],[e2,5,5*QT],[e2,15,15*QT],[e2,30,30*QT],[t2,1,JT],[t2,5,5*JT],[t2,15,15*JT],[t2,30,30*JT],[n2,1,ZT],[n2,3,3*ZT],[n2,6,6*ZT],[n2,12,12*ZT],[Onn,1,A5],[Pnn,1,Inn],[xve,1,Sve],[xve,3,3*Sve],[Dje,1,Nq]];function Mje(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(bO(t))/n;let i=wO(a=>a[2]).right(oT,r),s,o;return i===oT.length?(s=Dje,o=$A(t[0]/Nq,t[1]/Nq,n)):i?(i=oT[r/oT[i-1][2]<oT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=Nje,o=Math.max($A(t[0],t[1],n),1)),{units:s,step:o}}function r2(e){const t={};return n=>t[n]||(t[n]=e(n))}function knn(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=$nn(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function $nn(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function Lje(e){const t=r2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=T1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return knn(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=T1(o??",f");const a=$A(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=sRe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=oRe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=iRe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let Dq;Fje();function Fje(){return Dq=Lje({format:ES,formatPrefix:dX})}function jje(e){return Lje(rRe(e))}function cL(e){return arguments.length?Dq=jje(e):Dq}function Tve(e,t,n){n=n||{},gt(n)||$e(`Invalid time multi-format specifier: ${n}`);const r=t(yc),i=t(Il),s=t(Al),o=t(zu),a=t(Ms),u=t(ma),l=t(Uu),c=t(Do),f=e(n[Df]||".%L"),d=e(n[yc]||":%S"),h=e(n[Il]||"%I:%M"),p=e(n[Al]||"%I %p"),m=e(n[zu]||n[ca]||"%a %d"),g=e(n[Ms]||"%b %d"),y=e(n[ma]||"%B"),v=e(n[Uu]||"%B"),_=e(n[Do]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:_)(w)}function Bje(e){const t=r2(e.format),n=r2(e.utcFormat);return{timeFormat:r=>pt(r)?t(r):Tve(t,ZS,r),utcFormat:r=>pt(r)?n(r):Tve(n,ex,r),timeParse:r2(e.parse),utcParse:r2(e.utcParse)}}let Mq;Uje();function Uje(){return Mq=Bje({format:vX,parse:DRe,utcFormat:lF,utcParse:MRe})}function zje(e){return Bje(PRe(e))}function RA(e){return arguments.length?Mq=zje(e):Mq}const Lq=(e,t)=>En({},e,t);function Vje(e,t){const n=e?jje(e):cL(),r=t?zje(t):RA();return Lq(n,r)}function See(e,t){const n=arguments.length;return n&&n!==2&&$e("defaultLocale expects either zero or two arguments."),n?Lq(cL(e),RA(t)):Lq(cL(),RA())}function Rnn(){return Fje(),Uje(),See()}const Nnn=/^(data:|([A-Za-z]+:)?\/\/)/,Dnn=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Mnn=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Cve="file://";function Lnn(e,t){return n=>({options:n||{},sanitize:jnn,load:Fnn,fileAccess:!!t,file:Bnn(t),http:znn(e)})}async function Fnn(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function jnn(e,t){t=En({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Dnn.test(e.replace(Mnn,""));(e==null||typeof e!="string"||!a)&&$e("Sanitize failure, invalid URI: "+st(e));const u=Nnn.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Cve))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Cve.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Bnn(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):Unn}async function Unn(){$e("No file system access.")}function znn(e){return e?async function(t,n){const r=En({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Sn(s[i])?s[i]():s.text():$e(s.status+""+s.statusText)}:Vnn}async function Vnn(){$e("No HTTP fetch method available.")}const Hnn=e=>e!=null&&e===e,qnn=e=>e==="true"||e==="false"||e===!0||e===!1,Wnn=e=>!Number.isNaN(Date.parse(e)),Hje=e=>!Number.isNaN(+e)&&!(e instanceof Date),Gnn=e=>Hje(e)&&Number.isInteger(+e),Fq={boolean:yee,integer:fa,number:fa,date:vee,string:_ee,unknown:Ea},Fk=[qnn,Gnn,Hje,Wnn],Ynn=["boolean","integer","number","date"];function qje(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=Fk.length,i=Fk.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Hnn(u)&&!Fk[a](u)&&(i[a]=0,++o,o===Fk.length))return"string";return Ynn[i.reduce((s,o)=>s===0?o:s,0)-1]}function Wje(e,t){return t.reduce((n,r)=>(n[r]=qje(e,r),n),{})}function Ave(e){const t=function(n,r){const i={delimiter:e};return xee(n,r?En(r,i):i)};return t.responseType="text",t}function xee(e,t){return t.header&&(e=t.header.map(st).join(t.delimiter)+`
`+e),eRe(t.delimiter).parse(e+"")}xee.responseType="text";function Knn(e){return typeof Buffer=="function"&&Sn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Tee(e,t){const n=t&&t.property?mc(t.property):Ea;return gt(e)&&!Knn(e)?Xnn(n(e),t):n(JSON.parse(e))}Tee.responseType="json";function Xnn(e,t){return!Ne(e)&&rje(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Qnn={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Gje(e,t){let n,r,i,s;return e=Tee(e,t),t&&t.feature?(n=Xtn,i=t.feature):t&&t.mesh?(n=Jtn,i=t.mesh,s=Qnn[t.filter]):$e("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):$e("Invalid TopoJSON object: "+i),r&&r.features||[r]}Gje.responseType="json";const wR={dsv:xee,csv:Ave(","),tsv:Ave("	"),json:Tee,topojson:Gje};function Cee(e,t){return arguments.length>1?(wR[e]=t,this):Vt(wR,e)?wR[e]:null}function Yje(e){const t=Cee(e);return t&&t.responseType||"text"}function Kje(e,t,n,r){t=t||{};const i=Cee(t.type||"json");return i||$e("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Jnn(e,t.parse,n,r),Vt(e,"columns")&&delete e.columns,e}function Jnn(e,t,n,r){if(!e.length)return;const i=RA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=Wje(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Fq[p])throw Error("Illegal format pattern: "+h+":"+p);return Fq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const I5=Lnn(typeof fetch<"u"&&fetch,null);function O5(e){const t=e||Ea,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function ER(e,t){try{await t(e)}catch(n){e.error(n)}}const Xje=Symbol("vega_id");let Znn=1;function P5(e){return!!(e&&Ut(e))}function Ut(e){return e[Xje]}function Qje(e,t){return e[Xje]=t,e}function Or(e){const t=e===Object(e)?e:{data:e};return Ut(t)?t:Qje(t,Znn++)}function Aee(e){return k5(e,Or({}))}function k5(e,t){for(const n in e)t[n]=e[n];return t}function Jje(e,t){return Qje(t,Ut(e))}function T_(e,t){return e?t?(n,r)=>e(n,r)||Ut(t(n))-Ut(t(r)):(n,r)=>e(n,r)||Ut(n)-Ut(r):null}function Zje(e){return e&&e.constructor===C_}function C_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:C_,insert(a){const u=ht(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Sn(a)?r:t,l=ht(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Sa(l)};return Sn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Sn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Ut(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Ut(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Ut(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Ut(m),l[g]?l[g]=1:a.add.push(Or(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Ut(m)]<0&&a.rem.push(m);function y(v,_,w){w?v[_]=w(v):a.encode=_,o||(c[Ut(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Ut(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Ut(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Ut(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const SR="_:mod:_";function $5(){Object.defineProperty(this,SR,{writable:!0,value:{}})}$5.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[SR];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Ne(n)?1+n.length:-1),i},modified(e,t){const n=this[SR];if(arguments.length){if(Ne(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[SR]={},this}};let ern=0;const trn="pulse",nrn=new $5,rrn=1,irn=2;function ri(e,t,n,r){this.id=++ern,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Ive(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ri.prototype={targets(){return this._targets||(this._targets=O5(_O))},set(e){return this.value!==e?(this.value=e,1):0},skip:Ive(rrn),modified:Ive(irn),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new $5,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof ri?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===trn)ht(a).forEach(f=>{f instanceof ri?f!==this&&(f.targets().add(this),s.push(f)):$e("Pulse parameters must be operator instances.")}),this.source=a;else if(Ne(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||nrn,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function srn(e,t,n,r){let i=1,s;return e instanceof ri?s=e:e&&e.prototype instanceof ri?s=new e:Sn(e)?s=new ri(null,e):(i=0,s=new ri(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function orn(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let arn=0;function R5(e,t,n){this.id=++arn,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function tg(e,t,n){return new R5(e,t,n)}R5.prototype={_filter:gc,_apply:Ea,targets(){return this._targets||(this._targets=O5(_O))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=tg(e);return this.targets().add(t),t},apply(e){const t=tg(null,e);return this.targets().add(t),t},merge(){const e=tg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=tg();return this.targets().add(tg(null,null,mee(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(tg(null,null,()=>n=!0)),t.targets().add(tg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=gc,this._targets=null}};function urn(e,t,n,r){const i=this,s=tg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ht(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function lrn(e,t){const n=this.locale();return Kje(e,t,n.timeParse,n.utcParse)}function crn(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function frn(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:Yje(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function drn(e,t,n){const r=this,i=r._pending||hrn(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(gc).insert(s.data||[])),i.done(),s}function hrn(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const prn={skip:!0};function mrn(e,t,n,r,i){return(e instanceof ri?yrn:grn)(this,e,t,n,r,i),this}function grn(e,t,n,r,i,s){const o=En({},s,prn);let a,u;Sn(n)||(n=Sa(n)),r===void 0?a=l=>e.touch(n(l)):Sn(r)?(u=new ri(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;Zje(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function yrn(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new ri(null,vrn(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function vrn(e,t){return t=Sn(t)?t:Sa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function _rn(e){e.rank=++this._rank}function brn(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&$e("Cycle detected in dataflow graph.")}const fL={},hd=1,lg=2,ep=4,wrn=hd|lg,Ove=hd|ep,rb=hd|lg|ep,Pve=8,aT=16,kve=32,$ve=64;function l0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function OU(e,t){const n=[];return ug(e,t,r=>n.push(r)),n}function Rve(e,t){const n={};return e.visit(t,r=>{n[Ut(r)]=1}),r=>n[Ut(r)]?null:r}function jk(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}l0.prototype={StopPropagation:fL,ADD:hd,REM:lg,MOD:ep,ADD_REM:wrn,ADD_MOD:Ove,ALL:rb,REFLOW:Pve,SOURCE:aT,NO_SOURCE:kve,NO_FIELDS:$ve,fork(e){return new l0(this.dataflow).init(this,e)},clone(){const e=this.fork(rb);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(rb|aT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new l0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&$ve)&&(n.fields=e.fields),t&hd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&lg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ep?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&kve?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||rb;return t&hd&&this.add.length||t&lg&&this.rem.length||t&ep&&this.mod.length},reflow(e){if(e)return this.fork(rb).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ep,Rve(this,hd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ne(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ne(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&hd&&(n.addF=jk(n.addF,t)),e&lg&&(n.remF=jk(n.remF,t)),e&ep&&(n.modF=jk(n.modF,t)),e&aT&&(n.srcF=jk(n.srcF,t)),n},materialize(e){e=e||rb;const t=this;return e&hd&&t.addF&&(t.add=OU(t.add,t.addF),t.addF=null),e&lg&&t.remF&&(t.rem=OU(t.rem,t.remF),t.remF=null),e&ep&&t.modF&&(t.mod=OU(t.mod,t.modF),t.modF=null),e&aT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&aT)return ug(n.source,n.srcF,r),n;e&hd&&ug(n.add,n.addF,r),e&lg&&ug(n.rem,n.remF,r),e&ep&&ug(n.mod,n.modF,r);const i=n.source;if(e&Pve&&i){const s=n.add.length+n.mod.length;s===i.length||(s?ug(i,Rve(n,Ove),r):ug(i,n.srcF,r))}return n}};function Iee(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}nt(Iee,l0,{fork(e){const t=new l0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ne(e)?e.some(r=>n[r]):n[e]:0},filter(){$e("MultiPulse does not support filtering.")},materialize(){$e("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function Ern(e,t,n){const r=this,i=[];if(r._pulse)return eBe(r);if(r._pending&&await r._pending,t&&await ER(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new l0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=O5(_O);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=fL),u!==fL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await ER(r,c[f].callback)}return n&&await ER(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function Srn(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function xrn(e,t,n){return this._pulse?eBe(this):(this.evaluate(e,t,n),this)}function Trn(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function eBe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function Crn(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Arn(e,t){const n=e.source,r=this._clock;return n&&Ne(n)?new Iee(this,r,n.map(i=>i.pulse),t):this._input[e.id]||Irn(this._pulse,n&&n.pulse)}function Irn(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==fL&&(e.source=t.source),e)}const Oee={skip:!1,force:!1};function Orn(e,t){const n=t||Oee;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Prn(e,t,n){const r=n||Oee;return(e.set(t)||r.force)&&this.touch(e,r),this}function krn(e,t,n){this.touch(e,n||Oee);const r=new l0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function $rn(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),tBe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Rrn(t,0,e)):r=n,r}}}function tBe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function Rrn(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,tBe(e,r,t,n)}function Rw(){this.logger(cee()),this.logLevel(uee),this._clock=0,this._rank=0,this._locale=See();try{this._loader=I5()}catch{}this._touched=O5(_O),this._input={},this._pulse=null,this._heap=$rn((e,t)=>e.qrank-t.qrank),this._postrun=[]}function uT(e){return function(){return this._log[e].apply(this,arguments)}}Rw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:uT("error"),warn:uT("warn"),info:uT("info"),debug:uT("debug"),logLevel:uT("level"),cleanThreshold:1e4,add:srn,connect:orn,rank:_rn,rerank:brn,pulse:krn,touch:Orn,update:Prn,changeset:C_,ingest:crn,parse:lrn,preload:drn,request:frn,events:urn,on:mrn,evaluate:Ern,run:xrn,runAsync:Srn,runAfter:Trn,_enqueue:Crn,_getPulse:Arn};function Ie(e,t){ri.call(this,e,null,t)}nt(Ie,ri,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const NE={};function nBe(e){const t=rBe(e);return t&&t.Definition||null}function rBe(e){return e=e&&e.toLowerCase(),Vt(NE,e)?NE[e]:null}function*iBe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Pee(e,t,n){const r=Float64Array.from(iBe(e,n));return r.sort(u0),t.map(i=>hnn(r,i))}function kee(e,t){return Pee(e,[.25,.5,.75],t)}function $ee(e,t){const n=e.length,r=ann(e,t),i=kee(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function sBe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var vc=Math.random;function Nrn(e){vc=e}function oBe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(iBe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(vc()*s)];c[l]=a/s}return c.sort(u0),[Oq(c,n/2),Oq(c,1-n/2)]}function aBe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?Drn(s,t+t/4):s}function Drn(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function Mrn(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Lrn(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*vc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const uBe=Math.sqrt(2*Math.PI),Frn=Math.SQRT2;let lT=NaN;function N5(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(lT===lT)n=lT,lT=NaN;else{do n=vc()*2-1,r=vc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,lT=r*s}return e+n*t}function Ree(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*uBe)}function D5(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function M5(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Frn*jrn(2*e-1)}function jrn(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Nee(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>N5(n,r),pdf:s=>Ree(s,n,r),cdf:s=>D5(s,n,r),icdf:s=>M5(s,n,r)};return i.mean(e).stdev(t)}function Dee(e,t){const n=Nee();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=$ee(e)),i):t},sample(){return e[~~(vc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Mee(e,t){return e=e||0,t=t??1,Math.exp(e+N5()*t)}function Lee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*uBe*e)}function Fee(e,t,n){return D5(Math.log(e),t,n)}function jee(e,t,n){return Math.exp(M5(e,t,n))}function lBe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Mee(n,r),pdf:s=>Lee(s,n,r),cdf:s=>Fee(s,n,r),icdf:s=>jee(s,n,r)};return i.mean(e).stdev(t)}function cBe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=vc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Bee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*vc()}function Uee(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function zee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Vee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function fBe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Bee(n,r),pdf:s=>Uee(s,n,r),cdf:s=>zee(s,n,r),icdf:s=>Vee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Hee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function EO(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function L5(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function SO(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function tx(e,t,n,r,i){let s=0,o=0;return SO(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function qee(e,t,n){let r=0,i=0,s=0,o=0,a=0;SO(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=EO(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:tx(e,t,n,i,l)}}function dBe(e,t,n){let r=0,i=0,s=0,o=0,a=0;SO(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=EO(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:tx(e,t,n,i,l)}}function hBe(e,t,n){const[r,i,s,o]=L5(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;SO(e,t,n,(v,_)=>{d=r[f++],h=Math.log(_),p=d*_,a+=(_*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=EO(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:tx(e,t,n,o,y)}}function pBe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;SO(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=EO(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:tx(e,t,n,a,c)}}function Wee(e,t,n){const[r,i,s,o]=L5(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,_=(d*u-f*l)/v,w=(f*y-d*l)/v,x=-_*u,E=b=>(b=b-s,_*b*b+w*b+x+o);return{coef:[x-w*s+_*s*s+o,w-2*_*s,_],predict:E,rSquared:tx(e,t,n,o,E)}}function mBe(e,t,n,r){if(r===0)return Hee(e,t,n);if(r===1)return qee(e,t,n);if(r===2)return Wee(e,t,n);const[i,s,o,a]=L5(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=Urn(c),v=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(d=3;d<f;++d)w+=y[d]*Math.pow(_,d);return w};return{coef:Brn(f,y,-o,a),predict:v,rSquared:tx(e,t,n,a,v)}}function Brn(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function Urn(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Nve=2,Dve=1e-12;function gBe(e,t,n,r){const[i,s,o,a]=L5(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Nve;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],_=p[1],w=y-i[v]>i[_]-y?v:_;let x=0,E=0,b=0,T=0,A=0;const C=1/Math.abs(i[w]-y||1);for(let $=v;$<=_;++$){const M=i[$],B=s[$],z=zrn(Math.abs(y-M)*C)*d[$],W=M*z;x+=z,E+=W,b+=B*z,T+=B*W,A+=M*W}const[P,N]=EO(E/x,b/x,T/x,A/x);c[g]=P+N*y,f[g]=Math.abs(s[g]-c[g]),Vrn(i,g+1,p)}if(h===Nve)break;const m=gje(f);if(Math.abs(m)<Dve)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Dve:(v=1-y*y)*v}return Hrn(i,c,o,a)}function zrn(e){return(e=1-e*e*e)*e*e}function Vrn(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function Hrn(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const qrn=.5*Math.PI/180;function F5(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=Wrn(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&Grn(f,m,d,h,p)>qrn?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function Wrn(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Grn(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function Yrn(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function jq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Yrn(e)}function yBe(e,t,n){return n||e+(t?"_"+t:"")}const PU=()=>{},Krn={init:PU,add:PU,rem:PU,idx:0},NA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},xO=Object.keys(NA).filter(e=>e!=="__count__");function Xrn(e,t){return(n,r)=>En({name:e,aggregate_param:r,out:n||e},Krn,t)}[...xO,"__count__"].forEach(e=>{NA[e]=Xrn(e,NA[e])});function vBe(e,t,n){return NA[e](n,t)}function _Be(e,t){return e.idx-t.idx}function Qrn(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=NA[i]())})};return e.forEach(n),Object.values(t).sort(_Be)}function Jrn(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Zrn(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function ein(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function tin(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function bBe(e,t){const n=t||Ea,r=Qrn(e),i=e.slice().sort(_Be);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Jrn,s.prototype.add=Zrn,s.prototype.rem=ein,s.prototype.set=tin,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Gee(e){this._key=e?mc(e):Ut,this.reset()}const Uo=Gee.prototype;Uo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Uo.add=function(e){this._add.push(e)};Uo.rem=function(e){this._rem.push(e)};Uo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Uo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Vt(n,s)||(n[s]=1,++i);return i};Uo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=tje(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Uo.argmin=function(e){return this.extent(e)[0]||{}};Uo.argmax=function(e){return this.extent(e)[1]||{}};Uo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Uo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Uo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=kee(this.values(),e),this._get=e),this._q};Uo.q1=function(e){return this.quartile(e)[0]};Uo.q2=function(e){return this.quartile(e)[1]};Uo.q3=function(e){return this.quartile(e)[2]};Uo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=oBe(this.values(),1e3,.05,e),this._get=e),this._ci};Uo.ci0=function(e){return this.ci(e)[0]};Uo.ci1=function(e){return this.ci(e)[1]};function j0(e){Ie.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}j0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:xO},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};nt(j0,Ie,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const _=ht(pa(v)),w=_.length;let x=0,E;for(;x<w;++x)r[E=_[x]]||(r[E]=1,t.push(E))}this._dims=ht(e.groupby),this._dnames=this._dims.map(v=>{const _=es(v);return i(v),n.push(_),_}),this.cellkey=e.key?e.key:jq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&$e("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&$e("Null aggregate field specified."),m=es(f),g=yBe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(vBe(d,h,g))}return this._measures=this._measures.map(v=>bBe(v,v.field)),Object.create(null)},cellkey:jq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Gee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?Jje(t.tuple,s):Or(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const nin=1e-14;function Yee(e){Ie.call(this,null,e)}Yee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};nt(Yee,Ie,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(pa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=sBe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=fa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(nin+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Ku(u,pa(t),e.name||"bin_"+es(t))}});function wBe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?aje(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Kee(e){Ie.call(this,[],e)}Kee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};nt(Kee,Ie,{transform(e,t){const n=t.fork(t.ALL),r=wBe(Ut,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(T_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function EBe(e){ri.call(this,null,rin,e)}nt(EBe,ri);function rin(e){return this.value&&!e.modified()?this.value:pee(e.fields,e.orders)}function Xee(e){Ie.call(this,null,e)}Xee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function iin(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}nt(Xee,Ie,{transform(e,t){const n=f=>d=>{for(var h=iin(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Or({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Qee(e){Ie.call(this,null,e)}Qee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};nt(Qee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=sin(a,i,s,e.filter||gc)):n.mod=a,n.source=this.value,n.modifies(r)}});function sin(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Or(s)),s={},s[t]=l);return i}const Mve={kde:Dee,mixture:cBe,normal:Nee,lognormal:lBe,uniform:fBe},oin="distributions",Lve="function",ain="field";function SBe(e,t){const n=e[Lve];Vt(Mve,n)||$e("Unknown distribution function: "+n);const r=Mve[n]();for(const i in e)i===ain?r.data((e.from||t()).map(e[i])):i===oin?r[i](e[i].map(s=>SBe(s,t))):typeof r[i]===Lve&&r[i](e[i]);return r}function Jee(e){Ie.call(this,null,e)}const xBe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],uin={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:xBe},{name:"weights",type:"number",array:!0}]};Jee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:xBe.concat(uin)},{name:"as",type:"string",array:!0,default:["value","density"]}]};nt(Jee,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=SBe(e.distribution,lin(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&$e("Invalid density method: "+o),!e.extent&&!r.data&&$e("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||hh(r.data()),l=F5(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Or(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function lin(e){return()=>e.materialize(e.SOURCE).source}function TBe(e,t){return e?e.map((n,r)=>t[r]||es(n)):null}function Zee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const CBe="bin";function ete(e){Ie.call(this,null,e)}ete.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:CBe}]};const cin=(e,t)=>bO(hh(e,t))/30;nt(ete,Ie,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Zee(t.source,e.groupby,Ea),i=e.smooth||!1,s=e.field,o=e.step||cin(n,s),a=T_((p,m)=>s(p)-s(m)),u=e.as||CBe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of aBe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function ABe(e){ri.call(this,null,fin,e),this.modified(!0)}nt(ABe,ri);function fin(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ku(n=>t(n,e),pa(t),es(t))}function tte(e){Ie.call(this,[void 0,void 0],e)}tte.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};nt(tte,Ie,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=fa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=es(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function nte(e,t){ri.call(this,e),this.parent=t,this.count=0}nt(nte,ri,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function j5(e){Ie.call(this,{},e),this._keys=JS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}nt(j5,Ie,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Vt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new nte(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Ut(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Ut(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Ut(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Ut(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Ut(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function IBe(e){ri.call(this,null,din,e)}nt(IBe,ri);function din(e){return this.value&&!e.modified()?this.value:Ne(e.name)?ht(e.name).map(t=>mc(t)):mc(e.name,e.as)}function rte(e){Ie.call(this,JS(),e)}rte.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};nt(rte,Ie,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Ut(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Ut(f),1)});function c(f){const d=Ut(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function ite(e){Ie.call(this,[],e)}ite.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};nt(ite,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=TBe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Aee(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function ste(e){Ie.call(this,[],e)}ste.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};nt(ste,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(es),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Aee(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function ote(e){Ie.call(this,null,e)}ote.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};nt(ote,Ie,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function OBe(e){Ie.call(this,[],e)}nt(OBe,Ie,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Or(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const Bk={value:"value",median:gje,mean:pnn,min:Iq,max:o1},hin=[];function ate(e){Ie.call(this,[],e)}ate.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function pin(e){var t=e.method||Bk.value,n;if(Bk[t]==null)$e("Unrecognized imputation method: "+t);else return t===Bk.value?(n=e.value!==void 0?e.value:0,()=>n):Bk[t]}function min(e){const t=e.field;return n=>n?t(n):NaN}nt(ate,Ie,{transform(e,t){var n=t.fork(t.ALL),r=pin(e),i=min(e),s=es(e.field),o=es(e.key),a=(e.groupby||[]).map(es),u=gin(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,_,w,x;for(g=0,_=u.length;g<_;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],x={_impute:!0},y=0,w=p.length;y<w;++y)x[a[y]]=p[y];x[o]=m,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Or(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function gin(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):hin)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function ute(e){j0.call(this,e)}ute.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:xO},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};nt(ute,j0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{En(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function lte(e){Ie.call(this,null,e)}lte.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};nt(lte,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Zee(r,e.groupby,e.field),s=(e.groupby||[]).map(es),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&$e("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=hh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Dee(h,o)[a],m=e.counts?h.length:1,g=c||hh(h);F5(p,g,f,d).forEach(y=>{const v={};for(let _=0;_<s.length;++_)v[s[_]]=h.dims[_];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Or(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function PBe(e){ri.call(this,null,yin,e)}nt(PBe,ri);function yin(e){return this.value&&!e.modified()?this.value:gee(e.fields,e.flat)}function kBe(e){Ie.call(this,[],e),this._pending=null}nt(kBe,Ie,{transform(e,t){const n=t.dataflow;return this._pending?kU(this,t,this._pending):vin(e)?t.StopPropagation:e.values?kU(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ht(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>kU(this,t,ht(r.data)))}});function vin(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function kU(e,t,n){n.forEach(Or);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function cte(e){Ie.call(this,{},e)}cte.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};nt(cte,Ie,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&$e('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&$e('The "as" parameter has too few output field names.'),c=c||i.map(es),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||$e("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function $Be(e){ri.call(this,null,_in,e)}nt($Be,ri);function _in(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function RBe(e){ri.call(this,null,bin,e)}nt(RBe,ri);function bin(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function NBe(e){Ie.call(this,null,e)}nt(NBe,Ie,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function fte(e){j0.call(this,e)}fte.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:xO,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};nt(fte,j0,{_transform:j0.prototype.transform,transform(e,t){return this._transform(win(e,t),t)}});function win(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=pa(n).concat(pa(r)),o=Sin(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>Ein(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function Ein(e,t,n,r){return Ku(i=>t(i)===e?n(i):NaN,r,e+"")}function Sin(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(C5),t?i.slice(0,t):i}function DBe(e){j5.call(this,e)}nt(DBe,j5,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Ut(s),n,t,s);return(e.modified("field")||r&&t.modified(pa(r)))&&$e("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Or(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function dte(e){Ie.call(this,null,e)}dte.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};nt(dte,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=TBe(e.fields,e.as||[]),s=r?(a,u)=>xin(a,u,r,i):k5;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Ut(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Or({}));o[Ut(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Ut(a)]))}),n}});function xin(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function MBe(e){Ie.call(this,null,e)}nt(MBe,Ie,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function hte(e){Ie.call(this,null,e)}hte.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const Tin=1e-14;nt(hte,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Zee(i,e.groupby,e.field),o=(e.groupby||[]).map(es),a=[],u=e.step||.01,l=e.probs||x_(u/2,1-Tin,u),c=l.length;return s.forEach(f=>{const d=Pee(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Or(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function LBe(e){Ie.call(this,null,e)}nt(LBe,Ie,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Ut(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Aee(i);r[Ut(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Ut(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function pte(e){Ie.call(this,[],e),this.count=0}pte.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};nt(pte,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Ut(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*vc()),d<o.length&&d>=u&&(f=o[d],s[Ut(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Ut(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Ut(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Ut(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Ut(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Ut(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Ut(c)])),this.count=a,this.value=n.source=o,n}});function mte(e){Ie.call(this,null,e)}mte.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};nt(mte,Ie,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=x_(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Or(s)}),n.add=t.add.concat(this.value),n}});function FBe(e){Ie.call(this,null,e),this.modified(!0)}nt(FBe,Ie,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function gte(e){Ie.call(this,null,e)}const jBe=["unit0","unit1"];gte.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:bee,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:jBe}]};nt(gte,Ie,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?ex:ZS)(s.unit).offset,a=e.as||jBe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(pa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:Mje({extent:e.extent||hh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=wee(r),o=this.value||{},a=(n?Aje:Cje)(s,i);return a.unit=tr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function BBe(e){Ie.call(this,JS(),e)}nt(BBe,Ie,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function UBe(e){Ie.call(this,null,e)}nt(UBe,Ie,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(T_(e.sort)):t.source).map(e.field))}});function Cin(e,t,n,r){const i=DA[e](t,n);return{init:i.init||wg,update:function(s,o){o[r]=i.next(s)}}}const DA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=DA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||$e("ntile num must be greater than zero.");const n=DA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||$e("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Ain(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Ain(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const Iin=Object.keys(DA);function zBe(e){const t=ht(e.ops),n=ht(e.fields),r=ht(e.params),i=ht(e.aggregate_params),s=ht(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ht(pa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,_=es(g),w=yBe(p,_,s[m]);if(h(g),o.push(w),Vt(DA,p))a.push(Cin(p,g,y,w));else{if(g==null&&p!=="count"&&$e("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let x=l[_];x||(x=l[_]=[],x.field=g,f.push(x)),x.push(vBe(p,v,w))}}),(c.length||f.length)&&(this.cell=Oin(f,c,d)),this.inputs=Object.keys(u)}const VBe=zBe.prototype;VBe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};VBe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Oin(e,t,n){e=e.map(u=>bBe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Gee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function yte(e){Ie.call(this,{},e),this._mlen=0,this._mods=[]}yte.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Iin.concat(xO)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};nt(yte,Ie,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=T_(e.sort),i=jq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new zBe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)Pin(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=wBe(Ut),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Pin(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?wO(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Sa(-1)};t.init();for(let f=0;f<u;++f)kin(c,o,f,u),s&&$in(c,l),t.update(c,a[f])}function kin(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function $in(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const Rin=Object.freeze(Object.defineProperty({__proto__:null,aggregate:j0,bin:Yee,collect:Kee,compare:EBe,countpattern:Xee,cross:Qee,density:Jee,dotbin:ete,expression:ABe,extent:tte,facet:j5,field:IBe,filter:rte,flatten:ite,fold:ste,formula:ote,generate:OBe,impute:ate,joinaggregate:ute,kde:lte,key:PBe,load:kBe,lookup:cte,multiextent:$Be,multivalues:RBe,params:NBe,pivot:fte,prefacet:DBe,project:dte,proxy:MBe,quantile:hte,relay:LBe,sample:pte,sequence:mte,sieve:FBe,subflow:nte,timeunit:gte,tupleindex:BBe,values:UBe,window:yte},Symbol.toStringTag,{value:"Module"}));function c0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Nin=()=>typeof Image<"u"?Image:null;function vte(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Din="identity",DE="linear",dm="log",TO="pow",CO="sqrt",B5="symlog",L1="time",F1="utc",Jd="sequential",nx="diverging",ME="quantile",U5="quantize",z5="threshold",_te="ordinal",Bq="point",HBe="band",bte="bin-ordinal",Ws="continuous",AO="discrete",IO="discretizing",$c="interpolating",wte="temporal";function Min(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Lin(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Ete(){const e=SS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=vte(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=x_(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-d])))return y=Math.max(0,lL(h,m)-1),v=m===g?y:lL(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(_=y,y=p-v,v=p-_),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Ete().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function qBe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return qBe(t())},e}function Fin(){return qBe(Ete().paddingInner(1))}var jin=Array.prototype.map;function Bin(e){return jin.call(e,fa)}const Uin=Array.prototype.slice;function WBe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(snn(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Bin(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Uin.call(r),n):t.slice()},n.tickFormat=function(r,i){return _Re(e[0],tr(e),r??10,i)},n.copy=function(){return WBe().domain(n.domain()).range(n.range())},n}const dL=new Map,GBe=Symbol("vega_scale");function YBe(e){return e[GBe]=!0,e}function zin(e){return e&&e[GBe]===!0}function Vin(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?Min(s):s.invertExtent?Lin(s):void 0),s.type=e,YBe(s)};return r.metadata=Nf(ht(n)),r}function Er(e,t,n){return arguments.length>1?(dL.set(e,Vin(e,t,n)),this):KBe(e)?dL.get(e):void 0}Er(Din,bRe);Er(DE,Jp,Ws);Er(dm,ERe,[Ws,dm]);Er(TO,gX,Ws);Er(CO,JPt,Ws);Er(B5,SRe,Ws);Er(L1,LRe,[Ws,wte]);Er(F1,_$t,[Ws,wte]);Er(Jd,bX,[Ws,$c]);Er(`${Jd}-${DE}`,bX,[Ws,$c]);Er(`${Jd}-${dm}`,FRe,[Ws,$c,dm]);Er(`${Jd}-${TO}`,wX,[Ws,$c]);Er(`${Jd}-${CO}`,b$t,[Ws,$c]);Er(`${Jd}-${B5}`,jRe,[Ws,$c]);Er(`${nx}-${DE}`,BRe,[Ws,$c]);Er(`${nx}-${dm}`,URe,[Ws,$c,dm]);Er(`${nx}-${TO}`,EX,[Ws,$c]);Er(`${nx}-${CO}`,w$t,[Ws,$c]);Er(`${nx}-${B5}`,zRe,[Ws,$c]);Er(ME,xRe,[IO,ME]);Er(U5,TRe,IO);Er(z5,CRe,IO);Er(bte,WBe,[AO,IO]);Er(_te,SS,AO);Er(HBe,Ete,AO);Er(Bq,Fin,AO);function KBe(e){return dL.has(e)}function A_(e,t){const n=dL.get(e);return n&&n.metadata[t]}function Ste(e){return A_(e,Ws)}function LE(e){return A_(e,AO)}function Uq(e){return A_(e,IO)}function XBe(e){return A_(e,dm)}function Hin(e){return A_(e,wte)}function QBe(e){return A_(e,$c)}function JBe(e){return A_(e,ME)}const qin=["clamp","base","constant","exponent"];function ZBe(e,t){const n=t[0],r=tr(t)-n;return function(i){return e(n+i*r)}}function V5(e,t,n){return rX(xte(t||"rgb",n),e)}function e9e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function t9e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Sa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Er(s)().domain([t,n]).range([0,1]),qin.forEach(a=>e[a]?o[a](e[a]()):0),o)}function xte(e,t){const n=JCt[Win(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Win(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Gin={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Yin={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function n9e(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function r9e(e,t){for(const n in e)Tte(n,t(e[n]))}const Fve={};r9e(Yin,n9e);r9e(Gin,e=>V5(n9e(e)));function Tte(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Fve[e]=t,this):Fve[e]}const xR="symbol",Kin="discrete",Xin="gradient",Qin=e=>Ne(e)?e.map(t=>String(t)):String(e),Jin=(e,t)=>e[1]-t[1],Zin=(e,t)=>t[1]-e[1];function Cte(e,t,n){let r;return hr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(bO(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),pt(t)&&(t=e.type===L1?ZS(t):e.type==F1?ex(t):$e("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function i9e(e,t,n){let r=e.range(),i=r[0],s=tr(r),o=Jin;if(i>s&&(r=s,s=i,i=r,o=Zin),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],tr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Ate(e,t){return e.bins?i9e(e,e.bins):e.ticks?e.ticks(t):e.domain()}function s9e(e,t,n,r,i,s){const o=t.type;let a=Qin;if(o===L1||i===L1)a=e.timeFormat(r);else if(o===F1||i===F1)a=e.utcFormat(r);else if(XBe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=o9e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function o9e(e,t,n){const r=Ate(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const zq={[ME]:"quantiles",[U5]:"thresholds",[z5]:"domain"},a9e={[ME]:"quantiles",[U5]:"domain"};function u9e(e,t){return e.bins?nsn(e.bins):e.type===dm?o9e(e,t,!0):zq[e.type]?tsn(e[zq[e.type]]()):Ate(e,t)}function esn(e,t,n){const r=t[a9e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function tsn(e){const t=[-1/0].concat(e);return t.max=1/0,t}function nsn(e){const t=e.slice(0,-1);return t.max=tr(e),t}const rsn=e=>zq[e.type]||e.bins;function l9e(e,t,n,r,i,s,o){const a=a9e[t.type]&&s!==L1&&s!==F1?esn(e,t,i):s9e(e,t,n,i,s,o);return r===xR&&rsn(t)?isn(a):r===Kin?ssn(a):osn(a)}const isn=e=>(t,n,r)=>{const i=jve(r[n+1],jve(r.max,1/0)),s=Bve(t,e),o=Bve(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},jve=(e,t)=>e??t,ssn=e=>(t,n)=>n?e(t):null,osn=e=>t=>e(t),Bve=(e,t)=>Number.isFinite(e)?t(e):null;function asn(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+tr(t),s=i-r;if(e.type===z5){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function usn(e,t,n,r){const i=r||t.type;return pt(n)&&Hin(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===L1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===F1?e.utcFormat("%A, %d %B %Y, %X UTC"):l9e(e,t,5,null,n,r,!0)}function c9e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=usn(e,t,n.format,n.formatType);if(Uq(t.type)){const s=u9e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(LE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(tr(s))}`}}let f9e=0;function lsn(){f9e=0}const hL="p_";function Ite(e){return e&&e.gradient}function d9e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?hL:"";return i||(i=e.id="gradient_"+f9e++,r==="radial"?(e.x1=td(e.x1,.5),e.y1=td(e.y1,.5),e.r1=td(e.r1,0),e.x2=td(e.x2,.5),e.y2=td(e.y2,.5),e.r2=td(e.r2,.5),s=hL):(e.x1=td(e.x1,0),e.y1=td(e.y1,0),e.x2=td(e.x2,1),e.y2=td(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function td(e,t){return e??t}function h9e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Uve={basis:{curve:M$t},"basis-closed":{curve:L$t},"basis-open":{curve:F$t},bundle:{curve:j$t,tension:"beta",value:.85},cardinal:{curve:B$t,tension:"tension",value:0},"cardinal-open":{curve:z$t,tension:"tension",value:0},"cardinal-closed":{curve:U$t,tension:"tension",value:0},"catmull-rom":{curve:V$t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:H$t,tension:"alpha",value:.5},"catmull-rom-open":{curve:q$t,tension:"alpha",value:.5},linear:{curve:SX},"linear-closed":{curve:W$t},monotone:{horizontal:Y$t,vertical:G$t},natural:{curve:K$t},step:{curve:X$t},"step-after":{curve:J$t},"step-before":{curve:Q$t}};function Ote(e,t,n){var r=Vt(Uve,e)&&Uve[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const csn={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},fsn=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,dsn=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,hsn=/^((\s+,?\s*)|(,\s*))/,psn=/^[01]/;function FE(e){const t=[];return(e.match(fsn)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=csn[s],a=msn(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function msn(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?psn:dsn,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(hsn);u!==null&&(i+=u[0].length)}return r}const B0=Math.PI/180,gsn=1e-14,bv=Math.PI/2,Ad=Math.PI*2,ib=Math.sqrt(3)/2;var $U={},RU={},p9e=[].join;function ysn(e,t,n,r,i,s,o,a,u){const l=p9e.call(arguments);if($U[l])return $U[l];const c=o*B0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,_=d/r,w=g*a+y*u,x=v*a+_*u,E=g*e+y*t,b=v*e+_*t;let A=1/((E-w)*(E-w)+(b-x)*(b-x))-.25;A<0&&(A=0);let C=Math.sqrt(A);s==i&&(C=-C);const P=.5*(w+E)-C*(b-x),N=.5*(x+b)+C*(E-w),$=Math.atan2(x-N,w-P);let B=Math.atan2(b-N,E-P)-$;B<0&&s===1?B+=Ad:B>0&&s===0&&(B-=Ad);const z=Math.ceil(Math.abs(B/(bv+.001))),W=[];for(let U=0;U<z;++U){const Y=$+U*B/z,q=$+(U+1)*B/z;W[U]=[P,N,Y,q,n,r,f,d]}return $U[l]=W}function vsn(e){const t=p9e.call(e);if(RU[t])return RU[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),_=Math.sin(v*.5),w=8/3*_*_/Math.sin(v),x=n+p-w*m,E=r+m+w*p,b=n+g,T=r+y,A=b+w*y,C=T-w*g;return RU[t]=[c*x+f*E,d*x+h*E,c*A+f*C,d*A+h*C,c*b+f*T,d*b+h*T]}const zl=["l",0,0,0,0,0,0,0];function _sn(e,t,n){const r=zl[0]=e[0];if(r==="a"||r==="A")zl[1]=t*e[1],zl[2]=n*e[2],zl[3]=e[3],zl[4]=e[4],zl[5]=e[5],zl[6]=t*e[6],zl[7]=n*e[7];else if(r==="h"||r==="H")zl[1]=t*e[1];else if(r==="v"||r==="V")zl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)zl[i]=(i%2==1?t:n)*e[i];return zl}function MA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,_=t.length;v<_;++v){switch(o=t[v],(i!==1||s!==1)&&(o=_sn(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":zve(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":zve(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function zve(e,t,n,r){const i=ysn(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=vsn(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Vve=.5773502691896257,Hve={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ad)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ib*n,i=r-n*Vve,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=ib*n,i=r-n*Vve;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ib*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ib*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ib*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=ib*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function m9e(e){return Vt(Hve,e)?Hve[e]:bsn(e)}var NU={};function bsn(e){if(!Vt(NU,e)){const t=FE(e);NU[e]={draw:function(n,r){MA(n,t,0,0,Math.sqrt(r)/2)}}}return NU[e]}const Xm=.448084975506;function wsn(e){return e.x}function Esn(e){return e.y}function Ssn(e){return e.width}function xsn(e){return e.height}function qh(e){return typeof e=="function"?e:()=>+e}function Uk(e,t,n){return Math.max(t,Math.min(e,n))}function g9e(){var e=wsn,t=Esn,n=Ssn,r=xsn,i=qh(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,_=Uk(+i.call(this,c),0,v),w=Uk(+s.call(this,c),0,v),x=Uk(+o.call(this,c),0,v),E=Uk(+a.call(this,c),0,v);if(u||(u=h=eF()),_<=0&&w<=0&&x<=0&&E<=0)u.rect(p,m,g,y);else{var b=p+g,T=m+y;u.moveTo(p+_,m),u.lineTo(b-w,m),u.bezierCurveTo(b-Xm*w,m,b,m+Xm*w,b,m+w),u.lineTo(b,T-E),u.bezierCurveTo(b,T-Xm*E,b-Xm*E,T,b-E,T),u.lineTo(p+x,T),u.bezierCurveTo(p+Xm*x,T,p,T-Xm*x,p,T-x),u.lineTo(p,m+_),u.bezierCurveTo(p,m+Xm*_,p+Xm*_,m,p+_,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=qh(c),l):e},l.y=function(c){return arguments.length?(t=qh(c),l):t},l.width=function(c){return arguments.length?(n=qh(c),l):n},l.height=function(c){return arguments.length?(r=qh(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=qh(c),s=f!=null?qh(f):i,a=d!=null?qh(d):i,o=h!=null?qh(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function y9e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,_=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-_),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+_),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Ad);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=eF()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function OO(e,t){return e??t}const PO=e=>e.x||0,kO=e=>e.y||0,Tsn=e=>e.width||0,Csn=e=>e.height||0,Asn=e=>(e.x||0)+(e.width||0),Isn=e=>(e.y||0)+(e.height||0),Osn=e=>e.startAngle||0,Psn=e=>e.endAngle||0,ksn=e=>e.padAngle||0,$sn=e=>e.innerRadius||0,Rsn=e=>e.outerRadius||0,Nsn=e=>e.cornerRadius||0,Dsn=e=>OO(e.cornerRadiusTopLeft,e.cornerRadius)||0,Msn=e=>OO(e.cornerRadiusTopRight,e.cornerRadius)||0,Lsn=e=>OO(e.cornerRadiusBottomRight,e.cornerRadius)||0,Fsn=e=>OO(e.cornerRadiusBottomLeft,e.cornerRadius)||0,jsn=e=>OO(e.size,64),Bsn=e=>e.size||1,H5=e=>e.defined!==!1,Usn=e=>m9e(e.shape||"circle"),zsn=qV().startAngle(Osn).endAngle(Psn).padAngle(ksn).innerRadius($sn).outerRadius(Rsn).cornerRadius(Nsn),Vsn=YRe().x(PO).y1(kO).y0(Isn).defined(H5),Hsn=YRe().y(kO).x1(PO).x0(Asn).defined(H5),qsn=GRe().x(PO).y(kO).defined(H5),Wsn=g9e().x(PO).y(kO).width(Tsn).height(Csn).cornerRadius(Dsn,Msn,Lsn,Fsn),Gsn=D$t().type(Usn).size(jsn),Ysn=y9e().x(PO).y(kO).defined(H5).size(Bsn);function Pte(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Ksn(e,t){return zsn.context(e)(t)}function Xsn(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Hsn:Vsn).curve(Ote(r,n.orient,n.tension)).context(e)(t)}function Qsn(e,t){const n=t[0],r=n.interpolate||"linear";return qsn.curve(Ote(r,n.orient,n.tension)).context(e)(t)}function rx(e,t,n,r){return Wsn.context(e)(t,n,r)}function Jsn(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Zsn(e,t){return Gsn.context(e)(t)}function eon(e,t){return Ysn.context(e)(t)}var v9e=1;function _9e(){v9e=1}function kte(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+v9e++),o=i.clipping[s]||(i.clipping[s]={id:s});return Sn(r)?o.path=r(null):Pte(n)?o.path=rx(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Cs(e){this.clear(),e&&this.union(e)}Cs.prototype={clone(){return new Cs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function q5(e){this.mark=e,this.bounds=this.bounds||new Cs}function W5(e){q5.call(this,e),this.items=this.items||[]}nt(W5,q5);function $te(e){this._pending=0,this._loader=e||I5()}function qve(e){e._pending+=1}function cT(e){e._pending-=1}$te.prototype={pending(){return this._pending},sanitizeURL(e){const t=this;return qve(t),t._loader.sanitize(e,{context:"href"}).then(n=>(cT(t),n)).catch(()=>(cT(t),null))},loadImage(e){const t=this,n=Nin();return qve(t),t._loader.sanitize(e,{context:"image"}).then(r=>{const i=r.href;if(!i||!n)throw{url:i};const s=new n,o=Vt(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>cT(t),s.onerror=()=>cT(t),s.src=i,s}).catch(r=>(cT(t),{complete:!1,width:0,height:0,src:r&&r.url||""}))},ready(){const e=this;return new Promise(t=>{function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}n(!1)})}};function Pm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?ton(t,r):0))}return e}function ton(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const non=Ad-1e-8;let G5,TR,CR,Uv,Vq,AR,Hq,qq;const $g=(e,t)=>G5.add(e,t),IR=(e,t)=>$g(TR=e,CR=t),Wve=e=>$g(e,G5.y1),Gve=e=>$g(G5.x1,e),wv=(e,t)=>Vq*e+Hq*t,Ev=(e,t)=>AR*e+qq*t,DU=(e,t)=>$g(wv(e,t),Ev(e,t)),MU=(e,t)=>IR(wv(e,t),Ev(e,t));function $O(e,t){return G5=e,t?(Uv=t*B0,Vq=qq=Math.cos(Uv),AR=Math.sin(Uv),Hq=-AR):(Vq=qq=1,Uv=AR=Hq=0),ron}const ron={beginPath(){},closePath(){},moveTo:MU,lineTo:MU,rect(e,t,n,r){Uv?(DU(e+n,t),DU(e+n,t+r),DU(e,t+r),MU(e,t)):($g(e+n,t+r),IR(e,t))},quadraticCurveTo(e,t,n,r){const i=wv(e,t),s=Ev(e,t),o=wv(n,r),a=Ev(n,r);Yve(TR,i,o,Wve),Yve(CR,s,a,Gve),IR(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=wv(e,t),a=Ev(e,t),u=wv(n,r),l=Ev(n,r),c=wv(i,s),f=Ev(i,s);Kve(TR,o,u,c,Wve),Kve(CR,a,l,f,Gve),IR(c,f)},arc(e,t,n,r,i,s){if(r+=Uv,i+=Uv,TR=n*Math.cos(i)+e,CR=n*Math.sin(i)+t,Math.abs(i-r)>non)$g(e-n,t-n),$g(e+n,t+n);else{const o=l=>$g(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Ad,r<0&&(r+=Ad),i=i%Ad,i<0&&(i+=Ad),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Ad,a=r-r%bv,u=0;u<4&&a>i;++u,a-=bv)o(a);else for(a=r-r%bv+bv,u=0;u<4&&a<i;++u,a=a+bv)o(a)}}};function Yve(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Kve(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>gsn?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Xve(u,e,t,n,r)),0<l&&l<1&&i(Xve(l,e,t,n,r))}function Xve(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var f0=(f0=c0(1,1))?f0.getContext("2d"):null;const Wq=new Cs;function Rte(e){return function(t,n){if(!f0)return!0;e(f0,t),Wq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=Wq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(f0.isPointInPath(u,a))return!0;return!1}}function Nte(e,t){return t.contains(e.x||0,e.y||0)}function b9e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(Wq.set(n,r,n+i,r+s))}function w9e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ew(t,n,r,i,s)}function ew(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function jE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Wc(e,t){return e??t}function Qve(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function ion(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Wc(t.x1,.5)*r,n.y1+Wc(t.y1,.5)*i,Math.max(r,i)*Wc(t.r1,0),n.x1+Wc(t.x2,.5)*r,n.y1+Wc(t.y2,.5)*i,Math.max(r,i)*Wc(t.r2,.5));else{const o=Wc(t.x1,0),a=Wc(t.y1,0),u=Wc(t.x2,1),l=Wc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=c0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Qve(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Qve(s,t.stops)}function E9e(e,t,n){return Ite(n)?ion(e,n,t.bounds):n}function pL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=E9e(e,t,t.fill),!0):!1}var son=[];function BE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=E9e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||son),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function oon(e,t){return e.zindex-t.zindex||e.index-t.index}function Dte(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(oon)}function Mf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Dte(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function mL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Dte(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Mte(e){return function(t,n,r){Mf(n,i=>{(!r||r.intersects(i.bounds))&&S9e(e,t,i,i)})}}function aon(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&S9e(e,t,n.items[0],n.items)}}function S9e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(jE(t,n),n.fill&&pL(t,n,i)&&t.fill(),n.stroke&&BE(t,n,i)&&t.stroke()))}function Y5(e){return e=e||gc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,mL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function RO(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Lte(e){return Y5(RO(e))}function a1(e,t){return"translate("+e+","+t+")"}function Fte(e){return"rotate("+e+")"}function uon(e,t){return"scale("+e+","+t+")"}function x9e(e){return a1(e.x||0,e.y||0)}function lon(e){return a1(e.x||0,e.y||0)+(e.angle?" "+Fte(e.angle):"")}function con(e){return a1(e.x||0,e.y||0)+(e.angle?" "+Fte(e.angle):"")+(e.scaleX||e.scaleY?" "+uon(e.scaleX||1,e.scaleY||1):"")}function jte(e,t,n){function r(o,a){o("transform",lon(a)),o("d",t(null,a))}function i(o,a){return t($O(o,a.angle),a),Pm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=B0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Mte(s),pick:Lte(s),isect:n||Rte(s)}}var fon=jte("arc",Ksn);function don(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function hon(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function pon(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Bte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t($O(u),c),Pm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=RO(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:aon(s),pick:a,isect:Nte,tip:n}}var mon=Bte("area",Xsn,don);function gon(e,t){var n=t.clip;e.save(),Sn(n)?(e.beginPath(),n(e),e.clip()):T9e(e,t.group)}function T9e(e,t){e.beginPath(),Pte(t)?rx(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function C9e(e){const t=Wc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function yon(e,t){e("transform",x9e(t))}function A9e(e,t){const n=C9e(t);e("d",rx(null,t,n,n))}function von(e,t){e("class","background"),e("aria-hidden",!0),A9e(e,t)}function _on(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?A9e(e,t):e("d","")}function bon(e,t,n){const r=t.clip?kte(n,t,t):null;e("clip-path",r)}function won(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Pm(e,t),e.translate(t.x||0,t.y||0)}function LA(e,t,n,r){const i=C9e(t);e.beginPath(),rx(e,t,(n||0)+i,(r||0)+i)}const Eon=RO(LA),Son=RO(LA,!1),xon=RO(LA,!0);function Ton(e,t,n,r){Mf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(LA(e,i,s,o),jE(e,i),i.fill&&pL(e,i,u)&&e.fill(),i.stroke&&!a&&BE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&T9e(e,i),n&&n.translate(-s,-o),Mf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(LA(e,i,s,o),jE(e,i),BE(e,i,u)&&e.stroke())})}function Con(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return mL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Pte(u)&&!xon(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Son(e,u,o,a)?(e.restore(),u):(l=mL(u,v=>Aon(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&Eon(e,u,o,a)&&(l=u),e.restore(),l||null)})}function Aon(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Ion={type:"group",tag:"g",nested:!1,attr:yon,bound:won,draw:Ton,pick:Con,isect:b9e,content:bon,background:von,foreground:_on},FA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ute(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function zte(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Vte(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function K5(e,t){return e==="center"?t/2:e==="right"?t:0}function X5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Oon(e,t,n){const r=Ute(t,n),i=zte(t,r),s=Vte(t,r),o=(t.x||0)-K5(t.align,i),a=(t.y||0)-X5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,FA["xmlns:xlink"],"xlink:href"),e("transform",a1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Pon(e,t){const n=t.image,r=zte(t,n),i=Vte(t,n),s=(t.x||0)-K5(t.align,r),o=(t.y||0)-X5(t.baseline,i);return e.set(s,o,s+r,o+i)}function kon(e,t,n){Mf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Ute(r,this);let s=zte(r,i),o=Vte(r,i);if(s===0||o===0)return;let a=(r.x||0)-K5(r.align,s),u=(r.y||0)-X5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(jE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var $on={type:"image",tag:"image",nested:!1,attr:Oon,bound:Pon,draw:kon,pick:Y5(),isect:gc,get:Ute,xOffset:K5,yOffset:X5},Ron=Bte("line",Qsn,hon);function Non(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",con(t)),e("d",t.path)}function OR(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*B0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=FE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),MA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):MA(e,u,r,i,s,o)}function Don(e,t){return OR($O(e,t.angle),t)?e.set(0,0,0,0):Pm(e,t,!0)}var Mon={type:"path",tag:"path",nested:!1,attr:Non,bound:Don,draw:Mte(OR),pick:Lte(OR),isect:Rte(OR)};function Lon(e,t){e("d",rx(null,t))}function Fon(e,t){var n,r;return Pm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Jve(e,t){e.beginPath(),rx(e,t)}var jon={type:"rect",tag:"path",nested:!1,attr:Lon,bound:Fon,draw:Mte(Jve),pick:Lte(Jve),isect:b9e};function Bon(e,t){e("transform",x9e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Uon(e,t){var n,r;return Pm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function I9e(e,t,n){var r,i,s,o;return t.stroke&&BE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function zon(e,t,n){Mf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&I9e(e,r,i)&&(jE(e,r),e.stroke())}})}function Von(e,t,n,r){return e.isPointInStroke?I9e(e,t,1)&&e.isPointInStroke(n,r):!1}var Hon={type:"rule",tag:"line",nested:!1,attr:Bon,bound:Uon,draw:zon,pick:Y5(Von),isect:w9e},qon=jte("shape",Jsn),Won=jte("symbol",Zsn,Nte);const Zve=oje();var _l={height:Ih,measureWidth:Hte,estimateWidth:gL,width:gL,canvas:O9e};O9e(!0);function O9e(e){_l.width=e&&f0?Hte:gL}function gL(e,t){return P9e(z0(e,t),Ih(e))}function P9e(e,t){return~~(.8*e.length*t)}function Hte(e,t){return Ih(e)<=0||!(t=z0(e,t))?0:k9e(t,Q5(e))}function k9e(e,t){const n=`(${t}) ${e}`;let r=Zve.get(n);return r===void 0&&(f0.font=t,r=f0.measureText(e).width,Zve.set(n,r)),r}function Ih(e){return e.fontSize!=null?+e.fontSize||0:11}function U0(e){return e.lineHeight!=null?e.lineHeight:Ih(e)+2}function Gon(e){return Ne(e)?e.length>1?e:e[0]:e}function NO(e){return Gon(e.lineBreak&&e.text&&!Ne(e.text)?e.text.split(e.lineBreak):e.text)}function qte(e){const t=NO(e);return(Ne(t)?t.length-1:0)*U0(e)}function z0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Kon(e,n):n}function Yon(e){if(_l.width===Hte){const t=Q5(e);return n=>k9e(n,t)}else if(_l.width===gL){const t=Ih(e);return n=>P9e(n,t)}else return t=>_l.width(e,t)}function Kon(e,t){var n=+e.limit,r=Yon(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function DO(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Q5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ih(e)+"px "+DO(e,t)}function Wte(e){var t=e.baseline,n=Ih(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*U0(e):t==="line-bottom"?.29*n-.5*U0(e):0)}const Xon={left:"start",center:"middle",right:"end"},sC=new Cs;function J5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-bv,t+=r*Math.cos(i),n+=r*Math.sin(i)),sC.x1=t,sC.y1=n,sC}function Qon(e,t){var n=t.dx||0,r=(t.dy||0)+Wte(t),i=J5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",Xon[t.align]||"start"),a?(u=a1(s,o)+" "+Fte(a),(n||r)&&(u+=" "+a1(n,r))):u=a1(s+n,o+r),e("transform",u)}function Gte(e,t,n){var r=_l.height(t),i=t.align,s=J5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Wte(t)-Math.round(.8*r),c=NO(t),f;if(Ne(c)?(r+=U0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,_l.width(t,h)),0)):f=_l.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*B0,o,a);else if(n===2)return e.rotatedPoints(t.angle*B0,o,a);return e}function Jon(e,t,n){Mf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Q5(r),e.textAlign=r.align||"left",s=J5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*B0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Wte(r),c=NO(r),jE(e,r),Ne(c))for(l=U0(r),u=0;u<c.length;++u)f=z0(r,c[u]),r.fill&&pL(e,r,i)&&e.fillText(f,o,a),r.stroke&&BE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=z0(r,c),r.fill&&pL(e,r,i)&&e.fillText(f,o,a),r.stroke&&BE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function Zon(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=J5(t),a=o.x1,u=o.y1,l=Gte(sC,t,1),c=-t.angle*B0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function ean(e,t){const n=Gte(sC,e,2);return ew(t,n[0],n[1],n[2],n[3])||ew(t,n[0],n[1],n[4],n[5])||ew(t,n[4],n[5],n[6],n[7])||ew(t,n[2],n[3],n[6],n[7])}var tan={type:"text",tag:"text",nested:!1,attr:Qon,bound:Gte,draw:Jon,pick:Y5(Zon),isect:ean},nan=Bte("trail",eon,pon),Ol={arc:fon,area:mon,group:Ion,image:$on,line:Ron,path:Mon,rect:jon,rule:Hon,shape:qon,symbol:Won,text:tan,trail:nan};function Gq(e,t,n){var r=Ol[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Cs),e,n)}var e1e={mark:null};function $9e(e,t,n){var r=Ol[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(e1e.mark=e,l=e1e),c=Gq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Cs,o)for(a=0,u=s.length;a<u;++a)t.union(Gq(s[a],i,n));return e.bounds=t}const ran=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function R9e(e,t){return JSON.stringify(e,ran,t)}function N9e(e){const t=typeof e=="string"?JSON.parse(e):e;return D9e(t)}function D9e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&D9e(n[i]);return t&&$9e(e),e}function Yte(e){arguments.length?this.root=N9e(e):(this.root=M9e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new W5(this.root)])}Yte.prototype={toJSON(e){return R9e(this.root,e||0)},mark(e,t,n){t=t||this.root.items[0];const r=M9e(e,t);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}};function M9e(e,t){const n={bounds:new Cs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Rg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Kte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ns(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Rg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Zl(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function L9e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Z5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function ian(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Ol[i.marktype]).tip){for(o=Z5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}function V0(e,t){this._active=null,this._handlers={},this._loader=e||I5(),this._tooltip=t||san}function san(e,t,n,r){e.element().setAttribute("title",r||"")}V0.prototype={initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene(e){return arguments.length?(this._scene=e,this):this._scene},on(){},off(){},_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n},eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(r=>{const i=new MouseEvent(e.type,e),s=Rg(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(i)}).catch(()=>{})},handleTooltip(e,t,n){if(t&&t.tooltip!=null){t=ian(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,s=i.width(),o=i.height();let a=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)a+=e.x||0,u+=e.y||0;return{x:a,y:u,width:s,height:o,left:a,top:u,right:a+s,bottom:u+o}}};function Ll(e){this._el=null,this._bgcolor=null,this._loader=new $te(e)}Ll.prototype={initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(e){return arguments.length===0?this._bgcolor:(this._bgcolor=e,this)},resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty(){},render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n},_render(){},renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)},_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const i=n._call;n._ready=n._loader.ready().then(s=>{s&&i(),n._ready=null})}return r},sanitizeURL(e){return this._load("sanitizeURL",e)},loadImage(e){return this._load("loadImage",e)}};const oan="keydown",aan="keypress",uan="keyup",F9e="dragenter",PR="dragleave",j9e="dragover",Yq="pointerdown",lan="pointerup",yL="pointermove",oC="pointerout",B9e="pointerover",Kq="mousedown",can="mouseup",U9e="mousemove",Xq="mouseout",z9e="mouseover",vL="click",fan="dblclick",dan="wheel",V9e="mousewheel",_L="touchstart",bL="touchmove",wL="touchend",han=[oan,aan,uan,F9e,PR,j9e,Yq,lan,yL,oC,B9e,Kq,can,U9e,Xq,z9e,vL,fan,dan,V9e,_L,bL,wL],Qq=yL,jA=oC,Jq=vL;function H0(e,t){V0.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}const pan=e=>e===_L||e===bL||e===wL?[_L,bL,wL]:[e];function t1e(e,t){pan(t).forEach(n=>man(e,n))}function man(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function i2(e,t,n){t.forEach(r=>e.fire(r,n))}function n1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?i2(this,e,r):((!i||!i.exit)&&i2(this,n,r),this._active=s,i2(this,t,r),i2(this,e,r))}}function r1e(e){return function(t){i2(this,e,t),this._active=null}}nt(H0,V0,{initialize(e,t,n){return this._canvas=e&&Kte(e,"canvas"),[vL,Kq,Yq,yL,oC,PR].forEach(r=>t1e(this,r)),V0.prototype.initialize.call(this,e,t,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:han,DOMMouseScroll(e){this.fire(V9e,e)},pointermove:n1e([yL,U9e],[B9e,z9e],[oC,Xq]),dragover:n1e([j9e],[F9e],[PR]),pointerout:r1e([oC,Xq]),dragleave:r1e([PR]),pointerdown(e){this._down=this._active,this.fire(Yq,e)},mousedown(e){this._down=this._active,this.fire(Kq,e)},click(e){this._down===this._active&&(this.fire(vL,e),this._down=null)},touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(_L,e,!0)},touchmove(e){this.fire(bL,e,!0)},touchend(e){this.fire(wL,e,!0),this._touch=null},fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===Jq&&r&&r.href?this.handleHref(t,r,r.href):(e===Qq||e===jA)&&this.handleTooltip(t,r,e!==jA),i)for(let s=0,o=i.length;s<o;++s)i[s].handler.call(this._obj,t,r)},on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(t1e(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent(e){const t=Z5(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick(e,t,n,r,i){const s=this.context();return Ol[e.marktype].pick.call(this,s,e,t,n,r,i)}});function gan(){return typeof window<"u"&&window.devicePixelRatio||1}function yan(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?gan():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}function BA(e){Ll.call(this,e),this._options={},this._redraw=!1,this._dirty=new Cs,this._tempb=new Cs}const i1e=Ll.prototype,van=(e,t,n)=>new Cs().set(0,0,t,n).translate(-e[0],-e[1]);function _an(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}nt(BA,Ll,{initialize(e,t,n,r,i,s){return this._options=s||{},this._canvas=this._options.externalContext?null:c0(1,1,this._options.type),e&&this._canvas&&(Zl(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),i1e.initialize.call(this,e,t,n,r,i)},resize(e,t,n,r){if(i1e.resize.call(this,e,t,n,r),this._canvas)yan(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const i=this._options.externalContext;i||$e("CanvasRenderer is missing a valid canvas or context"),i.scale(this._scale,this._scale),i.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render(e,t){const n=this.context(),r=this._origin,i=this._width,s=this._height,o=this._dirty,a=van(r,i,s);n.save();const u=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):_an(n,a.intersect(o),r);return this.clear(-r[0],-r[1],i,s),this.draw(n,e,u,t),n.restore(),o.clear(),this},draw(e,t,n,r){if(t.marktype!=="group"&&r!=null&&!r.includes(t.marktype))return;const i=Ol[t.marktype];t.clip&&gon(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()},clear(e,t,n,r){const i=this._options,s=this.context();i.type!=="pdf"&&!i.externalContext&&s.clearRect(e,t,n,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(e,t,n,r))}});function Xte(e,t){V0.call(this,e,t);const n=this;n._hrefHandler=Zq(n,(r,i)=>{i&&i.href&&n.handleHref(r,i,i.href)}),n._tooltipHandler=Zq(n,(r,i)=>{n.handleTooltip(r,i,r.type!==jA)})}const Zq=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};nt(Xte,V0,{initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(Jq,this._hrefHandler),r.removeEventListener(Qq,this._tooltipHandler),r.removeEventListener(jA,this._tooltipHandler)),this._svg=r=e&&Kte(e,"svg"),r&&(r.addEventListener(Jq,this._hrefHandler),r.addEventListener(Qq,this._tooltipHandler),r.addEventListener(jA,this._tooltipHandler)),V0.prototype.initialize.call(this,e,t,n)},canvas(){return this._svg},on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const s={type:e,handler:t,listener:Zq(this,t)};(r[n]||(r[n]=[])).push(s),this._svg&&this._svg.addEventListener(n,s.listener)}return this},off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const H9e="aria-hidden",Qte="aria-label",Jte="role",Zte="aria-roledescription",q9e="graphics-object",ene="graphics-symbol",W9e=(e,t,n)=>({[Jte]:e,[Zte]:t,[Qte]:n||void 0}),ban=Nf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),s1e={axis:{desc:"axis",caption:San},legend:{desc:"legend",caption:xan},"title-text":{desc:"title",caption:e=>`Title text '${a1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${a1e(e)}'`}},o1e={ariaRole:Jte,ariaRoleDescription:Zte,description:Qte};function G9e(e,t){const n=t.aria===!1;if(e(H9e,n||void 0),n||t.description==null)for(const r in o1e)e(o1e[r],void 0);else{const r=t.mark.marktype;e(Qte,t.description),e(Jte,t.ariaRole||(r==="group"?q9e:ene)),e(Zte,t.ariaRoleDescription||`${r} mark`)}}function Y9e(e){return e.aria===!1?{[H9e]:!0}:ban[e.role]?null:s1e[e.role]?Ean(e,s1e[e.role]):wan(e)}function wan(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return W9e(n?q9e:ene,`${t} mark container`,e.description)}function Ean(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return W9e(t.role||ene,t.desc,n.description||r(n))}catch{return null}}function a1e(e){return ht(e.text).join(" ")}function San(e){const t=e.datum,n=e.orient,r=t.title?K9e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${LE(a)?"discrete":a} scale with ${c9e(o,s,e)}`}function xan(e){const t=e.datum,n=t.title?K9e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Can(r)+(n?` titled '${n}'`:"")+` for ${Tan(s)} with ${c9e(u,a,e)}`}function K9e(e){try{return ht(tr(e.items).items[0].text).join(" ")}catch{return null}}function Tan(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+tr(e)}function Can(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const X9e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Aan=e=>X9e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function tne(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Aan(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=X9e(u),a),toString:()=>e};return a}const Q9e=e=>J9e(tne(),e)+"";function J9e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):J9e(e,r)}return e.close()}const EL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},SL={blend:"mix-blend-mode"},Z9e={fill:"none","stroke-miterlimit":10},fT=0,u1e="http://www.w3.org/2000/xmlns/",$s=FA.xmlns;function e8(e){Ll.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const LU=Ll.prototype;nt(e8,Ll,{initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=Ns(e,0,"svg",$s),this._svg.setAttributeNS(u1e,"xmlns",$s),this._svg.setAttributeNS(u1e,"xmlns:xlink",FA["xmlns:xlink"]),this._svg.setAttribute("version",FA.version),this._svg.setAttribute("class","marks"),Zl(e,1),this._root=Ns(this._svg,fT,"g",$s),Ng(this._root,Z9e),Zl(this._svg,fT+1)),this.background(this._bgcolor),LU.initialize.call(this,e,t,n,r,i)},background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),LU.background.apply(this,arguments)},resize(e,t,n,r){return LU.resize.call(this,e,t,n,r),this._svg&&(Ng(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=Ns(e,fT,"rect",$s),Ng(n,{width:this._width,height:this._height,fill:t}));const r=Q9e(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),Zl(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,s,o,a,u;for(o=0,a=e.length;o<a;++o)if(n=e[o],r=n.mark,r.marktype!==i&&(i=r.marktype,s=Ol[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,l1e(n,t),r.items.forEach(l=>{l.dirty=t})),!r.zdirty){if(n.exit){s.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(s,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null;continue}n=s.nested?r.items[0]:n,n._update!==t&&(!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,l1e(n,t)):this._update(s,n._svg,n),n._update=t)}return!this._dirtyAll},mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,s=t.marktype,o=Ol[s],a=t.interactive===!1?"none":null,u=o.tag==="g",l=c1e(t,e,n,"g",i);if(s!=="group"&&r!=null&&!r.includes(s))return Zl(l,0),t._svg;l.setAttribute("class",L9e(t));const c=Y9e(t);for(const p in c)ka(l,p,c[p]);u||ka(l,"pointer-events",a),ka(l,"clip-path",t.clip?kte(this,t,t.group):null);let f=null,d=0;const h=p=>{const m=this.isDirty(p),g=c1e(p,l,f,o.tag,i);m&&(this._update(o,g,p),u&&Pan(this,g,p,r)),f=g,++d};return o.nested?t.items.length&&h(t.items[0]):Mf(t,h),Zl(l,d),l},_update(e,t,n){Ap=t,ia=t.__values__,G9e(aC,n),e.attr(aC,n,this);const r=$an[e.type];r&&r.call(this,e,t,n),Ap&&this.style(Ap,n)},style(e,t){if(t!=null){for(const n in EL){let r=n==="font"?DO(t):t[n];if(r===ia[n])continue;const i=EL[n];r==null?e.removeAttribute(i):(Ite(r)&&(r=d9e(r,this._defs.gradient,eUe())),e.setAttribute(i,r+"")),ia[n]=r}for(const n in SL)kR(e,SL[n],t[n])}},defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=Ns(e,fT+1,"defs",$s)),r=Ian(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=Ns(e,fT+1,"defs",$s)),r=Oan(n,t.clipping[i],r);n&&(r===0?(e.removeChild(n),t.el=null):Zl(n,r))},_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}});function l1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Ian(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ns(e,n++,"pattern",$s);Ng(o,{id:hL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ns(o,0,"rect",$s),Ng(o,{width:1,height:1,fill:`url(${eUe()}#${t.id})`}),e=Ns(e,n++,"radialGradient",$s),Ng(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ns(e,n++,"linearGradient",$s),Ng(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ns(e,r,"stop",$s),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Zl(e,r),n}function Oan(e,t,n){let r;return e=Ns(e,n,"clipPath",$s),e.setAttribute("id",t.id),t.path?(r=Ns(e,0,"path",$s),r.setAttribute("d",t.path)):(r=Ns(e,0,"rect",$s),Ng(r,{x:0,y:0,width:t.width,height:t.height})),Zl(e,1),n+1}function Pan(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Mf(n,o=>{i=e.mark(t,o,i,r),++s}),Zl(t,1+s)}function c1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Rg(o,r,$s),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Rg(o,"path",$s);s.appendChild(a),a.__data__=e;const u=Rg(o,"g",$s);s.appendChild(u),u.__data__=e;const l=Rg(o,"path",$s);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||kan(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function kan(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Ap=null,ia=null;const $an={group(e,t,n){const r=Ap=t.childNodes[2];ia=r.__values__,e.foreground(aC,n,this),ia=t.__values__,Ap=t.childNodes[1],e.content(aC,n,this);const i=Ap=t.childNodes[0];e.background(aC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ia.events&&(ka(r,"pointer-events",s),ka(i,"pointer-events",s),ia.events=s),n.strokeForeground&&n.stroke){const o=n.fill;ka(r,"display",null),this.style(i,n),ka(i,"stroke",null),o&&(n.fill=null),ia=r.__values__,this.style(r,n),o&&(n.fill=o),Ap=null}else ka(r,"display","none")},image(e,t,n){n.smooth===!1?(kR(t,"image-rendering","optimizeSpeed"),kR(t,"image-rendering","pixelated")):kR(t,"image-rendering",null)},text(e,t,n){const r=NO(n);let i,s,o,a;Ne(r)?(s=r.map(u=>z0(n,u)),i=s.join(`
`),i!==ia.text&&(Zl(t,0),o=t.ownerDocument,a=U0(n),s.forEach((u,l)=>{const c=Rg(o,"tspan",$s);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ia.text=i)):(s=z0(n,r),s!==ia.text&&(t.textContent=s,ia.text=s)),ka(t,"font-family",DO(n)),ka(t,"font-size",Ih(n)+"px"),ka(t,"font-style",n.fontStyle),ka(t,"font-variant",n.fontVariant),ka(t,"font-weight",n.fontWeight)}};function aC(e,t,n){t!==ia[e]&&(n?Ran(Ap,e,t,n):ka(Ap,e,t),ia[e]=t)}function kR(e,t,n){n!==ia[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ia[t]=n)}function Ng(e,t){for(const n in t)ka(e,n,t[n])}function ka(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Ran(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function eUe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function nne(e){Ll.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}nt(nne,Ll,{svg(){return this._text},_render(e){const t=tne();t.open("svg",En({},FA,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Z9e,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark(e,t){const n=Ol[t.marktype],r=n.tag,i=[G9e,n.attr];e.open("g",{class:L9e(t),"clip-path":t.clip?kte(this,t,t.group):null},Y9e(t),{"pointer-events":r!=="g"&&t.interactive===!1?"none":null});const s=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,r!=="g"?r:null)),r==="text"){const u=NO(o);if(Ne(u)){const l={x:0,dy:U0(o)};for(let c=0;c<u.length;++c)e.open("tspan",c?l:null).text(z0(o,u[c])).close()}else e.text(z0(o,u))}else if(r==="g"){const u=o.strokeForeground,l=o.fill,c=o.stroke;u&&c&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),Mf(o,f=>this.mark(e,f)),e.close(),u&&c?(l&&(o.fill=null),o.stroke=c,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),l&&(o.fill=l)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&s(t.items[0]):Mf(t,s),e.close()},href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[t]=r})}return null},attr(e,t,n,r){const i={},s=(o,a,u,l)=>{i[l||o]=a};return Array.isArray(n)?n.forEach(o=>o(s,t,this)):n(s,t,this),r&&Nan(i,t,e,r,this._defs),i},defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(Object.keys(t).length+Object.keys(n).length!==0){e.open("defs");for(const i in t){const s=t[i],o=s.stops;s.gradient==="radial"?(e.open("pattern",{id:hL+i,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+i+")"}).close(),e.close(),e.open("radialGradient",{id:i,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):e.open("linearGradient",{id:i,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let a=0;a<o.length;++a)e.open("stop",{offset:o[a].offset,"stop-color":o[a].color}).close();e.close()}for(const i in n){const s=n[i];e.open("clipPath",{id:i}),s.path?e.open("path",{d:s.path}).close():e.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),e.close()}e.close()}}});function Nan(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=DO(t),e["font-size"]=Ih(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in EL){let a=t[o];const u=EL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Ite(a)&&(a=d9e(a,i.gradient,"")),e[u]=a)}for(const o in SL){const a=t[o];a!=null&&(s=s||[],s.push(`${SL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Zc={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Dan(e){Zc.svgMarkTypes=e.svgMarkTypes??["text"],Zc.svgOnTop=e.svgOnTop??!0,Zc.debug=e.debug??!1}function xL(e){Ll.call(this,e),this._svgRenderer=new e8(e),this._canvasRenderer=new BA(e)}const f1e=Ll.prototype;nt(xL,Ll,{initialize(e,t,n,r,i){this._root_el=Ns(e,0,"div");const s=Ns(this._root_el,0,"div"),o=Ns(this._root_el,1,"div");return this._root_el.style.position="relative",Zc.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Zc.svgOnTop?o:s,this._canvasEl=Zc.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),f1e.initialize.call(this,e,t,n,r,i)},dirty(e){return Zc.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this},_render(e,t){const r=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(i=>!Zc.svgMarkTypes.includes(i));this._svgRenderer.render(e,Zc.svgMarkTypes),this._canvasRenderer.render(e,r)},resize(e,t,n,r){return f1e.resize.call(this,e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this},background(e){return Zc.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}});function rne(e,t){H0.call(this,e,t)}nt(rne,H0,{initialize(e,t,n){const r=Ns(Ns(e,0,"div"),Zc.svgOnTop?0:1,"div");return H0.prototype.initialize.call(this,r,t,n)}});const tUe="canvas",nUe="hybrid",rUe="png",iUe="svg",sUe="none",Dg={Canvas:tUe,PNG:rUe,SVG:iUe,Hybrid:nUe,None:sUe},j1={};j1[tUe]=j1[rUe]={renderer:BA,headless:BA,handler:H0};j1[iUe]={renderer:e8,headless:nne,handler:Xte};j1[nUe]={renderer:xL,headless:xL,handler:rne};j1[sUe]={};function t8(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(j1[e]=t,this):j1[e]}function oUe(e,t,n){const r=[],i=new Cs().union(t),s=e.marktype;return s?aUe(e,i,n,r):s==="group"?uUe(e,i,n,r):$e("Intersect scene must be mark node or group item.")}function aUe(e,t,n,r){if(Man(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)uUe(i[a],t,n,r);else for(const u=Ol[s].isect;a<o;++a){const l=i[a];lUe(l,t,u)&&r.push(l)}}return r}function Man(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function uUe(e,t,n,r){n&&n(e.mark)&&lUe(e,t,Ol.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)aUe(i[u],t,n,r);t.translate(o,a)}return r}function lUe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const FU=new Cs;function cUe(e){const t=e.clip;if(Sn(t))t($O(FU.clear()));else if(t)FU.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(FU)}const Lan=1e-9;function ine(e,t,n){return e===t?!0:n==="path"?fUe(e,t):e instanceof Date&&t instanceof Date?+e==+t:hr(e)&&hr(t)?Math.abs(e-t)<=Lan:!e||!t||!gt(e)&&!gt(t)?e==t:Fan(e,t)}function fUe(e,t){return ine(FE(e),FE(t))}function Fan(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!ine(e[i],t[i],i))return!1;return typeof e==typeof t}function jan(){_9e(),lsn()}const UE="top",ff="left",pf="right",q0="bottom",Ban="top-left",Uan="top-right",zan="bottom-left",Van="bottom-right",sne="start",eW="middle",Na="end",Han="x",qan="y",n8="group",one="axis",ane="title",Wan="frame",Gan="scope",une="legend",dUe="row-header",hUe="row-footer",pUe="row-title",mUe="column-header",gUe="column-footer",yUe="column-title",Yan="padding",Kan="symbol",vUe="fit",_Ue="fit-x",bUe="fit-y",Xan="pad",lne="none",zk="all",tW="each",cne="flush",Mg="column",Lg="row";function wUe(e){Ie.call(this,null,e)}nt(wUe,Ie,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Ol[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=Vk(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===n8||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(Vk(l,o))),r.role){case one:case une:case ane:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(Vk(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(Vk(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return cUe(r),t.modifies("bounds")}});function Vk(e,t,n){return t(e.bounds.clear(),e,n)}const d1e=":vega_identifier:";function fne(e){Ie.call(this,0,e)}fne.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};nt(fne,Ie,{transform(e,t){const n=Qan(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Qan(e){return e._signals[d1e]||(e._signals[d1e]=e.add(0))}function EUe(e){Ie.call(this,null,e)}nt(EUe,Ie,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Jan(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===n8?W5:q5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Jan(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function SUe(e){Ie.call(this,null,e)}const h1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!xUe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},xUe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),p1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(xUe(i,s=e[n].bounds,t))return!0},Zan=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},eun=(e,t,n)=>{var r=e.range(),i=new Cs;return t===UE||t===q0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},m1e=e=>(e.forEach(t=>t.opacity=1),e),g1e=(e,t)=>e.reflow(t.modified()).modifies("opacity");nt(SUe,Ie,{transform(e,t){const n=h1e[e.method]||h1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(m1e(i),t=g1e(t,e)),t;if(i=i.filter(Zan),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=m1e(i),t=g1e(t,e),s.length>=3&&p1e(s,r)){do s=n(s,r);while(s.length>=3&&p1e(s,r));s.length<3&&!tr(i).opacity&&(s.length>1&&(tr(s).opacity=0),tr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=eun(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function TUe(e){Ie.call(this,null,e)}nt(TUe,Ie,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const na=new Cs;function tw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function tun(e){var t=e.items[0].orient;return t===ff||t===pf}function nun(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function run(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=nun(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&qte(p),v=0,_=0,w,x;switch(na.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case UE:v=f||0,_=-c,x=Math.max(d,Math.min(h,-g.y1)),g.add(0,-x).add(l,0),p&&Hk(e,p,x,m,y,0,-1,g);break;case ff:v=-c,_=f||0,x=Math.max(d,Math.min(h,-g.x1)),g.add(-x,0).add(0,l),p&&Hk(e,p,x,m,y,1,-1,g);break;case pf:v=n+c,_=f||0,x=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(x,l),p&&Hk(e,p,x,m,y,1,1,g);break;case q0:v=f||0,_=r+c,x=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,x),p&&Hk(e,p,x,m,0,0,1,g);break;default:v=i.x,_=i.y}return Pm(g.translate(v,_),i),tw(i,"x",v+o)|tw(i,"y",_+o)&&(i.bounds=na,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function Hk(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const y1e=(e,t)=>Math.floor(Math.min(e,t)),v1e=(e,t)=>Math.ceil(Math.max(e,t));function iun(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===n8)switch(i.role){case one:case une:case ane:break;case dUe:o.rowheaders.push(...s);break;case hUe:o.rowfooters.push(...s);break;case mUe:o.colheaders.push(...s);break;case gUe:o.colfooters.push(...s);break;case pUe:o.rowtitle=s[0];break;case yUe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function sun(e){return new Cs().set(0,0,e.width||0,e.height||0)}function oun(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ai(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function _1e(e){return e<0?Math.ceil(-e):0}function CUe(e,t,n){var r=!n.nodirty,i=n.bounds===cne?sun:oun,s=na.set(0,0,0,0),o=Ai(n.align,Mg),a=Ai(n.align,Lg),u=Ai(n.padding,Mg),l=Ai(n.padding,Lg),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,_=Array(d),w=Array(d),x=Array(d),E,b,T,A,C,P,N,$,M,B,z;for(b=0;b<c;++b)p[b]=0;for(b=0;b<f;++b)y[b]=0;for(b=0;b<d;++b)P=t[b],C=x[b]=i(P),P.x=P.x||0,_[b]=0,P.y=P.y||0,w[b]=0,T=b%c,A=~~(b/c),m=Math.max(m,N=Math.ceil(C.x2)),v=Math.max(v,$=Math.ceil(C.y2)),p[T]=Math.max(p[T],N),y[A]=Math.max(y[A],$),h[b]=u+_1e(C.x1),g[b]=l+_1e(C.y1),r&&e.dirty(t[b]);for(b=0;b<d;++b)b%c===0&&(h[b]=0),b<c&&(g[b]=0);if(o===tW)for(T=1;T<c;++T){for(z=0,b=T;b<d;b+=c)z<h[b]&&(z=h[b]);for(b=T;b<d;b+=c)h[b]=z+p[T-1]}else if(o===zk){for(z=0,b=0;b<d;++b)b%c&&z<h[b]&&(z=h[b]);for(b=0;b<d;++b)b%c&&(h[b]=z+m)}else for(o=!1,T=1;T<c;++T)for(b=T;b<d;b+=c)h[b]+=p[T-1];if(a===tW)for(A=1;A<f;++A){for(z=0,b=A*c,E=b+c;b<E;++b)z<g[b]&&(z=g[b]);for(b=A*c;b<E;++b)g[b]=z+y[A-1]}else if(a===zk){for(z=0,b=c;b<d;++b)z<g[b]&&(z=g[b]);for(b=c;b<d;++b)g[b]=z+v}else for(a=!1,A=1;A<f;++A)for(b=A*c,E=b+c;b<E;++b)g[b]+=y[A-1];for(M=0,b=0;b<d;++b)M=h[b]+(b%c?M:0),_[b]+=M-t[b].x;for(T=0;T<c;++T)for(B=0,b=T;b<d;b+=c)B+=g[b],w[b]+=B-t[b].y;if(o&&Ai(n.center,Mg)&&f>1)for(b=0;b<d;++b)C=o===zk?m:p[b%c],M=C-x[b].x2-t[b].x-_[b],M>0&&(_[b]+=M/2);if(a&&Ai(n.center,Lg)&&c!==1)for(b=0;b<d;++b)C=a===zk?v:y[~~(b/c)],B=C-x[b].y2-t[b].y-w[b],B>0&&(w[b]+=B/2);for(b=0;b<d;++b)s.union(x[b].translate(_[b],w[b]));switch(M=Ai(n.anchor,Han),B=Ai(n.anchor,qan),Ai(n.anchor,Mg)){case Na:M-=s.width();break;case eW:M-=s.width()/2}switch(Ai(n.anchor,Lg)){case Na:B-=s.height();break;case eW:B-=s.height()/2}for(M=Math.round(M),B=Math.round(B),s.clear(),b=0;b<d;++b)t[b].mark.bounds.clear();for(b=0;b<d;++b)P=t[b],P.x+=_[b]+=M,P.y+=w[b]+=B,s.union(P.mark.bounds.union(P.bounds.translate(_[b],w[b]))),r&&e.dirty(P);return s}function aun(e,t,n){var r=iun(t),i=r.marks,s=n.bounds===cne?uun:lun,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=CUe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Ai(n.headerBand,Lg,null),c=qk(e,r.rowheaders,i,a,u,-Ai(o,"rowHeader"),y1e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Ai(n.headerBand,Mg,null),f=qk(e,r.colheaders,i,a,a,-Ai(o,"columnHeader"),y1e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Ai(n.footerBand,Lg,null),d=qk(e,r.rowfooters,i,a,u,Ai(o,"rowFooter"),v1e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Ai(n.footerBand,Mg,null),h=qk(e,r.colfooters,i,a,a,Ai(o,"columnFooter"),v1e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Ai(n.titleAnchor,Lg),g=Ai(o,"rowTitle"),g=p===Na?d+g:c-g,m=Ai(n.titleBand,Lg,.5),b1e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Ai(n.titleAnchor,Mg),g=Ai(o,"columnTitle"),g=p===Na?h+g:f-g,m=Ai(n.titleBand,Mg,.5),b1e(e,r.coltitle,g,1,y,m))}function uun(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function lun(e,t){return e.bounds[t]}function qk(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,_,w,x,E,b,T,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(E=t[v],x=E.mark.bounds,_=y;_>=0&&(b=n[_])==null;_-=d);a?(T=h==null?b.x:Math.round(b.bounds.x1+h*b.bounds.width()),A=m):(T=m,A=h==null?b.y:Math.round(b.bounds.y1+h*b.bounds.height())),x.union(E.bounds.translate(T-(E.x||0),A-(E.y||0))),E.x=T,E.y=A,e.dirty(E),g=o(g,x[l])}return g}function b1e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function cun(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function fun(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function dun(e,t,n,r,i,s,o){const a=cun(n,t),u=fun(e,a("offset",0)),l=a("anchor",sne),c=l===Na?1:l===eW?.5:0,f={align:tW,bounds:a("bounds",cne),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case ff:f.anchor={x:Math.floor(r.x1)-u,column:Na,y:c*(o||r.height()+2*r.y1),row:l};break;case pf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case UE:f.anchor={y:Math.floor(i.y1)-u,row:Na,x:c*(s||i.width()+2*i.x1),column:l};break;case q0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Ban:f.anchor={x:u,y:u};break;case Uan:f.anchor={x:s-u,y:u,column:Na};break;case zan:f.anchor={x:u,y:o-u,row:Na};break;case Van:f.anchor={x:s-u,y:o-u,column:Na,row:Na};break}return f}function hun(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),mun(e,n,n.items[0].items[0]),s=pun(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Kan&&gun(n.items[0].items[0].items[0].items),i!==lne&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Pm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function pun(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function mun(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&dT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case ff:i+=Math.ceil(o.bounds.width())+u;break;case pf:case q0:break;default:s+=o.bounds.height()+u}switch((i||s)&&dT(e,n,i,s),o.orient){case ff:c+=sb(t,n,o,a,1,1);break;case pf:l+=sb(t,n,o,Na,0,0)+u,c+=sb(t,n,o,a,1,1);break;case q0:l+=sb(t,n,o,a,0,0),c+=sb(t,n,o,Na,-1,0,1)+u;break;default:l+=sb(t,n,o,a,0,0)}(l||c)&&dT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(dT(e,n,-l,0),dT(e,o,-l,0))}}function sb(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:qte(n);return Math.round(r===sne?f:r===Na?d-h:.5*(c-h))}function dT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function gun(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function yun(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===ff||a===pf?r:n,p=0,m=0,g=0,y=0,v=0,_;if(o!==n8?a===ff?(p=i.y2,h=i.y1):a===pf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===ff&&(p=r,h=0),_=u===sne?p:u===Na?h:(p+h)/2,d&&d.text){switch(a){case UE:case q0:v=f.bounds.height()+c;break;case ff:y=f.bounds.width()+c;break;case pf:y=-f.bounds.width()-c;break}na.clear().union(d.bounds),na.translate(y-(d.x||0),v-(d.y||0)),tw(d,"x",y)|tw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(na),d.mark.bounds.clear().union(na),e.dirty(d)),na.clear().union(d.bounds)}else na.clear();switch(na.union(f.bounds),a){case UE:m=_,g=i.y1-na.height()-l;break;case ff:m=i.x1-na.width()-l,g=_;break;case pf:m=i.x2+na.width()+l,g=_;break;case q0:m=_,g=i.y2+l;break;default:m=s.x,g=s.y}return tw(s,"x",m)|tw(s,"y",g)&&(na.translate(m,g),e.dirty(s),s.bounds.clear().union(na),t.bounds.clear().union(na),e.dirty(s)),s.bounds}function AUe(e){Ie.call(this,null,e)}nt(AUe,Ie,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&aun(n,r,e.layout),_un(n,r,e)}),vun(e.mark.group)?t.reflow():t}});function vun(e){return e&&e.mark.role!=="legend-entry"}function _un(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Cs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case one:h=tun(f)?a:u,h.union(run(e,f,i,s));break;case ane:c=f;break;case une:l.push(hun(e,f));break;case Wan:case Gan:case dUe:case hUe:case pUe:case mUe:case gUe:case yUe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||pf,d!==lne&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];CUe(e,v,dun(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===vUe||n.autosize.type===_Ue||n.autosize.type===bUe))switch(y.orient){case ff:case pf:o.add(v.x1,0).add(v.x2,0);break;case UE:case q0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(yun(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),bun(e,t,o,n)}function bun(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Yan){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===lne?(l=0,f=0,u=o,c=a):s===vUe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===_Ue?(u=Math.max(0,o-l-d),a=c+f+h):s===bUe?(o=u+l+d,c=Math.max(0,a-f-h)):s===Xan&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const wun=Object.freeze(Object.defineProperty({__proto__:null,bound:wUe,identifier:fne,mark:EUe,overlap:SUe,render:TUe,viewlayout:AUe},Symbol.toStringTag,{value:"Module"}));function IUe(e){Ie.call(this,null,e)}nt(IUe,Ie,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Cte(s,o,e.minstep),u=e.format||s9e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?i9e(s,e.values,a):Ate(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Or({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Or({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function OUe(e){Ie.call(this,null,e)}function Eun(){return Or({})}function Sun(e){const t=JS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}nt(OUe,Ie,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Eun,s=e.key||Ut,o=this.value;return Ne(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&$e("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Sun(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function PUe(e){Ie.call(this,null,e)}nt(PUe,Ie,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Ne(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||eg,u=i.enter||eg,l=i.exit||eg,c=(s&&!o?i[s]:a)||eg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==eg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==eg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==eg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function kUe(e){Ie.call(this,[],e)}nt(kUe,Ie,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||xR,o=e.scale,a=+e.limit,u=Cte(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===xR,c=e.format||l9e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||u9e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===xR?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Sn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Sa(m=p||8),i=i.map((y,v)=>Or({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Or({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Xin?(d=o.domain(),h=t9e(o,d[0],tr(d)),f.length<3&&!e.values&&d[0]!==tr(d)&&(f=[d[0],tr(d)]),i=f.map((y,v)=>Or({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=asn(o),i=f.map((y,v)=>Or({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const xun=e=>e.source.x,Tun=e=>e.source.y,Cun=e=>e.target.x,Aun=e=>e.target.y;function dne(e){Ie.call(this,{},e)}dne.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};nt(dne,Ie,{transform(e,t){var n=e.sourceX||xun,r=e.sourceY||Tun,i=e.targetX||Cun,s=e.targetY||Aun,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=w1e.get(u+"-"+a)||w1e.get(u);return l||$e("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const $Ue=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Iun=(e,t,n,r)=>$Ue(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),RUe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Oun=(e,t,n,r)=>RUe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),NUe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Pun=(e,t,n,r)=>NUe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),kun=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,$un=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Run=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Nun=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Dun=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},Mun=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},w1e=JS({line:$Ue,"line-radial":Iun,arc:RUe,"arc-radial":Oun,curve:NUe,"curve-radial":Pun,"orthogonal-horizontal":kun,"orthogonal-vertical":$un,"orthogonal-radial":Run,"diagonal-horizontal":Nun,"diagonal-vertical":Dun,"diagonal-radial":Mun});function hne(e){Ie.call(this,null,e)}hne.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};nt(hne,Ie,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||KS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/yje(l),h=x_(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Lun=5;function Fun(e){const t=e.type;return!e.bins&&(t===DE||t===TO||t===CO)}function DUe(e){return Ste(e)&&e!==Jd}const jun=Nf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function MUe(e){Ie.call(this,null,e),this.modified(!0)}nt(MUe,Ie,{transform(e,t){var n=t.dataflow,r=this.value,i=Bun(e);(!r||i!==r.type)&&(this.value=r=Er(i)());for(i in e)if(!jun[i]){if(i==="padding"&&DUe(r.type))continue;Sn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Wun(r,e,qun(r,e,zun(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Bun(e){var t=e.type,n="",r;return t===Jd?Jd+"-"+DE:(Uun(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Jd+"-":r===3?nx+"-":""),(n+t||DE).toLowerCase())}function Uun(e){const t=e.type;return Ste(t)&&t!==L1&&t!==F1&&(e.scheme||e.range&&e.range.length&&e.range.every(pt))}function zun(e,t,n){const r=Vun(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Fun(e),a,u;if(!i)return 0;if(DUe(s)&&t.padding&&i[0]!==tr(i)&&(i=Hun(s,i,t.range,t.padding,t.exponent,t.constant)),(o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return e.domain(LUe(s,i,n)),s===_te&&e.unknown(t.domainImplicit?zV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Cte(e,t.nice)||null),i.length}function Vun(e,t,n){return t?(e.domain(LUe(e.type,t,n)),t.length):-1}function Hun(e,t,n,r,i,s){var o=Math.abs(tr(n)-n[0]),a=o/(o-2*r),u=e===dm?dee(t,null,a):e===CO?uL(t,null,a,.5):e===TO?uL(t,null,a,i||1):e===B5?hee(t,null,a,s||1):fee(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function LUe(e,t,n){if(XBe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+st(t))}return t}function qun(e,t,n){let r=t.bins;if(r&&!Ne(r)){const i=e.domain(),s=i[0],o=tr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||$e("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=x_(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===bte&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Wun(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Gun(r,t,n);else if(t.scheme&&(s=Yun(r,t,n),Sn(s))){if(e.interpolator)return e.interpolator(s);$e(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&QBe(r))return e.interpolator(V5(nW(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(xte(t.interpolate,t.interpolateGamma)):Sn(e.round)?e.round(i):Sn(e.rangeRound)&&e.interpolate(i?kI:Tm),s&&e.range(nW(s,t.reverse))}function Gun(e,t,n){e!==HBe&&e!==Bq&&$e("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Bq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*vte(n,i,r)]}function Yun(e,t,n){var r=t.schemeExtent,i,s;return Ne(t.scheme)?s=V5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Tte(i),s||$e(`Unrecognized scheme name: ${t.scheme}`)),n=e===z5?n+1:e===bte?n-1:e===ME||e===U5?+t.schemeCount||Lun:n,QBe(e)?E1e(s,r,t.reverse):Sn(s)?e9e(E1e(s,r),n):e===_te?s:s.slice(0,n)}function E1e(e,t,n){return Sn(e)&&(t||n)?ZBe(e,nW(t||[0,1],n)):e}function nW(e,t){return t?e.slice().reverse():e}function FUe(e){Ie.call(this,null,e)}nt(FUe,Ie,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(T_(e.sort)),this.modified(n),t}});const S1e="zero",jUe="center",BUe="normalize",UUe=["y0","y1"];function pne(e){Ie.call(this,null,e)}pne.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:S1e,values:[S1e,jUe,BUe]},{name:"as",type:"string",array:!0,length:2,default:UUe}]};nt(pne,Ie,{transform(e,t){var n=e.as||UUe,r=n[0],i=n[1],s=T_(e.sort),o=e.field||KS,a=e.offset===jUe?Kun:e.offset===BUe?Xun:Qun,u,l,c,f;for(u=Jun(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Kun(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Xun(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Qun(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Jun(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const Zun=Object.freeze(Object.defineProperty({__proto__:null,axisticks:IUe,datajoin:OUe,encode:PUe,legendentries:kUe,linkpath:dne,pie:hne,scale:MUe,sortitems:FUe,stack:pne},Symbol.toStringTag,{value:"Module"}));class Va{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}function*eln(e){for(const t of e)yield*t}function zUe(e){return Array.from(eln(e))}function nw(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}var Wt=1e-6,TL=1e-12,Mn=Math.PI,Zi=Mn/2,CL=Mn/4,Qa=Mn*2,os=180/Mn,Nn=Mn/180,er=Math.abs,ix=Math.atan,_c=Math.atan2,Kt=Math.cos,Wk=Math.ceil,VUe=Math.exp,rW=Math.hypot,AL=Math.log,jU=Math.pow,zt=Math.sin,rc=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,mne=Math.tan;function HUe(e){return e>1?0:e<-1?Mn:Math.acos(e)}function Vu(e){return e>1?Zi:e<-1?-Zi:Math.asin(e)}function Po(){}function IL(e,t){e&&T1e.hasOwnProperty(e.type)&&T1e[e.type](e,t)}var x1e={Feature:function(e,t){IL(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)IL(n[r].geometry,t)}},T1e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){iW(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)iW(n[r],t,0)},Polygon:function(e,t){C1e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)C1e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)IL(n[r],t)}};function iW(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function C1e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)iW(e[n],t,1);t.polygonEnd()}function hp(e,t){e&&x1e.hasOwnProperty(e.type)?x1e[e.type](e,t):IL(e,t)}var OL=new Va,PL=new Va,qUe,WUe,sW,oW,aW,mh={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){OL=new Va,mh.lineStart=tln,mh.lineEnd=nln},polygonEnd:function(){var e=+OL;PL.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=Po},sphere:function(){PL.add(Qa)}};function tln(){mh.point=rln}function nln(){GUe(qUe,WUe)}function rln(e,t){mh.point=GUe,qUe=e,WUe=t,e*=Nn,t*=Nn,sW=e,oW=Kt(t=t/2+CL),aW=zt(t)}function GUe(e,t){e*=Nn,t*=Nn,t=t/2+CL;var n=e-sW,r=n>=0?1:-1,i=r*n,s=Kt(t),o=zt(t),a=aW*o,u=oW*s+a*Kt(i),l=a*r*zt(i);OL.add(_c(l,u)),sW=e,oW=s,aW=o}function iln(e){return PL=new Va,hp(e,mh),PL*2}function kL(e){return[_c(e[1],e[0]),Vu(e[2])]}function B1(e){var t=e[0],n=e[1],r=Kt(n);return[r*Kt(t),r*zt(t),zt(n)]}function Gk(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function zE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function BU(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Yk(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function $L(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Fi,bu,Hi,ul,lv,YUe,KUe,Nw,uC,cg,hm,ip={point:uW,lineStart:A1e,lineEnd:I1e,polygonStart:function(){ip.point=QUe,ip.lineStart=sln,ip.lineEnd=oln,uC=new Va,mh.polygonStart()},polygonEnd:function(){mh.polygonEnd(),ip.point=uW,ip.lineStart=A1e,ip.lineEnd=I1e,OL<0?(Fi=-(Hi=180),bu=-(ul=90)):uC>Wt?ul=90:uC<-Wt&&(bu=-90),hm[0]=Fi,hm[1]=Hi},sphere:function(){Fi=-(Hi=180),bu=-(ul=90)}};function uW(e,t){cg.push(hm=[Fi=e,Hi=e]),t<bu&&(bu=t),t>ul&&(ul=t)}function XUe(e,t){var n=B1([e*Nn,t*Nn]);if(Nw){var r=zE(Nw,n),i=[r[1],-r[0],0],s=zE(i,r);$L(s),s=kL(s);var o=e-lv,a=o>0?1:-1,u=s[0]*os*a,l,c=er(o)>180;c^(a*lv<u&&u<a*e)?(l=s[1]*os,l>ul&&(ul=l)):(u=(u+360)%360-180,c^(a*lv<u&&u<a*e)?(l=-s[1]*os,l<bu&&(bu=l)):(t<bu&&(bu=t),t>ul&&(ul=t))),c?e<lv?il(Fi,e)>il(Fi,Hi)&&(Hi=e):il(e,Hi)>il(Fi,Hi)&&(Fi=e):Hi>=Fi?(e<Fi&&(Fi=e),e>Hi&&(Hi=e)):e>lv?il(Fi,e)>il(Fi,Hi)&&(Hi=e):il(e,Hi)>il(Fi,Hi)&&(Fi=e)}else cg.push(hm=[Fi=e,Hi=e]);t<bu&&(bu=t),t>ul&&(ul=t),Nw=n,lv=e}function A1e(){ip.point=XUe}function I1e(){hm[0]=Fi,hm[1]=Hi,ip.point=uW,Nw=null}function QUe(e,t){if(Nw){var n=e-lv;uC.add(er(n)>180?n+(n>0?360:-360):n)}else YUe=e,KUe=t;mh.point(e,t),XUe(e,t)}function sln(){mh.lineStart()}function oln(){QUe(YUe,KUe),mh.lineEnd(),er(uC)>Wt&&(Fi=-(Hi=180)),hm[0]=Fi,hm[1]=Hi,Nw=null}function il(e,t){return(t-=e)<0?t+360:t}function aln(e,t){return e[0]-t[0]}function O1e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function uln(e){var t,n,r,i,s,o,a;if(ul=Hi=-(Fi=bu=1/0),cg=[],hp(e,ip),n=cg.length){for(cg.sort(aln),t=1,r=cg[0],s=[r];t<n;++t)i=cg[t],O1e(r,i[0])||O1e(r,i[1])?(il(r[0],i[1])>il(r[0],r[1])&&(r[1]=i[1]),il(i[0],r[1])>il(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=il(r[1],i[0]))>o&&(o=a,Fi=i[0],Hi=r[1])}return cg=hm=null,Fi===1/0||bu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Fi,bu],[Hi,ul]]}var s2,RL,NL,DL,ML,LL,FL,jL,lW,cW,fW,JUe,ZUe,Da,Ma,La,mf={sphere:Po,point:gne,lineStart:P1e,lineEnd:k1e,polygonStart:function(){mf.lineStart=fln,mf.lineEnd=dln},polygonEnd:function(){mf.lineStart=P1e,mf.lineEnd=k1e}};function gne(e,t){e*=Nn,t*=Nn;var n=Kt(t);MO(n*Kt(e),n*zt(e),zt(t))}function MO(e,t,n){++s2,NL+=(e-NL)/s2,DL+=(t-DL)/s2,ML+=(n-ML)/s2}function P1e(){mf.point=lln}function lln(e,t){e*=Nn,t*=Nn;var n=Kt(t);Da=n*Kt(e),Ma=n*zt(e),La=zt(t),mf.point=cln,MO(Da,Ma,La)}function cln(e,t){e*=Nn,t*=Nn;var n=Kt(t),r=n*Kt(e),i=n*zt(e),s=zt(t),o=_c(Ja((o=Ma*s-La*i)*o+(o=La*r-Da*s)*o+(o=Da*i-Ma*r)*o),Da*r+Ma*i+La*s);RL+=o,LL+=o*(Da+(Da=r)),FL+=o*(Ma+(Ma=i)),jL+=o*(La+(La=s)),MO(Da,Ma,La)}function k1e(){mf.point=gne}function fln(){mf.point=hln}function dln(){eze(JUe,ZUe),mf.point=gne}function hln(e,t){JUe=e,ZUe=t,e*=Nn,t*=Nn,mf.point=eze;var n=Kt(t);Da=n*Kt(e),Ma=n*zt(e),La=zt(t),MO(Da,Ma,La)}function eze(e,t){e*=Nn,t*=Nn;var n=Kt(t),r=n*Kt(e),i=n*zt(e),s=zt(t),o=Ma*s-La*i,a=La*r-Da*s,u=Da*i-Ma*r,l=rW(o,a,u),c=Vu(l),f=l&&-c/l;lW.add(f*o),cW.add(f*a),fW.add(f*u),RL+=c,LL+=c*(Da+(Da=r)),FL+=c*(Ma+(Ma=i)),jL+=c*(La+(La=s)),MO(Da,Ma,La)}function pln(e){s2=RL=NL=DL=ML=LL=FL=jL=0,lW=new Va,cW=new Va,fW=new Va,hp(e,mf);var t=+lW,n=+cW,r=+fW,i=rW(t,n,r);return i<TL&&(t=LL,n=FL,r=jL,RL<Wt&&(t=NL,n=DL,r=ML),i=rW(t,n,r),i<TL)?[NaN,NaN]:[_c(n,t)*os,Vu(r/i)*os]}function dW(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function hW(e,t){return er(e)>Mn&&(e-=Math.round(e/Qa)*Qa),[e,t]}hW.invert=hW;function tze(e,t,n){return(e%=Qa)?t||n?dW(R1e(e),N1e(t,n)):R1e(e):t||n?N1e(t,n):hW}function $1e(e){return function(t,n){return t+=e,er(t)>Mn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function R1e(e){var t=$1e(e);return t.invert=$1e(-e),t}function N1e(e,t){var n=Kt(e),r=zt(e),i=Kt(t),s=zt(t);function o(a,u){var l=Kt(u),c=Kt(a)*l,f=zt(a)*l,d=zt(u),h=d*n+c*r;return[_c(f*i-h*s,c*n-d*r),Vu(h*i+f*s)]}return o.invert=function(a,u){var l=Kt(u),c=Kt(a)*l,f=zt(a)*l,d=zt(u),h=d*i-f*s;return[_c(f*i+d*s,c*n+h*r),Vu(h*n-c*r)]},o}function mln(e){e=tze(e[0]*Nn,e[1]*Nn,e.length>2?e[2]*Nn:0);function t(n){return n=e(n[0]*Nn,n[1]*Nn),n[0]*=os,n[1]*=os,n}return t.invert=function(n){return n=e.invert(n[0]*Nn,n[1]*Nn),n[0]*=os,n[1]*=os,n},t}function gln(e,t,n,r,i,s){if(n){var o=Kt(t),a=zt(t),u=r*n;i==null?(i=t+r*Qa,s=t-u/2):(i=D1e(o,i),s=D1e(o,s),(r>0?i<s:i>s)&&(i+=r*Qa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=kL([o,-a*Kt(c),-a*zt(c)]),e.point(l[0],l[1])}}function D1e(e,t){t=B1(t),t[0]-=e,$L(t);var n=HUe(-t[1]);return((-t[2]<0?-n:n)+Qa-Wt)%Qa}function nze(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Po,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function $R(e,t){return er(e[0]-t[0])<Wt&&er(e[1]-t[1])<Wt}function Kk(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function rze(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if($R(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Wt}s.push(v=new Kk(g,p,null,!0)),o.push(v.o=new Kk(g,null,v,!1)),s.push(v=new Kk(y,p,null,!1)),o.push(v.o=new Kk(y,null,v,!0))}}),!!s.length){for(o.sort(t),M1e(s),M1e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function M1e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function UU(e){return er(e[0])<=Mn?e[0]:rc(e[0])*((er(e[0])+Mn)%Qa-Mn)}function yln(e,t){var n=UU(t),r=t[1],i=zt(r),s=[zt(n),-Kt(n),0],o=0,a=0,u=new Va;i===1?r=Zi+Wt:i===-1&&(r=-Zi-Wt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=UU(h),m=h[1]/2+CL,g=zt(m),y=Kt(m),v=0;v<d;++v,p=w,g=E,y=b,h=_){var _=f[v],w=UU(_),x=_[1]/2+CL,E=zt(x),b=Kt(x),T=w-p,A=T>=0?1:-1,C=A*T,P=C>Mn,N=g*E;if(u.add(_c(N*A*zt(C),y*b+N*Kt(C))),o+=P?T+A*Qa:T,P^p>=n^w>=n){var $=zE(B1(h),B1(_));$L($);var M=zE(s,$);$L(M);var B=(P^T>=0?-1:1)*Vu(M[2]);(r>B||r===B&&($[0]||$[1]))&&(a+=P^T>=0?1:-1)}}return(o<-Wt||o<Wt&&u<-TL)^a&1}function ize(e,t,n,r){return function(i){var s=t(i),o=nze(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=zUe(c);var w=yln(l,r);c.length?(u||(i.polygonStart(),u=!0),rze(c,_ln,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,x){e(w,x)&&i.point(w,x)}function p(w,x){s.point(w,x)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,x){f.push([w,x]),a.point(w,x)}function v(){a.lineStart(),f=[]}function _(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),x=o.result(),E,b=x.length,T,A,C;if(f.pop(),l.push(f),f=null,!!b){if(w&1){if(A=x[0],(T=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),E=0;E<T;++E)i.point((C=A[E])[0],C[1]);i.lineEnd()}return}b>1&&w&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(vln))}}return d}}function vln(e){return e.length>1}function _ln(e,t){return((e=e.x)[0]<0?e[1]-Zi-Wt:Zi-e[1])-((t=t.x)[0]<0?t[1]-Zi-Wt:Zi-t[1])}const L1e=ize(function(){return!0},bln,Eln,[-Mn,-Zi]);function bln(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Mn:-Mn,u=er(s-t);er(u-Mn)<Wt?(e.point(t,n=(n+o)/2>0?Zi:-Zi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Mn&&(er(t-r)<Wt&&(t-=r*Wt),er(s-a)<Wt&&(s-=a*Wt),n=wln(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function wln(e,t,n,r){var i,s,o=zt(e-n);return er(o)>Wt?ix((zt(t)*(s=Kt(r))*zt(n)-zt(r)*(i=Kt(t))*zt(e))/(i*s*o)):(t+r)/2}function Eln(e,t,n,r){var i;if(e==null)i=n*Zi,r.point(-Mn,i),r.point(0,i),r.point(Mn,i),r.point(Mn,0),r.point(Mn,-i),r.point(0,-i),r.point(-Mn,-i),r.point(-Mn,0),r.point(-Mn,i);else if(er(e[0]-t[0])>Wt){var s=e[0]<t[0]?Mn:-Mn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Sln(e){var t=Kt(e),n=2*Nn,r=t>0,i=er(t)>Wt;function s(c,f,d,h){gln(h,e,n,d,c,f)}function o(c,f){return Kt(c)*Kt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],_,w=o(g,y),x=r?w?0:l(g,y):w?l(g+(g<0?Mn:-Mn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(_=u(f,v),(!_||$R(f,_)||$R(v,_))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),_=u(v,f),c.point(_[0],_[1])):(_=u(f,v),c.point(_[0],_[1],2),c.lineEnd()),f=_;else if(i&&f&&r^w){var E;!(x&d)&&(E=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(E[0][0],E[0][1]),c.point(E[1][0],E[1][1]),c.lineEnd()):(c.point(E[1][0],E[1][1]),c.lineEnd(),c.lineStart(),c.point(E[0][0],E[0][1],3)))}w&&(!f||!$R(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=B1(c),p=B1(f),m=[1,0,0],g=zE(h,p),y=Gk(g,g),v=g[0],_=y-v*v;if(!_)return!d&&c;var w=t*y/_,x=-t*v/_,E=zE(m,g),b=Yk(m,w),T=Yk(g,x);BU(b,T);var A=E,C=Gk(b,A),P=Gk(A,A),N=C*C-P*(Gk(b,b)-1);if(!(N<0)){var $=Ja(N),M=Yk(A,(-C-$)/P);if(BU(M,b),M=kL(M),!d)return M;var B=c[0],z=f[0],W=c[1],U=f[1],Y;z<B&&(Y=B,B=z,z=Y);var q=z-B,D=er(q-Mn)<Wt,L=D||q<Wt;if(!D&&U<W&&(Y=W,W=U,U=Y),L?D?W+U>0^M[1]<(er(M[0]-B)<Wt?W:U):W<=M[1]&&M[1]<=U:q>Mn^(B<=M[0]&&M[0]<=z)){var G=Yk(A,(-C+$)/P);return BU(G,b),[M,kL(G)]}}}function l(c,f){var d=r?e:Mn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return ize(o,a,s,r?[0,-e]:[-Mn,e-Mn])}function xln(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var o2=1e9,Xk=-o2;function sze(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return er(l[0]-e)<Wt?c>0?0:3:er(l[0]-n)<Wt?c>0?2:1:er(l[1]-t)<Wt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=nze(),d,h,p,m,g,y,v,_,w,x,E,b={point:T,lineStart:N,lineEnd:$,polygonStart:C,polygonEnd:P};function T(B,z){i(B,z)&&c.point(B,z)}function A(){for(var B=0,z=0,W=h.length;z<W;++z)for(var U=h[z],Y=1,q=U.length,D=U[0],L,G,V=D[0],H=D[1];Y<q;++Y)L=V,G=H,D=U[Y],V=D[0],H=D[1],G<=r?H>r&&(V-L)*(r-G)>(H-G)*(e-L)&&++B:H<=r&&(V-L)*(r-G)<(H-G)*(e-L)&&--B;return B}function C(){c=f,d=[],h=[],E=!0}function P(){var B=A(),z=E&&B,W=(d=zUe(d)).length;(z||W)&&(l.polygonStart(),z&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),W&&rze(d,a,B,s,l),l.polygonEnd()),c=l,d=h=p=null}function N(){b.point=M,h&&h.push(p=[]),x=!0,w=!1,v=_=NaN}function $(){d&&(M(m,g),y&&w&&f.rejoin(),d.push(f.result())),b.point=T,w&&c.lineEnd()}function M(B,z){var W=i(B,z);if(h&&p.push([B,z]),x)m=B,g=z,y=W,x=!1,W&&(c.lineStart(),c.point(B,z));else if(W&&w)c.point(B,z);else{var U=[v=Math.max(Xk,Math.min(o2,v)),_=Math.max(Xk,Math.min(o2,_))],Y=[B=Math.max(Xk,Math.min(o2,B)),z=Math.max(Xk,Math.min(o2,z))];xln(U,Y,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(Y[0],Y[1]),W||c.lineEnd(),E=!1):W&&(c.lineStart(),c.point(B,z),E=!1)}v=B,_=z,w=W}return b}}function F1e(e,t,n){var r=nw(e,t-Wt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function j1e(e,t,n){var r=nw(e,t-Wt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Tln(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return nw(Wk(r/c)*c,n,c).map(p).concat(nw(Wk(a/f)*f,o,f).map(m)).concat(nw(Wk(t/u)*u,e,u).filter(function(_){return er(_%c)>Wt}).map(d)).concat(nw(Wk(s/l)*l,i,l).filter(function(_){return er(_%f)>Wt}).map(h))}return y.lines=function(){return v().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],f=+_[1],y):[c,f]},y.stepMinor=function(_){return arguments.length?(u=+_[0],l=+_[1],y):[u,l]},y.precision=function(_){return arguments.length?(g=+_,d=F1e(s,i,90),h=j1e(t,e,g),p=F1e(a,o,90),m=j1e(r,n,g),y):g},y.extentMajor([[-180,-90+Wt],[180,90-Wt]]).extentMinor([[-180,-80-Wt],[180,80+Wt]])}const UA=e=>e;var zU=new Va,pW=new Va,oze,aze,mW,gW,Eg={point:Po,lineStart:Po,lineEnd:Po,polygonStart:function(){Eg.lineStart=Cln,Eg.lineEnd=Iln},polygonEnd:function(){Eg.lineStart=Eg.lineEnd=Eg.point=Po,zU.add(er(pW)),pW=new Va},result:function(){var e=zU/2;return zU=new Va,e}};function Cln(){Eg.point=Aln}function Aln(e,t){Eg.point=uze,oze=mW=e,aze=gW=t}function uze(e,t){pW.add(gW*e-mW*t),mW=e,gW=t}function Iln(){uze(oze,aze)}const B1e=Eg;var VE=1/0,BL=VE,zA=-VE,UL=zA,Oln={point:Pln,lineStart:Po,lineEnd:Po,polygonStart:Po,polygonEnd:Po,result:function(){var e=[[VE,BL],[zA,UL]];return zA=UL=-(BL=VE=1/0),e}};function Pln(e,t){e<VE&&(VE=e),e>zA&&(zA=e),t<BL&&(BL=t),t>UL&&(UL=t)}const zL=Oln;var yW=0,vW=0,a2=0,VL=0,HL=0,rw=0,_W=0,bW=0,u2=0,lze,cze,Id,Od,df={point:U1,lineStart:U1e,lineEnd:z1e,polygonStart:function(){df.lineStart=Rln,df.lineEnd=Nln},polygonEnd:function(){df.point=U1,df.lineStart=U1e,df.lineEnd=z1e},result:function(){var e=u2?[_W/u2,bW/u2]:rw?[VL/rw,HL/rw]:a2?[yW/a2,vW/a2]:[NaN,NaN];return yW=vW=a2=VL=HL=rw=_W=bW=u2=0,e}};function U1(e,t){yW+=e,vW+=t,++a2}function U1e(){df.point=kln}function kln(e,t){df.point=$ln,U1(Id=e,Od=t)}function $ln(e,t){var n=e-Id,r=t-Od,i=Ja(n*n+r*r);VL+=i*(Id+e)/2,HL+=i*(Od+t)/2,rw+=i,U1(Id=e,Od=t)}function z1e(){df.point=U1}function Rln(){df.point=Dln}function Nln(){fze(lze,cze)}function Dln(e,t){df.point=fze,U1(lze=Id=e,cze=Od=t)}function fze(e,t){var n=e-Id,r=t-Od,i=Ja(n*n+r*r);VL+=i*(Id+e)/2,HL+=i*(Od+t)/2,rw+=i,i=Od*e-Id*t,_W+=i*(Id+e),bW+=i*(Od+t),u2+=i*3,U1(Id=e,Od=t)}const V1e=df;function dze(e){this._context=e}dze.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:Po};var wW=new Va,VU,hze,pze,l2,c2,qL={point:Po,lineStart:function(){qL.point=Mln},lineEnd:function(){VU&&mze(hze,pze),qL.point=Po},polygonStart:function(){VU=!0},polygonEnd:function(){VU=null},result:function(){var e=+wW;return wW=new Va,e}};function Mln(e,t){qL.point=mze,hze=l2=e,pze=c2=t}function mze(e,t){l2-=e,c2-=t,wW.add(Ja(l2*l2+c2*c2)),l2=e,c2=t}const H1e=qL;let q1e,WL,W1e,G1e;class Y1e{constructor(t){this._append=t==null?gze:Lln(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==W1e||this._append!==WL){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,W1e=r,WL=this._append,G1e=this._,this._=i}this._+=G1e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function gze(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Lln(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return gze;if(t!==q1e){const n=10**t;q1e=t,WL=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return WL}function yze(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),hp(a,i(s))),s.result()}return o.area=function(a){return hp(a,i(B1e)),B1e.result()},o.measure=function(a){return hp(a,i(H1e)),H1e.result()},o.bounds=function(a){return hp(a,i(zL)),zL.result()},o.centroid=function(a){return hp(a,i(V1e)),V1e.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,UA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Y1e(n)):new dze(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Y1e(n)),o},o.projection(e).digits(n).context(t)}function r8(e){return function(t){var n=new EW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function EW(){}EW.prototype={constructor:EW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function yne(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),hp(n,e.stream(zL)),t(zL.result()),r!=null&&e.clipExtent(r),e}function i8(e,t,n){return yne(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function vne(e,t,n){return i8(e,[[0,0],t],n)}function _ne(e,t,n){return yne(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function bne(e,t,n){return yne(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var K1e=16,Fln=Kt(30*Nn);function X1e(e,t){return+t?Bln(e,t):jln(e)}function jln(e){return r8({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Bln(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,_=y*y+v*v;if(_>4*t&&m--){var w=o+d,x=a+h,E=u+p,b=Ja(w*w+x*x+E*E),T=Vu(E/=b),A=er(er(E)-1)<Wt||er(s-f)<Wt?(s+f)/2:_c(x,w),C=e(A,T),P=C[0],N=C[1],$=P-r,M=N-i,B=v*$-y*M;(B*B/_>t||er((y*$+v*M)/_-.5)>.3||o*d+a*h+u*p<Fln)&&(n(r,i,s,o,a,u,P,N,A,w/=b,x/=b,E,m,g),g.point(P,N),n(P,N,A,w,x,E,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(T,A){T=e(T,A),r.point(T[0],T[1])}function v(){f=NaN,g.point=_,r.lineStart()}function _(T,A){var C=B1([T,A]),P=e(T,A);n(f,d,c,h,p,m,f=P[0],d=P[1],c=T,h=C[0],p=C[1],m=C[2],K1e,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function x(){v(),g.point=E,g.lineEnd=b}function E(T,A){_(i=T,A),s=f,o=d,a=h,u=p,l=m,g.point=_}function b(){n(f,d,c,h,p,m,s,o,i,a,u,l,K1e,r),g.lineEnd=w,w()}return g}}var Uln=r8({point:function(e,t){this.stream.point(e*Nn,t*Nn)}});function zln(e){return r8({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Vln(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Q1e(e,t,n,r,i,s){if(!s)return Vln(e,t,n,r,i);var o=Kt(s),a=zt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Oh(e){return vze(function(){return e})()}function vze(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=L1e,g=null,y,v,_,w=UA,x=.5,E,b,T,A,C;function P(B){return T(B[0]*Nn,B[1]*Nn)}function N(B){return B=T.invert(B[0],B[1]),B&&[B[0]*os,B[1]*os]}P.stream=function(B){return A&&C===B?A:A=Uln(zln(c)(m(E(w(C=B)))))},P.preclip=function(B){return arguments.length?(m=B,p=void 0,M()):m},P.postclip=function(B){return arguments.length?(w=B,g=y=v=_=null,M()):w},P.clipAngle=function(B){return arguments.length?(m=+B?Sln(p=B*Nn):(p=null,L1e),M()):p*os},P.clipExtent=function(B){return arguments.length?(w=B==null?(g=y=v=_=null,UA):sze(g=+B[0][0],y=+B[0][1],v=+B[1][0],_=+B[1][1]),M()):g==null?null:[[g,y],[v,_]]},P.scale=function(B){return arguments.length?(n=+B,$()):n},P.translate=function(B){return arguments.length?(r=+B[0],i=+B[1],$()):[r,i]},P.center=function(B){return arguments.length?(s=B[0]%360*Nn,o=B[1]%360*Nn,$()):[s*os,o*os]},P.rotate=function(B){return arguments.length?(a=B[0]%360*Nn,u=B[1]%360*Nn,l=B.length>2?B[2]%360*Nn:0,$()):[a*os,u*os,l*os]},P.angle=function(B){return arguments.length?(f=B%360*Nn,$()):f*os},P.reflectX=function(B){return arguments.length?(d=B?-1:1,$()):d<0},P.reflectY=function(B){return arguments.length?(h=B?-1:1,$()):h<0},P.precision=function(B){return arguments.length?(E=X1e(b,x=B*B),M()):Ja(x)},P.fitExtent=function(B,z){return i8(P,B,z)},P.fitSize=function(B,z){return vne(P,B,z)},P.fitWidth=function(B,z){return _ne(P,B,z)},P.fitHeight=function(B,z){return bne(P,B,z)};function $(){var B=Q1e(n,0,0,d,h,f).apply(null,t(s,o)),z=Q1e(n,r-B[0],i-B[1],d,h,f);return c=tze(a,u,l),b=dW(t,z),T=dW(c,b),E=X1e(b,x),M()}function M(){return A=C=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&N,$()}}function wne(e){var t=0,n=Mn/3,r=vze(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Nn,n=s[1]*Nn):[t*os,n*os]},i}function Hln(e){var t=Kt(e);function n(r,i){return[r*t,zt(i)/t]}return n.invert=function(r,i){return[r/t,Vu(i*t)]},n}function qln(e,t){var n=zt(e),r=(n+zt(t))/2;if(er(r)<Wt)return Hln(e);var i=1+n*(2*r-n),s=Ja(i)/r;function o(a,u){var l=Ja(i-2*r*zt(u))/r;return[l*zt(a*=r),s-l*Kt(a)]}return o.invert=function(a,u){var l=s-u,c=_c(a,er(l))*rc(l);return l*r<0&&(c-=Mn*rc(a)*rc(l)),[c/r,Vu((i-(a*a+l*l)*r*r)/(2*r))]},o}function GL(){return wne(qln).scale(155.424).center([0,33.6442])}function _ze(){return GL().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wln(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Gln(){var e,t,n=_ze(),r,i=GL().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=GL().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Wln([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Wt,m+.12*h+Wt],[p-.214*h-Wt,m+.234*h-Wt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Wt,m+.166*h+Wt],[p-.115*h-Wt,m+.234*h-Wt]]).stream(l),f()},c.fitExtent=function(d,h){return i8(c,d,h)},c.fitSize=function(d,h){return vne(c,d,h)},c.fitWidth=function(d,h){return _ne(c,d,h)},c.fitHeight=function(d,h){return bne(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function bze(e){return function(t,n){var r=Kt(t),i=Kt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*zt(t),s*zt(n)]}}function LO(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),s=zt(i),o=Kt(i);return[_c(t*s,r*o),Vu(r&&n*s/r)]}}var wze=bze(function(e){return Ja(2/(1+e))});wze.invert=LO(function(e){return 2*Vu(e/2)});function Yln(){return Oh(wze).scale(124.75).clipAngle(180-.001)}var Eze=bze(function(e){return(e=HUe(e))&&e/zt(e)});Eze.invert=LO(function(e){return e});function Kln(){return Oh(Eze).scale(79.4188).clipAngle(180-.001)}function s8(e,t){return[e,AL(mne((Zi+t)/2))]}s8.invert=function(e,t){return[e,2*ix(VUe(t))-Zi]};function Xln(){return Sze(s8).scale(961/Qa)}function Sze(e){var t=Oh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Mn*r(),d=t(mln(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===s8?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function Qk(e){return mne((Zi+e)/2)}function Qln(e,t){var n=Kt(e),r=e===t?zt(e):AL(n/Kt(t))/AL(Qk(t)/Qk(e)),i=n*jU(Qk(e),r)/r;if(!r)return s8;function s(o,a){i>0?a<-Zi+Wt&&(a=-Zi+Wt):a>Zi-Wt&&(a=Zi-Wt);var u=i/jU(Qk(a),r);return[u*zt(r*o),i-u*Kt(r*o)]}return s.invert=function(o,a){var u=i-a,l=rc(r)*Ja(o*o+u*u),c=_c(o,er(u))*rc(u);return u*r<0&&(c-=Mn*rc(o)*rc(u)),[c/r,2*ix(jU(i/l,1/r))-Zi]},s}function Jln(){return wne(Qln).scale(109.5).parallels([30,30])}function YL(e,t){return[e,t]}YL.invert=YL;function Zln(){return Oh(YL).scale(152.63)}function ecn(e,t){var n=Kt(e),r=e===t?zt(e):(n-Kt(t))/(t-e),i=n/r+e;if(er(r)<Wt)return YL;function s(o,a){var u=i-a,l=r*o;return[u*zt(l),i-u*Kt(l)]}return s.invert=function(o,a){var u=i-a,l=_c(o,er(u))*rc(u);return u*r<0&&(l-=Mn*rc(o)*rc(u)),[l/r,i-rc(r)*Ja(o*o+u*u)]},s}function tcn(){return wne(ecn).scale(131.154).center([0,13.9389])}var lC=1.340264,cC=-.081106,fC=893e-6,dC=.003796,KL=Ja(3)/2,ncn=12;function xze(e,t){var n=Vu(KL*zt(t)),r=n*n,i=r*r*r;return[e*Kt(n)/(KL*(lC+3*cC*r+i*(7*fC+9*dC*r))),n*(lC+cC*r+i*(fC+dC*r))]}xze.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<ncn&&(a=n*(lC+cC*r+i*(fC+dC*r))-t,u=lC+3*cC*r+i*(7*fC+9*dC*r),n-=o=a/u,r=n*n,i=r*r*r,!(er(o)<TL));++s);return[KL*e*(lC+3*cC*r+i*(7*fC+9*dC*r))/Kt(n),Vu(zt(n)/KL)]};function rcn(){return Oh(xze).scale(177.158)}function Tze(e,t){var n=Kt(t),r=Kt(e)*n;return[n*zt(e)/r,zt(t)/r]}Tze.invert=LO(ix);function icn(){return Oh(Tze).scale(144.049).clipAngle(60)}function scn(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=r8({point:function(w,x){var E=_([w,x]);this.stream.point(E[0],E[1])}}),m=UA,g,y;function v(){return d=e*r,h=e*i,g=y=null,_}function _(w){var x=w[0]*d,E=w[1]*h;if(s){var b=E*o-x*a;x=x*o+E*a,E=b}return[x+t,E+n]}return _.invert=function(w){var x=w[0]-t,E=w[1]-n;if(s){var b=E*o+x*a;x=x*o-E*a,E=b}return[x/d,E/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,UA):sze(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},_.scale=function(w){return arguments.length?(e=+w,v()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*Nn,a=zt(s),o=Kt(s),v()):s*os},_.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},_.fitExtent=function(w,x){return i8(_,w,x)},_.fitSize=function(w,x){return vne(_,w,x)},_.fitWidth=function(w,x){return _ne(_,w,x)},_.fitHeight=function(w,x){return bne(_,w,x)},_}function Cze(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}Cze.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(er(i)>Wt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function ocn(){return Oh(Cze).scale(175.295)}function Aze(e,t){return[Kt(t)*zt(e),zt(t)]}Aze.invert=LO(Vu);function acn(){return Oh(Aze).scale(249.5).clipAngle(90+Wt)}function Ize(e,t){var n=Kt(t),r=1+Kt(e)*n;return[n*zt(e)/r,zt(t)/r]}Ize.invert=LO(function(e){return 2*ix(e)});function ucn(){return Oh(Ize).scale(250).clipAngle(142)}function Oze(e,t){return[AL(mne((Zi+t)/2)),-e]}Oze.invert=function(e,t){return[-t,2*ix(VUe(e))-Zi]};function lcn(){var e=Sze(Oze),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var ccn=Math.abs,SW=Math.cos,XL=Math.sin,fcn=1e-6,Pze=Math.PI,xW=Pze/2,J1e=dcn(2);function Z1e(e){return e>1?xW:e<-1?-xW:Math.asin(e)}function dcn(e){return e>0?Math.sqrt(e):0}function hcn(e,t){var n=e*XL(t),r=30,i;do t-=i=(t+XL(t)-n)/(1+SW(t));while(ccn(i)>fcn&&--r>0);return t/2}function pcn(e,t,n){function r(i,s){return[e*i*SW(s=hcn(n,s)),t*XL(s)]}return r.invert=function(i,s){return s=Z1e(s/t),[i/(e*SW(s)),Z1e((2*s+XL(2*s))/n)]},r}var mcn=pcn(J1e/xW,J1e,Pze);function gcn(){return Oh(mcn).scale(169.529)}const ycn=yze(),TW=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function vcn(e,t){return function n(){const r=t();return r.type=e,r.path=yze().projection(r),r.copy=r.copy||function(){const i=n();return TW.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},YBe(r)}}function Ene(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(QL[e]=vcn(e,t),this):QL[e]||null}function kze(e){return e&&e.path||ycn}const QL={albers:_ze,albersusa:Gln,azimuthalequalarea:Yln,azimuthalequidistant:Kln,conicconformal:Jln,conicequalarea:GL,conicequidistant:tcn,equalEarth:rcn,equirectangular:Zln,gnomonic:icn,identity:scn,mercator:Xln,mollweide:gcn,naturalEarth1:ocn,orthographic:acn,stereographic:ucn,transversemercator:lcn};for(const e in QL)Ene(e,QL[e]);function _cn(){}const Wh=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function $ze(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),bcn(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(wcn((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Wh[g<<1].forEach(_);++h<e-1;)m=g,g=u[h+1]>=l,Wh[m|g<<1].forEach(_);for(Wh[g<<0].forEach(_);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Wh[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Wh[m|g<<1|y<<2|v<<3].forEach(_);Wh[g|y<<3].forEach(_)}for(h=-1,y=u[p*e]>=l,Wh[y<<2].forEach(_);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Wh[y<<2|v<<3].forEach(_);Wh[y<<3].forEach(_);function _(w){var x=[w[0][0]+h,w[0][1]+p],E=[w[1][0]+h,w[1][1]+p],b=o(x),T=o(E),A,C;(A=d[b])?(C=f[T])?(delete d[A.end],delete f[C.start],A===C?(A.ring.push(E),c(A.ring)):f[A.start]=d[C.end]={start:A.start,end:C.end,ring:A.ring.concat(C.ring)}):(delete d[A.end],A.ring.push(E),d[A.end=T]=A):(A=f[T])?(C=d[b])?(delete f[A.start],delete d[C.end],A===C?(A.ring.push(E),c(A.ring)):f[C.start]=d[A.end]={start:C.start,end:A.end,ring:C.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(x),f[A.start=b]=A):f[b]=d[T]={start:b,end:T,ring:[x,E]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||$e("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:_cn,r):n===a},r}function bcn(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function wcn(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Ecn(e,t[n]))return i;return 0}function Ecn(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Scn(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Scn(e,t,n){var r;return xcn(e,t,n)&&Tcn(e[r=+(e[0]===t[0])],n[r],t[r])}function xcn(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Tcn(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Rze(e,t,n){return function(r){var i=hh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?$A(s,o,e):a/(e+1);return x_(s+u,o,u)}}function Sne(e){Ie.call(this,null,e)}Sne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};nt(Sne,Ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ea,s=$ze().smooth(e.smooth!==!1),o=e.thresholds||Ccn(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Ne(o)?o:o(c.values));Acn(f,c,l,e),f.forEach(d=>{u.push(k5(l,Or(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Ccn(e,t,n){const r=Rze(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>o1(t(i).values)))}function Acn(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Sn(i)&&(i=i(n,r)),Sn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(hr(i)?i:i[0])||1,a=(hr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(Nze(t,o,a,u,l))}function Nze(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function e_e(e,t,n){const r=e>=0?e:$ee(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function HU(e){return Sn(e)?e:Sa(+e)}function Dze(){var e=u=>u[0],t=u=>u[1],n=KS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=e_e(r[0],u,e)>>o,f=e_e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const x=d+(+e(w)>>o),E=h+(+t(w)>>o);x>=0&&x<p&&E>=0&&E<m&&(g[x+E*p]+=+n(w))}),c>0&&f>0?(ob(p,m,g,y,c),ab(p,m,y,g,f),ob(p,m,g,y,c),ab(p,m,y,g,f),ob(p,m,g,y,c),ab(p,m,y,g,f)):c>0?(ob(p,m,g,y,c),ob(p,m,y,g,c),ob(p,m,g,y,c),v=y):f>0&&(ab(p,m,g,y,f),ab(p,m,y,g,f),ab(p,m,g,y,f),v=y);const _=l?Math.pow(2,-2*o):1/yje(v);for(let w=0,x=p*m;w<x;++w)v[w]*=_;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=HU(u),a):e},a.y=function(u){return arguments.length?(t=HU(u),a):t},a.weight=function(u){return arguments.length?(n=HU(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||$e("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||$e("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ht(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&$e("invalid bandwidth"),r=u,a):r},a}function ob(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function ab(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function xne(e){Ie.call(this,null,e)}xne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Icn=["x","y","weight","size","cellSize","bandwidth"];function Mze(e,t){return Icn.forEach(n=>t[n]!=null?e[n](t[n]):0),e}nt(xne,Ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Ocn(r,e.groupby),s=(e.groupby||[]).map(es),o=Mze(Dze(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Or(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Ocn(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Tne(e){Ie.call(this,null,e)}Tne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};nt(Tne,Ie,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=$ze().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||Rze(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=Mze(Dze(),e)(i,!0),u=Nze(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Ne(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Or),n}});const CW="Feature",Cne="FeatureCollection",Pcn="MultiPoint";function Ane(e){Ie.call(this,null,e)}Ane.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};nt(Ane,Ie,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ea,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(pa(a))||s&&t.modified(pa(s))||o&&t.modified(pa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:CW,geometry:{type:Pcn,coordinates:r}})),this.value={type:Cne,features:n}}});function Ine(e){Ie.call(this,null,e)}Ine.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};nt(Ine,Ie,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ea,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=kze(e.projection),n.materialize().reflow()):o=i===Ea||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=kcn(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function kcn(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function One(e){Ie.call(this,null,e)}One.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};nt(One,Ie,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Pne(e){Ie.call(this,null,e)}Pne.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};nt(Pne,Ie,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=$cn(kze(e.projection),e.field||mc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function $cn(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function kne(e){Ie.call(this,[],e),this.generator=Tln()}kne.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};nt(kne,Ie,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Sn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(Jje(n[0],i)):t.add.push(Or(i)),n[0]=i,t}});function $ne(e){Ie.call(this,null,e)}$ne.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};nt($ne,Ie,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ea,s=Ncn(e.opacity,e),o=Rcn(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?o1(n.map(l=>o1(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=En({},l,u);r||(f.$max=o1(c.values||[])),l[a]=Dcn(c,f,o.dep?o:Sa(o(f)),s.dep?s:Sa(s(f)))}),t.reflow(!0).modifies(a)}});function Rcn(e,t){let n;return Sn(e)?(n=r=>E0(e(r,t)),n.dep=Lze(e)):n=Sa(E0(e||"#888")),n}function Ncn(e,t){let n;return Sn(e)?(n=r=>e(r,t),n.dep=Lze(e)):e?n=Sa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function Lze(e){if(!Sn(e))return!1;const t=Nf(pa(e));return t.$x||t.$y||t.$value||t.$max}function Dcn(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:wg,d=c0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,_=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function Fze(e){Ie.call(this,null,e),this.modified(!0)}nt(Fze,Ie,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Lcn(e.type),TW.forEach(r=>{e[r]!=null&&t_e(n,r,e[r])})):TW.forEach(r=>{e.modified(r)&&t_e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Mcn(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Mcn(e,t){const n=Fcn(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Lcn(e){const t=Ene((e||"mercator").toLowerCase());return t||$e("Unrecognized projection type: "+e),t()}function t_e(e,t,n){Sn(e[t])&&e[t](n)}function Fcn(e){return e=ht(e),e.length===1?e[0]:{type:Cne,features:e.reduce((t,n)=>t.concat(jcn(n)),[])}}function jcn(e){return e.type===Cne?e.features:ht(e).filter(t=>t!=null).map(t=>t.type===CW?t:{type:CW,geometry:t})}const Bcn=Object.freeze(Object.defineProperty({__proto__:null,contour:Tne,geojson:Ane,geopath:Ine,geopoint:One,geoshape:Pne,graticule:kne,heatmap:$ne,isocontour:Sne,kde2d:xne,projection:Fze},Symbol.toStringTag,{value:"Module"})),n_e={center:WIt,collide:fOt,nbody:EOt,link:hOt,x:SOt,y:xOt},f2="forces",AW=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Ucn=["static","iterations"],jze=["x","y","vx","vy"];function Rne(e){Ie.call(this,null,e)}Rne.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:jze}]};nt(Rne,Ie,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(AW),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&Bze(n,e,0,t)):(this.value=n=Vcn(t.source,e),n.on("tick",zcn(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(Ucn)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==f2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(jze)}});function zcn(e,t){return()=>e.touch(t).run()}function Vcn(e,t){const n=wOt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),Bze(n,t,!0).on("end",()=>s=!0)}function Bze(e,t,n,r){var i=ht(t.forces),s,o,a,u;for(s=0,o=AW.length;s<o;++s)a=AW[s],a!==f2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=f2+s,a=n||t.modified(f2,s)?qcn(i[s]):r&&Hcn(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(f2+s,null);return e.numForces=i.length,e}function Hcn(e,t){var n,r;for(n in e)if(Sn(r=e[n])&&t.modified(pa(r)))return 1;return 0}function qcn(e){var t,n;Vt(n_e,e.force)||$e("Unrecognized force: "+e.force),t=n_e[e.force]();for(n in e)Sn(t[n])&&Wcn(t[n],e[n],e);return t}function Wcn(e,t,n){e(Sn(t)?r=>t(r,n):t)}const Gcn=Object.freeze(Object.defineProperty({__proto__:null,force:Rne},Symbol.toStringTag,{value:"Module"}));function IW(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Nne(e){Ie.call(this,null,e)}Nne.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Ycn=e=>e.values;nt(Nne,Ie,{transform(e,t){t.source||$e("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&P5(o.data)&&i.rem.push(o.data)}),this.value=s=tF({values:ht(e.keys).reduce((o,a)=>(o.key(a),o),Kcn()).entries(i.source)},Ycn),n&&s.each(o=>{o.children&&(o=Or(o.data),i.add.push(o),i.source.push(o))}),IW(s,Ut,Ut)),i.source.root=s,i}});function Kcn(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function km(e){Ie.call(this,null,e)}const Xcn=(e,t)=>e.parent===t.parent?1:2;nt(km,Ie,{transform(e,t){(!t.source||!t.source.root)&&$e(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(T_(e.sort,o=>o.data)),Qcn(n,this.params,e),n.separation&&n.separation(e.separation!==!1?Xcn:KS);try{this.value=n(i)}catch(o){$e(o)}return i.each(o=>Jcn(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function Qcn(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function Jcn(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const OW=["x","y","r","depth","children"];function Dne(e){km.call(this,e)}Dne.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OW.length,default:OW}]};nt(Dne,km,{layout:fRe,params:["radius","size","padding"],fields:OW});const PW=["x0","y0","x1","y1","depth","children"];function Mne(e){km.call(this,e)}Mne.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PW.length,default:PW}]};nt(Mne,km,{layout:gPt,params:["size","round","padding"],fields:PW});function Lne(e){Ie.call(this,null,e)}Lne.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};nt(Lne,Ie,{transform(e,t){t.source||$e("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?IW(Epe().id(e.key).parentId(e.parentKey)(i.source),e.key,gc):IW(Epe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const r_e={tidy:CPt,cluster:jOt},kW=["x","y","depth","children"];function Fne(e){km.call(this,e)}Fne.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:kW.length,default:kW}]};nt(Fne,km,{layout(e){const t=e||"tidy";if(Vt(r_e,t))return r_e[t]();$e("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:kW});function jne(e){Ie.call(this,[],e)}jne.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};nt(jne,Ie,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||$e("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Ut(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Ut(a)]&&s[Ut(u)]&&i.add.push(Or({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Ut(o)]=1),n.forEach(o=>{(s[Ut(o.source)]||s[Ut(o.target)])&&i.mod.push(o)})),i}});const i_e={binary:IPt,dice:RI,slice:nF,slicedice:OPt,squarify:mRe,resquarify:PPt},$W=["x0","y0","x1","y1","depth","children"];function Bne(e){km.call(this,e)}Bne.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$W.length,default:$W}]};nt(Bne,km,{layout(){const e=APt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Vt(i_e,t)?e.tile(i_e[t]):$e("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:$W});const Zcn=Object.freeze(Object.defineProperty({__proto__:null,nest:Nne,pack:Dne,partition:Mne,stratify:Lne,tree:Fne,treelinks:jne,treemap:Bne},Symbol.toStringTag,{value:"Module"})),qU=4278190080;function efn(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function tfn(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=c0(s,o).getContext("2d"),l=c0(s,o).getContext("2d"),c=a&&c0(s,o).getContext("2d");n.forEach(T=>RR(u,T,!1)),RR(l,t,!1),a&&RR(c,t,!0);const f=WU(u,s,o),d=WU(l,s,o),h=a&&WU(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,_,w,x,E,b;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,x=f[w]&qU,b=d[w]&qU,E=a&&h[w]&qU,(x||E||b)&&(v=e(g),_=e(y),!i&&(x||b)&&p.set(v,_),a&&(x||E)&&m.set(v,_));return[p,m]}function WU(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function RR(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>RR(e,s.items,n))}):Ol[r].draw(e,{items:n?t.map(nfn):t})}function nfn(e){const t=k5(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Gh=5,Pa=31,VA=32,fg=new Uint32Array(VA+1),sf=new Uint32Array(VA+1);sf[0]=0;fg[0]=~sf[0];for(let e=1;e<=VA;++e)sf[e]=sf[e-1]<<1|1,fg[e]=~sf[e];function rfn(e,t){const n=new Uint32Array(~~((e*t+VA)/VA));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Gh]&1<<(a&Pa)},set:(s,o)=>{const a=o*e+s;r(a>>>Gh,1<<(a&Pa))},clear:(s,o)=>{const a=o*e+s;i(a>>>Gh,~(1<<(a&Pa)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Gh,h=f>>>Gh,d===h){if(n[d]&fg[c&Pa]&sf[(f&Pa)+1])return!0}else{if(n[d]&fg[c&Pa]||n[h]&sf[(f&Pa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Gh,d=c>>>Gh,f===d)r(f,fg[l&Pa]&sf[(c&Pa)+1]);else for(r(f,fg[l&Pa]),r(d,sf[(c&Pa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Gh,d=c>>>Gh,f===d)i(f,sf[l&Pa]|fg[(c&Pa)+1]);else for(i(f,sf[l&Pa]),i(d,fg[(c&Pa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function ifn(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>rfn(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function sfn(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=_l.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let _=0;_<u;++_)d=a[_].x,p=a[_].y,h=a[_].x2===void 0?d:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function JL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Fg(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function ofn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!JL(p,m,d,h,i,s)&&!Fg(e,p,m,h,d,g,o,a)&&!Fg(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Fg(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=_l.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,_,w,x,E,b,T,A,C,P,N,$,M,B,z,W,U;for(let Y=0;Y<f;++Y){for(v=c[Y].x,w=c[Y].y,_=c[Y].x2===void 0?v:c[Y].x2,x=c[Y].y2===void 0?w:c[Y].y2,v>_&&(U=v,v=_,_=U),w>x&&(U=w,w=x,x=U),C=e(v),N=e(_),P=~~((C+N)/2),$=e(w),B=e(x),M=~~(($+B)/2),T=P;T>=C;--T)for(A=M;A>=$;--A)W=u(T,A,p,h,d),W&&([l.x,l.y,p,m]=W);for(T=P;T<=N;++T)for(A=M;A<=B;++A)W=u(T,A,p,h,d),W&&([l.x,l.y,p,m]=W);!m&&!n&&(z=Math.abs(_-v+x-w),E=(v+_)/2,b=(w+x)/2,z>=y&&!JL(E,b,h,d,i,s)&&!Fg(e,E,b,d,h,d,o,null)&&(y=z,l.x=E,l.y=b,g=!0))}return m||g?(E=h/2,b=d/2,o.setRange(e(l.x-E),e(l.y-b),e(l.x+E),e(l.y+b)),l.align="center",l.baseline="middle",!0):!1}}const afn=[-1,-1,1,1],ufn=[-1,1,-1,1];function lfn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=_l.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,_,w,x,E,b,T,A,C,P,N,$,M;for(let B=0;B<f;++B){for(_=c[B].x,x=c[B].y,w=c[B].x2===void 0?_:c[B].x2,E=c[B].y2===void 0?x:c[B].y2,p.push([e((_+w)/2),e((x+E)/2)]);p.length;)if([A,C]=p.pop(),!(o.get(A,C)||a.get(A,C)||u.get(A,C))){u.set(A,C);for(let z=0;z<4;++z)b=A+afn[z],T=C+ufn[z],u.outOfBounds(b,T,b,T)||p.push([b,T]);if(b=e.invert(A),T=e.invert(C),P=m,N=s,!JL(b,T,h,d,i,s)&&!Fg(e,b,T,d,h,P,o,a)&&!Fg(e,b,T,d,h,d,o,null)){for(;N-P>=1;)$=(P+N)/2,Fg(e,b,T,d,h,$,o,a)?N=$:P=$;P>m&&(l.x=b,l.y=T,m=P,g=!0)}}!g&&!n&&(M=Math.abs(w-_+E-x),b=(_+w)/2,T=(x+E)/2,M>=v&&!JL(b,T,h,d,i,s)&&!Fg(e,b,T,d,h,d,o,null)&&(v=M,l.x=b,l.y=T,y=!0))}return g||y?(b=h/2,T=d/2,o.setRange(e(l.x-b),e(l.y-T),e(l.x+b),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const cfn=["right","center","left"],ffn=["bottom","middle","top"];function dfn(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,_,w,x,E,b,T,A,C,P;for(let N=0;N<u;++N){if(h=(n[N]&3)-1,p=(n[N]>>>2&3)-1,m=h===0&&p===0||r[N]<0,g=h&&p?Math.SQRT1_2:1,y=r[N]<0?-1:1,v=c[1+h]+r[N]*h*g,b=c[4+p]+y*f*p/2+r[N]*p*g,w=b-f/2,x=b+f/2,T=e(v),C=e(w),P=e(x),!d)if(s_e(T,T,C,P,o,a,v,v,w,x,c,m))d=_l.width(l.datum,l.datum.text);else continue;if(E=v+y*d*h/2,v=E-d/2,_=E+d/2,T=e(v),A=e(_),s_e(T,A,C,P,o,a,v,_,w,x,c,m))return l.x=h?h*y<0?_:v:E,l.y=p?p*y<0?x:w:b,l.align=cfn[h*y+1],l.baseline=ffn[p*y+1],o.setRange(T,C,A,P),!0}return!1}}function s_e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const GU=0,YU=4,KU=8,XU=0,QU=1,JU=2,hfn={"top-left":GU+XU,top:GU+QU,"top-right":GU+JU,left:YU+XU,middle:YU+QU,right:YU+JU,"bottom-left":KU+XU,bottom:KU+QU,"bottom-right":KU+JU},pfn={naive:sfn,"reduced-search":ofn,floodfill:lfn};function mfn(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=gfn(r,f),h=yfn(i,f),p=vfn(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=_fn(p,m,a,u),v=l===null||l===1/0,_=g&&c==="naive";let w=-1,x=-1;const E=e.map(C=>{const P=v?_l.width(C,C.text):void 0;return w=Math.max(w,P),x=Math.max(x,C.fontSize),{datum:C,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(C),textWidth:P}});l=l===null||l===1/0?Math.max(w,x)+Math.max(...r):l;const b=ifn(t[0],t[1],l);let T;if(!_){n&&E.sort((N,$)=>n(N.datum,$.datum));let C=!1;for(let N=0;N<h.length&&!C;++N)C=h[N]===5||d[N]<0;const P=(p&&o||g)&&e.map(N=>N.datum);T=s.length||P?tfn(b,P||[],s,C,g):efn(b,o&&E)}const A=g?pfn[c](b,T,o,u):dfn(b,T,h,d);return E.forEach(C=>C.opacity=+A(C)),E}function gfn(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function yfn(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=hfn[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function vfn(e){return e&&e.mark&&e.mark.marktype}function _fn(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const RW=["x","y","opacity","align","baseline"],Uze=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Une(e){Ie.call(this,null,e)}Une.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Uze},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:RW.length,default:RW}]};nt(Une,Ie,{transform(e,t){function n(s){const o=e[s];return Sn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&$e("Size parameter should be specified as a [width, height] array.");const i=e.as||RW;return mfn(t.materialize(t.SOURCE).source||[],e.size,e.sort,ht(e.offset==null?1:e.offset),ht(e.anchor||Uze),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const bfn=Object.freeze(Object.defineProperty({__proto__:null,label:Une},Symbol.toStringTag,{value:"Module"}));function zze(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function zne(e){Ie.call(this,null,e)}zne.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};nt(zne,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=zze(r,e.groupby),s=(e.groupby||[]).map(es),o=s.length,a=e.as||[es(e.x),es(e.y)],u=[];i.forEach(l=>{gBe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Or(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const NW={constant:Hee,linear:qee,log:dBe,exp:hBe,pow:pBe,quad:Wee,poly:mBe},wfn=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Vne(e){Ie.call(this,null,e)}Vne.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(NW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};nt(Vne,Ie,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=zze(r,e.groupby),s=(e.groupby||[]).map(es),o=e.method||"linear",a=e.order==null?3:e.order,u=wfn(o,a),l=e.as||[es(e.x),es(e.y)],c=NW[o],f=[];let d=e.extent;Vt(NW,o)||$e("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Or({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||hh(h,e.x),y=v=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[l[0]]=v[0],_[l[1]]=v[1],f.push(Or(_))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):F5(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const Efn=Object.freeze(Object.defineProperty({__proto__:null,loess:zne,regression:Vne},Symbol.toStringTag,{value:"Module"})),o_e=1e-6;class zv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>o_e||Math.abs(this._y1-s)>o_e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class DW{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Sfn=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,_;m<y;m+=3,g+=2){const w=r[m]*2,x=r[m+1]*2,E=r[m+2]*2,b=t[w],T=t[w+1],A=t[x],C=t[x+1],P=t[E],N=t[E+1],$=A-b,M=C-T,B=P-b,z=N-T,W=($*z-M*B)*2;if(Math.abs(W)<1e-9){if(s===void 0){s=o=0;for(const Y of n)s+=t[Y*2],o+=t[Y*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-b)*z-(o-T)*B);v=(b+P)/2-U*z,_=(T+N)/2+U*B}else{const U=1/W,Y=$*$+M*M,q=B*B+z*z;v=b+(z*Y-M*q)*U,_=T+($*q-B*Y)*U}a[g]=v,a[g+1]=_}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new zv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new zv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new zv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new DW;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const xfn=2*Math.PI,ub=Math.pow;function Tfn(e){return e[0]}function Cfn(e){return e[1]}function Afn(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Ifn(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Hne{static from(t,n=Tfn,r=Cfn,i){return new Hne("length"in t?Ofn(t,n,r,i):Float64Array.from(Pfn(t,n,r,i)))}constructor(t){this._delaunator=new k3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Afn(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Ifn(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new k3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Sfn(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=ub(n-l[t*2],2)+ub(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=ub(n-l[p*2],2)+ub(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&ub(n-l[h*2],2)+ub(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new zv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new zv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,xfn)}return r&&r.value()}renderHull(t){const n=t==null?t=new zv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new DW;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new zv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new DW;return this.renderTriangle(t,n),n.value()}}function Ofn(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Pfn(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}function qne(e){Ie.call(this,null,e)}qne.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const kfn=[-1e5,-1e5,1e5,1e5];nt(qne,Ie,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:kfn;const s=this.value=Hne.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!Rfn(u)?$fn(u):null}return t.reflow(e.modified()).modifies(n)}});function $fn(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function Rfn(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const Nfn=Object.freeze(Object.defineProperty({__proto__:null,voronoi:qne},Symbol.toStringTag,{value:"Module"}));var ZU=Math.PI/180,d2=64,NR=2048;function Dfn(){var e=[256,256],t,n,r,i,s,o,a,u=Vze,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(c0()),m=Ufn((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,_=[],w=l.map(E=>({text:t(E),font:n(E),style:i(E),weight:s(E),rotate:o(E),size:~~(r(E)+1e-14),padding:a(E),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:E})).sort((E,b)=>b.size-E.size);++v<y;){var x=w[v];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,Mfn(p,x,w,v),x.hasText&&h(m,x,g)&&(_.push(x),g?Ffn(g,x):g=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return _};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(d2<<5)/m,p.height=NR/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,_=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),x=c()<.5?1:-1,E=-x,b,T,A;(b=w(E+=x))&&(T=~~b[0],A=~~b[1],!(Math.min(Math.abs(T),Math.abs(A))>=_));)if(m.x=y+T,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!Lfn(m,p,e[0]))&&(!g||jfn(m,g))){for(var C=m.sprite,P=m.width>>5,N=e[0]>>5,$=m.x-(P<<4),M=$&127,B=32-M,z=m.y1-m.y0,W=(m.y+m.y0)*N+($>>5),U,Y=0;Y<z;Y++){U=0;for(var q=0;q<=P;q++)p[W+q]|=U<<B|(q<P?(U=C[Y*P+q])>>>M:0);W+=N}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=By(p),f):n},f.fontStyle=function(p){return arguments.length?(i=By(p),f):i},f.fontWeight=function(p){return arguments.length?(s=By(p),f):s},f.rotate=function(p){return arguments.length?(o=By(p),f):o},f.text=function(p){return arguments.length?(t=By(p),f):t},f.spiral=function(p){return arguments.length?(u=zfn[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=By(p),f):r},f.padding=function(p){return arguments.length?(a=By(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Mfn(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(d2<<5)/s,NR/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*ZU),g=Math.cos(t.rotate*ZU),y=c*g,v=c*m,_=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=d2<<5&&(o=0,a+=u,u=0),a+d>=NR)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*ZU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(d2<<5)/s,NR/s).data,E=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)E[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var b=0,T=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),C=x[(a+p)*(d2<<5)+(o+h)<<2]?1<<31-h%32:0;E[A]|=C,b|=C}b?T=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+T,t.sprite=E.slice(0,(t.y1-t.y0)*f)}}}function Lfn(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function Ffn(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function jfn(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Vze(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Bfn(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Ufn(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function By(e){return typeof e=="function"?e:function(){return e}}var zfn={archimedean:Vze,rectangular:Bfn};const Hze=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Vfn=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wne(e){Ie.call(this,Dfn(),e)}Wne.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Hze}]};nt(Wne,Ie,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&$e("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Sn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Vfn.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||Hze;let a=e.fontSize||14,u;if(Sn(a)?u=e.fontSizeRange:a=Sa(a),u){const p=a,m=Er("sqrt")().domain(hh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(vc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const Hfn=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Wne},Symbol.toStringTag,{value:"Module"})),qfn=e=>new Uint8Array(e),Wfn=e=>new Uint16Array(e),hC=e=>new Uint32Array(e);function Gfn(){let e=8,t=[],n=hC(0),r=Jk(0,e),i=Jk(0,e);return{data:()=>t,seen:()=>n=Yfn(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=Jk(s,e,r),i=Jk(s,e))}}}function Yfn(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function Jk(e,t,n){const r=(t<257?qfn:t<65537?Wfn:hC)(e);return n&&r.set(n),r}function a_e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function u_e(){let e=hC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=hC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=Kfn(h,d),c)p=t,m=e,t=Array(c+f),e=hC(c+f),Xfn(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[inn(u,a[0],0,l),lL(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function Kfn(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),unn(e,t)}function Xfn(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Gne(e){Ie.call(this,Gfn(),e),this._indices=null,this._dims=null}Gne.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};nt(Gne,Ie,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=u_e()),s.push(a_e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,_,w,x,E,b;if(l.set(u),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,x=0,E=v.length;x<E;++x)w[v[x]._index]=1;for(x=0;x<h;++x)b=r[x],(!o[x]||e.modified("fields",x)||t.modified(b.fields))&&(y=b.fname,(m=p[y])||(s[y]=g=u_e(),p[y]=m=g.insert(b,t.source,0)),o[x]=a_e(g,x,i[x]).onAdd(m,u));for(x=0,E=a.data().length;x<E;++x)_[x]||(l[x]!==u[x]?f.push(x):w[x]&&u[x]!==c&&d.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Yne(e){Ie.call(this,null,e)}Yne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};nt(Yne,Ie,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const Qfn=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Gne,resolvefilter:Yne},Symbol.toStringTag,{value:"Module"})),Jfn="RawCode",z1="Literal",Zfn="Property",edn="Identifier",tdn="ArrayExpression",ndn="BinaryExpression",qze="CallExpression",rdn="ConditionalExpression",idn="LogicalExpression",sdn="MemberExpression",odn="ObjectExpression",adn="UnaryExpression";function Hf(e){this.type=e}Hf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=udn(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function udn(e){switch(e.type){case tdn:return e.elements;case ndn:case idn:return[e.left,e.right];case qze:return[e.callee].concat(e.arguments);case rdn:return[e.test,e.consequent,e.alternate];case sdn:return[e.object,e.property];case odn:return e.properties;case Zfn:return[e.key,e.value];case adn:return[e.argument];case edn:case z1:case Jfn:default:return[]}}var Ph,Rt,Pe,ga,Lr,o8=1,FO=2,V1=3,by=4,a8=5,I_=6,yu=7,jO=8,ldn=9;Ph={};Ph[o8]="Boolean";Ph[FO]="<end>";Ph[V1]="Identifier";Ph[by]="Keyword";Ph[a8]="Null";Ph[I_]="Numeric";Ph[yu]="Punctuator";Ph[jO]="String";Ph[ldn]="RegularExpression";var cdn="ArrayExpression",fdn="BinaryExpression",ddn="CallExpression",hdn="ConditionalExpression",Wze="Identifier",pdn="Literal",mdn="LogicalExpression",gdn="MemberExpression",ydn="ObjectExpression",vdn="Property",_dn="UnaryExpression",so="Unexpected token %0",bdn="Unexpected number",wdn="Unexpected string",Edn="Unexpected identifier",Sdn="Unexpected reserved word",xdn="Unexpected end of input",MW="Invalid regular expression",ez="Invalid regular expression: missing /",Gze="Octal literals are not allowed in strict mode.",Tdn="Duplicate data property in object literal not allowed in strict mode",ko="ILLEGAL",HA="Disabled.",Cdn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Adn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function u8(e,t){if(!e)throw new Error("ASSERT: "+t)}function sp(e){return e>=48&&e<=57}function Kne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function pC(e){return"01234567".indexOf(e)>=0}function Idn(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function qA(e){return e===10||e===13||e===8232||e===8233}function BO(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Cdn.test(String.fromCharCode(e))}function ZL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Adn.test(String.fromCharCode(e))}const Odn={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Yze(){for(;Pe<ga;){const e=Rt.charCodeAt(Pe);if(Idn(e)||qA(e))++Pe;else break}}function LW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Pe<ga&&Kne(Rt[Pe])?(r=Rt[Pe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):br({},so,ko);return String.fromCharCode(i)}function Pdn(){var e,t,n,r;for(e=Rt[Pe],t=0,e==="}"&&br({},so,ko);Pe<ga&&(e=Rt[Pe++],!!Kne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&br({},so,ko),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Kze(){var e,t;for(e=Rt.charCodeAt(Pe++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt(Pe)!==117&&br({},so,ko),++Pe,e=LW("u"),(!e||e==="\\"||!BO(e.charCodeAt(0)))&&br({},so,ko),t=e);Pe<ga&&(e=Rt.charCodeAt(Pe),!!ZL(e));)++Pe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt(Pe)!==117&&br({},so,ko),++Pe,e=LW("u"),(!e||e==="\\"||!ZL(e.charCodeAt(0)))&&br({},so,ko),t+=e);return t}function kdn(){var e,t;for(e=Pe++;Pe<ga;){if(t=Rt.charCodeAt(Pe),t===92)return Pe=e,Kze();if(ZL(t))++Pe;else break}return Rt.slice(e,Pe)}function $dn(){var e,t,n;return e=Pe,t=Rt.charCodeAt(Pe)===92?Kze():kdn(),t.length===1?n=V1:Odn.hasOwnProperty(t)?n=by:t==="null"?n=a8:t==="true"||t==="false"?n=o8:n=V1,{type:n,value:t,start:e,end:Pe}}function tz(){var e=Pe,t=Rt.charCodeAt(Pe),n,r=Rt[Pe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Pe,{type:yu,value:String.fromCharCode(t),start:e,end:Pe};default:if(n=Rt.charCodeAt(Pe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Pe+=2,{type:yu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Pe};case 33:case 61:return Pe+=2,Rt.charCodeAt(Pe)===61&&++Pe,{type:yu,value:Rt.slice(e,Pe),start:e,end:Pe}}}if(o=Rt.substr(Pe,4),o===">>>=")return Pe+=4,{type:yu,value:o,start:e,end:Pe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Pe+=3,{type:yu,value:s,start:e,end:Pe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Pe+=2,{type:yu,value:i,start:e,end:Pe};if(i==="//"&&br({},so,ko),"<>=!+-*%&|^/".indexOf(r)>=0)return++Pe,{type:yu,value:r,start:e,end:Pe};br({},so,ko)}function Rdn(e){let t="";for(;Pe<ga&&Kne(Rt[Pe]);)t+=Rt[Pe++];return t.length===0&&br({},so,ko),BO(Rt.charCodeAt(Pe))&&br({},so,ko),{type:I_,value:parseInt("0x"+t,16),start:e,end:Pe}}function Ndn(e){let t="0"+Rt[Pe++];for(;Pe<ga&&pC(Rt[Pe]);)t+=Rt[Pe++];return(BO(Rt.charCodeAt(Pe))||sp(Rt.charCodeAt(Pe)))&&br({},so,ko),{type:I_,value:parseInt(t,8),octal:!0,start:e,end:Pe}}function l_e(){var e,t,n;if(n=Rt[Pe],u8(sp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Pe,e="",n!=="."){if(e=Rt[Pe++],n=Rt[Pe],e==="0"){if(n==="x"||n==="X")return++Pe,Rdn(t);if(pC(n))return Ndn(t);n&&sp(n.charCodeAt(0))&&br({},so,ko)}for(;sp(Rt.charCodeAt(Pe));)e+=Rt[Pe++];n=Rt[Pe]}if(n==="."){for(e+=Rt[Pe++];sp(Rt.charCodeAt(Pe));)e+=Rt[Pe++];n=Rt[Pe]}if(n==="e"||n==="E")if(e+=Rt[Pe++],n=Rt[Pe],(n==="+"||n==="-")&&(e+=Rt[Pe++]),sp(Rt.charCodeAt(Pe)))for(;sp(Rt.charCodeAt(Pe));)e+=Rt[Pe++];else br({},so,ko);return BO(Rt.charCodeAt(Pe))&&br({},so,ko),{type:I_,value:parseFloat(e),start:t,end:Pe}}function Ddn(){var e="",t,n,r,i,s=!1;for(t=Rt[Pe],u8(t==="'"||t==='"',"String literal must starts with a quote"),n=Pe,++Pe;Pe<ga;)if(r=Rt[Pe++],r===t){t="";break}else if(r==="\\")if(r=Rt[Pe++],!r||!qA(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[Pe]==="{"?(++Pe,e+=Pdn()):e+=LW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:pC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Pe<ga&&pC(Rt[Pe])&&(s=!0,i=i*8+"01234567".indexOf(Rt[Pe++]),"0123".indexOf(r)>=0&&Pe<ga&&pC(Rt[Pe])&&(i=i*8+"01234567".indexOf(Rt[Pe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[Pe]===`
`&&++Pe;else{if(qA(r.charCodeAt(0)))break;e+=r}return t!==""&&br({},so,ko),{type:jO,value:e,octal:s,start:n,end:Pe}}function Mdn(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";br({},MW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{br({},MW)}try{return new RegExp(e,t)}catch{return null}}function Ldn(){var e,t,n,r,i;for(e=Rt[Pe],u8(e==="/","Regular expression literal must start with a slash"),t=Rt[Pe++],n=!1,r=!1;Pe<ga;)if(e=Rt[Pe++],t+=e,e==="\\")e=Rt[Pe++],qA(e.charCodeAt(0))&&br({},ez),t+=e;else if(qA(e.charCodeAt(0)))br({},ez);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||br({},ez),i=t.substr(1,t.length-2),{value:i,literal:t}}function Fdn(){var e,t,n;for(t="",n="";Pe<ga&&(e=Rt[Pe],!!ZL(e.charCodeAt(0)));)++Pe,e==="\\"&&Pe<ga?br({},so,ko):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&br({},MW,n),{value:n,literal:t}}function jdn(){var e,t,n,r;return Lr=null,Yze(),e=Pe,t=Ldn(),n=Fdn(),r=Mdn(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Pe}}function Bdn(e){return e.type===V1||e.type===by||e.type===o8||e.type===a8}function Xze(){if(Yze(),Pe>=ga)return{type:FO,start:Pe,end:Pe};const e=Rt.charCodeAt(Pe);return BO(e)?$dn():e===40||e===41||e===59?tz():e===39||e===34?Ddn():e===46?sp(Rt.charCodeAt(Pe+1))?l_e():tz():sp(e)?l_e():tz()}function Tu(){const e=Lr;return Pe=e.end,Lr=Xze(),Pe=e.end,e}function Qze(){const e=Pe;Lr=Xze(),Pe=e}function Udn(e){const t=new Hf(cdn);return t.elements=e,t}function c_e(e,t,n){const r=new Hf(e==="||"||e==="&&"?mdn:fdn);return r.operator=e,r.left=t,r.right=n,r}function zdn(e,t){const n=new Hf(ddn);return n.callee=e,n.arguments=t,n}function Vdn(e,t,n){const r=new Hf(hdn);return r.test=e,r.consequent=t,r.alternate=n,r}function Xne(e){const t=new Hf(Wze);return t.name=e,t}function h2(e){const t=new Hf(pdn);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function f_e(e,t,n){const r=new Hf(gdn);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Hdn(e){const t=new Hf(ydn);return t.properties=e,t}function d_e(e,t,n){const r=new Hf(vdn);return r.key=t,r.value=n,r.kind=e,r}function qdn(e,t){const n=new Hf(_dn);return n.operator=e,n.argument=t,n.prefix=!0,n}function br(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(u8(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Pe,n.description=i,n}function l8(e){e.type===FO&&br(e,xdn),e.type===I_&&br(e,bdn),e.type===jO&&br(e,wdn),e.type===V1&&br(e,Edn),e.type===by&&br(e,Sdn),br(e,so,e.value)}function ya(e){const t=Tu();(t.type!==yu||t.value!==e)&&l8(t)}function vi(e){return Lr.type===yu&&Lr.value===e}function nz(e){return Lr.type===by&&Lr.value===e}function Wdn(){const e=[];for(Pe=Lr.start,ya("[");!vi("]");)vi(",")?(Tu(),e.push(null)):(e.push(H1()),vi("]")||ya(","));return Tu(),Udn(e)}function h_e(){Pe=Lr.start;const e=Tu();return e.type===jO||e.type===I_?(e.octal&&br(e,Gze),h2(e)):Xne(e.value)}function Gdn(){var e,t,n,r;if(Pe=Lr.start,e=Lr,e.type===V1)return n=h_e(),ya(":"),r=H1(),d_e("init",n,r);if(e.type===FO||e.type===yu)l8(e);else return t=h_e(),ya(":"),r=H1(),d_e("init",t,r)}function Ydn(){var e=[],t,n,r,i={},s=String;for(Pe=Lr.start,ya("{");!vi("}");)t=Gdn(),t.key.type===Wze?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?br({},Tdn):i[r]=!0,e.push(t),vi("}")||ya(",");return ya("}"),Hdn(e)}function Kdn(){ya("(");const e=Qne();return ya(")"),e}const Xdn={if:1};function Qdn(){var e,t,n;if(vi("("))return Kdn();if(vi("["))return Wdn();if(vi("{"))return Ydn();if(e=Lr.type,Pe=Lr.start,e===V1||Xdn[Lr.value])n=Xne(Tu().value);else if(e===jO||e===I_)Lr.octal&&br(Lr,Gze),n=h2(Tu());else{if(e===by)throw new Error(HA);e===o8?(t=Tu(),t.value=t.value==="true",n=h2(t)):e===a8?(t=Tu(),t.value=null,n=h2(t)):vi("/")||vi("/=")?(n=h2(jdn()),Qze()):l8(Tu())}return n}function Jdn(){const e=[];if(ya("("),!vi(")"))for(;Pe<ga&&(e.push(H1()),!vi(")"));)ya(",");return ya(")"),e}function Zdn(){Pe=Lr.start;const e=Tu();return Bdn(e)||l8(e),Xne(e.value)}function ehn(){return ya("."),Zdn()}function thn(){ya("[");const e=Qne();return ya("]"),e}function nhn(){var e,t,n;for(e=Qdn();;)if(vi("."))n=ehn(),e=f_e(".",e,n);else if(vi("("))t=Jdn(),e=zdn(e,t);else if(vi("["))n=thn(),e=f_e("[",e,n);else break;return e}function p_e(){const e=nhn();if(Lr.type===yu&&(vi("++")||vi("--")))throw new Error(HA);return e}function DR(){var e,t;if(Lr.type!==yu&&Lr.type!==by)t=p_e();else{if(vi("++")||vi("--"))throw new Error(HA);if(vi("+")||vi("-")||vi("~")||vi("!"))e=Tu(),t=DR(),t=qdn(e.value,t);else{if(nz("delete")||nz("void")||nz("typeof"))throw new Error(HA);t=p_e()}}return t}function m_e(e){let t=0;if(e.type!==yu&&e.type!==by)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function rhn(){var e,t,n,r,i,s,o,a,u,l;if(e=Lr,u=DR(),r=Lr,i=m_e(r),i===0)return u;for(r.prec=i,Tu(),t=[e,Lr],o=DR(),s=[u,r,o];(i=m_e(Lr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=c_e(a,u,o),s.push(n);r=Tu(),r.prec=i,s.push(r),t.push(Lr),n=DR(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=c_e(s[l-1].value,s[l-2],n),l-=2;return n}function H1(){var e,t,n;return e=rhn(),vi("?")&&(Tu(),t=H1(),ya(":"),n=H1(),e=Vdn(e,t,n)),e}function Qne(){const e=H1();if(vi(","))throw new Error(HA);return e}function Jne(e){Rt=e,Pe=0,ga=Rt.length,Lr=null,Qze();const t=Qne();if(Lr.type!==FO)throw new Error("Unexpect token after expression.");return t}var Jze={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Zze(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&$e("Missing arguments to clamp function."),o.length>3&&$e("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&$e("Missing arguments to if function."),o.length>3&&$e("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function ihn(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function e7e(e){e=e||{};const t=e.allowed?Nf(e.allowed):{},n=e.forbidden?Nf(e.forbidden):{},r=e.constants||Jze,i=(e.functions||Zze)(f),s=e.globalvar,o=e.fieldvar,a=Sn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(pt(p))return p;const m=d[p.type];return m==null&&$e("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Vt(n,m)?$e("Illegal identifier: "+m):Vt(r,m)?r[m]:Vt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[ihn(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&$e("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Vt(i,m)&&i[m];return y||$e("Unrecognized function: "+m),Sn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const g_e=Symbol("vega_selection_getter");function t7e(e){return(!e.getter||!e.getter[g_e])&&(e.getter=mc(e.field),e.getter[g_e]=!0),e.getter}const Zne="intersect",y_e="union",shn="vlMulti",ohn="vlPoint",v_e="or",ahn="and",yd="_vgsid_",WA=mc(yd),uhn="E",lhn="R",chn="R-E",fhn="R-LE",dhn="R-RE",e6="index:unit";function __e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=t7e(a)(e),a0(o)&&(o=fa(o)),a0(r[s])&&(r[s]=fa(r[s])),Ne(r[s])&&a0(r[s][0])&&(r[s]=r[s].map(fa)),a.type===uhn){if(Ne(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===lhn){if(!Zb(o,r[s]))return!1}else if(a.type===dhn){if(!Zb(o,r[s],!0,!1))return!1}else if(a.type===chn){if(!Zb(o,r[s],!1,!1))return!1}else if(a.type===fhn&&!Zb(o,r[s],!1,!0))return!1;return!0}function hhn(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[e6]&&r[e6].value:void 0,o=n===Zne,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=__e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=__e(t,l),o^h)return h;return a&&o}const n7e=wO(WA),phn=n7e.left,mhn=n7e.right;function ghn(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[e6]&&r[e6].value:void 0,o=n===Zne,a=WA(t),u=phn(i,a);if(u===i.length||WA(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(mhn(i,a)-u<s.size)return!1}return!0}function yhn(e,t){return e.map(n=>En(t.fields?{values:t.fields.map(r=>t7e(r)(n.datum))}:{[yd]:WA(n.datum)},t))}function vhn(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,_=s.length,w=0,x,E;w<_;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,E=c.length;x<E;++x)h=c[x],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=rz[`${y}_union`],m[d]=v(g,ht(f[x]));n&&(g=a[d]||(a[d]=[]),g.push(ht(f).reduce((b,T,A)=>(b[c[A].field]=T,b),{})))}else h=yd,p=WA(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[yd]:p}));if(t=t||y_e,o[yd]?o[yd]=rz[`${yd}_${t}`](...Object.values(o[yd])):Object.keys(o).forEach(b=>{o[b]=Object.keys(o[b]).map(T=>o[b][T]).reduce((T,A)=>T===void 0?A:rz[`${u[b]}_${t}`](T,A))}),s=Object.keys(a),n&&s.length){const b=r?ohn:shn;o[b]=t===y_e?{[v_e]:s.reduce((T,A)=>(T.push(...a[A]),T),[])}:{[ahn]:s.map(T=>({[v_e]:a[T]}))}}return o}var rz={[`${yd}_union`]:ynn,[`${yd}_intersect`]:mnn,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=fa(t[0]),r=fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=fa(t[0]),r=fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const _hn=":",bhn="@";function ere(e,t,n,r){t[0].type!==z1&&$e("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&tr(t).value,o="unit",a=bhn+o,u=_hn+i;s===Zne&&!Vt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Vt(r,u)||(r[u]=n.getData(i).tuplesRef())}function r7e(e){const t=this.context.data[e];return t?t.values.value:[]}function whn(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Ehn(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(gc).insert(t)),1}function Shn(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const UO=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},xhn=UO("format"),i7e=UO("timeFormat"),Thn=UO("utcFormat"),Chn=UO("timeParse"),Ahn=UO("utcParse"),Zk=new Date(2e3,0,1);function c8(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(Zk.setYear(2e3),Zk.setMonth(e),Zk.setDate(t),i7e.call(this,Zk,n))}function Ihn(e){return c8.call(this,e,1,"%B")}function Ohn(e){return c8.call(this,e,1,"%b")}function Phn(e){return c8.call(this,0,2+e,"%A")}function khn(e){return c8.call(this,0,2+e,"%a")}const $hn=":",Rhn="@",FW="%",s7e="$";function tre(e,t,n,r){t[0].type!==z1&&$e("First argument to data functions must be a string literal.");const i=t[0].value,s=$hn+i;if(!Vt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Nhn(e,t,n,r){t[0].type!==z1&&$e("First argument to indata must be a string literal."),t[1].type!==z1&&$e("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Rhn+s;Vt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ha(e,t,n,r){if(t[0].type===z1)b_e(n,r,t[0].value);else for(e in n.scales)b_e(n,r,e)}function b_e(e,t,n){const r=FW+n;if(!Vt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function kh(e,t){if(Sn(e))return e;if(pt(e)){const n=t.scales[e];return n&&zin(n.value)?n.value:void 0}}function Dhn(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ha,n._range=Ha,n._scale=Ha;const r=i=>"_["+(i.type===z1?st(FW+i.value):st(FW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function nre(e,t){return function(n,r,i){if(n){const s=kh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Mhn=nre("area",iln),Lhn=nre("bounds",uln),Fhn=nre("centroid",pln);function jhn(e,t){const n=kh(e,(t||this).context);return n&&n.scale()}function Bhn(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function rre(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Uhn(){return rre(this.context.dataflow,"warn",arguments)}function zhn(){return rre(this.context.dataflow,"info",arguments)}function Vhn(){return rre(this.context.dataflow,"debug",arguments)}function iz(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function jW(e){const t=E0(e),n=iz(t.r),r=iz(t.g),i=iz(t.b);return .2126*n+.7152*r+.0722*i}function Hhn(e,t){const n=jW(e),r=jW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function qhn(){const e=[].slice.call(arguments);return e.unshift({}),En(...e)}function o7e(e,t){return e===t||e!==e&&t!==t?!0:Ne(e)?Ne(t)&&e.length===t.length?Whn(e,t):!1:gt(e)&&gt(t)?a7e(e,t):!1}function Whn(e,t){for(let n=0,r=e.length;n<r;++n)if(!o7e(e[n],t[n]))return!1;return!0}function a7e(e,t){for(const n in e)if(!o7e(e[n],t[n]))return!1;return!0}function w_e(e){return t=>a7e(e,t)}function Ghn(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?gc:Ne(n)||P5(n)?n:w_e(n),c.remove(f)),t&&c.insert(t),r&&(f=w_e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Yhn(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Khn(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const E_e={};function Xhn(e,t){const n=E_e[t]||(E_e[t]=mc(t));return Ne(e)?e.map(n):n(e)}function ire(e){return Ne(e)||ArrayBuffer.isView(e)?e:null}function sre(e){return ire(e)||(pt(e)?e:null)}function Qhn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ire(e).join(...n)}function Jhn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sre(e).indexOf(...n)}function Zhn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sre(e).lastIndexOf(...n)}function epn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sre(e).slice(...n)}function tpn(e,t,n){return Sn(n)&&$e("Function argument passed to replace."),String(e).replace(t,n)}function npn(e){return ire(e).slice().reverse()}function rpn(e,t,n){return vte(e||0,t||0,n||0)}function ipn(e,t){const n=kh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function spn(e,t){const n=kh(e,(t||this).context);return n?n.copy():void 0}function opn(e,t){const n=kh(e,(t||this).context);return n?n.domain():[]}function apn(e,t,n){const r=kh(e,(n||this).context);return r?Ne(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function upn(e,t){const n=kh(e,(t||this).context);return n&&n.range?n.range():[]}function lpn(e,t,n){const r=kh(e,(n||this).context);return r?r(t):void 0}function cpn(e,t,n,r,i){e=kh(e,(i||this).context);const s=h9e(t,n);let o=e.domain(),a=o[0],u=tr(o),l=Ea;return u-a?l=t9e(e,a,u):e=(e.interpolator?Er("sequential")().interpolator(e.interpolator()):Er("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==tr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function fpn(e,t,n){const r=kh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function dpn(e){let t=null;return function(n){return n?MA(n,t=t||FE(e)):e}}const u7e=e=>e.data;function l7e(e,t){const n=r7e.call(t,e);return n.root&&n.root.lookup||{}}function hpn(e,t,n){const r=l7e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(u7e):void 0}function ppn(e,t){const n=l7e(e,this)[t];return n?n.ancestors().map(u7e):void 0}const c7e=()=>typeof window<"u"&&window||null;function mpn(){const e=c7e();return e?e.screen:{}}function gpn(){const e=c7e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function ypn(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function f7e(e,t,n){if(!e)return[];const[r,i]=e,s=new Cs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return oUe(o,s,vpn(t))}function vpn(e){let t=null;if(e){const n=ht(e.marktype),r=ht(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function _pn(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ht(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function bpn(e){return ht(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function wpn(e,t,n){const{x:r,y:i,mark:s}=n,o=new Cs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),f7e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Epn(u.x,u.y,t))}function Epn(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const GA={random(){return vc()},cumulativeNormal:D5,cumulativeLogNormal:Fee,cumulativeUniform:zee,densityNormal:Ree,densityLogNormal:Lee,densityUniform:Uee,quantileNormal:M5,quantileLogNormal:jee,quantileUniform:Vee,sampleNormal:N5,sampleLogNormal:Mee,sampleUniform:Bee,isArray:Ne,isBoolean:_y,isDate:a0,isDefined(e){return e!==void 0},isNumber:hr,isObject:gt,isRegExp:ije,isString:pt,isTuple:P5,isValid(e){return e!=null&&e===e},toBoolean:yee,toDate(e){return vee(e)},toNumber:fa,toString:_ee,indexof:Jhn,join:Qhn,lastindexof:Zhn,replace:tpn,reverse:npn,slice:epn,flush:nje,lerp:sje,merge:qhn,pad:uje,peek:tr,pluck:Xhn,span:bO,inrange:Zb,truncate:lje,rgb:E0,lab:A3,hcl:I3,hsl:T3,luminance:jW,contrast:Hhn,sequence:x_,format:xhn,utcFormat:Thn,utcParse:Ahn,utcOffset:Pje,utcSequence:Rje,timeFormat:i7e,timeParse:Chn,timeOffset:Oje,timeSequence:$je,timeUnitSpecifier:vje,monthFormat:Ihn,monthAbbrevFormat:Ohn,dayFormat:Phn,dayAbbrevFormat:khn,quarter:J8e,utcquarter:Z8e,week:bje,utcweek:Sje,dayofyear:_je,utcdayofyear:Eje,warn:Uhn,info:zhn,debug:Vhn,extent(e){return hh(e)},inScope:Bhn,intersect:f7e,clampRange:eje,pinchDistance:Yhn,pinchAngle:Khn,screen:mpn,containerSize:ypn,windowSize:gpn,bandspace:rpn,setdata:Ehn,pathShape:dpn,panLinear:Y8e,panLog:K8e,panPow:X8e,panSymlog:Q8e,zoomLinear:fee,zoomLog:dee,zoomPow:uL,zoomSymlog:hee,encode:Shn,modify:Ghn,lassoAppend:_pn,lassoPath:bpn,intersectLasso:wpn},Spn=["view","item","group","xy","x","y"],xpn="event.vega.",d7e="this.",ore={},h7e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${st(s7e+e)}]`,functions:Tpn,constants:Jze,visitors:ore},BW=e7e(h7e);function Tpn(e){const t=Zze(e);Spn.forEach(n=>t[n]=xpn+n);for(const n in GA)t[n]=d7e+n;return En(t,Dhn(e,GA,ore)),t}function ds(e,t,n){return arguments.length===1?GA[e]:(GA[e]=t,n&&(ore[e]=n),BW&&(BW.functions[e]=d7e+e),this)}ds("bandwidth",ipn,Ha);ds("copy",spn,Ha);ds("domain",opn,Ha);ds("range",upn,Ha);ds("invert",apn,Ha);ds("scale",lpn,Ha);ds("gradient",cpn,Ha);ds("geoArea",Mhn,Ha);ds("geoBounds",Lhn,Ha);ds("geoCentroid",Fhn,Ha);ds("geoShape",fpn,Ha);ds("geoScale",jhn,Ha);ds("indata",whn,Nhn);ds("data",r7e,tre);ds("treePath",hpn,tre);ds("treeAncestors",ppn,tre);ds("vlSelectionTest",hhn,ere);ds("vlSelectionIdTest",ghn,ere);ds("vlSelectionResolve",vhn,ere);ds("vlSelectionTuples",yhn);function gh(e,t){const n={};let r;try{e=pt(e)?e:st(e)+"",r=Jne(e)}catch{$e("Expression parse error: "+e)}r.visit(s=>{if(s.type!==qze)return;const o=s.callee.name,a=h7e.visitors[o];a&&a(o,s.arguments,t,n)});const i=BW(r);return i.globals.forEach(s=>{const o=s7e+s;!Vt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:En({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Cpn(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const Apn=Nf(["rule"]),S_e=Nf(["group","image","rect"]);function Ipn(e,t){let n="";return Apn[t]||(e.x2&&(e.x?(S_e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(S_e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function are(e){return(e+"").toLowerCase()}function Opn(e){return are(e)==="operator"}function Ppn(e){return are(e)==="collect"}function hT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function kpn(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var $pn={operator:(e,t)=>hT(e,["_"],t.code),parameter:(e,t)=>hT(e,["datum","_"],t.code),event:(e,t)=>hT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return hT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+st(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Ipn(r,n),i+="return m;",hT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(st).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),kpn(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function Rpn(e){const t=this;Opn(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Npn(e){const t=this;if(e.params){const n=t.get(e.id);n||$e("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Dpn(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Ne(i)?i.map(s=>x_e(s,n,t)):x_e(i,n,t)}return t}function x_e(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=T_e.length,s;r<i;++r)if(s=T_e[r],Vt(e,s.key))return s.parse(e,t,n);return e}var T_e=[{key:"$ref",parse:Mpn},{key:"$key",parse:Fpn},{key:"$expr",parse:Lpn},{key:"$field",parse:jpn},{key:"$encode",parse:Upn},{key:"$compare",parse:Bpn},{key:"$context",parse:zpn},{key:"$subflow",parse:Vpn},{key:"$tupleid",parse:Hpn}];function Mpn(e,t){return t.get(e.$ref)||$e("Operator not defined: "+e.$ref)}function Lpn(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Ku(t.parameterExpression(e.$expr),e.$fields))}function Fpn(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=gee(e.$key,e.$flat,t.expr.codegen))}function jpn(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=mc(e.$field,e.$name,t.expr.codegen))}function Bpn(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ht(e.$compare).map(i=>i&&i.$tupleid?Ut:i);return t.fn[n]||(t.fn[n]=pee(r,e.$order,t.expr.codegen))}function Upn(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Ku(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function zpn(e,t){return t}function Vpn(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function Hpn(){return Ut}function qpn(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&$e("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Wpn(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||$e("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const Gpn={skip:!0};function Ypn(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function Kpn(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],Gpn)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(gc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function p7e(e,t,n,r){return new m7e(e,t,n,r)}function m7e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||$pn,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function C_e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}m7e.prototype=C_e.prototype={fork(){const e=new C_e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Ppn(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[are(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Cpn,parseOperator:Rpn,parseOperatorParameters:Npn,parseParameters:Dpn,parseStream:qpn,parseUpdate:Wpn,getState:Ypn,setState:Kpn};function Xpn(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),g7e(t,e.description()))}function g7e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Qpn(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const sz="default";function Jpn(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:sz,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?pt(i)?i:i.user:sz,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return pt(r)||(i=r.item,r=r.user),UW(e,r&&r!==sz?r:i||r),i},{cursor:t})}function UW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function t6(e,t){var n=e._runtime.data;return Vt(n,t)||$e("Unrecognized data set: "+t),n[t]}function Zpn(e,t){return arguments.length<2?t6(this,e).values.value:f8.call(this,e,C_().remove(gc).insert(t))}function f8(e,t){Zje(t)||$e("Second argument to changes must be a changeset.");const n=t6(this,e);return n.modified=!0,this.pulse(n.input,t)}function emn(e,t){return f8.call(this,e,C_().insert(t))}function tmn(e,t){return f8.call(this,e,C_().remove(t))}function y7e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function v7e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function d8(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function nmn(e){var t=d8(e),n=y7e(e),r=v7e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function rmn(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=d8(e),o=t.changedTouches?t.changedTouches[0]:t,s=Z5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=imn(e,n,s),t}function imn(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Sa(e),item:Sa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const A_e="view",smn="timer",omn="window",amn={trap:!1};function umn(e){const t=En({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Ne(r[s])&&(r[s]=Nf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function _7e(e,t,n,r){e._eventListeners.push({type:n,sources:ht(t),handler:r})}function lmn(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function e$(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function cmn(e,t,n){var r=this,i=new R5(n),s=function(l,c){r.runAsync(null,()=>{e===A_e&&lmn(r,t)&&l.preventDefault(),i.receive(rmn(r,l,c))})},o;if(e===smn)e$(r,"timer",t)&&r.timer(s,t);else if(e===A_e)e$(r,"view",t)&&r.addEventListener(t,s,amn);else if(e===omn?e$(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&e$(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);_7e(r,o,t,s)}return i}function I_e(e){return e.item}function O_e(e){return e.item.mark.source}function P_e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function fmn(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",I_e),O_e,P_e(e)),this.on(this.events("view","pointerout",I_e),O_e,P_e(t)),this}function dmn(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this}function bl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const hmn="vega-bind",pmn="vega-bind-name",mmn="vega-bind-radio";function gmn(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=mee(r.debounce,i.update))),(r.input==null&&r.element?ymn:_mn)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function ymn(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),_7e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(vmn(i))}}function vmn(e){return typeof Event<"u"?new Event(e):{type:e}}function _mn(e,t,n,r){const i=r.signal(n.signal),s=bl("div",{class:hmn}),o=n.input==="radio"?s:s.appendChild(bl("label"));o.appendChild(bl("span",{class:pmn},n.name||n.signal)),t.appendChild(s);let a=bmn;switch(n.input){case"checkbox":a=wmn;break;case"select":a=Emn;break;case"radio":a=Smn;break;case"range":a=xmn;break}a(e,o,n,i)}function bmn(e,t,n,r){const i=bl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function wmn(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=bl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Emn(e,t,n,r){const i=bl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};n6(o,r)&&(u.selected=!0),i.appendChild(bl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(n6(n.options[a],o)){i.selectedIndex=a;return}}}function Smn(e,t,n,r){const i=bl("span",{class:mmn}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};n6(o,r)&&(u.checked=!0);const l=bl("input",u);l.addEventListener("change",()=>e.update(o));const c=bl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)n6(a[l].value,o)&&(a[l].checked=!0)}}function xmn(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||$A(s,i,100),a=bl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=bl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function n6(e,t){return e===t||e+""==t+""}function b7e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,y7e(e),v7e(e),d8(e),i,s).background(e.background())}function ure(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function Tmn(e,t,n,r){const i=new r(e.loader(),ure(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,d8(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Cmn(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=t8(r);e=n._el=e?oz(n,e,!0):null,Xpn(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||H0,a=e?s.renderer:s.headless;return n._renderer=a?b7e(n,n._renderer,e,a):null,n._handler=Tmn(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=oz(n,t,!0):e.appendChild(bl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=oz(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{gmn(n,u.element||t,u)})),n}function oz(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const pT=e=>+e||0,Amn=e=>({top:e,bottom:e,left:e,right:e});function k_e(e){return gt(e)?{top:pT(e.top),bottom:pT(e.bottom),left:pT(e.left),right:pT(e.right)}:Amn(pT(e))}async function lre(e,t,n,r){const i=t8(t),s=i&&i.headless;return s||$e("Unrecognized renderer type: "+t),await e.runAsync(),b7e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Imn(e,t){e!==Dg.Canvas&&e!==Dg.SVG&&e!==Dg.PNG&&$e("Unrecognized image type: "+e);const n=await lre(this,e,t);return e===Dg.SVG?Omn(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Omn(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Pmn(e,t){return(await lre(this,Dg.Canvas,e,t)).canvas()}async function kmn(e){return(await lre(this,Dg.SVG,e)).svg()}function $mn(e,t,n){return p7e(e,NE,GA,n).parse(t)}function Rmn(e){var t=this._runtime.scales;return Vt(t,e)||$e("Unrecognized scale or projection: "+e),t[e].value}var w7e="width",E7e="height",cre="padding",$_e={skip:!0};function S7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===cre?r.left+r.right:0)}function x7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===cre?r.top+r.bottom:0)}function Nmn(e){var t=e._signals,n=t[w7e],r=t[E7e],i=t[cre];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=S7e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=x7e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Dmn(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(w7e,n,$_e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(E7e,r,$_e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Mmn(e){return this._runtime.getState(e||{data:Lmn,signals:Fmn,recurse:!0})}function Lmn(e,t){return t.modified&&Ne(t.input.value)&&!e.startsWith("_:vega:_")}function Fmn(e,t){return!(e==="parent"||t instanceof NE.proxy)}function jmn(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Bmn(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(rAt(n,t))}function Umn(e,t,n,r){const i=e.element();i&&i.setAttribute("title",zmn(r))}function zmn(e){return e==null?"":Ne(e)?T7e(e):gt(e)&&!a0(e)?Vmn(e):e+""}function Vmn(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ne(n)?T7e(n):C7e(n))}).join(`
`)}function T7e(e){return"["+e.map(C7e).join(", ")+"]"}function C7e(e){return Ne(e)?"[]":gt(e)&&!a0(e)?"{}":e}function Hmn(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function A7e(e,t){const n=this;if(t=t||{},Rw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=En({},e.locale,t.locale);n.locale(Vje(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Dg.Canvas,n._scenegraph=new Yte;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Umn,n._redraw=!0,n._handler=new H0().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=umn(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=$mn(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:En({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=S7e(n,n._width),n._viewHeight=x7e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Nmn(n),Qpn(n),Jpn(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function t$(e,t){return Vt(e._signals,t)?e._signals[t]:$e("Unrecognized signal name: "+st(t))}function I7e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function R_e(e,t,n,r){let i=I7e(n,r);return i||(i=ure(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function N_e(e,t,n){const r=I7e(t,n);return r&&t._targets.remove(r),e}nt(A7e,Rw,{async evaluate(e,t,n){if(await Rw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,nmn(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&ER(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&g7e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=t$(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",k_e(e)):k_e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(t8(e)||$e("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Rw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(t$(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Dmn,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=ure(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return R_e(this,e,t$(this,e),t)},removeSignalListener(e,t){return N_e(this,t$(this,e),t)},addDataListener(e,t){return R_e(this,e,t6(this,e).values,t)},removeDataListener(e,t){return N_e(this,t6(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=UW(this,null);this._globalCursor=!!e,t&&UW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Bmn,events:cmn,finalize:dmn,hover:fmn,data:Zpn,change:f8,insert:emn,remove:tmn,scale:Rmn,initialize:Cmn,toImageURL:Imn,toCanvas:Pmn,toSVG:kmn,getState:Mmn,setState:jmn,_watchPixelRatio:Hmn});const qmn="view",r6="[",i6="]",O7e="{",P7e="}",Wmn=":",k7e=",",Gmn="@",Ymn=">",Kmn=/[[\]{}]/,Xmn={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let $7e,R7e;function wy(e,t,n){return $7e=t||qmn,R7e=n||Xmn,N7e(e.trim()).map(zW)}function Qmn(e){return R7e[e]}function mC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function N7e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=mC(e,i,k7e,r6+O7e,i6+P7e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function zW(e){return e[0]==="["?Jmn(e):Zmn(e)}function Jmn(e){const t=e.length;let n=1,r;if(n=mC(e,n,i6,r6,i6),n===t)throw"Empty between selector: "+e;if(r=N7e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Ymn)throw"Expected '>' after between selector: "+e;r=r.map(zW);const i=zW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Zmn(e){const t={source:$7e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===P7e){if(a=e.lastIndexOf(O7e),a>=0){try{r=egn(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===Gmn&&(i=++a),u=mC(e,a,Wmn),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=mC(e,a,r6),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=mC(e,a,i6),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==r6)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Kmn.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Qmn(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function egn(e){const t=e.split(k7e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function tgn(e){return gt(e)?e:{type:e||"pad"}}const mT=e=>+e||0,ngn=e=>({top:e,bottom:e,left:e,right:e});function rgn(e){return gt(e)?e.signal?e:{top:mT(e.top),bottom:mT(e.bottom),left:mT(e.left),right:mT(e.right)}:ngn(mT(e))}const oo=e=>gt(e)&&!Ne(e)?En({},e):{value:e};function D_e(e,t,n,r){return n!=null?(gt(n)&&!Ne(n)||Ne(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function jo(e,t,n){for(const r in t)D_e(e,r,t[r]);for(const r in n)D_e(e,r,n[r],"update")}function sx(e,t,n){for(const r in t)n&&Vt(n,r)||(e[r]=En(e[r]||{},t[r]));return e}function Pb(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const fre="mark",dre="frame",hre="scope",ign="axis",sgn="axis-domain",ogn="axis-grid",agn="axis-label",ugn="axis-tick",lgn="axis-title",cgn="legend",fgn="legend-band",dgn="legend-entry",hgn="legend-gradient",D7e="legend-label",pgn="legend-symbol",mgn="legend-title",ggn="title",ygn="title-text",vgn="title-subtitle";function _gn(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Pb(u,e)&&az(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===dre?i.group:n===fre?En({},i.mark,i[t]):null;for(u in c)l=Pb(u,e)||(u==="fill"||u==="stroke")&&(Pb("fill",e)||Pb("stroke",e)),l||az(s,u,c[u]);ht(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Pb(h,e)||az(s,h,d[h])}),e=En({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=En(o,e.enter),a&&(e.update=En(a,e.update)),e}function az(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const M7e=e=>pt(e)?st(e):e.signal?`(${e.signal})`:L7e(e);function h8(e){if(e.gradient!=null)return wgn(e);let t=e.signal?`(${e.signal})`:e.color?bgn(e.color):e.field!=null?L7e(e.field):e.value!==void 0?st(e.value):void 0;return e.scale!=null&&(t=Egn(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${MR(e.exponent)})`),e.mult!=null&&(t+=`*${MR(e.mult)}`),e.offset!=null&&(t+=`+${MR(e.offset)}`),e.round&&(t=`round(${t})`),t}const n$=(e,t,n,r)=>`(${e}(${[t,n,r].map(h8).join(",")})+'')`;function bgn(e){return e.c?n$("hcl",e.h,e.c,e.l):e.h||e.s?n$("hsl",e.h,e.s,e.l):e.l||e.a?n$("lab",e.l,e.a,e.b):e.r||e.g||e.b?n$("rgb",e.r,e.g,e.b):null}function wgn(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:st(n));for(;t.length&&tr(t)==null;)t.pop();return t.unshift(M7e(e.gradient)),`gradient(${t.join(",")})`}function MR(e){return gt(e)?"("+h8(e)+")":e}function L7e(e){return F7e(gt(e)?e:{datum:e})}function F7e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):$e("Invalid field reference: "+st(e));return e.signal||(r=pt(r)?Ah(r).map(st).join("]["):F7e(r)),t+"["+r+"]"}function Egn(e,t){const n=M7e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+MR(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Sgn(e){let t="";return e.forEach(n=>{const r=h8(n);t+=n.test?`(${n.test})?${r}:`:r}),tr(t)===":"&&(t+="null"),t}function j7e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=_gn(e,t,n,r,i.config);for(const a in e)o[a]=xgn(e[a],t,s,i);return s}function xgn(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Cgn(Tgn(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Tgn(e){return Ne(e)?Sgn(e):h8(e)}function Cgn(e,t,n,r){const i=gh(e,t);return i.$fields.forEach(s=>r[s]=1),En(n,i.$params),i.$expr}const Agn="outer",Ign=["value","update","init","react","bind"];function M_e(e,t){$e(e+' for "outer" push: '+st(t))}function B7e(e,t){const n=e.name;if(e.push===Agn)t.signals[n]||M_e("No prior signal definition",n),Ign.forEach(r=>{e[r]!==void 0&&M_e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function VW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function p8(e,t,n,r){return new VW(e,t,n,r)}function s6(e,t){return p8("operator",e,t)}function Bt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function YA(e,t){return t?{$field:e,$name:t}:{$field:e}}const HW=YA("key");function L_e(e,t){return{$compare:e,$order:t}}function Ogn(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Pgn="ascending",kgn="descending";function $gn(e){return gt(e)?(e.order===kgn?"-":"+")+m8(e.op,e.field):""}function m8(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const pre="scope",qW="view";function zs(e){return e&&e.signal}function Rgn(e){return e&&e.expr}function LR(e){if(zs(e))return!0;if(gt(e)){for(const t in e)if(LR(e[t]))return!0}return!1}function ef(e,t){return e??t}function u1(e){return e&&e.signal||e}const F_e="timer";function KA(e,t){return(e.merge?Dgn:e.stream?Mgn:e.type?Lgn:$e("Invalid stream specification: "+st(e)))(e,t)}function Ngn(e){return e===pre?qW:e||qW}function Dgn(e,t){const n=e.merge.map(i=>KA(i,t)),r=mre({merge:n},e,t);return t.addStream(r).id}function Mgn(e,t){const n=KA(e.stream,t),r=mre({stream:n},e,t);return t.addStream(r).id}function Lgn(e,t){let n;e.type===F_e?(n=t.event(F_e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Ngn(e.source),e.type);const r=mre({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function mre(e,t,n){let r=t.between;return r&&(r.length!==2&&$e('Stream "between" parameter must have 2 entries: '+st(t)),e.between=[KA(r[0],n),KA(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Fgn(t.marktype,t.markname,t.markrole)),t.source===pre&&r.push("inScope(event.item)"),r.length&&(e.filter=gh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Fgn(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const jgn={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Bgn(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||$e("Signal update missing events specification."),pt(s)&&(s=wy(s,t.isSubscope()?pre:qW)),s=ht(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[zgn(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&$e("Signal encode and update are mutually exclusive."),o="encode(item(),"+st(r)+")"),i.update=pt(o)?gh(o,t):o.expr!=null?gh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:jgn,$params:{$value:t.signalRef(o.signal)}}:$e("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(En(Ugn(u,t),i)))}function Ugn(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):KA(e,t)}}function zgn(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Vgn(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?$e("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=gh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Bgn(i,t,n.id))}const Xr=e=>(t,n,r)=>p8(e,n,t||void 0,r),U7e=Xr("aggregate"),Hgn=Xr("axisticks"),z7e=Xr("bound"),qf=Xr("collect"),j_e=Xr("compare"),qgn=Xr("datajoin"),V7e=Xr("encode"),Wgn=Xr("expression"),Ggn=Xr("facet"),Ygn=Xr("field"),Kgn=Xr("key"),Xgn=Xr("legendentries"),Qgn=Xr("load"),Jgn=Xr("mark"),Zgn=Xr("multiextent"),e0n=Xr("multivalues"),t0n=Xr("overlap"),n0n=Xr("params"),H7e=Xr("prefacet"),r0n=Xr("projection"),i0n=Xr("proxy"),s0n=Xr("relay"),q7e=Xr("render"),o0n=Xr("scale"),O_=Xr("sieve"),a0n=Xr("sortitems"),W7e=Xr("viewlayout"),u0n=Xr("values");let l0n=0;const G7e={min:"min",max:"max",count:"sum"};function c0n(e,t){const n=e.type||"linear";KBe(n)||$e("Unrecognized scale type: "+st(n)),t.addScale(e.name,{type:n,domain:void 0})}function f0n(e,t){const n=t.getScale(e.name).params;let r;n.domain=Y7e(e.domain,e,t),e.range!=null&&(n.range=X7e(e,t,n)),e.interpolate!=null&&w0n(e.interpolate,n),e.nice!=null&&(n.nice=b0n(e.nice,t)),e.bins!=null&&(n.bins=_0n(e.bins,t));for(r in e)Vt(n,r)||r==="name"||(n[r]=ic(e[r],t))}function ic(e,t){return gt(e)?e.signal?t.signalRef(e.signal):$e("Unsupported object: "+st(e)):e}function FR(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ic(n,t))}function g8(e){$e("Can not find data set: "+st(e))}function Y7e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&$e("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ne(e)?d0n:e.fields?p0n:h0n)(e,t,n)}function d0n(e,t,n){return e.map(r=>ic(r,n))}function h0n(e,t,n){const r=n.getData(e.data);return r||g8(e.data),LE(t.type)?r.valuesRef(n,e.field,K7e(e.sort,!1)):JBe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function p0n(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=pt(o)?{data:r,field:o}:Ne(o)||o.signal?m0n(o,n):o,s.push(o),s),[]);return(LE(t.type)?g0n:JBe(t.type)?y0n:v0n)(e,n,i)}function m0n(e,t){const n="_:vega:_"+l0n++,r=qf({});if(Ne(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+st(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,O_({})]),{data:n,field:"data"}}function g0n(e,t,n){const r=K7e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||g8(l.data),c.countsRef(t,l.field,r)}),a={groupby:HW,pulse:o};r&&(i=r.op||"count",s=r.field?m8(i,r.field):"count",a.ops=[G7e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(U7e(a));const u=t.add(qf({pulse:Bt(i)}));return s=t.add(u0n({field:HW,sort:t.sortRef(r),pulse:Bt(u)})),Bt(s)}function K7e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?$e("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!G7e[e.op]&&$e("Multiple domain scales can not be sorted using "+e.op)),e}function y0n(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||g8(i.data),s.domainRef(t,i.field)});return Bt(t.add(e0n({values:r})))}function v0n(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||g8(i.data),s.extentRef(t,i.field)});return Bt(t.add(Zgn({extents:r})))}function _0n(e,t){return e.signal||Ne(e)?FR(e,t):t.objectProperty(e)}function b0n(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:ic(e.interval),step:ic(e.step)}:ic(e)}function w0n(e,t){t.interpolate=ic(e.type||e),e.gamma!=null&&(t.interpolateGamma=ic(e.gamma))}function X7e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(pt(i)){if(r&&Vt(r,i))return e=En({},e,{range:r[i]}),X7e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=LE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:$e("Unrecognized scale range value: "+st(i))}else if(i.scheme){n.scheme=Ne(i.scheme)?FR(i.scheme,t):ic(i.scheme,t),i.extent&&(n.schemeExtent=FR(i.extent,t)),i.count&&(n.schemeCount=ic(i.count,t));return}else if(i.step){n.rangeStep=ic(i.step,t);return}else{if(LE(e.type)&&!Ne(i))return Y7e(i,e,t);Ne(i)||$e("Unsupported range type: "+st(i))}return i.map(s=>(Ne(s)?FR:ic)(s,t))}function E0n(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=WW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=WW(n[i],i,t));t.addProjection(e.name,r)}function WW(e,t,n){return Ne(e)?e.map(r=>WW(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:$e("Unsupported parameter object: "+st(e)):e}const Wf="top",ox="left",ax="right",W0="bottom",Q7e="center",S0n="vertical",x0n="start",T0n="middle",C0n="end",GW="index",gre="label",A0n="offset",HE="perc",I0n="perc2",lc="value",zO="guide-label",yre="guide-title",O0n="group-title",P0n="group-subtitle",B_e="symbol",jR="gradient",YW="discrete",KW="size",k0n="shape",$0n="fill",R0n="stroke",N0n="strokeWidth",D0n="strokeDash",M0n="opacity",vre=[KW,k0n,$0n,R0n,N0n,D0n,M0n],VO={name:1,style:1,interactive:1},lr={value:0},cc={value:1},y8="group",J7e="rect",_re="rule",L0n="symbol",P_="text";function XA(e){return e.type=y8,e.interactive=e.interactive||!1,e}function Xu(e,t){const n=(r,i)=>ef(e[r],ef(t[r],i));return n.isVertical=r=>S0n===ef(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ef(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ef(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ef(e.columns,ef(t.columns,+n.isVertical(!0))),n}function Z7e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function F0n(e,t,n){const r=t.config.style[n];return r&&r[e]}function v8(e,t,n){return`item.anchor === '${x0n}' ? ${e} : item.anchor === '${C0n}' ? ${t} : ${n}`}const bre=v8(st(ox),st(ax),st(Q7e));function j0n(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function eVe(e,t){return t?e?gt(e)?Object.assign({},e,{offset:eVe(e.offset,t)}):{value:e,offset:t}:t:e}function Pl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=sx(e.encode,t,VO)):e.interactive=!1,e}function B0n(e,t,n,r){const i=Xu(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:lr,x:lr,y:lr,width:oo(f),height:oo(d)},update:En({},u,{opacity:cc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:lr}};return jo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Pl({type:J7e,role:hgn,encode:h},r)}function U0n(e,t,n,r,i){const s=Xu(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:lr,fill:{scale:t,field:lc}};p[l]={signal:h+"datum."+HE,mult:u},p[c]=lr,p[f]={signal:h+"datum."+I0n,mult:u},p[d]=oo(a);const m={enter:p,update:En({},p,{opacity:cc}),exit:{opacity:lr}};return jo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Pl({type:J7e,role:fgn,key:lc,from:i,encode:m},r)}const z0n=`datum.${HE}<=0?"${ox}":datum.${HE}>=1?"${ax}":"${Q7e}"`,V0n=`datum.${HE}<=0?"${W0}":datum.${HE}>=1?"${Wf}":"${T0n}"`;function U_e(e,t,n,r){const i=Xu(e,t),s=i.isVertical(),o=oo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:lr},update:c={opacity:cc,text:{field:gre}},exit:{opacity:lr}};return jo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ef(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:V0n},f="y",d="x",h="1-"):(l.align=c.align={signal:z0n},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+HE,mult:a},l[d]=c[d]=o,o.offset=ef(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+GW}:void 0,Pl({type:P_,role:D7e,style:zO,key:lc,from:r,encode:p,overlap:u},n)}function H0n(e,t,n,r,i){const s=Xu(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${A0n} : datum.${KW}`,h=l?oo(l):{field:KW},p=`datum.${GW}`,m=`max(1, ${i})`;let g,y,v,_,w;h.mult=.5,g={enter:y={opacity:lr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:cc,x:y.x,y:y.y},exit:{opacity:lr}};let x=null,E=null;e.fill||(x=t.symbolBaseFillColor,E=t.symbolBaseStrokeColor),jo(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",E),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),vre.forEach(C=>{e[C]&&(v[C]=y[C]={scale:e[C],field:lc})});const b=Pl({type:L0n,role:pgn,key:lc,from:f,clip:l?!0:void 0,encode:g},n.symbols),T=oo(c);T.offset=s("labelOffset"),g={enter:y={opacity:lr,x:{signal:d,offset:T},y:h},update:v={opacity:cc,text:{field:gre},x:y.x,y:y.y},exit:{opacity:lr}},jo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Pl({type:P_,role:D7e,style:zO,key:lc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:lr,height:l?oo(l):lr,opacity:lr},exit:{opacity:lr},update:v={opacity:cc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${_}`,v.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:GW}},XA({role:hre,from:r,encode:sx(g,o,VO),marks:[b,A],name:u,interactive:a,sort:w})}function q0n(e,t){const n=Xu(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const wre='item.orient === "left"',Ere='item.orient === "right"',_8=`(${wre} || ${Ere})`,W0n=`datum.vgrad && ${_8}`,G0n=v8('"top"','"bottom"','"middle"'),Y0n=v8('"right"','"left"','"center"'),K0n=`datum.vgrad && ${Ere} ? (${Y0n}) : (${_8} && !(datum.vgrad && ${wre})) ? "left" : ${bre}`,X0n=`item._anchor || (${_8} ? "middle" : "start")`,Q0n=`${W0n} ? (${wre} ? -90 : 90) : 0`,J0n=`${_8} ? (datum.vgrad ? (${Ere} ? "bottom" : "top") : ${G0n}) : "top"`;function Z0n(e,t,n,r){const i=Xu(e,t),s={enter:{opacity:lr},update:{opacity:cc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:lr}};return jo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:X0n},angle:{signal:Q0n},align:{signal:K0n},baseline:{signal:J0n},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Pl({type:P_,role:mgn,style:yre,from:r,encode:s},n)}function eyn(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+z_e(e.path)+")":e.sphere&&(n="geoShape("+z_e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function z_e(e){return gt(e)&&e.signal?e.signal:st(e)}function tVe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===y8?hre:t||fre}function tyn(e){return{marktype:e.type,name:e.name||void 0,role:e.role||tVe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function nyn(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Sre(e,t){const n=nBe(e.type);n||$e("Unrecognized transform type: "+st(e.type));const r=p8(n.type.toLowerCase(),null,nVe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function nVe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=ryn(o,t,n)}return r}function ryn(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return iyn(e,t,n);if(i===void 0){e.required&&$e("Missing required "+st(t.type)+" parameter: "+st(e.name));return}else{if(r==="param")return syn(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!zs(i)?i.map(s=>V_e(e,s,n)):V_e(e,i,n)}function V_e(e,t,n){const r=e.type;if(zs(t))return q_e(r)?$e("Expression references can not be signals."):uz(r)?n.fieldRef(t):W_e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||uz(r);return i&&oyn(t)?n.exprRef(t.expr,t.as):i&&ayn(t)?YA(t.field,t.as):q_e(r)?gh(t,n):uyn(r)?Bt(n.getData(t).values):uz(r)?YA(t):W_e(r)?n.compareRef(t):t}}function iyn(e,t,n){return pt(t.from)||$e('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function syn(e,t,n){const r=t[e.name];return e.array?(Ne(r)||$e("Expected an array of sub-parameters. Instead: "+st(r)),r.map(i=>H_e(e,i,n))):H_e(e,r,n)}function H_e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||$e("Unsupported parameter: "+st(t));const s=En(nVe(i,t,n),i.key);return Bt(n.add(n0n(s)))}const oyn=e=>e&&e.expr,ayn=e=>e&&e.field,uyn=e=>e==="data",q_e=e=>e==="expr",uz=e=>e==="field",W_e=e=>e==="compare";function lyn(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||$e("Only group marks can be faceted."),r.field!=null?o=a=BR(r,n):(e.data?a=Bt(n.getData(e.data).aggregate):(s=Sre(En({type:"aggregate",groupby:ht(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=BR(r,n),o=a=Bt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Bt(n.add(qf(null,[{}]))),o||(o=BR(e,n)),{key:i,pulse:o,parent:a}}function BR(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Bt(t.getData(e.data).output)}function q1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}q1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Bt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new q1(e,s,i,r,o)};function rVe(e){return pt(e)?e:null}function G_e(e,t,n){const r=m8(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function gT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=$gn(s);let l=rVe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:HW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Bt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(p8(r,void 0,d)),o&&(t.index[i]=f),c=Bt(f),l!=null&&(a[l]=c)}return c}q1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=rVe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&G_e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Bt(r.output)},n&&n.field&&G_e(e,u,n),a=e.add(U7e(u)),o=e.add(qf({pulse:Bt(a)})),o={agg:a,ref:Bt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Bt(this.values)},extentRef(e,t){return gT(e,this,"extent","extent",t,!1)},domainRef(e,t){return gT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return gT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return gT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return gT(e,this,"indata","tupleindex",t,!0,!0)}};function cyn(e,t,n){const r=e.from.facet,i=r.name,s=BR(r,t);let o;r.name||$e("Facet must have a name: "+st(r)),r.data||$e("Facet must reference a data set: "+st(r)),r.field?o=t.add(H7e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Ggn({key:t.keyRef(r.groupby),group:Bt(t.proxy(n.parent)),pulse:s})):$e("Facet must specify groupby or field: "+st(r));const a=t.fork(),u=a.add(qf()),l=a.add(O_({pulse:Bt(u)}));a.addData(i,new q1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function fyn(e,t,n){const r=t.add(H7e({pulse:n.pulse})),i=t.fork();i.add(O_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function iVe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(s6()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=gh(l,t);u.update=c.$expr,u.params=c.$params}function b8(e,t){const n=tVe(e),r=e.type===y8,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===hre||n===dre,a,u,l,c,f,d,h;const p=n===fre||o||i,m=lyn(e.from,r,t);u=t.add(qgn({key:m.key||(e.key?YA(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Bt(u);u=l=t.add(qf({pulse:g})),u=t.add(Jgn({markdef:tyn(e),interactive:nyn(e.interactive,t),clip:eyn(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Bt(u)}));const y=Bt(u);u=c=t.add(V7e(j7e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(E=>{const b=Sre(E,t),T=b.metadata;(T.generates||T.changes)&&$e("Mark transforms should not generate new data."),T.nomod||(c.params.mod=!0),b.params.pulse=Bt(u),t.add(u=b)}),e.sort&&(u=t.add(a0n({sort:t.compareRef(e.sort),pulse:Bt(u)})));const v=Bt(u);(i||o)&&(o=t.add(W7e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Bt(o));const _=t.add(z7e({mark:y,pulse:d||v}));h=Bt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?cyn(e,t,m):p?fyn(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=dyn(s,h,t));const w=t.add(q7e({pulse:h})),x=t.add(O_({pulse:Bt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new q1(t,l,w,x)),e.on&&e.on.forEach(E=>{(E.insert||E.remove||E.toggle)&&$e("Marks only support modify triggers."),iVe(E,t,f)}))}function dyn(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:zs(s)?n.signalRef(s.signal):s,method:zs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=zs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Bt(n.add(t0n(o)))}function hyn(e,t){const n=t.config.legend,r=e.encode||{},i=Xu(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;vre.forEach(_=>e[_]?(l[_]=e[_],c=c||e[_]):0),c||$e("Missing valid scale for legend.");const p=pyn(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Bt(t.add(qf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Bt(t.add(Xgn(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===jR?(h=[B0n(e,c,n,r.gradient),U_e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${u1(i.gradientLength())})/100))`)):p===YW?h=[U0n(e,c,n,r.gradient,v),U_e(e,n,r.labels,v)]:(f=q0n(e,n),h=[H0n(e,n,r,v,u1(f.columns))],d.size=yyn(e,t,h[0].marks)),h=[XA({role:dgn,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(Z0n(e,n,r.title,g)),b8(XA({role:cgn,from:g,encode:sx(gyn(i,e,n),s,VO),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function pyn(e,t){let n=e.type||B_e;return!e.type&&myn(e)===1&&(e.fill||e.stroke)&&(n=Ste(t)?jR:Uq(t)?YW:B_e),n!==jR?n:Uq(t)?YW:jR}function myn(e){return vre.reduce((t,n)=>t+(e[n]?1:0),0)}function gyn(e,t,n){const r={enter:{},update:{}};return jo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function yyn(e,t,n){const r=u1(Y_e("size",e,n)),i=u1(Y_e("strokeWidth",e,n)),s=u1(vyn(n[1].encode,t,zO));return gh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Y_e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Z7e(e,n[0].encode)}function vyn(e,t,n){return Z7e("fontSize",e)||F0n("fontSize",t,n)}const _yn=`item.orient==="${ox}"?-90:item.orient==="${ax}"?90:0`;function byn(e,t){e=pt(e)?{text:e}:e;const n=Xu(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Bt(t.add(qf(null,[l])));return u.push(Syn(e,n,wyn(e),c)),e.subtitle&&u.push(xyn(e,n,r.subtitle,c)),b8(XA({role:ggn,from:c,encode:Eyn(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function wyn(e){const t=e.encode;return t&&t.title||En({name:e.name,interactive:e.interactive,style:e.style},t)}function Eyn(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:bre},angle:{signal:_yn},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),sx(n,t,VO)}function Syn(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Pl({type:P_,role:ygn,style:O0n,from:r,encode:o},n)}function xyn(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return jo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Pl({type:P_,role:vgn,style:P0n,from:r,encode:o},n)}function Tyn(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Sre(r,t))}),e.on&&e.on.forEach(r=>{iVe(r,t,e.name)}),t.addDataPipeline(e.name,Cyn(e,t,n))}function Cyn(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?zs(e.values)||LR(e.format)?(r.push(K_e(t,e)),r.push(i=Uy())):r.push(i=Uy({$ingest:e.values,$format:e.format})):e.url?LR(e.url)||LR(e.format)?(r.push(K_e(t,e)),r.push(i=Uy())):r.push(i=Uy({$request:e.url,$format:e.format})):e.source&&(i=a=ht(e.source).map(d=>Bt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Uy()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=s0n({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Uy())),i||r.push(Uy()),r.push(O_({})),r}function Uy(e){const t=qf({},e);return t.metadata={source:!0},t}function K_e(e,t){return Qgn({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const sVe=e=>e===W0||e===Wf,w8=(e,t,n)=>zs(e)?Pyn(e.signal,t,n):e===ox||e===Wf?t:n,ao=(e,t,n)=>zs(e)?Iyn(e.signal,t,n):sVe(e)?t:n,Tf=(e,t,n)=>zs(e)?Oyn(e.signal,t,n):sVe(e)?n:t,oVe=(e,t,n)=>zs(e)?kyn(e.signal,t,n):e===Wf?{value:t}:{value:n},Ayn=(e,t,n)=>zs(e)?$yn(e.signal,t,n):e===ax?{value:t}:{value:n},Iyn=(e,t,n)=>aVe(`${e} === '${Wf}' || ${e} === '${W0}'`,t,n),Oyn=(e,t,n)=>aVe(`${e} !== '${Wf}' && ${e} !== '${W0}'`,t,n),Pyn=(e,t,n)=>xre(`${e} === '${ox}' || ${e} === '${Wf}'`,t,n),kyn=(e,t,n)=>xre(`${e} === '${Wf}'`,t,n),$yn=(e,t,n)=>xre(`${e} === '${ax}'`,t,n),aVe=(e,t,n)=>(t=t!=null?oo(t):t,n=n!=null?oo(n):n,X_e(t)&&X_e(n)?(t=t?t.signal||st(t.value):null,n=n?n.signal||st(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[En({test:e},t)].concat(n||[])),X_e=e=>e==null||Object.keys(e).length===1,xre=(e,t,n)=>({signal:`${e} ? (${iw(t)}) : (${iw(n)})`}),Ryn=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${ox}' ? (${iw(r)}) : `:"")+(n!=null?`${e} === '${W0}' ? (${iw(n)}) : `:"")+(i!=null?`${e} === '${ax}' ? (${iw(i)}) : `:"")+(t!=null?`${e} === '${Wf}' ? (${iw(t)}) : `:"")+"(null)"}),iw=e=>zs(e)?e.signal:e==null?null:st(e),Nyn=(e,t)=>t===0?0:zs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Dw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function lb(e,t,n,r){let i;if(t&&Vt(t,e))return t[e];if(Vt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[yre][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[zO][i]}return null}function Q_e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Dyn(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(zs(o)){const f=Q_e([n.axisX,n.axisY]),d=Q_e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=ao(o,lb(l,n.axisX,i,r),lb(l,n.axisY,i,r));u={};for(l of d)u[l]=Ryn(o.signal,lb(l,n.axisTop,i,r),lb(l,n.axisBottom,i,r),lb(l,n.axisLeft,i,r),lb(l,n.axisRight,i,r))}else a=o===Wf||o===W0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?En({},i,a,u,s):i}function Myn(e,t,n,r){const i=Xu(e,t),s=e.orient;let o,a;const u={enter:o={opacity:lr},update:a={opacity:cc},exit:{opacity:lr}};jo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=J_e(e,0),c=J_e(e,1);return o.x=a.x=ao(s,l,lr),o.x2=a.x2=ao(s,c),o.y=a.y=Tf(s,l,lr),o.y2=a.y2=Tf(s,c),Pl({type:_re,role:sgn,from:r,encode:u},n)}function J_e(e,t){return{scale:e.scale,range:t}}function Lyn(e,t,n,r,i){const s=Xu(e,t),o=e.orient,a=e.gridScale,u=w8(o,1,-1),l=Fyn(e.offset,u);let c,f,d;const h={enter:c={opacity:lr},update:d={opacity:cc},exit:f={opacity:lr}};jo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:lc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=ao(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:En(m,{mult:u,offset:l});return c.x=d.x=ao(o,p,g),c.y=d.y=Tf(o,p,g),c.x2=d.x2=Tf(o,y),c.y2=d.y2=ao(o,y),f.x=ao(o,p),f.y=Tf(o,p),Pl({type:_re,role:ogn,key:lc,from:r,encode:h},n)}function Fyn(e,t){if(t!==1)if(!gt(e))e=zs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=En({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=En({},n.mult);else return n.mult=zs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function jyn(e,t,n,r,i,s){const o=Xu(e,t),a=e.orient,u=w8(a,-1,1);let l,c,f;const d={enter:l={opacity:lr},update:f={opacity:cc},exit:c={opacity:lr}};jo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=oo(i);h.mult=u;const p={scale:e.scale,field:lc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=ao(a,lr,p),f.y2=l.y2=ao(a,h),c.x=ao(a,p),f.x=l.x=Tf(a,lr,p),f.x2=l.x2=Tf(a,h),c.y=Tf(a,p),Pl({type:_re,role:ugn,key:lc,from:r,encode:d},n)}function lz(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Byn(e,t,n,r,i,s){const o=Xu(e,t),a=e.orient,u=e.scale,l=w8(a,-1,1),c=u1(o("labelFlush")),f=u1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=oo(i);g.mult=l,g.offset=oo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:lc,band:.5,offset:eVe(s.offset,o("labelOffset"))},v=ao(a,p?lz(u,c,'"left"','"right"','"center"'):{value:"center"},Ayn(a,"left","right")),_=ao(a,oVe(a,"bottom","top"),p?lz(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=lz(u,c,`-(${f})`,f,0);p=p&&f;const x={opacity:lr,x:ao(a,y,g),y:Tf(a,y,g)},E={enter:x,update:m={opacity:cc,text:{field:gre},x:x.x,y:x.y,align:v,baseline:_},exit:{opacity:lr,x:x.x,y:x.y}};jo(E,{dx:!d&&p?ao(a,w):null,dy:!h&&p?Tf(a,w):null}),jo(E,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const b=o("labelBound");let T=o("labelOverlap");return T=T||b?{separation:o("labelSeparation"),method:T,order:"datum.index",bound:b?{scale:u,orient:a,tolerance:b}:null}:void 0,m.align!==v&&(m.align=Dw(m.align,v)),m.baseline!==_&&(m.baseline=Dw(m.baseline,_)),Pl({type:P_,role:agn,style:zO,key:lc,from:r,encode:E,overlap:T},n)}function Uyn(e,t,n,r){const i=Xu(e,t),s=e.orient,o=w8(s,-1,1);let a,u;const l={enter:a={opacity:lr,anchor:oo(i("titleAnchor",null)),align:{signal:bre}},update:u=En({},a,{opacity:cc,text:oo(e.title)}),exit:{opacity:lr}},c={signal:`lerp(range("${e.scale}"), ${v8(0,1,.5)})`};return u.x=ao(s,c),u.y=Tf(s,c),a.angle=ao(s,lr,Nyn(o,90)),a.baseline=ao(s,oVe(s,W0,Wf),{value:W0}),u.angle=a.angle,u.baseline=a.baseline,jo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),zyn(i,s,l,n),l.update.align=Dw(l.update.align,a.align),l.update.angle=Dw(l.update.angle,a.angle),l.update.baseline=Dw(l.update.baseline,a.baseline),Pl({type:P_,role:lgn,style:yre,from:r,encode:l},n)}function zyn(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Dw(oo(a),n.update[u]),!1):!Pb(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?oo(o):ao(t,oo(o),oo(s))}function Vyn(e,t){const n=Dyn(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Xu(e,n),l=j0n(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Bt(t.add(qf({},[c]))),d=Bt(t.add(Hgn({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Lyn(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(jyn(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Byn(e,n,r.labels,d,p,l))),c.domain&&h.push(Myn(e,n,r.domain,f)),c.title&&h.push(Uyn(e,n,r.title,f)),b8(XA({role:ign,from:f,encode:sx(Hyn(u,e),i,VO),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function Hyn(e,t){const n={enter:{},update:{}};return jo(n,{orient:e("orient"),offset:e("offset")||0,position:ef(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function uVe(e,t,n){const r=ht(e.signals),i=ht(e.scales);return n||r.forEach(s=>B7e(s,t)),ht(e.projections).forEach(s=>E0n(s,t)),i.forEach(s=>c0n(s,t)),ht(e.data).forEach(s=>Tyn(s,t)),i.forEach(s=>f0n(s,t)),(n||r).forEach(s=>Vgn(s,t)),ht(e.axes).forEach(s=>Vyn(s,t)),ht(e.marks).forEach(s=>b8(s,t)),ht(e.legends).forEach(s=>hyn(s,t)),e.title&&byn(e.title,t),t.parseLambdas(),t}const qyn=e=>sx({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Wyn(e,t){const n=t.config,r=Bt(t.root=t.add(s6())),i=Gyn(e,n);i.forEach(l=>B7e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(qf()),o=t.add(V7e(j7e(qyn(e.encode),y8,dre,e.style,t,{pulse:Bt(s)}))),a=t.add(W7e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Bt(o)}));t.operators.pop(),t.pushState(Bt(o),Bt(a),null),uVe(e,t,i),t.operators.push(a);let u=t.add(z7e({mark:r,pulse:Bt(a)}));return u=t.add(q7e({pulse:Bt(u)})),u=t.add(O_({pulse:Bt(u)})),t.addData("root",new q1(t,s,s,u)),t}function yT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Gyn(e,t){const n=o=>ef(e[o],t[o]),r=[yT("background",n("background")),yT("autosize",tgn(n("autosize"))),yT("padding",rgn(n("padding"))),yT("width",n("width")||0),yT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ht(e.signals).forEach(o=>{Vt(i,o.name)?o=En(i[o.name],o):r.push(o),s[o.name]=o}),ht(t.signals).forEach(o=>{!Vt(s,o.name)&&!Vt(i,o.name)&&r.push(o)}),r}function lVe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Z_e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}lVe.prototype=Z_e.prototype={parse(e){return uVe(e,this)},fork(){return new Z_e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof VW?Bt(e):e;return this.add(i0n({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Bt(this.add(O_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Bt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return tr(this._parent)},encode(){return tr(this._encode)},lookup(){return tr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(pt(e))return YA(e,t);e.signal||$e("Unsupported field reference: "+st(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Bt(this.add(Ygn(i)))}return r},compareRef(e){let t=!1;const n=s=>zs(s)?(t=!0,this.signalRef(s.signal)):Rgn(s)?(t=!0,this.exprRef(s.expr)):s,r=ht(e.field).map(n),i=ht(e.order).map(n);return t?Bt(this.add(j_e({fields:r,orders:i}))):L_e(r,i)},keyRef(e,t){let n=!1;const r=s=>zs(s)?(n=!0,Bt(i[s.signal])):s,i=this.signals;return e=ht(e).map(r),n?Bt(this.add(Kgn({fields:e,flat:t}))):Ogn(e,t)},sortRef(e){if(!e)return e;const t=m8(e.op,e.field),n=e.order||Pgn;return n.signal?Bt(this.add(j_e({fields:t,orders:this.signalRef(n.signal)}))):L_e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Vt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&$e("Duplicate signal name: "+st(e));const n=t instanceof VW?t:this.add(s6(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||$e("Unrecognized signal name: "+st(e)),this.signals[e]},signalRef(e){return this.signals[e]?Bt(this.signals[e]):(Vt(this.lambdas,e)||(this.lambdas[e]=this.add(s6(null))),Bt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=gh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||Tre(e))},exprRef(e,t){const n={expr:gh(e,this)};return t&&(n.expr.$name=t),Bt(this.add(Wgn(n)))},addBinding(e,t){this.bindings||$e("Nested signals do not support binding: "+st(e)),this.bindings.push(En({signal:e},t))},addScaleProj(e,t){Vt(this.scales,e)&&$e("Duplicate scale or projection name: "+st(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,o0n(t))},addProjection(e,t){this.addScaleProj(e,r0n(t))},getScale(e){return this.scales[e]||$e("Unrecognized scale name: "+st(e)),this.scales[e]},scaleRef(e){return Bt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Vt(this.data,e)&&$e("Duplicate data set name: "+st(e)),this.data[e]=t},getData(e){return this.data[e]||$e("Undefined data set name: "+st(e)),this.data[e]},addDataPipeline(e,t){return Vt(this.data,e)&&$e("Duplicate data set name: "+st(e)),this.addData(e,q1.fromEntries(this,t))}};function Tre(e){return(Ne(e)?Yyn:Kyn)(e)}function Yyn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||Tre(i):st(i))}return n+"]"}function Kyn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+st(r)+":"+(gt(i)?i.signal||Tre(i):st(i));return t+"}"}function Xyn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Qyn(e,t,n){return gt(e)||$e("Input Vega specification must be an object."),t=XS(Xyn(),t,e.config),Wyn(e,new lVe(t,n)).toRuntime()}var Jyn="5.28.0";En(NE,Rin,wun,Zun,Bcn,Gcn,bfn,Zcn,Efn,Nfn,Hfn,Qfn);const Zyn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Cs,CanvasHandler:H0,CanvasRenderer:BA,DATE:zu,DAY:ca,DAYOFYEAR:ph,Dataflow:Rw,Debug:V8e,Error:uee,EventStream:R5,Gradient:h9e,GroupItem:W5,HOURS:Al,Handler:V0,HybridHandler:rne,HybridRenderer:xL,Info:z8e,Item:q5,MILLISECONDS:Df,MINUTES:Il,MONTH:ma,Marks:Ol,MultiPulse:Iee,None:U8e,Operator:ri,Parameters:$5,Pulse:l0,QUARTER:Uu,RenderType:Dg,Renderer:Ll,ResourceLoader:$te,SECONDS:yc,SVGHandler:Xte,SVGRenderer:e8,SVGStringRenderer:nne,Scenegraph:Yte,TIME_UNITS:bee,Transform:Ie,View:A7e,WEEK:Ms,Warn:lee,YEAR:Do,accessor:Ku,accessorFields:pa,accessorName:es,array:ht,ascending:C5,bandwidthNRD:$ee,bin:sBe,bootstrapCI:oBe,boundClip:cUe,boundContext:$O,boundItem:Gq,boundMark:$9e,boundStroke:Pm,changeset:C_,clampRange:eje,codegenExpression:e7e,compare:pee,constant:Sa,cumulativeLogNormal:Fee,cumulativeNormal:D5,cumulativeUniform:zee,dayofyear:_je,debounce:mee,defaultLocale:See,definition:nBe,densityLogNormal:Lee,densityNormal:Ree,densityUniform:Uee,domChild:Ns,domClear:Zl,domCreate:Rg,domFind:Kte,dotbin:aBe,error:$e,expressionFunction:ds,extend:En,extent:hh,extentIndex:tje,falsy:eg,fastmap:JS,field:mc,flush:nje,font:Q5,fontFamily:DO,fontSize:Ih,format:wR,formatLocale:cL,formats:Cee,hasOwnProperty:Vt,id:_O,identity:Ea,inferType:qje,inferTypes:Wje,ingest:Or,inherits:nt,inrange:Zb,interpolate:xte,interpolateColors:V5,interpolateRange:ZBe,intersect:oUe,intersectBoxLine:ew,intersectPath:Rte,intersectPoint:Nte,intersectRule:w9e,isArray:Ne,isBoolean:_y,isDate:a0,isFunction:Sn,isIterable:rje,isNumber:hr,isObject:gt,isRegExp:ije,isString:pt,isTuple:P5,key:gee,lerp:sje,lineHeight:U0,loader:I5,locale:Vje,logger:cee,lruCache:oje,markup:tne,merge:aje,mergeConfig:XS,multiLineOffset:qte,one:KS,pad:uje,panLinear:Y8e,panLog:K8e,panPow:X8e,panSymlog:Q8e,parse:Qyn,parseExpression:Jne,parseSelector:wy,path:eF,pathCurves:Ote,pathEqual:fUe,pathParse:FE,pathRectangle:g9e,pathRender:MA,pathSymbols:m9e,pathTrail:y9e,peek:tr,point:Z5,projection:Ene,quantileLogNormal:jee,quantileNormal:M5,quantileUniform:Vee,quantiles:Pee,quantizeInterpolator:e9e,quarter:J8e,quartiles:kee,get random(){return vc},randomInteger:Lrn,randomKDE:Dee,randomLCG:Mrn,randomLogNormal:lBe,randomMixture:cBe,randomNormal:Nee,randomUniform:fBe,read:Kje,regressionConstant:Hee,regressionExp:hBe,regressionLinear:qee,regressionLoess:gBe,regressionLog:dBe,regressionPoly:mBe,regressionPow:pBe,regressionQuad:Wee,renderModule:t8,repeat:XT,resetDefaultLocale:Rnn,resetSVGClipId:_9e,resetSVGDefIds:jan,responseType:Yje,runtimeContext:p7e,sampleCurve:F5,sampleLogNormal:Mee,sampleNormal:N5,sampleUniform:Bee,scale:Er,sceneEqual:ine,sceneFromJSON:N9e,scenePickVisit:mL,sceneToJSON:R9e,sceneVisit:Mf,sceneZOrder:Dte,scheme:Tte,serializeXML:Q9e,setHybridRendererOptions:Dan,setRandom:Nrn,span:bO,splitAccessPath:Ah,stringValue:st,textMetrics:_l,timeBin:Mje,timeFloor:Cje,timeFormatLocale:RA,timeInterval:ZS,timeOffset:Oje,timeSequence:$je,timeUnitSpecifier:vje,timeUnits:wee,toBoolean:yee,toDate:vee,toNumber:fa,toSet:Nf,toString:_ee,transform:rBe,transforms:NE,truncate:lje,truthy:gc,tupleid:Ut,typeParsers:Fq,utcFloor:Aje,utcInterval:ex,utcOffset:Pje,utcSequence:Rje,utcdayofyear:Eje,utcquarter:Z8e,utcweek:Sje,version:Jyn,visitArray:ug,week:bje,writeConfig:QS,zero:wg,zoomLinear:fee,zoomLog:dee,zoomPow:uL,zoomSymlog:hee},Symbol.toStringTag,{value:"Module"}));function evn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var tvn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},nvn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},rvn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const ivn=Array.prototype.slice,zy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,ivn.call(t,1))},svn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var ovn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:svn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return zy("join",arguments)},indexof:function(){return zy("indexOf",arguments)},lastindexof:function(){return zy("lastIndexOf",arguments)},slice:function(){return zy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return zy("substring",arguments,String)},split:function(){return zy("split",arguments,String)},replace:function(){return zy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const avn=["view","item","group","xy","x","y"],XW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&XW.add(setImmediate);const uvn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:tvn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),XW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||ovn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>nvn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>rvn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,XW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function vT(e,t,n,r,i,s){const o=a=>uvn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,avn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var lvn={operator(e,t){const n=t.ast,r=e.functions;return i=>vT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>vT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>vT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return vT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=vT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&evn(o,r,s),l}}};const cvn="vega-lite",fvn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',dvn="5.17.0",hvn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],pvn="https://vega.github.io/vega-lite/",mvn="Vega-Lite is a concise high-level language for interactive visualization.",gvn=["vega","chart","visualization"],yvn="build/vega-lite.js",vvn="build/vega-lite.min.js",_vn="build/vega-lite.min.js",bvn="build/src/index",wvn="build/src/index.d.ts",Evn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Svn=["bin","build","src","vega-lite*","tsconfig.json"],xvn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Tvn={type:"git",url:"https://github.com/vega/vega-lite.git"},Cvn="BSD-3-Clause",Avn={url:"https://github.com/vega/vega-lite/issues"},Ivn={"@babel/core":"^7.23.9","@babel/preset-env":"^7.23.9","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.11","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^6.20.0","@typescript-eslint/parser":"^6.20.0",ajv:"^8.12.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.8.5","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.3","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^9.0.2",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.4",puppeteer:"^15.0.0","release-it":"^17.0.3",rollup:"^4.9.6","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.1",terser:"^5.27.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.3.3","vega-cli":"^5.27.0","vega-datasets":"^2.8.0","vega-embed":"^6.24.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},Ovn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Pvn={vega:"^5.24.0"},kvn={node:">=18"},$vn={name:cvn,author:fvn,version:dvn,collaborators:hvn,homepage:pvn,description:mvn,keywords:gvn,main:yvn,unpkg:vvn,jsdelivr:_vn,module:bvn,types:wvn,bin:Evn,files:Svn,scripts:xvn,repository:Tvn,license:Cvn,bugs:Avn,devDependencies:Ivn,dependencies:Ovn,peerDependencies:Pvn,engines:kvn};function Cre(e){return!!e.or}function Are(e){return!!e.and}function Ire(e){return!!e.not}function UR(e,t){if(Ire(e))UR(e.not,t);else if(Are(e))for(const n of e.and)UR(n,t);else if(Cre(e))for(const n of e.or)UR(n,t);else t(e)}function Mw(e,t){return Ire(e)?{not:Mw(e.not,t)}:Are(e)?{and:e.and.map(n=>Mw(n,t))}:Cre(e)?{or:e.or.map(n=>Mw(n,t))}:t(e)}const tn=structuredClone;function cVe(e){throw new Error(e)}function qE(e,t){const n={};for(const r of t)Vt(e,r)&&(n[r]=e[r]);return n}function Du(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Yr(e)).join(",")})`};function Hn(e){if(hr(e))return e;const t=pt(e)?e:Yr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function QW(e){return e===!1||e===null}function qn(e,t){return e.includes(t)}function W1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Ore(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function fVe(e,...t){for(const n of t)Rvn(e,n??{});return e}function Rvn(e,t){for(const n of Ve(t))QS(e,n,t[n],!0)}function Nd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Nvn(e,t){const n=Ve(e),r=Ve(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function dVe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Pre(e,t){for(const n of e)if(t.has(n))return!0;return!1}function JW(e){const t=new Set;for(const n of e){const i=Ah(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function kre(e,t){return e===void 0||t===void 0?!0:Pre(JW(e),JW(t))}function Gr(e){return Ve(e).length===0}const Ve=Object.keys,Mo=Object.values,G0=Object.entries;function QA(e){return e===!0||e===!1}function Ri(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function gC(e,t){return Ire(e)?`!(${gC(e.not,t)})`:Are(e)?`(${e.and.map(n=>gC(n,t)).join(") && (")})`:Cre(e)?`(${e.or.map(n=>gC(n,t)).join(") || (")})`:t(e)}function o6(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&o6(e[n],t)&&delete e[n],Gr(e)}function HO(e){return e.charAt(0).toUpperCase()+e.substr(1)}function $re(e,t="datum"){const n=Ah(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(st).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function hVe(e,t="datum"){return`${t}[${st(Ah(e).join("."))}]`}function Dvn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function bc(e){return`${Ah(e).map(Dvn).join("\\.")}`}function G1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Rre(e){return`${Ah(e).join(".")}`}function WE(e){return e?Ah(e).length:0}function cs(...e){for(const t of e)if(t!==void 0)return t}let pVe=42;function mVe(e){const t=++pVe;return e?String(e)+t:t}function Mvn(){pVe=42}function gVe(e){return yVe(e)?e:`__${e}`}function yVe(e){return e.startsWith("__")}function JA(e){if(e!==void 0)return(e%360+360)%360}function E8(e){return hr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const ebe=Object.getPrototypeOf(structuredClone({}));function ml(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ml(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!ml(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==ebe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==ebe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!ml(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Yr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const jp="row",Bp="column",S8="facet",Ni="x",mo="y",Gf="x2",$h="y2",Ey="xOffset",ux="yOffset",Yf="radius",$m="radius2",Rc="theta",Rm="theta2",Kf="latitude",Xf="longitude",Qf="latitude2",wc="longitude2",Hu="color",Rh="fill",Nh="stroke",qu="shape",Nm="size",k_="angle",Dm="opacity",Sy="fillOpacity",xy="strokeOpacity",Ty="strokeWidth",Cy="strokeDash",qO="text",GE="order",WO="detail",x8="key",Y1="tooltip",T8="href",C8="url",A8="description",Lvn={x:1,y:1,x2:1,y2:1},vVe={theta:1,theta2:1,radius:1,radius2:1};function _Ve(e){return e in vVe}const Nre={longitude:1,longitude2:1,latitude:1,latitude2:1};function bVe(e){switch(e){case Kf:return"y";case Qf:return"y2";case Xf:return"x";case wc:return"x2"}}function wVe(e){return e in Nre}const Fvn=Ve(Nre),Dre={...Lvn,...vVe,...Nre,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Lw(e){return e===Hu||e===Rh||e===Nh}const EVe={row:1,column:1,facet:1},sc=Ve(EVe),Mre={...Dre,...EVe},jvn=Ve(Mre),{order:nOn,detail:rOn,tooltip:iOn,...Bvn}=Mre,{row:sOn,column:oOn,facet:aOn,...Uvn}=Bvn;function zvn(e){return!!Uvn[e]}function SVe(e){return!!Mre[e]}const Vvn=[Gf,$h,Qf,wc,Rm,$m];function xVe(e){return $_(e)!==e}function $_(e){switch(e){case Gf:return Ni;case $h:return mo;case Qf:return Kf;case wc:return Xf;case Rm:return Rc;case $m:return Yf}return e}function Y0(e){if(_Ve(e))switch(e){case Rc:return"startAngle";case Rm:return"endAngle";case Yf:return"outerRadius";case $m:return"innerRadius"}return e}function Dh(e){switch(e){case Ni:return Gf;case mo:return $h;case Kf:return Qf;case Xf:return wc;case Rc:return Rm;case Yf:return $m}}function Wu(e){switch(e){case Ni:case Gf:return"width";case mo:case $h:return"height"}}function TVe(e){switch(e){case Ni:return"xOffset";case mo:return"yOffset";case Gf:return"x2Offset";case $h:return"y2Offset";case Rc:return"thetaOffset";case Yf:return"radiusOffset";case Rm:return"theta2Offset";case $m:return"radius2Offset"}}function Lre(e){switch(e){case Ni:return"xOffset";case mo:return"yOffset"}}function Hvn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const qvn=Ve(Dre),{x:uOn,y:lOn,x2:cOn,y2:fOn,xOffset:dOn,yOffset:hOn,latitude:pOn,longitude:mOn,latitude2:gOn,longitude2:yOn,theta:vOn,theta2:_On,radius:bOn,radius2:wOn,...Fre}=Dre,Wvn=Ve(Fre),jre={x:1,y:1},Mh=Ve(jre);function fs(e){return e in jre}const Bre={theta:1,radius:1},Gvn=Ve(Bre);function I8(e){return e==="width"?Ni:mo}const CVe={xOffset:1,yOffset:1};function GO(e){return e in CVe}const{text:EOn,tooltip:SOn,href:xOn,url:TOn,description:COn,detail:AOn,key:IOn,order:OOn,...AVe}=Fre,Yvn=Ve(AVe);function Kvn(e){return!!Fre[e]}function Xvn(e){switch(e){case Hu:case Rh:case Nh:case Nm:case qu:case Dm:case Ty:case Cy:return!0;case Sy:case xy:case k_:return!1}}const IVe={...jre,...Bre,...CVe,...AVe},O8=Ve(IVe);function Mm(e){return!!IVe[e]}function Qvn(e,t){return Zvn(e)[t]}const OVe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:POn,...Jvn}=OVe;function Zvn(e){switch(e){case Hu:case Rh:case Nh:case A8:case WO:case x8:case Y1:case T8:case GE:case Dm:case Sy:case xy:case Ty:case S8:case jp:case Bp:return OVe;case Ni:case mo:case Ey:case ux:case Kf:case Xf:return Jvn;case Gf:case $h:case Qf:case wc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Nm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Cy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case qu:return{point:"always",geoshape:"always"};case qO:return{text:"always"};case k_:return{point:"always",square:"always",text:"always"};case C8:return{image:"always"};case Rc:return{text:"always",arc:"always"};case Yf:return{text:"always",arc:"always"};case Rm:case $m:return{arc:"always"}}}function cz(e){switch(e){case Ni:case mo:case Rc:case Yf:case Ey:case ux:case Nm:case k_:case Ty:case Dm:case Sy:case xy:case Gf:case $h:case Rm:case $m:return;case S8:case jp:case Bp:case qu:case Cy:case qO:case Y1:case T8:case C8:case A8:return"discrete";case Hu:case Rh:case Nh:return"flexible";case Kf:case Xf:case Qf:case wc:case WO:case x8:case GE:return}}const e1n={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},t1n={count:1,min:1,max:1};function pm(e){return!!e&&!!e.argmin}function Ay(e){return!!e&&!!e.argmax}function Ure(e){return pt(e)&&!!e1n[e]}const n1n=new Set(["count","valid","missing","distinct"]);function PVe(e){return pt(e)&&n1n.has(e)}function r1n(e){return pt(e)&&qn(["min","max"],e)}const i1n=new Set(["count","sum","distinct","valid","missing"]),s1n=new Set(["mean","average","median","q1","q3","min","max"]);function kVe(e){return _y(e)&&(e=U8(e,void 0)),"bin"+Ve(e).map(t=>P8(e[t])?Ri(`_${t}_${G0(e[t])}`):Ri(`_${t}_${e[t]}`)).join("")}function fi(e){return e===!0||R_(e)&&!e.binned}function To(e){return e==="binned"||R_(e)&&e.binned===!0}function R_(e){return gt(e)}function P8(e){return e==null?void 0:e.param}function tbe(e){switch(e){case jp:case Bp:case Nm:case Hu:case Rh:case Nh:case Ty:case Dm:case Sy:case xy:case qu:return 6;case Cy:return 4;default:return 10}}function YO(e){return!!(e!=null&&e.expr)}function wu(e){const t=Ve(e||{}),n={};for(const r of t)n[r]=cl(e[r]);return n}function $Ve(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=qE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:v}}function dg(e){return pt(e)||Ne(e)&&pt(e[0])}function Nt(e){return!!(e!=null&&e.signal)}function Iy(e){return!!e.step}function o1n(e){return Ne(e)?!1:"fields"in e&&!("data"in e)}function a1n(e){return Ne(e)?!1:"fields"in e&&"data"in e}function Ip(e){return Ne(e)?!1:"field"in e&&"data"in e}const u1n={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},l1n=Ve(u1n),c1n={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},ZW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function RVe(e){const t=Ne(e.condition)?e.condition.map(nbe):nbe(e.condition);return{...cl(e),condition:t}}function cl(e){if(YO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function nbe(e){if(YO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function _i(e){if(YO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nt(e)?e:e!==void 0?{value:e}:void 0}function f1n(e){return Nt(e)?e.signal:st(e)}function rbe(e){return Nt(e)?e.signal:st(e.value)}function gf(e){return Nt(e)?e.signal:e==null?null:st(e)}function d1n(e,t,n){for(const r of n){const i=mm(r,t.markDef,t.config);i!==void 0&&(e[r]=_i(i))}return e}function NVe(e){return[].concat(e.type,e.style??[])}function Ir(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:mm(e,t,n,r)}function mm(e,t,n,{vgChannel:r}={}){return cs(r?a6(e,t,n.style):void 0,a6(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function a6(e,t,n){return DVe(e,NVe(t),n)}function DVe(e,t,n){t=ht(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function MVe(e,t){return ht(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function LVe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(ml(i,r))return;n.push(r)}),n}function FVe(e,t){return ml(e,t)||!t?e:e?[...ht(e),...ht(t)].join(", "):t}function jVe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((dg(n)||Nt(n))&&(dg(r)||Nt(r)))return{explicit:e.explicit,value:FVe(n,r)};if(dg(n)||Nt(n))return{explicit:e.explicit,value:n};if(dg(r)||Nt(r))return{explicit:e.explicit,value:r};if(!dg(n)&&!Nt(n)&&!dg(r)&&!Nt(r))return{explicit:e.explicit,value:LVe(n,r)};throw new Error("It should never reach here")}function zre(e){return`Invalid specification ${Yr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const h1n='Autosize "fit" only works for single views and layered views.';function ibe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function sbe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function obe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Wu(e)}.`:'Dropping "fit" because spec has discrete size.'}function Vre(e){return`Unknown field for ${e}. Cannot calculate view size.`}function abe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function p1n(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function m1n(e){return`The "nearest" transform is not supported for ${e} marks.`}function BVe(e){return`Selection not supported for ${e} yet.`}function g1n(e){return`Cannot find a selection named "${e}".`}const y1n="Scale bindings are currently only supported for scales with unbinned, continuous domains.",v1n="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",_1n="Legend bindings are only supported for selections over an individual field or encoding channel.";function b1n(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function w1n(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const E1n="The same selection must be used to override scale domains in a layered view.",S1n='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function x1n(e){return`Unknown repeated value "${e}".`}function ube(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const T1n="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function C1n(e){return`Unrecognized parse "${e}".`}function lbe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const A1n="Attempt to add the same child twice.";function I1n(e){return`Ignoring an invalid transform: ${Yr(e)}.`}const O1n='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function cbe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function P1n(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Yr(t)} is overridden by a child projection ${Yr(n)}.`}const k1n="Arc marks uses theta channel rather than angle, replacing angle with theta.";function $1n(e){return`${e}Offset dropped because ${e} is continuous`}function R1n(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Yr(n)}}.`}function UVe(e){return`Invalid field type "${e}".`}function N1n(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function D1n(e){return`Invalid aggregation operator "${e}".`}function zVe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function M1n(e){return`Position range does not support relative band size for ${e}.`}function eG(e,t){return`Dropping ${Yr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const L1n="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function k8(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function F1n(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function j1n(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function B1n(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function U1n(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function fz(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function z1n(e){return`The ${e} for range marks cannot be an expression`}function V1n(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function H1n(e,t){return`Specified orient "${e}" overridden with "${t}".`}function q1n(e){return`Cannot use the scale property "${e}" with non-color channel.`}function W1n(e){return`Cannot use the relative band size with ${e} scale.`}function G1n(e){return`Using unaggregated domain with raw field has no effect (${Yr(e)}).`}function Y1n(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function K1n(e){return`Unaggregated domain is currently unsupported for log scale (${Yr(e)}).`}function X1n(e){return`Cannot apply size to non-oriented mark "${e}".`}function Q1n(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function J1n(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function VVe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function HVe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Z1n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yr(n)} and ${Yr(r)}). Using ${Yr(n)}.`}function e_n(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yr(n)} and ${Yr(r)}). Using the union of the two domains.`}function t_n(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function n_n(e){return`Dropping sort property ${Yr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const fbe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",r_n="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",i_n="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",s_n="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function o_n(e){return`Cannot stack "${e}" if there is already "${e}2".`}function a_n(e){return`Cannot stack non-linear scale (${e}).`}function u_n(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function u6(e,t){return`Invalid ${e}: ${Yr(t)}.`}function l_n(e){return`Dropping day from datetime ${Yr(e)} as day cannot be combined with other units.`}function c_n(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function f_n(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function d_n(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function dbe(e){return`1D error band does not support ${e}.`}function qVe(e){return`Channel ${e} is required for "binned" bin.`}function h_n(e){return`Channel ${e} should not be used with "binned" bin.`}function p_n(e){return`Domain for ${e} is required for threshold scale.`}const WVe=cee(lee);let YE=WVe;function m_n(e){return YE=e,YE}function g_n(){return YE=WVe,YE}function Je(...e){YE.warn(...e)}function y_n(...e){YE.debug(...e)}function N_(e){if(e&&gt(e)){for(const t of qre)if(t in e)return!0}return!1}const GVe=["january","february","march","april","may","june","july","august","september","october","november","december"],v_n=GVe.map(e=>e.substr(0,3)),YVe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],__n=YVe.map(e=>e.substr(0,3));function b_n(e){if(E8(e)&&(e=+e),hr(e))return e>4&&Je(u6("quarter",e)),e-1;throw new Error(u6("quarter",e))}function w_n(e){if(E8(e)&&(e=+e),hr(e))return e-1;{const t=e.toLowerCase(),n=GVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=v_n.indexOf(r);if(i!==-1)return i;throw new Error(u6("month",e))}}function E_n(e){if(E8(e)&&(e=+e),hr(e))return e%7;{const t=e.toLowerCase(),n=YVe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=__n.indexOf(r);if(i!==-1)return i;throw new Error(u6("day",e))}}function Hre(e,t){const n=[];if(t&&e.day!==void 0&&Ve(e).length>1&&(Je(l_n(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?w_n(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?b_n(e.quarter):e.quarter;n.push(hr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?E_n(e.day):e.day;n.push(hr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function K1(e){const n=Hre(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function S_n(e){const n=Hre(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function x_n(e){const t=Hre(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const KVe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},qre=Ve(KVe);function T_n(e){return!!KVe[e]}function D_(e){return gt(e)?e.binned:XVe(e)}function XVe(e){return e&&e.startsWith("binned")}function Wre(e){return e.startsWith("utc")}function C_n(e){return e.substring(3)}const A_n={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function $8(e){return qre.filter(t=>JVe(e,t))}function QVe(e){const t=$8(e);return t[t.length-1]}function JVe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function I_n(e,t,{end:n}={end:!1}){const r=$re(t),i=Wre(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of qre)JVe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),S_n(a)}function ZVe(e){if(!e)return;const t=$8(e);return`timeUnitSpecifier(${Yr(t)}, ${Yr(A_n)})`}function O_n(e,t,n){if(!e)return;const r=ZVe(e);return`${n||Wre(e)?"utc":"time"}Format(${t}, ${r})`}function lo(e){if(!e)return;let t;return pt(e)?XVe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Wre(t.unit)&&(t.utc=!0,t.unit=C_n(t.unit)),t}function P_n(e){const{utc:t,...n}=lo(e);return n.unit?(t?"utc":"")+Ve(n).map(r=>Ri(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ve(n).map(r=>Ri(`_${r}_${n[r]}`)).join("")}function eHe(e,t=n=>n){const n=lo(e),r=QVe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=tHe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(K1(a))} - ${t(K1(i))}`}}const k_n={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function $_n(e){return!!k_n[e]}function tHe(e,t=1){if($_n(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function R_n(e){return e==null?void 0:e.param}function Gre(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Yre(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Kre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Xre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Qre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Jre(e){if(e!=null&&e.field){if(Ne(e.range)&&e.range.length===2)return!0;if(Nt(e.range))return!0}return!1}function Zre(e){return!!(e!=null&&e.field)&&(Ne(e.oneOf)||Ne(e.in))}function N_n(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function nHe(e){return Zre(e)||Gre(e)||Jre(e)||Yre(e)||Xre(e)||Kre(e)||Qre(e)}function id(e,t){return z8(e,{timeUnit:t,wrapTime:!0})}function D_n(e,t){return e.map(n=>id(n,t))}function rHe(e,t=!0){const{field:n}=e,r=lo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:I_n(i,n)})`:o;if(Gre(e))return`${a}===${id(e.equal,i)}`;if(Yre(e)){const u=e.lt;return`${a}<${id(u,i)}`}else if(Xre(e)){const u=e.gt;return`${a}>${id(u,i)}`}else if(Kre(e)){const u=e.lte;return`${a}<=${id(u,i)}`}else if(Qre(e)){const u=e.gte;return`${a}>=${id(u,i)}`}else{if(Zre(e))return`indexof([${D_n(e.oneOf,i).join(",")}], ${a}) !== -1`;if(N_n(e))return eie(a,e.valid);if(Jre(e)){const{range:u}=e,l=Nt(u)?{signal:`${u.signal}[0]`}:u[0],c=Nt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+id(l,i)+", "+id(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${id(l,i)}`),c!==null&&f.push(`${a} <= ${id(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Yr(e)}`)}function eie(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function M_n(e){return nHe(e)&&e.timeUnit?{...e,timeUnit:lo(e.timeUnit)}:e}const KO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function L_n(e){return e==="quantitative"||e==="temporal"}function iHe(e){return e==="ordinal"||e==="nominal"}const X1=KO.quantitative,tie=KO.ordinal,KE=KO.temporal,nie=KO.nominal,lx=KO.geojson;function F_n(e){if(e)switch(e=e.toLowerCase(),e){case"q":case X1:return"quantitative";case"t":case KE:return"temporal";case"o":case tie:return"ordinal";case"n":case nie:return"nominal";case lx:return"geojson"}}const Mu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},tG={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function j_n(e,t){const n=tG[e],r=tG[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const B_n={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function hbe(e){return B_n[e]}const sHe=new Set(["linear","log","pow","sqrt","symlog"]),oHe=new Set([...sHe,"time","utc"]);function aHe(e){return sHe.has(e)}const uHe=new Set(["quantile","quantize","threshold"]),U_n=new Set([...oHe,...uHe,"sequential","identity"]),z_n=new Set(["ordinal","bin-ordinal","point","band"]);function fo(e){return z_n.has(e)}function kl(e){return U_n.has(e)}function yf(e){return oHe.has(e)}function XE(e){return uHe.has(e)}const V_n={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function H_n(e){return!pt(e)&&!!e.name}function lHe(e){return e==null?void 0:e.param}function q_n(e){return e==null?void 0:e.unionWith}function W_n(e){return gt(e)&&"field"in e}const G_n={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:kOn,domain:$On,range:ROn,rangeMax:NOn,rangeMin:DOn,scheme:MOn,...Y_n}=G_n,K_n=Ve(Y_n);function nG(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return yf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return yf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return yf(e);case"nice":return yf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return kl(e)&&!qn(["log","time","utc","threshold","quantile"],e)}}function cHe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Lw(e)?void 0:q1n(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function X_n(e,t){return qn([tie,nie],t)?e===void 0||fo(e):t===KE?qn([Mu.TIME,Mu.UTC,void 0],e):t===X1?aHe(e)||XE(e)||e===void 0:!0}function Q_n(e,t,n=!1){if(!Mm(e))return!1;switch(e){case Ni:case mo:case Ey:case ux:case Rc:case Yf:return yf(t)||t==="band"?!0:t==="point"?!n:!1;case Nm:case Ty:case Dm:case Sy:case xy:case k_:return yf(t)||XE(t)||qn(["band","point","ordinal"],t);case Hu:case Rh:case Nh:return t!=="band";case Cy:case qu:return t==="ordinal"||XE(t)}}const ou={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},fHe=ou.arc,R8=ou.area,N8=ou.bar,J_n=ou.image,D8=ou.line,M8=ou.point,Z_n=ou.rect,l6=ou.rule,dHe=ou.text,rie=ou.tick,ebn=ou.trail,iie=ou.circle,sie=ou.square,hHe=ou.geoshape;function Oy(e){return["line","area","trail"].includes(e)}function ZA(e){return["rect","bar","image","arc"].includes(e)}const tbn=new Set(Ve(ou));function yh(e){return e.type}const nbn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],rbn=["fill","fillOpacity"],ibn=[...nbn,...rbn],sbn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},pbe=Ve(sbn),obn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},abn={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},ubn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},pHe=Ve(ubn);function Q1(e){return e&&e.band!=null}const lbn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},mHe=5,cbn={binSpacing:1,continuousBandSize:mHe,minBandSize:.25,timeUnitBandPosition:.5},fbn={binSpacing:0,continuousBandSize:mHe,minBandSize:.25,timeUnitBandPosition:.5},dbn={thickness:1};function hbn(e){return yh(e)?e.type:e}function oie(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=uie(e);return et(n)&&!PVe(n.aggregate)&&i&&yf(i.get("type"))?pbn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function pbn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Oy(n.type)?r:Ir("invalid",n,i)===null?[mbn(e,t),r]:r}function mbn(e,t){const n=aie(e,!0),i=$_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function aie(e,t=!0){return eie(pt(e)?e:at(e,{expr:"datum"}),!t)}function gbn(e){const{datum:t}=e;return N_(t)?K1(t):`${Yr(t)}`}function l1(e,t,n,r){const i={};if(t&&(i.scale=t),Lh(e)){const{datum:s}=e;N_(s)?i.signal=K1(s):Nt(s)?i.signal=s.signal:YO(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function c6({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Nt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Nt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function ybn({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function uie({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(ln(t)){const f=o==null?void 0:o.get("type");if(Za(t)){c??(c=K0({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(fi(d)||c&&h&&p===KE)return a!=null&&a.impute?l1(t,s,{binSuffix:"mid"},{offset:u}):c&&!fo(f)?c6({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):l1(t,s,ZO(t,e)?{binSuffix:"range"}:{},{offset:u});if(To(d)){if(et(n))return c6({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je(qVe(e===Ni?Gf:$h))}}return l1(t,s,fo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Lf(t)){const f=t.value,d=u?{offset:u}:{};return{...yC(e,f),...d}}}return Sn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function yC(e,t){return qn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:qn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:_i(t)}function J1(e){return e&&e!=="number"&&e!=="time"}function gHe(e,t,n){return`${e}(${t}${n?`, ${Yr(n)}`:""})`}const vbn="  ";function lie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(J1(n))return vf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=yHe(e,r,i),a=QE(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return vf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return vf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&et(e)&&e.timeUnit===void 0)return vf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(ZE(e)){const c=bbn({field:o,timeUnit:et(e)?(u=lo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:M_(e)&&((l=e.scale)==null?void 0:l.type)===Mu.UTC});return c?{signal:c}:void 0}if(t=rG({type:a,specifiedFormat:t,config:s,normalizeStack:i}),et(e)&&fi(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:XO(o,c,t,n,s)}}else return t||QE(e)==="quantitative"?{signal:`${bHe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function yHe(e,t,n){return et(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):gbn(e)}function vf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=yHe(e,r,i)),o!=="datum.value"&&et(e)&&fi(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:XO(o,a,t,n,s)}}return{signal:gHe(n,o,t)}}function vHe(e,t,n,r,i,s){var o;if(!(pt(r)&&J1(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&QE(e)==="quantitative"&&(i.normalizedNumberFormatType&&JE(e)&&e.stack==="normalize"||i.numberFormatType))){if(JE(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return rG({type:"quantitative",config:i,normalizeStack:!0});if(ZE(e)){const a=et(e)?(o=lo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:_bn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return rG({type:t,specifiedFormat:n,config:i})}}function _He(e,t,n){var r;if(e&&(Nt(e)||e==="number"||e==="time"))return e;if(ZE(t)&&n!=="time"&&n!=="utc")return et(t)&&((r=lo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function rG({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(pt(t))return t;if(e===X1)return r?n.normalizedNumberFormat:n.numberFormat}function _bn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:ZVe(t)}:r?void 0:n.timeFormat)}function bHe(e,t){return`format(${e}, "${t||""}")`}function mbe(e,t,n,r){return J1(n)?gHe(n,e,t):bHe(e,(pt(t)?t:void 0)??r.numberFormat)}function XO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return XO(e,t,i.numberFormat,i.numberFormatType,i);const s=mbe(e,n,r,i),o=mbe(t,n,r,i);return`${eie(e,!1)} ? "null" : ${s} + "${vbn}" + ${o}`}function bbn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):O_n(t,e,s)}const L8="min",wbn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function gbe(e){return e in wbn}function wHe(e){return!!(e!=null&&e.encoding)}function Zd(e){return e&&(e.op==="count"||!!e.field)}function EHe(e){return e&&Ne(e)}function QO(e){return"row"in e||"column"in e}function cie(e){return!!e&&"header"in e}function F8(e){return"facet"in e}function Ebn(e){return e.param}function Sbn(e){return e&&!pt(e)&&"repeat"in e}function ybe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function fie(e){return"sort"in e}function K0({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(ln(e)&&e.bandPosition!==void 0)return e.bandPosition;if(et(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return mm("timeUnitBandPosition",n,r);if(fi(s))return .5}}function SHe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Wu(e),u=Ir(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(et(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:mm("timeUnitBandSize",r,i)};if(fi(h)&&!fo(s))return{band:1}}if(ZA(r.type))return s?fo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function xHe(e,t,n,r){return fi(e.bin)||e.timeUnit&&Za(e)&&e.type==="temporal"?K0({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function THe(e){return e&&!!e.sort&&!e.field}function j8(e){return e&&"condition"in e}function B8(e){const t=e==null?void 0:e.condition;return!!t&&!Ne(t)&&et(t)}function JO(e){const t=e==null?void 0:e.condition;return!!t&&!Ne(t)&&ln(t)}function xbn(e){const t=e==null?void 0:e.condition;return!!t&&(Ne(t)||Lf(t))}function et(e){return e&&(!!e.field||e.aggregate==="count")}function QE(e){return e==null?void 0:e.type}function Lh(e){return e&&"datum"in e}function jg(e){return Za(e)&&!d6(e)||f6(e)}function vbe(e){return Za(e)&&e.type==="quantitative"&&!e.bin||f6(e)}function f6(e){return Lh(e)&&hr(e.datum)}function ln(e){return et(e)||Lh(e)}function Za(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Lf(e){return e&&"value"in e&&"value"in e}function M_(e){return e&&("scale"in e||"sort"in e)}function JE(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function CHe(e){return e&&"legend"in e}function AHe(e){return e&&("format"in e||"formatType"in e)}function Tbn(e){return Du(e,["legend","axis","header","scale"])}function Cbn(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Ibn(e))n=gVe("count");else{let o;if(!t.nofn)if(Cbn(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;fi(a)?(o=kVe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Ay(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):pm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!D_(l)&&(o=P_n(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Rre(n):t.expr?hVe(n,t.expr)+s:bc(n)+s}function d6(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return et(e)&&!!e.bin;case"temporal":return!1}throw new Error(UVe(e.type))}function Abn(e){var t;return M_(e)&&XE((t=e.scale)==null?void 0:t.type)}function Ibn(e){return e.aggregate==="count"}function Obn(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(fi(r))return`${n} (binned)`;if(i&&!D_(i)){const a=(o=lo(i))==null?void 0:o.unit;if(a)return`${n} (${$8(a).join("-")})`}else if(s)return Ay(s)?`${n} for max ${s.argmax}`:pm(s)?`${n} for min ${s.argmin}`:`${HO(s)} of ${n}`;return n}function Pbn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ay(t))return`${i} for argmax(${t.argmax})`;if(pm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!D_(r)?lo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||fi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const IHe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Pbn(e);default:return Obn(e,t)}};let OHe=IHe;function PHe(e){OHe=e}function kbn(){PHe(IHe)}function Fw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=die(e))==null?void 0:a.title;if(!et(e))return i??e.title;const s=e,o=r?hie(s,t):void 0;return n?cs(i,s.title,o):i??s.title??o}function die(e){if(JE(e)&&e.axis)return e.axis;if(CHe(e)&&e.legend)return e.legend;if(cie(e)&&e.header)return e.header}function hie(e,t){return OHe(e,t)}function h6(e){if(AHe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=die(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function $bn(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(fie(e)&&Ne(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ay(n)&&!pm(n))return"quantitative";if(M_(e)&&((s=e.scale)!=null&&s.type))switch(tG[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function vh(e){if(et(e))return e;if(B8(e))return e.condition}function Ls(e){if(ln(e))return e;if(JO(e))return e.condition}function kHe(e,t,n,r={}){if(pt(e)||hr(e)||_y(e)){const i=pt(e)?"string":hr(e)?"number":"boolean";return Je(R1n(t,i,e)),{value:e}}return ln(e)?p6(e,t,n,r):JO(e)?{...e,condition:p6(e.condition,t,n,r)}:e}function p6(e,t,n,r){if(AHe(e)){const{format:i,formatType:s,...o}=e;if(J1(s)&&!n.customFormatTypes)return Je(cbe(t)),p6(o,t,n,r)}else{const i=JE(e)?"axis":CHe(e)?"legend":cie(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(J1(o)&&!n.customFormatTypes)return Je(cbe(t)),p6({...e,[i]:a},t,n,r)}}return et(e)?pie(e,t,r):Rbn(e)}function Rbn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=hr(n)?"quantitative":pt(n)?"nominal":N_(n)?"temporal":void 0,{...e,type:t}}function pie(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Ure(r)&&!Ay(r)&&!pm(r)&&(Je(D1n(r)),delete a.aggregate),i&&(a.timeUnit=lo(i)),o&&(a.field=`${o}`),fi(s)&&(a.bin=U8(s,t)),To(s)&&!fs(t)&&Je(h_n(t)),Za(a)){const{type:u}=a,l=F_n(u);u!==l&&(a.type=l),u!=="quantitative"&&PVe(r)&&(Je(N1n(u,r)),a.type="quantitative")}else if(!xVe(t)){const u=$bn(a,t);a.type=u}if(Za(a)){const{compatible:u,warning:l}=Nbn(a,t)||{};u===!1&&Je(l)}if(fie(a)&&pt(a.sort)){const{sort:u}=a;if(gbe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&gbe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(cie(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function U8(e,t){return _y(e)?{maxbins:tbe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:tbe(t)}:e}const cb={compatible:!0};function Nbn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case jp:case Bp:case S8:return d6(e)?cb:{compatible:!1,warning:j1n(t)};case Ni:case mo:case Ey:case ux:case Hu:case Rh:case Nh:case qO:case WO:case x8:case Y1:case T8:case C8:case k_:case Rc:case Yf:case A8:return cb;case Xf:case wc:case Kf:case Qf:return n!==X1?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:cb;case Dm:case Sy:case xy:case Ty:case Nm:case Rm:case $m:case Gf:case $h:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:cb;case qu:case Cy:return!d6(e)&&!Abn(e)?{compatible:!1,warning:B1n(t)}:cb;case GE:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:cb}}function ZE(e){const{formatType:t}=h6(e);return t==="time"||!t&&Dbn(e)}function Dbn(e){return e&&(e.type==="temporal"||et(e)&&!!e.timeUnit)}function z8(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=lo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return YO(e)?a=e.expr:Nt(e)?a=e.signal:N_(e)?(o=!0,a=K1(e)):(pt(e)||hr(e))&&o&&(a=`datetime(${Yr(e)})`,T_n(s)&&(hr(e)&&e<1e4||pt(e)&&isNaN(Date.parse(e)))&&(a=K1({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Yr(e)}function $He(e,t){const{type:n}=e;return t.map(r=>{const i=et(e)&&!D_(e.timeUnit)?e.timeUnit:void 0,s=z8(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function ZO(e,t){return fi(e.bin)?Mm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const _be={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function eP(e){return e==null?void 0:e.condition}const RHe=["domain","grid","labels","ticks","title"],Mbn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},NHe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Lbn={...NHe,style:1,labelExpr:1,encoding:1};function bbe(e){return!!Lbn[e]}const Fbn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},DHe=Ve(Fbn);function Lm(e){return"mark"in e}class V8{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Lm(t)?hbn(t.mark)===this.name:!1}}function c1(e,t){const n=e&&e[t];return n?Ne(n)?W1(n,r=>!!r.field):et(n)||B8(n):!1}function MHe(e,t){const n=e&&e[t];return n?Ne(n)?W1(n,r=>!!r.field):et(n)||Lh(n)||JO(n):!1}function LHe(e,t){if(fs(t)){const n=e[t];if((et(n)||Lh(n))&&(iHe(n.type)||et(n)&&n.timeUnit)){const r=Lre(t);return MHe(e,r)}}return!1}function mie(e){return W1(jvn,t=>{if(c1(e,t)){const n=e[t];if(Ne(n))return W1(n,r=>!!r.aggregate);{const r=vh(n);return r&&!!r.aggregate}}return!1})}function FHe(e,t){const n=[],r=[],i=[],s=[],o={};return gie(e,(a,u)=>{if(et(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=die(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:Fw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Ay(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):pm(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const _={op:v,as:g};l&&(_.field=l),s.push(_)}}else if(n.push(g),Za(a)&&fi(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),ZO(a,u)&&n.push(at(a,{binSuffix:"range"})),fs(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",xVe(u)||(y.type=X1)}else if(d&&!D_(d)){i.push({timeUnit:d,field:l,as:g});const v=Za(a)&&a.type!==KE&&"time";v&&(u===qO||u===Y1?y.formatType=v:Kvn(u)?y.legend={formatType:v,...y.legend}:fs(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function jbn(e,t,n){const r=Qvn(t,n);if(r){if(r==="binned"){const i=e[t===Gf?Ni:mo];return!!(et(i)&&et(e[t])&&To(i.bin))}}else return!1;return!0}function Bbn(e,t,n,r){const i={};for(const s of Ve(e))SVe(s)||Je(F1n(s));for(let s of qvn){if(!e[s])continue;const o=e[s];if(GO(s)){const a=Hvn(s),u=i[a];if(et(u)&&L_n(u.type)&&et(o)&&!u.timeUnit){Je($1n(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(k1n),s=Rc),!jbn(e,s,t)){Je(k8(s,t));continue}if(s===Nm&&t==="line"){const a=vh(e[s]);if(a!=null&&a.aggregate){Je(L1n);continue}}if(s===Hu&&(n?"fill"in e:"stroke"in e)){Je(zVe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===WO||s===GE&&!Ne(o)&&!Lf(o)||s===Y1&&Ne(o)){if(o){if(s===GE){const a=e[s];if(THe(a)){i[s]=a;continue}}i[s]=ht(o).reduce((a,u)=>(et(u)?a.push(pie(u,s)):Je(eG(u,s)),a),[])}}else{if(s===Y1&&o===null)i[s]=null;else if(!et(o)&&!Lh(o)&&!Lf(o)&&!j8(o)&&!Nt(o)){Je(eG(o,s));continue}i[s]=kHe(o,s,r)}}return i}function H8(e,t){const n={};for(const r of Ve(e)){const i=kHe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Ubn(e){const t=[];for(const n of Ve(e))if(c1(e,n)){const r=e[n],i=ht(r);for(const s of i)et(s)?t.push(s):B8(s)&&t.push(s.condition)}return t}function gie(e,t,n){if(e)for(const r of Ve(e)){const i=e[r];if(Ne(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function zbn(e,t,n,r){return e?Ve(e).reduce((i,s)=>{const o=e[s];return Ne(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function jHe(e,t){return Ve(t).reduce((n,r)=>{switch(r){case Ni:case mo:case T8:case A8:case C8:case Gf:case $h:case Ey:case ux:case Rc:case Rm:case Yf:case $m:case Kf:case Xf:case Qf:case wc:case qO:case qu:case k_:case Y1:return n;case GE:if(e==="line"||e==="trail")return n;case WO:case x8:{const i=t[r];if(Ne(i)||et(i))for(const s of ht(i))s.aggregate||n.push(at(s,{}));return n}case Nm:if(e==="trail")return n;case Hu:case Rh:case Nh:case Dm:case Sy:case xy:case Cy:case Ty:{const i=vh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function Vbn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Ne(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Ne(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function iG(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${yie(t)}`:"";return{field:o+t.field,type:t.type,title:Nt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Ubn(n).map(Tbn);return{tooltip:[...i,...Nd(s,Hn)]}}function yie(e){const{title:t,field:n}=e;return cs(t,n)}function vie(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=yie(n);return BHe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function BHe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...yh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,..._y(e[t])?{}:e[t]}}]:[]}function UHe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:r$(s,n),continuousAxisChannelDef2:r$(o,n),continuousAxisChannelDefError:r$(a,n),continuousAxisChannelDefError2:r$(u,n),continuousAxis:i}}function r$(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(d_n(n,t)),r}else return e}function zHe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(yh(n)&&n.orient)return n.orient;if(jg(i)){if(jg(s)){const o=et(i)&&i.aggregate,a=et(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ZE(s)&&!ZE(i)?"horizontal":"vertical"}return"horizontal"}else{if(jg(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const m6="boxplot",Hbn=["box","median","outliers","rule","ticks"],qbn=new V8(m6,HHe);function VHe(e){return hr(e)?"tukey":e}function HHe(e,{config:t}){e={...e,encoding:H8(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=yh(n)?n:{type:n};i&&Je(BVe("boxplot"));const u=a.extent??t.boxplot.extent,l=Ir("size",a,t),c=a.invalid,f=VHe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:E}=Wbn(e,u,t),{color:b,size:T,...A}=_,C=je=>vie(a,g,m,je,t.boxplot),P=C(A),N=C(_),$=C({...A,...T?{size:T}:{}}),M=iG([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},z=f==="min-max"?M:iG([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),W=[...P({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...P({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...P({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:z}),...P({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:z})],U=[...f!=="tukey"?W:[],...N({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...$({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:U};const Y=`datum["lower_box_${m.field}"]`,q=`datum["upper_box_${m.field}"]`,D=`(${q} - ${Y})`,L=`${Y} - ${u} * ${D}`,G=`${q} + ${u} * ${D}`,V=`datum["${m.field}"]`,H={joinaggregate:qHe(m.field),groupby:y},te={transform:[{filter:`(${L} <= ${V}) && (${V} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...v],groupby:y}],layer:W},{tooltip:le,...me}=A,{scale:ye,axis:de}=m,we=yie(m),he=Du(de,["title"]),He=BHe(a,"outliers",t.boxplot,{transform:[{filter:`(${V} < ${L}) || (${V} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...we!==void 0?{title:we}:{},...ye!==void 0?{scale:ye}:{},...Gr(he)?{}:{axis:he}},...me,...b?{color:b}:{},...E?{tooltip:E}:{}}})[0];let Me;const Ke=[...d,...h,H];return He?Me={transform:Ke,layer:[He,te]}:(Me=te,Me.transform.unshift(...Ke)),{...o,layer:[Me,{transform:p,layer:U}]}}function qHe(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function Wbn(e,t,n){const r=zHe(e,m6),{continuousAxisChannelDef:i,continuousAxis:s}=UHe(e,r,m6),o=i.field,a=VHe(t),u=[...qHe(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],l=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=Vbn(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=FHe(h,n),_=r==="vertical"?"horizontal":"vertical",w=r,x=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:x,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:v,ticksOrient:_,boxOrient:w,customTooltipWithoutAggregatedField:d}}const _ie="errorbar",Gbn=["ticks","rule"],Ybn=new V8(_ie,WHe);function WHe(e,{config:t}){e={...e,encoding:H8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=GHe(e,_ie,t);delete s.size;const c=vie(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Kbn(e,t){const{encoding:n}=e;if(Xbn(n))return{orient:zHe(e,t),inputType:"raw"};const r=Qbn(n),i=Jbn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(ln(a)&&ln(u))throw new Error(`${t} cannot have both x2 and y2`);if(ln(a)){if(jg(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(ln(u)){if(jg(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(ln(u)&&!ln(a))throw new Error(`${t} cannot have xError2 without xError`);if(ln(c)&&!ln(l))throw new Error(`${t} cannot have yError2 without yError`);if(ln(a)&&ln(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(ln(a)){if(jg(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(ln(l)){if(jg(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Xbn(e){return(ln(e.x)||ln(e.y))&&!ln(e.x2)&&!ln(e.y2)&&!ln(e.xError)&&!ln(e.xError2)&&!ln(e.yError)&&!ln(e.yError2)}function Qbn(e){return ln(e.x2)||ln(e.y2)}function Jbn(e){return ln(e.xError)||ln(e.xError2)||ln(e.yError)||ln(e.yError2)}function GHe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=yh(r)?r:{type:r};s&&Je(BVe(t));const{orient:l,inputType:c}=Kbn(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=UHe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:_}=Zbn(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:x,[m==="x"?"xError":"yError"]:E,[m==="x"?"xError2":"yError2"]:b,...T}=i,{bins:A,timeUnits:C,aggregate:P,groupby:N,encoding:$}=FHe(T,n),M=[...P,...g],B=c!=="raw"?[]:N,z=iG(v,f,$,_);return{transform:[...a.transform??[],...A,...C,...M.length===0?[]:[{aggregate:M,groupby:B}],...y],groupby:B,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:$,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:z}}function Zbn(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(f_n(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:HO(h)},{fieldPrefix:"upper_",titlePrefix:wbe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:wbe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Fw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Fw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Fw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(c_n(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:G1(G1(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function wbe(e,t,n){return`${HO(e)} ${n} ${t}`}const bie="errorband",ewn=["band","borders"],twn=new V8(bie,YHe);function YHe(e,{config:t}){e={...e,encoding:H8(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=GHe(e,bie,t),l=o,c=vie(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(dbe("interpolate")):l.tension&&Je(dbe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const KHe={};function wie(e,t,n){const r=new V8(e,t);KHe[e]={normalizer:r,parts:n}}function nwn(){return Ve(KHe)}wie(m6,HHe,Hbn);wie(_ie,WHe,Gbn);wie(bie,YHe,ewn);const rwn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],XHe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},QHe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},iwn=Ve(XHe),swn=Ve(QHe),own={header:1,headerRow:1,headerColumn:1,headerFacet:1},JHe=Ve(own),ZHe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],awn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},uwn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ff="_vgsid_",lwn={point:{on:"click",fields:[Ff],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Eie(e){return e==="legend"||!!(e!=null&&e.legend)}function dz(e){return Eie(e)&&gt(e)}function Sie(e){return!!(e!=null&&e.select)}function eqe(e){const t=[];for(const n of e||[]){if(Sie(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function cwn(e){return q8(e)||Tie(e)||xie(e)}function xie(e){return"concat"in e}function q8(e){return"vconcat"in e}function Tie(e){return"hconcat"in e}function tqe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function _h(e){return gt(e)&&e.step!==void 0}function Ebe(e){return e.view||e.width||e.height}const Sbe=20,fwn={align:1,bounds:1,center:1,columns:1,spacing:1},dwn=Ve(fwn);function hwn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(F8(e)&&!QO(e.facet)||xie(e))&&(i.columns=o),q8(e)&&(i.columns=1);for(const a of dwn)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=hr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function sG(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function g6(e,t){const n=y6(e,t);return _h(n)?n.step:nqe}function y6(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return cs(n,{step:e.step})}const nqe=20,pwn={continuousWidth:200,continuousHeight:200,step:nqe},mwn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:pwn,mark:abn,arc:{},area:{},bar:cbn,circle:{},geoshape:{},image:{},line:{},point:{},rect:fbn,rule:{color:"black"},square:{},text:{color:"black"},tick:dbn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:V_n,projection:{},legend:awn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:lwn,style:{},title:{},facet:{spacing:Sbe},concat:{spacing:Sbe},normalizedNumberFormat:".0%"},Yh=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],xbe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Tbe={blue:Yh[0],orange:Yh[1],red:Yh[2],teal:Yh[3],green:Yh[4],yellow:Yh[5],purple:Yh[6],pink:Yh[7],brown:Yh[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function gwn(e={}){return{signals:[{name:"color",value:gt(e)?{...Tbe,...e}:Tbe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function ywn(e){return{signals:[{name:"fontSize",value:gt(e)?{...xbe,...e}:xbe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function vwn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function rqe(e){const t=Ve(e||{}),n={};for(const r of t){const i=e[r];n[r]=eP(i)?RVe(i):cl(i)}return n}function _wn(e){const t=Ve(e),n={};for(const r of t)n[r]=rqe(e[r]);return n}const bwn=[...pHe,...DHe,...JHe,"background","padding","legend","lineBreak","scale","style","title","view"];function iqe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=XS({},tn(mwn),n?vwn(n):{},t?gwn(t):{},r?ywn(r):{},s||{});i&&QS(o,"selection",i,!0);const a=Du(o,bwn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=cl(o[u]));for(const u of pHe)o[u]&&(a[u]=wu(o[u]));for(const u of DHe)o[u]&&(a[u]=rqe(o[u]));for(const u of JHe)o[u]&&(a[u]=wu(o[u]));return o.legend&&(a.legend=wu(o.legend)),o.scale&&(a.scale=wu(o.scale)),o.style&&(a.style=_wn(o.style)),o.title&&(a.title=wu(o.title)),o.view&&(a.view=wu(o.view)),a}const wwn=new Set(["view",...tbn]),Ewn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Swn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...obn};function xwn(e){e=tn(e);for(const t of Ewn)delete e[t];if(e.axis)for(const t in e.axis)eP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of rwn)delete e.legend[t];if(e.mark){for(const t of pbe)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(eqe(e.params)),delete e.params);for(const t of wwn){for(const r of pbe)delete e[t][r];const n=Swn[t];if(n)for(const r of n)delete e[t][r];Cwn(e,t)}for(const t of nwn())delete e[t];Twn(e);for(const t in e)gt(e[t])&&Gr(e[t])&&delete e[t];return Gr(e)?void 0:e}function Twn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=$Ve(e.title);Gr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Gr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Gr(r)?delete e.title:e.title=r}function Cwn(e,t,n,r){const i=r?e[t][r]:e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Gr(s)||(e.style[n??t]=s),r||delete e[t]}function W8(e){return"layer"in e}function Awn(e){return"repeat"in e}function Iwn(e){return!Ne(e.repeat)&&e.repeat.layer}class Cie{map(t,n){return F8(t)?this.mapFacet(t,n):Awn(t)?this.mapRepeat(t,n):Tie(t)?this.mapHConcat(t,n):q8(t)?this.mapVConcat(t,n):xie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(W8(t))return this.mapLayer(t,n);if(Lm(t))return this.mapUnit(t,n);throw new Error(zre(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Own={zero:1,center:1,normalize:1};function Pwn(e){return e in Own}const kwn=new Set([fHe,N8,R8,l6,M8,iie,sie,D8,dHe,rie]),$wn=new Set([N8,R8,fHe]);function fb(e){return et(e)&&QE(e)==="quantitative"&&!e.bin}function Cbe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(et(o)&&et(a))if(fb(o)&&fb(a)){if(o.stack)return t;if(a.stack)return i;const u=et(o)&&!!o.aggregate,l=et(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(fb(o))return t;if(fb(a))return i}else{if(fb(o))return s&&n==="vertical"?void 0:t;if(fb(a))return s&&n==="horizontal"?void 0:i}}function Rwn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function sqe(e,t){var m,g;const n=yh(e)?e:{type:e},r=n.type;if(!kwn.has(r))return null;const i=Cbe(t,"x",n)||Cbe(t,"theta",n);if(!i)return null;const s=t[i],o=et(s)?at(s,{}):void 0,a=Rwn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=et(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=et(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Wvn.reduce((y,v)=>{if(v!=="tooltip"&&c1(t,v)){const _=t[v];for(const w of ht(_)){const x=vh(w);if(x.aggregate)continue;const E=at(x,{});(!E||!l.has(E))&&y.push({channel:v,fieldDef:x})}}return y},[]);let p;return s.stack!==void 0?_y(s.stack)?p=s.stack?"zero":null:p=s.stack:$wn.has(r)&&(p="zero"),!p||!Pwn(p)||mie(t)&&h.length===0?null:(m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Mu.LINEAR?(s!=null&&s.stack&&Je(a_n(s.scale.type)),null):ln(t[Dh(i)])?(s.stack!==void 0&&Je(o_n(i)),null):(et(s)&&s.aggregate&&!i1n.has(s.aggregate)&&Je(u_n(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Oy(r),stackBy:h,offset:p})}function oqe(e,t,n){const r=wu(e),i=Ir("orient",r,n);if(r.orient=Lwn(r.type,t,i),i!==void 0&&i!==r.orient&&Je(H1n(r.orient,i)),r.type==="bar"&&r.orient){const u=Ir("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:lbn[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Ir("opacity",r,n),o=Ir("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=Dwn(r.type,t)),Ir("cursor",r,n)===void 0&&(r.cursor=Nwn(r,t,n)),r}function Nwn(e,t,n){return t.href||e.href||Ir("href",e,n)?"pointer":e.cursor}function Dwn(e,t){if(qn([M8,rie,iie,sie],e)&&!mie(t))return .7}function Mwn(e,t,{graticule:n}){if(n)return!1;const r=mm("filled",e,t),i=e.type;return cs(r,i!==M8&&i!==D8&&i!==l6)}function Lwn(e,t,n){switch(e){case M8:case iie:case sie:case dHe:case Z_n:case J_n:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case N8:if(et(r)&&(To(r.bin)||et(i)&&i.aggregate&&!r.aggregate))return"vertical";if(et(i)&&(To(i.bin)||et(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(et(r)&&r.type===X1&&!fi(r.bin)||f6(r))&&et(i)&&To(i.bin)?"horizontal":"vertical";if(!o)return(et(i)&&i.type===X1&&!fi(i.bin)||f6(i))&&et(r)&&To(r.bin)?"vertical":"horizontal"}case l6:if(s&&!(et(r)&&To(r.bin))&&o&&!(et(i)&&To(i.bin)))return;case R8:if(o)return et(i)&&To(i.bin)?"horizontal":"vertical";if(s)return et(r)&&To(r.bin)?"vertical":"horizontal";if(e===l6){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case D8:case rie:{const a=vbe(r),u=vbe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Za(r)&&r.type===KE,c=Za(i)&&i.type===KE;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Fwn(e){const{point:t,line:n,...r}=e;return Ve(r).length>1?r:r.type}function jwn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Du(e[t],["point","line"])});return e}function hz(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function Abe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Bwn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Lm(t)){const{mark:r,encoding:i}=t,s=yh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!hz(s,n[s.type],i);case"area":return!!hz(s,n[s.type],i)||!!Abe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=H8(l,i),d=yh(a)?a:{type:a},h=hz(d,i[d.type],f),p=d.type==="area"&&Abe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Fwn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Du(f,["shape"])}],g=sqe(oqe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:_}=g;y={...f,[v]:{...f[v],..._?{stack:_}:{}}}}return y=Du(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...qE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...qE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:jwn(i)})}}function Uwn(e,t){return t?QO(e)?uqe(e,t):aqe(e,t):e}function pz(e,t){return t?uqe(e,t):e}function oG(e,t,n){const r=t[e];if(Sbn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(x1n(r.repeat));return}return t}function aqe(e,t){if(e=oG("field",e,t),e!==void 0){if(e===null)return null;if(fie(e)&&Zd(e.sort)){const n=oG("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Ibe(e,t){if(et(e))return aqe(e,t);{const n=oG("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Obe(e,t){if(ln(e)){const n=Ibe(e,t);if(n)return n;if(j8(e))return{condition:e.condition}}else{if(JO(e)){const n=Ibe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function uqe(e,t){const n={};for(const r in e)if(Vt(e,r)){const i=e[r];if(Ne(i))n[r]=i.map(s=>Obe(s,t)).filter(s=>s);else{const s=Obe(i,t);s!==void 0&&(n[r]=s)}}return n}class zwn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Lm(t)){const{encoding:n,mark:r}=t;if(r==="line"||yh(r)&&r.type==="line")for(const i of Vvn){const s=$_(i),o=n[s];if(n[i]&&(et(o)&&!To(o.bin)||Lh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(V1n(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class Vwn extends Cie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[qbn,Ybn,twn,new Bwn,new zwn]}map(t,n){if(Lm(t)){const r=c1(t.encoding,jp),i=c1(t.encoding,Bp),s=c1(t.encoding,S8);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=pz(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return Iwn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ri(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Ne(r)&&t.columns&&(t=Du(t,["columns"]),Je(ube("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Ne(r)&&r.row||[u?u.row:null],f=!Ne(r)&&r.column||[u?u.column:null],d=Ne(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Ne(r)?`${Ri(p)}`:(r.row?`row_${Ri(m)}`:"")+(r.column?`column_${Ri(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:v});_.name=v,a.push(Du(_,["data"]))}const h=Ne(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return QO(r)&&t.columns&&(t=Du(t,["columns"]),Je(ube("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=kbe({parentProjection:o,projection:i}),l=Pbe({parentEncoding:s,encoding:pz(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=pz(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(U1n([...r?[jp]:[],...i?[Bp]:[]]));const o={},a={};for(const u of[jp,Bp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Uwn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Pbe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:kbe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Pbe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ve(e),...Ve(t)]);for(const s of i){const o=t[s],a=e[s];if(ln(o)){const u={...a,...o};r[s]=u}else JO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Lf(a)||Nt(a)||ln(a)||Ne(a))&&(r[s]=a)}}else r=t;return!r||Gr(r)?void 0:r}function kbe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(P1n({parentProjection:t,projection:n})),n??t}function Aie(e){return"filter"in e}function Hwn(e){return(e==null?void 0:e.stop)!==void 0}function lqe(e){return"lookup"in e}function qwn(e){return"data"in e}function Wwn(e){return"param"in e}function Gwn(e){return"pivot"in e}function Ywn(e){return"density"in e}function Kwn(e){return"quantile"in e}function Xwn(e){return"regression"in e}function Qwn(e){return"loess"in e}function Jwn(e){return"sample"in e}function Zwn(e){return"window"in e}function eEn(e){return"joinaggregate"in e}function tEn(e){return"flatten"in e}function nEn(e){return"calculate"in e}function cqe(e){return"bin"in e}function rEn(e){return"impute"in e}function iEn(e){return"timeUnit"in e}function sEn(e){return"aggregate"in e}function oEn(e){return"stack"in e}function aEn(e){return"fold"in e}function uEn(e){return"extent"in e&&!("density"in e)}function lEn(e){return e.map(t=>Aie(t)?{filter:Mw(t.filter,M_n)}:t)}class cEn extends Cie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=$be(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=$be(t,n),t.encoding){const r={};for(const[i,s]of G0(t.encoding))r[i]=fqe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:G0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function $be(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Aie(s))return{filter:aG(s,t)};if(cqe(s)&&R_(s.bin))return{...s,bin:dqe(s.bin)};if(lqe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function fqe(e,t){var r,i;const n=tn(e);if(et(n)&&R_(n.bin)&&(n.bin=dqe(n.bin)),M_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(j8(n))if(Ne(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:aG(s,t)}});else{const{selection:s,param:o,test:a,...u}=fqe(n.condition,t);n.condition=o?n.condition:{...u,test:aG(n.condition,t)}}return n}function dqe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function aG(e,t){const n=r=>Mw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Mw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class uG extends Cie{map(t,n){const r=n.selections??[];if(t.params&&!Lm(t)){const i=[];for(const s of t.params)Sie(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(pt(a)&&(a===t.name||i.includes(a))||Ne(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=uG.prototype[e];uG.prototype[e]=function(n,r){return t.call(this,n,fEn(n,r))}}function fEn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function hqe(e,t){t===void 0&&(t=iqe(e.config));const n=mEn(e,t),{width:r,height:i}=e,s=gEn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const dEn=new Vwn,hEn=new cEn,pEn=new uG;function mEn(e,t={}){const n={config:t};return pEn.map(dEn.map(hEn.map(e,n),n),n)}function Rbe(e){return pt(e)?{type:e}:e??{}}function gEn(e,t,n){let{width:r,height:i}=t;const s=Lm(e)||W8(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(ibe("width")),r=void 0),i=="container"&&(Je(ibe("height")),i=void 0));const a={type:"pad",...o,...n?Rbe(n.autosize):{},...Rbe(e.autosize)};if(a.type==="fit"&&!s&&(Je(h1n),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(sbe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(sbe("height")),!ml(a,{type:"pad"}))return a}function yEn(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function vEn(e){return e?`fit-${I8(e)}`:"fit"}const _En=["background","padding"];function Nbe(e,t){const n={};for(const r of _En)e&&e[r]!==void 0&&(n[r]=cl(e[r]));return t&&(n.params=e.params),n}class Fm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Fm(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return cs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ve(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function pd(e){return{explicit:!0,value:e}}function tl(e){return{explicit:!1,value:e}}function pqe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:G8(t,n,r,i)}}function G8(e,t,n,r){return e.explicit&&t.explicit&&Je(Z1n(n,r,e.value,t.value)),e}function X0(e,t,n,r,i=G8){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ml(e.value,t.value)?e:i(e,t,n,r)}class bEn extends Fm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function eS(e){return"url"in e}function eI(e){return"values"in e}function mqe(e){return"name"in e&&!eS(e)&&!eI(e)&&!d0(e)}function d0(e){return e&&(gqe(e)||yqe(e)||Iie(e))}function gqe(e){return"sequence"in e}function yqe(e){return"sphere"in e}function Iie(e){return"graticule"in e}var ui;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(ui||(ui={}));function vqe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=bc(i.field),i}function Z1(e,t=!0,n=Ea){if(Ne(e)){const r=e.map(i=>Z1(i,t,n));return t?`[${r.join(", ")}]`:r}else if(N_(e))return n(t?K1(e):x_n(e));return t?n(Yr(e)):e}function wEn(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${J0}, ${n.resolve==="global"?"true":`{unit: ${f1(e)}}`}`;for(const s of Q8)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+ZEn,on:[{events:{signal:n.name+J0},update:`modify(${st(n.name+e_)}, ${i})`}]})}return Oie(t)}function EEn(e,t){if(e.component.selection&&Ve(e.component.selection).length){const n=st(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:wy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Oie(t)}function SEn(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=st(i+e_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Mqe}(${s}, ${st(a)}${u}`})}n=!0;for(const a of Q8)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Oie(t)}function xEn(e,t){const n=[...t],r=f1(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+e_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Ff}}]),i.init){const a=i.project.items.map(vqe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Ff]:Z1(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Z1(u,!1)}))}n.filter(a=>a.name===i.name+e_).length||n.push(s)}return n}function _qe(e,t){for(const n of Mo(e.component.selection??{}))for(const r of Q8)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function TEn(e,t){for(const n of e.children)Ji(n)&&(t=_qe(n,t));return t}function CEn(e,t,n,r){const i=Uqe(e,t.param,t);return{signal:kl(n.get("type"))&&Ne(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Oie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ur{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(A1n);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class qa extends Ur{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${mVe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function mz(e){return e.as!==void 0}function Dbe(e){return`${e}_end`}class eh extends Ur{clone(){return new eh(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(D_(u)){if(Ji(n)){const{mark:c,markDef:f,config:d}=n,h=K0({fieldDef:s,markDef:f,config:d});(ZA(c)||h)&&(l={timeUnit:lo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Ji(n)){const{mark:c,markDef:f,config:d}=n,h=K0({fieldDef:s,markDef:f,config:d});ZA(c)&&fs(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Hn(l)]=l)}return i},{});return Gr(r)?null:new eh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=lo(r),o={...i,timeUnit:s};return new eh(t,{[Hn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of G0(this.timeUnits)){const s=mz(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>mz(t)?t.as:Dbe(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Hn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=lo(n.timeUnit);if(mz(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:bc(s),type:"timeunit",...a?{units:$8(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Mbe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=bqe({timeUnit:i,field:o}),u=Dbe(o);t.push({type:"formula",expr:a,as:u}),t.push(...Mbe([o,u],r,i))}}return t}}const Y8="offsetted_rect_start",K8="offsetted_rect_end";function bqe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=QVe(r),{part:o,step:a}=tHe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Mbe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Lbe([bqe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Y8}`},{type:"formula",expr:Lbe([i,s],n+.5),as:`${e}_${K8}`}]}return[]}function Lbe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const tP="_tuple_fields";class AEn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const IEn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new AEn),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ri(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ri(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ht(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ve(p))zvn(m)?(h||(h=[])).push(m):l==="interval"?(Je(S1n),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(p1n(p,m.aggregate));continue}else if(!g){Je(abe(p));continue}if(m.timeUnit&&!D_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Hn(y)]=y}if(!s[g]){const y=l==="interval"&&Mm(p)&&kl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Ff,wVe(p)?(v.geoChannel=p,v.channel=bVe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(abe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Ff}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Gr(o)||(i.timeUnit=new eh(null,o))},signals:(e,t,n)=>{const r=t.name+tP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(vqe)})}},Up={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Mm(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(v1n),!s||!kl(o)){Je(y1n);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Fbe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(Mqe)>=0)i.update=`{${r.map(o=>`${st(bc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${st(bc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Fbe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function lG(e,t){return`domain(${st(e.scaleName(t))})`}function Fbe(e){return e.parent&&px(e.parent)&&!e.parent.parent}const jw="_brush",wqe="_scale_trigger",_T="geo_interval_init_tick",Eqe="_init",OEn="_center",PEn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[Ff],i.encodings||(i.encodings=n.value?Ve(n.value):[Xf,Kf]),n.select={type:"interval",...i}}if(t.translate&&!Up.defined(t)){const i=`!event.item || event.item.mark.name !== ${st(t.name+jw)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=ht((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+J0,s=Mo(t.project.hasChannel).filter(a=>a.channel===Ni||a.channel===mo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(kEn(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=st(e.projectionName()),u=e.projectionName()+OEn,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=x=>e.getSizeSignalRef(x).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+Eqe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(E=>E.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${st(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${f1(e)}}`,_=`vlSelectionTuples(${y}, ${v})`,w=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:_T}]:[]],update:_}]})}else{if(!Up.defined(t)){const l=r+wqe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=st(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=kl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${f1(e)}, fields: ${r+tP}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Z1(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ji(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===_T).length||n.unshift({name:_T,value:null,on:[{events:"timer{1}",update:`${_T} === null ? {} : ${_T}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${st(t.name+e_)})`;if(Up.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ve(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${f1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ve(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+jw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+jw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function kEn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=st(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ni?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Up.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Z1(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+wqe},update:kl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Z1(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ni?0:1,h=t.name+Eqe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const $En={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+tP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+jw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${f1(e)}, `;if(t.project.hasSelectionId)l+=`${Ff}: ${o}[${st(Ff)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${st(e.vgField(d.channel,{}))}], ${o}[${st(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${st(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+J0,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function cx(e,t,n,r){const i=j8(t)&&t.condition,s=r(t);if(i){const a=ht(i).map(u=>{const l=r(u);if(Ebn(u)){const{param:c,empty:f}=u;return{test:Bqe(e,{param:c,empty:f}),...l}}else return{test:b6(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Pie(e,t="text"){const n=e.encoding[t];return cx(e,n,t,r=>X8(r,e.config))}function X8(e,t,n="datum"){if(e){if(Lf(e))return _i(e.value);if(ln(e)){const{format:r,formatType:i}=h6(e);return lie({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Sqe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Ne(o))return{tooltip:jbe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return cx(e,o,"tooltip",u=>{const l=X8(u,i,a);if(l)return l;if(u===null)return;let c=Ir("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),pt(c))return{value:c};if(gt(c))return Nt(c)?c:c.content==="encoding"?jbe(n,s,i,t):{signal:a}})}}function xqe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=$_(f),h=Za(c)?c:{...c,type:e[d].type},p=h.title||hie(h,i),m=ht(p).join(", ").replaceAll(/"/g,'\\"');let g;if(fs(f)){const y=f==="x"?"x2":"y2",v=vh(e[y]);if(To(h.bin)&&v){const _=at(h,{expr:o}),w=at(v,{expr:o}),{format:x,formatType:E}=h6(h);g=XO(_,w,x,E,i),s[y]=!0}}if((fs(f)||f===Rc||f===Yf)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=h6(h);g=lie({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=X8(h,i,o).signal),a.push({channel:f,key:m,value:g})}gie(e,(c,f)=>{et(c)?u(c,f):B8(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function jbe(e,t,n,{reactiveGeom:r}={}){const i=xqe(e,t,n,{reactiveGeom:r}),s=G0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function REn(e){const{markDef:t,config:n}=e,r=Ir("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...NEn(e),...DEn(e)}}function NEn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Ir("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in c1n?{}:{ariaRoleDescription:{value:t}}}function DEn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return cx(e,s,"description",u=>X8(u,e.config));const o=Ir("description",n,r);if(o!=null)return{description:_i(o)};if(r.aria===!1)return{};const a=xqe(t,i,r);if(!Gr(a))return{description:{signal:G0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function no(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Ir(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=_i(u)));const l=i[e];return cx(t,l,o??e,c=>uie({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function Tqe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Ir("filled",n,i),a=qn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Ir(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Ir(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:_i(u)}:{},...l?{stroke:_i(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(zVe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...no("color",e,{vgChannel:c,defaultValue:o?u:l}),...no("fill",e,{defaultValue:r.fill?u:void 0}),...no("stroke",e,{defaultValue:r.stroke?l:void 0})}}function MEn(e){const{encoding:t,mark:n}=e,r=t.order;return!Oy(n)&&Lf(r)?cx(e,r,"zindex",i=>_i(i.value)):{}}function tS({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:uie({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:_i(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function da(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Dh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=tS({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=kie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&fs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:LEn({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function LEn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(ln(n)&&i&&t===i.fieldChannel){if(et(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return c6({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return l1(n,r,{suffix:"end"},{offset:s})}return oie(e)}function kie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=$_(n),u=Y0(n),l=Ir(n,s,o,{vgChannel:u});if(l!==void 0)return yC(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!qn([Mu.LOG,Mu.TIME,Mu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Wu(n)],mult:.5}}}}const FEn={left:"x",center:"xc",right:"x2"},jEn={top:"y",middle:"yc",bottom:"y2"};function Cqe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Y0(e);const i=e==="x"?"align":"baseline",s=Ir(i,t,n);let o;return Nt(s)?(Je(z1n(i)),o=void 0):o=s,e==="x"?FEn[o||(r==="top"?"left":"center")]:jEn[o||r]}function v6(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Aqe(e,t,{defaultPos:n,defaultPos2:r}):da(e,t,{defaultPos:n})}function Aqe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Dh(e),a=Wu(e),u=BEn(t,r,o),l=u[a]?Cqe(e,i,s):Y0(e);return{...da(e,t,{defaultPos:n,vgChannel:l}),...u}}function BEn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=$_(n),l=Wu(n),c=Y0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?tS({channel:n,markDef:s,encoding:r,model:e}):tS({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Wu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=UEn({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:i$(n,s)||i$(n,{[n]:a6(n,s,a.style),[l]:a6(l,s,a.style)})||i$(n,a[i])||i$(n,a.mark)||{[c]:kie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function UEn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return ln(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?l1(t,s,{suffix:"start"},{offset:u}):oie({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function i$(e,t){const n=Wu(e),r=Y0(e);if(t[r]!==void 0)return{[r]:yC(e,t[r])};if(t[e]!==void 0)return{[r]:yC(e,t[e])};if(t[n]){const i=t[n];if(Q1(i))Je(M1n(n));else return{[n]:yC(e,i)}}}function Q0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Dh(t),a=Wu(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Ir("size",i,n,{vgChannel:a}),p=TVe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return et(u)&&(fi(u.bin)||To(u.bin)||u.timeUnit&&!l)&&!(h&&!Q1(h))&&!r[p]&&!fo(f)?HEn({fieldDef:u,fieldDef2:l,channel:t,model:e}):(ln(u)&&fo(f)||m)&&!l?VEn(u,t,e):Aqe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function zEn(e,t,n,r,i,s,o){if(Q1(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=mm("minBandSize",{type:o},r);return{signal:c?`max(${gf(c)}, ${l})`:l}}else i.band!==1&&(Je(W1n(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Iy(u)&&hr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=cs(u,o==="bar"?l:c);if(Nt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(hr(f))return{signal:`${1-f} * ${e}`}}return{value:g6(r.view,e)-2}}function VEn(e,t,n){var A,C;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Wu(t),f=Dh(t),d=TVe(t),h=n.scaleName(d),p=n.getScaleComponent(Lre(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=no("size",n,{vgChannel:c,defaultRef:_i(r.size)}):Je(X1n(r.type)));const y=!!g,v=SHe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:zEn(c,h||u,p||l,s,v,!!e,r.type)};const _=((C=l||p)==null?void 0:C.get("type"))==="band"&&Q1(v)&&!y?"top":"middle",w=Cqe(t,r,s,_),x=w==="xc"||w==="yc",{offset:E,offsetType:b}=tS({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),T=oie({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:E,defaultRef:kie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:x?b==="encoding"?0:.5:Nt(v)?{signal:`(1-${v})/2`}:Q1(v)?(1-v.band)/2:0});if(c)return{[w]:T,...g};{const P=Y0(f),N=g[c],$=E?{...N,offset:E}:N;return{[w]:T,[P]:Ne(T)?[T[0],{...T[1],offset:$}]:{...T,offset:$}}}}function Bbe(e,t,n,r,i,s,o){if(_Ve(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Nt(n)||Nt(i)||Nt(r)||s){const l=gf(n),c=gf(i),f=gf(r),d=gf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function HEn({fieldDef:e,fieldDef2:t,channel:n,model:r}){var C;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=SHe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(C=r.component.axes[n])==null?void 0:C[0],h=(d==null?void 0:d.get("translate"))??.5,p=fs(n)?Ir("binSpacing",s,i)??0:0,m=Dh(n),g=Y0(n),y=Y0(m),v=mm("minBandSize",s,i),{offset:_}=tS({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=tS({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),x=ybn({fieldDef:e,scaleName:u}),E=Bbe(n,p,c,h,_,v,x),b=Bbe(m,p,c,h,w??_,v,x),T=Nt(f)?{signal:`(1-${f.signal})/2`}:Q1(f)?(1-f.band)/2:.5,A=K0({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(fi(e.bin)||e.timeUnit){const P=e.timeUnit&&A!==.5;return{[y]:Ube({fieldDef:e,scaleName:u,bandPosition:T,offset:b,useRectOffsetField:P}),[g]:Ube({fieldDef:e,scaleName:u,bandPosition:Nt(T)?{signal:`1-${T.signal}`}:1-T,offset:E,useRectOffsetField:P})}}else if(To(e.bin)){const P=l1(e,u,{},{offset:b});if(et(t))return{[y]:P,[g]:l1(t,u,{},{offset:E})};if(R_(e.bin)&&e.bin.step)return{[y]:P,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:E}}}Je(qVe(m))}function Ube({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return c6({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Y8,endSuffix:K8}:{}})}const qEn=new Set(["aria","width","height"]);function Nc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?Tqe(e):{};return{...WEn(e.markDef,t),...zbe(e,"fill",n),...zbe(e,"stroke",r),...no("opacity",e),...no("fillOpacity",e),...no("strokeOpacity",e),...no("strokeWidth",e),...no("strokeDash",e),...MEn(e),...Sqe(e),...Pie(e,"href"),...REn(e)}}function zbe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Ir("invalid",s,r)==="hide"&&n&&!Oy(i)){const a=GEn(e,{invalid:!0,channels:O8});if(a)return{[t]:[{test:a,value:null},...ht(n)]}}return n?{[t]:n}:{}}function WEn(e,t){return l1n.reduce((n,r)=>(!qEn.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=_i(e[r])),n),{})}function GEn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&kl(u)&&(s[l]=!0)}return s},{}),i=Ve(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>aie(o,t)).join(` ${s} `)}}function $ie(e){const{config:t,markDef:n}=e;if(Ir("invalid",n,t)){const i=YEn(e,{channels:Mh});if(i)return{defined:{signal:i}}}return{}}function YEn(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&kl(l)&&(s[c]=!0)}return s},{}),i=Ve(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>aie(o,t)).join(` ${s} `)}}function Vbe(e,t){if(t!==void 0)return{[e]:_i(t)}}const gz="voronoi",Iqe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(gz)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Oy(s))return Je(m1n(s)),n;const o={name:e.getName(gz),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Sqe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(gz)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},Oqe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Eie(e.bind),parse:(e,t,n)=>Lqe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=Iqe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ri(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Z1(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${st(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+J0)[0],o=r+tP,a=i.items.map(l=>Ri(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},_6="_toggle",Pqe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+_6,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+J0,r=t.name+_6;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${f1(e)}}, `)+`${r} ? ${n} : null`}},KEn={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=pt(t.clear)?wy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Oqe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ri(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+J0);r(i,"null"),Pqe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+_6),r(i,"false"))}return n}},kqe={defined:e=>{const t=e.resolve==="global"&&e.bind&&Eie(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ff;return t&&!n&&Je(_1n),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Lqe(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ht(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=dz(t.bind)?t.bind.legend:"click",s=pt(i)?wy(i,"view"):ht(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=dz(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ri(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+J0),o=r+tP,a=i.items.filter(d=>d.hasLegend).map(d=>Ri(`${r}_${Ri(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+_6),f=dz(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function XEn(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&kqe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const $qe="_translate_anchor",Rqe="_translate_delta",QEn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Up.defined(t),s=r+$qe,{x:o,y:a}=t.project.hasChannel;let u=wy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+jw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?lG(e,Ni):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?lG(e,mo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+Rqe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Hbe(e,t,o,"width",n),a!==void 0&&Hbe(e,t,a,"height",n),n}};function Hbe(e,t,n,r,i){const s=t.name,o=s+$qe,a=s+Rqe,u=n.channel,l=Up.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ni?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const Nqe="_zoom_anchor",Dqe="_zoom_delta",JEn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Up.defined(t),s=r+Dqe,{x:o,y:a}=t.project.hasChannel,u=st(e.scaleName(Ni)),l=st(e.scaleName(mo));let c=wy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+jw,f))),n.push({name:r+Nqe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&qbe(e,t,o,"width",n),a!==void 0&&qbe(e,t,a,"height",n),n}};function qbe(e,t,n,r,i){const s=t.name,o=n.channel,a=Up.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?lG(e,o):u.name,h=s+Dqe,p=`${s}${Nqe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const e_="_store",J0="_tuple",ZEn="_modify",Mqe="vlSelectionResolve",Q8=[$En,PEn,IEn,Pqe,Oqe,Up,kqe,KEn,QEn,JEn,Iqe];function eSn(e){let t=e.parent;for(;t&&!wl(t);)t=t.parent;return t}function f1(e,{escape:t}={escape:!0}){let n=t?st(e.name):e.name;const r=eSn(e);if(r){const{facet:i}=r;for(const s of sc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${st(r.vgField(s))}])`)}return n}function Rie(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Lqe(e,t){(pt(t.select)||!t.select.on)&&delete e.events,(pt(t.select)||!t.select.clear)&&delete e.clear,(pt(t.select)||!t.select.toggle)&&delete e.toggle}function cG(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...cG(e.object)),t.push(...cG(e.property))),t)}function Fqe(e){return e.object.type==="MemberExpression"?Fqe(e.object):e.object.name==="datum"}function jqe(e){const t=Jne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Fqe(r)&&n.add(cG(r).slice(1).join("."))}),n}class fx extends Ur{clone(){return new fx(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=b6(this.model,this.filter,this),this._dependentFields=jqe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function tSn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ri(i.name),o=i.select,a=pt(o)?o:o.type,u=gt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:pt(u.on)?wy(u.on,"scope"):ht(tn(u.on))},f=tn(i);for(const d of Q8)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Bqe(e,t,n,r="datum"){const i=pt(t)?t:t.param,s=Ri(i),o=st(s+e_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${st(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function Uqe(e,t,n){const r=Ri(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${st(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${st(i)} encoding found for selection ${st(n.param)}. Using "field": ${st(s)}.`)):s=a[0].field}return`${o.name}[${st(bc(s))}]`}function nSn(e,t){for(const[n,r]of G0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new qa(new fx(t,e,{param:n}),i,ui.Lookup,e.component.data.outputNodeRefCounts)}}function b6(e,t,n){return gC(t,r=>pt(r)?r:R_n(r)?Bqe(e,r,n):rHe(r))}function rSn(e,t){if(e)return Ne(e)&&!dg(e)?e.map(n=>hie(n,t)).join(", "):e}function yz(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function p2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Mbn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(eP(m)){const{condition:g,...y}=m,v=ht(g),_=_be[h];if(_){const{vgProp:w,part:x}=_,E=[...v.map(b=>{const{test:T,...A}=b;return{test:b6(null,T),...A}}),y];yz(c,x,w,E),delete c[h]}else if(_===null){const w={signal:v.map(x=>{const{test:E,...b}=x;return`${b6(null,E)} ? ${rbe(b)} : `}).join("")+rbe(y)};c[h]=w}}else if(Nt(m)){const g=_be[h];if(g){const{vgProp:y,part:v}=g;yz(c,v,y,m),delete c[h]}}qn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Gr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:cs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Nt(c.encode.labels.update.text)&&(p=G1(a,"datum.label",c.encode.labels.update.text.signal)),yz(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of RHe)e.hasAxisPart(p)||delete c.encode[p];Gr(c.encode)&&delete c.encode}const h=rSn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:cs(l,0)}}}}function zqe(e){const{axes:t}=e.component,n=[];for(const r of Mh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function iSn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>p2(i,"grid",t)),...r.map(i=>p2(i,"grid",t)),...n.map(i=>p2(i,"main",t)),...r.map(i=>p2(i,"main",t))].filter(i=>i)}function Wbe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ve(o),...Ve(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${gf(o[c])} : ${gf(a[c])}`};return l}return t[i]})])}function sSn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:aHe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Nt(n)?"axisOrient":`axis${HO(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Wbe(a,r,e,n),vgAxisConfig:Wbe(u,r,e,n),axisConfigStyle:oSn([...u,...a],r)}}function oSn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ht(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function fG(e,t,n,r={}){var s;const i=DVe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Gbe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??aSn(n,e),gridScale:({model:e,channel:t})=>uSn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Hqe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Vqe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??cSn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??fSn(t.type,n,et(t)&&!!t.timeUnit,et(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??hSn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:pSn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=qqe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return LVe(i?[ybe(i)]:[],et(o)?[ybe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>mSn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??gSn(n,t)};function aSn(e,t){return!fo(e)&&et(t)&&!fi(t==null?void 0:t.bin)&&!To(t==null?void 0:t.bin)}function uSn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function lSn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Nt(s)?s:JA(s);{const{configValue:o}=fG("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?JA(o):n===Ni&&qn([nie,tie],e.type)&&!(et(e)&&e.timeUnit)?270:void 0}}function dG(e){return`(((${e.signal} % 360) + 360) % 360)`}function Vqe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nt(e)){const i=dG(e),s=Nt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nt(e)){const i=dG(e),s=Nt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Hqe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Nt(e)){const o=dG(e),a=Nt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function cSn(e,t){if(t==="x"&&qn(["quantitative","temporal"],e))return!0}function fSn(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function dSn(e){return e==="x"?"bottom":"left"}function hSn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!fo(t)&&t!=="log"){if(et(e)){if(fi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&qn(["month","hours","day","quarter"],(i=lo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function pSn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(et(t)){const{timeUnit:n}=t;if(n){const r=eHe(n);if(r)return{signal:r}}}}function qqe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return FVe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function mSn(e,t){const n=e.values;if(Ne(n))return $He(t,n);if(Nt(n))return n}function gSn(e,t){return e==="rect"&&d6(t)?1:0}class nS extends Ur{clone(){return new nS(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=jqe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(M_(r)&&EHe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${rHe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new nS(t,{calculate:u,as:rS(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Hn(this.transform)}`}}function rS(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function J8(e,t){return qn(["top","bottom"],t)?"column":qn(["left","right"],t)||e==="row"?"row":"column"}function iS(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return cs((t||{})[e],i[e],n.header[e])}function Z8(e,t,n,r){const i={};for(const s of e){const o=iS(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Nie=["row","column"],Die=["header","footer"];function ySn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Z8(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=J8(t,a),l=JA(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Gqe(l,u),...Wqe(u,l,s),...Yqe(r,i,t,iwn,XHe)}}}function Wqe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Hqe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Gqe(e,t){const n=Vqe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function vSn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Die)if(n[i])for(const s of n[i]){const o=bSn(e,t,i,n,s);o!=null&&r.push(o)}return r}function _Sn(e,t){const{sort:n}=e;return Zd(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:Ne(n)?{field:rS(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function hG(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=Z8(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=lie({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=J8(t,a);return{text:{signal:u?G1(G1(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Gqe(s,c),...Wqe(c,s,o),...Yqe(n,e,t,swn,QHe)}}function bSn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=Z8(["labelOrient"],o.header,a,t);(t==="row"&&!qn(["top","bottom"],f)||t==="column"&&!qn(["left","right"],f))&&(s=hG(o,t,a))}const u=wl(e)&&!QO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:_Sn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const wSn={column:{start:0,end:1},row:{start:1,end:0}};function ESn(e,t){return wSn[t][e]}function SSn(e,t){const n={};for(const r of sc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=Z8(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=J8(r,o),u=ESn(s,a);u!==void 0&&(n[a]=u)}}return Gr(n)?void 0:n}function Yqe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=iS(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Mie(e){return[...s$(e,"width"),...s$(e,"height"),...s$(e,"childWidth"),...s$(e,"childHeight")]}function s$(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(fo(o)&&Iy(a)){const u=e.scaleName(n);return wl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Ybe(u,a)]:[Ybe(u,a),{name:i,update:Kqe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=sG(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Ybe(e,t){const n=`${e}_step`;return Nt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Kqe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=cs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${gf(o)}, ${gf(s)}) * ${e}_step`}function Xqe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Qqe(e,t){return Ve(e).reduce((n,r)=>{const i=e[r];return{...n,...cx(t,i,r,s=>_i(s.value))}},{})}function Jqe(e,t){if(wl(t))return e==="theta"?"independent":"shared";if(px(t))return"shared";if(Vie(t))return fs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Lie(e,t){const n=e.scale[t],r=fs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(t_n(t)),"independent"):e[r][t]||"shared"}const xSn={...uwn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Zqe=Ve(xSn);class TSn extends Fm{}const Kbe={symbols:CSn,gradient:ASn,labels:ISn,entries:OSn};function CSn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...d1n({},n,ibn),...Tqe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?eWe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Hu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=_i(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=_i(m??1));else if(Ne(f.fill)){const g=pG(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=_i(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Hu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Ne(f.stroke)){const g=cs(pG(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Dm){const g=et(t)&&nWe(n,i,t);g?f.opacity=[{test:g,..._i(m??1)},_i(u.legend.unselectedOpacity)]:m&&(f.opacity=_i(m))}return f={...f,...e},Gr(f)?void 0:f}function ASn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?eWe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=_i(l)),a={...a,...e},Gr(a)?void 0:a}function ISn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=et(t)?nWe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;J1(c)?f=vf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=vf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&et(t)&&t.timeUnit===void 0&&(f=vf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Gr(d)?void 0:d}function OSn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function eWe(e){return tWe(e,(t,n)=>Math.max(t,n.value))}function pG(e){return tWe(e,(t,n)=>cs(t,n.value))}function tWe(e,t){if(xbn(e))return ht(e.condition).reduce(t,e.value);if(Lf(e))return e.value}function nWe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=st(n.field);return r.map(s=>`(!length(data(${st(Ri(s)+e_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Xbe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return vHe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return _He(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??MSn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??LSn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??kSn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Fw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Lw(n)&&yf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>PSn(t,e)};function PSn(e,t){const n=e.values;if(Ne(n))return $He(t,n);if(Nt(n))return n}function kSn(e,t,n,r){if(t!=="shape"){const i=pG(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function $Sn(e){const{legend:t}=e;return cs(t.type,RSn(e))}function RSn({channel:e,timeUnit:t,scaleType:n}){if(Lw(e)){if(qn(["quarter","month","day"],t))return"symbol";if(yf(n))return"gradient"}return"symbol"}function NSn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??DSn(n,t)}function DSn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function MSn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(yf(i))return n==="horizontal"?r==="top"||r==="bottom"?Qbe(t,"width",o,s):o:Qbe(t,"height",u,a)}function Qbe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function LSn(e){if(qn(["quantile","threshold","log","symlog"],e))return"greedy"}function rWe(e){const t=Ji(e)?FSn(e):zSn(e);return e.component.legends=t,t}function FSn(e){const{encoding:t}=e,n={};for(const r of[Hu,...ZHe]){const i=Ls(t[r]);!i||!e.getScaleComponent(r)||r===qu&&et(i)&&i.type===lx||(n[r]=USn(e,r))}return n}function jSn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function BSn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function USn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new TSn({},jSn(e,t));XEn(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ls(i[t]),f=et(c)?(w=lo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=$Sn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=NSn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const x of Zqe){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const E=x in Xbe?Xbe[x](m):n[x];if(E!==void 0){const b=BSn(E,x,n,e.fieldDef(t));(b||s.legend[x]===void 0)&&a.set(x,E,b)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const E=Qqe(g[x]??{},e),b=x in Kbe?Kbe[x](E,_):E;b!==void 0&&!Gr(b)&&(v[x]={...y!=null&&y.length&&et(c)?{name:`${Ri(c.field)}_legend_${x}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:b})}return Gr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function zSn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){rWe(r);for(const i of Ve(r.component.legends))n.legend[i]=Lie(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=iWe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ve(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function iWe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of Zqe){const c=X0(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return VSn(f,d);case"title":return jVe(f,d);case"type":return i=!0,tl("symbol")}return G8(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&o6(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&o6(e.explicit,["encode","gradient"])),e}function VSn(e,t){return t.value==="circle"?t:e}function HSn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function sWe(e){const t=e.component.legends,n={};for(const i of Ve(t)){const s=e.getScaleComponent(i),o=Yr(s.get("domains"));if(n[o])for(const a of n[o])iWe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>qSn(i,e.config)).filter(i=>i!==void 0)}function qSn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of ZHe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Nt(s.encode.labels.update.text)&&(l=G1(r,"datum.label",s.encode.labels.update.text.signal)),HSn(s,"labels","text",{signal:l})}return s}}function WSn(e){return px(e)||Vie(e)?GSn(e):oWe(e)}function GSn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),oWe(e))}function oWe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Nt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return qn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const YSn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class aWe extends Fm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function uWe(e){e.component.projection=Ji(e)?KSn(e):JSn(e)}function KSn(e){if(e.hasProjection){const t=wu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?XSn(e):void 0,s=new aWe(e.projectionName(!0),{...wu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function XSn(e){const t=[],{encoding:n}=e;for(const r of[[Xf,Kf],[wc,Qf]])(Ls(n[r[0]])||Ls(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(qu)&&e.typedFieldDef(qu).type===lx&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(ui.Main)),t}function QSn(e,t){const n=Ore(YSn,i=>!!(!Vt(e.explicit,i)&&!Vt(t.explicit,i)||Vt(e.explicit,i)&&Vt(t.explicit,i)&&ml(e.get(i),t.get(i))));if(ml(e.size,t.size)){if(n)return e;if(ml(e.explicit,{}))return t;if(ml(t.explicit,{}))return e}return null}function JSn(e){if(e.children.length===0)return;let t;for(const r of e.children)uWe(r);const n=Ore(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=QSn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new aWe(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function ZSn(e,t,n,r){if(ZO(t,n)){const i=Ji(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:XO(s,o,i.format,i.formatType,r)}}return{}}function lWe(e,t){return`${kVe(e)}_${t}`}function exn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Fie(e,t,n){const r=U8(n,void 0)??{},i=lWe(r,t);return e.getName(`${i}_bins`)}function txn(e){return"as"in e}function Jbe(e,t,n){let r,i;txn(e)?r=pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...U8(t,void 0)},o=lWe(s,e.field),{signal:a,extentSignal:u}=exn(n,o);if(P8(s.extent)){const c=s.extent;i=Uqe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class th extends Ur{clone(){return new th(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Za(s)&&fi(s.bin)){const{key:a,binComponent:u}=Jbe(s,s.bin,n);i[a]={...u,...i[a],...ZSn(n,s,o,n.config)}}return i},{});return Gr(r)?null:new th(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Jbe(n,n.bin,r);return new th(t,{[i]:s})}merge(t,n){for(const r of Ve(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Nd([...this.bins[r].as,...t.bins[r].as],Hn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${Hn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:bc(t.field),as:r,signal:t.signal,...P8(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:bc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function nxn(e,t,n,r){var s;const i=Ji(r)?r.encoding[Dh(t)]:void 0;if(Za(n)&&Ji(r)&&xHe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=K0({fieldDef:n,markDef:a,config:u});ZA(o)&&l!==.5&&fs(t)&&(e.add(at(n,{suffix:Y8})),e.add(at(n,{suffix:K8}))),n.bin&&ZO(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(wVe(t)){const o=bVe(t);e.add(r.getName(o))}else e.add(at(n));return M_(n)&&W_n((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function rxn(e,t){for(const n of Ve(t)){const r=t[n];for(const i of Ve(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Cf extends Ur{clone(){return new Cf(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(pm(u)||Ay(u)){const c=pm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);Mm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else nxn(s,a,o,n)}),s.size+Ve(i).length===0)?null:new Cf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ve(i).length===0?null:new Cf(t,r,i)}merge(t){return dVe(this.dimensions,t.dimensions)?(rxn(this.measures,t.measures),!0):(y_n("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ve(this.measures)])}producedFields(){const t=new Set;for(const n of Ve(this.measures))for(const r of Ve(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Hn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ve(this.measures))for(const o of Ve(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:bc(s));return{type:"aggregate",groupby:[...this.dimensions].map(bc),ops:t,fields:n,as:r}}}class dx extends Ur{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of sc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...fi(a)?[at(o,{binSuffix:"end"})]:[]],...Zd(u)?{sortField:u}:Ne(u)?{sortIndexField:rS(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of sc)this[n]&&(t+=` ${n.charAt(0)}:${Hn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of sc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of sc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Mh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(fo(i)&&Iy(s)){const o=ej(this.childModel,n),a=zie(o);a?t[n]=a:Je(Vre(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=L8,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Nie){for(const c of Die){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Bp,jp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Zbe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ixn(e,t){const n=$re(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Zbe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Zbe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(C1n(t)),null}function sxn(e){const t={};return UR(e.filter,n=>{if(nHe(n)){let r=null;Gre(n)?r=cl(n.equal):Kre(n)?r=cl(n.lte):Yre(n)?r=cl(n.lt):Xre(n)?r=cl(n.gt):Qre(n)?r=cl(n.gte):Jre(n)?r=n.range[0]:Zre(n)&&(r=(n.oneOf??n.in)[0]),r&&(N_(r)?t[n.field]="date":hr(r)?t[n.field]="number":pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function oxn(e){const t={};function n(r){ZE(r)?t[r.field]="date":r.type==="quantitative"&&r1n(r.aggregate)?t[r.field]="number":WE(r.field)>1?r.field in t||(t[r.field]="flatten"):M_(r)&&Zd(r.sort)&&WE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ji(e)||wl(e))&&e.forEachFieldDef((r,i)=>{if(Za(r))n(r);else{const s=$_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Ji(e)){const{mark:r,markDef:i,encoding:s}=e;if(Oy(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];et(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function axn(e){const t={};if(Ji(e)&&e.component.selection)for(const n of Ve(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&WE(i.field)>1&&(t[i.field]="flatten")}return t}class ha extends Ur{clone(){return new ha(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Hn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!d0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ve(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(lbe(a,r[a],u.value)))}for(const a of Ve(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(lbe(a,n[a],u)))}const s=new Fm(n,r);i.copyAll(s);const o={};for(const a of Ve(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ve(o).length===0||i.parseNothing?null:new ha(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ve(this._parse)){const r=this._parse[n];WE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ve(this._parse))}dependentFields(){return new Set(Ve(this._parse))}assembleTransforms(t=!1){return Ve(this._parse).filter(n=>t?WE(n)>1:!0).map(n=>{const r=ixn(n,this._parse[n]);return r?{type:"formula",expr:r,as:Rre(n)}:null}).filter(n=>n!==null)}}class Z0 extends Ur{clone(){return new Z0(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ff])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ff}}}class nP extends Ur{clone(){return new nP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Hn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class rP extends Ur{clone(){return new rP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Hn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class t_ extends Ur{constructor(t){super(null),t??(t={name:"source"});let n;if(d0(t)||(n=t.format?{...Du(t.format,["parse"])}:{}),eI(t))this._data={values:t.values};else if(eS(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];qn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else yqe(t)?this._data={values:[{type:"Sphere"}]}:(mqe(t)||d0(t))&&(this._data={});this._generator=d0(t),t.name&&(this._name=t.name),n&&!Gr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var ewe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},uxn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},m2;function jie(e){return e instanceof t_||e instanceof nP||e instanceof rP}class Bie{constructor(){m2.set(this,void 0),ewe(this,m2,!1,"f")}setModified(){ewe(this,m2,!0,"f")}get modifiedFlag(){return uxn(this,m2,"f")}}m2=new WeakMap;class L_ extends Bie{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Uie extends Bie{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class lxn extends Uie{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ve(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class cxn extends Uie{constructor(t){super(),this.requiresSelectionId=t&&Rie(t)}run(t){t instanceof Z0&&(this.requiresSelectionId&&(jie(t.parent)||t.parent instanceof Cf||t.parent instanceof ha)||(this.setModified(),t.remove()))}}class fxn extends Bie{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof eh&&(r=t.producedFields(),Pre(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class dxn extends Uie{constructor(){super()}run(t){t instanceof qa&&!t.isRequired()&&(this.setModified(),t.remove())}}class hxn extends L_{run(t){if(!jie(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ha)if(t instanceof ha)this.setModified(),t.merge(n);else{if(kre(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class pxn extends L_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ha);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ve(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Gr(i)){this.setModified();const o=new ha(t,i);for(const a of n){if(a instanceof ha)for(const u of Ve(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ha&&Ve(a.parse).length===0&&a.remove()}}}}}class mxn extends L_{run(t){t instanceof qa||t.numChildren()>0||t instanceof dx||t instanceof t_||(this.setModified(),t.remove())}}class gxn extends L_{run(t){const n=t.children.filter(i=>i instanceof eh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class yxn extends L_{run(t){const n=t.children.filter(i=>i instanceof Cf),r={};for(const i of n){const s=Hn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ve(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class vxn extends L_{constructor(t){super(),this.model=t}run(t){const n=!(jie(t)||t instanceof fx||t instanceof ha||t instanceof Z0),r=[],i=[];for(const s of t.children)s instanceof th&&(n&&!kre(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof th?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class _xn extends L_{run(t){const n=[...t.children];if(!W1(n,o=>o instanceof qa)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof qa){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof qa)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class F_ extends Ur{clone(){return new F_(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Nd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Hn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function bxn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function wxn(e){return Ne(e)&&e.every(t=>pt(t))&&e.length>1}class zp extends Ur{clone(){return new zp(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(cs(f.order,"ascending"));const l={field:a,order:u};let c;return wxn(s)?c=s:pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new zp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return vh(p)}).filter(h=>!!h),c=bxn(n),f=n.encoding.order;let d;if(Ne(f)||et(f))d=MVe(f);else{const h=THe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new zp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Hn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class hx extends Ur{clone(){return new hx(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Nd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Hn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Ure(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Exn(e){function t(n){if(!(n instanceof dx)){const r=n.clone();if(r instanceof qa){const i=gG+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Cf||r instanceof zp||r instanceof hx||r instanceof F_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function mG(e){if(e instanceof dx)if(e.numChildren()===1&&!(e.children[0]instanceof qa)){const t=e.children[0];(t instanceof Cf||t instanceof zp||t instanceof hx||t instanceof F_)&&t.addDimensions(e.fields),t.swapWithParent(),mG(e)}else{const t=e.model.component.data.main;cWe(t);const n=Exn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(mG)}function cWe(e){if(e instanceof qa&&e.type===ui.Main&&e.numChildren()===1){const t=e.children[0];t instanceof dx||(t.swapWithParent(),cWe(e))}}const gG="scale_",o$=5;function yG(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!yG(t.children))return!1}return!0}function zc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function twe(e,t,n){let r=e.sources,i=!1;return i=zc(new dxn,r)||i,i=zc(new cxn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=zc(new mxn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=zc(new hxn,r)||i,i=zc(new vxn(t),r)||i,i=zc(new fxn,r)||i,i=zc(new pxn,r)||i,i=zc(new yxn,r)||i,i=zc(new gxn,r)||i,i=zc(new lxn,r)||i,i=zc(new _xn,r)||i),e.sources=r,i}function Sxn(e,t){yG(e.sources);let n=0,r=0;for(let i=0;i<o$&&twe(e,t,!0);i++)n++;e.sources.map(mG);for(let i=0;i<o$&&twe(e,t,!1);i++)r++;yG(e.sources),Math.max(n,r)===o$&&Je(`Maximum optimization runs(${o$}) reached.`)}class eo{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new eo(()=>t(n))}}function fWe(e){Ji(e)?xxn(e):Txn(e)}function xxn(e){const t=e.component.scales;for(const n of Ve(t)){const r=Axn(e,n);if(t[n].setWithExplicit("domains",r),Oxn(e,n),e.component.data.isFaceted){let s=e;for(;!wl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Ip(a)&&(a.data=gG+a.data.replace(gG,""))}}}function Txn(e){for(const n of e.children)fWe(n);const t=e.component.scales;for(const n of Ve(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=X0(r,o.getWithExplicit("domains"),"domains","scale",vG);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(E1n),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Cxn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=nwe(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=nwe(t,n);if(i)return"unaggregated"}return e}function Axn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Cxn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ls(r.x2)?Ls(r.x)?X0(ng(n,i,e,"x"),ng(n,i,e,"x2"),"domain","scale",vG):ng(n,i,e,"x2"):t==="y"&&Ls(r.y2)?Ls(r.y)?X0(ng(n,i,e,"y"),ng(n,i,e,"y2"),"domain","scale",vG):ng(n,i,e,"y2"):ng(n,i,e,t)}function Ixn(e,t,n){return e.map(r=>({signal:`{data: ${z8(r,{timeUnit:n,type:t})}}`}))}function vz(e,t,n){var i;const r=(i=lo(n))==null?void 0:i.unit;return t==="temporal"||r?Ixn(e,t,r):[e]}function ng(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ls(i[r]),{type:c}=l,f=l.timeUnit;if(q_n(t)){const p=ng(e,void 0,n,r),m=vz(t.unionWith,c,f);return pd([...m,...p.value])}else{if(Nt(t))return pd([t]);if(t&&t!=="unaggregated"&&!lHe(t))return pd(vz(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return tl([[0,1]]);const p=n.requestDataName(ui.Main);return tl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Mm(r)&&et(l)?Pxn(n,r,e):void 0;if(Lh(l)){const p=vz([l.datum],c,f);return tl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(ui.Main),{field:m}=l;return tl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(fi(h.bin)){if(fo(e))return tl(e==="bin-ordinal"?[]:[{data:QA(d)?n.requestDataName(ui.Main):n.requestDataName(ui.Raw),field:n.vgField(r,ZO(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(fi(p)){const m=Fie(n,h.field,p);return tl([new eo(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return tl([{data:n.requestDataName(ui.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&qn(["time","utc"],e)){const p=i[Dh(r)];if(xHe(h,p,s,a)){const m=n.requestDataName(ui.Main),g=K0({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=ZA(o)&&g!==.5&&fs(r);return tl([{data:m,field:n.vgField(r,y?{suffix:Y8}:{})},{data:m,field:n.vgField(r,{suffix:y?K8:"end"})}])}}return tl(d?[{data:QA(d)?n.requestDataName(ui.Main):n.requestDataName(ui.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(ui.Main),field:n.vgField(r)}])}function _z(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":L8),...r?{field:bc(r)}:{},...i?{order:i}:{}}}function Oxn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=lHe(r)&&r,o=R_(i)&&P8(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Pxn(e,t,n){if(!fo(n))return;const r=e.fieldDef(t),i=r.sort;if(EHe(i))return{op:"min",field:rS(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Zd(i)){const a=s&&!o.has(i.field);return _z(i,a)}else if(wHe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(pm(c)||Ay(c))return _z({field:at(l),order:u},d);if(Ure(c)||!c)return _z({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(qn(["ascending",void 0],i))return!0}}function nwe(e,t){const{aggregate:n,type:r}=e;return n?pt(n)&&!s1n.has(n)?{valid:!1,reason:Y1n(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:K1n(e)}:{valid:!0}:{valid:!1,reason:G1n(e)}}function vG(e,t,n,r){return e.explicit&&t.explicit&&Je(e_n(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function kxn(e){const t=Nd(e.map(o=>{if(Ip(o)){const{sort:a,...u}=o;return u}return o}),Hn),n=Nd(e.map(o=>{if(Ip(o)){const a=o.sort;return a!==void 0&&!QA(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Hn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Ip(o)&&n.length>0){let a=n[0];if(n.length>1){Je(fbe);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Nd(n.map(o=>QA(o)||!("op"in o)||pt(o.op)&&o.op in t1n?o:(Je(n_n(o)),!0)),Hn);let i;r.length===1?i=r[0]:r.length>1&&(Je(fbe),i=!0);const s=Nd(e.map(o=>Ip(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function zie(e){if(Ip(e)&&pt(e.field))return e.field;if(o1n(e)){let t;for(const n of e.fields)if(Ip(n)&&pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(r_n),t}return Je(i_n),t}else if(a1n(e)){Je(s_n);const t=e.fields[0];return pt(t)?t:void 0}}function ej(e,t){const r=e.component.scales[t].get("domains").map(i=>(Ip(i)&&(i.data=e.lookupDataSource(i.data)),i));return kxn(r)}function dWe(e){return px(e)||Vie(e)?e.children.reduce((t,n)=>t.concat(dWe(n)),rwe(e)):rwe(e)}function rwe(e){return Ve(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=$xn(i.range,s,n,e),h=ej(e,n),p=a?CEn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function $xn(e,t,n,r){if(fs(n)){if(Iy(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&Ip(e))return{...e,data:r.lookupDataSource(e.data)};return e}class hWe extends Fm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:W1(this.get("domains"),t=>Ne(t)&&t.length===2&&hr(t[0])&&t[0]<=0&&hr(t[1])&&t[1]>=0)}}const Rxn=["range","scheme"];function Nxn(e){const t=e.component.scales;for(const n of O8){const r=t[n];if(!r)continue;const i=Dxn(n,e);r.setWithExplicit("range",i)}}function iwe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Wu(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new eo(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(fi(r)){const a=Fie(e,i,r);return new eo(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Dxn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Rxn)if(n[f]!==void 0){const d=nG(s,f),h=cHe(e,f);if(!d)Je(VVe(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(Ne(p)){if(fs(e))return pd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return eo.fromName(y,g)}return m}))}else if(gt(p))return pd({data:t.requestDataName(ui.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return pd(p)}case"scheme":return pd(Mxn(n[f]))}}const o=e===Ni||e==="xOffset"?"width":"height",a=r[o];if(_h(a)){if(fs(e))if(fo(s)){const f=mWe(a,t,e);if(f)return pd({step:f})}else Je(HVe(o));else if(GO(e)){const f=e===Ey?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=gWe(a,s);if(p)return pd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Lxn(e,t);return(u!==void 0||l!==void 0)&&nG(s,"rangeMin")&&Ne(c)&&c.length===2?pd([u??c[0],l??c[1]]):tl(c)}function Mxn(e){return H_n(e)?{scheme:e.name,...Du(e,["name"])}:{scheme:e}}function pWe(e,t,n,{center:r}={}){const i=Wu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===mo&&kl(n)?r?[eo.fromName(a=>`${o(a)}/2`,s),eo.fromName(a=>`-${o(a)}/2`,s)]:[eo.fromName(o,s),0]:r?[eo.fromName(a=>`-${o(a)}/2`,s),eo.fromName(a=>`${o(a)}/2`,s)]:[0,eo.fromName(o,s)]}function Lxn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ls(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ni:case mo:{if(qn(["point","band"],u)){const f=yWe(e,n,r.view);if(_h(f))return{step:mWe(f,t,e)}}return pWe(e,t,u)}case Ey:case ux:return Fxn(e,t,u);case Nm:{const f=t.component.scales[e].get("zero"),d=vWe(i,f,r),h=Uxn(i,n,t,r);return XE(u)?Bxn(d,h,jxn(u,r,l,e)):[d,h]}case Rc:return[0,Math.PI*2];case k_:return[0,360];case Yf:return[0,new eo(()=>{const f=t.getSignalName(wl(t.parent)?"child_width":"width"),d=t.getSignalName(wl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Ty:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Cy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case qu:return"symbol";case Hu:case Rh:case Nh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Dm:case Sy:case xy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function mWe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Lre(n),o=r[s];if(tqe({step:e,offsetIsDiscrete:ln(o)&&iHe(o.type)})==="offset"&&MHe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${f1n(f)})`}}else return e.step}function gWe(e,t){if(tqe({step:e,offsetIsDiscrete:fo(t)})==="offset")return{step:e.step}}function Fxn(e,t,n){const r=e===Ey?"x":"y",i=t.getScaleComponent(r);if(!i)return pWe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=yWe(r,t.size,t.config.view);if(_h(l)){const c=gWe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(et(l)&&l.timeUnit){const c=eHe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=K0({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Nt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Nt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return cVe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function yWe(e,t,n){const r=e===Ni?"width":"height",i=t[r];return i||y6(n,r)}function jxn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Ne(n)?n.length+1:(Je(p_n(r)),3)}}function Bxn(e,t,n){const r=()=>{const i=gf(t),s=gf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Nt(t)?new eo(r):{signal:r()}}function vWe(e,t,n){if(t)return Nt(t)?{signal:`${t.signal} ? 0 : ${vWe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(k8("size",e))}const swe=.95;function Uxn(e,t,n,r){const i={x:iwe(n,"x"),y:iwe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=owe(t,i,r.view);return hr(s)?s-1:new eo(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=owe(t,i,r.view);return hr(s)?Math.pow(swe*s,2):new eo(()=>`pow(${swe} * ${s.signal}, 2)`)}}throw new Error(k8("size",e))}function owe(e,t,n){const r=_h(e.width)?e.width.step:g6(n,"width"),i=_h(e.height)?e.height.step:g6(n,"height");return t.x||t.y?new eo(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function _We(e,t){Ji(e)?zxn(e,t):wWe(e,t)}function zxn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ve(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ls(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=nG(h,t),y=cHe(a,t);if(d!==void 0&&(g?y&&Je(y):Je(VVe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,_=f.type;switch(t){case"domainMax":case"domainMin":N_(u[t])||_==="temporal"||v?l.set(t,{signal:z8(u[t],{type:_,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in awe?awe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:LHe(i,a),hasSecondaryRangeChannel:!!i[Dh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const awe={bins:({model:e,fieldOrDatumDef:t})=>et(t)?Vxn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Hxn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>qxn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Wxn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Gxn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Yxn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=et(e)?e.sort:void 0;return Kxn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Xxn(e,t,n,r,i,s.scale,o)};function bWe(e){Ji(e)?Nxn(e):wWe(e,"range")}function wWe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?bWe(r):_We(r,t);for(const r of Ve(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=X0(i,a,t,"scale",pqe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Vxn(e,t){const n=t.bin;if(fi(n)){const r=Fie(e,t.field,n);return new eo(()=>e.getSignalName(r))}else if(To(n)&&R_(n)&&n.step!==void 0)return{step:n.step}}function Hxn(e,t){if(qn([Hu,Rh,Nh],e)&&t!=="nominal")return"hcl"}function qxn(e,t,n,r,i,s){var o;if(!((o=vh(s))!=null&&o.bin||Ne(n)||i!=null||r!=null||qn([Mu.TIME,Mu.UTC],e)))return fs(t)?!0:void 0}function Wxn(e,t,n,r,i,s){if(fs(e)){if(yf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(et(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Mu.POINT)return n.pointPadding}}function Gxn(e,t,n,r,i,s=!1){if(e===void 0){if(fs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:cs(o,n==="bar"?a:u)}else if(GO(t)&&r===Mu.BAND)return i.offsetBandPaddingInner}}function Yxn(e,t,n,r,i,s=!1){if(e===void 0){if(fs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Mu.BAND)return cs(o,Nt(r)?{signal:`${r.signal}/2`}:r/2)}else if(GO(t)){if(n===Mu.POINT)return .5;if(n===Mu.BAND)return i.offsetBandPaddingOuter}}}function Kxn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return kl(e)&&t==="descending"?Nt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(kl(e)&&t==="descending")return!0}function Xxn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&kl(i)){if(Ne(n)){const u=n[0],l=n[n.length-1];if(hr(u)&&u<=0&&hr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!XE(i))return!0;if(!(et(t)&&t.bin)&&qn([...Mh,...Gvn],e)){const{orient:u,type:l}=r;return qn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:qn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Qxn(e,t,n,r,i=!1){const s=Jxn(t,n,r,i),{type:o}=e;return Mm(t)?o!==void 0?Q_n(t,o)?et(n)&&!X_n(o,n.type)?(Je(J1n(o,s)),s):o:(Je(Q1n(t,o,s)),s):s:null}function Jxn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Lw(e)||cz(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(fz(e,"ordinal")),"ordinal";if(fs(e)||GO(e)){if(qn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Bre)return"band";const s=n[Wu(e)];return Q1(s)||JE(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Lw(e)?"time":cz(e)==="discrete"?(Je(fz(e,"temporal")),"ordinal"):et(t)&&t.timeUnit&&lo(t.timeUnit).utc?"utc":"time";case"quantitative":return Lw(e)?et(t)&&fi(t.bin)?"bin-ordinal":"linear":cz(e)==="discrete"?(Je(fz(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(UVe(t.type))}function Zxn(e,{ignoreRange:t}={}){EWe(e),fWe(e);for(const n of K_n)_We(e,n);t||bWe(e)}function EWe(e){Ji(e)?e.component.scales=eTn(e):e.component.scales=nTn(e)}function eTn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of O8){const o=Ls(t[s]);if(o&&n===hHe&&s===qu&&o.type===lx)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=LHe(t,s),l=Qxn(a,s,o,r,u);i[s]=new hWe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const tTn=pqe((e,t)=>hbe(e)-hbe(t));function nTn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){EWe(s);for(const o of Ve(s.component.scales))if((t=i.scale)[o]??(t[o]=Jqe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?j_n(a.value,u.value)?r[o]=X0(a,u,"type","scale",tTn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ve(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new hWe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class bz{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ji(e){return(e==null?void 0:e.type)==="unit"}function wl(e){return(e==null?void 0:e.type)==="facet"}function Vie(e){return(e==null?void 0:e.type)==="concat"}function px(e){return(e==null?void 0:e.type)==="layer"}class Hie{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=wu(a),this.name=t.name??i,this.title=dg(t.title)?{text:t.title}:t.title?wu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new bz,this.projectionNameMap=r?r.projectionNameMap:new bz,this.signalNameMap=r?r.signalNameMap:new bz,this.data=t.data,this.description=t.description,this.transforms=lEn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:hwn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:F8(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Fm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Zxn(this)}parseProjection(){uWe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){rWe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ve(r)){const o=r[s];o!==void 0&&(i[s]=_i(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=_i(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Gr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=SSn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of sc)t[r].title&&n.push(ySn(this,r));for(const r of Nie)n=n.concat(vSn(this,r));return n}assembleAxes(){return iSn(this.component.axes,this.config)}assembleLegends(){return sWe(this)}assembleProjections(){return WSn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...$Ve(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return qn(["unit","layer"],this.type)?qn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Gr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||wl(this.parent)?dWe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ri((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(ui[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(wl(this.parent)){const n=Xqe(t),r=I8(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(fo(s)&&Iy(o)){const a=i.get("name"),u=ej(this,r),l=zie(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Kqe(a,i,c)}}else return Je(Vre(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(SVe(t)&&Mm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(g1n(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class SWe extends Hie{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return zbn(this.getMapping(),(r,i,s)=>{const o=vh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){gie(this.getMapping(),(r,i)=>{const s=vh(r);s&&t(s,i)},n)}}class tj extends Ur{clone(){return new tj(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"]}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Hn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return this.transform.groupby&&(r.resolve="shared"),r}}class nj extends Ur{clone(){return new nj(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Hn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class tI extends Ur{clone(){return new tI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Ir("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Mm(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");kl(d)&&l.aggregate!=="count"&&!Oy(i)&&(u[l.field]=l)}return u},{});return Ve(a).length?new tI(t,a):null}dependentFields(){return new Set(Ve(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Hn(this.filter)}`}assemble(){const t=Ve(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class rj extends Ur{clone(){return new rj(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Hn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class ij extends Ur{clone(){return new ij(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Hn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Bw extends Ur{clone(){return new Bw(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Xf,Kf],[wc,Qf]]){const s=i.map(o=>{const a=Ls(n.encoding[o]);return et(a)?a.field:Lh(a)?{expr:`${a.datum}`}:Lf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Bw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(qu)){const i=n.typedFieldDef(qu);i.type===lx&&(t=new Bw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Hn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class nI extends Ur{clone(){return new nI(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Xf,Kf],[wc,Qf]]){const i=r.map(o=>{const a=Ls(n.encoding[o]);return et(a)?a.field:Lh(a)?{expr:`${a.datum}`}:Lf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===wc?"2":"";(i[0]||i[1])&&(t=new nI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Hn(this.fields)} ${Hn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class d1 extends Ur{clone(){return new d1(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new d1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(et(i)&&et(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=jHe(n.mark,r);return new d1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Hn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Hwn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class sj extends Ur{clone(){return new sj(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Hn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class rI extends Ur{clone(){return new rI(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(qwn(o)){let u=CWe(o.data,s);u||(u=new t_(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new qa(u,l,ui.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Wwn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ri(u),u)}catch{throw new Error(b1n(u))}if(a=l.materialized,!a)throw new Error(w1n(u))}return new rI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Hn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ht(this.transform.as)}:{}};else{let n=this.transform.as;pt(n)||(Je(O1n),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class oj extends Ur{clone(){return new oj(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Hn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class aj extends Ur{clone(){return new aj(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Hn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class uj extends Ur{clone(){return new uj(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Nd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Hn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class lj extends Ur{clone(){return new lj(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Hn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function xWe(e){let t=0;function n(r,i){if(r instanceof t_&&!r.isGenerator&&!eS(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ha&&(r.parent instanceof t_&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof dx){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof nP||r instanceof rP||r instanceof tI||r instanceof fx||r instanceof nS||r instanceof nI||r instanceof Cf||r instanceof rI||r instanceof hx||r instanceof F_||r instanceof ij||r instanceof rj||r instanceof tj||r instanceof sj||r instanceof oj||r instanceof aj||r instanceof Z0||r instanceof lj||r instanceof uj||r instanceof nj)&&i.transform.push(r.assemble()),(r instanceof th||r instanceof eh||r instanceof d1||r instanceof zp||r instanceof Bw)&&i.transform.push(...r.assemble()),r instanceof qa&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof qa?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof qa&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function rTn(e){const t=[],n=xWe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function iTn(e,t){const n=[],r=xWe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function sTn(e){return e==="top"||e==="left"||Nt(e)?"header":"footer"}function oTn(e){for(const t of sc)aTn(e,t);uwe(e,"x"),uwe(e,"y")}function aTn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=iS("title",null,r,t);let l=Fw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Ne(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=iS("labelOrient",a.header,r,t),f=a.header!==null?cs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=qn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[TWe(e,t,f)]}}}function TWe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function uwe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Lie(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=sTn(a.get("orient"));o[u]??(o[u]=[TWe(e,s,!1)]);const l=p2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function uTn(e){qie(e),w6(e,"width"),w6(e,"height")}function lTn(e){qie(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";w6(e,t),w6(e,n)}function qie(e){for(const t of e.children)t.parseLayoutSize()}function w6(e,t){const n=Xqe(t),r=I8(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??Jqe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=X0(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function cTn(e){const{size:t,component:n}=e;for(const r of Mh){const i=Wu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,_h(s)?"step":s,!0)}else{const s=fTn(e,i);n.layoutSize.set(i,s,!1)}}}function fTn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(fo(s)){const a=y6(r.view,t);return Iy(o)||_h(a)?"step":a}else return sG(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return sG(r.view,t);{const s=y6(r.view,t);return _h(s)?s.step:s}}}function _G(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class vC extends SWe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Xie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!QO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ve(t),r={};for(const i of n){if(![jp,Bp].includes(i)){Je(k8(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(eG(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=pie(t,n);return r.header?r.header=wu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=cj(this),this.child.parseData()}parseLayoutSize(){qie(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),oTn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of sc)for(const r of Die){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=iS("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=J8(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof vC))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof vC?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof vC){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Mh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(fo(o)&&Iy(a)){const u=ej(this.child,i),l=zie(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(Vre(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of sc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(fi(d)&&u.push(at(f,{binSuffix:"end"})),Zd(h)){const{field:p,op:m=L8}=h,g=_G(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Ne(h)){const p=rS(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Zd(r.sort)?[_G(r,r.sort,{expr:"datum"})]:Ne(r.sort)?[rS(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Zd(i)?i.order:!Ne(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return hG(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Nie)if(t[s]){const o=iS("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return hG(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=rTn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:sc.map(u=>this.facetSortFields(u)).flat(),order:sc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(EEn(this,[]))}]}getMapping(){return this.facet}}function dTn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Zd(s.sort)){const{field:o,op:a=L8}=s.sort;e=i=new F_(e,{joinaggregate:[{op:a,field:o,as:_G(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function CWe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(eI(e)&&eI(a)){if(ml(e.values,a.values))return o}else if(eS(e)&&eS(a)){if(e.url===a.url)return o}else if(mqe(e)&&e.name===o.dataName)return o}}return null}function hTn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new t_({values:[]});return t.push(r),r}const n=CWe(e.data,t);if(n)return d0(e.data)||(n.data.format=fVe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new t_(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function pTn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(nEn(i))o=e=new nS(e,i),s="derived";else if(Aie(i)){const a=sxn(i);o=e=ha.makeWithAncestors(e,{},a,n)??e,e=new fx(e,t,i.filter)}else if(cqe(i))o=e=th.makeFromTransform(e,i,t),s="number";else if(iEn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ha(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=eh.makeFromTransform(e,i);else if(sEn(i))o=e=Cf.makeFromTransform(e,i),s="number",Rie(t)&&(e=new Z0(e));else if(lqe(i))o=e=rI.make(e,t,i,r++),s="derived";else if(Zwn(i))o=e=new hx(e,i),s="number";else if(eEn(i))o=e=new F_(e,i),s="number";else if(oEn(i))o=e=zp.makeFromTransform(e,i),s="derived";else if(aEn(i))o=e=new ij(e,i),s="derived";else if(uEn(i))o=e=new nj(e,i),s="derived";else if(tEn(i))o=e=new rj(e,i),s="derived";else if(Gwn(i))o=e=new uj(e,i),s="derived";else if(Jwn(i))e=new lj(e,i);else if(rEn(i))o=e=d1.makeFromTransform(e,i),s="derived";else if(Ywn(i))o=e=new tj(e,i),s="derived";else if(Kwn(i))o=e=new oj(e,i),s="derived";else if(Xwn(i))o=e=new aj(e,i),s="derived";else if(Qwn(i))o=e=new sj(e,i),s="derived";else{Je(I1n(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function cj(e){var m;let t=hTn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(d0(i)||eS(i)||eI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new bEn;d0(i)?(gqe(i)?t=new rP(t,i.sequence):Iie(i)&&(t=new nP(t,i.graticule)),o.parseNothing=!0):((m=i==null?void 0:i.format)==null?void 0:m.parse)===null&&(o.parseNothing=!0),t=ha.makeExplicit(t,e,o)??t,t=new Z0(t);const a=e.parent&&px(e.parent);(Ji(e)||wl(e))&&a&&(t=th.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=pTn(t,e,o));const u=axn(e),l=oxn(e);t=ha.makeWithAncestors(t,{},{...u,...l},o)??t,Ji(e)&&(t=Bw.parseAll(t,e),t=nI.parseAll(t,e)),(Ji(e)||wl(e))&&(a||(t=th.makeFromEncoding(t,e)??t),t=eh.makeFromEncoding(t,e)??t,t=nS.parseAllForSortIndex(t,e));const c=e.getDataName(ui.Raw),f=new qa(t,c,ui.Raw,r);if(n[c]=f,t=f,Ji(e)){const g=Cf.makeFromEncoding(t,e);g&&(t=g,Rie(e)&&(t=new Z0(t))),t=d1.makeFromEncoding(t,e)??t,t=zp.makeFromEncoding(t,e)??t}Ji(e)&&(t=tI.make(t,e)??t);const d=e.getDataName(ui.Main),h=new qa(t,d,ui.Main,r);n[d]=h,t=h,Ji(e)&&nSn(e,h);let p=null;if(wl(e)){const g=e.getName("facet");t=dTn(t,e.facet)??t,p=new dx(t,e,g,h.getSource()),n[g]=p}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:h,facetRoot:p,ancestorParse:o}}class mTn extends Hie{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(T1n),this.children=this.getChildren(t).map((l,c)=>Xie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=cj(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ve(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return q8(t)?t.vconcat:Tie(t)?t.hconcat:t.concat}parseLayoutSize(){lTn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Mie(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function gTn(e){return e===!1||e===null}const yTn={disable:1,gridScale:1,scale:1,...NHe,labelExpr:1,encode:1},AWe=Ve(yTn);class Wie extends Fm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Wie(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!gTn(this.get(t))}hasOrientSignalRef(){return Nt(this.explicit.orient)}}function vTn(e,t,n){const{encoding:r,config:i}=e,s=Ls(r[t])??Ls(r[Dh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(J1(u))return{text:vf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(QE(s)==="quantitative"){if(JE(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:vf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:vf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(QE(s)==="temporal"&&i.timeFormatType&&et(s)&&!s.timeUnit)return{text:vf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function _Tn(e){return Mh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[CTn(n,e)]),t),{})}const bTn={bottom:"top",top:"bottom",left:"right",right:"left"};function wTn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ve(i.component.axes))n.axis[s]=Lie(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=ETn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Mh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Nt(a)){if(r[a]>0&&!u){const l=bTn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function ETn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=STn(i,s)}}}else return t.map(n=>n.clone());return e}function STn(e,t){for(const n of AWe){const r=X0(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return jVe(i,s);case"gridScale":return{explicit:i.explicit,value:cs(i.value,s.value)}}return G8(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function xTn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nt(n.labelAngle)?n.labelAngle:JA(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===qqe(r,i))return!0}return e===n[t]}const TTn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function CTn(e,t){var y,v;let n=t.axis(e);const r=new Wie,i=Ls(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||dSn(e),u=t.getScaleComponent(e).get("type"),l=sSn(e,u,a,t.config),c=n!==void 0?!n:fG("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=lSn(i,n,e,o.style,l),d=_He(n.formatType,i,u),h=vHe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const _ of AWe){const w=_ in Gbe?Gbe[_](p):bbe(_)?n[_]:void 0,x=w!==void 0,E=xTn(w,_,n,t,e);if(x&&E)r.set(_,w,E);else{const{configValue:b=void 0,configFrom:T=void 0}=bbe(_)&&_!=="values"?fG(_,o.style,n.style,l):{},A=b!==void 0;x&&!A?r.set(_,w,E):(T!=="vgAxisConfig"||TTn.has(_)&&A||eP(b)||Nt(b))&&r.set(_,b,!1)}}const m=n.encoding??{},g=RHe.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const x=Qqe(m[w]??{},t),E=w==="labels"?vTn(t,e,x):x;return E!==void 0&&!Gr(E)&&(_[w]={update:E}),_},{});return Gr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function ATn({encoding:e,size:t}){for(const n of Mh){const r=Wu(n);_h(t[r])&&jg(e[n])&&(delete t[r],Je(HVe(r)))}return t}const ITn={vgMark:"arc",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...Q0(e,"radius"),...Q0(e,"theta")})},OTn={vgMark:"area",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...v6("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...v6("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...$ie(e)})},PTn={vgMark:"rect",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Q0(e,"x"),...Q0(e,"y")})},kTn={vgMark:"shape",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&et(n)&&n.type===lx?{field:at(n,{expr:"datum"})}:{}}]}},$Tn={vgMark:"image",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Q0(e,"x"),...Q0(e,"y"),...Pie(e,"url")})},RTn={vgMark:"line",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...no("size",e,{vgChannel:"strokeWidth"}),...$ie(e)})},NTn={vgMark:"trail",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...no("size",e),...$ie(e)})};function Gie(e,t){const{config:n}=e;return{...Nc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...no("size",e),...no("angle",e),...DTn(e,n,t)}}function DTn(e,t,n){return n?{shape:{value:n}}:no("shape",e)}const MTn={vgMark:"symbol",encodeEntry:e=>Gie(e)},LTn={vgMark:"symbol",encodeEntry:e=>Gie(e,"circle")},FTn={vgMark:"symbol",encodeEntry:e=>Gie(e,"square")},jTn={vgMark:"rect",encodeEntry:e=>({...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Q0(e,"x"),...Q0(e,"y")})},BTn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...v6("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...v6("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...no("size",e,{vgChannel:"strokeWidth"})}}},UTn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Nc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...Pie(e),...no("size",e,{vgChannel:"fontSize"}),...no("angle",e),...Vbe("align",zTn(e.markDef,n,t)),...Vbe("baseline",VTn(e.markDef,n,t)),...da("radius",e,{defaultPos:null}),...da("theta",e,{defaultPos:null})}}};function zTn(e,t,n){if(Ir("align",e,n)===void 0)return"center"}function VTn(e,t,n){if(Ir("baseline",e,n)===void 0)return"middle"}const HTn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Nc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid",vgChannel:"xc"}),...da("y",e,{defaultPos:"mid",vgChannel:"yc"}),...no("size",e,{defaultValue:qTn(e),vgChannel:i}),[s]:_i(Ir("thickness",n,t))}}};function qTn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Ir("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Iy(a)&&hr(a.step)?a.step*3/4:g6(t.view,i)*3/4}}const a$={arc:ITn,area:OTn,bar:PTn,circle:LTn,geoshape:kTn,image:$Tn,line:RTn,point:MTn,rect:jTn,rule:BTn,square:FTn,text:UTn,tick:HTn,trail:NTn};function WTn(e){if(qn([D8,R8,ebn],e.mark)){const t=jHe(e.mark,e.encoding);if(t.length>0)return GTn(e,t)}else if(e.mark===N8){const t=ZW.some(n=>Ir(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return YTn(e)}return Yie(e)}const lwe="faceted_path_";function GTn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:lwe+e.requestDataName(ui.Main),data:e.requestDataName(ui.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Yie(e,{fromPrefix:lwe})}]}const cwe="stack_group_";function YTn(e){var l;const[t]=Yie(e,{fromPrefix:cwe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...qE(t.encode.update,["y","yc","y2","height",...ZW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Du(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...qE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Du(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of ZW){const f=mm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=_i(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=mm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:_i(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(ui.Main),name:cwe+e.requestDataName(ui.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function KTn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Ne(o)&&Lf(o)&&QW(o.value)||!o&&QW(Ir("order",i,s)))){if((Ne(o)||et(o))&&!n)return MVe(o,{expr:"datum"});if(Oy(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(et(l)){const c=l.sort;if(Ne(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Zd(c))return{field:at({aggregate:mie(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(wHe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Yie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=cs(r.clip,XTn(e),QTn(e)),a=NVe(r),u=i.key,l=KTn(e),c=JTn(e),f=Ir("aria",r,s),d=a$[n].postEncodingTransform?a$[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:a$[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(ui.Main)},encode:{update:a$[n].encodeEntry(e)},...d?{transform:d}:{}}]}function XTn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function QTn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function JTn(e){if(!e.component.selection)return null;const t=Ve(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ve(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class IWe extends SWe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Ebe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=yh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Mwn(o,s,{graticule:t.data&&Iie(t.data)}));const u=this.encoding=Bbn(t.encoding||{},a,o.filled,s);this.markDef=oqe(o,u,s),this.size=ATn({encoding:u,size:Ebe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=sqe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Sie(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===hHe,r=t&&Fvn.some(i=>ln(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return O8.reduce((r,i)=>{const s=Ls(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=wu(t);return Ne(n)&&(i.domain=n.map(cl)),Ne(r)&&(i.range=r.map(cl)),i}initAxes(t){return Mh.reduce((n,r)=>{const i=t[r];if(ln(i)||r===Ni&&ln(t.x2)||r===mo&&ln(t.y2)){const s=ln(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ve(t),r={};for(const i of n){const s=t[i];r[i]=eP(s)?RVe(s):cl(s)}return r}initLegends(t){return Yvn.reduce((n,r)=>{const i=Ls(t[r]);if(i&&Xvn(r)){const s=i.legend;n[r]=s&&wu(s)}return n},{})}parseData(){this.component.data=cj(this)}parseLayoutSize(){cTn(this)}parseSelections(){this.component.selection=tSn(this,this.selection)}parseMarkGroup(){this.component.mark=WTn(this)}parseAxesAndHeaders(){this.component.axes=_Tn(this)}assembleSelectionTopLevelSignals(t){return SEn(this,t)}assembleSignals(){return[...zqe(this),...wEn(this,[])]}assembleSelectionData(t){return xEn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Mie(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!px(this.parent))&&(t=_qe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return c1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return vh(n)}typedFieldDef(t){const n=this.fieldDef(t);return Za(n)?n:null}}class Kie extends Hie{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(W8(a))return new Kie(a,this,this.getName(`layer_${u}`),o,s);if(Lm(a))return new IWe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(zre(a))})}parseData(){this.component.data=cj(this);for(const t of this.children)t.parseData()}parseLayoutSize(){uTn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ve(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){wTn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),zqe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Mie(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ht(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return TEn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),sWe(this))}}function Xie(e,t,n,r,i){if(F8(e))return new vC(e,t,n,i);if(W8(e))return new Kie(e,t,n,r,i);if(Lm(e))return new IWe(e,t,n,r,i);if(cwn(e))return new mTn(e,t,n,i);throw new Error(zre(e))}function ZTn(e,t={}){t.logger&&m_n(t.logger),t.fieldTitle&&PHe(t.fieldTitle);try{const n=iqe(XS(t.config,e.config)),r=hqe(e,n),i=Xie(r,null,"",void 0,n);return i.parse(),Sxn(i.component.data,i),{spec:t2n(i,e2n(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&g_n(),t.fieldTitle&&kbn()}}function e2n(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):pt(t)&&(t={type:t}),i&&s&&yEn(t.type)){if(i==="step"&&s==="step")Je(obe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(obe(I8(o)));const a=o==="width"?"height":"width";t.type=vEn(a)}}return{...Ve(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Nbe(n,!1),...Nbe(e,!0)}}function t2n(e,t,n={},r){const i=e.config?xwn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),iTn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...eqe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const n2n=$vn.version,r2n=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:WE,accessPathWithDatum:$re,compile:ZTn,contains:qn,deepEqual:ml,deleteNestedProperty:o6,duplicate:tn,entries:G0,every:Ore,fieldIntersection:kre,flatAccessWithDatum:hVe,getFirstDefined:cs,hasIntersection:Pre,hash:Hn,internalField:gVe,isBoolean:QA,isEmpty:Gr,isEqual:Nvn,isInternalField:yVe,isNullOrFalse:QW,isNumeric:E8,keys:Ve,logicalExpr:gC,mergeDeep:fVe,never:cVe,normalize:hqe,normalizeAngle:JA,omit:Du,pick:qE,prefixGenerator:JW,removePathFromField:Rre,replaceAll:G1,replacePathInField:bc,resetIdCounter:Mvn,setEqual:dVe,some:W1,stringify:Yr,titleCase:HO,unique:Nd,uniqueId:mVe,vals:Mo,varName:Ri,version:n2n},Symbol.toStringTag,{value:"Module"}));function OWe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var i2n="vega-themes",s2n="2.14.0",o2n="Themes for stylized Vega and Vega-Lite visualizations.",a2n=["vega","vega-lite","themes","style"],u2n="BSD-3-Clause",l2n={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},c2n=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],f2n="build/vega-themes.js",Qie="build/vega-themes.module.js",d2n="build/vega-themes.min.js",h2n="build/vega-themes.min.js",p2n="build/vega-themes.module.d.ts",m2n={type:"git",url:"https://github.com/vega/vega-themes.git"},g2n=["src","build"],y2n={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},v2n={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},_2n={vega:"*","vega-lite":"*"},b2n={},w2n={name:i2n,version:s2n,description:o2n,keywords:a2n,license:u2n,author:l2n,contributors:c2n,main:f2n,module:Qie,unpkg:d2n,jsdelivr:h2n,types:p2n,repository:m2n,files:g2n,scripts:y2n,devDependencies:v2n,peerDependencies:_2n,dependencies:b2n};const db="#fff",fwe="#888",E2n={background:"#333",view:{stroke:fwe},title:{color:db,subtitleColor:db},style:{"guide-label":{fill:db},"guide-title":{fill:db}},axis:{domainColor:db,gridColor:fwe,tickColor:db}},Vy="#4572a7",S2n={background:"#fff",arc:{fill:Vy},area:{fill:Vy},line:{stroke:Vy,strokeWidth:2},path:{stroke:Vy},rect:{fill:Vy},shape:{stroke:Vy},symbol:{fill:Vy,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Hy="#30a2da",wz="#cbcbcb",x2n="#999",T2n="#333",dwe="#f0f0f0",hwe="#333",C2n={arc:{fill:Hy},area:{fill:Hy},axis:{domainColor:wz,grid:!0,gridColor:wz,gridWidth:1,labelColor:x2n,labelFontSize:10,titleColor:T2n,tickColor:wz,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:dwe,group:{fill:dwe},legend:{labelColor:hwe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:hwe,titleFontSize:14,titlePadding:10},line:{stroke:Hy,strokeWidth:2},path:{stroke:Hy,strokeWidth:.5},rect:{fill:Hy},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Hy},bar:{binSpacing:2,fill:Hy,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},qy="#000",A2n={group:{fill:"#e5e5e5"},arc:{fill:qy},area:{fill:qy},line:{stroke:qy},path:{stroke:qy},rect:{fill:qy},shape:{stroke:qy},symbol:{fill:qy,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},I2n=22,O2n="normal",pwe="Benton Gothic, sans-serif",mwe=11.5,P2n="normal",Wy="#82c6df",Ez="Benton Gothic Bold, sans-serif",gwe="normal",ywe=13,bT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},k2n={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Ez,fontSize:I2n,fontWeight:O2n},arc:{fill:Wy},area:{fill:Wy},line:{stroke:Wy,strokeWidth:2},path:{stroke:Wy},rect:{fill:Wy},shape:{stroke:Wy},symbol:{fill:Wy,size:30},axis:{labelFont:pwe,labelFontSize:mwe,labelFontWeight:P2n,titleFont:Ez,titleFontSize:ywe,titleFontWeight:gwe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:pwe,labelFontSize:mwe,symbolType:"square",titleFont:Ez,titleFontSize:ywe,titleFontWeight:gwe},range:{category:bT["category-6"],diverging:bT["fireandice-6"],heatmap:bT["fire-7"],ordinal:bT["fire-7"],ramp:bT["fire-7"]}},Gy="#ab5787",u$="#979797",$2n={background:"#f9f9f9",arc:{fill:Gy},area:{fill:Gy},line:{stroke:Gy},path:{stroke:Gy},rect:{fill:Gy},shape:{stroke:Gy},symbol:{fill:Gy,size:30},axis:{domainColor:u$,domainWidth:.5,gridWidth:.2,labelColor:u$,tickColor:u$,tickWidth:.2,titleColor:u$},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Yy="#3e5c69",R2n={background:"#fff",arc:{fill:Yy},area:{fill:Yy},line:{stroke:Yy},path:{stroke:Yy},rect:{fill:Yy},shape:{stroke:Yy},symbol:{fill:Yy},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Vl="#1696d2",vwe="#000000",N2n="#FFFFFF",l$="Lato",Sz="Lato",D2n="Lato",M2n="#DEDDDD",L2n=18,wT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},F2n={background:N2n,title:{anchor:"start",fontSize:L2n,font:l$},axisX:{domain:!0,domainColor:vwe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Sz,labelAngle:0,tickColor:vwe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:l$},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:M2n,gridWidth:1,labelFontSize:12,labelFont:Sz,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:l$,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Sz,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:l$,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:wT["six-groups-cat-1"],diverging:wT["diverging-colors"],heatmap:wT["diverging-colors"],ordinal:wT["six-groups-seq"],ramp:wT["shades-blue"]},area:{fill:Vl},rect:{fill:Vl},line:{color:Vl,stroke:Vl,strokeWidth:5},trail:{color:Vl,stroke:Vl,strokeWidth:0,size:1},path:{stroke:Vl,strokeWidth:.5},point:{filled:!0},text:{font:D2n,color:Vl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Vl,stroke:null}},arc:{fill:Vl},shape:{stroke:Vl},symbol:{fill:Vl,size:30}},Ky="#3366CC",_we="#ccc",c$="Arial, sans-serif",j2n={arc:{fill:Ky},area:{fill:Ky},path:{stroke:Ky},rect:{fill:Ky},shape:{stroke:Ky},symbol:{stroke:Ky},circle:{fill:Ky},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:c$,fontSize:12},"guide-title":{font:c$,fontSize:12},"group-title":{font:c$,fontSize:12}},title:{font:c$,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:_we,tickColor:_we,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Jie=e=>e*(1/3+1),bwe=Jie(9),wwe=Jie(10),Ewe=Jie(12),ET="Segoe UI",Swe="wf_standard-font, helvetica, arial, sans-serif",xwe="#252423",ST="#605E5C",Twe="transparent",B2n="#C8C6C4",Gc="#118DFF",U2n="#12239E",z2n="#E66C37",V2n="#6B007B",H2n="#E044A7",q2n="#744EC2",W2n="#D9B300",G2n="#D64550",PWe=Gc,kWe="#DEEFFF",Cwe=[kWe,PWe],Y2n=[kWe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",PWe],K2n={view:{stroke:Twe},background:Twe,font:ET,header:{titleFont:Swe,titleFontSize:Ewe,titleColor:xwe,labelFont:ET,labelFontSize:wwe,labelColor:ST},axis:{ticks:!1,grid:!1,domain:!1,labelColor:ST,labelFontSize:bwe,titleFont:Swe,titleColor:xwe,titleFontSize:Ewe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:B2n,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Gc},line:{stroke:Gc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:ET,fontSize:bwe,fill:ST},arc:{fill:Gc},area:{fill:Gc,line:!0,opacity:.6},path:{stroke:Gc},rect:{fill:Gc},point:{fill:Gc,filled:!0,size:75},shape:{stroke:Gc},symbol:{fill:Gc,strokeWidth:1.5,size:50},legend:{titleFont:ET,titleFontWeight:"bold",titleColor:ST,labelFont:ET,labelFontSize:wwe,labelColor:ST,symbolType:"circle",symbolSize:75},range:{category:[Gc,U2n,z2n,V2n,H2n,q2n,W2n,G2n],diverging:Cwe,heatmap:Cwe,ordinal:Y2n}},xz='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Awe=400,X2n=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Q2n=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function fj({type:e,background:t}){const n=e==="dark"?"#161616":"#ffffff",r=e==="dark"?"#f4f4f4":"#161616",i=e==="dark"?X2n:Q2n,s=e==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:n,stroke:n},group:{fill:n},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:xz,fontWeight:600},axis:{labelColor:r,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:r,labelAngle:0},style:{"guide-label":{font:xz,fill:r,fontWeight:Awe},"guide-title":{font:xz,fill:r,fontWeight:Awe}},range:{category:i,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const J2n=fj({type:"light",background:"#ffffff"}),Z2n=fj({type:"light",background:"#f4f4f4"}),eCn=fj({type:"dark",background:"#262626"}),tCn=fj({type:"dark",background:"#161616"}),nCn=w2n.version,rCn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Z2n,carbong100:tCn,carbong90:eCn,carbonwhite:J2n,dark:E2n,excel:S2n,fivethirtyeight:C2n,ggplot2:A2n,googlecharts:j2n,latimes:k2n,powerbi:K2n,quartz:$2n,urbaninstitute:F2n,version:nCn,vox:R2n},Symbol.toStringTag,{value:"Module"}));function iCn(e,t,n,r){if(Ne(e))return`[${e.map(i=>t(pt(i)?i:Iwe(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=Iwe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function sCn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Iwe(e,t){return JSON.stringify(e,sCn(t))}var oCn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const $We="vg-tooltip-element",aCn={offsetX:10,offsetY:10,id:$We,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:uCn,maxDepth:2,formatTooltip:iCn,baseURL:""};function uCn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function lCn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return oCn.toString().replace($We,e)}function cCn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class fCn{constructor(t){this.options={...aCn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=lCn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=cCn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Tz={};function dCn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cz,Owe;function hCn(){return Owe||(Owe=1,Cz=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Cz}var pCn=Sr;Sr.Node=n_;Sr.create=Sr;function Sr(e){var t=this;if(t instanceof Sr||(t=new Sr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Sr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Sr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Sr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Sr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)gCn(this,arguments[e]);return this.length};Sr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)yCn(this,arguments[e]);return this.length};Sr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Sr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Sr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Sr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Sr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Sr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Sr.prototype.map=function(e,t){t=t||this;for(var n=new Sr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Sr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Sr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Sr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Sr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Sr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Sr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Sr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Sr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Sr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Sr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Sr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=mCn(this,i,n[r]);return s};Sr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function mCn(e,t,n){var r=t===e.head?new n_(n,null,t,e):new n_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function gCn(e,t){e.tail=new n_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function yCn(e,t){e.head=new n_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function n_(e,t,n,r){if(!(this instanceof n_))return new n_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{hCn()(Sr)}catch{}const vCn=pCn,Sv=Symbol("max"),op=Symbol("length"),hb=Symbol("lengthCalculator"),_C=Symbol("allowStale"),Vv=Symbol("maxAge"),tp=Symbol("dispose"),Pwe=Symbol("noDisposeOnSet"),Xs=Symbol("lruList"),Yc=Symbol("cache"),RWe=Symbol("updateAgeOnGet"),Az=()=>1;class _Cn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Sv]=t.max||1/0;const n=t.length||Az;if(this[hb]=typeof n!="function"?Az:n,this[_C]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Vv]=t.maxAge||0,this[tp]=t.dispose,this[Pwe]=t.noDisposeOnSet||!1,this[RWe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Sv]=t||1/0,xT(this)}get max(){return this[Sv]}set allowStale(t){this[_C]=!!t}get allowStale(){return this[_C]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Vv]=t,xT(this)}get maxAge(){return this[Vv]}set lengthCalculator(t){typeof t!="function"&&(t=Az),t!==this[hb]&&(this[hb]=t,this[op]=0,this[Xs].forEach(n=>{n.length=this[hb](n.value,n.key),this[op]+=n.length})),xT(this)}get lengthCalculator(){return this[hb]}get length(){return this[op]}get itemCount(){return this[Xs].length}rforEach(t,n){n=n||this;for(let r=this[Xs].tail;r!==null;){const i=r.prev;kwe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Xs].head;r!==null;){const i=r.next;kwe(this,t,r,n),r=i}}keys(){return this[Xs].toArray().map(t=>t.key)}values(){return this[Xs].toArray().map(t=>t.value)}reset(){this[tp]&&this[Xs]&&this[Xs].length&&this[Xs].forEach(t=>this[tp](t.key,t.value)),this[Yc]=new Map,this[Xs]=new vCn,this[op]=0}dump(){return this[Xs].map(t=>E6(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Xs]}set(t,n,r){if(r=r||this[Vv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[hb](n,t);if(this[Yc].has(t)){if(s>this[Sv])return Uw(this,this[Yc].get(t)),!1;const u=this[Yc].get(t).value;return this[tp]&&(this[Pwe]||this[tp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[op]+=s-u.length,u.length=s,this.get(t),xT(this),!0}const o=new bCn(t,n,s,i,r);return o.length>this[Sv]?(this[tp]&&this[tp](t,n),!1):(this[op]+=o.length,this[Xs].unshift(o),this[Yc].set(t,this[Xs].head),xT(this),!0)}has(t){if(!this[Yc].has(t))return!1;const n=this[Yc].get(t).value;return!E6(this,n)}get(t){return Iz(this,t,!0)}peek(t){return Iz(this,t,!1)}pop(){const t=this[Xs].tail;return t?(Uw(this,t),t.value):null}del(t){Uw(this,this[Yc].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Yc].forEach((t,n)=>Iz(this,n,!1))}}const Iz=(e,t,n)=>{const r=e[Yc].get(t);if(r){const i=r.value;if(E6(e,i)){if(Uw(e,r),!e[_C])return}else n&&(e[RWe]&&(r.value.now=Date.now()),e[Xs].unshiftNode(r));return i.value}},E6=(e,t)=>{if(!t||!t.maxAge&&!e[Vv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Vv]&&n>e[Vv]},xT=e=>{if(e[op]>e[Sv])for(let t=e[Xs].tail;e[op]>e[Sv]&&t!==null;){const n=t.prev;Uw(e,t),t=n}},Uw=(e,t)=>{if(t){const n=t.value;e[tp]&&e[tp](n.key,n.value),e[op]-=n.length,e[Yc].delete(n.key),e[Xs].removeNode(t)}};class bCn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const kwe=(e,t,n,r)=>{let i=n.value;E6(e,i)&&(Uw(e,n),e[_C]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var wCn=_Cn;const ECn=Object.freeze({loose:!0}),SCn=Object.freeze({}),xCn=e=>e?typeof e!="object"?ECn:e:SCn;var Zie=xCn,bG={exports:{}};const TCn="2.0.0",NWe=256,CCn=Number.MAX_SAFE_INTEGER||9007199254740991,ACn=16,ICn=NWe-6,OCn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ese={MAX_LENGTH:NWe,MAX_SAFE_COMPONENT_LENGTH:ACn,MAX_SAFE_BUILD_LENGTH:ICn,MAX_SAFE_INTEGER:CCn,RELEASE_TYPES:OCn,SEMVER_SPEC_VERSION:TCn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const PCn=typeof process=="object"&&Tz&&Tz.NODE_DEBUG&&/\bsemver\b/i.test(Tz.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var dj=PCn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=ese,s=dj;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),_=c++;s(m,_,g),l[m]=_,u[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(bG,bG.exports);var tse=bG.exports;const $we=/^[0-9]+$/,DWe=(e,t)=>{const n=$we.test(e),r=$we.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},kCn=(e,t)=>DWe(t,e);var $Cn={compareIdentifiers:DWe,rcompareIdentifiers:kCn};const f$=dj,{MAX_LENGTH:Rwe,MAX_SAFE_INTEGER:d$}=ese,{safeRe:Nwe,t:Dwe}=tse,RCn=Zie,{compareIdentifiers:pb}=$Cn;let NCn=class sd{constructor(t,n){if(n=RCn(n),t instanceof sd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Rwe)throw new TypeError(`version is longer than ${Rwe} characters`);f$("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Nwe[Dwe.LOOSE]:Nwe[Dwe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>d$||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d$||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d$||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<d$)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(f$("SemVer.compare",this.version,this.options,t),!(t instanceof sd)){if(typeof t=="string"&&t===this.version)return 0;t=new sd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof sd||(t=new sd(t,this.options)),pb(this.major,t.major)||pb(this.minor,t.minor)||pb(this.patch,t.patch)}comparePre(t){if(t instanceof sd||(t=new sd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(f$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return pb(r,i)}while(++n)}compareBuild(t){t instanceof sd||(t=new sd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(f$("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return pb(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),pb(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var nse=NCn;const Mwe=nse,DCn=(e,t,n)=>new Mwe(e,n).compare(new Mwe(t,n));var mx=DCn;const MCn=mx,LCn=(e,t,n)=>MCn(e,t,n)===0;var FCn=LCn;const jCn=mx,BCn=(e,t,n)=>jCn(e,t,n)!==0;var UCn=BCn;const zCn=mx,VCn=(e,t,n)=>zCn(e,t,n)>0;var HCn=VCn;const qCn=mx,WCn=(e,t,n)=>qCn(e,t,n)>=0;var GCn=WCn;const YCn=mx,KCn=(e,t,n)=>YCn(e,t,n)<0;var XCn=KCn;const QCn=mx,JCn=(e,t,n)=>QCn(e,t,n)<=0;var ZCn=JCn;const eAn=FCn,tAn=UCn,nAn=HCn,rAn=GCn,iAn=XCn,sAn=ZCn,oAn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return eAn(e,n,r);case"!=":return tAn(e,n,r);case">":return nAn(e,n,r);case">=":return rAn(e,n,r);case"<":return iAn(e,n,r);case"<=":return sAn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var aAn=oAn,Oz,Lwe;function uAn(){if(Lwe)return Oz;Lwe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Oz=t;const n=Zie,{safeRe:r,t:i}=tse,s=aAn,o=dj,a=nse,u=MWe();return Oz}var Pz,Fwe;function MWe(){if(Fwe)return Pz;Fwe=1;class e{constructor(M,B){if(B=r(B),M instanceof e)return M.loose===!!B.loose&&M.includePrerelease===!!B.includePrerelease?M:new e(M.raw,B);if(M instanceof i)return this.raw=M.value,this.set=[[M]],this.format(),this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=M.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(z=>this.parseRange(z.trim())).filter(z=>z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const z=this.set[0];if(this.set=this.set.filter(W=>!p(W[0])),this.set.length===0)this.set=[z];else if(this.set.length>1){for(const W of this.set)if(W.length===1&&m(W[0])){this.set=[W];break}}}this.format()}format(){return this.range=this.set.map(M=>M.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(M){const z=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+M,W=n.get(z);if(W)return W;const U=this.options.loose,Y=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];M=M.replace(Y,P(this.options.includePrerelease)),s("hyphen replace",M),M=M.replace(a[u.COMPARATORTRIM],l),s("comparator trim",M),M=M.replace(a[u.TILDETRIM],c),s("tilde trim",M),M=M.replace(a[u.CARETTRIM],f),s("caret trim",M);let q=M.split(" ").map(V=>y(V,this.options)).join(" ").split(/\s+/).map(V=>C(V,this.options));U&&(q=q.filter(V=>(s("loose invalid filter",V,this.options),!!V.match(a[u.COMPARATORLOOSE])))),s("range list",q);const D=new Map,L=q.map(V=>new i(V,this.options));for(const V of L){if(p(V))return[V];D.set(V.value,V)}D.size>1&&D.has("")&&D.delete("");const G=[...D.values()];return n.set(z,G),G}intersects(M,B){if(!(M instanceof e))throw new TypeError("a Range is required");return this.set.some(z=>g(z,B)&&M.set.some(W=>g(W,B)&&z.every(U=>W.every(Y=>U.intersects(Y,B)))))}test(M){if(!M)return!1;if(typeof M=="string")try{M=new o(M,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(N(this.set[B],M,this.options))return!0;return!1}}Pz=e;const t=wCn,n=new t({max:1e3}),r=Zie,i=uAn(),s=dj,o=nse,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=tse,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=ese,p=$=>$.value==="<0.0.0-0",m=$=>$.value==="",g=($,M)=>{let B=!0;const z=$.slice();let W=z.pop();for(;B&&z.length;)B=z.every(U=>W.intersects(U,M)),W=z.pop();return B},y=($,M)=>(s("comp",$,M),$=x($,M),s("caret",$),$=_($,M),s("tildes",$),$=b($,M),s("xrange",$),$=A($,M),s("stars",$),$),v=$=>!$||$.toLowerCase()==="x"||$==="*",_=($,M)=>$.trim().split(/\s+/).map(B=>w(B,M)).join(" "),w=($,M)=>{const B=M.loose?a[u.TILDELOOSE]:a[u.TILDE];return $.replace(B,(z,W,U,Y,q)=>{s("tilde",$,z,W,U,Y,q);let D;return v(W)?D="":v(U)?D=`>=${W}.0.0 <${+W+1}.0.0-0`:v(Y)?D=`>=${W}.${U}.0 <${W}.${+U+1}.0-0`:q?(s("replaceTilde pr",q),D=`>=${W}.${U}.${Y}-${q} <${W}.${+U+1}.0-0`):D=`>=${W}.${U}.${Y} <${W}.${+U+1}.0-0`,s("tilde return",D),D})},x=($,M)=>$.trim().split(/\s+/).map(B=>E(B,M)).join(" "),E=($,M)=>{s("caret",$,M);const B=M.loose?a[u.CARETLOOSE]:a[u.CARET],z=M.includePrerelease?"-0":"";return $.replace(B,(W,U,Y,q,D)=>{s("caret",$,W,U,Y,q,D);let L;return v(U)?L="":v(Y)?L=`>=${U}.0.0${z} <${+U+1}.0.0-0`:v(q)?U==="0"?L=`>=${U}.${Y}.0${z} <${U}.${+Y+1}.0-0`:L=`>=${U}.${Y}.0${z} <${+U+1}.0.0-0`:D?(s("replaceCaret pr",D),U==="0"?Y==="0"?L=`>=${U}.${Y}.${q}-${D} <${U}.${Y}.${+q+1}-0`:L=`>=${U}.${Y}.${q}-${D} <${U}.${+Y+1}.0-0`:L=`>=${U}.${Y}.${q}-${D} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?Y==="0"?L=`>=${U}.${Y}.${q}${z} <${U}.${Y}.${+q+1}-0`:L=`>=${U}.${Y}.${q}${z} <${U}.${+Y+1}.0-0`:L=`>=${U}.${Y}.${q} <${+U+1}.0.0-0`),s("caret return",L),L})},b=($,M)=>(s("replaceXRanges",$,M),$.split(/\s+/).map(B=>T(B,M)).join(" ")),T=($,M)=>{$=$.trim();const B=M.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return $.replace(B,(z,W,U,Y,q,D)=>{s("xRange",$,z,W,U,Y,q,D);const L=v(U),G=L||v(Y),V=G||v(q),H=V;return W==="="&&H&&(W=""),D=M.includePrerelease?"-0":"",L?W===">"||W==="<"?z="<0.0.0-0":z="*":W&&H?(G&&(Y=0),q=0,W===">"?(W=">=",G?(U=+U+1,Y=0,q=0):(Y=+Y+1,q=0)):W==="<="&&(W="<",G?U=+U+1:Y=+Y+1),W==="<"&&(D="-0"),z=`${W+U}.${Y}.${q}${D}`):G?z=`>=${U}.0.0${D} <${+U+1}.0.0-0`:V&&(z=`>=${U}.${Y}.0${D} <${U}.${+Y+1}.0-0`),s("xRange return",z),z})},A=($,M)=>(s("replaceStars",$,M),$.trim().replace(a[u.STAR],"")),C=($,M)=>(s("replaceGTE0",$,M),$.trim().replace(a[M.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=$=>(M,B,z,W,U,Y,q,D,L,G,V,H,te)=>(v(z)?B="":v(W)?B=`>=${z}.0.0${$?"-0":""}`:v(U)?B=`>=${z}.${W}.0${$?"-0":""}`:Y?B=`>=${B}`:B=`>=${B}${$?"-0":""}`,v(L)?D="":v(G)?D=`<${+L+1}.0.0-0`:v(V)?D=`<${L}.${+G+1}.0-0`:H?D=`<=${L}.${G}.${V}-${H}`:$?D=`<${L}.${G}.${+V+1}-0`:D=`<=${D}`,`${B} ${D}`.trim()),N=($,M,B)=>{for(let z=0;z<$.length;z++)if(!$[z].test(M))return!1;if(M.prerelease.length&&!B.includePrerelease){for(let z=0;z<$.length;z++)if(s($[z].semver),$[z].semver!==i.ANY&&$[z].semver.prerelease.length>0){const W=$[z].semver;if(W.major===M.major&&W.minor===M.minor&&W.patch===M.patch)return!0}return!1}return!0};return Pz}const lAn=MWe(),cAn=(e,t,n)=>{try{t=new lAn(t,n)}catch{return!1}return t.test(e)};var fAn=cAn,LWe=dCn(fAn);function dAn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var hAn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function FWe(e,...t){for(const n of t)pAn(e,n);return e}function pAn(e,t){for(const n of Object.keys(t))QS(e,n,t[n],!0)}const Xc=Zyn;let iI=r2n;const h$=typeof window<"u"?window:void 0;var Hwe;iI===void 0&&((Hwe=h$==null?void 0:h$.vl)!=null&&Hwe.compile)&&(iI=h$.vl);const mAn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},gAn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},g2={vega:"Vega","vega-lite":"Vega-Lite"},S6={vega:Xc.version,"vega-lite":iI?iI.version:"not available"},yAn={vega:e=>e,"vega-lite":(e,t)=>iI.compile(e,{config:t}).spec},vAn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,_An="chart-wrapper";function bAn(e){return typeof e=="function"}function jwe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${g2[r]} JSON Source`}function wAn(e,t){if(e.$schema){const n=OWe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${g2[n.library]}, but mode argument sets ${g2[t]??t}.`);const r=n.library;return LWe(S6[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${g2[r]} ${n.version}, but the current version of ${g2[r]} is v${S6[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function jWe(e){return!!(e&&"load"in e)}function Bwe(e){return jWe(e)?e:Xc.loader(e)}function EAn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function SAn(e,t,n={}){let r,i;pt(t)?(i=Bwe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=EAn(r),o=s.loader;(!i||o)&&(i=Bwe(n.loader??o));const a=await Uwe(s,i),u=await Uwe(n,i),l={...FWe(u,a),config:XS(u.config??{},a.config??{})};return await TAn(e,r,l,i)}async function Uwe(e,t){const n=pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function xAn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function TAn(e,t,n={},r){const i=n.theme?XS(rCn[n.theme],n.config??{}):n.config,s=_y(n.actions)?n.actions:FWe({},mAn,n.actions??{}),o={...gAn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Xc.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:E,rootContainer:b}=xAn(c);if(!E.getElementById(x)){const T=document.createElement("style");T.id=x,T.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?hAn.toString():n.defaultStyle,b.appendChild(T)}}const f=wAn(t,n.mode);let d=yAn[f](t,i);if(f==="vega-lite"&&d.$schema){const x=OWe(d.$schema);LWe(S6.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${S6.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(_An),c.appendChild(x),h=x}const p=n.patch;if(p&&(d=p instanceof Function?p(d):S5(d,p,!0,!1).newDocument),n.formatLocale&&Xc.formatLocale(n.formatLocale),n.timeFormatLocale&&Xc.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const E=n.expressionFunctions[x];"fn"in E?Xc.expressionFunction(x,E.fn,E.visitor):E instanceof Function&&Xc.expressionFunction(x,E)}const{ast:m}=n,g=Xc.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Xc.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Xc.expressionInterpreter??n.expr??lvn}:{}});if(y.addSignalListener("autosize",(x,E)=>{const{type:b}=E;b=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):b=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):b=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:E}=n,b=x&&!jWe(x)?x==null?void 0:x.baseURL:void 0,T=bAn(E)?E:new fCn({baseURL:b,...E===!0?{}:E}).call;y.tooltip(T)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:x,updateSet:E}=typeof v=="boolean"?{}:v;y.hover(x,E)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const b=document.createElement("details");b.title=o.CLICK_TO_VIEW_ACTIONS,c.append(b),x=b;const T=document.createElement("summary");T.innerHTML=vAn,b.append(T),_=A=>{b.contains(A.target)||b.removeAttribute("open")},document.addEventListener("click",_)}const E=document.createElement("div");if(x.append(E),E.classList.add("vega-actions"),s===!0||s.export!==!1){for(const b of["svg","png"])if(s===!0||s.export===!0||s.export[b]){const T=o[`${b.toUpperCase()}_ACTION`],A=document.createElement("a"),C=gt(n.scaleFactor)?n.scaleFactor[b]:n.scaleFactor;A.text=T,A.href="#",A.target="_blank",A.download=`${l}.${b}`,A.addEventListener("mousedown",async function(P){P.preventDefault();const N=await y.toImageURL(b,C);this.href=N}),E.append(A)}}if(s===!0||s.source!==!1){const b=document.createElement("a");b.text=o.SOURCE_ACTION,b.href="#",b.addEventListener("click",function(T){jwe(AU(t),n.sourceHeader??"",n.sourceFooter??"",f),T.preventDefault()}),E.append(b)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const b=document.createElement("a");b.text=o.COMPILED_ACTION,b.href="#",b.addEventListener("click",function(T){jwe(AU(d),n.sourceHeader??"",n.sourceFooter??"","vega"),T.preventDefault()}),E.append(b)}if(s===!0||s.editor!==!1){const b=n.editorUrl??"https://vega.github.io/editor/",T=document.createElement("a");T.text=o.EDITOR_ACTION,T.href="#",T.addEventListener("click",function(A){dAn(window,b,{config:i,mode:f,renderer:a,spec:AU(t)}),A.preventDefault()}),E.append(T)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function CAn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function AAn(e,t,n){n&&(CAn(n)?n(e.data(t)):e.change(t,Xc.changeset().remove(()=>!0).insert(n)))}function IAn(e,t){Object.keys(t).forEach(n=>{AAn(e,n,t[n])})}function BWe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const UWe=()=>{};function kz(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function OAn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=BWe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!_V(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function zwe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function $z(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function y2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class zWe extends F.PureComponent{constructor(){super(...arguments),y2(this,"containerRef",F.createRef()),y2(this,"resultPromise",void 0),y2(this,"handleError",t=>{const{onError:n=UWe}=this.props;n(t,this.containerRef.current),console.warn(t)}),y2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=BWe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=OAn($z(this.props),$z(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!Eq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&zwe(a,s),i&&kz(a,i)),a.run()})}else Eq(i,s)||this.modifyView(o=>{s&&zwe(o,s),i&&kz(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=$z(this.props);this.resultPromise=SAn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;kz(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return F.createElement("div",{ref:this.containerRef,className:t,style:n})}}y2(zWe,"propTypes",{className:Yt.string,onError:Yt.func});function wG(){return wG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wG.apply(this,arguments)}function EG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const PAn={};class VWe extends F.PureComponent{constructor(){super(...arguments),EG(this,"vegaEmbed",F.createRef()),EG(this,"handleNewView",t=>{this.update();const{onNewView:n=UWe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Eq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{IAn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return F.createElement(zWe,wG({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}EG(VWe,"defaultProps",{data:PAn});function SG(){return SG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SG.apply(this,arguments)}function kAn(e){return F.createElement(VWe,SG({},e,{mode:"vega-lite"}))}function Vwe(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function $An(e){const{studyId:t,allParticipants:n,config:r}=e,[i,{open:s,close:o}]=OT(!1),a=ym(),[u,l]=Wv(),c=n.filter(C=>C.completed).map(C=>Math.max(...Object.values(C.answers).map(P=>P.endTime))),[f,d]=I.useState([new Date(new Date(Math.min(...c.length>0?c:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...c.length>0?c:[new Date().getTime()])).setHours(24,0,0,0))]),h=I.useMemo(()=>n.filter(C=>C.completed&&Vwe(C.answers,f)),[n,f]),p=I.useMemo(()=>n.filter(C=>!C.completed&&Vwe(C.answers,f)),[n,f]),m=I.useMemo(()=>{var C,P;return h.length>0?[{Date:(C=f[0])==null?void 0:C.getTime(),Participants:0},...h.map(N=>Math.max(...Object.values(N.answers).map($=>$.endTime).flat())).sort((N,$)=>N-$).map((N,$)=>({Date:N,Participants:$})),{Date:(P=f[1])==null?void 0:P.getTime(),Participants:h.length}]:[]},[h,f]),g=I.useMemo(()=>{var C,P;return{width:l.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(C=f[0])==null?void 0:C.getTime(),(P=f[1])==null?void 0:P.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:m}}},[l.width,f,m]),[y,{close:v,open:_}]=OT(!1),[w,{close:x,open:E}]=OT(!1),[b,{close:T,open:A}]=OT(!1);return k.jsxs(Em,{children:[k.jsxs(vI,{ref:u,p:"lg",shadow:"md",withBorder:!0,children:[k.jsxs(jn,{align:"center",mb:16,justify:"space-between",children:[k.jsxs(jn,{direction:"column",children:[k.jsx(Qi,{order:5,mb:4,children:t}),k.jsxs(jn,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[k.jsxs(Yv,{size:"sm",color:"orange",children:["Total:",p.length+h.length]}),k.jsxs(Yv,{size:"sm",color:"green",children:["Completed:",h.length]}),k.jsxs(Yv,{size:"sm",color:"cyan",children:["In Progress:",p.length]})]})]}),k.jsxs(Wa,{children:[k.jsxs(Oi,{opened:y,children:[k.jsx(Oi.Target,{children:k.jsx(ur,{variant:"light",disabled:n.length===0,onClick:()=>{YJ(JSON.stringify(n,null,2),`${t}_all.json`)},onMouseEnter:_,onMouseLeave:v,px:4,children:k.jsx(h0t,{})})}),k.jsx(Oi.Dropdown,{children:k.jsx(ze,{children:"Download all participants data as JSON"})})]}),k.jsxs(Oi,{opened:w,children:[k.jsx(Oi.Target,{children:k.jsx(ur,{variant:"light",disabled:n.length===0,onClick:s,onMouseEnter:E,onMouseLeave:x,px:4,children:k.jsx($Oe,{})})}),k.jsx(Oi.Dropdown,{children:k.jsx(ze,{children:"Download all participants data as a tidy CSV"})})]}),k.jsxs(Oi,{opened:b,children:[k.jsx(Oi.Target,{children:k.jsx(ur,{onClick:()=>a(`/analysis/stats/${t}`),onMouseEnter:A,onMouseLeave:T,px:4,children:k.jsx(f0t,{})})}),k.jsx(Oi.Dropdown,{children:k.jsx(ze,{children:"Analyze and manage study data"})})]})]})]}),k.jsx(C8e,{label:k.jsx(ze,{children:"Time Filter:"}),placeholder:"Pick dates range",value:f,onChange:d}),m.length>0?k.jsxs(k.Fragment,{children:[k.jsx(ze,{mt:16,children:"Finished Participants"}),k.jsx(kAn,{spec:g,actions:!1})]}):k.jsx(dt,{h:293.4,children:k.jsx(_1,{style:{height:"100%"},children:k.jsx(ze,{children:"Not enough participants for chart"})})})]}),i&&k.jsx(xUt,{opened:i,close:o,filename:`${t}_all_tidy.csv`,studyConfig:r,data:n})]})}function RAn(e){const{globalConfig:t}=e,[n,r]=I.useState(!1),[i,s]=I.useState({}),[o,a]=I.useState({}),{storageEngine:u}=nu();return I.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await w5(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),k.jsxs(dt,{children:[k.jsx(Qi,{mb:20,order:4,children:"Your Studies:"}),k.jsxs(Oo,{children:[t.configsList.map(l=>i[l]&&k.jsx(Oo.Col,{md:12,xl:6,children:k.jsx($An,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),k.jsx(If,{visible:n})]})]})}function NAn({globalConfig:e}){return k.jsxs(hI,{children:[k.jsx(iC,{studyIds:e.configsList}),k.jsx(Em,{fluid:!0,children:k.jsx(RAn,{globalConfig:e})})]})}function DAn(){const{user:e,triggerAuth:t}=YS(),{storageEngine:n}=nu(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(""),[y,v]=I.useState(null),_=n$e({initialValues:{email:""},validate:{email:hTt("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof rf){const P=await(n==null?void 0:n.getUserManagementData("authentication"));i(P==null?void 0:P.isEnabled);const N=await(n==null?void 0:n.getUserManagementData("adminUsers"));N&&N.adminUsersList&&o(N==null?void 0:N.adminUsersList.map($=>$.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof rf){const C=await V5e(n,u);C&&C.email&&v({email:C.email,uid:C.uid}),p(!0)}u(!1)},x=async C=>{u(!0),n instanceof rf&&C&&(await n.changeAuth(!0),await n.addAdminUser(C),o([C.email]),i(!0),t()),p(!1),u(!1)},E=async()=>{if(u(!0),n instanceof rf){await n.addAdminUser({email:_.values.email,uid:null});const C=await n.getUserManagementData("adminUsers");o(C==null?void 0:C.adminUsersList.map(P=>P.email))}u(!1),c(!1),_.setValues({email:""})},b=C=>{d(!0),g(C)},T=async()=>{if(u(!0),n instanceof rf){await n.removeAdminUser(m);const C=await n.getUserManagementData("adminUsers");o(C==null?void 0:C.adminUsersList.map(P=>P.email))}d(!1),u(!1)},A=I.useMemo(()=>n instanceof rf,[n]);return k.jsxs(k.Fragment,{children:[k.jsx(Em,{children:k.jsxs(vI,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[k.jsx(Qi,{mb:20,order:3,children:"Authentication"}),r?k.jsx(jn,{children:k.jsx(ze,{children:"Authentication is enabled."})}):k.jsxs(jn,{justify:"space-between",children:[k.jsx(dt,{children:k.jsx(ze,{children:"Authentication is currently disabled."})}),k.jsx(of,{label:"You can only enable auth when using Firebase",disabled:A,children:k.jsx(ur,{onClick:C=>A?w():C.preventDefault(),color:"green","data-disabled":A?void 0:!0,sx:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?k.jsxs(jn,{mt:40,direction:"column",children:[k.jsxs(jn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[k.jsx(Qi,{order:6,children:"Enabled Users"}),k.jsx(NOe,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(C=>{var P;return k.jsxs(jn,{justify:"space-between",mb:10,children:[k.jsx(ze,{children:C}),C===((P=e.user)==null?void 0:P.email)?k.jsx(ze,{color:"blue",size:"xs",children:"You"}):k.jsx(g0,{variant:"subtle",onClick:()=>b(C),children:k.jsx(ROe,{color:"red"})})]},C)}):null]}):null]})}),k.jsx(ac,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:k.jsxs(dt,{component:"form",onSubmit:_.onSubmit(()=>E()),children:[k.jsx(Kv,{icon:k.jsx(o0t,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),k.jsxs(jn,{mt:30,justify:"right",children:[k.jsx(ur,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),k.jsx(ur,{type:"submit",children:"Save"})]})]})}),k.jsxs(ac,{opened:f,size:"large",onClose:()=>d(!1),title:k.jsxs(ze,{fw:700,children:["Remove",m,"?"]}),children:[k.jsxs(ze,{mt:40,children:["Are you sure you want to remove",k.jsx("b",{children:m})," ","as an administrator?"]}),k.jsxs(jn,{mt:40,justify:"right",children:[k.jsx(ur,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),k.jsx(ur,{onClick:()=>T(),children:"Yes, I'm sure."})]})]}),k.jsxs(ac,{opened:h,size:"md",onClose:()=>d(!1),title:k.jsx(ze,{fw:700,children:"Enable Authentication?"}),children:[k.jsxs(ze,{mt:40,children:["User"," ",k.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),k.jsxs(jn,{mt:40,justify:"right",children:[k.jsx(ur,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),k.jsx(ur,{onClick:()=>x(y),children:"Yes, I'm sure."})]})]}),k.jsx(If,{visible:a})]})}async function MAn(){const t=await(await fetch(`${bh}global.json`)).text();return bUt(t)}function LAn(){const[e,t]=I.useState(null),[n,r]=I.useState({});return I.useEffect(()=>{async function i(){e&&r(await OJt(e))}i()},[e]),I.useEffect(()=>{e||MAn().then(i=>{t(i)})},[e]),e?k.jsx(_Xe,{basename:bh,children:k.jsx(yJt,{children:k.jsx(Wgt,{children:k.jsxs(yXe,{children:[k.jsx(Kh,{path:"/",element:k.jsxs(k.Fragment,{children:[k.jsx(iC,{studyIds:e.configsList}),k.jsx(ZEt,{globalConfig:e,studyConfigs:n})]})}),k.jsx(Kh,{path:"/:studyId/*",element:k.jsx(PJt,{globalConfig:e})}),k.jsx(Kh,{path:"/analysis/dashboard",element:k.jsx(_U,{children:k.jsx(NAn,{globalConfig:e})})}),k.jsx(Kh,{path:"/analysis",element:k.jsx(FH,{to:"/analysis/dashboard"})}),k.jsx(Kh,{path:"/analysis/stats/:studyId/:tab",element:k.jsx(_U,{children:k.jsx(DJt,{globalConfig:e})})}),k.jsx(Kh,{path:"/analysis/stats/:studyId",element:k.jsx(FH,{to:"./table",replace:!0})}),k.jsx(Kh,{path:"/settings",element:k.jsx(_U,{children:k.jsxs(hI,{children:[k.jsx(iC,{studyIds:e.configsList}),k.jsx(DAn,{})]})})}),k.jsx(Kh,{path:"/login",element:k.jsxs(k.Fragment,{children:[k.jsx(iC,{studyIds:e.configsList}),k.jsx(MJt,{})]})})]})})})}):null}class FAn extends j5e{constructor(){super("localStorage");Ju(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await vq.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await $w(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await $w(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=UM();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=vq.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=UM();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await $w(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function jAn(){let e,t=!1;{const n=new rf;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new FAn;await n.connect(),e=n}return e}function BAn(){const{storageEngine:e,setStorageEngine:t}=nu();return I.useEffect(()=>{if(e!==void 0)return;async function n(){const r=await jAn();t(r)}n()},[t,e]),k.jsx(LAn,{})}Rz.createRoot(document.getElementById("root")).render(k.jsx(F.StrictMode,{children:k.jsx(bKe,{children:k.jsx(BAn,{})})}))});export default UAn();
